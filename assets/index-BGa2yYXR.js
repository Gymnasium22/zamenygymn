function EF(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(n,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=r(s);fetch(s.href,A)}})();function YC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZC={exports:{}},jf={},e_={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=Symbol.for("react.element"),TF=Symbol.for("react.portal"),kF=Symbol.for("react.fragment"),FF=Symbol.for("react.strict_mode"),SF=Symbol.for("react.profiler"),UF=Symbol.for("react.provider"),QF=Symbol.for("react.context"),NF=Symbol.for("react.forward_ref"),RF=Symbol.for("react.suspense"),jF=Symbol.for("react.memo"),DF=Symbol.for("react.lazy"),My=Symbol.iterator;function PF(t){return t===null||typeof t!="object"?null:(t=My&&t[My]||t["@@iterator"],typeof t=="function"?t:null)}var t_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r_=Object.assign,n_={};function Ja(t,e,r){this.props=t,this.context=e,this.refs=n_,this.updater=r||t_}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s_(){}s_.prototype=Ja.prototype;function Y0(t,e,r){this.props=t,this.context=e,this.refs=n_,this.updater=r||t_}var Z0=Y0.prototype=new s_;Z0.constructor=Y0;r_(Z0,Ja.prototype);Z0.isPureReactComponent=!0;var Oy=Array.isArray,A_=Object.prototype.hasOwnProperty,ew={current:null},i_={key:!0,ref:!0,__self:!0,__source:!0};function o_(t,e,r){var n,s={},A=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)A_.call(e,n)&&!i_.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:fu,type:t,key:A,ref:i,props:s,_owner:ew.current}}function LF(t,e){return{$$typeof:fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tw(t){return typeof t=="object"&&t!==null&&t.$$typeof===fu}function MF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Hy=/\/+/g;function $g(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MF(""+t.key):e.toString(36)}function Yd(t,e,r,n,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case fu:case TF:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+$g(i,0):n,Oy(s)?(r="",t!=null&&(r=t.replace(Hy,"$&/")+"/"),Yd(s,e,r,"",function(c){return c})):s!=null&&(tw(s)&&(s=LF(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Hy,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Oy(t))for(var a=0;a<t.length;a++){A=t[a];var l=n+$g(A,a);i+=Yd(A,e,r,l,s)}else if(l=PF(t),typeof l=="function")for(t=l.call(t),a=0;!(A=t.next()).done;)A=A.value,l=n+$g(A,a++),i+=Yd(A,e,r,l,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function rd(t,e,r){if(t==null)return t;var n=[],s=0;return Yd(t,n,"","",function(A){return e.call(r,A,s++)}),n}function OF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gn={current:null},Zd={transition:null},HF={ReactCurrentDispatcher:gn,ReactCurrentBatchConfig:Zd,ReactCurrentOwner:ew};function a_(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:rd,forEach:function(t,e,r){rd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return rd(t,function(){e++}),e},toArray:function(t){return rd(t,function(e){return e})||[]},only:function(t){if(!tw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};lt.Component=Ja;lt.Fragment=kF;lt.Profiler=SF;lt.PureComponent=Y0;lt.StrictMode=FF;lt.Suspense=RF;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HF;lt.act=a_;lt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=r_({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=ew.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)A_.call(e,l)&&!i_.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:fu,type:t.type,key:s,ref:A,props:n,_owner:i}};lt.createContext=function(t){return t={$$typeof:QF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UF,_context:t},t.Consumer=t};lt.createElement=o_;lt.createFactory=function(t){var e=o_.bind(null,t);return e.type=t,e};lt.createRef=function(){return{current:null}};lt.forwardRef=function(t){return{$$typeof:NF,render:t}};lt.isValidElement=tw;lt.lazy=function(t){return{$$typeof:DF,_payload:{_status:-1,_result:t},_init:OF}};lt.memo=function(t,e){return{$$typeof:jF,type:t,compare:e===void 0?null:e}};lt.startTransition=function(t){var e=Zd.transition;Zd.transition={};try{t()}finally{Zd.transition=e}};lt.unstable_act=a_;lt.useCallback=function(t,e){return gn.current.useCallback(t,e)};lt.useContext=function(t){return gn.current.useContext(t)};lt.useDebugValue=function(){};lt.useDeferredValue=function(t){return gn.current.useDeferredValue(t)};lt.useEffect=function(t,e){return gn.current.useEffect(t,e)};lt.useId=function(){return gn.current.useId()};lt.useImperativeHandle=function(t,e,r){return gn.current.useImperativeHandle(t,e,r)};lt.useInsertionEffect=function(t,e){return gn.current.useInsertionEffect(t,e)};lt.useLayoutEffect=function(t,e){return gn.current.useLayoutEffect(t,e)};lt.useMemo=function(t,e){return gn.current.useMemo(t,e)};lt.useReducer=function(t,e,r){return gn.current.useReducer(t,e,r)};lt.useRef=function(t){return gn.current.useRef(t)};lt.useState=function(t){return gn.current.useState(t)};lt.useSyncExternalStore=function(t,e,r){return gn.current.useSyncExternalStore(t,e,r)};lt.useTransition=function(){return gn.current.useTransition()};lt.version="18.3.1";e_.exports=lt;var I=e_.exports;const Os=YC(I),VF=EF({__proto__:null,default:Os},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KF=I,GF=Symbol.for("react.element"),zF=Symbol.for("react.fragment"),$F=Object.prototype.hasOwnProperty,WF=KF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qF={key:!0,ref:!0,__self:!0,__source:!0};function l_(t,e,r){var n,s={},A=null,i=null;r!==void 0&&(A=""+r),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)$F.call(e,n)&&!qF.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:GF,type:t,key:A,ref:i,props:s,_owner:WF.current}}jf.Fragment=zF;jf.jsx=l_;jf.jsxs=l_;ZC.exports=jf;var o=ZC.exports,tm={},c_={exports:{}},Pn={},u_={exports:{}},d_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,Be){var ke=ie.length;ie.push(Be);e:for(;0<ke;){var Ne=ke-1>>>1,De=ie[Ne];if(0<s(De,Be))ie[Ne]=Be,ie[ke]=De,ke=Ne;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var Be=ie[0],ke=ie.pop();if(ke!==Be){ie[0]=ke;e:for(var Ne=0,De=ie.length,W=De>>>1;Ne<W;){var $=2*(Ne+1)-1,Fe=ie[$],we=$+1,Pe=ie[we];if(0>s(Fe,ke))we<De&&0>s(Pe,Fe)?(ie[Ne]=Pe,ie[we]=ke,Ne=we):(ie[Ne]=Fe,ie[$]=ke,Ne=$);else if(we<De&&0>s(Pe,ke))ie[Ne]=Pe,ie[we]=ke,Ne=we;else break e}}return Be}function s(ie,Be){var ke=ie.sortIndex-Be.sortIndex;return ke!==0?ke:ie.id-Be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,y=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(ie){for(var Be=r(c);Be!==null;){if(Be.callback===null)n(c);else if(Be.startTime<=ie)n(c),Be.sortIndex=Be.expirationTime,e(l,Be);else break;Be=r(c)}}function S(ie){if(v=!1,_(ie),!y)if(r(l)!==null)y=!0,Xe(U);else{var Be=r(c);Be!==null&&ze(S,Be.startTime-ie)}}function U(ie,Be){y=!1,v&&(v=!1,B(b),b=-1),p=!0;var ke=f;try{for(_(Be),h=r(l);h!==null&&(!(h.expirationTime>Be)||ie&&!R());){var Ne=h.callback;if(typeof Ne=="function"){h.callback=null,f=h.priorityLevel;var De=Ne(h.expirationTime<=Be);Be=t.unstable_now(),typeof De=="function"?h.callback=De:h===r(l)&&n(l),_(Be)}else n(l);h=r(l)}if(h!==null)var W=!0;else{var $=r(c);$!==null&&ze(S,$.startTime-Be),W=!1}return W}finally{h=null,f=ke,p=!1}}var N=!1,w=null,b=-1,C=5,F=-1;function R(){return!(t.unstable_now()-F<C)}function L(){if(w!==null){var ie=t.unstable_now();F=ie;var Be=!0;try{Be=w(!0,ie)}finally{Be?Q():(N=!1,w=null)}}else N=!1}var Q;if(typeof x=="function")Q=function(){x(L)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,We=Ge.port2;Ge.port1.onmessage=L,Q=function(){We.postMessage(null)}}else Q=function(){E(L,0)};function Xe(ie){w=ie,N||(N=!0,Q())}function ze(ie,Be){b=E(function(){ie(t.unstable_now())},Be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,Xe(U))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(ie){switch(f){case 1:case 2:case 3:var Be=3;break;default:Be=f}var ke=f;f=Be;try{return ie()}finally{f=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,Be){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ke=f;f=ie;try{return Be()}finally{f=ke}},t.unstable_scheduleCallback=function(ie,Be,ke){var Ne=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Ne+ke:Ne):ke=Ne,ie){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ke+De,ie={id:d++,callback:Be,priorityLevel:ie,startTime:ke,expirationTime:De,sortIndex:-1},ke>Ne?(ie.sortIndex=ke,e(c,ie),r(l)===null&&ie===r(c)&&(v?(B(b),b=-1):v=!0,ze(S,ke-Ne))):(ie.sortIndex=De,e(l,ie),y||p||(y=!0,Xe(U))),ie},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(ie){var Be=f;return function(){var ke=f;f=Be;try{return ie.apply(this,arguments)}finally{f=ke}}}})(d_);u_.exports=d_;var XF=u_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JF=I,Rn=XF;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h_=new Set,Uc={};function vo(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for(Uc[t]=e,t=0;t<e.length;t++)h_.add(e[t])}var Js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,YF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vy={},Ky={};function ZF(t){return rm.call(Ky,t)?!0:rm.call(Vy,t)?!1:YF.test(t)?Ky[t]=!0:(Vy[t]=!0,!1)}function eS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tS(t,e,r,n){if(e===null||typeof e>"u"||eS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,r,n,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kr[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kr[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kr[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kr[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kr[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kr[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kr[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kr[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kr[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var rw=/[\-:]([a-z])/g;function nw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rw,nw);Kr[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rw,nw);Kr[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rw,nw);Kr[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kr[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kr.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kr[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function sw(t,e,r,n){var s=Kr.hasOwnProperty(e)?Kr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tS(e,r,s,n)&&(r=null),n||s===null?ZF(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var iA=JF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nd=Symbol.for("react.element"),Yo=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),Aw=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),f_=Symbol.for("react.provider"),g_=Symbol.for("react.context"),iw=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),Am=Symbol.for("react.suspense_list"),ow=Symbol.for("react.memo"),_A=Symbol.for("react.lazy"),p_=Symbol.for("react.offscreen"),Gy=Symbol.iterator;function Il(t){return t===null||typeof t!="object"?null:(t=Gy&&t[Gy]||t["@@iterator"],typeof t=="function"?t:null)}var Ar=Object.assign,Wg;function zl(t){if(Wg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Wg=e&&e[1]||""}return`
`+Wg+t}var qg=!1;function Xg(t,e){if(!t||qg)return"";qg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=n.stack.split(`
`),i=s.length-1,a=A.length-1;1<=i&&0<=a&&s[i]!==A[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==A[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==A[a]){var l=`
`+s[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{qg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?zl(t):""}function rS(t){switch(t.tag){case 5:return zl(t.type);case 16:return zl("Lazy");case 13:return zl("Suspense");case 19:return zl("SuspenseList");case 0:case 2:case 15:return t=Xg(t.type,!1),t;case 11:return t=Xg(t.type.render,!1),t;case 1:return t=Xg(t.type,!0),t;default:return""}}function im(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zo:return"Fragment";case Yo:return"Portal";case nm:return"Profiler";case Aw:return"StrictMode";case sm:return"Suspense";case Am:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case g_:return(t.displayName||"Context")+".Consumer";case f_:return(t._context.displayName||"Context")+".Provider";case iw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ow:return e=t.displayName||null,e!==null?e:im(t.type)||"Memo";case _A:e=t._payload,t=t._init;try{return im(t(e))}catch{}}return null}function nS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return im(e);case 8:return e===Aw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function m_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sS(t){var e=m_(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,A=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sd(t){t._valueTracker||(t._valueTracker=sS(t))}function w_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=m_(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function om(t,e){var r=e.checked;return Ar({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function zy(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=oi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x_(t,e){e=e.checked,e!=null&&sw(t,"checked",e,!1)}function am(t,e){x_(t,e);var r=oi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lm(t,e.type,r):e.hasOwnProperty("defaultValue")&&lm(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $y(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function lm(t,e,r){(e!=="number"||Th(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var $l=Array.isArray;function ha(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+oi(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Ar({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wy(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ge(92));if($l(r)){if(1<r.length)throw Error(ge(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:oi(r)}}function y_(t,e){var r=oi(e.value),n=oi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function qy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function v_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function um(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ad,B_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ad=Ad||document.createElement("div"),Ad.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ad.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AS=["Webkit","ms","Moz","O"];Object.keys(cc).forEach(function(t){AS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cc[e]=cc[t]})});function b_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cc.hasOwnProperty(t)&&cc[t]?(""+e).trim():e+"px"}function C_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=b_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var iS=Ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dm(t,e){if(e){if(iS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function hm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=null;function aw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,fa=null,ga=null;function Xy(t){if(t=mu(t)){if(typeof gm!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=Of(e),gm(t.stateNode,t.type,e))}}function __(t){fa?ga?ga.push(t):ga=[t]:fa=t}function I_(){if(fa){var t=fa,e=ga;if(ga=fa=null,Xy(t),e)for(t=0;t<e.length;t++)Xy(e[t])}}function E_(t,e){return t(e)}function T_(){}var Jg=!1;function k_(t,e,r){if(Jg)return t(e,r);Jg=!0;try{return E_(t,e,r)}finally{Jg=!1,(fa!==null||ga!==null)&&(T_(),I_())}}function Nc(t,e){var r=t.stateNode;if(r===null)return null;var n=Of(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ge(231,e,typeof r));return r}var pm=!1;if(Js)try{var El={};Object.defineProperty(El,"passive",{get:function(){pm=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{pm=!1}function oS(t,e,r,n,s,A,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var uc=!1,kh=null,Fh=!1,mm=null,aS={onError:function(t){uc=!0,kh=t}};function lS(t,e,r,n,s,A,i,a,l){uc=!1,kh=null,oS.apply(aS,arguments)}function cS(t,e,r,n,s,A,i,a,l){if(lS.apply(this,arguments),uc){if(uc){var c=kh;uc=!1,kh=null}else throw Error(ge(198));Fh||(Fh=!0,mm=c)}}function Bo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function F_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jy(t){if(Bo(t)!==t)throw Error(ge(188))}function uS(t){var e=t.alternate;if(!e){if(e=Bo(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var A=s.alternate;if(A===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===r)return Jy(s),t;if(A===n)return Jy(s),e;A=A.sibling}throw Error(ge(188))}if(r.return!==n.return)r=s,n=A;else{for(var i=!1,a=s.child;a;){if(a===r){i=!0,r=s,n=A;break}if(a===n){i=!0,n=s,r=A;break}a=a.sibling}if(!i){for(a=A.child;a;){if(a===r){i=!0,r=A,n=s;break}if(a===n){i=!0,n=A,r=s;break}a=a.sibling}if(!i)throw Error(ge(189))}}if(r.alternate!==n)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?t:e}function S_(t){return t=uS(t),t!==null?U_(t):null}function U_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=U_(t);if(e!==null)return e;t=t.sibling}return null}var Q_=Rn.unstable_scheduleCallback,Yy=Rn.unstable_cancelCallback,dS=Rn.unstable_shouldYield,hS=Rn.unstable_requestPaint,dr=Rn.unstable_now,fS=Rn.unstable_getCurrentPriorityLevel,lw=Rn.unstable_ImmediatePriority,N_=Rn.unstable_UserBlockingPriority,Sh=Rn.unstable_NormalPriority,gS=Rn.unstable_LowPriority,R_=Rn.unstable_IdlePriority,Df=null,bs=null;function pS(t){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(Df,t,void 0,(t.current.flags&128)===128)}catch{}}var as=Math.clz32?Math.clz32:xS,mS=Math.log,wS=Math.LN2;function xS(t){return t>>>=0,t===0?32:31-(mS(t)/wS|0)|0}var id=64,od=4194304;function Wl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,A=t.pingedLanes,i=r&268435455;if(i!==0){var a=i&~s;a!==0?n=Wl(a):(A&=i,A!==0&&(n=Wl(A)))}else i=r&~s,i!==0?n=Wl(i):A!==0&&(n=Wl(A));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-as(e),s=1<<r,n|=t[r],e&=~s;return n}function yS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-as(A),a=1<<i,l=s[i];l===-1?(!(a&r)||a&n)&&(s[i]=yS(a,e)):l<=e&&(t.expiredLanes|=a),A&=~a}}function wm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function j_(){var t=id;return id<<=1,!(id&4194240)&&(id=64),t}function Yg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function gu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-as(e),t[e]=r}function BS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-as(r),A=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~A}}function cw(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-as(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ft=0;function D_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P_,uw,L_,M_,O_,xm=!1,ad=[],GA=null,zA=null,$A=null,Rc=new Map,jc=new Map,TA=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e){switch(t){case"focusin":case"focusout":GA=null;break;case"dragenter":case"dragleave":zA=null;break;case"mouseover":case"mouseout":$A=null;break;case"pointerover":case"pointerout":Rc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(e.pointerId)}}function Tl(t,e,r,n,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:A,targetContainers:[s]},e!==null&&(e=mu(e),e!==null&&uw(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CS(t,e,r,n,s){switch(e){case"focusin":return GA=Tl(GA,t,e,r,n,s),!0;case"dragenter":return zA=Tl(zA,t,e,r,n,s),!0;case"mouseover":return $A=Tl($A,t,e,r,n,s),!0;case"pointerover":var A=s.pointerId;return Rc.set(A,Tl(Rc.get(A)||null,t,e,r,n,s)),!0;case"gotpointercapture":return A=s.pointerId,jc.set(A,Tl(jc.get(A)||null,t,e,r,n,s)),!0}return!1}function H_(t){var e=$i(t.target);if(e!==null){var r=Bo(e);if(r!==null){if(e=r.tag,e===13){if(e=F_(r),e!==null){t.blockedOn=e,O_(t.priority,function(){L_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=ym(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);fm=n,r.target.dispatchEvent(n),fm=null}else return e=mu(r),e!==null&&uw(e),t.blockedOn=r,!1;e.shift()}return!0}function ev(t,e,r){eh(t)&&r.delete(e)}function _S(){xm=!1,GA!==null&&eh(GA)&&(GA=null),zA!==null&&eh(zA)&&(zA=null),$A!==null&&eh($A)&&($A=null),Rc.forEach(ev),jc.forEach(ev)}function kl(t,e){t.blockedOn===e&&(t.blockedOn=null,xm||(xm=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,_S)))}function Dc(t){function e(s){return kl(s,t)}if(0<ad.length){kl(ad[0],t);for(var r=1;r<ad.length;r++){var n=ad[r];n.blockedOn===t&&(n.blockedOn=null)}}for(GA!==null&&kl(GA,t),zA!==null&&kl(zA,t),$A!==null&&kl($A,t),Rc.forEach(e),jc.forEach(e),r=0;r<TA.length;r++)n=TA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<TA.length&&(r=TA[0],r.blockedOn===null);)H_(r),r.blockedOn===null&&TA.shift()}var pa=iA.ReactCurrentBatchConfig,Qh=!0;function IS(t,e,r,n){var s=Ft,A=pa.transition;pa.transition=null;try{Ft=1,dw(t,e,r,n)}finally{Ft=s,pa.transition=A}}function ES(t,e,r,n){var s=Ft,A=pa.transition;pa.transition=null;try{Ft=4,dw(t,e,r,n)}finally{Ft=s,pa.transition=A}}function dw(t,e,r,n){if(Qh){var s=ym(t,e,r,n);if(s===null)ap(t,e,n,Nh,r),Zy(t,n);else if(CS(s,t,e,r,n))n.stopPropagation();else if(Zy(t,n),e&4&&-1<bS.indexOf(t)){for(;s!==null;){var A=mu(s);if(A!==null&&P_(A),A=ym(t,e,r,n),A===null&&ap(t,e,n,Nh,r),A===s)break;s=A}s!==null&&n.stopPropagation()}else ap(t,e,n,null,r)}}var Nh=null;function ym(t,e,r,n){if(Nh=null,t=aw(n),t=$i(t),t!==null)if(e=Bo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=F_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nh=t,null}function V_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fS()){case lw:return 1;case N_:return 4;case Sh:case gS:return 16;case R_:return 536870912;default:return 16}default:return 16}}var DA=null,hw=null,th=null;function K_(){if(th)return th;var t,e=hw,r=e.length,n,s="value"in DA?DA.value:DA.textContent,A=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[A-n];n++);return th=s.slice(t,1<n?1-n:void 0)}function rh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ld(){return!0}function tv(){return!1}function Ln(t){function e(r,n,s,A,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(A):A[a]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ld:tv,this.isPropagationStopped=tv,this}return Ar(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ld)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ld)},persist:function(){},isPersistent:ld}),e}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fw=Ln(Ya),pu=Ar({},Ya,{view:0,detail:0}),TS=Ln(pu),Zg,ep,Fl,Pf=Ar({},pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fl&&(Fl&&t.type==="mousemove"?(Zg=t.screenX-Fl.screenX,ep=t.screenY-Fl.screenY):ep=Zg=0,Fl=t),Zg)},movementY:function(t){return"movementY"in t?t.movementY:ep}}),rv=Ln(Pf),kS=Ar({},Pf,{dataTransfer:0}),FS=Ln(kS),SS=Ar({},pu,{relatedTarget:0}),tp=Ln(SS),US=Ar({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=Ln(US),NS=Ar({},Ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RS=Ln(NS),jS=Ar({},Ya,{data:0}),nv=Ln(jS),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LS[t])?!!e[t]:!1}function gw(){return MS}var OS=Ar({},pu,{key:function(t){if(t.key){var e=DS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gw,charCode:function(t){return t.type==="keypress"?rh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HS=Ln(OS),VS=Ar({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sv=Ln(VS),KS=Ar({},pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gw}),GS=Ln(KS),zS=Ar({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),$S=Ln(zS),WS=Ar({},Pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qS=Ln(WS),XS=[9,13,27,32],pw=Js&&"CompositionEvent"in window,dc=null;Js&&"documentMode"in document&&(dc=document.documentMode);var JS=Js&&"TextEvent"in window&&!dc,G_=Js&&(!pw||dc&&8<dc&&11>=dc),Av=" ",iv=!1;function z_(t,e){switch(t){case"keyup":return XS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ea=!1;function YS(t,e){switch(t){case"compositionend":return $_(e);case"keypress":return e.which!==32?null:(iv=!0,Av);case"textInput":return t=e.data,t===Av&&iv?null:t;default:return null}}function ZS(t,e){if(ea)return t==="compositionend"||!pw&&z_(t,e)?(t=K_(),th=hw=DA=null,ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G_&&e.locale!=="ko"?null:e.data;default:return null}}var eU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eU[t.type]:e==="textarea"}function W_(t,e,r,n){__(n),e=Rh(e,"onChange"),0<e.length&&(r=new fw("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var hc=null,Pc=null;function tU(t){AI(t,0)}function Lf(t){var e=na(t);if(w_(e))return t}function rU(t,e){if(t==="change")return e}var q_=!1;if(Js){var rp;if(Js){var np="oninput"in document;if(!np){var av=document.createElement("div");av.setAttribute("oninput","return;"),np=typeof av.oninput=="function"}rp=np}else rp=!1;q_=rp&&(!document.documentMode||9<document.documentMode)}function lv(){hc&&(hc.detachEvent("onpropertychange",X_),Pc=hc=null)}function X_(t){if(t.propertyName==="value"&&Lf(Pc)){var e=[];W_(e,Pc,t,aw(t)),k_(tU,e)}}function nU(t,e,r){t==="focusin"?(lv(),hc=e,Pc=r,hc.attachEvent("onpropertychange",X_)):t==="focusout"&&lv()}function sU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lf(Pc)}function AU(t,e){if(t==="click")return Lf(e)}function iU(t,e){if(t==="input"||t==="change")return Lf(e)}function oU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var us=typeof Object.is=="function"?Object.is:oU;function Lc(t,e){if(us(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!rm.call(e,s)||!us(t[s],e[s]))return!1}return!0}function cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uv(t,e){var r=cv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cv(r)}}function J_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?J_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y_(){for(var t=window,e=Th();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Th(t.document)}return e}function mw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aU(t){var e=Y_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&J_(r.ownerDocument.documentElement,r)){if(n!==null&&mw(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,A=Math.min(n.start,s);n=n.end===void 0?A:Math.min(n.end,s),!t.extend&&A>n&&(s=n,n=A,A=s),s=uv(r,A);var i=uv(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lU=Js&&"documentMode"in document&&11>=document.documentMode,ta=null,vm=null,fc=null,Bm=!1;function dv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bm||ta==null||ta!==Th(n)||(n=ta,"selectionStart"in n&&mw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),fc&&Lc(fc,n)||(fc=n,n=Rh(vm,"onSelect"),0<n.length&&(e=new fw("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ta)))}function cd(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ra={animationend:cd("Animation","AnimationEnd"),animationiteration:cd("Animation","AnimationIteration"),animationstart:cd("Animation","AnimationStart"),transitionend:cd("Transition","TransitionEnd")},sp={},Z_={};Js&&(Z_=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Mf(t){if(sp[t])return sp[t];if(!ra[t])return t;var e=ra[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Z_)return sp[t]=e[r];return t}var eI=Mf("animationend"),tI=Mf("animationiteration"),rI=Mf("animationstart"),nI=Mf("transitionend"),sI=new Map,hv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(t,e){sI.set(t,e),vo(e,[t])}for(var Ap=0;Ap<hv.length;Ap++){var ip=hv[Ap],cU=ip.toLowerCase(),uU=ip[0].toUpperCase()+ip.slice(1);yi(cU,"on"+uU)}yi(eI,"onAnimationEnd");yi(tI,"onAnimationIteration");yi(rI,"onAnimationStart");yi("dblclick","onDoubleClick");yi("focusin","onFocus");yi("focusout","onBlur");yi(nI,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dU=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function fv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,cS(n,e,void 0,t),t.currentTarget=null}function AI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var A=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==A&&s.isPropagationStopped())break e;fv(s,a,c),A=l}else for(i=0;i<n.length;i++){if(a=n[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==A&&s.isPropagationStopped())break e;fv(s,a,c),A=l}}}if(Fh)throw t=mm,Fh=!1,mm=null,t}function Gt(t,e){var r=e[Em];r===void 0&&(r=e[Em]=new Set);var n=t+"__bubble";r.has(n)||(iI(e,t,2,!1),r.add(n))}function op(t,e,r){var n=0;e&&(n|=4),iI(r,t,n,e)}var ud="_reactListening"+Math.random().toString(36).slice(2);function Mc(t){if(!t[ud]){t[ud]=!0,h_.forEach(function(r){r!=="selectionchange"&&(dU.has(r)||op(r,!1,t),op(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ud]||(e[ud]=!0,op("selectionchange",!1,e))}}function iI(t,e,r,n){switch(V_(e)){case 1:var s=IS;break;case 4:s=ES;break;default:s=dw}r=s.bind(null,e,r,t),s=void 0,!pm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function ap(t,e,r,n,s){var A=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;a!==null;){if(i=$i(a),i===null)return;if(l=i.tag,l===5||l===6){n=A=i;continue e}a=a.parentNode}}n=n.return}k_(function(){var c=A,d=aw(r),h=[];e:{var f=sI.get(t);if(f!==void 0){var p=fw,y=t;switch(t){case"keypress":if(rh(r)===0)break e;case"keydown":case"keyup":p=HS;break;case"focusin":y="focus",p=tp;break;case"focusout":y="blur",p=tp;break;case"beforeblur":case"afterblur":p=tp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=FS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=GS;break;case eI:case tI:case rI:p=QS;break;case nI:p=$S;break;case"scroll":p=TS;break;case"wheel":p=qS;break;case"copy":case"cut":case"paste":p=RS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sv}var v=(e&4)!==0,E=!v&&t==="scroll",B=v?f!==null?f+"Capture":null:f;v=[];for(var x=c,_;x!==null;){_=x;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,B!==null&&(S=Nc(x,B),S!=null&&v.push(Oc(x,S,_)))),E)break;x=x.return}0<v.length&&(f=new p(f,y,null,r,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==fm&&(y=r.relatedTarget||r.fromElement)&&($i(y)||y[Ys]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=r.relatedTarget||r.toElement,p=c,y=y?$i(y):null,y!==null&&(E=Bo(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=rv,S="onMouseLeave",B="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=sv,S="onPointerLeave",B="onPointerEnter",x="pointer"),E=p==null?f:na(p),_=y==null?f:na(y),f=new v(S,x+"leave",p,r,d),f.target=E,f.relatedTarget=_,S=null,$i(d)===c&&(v=new v(B,x+"enter",y,r,d),v.target=_,v.relatedTarget=E,S=v),E=S,p&&y)t:{for(v=p,B=y,x=0,_=v;_;_=No(_))x++;for(_=0,S=B;S;S=No(S))_++;for(;0<x-_;)v=No(v),x--;for(;0<_-x;)B=No(B),_--;for(;x--;){if(v===B||B!==null&&v===B.alternate)break t;v=No(v),B=No(B)}v=null}else v=null;p!==null&&gv(h,f,p,v,!1),y!==null&&E!==null&&gv(h,E,y,v,!0)}}e:{if(f=c?na(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var U=rU;else if(ov(f))if(q_)U=iU;else{U=sU;var N=nU}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=AU);if(U&&(U=U(t,c))){W_(h,U,r,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&lm(f,"number",f.value)}switch(N=c?na(c):window,t){case"focusin":(ov(N)||N.contentEditable==="true")&&(ta=N,vm=c,fc=null);break;case"focusout":fc=vm=ta=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,dv(h,r,d);break;case"selectionchange":if(lU)break;case"keydown":case"keyup":dv(h,r,d)}var w;if(pw)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else ea?z_(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(G_&&r.locale!=="ko"&&(ea||b!=="onCompositionStart"?b==="onCompositionEnd"&&ea&&(w=K_()):(DA=d,hw="value"in DA?DA.value:DA.textContent,ea=!0)),N=Rh(c,b),0<N.length&&(b=new nv(b,t,null,r,d),h.push({event:b,listeners:N}),w?b.data=w:(w=$_(r),w!==null&&(b.data=w)))),(w=JS?YS(t,r):ZS(t,r))&&(c=Rh(c,"onBeforeInput"),0<c.length&&(d=new nv("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=w))}AI(h,e)})}function Oc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Rh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=Nc(t,r),A!=null&&n.unshift(Oc(t,A,s)),A=Nc(t,e),A!=null&&n.push(Oc(t,A,s))),t=t.return}return n}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gv(t,e,r,n,s){for(var A=e._reactName,i=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=Nc(r,A),l!=null&&i.unshift(Oc(r,l,a))):s||(l=Nc(r,A),l!=null&&i.push(Oc(r,l,a)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var hU=/\r\n?/g,fU=/\u0000|\uFFFD/g;function pv(t){return(typeof t=="string"?t:""+t).replace(hU,`
`).replace(fU,"")}function dd(t,e,r){if(e=pv(e),pv(t)!==e&&r)throw Error(ge(425))}function jh(){}var bm=null,Cm=null;function _m(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Im=typeof setTimeout=="function"?setTimeout:void 0,gU=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,pU=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(t){return mv.resolve(null).then(t).catch(mU)}:Im;function mU(t){setTimeout(function(){throw t})}function lp(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Dc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Dc(e)}function WA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Za=Math.random().toString(36).slice(2),xs="__reactFiber$"+Za,Hc="__reactProps$"+Za,Ys="__reactContainer$"+Za,Em="__reactEvents$"+Za,wU="__reactListeners$"+Za,xU="__reactHandles$"+Za;function $i(t){var e=t[xs];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ys]||r[xs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=wv(t);t!==null;){if(r=t[xs])return r;t=wv(t)}return e}t=r,r=t.parentNode}return null}function mu(t){return t=t[xs]||t[Ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function na(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function Of(t){return t[Hc]||null}var Tm=[],sa=-1;function vi(t){return{current:t}}function Wt(t){0>sa||(t.current=Tm[sa],Tm[sa]=null,sa--)}function Ht(t,e){sa++,Tm[sa]=t.current,t.current=e}var ai={},An=vi(ai),_n=vi(!1),no=ai;function Ia(t,e){var r=t.type.contextTypes;if(!r)return ai;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in r)s[A]=e[A];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function In(t){return t=t.childContextTypes,t!=null}function Dh(){Wt(_n),Wt(An)}function xv(t,e,r){if(An.current!==ai)throw Error(ge(168));Ht(An,e),Ht(_n,r)}function oI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ge(108,nS(t)||"Unknown",s));return Ar({},r,n)}function Ph(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,no=An.current,Ht(An,t),Ht(_n,_n.current),!0}function yv(t,e,r){var n=t.stateNode;if(!n)throw Error(ge(169));r?(t=oI(t,e,no),n.__reactInternalMemoizedMergedChildContext=t,Wt(_n),Wt(An),Ht(An,t)):Wt(_n),Ht(_n,r)}var Ms=null,Hf=!1,cp=!1;function aI(t){Ms===null?Ms=[t]:Ms.push(t)}function yU(t){Hf=!0,aI(t)}function Bi(){if(!cp&&Ms!==null){cp=!0;var t=0,e=Ft;try{var r=Ms;for(Ft=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ms=null,Hf=!1}catch(s){throw Ms!==null&&(Ms=Ms.slice(t+1)),Q_(lw,Bi),s}finally{Ft=e,cp=!1}}return null}var Aa=[],ia=0,Lh=null,Mh=0,Gn=[],zn=0,so=null,Hs=1,Vs="";function Pi(t,e){Aa[ia++]=Mh,Aa[ia++]=Lh,Lh=t,Mh=e}function lI(t,e,r){Gn[zn++]=Hs,Gn[zn++]=Vs,Gn[zn++]=so,so=t;var n=Hs;t=Vs;var s=32-as(n)-1;n&=~(1<<s),r+=1;var A=32-as(e)+s;if(30<A){var i=s-s%5;A=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Hs=1<<32-as(e)+s|r<<s|n,Vs=A+t}else Hs=1<<A|r<<s|n,Vs=t}function ww(t){t.return!==null&&(Pi(t,1),lI(t,1,0))}function xw(t){for(;t===Lh;)Lh=Aa[--ia],Aa[ia]=null,Mh=Aa[--ia],Aa[ia]=null;for(;t===so;)so=Gn[--zn],Gn[zn]=null,Vs=Gn[--zn],Gn[zn]=null,Hs=Gn[--zn],Gn[zn]=null}var Nn=null,Qn=null,Yt=!1,os=null;function cI(t,e){var r=qn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function vv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,Qn=WA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=so!==null?{id:Hs,overflow:Vs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=qn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Nn=t,Qn=null,!0):!1;default:return!1}}function km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fm(t){if(Yt){var e=Qn;if(e){var r=e;if(!vv(t,e)){if(km(t))throw Error(ge(418));e=WA(r.nextSibling);var n=Nn;e&&vv(t,e)?cI(n,r):(t.flags=t.flags&-4097|2,Yt=!1,Nn=t)}}else{if(km(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Yt=!1,Nn=t}}}function Bv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function hd(t){if(t!==Nn)return!1;if(!Yt)return Bv(t),Yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_m(t.type,t.memoizedProps)),e&&(e=Qn)){if(km(t))throw uI(),Error(ge(418));for(;e;)cI(t,e),e=WA(e.nextSibling)}if(Bv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Qn=WA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Nn?WA(t.stateNode.nextSibling):null;return!0}function uI(){for(var t=Qn;t;)t=WA(t.nextSibling)}function Ea(){Qn=Nn=null,Yt=!1}function yw(t){os===null?os=[t]:os.push(t)}var vU=iA.ReactCurrentBatchConfig;function Sl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var n=r.stateNode}if(!n)throw Error(ge(147,t));var s=n,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var a=s.refs;i===null?delete a[A]:a[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,t))}return t}function fd(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bv(t){var e=t._init;return e(t._payload)}function dI(t){function e(B,x){if(t){var _=B.deletions;_===null?(B.deletions=[x],B.flags|=16):_.push(x)}}function r(B,x){if(!t)return null;for(;x!==null;)e(B,x),x=x.sibling;return null}function n(B,x){for(B=new Map;x!==null;)x.key!==null?B.set(x.key,x):B.set(x.index,x),x=x.sibling;return B}function s(B,x){return B=YA(B,x),B.index=0,B.sibling=null,B}function A(B,x,_){return B.index=_,t?(_=B.alternate,_!==null?(_=_.index,_<x?(B.flags|=2,x):_):(B.flags|=2,x)):(B.flags|=1048576,x)}function i(B){return t&&B.alternate===null&&(B.flags|=2),B}function a(B,x,_,S){return x===null||x.tag!==6?(x=mp(_,B.mode,S),x.return=B,x):(x=s(x,_),x.return=B,x)}function l(B,x,_,S){var U=_.type;return U===Zo?d(B,x,_.props.children,S,_.key):x!==null&&(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===_A&&bv(U)===x.type)?(S=s(x,_.props),S.ref=Sl(B,x,_),S.return=B,S):(S=lh(_.type,_.key,_.props,null,B.mode,S),S.ref=Sl(B,x,_),S.return=B,S)}function c(B,x,_,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=wp(_,B.mode,S),x.return=B,x):(x=s(x,_.children||[]),x.return=B,x)}function d(B,x,_,S,U){return x===null||x.tag!==7?(x=Yi(_,B.mode,S,U),x.return=B,x):(x=s(x,_),x.return=B,x)}function h(B,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=mp(""+x,B.mode,_),x.return=B,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nd:return _=lh(x.type,x.key,x.props,null,B.mode,_),_.ref=Sl(B,null,x),_.return=B,_;case Yo:return x=wp(x,B.mode,_),x.return=B,x;case _A:var S=x._init;return h(B,S(x._payload),_)}if($l(x)||Il(x))return x=Yi(x,B.mode,_,null),x.return=B,x;fd(B,x)}return null}function f(B,x,_,S){var U=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return U!==null?null:a(B,x,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nd:return _.key===U?l(B,x,_,S):null;case Yo:return _.key===U?c(B,x,_,S):null;case _A:return U=_._init,f(B,x,U(_._payload),S)}if($l(_)||Il(_))return U!==null?null:d(B,x,_,S,null);fd(B,_)}return null}function p(B,x,_,S,U){if(typeof S=="string"&&S!==""||typeof S=="number")return B=B.get(_)||null,a(x,B,""+S,U);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nd:return B=B.get(S.key===null?_:S.key)||null,l(x,B,S,U);case Yo:return B=B.get(S.key===null?_:S.key)||null,c(x,B,S,U);case _A:var N=S._init;return p(B,x,_,N(S._payload),U)}if($l(S)||Il(S))return B=B.get(_)||null,d(x,B,S,U,null);fd(x,S)}return null}function y(B,x,_,S){for(var U=null,N=null,w=x,b=x=0,C=null;w!==null&&b<_.length;b++){w.index>b?(C=w,w=null):C=w.sibling;var F=f(B,w,_[b],S);if(F===null){w===null&&(w=C);break}t&&w&&F.alternate===null&&e(B,w),x=A(F,x,b),N===null?U=F:N.sibling=F,N=F,w=C}if(b===_.length)return r(B,w),Yt&&Pi(B,b),U;if(w===null){for(;b<_.length;b++)w=h(B,_[b],S),w!==null&&(x=A(w,x,b),N===null?U=w:N.sibling=w,N=w);return Yt&&Pi(B,b),U}for(w=n(B,w);b<_.length;b++)C=p(w,B,b,_[b],S),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?b:C.key),x=A(C,x,b),N===null?U=C:N.sibling=C,N=C);return t&&w.forEach(function(R){return e(B,R)}),Yt&&Pi(B,b),U}function v(B,x,_,S){var U=Il(_);if(typeof U!="function")throw Error(ge(150));if(_=U.call(_),_==null)throw Error(ge(151));for(var N=U=null,w=x,b=x=0,C=null,F=_.next();w!==null&&!F.done;b++,F=_.next()){w.index>b?(C=w,w=null):C=w.sibling;var R=f(B,w,F.value,S);if(R===null){w===null&&(w=C);break}t&&w&&R.alternate===null&&e(B,w),x=A(R,x,b),N===null?U=R:N.sibling=R,N=R,w=C}if(F.done)return r(B,w),Yt&&Pi(B,b),U;if(w===null){for(;!F.done;b++,F=_.next())F=h(B,F.value,S),F!==null&&(x=A(F,x,b),N===null?U=F:N.sibling=F,N=F);return Yt&&Pi(B,b),U}for(w=n(B,w);!F.done;b++,F=_.next())F=p(w,B,b,F.value,S),F!==null&&(t&&F.alternate!==null&&w.delete(F.key===null?b:F.key),x=A(F,x,b),N===null?U=F:N.sibling=F,N=F);return t&&w.forEach(function(L){return e(B,L)}),Yt&&Pi(B,b),U}function E(B,x,_,S){if(typeof _=="object"&&_!==null&&_.type===Zo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nd:e:{for(var U=_.key,N=x;N!==null;){if(N.key===U){if(U=_.type,U===Zo){if(N.tag===7){r(B,N.sibling),x=s(N,_.props.children),x.return=B,B=x;break e}}else if(N.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===_A&&bv(U)===N.type){r(B,N.sibling),x=s(N,_.props),x.ref=Sl(B,N,_),x.return=B,B=x;break e}r(B,N);break}else e(B,N);N=N.sibling}_.type===Zo?(x=Yi(_.props.children,B.mode,S,_.key),x.return=B,B=x):(S=lh(_.type,_.key,_.props,null,B.mode,S),S.ref=Sl(B,x,_),S.return=B,B=S)}return i(B);case Yo:e:{for(N=_.key;x!==null;){if(x.key===N)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){r(B,x.sibling),x=s(x,_.children||[]),x.return=B,B=x;break e}else{r(B,x);break}else e(B,x);x=x.sibling}x=wp(_,B.mode,S),x.return=B,B=x}return i(B);case _A:return N=_._init,E(B,x,N(_._payload),S)}if($l(_))return y(B,x,_,S);if(Il(_))return v(B,x,_,S);fd(B,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(r(B,x.sibling),x=s(x,_),x.return=B,B=x):(r(B,x),x=mp(_,B.mode,S),x.return=B,B=x),i(B)):r(B,x)}return E}var Ta=dI(!0),hI=dI(!1),Oh=vi(null),Hh=null,oa=null,vw=null;function Bw(){vw=oa=Hh=null}function bw(t){var e=Oh.current;Wt(Oh),t._currentValue=e}function Sm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ma(t,e){Hh=t,vw=oa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vn=!0),t.firstContext=null)}function Zn(t){var e=t._currentValue;if(vw!==t)if(t={context:t,memoizedValue:e,next:null},oa===null){if(Hh===null)throw Error(ge(308));oa=t,Hh.dependencies={lanes:0,firstContext:t}}else oa=oa.next=t;return e}var Wi=null;function Cw(t){Wi===null?Wi=[t]:Wi.push(t)}function fI(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Cw(e)):(r.next=s.next,s.next=r),e.interleaved=r,Zs(t,n)}function Zs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var IA=!1;function _w(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,xt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Zs(t,r)}return s=n.interleaved,s===null?(e.next=e,Cw(n)):(e.next=s.next,s.next=e),n.interleaved=e,Zs(t,r)}function nh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,cw(t,r)}}function Cv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};A===null?s=A=i:A=A.next=i,r=r.next}while(r!==null);A===null?s=A=e:A=A.next=e}else s=A=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Vh(t,e,r,n){var s=t.updateQueue;IA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?A=c:i.next=c,i=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(A!==null){var h=s.baseState;i=0,d=c=l=null,a=A;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(f=e,p=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=Ar({},h,f);break e;case 2:IA=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,i|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);io|=i,t.lanes=i,t.memoizedState=h}}function _v(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ge(191,s));s.call(n)}}}var wu={},Cs=vi(wu),Vc=vi(wu),Kc=vi(wu);function qi(t){if(t===wu)throw Error(ge(174));return t}function Iw(t,e){switch(Ht(Kc,e),Ht(Vc,t),Ht(Cs,wu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:um(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=um(e,t)}Wt(Cs),Ht(Cs,e)}function ka(){Wt(Cs),Wt(Vc),Wt(Kc)}function pI(t){qi(Kc.current);var e=qi(Cs.current),r=um(e,t.type);e!==r&&(Ht(Vc,t),Ht(Cs,r))}function Ew(t){Vc.current===t&&(Wt(Cs),Wt(Vc))}var rr=vi(0);function Kh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var up=[];function Tw(){for(var t=0;t<up.length;t++)up[t]._workInProgressVersionPrimary=null;up.length=0}var sh=iA.ReactCurrentDispatcher,dp=iA.ReactCurrentBatchConfig,Ao=0,nr=null,vr=null,Sr=null,Gh=!1,gc=!1,Gc=0,BU=0;function qr(){throw Error(ge(321))}function kw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!us(t[r],e[r]))return!1;return!0}function Fw(t,e,r,n,s,A){if(Ao=A,nr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sh.current=t===null||t.memoizedState===null?IU:EU,t=r(n,s),gc){A=0;do{if(gc=!1,Gc=0,25<=A)throw Error(ge(301));A+=1,Sr=vr=null,e.updateQueue=null,sh.current=TU,t=r(n,s)}while(gc)}if(sh.current=zh,e=vr!==null&&vr.next!==null,Ao=0,Sr=vr=nr=null,Gh=!1,e)throw Error(ge(300));return t}function Sw(){var t=Gc!==0;return Gc=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?nr.memoizedState=Sr=t:Sr=Sr.next=t,Sr}function es(){if(vr===null){var t=nr.alternate;t=t!==null?t.memoizedState:null}else t=vr.next;var e=Sr===null?nr.memoizedState:Sr.next;if(e!==null)Sr=e,vr=t;else{if(t===null)throw Error(ge(310));vr=t,t={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Sr===null?nr.memoizedState=Sr=t:Sr=Sr.next=t}return Sr}function zc(t,e){return typeof e=="function"?e(t):e}function hp(t){var e=es(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=vr,s=n.baseQueue,A=r.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}n.baseQueue=s=A,r.pending=null}if(s!==null){A=s.next,n=n.baseState;var a=i=null,l=null,c=A;do{var d=c.lane;if((Ao&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,i=n):l=l.next=h,nr.lanes|=d,io|=d}c=c.next}while(c!==null&&c!==A);l===null?i=n:l.next=a,us(n,e.memoizedState)||(vn=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do A=s.lane,nr.lanes|=A,io|=A,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function fp(t){var e=es(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,A=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);us(A,e.memoizedState)||(vn=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),r.lastRenderedState=A}return[A,n]}function mI(){}function wI(t,e){var r=nr,n=es(),s=e(),A=!us(n.memoizedState,s);if(A&&(n.memoizedState=s,vn=!0),n=n.queue,Uw(vI.bind(null,r,n,t),[t]),n.getSnapshot!==e||A||Sr!==null&&Sr.memoizedState.tag&1){if(r.flags|=2048,$c(9,yI.bind(null,r,n,s,e),void 0,null),Qr===null)throw Error(ge(349));Ao&30||xI(r,e,s)}return s}function xI(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function yI(t,e,r,n){e.value=r,e.getSnapshot=n,BI(e)&&bI(t)}function vI(t,e,r){return r(function(){BI(e)&&bI(t)})}function BI(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!us(t,r)}catch{return!0}}function bI(t){var e=Zs(t,1);e!==null&&ls(e,t,1,-1)}function Iv(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:t},e.queue=t,t=t.dispatch=_U.bind(null,nr,t),[e.memoizedState,t]}function $c(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function CI(){return es().memoizedState}function Ah(t,e,r,n){var s=ms();nr.flags|=t,s.memoizedState=$c(1|e,r,void 0,n===void 0?null:n)}function Vf(t,e,r,n){var s=es();n=n===void 0?null:n;var A=void 0;if(vr!==null){var i=vr.memoizedState;if(A=i.destroy,n!==null&&kw(n,i.deps)){s.memoizedState=$c(e,r,A,n);return}}nr.flags|=t,s.memoizedState=$c(1|e,r,A,n)}function Ev(t,e){return Ah(8390656,8,t,e)}function Uw(t,e){return Vf(2048,8,t,e)}function _I(t,e){return Vf(4,2,t,e)}function II(t,e){return Vf(4,4,t,e)}function EI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TI(t,e,r){return r=r!=null?r.concat([t]):null,Vf(4,4,EI.bind(null,e,t),r)}function Qw(){}function kI(t,e){var r=es();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&kw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function FI(t,e){var r=es();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&kw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function SI(t,e,r){return Ao&21?(us(r,e)||(r=j_(),nr.lanes|=r,io|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vn=!0),t.memoizedState=r)}function bU(t,e){var r=Ft;Ft=r!==0&&4>r?r:4,t(!0);var n=dp.transition;dp.transition={};try{t(!1),e()}finally{Ft=r,dp.transition=n}}function UI(){return es().memoizedState}function CU(t,e,r){var n=JA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},QI(t))NI(e,r);else if(r=fI(t,e,r,n),r!==null){var s=fn();ls(r,t,n,s),RI(r,e,n)}}function _U(t,e,r){var n=JA(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(QI(t))NI(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,a=A(i,r);if(s.hasEagerState=!0,s.eagerState=a,us(a,i)){var l=e.interleaved;l===null?(s.next=s,Cw(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=fI(t,e,s,n),r!==null&&(s=fn(),ls(r,t,n,s),RI(r,e,n))}}function QI(t){var e=t.alternate;return t===nr||e!==null&&e===nr}function NI(t,e){gc=Gh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function RI(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,cw(t,r)}}var zh={readContext:Zn,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useInsertionEffect:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useSyncExternalStore:qr,useId:qr,unstable_isNewReconciler:!1},IU={readContext:Zn,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:Zn,useEffect:Ev,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ah(4194308,4,EI.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ah(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ah(4,2,t,e)},useMemo:function(t,e){var r=ms();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ms();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=CU.bind(null,nr,t),[n.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:Iv,useDebugValue:Qw,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=Iv(!1),e=t[0];return t=bU.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=nr,s=ms();if(Yt){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=e(),Qr===null)throw Error(ge(349));Ao&30||xI(n,e,r)}s.memoizedState=r;var A={value:r,getSnapshot:e};return s.queue=A,Ev(vI.bind(null,n,A,t),[t]),n.flags|=2048,$c(9,yI.bind(null,n,A,r,e),void 0,null),r},useId:function(){var t=ms(),e=Qr.identifierPrefix;if(Yt){var r=Vs,n=Hs;r=(n&~(1<<32-as(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=BU++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EU={readContext:Zn,useCallback:kI,useContext:Zn,useEffect:Uw,useImperativeHandle:TI,useInsertionEffect:_I,useLayoutEffect:II,useMemo:FI,useReducer:hp,useRef:CI,useState:function(){return hp(zc)},useDebugValue:Qw,useDeferredValue:function(t){var e=es();return SI(e,vr.memoizedState,t)},useTransition:function(){var t=hp(zc)[0],e=es().memoizedState;return[t,e]},useMutableSource:mI,useSyncExternalStore:wI,useId:UI,unstable_isNewReconciler:!1},TU={readContext:Zn,useCallback:kI,useContext:Zn,useEffect:Uw,useImperativeHandle:TI,useInsertionEffect:_I,useLayoutEffect:II,useMemo:FI,useReducer:fp,useRef:CI,useState:function(){return fp(zc)},useDebugValue:Qw,useDeferredValue:function(t){var e=es();return vr===null?e.memoizedState=t:SI(e,vr.memoizedState,t)},useTransition:function(){var t=fp(zc)[0],e=es().memoizedState;return[t,e]},useMutableSource:mI,useSyncExternalStore:wI,useId:UI,unstable_isNewReconciler:!1};function As(t,e){if(t&&t.defaultProps){e=Ar({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Um(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ar({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Kf={isMounted:function(t){return(t=t._reactInternals)?Bo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=fn(),s=JA(t),A=qs(n,s);A.payload=e,r!=null&&(A.callback=r),e=qA(t,A,s),e!==null&&(ls(e,t,s,n),nh(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=fn(),s=JA(t),A=qs(n,s);A.tag=1,A.payload=e,r!=null&&(A.callback=r),e=qA(t,A,s),e!==null&&(ls(e,t,s,n),nh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=fn(),n=JA(t),s=qs(r,n);s.tag=2,e!=null&&(s.callback=e),e=qA(t,s,n),e!==null&&(ls(e,t,n,r),nh(e,t,n))}};function Tv(t,e,r,n,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,A,i):e.prototype&&e.prototype.isPureReactComponent?!Lc(r,n)||!Lc(s,A):!0}function jI(t,e,r){var n=!1,s=ai,A=e.contextType;return typeof A=="object"&&A!==null?A=Zn(A):(s=In(e)?no:An.current,n=e.contextTypes,A=(n=n!=null)?Ia(t,s):ai),e=new e(r,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function kv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Kf.enqueueReplaceState(e,e.state,null)}function Qm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},_w(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Zn(A):(A=In(e)?no:An.current,s.context=Ia(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(Um(t,e,A,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Kf.enqueueReplaceState(s,s.state,null),Vh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fa(t,e){try{var r="",n=e;do r+=rS(n),n=n.return;while(n);var s=r}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function gp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Nm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var kU=typeof WeakMap=="function"?WeakMap:Map;function DI(t,e,r){r=qs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Wh||(Wh=!0,Km=n),Nm(t,e)},r}function PI(t,e,r){r=qs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Nm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){Nm(t,e),typeof n!="function"&&(XA===null?XA=new Set([this]):XA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function Fv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new kU;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=VU.bind(null,t,e,r),e.then(t,t))}function Sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=qs(-1,1),e.tag=2,qA(r,e,1))),r.lanes|=1),t)}var FU=iA.ReactCurrentOwner,vn=!1;function dn(t,e,r,n){e.child=t===null?hI(e,null,r,n):Ta(e,t.child,r,n)}function Qv(t,e,r,n,s){r=r.render;var A=e.ref;return ma(e,s),n=Fw(t,e,r,n,A,s),r=Sw(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,eA(t,e,s)):(Yt&&r&&ww(e),e.flags|=1,dn(t,e,n,s),e.child)}function Nv(t,e,r,n,s){if(t===null){var A=r.type;return typeof A=="function"&&!Ow(A)&&A.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=A,LI(t,e,A,n,s)):(t=lh(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(r=r.compare,r=r!==null?r:Lc,r(i,n)&&t.ref===e.ref)return eA(t,e,s)}return e.flags|=1,t=YA(A,n),t.ref=e.ref,t.return=e,e.child=t}function LI(t,e,r,n,s){if(t!==null){var A=t.memoizedProps;if(Lc(A,n)&&t.ref===e.ref)if(vn=!1,e.pendingProps=n=A,(t.lanes&s)!==0)t.flags&131072&&(vn=!0);else return e.lanes=t.lanes,eA(t,e,s)}return Rm(t,e,r,n,s)}function MI(t,e,r){var n=e.pendingProps,s=n.children,A=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(la,Un),Un|=r;else{if(!(r&1073741824))return t=A!==null?A.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ht(la,Un),Un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=A!==null?A.baseLanes:r,Ht(la,Un),Un|=n}else A!==null?(n=A.baseLanes|r,e.memoizedState=null):n=r,Ht(la,Un),Un|=n;return dn(t,e,s,r),e.child}function OI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rm(t,e,r,n,s){var A=In(r)?no:An.current;return A=Ia(e,A),ma(e,s),r=Fw(t,e,r,n,A,s),n=Sw(),t!==null&&!vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,eA(t,e,s)):(Yt&&n&&ww(e),e.flags|=1,dn(t,e,r,s),e.child)}function Rv(t,e,r,n,s){if(In(r)){var A=!0;Ph(e)}else A=!1;if(ma(e,s),e.stateNode===null)ih(t,e),jI(e,r,n),Qm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Zn(c):(c=In(r)?no:An.current,c=Ia(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||l!==c)&&kv(e,i,n,c),IA=!1;var f=e.memoizedState;i.state=f,Vh(e,n,i,s),l=e.memoizedState,a!==n||f!==l||_n.current||IA?(typeof d=="function"&&(Um(e,r,d,n),l=e.memoizedState),(a=IA||Tv(e,r,a,n,f,l,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),i.props=n,i.state=l,i.context=c,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,gI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:As(e.type,a),i.props=c,h=e.pendingProps,f=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=Zn(l):(l=In(r)?no:An.current,l=Ia(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||f!==l)&&kv(e,i,n,l),IA=!1,f=e.memoizedState,i.state=f,Vh(e,n,i,s);var y=e.memoizedState;a!==h||f!==y||_n.current||IA?(typeof p=="function"&&(Um(e,r,p,n),y=e.memoizedState),(c=IA||Tv(e,r,c,n,f,y,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),i.props=n,i.state=y,i.context=l,n=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return jm(t,e,r,n,A,s)}function jm(t,e,r,n,s,A){OI(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&yv(e,r,!1),eA(t,e,A);n=e.stateNode,FU.current=e;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Ta(e,t.child,null,A),e.child=Ta(e,null,a,A)):dn(t,e,a,A),e.memoizedState=n.state,s&&yv(e,r,!0),e.child}function HI(t){var e=t.stateNode;e.pendingContext?xv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xv(t,e.context,!1),Iw(t,e.containerInfo)}function jv(t,e,r,n,s){return Ea(),yw(s),e.flags|=256,dn(t,e,r,n),e.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Pm(t){return{baseLanes:t,cachePool:null,transitions:null}}function VI(t,e,r){var n=e.pendingProps,s=rr.current,A=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ht(rr,s&1),t===null)return Fm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,A?(n=e.mode,A=e.child,i={mode:"hidden",children:i},!(n&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=$f(i,n,0,null),t=Yi(t,n,r,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=Pm(r),e.memoizedState=Dm,t):Nw(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return SU(t,e,i,n,a,s,r);if(A){A=n.fallback,i=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=YA(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?A=YA(a,A):(A=Yi(A,i,r,null),A.flags|=2),A.return=e,n.return=e,n.sibling=A,e.child=n,n=A,A=e.child,i=t.child.memoizedState,i=i===null?Pm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~r,e.memoizedState=Dm,n}return A=t.child,t=A.sibling,n=YA(A,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Nw(t,e){return e=$f({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gd(t,e,r,n){return n!==null&&yw(n),Ta(e,t.child,null,r),t=Nw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SU(t,e,r,n,s,A,i){if(r)return e.flags&256?(e.flags&=-257,n=gp(Error(ge(422))),gd(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=n.fallback,s=e.mode,n=$f({mode:"visible",children:n.children},s,0,null),A=Yi(A,s,i,null),A.flags|=2,n.return=e,A.return=e,n.sibling=A,e.child=n,e.mode&1&&Ta(e,t.child,null,i),e.child.memoizedState=Pm(i),e.memoizedState=Dm,A);if(!(e.mode&1))return gd(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,A=Error(ge(419)),n=gp(A,n,void 0),gd(t,e,i,n)}if(a=(i&t.childLanes)!==0,vn||a){if(n=Qr,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Zs(t,s),ls(n,t,s,-1))}return Mw(),n=gp(Error(ge(421))),gd(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KU.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,Qn=WA(s.nextSibling),Nn=e,Yt=!0,os=null,t!==null&&(Gn[zn++]=Hs,Gn[zn++]=Vs,Gn[zn++]=so,Hs=t.id,Vs=t.overflow,so=e),e=Nw(e,n.children),e.flags|=4096,e)}function Dv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Sm(t.return,e,r)}function pp(t,e,r,n,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=n,A.tail=r,A.tailMode=s)}function KI(t,e,r){var n=e.pendingProps,s=n.revealOrder,A=n.tail;if(dn(t,e,n.children,r),n=rr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dv(t,r,e);else if(t.tag===19)Dv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ht(rr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Kh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),pp(e,!1,s,r,A);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}pp(e,!0,r,null,A);break;case"together":pp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ih(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function eA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,r=YA(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=YA(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function UU(t,e,r){switch(e.tag){case 3:HI(e),Ea();break;case 5:pI(e);break;case 1:In(e.type)&&Ph(e);break;case 4:Iw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ht(Oh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ht(rr,rr.current&1),e.flags|=128,null):r&e.child.childLanes?VI(t,e,r):(Ht(rr,rr.current&1),t=eA(t,e,r),t!==null?t.sibling:null);Ht(rr,rr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return KI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ht(rr,rr.current),n)break;return null;case 22:case 23:return e.lanes=0,MI(t,e,r)}return eA(t,e,r)}var GI,Lm,zI,$I;GI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lm=function(){};zI=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,qi(Cs.current);var A=null;switch(r){case"input":s=om(t,s),n=om(t,n),A=[];break;case"select":s=Ar({},s,{value:void 0}),n=Ar({},n,{value:void 0}),A=[];break;case"textarea":s=cm(t,s),n=cm(t,n),A=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=jh)}dm(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(A||(A=[]),A.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(A=A||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(A=A||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Gt("scroll",t),A||a===l||(A=[])):(A=A||[]).push(c,l))}r&&(A=A||[]).push("style",r);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};$I=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ul(t,e){if(!Yt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Xr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function QU(t,e,r){var n=e.pendingProps;switch(xw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(e),null;case 1:return In(e.type)&&Dh(),Xr(e),null;case 3:return n=e.stateNode,ka(),Wt(_n),Wt(An),Tw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(hd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,os!==null&&($m(os),os=null))),Lm(t,e),Xr(e),null;case 5:Ew(e);var s=qi(Kc.current);if(r=e.type,t!==null&&e.stateNode!=null)zI(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ge(166));return Xr(e),null}if(t=qi(Cs.current),hd(e)){n=e.stateNode,r=e.type;var A=e.memoizedProps;switch(n[xs]=e,n[Hc]=A,t=(e.mode&1)!==0,r){case"dialog":Gt("cancel",n),Gt("close",n);break;case"iframe":case"object":case"embed":Gt("load",n);break;case"video":case"audio":for(s=0;s<ql.length;s++)Gt(ql[s],n);break;case"source":Gt("error",n);break;case"img":case"image":case"link":Gt("error",n),Gt("load",n);break;case"details":Gt("toggle",n);break;case"input":zy(n,A),Gt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!A.multiple},Gt("invalid",n);break;case"textarea":Wy(n,A),Gt("invalid",n)}dm(r,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var a=A[i];i==="children"?typeof a=="string"?n.textContent!==a&&(A.suppressHydrationWarning!==!0&&dd(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(A.suppressHydrationWarning!==!0&&dd(n.textContent,a,t),s=["children",""+a]):Uc.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Gt("scroll",n)}switch(r){case"input":sd(n),$y(n,A,!0);break;case"textarea":sd(n),qy(n);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(n.onclick=jh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=v_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[xs]=e,t[Hc]=n,GI(t,e,!1,!1),e.stateNode=t;e:{switch(i=hm(r,n),r){case"dialog":Gt("cancel",t),Gt("close",t),s=n;break;case"iframe":case"object":case"embed":Gt("load",t),s=n;break;case"video":case"audio":for(s=0;s<ql.length;s++)Gt(ql[s],t);s=n;break;case"source":Gt("error",t),s=n;break;case"img":case"image":case"link":Gt("error",t),Gt("load",t),s=n;break;case"details":Gt("toggle",t),s=n;break;case"input":zy(t,n),s=om(t,n),Gt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Ar({},n,{value:void 0}),Gt("invalid",t);break;case"textarea":Wy(t,n),s=cm(t,n),Gt("invalid",t);break;default:s=n}dm(r,s),a=s;for(A in a)if(a.hasOwnProperty(A)){var l=a[A];A==="style"?C_(t,l):A==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&B_(t,l)):A==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Qc(t,l):typeof l=="number"&&Qc(t,""+l):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(Uc.hasOwnProperty(A)?l!=null&&A==="onScroll"&&Gt("scroll",t):l!=null&&sw(t,A,l,i))}switch(r){case"input":sd(t),$y(t,n,!1);break;case"textarea":sd(t),qy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+oi(n.value));break;case"select":t.multiple=!!n.multiple,A=n.value,A!=null?ha(t,!!n.multiple,A,!1):n.defaultValue!=null&&ha(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xr(e),null;case 6:if(t&&e.stateNode!=null)$I(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ge(166));if(r=qi(Kc.current),qi(Cs.current),hd(e)){if(n=e.stateNode,r=e.memoizedProps,n[xs]=e,(A=n.nodeValue!==r)&&(t=Nn,t!==null))switch(t.tag){case 3:dd(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dd(n.nodeValue,r,(t.mode&1)!==0)}A&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[xs]=e,e.stateNode=n}return Xr(e),null;case 13:if(Wt(rr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Yt&&Qn!==null&&e.mode&1&&!(e.flags&128))uI(),Ea(),e.flags|=98560,A=!1;else if(A=hd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!A)throw Error(ge(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(ge(317));A[xs]=e}else Ea(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xr(e),A=!1}else os!==null&&($m(os),os=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||rr.current&1?br===0&&(br=3):Mw())),e.updateQueue!==null&&(e.flags|=4),Xr(e),null);case 4:return ka(),Lm(t,e),t===null&&Mc(e.stateNode.containerInfo),Xr(e),null;case 10:return bw(e.type._context),Xr(e),null;case 17:return In(e.type)&&Dh(),Xr(e),null;case 19:if(Wt(rr),A=e.memoizedState,A===null)return Xr(e),null;if(n=(e.flags&128)!==0,i=A.rendering,i===null)if(n)Ul(A,!1);else{if(br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Kh(t),i!==null){for(e.flags|=128,Ul(A,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)A=r,t=n,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ht(rr,rr.current&1|2),e.child}t=t.sibling}A.tail!==null&&dr()>Sa&&(e.flags|=128,n=!0,Ul(A,!1),e.lanes=4194304)}else{if(!n)if(t=Kh(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ul(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!Yt)return Xr(e),null}else 2*dr()-A.renderingStartTime>Sa&&r!==1073741824&&(e.flags|=128,n=!0,Ul(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(r=A.last,r!==null?r.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=dr(),e.sibling=null,r=rr.current,Ht(rr,n?r&1|2:r&1),e):(Xr(e),null);case 22:case 23:return Lw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Un&1073741824&&(Xr(e),e.subtreeFlags&6&&(e.flags|=8192)):Xr(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function NU(t,e){switch(xw(e),e.tag){case 1:return In(e.type)&&Dh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),Wt(_n),Wt(An),Tw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ew(e),null;case 13:if(Wt(rr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));Ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wt(rr),null;case 4:return ka(),null;case 10:return bw(e.type._context),null;case 22:case 23:return Lw(),null;case 24:return null;default:return null}}var pd=!1,rn=!1,RU=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function aa(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ar(t,e,n)}else r.current=null}function Mm(t,e,r){try{r()}catch(n){ar(t,e,n)}}var Pv=!1;function jU(t,e){if(bm=Qh,t=Y_(),mw(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,A=n.focusNode;n=n.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var i=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(a=i+s),h!==A||n!==0&&h.nodeType!==3||(l=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===s&&(a=i),f===A&&++d===n&&(l=i),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Cm={focusedElem:t,selectionRange:r},Qh=!1,Oe=e;Oe!==null;)if(e=Oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Oe=t;else for(;Oe!==null;){e=Oe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,E=y.memoizedState,B=e.stateNode,x=B.getSnapshotBeforeUpdate(e.elementType===e.type?v:As(e.type,v),E);B.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(S){ar(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Oe=t;break}Oe=e.return}return y=Pv,Pv=!1,y}function pc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&Mm(e,r,A)}s=s.next}while(s!==n)}}function Gf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Om(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function WI(t){var e=t.alternate;e!==null&&(t.alternate=null,WI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xs],delete e[Hc],delete e[Em],delete e[wU],delete e[xU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qI(t){return t.tag===5||t.tag===3||t.tag===4}function Lv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=jh));else if(n!==4&&(t=t.child,t!==null))for(Hm(t,e,r),t=t.sibling;t!==null;)Hm(t,e,r),t=t.sibling}function Vm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Vm(t,e,r),t=t.sibling;t!==null;)Vm(t,e,r),t=t.sibling}var Dr=null,is=!1;function wA(t,e,r){for(r=r.child;r!==null;)XI(t,e,r),r=r.sibling}function XI(t,e,r){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(Df,r)}catch{}switch(r.tag){case 5:rn||aa(r,e);case 6:var n=Dr,s=is;Dr=null,wA(t,e,r),Dr=n,is=s,Dr!==null&&(is?(t=Dr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Dr.removeChild(r.stateNode));break;case 18:Dr!==null&&(is?(t=Dr,r=r.stateNode,t.nodeType===8?lp(t.parentNode,r):t.nodeType===1&&lp(t,r),Dc(t)):lp(Dr,r.stateNode));break;case 4:n=Dr,s=is,Dr=r.stateNode.containerInfo,is=!0,wA(t,e,r),Dr=n,is=s;break;case 0:case 11:case 14:case 15:if(!rn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&Mm(r,e,i),s=s.next}while(s!==n)}wA(t,e,r);break;case 1:if(!rn&&(aa(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ar(r,e,a)}wA(t,e,r);break;case 21:wA(t,e,r);break;case 22:r.mode&1?(rn=(n=rn)||r.memoizedState!==null,wA(t,e,r),rn=n):wA(t,e,r);break;default:wA(t,e,r)}}function Mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new RU),e.forEach(function(n){var s=GU.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ns(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var A=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Dr=a.stateNode,is=!1;break e;case 3:Dr=a.stateNode.containerInfo,is=!0;break e;case 4:Dr=a.stateNode.containerInfo,is=!0;break e}a=a.return}if(Dr===null)throw Error(ge(160));XI(A,i,s),Dr=null,is=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ar(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JI(e,t),e=e.sibling}function JI(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ns(e,t),gs(t),n&4){try{pc(3,t,t.return),Gf(3,t)}catch(v){ar(t,t.return,v)}try{pc(5,t,t.return)}catch(v){ar(t,t.return,v)}}break;case 1:ns(e,t),gs(t),n&512&&r!==null&&aa(r,r.return);break;case 5:if(ns(e,t),gs(t),n&512&&r!==null&&aa(r,r.return),t.flags&32){var s=t.stateNode;try{Qc(s,"")}catch(v){ar(t,t.return,v)}}if(n&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=r!==null?r.memoizedProps:A,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&A.type==="radio"&&A.name!=null&&x_(s,A),hm(a,i);var c=hm(a,A);for(i=0;i<l.length;i+=2){var d=l[i],h=l[i+1];d==="style"?C_(s,h):d==="dangerouslySetInnerHTML"?B_(s,h):d==="children"?Qc(s,h):sw(s,d,h,c)}switch(a){case"input":am(s,A);break;case"textarea":y_(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var p=A.value;p!=null?ha(s,!!A.multiple,p,!1):f!==!!A.multiple&&(A.defaultValue!=null?ha(s,!!A.multiple,A.defaultValue,!0):ha(s,!!A.multiple,A.multiple?[]:"",!1))}s[Hc]=A}catch(v){ar(t,t.return,v)}}break;case 6:if(ns(e,t),gs(t),n&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(v){ar(t,t.return,v)}}break;case 3:if(ns(e,t),gs(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dc(e.containerInfo)}catch(v){ar(t,t.return,v)}break;case 4:ns(e,t),gs(t);break;case 13:ns(e,t),gs(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(Dw=dr())),n&4&&Mv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(rn=(c=rn)||d,ns(e,t),rn=c):ns(e,t),gs(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Oe=t,d=t.child;d!==null;){for(h=Oe=d;Oe!==null;){switch(f=Oe,p=f.child,f.tag){case 0:case 11:case 14:case 15:pc(4,f,f.return);break;case 1:aa(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){ar(n,r,v)}}break;case 5:aa(f,f.return);break;case 22:if(f.memoizedState!==null){Hv(h);continue}}p!==null?(p.return=f,Oe=p):Hv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(a=h.stateNode,l=h.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=b_("display",i))}catch(v){ar(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){ar(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ns(e,t),gs(t),n&4&&Mv(t);break;case 21:break;default:ns(e,t),gs(t)}}function gs(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(qI(r)){var n=r;break e}r=r.return}throw Error(ge(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Qc(s,""),n.flags&=-33);var A=Lv(t);Vm(t,A,s);break;case 3:case 4:var i=n.stateNode.containerInfo,a=Lv(t);Hm(t,a,i);break;default:throw Error(ge(161))}}catch(l){ar(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DU(t,e,r){Oe=t,YI(t)}function YI(t,e,r){for(var n=(t.mode&1)!==0;Oe!==null;){var s=Oe,A=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||pd;if(!i){var a=s.alternate,l=a!==null&&a.memoizedState!==null||rn;a=pd;var c=rn;if(pd=i,(rn=l)&&!c)for(Oe=s;Oe!==null;)i=Oe,l=i.child,i.tag===22&&i.memoizedState!==null?Vv(s):l!==null?(l.return=i,Oe=l):Vv(s);for(;A!==null;)Oe=A,YI(A),A=A.sibling;Oe=s,pd=a,rn=c}Ov(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,Oe=A):Ov(t)}}function Ov(t){for(;Oe!==null;){var e=Oe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Gf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!rn)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:As(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&_v(e,A,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}_v(e,i,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Dc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}rn||e.flags&512&&Om(e)}catch(f){ar(e,e.return,f)}}if(e===t){Oe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Oe=r;break}Oe=e.return}}function Hv(t){for(;Oe!==null;){var e=Oe;if(e===t){Oe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Oe=r;break}Oe=e.return}}function Vv(t){for(;Oe!==null;){var e=Oe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Gf(4,e)}catch(l){ar(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){ar(e,s,l)}}var A=e.return;try{Om(e)}catch(l){ar(e,A,l)}break;case 5:var i=e.return;try{Om(e)}catch(l){ar(e,i,l)}}}catch(l){ar(e,e.return,l)}if(e===t){Oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Oe=a;break}Oe=e.return}}var PU=Math.ceil,$h=iA.ReactCurrentDispatcher,Rw=iA.ReactCurrentOwner,Yn=iA.ReactCurrentBatchConfig,xt=0,Qr=null,xr=null,Vr=0,Un=0,la=vi(0),br=0,Wc=null,io=0,zf=0,jw=0,mc=null,yn=null,Dw=0,Sa=1/0,Ls=null,Wh=!1,Km=null,XA=null,md=!1,PA=null,qh=0,wc=0,Gm=null,oh=-1,ah=0;function fn(){return xt&6?dr():oh!==-1?oh:oh=dr()}function JA(t){return t.mode&1?xt&2&&Vr!==0?Vr&-Vr:vU.transition!==null?(ah===0&&(ah=j_()),ah):(t=Ft,t!==0||(t=window.event,t=t===void 0?16:V_(t.type)),t):1}function ls(t,e,r,n){if(50<wc)throw wc=0,Gm=null,Error(ge(185));gu(t,r,n),(!(xt&2)||t!==Qr)&&(t===Qr&&(!(xt&2)&&(zf|=r),br===4&&kA(t,Vr)),En(t,n),r===1&&xt===0&&!(e.mode&1)&&(Sa=dr()+500,Hf&&Bi()))}function En(t,e){var r=t.callbackNode;vS(t,e);var n=Uh(t,t===Qr?Vr:0);if(n===0)r!==null&&Yy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Yy(r),e===1)t.tag===0?yU(Kv.bind(null,t)):aI(Kv.bind(null,t)),pU(function(){!(xt&6)&&Bi()}),r=null;else{switch(D_(n)){case 1:r=lw;break;case 4:r=N_;break;case 16:r=Sh;break;case 536870912:r=R_;break;default:r=Sh}r=iE(r,ZI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ZI(t,e){if(oh=-1,ah=0,xt&6)throw Error(ge(327));var r=t.callbackNode;if(wa()&&t.callbackNode!==r)return null;var n=Uh(t,t===Qr?Vr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xh(t,n);else{e=n;var s=xt;xt|=2;var A=tE();(Qr!==t||Vr!==e)&&(Ls=null,Sa=dr()+500,Ji(t,e));do try{OU();break}catch(a){eE(t,a)}while(!0);Bw(),$h.current=A,xt=s,xr!==null?e=0:(Qr=null,Vr=0,e=br)}if(e!==0){if(e===2&&(s=wm(t),s!==0&&(n=s,e=zm(t,s))),e===1)throw r=Wc,Ji(t,0),kA(t,n),En(t,dr()),r;if(e===6)kA(t,n);else{if(s=t.current.alternate,!(n&30)&&!LU(s)&&(e=Xh(t,n),e===2&&(A=wm(t),A!==0&&(n=A,e=zm(t,A))),e===1))throw r=Wc,Ji(t,0),kA(t,n),En(t,dr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ge(345));case 2:Li(t,yn,Ls);break;case 3:if(kA(t,n),(n&130023424)===n&&(e=Dw+500-dr(),10<e)){if(Uh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){fn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Im(Li.bind(null,t,yn,Ls),e);break}Li(t,yn,Ls);break;case 4:if(kA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-as(n);A=1<<i,i=e[i],i>s&&(s=i),n&=~A}if(n=s,n=dr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*PU(n/1960))-n,10<n){t.timeoutHandle=Im(Li.bind(null,t,yn,Ls),n);break}Li(t,yn,Ls);break;case 5:Li(t,yn,Ls);break;default:throw Error(ge(329))}}}return En(t,dr()),t.callbackNode===r?ZI.bind(null,t):null}function zm(t,e){var r=mc;return t.current.memoizedState.isDehydrated&&(Ji(t,e).flags|=256),t=Xh(t,e),t!==2&&(e=yn,yn=r,e!==null&&$m(e)),t}function $m(t){yn===null?yn=t:yn.push.apply(yn,t)}function LU(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],A=s.getSnapshot;s=s.value;try{if(!us(A(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kA(t,e){for(e&=~jw,e&=~zf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-as(e),n=1<<r;t[r]=-1,e&=~n}}function Kv(t){if(xt&6)throw Error(ge(327));wa();var e=Uh(t,0);if(!(e&1))return En(t,dr()),null;var r=Xh(t,e);if(t.tag!==0&&r===2){var n=wm(t);n!==0&&(e=n,r=zm(t,n))}if(r===1)throw r=Wc,Ji(t,0),kA(t,e),En(t,dr()),r;if(r===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Li(t,yn,Ls),En(t,dr()),null}function Pw(t,e){var r=xt;xt|=1;try{return t(e)}finally{xt=r,xt===0&&(Sa=dr()+500,Hf&&Bi())}}function oo(t){PA!==null&&PA.tag===0&&!(xt&6)&&wa();var e=xt;xt|=1;var r=Yn.transition,n=Ft;try{if(Yn.transition=null,Ft=1,t)return t()}finally{Ft=n,Yn.transition=r,xt=e,!(xt&6)&&Bi()}}function Lw(){Un=la.current,Wt(la)}function Ji(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gU(r)),xr!==null)for(r=xr.return;r!==null;){var n=r;switch(xw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dh();break;case 3:ka(),Wt(_n),Wt(An),Tw();break;case 5:Ew(n);break;case 4:ka();break;case 13:Wt(rr);break;case 19:Wt(rr);break;case 10:bw(n.type._context);break;case 22:case 23:Lw()}r=r.return}if(Qr=t,xr=t=YA(t.current,null),Vr=Un=e,br=0,Wc=null,jw=zf=io=0,yn=mc=null,Wi!==null){for(e=0;e<Wi.length;e++)if(r=Wi[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,A=r.pending;if(A!==null){var i=A.next;A.next=s,n.next=i}r.pending=n}Wi=null}return t}function eE(t,e){do{var r=xr;try{if(Bw(),sh.current=zh,Gh){for(var n=nr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Gh=!1}if(Ao=0,Sr=vr=nr=null,gc=!1,Gc=0,Rw.current=null,r===null||r.return===null){br=1,Wc=e,xr=null;break}e:{var A=t,i=r.return,a=r,l=e;if(e=Vr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Sv(i);if(p!==null){p.flags&=-257,Uv(p,i,a,A,e),p.mode&1&&Fv(A,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){Fv(A,c,e),Mw();break e}l=Error(ge(426))}}else if(Yt&&a.mode&1){var E=Sv(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Uv(E,i,a,A,e),yw(Fa(l,a));break e}}A=l=Fa(l,a),br!==4&&(br=2),mc===null?mc=[A]:mc.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var B=DI(A,l,e);Cv(A,B);break e;case 1:a=l;var x=A.type,_=A.stateNode;if(!(A.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(XA===null||!XA.has(_)))){A.flags|=65536,e&=-e,A.lanes|=e;var S=PI(A,a,e);Cv(A,S);break e}}A=A.return}while(A!==null)}nE(r)}catch(U){e=U,xr===r&&r!==null&&(xr=r=r.return);continue}break}while(!0)}function tE(){var t=$h.current;return $h.current=zh,t===null?zh:t}function Mw(){(br===0||br===3||br===2)&&(br=4),Qr===null||!(io&268435455)&&!(zf&268435455)||kA(Qr,Vr)}function Xh(t,e){var r=xt;xt|=2;var n=tE();(Qr!==t||Vr!==e)&&(Ls=null,Ji(t,e));do try{MU();break}catch(s){eE(t,s)}while(!0);if(Bw(),xt=r,$h.current=n,xr!==null)throw Error(ge(261));return Qr=null,Vr=0,br}function MU(){for(;xr!==null;)rE(xr)}function OU(){for(;xr!==null&&!dS();)rE(xr)}function rE(t){var e=AE(t.alternate,t,Un);t.memoizedProps=t.pendingProps,e===null?nE(t):xr=e,Rw.current=null}function nE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=NU(r,e),r!==null){r.flags&=32767,xr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{br=6,xr=null;return}}else if(r=QU(r,e,Un),r!==null){xr=r;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=t}while(e!==null);br===0&&(br=5)}function Li(t,e,r){var n=Ft,s=Yn.transition;try{Yn.transition=null,Ft=1,HU(t,e,r,n)}finally{Yn.transition=s,Ft=n}return null}function HU(t,e,r,n){do wa();while(PA!==null);if(xt&6)throw Error(ge(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var A=r.lanes|r.childLanes;if(BS(t,A),t===Qr&&(xr=Qr=null,Vr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||md||(md=!0,iE(Sh,function(){return wa(),null})),A=(r.flags&15990)!==0,r.subtreeFlags&15990||A){A=Yn.transition,Yn.transition=null;var i=Ft;Ft=1;var a=xt;xt|=4,Rw.current=null,jU(t,r),JI(r,t),aU(Cm),Qh=!!bm,Cm=bm=null,t.current=r,DU(r),hS(),xt=a,Ft=i,Yn.transition=A}else t.current=r;if(md&&(md=!1,PA=t,qh=s),A=t.pendingLanes,A===0&&(XA=null),pS(r.stateNode),En(t,dr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Wh)throw Wh=!1,t=Km,Km=null,t;return qh&1&&t.tag!==0&&wa(),A=t.pendingLanes,A&1?t===Gm?wc++:(wc=0,Gm=t):wc=0,Bi(),null}function wa(){if(PA!==null){var t=D_(qh),e=Yn.transition,r=Ft;try{if(Yn.transition=null,Ft=16>t?16:t,PA===null)var n=!1;else{if(t=PA,PA=null,qh=0,xt&6)throw Error(ge(331));var s=xt;for(xt|=4,Oe=t.current;Oe!==null;){var A=Oe,i=A.child;if(Oe.flags&16){var a=A.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Oe=c;Oe!==null;){var d=Oe;switch(d.tag){case 0:case 11:case 15:pc(8,d,A)}var h=d.child;if(h!==null)h.return=d,Oe=h;else for(;Oe!==null;){d=Oe;var f=d.sibling,p=d.return;if(WI(d),d===c){Oe=null;break}if(f!==null){f.return=p,Oe=f;break}Oe=p}}}var y=A.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}Oe=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,Oe=i;else e:for(;Oe!==null;){if(A=Oe,A.flags&2048)switch(A.tag){case 0:case 11:case 15:pc(9,A,A.return)}var B=A.sibling;if(B!==null){B.return=A.return,Oe=B;break e}Oe=A.return}}var x=t.current;for(Oe=x;Oe!==null;){i=Oe;var _=i.child;if(i.subtreeFlags&2064&&_!==null)_.return=i,Oe=_;else e:for(i=x;Oe!==null;){if(a=Oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gf(9,a)}}catch(U){ar(a,a.return,U)}if(a===i){Oe=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Oe=S;break e}Oe=a.return}}if(xt=s,Bi(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(Df,t)}catch{}n=!0}return n}finally{Ft=r,Yn.transition=e}}return!1}function Gv(t,e,r){e=Fa(r,e),e=DI(t,e,1),t=qA(t,e,1),e=fn(),t!==null&&(gu(t,1,e),En(t,e))}function ar(t,e,r){if(t.tag===3)Gv(t,t,r);else for(;e!==null;){if(e.tag===3){Gv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(XA===null||!XA.has(n))){t=Fa(r,t),t=PI(e,t,1),e=qA(e,t,1),t=fn(),e!==null&&(gu(e,1,t),En(e,t));break}}e=e.return}}function VU(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&r,Qr===t&&(Vr&r)===r&&(br===4||br===3&&(Vr&130023424)===Vr&&500>dr()-Dw?Ji(t,0):jw|=r),En(t,e)}function sE(t,e){e===0&&(t.mode&1?(e=od,od<<=1,!(od&130023424)&&(od=4194304)):e=1);var r=fn();t=Zs(t,e),t!==null&&(gu(t,e,r),En(t,r))}function KU(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),sE(t,r)}function GU(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ge(314))}n!==null&&n.delete(e),sE(t,r)}var AE;AE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||_n.current)vn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return vn=!1,UU(t,e,r);vn=!!(t.flags&131072)}else vn=!1,Yt&&e.flags&1048576&&lI(e,Mh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ih(t,e),t=e.pendingProps;var s=Ia(e,An.current);ma(e,r),s=Fw(null,e,n,t,s,r);var A=Sw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(n)?(A=!0,Ph(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_w(e),s.updater=Kf,e.stateNode=s,s._reactInternals=e,Qm(e,n,t,r),e=jm(null,e,n,!0,A,r)):(e.tag=0,Yt&&A&&ww(e),dn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ih(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=$U(n),t=As(n,t),s){case 0:e=Rm(null,e,n,t,r);break e;case 1:e=Rv(null,e,n,t,r);break e;case 11:e=Qv(null,e,n,t,r);break e;case 14:e=Nv(null,e,n,As(n.type,t),r);break e}throw Error(ge(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:As(n,s),Rm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:As(n,s),Rv(t,e,n,s,r);case 3:e:{if(HI(e),t===null)throw Error(ge(387));n=e.pendingProps,A=e.memoizedState,s=A.element,gI(t,e),Vh(e,n,null,r);var i=e.memoizedState;if(n=i.element,A.isDehydrated)if(A={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=Fa(Error(ge(423)),e),e=jv(t,e,n,r,s);break e}else if(n!==s){s=Fa(Error(ge(424)),e),e=jv(t,e,n,r,s);break e}else for(Qn=WA(e.stateNode.containerInfo.firstChild),Nn=e,Yt=!0,os=null,r=hI(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ea(),n===s){e=eA(t,e,r);break e}dn(t,e,n,r)}e=e.child}return e;case 5:return pI(e),t===null&&Fm(e),n=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,_m(n,s)?i=null:A!==null&&_m(n,A)&&(e.flags|=32),OI(t,e),dn(t,e,i,r),e.child;case 6:return t===null&&Fm(e),null;case 13:return VI(t,e,r);case 4:return Iw(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ta(e,null,n,r):dn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:As(n,s),Qv(t,e,n,s,r);case 7:return dn(t,e,e.pendingProps,r),e.child;case 8:return dn(t,e,e.pendingProps.children,r),e.child;case 12:return dn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,Ht(Oh,n._currentValue),n._currentValue=i,A!==null)if(us(A.value,i)){if(A.children===s.children&&!_n.current){e=eA(t,e,r);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var a=A.dependencies;if(a!==null){i=A.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(A.tag===1){l=qs(-1,r&-r),l.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}A.lanes|=r,l=A.alternate,l!==null&&(l.lanes|=r),Sm(A.return,r,e),a.lanes|=r;break}l=l.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(ge(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),Sm(i,r,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}dn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ma(e,r),s=Zn(s),n=n(s),e.flags|=1,dn(t,e,n,r),e.child;case 14:return n=e.type,s=As(n,e.pendingProps),s=As(n.type,s),Nv(t,e,n,s,r);case 15:return LI(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:As(n,s),ih(t,e),e.tag=1,In(n)?(t=!0,Ph(e)):t=!1,ma(e,r),jI(e,n,s),Qm(e,n,s,r),jm(null,e,n,!0,t,r);case 19:return KI(t,e,r);case 22:return MI(t,e,r)}throw Error(ge(156,e.tag))};function iE(t,e){return Q_(t,e)}function zU(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(t,e,r,n){return new zU(t,e,r,n)}function Ow(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $U(t){if(typeof t=="function")return Ow(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iw)return 11;if(t===ow)return 14}return 2}function YA(t,e){var r=t.alternate;return r===null?(r=qn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function lh(t,e,r,n,s,A){var i=2;if(n=t,typeof t=="function")Ow(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Zo:return Yi(r.children,s,A,e);case Aw:i=8,s|=8;break;case nm:return t=qn(12,r,e,s|2),t.elementType=nm,t.lanes=A,t;case sm:return t=qn(13,r,e,s),t.elementType=sm,t.lanes=A,t;case Am:return t=qn(19,r,e,s),t.elementType=Am,t.lanes=A,t;case p_:return $f(r,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case f_:i=10;break e;case g_:i=9;break e;case iw:i=11;break e;case ow:i=14;break e;case _A:i=16,n=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=qn(i,r,e,s),e.elementType=t,e.type=n,e.lanes=A,e}function Yi(t,e,r,n){return t=qn(7,t,n,e),t.lanes=r,t}function $f(t,e,r,n){return t=qn(22,t,n,e),t.elementType=p_,t.lanes=r,t.stateNode={isHidden:!1},t}function mp(t,e,r){return t=qn(6,t,null,e),t.lanes=r,t}function wp(t,e,r){return e=qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WU(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yg(0),this.expirationTimes=Yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hw(t,e,r,n,s,A,i,a,l){return t=new WU(t,e,r,a,l),e===1?(e=1,A===!0&&(e|=8)):e=0,A=qn(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_w(A),t}function qU(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function oE(t){if(!t)return ai;t=t._reactInternals;e:{if(Bo(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var r=t.type;if(In(r))return oI(t,r,e)}return e}function aE(t,e,r,n,s,A,i,a,l){return t=Hw(r,n,!0,t,s,A,i,a,l),t.context=oE(null),r=t.current,n=fn(),s=JA(r),A=qs(n,s),A.callback=e??null,qA(r,A,s),t.current.lanes=s,gu(t,s,n),En(t,n),t}function Wf(t,e,r,n){var s=e.current,A=fn(),i=JA(s);return r=oE(r),e.context===null?e.context=r:e.pendingContext=r,e=qs(A,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qA(s,e,i),t!==null&&(ls(t,s,i,A),nh(t,s,i)),i}function Jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Vw(t,e){zv(t,e),(t=t.alternate)&&zv(t,e)}function XU(){return null}var lE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kw(t){this._internalRoot=t}qf.prototype.render=Kw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));Wf(t,e,null,null)};qf.prototype.unmount=Kw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){Wf(null,t,null,null)}),e[Ys]=null}};function qf(t){this._internalRoot=t}qf.prototype.unstable_scheduleHydration=function(t){if(t){var e=M_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<TA.length&&e!==0&&e<TA[r].priority;r++);TA.splice(r,0,t),r===0&&H_(t)}};function Gw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $v(){}function JU(t,e,r,n,s){if(s){if(typeof n=="function"){var A=n;n=function(){var c=Jh(i);A.call(c)}}var i=aE(e,n,t,0,null,!1,!1,"",$v);return t._reactRootContainer=i,t[Ys]=i.current,Mc(t.nodeType===8?t.parentNode:t),oo(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=Jh(l);a.call(c)}}var l=Hw(t,0,!1,null,null,!1,!1,"",$v);return t._reactRootContainer=l,t[Ys]=l.current,Mc(t.nodeType===8?t.parentNode:t),oo(function(){Wf(e,l,r,n)}),l}function Jf(t,e,r,n,s){var A=r._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var a=s;s=function(){var l=Jh(i);a.call(l)}}Wf(e,i,t,s)}else i=JU(r,e,t,s,n);return Jh(i)}P_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Wl(e.pendingLanes);r!==0&&(cw(e,r|1),En(e,dr()),!(xt&6)&&(Sa=dr()+500,Bi()))}break;case 13:oo(function(){var n=Zs(t,1);if(n!==null){var s=fn();ls(n,t,1,s)}}),Vw(t,1)}};uw=function(t){if(t.tag===13){var e=Zs(t,134217728);if(e!==null){var r=fn();ls(e,t,134217728,r)}Vw(t,134217728)}};L_=function(t){if(t.tag===13){var e=JA(t),r=Zs(t,e);if(r!==null){var n=fn();ls(r,t,e,n)}Vw(t,e)}};M_=function(){return Ft};O_=function(t,e){var r=Ft;try{return Ft=t,e()}finally{Ft=r}};gm=function(t,e,r){switch(e){case"input":if(am(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Of(n);if(!s)throw Error(ge(90));w_(n),am(n,s)}}}break;case"textarea":y_(t,r);break;case"select":e=r.value,e!=null&&ha(t,!!r.multiple,e,!1)}};E_=Pw;T_=oo;var YU={usingClientEntryPoint:!1,Events:[mu,na,Of,__,I_,Pw]},Ql={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZU={bundleType:Ql.bundleType,version:Ql.version,rendererPackageName:Ql.rendererPackageName,rendererConfig:Ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:iA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ql.findFiberByHostInstance||XU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Df=wd.inject(ZU),bs=wd}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YU;Pn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gw(e))throw Error(ge(200));return qU(t,e,null,r)};Pn.createRoot=function(t,e){if(!Gw(t))throw Error(ge(299));var r=!1,n="",s=lE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hw(t,1,!1,null,null,r,!1,n,s),t[Ys]=e.current,Mc(t.nodeType===8?t.parentNode:t),new Kw(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=S_(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return oo(t)};Pn.hydrate=function(t,e,r){if(!Xf(e))throw Error(ge(200));return Jf(null,t,e,!0,r)};Pn.hydrateRoot=function(t,e,r){if(!Gw(t))throw Error(ge(405));var n=r!=null&&r.hydratedSources||null,s=!1,A="",i=lE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(A=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=aE(e,null,t,1,r??null,s,!1,A,i),t[Ys]=e.current,Mc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new qf(e)};Pn.render=function(t,e,r){if(!Xf(e))throw Error(ge(200));return Jf(null,t,e,!1,r)};Pn.unmountComponentAtNode=function(t){if(!Xf(t))throw Error(ge(40));return t._reactRootContainer?(oo(function(){Jf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ys]=null})}),!0):!1};Pn.unstable_batchedUpdates=Pw;Pn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Xf(r))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return Jf(t,e,r,!1,n)};Pn.version="18.3.1-next-f1338f8080-20240426";function cE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cE)}catch(t){console.error(t)}}cE(),c_.exports=Pn;var eQ=c_.exports,Wv=eQ;tm.createRoot=Wv.createRoot,tm.hydrateRoot=Wv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qc(){return qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qc.apply(this,arguments)}var LA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(LA||(LA={}));const qv="popstate";function tQ(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:a="",hash:l=""}=bo(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Wm("",{pathname:i,search:a,hash:l},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(s,A){let i=s.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof A=="string"?A:Yh(A))}function n(s,A){Yf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return nQ(e,r,n,t)}function sr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rQ(){return Math.random().toString(36).substr(2,8)}function Xv(t,e){return{usr:t.state,key:t.key,idx:e}}function Wm(t,e,r,n){return r===void 0&&(r=null),qc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bo(e):e,{state:r,key:e&&e.key||n||rQ()})}function Yh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function bo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function nQ(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:A=!1}=n,i=s.history,a=LA.Pop,l=null,c=d();c==null&&(c=0,i.replaceState(qc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){a=LA.Pop;let E=d(),B=E==null?null:E-c;c=E,l&&l({action:a,location:v.location,delta:B})}function f(E,B){a=LA.Push;let x=Wm(v.location,E,B);r&&r(x,E),c=d()+1;let _=Xv(x,c),S=v.createHref(x);try{i.pushState(_,"",S)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(S)}A&&l&&l({action:a,location:v.location,delta:1})}function p(E,B){a=LA.Replace;let x=Wm(v.location,E,B);r&&r(x,E),c=d();let _=Xv(x,c),S=v.createHref(x);i.replaceState(_,"",S),A&&l&&l({action:a,location:v.location,delta:0})}function y(E){let B=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof E=="string"?E:Yh(E);return x=x.replace(/ $/,"%20"),sr(B,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,B)}let v={get action(){return a},get location(){return t(s,i)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(qv,h),l=E,()=>{s.removeEventListener(qv,h),l=null}},createHref(E){return e(s,E)},createURL:y,encodeLocation(E){let B=y(E);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:f,replace:p,go(E){return i.go(E)}};return v}var Jv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jv||(Jv={}));function sQ(t,e,r){return r===void 0&&(r="/"),AQ(t,e,r)}function AQ(t,e,r,n){let s=typeof e=="string"?bo(e):e,A=Ua(s.pathname||"/",r);if(A==null)return null;let i=uE(t);iQ(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=mQ(A);a=gQ(i[l],c)}return a}function uE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(A,i,a)=>{let l={relativePath:a===void 0?A.path||"":a,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};l.relativePath.startsWith("/")&&(sr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=ZA([n,l.relativePath]),d=r.concat(l);A.children&&A.children.length>0&&(sr(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uE(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:hQ(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var a;if(A.path===""||!((a=A.path)!=null&&a.includes("?")))s(A,i);else for(let l of dE(A.path))s(A,i,l)}),e}function dE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return s?[A,""]:[A];let i=dE(n.join("/")),a=[];return a.push(...i.map(l=>l===""?A:[A,l].join("/"))),s&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function iQ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:fQ(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const oQ=/^:[\w-]+$/,aQ=3,lQ=2,cQ=1,uQ=10,dQ=-2,Yv=t=>t==="*";function hQ(t,e){let r=t.split("/"),n=r.length;return r.some(Yv)&&(n+=dQ),e&&(n+=lQ),r.filter(s=>!Yv(s)).reduce((s,A)=>s+(oQ.test(A)?aQ:A===""?cQ:uQ),n)}function fQ(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function gQ(t,e,r){let{routesMeta:n}=t,s={},A="/",i=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=qm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:ZA([A,h.pathname]),pathnameBase:BQ(ZA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=ZA([A,h.pathnameBase]))}return i}function qm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=pQ(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let v=a[h]||"";i=A.slice(0,A.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[h];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function pQ(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Yf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function mQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ua(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const wQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xQ=t=>wQ.test(t);function yQ(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?bo(t):t,A;if(r)if(xQ(r))A=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Yf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?A=Zv(r.substring(1),"/"):A=Zv(r,e)}else A=e;return{pathname:A,search:bQ(n),hash:CQ(s)}}function Zv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function xp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vQ(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function zw(t,e){let r=vQ(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function $w(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=bo(t):(s=qc({},t),sr(!s.pathname||!s.pathname.includes("?"),xp("?","pathname","search",s)),sr(!s.pathname||!s.pathname.includes("#"),xp("#","pathname","hash",s)),sr(!s.search||!s.search.includes("#"),xp("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,a;if(i==null)a=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=yQ(s,a),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ZA=t=>t.join("/").replace(/\/\/+/g,"/"),BQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _Q(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hE=["post","put","patch","delete"];new Set(hE);const IQ=["get",...hE];new Set(IQ);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xc(){return Xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xc.apply(this,arguments)}const Zf=I.createContext(null),fE=I.createContext(null),oA=I.createContext(null),eg=I.createContext(null),aA=I.createContext({outlet:null,matches:[],isDataRoute:!1}),gE=I.createContext(null);function EQ(t,e){let{relative:r}=e===void 0?{}:e;el()||sr(!1);let{basename:n,navigator:s}=I.useContext(oA),{hash:A,pathname:i,search:a}=tg(t,{relative:r}),l=i;return n!=="/"&&(l=i==="/"?n:ZA([n,i])),s.createHref({pathname:l,search:a,hash:A})}function el(){return I.useContext(eg)!=null}function bi(){return el()||sr(!1),I.useContext(eg).location}function pE(t){I.useContext(oA).static||I.useLayoutEffect(t)}function xu(){let{isDataRoute:t}=I.useContext(aA);return t?HQ():TQ()}function TQ(){el()||sr(!1);let t=I.useContext(Zf),{basename:e,future:r,navigator:n}=I.useContext(oA),{matches:s}=I.useContext(aA),{pathname:A}=bi(),i=JSON.stringify(zw(s,r.v7_relativeSplatPath)),a=I.useRef(!1);return pE(()=>{a.current=!0}),I.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=$w(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ZA([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,A,t])}const kQ=I.createContext(null);function FQ(t){let e=I.useContext(aA).outlet;return e&&I.createElement(kQ.Provider,{value:t},e)}function tg(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=I.useContext(oA),{matches:s}=I.useContext(aA),{pathname:A}=bi(),i=JSON.stringify(zw(s,n.v7_relativeSplatPath));return I.useMemo(()=>$w(t,JSON.parse(i),A,r==="path"),[t,i,A,r])}function SQ(t,e){return UQ(t,e)}function UQ(t,e,r,n){el()||sr(!1);let{navigator:s}=I.useContext(oA),{matches:A}=I.useContext(aA),i=A[A.length-1],a=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c=bi(),d;if(e){var h;let E=typeof e=="string"?bo(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||sr(!1),d=E}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let E=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=sQ(t,{pathname:p}),v=DQ(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:ZA([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:ZA([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),A,r,n);return e&&v?I.createElement(eg.Provider,{value:{location:Xc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:LA.Pop}},v):v}function QQ(){let t=OQ(),e=_Q(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),r?I.createElement("pre",{style:s},r):null,null)}const NQ=I.createElement(QQ,null);class RQ extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?I.createElement(aA.Provider,{value:this.props.routeContext},I.createElement(gE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jQ(t){let{routeContext:e,match:r,children:n}=t,s=I.useContext(Zf);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),I.createElement(aA.Provider,{value:e},n)}function DQ(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var A;if(!r)return null;if(r.errors)t=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||sr(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let p,y=!1,v=null,E=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||NQ,l&&(c<0&&f===0?(VQ("route-fallback"),y=!0,E=null):c===f&&(y=!0,E=h.route.hydrateFallbackElement||null)));let B=e.concat(i.slice(0,f+1)),x=()=>{let _;return p?_=v:y?_=E:h.route.Component?_=I.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=d,I.createElement(jQ,{match:h,routeContext:{outlet:d,matches:B,isDataRoute:r!=null},children:_})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?I.createElement(RQ,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:x(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):x()},null)}var mE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mE||{}),wE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wE||{});function PQ(t){let e=I.useContext(Zf);return e||sr(!1),e}function LQ(t){let e=I.useContext(fE);return e||sr(!1),e}function MQ(t){let e=I.useContext(aA);return e||sr(!1),e}function xE(t){let e=MQ(),r=e.matches[e.matches.length-1];return r.route.id||sr(!1),r.route.id}function OQ(){var t;let e=I.useContext(gE),r=LQ(),n=xE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function HQ(){let{router:t}=PQ(mE.UseNavigateStable),e=xE(wE.UseNavigateStable),r=I.useRef(!1);return pE(()=>{r.current=!0}),I.useCallback(function(s,A){A===void 0&&(A={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xc({fromRouteId:e},A)))},[t,e])}const eB={};function VQ(t,e,r){eB[t]||(eB[t]=!0)}function KQ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Zh(t){let{to:e,replace:r,state:n,relative:s}=t;el()||sr(!1);let{future:A,static:i}=I.useContext(oA),{matches:a}=I.useContext(aA),{pathname:l}=bi(),c=xu(),d=$w(e,zw(a,A.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return I.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function GQ(t){return FQ(t.context)}function cn(t){sr(!1)}function zQ(t){let{basename:e="/",children:r=null,location:n,navigationType:s=LA.Pop,navigator:A,static:i=!1,future:a}=t;el()&&sr(!1);let l=e.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:A,static:i,future:Xc({v7_relativeSplatPath:!1},a)}),[l,a,A,i]);typeof n=="string"&&(n=bo(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:y="default"}=n,v=I.useMemo(()=>{let E=Ua(d,l);return E==null?null:{location:{pathname:E,search:h,hash:f,state:p,key:y},navigationType:s}},[l,d,h,f,p,y,s]);return v==null?null:I.createElement(oA.Provider,{value:c},I.createElement(eg.Provider,{children:r,value:v}))}function $Q(t){let{children:e,location:r}=t;return SQ(Xm(e),r)}new Promise(()=>{});function Xm(t,e){e===void 0&&(e=[]);let r=[];return I.Children.forEach(t,(n,s)=>{if(!I.isValidElement(n))return;let A=[...e,s];if(n.type===I.Fragment){r.push.apply(r,Xm(n.props.children,A));return}n.type!==cn&&sr(!1),!n.props.index||!n.props.children||sr(!1);let i={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Xm(n.props.children,A)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ef.apply(this,arguments)}function yE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,A;for(A=0;A<n.length;A++)s=n[A],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function WQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qQ(t,e){return t.button===0&&(!e||e==="_self")&&!WQ(t)}function Jm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function XQ(t,e){let r=Jm(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(A=>{r.append(s,A)})}),r}const JQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YQ=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ZQ="6";try{window.__reactRouterVersion=ZQ}catch{}const eN=I.createContext({isTransitioning:!1}),tN="startTransition",tB=VF[tN];function rN(t){let{basename:e,children:r,future:n,window:s}=t,A=I.useRef();A.current==null&&(A.current=tQ({window:s,v5Compat:!0}));let i=A.current,[a,l]=I.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=I.useCallback(h=>{c&&tB?tB(()=>l(h)):l(h)},[l,c]);return I.useLayoutEffect(()=>i.listen(d),[i,d]),I.useEffect(()=>KQ(n),[n]),I.createElement(zQ,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const nN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AN=I.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:A,replace:i,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=yE(e,JQ),{basename:p}=I.useContext(oA),y,v=!1;if(typeof c=="string"&&sN.test(c)&&(y=c,nN))try{let _=new URL(window.location.href),S=c.startsWith("//")?new URL(_.protocol+c):new URL(c),U=Ua(S.pathname,p);S.origin===_.origin&&U!=null?c=U+S.search+S.hash:v=!0}catch{}let E=EQ(c,{relative:s}),B=oN(c,{replace:i,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function x(_){n&&n(_),_.defaultPrevented||B(_)}return I.createElement("a",ef({},f,{href:y||E,onClick:v||A?n:x,ref:r,target:l}))}),ys=I.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:A="",end:i=!1,style:a,to:l,viewTransition:c,children:d}=e,h=yE(e,YQ),f=tg(l,{relative:h.relative}),p=bi(),y=I.useContext(fE),{navigator:v,basename:E}=I.useContext(oA),B=y!=null&&aN(f)&&c===!0,x=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,_=p.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(_=_.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&E&&(S=Ua(S,E)||S);const U=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=_===x||!i&&_.startsWith(x)&&_.charAt(U)==="/",w=S!=null&&(S===x||!i&&S.startsWith(x)&&S.charAt(x.length)==="/"),b={isActive:N,isPending:w,isTransitioning:B},C=N?n:void 0,F;typeof A=="function"?F=A(b):F=[A,N?"active":null,w?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(b):a;return I.createElement(AN,ef({},h,{"aria-current":C,className:F,ref:r,style:R,to:l,viewTransition:c}),typeof d=="function"?d(b):d)});var Ym;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ym||(Ym={}));var rB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rB||(rB={}));function iN(t){let e=I.useContext(Zf);return e||sr(!1),e}function oN(t,e){let{target:r,replace:n,state:s,preventScrollReset:A,relative:i,viewTransition:a}=e===void 0?{}:e,l=xu(),c=bi(),d=tg(t,{relative:i});return I.useCallback(h=>{if(qQ(h,r)){h.preventDefault();let f=n!==void 0?n:Yh(c)===Yh(d);l(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:a})}},[c,l,d,n,s,r,t,A,i,a])}function vE(t){let e=I.useRef(Jm(t)),r=I.useRef(!1),n=bi(),s=I.useMemo(()=>XQ(n.search,r.current?null:e.current),[n.search]),A=xu(),i=I.useCallback((a,l)=>{const c=Jm(typeof a=="function"?a(s):a);r.current=!0,A("?"+c,l)},[A,s]);return[s,i]}function aN(t,e){e===void 0&&(e={});let r=I.useContext(eN);r==null&&sr(!1);let{basename:n}=iN(Ym.useViewTransitionState),s=tg(t,{relative:e.relative});if(!r.isTransitioning)return!1;let A=Ua(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Ua(r.nextLocation.pathname,n)||r.nextLocation.pathname;return qm(s.pathname,i)!=null||qm(s.pathname,A)!=null}var de=(t=>(t.First="1 ",t.Second="2 ",t))(de||{}),rt=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(rt||{});const wt=["","","","",""],wn={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},nB=["","","/","","","",""," "],tf=[{shift:de.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:de.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:de.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:de.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:de.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:de.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:de.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:de.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:de.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:de.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:de.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:de.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:de.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:de.Second,period:6,start:"18:50",end:"19:35",day:"default"}],lN=[{shift:de.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:de.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:de.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:de.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:de.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:de.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:de.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:de.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:de.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:de.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:de.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:de.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:de.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:de.Second,period:6,start:"17:00",end:"17:35",day:"default"}],Nl=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),BE=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:Nl(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:Nl(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:Nl(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:Nl(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:Nl(78,86),order:5}],en={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:de.First,studentsCount:25},{id:"c2",name:"6",shift:de.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:tf,dutyZones:BE,dutySchedule:[],nutritionRecords:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",weatherApiKey:"",weatherCity:"Minsk,BY",bellPresets:[{id:"preset_normal",name:" (45 )",bells:tf},{id:"preset_short",name:" (35 )",bells:lN}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]},telegramTemplates:{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`},adminAnnouncement:{message:"",active:!1,lastUpdated:""}}},cN="modulepreload",uN=function(t){return"/zamenygymn/"+t},sB={},dN=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=uN(l),l in sB)return;sB[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":cN,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function A(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&A(a.reason);return e().catch(A)})};var AB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},hN=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[r++];e[n++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[r++],i=t[r++],a=t[r++],l=((s&7)<<18|(A&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const A=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},CE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,a=i?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=A>>2,h=(A&3)<<4|a>>4;let f=(a&15)<<2|c>>6,p=c&63;l||(p=64,i||(f=64)),n.push(r[d],r[h],r[f],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const A=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,A==null||a==null||c==null||h==null)throw new fN;const f=A<<2|a>>4;if(n.push(f),c!==64){const p=a<<4&240|c>>2;if(n.push(p),h!==64){const y=c<<6&192|h;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gN=function(t){const e=bE(t);return CE.encodeByteArray(e,!0)},rf=function(t){return gN(t).replace(/\./g,"")},_E=function(t){try{return CE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=()=>pN().__FIREBASE_DEFAULTS__,wN=()=>{if(typeof process>"u"||typeof AB>"u")return;const t=AB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_E(t[1]);return e&&JSON.parse(e)},rg=()=>{try{return mN()||wN()||xN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IE=t=>{var e,r;return(r=(e=rg())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},yN=t=>{const e=IE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},EE=()=>{var t;return(t=rg())===null||t===void 0?void 0:t.config},TE=t=>{var e;return(e=rg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rf(JSON.stringify(r)),rf(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cr())}function CN(){var t;const e=(t=rg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _N(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TN(){const t=Cr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kE(){return!CN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FE(){try{return typeof indexedDB=="object"}catch{return!1}}function kN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="FirebaseError";class lA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=FN,Object.setPrototypeOf(this,lA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?SN(A,n):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new lA(s,a,n)}}function SN(t,e){return t.replace(UN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const UN=/\{\$([^}]+)}/g;function QN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function li(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const A=t[s],i=e[s];if(iB(A)&&iB(i)){if(!li(A,i))return!1}else if(A!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function iB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Xl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,A]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Jl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function NN(t,e){const r=new RN(t,e);return r.subscribe.bind(r)}class RN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");jN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=yp),s.error===void 0&&(s.error=yp),s.complete===void 0&&(s.complete=yp);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function yp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class ao{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new vN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LN(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const A=this.getOrInitializeService({instanceIdentifier:s});n.resolve(A)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[A,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(A);n===a&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),A=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:PN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PN(t){return t===Mi?void 0:t}function LN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new DN(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ht||(ht={}));const ON={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},HN=ht.INFO,VN={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},KN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=VN[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Ww=class{constructor(e){this.name=e,this._logLevel=HN,this._logHandler=KN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ON[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}};const GN=(t,e)=>e.some(r=>t instanceof r);let oB,aB;function zN(){return oB||(oB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $N(){return aB||(aB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,Zm=new WeakMap,UE=new WeakMap,vp=new WeakMap,qw=new WeakMap;function WN(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{r(ei(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&SE.set(r,t)}).catch(()=>{}),qw.set(e,t),e}function qN(t){if(Zm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});Zm.set(t,e)}let e0={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ei(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XN(t){e0=t(e0)}function JN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Bp(this),e,...r);return UE.set(n,e.sort?e.sort():[e]),ei(n)}:$N().includes(t)?function(...e){return t.apply(Bp(this),e),ei(SE.get(this))}:function(...e){return ei(t.apply(Bp(this),e))}}function YN(t){return typeof t=="function"?JN(t):(t instanceof IDBTransaction&&qN(t),GN(t,zN())?new Proxy(t,e0):t)}function ei(t){if(t instanceof IDBRequest)return WN(t);if(vp.has(t))return vp.get(t);const e=YN(t);return e!==t&&(vp.set(t,e),qw.set(e,t)),e}const Bp=t=>qw.get(t);function ZN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),a=ei(i);return n&&i.addEventListener("upgradeneeded",l=>{n(ei(i.result),l.oldVersion,l.newVersion,ei(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{A&&l.addEventListener("close",()=>A()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const e4=["get","getKey","getAll","getAllKeys","count"],t4=["put","add","delete","clear"],bp=new Map;function lB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=t4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||e4.includes(r)))return;const A=async function(i,...a){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),s&&l.done]))[0]};return bp.set(e,A),A}XN(t=>({...t,get:(e,r,n)=>lB(e,r)||t.get(e,r,n),has:(e,r)=>!!lB(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(n4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function n4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t0="@firebase/app",cB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=new Ww("@firebase/app"),s4="@firebase/app-compat",A4="@firebase/analytics-compat",i4="@firebase/analytics",o4="@firebase/app-check-compat",a4="@firebase/app-check",l4="@firebase/auth",c4="@firebase/auth-compat",u4="@firebase/database",d4="@firebase/data-connect",h4="@firebase/database-compat",f4="@firebase/functions",g4="@firebase/functions-compat",p4="@firebase/installations",m4="@firebase/installations-compat",w4="@firebase/messaging",x4="@firebase/messaging-compat",y4="@firebase/performance",v4="@firebase/performance-compat",B4="@firebase/remote-config",b4="@firebase/remote-config-compat",C4="@firebase/storage",_4="@firebase/storage-compat",I4="@firebase/firestore",E4="@firebase/vertexai-preview",T4="@firebase/firestore-compat",k4="firebase",F4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="[DEFAULT]",S4={[t0]:"fire-core",[s4]:"fire-core-compat",[i4]:"fire-analytics",[A4]:"fire-analytics-compat",[a4]:"fire-app-check",[o4]:"fire-app-check-compat",[l4]:"fire-auth",[c4]:"fire-auth-compat",[u4]:"fire-rtdb",[d4]:"fire-data-connect",[h4]:"fire-rtdb-compat",[f4]:"fire-fn",[g4]:"fire-fn-compat",[p4]:"fire-iid",[m4]:"fire-iid-compat",[w4]:"fire-fcm",[x4]:"fire-fcm-compat",[y4]:"fire-perf",[v4]:"fire-perf-compat",[B4]:"fire-rc",[b4]:"fire-rc-compat",[C4]:"fire-gcs",[_4]:"fire-gcs-compat",[I4]:"fire-fst",[T4]:"fire-fst-compat",[E4]:"fire-vertex","fire-js":"fire-js",[k4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map,U4=new Map,r0=new Map;function uB(t,e){try{t.container.addComponent(e)}catch(r){tA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Qa(t){const e=t.name;if(r0.has(e))return tA.debug(`There were multiple attempts to register component ${e}.`),!1;r0.set(e,t);for(const r of Jc.values())uB(r,t);for(const r of U4.values())uB(r,t);return!0}function Bu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Q4(t,e,r=nf){Bu(t,e).clearInstance(r)}function Ks(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new yu("app","Firebase",N4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=F4;function QE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:nf,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ti.create("bad-app-name",{appName:String(s)});if(r||(r=EE()),!r)throw ti.create("no-options");const A=Jc.get(s);if(A){if(li(r,A.options)&&li(n,A.config))return A;throw ti.create("duplicate-app",{appName:s})}const i=new MN(s);for(const l of r0.values())i.addComponent(l);const a=new R4(r,n,i);return Jc.set(s,a),a}function Xw(t=nf){const e=Jc.get(t);if(!e&&t===nf&&EE())return QE();if(!e)throw ti.create("no-app",{appName:t});return e}function j4(){return Array.from(Jc.values())}function ri(t,e,r){var n;let s=(n=S4[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const a=[`Unable to register library "${s}" with version "${e}":`];A&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tA.warn(a.join(" "));return}Qa(new ao(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="firebase-heartbeat-database",P4=1,Yc="firebase-heartbeat-store";let Cp=null;function NE(){return Cp||(Cp=ZN(D4,P4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yc)}catch(r){console.warn(r)}}}}).catch(t=>{throw ti.create("idb-open",{originalErrorMessage:t.message})})),Cp}async function L4(t){try{const r=(await NE()).transaction(Yc),n=await r.objectStore(Yc).get(RE(t));return await r.done,n}catch(e){if(e instanceof lA)tA.warn(e.message);else{const r=ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tA.warn(r.message)}}}async function dB(t,e){try{const n=(await NE()).transaction(Yc,"readwrite");await n.objectStore(Yc).put(e,RE(t)),await n.done}catch(r){if(r instanceof lA)tA.warn(r.message);else{const n=ti.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});tA.warn(n.message)}}}function RE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=1024,O4=30*24*60*60*1e3;class H4{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new K4(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=hB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=O4}),this._storage.overwrite(this._heartbeatsCache))}catch(n){tA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=hB(),{heartbeatsToSend:n,unsentEntries:s}=V4(this._heartbeatsCache.heartbeats),A=rf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(r){return tA.warn(r),""}}}function hB(){return new Date().toISOString().substring(0,10)}function V4(t,e=M4){const r=[];let n=t.slice();for(const s of t){const A=r.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),fB(r)>e){A.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),fB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class K4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FE()?kN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await L4(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return dB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return dB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fB(t){return rf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){Qa(new ao("platform-logger",e=>new r4(e),"PRIVATE")),Qa(new ao("heartbeat",e=>new H4(e),"PRIVATE")),ri(t0,cB,t),ri(t0,cB,"esm2017"),ri("fire-js","")}G4("");var z4="firebase",$4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri(z4,$4,"app");var gB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,jE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,b){function C(){}C.prototype=b.prototype,w.D=b.prototype,w.prototype=new C,w.prototype.constructor=w,w.C=function(F,R,L){for(var Q=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Q[Ge-2]=arguments[Ge];return b.prototype[R].apply(F,Q)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,b,C){C||(C=0);var F=Array(16);if(typeof b=="string")for(var R=0;16>R;++R)F[R]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(R=0;16>R;++R)F[R]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=w.g[0],C=w.g[1],R=w.g[2];var L=w.g[3],Q=b+(L^C&(R^L))+F[0]+3614090360&4294967295;b=C+(Q<<7&4294967295|Q>>>25),Q=L+(R^b&(C^R))+F[1]+3905402710&4294967295,L=b+(Q<<12&4294967295|Q>>>20),Q=R+(C^L&(b^C))+F[2]+606105819&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=C+(b^R&(L^b))+F[3]+3250441966&4294967295,C=R+(Q<<22&4294967295|Q>>>10),Q=b+(L^C&(R^L))+F[4]+4118548399&4294967295,b=C+(Q<<7&4294967295|Q>>>25),Q=L+(R^b&(C^R))+F[5]+1200080426&4294967295,L=b+(Q<<12&4294967295|Q>>>20),Q=R+(C^L&(b^C))+F[6]+2821735955&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=C+(b^R&(L^b))+F[7]+4249261313&4294967295,C=R+(Q<<22&4294967295|Q>>>10),Q=b+(L^C&(R^L))+F[8]+1770035416&4294967295,b=C+(Q<<7&4294967295|Q>>>25),Q=L+(R^b&(C^R))+F[9]+2336552879&4294967295,L=b+(Q<<12&4294967295|Q>>>20),Q=R+(C^L&(b^C))+F[10]+4294925233&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=C+(b^R&(L^b))+F[11]+2304563134&4294967295,C=R+(Q<<22&4294967295|Q>>>10),Q=b+(L^C&(R^L))+F[12]+1804603682&4294967295,b=C+(Q<<7&4294967295|Q>>>25),Q=L+(R^b&(C^R))+F[13]+4254626195&4294967295,L=b+(Q<<12&4294967295|Q>>>20),Q=R+(C^L&(b^C))+F[14]+2792965006&4294967295,R=L+(Q<<17&4294967295|Q>>>15),Q=C+(b^R&(L^b))+F[15]+1236535329&4294967295,C=R+(Q<<22&4294967295|Q>>>10),Q=b+(R^L&(C^R))+F[1]+4129170786&4294967295,b=C+(Q<<5&4294967295|Q>>>27),Q=L+(C^R&(b^C))+F[6]+3225465664&4294967295,L=b+(Q<<9&4294967295|Q>>>23),Q=R+(b^C&(L^b))+F[11]+643717713&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=C+(L^b&(R^L))+F[0]+3921069994&4294967295,C=R+(Q<<20&4294967295|Q>>>12),Q=b+(R^L&(C^R))+F[5]+3593408605&4294967295,b=C+(Q<<5&4294967295|Q>>>27),Q=L+(C^R&(b^C))+F[10]+38016083&4294967295,L=b+(Q<<9&4294967295|Q>>>23),Q=R+(b^C&(L^b))+F[15]+3634488961&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=C+(L^b&(R^L))+F[4]+3889429448&4294967295,C=R+(Q<<20&4294967295|Q>>>12),Q=b+(R^L&(C^R))+F[9]+568446438&4294967295,b=C+(Q<<5&4294967295|Q>>>27),Q=L+(C^R&(b^C))+F[14]+3275163606&4294967295,L=b+(Q<<9&4294967295|Q>>>23),Q=R+(b^C&(L^b))+F[3]+4107603335&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=C+(L^b&(R^L))+F[8]+1163531501&4294967295,C=R+(Q<<20&4294967295|Q>>>12),Q=b+(R^L&(C^R))+F[13]+2850285829&4294967295,b=C+(Q<<5&4294967295|Q>>>27),Q=L+(C^R&(b^C))+F[2]+4243563512&4294967295,L=b+(Q<<9&4294967295|Q>>>23),Q=R+(b^C&(L^b))+F[7]+1735328473&4294967295,R=L+(Q<<14&4294967295|Q>>>18),Q=C+(L^b&(R^L))+F[12]+2368359562&4294967295,C=R+(Q<<20&4294967295|Q>>>12),Q=b+(C^R^L)+F[5]+4294588738&4294967295,b=C+(Q<<4&4294967295|Q>>>28),Q=L+(b^C^R)+F[8]+2272392833&4294967295,L=b+(Q<<11&4294967295|Q>>>21),Q=R+(L^b^C)+F[11]+1839030562&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=C+(R^L^b)+F[14]+4259657740&4294967295,C=R+(Q<<23&4294967295|Q>>>9),Q=b+(C^R^L)+F[1]+2763975236&4294967295,b=C+(Q<<4&4294967295|Q>>>28),Q=L+(b^C^R)+F[4]+1272893353&4294967295,L=b+(Q<<11&4294967295|Q>>>21),Q=R+(L^b^C)+F[7]+4139469664&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=C+(R^L^b)+F[10]+3200236656&4294967295,C=R+(Q<<23&4294967295|Q>>>9),Q=b+(C^R^L)+F[13]+681279174&4294967295,b=C+(Q<<4&4294967295|Q>>>28),Q=L+(b^C^R)+F[0]+3936430074&4294967295,L=b+(Q<<11&4294967295|Q>>>21),Q=R+(L^b^C)+F[3]+3572445317&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=C+(R^L^b)+F[6]+76029189&4294967295,C=R+(Q<<23&4294967295|Q>>>9),Q=b+(C^R^L)+F[9]+3654602809&4294967295,b=C+(Q<<4&4294967295|Q>>>28),Q=L+(b^C^R)+F[12]+3873151461&4294967295,L=b+(Q<<11&4294967295|Q>>>21),Q=R+(L^b^C)+F[15]+530742520&4294967295,R=L+(Q<<16&4294967295|Q>>>16),Q=C+(R^L^b)+F[2]+3299628645&4294967295,C=R+(Q<<23&4294967295|Q>>>9),Q=b+(R^(C|~L))+F[0]+4096336452&4294967295,b=C+(Q<<6&4294967295|Q>>>26),Q=L+(C^(b|~R))+F[7]+1126891415&4294967295,L=b+(Q<<10&4294967295|Q>>>22),Q=R+(b^(L|~C))+F[14]+2878612391&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=C+(L^(R|~b))+F[5]+4237533241&4294967295,C=R+(Q<<21&4294967295|Q>>>11),Q=b+(R^(C|~L))+F[12]+1700485571&4294967295,b=C+(Q<<6&4294967295|Q>>>26),Q=L+(C^(b|~R))+F[3]+2399980690&4294967295,L=b+(Q<<10&4294967295|Q>>>22),Q=R+(b^(L|~C))+F[10]+4293915773&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=C+(L^(R|~b))+F[1]+2240044497&4294967295,C=R+(Q<<21&4294967295|Q>>>11),Q=b+(R^(C|~L))+F[8]+1873313359&4294967295,b=C+(Q<<6&4294967295|Q>>>26),Q=L+(C^(b|~R))+F[15]+4264355552&4294967295,L=b+(Q<<10&4294967295|Q>>>22),Q=R+(b^(L|~C))+F[6]+2734768916&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=C+(L^(R|~b))+F[13]+1309151649&4294967295,C=R+(Q<<21&4294967295|Q>>>11),Q=b+(R^(C|~L))+F[4]+4149444226&4294967295,b=C+(Q<<6&4294967295|Q>>>26),Q=L+(C^(b|~R))+F[11]+3174756917&4294967295,L=b+(Q<<10&4294967295|Q>>>22),Q=R+(b^(L|~C))+F[2]+718787259&4294967295,R=L+(Q<<15&4294967295|Q>>>17),Q=C+(L^(R|~b))+F[9]+3951481745&4294967295,w.g[0]=w.g[0]+b&4294967295,w.g[1]=w.g[1]+(R+(Q<<21&4294967295|Q>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+L&4294967295}n.prototype.u=function(w,b){b===void 0&&(b=w.length);for(var C=b-this.blockSize,F=this.B,R=this.h,L=0;L<b;){if(R==0)for(;L<=C;)s(this,w,L),L+=this.blockSize;if(typeof w=="string"){for(;L<b;)if(F[R++]=w.charCodeAt(L++),R==this.blockSize){s(this,F),R=0;break}}else for(;L<b;)if(F[R++]=w[L++],R==this.blockSize){s(this,F),R=0;break}}this.h=R,this.o+=b},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var b=1;b<w.length-8;++b)w[b]=0;var C=8*this.o;for(b=w.length-8;b<w.length;++b)w[b]=C&255,C/=256;for(this.u(w),w=Array(16),b=C=0;4>b;++b)for(var F=0;32>F;F+=8)w[C++]=this.g[b]>>>F&255;return w};function A(w,b){var C=a;return Object.prototype.hasOwnProperty.call(C,w)?C[w]:C[w]=b(w)}function i(w,b){this.h=b;for(var C=[],F=!0,R=w.length-1;0<=R;R--){var L=w[R]|0;F&&L==b||(C[R]=L,F=!1)}this.g=C}var a={};function l(w){return-128<=w&&128>w?A(w,function(b){return new i([b|0],0>b?-1:0)}):new i([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return h;if(0>w)return E(c(-w));for(var b=[],C=1,F=0;w>=C;F++)b[F]=w/C|0,C*=4294967296;return new i(b,0)}function d(w,b){if(w.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w.charAt(0)=="-")return E(d(w.substring(1),b));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(b,8)),F=h,R=0;R<w.length;R+=8){var L=Math.min(8,w.length-R),Q=parseInt(w.substring(R,R+L),b);8>L?(L=c(Math.pow(b,L)),F=F.j(L).add(c(Q))):(F=F.j(C),F=F.add(c(Q)))}return F}var h=l(0),f=l(1),p=l(16777216);t=i.prototype,t.m=function(){if(v(this))return-E(this).m();for(var w=0,b=1,C=0;C<this.g.length;C++){var F=this.i(C);w+=(0<=F?F:4294967296+F)*b,b*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(y(this))return"0";if(v(this))return"-"+E(this).toString(w);for(var b=c(Math.pow(w,6)),C=this,F="";;){var R=S(C,b).g;C=B(C,R.j(b));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(w);if(C=R,y(C))return L+F;for(;6>L.length;)L="0"+L;F=L+F}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function y(w){if(w.h!=0)return!1;for(var b=0;b<w.g.length;b++)if(w.g[b]!=0)return!1;return!0}function v(w){return w.h==-1}t.l=function(w){return w=B(this,w),v(w)?-1:y(w)?0:1};function E(w){for(var b=w.g.length,C=[],F=0;F<b;F++)C[F]=~w.g[F];return new i(C,~w.h).add(f)}t.abs=function(){return v(this)?E(this):this},t.add=function(w){for(var b=Math.max(this.g.length,w.g.length),C=[],F=0,R=0;R<=b;R++){var L=F+(this.i(R)&65535)+(w.i(R)&65535),Q=(L>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);F=Q>>>16,L&=65535,Q&=65535,C[R]=Q<<16|L}return new i(C,C[C.length-1]&-2147483648?-1:0)};function B(w,b){return w.add(E(b))}t.j=function(w){if(y(this)||y(w))return h;if(v(this))return v(w)?E(this).j(E(w)):E(E(this).j(w));if(v(w))return E(this.j(E(w)));if(0>this.l(p)&&0>w.l(p))return c(this.m()*w.m());for(var b=this.g.length+w.g.length,C=[],F=0;F<2*b;F++)C[F]=0;for(F=0;F<this.g.length;F++)for(var R=0;R<w.g.length;R++){var L=this.i(F)>>>16,Q=this.i(F)&65535,Ge=w.i(R)>>>16,We=w.i(R)&65535;C[2*F+2*R]+=Q*We,x(C,2*F+2*R),C[2*F+2*R+1]+=L*We,x(C,2*F+2*R+1),C[2*F+2*R+1]+=Q*Ge,x(C,2*F+2*R+1),C[2*F+2*R+2]+=L*Ge,x(C,2*F+2*R+2)}for(F=0;F<b;F++)C[F]=C[2*F+1]<<16|C[2*F];for(F=b;F<2*b;F++)C[F]=0;return new i(C,0)};function x(w,b){for(;(w[b]&65535)!=w[b];)w[b+1]+=w[b]>>>16,w[b]&=65535,b++}function _(w,b){this.g=w,this.h=b}function S(w,b){if(y(b))throw Error("division by zero");if(y(w))return new _(h,h);if(v(w))return b=S(E(w),b),new _(E(b.g),E(b.h));if(v(b))return b=S(w,E(b)),new _(E(b.g),b.h);if(30<w.g.length){if(v(w)||v(b))throw Error("slowDivide_ only works with positive integers.");for(var C=f,F=b;0>=F.l(w);)C=U(C),F=U(F);var R=N(C,1),L=N(F,1);for(F=N(F,2),C=N(C,2);!y(F);){var Q=L.add(F);0>=Q.l(w)&&(R=R.add(C),L=Q),F=N(F,1),C=N(C,1)}return b=B(w,R.j(b)),new _(R,b)}for(R=h;0<=w.l(b);){for(C=Math.max(1,Math.floor(w.m()/b.m())),F=Math.ceil(Math.log(C)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),L=c(C),Q=L.j(b);v(Q)||0<Q.l(w);)C-=F,L=c(C),Q=L.j(b);y(L)&&(L=f),R=R.add(L),w=B(w,Q)}return new _(R,w)}t.A=function(w){return S(this,w).h},t.and=function(w){for(var b=Math.max(this.g.length,w.g.length),C=[],F=0;F<b;F++)C[F]=this.i(F)&w.i(F);return new i(C,this.h&w.h)},t.or=function(w){for(var b=Math.max(this.g.length,w.g.length),C=[],F=0;F<b;F++)C[F]=this.i(F)|w.i(F);return new i(C,this.h|w.h)},t.xor=function(w){for(var b=Math.max(this.g.length,w.g.length),C=[],F=0;F<b;F++)C[F]=this.i(F)^w.i(F);return new i(C,this.h^w.h)};function U(w){for(var b=w.g.length+1,C=[],F=0;F<b;F++)C[F]=w.i(F)<<1|w.i(F-1)>>>31;return new i(C,w.h)}function N(w,b){var C=b>>5;b%=32;for(var F=w.g.length-C,R=[],L=0;L<F;L++)R[L]=0<b?w.i(L+C)>>>b|w.i(L+C+1)<<32-b:w.i(L+C);return new i(R,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,jE=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Zi=i}).apply(typeof gB<"u"?gB:typeof self<"u"?self:typeof window<"u"?window:{});var xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DE,Yl,PE,ch,n0,LE,ME,OE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,m){return u==Array.prototype||u==Object.prototype||(u[g]=m.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof xd=="object"&&xd];for(var g=0;g<u.length;++g){var m=u[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var n=r(this);function s(u,g){if(g)e:{var m=n;u=u.split(".");for(var k=0;k<u.length-1;k++){var K=u[k];if(!(K in m))break e;m=m[K]}u=u[u.length-1],k=m[u],g=g(k),g!=k&&g!=null&&e(m,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var m=0,k=!1,K={next:function(){if(!k&&m<u.length){var Z=m++;return{value:g(Z,u[Z]),done:!1}}return k=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,m){return u.call.apply(u.bind,arguments)}function h(u,g,m){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,k),u.apply(g,K)}}return function(){return u.apply(g,arguments)}}function f(u,g,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(u,g){var m=Array.prototype.slice.call(arguments,1);return function(){var k=m.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function y(u,g){function m(){}m.prototype=g.prototype,u.aa=g.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(k,K,Z){for(var be=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)be[Dt-2]=arguments[Dt];return g.prototype[K].apply(k,be)}}function v(u){const g=u.length;if(0<g){const m=Array(g);for(let k=0;k<g;k++)m[k]=u[k];return m}return[]}function E(u,g){for(let m=1;m<arguments.length;m++){const k=arguments[m];if(l(k)){const K=u.length||0,Z=k.length||0;u.length=K+Z;for(let be=0;be<Z;be++)u[K+be]=k[be]}else u.push(k)}}class B{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function S(u){return S[" "](u),u}S[" "]=function(){};var U=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function N(u,g,m){for(const k in u)g.call(m,u[k],k,u)}function w(u,g){for(const m in u)g.call(void 0,u[m],m,u)}function b(u){const g={};for(const m in u)g[m]=u[m];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(u,g){let m,k;for(let K=1;K<arguments.length;K++){k=arguments[K];for(m in k)u[m]=k[m];for(let Z=0;Z<C.length;Z++)m=C[Z],Object.prototype.hasOwnProperty.call(k,m)&&(u[m]=k[m])}}function R(u){var g=1;u=u.split(":");const m=[];for(;0<g&&u.length;)m.push(u.shift()),g--;return u.length&&m.push(u.join(":")),m}function L(u){a.setTimeout(()=>{throw u},0)}function Q(){var u=Be;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ge{constructor(){this.h=this.g=null}add(g,m){const k=We.get();k.set(g,m),this.h?this.h.next=k:this.g=k,this.h=k}}var We=new B(()=>new Xe,u=>u.reset());class Xe{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,ie=!1,Be=new Ge,ke=()=>{const u=a.Promise.resolve(void 0);ze=()=>{u.then(Ne)}};var Ne=()=>{for(var u;u=Q();){try{u.h.call(u.g)}catch(m){L(m)}var g=We;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ie=!1};function De(){this.s=this.s,this.C=this.C}De.prototype.s=!1,De.prototype.ma=function(){this.s||(this.s=!0,this.N())},De.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,g),a.removeEventListener("test",m,g)}catch{}return u}();function Fe(u,g){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{S(g.nodeName);var K=!0;break e}catch{}K=!1}K||(g=null)}}else m=="mouseover"?g=u.fromElement:m=="mouseout"&&(g=u.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:we[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Fe.aa.h.call(this)}}y(Fe,W);var we={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),on=0;function gr(u,g,m,k,K){this.listener=u,this.proxy=null,this.src=g,this.type=m,this.capture=!!k,this.ha=K,this.key=++on,this.da=this.fa=!1}function qt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function _t(u){this.src=u,this.g={},this.h=0}_t.prototype.add=function(u,g,m,k,K){var Z=u.toString();u=this.g[Z],u||(u=this.g[Z]=[],this.h++);var be=ae(u,g,k,K);return-1<be?(g=u[be],m||(g.fa=!1)):(g=new gr(g,this.src,Z,!!k,K),g.fa=m,u.push(g)),g};function Bt(u,g){var m=g.type;if(m in u.g){var k=u.g[m],K=Array.prototype.indexOf.call(k,g,void 0),Z;(Z=0<=K)&&Array.prototype.splice.call(k,K,1),Z&&(qt(g),u.g[m].length==0&&(delete u.g[m],u.h--))}}function ae(u,g,m,k){for(var K=0;K<u.length;++K){var Z=u[K];if(!Z.da&&Z.listener==g&&Z.capture==!!m&&Z.ha==k)return K}return-1}var T="closure_lm_"+(1e6*Math.random()|0),P={};function V(u,g,m,k,K){if(Array.isArray(g)){for(var Z=0;Z<g.length;Z++)V(u,g[Z],m,k,K);return null}return m=oe(m),u&&u[Pe]?u.K(g,m,c(k)?!!k.capture:!1,K):J(u,g,m,!1,k,K)}function J(u,g,m,k,K,Z){if(!g)throw Error("Invalid event type");var be=c(K)?!!K.capture:!!K,Dt=Ae(u);if(Dt||(u[T]=Dt=new _t(u)),m=Dt.add(g,m,k,be,Z),m.proxy)return m;if(k=ye(),m.proxy=k,k.src=u,k.listener=m,u.addEventListener)$||(K=be),K===void 0&&(K=!1),u.addEventListener(g.toString(),k,K);else if(u.attachEvent)u.attachEvent(q(g.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ye(){function u(m){return g.call(u.src,u.listener,m)}const g=O;return u}function re(u,g,m,k,K){if(Array.isArray(g))for(var Z=0;Z<g.length;Z++)re(u,g[Z],m,k,K);else k=c(k)?!!k.capture:!!k,m=oe(m),u&&u[Pe]?(u=u.i,g=String(g).toString(),g in u.g&&(Z=u.g[g],m=ae(Z,m,k,K),-1<m&&(qt(Z[m]),Array.prototype.splice.call(Z,m,1),Z.length==0&&(delete u.g[g],u.h--)))):u&&(u=Ae(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ae(g,m,k,K)),(m=-1<u?g[u]:null)&&z(m))}function z(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Pe])Bt(g.i,u);else{var m=u.type,k=u.proxy;g.removeEventListener?g.removeEventListener(m,k,u.capture):g.detachEvent?g.detachEvent(q(m),k):g.addListener&&g.removeListener&&g.removeListener(k),(m=Ae(g))?(Bt(m,u),m.h==0&&(m.src=null,g[T]=null)):qt(u)}}}function q(u){return u in P?P[u]:P[u]="on"+u}function O(u,g){if(u.da)u=!0;else{g=new Fe(g,this);var m=u.listener,k=u.ha||u.src;u.fa&&z(u),u=m.call(k,g)}return u}function Ae(u){return u=u[T],u instanceof _t?u:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(u){return typeof u=="function"?u:(u[ee]||(u[ee]=function(g){return u.handleEvent(g)}),u[ee])}function Y(){De.call(this),this.i=new _t(this),this.M=this,this.F=null}y(Y,De),Y.prototype[Pe]=!0,Y.prototype.removeEventListener=function(u,g,m,k){re(this,u,g,m,k)};function te(u,g){var m,k=u.F;if(k)for(m=[];k;k=k.F)m.push(k);if(u=u.M,k=g.type||g,typeof g=="string")g=new W(g,u);else if(g instanceof W)g.target=g.target||u;else{var K=g;g=new W(k,u),F(g,K)}if(K=!0,m)for(var Z=m.length-1;0<=Z;Z--){var be=g.g=m[Z];K=pe(be,k,!0,g)&&K}if(be=g.g=u,K=pe(be,k,!0,g)&&K,K=pe(be,k,!1,g)&&K,m)for(Z=0;Z<m.length;Z++)be=g.g=m[Z],K=pe(be,k,!1,g)&&K}Y.prototype.N=function(){if(Y.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var m=u.g[g],k=0;k<m.length;k++)qt(m[k]);delete u.g[g],u.h--}}this.F=null},Y.prototype.K=function(u,g,m,k){return this.i.add(String(u),g,!1,m,k)},Y.prototype.L=function(u,g,m,k){return this.i.add(String(u),g,!0,m,k)};function pe(u,g,m,k){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var K=!0,Z=0;Z<g.length;++Z){var be=g[Z];if(be&&!be.da&&be.capture==m){var Dt=be.listener,jr=be.ha||be.src;be.fa&&Bt(u.i,be),K=Dt.call(jr,k)!==!1&&K}}return K&&!k.defaultPrevented}function Qe(u,g,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Ve(u){u.g=Qe(()=>{u.g=null,u.i&&(u.i=!1,Ve(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ie extends De{constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(u){De.call(this),this.h=u,this.g={}}y(et,De);var Ze=[];function it(u){N(u.g,function(g,m){this.g.hasOwnProperty(m)&&z(g)},u),u.g={}}et.prototype.N=function(){et.aa.N.call(this),it(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ke=a.JSON.stringify,he=a.JSON.parse,Ce=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function tt(){}tt.prototype.h=null;function Tt(u){return u.h||(u.h=u.i())}function mt(){}var ot={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kt(){W.call(this,"d")}y(Kt,W);function bt(){W.call(this,"c")}y(bt,W);var yt={},pr=null;function Gr(){return pr=pr||new Y}yt.La="serverreachability";function On(u){W.call(this,yt.La,u)}y(On,W);function ct(u){const g=Gr();te(g,new On(g))}yt.STAT_EVENT="statevent";function zr(u,g){W.call(this,yt.STAT_EVENT,u),this.stat=g}y(zr,W);function j(u){const g=Gr();te(g,new zr(g,u))}yt.Ma="timingevent";function ne(u,g){W.call(this,yt.Ma,u),this.size=g}y(ne,W);function Ee(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function xe(){this.g=!0}xe.prototype.xa=function(){this.g=!1};function Se(u,g,m,k,K,Z){u.info(function(){if(u.g)if(Z)for(var be="",Dt=Z.split("&"),jr=0;jr<Dt.length;jr++){var vt=Dt[jr].split("=");if(1<vt.length){var $r=vt[0];vt=vt[1];var Wr=$r.split("_");be=2<=Wr.length&&Wr[1]=="type"?be+($r+"="+vt+"&"):be+($r+"=redacted&")}}else be=null;else be=Z;return"XMLHTTP REQ ("+k+") [attempt "+K+"]: "+g+`
`+m+`
`+be})}function me(u,g,m,k,K,Z,be){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+K+"]: "+g+`
`+m+`
`+Z+" "+be})}function Me(u,g,m,k){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Rt(u,m)+(k?" "+k:"")})}function qe(u,g){u.info(function(){return"TIMEOUT: "+g})}xe.prototype.info=function(){};function Rt(u,g){if(!u.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var k=m[u];if(!(2>k.length)){var K=k[1];if(Array.isArray(K)&&!(1>K.length)){var Z=K[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var be=1;be<K.length;be++)K[be]=""}}}}return Ke(m)}catch{return g}}var an={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ir={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fA;function Us(){}y(Us,tt),Us.prototype.g=function(){return new XMLHttpRequest},Us.prototype.i=function(){return{}},fA=new Us;function Mt(u,g,m,k){this.j=u,this.i=g,this.l=m,this.R=k||1,this.U=new et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tn}function Tn(){this.i=null,this.g="",this.h=!1}var ml={},wl={};function xl(u,g,m){u.L=1,u.v=Fo(ln(g)),u.m=m,u.P=!0,Ku(u,null)}function Ku(u,g){u.F=Date.now(),To(u),u.A=ln(u.v);var m=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),wy(m.i,"t",k),u.C=0,m=u.j.J,u.h=new Tn,u.g=jy(u.j,m?g:null,!u.m),0<u.O&&(u.M=new Ie(f(u.Y,u,u.g),u.O)),g=u.U,m=u.g,k=u.ca;var K="readystatechange";Array.isArray(K)||(K&&(Ze[0]=K.toString()),K=Ze);for(var Z=0;Z<K.length;Z++){var be=V(m,K[Z],k||g.handleEvent,!1,g.h||g);if(!be)break;g.g[be.key]=be}g=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),ct(),Se(u.i,u.u,u.A,u.l,u.R,u.m)}Mt.prototype.ca=function(u){u=u.target;const g=this.M;g&&Rs(u)==3?g.j():this.Y(u)},Mt.prototype.Y=function(u){try{if(u==this.g)e:{const Wr=Rs(this.g);var g=this.g.Ba();const Qo=this.g.Z();if(!(3>Wr)&&(Wr!=3||this.g&&(this.h.h||this.g.oa()||_y(this.g)))){this.J||Wr!=4||g==7||(g==8||0>=Qo?ct(3):ct(2)),D(this);var m=this.g.Z();this.X=m;t:if(Gu(this)){var k=_y(this.g);u="";var K=k.length,Z=Rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){se(this),G(this);var be="";break t}this.h.i=new a.TextDecoder}for(g=0;g<K;g++)this.h.h=!0,u+=this.h.i.decode(k[g],{stream:!(Z&&g==K-1)});k.length=0,this.h.g+=u,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=m==200,me(this.i,this.u,this.A,this.l,this.R,Wr,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,jr=this.g;if((Dt=jr.g?jr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Dt)){var vt=Dt;break t}}vt=null}if(m=vt)Me(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ce(this,m);else{this.o=!1,this.s=3,j(12),se(this),G(this);break e}}if(this.P){m=!0;let rs;for(;!this.J&&this.C<be.length;)if(rs=Og(this,be),rs==wl){Wr==4&&(this.s=4,j(14),m=!1),Me(this.i,this.l,null,"[Incomplete Response]");break}else if(rs==ml){this.s=4,j(15),Me(this.i,this.l,be,"[Invalid Chunk]"),m=!1;break}else Me(this.i,this.l,rs,null),ce(this,rs);if(Gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wr!=4||be.length!=0||this.h.h||(this.s=1,j(16),m=!1),this.o=this.o&&m,!m)Me(this.i,this.l,be,"[Invalid Chunked Response]"),se(this),G(this);else if(0<be.length&&!this.W){this.W=!0;var $r=this.j;$r.g==this&&$r.ba&&!$r.M&&($r.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Gg($r),$r.M=!0,j(11))}}else Me(this.i,this.l,be,null),ce(this,be);Wr==4&&se(this),this.o&&!this.J&&(Wr==4?Uy(this.j,this):(this.o=!1,To(this)))}else _F(this.g),m==400&&0<be.indexOf("Unknown SID")?(this.s=3,j(12)):(this.s=0,j(13)),se(this),G(this)}}}catch{}finally{}};function Gu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Og(u,g){var m=u.C,k=g.indexOf(`
`,m);return k==-1?wl:(m=Number(g.substring(m,k)),isNaN(m)?ml:(k+=1,k+m>g.length?wl:(g=g.slice(k,k+m),u.C=k+m,g)))}Mt.prototype.cancel=function(){this.J=!0,se(this)};function To(u){u.S=Date.now()+u.I,zu(u,u.I)}function zu(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ee(f(u.ba,u),g)}function D(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Mt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(qe(this.i,this.A),this.L!=2&&(ct(),j(17)),se(this),this.s=2,G(this)):zu(this,this.S-u)};function G(u){u.j.G==0||u.J||Uy(u.j,u)}function se(u){D(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,it(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function ce(u,g){try{var m=u.j;if(m.G!=0&&(m.g==u||st(m.h,u))){if(!u.K&&st(m.h,u)&&m.G==3){try{var k=m.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var K=k;if(K[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Zu(m),Ju(m);else break e;Kg(m),j(18)}}else m.za=K[1],0<m.za-m.T&&37500>K[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ee(f(m.Za,m),6e3));if(1>=At(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ri(m,11)}else if((u.K||m.g==u)&&Zu(m),!x(g))for(K=m.Da.g.parse(g),g=0;g<K.length;g++){let vt=K[g];if(m.T=vt[0],vt=vt[1],m.G==2)if(vt[0]=="c"){m.K=vt[1],m.ia=vt[2];const $r=vt[3];$r!=null&&(m.la=$r,m.j.info("VER="+m.la));const Wr=vt[4];Wr!=null&&(m.Aa=Wr,m.j.info("SVER="+m.Aa));const Qo=vt[5];Qo!=null&&typeof Qo=="number"&&0<Qo&&(k=1.5*Qo,m.L=k,m.j.info("backChannelRequestTimeoutMs_="+k)),k=m;const rs=u.g;if(rs){const td=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(td){var Z=k.h;Z.g||td.indexOf("spdy")==-1&&td.indexOf("quic")==-1&&td.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(It(Z,Z.h),Z.h=null))}if(k.D){const zg=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;zg&&(k.ya=zg,St(k.I,k.D,zg))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),k=m;var be=u;if(k.qa=Ry(k,k.J?k.ia:null,k.W),be.K){jt(k.h,be);var Dt=be,jr=k.L;jr&&(Dt.I=jr),Dt.B&&(D(Dt),To(Dt)),k.g=be}else Fy(k);0<m.i.length&&Yu(m)}else vt[0]!="stop"&&vt[0]!="close"||Ri(m,7);else m.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Ri(m,7):Vg(m):vt[0]!="noop"&&m.l&&m.l.ta(vt),m.v=0)}}ct(4)}catch{}}var fe=class{constructor(u,g){this.g=u,this.map=g}};function Le(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Te(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function At(u){return u.h?1:u.g?u.g.size:0}function st(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function It(u,g){u.g?u.g.add(g):u.h=g}function jt(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Le.prototype.cancel=function(){if(this.i=Ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ct(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const m of u.g.values())g=g.concat(m.D);return g}return v(u.i)}function Er(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],m=u.length,k=0;k<m;k++)g.push(u[k]);return g}g=[],m=0;for(k in u)g[m++]=u[k];return g}function mn(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var m=0;m<u;m++)g.push(m);return g}g=[],m=0;for(const k in u)g[m++]=k;return g}}}function Hn(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var m=mn(u),k=Er(u),K=k.length,Z=0;Z<K;Z++)g.call(void 0,k[Z],m&&m[Z],u)}var Qs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vn(u,g){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var k=u[m].indexOf("="),K=null;if(0<=k){var Z=u[m].substring(0,k);K=u[m].substring(k+1)}else Z=u[m];g(Z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ut(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ut){this.h=u.h,fs(this,u.j),this.o=u.o,this.g=u.g,ts(this,u.s),this.l=u.l;var g=u.i,m=new vl;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),ko(this,m),this.m=u.m}else u&&(g=String(u).match(Qs))?(this.h=!1,fs(this,g[1]||"",!0),this.o=Ni(g[2]||""),this.g=Ni(g[3]||"",!0),ts(this,g[4]),this.l=Ni(g[5]||"",!0),ko(this,g[6]||"",!0),this.m=Ni(g[7]||"")):(this.h=!1,this.i=new vl(null,this.h))}ut.prototype.toString=function(){var u=[],g=this.j;g&&u.push(gA(g,yl,!0),":");var m=this.g;return(m||g=="file")&&(u.push("//"),(g=this.o)&&u.push(gA(g,yl,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(gA(m,m.charAt(0)=="/"?gF:Ns,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",gA(m,mF)),u.join("")};function ln(u){return new ut(u)}function fs(u,g,m){u.j=m?Ni(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ts(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function ko(u,g,m){g instanceof vl?(u.i=g,wF(u.i,u.h)):(m||(g=gA(g,pF)),u.i=new vl(g,u.h))}function St(u,g,m){u.i.set(g,m)}function Fo(u){return St(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ni(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function gA(u,g,m){return typeof u=="string"?(u=encodeURI(u).replace(g,$u),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $u(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var yl=/[#\/\?@]/g,Ns=/[#\?:]/g,gF=/[#\?]/g,pF=/[#\?@]/g,mF=/#/g;function vl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function pA(u){u.g||(u.g=new Map,u.h=0,u.i&&Vn(u.i,function(g,m){u.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}t=vl.prototype,t.add=function(u,g){pA(this),this.i=null,u=So(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(g),this.h+=1,this};function py(u,g){pA(u),g=So(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function my(u,g){return pA(u),g=So(u,g),u.g.has(g)}t.forEach=function(u,g){pA(this),this.g.forEach(function(m,k){m.forEach(function(K){u.call(g,K,k,this)},this)},this)},t.na=function(){pA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let k=0;k<g.length;k++){const K=u[k];for(let Z=0;Z<K.length;Z++)m.push(g[k])}return m},t.V=function(u){pA(this);let g=[];if(typeof u=="string")my(this,u)&&(g=g.concat(this.g.get(So(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)g=g.concat(u[m])}return g},t.set=function(u,g){return pA(this),this.i=null,u=So(this,u),my(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function wy(u,g,m){py(u,g),0<m.length&&(u.i=null,u.g.set(So(u,g),v(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var k=g[m];const Z=encodeURIComponent(String(k)),be=this.V(k);for(k=0;k<be.length;k++){var K=Z;be[k]!==""&&(K+="="+encodeURIComponent(String(be[k]))),u.push(K)}}return this.i=u.join("&")};function So(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function wF(u,g){g&&!u.j&&(pA(u),u.i=null,u.g.forEach(function(m,k){var K=k.toLowerCase();k!=K&&(py(this,k),wy(this,K,m))},u)),u.j=g}function xF(u,g){const m=new xe;if(a.Image){const k=new Image;k.onload=p(mA,m,"TestLoadImage: loaded",!0,g,k),k.onerror=p(mA,m,"TestLoadImage: error",!1,g,k),k.onabort=p(mA,m,"TestLoadImage: abort",!1,g,k),k.ontimeout=p(mA,m,"TestLoadImage: timeout",!1,g,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else g(!1)}function yF(u,g){const m=new xe,k=new AbortController,K=setTimeout(()=>{k.abort(),mA(m,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:k.signal}).then(Z=>{clearTimeout(K),Z.ok?mA(m,"TestPingServer: ok",!0,g):mA(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(K),mA(m,"TestPingServer: error",!1,g)})}function mA(u,g,m,k,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),k(m)}catch{}}function vF(){this.g=new Ce}function BF(u,g,m){const k=m||"";try{Hn(u,function(K,Z){let be=K;c(K)&&(be=Ke(K)),g.push(k+Z+"="+encodeURIComponent(be))})}catch(K){throw g.push(k+"type="+encodeURIComponent("_badmap")),K}}function Wu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Wu,tt),Wu.prototype.g=function(){return new qu(this.l,this.j)},Wu.prototype.i=function(u){return function(){return u}}({});function qu(u,g){Y.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(qu,Y),t=qu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,bl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Bl(this):bl(this),this.readyState==3&&xy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Bl(this))},t.Qa=function(u){this.g&&(this.response=u,Bl(this))},t.ga=function(){this.g&&Bl(this)};function Bl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,bl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=g.next();return u.join(`\r
`)};function bl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yy(u){let g="";return N(u,function(m,k){g+=k,g+=":",g+=m,g+=`\r
`}),g}function Hg(u,g,m){e:{for(k in m){var k=!1;break e}k=!0}k||(m=yy(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):St(u,g,m))}function or(u){Y.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(or,Y);var bF=/^https?$/i,CF=["POST","PUT"];t=or.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,m,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fA.g(),this.v=this.o?Tt(this.o):Tt(fA),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Z){vy(this,Z);return}if(u=m||"",m=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var K in k)m.set(K,k[K]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Z of k.keys())m.set(Z,k.get(Z));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(m.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CF,g,void 0))||k||K||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,be]of m)this.g.setRequestHeader(Z,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cy(this),this.u=!0,this.g.send(u),this.u=!1}catch(Z){vy(this,Z)}};function vy(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,By(u),Xu(u)}function By(u){u.A||(u.A=!0,te(u,"complete"),te(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,te(this,"complete"),te(this,"abort"),Xu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xu(this,!0)),or.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?by(this):this.bb())},t.bb=function(){by(this)};function by(u){if(u.h&&typeof i<"u"&&(!u.v[1]||Rs(u)!=4||u.Z()!=2)){if(u.u&&Rs(u)==4)Qe(u.Ea,0,u);else if(te(u,"readystatechange"),Rs(u)==4){u.h=!1;try{const be=u.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var k;if(k=be===0){var K=String(u.D).match(Qs)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),k=!bF.test(K?K.toLowerCase():"")}m=k}if(m)te(u,"complete"),te(u,"success");else{u.m=6;try{var Z=2<Rs(u)?u.g.statusText:""}catch{Z=""}u.l=Z+" ["+u.Z()+"]",By(u)}}finally{Xu(u)}}}}function Xu(u,g){if(u.g){Cy(u);const m=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||te(u,"ready");try{m.onreadystatechange=k}catch{}}}function Cy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Rs(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Rs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),he(g)}};function _y(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _F(u){const g={};u=(u.g&&2<=Rs(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(x(u[k]))continue;var m=R(u[k]);const K=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const Z=g[K]||[];g[K]=Z,Z.push(m)}w(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cl(u,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||g}function Iy(u){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cl("baseRetryDelayMs",5e3,u),this.cb=Cl("retryDelaySeedMs",1e4,u),this.Wa=Cl("forwardChannelMaxRetries",2,u),this.wa=Cl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Le(u&&u.concurrentRequestLimit),this.Da=new vF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Iy.prototype,t.la=8,t.G=1,t.connect=function(u,g,m,k){j(0),this.W=u,this.H=g||{},m&&k!==void 0&&(this.H.OSID=m,this.H.OAID=k),this.F=this.X,this.I=Ry(this,null,this.W),Yu(this)};function Vg(u){if(Ey(u),u.G==3){var g=u.U++,m=ln(u.I);if(St(m,"SID",u.K),St(m,"RID",g),St(m,"TYPE","terminate"),_l(u,m),g=new Mt(u,u.j,g),g.L=2,g.v=Fo(ln(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=g.v,m=!0),m||(g.g=jy(g.j,null),g.g.ea(g.v)),g.F=Date.now(),To(g)}Ny(u)}function Ju(u){u.g&&(Gg(u),u.g.cancel(),u.g=null)}function Ey(u){Ju(u),u.u&&(a.clearTimeout(u.u),u.u=null),Zu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Yu(u){if(!Te(u.h)&&!u.s){u.s=!0;var g=u.Ga;ze||ke(),ie||(ze(),ie=!0),Be.add(g,u),u.B=0}}function IF(u,g){return At(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ee(f(u.Ga,u,g),Qy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const K=new Mt(this,this.j,u);let Z=this.o;if(this.S&&(Z?(Z=b(Z),F(Z,this.S)):Z=this.S),this.m!==null||this.O||(K.H=Z,Z=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var k=this.i[m];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=ky(this,K,g),m=ln(this.I),St(m,"RID",u),St(m,"CVER",22),this.D&&St(m,"X-HTTP-Session-Id",this.D),_l(this,m),Z&&(this.O?g="headers="+encodeURIComponent(String(yy(Z)))+"&"+g:this.m&&Hg(m,this.m,Z)),It(this.h,K),this.Ua&&St(m,"TYPE","init"),this.P?(St(m,"$req",g),St(m,"SID","null"),K.T=!0,xl(K,m,null)):xl(K,m,g),this.G=2}}else this.G==3&&(u?Ty(this,u):this.i.length==0||Te(this.h)||Ty(this))};function Ty(u,g){var m;g?m=g.l:m=u.U++;const k=ln(u.I);St(k,"SID",u.K),St(k,"RID",m),St(k,"AID",u.T),_l(u,k),u.m&&u.o&&Hg(k,u.m,u.o),m=new Mt(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),g&&(u.i=g.D.concat(u.i)),g=ky(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),It(u.h,m),xl(m,k,g)}function _l(u,g){u.H&&N(u.H,function(m,k){St(g,k,m)}),u.l&&Hn({},function(m,k){St(g,k,m)})}function ky(u,g,m){m=Math.min(u.i.length,m);var k=u.l?f(u.l.Na,u.l,u):null;e:{var K=u.i;let Z=-1;for(;;){const be=["count="+m];Z==-1?0<m?(Z=K[0].g,be.push("ofs="+Z)):Z=0:be.push("ofs="+Z);let Dt=!0;for(let jr=0;jr<m;jr++){let vt=K[jr].g;const $r=K[jr].map;if(vt-=Z,0>vt)Z=Math.max(0,K[jr].g-100),Dt=!1;else try{BF($r,be,"req"+vt+"_")}catch{k&&k($r)}}if(Dt){k=be.join("&");break e}}}return u=u.i.splice(0,m),g.D=u,k}function Fy(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;ze||ke(),ie||(ze(),ie=!0),Be.add(g,u),u.v=0}}function Kg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ee(f(u.Fa,u),Qy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Sy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ee(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,j(10),Ju(this),Sy(this))};function Gg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Sy(u){u.g=new Mt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ln(u.qa);St(g,"RID","rpc"),St(g,"SID",u.K),St(g,"AID",u.T),St(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&St(g,"TO",u.ja),St(g,"TYPE","xmlhttp"),_l(u,g),u.m&&u.o&&Hg(g,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Fo(ln(g)),m.m=null,m.P=!0,Ku(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Ju(this),Kg(this),j(19))};function Zu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Uy(u,g){var m=null;if(u.g==g){Zu(u),Gg(u),u.g=null;var k=2}else if(st(u.h,g))m=g.D,jt(u.h,g),k=1;else return;if(u.G!=0){if(g.o)if(k==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var K=u.B;k=Gr(),te(k,new ne(k,m)),Yu(u)}else Fy(u);else if(K=g.s,K==3||K==0&&0<g.X||!(k==1&&IF(u,g)||k==2&&Kg(u)))switch(m&&0<m.length&&(g=u.h,g.i=g.i.concat(m)),K){case 1:Ri(u,5);break;case 4:Ri(u,10);break;case 3:Ri(u,6);break;default:Ri(u,2)}}}function Qy(u,g){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*g}function Ri(u,g){if(u.j.info("Error code "+g),g==2){var m=f(u.fb,u),k=u.Xa;const K=!k;k=new ut(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fs(k,"https"),Fo(k),K?xF(k.toString(),m):yF(k.toString(),m)}else j(2);u.G=0,u.l&&u.l.sa(g),Ny(u),Ey(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),j(2)):(this.j.info("Failed to ping google.com"),j(1))};function Ny(u){if(u.G=0,u.ka=[],u.l){const g=Ct(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ka,g),E(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function Ry(u,g,m){var k=m instanceof ut?ln(m):new ut(m);if(k.g!="")g&&(k.g=g+"."+k.g),ts(k,k.s);else{var K=a.location;k=K.protocol,g=g?g+"."+K.hostname:K.hostname,K=+K.port;var Z=new ut(null);k&&fs(Z,k),g&&(Z.g=g),K&&ts(Z,K),m&&(Z.l=m),k=Z}return m=u.D,g=u.ya,m&&g&&St(k,m,g),St(k,"VER",u.la),_l(u,k),k}function jy(u,g,m){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new or(new Wu({eb:m})):new or(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dy(){}t=Dy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ed(){}ed.prototype.g=function(u,g){return new kn(u,g)};function kn(u,g){Y.call(this),this.g=new Iy(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!x(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Uo(this)}y(kn,Y),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Vg(this.g)},kn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Ke(u),u=m);g.i.push(new fe(g.Ya++,u)),g.G==3&&Yu(g)},kn.prototype.N=function(){this.g.l=null,delete this.j,Vg(this.g),delete this.g,kn.aa.N.call(this)};function Py(u){Kt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const m in g){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(Py,Kt);function Ly(){bt.call(this),this.status=1}y(Ly,bt);function Uo(u){this.g=u}y(Uo,Dy),Uo.prototype.ua=function(){te(this.g,"a")},Uo.prototype.ta=function(u){te(this.g,new Py(u))},Uo.prototype.sa=function(u){te(this.g,new Ly)},Uo.prototype.ra=function(){te(this.g,"b")},ed.prototype.createWebChannel=ed.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,OE=function(){return new ed},ME=function(){return Gr()},LE=yt,n0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,ch=an,Ir.COMPLETE="complete",PE=Ir,mt.EventType=ot,ot.OPEN="a",ot.CLOSE="b",ot.ERROR="c",ot.MESSAGE="d",Y.prototype.listen=Y.prototype.K,Yl=mt,or.prototype.listenOnce=or.prototype.L,or.prototype.getLastError=or.prototype.Ka,or.prototype.getLastErrorCode=or.prototype.Ba,or.prototype.getStatus=or.prototype.Z,or.prototype.getResponseJson=or.prototype.Oa,or.prototype.getResponseText=or.prototype.oa,or.prototype.send=or.prototype.ea,or.prototype.setWithCredentials=or.prototype.Ha,DE=or}).apply(typeof xd<"u"?xd:typeof self<"u"?self:typeof window<"u"?window:{});const pB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Ww("@firebase/firestore");function zo(){return ci.logLevel}function W4(t){ci.setLogLevel(t)}function ue(t,...e){if(ci.logLevel<=ht.DEBUG){const r=e.map(Jw);ci.debug(`Firestore (${rl}): ${t}`,...r)}}function hr(t,...e){if(ci.logLevel<=ht.ERROR){const r=e.map(Jw);ci.error(`Firestore (${rl}): ${t}`,...r)}}function jn(t,...e){if(ci.logLevel<=ht.WARN){const r=e.map(Jw);ci.warn(`Firestore (${rl}): ${t}`,...r)}}function Jw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t="Unexpected state"){const e=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: `+t;throw hr(e),new Error(e)}function He(t,e){t||je()}function q4(t,e){t||je()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends lA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ur.UNAUTHENTICATED))}shutdown(){}}class X4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class J4{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){He(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let A=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Nr,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=A;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Nr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(He(typeof n.accessToken=="string"),new HE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Ur(e)}}class Y4{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Z4{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Y4(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){He(this.o===void 0);const n=A=>{A.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,ue("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>n(A))};const s=A=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(He(typeof r.token=="string"),this.R=r.token,new KE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class tR{getToken(){return Promise.resolve(new KE(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=rR(40);for(let A=0;A<s.length;++A)n.length<20&&s[A]<r&&(n+=e.charAt(s[A]%e.length))}return n}}function Ye(t,e){return t<e?-1:t>e?1:0}function Na(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function GE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new le(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return er.fromMillis(Date.now())}static fromDate(e){return er.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new er(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $e(e)}static min(){return new $e(new er(0,0))}static max(){return new $e(new er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,r,n){r===void 0?r=0:r>e.length&&je(),n===void 0?n=e.length-r:n>e.length-r&&je(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Zc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Zc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const A=e.get(s),i=r.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ft extends Zc{construct(e,r,n){return new ft(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ft(r)}static emptyPath(){return new ft([])}}const nR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Zc{construct(e,r,n){return new $t(e,r,n)}static isValidIdentifier(e){return nR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const A=()=>{if(n.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new le(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new le(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(n+=a,s++):(A(),s++)}if(A(),i)throw new le(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(r)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ft.fromString(e))}static fromName(e){return new _e(ft.fromString(e).popFirst(5))}static empty(){return new _e(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ft.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function s0(t){return t.fields.find(e=>e.kind===2)}function Oi(t){return t.fields.filter(e=>e.kind!==2)}function sR(t,e){let r=Ye(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=AR(t.fields[n],e.fields[n]),r!==0)return r;return Ye(t.fields.length,e.fields.length)}Ra.UNKNOWN_ID=-1;class eo{constructor(e,r){this.fieldPath=e,this.kind=r}}function AR(t,e){const r=$t.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Ye(t.kind,e.kind)}class ja{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ja(0,Dn.min())}}function zE(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(n===1e9?new er(r+1,0):new er(r,n));return new Dn(s,_e.empty(),e)}function $E(t){return new Dn(t.readTime,t.key,-1)}class Dn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Dn($e.min(),_e.empty(),-1)}static max(){return new Dn($e.max(),_e.empty(),-1)}}function Zw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=_e.comparator(t.documentKey,e.documentKey),r!==0?r:Ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==WE)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new H((n,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(n,s)},this.catchCallback=A=>{this.wrapFailure(r,A).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof H?r:H.resolve(r)}catch(r){return H.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):H.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):H.reject(r)}static resolve(e){return new H((r,n)=>{r(e)})}static reject(e){return new H((r,n)=>{n(e)})}static waitFor(e){return new H((r,n)=>{let s=0,A=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++A,i&&A===s&&r()},l=>n(l))}),i=!0,A===s&&r()})}static or(e){let r=H.resolve(!1);for(const n of e)r=r.next(s=>s?H.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,A)=>{n.push(r.call(this,s,A))}),this.waitFor(n)}static mapArray(e,r){return new H((n,s)=>{const A=e.length,i=new Array(A);let a=0;for(let l=0;l<A;l++){const c=l;r(e[c]).next(d=>{i[c]=d,++a,a===A&&n(i)},d=>s(d))}})}static doWhile(e,r){return new H((n,s)=>{const A=()=>{e()===!0?r().next(()=>{A()},s):n()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Nr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new xc(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=ex(n.target.error);this.V.reject(new xc(e,s))}}static open(e,r,n,s){try{return new ng(r,e.transaction(s,n))}catch(A){throw new xc(r,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new oR(r)}}class _s{constructor(e,r,n){this.name=e,this.version=r,this.p=n,_s.S(Cr())===12.2&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),Hi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!FE())return!1;if(_s.v())return!0;const e=Cr(),r=_s.S(e),n=0<r&&r<10,s=XE(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ue("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;r(i)},s.onblocked=()=>{n(new xc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?n(new le(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new le(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new xc(e,i))},s.onupgradeneeded=A=>{ue("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{ue("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const A=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const a=ng.open(this.db,e,A?"readonly":"readwrite",n),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),H.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&i<3;if(ue("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function XE(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class iR{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hi(this.B.delete())}}class xc extends le{constructor(e,r){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function _i(t){return t.name==="IndexedDbTransactionError"}class oR{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ue("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Hi(n)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),Hi(this.store.add(e))}get(e){return Hi(this.store.get(e)).next(r=>(r===void 0&&(r=null),ue("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),Hi(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),Hi(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(n.range);return new H((i,a)=>{A.onerror=l=>{a(l.target.error)},A.onsuccess=l=>{i(l.target.result)}})}{const A=this.cursor(n),i=[];return this.W(A,(a,l)=>{i.push(l)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new H((s,A)=>{n.onerror=i=>{A(i.target.error)},n.onsuccess=i=>{s(i.target.result)}})}j(e,r){ue("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(A,i,a)=>a.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new H((n,s)=>{r.onerror=A=>{const i=ex(A.target.error);s(i)},r.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():n()}):n()}})}W(e,r){const n=[];return new H((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const l=new iR(a),c=r(a.primaryKey,a.value,l);if(c instanceof H){const d=c.catch(h=>(l.done(),H.reject(h)));n.push(d)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>H.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Hi(t){return new H((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=ex(n.target.error);r(s)}})}let mB=!1;function ex(t){const e=_s.S(Cr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mB||(mB=!0,setTimeout(()=>{throw n},0)),n}}return t}class aR{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ue("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ue("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){_i(r)?ue("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Ci(r)}await this.X(6e4)})}}class lR{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,A=!0;return H.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return ue("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(a=>{s-=a,n.add(i)});A=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(a=>(ue("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,r,a))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((s,A)=>{const i=$E(A);Zw(i,n)>0&&(n=i)}),new Dn(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Bn.oe=-1;function bu(t){return t==null}function eu(t){return t===0&&1/t==-1/0}function JE(t){return typeof t=="number"&&Number.isInteger(t)&&!eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=wB(e)),e=cR(t.get(r),e);return wB(e)}function cR(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const A=t.charAt(s);switch(A){case"\0":r+="";break;case"":r+="";break;default:r+=A}}return r}function wB(t){return t+""}function vs(t){const e=t.length;if(He(e>=2),e===2)return He(t.charAt(0)===""&&t.charAt(1)===""),ft.emptyPath();const r=e-2,n=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>r)&&je(),t.charAt(i+1)){case"":const a=t.substring(A,i);let l;s.length===0?l=a:(s+=a,l=s,s=""),n.push(l);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:je()}A=i+2}return new ft(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t,e){return[t,nn(e)]}function YE(t,e,r){return[t,nn(e),r]}const uR={},dR=["prefixPath","collectionGroup","readTime","documentId"],hR=["prefixPath","collectionGroup","documentId"],fR=["collectionGroup","readTime","prefixPath","documentId"],gR=["canonicalId","targetId"],pR=["targetId","path"],mR=["path","targetId"],wR=["collectionId","parent"],xR=["indexId","uid"],yR=["uid","sequenceNumber"],vR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BR=["indexId","uid","orderedDocumentKey"],bR=["userId","collectionPath","documentId"],CR=["userId","collectionPath","largestBatchId"],_R=["userId","collectionGroup","largestBatchId"],ZE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IR=[...ZE,"documentOverlays"],e1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],t1=e1,tx=[...t1,"indexConfiguration","indexState","indexEntries"],ER=tx,TR=[...tx,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends qE{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function _r(t,e){const r=ve(t);return _s.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ii(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function r1(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function n1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r){this.comparator=e,this.root=r||Lr.EMPTY}insert(e,r){return new Vt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=r?n(e.key,r):1,r&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lr{constructor(e,r,n,s,A){this.key=e,this.value=r,this.color=n??Lr.RED,this.left=s??Lr.EMPTY,this.right=A??Lr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,A){return new Lr(e??this.key,r??this.value,n??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const A=n(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,r,n),null):A===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Lr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Lr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw je();const e=this.left.check();if(e!==this.right.check())throw je();return e+(this.isRed()?0:1)}}Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1;Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw je()}get value(){throw je()}get color(){throw je()}get left(){throw je()}get right(){throw je()}copy(e,r,n,s,A){return this}insert(e,r,n){return new Lr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new vB(this.data.getIterator())}getIteratorFrom(e){return new vB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Qt(this.comparator);return r.data=e,r}}class vB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ro(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new bn([])}unionWith(e){let r=new Qt($t.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new bn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new s1("Invalid base64 string: "+A):A}}(e);return new ir(r)}static fromUint8Array(e){const r=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new ir(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const FR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rA(t){if(He(!!t),typeof t=="string"){let e=0;const r=FR.exec(t);if(He(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Jt(t.seconds),nanos:Jt(t.nanos)}}function Jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function nA(t){return typeof t=="string"?ir.fromBase64String(t):ir.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ag(t){const e=t.mapValue.fields.__previous_value__;return sg(e)?Ag(e):e}function tu(t){const e=rA(t.mapValue.fields.__local_write_time__.timestampValue);return new er(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,r,n,s,A,i,a,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ui{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new ui("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ui&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dh={nullValue:"NULL_VALUE"};function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sg(t)?4:A1(t)?9007199254740991:ig(t)?10:11:je()}function ks(t,e){if(t===e)return!0;const r=di(t);if(r!==di(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tu(t).isEqual(tu(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=rA(s.timestampValue),a=rA(A.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return nA(s.bytesValue).isEqual(nA(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return Jt(s.geoPointValue.latitude)===Jt(A.geoPointValue.latitude)&&Jt(s.geoPointValue.longitude)===Jt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return Jt(s.integerValue)===Jt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=Jt(s.doubleValue),a=Jt(A.doubleValue);return i===a?eu(i)===eu(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],ks);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},a=A.mapValue.fields||{};if(yB(i)!==yB(a))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(a[l]===void 0||!ks(i[l],a[l])))return!1;return!0}(t,e);default:return je()}}function ru(t,e){return(t.values||[]).find(r=>ks(r,e))!==void 0}function hi(t,e){if(t===e)return 0;const r=di(t),n=di(e);if(r!==n)return Ye(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ye(t.booleanValue,e.booleanValue);case 2:return function(A,i){const a=Jt(A.integerValue||A.doubleValue),l=Jt(i.integerValue||i.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return BB(t.timestampValue,e.timestampValue);case 4:return BB(tu(t),tu(e));case 5:return Ye(t.stringValue,e.stringValue);case 6:return function(A,i){const a=nA(A),l=nA(i);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const a=A.split("/"),l=i.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ye(a[c],l[c]);if(d!==0)return d}return Ye(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const a=Ye(Jt(A.latitude),Jt(i.latitude));return a!==0?a:Ye(Jt(A.longitude),Jt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bB(t.arrayValue,e.arrayValue);case 10:return function(A,i){var a,l,c,d;const h=A.fields||{},f=i.fields||{},p=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,v=Ye(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:bB(p,y)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===MA.mapValue&&i===MA.mapValue)return 0;if(A===MA.mapValue)return 1;if(i===MA.mapValue)return-1;const a=A.fields||{},l=Object.keys(a),c=i.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Ye(l[h],d[h]);if(f!==0)return f;const p=hi(a[l[h]],c[d[h]]);if(p!==0)return p}return Ye(l.length,d.length)}(t.mapValue,e.mapValue);default:throw je()}}function BB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ye(t,e);const r=rA(t),n=rA(e),s=Ye(r.seconds,n.seconds);return s!==0?s:Ye(r.nanos,n.nanos)}function bB(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const A=hi(r[s],n[s]);if(A)return A}return Ye(r.length,n.length)}function Da(t){return i0(t)}function i0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=rA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return nA(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return _e.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const A of r.values||[])s?s=!1:n+=",",n+=i0(A);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",A=!0;for(const i of n)A?A=!1:s+=",",s+=`${i}:${i0(r.fields[i])}`;return s+"}"}(t.mapValue):je()}function hh(t){switch(di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ag(t);return e?16+hh(e):16;case 5:return 2*t.stringValue.length;case 6:return nA(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,A)=>s+hh(A),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Ii(n.fields,(A,i)=>{s+=A.length+hh(i)}),s}(t.mapValue);default:throw je()}}function lo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function o0(t){return!!t&&"integerValue"in t}function nu(t){return!!t&&"arrayValue"in t}function CB(t){return!!t&&"nullValue"in t}function _B(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fh(t){return!!t&&"mapValue"in t}function ig(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function yc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ii(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=yc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=yc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function A1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const i1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function UR(t){return"nullValue"in t?dh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?lo(ui.empty(),_e.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ig(t)?i1:{mapValue:{}}:je()}function QR(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?lo(ui.empty(),_e.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?i1:"mapValue"in t?ig(t)?{mapValue:{}}:MA:je()}function IB(t,e){const r=hi(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function EB(t,e){const r=hi(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.value=e}static empty(){return new Mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!fh(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=yc(r)}setAll(e){let r=$t.emptyPath(),n={},s=[];e.forEach((i,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=a.popLast()}i?n[a.lastSegment()]=yc(i):s.push(a.lastSegment())});const A=this.getFieldsMap(r);this.applyChanges(A,n,s)}delete(e){const r=this.field(e.popLast());fh(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ks(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];fh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Ii(r,(s,A)=>e[s]=A);for(const s of n)delete e[s]}clone(){return new Mr(yc(this.value))}}function o1(t){const e=[];return Ii(t.fields,(r,n)=>{const s=new $t([r]);if(fh(n)){const A=o1(n.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,r,n,s,A,i,a){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=A,this.data=i,this.documentState=a}static newInvalidDocument(e){return new zt(e,0,$e.min(),$e.min(),$e.min(),Mr.empty(),0)}static newFoundDocument(e,r,n,s){return new zt(e,1,r,$e.min(),n,s,0)}static newNoDocument(e,r){return new zt(e,2,r,$e.min(),$e.min(),Mr.empty(),0)}static newUnknownDocument(e,r){return new zt(e,3,r,$e.min(),$e.min(),Mr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,r){this.position=e,this.inclusive=r}}function TB(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?n=_e.comparator(_e.fromName(i.referenceValue),r.key):n=hi(i,r.data.field(A.field)),A.dir==="desc"&&(n*=-1),n!==0)break}return n}function kB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ks(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,r="asc"){this.field=e,this.dir=r}}function NR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{}class gt extends a1{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new RR(e,r,n):r==="array-contains"?new PR(e,n):r==="in"?new f1(e,n):r==="not-in"?new LR(e,n):r==="array-contains-any"?new MR(e,n):new gt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new jR(e,n):new DR(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(hi(r,this.value)):r!==null&&di(this.value)===di(r)&&this.matchesComparison(hi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kt extends a1{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new kt(e,r)}matches(e){return Pa(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Pa(t){return t.op==="and"}function a0(t){return t.op==="or"}function rx(t){return l1(t)&&Pa(t)}function l1(t){for(const e of t.filters)if(e instanceof kt)return!1;return!0}function l0(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(rx(t))return t.filters.map(e=>l0(e)).join(",");{const e=t.filters.map(r=>l0(r)).join(",");return`${t.op}(${e})`}}function c1(t,e){return t instanceof gt?function(n,s){return s instanceof gt&&n.op===s.op&&n.field.isEqual(s.field)&&ks(n.value,s.value)}(t,e):t instanceof kt?function(n,s){return s instanceof kt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((A,i,a)=>A&&c1(i,s.filters[a]),!0):!1}(t,e):void je()}function u1(t,e){const r=t.filters.concat(e);return kt.create(r,t.op)}function d1(t){return t instanceof gt?function(r){return`${r.field.canonicalString()} ${r.op} ${Da(r.value)}`}(t):t instanceof kt?function(r){return r.op.toString()+" {"+r.getFilters().map(d1).join(" ,")+"}"}(t):"Filter"}class RR extends gt{constructor(e,r,n){super(e,r,n),this.key=_e.fromName(n.referenceValue)}matches(e){const r=_e.comparator(e.key,this.key);return this.matchesComparison(r)}}class jR extends gt{constructor(e,r){super(e,"in",r),this.keys=h1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class DR extends gt{constructor(e,r){super(e,"not-in",r),this.keys=h1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function h1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>_e.fromName(n.referenceValue))}class PR extends gt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return nu(r)&&ru(r.arrayValue,this.value)}}class f1 extends gt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&ru(this.value.arrayValue,r)}}class LR extends gt{constructor(e,r){super(e,"not-in",r)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!ru(this.value.arrayValue,r)}}class MR extends gt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!nu(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>ru(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,r=null,n=[],s=[],A=null,i=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=A,this.startAt=i,this.endAt=a,this.ue=null}}function c0(t,e=null,r=[],n=[],s=null,A=null,i=null){return new OR(t,e,r,n,s,A,i)}function co(t){const e=ve(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>l0(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(A){return A.field.canonicalString()+A.dir}(n)).join(","),bu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Da(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Da(n)).join(",")),e.ue=r}return e.ue}function Cu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!NR(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!c1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kB(t.startAt,e.startAt)&&kB(t.endAt,e.endAt)}function sf(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Af(t,e){return t.filters.filter(r=>r instanceof gt&&r.field.isEqual(e))}function FB(t,e,r){let n=dh,s=!0;for(const A of Af(t,e)){let i=dh,a=!0;switch(A.op){case"<":case"<=":i=UR(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,a=!1;break;case"!=":case"not-in":i=dh}IB({value:n,inclusive:s},{value:i,inclusive:a})<0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];IB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function SB(t,e,r){let n=MA,s=!0;for(const A of Af(t,e)){let i=MA,a=!0;switch(A.op){case">=":case">":i=QR(A.value),a=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,a=!1;break;case"!=":case"not-in":i=MA}EB({value:n,inclusive:s},{value:i,inclusive:a})>0&&(n=i,s=a)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];EB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,r=null,n=[],s=[],A=null,i="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=A,this.limitType=i,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function g1(t,e,r,n,s,A,i,a){return new cA(t,e,r,n,s,A,i,a)}function nl(t){return new cA(t)}function UB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nx(t){return t.collectionGroup!==null}function xa(t){const e=ve(t);if(e.ce===null){e.ce=[];const r=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),r.add(A.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new Qt($t.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(A=>{r.has(A.canonicalString())||A.isKeyField()||e.ce.push(new su(A,n))}),r.has($t.keyField().canonicalString())||e.ce.push(new su($t.keyField(),n))}return e.ce}function sn(t){const e=ve(t);return e.le||(e.le=m1(e,xa(t))),e.le}function p1(t){const e=ve(t);return e.he||(e.he=m1(e,t.explicitOrderBy)),e.he}function m1(t,e){if(t.limitType==="F")return c0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new su(s.field,A)});const r=t.endAt?new fi(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new fi(t.startAt.position,t.startAt.inclusive):null;return c0(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function u0(t,e){const r=t.filters.concat([e]);return new cA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function of(t,e,r){return new cA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function _u(t,e){return Cu(sn(t),sn(e))&&t.limitType===e.limitType}function w1(t){return`${co(sn(t))}|lt:${t.limitType}`}function $o(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>d1(s)).join(", ")}]`),bu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Da(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Da(s)).join(",")),`Target(${n})`}(sn(t))}; limitType=${t.limitType})`}function Iu(t,e){return e.isFoundDocument()&&function(n,s){const A=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(A):_e.isDocumentKey(n.path)?n.path.isEqual(A):n.path.isImmediateParentOf(A)}(t,e)&&function(n,s){for(const A of xa(n))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const A of n.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,a,l){const c=TB(i,a,l);return i.inclusive?c<=0:c<0}(n.startAt,xa(n),s)||n.endAt&&!function(i,a,l){const c=TB(i,a,l);return i.inclusive?c>=0:c>0}(n.endAt,xa(n),s))}(t,e)}function x1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y1(t){return(e,r)=>{let n=!1;for(const s of xa(t)){const A=HR(s,e,r);if(A!==0)return A;n=n||s.field.isKeyField()}return 0}}function HR(t,e,r){const n=t.field.isKeyField()?_e.comparator(e.key,r.key):function(A,i,a){const l=i.data.field(A),c=a.data.field(A);return l!==null&&c!==null?hi(l,c):je()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return je()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,A]of n)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(r,n)=>{for(const[s,A]of n)e(s,A)})}isEmpty(){return n1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Vt(_e.comparator);function Cn(){return VR}const v1=new Vt(_e.comparator);function Zl(...t){let e=v1;for(const r of t)e=e.insert(r.key,r);return e}function B1(t){let e=v1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Bs(){return vc()}function b1(){return vc()}function vc(){return new uA(t=>t.toString(),(t,e)=>t.isEqual(e))}const KR=new Vt(_e.comparator),GR=new Qt(_e.comparator);function nt(...t){let e=GR;for(const r of t)e=e.add(r);return e}const zR=new Qt(Ye);function sx(){return zR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eu(e)?"-0":e}}function C1(t){return{integerValue:""+t}}function _1(t,e){return JE(e)?C1(e):Ax(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this._=void 0}}function $R(t,e,r){return t instanceof La?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&sg(A)&&(A=Ag(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(r,e):t instanceof uo?E1(t,e):t instanceof ho?T1(t,e):function(s,A){const i=I1(s,A),a=QB(i)+QB(s.Pe);return o0(i)&&o0(s.Pe)?C1(a):Ax(s.serializer,a)}(t,e)}function WR(t,e,r){return t instanceof uo?E1(t,e):t instanceof ho?T1(t,e):r}function I1(t,e){return t instanceof Ma?function(n){return o0(n)||function(A){return!!A&&"doubleValue"in A}(n)}(e)?e:{integerValue:0}:null}class La extends og{}class uo extends og{constructor(e){super(),this.elements=e}}function E1(t,e){const r=k1(e);for(const n of t.elements)r.some(s=>ks(s,n))||r.push(n);return{arrayValue:{values:r}}}class ho extends og{constructor(e){super(),this.elements=e}}function T1(t,e){let r=k1(e);for(const n of t.elements)r=r.filter(s=>!ks(s,n));return{arrayValue:{values:r}}}class Ma extends og{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function QB(t){return Jt(t.integerValue||t.doubleValue)}function k1(t){return nu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,r){this.field=e,this.transform=r}}function qR(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof uo&&s instanceof uo||n instanceof ho&&s instanceof ho?Na(n.elements,s.elements,ks):n instanceof Ma&&s instanceof Ma?ks(n.Pe,s.Pe):n instanceof La&&s instanceof La}(t.transform,e.transform)}class XR{constructor(e,r){this.version=e,this.transformResults=r}}class Zt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ag{}function F1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Al(t.key,Zt.none()):new sl(t.key,t.data,Zt.none());{const r=t.data,n=Mr.empty();let s=new Qt($t.comparator);for(let A of e.fields)if(!s.has(A)){let i=r.field(A);i===null&&A.length>1&&(A=A.popLast(),i=r.field(A)),i===null?n.delete(A):n.set(A,i),s=s.add(A)}return new dA(t.key,n,new bn(s.toArray()),Zt.none())}}function JR(t,e,r){t instanceof sl?function(s,A,i){const a=s.value.clone(),l=RB(s.fieldTransforms,A,i.transformResults);a.setAll(l),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):t instanceof dA?function(s,A,i){if(!gh(s.precondition,A))return void A.convertToUnknownDocument(i.version);const a=RB(s.fieldTransforms,A,i.transformResults),l=A.data;l.setAll(S1(s)),l.setAll(a),A.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Bc(t,e,r,n){return t instanceof sl?function(A,i,a,l){if(!gh(A.precondition,i))return a;const c=A.value.clone(),d=jB(A.fieldTransforms,l,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof dA?function(A,i,a,l){if(!gh(A.precondition,i))return a;const c=jB(A.fieldTransforms,l,i),d=i.data;return d.setAll(S1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(A,i,a){return gh(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,r)}function YR(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),A=I1(n.transform,s||null);A!=null&&(r===null&&(r=Mr.empty()),r.set(n.field,A))}return r||null}function NB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Na(n,s,(A,i)=>qR(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends ag{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class dA extends ag{constructor(e,r,n,s,A=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function S1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function RB(t,e,r){const n=new Map;He(t.length===r.length);for(let s=0;s<r.length;s++){const A=t[s],i=A.transform,a=e.data.field(A.field);n.set(A.field,WR(i,a,r[s]))}return n}function jB(t,e,r){const n=new Map;for(const s of t){const A=s.transform,i=r.data.field(s.field);n.set(s.field,$R(A,i,e))}return n}class Al extends ag{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ix extends ag{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&JR(A,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Bc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Bc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=b1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let a=this.applyToLocalView(i,A.mutatedFields);a=r.has(s.key)?null:a;const l=F1(i,a);l!==null&&n.set(s.key,l),i.isValidDocument()||i.convertToNoDocument($e.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),nt())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(r,n)=>NB(r,n))&&Na(this.baseMutations,e.baseMutations,(r,n)=>NB(r,n))}}class ax{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){He(e.mutations.length===n.length);let s=function(){return KR}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,n[i].version);return new ax(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr,pt;function Q1(t){switch(t){default:return je();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function N1(t){if(t===void 0)return hr("GRPC error has no .code"),X.UNKNOWN;switch(t){case mr.OK:return X.OK;case mr.CANCELLED:return X.CANCELLED;case mr.UNKNOWN:return X.UNKNOWN;case mr.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case mr.INTERNAL:return X.INTERNAL;case mr.UNAVAILABLE:return X.UNAVAILABLE;case mr.UNAUTHENTICATED:return X.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case mr.NOT_FOUND:return X.NOT_FOUND;case mr.ALREADY_EXISTS:return X.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return X.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case mr.ABORTED:return X.ABORTED;case mr.OUT_OF_RANGE:return X.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return X.UNIMPLEMENTED;case mr.DATA_LOSS:return X.DATA_LOSS;default:return je()}}(pt=mr||(mr={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new Zi([4294967295,4294967295],0);function DB(t){const e=R1().encode(t),r=new jE;return r.update(e),new Uint8Array(r.digest())}function PB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new Zi([r,n],0),new Zi([s,A],0)]}class cx{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ec(`Invalid padding: ${r}`);if(n<0)throw new ec(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ec(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Zi.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(Zi.fromNumber(n)));return s.compare(ej)===1&&(s=new Zi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=DB(e),[n,s]=PB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new cx(A,s,r);return n.forEach(a=>i.insert(a)),i}insert(e){if(this.Ie===0)return;const r=DB(e),[n,s]=PB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,r,n,s,A){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Tu($e.min(),s,new Vt(Ye),Cn(),nt())}}class ku{constructor(e,r,n,s,A){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new ku(n,r,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class j1{constructor(e,r){this.targetId=e,this.me=r}}class D1{constructor(e,r,n=ir.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class LB{constructor(){this.fe=0,this.ge=OB(),this.pe=ir.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=nt(),r=nt(),n=nt();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:je()}}),new ku(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=OB()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cn(),this.qe=MB(),this.Qe=new Vt(Ye)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:je()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const A=s.target;if(sf(A))if(n===0){const i=new _e(A.path);this.Ue(r,i,zt.newNoDocument(i,$e.min()))}else He(n===1);else{const i=this.Ye(r);if(i!==n){const a=this.Ze(e),l=a?this.Xe(a,e,i):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}af==null||af.et(function(d,h,f,p,y){var v,E,B,x,_,S;const U={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},N=h.unchangedNames;return N&&(U.bloomFilter={applied:y===0,hashCount:(v=N==null?void 0:N.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(x=(B=(E=N==null?void 0:N.bits)===null||E===void 0?void 0:E.bitmap)===null||B===void 0?void 0:B.length)!==null&&x!==void 0?x:0,padding:(S=(_=N==null?void 0:N.bits)===null||_===void 0?void 0:_.padding)!==null&&S!==void 0?S:0,mightContain:w=>{var b;return(b=p==null?void 0:p.mightContain(w))!==null&&b!==void 0&&b}}),U}(i,e.me,this.Le.tt(),a,l))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:A=0}=r;let i,a;try{i=nA(n).toUint8Array()}catch(l){if(l instanceof s1)return jn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cx(i,s,A)}catch(l){return jn(l instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(A=>{const i=this.Le.tt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,A,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((A,i)=>{const a=this.Je(i);if(a){if(A.current&&sf(a.target)){const l=new _e(a.target.path);this.ke.get(l)!==null||this.it(i,l)||this.Ue(i,l,zt.newNoDocument(l,e))}A.be&&(r.set(i,A.ve()),A.Ce())}});let n=nt();this.qe.forEach((A,i)=>{let a=!0;i.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new Tu(e,r,this.Qe,this.ke,n);return this.ke=Cn(),this.qe=MB(),this.Qe=new Vt(Ye),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new LB,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Qt(Ye),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ue("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new LB),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function MB(){return new Vt(_e.comparator)}function OB(){return new Vt(_e.comparator)}const rj={asc:"ASCENDING",desc:"DESCENDING"},nj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sj={and:"AND",or:"OR"};class Aj{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function d0(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function Oa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ij(t,e){return Oa(t,e.toTimestamp())}function fr(t){return He(!!t),$e.fromTimestamp(function(r){const n=rA(r);return new er(n.seconds,n.nanos)}(t))}function ux(t,e){return h0(t,e).canonicalString()}function h0(t,e){const r=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function L1(t){const e=ft.fromString(t);return He(q1(e)),e}function Au(t,e){return ux(t.databaseId,e.path)}function Is(t,e){const r=L1(e);if(r.get(1)!==t.databaseId.projectId)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new le(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new _e(H1(r))}function M1(t,e){return ux(t.databaseId,e)}function O1(t){const e=L1(t);return e.length===4?ft.emptyPath():H1(e)}function f0(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function H1(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HB(t,e,r){return{name:Au(t,e),fields:r.value.mapValue.fields}}function V1(t,e,r){const n=Is(t,e.name),s=fr(e.updateTime),A=e.createTime?fr(e.createTime):$e.min(),i=new Mr({mapValue:{fields:e.fields}}),a=zt.newFoundDocument(n,s,A,i);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function oj(t,e){return"found"in e?function(n,s){He(!!s.found),s.found.name,s.found.updateTime;const A=Is(n,s.found.name),i=fr(s.found.updateTime),a=s.found.createTime?fr(s.found.createTime):$e.min(),l=new Mr({mapValue:{fields:s.found.fields}});return zt.newFoundDocument(A,i,a,l)}(t,e):"missing"in e?function(n,s){He(!!s.missing),He(!!s.readTime);const A=Is(n,s.missing),i=fr(s.readTime);return zt.newNoDocument(A,i)}(t,e):je()}function aj(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:je()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(He(d===void 0||typeof d=="string"),ir.fromBase64String(d||"")):(He(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ir.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const d=c.code===void 0?X.UNKNOWN:N1(c.code);return new le(d,c.message||"")}(i);r=new D1(n,s,A,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Is(t,n.document.name),A=fr(n.document.updateTime),i=n.document.createTime?fr(n.document.createTime):$e.min(),a=new Mr({mapValue:{fields:n.document.fields}}),l=zt.newFoundDocument(s,A,i,a),c=n.targetIds||[],d=n.removedTargetIds||[];r=new ph(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Is(t,n.document),A=n.readTime?fr(n.readTime):$e.min(),i=zt.newNoDocument(s,A),a=n.removedTargetIds||[];r=new ph([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Is(t,n.document),A=n.removedTargetIds||[];r=new ph([],A,s,null)}else{if(!("filter"in e))return je();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:A}=n,i=new ZR(s,A),a=n.targetId;r=new j1(a,i)}}return r}function iu(t,e){let r;if(e instanceof sl)r={update:HB(t,e.key,e.value)};else if(e instanceof Al)r={delete:Au(t,e.key)};else if(e instanceof dA)r={update:HB(t,e.key,e.data),updateMask:fj(e.fieldMask)};else{if(!(e instanceof ix))return je();r={verify:Au(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(A,i){const a=i.transform;if(a instanceof La)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uo)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ho)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ma)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw je()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:ij(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:je()}(t,e.precondition)),r}function g0(t,e){const r=e.currentDocument?function(A){return A.updateTime!==void 0?Zt.updateTime(fr(A.updateTime)):A.exists!==void 0?Zt.exists(A.exists):Zt.none()}(e.currentDocument):Zt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(i,a){let l=null;if("setToServerValue"in a)He(a.setToServerValue==="REQUEST_TIME"),l=new La;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new uo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new ho(d)}else"increment"in a?l=new Ma(i,a.increment):je();const c=$t.fromServerFormat(a.fieldPath);return new Eu(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Is(t,e.update.name),A=new Mr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(l){const c=l.fieldPaths||[];return new bn(c.map(d=>$t.fromServerFormat(d)))}(e.updateMask);return new dA(s,A,i,r,n)}return new sl(s,A,r,n)}if(e.delete){const s=Is(t,e.delete);return new Al(s,r)}if(e.verify){const s=Is(t,e.verify);return new ix(s,r)}return je()}function lj(t,e){return t&&t.length>0?(He(e!==void 0),t.map(r=>function(s,A){let i=s.updateTime?fr(s.updateTime):fr(A);return i.isEqual($e.min())&&(i=fr(A)),new XR(i,s.transformResults||[])}(r,e))):[]}function K1(t,e){return{documents:[M1(t,e.path)]}}function lg(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=M1(t,s);const A=function(c){if(c.length!==0)return W1(kt.create(c,"and"))}(e.filters);A&&(r.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:FA(f.field),direction:uj(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const a=d0(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function G1(t,e,r,n){const{_t:s,parent:A}=lg(t,e),i={},a=[];let l=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+l++;i[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:FA(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:FA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:A}}function z1(t){let e=O1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){He(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];r.where&&(A=function(h){const f=$1(h);return f instanceof kt&&rx(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(y){return new su(Wo(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,bu(f)?null:f}(r.limit));let l=null;r.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new fi(p,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new fi(p,f)}(r.endAt)),g1(e,s,i,A,a,"F",l,c)}function cj(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function $1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Wo(r.unaryFilter.field);return gt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Wo(r.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=Wo(r.unaryFilter.field);return gt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wo(r.unaryFilter.field);return gt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return je()}}(t):t.fieldFilter!==void 0?function(r){return gt.create(Wo(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return je()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return kt.create(r.compositeFilter.filters.map(n=>$1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je()}}(r.compositeFilter.op))}(t):je()}function uj(t){return rj[t]}function dj(t){return nj[t]}function hj(t){return sj[t]}function FA(t){return{fieldPath:t.canonicalString()}}function Wo(t){return $t.fromServerFormat(t.fieldPath)}function W1(t){return t instanceof gt?function(r){if(r.op==="=="){if(_B(r.value))return{unaryFilter:{field:FA(r.field),op:"IS_NAN"}};if(CB(r.value))return{unaryFilter:{field:FA(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(_B(r.value))return{unaryFilter:{field:FA(r.field),op:"IS_NOT_NAN"}};if(CB(r.value))return{unaryFilter:{field:FA(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:FA(r.field),op:dj(r.op),value:r.value}}}(t):t instanceof kt?function(r){const n=r.getFilters().map(s=>W1(s));return n.length===1?n[0]:{compositeFilter:{op:hj(r.op),filters:n}}}(t):je()}function fj(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,r,n,s,A=$e.min(),i=$e.min(),a=ir.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.ct=e}}function gj(t,e){let r;if(e.document)r=V1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_e.fromSegments(e.noDocument.path),s=go(e.noDocument.readTime);r=zt.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return je();{const n=_e.fromSegments(e.unknownDocument.path),s=go(e.unknownDocument.version);r=zt.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const A=new er(s[0],s[1]);return $e.fromTimestamp(A)}(e.readTime)),r}function VB(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(A,i){return{name:Au(A,i.key),fields:i.data.value.mapValue.fields,updateTime:Oa(A,i.version.toTimestamp()),createTime:Oa(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:fo(e.version)};else{if(!e.isUnknownDocument())return je();n.unknownDocument={path:r.path.toArray(),version:fo(e.version)}}return n}function lf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function go(t){const e=new er(t.seconds,t.nanoseconds);return $e.fromTimestamp(e)}function Vi(t,e){const r=(e.baseMutations||[]).map(A=>g0(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const a=e.mutations[A+1];i.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const n=e.mutations.map(A=>g0(t.ct,A)),s=er.fromMillis(e.localWriteTimeMs);return new ox(e.batchId,s,r,n)}function tc(t){const e=go(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?go(t.lastLimboFreeSnapshotVersion):$e.min();let n;return n=function(A){return A.documents!==void 0}(t.query)?function(A){return He(A.documents.length===1),sn(nl(O1(A.documents[0])))}(t.query):function(A){return sn(z1(A))}(t.query),new Gs(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ir.fromBase64String(t.resumeToken))}function J1(t,e){const r=fo(e.snapshotVersion),n=fo(e.lastLimboFreeSnapshotVersion);let s;s=sf(e.target)?K1(t.ct,e.target):lg(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:co(e.target),readTime:r,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function dx(t){const e=z1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?of(e,e.limit,"L"):e}function _p(t,e){return new lx(e.largestBatchId,g0(t.ct,e.overlayMutation))}function KB(t,e){const r=e.path.lastSegment();return[t,nn(e.path.popLast()),r]}function GB(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:fo(n.readTime),documentKey:nn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{getBundleMetadata(e,r){return zB(e).get(r).next(n=>{if(n)return function(A){return{id:A.bundleId,createTime:go(A.createTime),version:A.version}}(n)})}saveBundleMetadata(e,r){return zB(e).put(function(s){return{bundleId:s.id,createTime:fo(fr(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return $B(e).get(r).next(n=>{if(n)return function(A){return{name:A.name,query:dx(A.bundledQuery),readTime:go(A.readTime)}}(n)})}saveNamedQuery(e,r){return $B(e).put(function(s){return{name:s.name,readTime:fo(fr(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function zB(t){return _r(t,"bundles")}function $B(t){return _r(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new cg(e,n)}getOverlay(e,r){return Rl(e).get(KB(this.userId,r)).next(n=>n?_p(this.serializer,n):null)}getOverlays(e,r){const n=Bs();return H.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((A,i)=>{const a=new lx(r,i);s.push(this.ht(e,a))}),H.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(i=>s.add(nn(i.getCollectionPath())));const A=[];return s.forEach(i=>{const a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);A.push(Rl(e).j("collectionPathOverlayIndex",a))}),H.waitFor(A)}getOverlaysForCollection(e,r,n){const s=Bs(),A=nn(r),i=IDBKeyRange.bound([this.userId,A,n],[this.userId,A,Number.POSITIVE_INFINITY],!0);return Rl(e).U("collectionPathOverlayIndex",i).next(a=>{for(const l of a){const c=_p(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const A=Bs();let i;const a=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Rl(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const h=_p(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,r){return Rl(e).put(function(s,A,i){const[a,l,c]=KB(A,i.mutation.key);return{userId:A,collectionPath:l,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:iu(s.ct,i.mutation)}}(this.serializer,this.userId,r))}}function Rl(t){return _r(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{Pt(e){return _r(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?ir.fromUint8Array(n):ir.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Jt(e.integerValue));else if("doubleValue"in e){const n=Jt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),eu(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=rA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(nA(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?A1(e)?this.dt(r,Number.MAX_SAFE_INTEGER):ig(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):je()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const A=e.fields||{};this.dt(r,53);const i="value",a=((s=(n=A[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Jt(a)),this.Vt(i,r),this.Tt(A[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),_e.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Ki.vt=new Ki;function wj(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function WB(t){const e=64-function(n){let s=0;for(let A=0;A<8;++A){const i=wj(255&n[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class xj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=WB(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=WB(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class yj{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class vj{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class jl{constructor(){this.jt=new xj,this.Ht=new yj(this.jt),this.Jt=new vj(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Gi(this.indexId,this.documentKey,this.arrayValue,n)}}function xA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=qB(t.arrayValue,e.arrayValue),r!==0?r:(r=qB(t.directionalValue,e.directionalValue),r!==0?r:_e.comparator(t.documentKey,e.documentKey)))}function qB(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.Xt=new Qt((r,n)=>$t.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(He(e.collectionGroup===this.collectionId),this.nn)return!1;const r=s0(e);if(r!==void 0&&!this.sn(r))return!1;const n=Oi(e);let s=new Set,A=0,i=0;for(;A<n.length&&this.sn(n[A]);++A)s=s.add(n[A].fieldPath.canonicalString());if(A===n.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=n[A];if(!this.on(a,l)||!this._n(this.en[i++],l))return!1}++A}for(;A<n.length;++A){const a=n[A];if(i>=this.en.length||!this._n(this.en[i++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Qt($t.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new eo(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new eo(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new eo(n.field,n.dir==="asc"?0:1)));return new Ra(Ra.UNKNOWN_ID,this.collectionId,r,ja.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){var e,r;if(He(t instanceof gt||t instanceof kt),t instanceof gt){if(t instanceof f1){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(A=>gt.create(t.field,"==",A)))||[];return kt.create(s,"or")}return t}const n=t.filters.map(s=>Y1(s));return kt.create(n,t.op)}function Bj(t){if(t.getFilters().length===0)return[];const e=w0(Y1(t));return He(Z1(e)),p0(e)||m0(e)?[e]:e.getFilters()}function p0(t){return t instanceof gt}function m0(t){return t instanceof kt&&rx(t)}function Z1(t){return p0(t)||m0(t)||function(r){if(r instanceof kt&&a0(r)){for(const n of r.getFilters())if(!p0(n)&&!m0(n))return!1;return!0}return!1}(t)}function w0(t){if(He(t instanceof gt||t instanceof kt),t instanceof gt)return t;if(t.filters.length===1)return w0(t.filters[0]);const e=t.filters.map(n=>w0(n));let r=kt.create(e,t.op);return r=cf(r),Z1(r)?r:(He(r instanceof kt),He(Pa(r)),He(r.filters.length>1),r.filters.reduce((n,s)=>hx(n,s)))}function hx(t,e){let r;return He(t instanceof gt||t instanceof kt),He(e instanceof gt||e instanceof kt),r=t instanceof gt?e instanceof gt?function(s,A){return kt.create([s,A],"and")}(t,e):JB(t,e):e instanceof gt?JB(e,t):function(s,A){if(He(s.filters.length>0&&A.filters.length>0),Pa(s)&&Pa(A))return u1(s,A.getFilters());const i=a0(s)?s:A,a=a0(s)?A:s,l=i.filters.map(c=>hx(c,a));return kt.create(l,"or")}(t,e),cf(r)}function JB(t,e){if(Pa(e))return u1(e,t.getFilters());{const r=e.filters.map(n=>hx(t,n));return kt.create(r,"or")}}function cf(t){if(He(t instanceof gt||t instanceof kt),t instanceof gt)return t;const e=t.getFilters();if(e.length===1)return cf(e[0]);if(l1(t))return t;const r=e.map(s=>cf(s)),n=[];return r.forEach(s=>{s instanceof gt?n.push(s):s instanceof kt&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:kt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.un=new fx}addToCollectionParentIndex(e,r){return this.un.add(r),H.resolve()}getCollectionParents(e,r){return H.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return H.resolve()}deleteFieldIndex(e,r){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,r){return H.resolve()}getDocumentsMatchingTarget(e,r){return H.resolve(null)}getIndexType(e,r){return H.resolve(0)}getFieldIndexes(e,r){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,r){return H.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,r){return H.resolve(Dn.min())}updateCollectionGroup(e,r,n){return H.resolve()}updateIndexEntries(e,r){return H.resolve()}}class fx{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Qt(ft.comparator),A=!s.has(n);return this.index[r]=s.add(n),A}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Qt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Uint8Array(0);class Cj{constructor(e,r){this.databaseId=r,this.cn=new fx,this.ln=new uA(n=>co(n),(n,s)=>Cu(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const A={collectionId:n,parent:nn(s)};return YB(e).put(A)}return H.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[GE(r),""],!1,!0);return YB(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==r)break;n.push(vs(i.parent))}return n})}addFieldIndex(e,r){const n=Dl(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(r);delete s.indexId;const A=n.add(s);if(r.indexState){const i=Do(e);return A.next(a=>{i.put(GB(a,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return A.next()}deleteFieldIndex(e,r){const n=Dl(e),s=Do(e),A=jo(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Dl(e),n=jo(e),s=Do(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return H.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const A=new XB(n).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,r){const n=jo(e);let s=!0;const A=new Map;return H.forEach(this.hn(r),i=>this.Pn(e,i).next(a=>{s&&(s=!!a),A.set(i,a)})).next(()=>{if(s){let i=nt();const a=[];return H.forEach(A,(l,c)=>{ue("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(l)} to execute ${co(r)}`);const d=function(_,S){const U=s0(S);if(U===void 0)return null;for(const N of Af(_,U.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,l),h=function(_,S){const U=new Map;for(const N of Oi(S))for(const w of Af(_,N.fieldPath))switch(w.op){case"==":case"in":U.set(N.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return U.set(N.fieldPath.canonicalString(),w.value),Array.from(U.values())}return null}(c,l),f=function(_,S){const U=[];let N=!0;for(const w of Oi(S)){const b=w.kind===0?FB(_,w.fieldPath,_.startAt):SB(_,w.fieldPath,_.startAt);U.push(b.value),N&&(N=b.inclusive)}return new fi(U,N)}(c,l),p=function(_,S){const U=[];let N=!0;for(const w of Oi(S)){const b=w.kind===0?SB(_,w.fieldPath,_.endAt):FB(_,w.fieldPath,_.endAt);U.push(b.value),N&&(N=b.inclusive)}return new fi(U,N)}(c,l),y=this.In(l,c,f),v=this.In(l,c,p),E=this.Tn(l,c,h),B=this.En(l.indexId,d,y,f.inclusive,v,p.inclusive,E);return H.forEach(B,x=>n.G(x,r.limit).next(_=>{_.forEach(S=>{const U=_e.fromSegments(S.documentKey);i.has(U)||(i=i.add(U),a.push(U))})}))}).next(()=>a)}return H.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Bj(kt.create(e.filters,"and")).map(n=>c0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,A,i,a){const l=(r!=null?r.length:1)*Math.max(n.length,A.length),c=l/(r!=null?r.length:1),d=[];for(let h=0;h<l;++h){const f=r?this.dn(r[h/c]):vd,p=this.An(e,f,n[h%c],s),y=this.Rn(e,f,A[h%c],i),v=a.map(E=>this.An(e,f,E,!0));d.push(...this.createRange(p,y,v))}return d}An(e,r,n,s){const A=new Gi(e,_e.empty(),r,n);return s?A:A.Zt()}Rn(e,r,n,s){const A=new Gi(e,_e.empty(),r,n);return s?A.Zt():A}Pn(e,r){const n=new XB(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const a of A)n.rn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a);return i})}getIndexType(e,r){let n=2;const s=this.hn(r);return H.forEach(s,A=>this.Pn(e,A).next(i=>{i?n!==0&&i.fields.length<function(l){let c=new Qt($t.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new jl;for(const s of Oi(e)){const A=r.data.field(s.fieldPath);if(A==null)return null;const i=n.Yt(s.kind);Ki.vt.It(A,i)}return n.zt()}dn(e){const r=new jl;return Ki.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new jl;return Ki.vt.It(lo(this.databaseId,r),n.Yt(function(A){const i=Oi(A);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new jl);let A=0;for(const i of Oi(e)){const a=n[A++];for(const l of s)if(this.fn(r,i.fieldPath)&&nu(a))s=this.gn(s,i,a);else{const c=l.Yt(i.kind);Ki.vt.It(a,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],A=[];for(const i of n.arrayValue.values||[])for(const a of s){const l=new jl;l.seed(a.zt()),Ki.vt.It(i,l.Yt(r.kind)),A.push(l)}return A}fn(e,r){return!!e.filters.find(n=>n instanceof gt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Dl(e),s=Do(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(A=>{const i=[];return H.forEach(A,a=>s.get([a.indexId,this.uid]).next(l=>{i.push(function(d,h){const f=h?new ja(h.sequenceNumber,new Dn(go(h.readTime),new _e(vs(h.documentKey)),h.largestBatchId)):ja.empty(),p=d.fields.map(([y,v])=>new eo($t.fromServerFormat(y),v));return new Ra(d.indexId,d.collectionGroup,p,f)}(a,l))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const A=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:Ye(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Dl(e),A=Do(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(a=>H.forEach(a,l=>A.put(GB(l.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return H.forEach(r,(s,A)=>{const i=n.get(s.collectionGroup);return(i?H.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(n.set(s.collectionGroup,a),H.forEach(a,l=>this.wn(e,s,l).next(c=>{const d=this.Sn(A,l);return c.isEqual(d)?H.resolve():this.bn(e,A,l,c,d)}))))})}Dn(e,r,n,s){return jo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return jo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=jo(e);let A=new Qt(xA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,a)=>{A=A.add(new Gi(n.indexId,r,a.arrayValue,a.directionalValue))}).next(()=>A)}Sn(e,r){let n=new Qt(xA);const s=this.Vn(r,e);if(s==null)return n;const A=s0(r);if(A!=null){const i=e.data.field(A.fieldPath);if(nu(i))for(const a of i.arrayValue.values||[])n=n.add(new Gi(r.indexId,e.key,this.dn(a),s))}else n=n.add(new Gi(r.indexId,e.key,vd,s));return n}bn(e,r,n,s,A){ue("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(l,c,d,h,f){const p=l.getIterator(),y=c.getIterator();let v=Ro(p),E=Ro(y);for(;v||E;){let B=!1,x=!1;if(v&&E){const _=d(v,E);_<0?x=!0:_>0&&(B=!0)}else v!=null?x=!0:B=!0;B?(h(E),E=Ro(y)):x?(f(v),v=Ro(p)):(v=Ro(p),E=Ro(y))}}(s,A,xA,a=>{i.push(this.Dn(e,r,n,a))},a=>{i.push(this.vn(e,r,n,a))}),H.waitFor(i)}yn(e){let r=1;return Do(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,A)=>{A.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,a)=>xA(i,a)).filter((i,a,l)=>!a||xA(i,l[a-1])!==0);const s=[];s.push(e);for(const i of n){const a=xA(i,e),l=xA(i,r);if(a===0)s[0]=e.Zt();else if(a>0&&l<0)s.push(i),s.push(i.Zt());else if(l>0)break}s.push(r);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const a=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,vd,[]],l=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,vd,[]];A.push(IDBKeyRange.bound(a,l))}return A}Cn(e,r){return xA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(ZB)}getMinOffset(e,r){return H.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||je())).next(ZB)}}function YB(t){return _r(t,"collectionParents")}function jo(t){return _r(t,"indexEntries")}function Dl(t){return _r(t,"indexConfiguration")}function Do(t){return _r(t,"indexState")}function ZB(t){He(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Zw(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new Dn(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Zr(e,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(r.batchId);let a=0;const l=n.J({range:i},(d,h,f)=>(a++,f.delete()));A.push(l.next(()=>{He(a===1)}));const c=[];for(const d of r.mutations){const h=YE(e,d.key.path,r.batchId);A.push(s.delete(h)),c.push(d.key)}return H.waitFor(A).next(()=>c)}function uf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw je();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr.DEFAULT_COLLECTION_PERCENTILE=10,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zr.DEFAULT=new Zr(41943040,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zr.DISABLED=new Zr(-1,0,0);class ug{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){He(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new ug(A,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yA(e).J({index:"userMutationsIndex",range:n},(s,A,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const A=qo(e),i=yA(e);return i.add({}).next(a=>{He(typeof a=="number");const l=new ox(a,r,n,s),c=function(p,y,v){const E=v.baseMutations.map(x=>iu(p.ct,x)),B=v.mutations.map(x=>iu(p.ct,x));return{userId:y,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:E,mutations:B}}(this.serializer,this.userId,l),d=[];let h=new Qt((f,p)=>Ye(f.canonicalString(),p.canonicalString()));for(const f of s){const p=YE(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(p,uR))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),H.waitFor(d).next(()=>l)})}lookupMutationBatch(e,r){return yA(e).get(r).next(n=>n?(He(n.userId===this.userId),Vi(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?H.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let A=null;return yA(e).J({index:"userMutationsIndex",range:s},(i,a,l)=>{a.userId===this.userId&&(He(a.batchId>=n),A=Vi(this.serializer,a)),l.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return yA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,A,i)=>{n=A.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Vi(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=uh(this.userId,r.path),s=IDBKeyRange.lowerBound(n),A=[];return qo(e).J({range:s},(i,a,l)=>{const[c,d,h]=i,f=vs(d);if(c===this.userId&&r.path.isEqual(f))return yA(e).get(h).next(p=>{if(!p)throw je();He(p.userId===this.userId),A.push(Vi(this.serializer,p))});l.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qt(Ye);const s=[];return r.forEach(A=>{const i=uh(this.userId,A.path),a=IDBKeyRange.lowerBound(i),l=qo(e).J({range:a},(c,d,h)=>{const[f,p,y]=c,v=vs(p);f===this.userId&&A.path.isEqual(v)?n=n.add(y):h.done()});s.push(l)}),H.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,A=uh(this.userId,n),i=IDBKeyRange.lowerBound(A);let a=new Qt(Ye);return qo(e).J({range:i},(l,c,d)=>{const[h,f,p]=l,y=vs(f);h===this.userId&&n.isPrefixOf(y)?y.length===s&&(a=a.add(p)):d.done()}).next(()=>this.xn(e,a))}xn(e,r){const n=[],s=[];return r.forEach(A=>{s.push(yA(e).get(A).next(i=>{if(i===null)throw je();He(i.userId===this.userId),n.push(Vi(this.serializer,i))}))}),H.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return e2(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),H.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return H.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return qo(e).J({range:n},(A,i,a)=>{if(A[0]===this.userId){const l=vs(A[1]);s.push(l)}else a.done()}).next(()=>{He(s.length===0)})})}containsKey(e,r){return t2(e,this.userId,r)}Nn(e){return r2(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function t2(t,e,r){const n=uh(e,r.path),s=n[1],A=IDBKeyRange.lowerBound(n);let i=!1;return qo(t).J({range:A,H:!0},(a,l,c)=>{const[d,h,f]=a;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function yA(t){return _r(t,"mutations")}function qo(t){return _r(t,"documentMutations")}function r2(t){return _r(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new po(0)}static kn(){return new po(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new po(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>$e.fromTimestamp(new er(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Po(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(He(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const A=[];return Po(e).J((i,a)=>{const l=tc(a);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,A.push(this.removeTargetData(e,l)))}).next(()=>H.waitFor(A)).next(()=>s)}forEachTarget(e,r){return Po(e).J((n,s)=>{const A=tc(s);r(A)})}qn(e){return tb(e).get("targetGlobalKey").next(r=>(He(r!==null),r))}Qn(e,r){return tb(e).put("targetGlobalKey",r)}Kn(e,r){return Po(e).put(J1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=co(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let A=null;return Po(e).J({range:s,index:"queryTargetsIndex"},(i,a,l)=>{const c=tc(a);Cu(r,c.target)&&(A=c,l.done())}).next(()=>A)}addMatchingKeys(e,r,n){const s=[],A=SA(e);return r.forEach(i=>{const a=nn(i.path);s.push(A.put({targetId:n,path:a})),s.push(this.referenceDelegate.addReference(e,n,i))}),H.waitFor(s)}removeMatchingKeys(e,r,n){const s=SA(e);return H.forEach(r,A=>{const i=nn(A.path);return H.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,A)])})}removeMatchingKeysForTargetId(e,r){const n=SA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=SA(e);let A=nt();return s.J({range:n,H:!0},(i,a,l)=>{const c=vs(i[1]),d=new _e(c);A=A.add(d)}).next(()=>A)}containsKey(e,r){const n=nn(r.path),s=IDBKeyRange.bound([n],[GE(n)],!1,!0);let A=0;return SA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,a],l,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,r){return Po(e).get(r).next(n=>n?tc(n):null)}}function Po(t){return _r(t,"targets")}function tb(t){return _r(t,"targetGlobal")}function SA(t){return _r(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb([t,e],[r,n]){const s=Ye(t,r);return s===0?Ye(e,n):s}class Ij{constructor(e){this.Un=e,this.buffer=new Qt(rb),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();rb(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class n2{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){_i(r)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Ci(r)}await this.Hn(3e5)})}}class Ej{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return H.resolve(Bn.oe);const n=new Ij(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(eb)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eb):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,A,i,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(A=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),zo()<=ht.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(a-i)+`ms
	Removed ${A} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function s2(t,e){return new Ej(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,r){this.db=e,this.garbageCollector=s2(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return Bd(e,n)}removeReference(e,r,n){return Bd(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Bd(e,r)}nr(e,r){return function(s,A){let i=!1;return r2(s).Y(a=>t2(s,a,A).next(l=>(l&&(i=!0),H.resolve(!l)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,a)=>{if(a<=r){const l=this.nr(e,i).next(c=>{if(!c)return A++,n.getEntry(e,i).next(()=>(n.removeEntry(i,$e.min()),SA(e).delete(function(h){return[0,nn(h.path)]}(i))))});s.push(l)}}).next(()=>H.waitFor(s)).next(()=>n.apply(e)).next(()=>A)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Bd(e,r)}tr(e,r){const n=SA(e);let s,A=Bn.oe;return n.J({index:"documentTargetsIndex"},([i,a],{path:l,sequenceNumber:c})=>{i===0?(A!==Bn.oe&&r(new _e(vs(s)),A),A=c,s=l):A=Bn.oe}).next(()=>{A!==Bn.oe&&r(new _e(vs(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bd(t,e){return SA(t).put(function(n,s){return{targetId:0,path:nn(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.changes=new uA(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?H.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return ji(e).put(n)}removeEntry(e,r,n){return ji(e).delete(function(A,i){const a=A.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],lf(i),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=zt.newInvalidDocument(r);return ji(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pl(r))},(s,A)=>{n=this.ir(r,A)}).next(()=>n)}sr(e,r){let n={size:0,document:zt.newInvalidDocument(r)};return ji(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pl(r))},(s,A)=>{n={document:this.ir(r,A),size:uf(A)}}).next(()=>n)}getEntries(e,r){let n=Cn();return this._r(e,r,(s,A)=>{const i=this.ir(s,A);n=n.insert(s,i)}).next(()=>n)}ar(e,r){let n=Cn(),s=new Vt(_e.comparator);return this._r(e,r,(A,i)=>{const a=this.ir(A,i);n=n.insert(A,a),s=s.insert(A,uf(i))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return H.resolve();let s=new Qt(Ab);r.forEach(l=>s=s.add(l));const A=IDBKeyRange.bound(Pl(s.first()),Pl(s.last())),i=s.getIterator();let a=i.getNext();return ji(e).J({index:"documentKeyIndex",range:A},(l,c,d)=>{const h=_e.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Ab(a,h)<0;)n(a,null),a=i.getNext();a&&a.isEqual(h)&&(n(a,c),a=i.hasNext()?i.getNext():null),a?d.$(Pl(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,A){const i=r.path,a=[i.popLast().toArray(),i.lastSegment(),lf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ji(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=Cn();for(const h of c){const f=this.ir(_e.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Iu(r,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,s){let A=Cn();const i=sb(r,n),a=sb(r,Dn.max());return ji(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(l,c,d)=>{const h=this.ir(_e.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new Fj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return nb(e).get("remoteDocumentGlobalKey").next(r=>(He(!!r),r))}rr(e,r){return nb(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=gj(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual($e.min())))return n}return zt.newInvalidDocument(e)}}function i2(t){return new kj(t)}class Fj extends A2{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new uA(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Qt((A,i)=>Ye(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const a=this.lr.get(A);if(r.push(this.cr.removeEntry(e,A,a.readTime)),i.isValidDocument()){const l=VB(this.cr.serializer,i);s=s.add(A.path.popLast());const c=uf(l);n+=c-a.size,r.push(this.cr.addEntry(e,A,l))}else if(n-=a.size,this.trackRemovals){const l=VB(this.cr.serializer,i.convertToNoDocument($e.min()));r.push(this.cr.addEntry(e,A,l))}}),s.forEach(A=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),r.push(this.cr.updateMetadata(e,n)),H.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:n.get(A).readTime})}),n))}}function nb(t){return _r(t,"remoteDocumentGlobal")}function ji(t){return _r(t,"remoteDocumentsV14")}function Pl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sb(t,e){const r=e.documentKey.path.toArray();return[t,lf(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ab(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let A=0;A<r.length-2&&A<n.length-2;++A)if(s=Ye(r[A],n[A]),s)return s;return s=Ye(r.length,n.length),s||(s=Ye(r[r.length-2],n[n.length-2]),s||Ye(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Bc(n.mutation,s,bn.empty(),er.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,nt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=nt()){const s=Bs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(A=>{let i=Zl();return A.forEach((a,l)=>{i=i.insert(a,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=Bs();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,nt()))}populateOverlays(e,r,n){const s=[];return n.forEach(A=>{r.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,a)=>{r.set(i,a)})})}computeViews(e,r,n,s){let A=Cn();const i=vc(),a=function(){return vc()}();return r.forEach((l,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof dA)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),Bc(d.mutation,c,d.mutation.getFieldMask(),er.now())):i.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,A).next(l=>(l.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return a.set(c,new Sj(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=vc();let s=new Vt((i,a)=>i-a),A=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const a of i)a.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let d=n.get(l)||bn.empty();d=a.applyToLocalView(c,d),n.set(l,d);const h=(s.get(a.batchId)||nt()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=b1();d.forEach(f=>{if(!A.has(f)){const p=F1(r.get(f),n.get(f));p!==null&&h.set(f,p),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return H.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return _e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nx(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-A.size):H.resolve(Bs());let a=-1,l=A;return i.next(c=>H.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),A.get(d)?H.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,l,c,nt())).next(d=>({batchId:a,changes:B1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new _e(r)).next(n=>{let s=Zl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const A=r.collectionGroup;let i=Zl();return this.indexManager.getCollectionParents(e,A).next(a=>H.forEach(a,l=>{const c=function(h,f){return new cA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,A,s))).next(i=>{A.forEach((l,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,zt.newInvalidDocument(d)))});let a=Zl();return i.forEach((l,c)=>{const d=A.get(l);d!==void 0&&Bc(d.mutation,c,bn.empty(),er.now()),Iu(r,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return H.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:fr(s.createTime)}}(r)),H.resolve()}getNamedQuery(e,r){return H.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:dx(s.bundledQuery),readTime:fr(s.readTime)}}(r)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.overlays=new Vt(_e.comparator),this.Ir=new Map}getOverlay(e,r){return H.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Bs();return H.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,A)=>{this.ht(e,r,A)}),H.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(n)),H.resolve()}getOverlaysForCollection(e,r,n){const s=Bs(),A=r.length+1,i=new _e(r.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===A&&l.largestBatchId>n&&s.set(l.getKey(),l)}return H.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let A=new Vt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=A.get(c.largestBatchId);d===null&&(d=Bs(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Bs(),l=A.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return H.resolve(a)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lx(r,n));let A=this.Ir.get(r);A===void 0&&(A=nt(),this.Ir.set(r,A)),this.Ir.set(r,A.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this.Tr=new Qt(Fr.Er),this.dr=new Qt(Fr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Fr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Fr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new _e(new ft([])),n=new Fr(r,e),s=new Fr(r,e+1),A=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new _e(new ft([])),n=new Fr(r,e),s=new Fr(r,e+1);let A=nt();return this.dr.forEachInRange([n,s],i=>{A=A.add(i.key)}),A}containsKey(e){const r=new Fr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Fr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return _e.comparator(e.key,r.key)||Ye(e.wr,r.wr)}static Ar(e,r){return Ye(e.wr,r.wr)||_e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Qt(Fr.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new ox(A,r,n,s);this.mutationQueue.push(i);for(const a of s)this.br=this.br.add(new Fr(a.key,A)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(i)}lookupMutationBatch(e,r){return H.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),A=s<0?0:s;return H.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Fr(r,0),s=new Fr(r,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([n,s],i=>{const a=this.Dr(i.wr);A.push(a)}),H.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qt(Ye);return r.forEach(s=>{const A=new Fr(s,0),i=new Fr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],a=>{n=n.add(a.wr)})}),H.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let A=n;_e.isDocumentKey(A)||(A=A.child(""));const i=new Fr(new _e(A),0);let a=new Qt(Ye);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},i),H.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){He(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return H.forEach(r.mutations,s=>{const A=new Fr(s.key,r.batchId);return n=n.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Fr(r,0),s=this.br.firstAfterOrEqual(n);return H.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.Mr=e,this.docs=function(){return new Vt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),A=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return H.resolve(n?n.document.mutableCopy():zt.newInvalidDocument(r))}getEntries(e,r){let n=Cn();return r.forEach(s=>{const A=this.docs.get(s);n=n.insert(s,A?A.document.mutableCopy():zt.newInvalidDocument(s))}),H.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let A=Cn();const i=r.path,a=new _e(i.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Zw($E(d),n)<=0||(s.has(d.key)||Iu(r,d))&&(A=A.insert(d.key,d.mutableCopy()))}return H.resolve(A)}getAllFromCollectionGroup(e,r,n,s){je()}Or(e,r){return H.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Dj(this)}getSize(e){return H.resolve(this.size)}}class Dj extends A2{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),H.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.persistence=e,this.Nr=new uA(r=>co(r),Cu),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gx,this.targetCount=0,this.kr=po.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),H.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new po(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,H.resolve()}updateTargetData(e,r){return this.Kn(r),H.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,r,n){let s=0;const A=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),H.waitFor(A).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return H.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),H.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,A=[];return s&&r.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),H.waitFor(A)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),H.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return H.resolve(n)}containsKey(e,r){return H.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Bn(0),this.Kr=!1,this.Kr=!0,this.$r=new Nj,this.referenceDelegate=e(this),this.Ur=new Pj(this),this.indexManager=new bj,this.remoteDocumentCache=function(s){return new jj(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new X1(r),this.Gr=new Uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Qj,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Rj(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ue("MemoryPersistence","Starting transaction:",e);const s=new Lj(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,r){return H.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class Lj extends qE{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Jr=new gx,this.Yr=null}static Zr(e){return new dg(e)}get Xr(){if(this.Yr)return this.Yr;throw je()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),H.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),H.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),H.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,n=>{const s=_e.fromPath(n);return this.ei(e,s).next(A=>{A||r.removeEntry(s,$e.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return H.or([()=>H.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class df{constructor(e,r){this.persistence=e,this.ti=new uA(n=>nn(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=s2(this,r)}static Zr(e,r){return new df(e,r)}zr(){}jr(e){return H.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return H.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(A=>A?H.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),A=s.newChangeBuffer();return s.Or(e,i=>this.nr(e,i,r).next(a=>{a||(n++,A.removeEntry(i,$e.min()))})).next(()=>A.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),H.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),H.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),H.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=hh(e.data.value)),r}nr(e,r,n){return H.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return H.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.serializer=e}O(e,r,n,s){const A=new ng("createOrUpgrade",r);n<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xB,{unique:!0}),l.createObjectStore("documentMutations")}(e),ib(e),function(l){l.createObjectStore("remoteDocuments")}(e));let i=H.resolve();return n<3&&s>=3&&(n!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),ib(e)),i=i.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$e.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),n<4&&s>=4&&(n!==0&&(i=i.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xB,{unique:!0});const h=c.store("mutations"),f=d.map(p=>h.put(p));return H.waitFor(f)})}(e,A))),i=i.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(i=i.next(()=>this.ni(A))),n<6&&s>=6&&(i=i.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),n<7&&s>=7&&(i=i.next(()=>this.ii(A))),n<8&&s>=8&&(i=i.next(()=>this.si(e,A))),n<9&&s>=9&&(i=i.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(i=i.next(()=>this.oi(A))),n<11&&s>=11&&(i=i.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:bR});c.createIndex("collectionPathOverlayIndex",CR,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",_R,{unique:!1})})(e)})),n<13&&s>=13&&(i=i.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:dR});c.createIndex("documentKeyIndex",hR),c.createIndex("collectionGroupIndex",fR)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),n<15&&s>=15&&(i=i.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:xR}).createIndex("sequenceNumberIndex",yR,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:vR}).createIndex("documentKeyIndex",BR,{unique:!1})}(e))),n<16&&s>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(i=i.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=uf(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>H.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(a=>H.forEach(a,l=>{He(l.userId===A.userId);const c=Vi(this.serializer,l);return e2(e,A.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return n.J((i,a)=>{const l=new ft(i),c=function(h){return[0,nn(h)]}(l);A.push(r.get(c).next(d=>d?H.resolve():(h=>r.put({targetId:0,path:nn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>H.waitFor(A))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:wR});const n=r.store("collectionParents"),s=new fx,A=i=>{if(s.add(i)){const a=i.lastSegment(),l=i.popLast();return n.put({collectionId:a,parent:nn(l)})}};return r.store("remoteDocuments").J({H:!0},(i,a)=>{const l=new ft(i);return A(l.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,a,l],c)=>{const d=vs(a);return A(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const A=tc(s),i=J1(this.serializer,A);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((A,i)=>{const a=r.store("remoteDocumentsV14"),l=function(h){return h.document?new _e(ft.fromString(h.document.name).popFirst(5)):h.noDocument?_e.fromSegments(h.noDocument.path):h.unknownDocument?_e.fromSegments(h.unknownDocument.path):je()}(i).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(a.put(c))}).next(()=>H.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=i2(this.serializer),A=new px(dg.Zr,this.serializer.ct);return n.U().next(i=>{const a=new Map;return i.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:nt();Vi(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),H.forEach(a,(l,c)=>{const d=new Ur(c),h=cg.lt(this.serializer,d),f=A.getIndexManager(d),p=ug.lt(d,this.serializer,f,A.referenceDelegate);return new o2(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new A0(r,Bn.oe),l).next()})})}}function ib(t){t.createObjectStore("targetDocuments",{keyPath:pR}).createIndex("documentTargetsIndex",mR,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gR,{unique:!0}),t.createObjectStore("targetGlobal")}const Ip="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mx{constructor(e,r,n,s,A,i,a,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=A,this.window=i,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!mx.D())throw new le(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tj(this,s),this.Ai=r+"main",this.serializer=new X1(l),this.Ri=new _s(this.Ai,this.hi,new Mj(this.serializer)),this.$r=new mj,this.Ur=new _j(this.referenceDelegate,this.serializer),this.remoteDocumentCache=i2(this.serializer),this.Gr=new pj,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(X.FAILED_PRECONDITION,Ip);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Bn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(_i(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ll(e).get("owner").next(r=>H.resolve(this.vi(r)))}Ci(e){return bd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=_r(r,"clientMetadata");return n.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(a=>A.indexOf(a)===-1);return H.forEach(i,a=>n.delete(a.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):Ll(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new le(X.FAILED_PRECONDITION,Ip);return!1}}return!(!this.networkEnabled||!this.inForeground)||bd(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(A||i&&a)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&ue("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new A0(e,Bn.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>bd(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return ug.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cj(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ue("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",A=function(l){return l===17?TR:l===16?ER:l===15?tx:l===14?t1:l===13?e1:l===12?IR:l===11?ZE:void je()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,a=>(i=new A0(a,this.Qr?this.Qr.next():Bn.oe),r==="readwrite-primary"?this.wi(i).next(l=>!!l||this.Si(i)).next(l=>{if(!l)throw hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new le(X.FAILED_PRECONDITION,WE);return n(i)}).next(l=>this.Di(i).next(()=>l)):this.Ki(i).next(()=>n(i)))).then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e){return Ll(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new le(X.FAILED_PRECONDITION,Ip)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ll(e).put("owner",r)}static D(){return _s.D()}bi(e){const r=Ll(e);return r.get("owner").next(n=>this.vi(n)?(ue("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):H.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(hr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;kE()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ue("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return hr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){hr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ll(t){return _r(t,"owner")}function bd(t){return _r(t,"clientMetadata")}function wx(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=nt(),s=nt();for(const A of r.docChanges)switch(A.type){case 0:n=n.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new xx(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kE()?8:XE(Cr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const A={result:null};return this.Yi(e,r).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,r,s,n).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new Oj;return this.Xi(e,r,i).next(a=>{if(A.result=a,this.zi)return this.es(e,r,i,a.size)})}).next(()=>A.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(zo()<=ht.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",$o(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(zo()<=ht.DEBUG&&ue("QueryEngine","Query:",$o(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(zo()<=ht.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",$o(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(r))):H.resolve())}Yi(e,r){if(UB(r))return H.resolve(null);let n=sn(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=of(r,null,"F"),n=sn(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(A=>{const i=nt(...A);return this.Ji.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,a);return this.ns(r,c,i,l.readTime)?this.Yi(e,of(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return UB(r)||s.isEqual($e.min())?H.resolve(null):this.Ji.getDocuments(e,n).next(A=>{const i=this.ts(r,A);return this.ns(r,i,n,s)?H.resolve(null):(zo()<=ht.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$o(r)),this.rs(e,i,r,zE(s,-1)).next(a=>a))})}ts(e,r){let n=new Qt(y1(e));return r.forEach((s,A)=>{Iu(e,A)&&(n=n.add(A))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const A=e.limitType==="F"?r.last():r.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,r,n){return zo()<=ht.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",$o(r)),this.Ji.getDocumentsMatchingQuery(e,r,Dn.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(A=>(r.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Vt(Ye),this._s=new uA(A=>co(A),Cu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function l2(t,e,r,n){return new Hj(t,e,r,n)}async function c2(t,e){const r=ve(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(A=>(s=A,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(A=>{const i=[],a=[];let l=nt();for(const c of s){i.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of A){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:a}))})})}function Vj(t,e){const r=ve(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),A=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,f=h.keys();let p=H.resolve();return f.forEach(y=>{p=p.next(()=>d.getEntry(l,y)).next(v=>{const E=c.docVersions.get(y);He(E!==null),v.version.compareTo(E)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(r,n,e,A).next(()=>A.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=nt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function u2(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Kj(t,e){const r=ve(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;a.push(r.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(A,d.addedDocuments,h)));let p=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(ir.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),s=s.insert(h,p),function(v,E,B){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(f,p,d)&&a.push(r.Ur.updateTargetData(A,p))});let l=Cn(),c=nt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(A,d))}),a.push(d2(A,i,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!n.isEqual($e.min())){const d=r.Ur.getLastRemoteSnapshotVersion(A).next(h=>r.Ur.setTargetsMetadata(A,A.currentSequenceNumber,n));a.push(d)}return H.waitFor(a).next(()=>i.apply(A)).next(()=>r.localDocuments.getLocalViewOfDocuments(A,l,c)).next(()=>l)}).then(A=>(r.os=s,A))}function d2(t,e,r){let n=nt(),s=nt();return r.forEach(A=>n=n.add(A)),e.getEntries(t,n).next(A=>{let i=Cn();return r.forEach((a,l)=>{const c=A.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual($e.min())?(e.removeEntry(a,l.readTime),i=i.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),i=i.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:i,Is:s}})}function Gj(t,e){const r=ve(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Ha(t,e){const r=ve(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(A=>A?(s=A,H.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Gs(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Va(t,e,r){const n=ve(t),s=n.os.get(e),A=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",A,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!_i(i))throw i;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function hf(t,e,r){const n=ve(t);let s=$e.min(),A=nt();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,d){const h=ve(l),f=h._s.get(d);return f!==void 0?H.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,sn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,a.targetId).next(l=>{A=l})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:$e.min(),r?A:nt())).next(a=>(g2(n,x1(e),a),{documents:a,Ts:A})))}function h2(t,e){const r=ve(t),n=ve(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",A=>n.ot(A,e).next(i=>i?i.target:null))}function f2(t,e){const r=ve(t),n=r.us.get(e)||$e.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,zE(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(g2(r,e,s),s))}function g2(t,e,r){let n=t.us.get(e)||$e.min();r.forEach((s,A)=>{A.readTime.compareTo(n)>0&&(n=A.readTime)}),t.us.set(e,n)}async function zj(t,e,r,n){const s=ve(t);let A=nt(),i=Cn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),l=await Ha(s,function(d){return sn(nl(ft.fromString(`__bundle__/docs/${d}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>d2(c,a,i).next(d=>(a.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Ur.addMatchingKeys(c,A,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function $j(t,e,r=nt()){const n=await Ha(t,sn(dx(e.bundledQuery))),s=ve(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=fr(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const a=n.withResumeToken(ir.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(a.targetId,a),s.Ur.updateTargetData(A,a).next(()=>s.Ur.removeMatchingKeysForTargetId(A,n.targetId)).next(()=>s.Ur.addMatchingKeys(A,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function ob(t,e){return`firestore_clients_${t}_${e}`}function ab(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Ep(t,e){return`firestore_targets_${t}_${e}`}class ff{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new le(s.error.code,s.error.message))),i?new ff(e,r,s.state,A):(hr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bc{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,A=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return A&&n.error&&(A=typeof n.error.message=="string"&&typeof n.error.code=="string",A&&(s=new le(n.error.code,n.error.message))),A?new bc(e,n.state,s):(hr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gf{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,A=sx();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=JE(n.activeTargetIds[i]),A=A.add(n.activeTargetIds[i]);return s?new gf(e,A):(hr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class yx{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new yx(r.clientId,r.onlineState):(hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class x0{constructor(){this.activeTargetIds=sx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tp{constructor(e,r,n,s,A){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Vt(Ye),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=ob(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new x0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(ob(this.persistenceKey,n));if(s){const A=gf.Rs(n,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ep(this.persistenceKey,e));if(s){const A=bc.Rs(e,s);A&&(n=A.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ep(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ue("SharedClientState","READ",e,r),r}setItem(e,r){ue("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(A){let i=Bn.oe;if(A!=null)try{const a=JSON.parse(A);He(typeof a=="number"),i=a}catch(a){hr("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(r.newValue);n!==Bn.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new ff(this.currentUser,e,r,n),A=ab(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const r=ab(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=Ep(this.persistenceKey,e),A=new bc(e,r,n);this.setItem(s,A.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return gf.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),A=n[2]!==void 0?n[2]:null;return ff.Rs(new Ur(A),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return bc.Rs(s,r)}Ls(e){return yx.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(n),i=[],a=[];return A.forEach(l=>{s.has(l)||i.push(l)}),s.forEach(l=>{A.has(l)||a.push(l)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=sx();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class p2{constructor(){this.so=new x0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new x0,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd=null;function kp(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="WebChannelConnection";class Jj extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(r,n,s,A,i){const a=kp(),l=this.xo(r,n.toUriEncodedString());ue("RestConnection",`Sending RPC '${r}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(r,l,c,s).then(d=>(ue("RestConnection",`Received RPC '${r}' ${a}: `,d),d),d=>{throw jn("RestConnection",`RPC '${r}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(r,n,s,A,i,a){return this.Mo(r,n,s,A,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rl}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((A,i)=>r[i]=A),s&&s.headers.forEach((A,i)=>r[i]=A)}xo(r,n){const s=qj[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const A=kp();return new Promise((i,a)=>{const l=new DE;l.setWithCredentials(!0),l.listenOnce(PE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ch.NO_ERROR:const d=l.getResponseJson();ue(Jr,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case ch.TIMEOUT:ue(Jr,`RPC '${e}' ${A} timed out`),a(new le(X.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const h=l.getStatus();if(ue(Jr,`RPC '${e}' ${A} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const y=function(E){const B=E.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(B)>=0?B:X.UNKNOWN}(p.status);a(new le(y,p.message))}else a(new le(X.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new le(X.UNAVAILABLE,"Connection failed."));break;default:je()}}finally{ue(Jr,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);ue(Jr,`RPC '${e}' ${A} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=kp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=OE(),a=ME(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=A.join("");ue(Jr,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);let f=!1,p=!1;const y=new Xj({Io:E=>{p?ue(Jr,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(f||(ue(Jr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ue(Jr,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},To:()=>h.close()}),v=(E,B,x)=>{E.listen(B,_=>{try{x(_)}catch(S){setTimeout(()=>{throw S},0)}})};return v(h,Yl.EventType.OPEN,()=>{p||(ue(Jr,`RPC '${e}' stream ${s} transport opened.`),y.yo())}),v(h,Yl.EventType.CLOSE,()=>{p||(p=!0,ue(Jr,`RPC '${e}' stream ${s} transport closed`),y.So())}),v(h,Yl.EventType.ERROR,E=>{p||(p=!0,jn(Jr,`RPC '${e}' stream ${s} transport errored:`,E),y.So(new le(X.UNAVAILABLE,"The operation could not be completed")))}),v(h,Yl.EventType.MESSAGE,E=>{var B;if(!p){const x=E.data[0];He(!!x);const _=x,S=_.error||((B=_[0])===null||B===void 0?void 0:B.error);if(S){ue(Jr,`RPC '${e}' stream ${s} received error:`,S);const U=S.status;let N=function(C){const F=mr[C];if(F!==void 0)return N1(F)}(U),w=S.message;N===void 0&&(N=X.INTERNAL,w="Unknown error status: "+U+" with message "+S.message),p=!0,y.So(new le(N,w)),h.close()}else ue(Jr,`RPC '${e}' stream ${s} received:`,x),y.bo(x)}}),v(a,LE.STAT_EVENT,E=>{E.stat===n0.PROXY?ue(Jr,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===n0.NOPROXY&&ue(Jr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){return typeof window<"u"?window:null}function mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){return new Aj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,r,n=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,r,n,s,A,i,a,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vx(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===X.RESOURCE_EXHAUSTED?(hr(r.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new le(X.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yj extends w2{constructor(e,r,n,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=aj(this.serializer,e),n=function(A){if(!("targetChange"in A))return $e.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?$e.min():i.readTime?fr(i.readTime):$e.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=f0(this.serializer),r.addTarget=function(A,i){let a;const l=i.target;if(a=sf(l)?{documents:K1(A,l)}:{query:lg(A,l)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=P1(A,i.resumeToken);const c=d0(A,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo($e.min())>0){a.readTime=Oa(A,i.snapshotVersion.toTimestamp());const c=d0(A,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=cj(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=f0(this.serializer),r.removeTarget=e,this.a_(r)}}class Zj extends w2{constructor(e,r,n,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return He(!!e.streamToken),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=lj(e.writeResults,e.commitTime),n=fr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=f0(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>iu(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,h0(r,n),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new le(X.UNKNOWN,A.toString())})}Lo(e,r,n,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Lo(e,h0(r,n),s,i,a,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(X.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hr(r),this.D_=!1):ue("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,r,n,s,A){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{n.enqueueAndForget(async()=>{Ei(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ve(l);c.L_.add(4),await il(c),c.q_.set("Unknown"),c.L_.delete(4),await Su(c)}(this))})}),this.q_=new tD(n,s)}}async function Su(t){if(Ei(t))for(const e of t.B_)await e(!0)}async function il(t){for(const e of t.B_)await e(!1)}function hg(t,e){const r=ve(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Cx(r)?bx(r):al(r).r_()&&Bx(r,e))}function Ka(t,e){const r=ve(t),n=al(r);r.N_.delete(e),n.r_()&&x2(r,e),r.N_.size===0&&(n.r_()?n.o_():Ei(r)&&r.q_.set("Unknown"))}function Bx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}al(t).A_(e)}function x2(t,e){t.Q_.xe(e),al(t).R_(e)}function bx(t){t.Q_=new tj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),al(t).start(),t.q_.v_()}function Cx(t){return Ei(t)&&!al(t).n_()&&t.N_.size>0}function Ei(t){return ve(t).L_.size===0}function y2(t){t.Q_=void 0}async function nD(t){t.q_.set("Online")}async function sD(t){t.N_.forEach((e,r)=>{Bx(t,e)})}async function AD(t,e){y2(t),Cx(t)?(t.q_.M_(e),bx(t)):t.q_.set("Unknown")}async function iD(t,e,r){if(t.q_.set("Online"),e instanceof D1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const a of A.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(n){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await pf(t,n)}else if(e instanceof ph?t.Q_.Ke(e):e instanceof j1?t.Q_.He(e):t.Q_.We(e),!r.isEqual($e.min()))try{const n=await u2(t.localStore);r.compareTo(n)>=0&&await function(A,i){const a=A.Q_.rt(i);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(l.resumeToken,i))}}),a.targetMismatches.forEach((l,c)=>{const d=A.N_.get(l);if(!d)return;A.N_.set(l,d.withResumeToken(ir.EMPTY_BYTE_STRING,d.snapshotVersion)),x2(A,l);const h=new Gs(d.target,l,c,d.sequenceNumber);Bx(A,h)}),A.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ue("RemoteStore","Failed to raise snapshot:",n),await pf(t,n)}}async function pf(t,e,r){if(!_i(e))throw e;t.L_.add(1),await il(t),t.q_.set("Offline"),r||(r=()=>u2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Su(t)})}function v2(t,e){return e().catch(r=>pf(t,r,e))}async function ol(t){const e=ve(t),r=gi(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;oD(e);)try{const s=await Gj(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,aD(e,s)}catch(s){await pf(e,s)}B2(e)&&b2(e)}function oD(t){return Ei(t)&&t.O_.length<10}function aD(t,e){t.O_.push(e);const r=gi(t);r.r_()&&r.V_&&r.m_(e.mutations)}function B2(t){return Ei(t)&&!gi(t).n_()&&t.O_.length>0}function b2(t){gi(t).start()}async function lD(t){gi(t).p_()}async function cD(t){const e=gi(t);for(const r of t.O_)e.m_(r.mutations)}async function uD(t,e,r){const n=t.O_.shift(),s=ax.from(n,e,r);await v2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ol(t)}async function dD(t,e){e&&gi(t).V_&&await async function(n,s){if(function(i){return Q1(i)&&i!==X.ABORTED}(s.code)){const A=n.O_.shift();gi(n).s_(),await v2(n,()=>n.remoteSyncer.rejectFailedWrite(A.batchId,s)),await ol(n)}}(t,e),B2(t)&&b2(t)}async function cb(t,e){const r=ve(t);r.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const n=Ei(r);r.L_.add(3),await il(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Su(r)}async function y0(t,e){const r=ve(t);e?(r.L_.delete(2),await Su(r)):e||(r.L_.add(2),await il(r),r.q_.set("Unknown"))}function al(t){return t.K_||(t.K_=function(r,n,s){const A=ve(r);return A.w_(),new Yj(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:nD.bind(null,t),Ro:sD.bind(null,t),mo:AD.bind(null,t),d_:iD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Cx(t)?bx(t):t.q_.set("Unknown")):(await t.K_.stop(),y2(t))})),t.K_}function gi(t){return t.U_||(t.U_=function(r,n,s){const A=ve(r);return A.w_(),new Zj(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:lD.bind(null,t),mo:dD.bind(null,t),f_:cD.bind(null,t),g_:uD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ol(t)):(await t.U_.stop(),t.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,r,n,s,A){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=A,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,A){const i=Date.now()+n,a=new _x(e,r,i,s,A);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ll(t,e){if(hr("AsyncQueue",`${e}: ${t}`),_i(t))return new le(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.comparator=e?(r,n)=>e(r,n)||_e.comparator(r.key,n.key):(r,n)=>_e.comparator(r.key,n.key),this.keyedMap=Zl(),this.sortedSet=new Vt(this.comparator)}static emptySet(e){return new ya(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ya)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ya;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.W_=new Vt(_e.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):je():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ga{constructor(e,r,n,s,A,i,a,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,A){const i=[];return r.forEach(a=>{i.push({type:0,doc:a})}),new Ga(e,r,ya.emptySet(r),i,n,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class fD{constructor(){this.queries=db(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=ve(r),A=s.queries;s.queries=db(),A.forEach((i,a)=>{for(const l of a.j_)l.onError(n)})})(this,new le(X.ABORTED,"Firestore shutting down"))}}function db(){return new uA(t=>w1(t),_u)}async function Ix(t,e){const r=ve(t);let n=3;const s=e.query;let A=r.queries.get(s);A?!A.H_()&&e.J_()&&(n=2):(A=new hD,n=e.J_()?0:1);try{switch(n){case 0:A.z_=await r.onListen(s,!0);break;case 1:A.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const a=ll(i,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(a)}r.queries.set(s,A),A.j_.push(e),e.Z_(r.onlineState),A.z_&&e.X_(A.z_)&&Tx(r)}async function Ex(t,e){const r=ve(t),n=e.query;let s=3;const A=r.queries.get(n);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function gD(t,e){const r=ve(t);let n=!1;for(const s of e){const A=s.query,i=r.queries.get(A);if(i){for(const a of i.j_)a.X_(s)&&(n=!0);i.z_=s}}n&&Tx(r)}function pD(t,e,r){const n=ve(t),s=n.queries.get(e);if(s)for(const A of s.j_)A.onError(r);n.queries.delete(e)}function Tx(t){t.Y_.forEach(e=>{e.next()})}var v0,hb;(hb=v0||(v0={})).ea="default",hb.Cache="cache";class kx{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Ga(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==v0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.serializer=e}Es(e){return Is(this.serializer,e)}ds(e){return e.metadata.exists?V1(this.serializer,e.document,!1):zt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return fr(e)}}class wD{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=C2(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=ft.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new fb(this.serializer);for(const s of e)if(s.metadata.queries){const A=n.Es(s.metadata.name);for(const i of s.metadata.queries){const a=(r.get(i)||nt()).add(A);r.set(i,a)}}return r}async complete(){const e=await zj(this.localStore,new fb(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await $j(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function C2(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.key=e}}class I2{constructor(e){this.key=e}}class E2{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=nt(),this.mutatedKeys=nt(),this.Aa=y1(e),this.Ra=new ya(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new ub,s=r?r.Ra:this.Ra;let A=r?r.mutatedKeys:this.mutatedKeys,i=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=Iu(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;f&&p?f.data.isEqual(p.data)?y!==v&&(n.track({type:3,doc:p}),E=!0):this.ga(f,p)||(n.track({type:2,doc:p}),E=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!f&&p?(n.track({type:0,doc:p}),E=!0):f&&!p&&(n.track({type:1,doc:f}),E=!0,(l||c)&&(a=!0)),E&&(p?(i=i.add(p),A=v?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:a,mutatedKeys:A}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(p,y){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je()}};return v(p)-v(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const a=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,i.length!==0||c?{snapshot:new Ga(this.query,e.Ra,A,i,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ub,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=nt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new I2(n))}),this.da.forEach(n=>{e.has(n)||r.push(new _2(n))}),r}ba(e){this.Ta=e.Ts,this.da=nt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Ga.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xD{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class yD{constructor(e){this.key=e,this.va=!1}}class vD{constructor(e,r,n,s,A,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new uA(a=>w1(a),_u),this.Ma=new Map,this.xa=new Set,this.Oa=new Vt(_e.comparator),this.Na=new Map,this.La=new gx,this.Ba={},this.ka=new Map,this.qa=po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BD(t,e,r=!0){const n=fg(t);let s;const A=n.Fa.get(e);return A?(n.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await T2(n,e,r,!0),s}async function bD(t,e){const r=fg(t);await T2(r,e,!0,!1)}async function T2(t,e,r,n){const s=await Ha(t.localStore,sn(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,r);let a;return n&&(a=await Fx(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&hg(t.remoteStore,s),a}async function Fx(t,e,r,n,s){t.Ka=(h,f,p)=>async function(v,E,B,x){let _=E.view.ma(B);_.ns&&(_=await hf(v.localStore,E.query,!1).then(({documents:w})=>E.view.ma(w,_)));const S=x&&x.targetChanges.get(E.targetId),U=x&&x.targetMismatches.get(E.targetId)!=null,N=E.view.applyChanges(_,v.isPrimaryClient,S,U);return B0(v,E.targetId,N.wa),N.snapshot}(t,h,f,p);const A=await hf(t.localStore,e,!0),i=new E2(e,A.Ts),a=i.ma(A.documents),l=ku.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(a,t.isPrimaryClient,l);B0(t,r,c.wa);const d=new xD(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function CD(t,e,r){const n=ve(t),s=n.Fa.get(e),A=n.Ma.get(s.targetId);if(A.length>1)return n.Ma.set(s.targetId,A.filter(i=>!_u(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Va(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Ka(n.remoteStore,s.targetId),za(n,s.targetId)}).catch(Ci)):(za(n,s.targetId),await Va(n.localStore,s.targetId,!0))}async function _D(t,e){const r=ve(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ka(r.remoteStore,n.targetId))}async function ID(t,e,r){const n=Nx(t);try{const s=await function(i,a){const l=ve(i),c=er.now(),d=a.reduce((p,y)=>p.add(y.key),nt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=Cn(),v=nt();return l.cs.getEntries(p,d).next(E=>{y=E,y.forEach((B,x)=>{x.isValidDocument()||(v=v.add(B))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(E=>{h=E;const B=[];for(const x of a){const _=YR(x,h.get(x.key).overlayedDocument);_!=null&&B.push(new dA(x.key,_,o1(_.value.mapValue),Zt.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,B,a)}).next(E=>{f=E;const B=E.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(p,E.batchId,B)})}).then(()=>({batchId:f.batchId,changes:B1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,a,l){let c=i.Ba[i.currentUser.toKey()];c||(c=new Vt(Ye)),c=c.insert(a,l),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await hA(n,s.changes),await ol(n.remoteStore)}catch(s){const A=ll(s,"Failed to persist write");r.reject(A)}}async function k2(t,e){const r=ve(t);try{const n=await Kj(r.localStore,e);e.targetChanges.forEach((s,A)=>{const i=r.Na.get(A);i&&(He(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?He(i.va):s.removedDocuments.size>0&&(He(i.va),i.va=!1))}),await hA(r,n,e)}catch(n){await Ci(n)}}function gb(t,e,r){const n=ve(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((A,i)=>{const a=i.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const l=ve(i);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&Tx(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ED(t,e,r){const n=ve(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),A=s&&s.key;if(A){let i=new Vt(_e.comparator);i=i.insert(A,zt.newNoDocument(A,$e.min()));const a=nt().add(A),l=new Tu($e.min(),new Map,new Vt(Ye),i,a);await k2(n,l),n.Oa=n.Oa.remove(A),n.Na.delete(e),Qx(n)}else await Va(n.localStore,e,!1).then(()=>za(n,e,r)).catch(Ci)}async function TD(t,e){const r=ve(t),n=e.batch.batchId;try{const s=await Vj(r.localStore,e);Ux(r,n,null),Sx(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await hA(r,s)}catch(s){await Ci(s)}}async function kD(t,e,r){const n=ve(t);try{const s=await function(i,a){const l=ve(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(He(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(n.localStore,e);Ux(n,e,r),Sx(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await hA(n,s)}catch(s){await Ci(s)}}async function FD(t,e){const r=ve(t);Ei(r.remoteStore)||ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const a=ve(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=ll(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Sx(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Ux(t,e,r){const n=ve(t);let s=n.Ba[n.currentUser.toKey()];if(s){const A=s.get(e);A&&(r?A.reject(r):A.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function za(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||F2(t,n)})}function F2(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Ka(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Qx(t))}function B0(t,e,r){for(const n of r)n instanceof _2?(t.La.addReference(n.key,e),SD(t,n)):n instanceof I2?(ue("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||F2(t,n.key)):je()}function SD(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ue("SyncEngine","New document in limbo: "+r),t.xa.add(n),Qx(t))}function Qx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new _e(ft.fromString(e)),n=t.qa.next();t.Na.set(n,new yD(r)),t.Oa=t.Oa.insert(r,n),hg(t.remoteStore,new Gs(sn(nl(r.path)),n,"TargetPurposeLimboResolution",Bn.oe))}}async function hA(t,e,r){const n=ve(t),s=[],A=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((a,l)=>{i.push(n.Ka(l,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=xx.Wi(l.targetId,c);A.push(h)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(l,c){const d=ve(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>H.forEach(c,f=>H.forEach(f.$i,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>H.forEach(f.Ui,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!_i(h))throw h;ue("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.os.get(f),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,v)}}}(n.localStore,A))}async function UD(t,e){const r=ve(t);if(!r.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const n=await c2(r.localStore,e);r.currentUser=e,function(A,i){A.ka.forEach(a=>{a.forEach(l=>{l.reject(new le(X.CANCELLED,i))})}),A.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await hA(r,n.hs)}}function QD(t,e){const r=ve(t),n=r.Na.get(e);if(n&&n.va)return nt().add(n.key);{let s=nt();const A=r.Ma.get(e);if(!A)return s;for(const i of A){const a=r.Fa.get(i);s=s.unionWith(a.view.Va)}return s}}async function ND(t,e){const r=ve(t),n=await hf(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&B0(r,e.targetId,s.wa),s}async function RD(t,e){const r=ve(t);return f2(r.localStore,e).then(n=>hA(r,n))}async function jD(t,e,r,n){const s=ve(t),A=await function(a,l){const c=ve(a),d=ve(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):H.resolve(null)))}(s.localStore,e);A!==null?(r==="pending"?await ol(s.remoteStore):r==="acknowledged"||r==="rejected"?(Ux(s,e,n||null),Sx(s,e),function(a,l){ve(ve(a).mutationQueue).On(l)}(s.localStore,e)):je(),await hA(s,A)):ue("SyncEngine","Cannot apply mutation batch with id: "+e)}async function DD(t,e){const r=ve(t);if(fg(r),Nx(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await pb(r,n.toArray());r.Qa=!0,await y0(r.remoteStore,!0);for(const A of s)hg(r.remoteStore,A)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((A,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then(()=>(za(r,i),Va(r.localStore,i,!0))),Ka(r.remoteStore,i)}),await s,await pb(r,n),function(i){const a=ve(i);a.Na.forEach((l,c)=>{Ka(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Vt(_e.comparator)}(r),r.Qa=!1,await y0(r.remoteStore,!1)}}async function pb(t,e,r){const n=ve(t),s=[],A=[];for(const i of e){let a;const l=n.Ma.get(i);if(l&&l.length!==0){a=await Ha(n.localStore,sn(l[0]));for(const c of l){const d=n.Fa.get(c),h=await ND(n,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await h2(n.localStore,i);a=await Ha(n.localStore,c),await Fx(n,S2(c),i,!1,a.resumeToken)}s.push(a)}return n.Ca.d_(A),s}function S2(t){return g1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function PD(t){return function(r){return ve(ve(r).persistence).Qi()}(ve(t).localStore)}async function LD(t,e,r,n){const s=ve(t);if(s.Qa)return void ue("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(r){case"current":case"not-current":{const i=await f2(s.localStore,x1(A[0])),a=Tu.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ir.EMPTY_BYTE_STRING);await hA(s,i,a);break}case"rejected":await Va(s.localStore,e,!0),za(s,e,n);break;default:je()}}async function MD(t,e,r){const n=fg(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){ue("SyncEngine","Adding an already active target "+s);continue}const A=await h2(n.localStore,s),i=await Ha(n.localStore,A);await Fx(n,S2(A),i.targetId,!1,i.resumeToken),hg(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await Va(n.localStore,s,!1).then(()=>{Ka(n.remoteStore,s),za(n,s)}).catch(Ci)}}function fg(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ED.bind(null,e),e.Ca.d_=gD.bind(null,e.eventManager),e.Ca.$a=pD.bind(null,e.eventManager),e}function Nx(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kD.bind(null,e),e}function OD(t,e,r){const n=ve(t);(async function(A,i,a){try{const l=await i.getMetadata();if(await function(p,y){const v=ve(p),E=fr(y.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",B=>v.Gr.getBundleMetadata(B,y.id)).then(B=>!!B&&B.createTime.compareTo(E)>=0)}(A.localStore,l))return await i.close(),a._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(C2(l));const c=new wD(l,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&a._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await hA(A,h.Ia,void 0),await function(p,y){const v=ve(p);return v.persistence.runTransaction("Save bundle","readwrite",E=>v.Gr.saveBundleMetadata(E,y))}(A.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return jn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class pi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return l2(this.persistence,new a2,e.initialUser,this.serializer)}Ga(e){return new px(dg.Zr,this.serializer)}Wa(e){return new p2}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pi.provider={build:()=>new pi};class HD extends pi{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){He(this.persistence.referenceDelegate instanceof df);const n=this.persistence.referenceDelegate.garbageCollector;return new n2(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Zr.withCacheSize(this.cacheSizeBytes):Zr.DEFAULT;return new px(n=>df.Zr(n,r),this.serializer)}}class Rx extends pi{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Nx(this.Ja.syncEngine),await ol(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return l2(this.persistence,new a2,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new n2(n,e.asyncQueue,r)}Ha(e,r){const n=new lR(r,this.persistence);return new aR(e.asyncQueue,n)}Ga(e){const r=wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Zr.withCacheSize(this.cacheSizeBytes):Zr.DEFAULT;return new mx(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,m2(),mh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new p2}}class U2 extends Rx{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Tp&&(this.sharedClientState.syncEngine={no:jD.bind(null,r),ro:LD.bind(null,r),io:MD.bind(null,r),Qi:PD.bind(null,r),eo:RD.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await DD(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=m2();if(!Tp.D(r))throw new le(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=wx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tp(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class mi{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>gb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=UD.bind(null,this.syncEngine),await y0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fD}()}createDatastore(e){const r=Fu(e.databaseInfo.databaseId),n=function(A){return new Jj(A)}(e.databaseInfo);return function(A,i,a,l){return new eD(A,i,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,A,i,a){return new rD(n,s,A,i,a)}(this.localStore,this.datastore,e.asyncQueue,r=>gb(this.syncEngine,r,0),function(){return lb.D()?new lb:new Wj}())}createSyncEngine(e,r){return function(s,A,i,a,l,c,d){const h=new vD(s,A,i,a,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const A=ve(s);ue("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await il(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}mi.provider={build:()=>new mi};function mb(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Nr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new mD(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,A){const i=ve(s),a={documents:A.map(h=>Au(i.serializer,h))},l=await i.Lo("BatchGetDocuments",i.serializer.databaseId,ft.emptyPath(),a,A.length),c=new Map;l.forEach(h=>{const f=oj(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());He(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Al(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=_e.fromPath(n);this.mutations.push(new ix(s,this.precondition(s)))}),await async function(n,s){const A=ve(n),i={writes:s.map(a=>iu(A.serializer,a))};await A.Mo("Commit",A.serializer.databaseId,ft.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw je();r=$e.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new le(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual($e.min())?Zt.exists(!1):Zt.updateTime(r):Zt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($e.min()))throw new le(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(r)}return Zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,r,n,s,A){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=A,this._u=n.maxAttempts,this.t_=new vx(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new KD(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!bu(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!Q1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,r,n,s,A){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Ur.UNAUTHENTICATED,this.clientId=Yw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(n,async i=>{ue("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ue("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ll(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Fp(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await c2(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wb(t,e){t.asyncQueue.verifyOperationInProgress();const r=await jx(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>cb(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>cb(e.remoteStore,s)),t._onlineComponents=e}async function jx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===X.FAILED_PRECONDITION||s.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;jn("Error using user provided cache. Falling back to memory cache: "+r),await Fp(t,new pi)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await Fp(t,new pi);return t._offlineComponents}async function pg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await wb(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await wb(t,new mi))),t._onlineComponents}function Q2(t){return jx(t).then(e=>e.persistence)}function cl(t){return jx(t).then(e=>e.localStore)}function N2(t){return pg(t).then(e=>e.remoteStore)}function Dx(t){return pg(t).then(e=>e.syncEngine)}function R2(t){return pg(t).then(e=>e.datastore)}async function $a(t){const e=await pg(t),r=e.eventManager;return r.onListen=BD.bind(null,e.syncEngine),r.onUnlisten=CD.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=_D.bind(null,e.syncEngine),r}function $D(t){return t.asyncQueue.enqueue(async()=>{const e=await Q2(t),r=await N2(t);return e.setNetworkEnabled(!0),function(s){const A=ve(s);return A.L_.delete(0),Su(A)}(r)})}function WD(t){return t.asyncQueue.enqueue(async()=>{const e=await Q2(t),r=await N2(t);return e.setNetworkEnabled(!1),async function(s){const A=ve(s);A.L_.add(0),await il(A),A.q_.set("Offline")}(r)})}function qD(t,e){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await function(c,d){const h=ve(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new le(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=ll(a,`Failed to get document '${A} from cache`);i.reject(l)}}(await cl(t),e,r)),r.promise}function j2(t,e,r={}){const n=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,l,c){const d=new gg({next:f=>{d.Za(),i.enqueueAndForget(()=>Ex(A,h));const p=f.docs.has(a);!p&&f.fromCache?c.reject(new le(X.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new le(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new kx(nl(a.path),d,{includeMetadataChanges:!0,_a:!0});return Ix(A,h)}(await $a(t),t.asyncQueue,e,r,n)),n.promise}function XD(t,e){const r=new Nr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const a=await hf(s,A,!0),l=new E2(A,a.Ts),c=l.ma(a.documents),d=l.applyChanges(c,!1);i.resolve(d.snapshot)}catch(a){const l=ll(a,`Failed to execute query '${A} against cache`);i.reject(l)}}(await cl(t),e,r)),r.promise}function D2(t,e,r={}){const n=new Nr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,a,l,c){const d=new gg({next:f=>{d.Za(),i.enqueueAndForget(()=>Ex(A,h)),f.fromCache&&l.source==="server"?c.reject(new le(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new kx(a,d,{includeMetadataChanges:!0,_a:!0});return Ix(A,h)}(await $a(t),t.asyncQueue,e,r,n)),n.promise}function JD(t,e,r){const n=new Nr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await R2(t);n.resolve(async function(i,a,l){var c;const d=ve(i),{request:h,ut:f,parent:p}=G1(d.serializer,p1(a),l);d.connection.Fo||delete h.parent;const y=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,p,h,1)).filter(E=>!!E.result);He(y.length===1);const v=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(v).reduce((E,B)=>(E[f[B]]=v[B],E),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function YD(t,e){const r=new gg(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){ve(s).Y_.add(A),A.next()}(await $a(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){ve(s).Y_.delete(A)}(await $a(t),r))}}function ZD(t,e,r,n){const s=function(i,a){let l;return l=typeof i=="string"?R1().encode(i):i,function(d,h){return new VD(d,h)}(function(d,h){if(d instanceof Uint8Array)return mb(d,h);if(d instanceof ArrayBuffer)return mb(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(r,Fu(e));t.asyncQueue.enqueueAndForget(async()=>{OD(await Dx(t),s,n)})}function eP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const A=ve(n);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await cl(t),e))}function tP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const A=ve(n),i=A.indexManager,a=[];return A.persistence.runTransaction("Configure indexes","readwrite",l=>i.getFieldIndexes(l).next(c=>function(h,f,p,y,v){h=[...h],f=[...f],h.sort(p),f.sort(p);const E=h.length,B=f.length;let x=0,_=0;for(;x<B&&_<E;){const S=p(h[_],f[x]);S<0?v(h[_++]):S>0?y(f[x++]):(x++,_++)}for(;x<B;)y(f[x++]);for(;_<E;)v(h[_++])}(c,s,sR,d=>{a.push(i.addFieldIndex(l,d))},d=>{a.push(i.deleteFieldIndex(l,d))})).next(()=>H.waitFor(a)))}(await cl(t),e))}function rP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){ve(n).ss.zi=s}(await cl(t),e))}function nP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=ve(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",A=>s.deleteAllFieldIndexes(A))}(await cl(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e,r){if(!r)throw new le(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function L2(t,e,r,n){if(e===!0&&n===!0)throw new le(X.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function yb(t){if(!_e.isDocumentKey(t))throw new le(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vb(t){if(_e.isDocumentKey(t))throw new le(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":je()}function at(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=mg(t);throw new le(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function M2(t,e){if(e<=0)throw new le(X.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new le(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P2((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new le(X.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uu{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new VE;switch(n.type){case"firstParty":return new Z4(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new le(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=xb.get(r);n&&(ue("ComponentProvider","Removing Datastore"),xb.delete(r),n.terminate())}(this),Promise.resolve()}}function O2(t,e,r,n={}){var s;const A=(t=at(t,Uu))._getSettings(),i=`${e}:${r}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=Ur.MOCK_USER;else{a=BN(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new le(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ur(c)}t._authCredentials=new X4(new HE(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class lr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class cs extends Rr{constructor(e,r,n){super(e,r,nl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new _e(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function b0(t,e,...r){if(t=Lt(t),Px("collection","path",e),t instanceof Uu){const n=ft.fromString(e,...r);return vb(n),new cs(t,null,n)}{if(!(t instanceof lr||t instanceof cs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ft.fromString(e,...r));return vb(n),new cs(t.firestore,null,n)}}function sP(t,e){if(t=at(t,Uu),Px("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rr(t,null,function(n){return new cA(ft.emptyPath(),n)}(e))}function ws(t,e,...r){if(t=Lt(t),arguments.length===1&&(e=Yw.newId()),Px("doc","path",e),t instanceof Uu){const n=ft.fromString(e,...r);return yb(n),new lr(t,null,new _e(n))}{if(!(t instanceof lr||t instanceof cs))throw new le(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ft.fromString(e,...r));return yb(n),new lr(t.firestore,t instanceof cs?t.converter:null,new _e(n))}}function AP(t,e){return t=Lt(t),e=Lt(e),(t instanceof lr||t instanceof cs)&&(e instanceof lr||e instanceof cs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Lx(t,e){return t=Lt(t),e=Lt(e),t instanceof Rr&&e instanceof Rr&&t.firestore===e.firestore&&_u(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vx(this,"async_queue_retry"),this.Vu=()=>{const n=mh();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=mh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=mh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_i(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(n);throw hr("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=_x.createAndSchedule(this,e,r,n,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&je()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function C0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const A of n)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class H2{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=-1;class Nt extends Uu{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new bb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bb(e),this._firestoreClient=void 0,await e}}}function oP(t,e,r){r||(r="(default)");const n=Bu(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),A=n.getOptions(r);if(li(A,e))return s;throw new le(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new le(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function V2(t,e){const r=typeof t=="object"?t:Xw(),n=typeof t=="string"?t:e||"(default)",s=Bu(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const A=yN("firestore");A&&O2(s,...A)}return s}function tr(t){if(t._terminated)throw new le(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K2(t),t._firestoreClient}function K2(t){var e,r,n;const s=t._freezeSettings(),A=function(a,l,c,d){return new SR(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,P2(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new zD(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function aP(t,e){jn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return G2(t,mi.provider,{build:n=>new Rx(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function lP(t){jn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();G2(t,mi.provider,{build:r=>new U2(r,e.cacheSizeBytes)})}function G2(t,e,r){if((t=at(t,Nt))._firestoreClient||t._terminated)throw new le(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new le(X.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},K2(t)}function cP(t){if(t._initialized&&!t._terminated)throw new le(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Nr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!_s.D())return Promise.resolve();const s=n+"main";await _s.delete(s)}(wx(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function uP(t){return function(r){const n=new Nr;return r.asyncQueue.enqueueAndForget(async()=>FD(await Dx(r),n)),n.promise}(tr(t=at(t,Nt)))}function dP(t){return $D(tr(t=at(t,Nt)))}function hP(t){return WD(tr(t=at(t,Nt)))}function fP(t){return Q4(t.app,"firestore",t._databaseId.database),t._delete()}function gP(t,e){const r=tr(t=at(t,Nt)),n=new H2;return ZD(r,t._databaseId,e,n),n}function pP(t,e){return eP(tr(t=at(t,Nt)),e).then(r=>r?new Rr(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class z2{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(ir.fromBase64String(e))}catch(r){throw new le(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new wi(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new le(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function mP(){return new Ti("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new le(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new le(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let A=0;A<n.length;++A)if(n[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=/^__.*__$/;class xP{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new dA(e,this.data,this.fieldMask,r,this.fieldTransforms):new sl(e,this.data,r,this.fieldTransforms)}}class $2{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new dA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function W2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je()}}class xg{constructor(e,r,n,s,A,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(W2(this.Cu)&&wP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class yP{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Fu(e)}Qu(e,r,n,s=!1){return new xg({Cu:e,methodName:r,qu:n,path:$t.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Co(t){const e=t._freezeSettings(),r=Fu(t._databaseId);return new yP(t._databaseId,!!e.ignoreUndefinedProperties,r)}function yg(t,e,r,n,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,r,s);zx("Data must be an object, but it was:",i,n);const a=J2(n,i);let l,c;if(A.merge)l=new bn(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=ou(e,h,r);if(!i.contains(f))throw new le(X.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Z2(d,f)||d.push(f)}l=new bn(d),c=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=i.fieldTransforms;return new xP(new Mr(a),l,c)}class Nu extends ki{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nu}}function q2(t,e,r){return new xg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mx extends ki{_toFieldTransform(e){return new Eu(e.path,new La)}isEqual(e){return e instanceof Mx}}class Ox extends ki{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=q2(this,e,!0),n=this.Ku.map(A=>_o(A,r)),s=new uo(n);return new Eu(e.path,s)}isEqual(e){return e instanceof Ox&&li(this.Ku,e.Ku)}}class Hx extends ki{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=q2(this,e,!0),n=this.Ku.map(A=>_o(A,r)),s=new ho(n);return new Eu(e.path,s)}isEqual(e){return e instanceof Hx&&li(this.Ku,e.Ku)}}class Vx extends ki{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Ma(e.serializer,_1(e.serializer,this.$u));return new Eu(e.path,r)}isEqual(e){return e instanceof Vx&&this.$u===e.$u}}function Kx(t,e,r,n){const s=t.Qu(1,e,r);zx("Data must be an object, but it was:",s,n);const A=[],i=Mr.empty();Ii(n,(l,c)=>{const d=vg(e,l,r);c=Lt(c);const h=s.Nu(d);if(c instanceof Nu)A.push(d);else{const f=_o(c,h);f!=null&&(A.push(d),i.set(d,f))}});const a=new bn(A);return new $2(i,a,s.fieldTransforms)}function Gx(t,e,r,n,s,A){const i=t.Qu(1,e,r),a=[ou(e,n,r)],l=[s];if(A.length%2!=0)throw new le(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)a.push(ou(e,A[f])),l.push(A[f+1]);const c=[],d=Mr.empty();for(let f=a.length-1;f>=0;--f)if(!Z2(c,a[f])){const p=a[f];let y=l[f];y=Lt(y);const v=i.Nu(p);if(y instanceof Nu)c.push(p);else{const E=_o(y,v);E!=null&&(c.push(p),d.set(p,E))}}const h=new bn(c);return new $2(d,h,i.fieldTransforms)}function X2(t,e,r,n=!1){return _o(r,t.Qu(n?4:3,e))}function _o(t,e){if(Y2(t=Lt(t)))return zx("Unsupported field value:",e,t),J2(t,e);if(t instanceof ki)return function(n,s){if(!W2(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const A=n._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const A=[];let i=0;for(const a of n){let l=_o(a,s.Lu(i));l==null&&(l={nullValue:"NULL_VALUE"}),A.push(l),i++}return{arrayValue:{values:A}}}(t,e)}return function(n,s){if((n=Lt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _1(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const A=er.fromDate(n);return{timestampValue:Oa(s.serializer,A)}}if(n instanceof er){const A=new er(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Oa(s.serializer,A)}}if(n instanceof wg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wi)return{bytesValue:P1(s.serializer,n._byteString)};if(n instanceof lr){const A=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:ux(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Qu)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ax(a.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${mg(n)}`)}(t,e)}function J2(t,e){const r={};return n1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(t,(n,s)=>{const A=_o(s,e.Mu(n));A!=null&&(r[n]=A)}),{mapValue:{fields:r}}}function Y2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof er||t instanceof wg||t instanceof wi||t instanceof lr||t instanceof ki||t instanceof Qu)}function zx(t,e,r){if(!Y2(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=mg(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function ou(t,e,r){if((e=Lt(e))instanceof Ti)return e._internalPath;if(typeof e=="string")return vg(t,e);throw mf("Field path arguments must be of type string or ",t,!1,void 0,r)}const vP=new RegExp("[~\\*/\\[\\]]");function vg(t,e,r){if(e.search(vP)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Ti(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function mf(t,e,r,n,s){const A=n&&!n.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(A||i)&&(l+=" (found",A&&(l+=` in field ${n}`),i&&(l+=` in document ${s}`),l+=")"),new le(X.INVALID_ARGUMENT,a+t+l)}function Z2(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,r,n,s,A){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class BP extends au{data(){return super.data()}}function Bg(t,e){return typeof e=="string"?vg(t,e):e instanceof Ti?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $x{}class ul extends $x{}function _0(t,e,...r){let n=[];e instanceof $x&&n.push(e),n=n.concat(r),function(A){const i=A.filter(l=>l instanceof Io).length,a=A.filter(l=>l instanceof dl).length;if(i>1||i>0&&a>0)throw new le(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class dl extends ul{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new dl(e,r,n)}_apply(e){const r=this._parse(e);return rT(e._query,r),new Rr(e.firestore,e.converter,u0(e._query,r))}_parse(e){const r=Co(e.firestore);return function(A,i,a,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new le(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){_b(h,d);const p=[];for(const y of h)p.push(Cb(l,A,y));f={arrayValue:{values:p}}}else f=Cb(l,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||_b(h,d),f=X2(a,i,h,d==="in"||d==="not-in");return gt.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function bP(t,e,r){const n=e,s=Bg("where",t);return dl._create(s,n,r)}class Io extends $x{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Io(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:kt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,A){let i=s;const a=A.getFlattenedFilters();for(const l of a)rT(i,l),i=u0(i,l)}(e._query,r),new Rr(e.firestore,e.converter,u0(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function CP(...t){return t.forEach(e=>nT("or",e)),Io._create("or",t)}function _P(...t){return t.forEach(e=>nT("and",e)),Io._create("and",t)}class bg extends ul{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new bg(e,r)}_apply(e){const r=function(s,A,i){if(s.startAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new su(A,i)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new cA(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function IP(t,e="asc"){const r=e,n=Bg("orderBy",t);return bg._create(n,r)}class Ru extends ul{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Ru(e,r,n)}_apply(e){return new Rr(e.firestore,e.converter,of(e._query,this._limit,this._limitType))}}function EP(t){return M2("limit",t),Ru._create("limit",t,"F")}function TP(t){return M2("limitToLast",t),Ru._create("limitToLast",t,"L")}class ju extends ul{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new ju(e,r,n)}_apply(e){const r=tT(e,this.type,this._docOrFields,this._inclusive);return new Rr(e.firestore,e.converter,function(s,A){return new cA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,r))}}function kP(...t){return ju._create("startAt",t,!0)}function FP(...t){return ju._create("startAfter",t,!1)}class Du extends ul{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Du(e,r,n)}_apply(e){const r=tT(e,this.type,this._docOrFields,this._inclusive);return new Rr(e.firestore,e.converter,function(s,A){return new cA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,r))}}function SP(...t){return Du._create("endBefore",t,!1)}function UP(...t){return Du._create("endAt",t,!0)}function tT(t,e,r,n){if(r[0]=Lt(r[0]),r[0]instanceof au)return function(A,i,a,l,c){if(!l)throw new le(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of xa(A))if(h.field.isKeyField())d.push(lo(i,l.key));else{const f=l.data.field(h.field);if(sg(f))throw new le(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=h.field.canonicalString();throw new le(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(f)}return new fi(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Co(t.firestore);return function(i,a,l,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new le(X.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let y=0;y<d.length;y++){const v=d[y];if(f[y].field.isKeyField()){if(typeof v!="string")throw new le(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!nx(i)&&v.indexOf("/")!==-1)throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const E=i.path.child(ft.fromString(v));if(!_e.isDocumentKey(E))throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const B=new _e(E);p.push(lo(a,B))}else{const E=X2(l,c,v);p.push(E)}}return new fi(p,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function Cb(t,e,r){if(typeof(r=Lt(r))=="string"){if(r==="")throw new le(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nx(e)&&r.indexOf("/")!==-1)throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ft.fromString(r));if(!_e.isDocumentKey(n))throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return lo(t,new _e(n))}if(r instanceof lr)return lo(t,r._key);throw new le(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mg(r)}.`)}function _b(t,e){if(!Array.isArray(t)||t.length===0)throw new le(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rT(t,e){const r=function(s,A){for(const i of s)for(const a of i.getFlattenedFilters())if(A.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function nT(t,e){if(!(e instanceof dl||e instanceof Io))throw new le(X.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Wx{convertValue(e,r="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(nA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw je()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ii(e,(s,A)=>{n[s]=this.convertValue(A,r)}),n}convertVectorValue(e){var r,n,s;const A=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>Jt(i.doubleValue));return new Qu(A)}convertGeoPoint(e){return new wg(Jt(e.latitude),Jt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ag(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const r=rA(e);return new er(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ft.fromString(e);He(q1(n));const s=new ui(n.get(1),n.get(3)),A=new _e(n.popFirst(5));return s.isEqual(r)||hr(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class QP extends Wx{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){return new Wa("sum",ou("sum",t))}function RP(t){return new Wa("avg",ou("average",t))}function sT(){return new Wa("count")}function jP(t,e){var r,n;return t instanceof Wa&&e instanceof Wa&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function DP(t,e){return Lx(t.query,e.query)&&li(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mo extends au{constructor(e,r,n,s,A,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Cc extends mo{data(e={}){return super.data(e)}}class wo{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new OA(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Cc(this._firestore,this._userDataWriter,n.key,n,new OA(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new le(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const l=new Cc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new OA(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>A||a.type!==3).map(a=>{const l=new Cc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new OA(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:PP(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function PP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je()}}function LP(t,e){return t instanceof mo&&e instanceof mo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof wo&&e instanceof wo&&t._firestore===e._firestore&&Lx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){t=at(t,lr);const e=at(t.firestore,Nt);return j2(tr(e),t._key).then(r=>qx(e,t,r))}class Fi extends Wx{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,r)}}function OP(t){t=at(t,lr);const e=at(t.firestore,Nt),r=tr(e),n=new Fi(e);return qD(r,t._key).then(s=>new mo(e,n,t._key,s,new OA(s!==null&&s.hasLocalMutations,!0),t.converter))}function HP(t){t=at(t,lr);const e=at(t.firestore,Nt);return j2(tr(e),t._key,{source:"server"}).then(r=>qx(e,t,r))}function AT(t){t=at(t,Rr);const e=at(t.firestore,Nt),r=tr(e),n=new Fi(e);return eT(t._query),D2(r,t._query).then(s=>new wo(e,n,t,s))}function VP(t){t=at(t,Rr);const e=at(t.firestore,Nt),r=tr(e),n=new Fi(e);return XD(r,t._query).then(s=>new wo(e,n,t,s))}function KP(t){t=at(t,Rr);const e=at(t.firestore,Nt),r=tr(e),n=new Fi(e);return D2(r,t._query,{source:"server"}).then(s=>new wo(e,n,t,s))}function wh(t,e,r){t=at(t,lr);const n=at(t.firestore,Nt),s=Cg(t.converter,e,r);return hl(n,[yg(Co(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Zt.none())])}function GP(t,e,r,...n){t=at(t,lr);const s=at(t.firestore,Nt),A=Co(s);let i;return i=typeof(e=Lt(e))=="string"||e instanceof Ti?Gx(A,"updateDoc",t._key,e,r,n):Kx(A,"updateDoc",t._key,e),hl(s,[i.toMutation(t._key,Zt.exists(!0))])}function iT(t){return hl(at(t.firestore,Nt),[new Al(t._key,Zt.none())])}function zP(t,e){const r=at(t.firestore,Nt),n=ws(t),s=Cg(t.converter,e);return hl(r,[yg(Co(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Zt.exists(!1))]).then(()=>n)}function xh(t,...e){var r,n,s;t=Lt(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||C0(e[i])||(A=e[i],i++);const a={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(C0(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof lr)c=at(t.firestore,Nt),d=nl(t._key.path),l={next:h=>{e[i]&&e[i](qx(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=at(t,Rr);c=at(h.firestore,Nt),d=h._query;const f=new Fi(c);l={next:p=>{e[i]&&e[i](new wo(c,f,h,p))},error:e[i+1],complete:e[i+2]},eT(t._query)}return function(f,p,y,v){const E=new gg(v),B=new kx(p,E,y);return f.asyncQueue.enqueueAndForget(async()=>Ix(await $a(f),B)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>Ex(await $a(f),B))}}(tr(c),d,a,l)}function $P(t,e){return YD(tr(t=at(t,Nt)),C0(e)?e:{next:e})}function hl(t,e){return function(n,s){const A=new Nr;return n.asyncQueue.enqueueAndForget(async()=>ID(await Dx(n),s,A)),A.promise}(tr(t),e)}function qx(t,e,r){const n=r.docs.get(e._key),s=new Fi(t);return new mo(t,s,e._key,n,new OA(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){return oT(t,{count:sT()})}function oT(t,e){const r=at(t.firestore,Nt),n=tr(r),s=r1(e,(A,i)=>new U1(i,A.aggregateType,A._internalFieldPath));return JD(n,t._query,s).then(A=>function(a,l,c){const d=new Fi(a);return new z2(l,d,c)}(r,t,A))}class qP{constructor(e){this.kind="memory",this._onlineComponentProvider=mi.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=pi.provider}toJSON(){return{kind:this.kind}}}class XP{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=aT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class JP{constructor(){this.kind="memoryEager",this._offlineComponentProvider=pi.provider}toJSON(){return{kind:this.kind}}}class YP{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new HD(e)}}toJSON(){return{kind:this.kind}}}function ZP(){return new JP}function eL(t){return new YP(t==null?void 0:t.cacheSizeBytes)}function tL(t){return new qP(t)}function rL(t){return new XP(t)}class nL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=mi.provider,this._offlineComponentProvider={build:r=>new Rx(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class sL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=mi.provider,this._offlineComponentProvider={build:r=>new U2(r,e==null?void 0:e.cacheSizeBytes)}}}function aT(t){return new nL(t==null?void 0:t.forceOwnership)}function AL(){return new sL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Co(e)}set(e,r,n){this._verifyNotCommitted();const s=UA(e,this._firestore),A=Cg(s.converter,r,n),i=yg(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,Zt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const A=UA(e,this._firestore);let i;return i=typeof(r=Lt(r))=="string"||r instanceof Ti?Gx(this._dataReader,"WriteBatch.update",A._key,r,n,s):Kx(this._dataReader,"WriteBatch.update",A._key,r),this._mutations.push(i.toMutation(A._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=UA(e,this._firestore);return this._mutations=this._mutations.concat(new Al(r._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function UA(t,e){if((t=Lt(t)).firestore!==e)throw new le(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Co(r)}get(r){const n=UA(r,this._firestore),s=new QP(this._firestore);return this._transaction.lookup([n._key]).then(A=>{if(!A||A.length!==1)return je();const i=A[0];if(i.isFoundDocument())return new au(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new au(this._firestore,s,n._key,null,n.converter);throw je()})}set(r,n,s){const A=UA(r,this._firestore),i=Cg(A.converter,n,s),a=yg(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,a),this}update(r,n,s,...A){const i=UA(r,this._firestore);let a;return a=typeof(n=Lt(n))=="string"||n instanceof Ti?Gx(this._dataReader,"Transaction.update",i._key,n,s,A):Kx(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(r){const n=UA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=UA(e,this._firestore),n=new Fi(this._firestore);return super.get(e).then(s=>new mo(this._firestore,n,r._key,s._document,new OA(!1,!1),r.converter))}}function oL(t,e,r){t=at(t,Nt);const n=Object.assign(Object.assign({},iL),r);return function(A){if(A.maxAttempts<1)throw new le(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(A,i,a){const l=new Nr;return A.asyncQueue.enqueueAndForget(async()=>{const c=await R2(A);new GD(A.asyncQueue,c,a,i,l).au()}),l.promise}(tr(t),s=>e(new cT(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(){return new Nu("deleteField")}function lL(){return new Mx("serverTimestamp")}function cL(...t){return new Ox("arrayUnion",t)}function uL(...t){return new Hx("arrayRemove",t)}function dL(t){return new Vx("increment",t)}function hL(t){return new Qu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t){return tr(t=at(t,Nt)),new lT(t,e=>hl(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t,e){const r=tr(t=at(t,Nt));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return jn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(A){const i=typeof A=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new le(X.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(A):A,a=[];if(Array.isArray(i.indexes))for(const l of i.indexes){const c=Ib(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const f=vg("setIndexConfiguration",Ib(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new eo(f,2)):h.order==="ASCENDING"?d.push(new eo(f,0)):h.order==="DESCENDING"&&d.push(new eo(f,1))}a.push(new Ra(Ra.UNKNOWN_ID,c,d,ja.empty()))}return a}(e);return tP(r,n)}function Ib(t,e){if(typeof t[e]!="string")throw new le(X.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function gL(t){var e;t=at(t,Nt);const r=Eb.get(t);if(r)return r;if(((e=tr(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new dT(t);return Eb.set(t,n),n}function pL(t){hT(t,!0)}function mL(t){hT(t,!1)}function wL(t){nP(tr(t._firestore)).then(e=>ue("deleting all persistent cache indexes succeeded")).catch(e=>jn("deleting all persistent cache indexes failed",e))}function hT(t,e){rP(tr(t._firestore),e).then(r=>ue(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>jn(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const Eb=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){var e;const r=(e=tr(at(t.firestore,Nt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:lg(r,sn(t._query))._t}function yL(t,e){var r;const n=r1(e,(A,i)=>new U1(i,A.aggregateType,A._internalFieldPath)),s=(r=tr(at(t.firestore,Nt))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:G1(s,p1(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Xx.instance.onExistenceFilterMismatch(e)}}class Xx{constructor(){this.Uu=new Map}static get instance(){return _d||(_d=new Xx,function(r){if(af)throw new Error("a TestingHooksSpi instance is already set");af=r}(_d)),_d}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let _d=null;(function(e,r=!0){(function(s){rl=s})(tl),Qa(new ao("firestore",(n,{instanceIdentifier:s,options:A})=>{const i=n.getProvider("app").getImmediate(),a=new Nt(new J4(n.getProvider("auth-internal")),new eR(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new le(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ui(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:r},A),a._setSettings(A),a},"PUBLIC").setMultipleInstances(!0)),ri(pB,"4.7.3",e),ri(pB,"4.7.3","esm2017")})();const BL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Wx,AggregateField:Wa,AggregateQuerySnapshot:z2,Bytes:wi,CACHE_SIZE_UNLIMITED:iP,CollectionReference:cs,DocumentReference:lr,DocumentSnapshot:mo,FieldPath:Ti,FieldValue:ki,Firestore:Nt,FirestoreError:le,GeoPoint:wg,LoadBundleTask:H2,PersistentCacheIndexManager:dT,Query:Rr,QueryCompositeFilterConstraint:Io,QueryConstraint:ul,QueryDocumentSnapshot:Cc,QueryEndAtConstraint:Du,QueryFieldFilterConstraint:dl,QueryLimitConstraint:Ru,QueryOrderByConstraint:bg,QuerySnapshot:wo,QueryStartAtConstraint:ju,SnapshotMetadata:OA,Timestamp:er,Transaction:cT,VectorValue:Qu,WriteBatch:lT,_AutoId:Yw,_ByteString:ir,_DatabaseId:ui,_DocumentKey:_e,_EmptyAppCheckTokenProvider:tR,_EmptyAuthCredentialsProvider:VE,_FieldPath:$t,_TestingHooks:vL,_cast:at,_debugAssert:q4,_internalAggregationQueryToProtoRunAggregationQueryRequest:yL,_internalQueryToProtoQueryTarget:xL,_isBase64Available:kR,_logWarn:jn,_validateIsNotUsedTogether:L2,addDoc:zP,aggregateFieldEqual:jP,aggregateQuerySnapshotEqual:DP,and:_P,arrayRemove:uL,arrayUnion:cL,average:RP,clearIndexedDbPersistence:cP,collection:b0,collectionGroup:sP,connectFirestoreEmulator:O2,count:sT,deleteAllPersistentCacheIndexes:wL,deleteDoc:iT,deleteField:aL,disableNetwork:hP,disablePersistentCacheIndexAutoCreation:mL,doc:ws,documentId:mP,enableIndexedDbPersistence:aP,enableMultiTabIndexedDbPersistence:lP,enableNetwork:dP,enablePersistentCacheIndexAutoCreation:pL,endAt:UP,endBefore:SP,ensureFirestoreConfigured:tr,executeWrite:hl,getAggregateFromServer:oT,getCountFromServer:WP,getDoc:MP,getDocFromCache:OP,getDocFromServer:HP,getDocs:AT,getDocsFromCache:VP,getDocsFromServer:KP,getFirestore:V2,getPersistentCacheIndexManager:gL,increment:dL,initializeFirestore:oP,limit:EP,limitToLast:TP,loadBundle:gP,memoryEagerGarbageCollector:ZP,memoryLocalCache:tL,memoryLruGarbageCollector:eL,namedQuery:pP,onSnapshot:xh,onSnapshotsInSync:$P,or:CP,orderBy:IP,persistentLocalCache:rL,persistentMultipleTabManager:AL,persistentSingleTabManager:aT,query:_0,queryEqual:Lx,refEqual:AP,runTransaction:oL,serverTimestamp:lL,setDoc:wh,setIndexConfiguration:fL,setLogLevel:W4,snapshotEqual:LP,startAfter:FP,startAt:kP,sum:NP,terminate:fP,updateDoc:GP,vector:hL,waitForPendingWrites:uP,where:bP,writeBatch:uT},Symbol.toStringTag,{value:"Module"}));function Jx(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function fT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bL=fT,gT=new yu("auth","Firebase",fT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Ww("@firebase/auth");function CL(t,...e){wf.logLevel<=ht.WARN&&wf.warn(`Auth (${tl}): ${t}`,...e)}function yh(t,...e){wf.logLevel<=ht.ERROR&&wf.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t,...e){throw Yx(t,...e)}function Es(t,...e){return Yx(t,...e)}function pT(t,e,r){const n=Object.assign(Object.assign({},bL()),{[e]:r});return new yu("auth","Firebase",n).create(e,{appName:t.name})}function ni(t){return pT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yx(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return gT.create(t,...e)}function Je(t,e,...r){if(!t)throw Yx(e,...r)}function zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yh(e),new Error(e)}function sA(t,e){t||zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _L(){return Tb()==="http:"||Tb()==="https:"}function Tb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_L()||IN()||"connection"in navigator)?navigator.onLine:!0}function EL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,r){this.shortDelay=e,this.longDelay=r,sA(r>e,"Short delay should be less than long delay!"),this.isMobile=bN()||EN()}get(){return IL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t,e){sA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=new Pu(3e4,6e4);function Eo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Si(t,e,r,n,s={}){return wT(t,s,async()=>{let A={},i={};n&&(e==="GET"?i=n:A={body:JSON.stringify(n)});const a=vu(Object.assign({key:t.config.apiKey},i)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},A);return _N()||(c.referrerPolicy="no-referrer"),mT.fetch()(xT(t,t.config.apiHost,r,a),c)})}async function wT(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},TL),e);try{const s=new SL(t),A=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw Id(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const a=A.ok?i.errorMessage:i.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Id(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw Id(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw Id(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw pT(t,d,c);ds(t,d)}}catch(s){if(s instanceof lA)throw s;ds(t,"network-request-failed",{message:String(s)})}}async function _g(t,e,r,n,s={}){const A=await Si(t,e,r,n,s);return"mfaPendingCredential"in A&&ds(t,"multi-factor-auth-required",{_serverResponse:A}),A}function xT(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Zx(t.config,s):`${t.config.apiScheme}://${s}`}function FL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Es(this.auth,"network-request-failed")),kL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Id(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Es(t,e,n);return s.customData._tokenResponse=r,s}function kb(t){return t!==void 0&&t.enterprise!==void 0}class UL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return FL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function QL(t,e){return Si(t,"GET","/v2/recaptchaConfig",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e){return Si(t,"POST","/v1/accounts:delete",e)}async function yT(t,e){return Si(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RL(t,e=!1){const r=Lt(t),n=await r.getIdToken(e),s=ey(n);Je(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:n,authTime:_c(Sp(s.auth_time)),issuedAtTime:_c(Sp(s.iat)),expirationTime:_c(Sp(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function Sp(t){return Number(t)*1e3}function ey(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return yh("JWT malformed, contained fewer than 3 sections"),null;try{const s=_E(r);return s?JSON.parse(s):(yh("Failed to decode base64 JWT payload"),null)}catch(s){return yh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Fb(t){const e=ey(t);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof lA&&jL(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function jL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xf(t){var e;const r=t.auth,n=await t.getIdToken(),s=await lu(t,yT(r,{idToken:n}));Je(s==null?void 0:s.users.length,r,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?vT(A.providerUserInfo):[],a=LL(t.providerData,i),l=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:a,metadata:new E0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function PL(t){const e=Lt(t);await xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LL(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function vT(t){return t.map(e=>{var{providerId:r}=e,n=Jx(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t,e){const r=await wT(t,{},async()=>{const n=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=xT(t,s,"/v1/token",`key=${A}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",mT.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function OL(t,e){return Si(t,"POST","/v2/accounts:revokeToken",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const r=Fb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:A}=await ML(e,r);this.updateTokensAndExpiration(n,s,Number(A))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:A}=r,i=new va;return n&&(Je(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(Je(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(Je(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e){Je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $s{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,A=Jx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new E0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const r=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Je(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return RL(this,e)}reload(){return PL(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new $s(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await xf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ks(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await lu(this,NL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,A,i,a,l,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,p=(A=r.phoneNumber)!==null&&A!==void 0?A:void 0,y=(i=r.photoURL)!==null&&i!==void 0?i:void 0,v=(a=r.tenantId)!==null&&a!==void 0?a:void 0,E=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,B=(c=r.createdAt)!==null&&c!==void 0?c:void 0,x=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:S,isAnonymous:U,providerData:N,stsTokenManager:w}=r;Je(_&&w,e,"internal-error");const b=va.fromJSON(this.name,w);Je(typeof _=="string",e,"internal-error"),vA(h,e.name),vA(f,e.name),Je(typeof S=="boolean",e,"internal-error"),Je(typeof U=="boolean",e,"internal-error"),vA(p,e.name),vA(y,e.name),vA(v,e.name),vA(E,e.name),vA(B,e.name),vA(x,e.name);const C=new $s({uid:_,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:U,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:b,createdAt:B,lastLoginAt:x});return N&&Array.isArray(N)&&(C.providerData=N.map(F=>Object.assign({},F))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,r,n=!1){const s=new va;s.updateFromServerResponse(r);const A=new $s({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await xf(A),A}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Je(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?vT(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),a=new va;a.updateFromIdToken(n);const l=new $s({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new E0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Map;function Ws(t){sA(t instanceof Function,"Expected a class definition");let e=Sb.get(t);return e?(sA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}BT.type="NONE";const Ub=BT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t,e,r){return`firebase:${t}:${e}:${r}`}class Ba{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:A}=this.auth;this.fullUserKey=vh(this.userKey,s.apiKey,A),this.fullPersistenceKey=vh("persistence",s.apiKey,A),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$s._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Ba(Ws(Ub),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||Ws(Ub);const i=vh(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const d=await c._get(i);if(d){const h=$s._fromJSON(e,d);c!==A&&(a=h),A=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!l.length?new Ba(A,e,n):(A=l[0],a&&await A._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new Ba(A,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TT(e))return"Blackberry";if(kT(e))return"Webos";if(CT(e))return"Safari";if((e.includes("chrome/")||_T(e))&&!e.includes("edge/"))return"Chrome";if(ET(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function bT(t=Cr()){return/firefox\//i.test(t)}function CT(t=Cr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _T(t=Cr()){return/crios\//i.test(t)}function IT(t=Cr()){return/iemobile/i.test(t)}function ET(t=Cr()){return/android/i.test(t)}function TT(t=Cr()){return/blackberry/i.test(t)}function kT(t=Cr()){return/webos/i.test(t)}function ty(t=Cr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HL(t=Cr()){var e;return ty(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VL(){return TN()&&document.documentMode===10}function FT(t=Cr()){return ty(t)||ET(t)||kT(t)||TT(t)||/windows phone/i.test(t)||IT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t,e=[]){let r;switch(t){case"Browser":r=Qb(Cr());break;case"Worker":r=`${Qb(Cr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${tl}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=A=>new Promise((i,a)=>{try{const l=e(A);i(l)}catch(l){a(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e={}){return Si(t,"GET","/v2/passwordPolicy",Eo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=6;class $L{constructor(e){var r,n,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:zL,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,A,i,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(A=l.containsUppercaseLetter)!==null&&A!==void 0?A:!0),l.isValid&&(l.isValid=(i=l.containsNumericCharacter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nb(this),this.idTokenSubscription=new Nb(this),this.beforeStateQueue=new KL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ws(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Ba.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await yT(this,{idToken:e}),n=await $s._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Ks(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===a)&&(l!=null&&l.user)&&(s=l.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await xf(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ks(this.app))return Promise.reject(ni(this));const r=e?Lt(e):null;return r&&Je(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ks(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ks(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GL(this),r=new $L(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await OL(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ws(e)||this._popupRedirectResolver;Je(r,this,"argument-error"),this.redirectPersistenceManager=await Ba.create(this,[Ws(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const A=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(a,this,"internal-error"),a.then(()=>{i||A(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ST(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&CL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function fl(t){return Lt(t)}class Nb{constructor(e){this.auth=e,this.observer=null,this.addObserver=NN(r=>this.observer=r)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qL(t){Ig=t}function UT(t){return Ig.loadJS(t)}function XL(){return Ig.recaptchaEnterpriseScript}function JL(){return Ig.gapiScript}function YL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZL="recaptcha-enterprise",eM="NO_RECAPTCHA";class tM{constructor(e){this.type=ZL,this.auth=fl(e)}async verify(e="verify",r=!1){async function n(A){if(!r){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,a)=>{QL(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new UL(l);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(l=>{a(l)})})}function s(A,i,a){const l=window.grecaptcha;kb(l)?l.enterprise.ready(()=>{l.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(eM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{n(this.auth).then(a=>{if(!r&&kb(window.grecaptcha))s(a,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XL();l.length!==0&&(l+=a),UT(l).then(()=>{s(a,A,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function Rb(t,e,r,n=!1){const s=new tM(t);let A;try{A=await s.verify(r)}catch{A=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function jb(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await Rb(t,e,r,r==="getOobCode");return n(t,A)}else return n(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Rb(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(A)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t,e){const r=Bu(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),A=r.getOptions();if(li(A,e??{}))return s;ds(s,"already-initialized")}return r.initialize({options:e})}function nM(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ws);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function sM(t,e,r){const n=fl(t);Je(n._canInitEmulator,n,"emulator-config-failed"),Je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,A=QT(e),{host:i,port:a}=AM(e),l=a===null?"":`:${a}`;n.config.emulator={url:`${A}//${i}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:a,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),iM()}function QT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AM(t){const e=QT(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const A=s[1];return{host:A,port:Db(n.substr(A.length+1))}}else{const[A,i]=n.split(":");return{host:A,port:Db(i)}}}function Db(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iM(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,r){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}async function oM(t,e){return Si(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(t,e){return _g(t,"POST","/v1/accounts:signInWithPassword",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){return _g(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}async function cM(t,e){return _g(t,"POST","/v1/accounts:signInWithEmailLink",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends ry{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new cu(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new cu(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,r,"signInWithPassword",aM);case"emailLink":return lM(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,n,"signUpPassword",oM);case"emailLink":return cM(e,{idToken:r,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e){return _g(t,"POST","/v1/accounts:signInWithIdp",Eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="http://localhost";class xo extends ry{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ds("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,A=Jx(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new xo(n,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return ba(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ba(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ba(e,r)}buildRequest(){const e={requestUri:uM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=vu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hM(t){const e=Xl(Jl(t)).link,r=e?Xl(Jl(e)).deep_link_id:null,n=Xl(Jl(t)).deep_link_id;return(n?Xl(Jl(n)).link:null)||n||r||e||t}class ny{constructor(e){var r,n,s,A,i,a;const l=Xl(Jl(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,d=(n=l.oobCode)!==null&&n!==void 0?n:null,h=dM((s=l.mode)!==null&&s!==void 0?s:null);Je(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=l.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=l.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=hM(e);try{return new ny(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.providerId=gl.PROVIDER_ID}static credential(e,r){return cu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=ny.parseLink(r);return Je(n,"argument-error"),cu._fromEmailAndCode(e,n.code,n.tenantId)}}gl.PROVIDER_ID="password";gl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends NT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA extends Lu{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:QA.PROVIDER_ID,signInMethod:QA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return QA.credentialFromTaggedObject(e)}static credentialFromError(e){return QA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return QA.credential(e.oauthAccessToken)}catch{return null}}}QA.FACEBOOK_SIGN_IN_METHOD="facebook.com";QA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return xo._fromParams({providerId:NA.PROVIDER_ID,signInMethod:NA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return NA.credentialFromTaggedObject(e)}static credentialFromError(e){return NA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return NA.credential(r,n)}catch{return null}}}NA.GOOGLE_SIGN_IN_METHOD="google.com";NA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA extends Lu{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:RA.PROVIDER_ID,signInMethod:RA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return RA.credentialFromTaggedObject(e)}static credentialFromError(e){return RA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return RA.credential(e.oauthAccessToken)}catch{return null}}}RA.GITHUB_SIGN_IN_METHOD="github.com";RA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends Lu{constructor(){super("twitter.com")}static credential(e,r){return xo._fromParams({providerId:jA.PROVIDER_ID,signInMethod:jA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return jA.credentialFromTaggedObject(e)}static credentialFromError(e){return jA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return jA.credential(r,n)}catch{return null}}}jA.TWITTER_SIGN_IN_METHOD="twitter.com";jA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const A=await $s._fromIdTokenResponse(e,n,s),i=Pb(n);return new qa({user:A,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Pb(n);return new qa({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Pb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends lA{constructor(e,r,n,s){var A;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new yf(e,r,n,s)}}function RT(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(t,A,e,n):A})}async function fM(t,e,r=!1){const n=await lu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return qa._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e,r=!1){const{auth:n}=t;if(Ks(n.app))return Promise.reject(ni(n));const s="reauthenticate";try{const A=await lu(t,RT(n,s,e,t),r);Je(A.idToken,n,"internal-error");const i=ey(A.idToken);Je(i,n,"internal-error");const{sub:a}=i;return Je(t.uid===a,n,"user-mismatch"),qa._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&ds(n,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jT(t,e,r=!1){if(Ks(t.app))return Promise.reject(ni(t));const n="signIn",s=await RT(t,n,e),A=await qa._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(A.user),A}async function pM(t,e){return jT(fl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t){const e=fl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function wM(t,e,r){return Ks(t.app)?Promise.reject(ni(t)):pM(Lt(t),gl.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&mM(t),n})}function xM(t,e,r,n){return Lt(t).onIdTokenChanged(e,r,n)}function yM(t,e,r){return Lt(t).beforeAuthStateChanged(e,r)}function vM(t,e,r,n){return Lt(t).onAuthStateChanged(e,r,n)}function BM(t){return Lt(t).signOut()}const vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=1e3,CM=10;class PT extends DT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},A=this.storage.getItem(n);VL()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CM):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},bM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}PT.type="LOCAL";const _M=PT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends DT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}LT.type="SESSION";const MT=LT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Eg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:A}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(i).map(async c=>c(r.origin,A)),l=await IM(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((a,l)=>{const c=sy("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),a(f.data.response);break;default:clearTimeout(d),clearTimeout(A),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function TM(t){Ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function kM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SM(){return OT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firebaseLocalStorageDb",UM=1,Bf="firebaseLocalStorage",VT="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Tg(t,e){return t.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function QM(){const t=indexedDB.deleteDatabase(HT);return new Mu(t).toPromise()}function T0(){const t=indexedDB.open(HT,UM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Bf,{keyPath:VT})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Bf)?e(n):(n.close(),await QM(),e(await T0()))})})}async function Lb(t,e,r){const n=Tg(t,!0).put({[VT]:e,value:r});return new Mu(n).toPromise()}async function NM(t,e){const r=Tg(t,!1).get(e),n=await new Mu(r).toPromise();return n===void 0?null:n.value}function Mb(t,e){const r=Tg(t,!0).delete(e);return new Mu(r).toPromise()}const RM=800,jM=3;class KT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>jM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eg._getInstance(SM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await kM(),!this.activeServiceWorker)return;this.sender=new EM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await T0();return await Lb(e,vf,"1"),await Mb(e,vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lb(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>NM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=Tg(s,!1).getAll();return new Mu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KT.type="LOCAL";const DM=KT;new Pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t,e){return e?Ws(e):(Je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay extends ry{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ba(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ba(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function LM(t){return jT(t.auth,new Ay(t),t.bypassAuthState)}function MM(t){const{auth:e,user:r}=t;return Je(r,e,"internal-error"),gM(r,new Ay(t),t.bypassAuthState)}async function OM(t){const{auth:e,user:r}=t;return Je(r,e,"internal-error"),fM(r,new Ay(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,r,n,s,A=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:A,error:i,type:a}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LM;case"linkViaPopup":case"linkViaRedirect":return OM;case"reauthViaPopup":case"reauthViaRedirect":return MM;default:ds(this.auth,"internal-error")}}resolve(e){sA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=new Pu(2e3,1e4);class ca extends GT{constructor(e,r,n,s,A){super(e,r,s,A),this.provider=n,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){sA(this.filter.length===1,"Popup operations only handle one event");const e=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HM.get())};e()}}ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="pendingRedirect",Bh=new Map;class KM extends GT{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const n=await GM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GM(t,e){const r=WM(e),n=$M(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function zM(t,e){Bh.set(t._key(),e)}function $M(t){return Ws(t._redirectPersistence)}function WM(t){return vh(VM,t.config.apiKey,t.name)}async function qM(t,e,r=!1){if(Ks(t.app))return Promise.reject(ni(t));const n=fl(t),s=PM(n,e),i=await new KM(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=10*60*1e3;class JM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!zT(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Es(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ob(e))}saveEventToCache(e){this.cachedEventUids.add(Ob(e)),this.lastProcessedEventTime=Date.now()}}function Ob(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(t,e={}){return Si(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tO=/^https?/;async function rO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZM(t);for(const r of e)try{if(nO(r))return}catch{}ds(t,"unauthorized-domain")}function nO(t){const e=I0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!tO.test(r))return!1;if(eO.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Pu(3e4,6e4);function Hb(){const t=Ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function AO(t){return new Promise((e,r)=>{var n,s,A;function i(){Hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hb(),r(Es(t,"network-request-failed"))},timeout:sO.get()})}if(!((s=(n=Ts().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=Ts().gapi)===null||A===void 0)&&A.load)i();else{const a=YL("iframefcb");return Ts()[a]=()=>{gapi.load?i():r(Es(t,"network-request-failed"))},UT(`${JL()}?onload=${a}`).catch(l=>r(l))}}).catch(e=>{throw bh=null,e})}let bh=null;function iO(t){return bh=bh||AO(t),bh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new Pu(5e3,15e3),aO="__/auth/iframe",lO="emulator/auth/iframe",cO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dO(t){const e=t.config;Je(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Zx(e,lO):`https://${t.config.authDomain}/${aO}`,n={apiKey:e.apiKey,appName:t.name,v:tl},s=uO.get(t.config.apiHost);s&&(n.eid=s);const A=t._getFrameworks();return A.length&&(n.fw=A.join(",")),`${r}?${vu(n).slice(1)}`}async function hO(t){const e=await iO(t),r=Ts().gapi;return Je(r,t,"internal-error"),e.open({where:document.body,url:dO(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cO,dontclear:!0},n=>new Promise(async(s,A)=>{await n.restyle({setHideOnLeave:!1});const i=Es(t,"network-request-failed"),a=Ts().setTimeout(()=>{A(i)},oO.get());function l(){Ts().clearTimeout(a),s(n)}n.ping(l).then(l,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gO=500,pO=600,mO="_blank",wO="http://localhost";class Vb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xO(t,e,r,n=gO,s=pO){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},fO),{width:n.toString(),height:s.toString(),top:A,left:i}),c=Cr().toLowerCase();r&&(a=_T(c)?mO:r),bT(c)&&(e=e||wO,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(HL(c)&&a!=="_self")return yO(e||"",a),new Vb(null);const h=window.open(e||"",a,d);Je(h,t,"popup-blocked");try{h.focus()}catch{}return new Vb(h)}function yO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="__/auth/handler",BO="emulator/auth/handler",bO=encodeURIComponent("fac");async function Kb(t,e,r,n,s,A){Je(t.config.authDomain,t,"auth-domain-config-required"),Je(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:tl,eventId:s};if(e instanceof NT){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",QN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Lu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${bO}=${encodeURIComponent(l)}`:"";return`${CO(t)}?${vu(a).slice(1)}${c}`}function CO({config:t}){return t.emulator?Zx(t,BO):`https://${t.authDomain}/${vO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="webStorageSupport";class _O{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MT,this._completeRedirectFn=qM,this._overrideRedirectResult=zM}async _openPopup(e,r,n,s){var A;sA((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await Kb(e,r,n,I0(),s);return xO(e,i,sy())}async _openRedirect(e,r,n,s){await this._originValidation(e);const A=await Kb(e,r,n,I0(),s);return TM(A),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:A}=this.eventManagers[r];return s?Promise.resolve(s):(sA(A,"If manager is not set, promise should be"),A)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await hO(e),n=new JM(e);return r.register("authEvent",s=>(Je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Up,{type:Up},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[Up];i!==void 0&&r(!!i),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=rO(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return FT()||CT()||ty()}}const IO=_O;var Gb="@firebase/auth",zb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kO(t){Qa(new ao("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;Je(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ST(t)},c=new WL(n,s,A,l);return nM(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Qa(new ao("auth-internal",e=>{const r=fl(e.getProvider("auth").getImmediate());return(n=>new EO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(Gb,zb,TO(t)),ri(Gb,zb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=5*60,SO=TE("authIdTokenMaxAge")||FO;let $b=null;const UO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>SO)return;const s=r==null?void 0:r.token;$b!==s&&($b=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function QO(t=Xw()){const e=Bu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=rM(t,{popupRedirectResolver:IO,persistence:[DM,_M,MT]}),n=TE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const A=new URL(n,location.origin);if(location.origin===A.origin){const i=UO(A.toString());yM(r,i,()=>i(r.currentUser)),xM(r,a=>i(a))}}const s=IE("auth");return s&&sM(r,`http://${s}`),r}function NO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qL({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const A=Es("internal-error");A.customData=s,r(A)},n.type="text/javascript",n.charset="UTF-8",NO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kO("Browser");const RO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",jO="zameny-b6c3f.firebaseapp.com",DO="zameny-b6c3f",PO="zameny-b6c3f.firebasestorage.app",LO="323355347910",MO="1:323355347910:web:c81f2813dce5ee9373c0c7",$T={apiKey:RO,authDomain:jO,projectId:DO,storageBucket:PO,messagingSenderId:LO,appId:MO};let bf;j4().length?bf=Xw():bf=QE($T);const Tr=V2(bf),$n=QO(bf);$T.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Pt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule",NUTRITION:"nutrition_records"},Lo=new Map,OO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},ua=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>ua(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=ua(n);s!==void 0&&(e[r]=s)}return e}return t},WT=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!WT(t[s],e[s]))return!1;return!0}return!1};async function HO(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const yr={syncCollection:async(t,e)=>{if(!Tr)return;let r=Lo.get(t);r||(r=new Map,Lo.set(t,r));const n=new Map;e.forEach(A=>{A&&A.id&&n.set(A.id,ua(A))});const s=[];if(r.forEach((A,i)=>{n.has(i)||s.push({type:"delete",id:i})}),n.forEach((A,i)=>{const a=r.get(i);(!a||!WT(a,A))&&s.push({type:a?"update":"create",item:A,id:i})}),s.length!==0)try{const A=OO(s,450);for(const i of A){const a=uT(Tr);i.forEach(l=>{const c=ws(Tr,t,l.id);l.type==="delete"?(a.delete(c),r.delete(l.id)):(a.set(c,l.item,{merge:!0}),r.set(l.id,l.item))}),await a.commit()}}catch(A){throw console.error(`Failed to sync ${t}:`,A),A}},syncCacheWithDatabase:async t=>{if(Tr){if(Lo.has(t)&&Lo.get(t).size>0){console.log(`Cache already exists for ${t}, skipping sync`);return}try{const e=_0(b0(Tr,t)),r=await HO(async()=>await AT(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),Lo.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)}catch(e){console.error(`Failed to sync cache for ${t}:`,e)}}},save:async(t,e)=>{if(!Tr||!(e||($n==null?void 0:$n.currentUser)))return;const n=[];t.teachers&&n.push(yr.syncCollection(Pt.TEACHERS,t.teachers)),t.subjects&&n.push(yr.syncCollection(Pt.SUBJECTS,t.subjects)),t.classes&&n.push(yr.syncCollection(Pt.CLASSES,t.classes)),t.rooms&&n.push(yr.syncCollection(Pt.ROOMS,t.rooms)),t.schedule&&n.push(yr.syncCollection(Pt.SCHEDULE_1,t.schedule)),t.schedule2&&n.push(yr.syncCollection(Pt.SCHEDULE_2,t.schedule2)),t.substitutions&&n.push(yr.syncCollection(Pt.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&n.push(yr.syncCollection(Pt.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&n.push(yr.syncCollection(Pt.DUTY_SCHEDULE,t.dutySchedule)),t.nutritionRecords&&n.push(yr.syncCollection(Pt.NUTRITION,t.nutritionRecords)),t.settings&&n.push(wh(ws(Tr,Pt.CONFIG,"settings"),ua(t.settings),{merge:!0})),t.bellSchedule&&n.push(wh(ws(Tr,Pt.CONFIG,"bells"),ua({items:t.bellSchedule}))),await Promise.all(n)},subscribe:(t,e)=>{if(!Tr)return()=>{};let r={...en},n=!0,s;const A=()=>{clearTimeout(s),s=setTimeout(async()=>{const l={...r};n&&(n=!1,console.log("Skipping initial cache synchronization to save Firestore quota")),t(l)},50)},i=[],a=(l,c)=>{const d=_0(b0(Tr,l));return xh(d,h=>{const f=h.docs.map(y=>y.data()),p=new Map;f.forEach(y=>{y&&y.id&&p.set(y.id,y)}),Lo.set(l,p),f.sort((y,v)=>{const E=typeof y.order=="number"?y.order:999999,B=typeof v.order=="number"?v.order:999999;return E-B}),r[c]=f,A()},h=>{console.warn(`Error reading ${l}:`,h)})};return i.push(a(Pt.TEACHERS,"teachers")),i.push(a(Pt.SUBJECTS,"subjects")),i.push(a(Pt.CLASSES,"classes")),i.push(a(Pt.ROOMS,"rooms")),i.push(a(Pt.SCHEDULE_1,"schedule")),i.push(a(Pt.SCHEDULE_2,"schedule2")),i.push(a(Pt.SUBSTITUTIONS,"substitutions")),i.push(a(Pt.DUTY_ZONES,"dutyZones")),i.push(a(Pt.DUTY_SCHEDULE,"dutySchedule")),i.push(a(Pt.NUTRITION,"nutritionRecords")),i.push(xh(ws(Tr,Pt.CONFIG,"settings"),l=>{l.exists()&&(r.settings={...en.settings,...l.data()},A())})),i.push(xh(ws(Tr,Pt.CONFIG,"bells"),l=>{if(l.exists()){const c=l.data();r.bellSchedule=c.items||en.bellSchedule,A()}})),()=>{i.forEach(l=>l()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(A=new Date)=>{const i=A.getFullYear(),a=String(A.getMonth()+1).padStart(2,"0"),l=String(A.getDate()).padStart(2,"0");return`${i}-${a}-${l}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Tr)throw new Error("Database not initialized");const r=$n==null?void 0:$n.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(A=>({id:A.id,name:A.name,color:A.color,difficulty:A.difficulty,requiredRoomType:A.requiredRoomType,order:A.order})),teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:A.order})),classes:e.classes.map(A=>({id:A.id,name:A.name,shift:A.shift,studentsCount:A.studentsCount,order:A.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=ua(n);await wh(ws(Tr,Pt.PUBLIC,t),s)},getPublicData:async t=>{if(!Tr)return null;try{const e=await dN(()=>Promise.resolve().then(()=>BL),void 0).then(r=>r.getDoc(ws(Tr,Pt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Tr&&await iT(ws(Tr,Pt.PUBLIC,t))}},qT=I.createContext(void 0),VO="admin@gymnasium22.com",KO=({children:t})=>{const[e,r]=I.useState(null),[n,s]=I.useState(null),[A,i]=I.useState(!0);I.useEffect(()=>{if(!$n){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=vM($n,d=>{r(d),d?d.email===VO?s("admin"):d.email==="canteen@gymnasium22.com"?s("canteen"):d.email&&d.email.includes("@")?s("teacher"):s("guest"):s(null),i(!1)});return()=>c()},[]);const a=async()=>{$n&&await BM($n),s(null)},l=()=>{s("guest"),i(!1)};return o.jsx(qT.Provider,{value:{user:e,role:n,loading:A,logout:a,setGuestRole:l},children:t})},Ui=()=>{const t=I.useContext(qT);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},hn=()=>crypto.randomUUID(),Ou=(t,e)=>{const r=t.getMonth(),n=e==null?void 0:e.semesterConfig;if(n){if(n.secondSemesterMonths.includes(r))return 2;if(n.firstSemesterMonths.includes(r))return 1}return r>=0&&r<=4?2:1},XT=(t,e)=>Ou(t,e.settings)===2?e.schedule2||[]:e.schedule||[],si=(t=new Date)=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},GO=si,JT=I.createContext(void 0),Ml="gym_data_local_backup_v2",Ol=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},Ed=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},zO=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},Sn={items:[],isProcessing:!1,add:t=>{const e=hn();Sn.items.push({id:e,data:t,timestamp:Date.now(),retryCount:0}),console.log("   :",e)},process:async t=>{if(Sn.isProcessing||!navigator.onLine)return;Sn.isProcessing=!0;const e=[];try{for(const r of Sn.items){if(!navigator.onLine)break;try{await yr.save(r.data,t),e.push(r.id),console.log(" :",r.id)}catch{r.retryCount++,r.retryCount>=3?(console.error("    3 :",r.id),e.push(r.id)):console.log(`   ${r.retryCount}/3:`,r.id)}}}finally{Sn.items=Sn.items.filter(r=>!e.includes(r.id)),Sn.isProcessing=!1,Sn.items.length>0&&navigator.onLine&&setTimeout(()=>Sn.process(t),5e3)}}},BA={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)},firebaseOffline:(t,e,r)=>{const n=window.innerWidth<768,s=n?" .     .":` ${e}.         .`;console.warn(`Firebase ${e} ():`,t),n||alert(s),Sn.add(r)}},YT=({children:t,initialData:e})=>{const[r,n]=I.useState(en),[s,A]=I.useState(!0),[i,a]=I.useState(!1),[l,c]=I.useState([]),[d,h]=I.useState(-1),{user:f,role:p,loading:y}=Ui();I.useEffect(()=>{if(e){n(e),c([e]),h(0),A(!1);return}if(y)return;let S=null;if(Ol()&&(S=zO(Ml),S))try{const b=JSON.parse(S);b&&b.teachers&&(n(C=>({...C,...b})),console.log("Loaded from local storage backup"))}catch(b){BA.log("Error parsing local backup",b)}const U=f&&p!=="guest";if(!(f||p==="guest")){n(en),A(!1);return}if(!U){S||n(en),A(!1);return}A(!0);let w;try{w=yr.subscribe(b=>{const C={...en,...b};C.teachers||(C.teachers=[]),C.teachers=C.teachers.map(F=>({telegramChatId:"",...F,shifts:F.shifts||[de.First,de.Second]})),C.schedule||(C.schedule=[]),C.schedule2||(C.schedule2=[]),C.substitutions||(C.substitutions=[]),C.bellSchedule||(C.bellSchedule=tf),(!C.dutyZones||C.dutyZones.length===0)&&(C.dutyZones=BE),C.dutySchedule||(C.dutySchedule=[]),C.nutritionRecords||(C.nutritionRecords=[]),C.settings?C.settings={...en.settings,...C.settings}:C.settings=en.settings,n(C),Ol()&&Ed(Ml,JSON.stringify(C)),c(F=>F.length===0?[C]:F),h(F=>F===-1?0:F),A(!1)},b=>{BA.log("Failed to subscribe to data:",b),A(!1)})}catch(b){BA.log("Failed to initialize subscription:",b),A(!1),w=void 0}return()=>{w&&w()}},[e,f,p,y]);const v=I.useCallback(async(S,U=!0)=>{const N=p==="guest";a(!0);try{const w={...r,...S};if(n(w),Ol()&&Ed(Ml,JSON.stringify(w)),!e&&f&&!N)try{await yr.save(S,f)}catch(b){BA.firebaseOffline(b," ",S)}else N&&console.warn("       .");if(U){const b=l.slice(0,d+1);b.push(w);const C=50;if(b.length>C){const F=b.length-C;b.splice(0,F),h(C-1)}else h(b.length-1);c(b)}}finally{a(!1)}},[r,l,d,f,p,e]);I.useEffect(()=>{const S=()=>{Sn.items.length>0&&f&&p!=="guest"&&!e&&(console.log(` .  ${Sn.items.length} ...`),Sn.process(f))};return window.addEventListener("online",S),()=>window.removeEventListener("online",S)},[f,p,e]);const E=I.useCallback(async()=>{h(S=>{if(S>0){const U=l[S-1];if(n(U),Ol()&&Ed(Ml,JSON.stringify(U)),!e&&f)try{yr.save(U,f).catch(N=>BA.firebase(N," "))}catch(N){BA.firebase(N," ")}return S-1}return S})},[l,e,f]),B=I.useCallback(async()=>{h(S=>{if(S<l.length-1){const U=l[S+1];if(n(U),Ol()&&Ed(Ml,JSON.stringify(U)),!e&&f)try{yr.save(U,f).catch(N=>BA.firebase(N," "))}catch(N){BA.firebase(N," ")}return S+1}return S})},[l,e,f]),x=I.useCallback(async()=>{await v(en)},[v]),_=I.useMemo(()=>({data:r,isLoading:s,isSaving:i,saveData:v,resetData:x,undo:E,redo:B,canUndo:d>0,canRedo:d<l.length-1}),[r,s,i,v,x,E,B,d]);return o.jsx(JT.Provider,{value:_,children:t})},kg=()=>{const t=I.useContext(JT);if(!t)throw new Error("useFullData must be used within DataProvider");return t},ZT=I.createContext(void 0),ek=I.createContext(void 0),tk=({children:t})=>{const{data:e,saveData:r}=kg(),n=I.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=I.useCallback(async(i,a)=>{await r(i,a)},[r]),A=I.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return o.jsx(ZT.Provider,{value:A,children:t})},rk=({children:t})=>{const{data:e,saveData:r}=kg(),A=Ou(new Date,e.settings)===2?e.schedule2||[]:e.schedule||[],i=I.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2:h})},[r]),a=I.useCallback(async(d,h)=>{await r(d,h)},[r]),l=I.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,nutritionRecords:e.nutritionRecords||[],saveSemesterSchedule:i,saveScheduleData:a}),[A,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,e.nutritionRecords,i,a]),c=I.useMemo(()=>({...l,saveScheduleData:a}),[l,a]);return o.jsx(ek.Provider,{value:c,children:t})},Mn=()=>{const t=I.useContext(ZT);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=kg();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||en.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Qi=()=>{const t=I.useContext(ek);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=kg();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[],nutritionRecords:t.nutritionRecords||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Wb={Home:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),o.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),o.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"17 1 21 5 17 9"}),o.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),o.jsx("polyline",{points:"7 23 3 19 7 15"}),o.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),o.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),o.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),o.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),o.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),o.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),o.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),o.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),o.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),o.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),o.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),o.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),o.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),o.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"1 4 1 10 7 10"}),o.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"23 4 23 10 17 10"}),o.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),o.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),o.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"18",cy:"5",r:"3"}),o.jsx("circle",{cx:"6",cy:"12",r:"3"}),o.jsx("circle",{cx:"18",cy:"19",r:"3"}),o.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),o.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),o.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),o.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),o.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),o.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),o.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),o.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),o.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),o.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),o.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),o.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),o.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),o.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),o.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),o.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("path",{d:"M8 13h2"}),o.jsx("path",{d:"M8 17h2"}),o.jsx("path",{d:"M14 13h2"}),o.jsx("path",{d:"M14 17h2"})]}),Activity:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),o.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),o.jsx("path",{d:"M3 9h18"}),o.jsx("path",{d:"M12 21V9"})]}),Image:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),o.jsx("circle",{cx:"9",cy:"9",r:"2"}),o.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"17 8 12 3 7 8"}),o.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 3v5h5"}),o.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),o.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),o.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),o.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"9",cy:"12",r:"1"}),o.jsx("circle",{cx:"9",cy:"5",r:"1"}),o.jsx("circle",{cx:"9",cy:"19",r:"1"}),o.jsx("circle",{cx:"15",cy:"12",r:"1"}),o.jsx("circle",{cx:"15",cy:"5",r:"1"}),o.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),o.jsx("path",{d:"M2 20h3"}),o.jsx("path",{d:"M13 20h9"}),o.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),o.jsx("path",{d:"M13 12h1"}),o.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),o.jsx("path",{d:"M8 12h1"}),o.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),o.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"9 11 12 14 22 4"}),o.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),o.jsx("path",{d:"M17 17h.01"}),o.jsx("path",{d:"M12 17h.01"}),o.jsx("path",{d:"M14 14h.01"}),o.jsx("path",{d:"M17 14h.01"}),o.jsx("path",{d:"M14 12h.01"}),o.jsx("path",{d:"M19 12h.01"}),o.jsx("path",{d:"M12 19h.01"}),o.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),o.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 12H3"}),o.jsx("path",{d:"M21 6H3"}),o.jsx("path",{d:"M21 18H3"})]}),Send:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),o.jsx("polyline",{points:"16 17 21 12 16 7"}),o.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),o.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),o.jsx("path",{d:"m20 16-4-4 4-4"}),o.jsx("path",{d:"m4 8 4 4-4 4"}),o.jsx("path",{d:"m16 4-4 4-4-4"}),o.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Coffee:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),Edit:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Info:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),WifiOff:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),o.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),o.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),o.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),o.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),o.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),o.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),Cloud:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17.5 19c0-1.7-1.3-3-3-3h-1.1c-.2-2.3-2.1-4-4.4-4-2.5 0-4.5 1.8-4.9 4.2-2.3.2-4.1 2.2-4.1 4.5 0 2.5 2 4.5 4.5 4.5h8.5c2.5 0 4.5-2 4.5-4.5z"})}),CloudRain:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"21"}),o.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"21"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"23"}),o.jsx("path",{d:"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"})]}),Wind:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"})}),Droplets:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"}),o.jsx("path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"})]}),Thermometer:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"})})},M=({name:t,size:e=24,className:r="",...n})=>{const s=Wb[t]||Wb.Info;return o.jsx(s,{width:e,height:e,className:r,...n})},nk=I.createContext(void 0),$O=({children:t})=>{const[e,r]=I.useState([]),n=A=>{const i=hn();r(a=>[...a,{...A,id:i}])},s=A=>{r(i=>i.filter(a=>a.id!==A))};return o.jsxs(nk.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,o.jsx(WO,{toasts:e,onRemoveToast:s})]})},iy=()=>{const t=I.useContext(nk);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},WO=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:o.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&o.jsx("div",{className:"flex justify-end mb-2",children:o.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>o.jsx(qO,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},Or=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(I.useEffect(()=>{if(!t)return;const A=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[t,e]),t?o.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:A=>A.target===A.currentTarget&&e(),children:o.jsxs("div",{className:`bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:o.jsx(M,{name:"X",size:20})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),qO=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:A})=>{const[i,a]=I.useState(!0),[l,c]=I.useState(!1),d=I.useRef(null);I.useEffect(()=>(d.current=setTimeout(()=>{h()},s),()=>{d.current&&clearTimeout(d.current)}),[]);const h=()=>{d.current&&(clearTimeout(d.current),d.current=null),c(!0),setTimeout(()=>{a(!1),A(t)},300)};if(!i)return null;const p=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),y=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return o.jsx("div",{className:`max-w-sm w-full animate-slide-in ${l?"animate-fade-out":""}`,children:o.jsx("div",{className:`modern-card border p-4 ${p.bg}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`flex-shrink-0 ${p.icon}`,children:o.jsx(M,{name:y,size:20})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:`text-sm font-semibold ${p.title}`,children:r}),n&&o.jsx("p",{className:`text-sm mt-1 ${p.message}`,children:n})]}),o.jsx("button",{onClick:h,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:o.jsx(M,{name:"X",size:16})})]})})})},XO=({x:t,y:e,onClose:r,actions:n})=>{const s=I.useRef(null);if(I.useEffect(()=>{if(t===null||e===null)return;const a=c=>{s.current&&!s.current.contains(c.target)&&r()},l=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",a,!0),document.addEventListener("keydown",l),()=>{window.removeEventListener("click",a,!0),document.removeEventListener("keydown",l)}},[t,e,r]),t===null||e===null)return null;const A=window.innerWidth-t<200?t-200:t,i={top:e,left:A};return o.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:i,children:n.map(a=>o.jsxs("button",{onClick:l=>{l.stopPropagation(),a.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${a.color||"text-slate-700 dark:text-slate-200"}`,children:[a.icon&&o.jsx(M,{name:a.icon,size:16}),a.label]},a.id||a.label))})},JO=()=>{const{bellSchedule:t,isSaving:e}=Mn(),[r,n]=I.useState("..."),[s,A]=I.useState(""),[i,a]=I.useState(0),[l,c]=I.useState("bg-slate-500"),[d,h]=I.useState(""),[f,p]=I.useState(navigator.onLine);return I.useEffect(()=>{const y=()=>p(!0),v=()=>p(!1);return window.addEventListener("online",y),window.addEventListener("offline",v),()=>{window.removeEventListener("online",y),window.removeEventListener("offline",v)}},[]),I.useEffect(()=>{const y=()=>{const E=new Date,B=E.getDay(),_=[null,rt.Monday,rt.Tuesday,rt.Wednesday,rt.Thursday,rt.Friday,null][B];if(h(_||""),!_){n(" "),A(" "),c("bg-slate-400"),a(0);return}const S=C=>{const[F,R]=C.split(":").map(Number);return F*60+R},U=E.getHours()*60+E.getMinutes();let N=t.filter(C=>C.day===_);N.length===0&&(N=t.filter(C=>C.day==="default")),N.sort((C,F)=>S(C.start)-S(F.start));let w=null,b=null;for(let C=0;C<N.length;C++){const F=N[C],R=S(F.start),L=S(F.end);if(U>=R&&U<L){w={...F,duration:L-R,passed:U-R};break}if(C<N.length-1){const Q=N[C+1],Ge=S(Q.start);if(U>=L&&U<Ge){const We=Ge-L;if(We>0&&We<60){const Xe=U-L,ze=Ge-U;b={nextLesson:Q,duration:We,passed:Xe,remaining:ze};break}}}}if(w){n(`${w.period} `);const C=Math.max(0,w.duration-w.passed);A(`${w.shift===de.First?"1 ":"2 "}  . ${C} `);const F=w.duration>0?w.passed/w.duration*100:0;a(Math.min(100,Math.max(0,F))),c("bg-indigo-600")}else if(b){n(""),A(` ${b.remaining}  ${b.nextLesson.period} `),c("bg-amber-500");const C=b.duration>0?b.passed/b.duration*100:0;a(Math.min(100,Math.max(0,C)))}else n(" "),A(" "),c("bg-slate-400"),a(0)};y();const v=setInterval(y,6e4);return()=>clearInterval(v)},[t]),o.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[o.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${l}`}),!f&&o.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-amber-500 text-white text-xs font-bold py-1 px-3 rounded-t-2xl text-center flex items-center justify-center gap-1",children:[o.jsx(M,{name:"WifiOff",size:12}),o.jsx("span",{children:"      "})]}),o.jsxs("div",{className:"flex justify-between items-start z-10",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:d}),o.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),o.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),o.jsxs("div",{className:`w-8 h-8 rounded-full ${l} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(M,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),!f&&!e&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(M,{name:"WifiOff",size:16,className:"text-amber-500"})}),o.jsx(M,{name:e?"Loader":f?"Clock":"WifiOff",size:16,className:e?"text-indigo-600 animate-spin":f?l==="bg-indigo-600"?"text-indigo-600":l==="bg-amber-500"?"text-amber-500":"text-slate-400":"text-amber-500"})]})]}),i>0&&o.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:o.jsx("div",{className:`h-full ${l} transition-all duration-1000`,style:{width:`${i}%`}})})]})},Ic=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var y;const[A,i]=I.useState(!1),[a,l]=I.useState(""),c=I.useRef(null);I.useEffect(()=>{const v=B=>{c.current&&!c.current.contains(B.target)&&i(!1)},E=B=>{B.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",v),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("keydown",E)}},[]);const h=((y=(s?t.flatMap(v=>v.options):t).find(v=>v.value===e))==null?void 0:y.label)||n,f=s?t.map(v=>({...v,options:v.options.filter(E=>E.label.toLowerCase().includes(a.toLowerCase()))})).filter(v=>v.options.length>0):null,p=s?null:t.filter(v=>v.label.toLowerCase().includes(a.toLowerCase()));return o.jsxs("div",{className:"relative w-full",ref:c,children:[o.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[o.jsx("span",{className:e?"":"text-slate-400",children:h}),o.jsx(M,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[o.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:o.jsx("input",{autoFocus:!0,value:a,onChange:v=>l(v.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&f?f.map(v=>o.jsxs("div",{children:[o.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:v.label}),v.options.map(E=>o.jsx("div",{onClick:()=>{r(E.value),i(!1),l("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===E.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:E.label},E.value))]},v.id||v.label)):p?p.map(v=>o.jsx("div",{onClick:()=>{r(v.value),i(!1),l("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===v.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:v.label},v.value)):null]})]})},Td=({children:t,className:e=""})=>{const r=Os.Children.toArray(t);return o.jsx("div",{className:e,children:r.map((n,s)=>{const A=Os.isValidElement(n)&&n.key?n.key:s;return o.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},A)})})},Qp=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return o.jsx("div",{className:"space-y-3",children:t.map(s=>{const A=s.id??s.label,i=Math.min(100,Math.max(0,s.value/n*100));return o.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[o.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),o.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),o.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},A)})})},YO=({onMenuClick:t,role:e})=>{const{settings:r}=Mn(),n=e==="admin",s=e==="teacher",A=e==="canteen",i=e==="guest",a=n||s,l=n||s||i,c=n||s||A,h=Ou(new Date,r)===2?"/schedule2":"/schedule";return o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:o.jsxs("div",{className:"flex justify-around items-center h-20",children:[a&&o.jsxs(ys,{to:"/dashboard",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Home",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),l&&o.jsxs(ys,{to:h,className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Calendar",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),c&&o.jsxs(ys,{to:"/nutrition",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Coffee",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),n&&o.jsxs(ys,{to:"/substitutions",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(M,{name:"Repeat",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),o.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 active:bg-indigo-50/50 dark:active:bg-indigo-900/20 transition-all duration-300 flex-1 h-full hover:bg-slate-100/50 dark:hover:bg-slate-700/30",children:[o.jsx(M,{name:"Menu",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]})]})})},ZO=[{id:"search",label:"",visible:!0},{id:"substitutions",label:"",visible:!0},{id:"occupancy",label:"",visible:!0},{id:"conflicts",label:"",visible:!0},{id:"birthdays",label:"",visible:!0},{id:"notes",label:"",visible:!0}],eH=()=>{const{settings:t}=Mn(),[e,r]=I.useState(null),[n,s]=I.useState([]),[A,i]=I.useState(!0),[a,l]=I.useState(null),c=t.weatherApiKey,d=t.weatherCity||"Minsk,BY";if(I.useEffect(()=>{(async()=>{if(!c){i(!1);return}const y="gym_weather_cache",v=30*60*1e3,E=localStorage.getItem(y);if(E)try{const B=JSON.parse(E);if(Date.now()-B.timestamp<v){r(B.current),s(B.forecast),i(!1);return}}catch{console.warn("Weather cache invalid")}try{const B=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${d}&units=metric&lang=ru&appid=${c}`);if(!B.ok)throw new Error("Weather API Error");const x=await B.json(),_=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${d}&units=metric&lang=ru&appid=${c}`);if(!_.ok)throw new Error("Forecast API Error");const S=await _.json(),U=[],N=new Set,w=new Date().toISOString().split("T")[0];for(const b of S.list){const C=b.dt_txt.split(" ")[0];if(C!==w&&!N.has(C)&&(U.push(b),N.add(C),U.length>=3))break}r(x),s(U),i(!1),localStorage.setItem(y,JSON.stringify({timestamp:Date.now(),current:x,forecast:U}))}catch(B){console.error(B),l("  "),i(!1)}})()},[c,d]),!c)return null;if(A)return o.jsx("div",{className:"h-32 w-full bg-slate-100 dark:bg-slate-800 rounded-3xl animate-pulse"});if(a||!e)return null;const h=p=>p.startsWith("01")?"Sun":p.startsWith("02")||p.startsWith("03")||p.startsWith("04")?"Cloud":p.startsWith("09")||p.startsWith("10")?"CloudRain":p.startsWith("11")?"Snowflake":p.startsWith("50")?"Wind":"Cloud",f=(()=>{const p=e.weather[0].icon;return p.endsWith("n")?"bg-gradient-to-br from-indigo-900 to-purple-900":p.startsWith("01")||p.startsWith("02")?"bg-gradient-to-br from-sky-400 to-blue-600":p.startsWith("09")||p.startsWith("10")||p.startsWith("11")?"bg-gradient-to-br from-slate-500 to-slate-700":"bg-gradient-to-br from-blue-300 to-slate-400"})();return o.jsxs("div",{className:`p-5 rounded-3xl relative overflow-hidden shadow-lg text-white ${f} flex flex-col justify-center h-full`,children:[o.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-white/10 rounded-full blur-2xl pointer-events-none"}),o.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-3xl font-black",children:[Math.round(e.main.temp),""]}),o.jsx("div",{className:"text-xs opacity-90 font-medium",children:e.name})]}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx(M,{name:h(e.weather[0].icon),size:36,className:"text-white/90 drop-shadow-md mb-1"}),o.jsx("div",{className:"text-[10px] opacity-75 capitalize",children:e.weather[0].description})]})]}),o.jsx("div",{className:"mt-3 pt-2 border-t border-white/20 flex justify-between text-center relative z-10",children:n.slice(0,3).map((p,y)=>o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-[9px] opacity-80 uppercase font-bold",children:new Date(p.dt*1e3).toLocaleDateString("ru-RU",{weekday:"short"})}),o.jsxs("span",{className:"text-xs font-bold",children:[Math.round(p.main.temp),""]})]},y))})]})},tH=()=>{var ae;const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:A}=Mn(),{schedule:i,substitutions:a,nutritionRecords:l}=Qi(),{role:c}=Ui(),d=xu(),{addToast:h}=iy(),[f,p]=I.useState(localStorage.getItem("gym_notes")||""),[y]=I.useState(new Date),[v,E]=I.useState(""),[B,x]=I.useState([]),[_,S]=I.useState(!1),[U,N]=I.useState(!1),[w,b]=I.useState(()=>{const T=localStorage.getItem("gym_dashboard_widgets_v4");return T?JSON.parse(T):ZO}),[C,F]=I.useState(!1),[R,L]=I.useState(!1),[Q,Ge]=I.useState(""),[We,Xe]=I.useState(!1),ze=T=>T.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),ie=T=>{const P=ze(T);p(P),N(!0)},Be=()=>{localStorage.setItem("gym_notes",f),N(!1),h({type:"success",title:" ",message:"     ",duration:3e3})};I.useEffect(()=>{if(!U)return;const T=setTimeout(()=>{localStorage.setItem("gym_notes",f),N(!1)},3e3);return()=>clearTimeout(T)},[f,U]);const ke=I.useMemo(()=>{const T=y.getHours();return T<5?" ":T<12?" ":T<18?" ":" "},[y]),Ne=I.useMemo(()=>GO(y),[y]),De=I.useMemo(()=>{const T=y.getDay();return T===0||T===6?null:wt[T-1]},[y]),W=I.useMemo(()=>{const T=new Date,P=T.getHours()*60+T.getMinutes(),J=[null,rt.Monday,rt.Tuesday,rt.Wednesday,rt.Thursday,rt.Friday,null][T.getDay()];if(!J)return{type:"weekend",label:""};let ye=s.filter(z=>z.day===J);ye.length===0&&(ye=s.filter(z=>z.day==="default"));const re=z=>{const[q,O]=z.split(":").map(Number);return q*60+O};ye.sort((z,q)=>re(z.start)-re(q.start));for(let z=0;z<ye.length;z++){const q=ye[z],O=re(q.start),Ae=re(q.end);if(P>=O&&P<Ae)return{type:"lesson",bell:q,label:`${q.period} `};if(z<ye.length-1){const ee=ye[z+1],oe=re(ee.start);if(P>=Ae&&P<oe)return{type:"break",nextBell:ee,label:` (. ${ee.period} )`}}}if(ye.length>0){const z=re(ye[0].start);return P<z?{type:"before",label:" "}:{type:"after",label:" "}}return{type:"unknown",label:"  "}},[s,y]);I.useEffect(()=>{if(!v.trim()){x([]);return}const T=v.toLowerCase(),P=[],V=W.type==="lesson",J=W.type==="lesson"?W.bell:null,ye=(re,z,q)=>{var oe,Y;if(!re)return{text:"",color:"blue",room:""};const O=a.find(te=>te.date===Ne&&te.scheduleItemId===re.id);if((O==null?void 0:O.replacementTeacherId)==="cancelled")return{text:" ",color:"red",room:""};const Ae=((oe=t.find(te=>te.id===re.subjectId))==null?void 0:oe.name)||"",ee=((Y=n.find(te=>te.id===((O==null?void 0:O.replacementRoomId)||re.roomId)))==null?void 0:Y.name)||(O==null?void 0:O.replacementRoomId)||re.roomId||"?";return{text:`${Ae} ${q?"()":""}`,color:q?"amber":"green",room:ee}};e.forEach(re=>{if(re.name.toLowerCase().includes(T)){let z={type:"teacher",id:re.id,name:re.name,icon:"User",statusText:"",statusColor:"slate",isBusy:!1};if(re.unavailableDates.includes(Ne))z.statusText="",z.statusColor="red",z.icon="UserX";else if(V&&J){const q=i.find(oe=>oe.teacherId===re.id&&oe.period===J.period&&oe.day===De&&oe.shift===J.shift),O=a.find(oe=>oe.date===Ne&&oe.replacementTeacherId===re.id);let Ae=q,ee=!1;if(O){const oe=i.find(Y=>Y.id===O.scheduleItemId);oe&&oe.period===J.period&&oe.shift===J.shift&&(Ae=oe,ee=!0)}else if(q){const oe=a.find(Y=>Y.date===Ne&&Y.scheduleItemId===q.id);oe&&oe.replacementTeacherId!==re.id&&(Ae=void 0)}if(Ae){const oe=ye(Ae,re.id,ee);z.statusText=oe.text,z.location=`. ${oe.room}`,z.statusColor=oe.color,z.isBusy=!0}else z.statusText="",z.statusColor="blue",z.isBusy=!1}else z.statusText=W.label,z.statusColor="slate";P.push(z)}}),r.forEach(re=>{var z,q;if(re.name.toLowerCase().includes(T)){let O={type:"class",id:re.id,name:re.name,icon:"GraduationCap",statusText:"",statusColor:"slate",isBusy:!1};if(V&&J){const Ae=i.find(ee=>ee.classId===re.id&&ee.period===J.period&&ee.day===De&&ee.shift===J.shift);if(Ae){const ee=a.find(oe=>oe.date===Ne&&oe.scheduleItemId===Ae.id);if((ee==null?void 0:ee.replacementTeacherId)==="cancelled")O.statusText=" ",O.statusColor="red";else{const oe=(z=t.find(te=>te.id===Ae.subjectId))==null?void 0:z.name,Y=((q=n.find(te=>te.id===((ee==null?void 0:ee.replacementRoomId)||Ae.roomId)))==null?void 0:q.name)||(ee==null?void 0:ee.replacementRoomId)||Ae.roomId;O.statusText=oe||"",O.location=`. ${Y}`,O.statusColor="green",O.isBusy=!0}}else O.statusText=" ",O.statusColor="blue"}else O.statusText=W.label;P.push(O)}}),n.forEach(re=>{var z,q;if(re.name.toLowerCase().includes(T)){let O={type:"room",id:re.id,name:re.name,subName:re.type,icon:"DoorOpen",statusText:"",statusColor:"slate",isBusy:!1};if(V&&J){const Ae=i.find(Y=>Y.roomId===re.id&&Y.period===J.period&&Y.day===De&&Y.shift===J.shift),ee=a.find(Y=>Y.date===Ne&&Y.replacementRoomId===re.id);let oe=Ae;if(ee){const Y=i.find(te=>te.id===ee.scheduleItemId);Y&&Y.period===J.period&&Y.shift===J.shift&&(oe=Y)}if(Ae&&a.find(te=>te.date===Ne&&te.scheduleItemId===Ae.id&&te.replacementRoomId&&te.replacementRoomId!==re.id)&&(oe=void 0),oe){const Y=(z=r.find(pe=>pe.id===oe.classId))==null?void 0:z.name,te=(q=e.find(pe=>{var Qe;return pe.id===(((Qe=a.find(Ve=>Ve.scheduleItemId===oe.id&&Ve.date===Ne))==null?void 0:Qe.replacementTeacherId)||oe.teacherId)}))==null?void 0:q.name;O.statusText="",O.location=`${Y}  ${te==null?void 0:te.split(" ")[0]}`,O.statusColor="green",O.isBusy=!0}else O.statusText="",O.statusColor="blue"}else O.statusText=W.label;P.push(O)}}),x(P.slice(0,5))},[v,e,r,n,i,a,W,Ne,De,t]);const $=I.useMemo(()=>{const T=new Date;return T.setHours(0,0,0,0),e.filter(P=>P.birthDate).map(P=>{const V=new Date(P.birthDate);let J=new Date(T.getFullYear(),V.getMonth(),V.getDate());J<T&&J.setFullYear(T.getFullYear()+1);const ye=Math.ceil((J.getTime()-T.getTime())/(1e3*60*60*24));return{...P,diff:ye,age:T.getFullYear()-V.getFullYear()}}).filter(P=>P.diff<=30).sort((P,V)=>P.diff-V.diff)},[e]),Fe=I.useMemo(()=>{const T=e.length,P=new Map;e.filter(O=>O.unavailableDates.includes(Ne)).forEach(O=>{var oe;const ee=((oe=O.absenceReasons)==null?void 0:oe[Ne])===" "?" ":"";P.set(O.id,{id:O.id,name:O.name,displayReason:ee})});const V=a.filter(O=>O.date===Ne&&O.replacementTeacherId!=="conducted"&&O.replacementTeacherId!==O.originalTeacherId),J=new Map;V.forEach(O=>{if(P.has(O.originalTeacherId))return;const Ae=e.find(Y=>Y.id===O.originalTeacherId);if(!Ae)return;const ee=i.find(Y=>Y.id===O.scheduleItemId);if(!ee)return;J.has(O.originalTeacherId)||J.set(O.originalTeacherId,{teacher:Ae,lessons:[]}),J.get(O.originalTeacherId).lessons.push({period:ee.period,reason:O.lessonAbsenceReason})});const ye=Array.from(P.values());J.forEach((O,Ae)=>{const ee=O.lessons.sort((pe,Qe)=>pe.period-Qe.period),oe=ee.map(pe=>pe.period).join(", "),te=ee.some(pe=>pe.reason===" ")?" ":"";ye.push({id:Ae,name:O.teacher.name,displayReason:`${oe} : ${te}`})}),ye.sort((O,Ae)=>O.name.localeCompare(Ae.name));const re=ye.length,z=T-re;return{presentPercent:T>0?Math.round(z/T*100):0,absentCount:re,totalTeachers:T,absentTeachersList:ye}},[e,Ne,a,i]),we=I.useMemo(()=>{const T=new Date(y);for(T.setDate(y.getDate()+1);T.getDay()===0||T.getDay()===6;)T.setDate(T.getDate()+1);const V=[null,"","","","","",null][T.getDay()];if(!V)return[];const J=[];return r.filter(re=>!re.excludeFromReports).forEach(re=>{const z=i.filter(q=>q.classId===re.id&&q.day===V);z.length===0?J.push({class:re.name,issue:`   ${V}`}):z.length<4&&J.push({class:re.name,issue:`  (${z.length})`}),z.forEach(q=>{if(i.some(Ae=>Ae.id!==q.id&&Ae.day===V&&Ae.period===q.period&&Ae.shift===q.shift&&Ae.teacherId===q.teacherId)&&J.push({class:re.name,issue:`  (${q.period} )`}),q.roomId){const Ae=n.find(ee=>ee.id===q.roomId);Ae&&Ae.capacity<re.studentsCount&&J.push({class:re.name,issue:`: ${Ae.name} (${q.period} )`})}})}),J.filter((re,z,q)=>q.findIndex(O=>O.class===re.class&&O.issue===re.issue)===z)},[i,r,e,n,y]),Pe=I.useMemo(()=>{if(!De)return 0;let T=0;const P=i.filter(V=>V.day===De);for(const V of P){const J=e.find(ye=>ye.id===V.teacherId);J&&J.unavailableDates.includes(Ne)&&(a.find(re=>re.scheduleItemId===V.id&&re.date===Ne)||T++)}return T},[i,e,a,Ne,De]);I.useMemo(()=>{if(c!=="canteen")return 0;const T=l.filter(V=>V.date===Ne),P=new Set(T.map(V=>V.classId));return r.filter(V=>!P.has(V.id)).length},[c,l,Ne,r]);const on=async()=>{if(!Q.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}Xe(!0);const T=` *   :*

${Q}`;try{const V=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:T,parse_mode:"Markdown"})})).json();if(V.ok)alert("!   ."),L(!1),Ge("");else throw new Error(V.description)}catch(P){console.error("   Telegram:",P),alert(`   . : ${P}`)}finally{Xe(!1)}},gr=T=>{const P=w.map(V=>V.id===T?{...V,visible:!V.visible}:V);b(P)},qt=(T,P)=>{const V=w.findIndex(ye=>ye.id===T);if(V===-1)return;const J=[...w];P==="up"&&V>0?[J[V],J[V-1]]=[J[V-1],J[V]]:P==="down"&&V<J.length-1&&([J[V],J[V+1]]=[J[V+1],J[V]]),b(J)},_t=()=>{localStorage.setItem("gym_dashboard_widgets_v4",JSON.stringify(w)),F(!1)},Bt=T=>{if(!T.visible)return null;switch(T.id){case"search":return o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:o.jsx(M,{name:"Search",size:22})}),o.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx("input",{type:"text",inputMode:"search",placeholder:",   ...",value:v,onChange:P=>E(P.target.value),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl py-3.5 pl-11 pr-4 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),o.jsx(M,{name:"Search",size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]}),B.length>0&&o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mr-2 pr-2 space-y-2",children:B.map(P=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white dark:bg-slate-700/50 border border-slate-100 dark:border-slate-600 hover:border-indigo-300 dark:hover:border-indigo-500 transition-colors cursor-pointer",onClick:()=>{const J=Ou(new Date,A)===2?"/schedule2":"/schedule",ye=De?`&day=${De}`:"";let re="";if(P.type==="class"){const z=r.find(q=>q.id===P.id);z&&(re=`&shift=${z.shift===de.First?1:2}`)}P.type==="teacher"&&d(`${J}?view=teacher&id=${P.id}${ye}`),P.type==="class"&&d(`${J}?view=class&id=${P.id}${ye}${re}`)},children:[o.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${P.isBusy?"bg-indigo-100 text-indigo-600":P.statusColor==="red"?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:o.jsx(M,{name:P.icon,size:18})}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm truncate",children:[P.name," ",P.subName&&o.jsx("span",{className:"text-slate-400 font-normal",children:P.subName})]}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:P.type==="room"?"":P.type==="class"?"":""})]})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg inline-block ${P.statusColor==="green"?"bg-emerald-100 text-emerald-700":P.statusColor==="red"?"bg-red-100 text-red-700":P.statusColor==="blue"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}`,children:P.statusText}),P.location&&o.jsx("div",{className:"text-[10px] font-mono mt-1 text-slate-400",children:P.location})]})]},`${P.type}-${P.id}`))})]},T.id);case"substitutions":return o.jsxs("div",{className:`p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 ${Pe>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[Pe>0&&o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),o.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[o.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${Pe>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:o.jsx(M,{name:Pe>0?"AlertTriangle":"CheckCircle",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:Pe>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:Pe}),o.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),o.jsxs("button",{onClick:()=>d("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",o.jsx(M,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:o.jsx(M,{name:"CheckCircle",size:64})}),o.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]},T.id);case"occupancy":return o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:o.jsx(M,{name:"PieChart",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsx("button",{onClick:()=>S(!_),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:_?" ":" ",children:o.jsx(M,{name:_?"PieChart":"List",size:20})})]}),_?o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:Fe.absentTeachersList.length>0?o.jsx("div",{className:"space-y-3",children:Fe.absentTeachersList.map(P=>o.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:P.name}),o.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:P.displayReason})]},P.id))}):o.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:o.jsx("p",{className:"text-sm font-medium",children:"   "})})}):o.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[o.jsxs("div",{className:"relative w-28 h-28",children:[o.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[o.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),o.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${Fe.presentPercent}, 100`,strokeLinecap:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),o.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),o.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[Fe.presentPercent,"%"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:Fe.absentCount}),o.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",o.jsx("br",{}),""]})]})]})]},T.id);case"notes":return o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full group card-hover relative bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:o.jsx(M,{name:"Edit2",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:Be,disabled:!U,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${U?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:U?" ":" ",children:o.jsx(M,{name:"Save",size:16})}),o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f),h({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:o.jsx(M,{name:"Copy",size:16})}),o.jsx("button",{onClick:()=>{confirm(" ?")&&(p(""),localStorage.setItem("gym_notes",""),N(!1),h({type:"success",title:" ",duration:2e3}))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:o.jsx(M,{name:"Trash2",size:16})})]})]}),o.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[o.jsx("textarea",{inputMode:"text",className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:f,onChange:P=>ie(P.target.value),maxLength:1e4}),U&&o.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[o.jsx(M,{name:"Clock",size:10}),"  "]})]})]},T.id);case"conflicts":return o.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:o.jsx(M,{name:"AlertTriangle",size:20})}),o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:we.length?we.map(P=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:P.class}),o.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:P.issue})]},`${P.class}-${P.issue}`)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},T.id);case"birthdays":return o.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:o.jsx(M,{name:"Gift",size:20})}),o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:$.length?$.map(P=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:P.name}),o.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${P.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:P.diff===0?"!":` ${P.diff} .`})]},P.id)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},T.id);default:return null}};return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[o.jsxs("div",{className:"lg:col-span-2 flex flex-col justify-end",children:[o.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[ke,", ",c==="admin"?"":c==="canteen"?"":"","!"]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium mb-4",children:[" ",y.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",title:"  ",children:o.jsx(M,{name:"Settings",size:18})}),o.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[o.jsx(M,{name:"Send",size:18}),"  "]})]}),((ae=A==null?void 0:A.adminAnnouncement)==null?void 0:ae.active)&&o.jsx("div",{className:"mt-6 bg-amber-100 dark:bg-amber-900/30 border-l-4 border-amber-500 p-4 rounded-r-xl shadow-sm",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"text-amber-600 dark:text-amber-400 shrink-0 mt-1",children:o.jsx(M,{name:"Bell",size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-base text-amber-800 dark:text-amber-100 mb-1",children:""}),o.jsx("p",{className:"text-slate-800 dark:text-slate-200 text-sm whitespace-pre-wrap leading-relaxed",children:A.adminAnnouncement.message})]})]})})]}),o.jsx("div",{className:"hidden lg:block h-full min-h-[160px]",children:o.jsx(eH,{})})]}),c==="admin"&&Pe>0&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-4 animate-fade-in",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-amber-500 text-white p-2 rounded-xl",children:o.jsx(M,{name:"AlertTriangle",size:20})}),o.jsx("div",{className:"flex-1",children:o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:[Pe," ",Pe===1?"":Pe<5?"":"","  "]})}),o.jsx(ys,{to:"/substitutions",className:"px-4 py-2 bg-amber-500 text-white rounded-xl font-semibold hover:bg-amber-600 transition-colors text-sm",children:""})]})}),o.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3 animate-fade-in",children:[o.jsxs(ys,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Calendar",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&o.jsxs(ys,{to:"/substitutions",className:"p-4 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-orange-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Repeat",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&o.jsxs(ys,{to:"/duty",className:"p-4 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Shield",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="guest"&&o.jsxs(ys,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30 border border-emerald-200 dark:border-emerald-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-emerald-500 text-white p-3 rounded-xl",children:o.jsx(M,{name:"Users",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.slice(0,4).map(T=>Bt(T))}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:w.slice(4).map(T=>Bt(T))}),o.jsx(Or,{isOpen:R,onClose:()=>L(!1),title:" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),o.jsx("textarea",{inputMode:"text",value:Q,onChange:T=>Ge(T.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:on,disabled:We,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[We?o.jsx(M,{name:"Loader",size:16,className:"animate-spin"}):o.jsx(M,{name:"Send",size:16}),We?"...":""]})})]})}),o.jsx(Or,{isOpen:C,onClose:()=>F(!1),title:"  ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      ."}),o.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:w.map((T,P)=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-xl border border-slate-200 dark:border-slate-600",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"checkbox",checked:T.visible,onChange:()=>gr(T.id),className:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),o.jsx("span",{className:"font-bold text-slate-700 dark:text-white",children:T.label})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>qt(T.id,"up"),disabled:P===0,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:o.jsx(M,{name:"ArrowRight",className:"-rotate-90",size:16})}),o.jsx("button",{onClick:()=>qt(T.id,"down"),disabled:P===w.length-1,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:o.jsx(M,{name:"ArrowRight",className:"rotate-90",size:16})})]})]},T.id))}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:_t,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})})]})})]})};var sk={},Ak={},ik={},Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});function rH(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Fg.default=rH;var oy={};Object.defineProperty(oy,"__esModule",{value:!0});var nH=Fg,sH=" and ";function AH(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=nH.default(r),A=n;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(sH)}oy.default=AH;var ay={};Object.defineProperty(ay,"__esModule",{value:!0});function iH(){}ay.default=iH;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Fg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=oy;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=ay;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(ik);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=I,r=ik;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(A,i){i===void 0&&(i=!1);var a=e.useState(i),l=a[0],c=a[1],d=r.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),p=function(){h&&c(!!f.matches)};return f.addListener(p),c(f.matches),function(){h=!1,f.removeListener(p)}},[d]),l}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(Ak);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=Ak;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(sk);const ok=YC(sk),ak=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:A}=Mn(),{schedule1:i,schedule2:a,saveSemesterSchedule:l,canUndo:c,canRedo:d,undo:h,redo:f}=Qi(),p=e===2?a:i,y=async j=>{await l(e,j)},[v,E]=I.useState(de.First),[B,x]=I.useState(rt.Monday),[_,S]=I.useState(!1),[U,N]=I.useState({}),[w,b]=I.useState("class"),[C,F]=I.useState(""),[R,L]=I.useState(""),[Q,Ge]=I.useState(""),[We,Xe]=I.useState(!1),[ze,ie]=I.useState({visible:!1,x:0,y:0,item:null,cell:null}),[Be,ke]=I.useState(null),[Ne,De]=I.useState([]),[W,$]=I.useState(null),[Fe,we]=I.useState(null),Pe=ok({maxWidth:767}),[on,gr]=I.useState(!0),[qt,_t]=I.useState(!1),[Bt,ae]=I.useState({isOpen:!1,type:"",day:"",classId:""}),[T,P]=I.useState(rt.Monday),[V,J]=I.useState(""),[ye]=vE();I.useEffect(()=>{const j=ye.get("view"),ne=ye.get("id"),Ee=ye.get("day"),xe=ye.get("shift");j&&["class","teacher","subject","week"].includes(j)&&(b(j),ne&&F(ne),Ee&&wt.includes(Ee)&&x(Ee),xe&&(xe==="1"&&E(de.First),xe==="2"&&E(de.Second)))},[ye]);const re=wn[v],z=I.useMemo(()=>w==="week"?wn[v].map(j=>({id:j.toString(),name:`${j} `})):w==="class"?C?s.filter(j=>j.id===C&&j.shift===v):s.filter(j=>j.shift===v):w==="teacher"?C?n.filter(j=>j.id===C):n:w==="subject"?C?r.filter(j=>j.id===C):r:[],[w,C,s,n,r,v]),q=()=>z,[O]=I.useState(()=>new Map);I.useEffect(()=>{O.clear()},[p,O]),I.useEffect(()=>{O.size>500&&(O.clear(),console.warn("Schedule cache cleared to prevent memory leak"))},[O]);const Ae=I.useCallback((j,ne)=>{const Ee=`${w}-${j}-${ne}-${v}-${B}-${C}-${R}-${Q}`;if(O.has(Ee))return O.get(Ee);let xe=[];if(w==="week"){const Se=parseInt(j);if(isNaN(Se))return[];const me=String(ne);xe=p.filter(Me=>Me.shift===v&&Me.period===Se&&Me.day===me),C&&(xe=xe.filter(Me=>Me.classId===C))}else{const Se=typeof ne=="string"?parseInt(ne):ne;if(isNaN(Se))return[];w==="class"&&(xe=p.filter(me=>me.classId===j&&me.period===Se&&me.day===B&&me.shift===v)),w==="teacher"&&(xe=p.filter(me=>me.teacherId===j&&me.period===Se&&me.day===B&&me.shift===v)),w==="subject"&&(xe=p.filter(me=>me.subjectId===j&&me.period===Se&&me.day===B&&me.shift===v))}return R&&(xe=xe.filter(Se=>{if(!Se.roomId)return!1;const me=A.find(qe=>qe.id===Se.roomId);return((me?me.name:Se.roomId)||"").toLowerCase().includes(R.toLowerCase())})),Q&&(xe=xe.filter(Se=>{var me;return(me=Se.direction)==null?void 0:me.toLowerCase().includes(Q.toLowerCase())})),O.set(Ee,xe),xe},[w,p,v,B,C,R,Q,A]),ee=j=>{const ne=[],Ee=p.filter(me=>me.id!==j.id&&me.day===j.day&&me.period===j.period&&me.shift===j.shift);return Ee.find(me=>me.teacherId===j.teacherId)&&ne.push("teacher"),Ee.find(me=>!(me.classId!==j.classId||me.direction&&j.direction&&me.direction!==j.direction))&&ne.push("class"),j.roomId&&Ee.find(Me=>Me.roomId===j.roomId)&&ne.push("room"),ne},oe=(j,ne,Ee)=>{const xe=[],Se=s.find(qe=>qe.id===j),me=r.find(qe=>qe.id===ne),Me=A.find(qe=>qe.id===Ee);return Me&&(Se&&Me.capacity<Se.studentsCount&&xe.push(`  !   ${Se.studentsCount} .,     ${Me.capacity}.`),me&&me.requiredRoomType&&me.requiredRoomType!==""&&Me.type!==me.requiredRoomType&&xe.push(`   !   "${me.requiredRoomType}",   "${Me.type}".`)),xe},Y=j=>{if(!j.classId||!j.subjectId||!j.roomId){De([]);return}const ne=oe(j.classId,j.subjectId,j.roomId);De(ne)},te=j=>{t||(N(j),Y(j),S(!0))},pe=(j,ne,Ee=B)=>{if(t)return;const xe={period:ne,day:Ee,shift:v,id:hn()};w==="class"&&(xe.classId=j),w==="teacher"&&(xe.teacherId=j),w==="subject"&&(xe.subjectId=j),w==="week"&&(xe.period=parseInt(j),xe.day=Ee,C&&s.find(Se=>Se.id===C)&&(xe.classId=C)),N(xe),De([]),S(!0)},Qe=async()=>{if(!U.subjectId||!U.teacherId||!U.classId)return;const j=[];if(U.period!==void 0){const qe=U.shift||v;(wn[qe]||[]).includes(U.period)||j.push(` ${U.period}    "${qe}"`)}if(n.find(qe=>qe.id===U.teacherId)||j.push("   "),r.find(qe=>qe.id===U.subjectId)||j.push("   "),s.find(qe=>qe.id===U.classId)||j.push("   "),U.roomId&&(A.find(Rt=>Rt.id===U.roomId)||j.push("   ")),j.length>0){alert(`  :

${j.join(`
`)}`);return}const Se=ee(U);if(Se.length>0){const qe={teacher:"",class:"",room:""},Rt=Se.map(an=>qe[an]).join(", ");if(!confirm(`  : ${Rt}     .

   ?`))return}let me=[...p];const Me=me.findIndex(qe=>qe.id===U.id);Me>=0?me[Me]=U:me.push(U),await y(me),S(!1)},Ve=async j=>{const ne=p.filter(Ee=>Ee.id!==(j||U.id));await y(ne),S(!1)},Ie=(j,ne,Ee)=>{t||(j.preventDefault(),j.stopPropagation(),ie({visible:!0,x:j.clientX,y:j.clientY,item:ne,cell:Ee}))},et=(j,ne)=>{if(t)return;$(ne),j.dataTransfer.effectAllowed="move";const Ee=j.currentTarget;setTimeout(()=>Ee.classList.add("dragging"),0)},Ze=j=>{j.currentTarget.classList.remove("dragging"),$(null),we(null)},it=(j,ne)=>{j.preventDefault(),!t&&we(`${ne.rowId}-${ne.colKey}`)},Ke=async(j,ne)=>{if(j.preventDefault(),!W||t)return;const Ee={...W};w==="week"?(Ee.period=parseInt(ne.rowId),Ee.day=ne.colKey):(Ee.period=ne.colKey,Ee.day=B,w==="class"&&(Ee.classId=ne.rowId),w==="teacher"&&(Ee.teacherId=ne.rowId),w==="subject"&&(Ee.subjectId=ne.rowId));const xe=p.map(Me=>Me.id===Ee.id?Ee:Me),Se=he(xe,Ee);if(Se.length>0){const Me=Se.map(qe=>{switch(qe.type){case"teacher":return` ${qe.entityName}     `;case"room":return` ${qe.entityName}     `;case"class":return` ${qe.entityName}      `;default:return"  "}});alert(`  :
${Me.join(`
`)}`),$(null),we(null);return}await y(xe),$(null),we(null)},he=(j,ne)=>{const Ee=[],xe=j.filter(Me=>Me.id!==ne.id&&Me.day===ne.day&&Me.period===ne.period&&Me.shift===ne.shift);if(xe.find(Me=>Me.teacherId===ne.teacherId)){const Me=n.find(qe=>qe.id===ne.teacherId);Ee.push({type:"teacher",entityName:(Me==null?void 0:Me.name)||ne.teacherId})}if(ne.roomId&&xe.find(qe=>qe.roomId===ne.roomId)){const qe=A.find(Rt=>Rt.id===ne.roomId);Ee.push({type:"room",entityName:(qe==null?void 0:qe.name)||ne.roomId})}if(xe.find(Me=>Me.classId===ne.classId)){const Me=s.find(qe=>qe.id===ne.classId);Ee.push({type:"class",entityName:(Me==null?void 0:Me.name)||ne.classId})}return Ee},Ce=[];if(ze.item)Ce.push({label:"",icon:"Copy",onClick:()=>ke(ze.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>Ve(ze.item.id)});else if(ze.cell){const j=ze.cell;Be&&Ce.push({label:"",icon:"Clipboard",onClick:async()=>{const ne={...Be,id:hn(),day:B,shift:v,period:j.colKey};w==="week"&&(ne.day=j.colKey,ne.period=parseInt(j.rowId)),w==="class"?ne.classId=j.rowId:w==="teacher"?ne.teacherId=j.rowId:w==="subject"&&(ne.subjectId=j.rowId);let Ee=[...p,ne];await y(Ee),ke(null)}}),Ce.push({label:" ",icon:"Plus",onClick:()=>pe(j.rowId||"",typeof j.colKey=="number"?j.colKey:parseInt(j.rowId||"0"),w==="week"?j.colKey:B)})}const tt=U.subjectId?n.filter(j=>j.subjectIds&&j.subjectIds.includes(U.subjectId)):[],Tt=U.subjectId?n.filter(j=>!j.subjectIds||!j.subjectIds.includes(U.subjectId)):n,mt=I.useMemo(()=>{const j=e===2?" (2- )":"";if(C){if(w==="teacher"){const ne=n.find(Ee=>Ee.id===C);return ne?ne.name+j:""+j}if(w==="class"){const ne=s.find(Ee=>Ee.id===C);return ne?ne.name+j:""+j}if(w==="subject"){const ne=r.find(Ee=>Ee.id===C);return ne?ne.name+j:""+j}if(w==="week"){const ne=s.find(Ee=>Ee.id===C);return ne?ne.name+j:""+j}}return`  ${B}`+j},[C,w,n,s,r,B,e]),ot=!!C,Kt=I.useMemo(()=>ot?wt:re,[ot,re]),bt=I.useMemo(()=>ot?wn[v].map(j=>({id:j.toString(),name:`${j} `})):q(),[ot,v,q]),yt=(j,ne)=>{if(ot){const Ee=parseInt(j),xe=ne;let Se=p.filter(me=>me.shift===v&&me.period===Ee&&me.day===xe);return w==="class"||w==="week"?Se=Se.filter(me=>me.classId===C):w==="teacher"?Se=Se.filter(me=>me.teacherId===C):w==="subject"&&(Se=Se.filter(me=>me.subjectId===C)),Se}else return Ae(j,ne)},pr=w==="week"?wt:re,Gr=(j,ne,Ee)=>{ae({isOpen:!0,type:j,day:ne||"",classId:Ee||""})},On=async()=>{let j=[...p];Bt.type==="clearAll"?j=[]:Bt.type==="clearDay"&&Bt.day?j=j.filter(ne=>ne.day!==Bt.day):Bt.type==="clearClass"&&Bt.classId&&(j=j.filter(ne=>ne.classId!==Bt.classId)),await y(j),ae({isOpen:!1,type:"",day:"",classId:""}),_t(!1)},ct=(j,ne,Ee)=>t&&j.length===0?null:o.jsxs("div",{className:"h-full flex flex-col gap-1",children:[j.map(xe=>{const Se=r.find(Ir=>Ir.id===xe.subjectId),me=n.find(Ir=>Ir.id===xe.teacherId),Me=s.find(Ir=>Ir.id===xe.classId),qe=ee(xe),Rt=A.find(Ir=>Ir.id===xe.roomId),an=Rt?Rt.name:xe.roomId;return o.jsxs("div",{draggable:!t,onDragStart:t?void 0:Ir=>et(Ir,xe),onDragEnd:t?void 0:Ze,onClick:t?void 0:()=>te(xe),onContextMenu:t?void 0:Ir=>Ie(Ir,xe,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${qe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:qe.length===0&&(Se!=null&&Se.color)?{backgroundColor:`${Se.color}40`}:{},children:[o.jsxs("div",{className:"flex justify-between items-center gap-1",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:w==="subject"||w==="week"?Me==null?void 0:Me.name:Se==null?void 0:Se.name}),xe.direction&&o.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:xe.direction})]}),w==="week"&&o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:Se==null?void 0:Se.name}),o.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[o.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:me==null?void 0:me.name,children:[o.jsx(M,{name:w==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),o.jsx("span",{className:"truncate",children:w==="teacher"?Me==null?void 0:Me.name:me==null?void 0:me.name})]}),an&&o.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Rt?`: ${Rt.capacity}, : ${Rt.type}`:"",children:an})]}),qe.length>0&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${qe.join(", ")}`,children:"!"})]},xe.id)}),!t&&j.length<3&&o.jsx("button",{onClick:()=>pe(Ee,typeof ne=="number"?ne:parseInt(Ee),w==="week"?ne:B),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:o.jsx(M,{name:"Plus",size:16})})]}),zr=()=>{if(!C)return o.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const j=p.filter(ne=>ne.day===B&&ne.shift===v&&(w==="class"&&ne.classId===C||w==="teacher"&&ne.teacherId===C||w==="subject"&&ne.subjectId===C)).sort((ne,Ee)=>ne.period-Ee.period);return j.length===0?o.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",B,"  ",v,"."]}):o.jsx("div",{className:"p-4 space-y-4",children:j.map(ne=>{const Ee=r.find(Rt=>Rt.id===ne.subjectId),xe=n.find(Rt=>Rt.id===ne.teacherId),Se=s.find(Rt=>Rt.id===ne.classId),me=A.find(Rt=>Rt.id===ne.roomId),Me=me?me.name:ne.roomId,qe=ee(ne);return o.jsxs("div",{onClick:t?void 0:()=>te(ne),className:`rounded-xl p-4 shadow-sm border ${qe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[ne.period," "]}),qe.length>0&&o.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${qe.join(", ")}`,children:"!"})]}),o.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[Ee==null?void 0:Ee.name," ",ne.direction&&`(${ne.direction})`]}),o.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[Se==null?void 0:Se.name,"  ",xe==null?void 0:xe.name]}),Me&&o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Me]})]},ne.id)})})};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),ze.visible&&o.jsx(XO,{x:ze.x,y:ze.y,onClose:()=>ie({...ze,visible:!1}),actions:Ce}),o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[o.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>E(de.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${v===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>E(de.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${v===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),w!=="week"&&o.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:wt.map(j=>o.jsx("button",{onClick:()=>x(j),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${B===j?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:j},j))}),!t&&o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:o.jsx(M,{name:"RotateCcw",size:18})}),o.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:o.jsx(M,{name:"RotateCw",size:18})})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>{b("class"),F("")},className:`p-2 rounded-md ${w==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(M,{name:"GraduationCap",size:18})}),o.jsx("button",{onClick:()=>{b("teacher"),F("")},className:`p-2 rounded-md ${w==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(M,{name:"Users",size:18})}),o.jsx("button",{onClick:()=>{b("subject"),F("")},className:`p-2 rounded-md ${w==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(M,{name:"BookOpen",size:18})}),o.jsx("button",{onClick:()=>{var j;b("week"),F(((j=s[0])==null?void 0:j.id)||"")},className:`p-2 rounded-md ${w==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:o.jsx(M,{name:"Calendar",size:18})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[o.jsx(M,{name:"Filter",size:16,className:"text-slate-400"}),o.jsxs("select",{value:C,onChange:j=>F(j.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[o.jsxs("option",{value:"",children:[" ",w==="class"?"":w==="teacher"?"":w==="week"?" ()":""]}),(w==="class"||w==="week")&&s.filter(j=>j.shift===v).map(j=>o.jsx("option",{value:j.id,children:j.name},j.id)),w==="teacher"&&n.map(j=>o.jsx("option",{value:j.id,children:j.name},j.id)),w==="subject"&&r.map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]})]}),o.jsx("input",{placeholder:"...",value:R,onChange:j=>L(j.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),o.jsx("input",{placeholder:"...",value:Q,onChange:j=>Ge(j.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&o.jsxs("button",{onClick:()=>_t(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[o.jsx(M,{name:"List",size:16})," . ."]}),(C||w==="week")&&o.jsx("button",{onClick:()=>Xe(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:o.jsx(M,{name:"Printer",size:16})})]})]}),Pe&&!t&&C&&o.jsx("div",{className:"flex justify-center mb-4 no-print",children:o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>gr(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${on?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:o.jsx(M,{name:"Columns",size:16})}),o.jsx("button",{onClick:()=>gr(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${on?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:o.jsx(M,{name:"Rows",size:16})})]})}),o.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:o.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Pe&&on&&!t&&C?zr():o.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:w==="week"?"":w==="class"?"":w==="teacher"?"":""}),pr.map(j=>o.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:w==="week"?j:`${j} `},j))]})}),o.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:z.length>0?z.map(j=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:j.name}),pr.map(ne=>{const Ee=Ae(j.id,ne),xe=`${j.id}-${ne}`,Se={rowId:j.id,colKey:ne};return o.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${Fe===xe?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:me=>Ie(me,null,Se),onDragOver:t?void 0:me=>it(me,Se),onDrop:t?void 0:me=>Ke(me,Se),children:ct(Ee,ne,j.id)},ne)})]},j.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),o.jsx(Or,{isOpen:_,onClose:()=>S(!1),title:U.id?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[o.jsxs("span",{children:[": ",U.day]}),o.jsxs("span",{children:[": ",U.period]}),o.jsxs("span",{children:[": ",U.shift===de.First?"1 ":"2 "]})]}),Ne.length>0&&o.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Ne.map(j=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(M,{name:"AlertTriangle",size:14}),j]},j))}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(Ic,{options:s.filter(j=>j.shift===v).map(j=>({value:j.id,label:j.name})),value:U.classId||null,onChange:j=>{N({...U,classId:j}),Y({...U,classId:j})},placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(Ic,{options:r.map(j=>({value:j.id,label:j.name})),value:U.subjectId||null,onChange:j=>{N({...U,subjectId:j}),Y({...U,subjectId:j})},placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(Ic,{options:[{label:"",options:tt.map(j=>({value:j.id,label:j.name}))},{label:"",options:Tt.map(j=>({value:j.id,label:j.name}))}],value:U.teacherId||null,onChange:j=>N({...U,teacherId:j}),placeholder:" ",groupBy:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:U.direction||"",onChange:j=>N({...U,direction:j.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:U.roomId||"",onChange:j=>{N({...U,roomId:j.target.value}),Y({...U,roomId:j.target.value})},children:[o.jsx("option",{value:"",children:" "}),A.map(j=>o.jsxs("option",{value:j.id,children:[j.name," (",j.capacity," )"]},j.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[U.id&&o.jsx("button",{onClick:()=>Ve(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),o.jsx("button",{onClick:Qe,className:"btn-primary btn-ripple",children:""})]})]})}),o.jsx(Or,{isOpen:qt,onClose:()=>_t(!1),title:"   ",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),o.jsx("button",{onClick:()=>Gr("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),o.jsx("div",{className:"flex gap-2",children:o.jsx("select",{value:T,onChange:j=>P(j.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:wt.map(j=>o.jsx("option",{value:j,children:j},j))})}),o.jsxs("button",{onClick:()=>Gr("clearDay",T),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",T]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{value:V,onChange:j=>J(j.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[o.jsx("option",{value:"",disabled:!0,children:" "}),s.map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))]})}),o.jsx("button",{onClick:()=>{V&&Gr("clearClass",void 0,V)},disabled:!V,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),o.jsxs(Or,{isOpen:Bt.isOpen,onClose:()=>ae({...Bt,isOpen:!1}),title:"",children:[o.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>ae({...Bt,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),o.jsx("button",{onClick:On,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),We&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[o.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[o.jsx(M,{name:"Printer",size:16})," "]}),o.jsx("button",{onClick:()=>Xe(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:o.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:mt}),o.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),o.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:ot||w==="week"?"":w==="class"?"":w==="teacher"?"":""}),Kt.map(j=>o.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:ot||w==="week"?j:`${j} `},j))]})}),o.jsx("tbody",{children:bt.map(j=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:j.name}),Kt.map(ne=>{const Ee=yt(j.id,ne);return o.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:Ee.map(xe=>{const Se=r.find(Tn=>Tn.id===xe.subjectId),me=n.find(Tn=>Tn.id===xe.teacherId),Me=s.find(Tn=>Tn.id===xe.classId),qe=A.find(Tn=>Tn.id===xe.roomId),Rt=qe?qe.name:xe.roomId,an=w==="teacher",Us=w==="subject"||w==="week"||ot&&an?Me==null?void 0:Me.name:Se==null?void 0:Se.name,Mt=an?Me==null?void 0:Me.name:me==null?void 0:me.name;return o.jsxs("div",{className:"mb-1",children:[o.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Us,xe.direction&&` (${xe.direction})`]}),o.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[o.jsx("span",{children:Mt}),Rt&&o.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Rt})]})]},xe.id)})},ne)})]},j.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var k0=function(t,e){return k0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},k0(t,e)};function hs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");k0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var F0=function(){return F0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},F0.apply(this,arguments)};function un(t,e,r,n){function s(A){return A instanceof r?A:new r(function(i){i(A)})}return new(r||(r=Promise))(function(A,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(a,l)}c((n=n.apply(t,[])).next())})}function Yr(t,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,s,A,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){r.label=c[1];break}if(c[0]===6&&r.label<A[1]){r.label=A[1],A=c;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(c);break}A[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function kd(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,A;n<s;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||e)}var AA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Sg=function(t,e){return AA.fromClientRect(t,e.getBoundingClientRect())},oH=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new AA(0,0,n,s)},Ug=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},ur=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},qb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fd=0;Fd<qb.length;Fd++)aH[qb.charCodeAt(Fd)]=Fd;var Xb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sd=0;Sd<Xb.length;Sd++)rc[Xb.charCodeAt(Sd)]=Sd;var lH=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=rc[t.charCodeAt(n)],i=rc[t.charCodeAt(n+1)],a=rc[t.charCodeAt(n+2)],l=rc[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|l&63;return c},cH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},uH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},to=5,ly=11,Np=2,dH=ly-to,lk=65536>>to,hH=1<<to,Rp=hH-1,fH=1024>>to,gH=lk+fH,pH=gH,mH=32,wH=pH+mH,xH=65536>>ly,yH=1<<dH,vH=yH-1,Jb=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},BH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},bH=function(t,e){var r=lH(t),n=Array.isArray(r)?uH(r):new Uint32Array(r),s=Array.isArray(r)?cH(r):new Uint16Array(r),A=24,i=Jb(s,A/2,n[4]/2),a=n[5]===2?Jb(s,(A+n[4])/2):BH(n,Math.ceil((A+n[4])/4));return new CH(n[0],n[1],n[2],n[3],i,a)},CH=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>to],r=(r<<Np)+(e&Rp),this.data[r];if(e<=65535)return r=this.index[lk+(e-55296>>to)],r=(r<<Np)+(e&Rp),this.data[r];if(e<this.highStart)return r=wH-xH+(e>>ly),r=this.index[r],r+=e>>to&vH,r=this.index[r],r=(r<<Np)+(e&Rp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Yb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_H=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ud=0;Ud<Yb.length;Ud++)_H[Yb.charCodeAt(Ud)]=Ud;var IH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Zb=50,EH=1,ck=2,uk=3,TH=4,kH=5,eC=7,dk=8,tC=9,HA=10,S0=11,rC=12,U0=13,FH=14,nc=15,Q0=16,Qd=17,Hl=18,SH=19,nC=20,N0=21,Vl=22,jp=23,Mo=24,Fn=25,sc=26,Ac=27,Oo=28,UH=29,zi=30,QH=31,Nd=32,Rd=33,R0=34,j0=35,D0=36,uu=37,P0=38,Ch=39,_h=40,Dp=41,hk=42,NH=43,RH=[9001,65288],fk="!",dt="",jd="",L0=bH(IH),js=[zi,D0],M0=[EH,ck,uk,kH],gk=[HA,dk],sC=[Ac,sc],jH=M0.concat(gk),AC=[P0,Ch,_h,R0,j0],DH=[nc,U0],PH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(A,i){var a=L0.get(A);if(a>Zb?(s.push(!0),a-=Zb):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(i),r.push(Q0);if(a===TH||a===S0){if(i===0)return n.push(i),r.push(zi);var l=r[i-1];return jH.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(zi))}if(n.push(i),a===QH)return r.push(e==="strict"?N0:uu);if(a===hk||a===UH)return r.push(zi);if(a===NH)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(uu):r.push(zi);r.push(a)}),[n,r,s]},Pp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=r;A<=n.length;){A++;var i=n[A];if(i===e)return!0;if(i!==HA)break}if(s===HA)for(var A=r;A>0;){A--;var a=n[A];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==HA)break}if(a!==HA)break}return!1},iC=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===HA)r--;else return n}return 0},LH=function(t,e,r,n,s){if(r[n]===0)return dt;var A=n-1;if(Array.isArray(s)&&s[A]===!0)return dt;var i=A-1,a=A+1,l=e[A],c=i>=0?e[i]:0,d=e[a];if(l===ck&&d===uk)return dt;if(M0.indexOf(l)!==-1)return fk;if(M0.indexOf(d)!==-1||gk.indexOf(d)!==-1)return dt;if(iC(A,e)===dk)return jd;if(L0.get(t[A])===S0||(l===Nd||l===Rd)&&L0.get(t[a])===S0||l===eC||d===eC||l===tC||[HA,U0,nc].indexOf(l)===-1&&d===tC||[Qd,Hl,SH,Mo,Oo].indexOf(d)!==-1||iC(A,e)===Vl||Pp(jp,Vl,A,e)||Pp([Qd,Hl],N0,A,e)||Pp(rC,rC,A,e))return dt;if(l===HA)return jd;if(l===jp||d===jp)return dt;if(d===Q0||l===Q0)return jd;if([U0,nc,N0].indexOf(d)!==-1||l===FH||c===D0&&DH.indexOf(l)!==-1||l===Oo&&d===D0||d===nC||js.indexOf(d)!==-1&&l===Fn||js.indexOf(l)!==-1&&d===Fn||l===Ac&&[uu,Nd,Rd].indexOf(d)!==-1||[uu,Nd,Rd].indexOf(l)!==-1&&d===sc||js.indexOf(l)!==-1&&sC.indexOf(d)!==-1||sC.indexOf(l)!==-1&&js.indexOf(d)!==-1||[Ac,sc].indexOf(l)!==-1&&(d===Fn||[Vl,nc].indexOf(d)!==-1&&e[a+1]===Fn)||[Vl,nc].indexOf(l)!==-1&&d===Fn||l===Fn&&[Fn,Oo,Mo].indexOf(d)!==-1)return dt;if([Fn,Oo,Mo,Qd,Hl].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===Fn)return dt;if([Oo,Mo].indexOf(f)!==-1)h--;else break}if([Ac,sc].indexOf(d)!==-1)for(var h=[Qd,Hl].indexOf(l)!==-1?i:A;h>=0;){var f=e[h];if(f===Fn)return dt;if([Oo,Mo].indexOf(f)!==-1)h--;else break}if(P0===l&&[P0,Ch,R0,j0].indexOf(d)!==-1||[Ch,R0].indexOf(l)!==-1&&[Ch,_h].indexOf(d)!==-1||[_h,j0].indexOf(l)!==-1&&d===_h||AC.indexOf(l)!==-1&&[nC,sc].indexOf(d)!==-1||AC.indexOf(d)!==-1&&l===Ac||js.indexOf(l)!==-1&&js.indexOf(d)!==-1||l===Mo&&js.indexOf(d)!==-1||js.concat(Fn).indexOf(l)!==-1&&d===Vl&&RH.indexOf(t[a])===-1||js.concat(Fn).indexOf(d)!==-1&&l===Hl)return dt;if(l===Dp&&d===Dp){for(var p=r[A],y=1;p>0&&(p--,e[p]===Dp);)y++;if(y%2!==0)return dt}return l===Nd&&d===Rd?dt:jd},MH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=PH(t,e.lineBreak),n=r[0],s=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(a){return[Fn,zi,hk].indexOf(a)!==-1?uu:a}));var i=e.wordBreak==="keep-all"?A.map(function(a,l){return a&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,i]},OH=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===fk,this.start=n,this.end=s}return t.prototype.slice=function(){return ur.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),HH=function(t,e){var r=Ug(t),n=MH(r,e),s=n[0],A=n[1],i=n[2],a=r.length,l=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var d=dt;c<a&&(d=LH(r,A,s,++c,i))===dt;);if(d!==dt||c===a){var h=new OH(r,d,l,c);return l=c,{value:h,done:!1}}return{done:!0,value:null}}}},VH=1,KH=2,Hu=4,oC=8,Cf=10,aC=47,Ec=92,GH=9,zH=32,Dd=34,Kl=61,$H=35,WH=36,qH=37,Pd=39,Ld=40,Gl=41,XH=95,xn=45,JH=33,YH=60,ZH=62,eV=64,tV=91,rV=93,nV=61,sV=123,Md=63,AV=125,lC=124,iV=126,oV=128,cC=65533,Lp=42,Xi=43,aV=44,lV=58,cV=59,du=46,uV=0,dV=8,hV=11,fV=14,gV=31,pV=127,ps=-1,pk=48,mk=97,wk=101,mV=102,wV=117,xV=122,xk=65,yk=69,vk=70,yV=85,vV=90,tn=function(t){return t>=pk&&t<=57},BV=function(t){return t>=55296&&t<=57343},Ho=function(t){return tn(t)||t>=xk&&t<=vk||t>=mk&&t<=mV},bV=function(t){return t>=mk&&t<=xV},CV=function(t){return t>=xk&&t<=vV},_V=function(t){return bV(t)||CV(t)},IV=function(t){return t>=oV},Od=function(t){return t===Cf||t===GH||t===zH},_f=function(t){return _V(t)||IV(t)||t===XH},uC=function(t){return _f(t)||tn(t)||t===xn},EV=function(t){return t>=uV&&t<=dV||t===hV||t>=fV&&t<=gV||t===pV},EA=function(t,e){return t!==Ec?!1:e!==Cf},Hd=function(t,e,r){return t===xn?_f(e)||EA(e,r):_f(t)?!0:!!(t===Ec&&EA(t,e))},Mp=function(t,e,r){return t===Xi||t===xn?tn(e)?!0:e===du&&tn(r):tn(t===du?e:t)},TV=function(t){var e=0,r=1;(t[e]===Xi||t[e]===xn)&&(t[e]===xn&&(r=-1),e++);for(var n=[];tn(t[e]);)n.push(t[e++]);var s=n.length?parseInt(ur.apply(void 0,n),10):0;t[e]===du&&e++;for(var A=[];tn(t[e]);)A.push(t[e++]);var i=A.length,a=i?parseInt(ur.apply(void 0,A),10):0;(t[e]===yk||t[e]===wk)&&e++;var l=1;(t[e]===Xi||t[e]===xn)&&(t[e]===xn&&(l=-1),e++);for(var c=[];tn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(ur.apply(void 0,c),10):0;return r*(s+a*Math.pow(10,-i))*Math.pow(10,l*d)},kV={type:2},FV={type:3},SV={type:4},UV={type:13},QV={type:8},NV={type:21},RV={type:9},jV={type:10},DV={type:11},PV={type:12},LV={type:14},Vd={type:23},MV={type:1},OV={type:25},HV={type:24},VV={type:26},KV={type:27},GV={type:28},zV={type:29},$V={type:31},O0={type:32},Bk=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Ug(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==O0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Dd:return this.consumeStringToken(Dd);case $H:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(uC(r)||EA(n,s)){var A=Hd(r,n,s)?KH:VH,i=this.consumeName();return{type:5,value:i,flags:A}}break;case WH:if(this.peekCodePoint(0)===Kl)return this.consumeCodePoint(),UV;break;case Pd:return this.consumeStringToken(Pd);case Ld:return kV;case Gl:return FV;case Lp:if(this.peekCodePoint(0)===Kl)return this.consumeCodePoint(),LV;break;case Xi:if(Mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case aV:return SV;case xn:var a=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Mp(a,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Hd(a,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===xn&&c===ZH)return this.consumeCodePoint(),this.consumeCodePoint(),HV;break;case du:if(Mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case aC:if(this.peekCodePoint(0)===Lp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Lp&&(d=this.consumeCodePoint(),d===aC))return this.consumeToken();if(d===ps)return this.consumeToken()}break;case lV:return VV;case cV:return KV;case YH:if(this.peekCodePoint(0)===JH&&this.peekCodePoint(1)===xn&&this.peekCodePoint(2)===xn)return this.consumeCodePoint(),this.consumeCodePoint(),OV;break;case eV:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Hd(h,f,p)){var i=this.consumeName();return{type:7,value:i}}break;case tV:return GV;case Ec:if(EA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case rV:return zV;case nV:if(this.peekCodePoint(0)===Kl)return this.consumeCodePoint(),QV;break;case sV:return DV;case AV:return PV;case wV:case yV:var y=this.peekCodePoint(0),v=this.peekCodePoint(1);return y===Xi&&(Ho(v)||v===Md)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case lC:if(this.peekCodePoint(0)===Kl)return this.consumeCodePoint(),RV;if(this.peekCodePoint(0)===lC)return this.consumeCodePoint(),NV;break;case iV:if(this.peekCodePoint(0)===Kl)return this.consumeCodePoint(),jV;break;case ps:return O0}return Od(e)?(this.consumeWhiteSpace(),$V):tn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):_f(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ur(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Ho(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Md&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(ur.apply(void 0,e.map(function(l){return l===Md?pk:l})),16),A=parseInt(ur.apply(void 0,e.map(function(l){return l===Md?vk:l})),16);return{type:30,start:s,end:A}}var i=parseInt(ur.apply(void 0,e),16);if(this.peekCodePoint(0)===xn&&Ho(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var a=[];Ho(r)&&a.length<6;)a.push(r),r=this.consumeCodePoint();var A=parseInt(ur.apply(void 0,a),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ld?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ld?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ps)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Pd||r===Dd){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ps||this.peekCodePoint(0)===Gl)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Vd)}for(;;){var s=this.consumeCodePoint();if(s===ps||s===Gl)return{type:22,value:ur.apply(void 0,e)};if(Od(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ps||this.peekCodePoint(0)===Gl?(this.consumeCodePoint(),{type:22,value:ur.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Vd);if(s===Dd||s===Pd||s===Ld||EV(s))return this.consumeBadUrlRemnants(),Vd;if(s===Ec)if(EA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Vd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Od(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Gl||e===ps)return;EA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=ur.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===ps||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===Cf)return this._value.splice(0,n),MV;if(s===Ec){var A=this._value[n+1];A!==ps&&A!==void 0&&(A===Cf?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):EA(s,A)&&(r+=this.consumeStringSlice(n),r+=ur(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Hu,n=this.peekCodePoint(0);for((n===Xi||n===xn)&&e.push(this.consumeCodePoint());tn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===du&&tn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=oC;tn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===yk||n===wk)&&((s===Xi||s===xn)&&tn(A)||tn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=oC;tn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[TV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Hd(s,A,i)){var a=this.consumeName();return{type:15,number:r,flags:n,unit:a}}return s===qH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Ho(e)){for(var r=ur(e);Ho(this.peekCodePoint(0))&&r.length<6;)r+=ur(this.consumeCodePoint());Od(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||BV(n)||n>1114111?cC:n}return e===ps?cC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(uC(r))e+=ur(r);else if(EA(r,this.peekCodePoint(0)))e+=ur(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),bk=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new Bk;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||qV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?O0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Vu=function(t){return t.type===15},pl=function(t){return t.type===17},Ut=function(t){return t.type===20},WV=function(t){return t.type===0},H0=function(t,e){return Ut(t)&&t.value===e},Ck=function(t){return t.type!==31},Xa=function(t){return t.type!==31&&t.type!==4},Fs=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},qV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},xi=function(t){return t.type===17||t.type===15},wr=function(t){return t.type===16||xi(t)},_k=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Hr={type:17,number:0,flags:Hu},cy={type:16,number:50,flags:Hu},VA={type:16,number:100,flags:Hu},ic=function(t,e,r){var n=t[0],s=t[1];return[Ot(n,e),Ot(typeof s<"u"?s:n,r)]},Ot=function(t,e){if(t.type===16)return t.number/100*e;if(Vu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Ik="deg",Ek="grad",Tk="rad",kk="turn",Qg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Ik:return Math.PI*e.number/180;case Ek:return Math.PI/200*e.number;case Tk:return e.number;case kk:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Fk=function(t){return t.type===15&&(t.unit===Ik||t.unit===Ek||t.unit===Tk||t.unit===kk)},Sk=function(t){var e=t.filter(Ut).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Hr,Hr];case"to top":case"bottom":return Xn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Hr,VA];case"to right":case"left":return Xn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[VA,VA];case"to bottom":case"top":return Xn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[VA,Hr];case"to left":case"right":return Xn(270)}return 0},Xn=function(t){return Math.PI*t/180},Ai={name:"color",parse:function(t,e){if(e.type===18){var r=XV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return KA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return KA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return KA(parseInt(n,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return KA(parseInt(n,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var a=Xs[e.value.toUpperCase()];if(typeof a<"u")return a}return Xs.TRANSPARENT}},ii=function(t){return(255&t)===0},kr=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},KA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},dC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},hC=function(t,e){var r=e.filter(Xa);if(r.length===3){var n=r.map(dC),s=n[0],A=n[1],i=n[2];return KA(s,A,i,1)}if(r.length===4){var a=r.map(dC),s=a[0],A=a[1],i=a[2],l=a[3];return KA(s,A,i,l)}return 0};function Op(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var fC=function(t,e){var r=e.filter(Xa),n=r[0],s=r[1],A=r[2],i=r[3],a=(n.type===17?Xn(n.number):Qg.parse(t,n))/(Math.PI*2),l=wr(s)?s.number/100:0,c=wr(A)?A.number/100:0,d=typeof i<"u"&&wr(i)?Ot(i,1):1;if(l===0)return KA(c*255,c*255,c*255,1);var h=c<=.5?c*(l+1):c+l-c*l,f=c*2-h,p=Op(f,h,a+1/3),y=Op(f,h,a),v=Op(f,h,a-1/3);return KA(p*255,y*255,v*255,d)},XV={hsl:fC,hsla:fC,rgb:hC,rgba:hC},Tc=function(t,e){return Ai.parse(t,bk.create(e).parseComponentValue())},Xs={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},JV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ut(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},YV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ng=function(t,e){var r=Ai.parse(t,e[0]),n=e[1];return n&&wr(n)?{color:r,stop:n}:{color:r,stop:null}},gC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Hr),n.stop===null&&(n.stop=VA);for(var s=[],A=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var l=Ot(a,e);l>A?s.push(l):s.push(A),A=l}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],p=(d-f)/(h+1),y=1;y<=h;y++)s[c+y-1]=p*y;c=null}}return t.map(function(v,E){var B=v.color;return{color:B,stop:Math.max(Math.min(1,s[E]/e),0)}})},ZV=function(t,e,r){var n=e/2,s=r/2,A=Ot(t[0],e)-n,i=s-Ot(t[1],r);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},e3=function(t,e,r){var n=typeof t=="number"?t:ZV(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,i=r/2,a=s/2,l=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[s,A-c,A+c,i-l,i+l]},ss=function(t,e){return Math.sqrt(t*t+e*e)},pC=function(t,e,r,n,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,a){var l=a[0],c=a[1],d=ss(r-l,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:a,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},t3=function(t,e,r,n,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)A=i=Math.min(ss(e,r),ss(e,r-s),ss(e-n,r),ss(e-n,r-s));else if(t.shape===1){var a=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=pC(n,s,e,r,!0),c=l[0],d=l[1];A=ss(c-e,(d-r)/a),i=a*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)A=i=Math.max(ss(e,r),ss(e,r-s),ss(e-n,r),ss(e-n,r-s));else if(t.shape===1){var a=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=pC(n,s,e,r,!1),c=h[0],d=h[1];A=ss(c-e,(d-r)/a),i=a*A}break}return Array.isArray(t.size)&&(A=Ot(t.size[0],n),i=t.size.length===2?Ot(t.size[1],s):A),[A,i]},r3=function(t,e){var r=Xn(180),n=[];return Fs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){r=Sk(s);return}else if(Fk(i)){r=Qg.parse(t,i);return}}var a=Ng(t,s);n.push(a)}),{angle:r,stops:n,type:1}},Kd=function(t,e){var r=Xn(180),n=[];return Fs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=Sk(s);return}else if(Fk(i)){r=(Qg.parse(t,i)+Xn(270))%Xn(360);return}}var a=Ng(t,s);n.push(a)}),{angle:r,stops:n,type:1}},n3=function(t,e){var r=Xn(180),n=[],s=1,A=0,i=3,a=[];return Fs(e).forEach(function(l,c){var d=l[0];if(c===0){if(Ut(d)&&d.value==="linear"){s=1;return}else if(Ut(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=Ai.parse(t,d.values[0]);n.push({stop:Hr,color:h})}else if(d.name==="to"){var h=Ai.parse(t,d.values[0]);n.push({stop:VA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Xa);if(f.length===2){var h=Ai.parse(t,f[1]),p=f[0];pl(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),s===1?{angle:(r+Xn(180))%Xn(360),stops:n,type:s}:{size:i,shape:A,stops:n,position:a,type:s}},Uk="closest-side",Qk="farthest-side",Nk="closest-corner",Rk="farthest-corner",jk="circle",Dk="ellipse",Pk="cover",Lk="contain",s3=function(t,e){var r=0,n=3,s=[],A=[];return Fs(e).forEach(function(i,a){var l=!0;if(a===0){var c=!1;l=i.reduce(function(h,f){if(c)if(Ut(f))switch(f.value){case"center":return A.push(cy),h;case"top":case"left":return A.push(Hr),h;case"right":case"bottom":return A.push(VA),h}else(wr(f)||xi(f))&&A.push(f);else if(Ut(f))switch(f.value){case jk:return r=0,!1;case Dk:return r=1,!1;case"at":return c=!0,!1;case Uk:return n=0,!1;case Pk:case Qk:return n=1,!1;case Lk:case Nk:return n=2,!1;case Rk:return n=3,!1}else if(xi(f)||wr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},l)}if(l){var d=Ng(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:A,type:2}},Gd=function(t,e){var r=0,n=3,s=[],A=[];return Fs(e).forEach(function(i,a){var l=!0;if(a===0?l=i.reduce(function(d,h){if(Ut(h))switch(h.value){case"center":return A.push(cy),!1;case"top":case"left":return A.push(Hr),!1;case"right":case"bottom":return A.push(VA),!1}else if(wr(h)||xi(h))return A.push(h),!1;return d},l):a===1&&(l=i.reduce(function(d,h){if(Ut(h))switch(h.value){case jk:return r=0,!1;case Dk:return r=1,!1;case Lk:case Uk:return n=0,!1;case Qk:return n=1,!1;case Nk:return n=2,!1;case Pk:case Rk:return n=3,!1}else if(xi(h)||wr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var c=Ng(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:A,type:2}},A3=function(t){return t.type===1},i3=function(t){return t.type===2},uy={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=Mk[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function o3(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Mk[t.name])}var Mk={"linear-gradient":r3,"-moz-linear-gradient":Kd,"-ms-linear-gradient":Kd,"-o-linear-gradient":Kd,"-webkit-linear-gradient":Kd,"radial-gradient":s3,"-moz-radial-gradient":Gd,"-ms-radial-gradient":Gd,"-o-radial-gradient":Gd,"-webkit-radial-gradient":Gd,"-webkit-gradient":n3},a3={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Xa(n)&&o3(n)}).map(function(n){return uy.parse(t,n)})}},l3={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ut(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},c3={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Fs(e).map(function(r){return r.filter(wr)}).map(_k)}},u3={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Fs(e).map(function(r){return r.filter(Ut).map(function(n){return n.value}).join(" ")}).map(d3)}},d3=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ca;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Ca||(Ca={}));var h3={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Fs(e).map(function(r){return r.filter(f3)})}},f3=function(t){return Ut(t)||wr(t)},Rg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},g3=Rg("top"),p3=Rg("right"),m3=Rg("bottom"),w3=Rg("left"),jg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return _k(r.filter(wr))}}},x3=jg("top-left"),y3=jg("top-right"),v3=jg("bottom-right"),B3=jg("bottom-left"),Dg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},b3=Dg("top"),C3=Dg("right"),_3=Dg("bottom"),I3=Dg("left"),Pg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Vu(r)?r.number:0}}},E3=Pg("top"),T3=Pg("right"),k3=Pg("bottom"),F3=Pg("left"),S3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},U3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Q3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ut).reduce(function(r,n){return r|N3(n.value)},0)}},N3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},R3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},j3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},If;(function(t){t.NORMAL="normal",t.STRICT="strict"})(If||(If={}));var D3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return If.STRICT;case"normal":default:return If.NORMAL}}},P3={name:"line-height",initialValue:"normal",prefix:!1,type:4},mC=function(t,e){return Ut(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:wr(t)?Ot(t,e):e},L3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:uy.parse(t,e)}},M3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},V0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Lg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},O3=Lg("top"),H3=Lg("right"),V3=Lg("bottom"),K3=Lg("left"),G3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ut).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},z3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Mg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},$3=Mg("top"),W3=Mg("right"),q3=Mg("bottom"),X3=Mg("left"),J3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Y3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Z3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H0(e[0],"none")?[]:Fs(e).map(function(r){for(var n={color:Xs.TRANSPARENT,offsetX:Hr,offsetY:Hr,blur:Hr},s=0,A=0;A<r.length;A++){var i=r[A];xi(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=Ai.parse(t,i)}return n})}},e5={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},t5={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=s5[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},r5=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},n5=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[r,n,s,A,i,a]:null},s5={matrix:r5,matrix3d:n5},wC={type:16,number:50,flags:Hu},A5=[wC,wC],i5={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(wr);return r.length!==2?A5:[r[0],r[1]]}},o5={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},kc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(kc||(kc={}));var a5={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return kc.BREAK_ALL;case"keep-all":return kc.KEEP_ALL;case"normal":default:return kc.NORMAL}}},l5={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(pl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Ok={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},c5={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return pl(e)?e.number:1}},u5={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},d5={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ut).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},h5={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},f5={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},g5={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(pl(e))return e.number;if(Ut(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},p5={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ut).map(function(r){return r.value})}},m5={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Br=function(t,e){return(t&e)!==0},w5={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},x5={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(Ck),A=0;A<s.length;A++){var i=s[A],a=s[A+1];if(i.type===20){var l=a&&pl(a)?a.number:1;n.push({counter:i.value,increment:l})}}return n}},y5={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(Ck),s=0;s<n.length;s++){var A=n[s],i=n[s+1];if(Ut(A)&&A.value!=="none"){var a=i&&pl(i)?i.number:0;r.push({counter:A.value,reset:a})}}return r}},v5={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Vu).map(function(r){return Ok.parse(t,r)})}},B5={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(WV);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,a=s[A+1].value;n.push({open:i,close:a})}return n}},xC=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},b5={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H0(e[0],"none")?[]:Fs(e).map(function(r){for(var n={color:255,offsetX:Hr,offsetY:Hr,blur:Hr,spread:Hr,inset:!1},s=0,A=0;A<r.length;A++){var i=r[A];H0(i,"inset")?n.inset=!0:xi(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=Ai.parse(t,i)}return n})}},C5={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ut).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},_5={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},I5={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Vu(e)?e.number:0}},E5=function(){function t(e,r){var n,s;this.animationDuration=Re(e,v5,r.animationDuration),this.backgroundClip=Re(e,JV,r.backgroundClip),this.backgroundColor=Re(e,YV,r.backgroundColor),this.backgroundImage=Re(e,a3,r.backgroundImage),this.backgroundOrigin=Re(e,l3,r.backgroundOrigin),this.backgroundPosition=Re(e,c3,r.backgroundPosition),this.backgroundRepeat=Re(e,u3,r.backgroundRepeat),this.backgroundSize=Re(e,h3,r.backgroundSize),this.borderTopColor=Re(e,g3,r.borderTopColor),this.borderRightColor=Re(e,p3,r.borderRightColor),this.borderBottomColor=Re(e,m3,r.borderBottomColor),this.borderLeftColor=Re(e,w3,r.borderLeftColor),this.borderTopLeftRadius=Re(e,x3,r.borderTopLeftRadius),this.borderTopRightRadius=Re(e,y3,r.borderTopRightRadius),this.borderBottomRightRadius=Re(e,v3,r.borderBottomRightRadius),this.borderBottomLeftRadius=Re(e,B3,r.borderBottomLeftRadius),this.borderTopStyle=Re(e,b3,r.borderTopStyle),this.borderRightStyle=Re(e,C3,r.borderRightStyle),this.borderBottomStyle=Re(e,_3,r.borderBottomStyle),this.borderLeftStyle=Re(e,I3,r.borderLeftStyle),this.borderTopWidth=Re(e,E3,r.borderTopWidth),this.borderRightWidth=Re(e,T3,r.borderRightWidth),this.borderBottomWidth=Re(e,k3,r.borderBottomWidth),this.borderLeftWidth=Re(e,F3,r.borderLeftWidth),this.boxShadow=Re(e,b5,r.boxShadow),this.color=Re(e,S3,r.color),this.direction=Re(e,U3,r.direction),this.display=Re(e,Q3,r.display),this.float=Re(e,R3,r.cssFloat),this.fontFamily=Re(e,h5,r.fontFamily),this.fontSize=Re(e,f5,r.fontSize),this.fontStyle=Re(e,m5,r.fontStyle),this.fontVariant=Re(e,p5,r.fontVariant),this.fontWeight=Re(e,g5,r.fontWeight),this.letterSpacing=Re(e,j3,r.letterSpacing),this.lineBreak=Re(e,D3,r.lineBreak),this.lineHeight=Re(e,P3,r.lineHeight),this.listStyleImage=Re(e,L3,r.listStyleImage),this.listStylePosition=Re(e,M3,r.listStylePosition),this.listStyleType=Re(e,V0,r.listStyleType),this.marginTop=Re(e,O3,r.marginTop),this.marginRight=Re(e,H3,r.marginRight),this.marginBottom=Re(e,V3,r.marginBottom),this.marginLeft=Re(e,K3,r.marginLeft),this.opacity=Re(e,c5,r.opacity);var A=Re(e,G3,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=Re(e,z3,r.overflowWrap),this.paddingTop=Re(e,$3,r.paddingTop),this.paddingRight=Re(e,W3,r.paddingRight),this.paddingBottom=Re(e,q3,r.paddingBottom),this.paddingLeft=Re(e,X3,r.paddingLeft),this.paintOrder=Re(e,C5,r.paintOrder),this.position=Re(e,Y3,r.position),this.textAlign=Re(e,J3,r.textAlign),this.textDecorationColor=Re(e,u5,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Re(e,d5,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Re(e,Z3,r.textShadow),this.textTransform=Re(e,e5,r.textTransform),this.transform=Re(e,t5,r.transform),this.transformOrigin=Re(e,i5,r.transformOrigin),this.visibility=Re(e,o5,r.visibility),this.webkitTextStrokeColor=Re(e,_5,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Re(e,I5,r.webkitTextStrokeWidth),this.wordBreak=Re(e,a5,r.wordBreak),this.zIndex=Re(e,l5,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return ii(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Br(this.display,4)||Br(this.display,33554432)||Br(this.display,268435456)||Br(this.display,536870912)||Br(this.display,67108864)||Br(this.display,134217728)},t}(),T5=function(){function t(e,r){this.content=Re(e,w5,r.content),this.quotes=Re(e,B5,r.quotes)}return t}(),yC=function(){function t(e,r){this.counterIncrement=Re(e,x5,r.counterIncrement),this.counterReset=Re(e,y5,r.counterReset)}return t}(),Re=function(t,e,r){var n=new Bk,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var A=new bk(n.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,Ut(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return Qg.parse(t,A.parseComponentValue());case"color":return Ai.parse(t,A.parseComponentValue());case"image":return uy.parse(t,A.parseComponentValue());case"length":var a=A.parseComponentValue();return xi(a)?a:Hr;case"length-percentage":var l=A.parseComponentValue();return wr(l)?l:Hr;case"time":return Ok.parse(t,A.parseComponentValue())}break}},k5="data-html2canvas-debug",F5=function(t){var e=t.getAttribute(k5);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},K0=function(t,e){var r=F5(t);return r===1||e===r},Ss=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,K0(r,3))debugger;this.styles=new E5(e,window.getComputedStyle(r,null)),$0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Sg(this.context,r),K0(r,4)&&(this.flags|=16)}return t}(),S5="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zd=0;zd<vC.length;zd++)oc[vC.charCodeAt(zd)]=zd;var U5=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=oc[t.charCodeAt(n)],i=oc[t.charCodeAt(n+1)],a=oc[t.charCodeAt(n+2)],l=oc[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|a>>2,d[s++]=(a&3)<<6|l&63;return c},Q5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},N5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},ro=5,dy=11,Hp=2,R5=dy-ro,Hk=65536>>ro,j5=1<<ro,Vp=j5-1,D5=1024>>ro,P5=Hk+D5,L5=P5,M5=32,O5=L5+M5,H5=65536>>dy,V5=1<<R5,K5=V5-1,BC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},G5=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},z5=function(t,e){var r=U5(t),n=Array.isArray(r)?N5(r):new Uint32Array(r),s=Array.isArray(r)?Q5(r):new Uint16Array(r),A=24,i=BC(s,A/2,n[4]/2),a=n[5]===2?BC(s,(A+n[4])/2):G5(n,Math.ceil((A+n[4])/4));return new $5(n[0],n[1],n[2],n[3],i,a)},$5=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>ro],r=(r<<Hp)+(e&Vp),this.data[r];if(e<=65535)return r=this.index[Hk+(e-55296>>ro)],r=(r<<Hp)+(e&Vp),this.data[r];if(e<this.highStart)return r=O5-H5+(e>>dy),r=this.index[r],r+=e>>ro&K5,r=this.index[r],r=(r<<Hp)+(e&Vp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),bC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $d=0;$d<bC.length;$d++)W5[bC.charCodeAt($d)]=$d;var q5=1,Kp=2,Gp=3,CC=4,_C=5,X5=7,IC=8,zp=9,$p=10,EC=11,TC=12,kC=13,FC=14,Wp=15,J5=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Y5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},Z5=z5(S5),Kn="",qp="",e6=function(t){return Z5.get(t)},t6=function(t,e,r){var n=r-2,s=e[n],A=e[r-1],i=e[r];if(A===Kp&&i===Gp)return Kn;if(A===Kp||A===Gp||A===CC||i===Kp||i===Gp||i===CC)return qp;if(A===IC&&[IC,zp,EC,TC].indexOf(i)!==-1||(A===EC||A===zp)&&(i===zp||i===$p)||(A===TC||A===$p)&&i===$p||i===kC||i===_C||i===X5||A===q5)return Kn;if(A===kC&&i===FC){for(;s===_C;)s=e[--n];if(s===FC)return Kn}if(A===Wp&&i===Wp){for(var a=0;s===Wp;)a++,s=e[--n];if(a%2===0)return Kn}return qp},r6=function(t){var e=J5(t),r=e.length,n=0,s=0,A=e.map(e6);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Kn;n<r&&(i=t6(e,A,++n))===Kn;);if(i!==Kn||n===r){var a=Y5.apply(null,e.slice(s,n));return s=n,{value:a,done:!1}}return{done:!0,value:null}}}},n6=function(t){for(var e=r6(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},s6=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(n),A===e)return!0}}return!1},A6=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=Ug(n.data).map(function(l){return ur(l)}),A=0,i={},a=s.every(function(l,c){r.setStart(n,A),r.setEnd(n,A+l.length);var d=r.getBoundingClientRect();A+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),a},i6=function(){return typeof new Image().crossOrigin<"u"},o6=function(){return typeof new XMLHttpRequest().responseType=="string"},a6=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},SC=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},l6=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,A=e.toDataURL();s.src=A;var i=G0(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),UC(i).then(function(a){n.drawImage(a,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=r+"px",SC(l)?UC(G0(r,r,0,0,c)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),SC(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},G0=function(t,e,r,n,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),a=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(s),i},UC=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Pr={get SUPPORT_RANGE_BOUNDS(){var t=s6(document);return Object.defineProperty(Pr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Pr.SUPPORT_RANGE_BOUNDS&&A6(document);return Object.defineProperty(Pr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=a6(document);return Object.defineProperty(Pr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?l6(document):Promise.resolve(!1);return Object.defineProperty(Pr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=i6();return Object.defineProperty(Pr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=o6();return Object.defineProperty(Pr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Pr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Pr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Fc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),c6=function(t,e,r,n){var s=h6(e,r),A=[],i=0;return s.forEach(function(a){if(r.textDecorationLine.length||a.trim().length>0)if(Pr.SUPPORT_RANGE_BOUNDS){var l=QC(n,i,a.length).getClientRects();if(l.length>1){var c=hy(a),d=0;c.forEach(function(f){A.push(new Fc(f,AA.fromDOMRectList(t,QC(n,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new Fc(a,AA.fromDOMRectList(t,l)))}else{var h=n.splitText(a.length);A.push(new Fc(a,u6(t,n))),n=h}else Pr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),A},u6=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var A=Sg(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),A}}return AA.EMPTY},QC=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},hy=function(t){if(Pr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return n6(t)},d6=function(t,e){if(Pr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return g6(t,e)},h6=function(t,e){return e.letterSpacing!==0?hy(t):d6(t,e)},f6=[32,160,4961,65792,65793,4153,4241],g6=function(t,e){for(var r=HH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,A=function(){if(s.value){var i=s.value.slice(),a=Ug(i),l="";a.forEach(function(c){f6.indexOf(c)===-1?l+=ur(c):(l.length&&n.push(l),n.push(ur(c)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)A();return n},p6=function(){function t(e,r,n){this.text=m6(r.data,n.textTransform),this.textBounds=c6(e,this.text,n,r)}return t}(),m6=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(w6,x6);case 2:return t.toUpperCase();default:return t}},w6=/(^|\s|:|-|\(|\))([a-z])/g,x6=function(t,e,r){return t.length>0?e+r.toUpperCase():t},Vk=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Ss),Kk=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Ss),Gk=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=new XMLSerializer,i=Sg(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Ss),zk=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ss),z0=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Ss),y6=[{type:15,flags:0,unit:"px",number:3}],v6=[{type:16,flags:0,number:50}],B6=function(t){return t.width>t.height?new AA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new AA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},b6=function(t){var e=t.type===C6?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Ef="checkbox",Tf="radio",C6="password",NC=707406591,fy=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=b6(n),(s.type===Ef||s.type===Tf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=B6(s.bounds)),s.type){case Ef:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=y6;break;case Tf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=v6;break}return s}return e}(Ss),$k=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(Ss),Wk=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Ss),qk=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=Jk(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?Tc(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Xs.TRANSPARENT,i=n.contentWindow.document.body?Tc(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Xs.TRANSPARENT;s.backgroundColor=ii(A)?ii(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(Ss),_6=["OL","UL","MENU"],Ih=function(t,e,r,n){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,Yk(s)&&s.data.trim().length>0)r.textNodes.push(new p6(t,s,r.styles));else if(da(s))if(rF(s)&&s.assignedNodes)s.assignedNodes().forEach(function(a){return Ih(t,a,r,n)});else{var i=Xk(t,s);i.styles.isVisible()&&(I6(s,i,n)?i.flags|=4:E6(i.styles)&&(i.flags|=2),_6.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?Ih(t,s.shadowRoot,i,n):!kf(s)&&!Zk(s)&&!Ff(s)&&Ih(t,s,i,n))}},Xk=function(t,e){return W0(e)?new Vk(t,e):eF(e)?new Kk(t,e):Zk(e)?new Gk(t,e):T6(e)?new zk(t,e):k6(e)?new z0(t,e):F6(e)?new fy(t,e):Ff(e)?new $k(t,e):kf(e)?new Wk(t,e):tF(e)?new qk(t,e):new Ss(t,e)},Jk=function(t,e){var r=Xk(t,e);return r.flags|=4,Ih(t,e,r,r),r},I6=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||gy(t)&&r.styles.isTransparent()},E6=function(t){return t.isPositioned()||t.isFloating()},Yk=function(t){return t.nodeType===Node.TEXT_NODE},da=function(t){return t.nodeType===Node.ELEMENT_NODE},$0=function(t){return da(t)&&typeof t.style<"u"&&!Eh(t)},Eh=function(t){return typeof t.className=="object"},T6=function(t){return t.tagName==="LI"},k6=function(t){return t.tagName==="OL"},F6=function(t){return t.tagName==="INPUT"},S6=function(t){return t.tagName==="HTML"},Zk=function(t){return t.tagName==="svg"},gy=function(t){return t.tagName==="BODY"},eF=function(t){return t.tagName==="CANVAS"},RC=function(t){return t.tagName==="VIDEO"},W0=function(t){return t.tagName==="IMG"},tF=function(t){return t.tagName==="IFRAME"},jC=function(t){return t.tagName==="STYLE"},U6=function(t){return t.tagName==="SCRIPT"},kf=function(t){return t.tagName==="TEXTAREA"},Ff=function(t){return t.tagName==="SELECT"},rF=function(t){return t.tagName==="SLOT"},DC=function(t){return t.tagName.indexOf("-")>0},Q6=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,A=!0;n!==null&&n.forEach(function(a){var l=r.counters[a.counter];l&&a.increment!==0&&(A=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=a.increment)});var i=[];return A&&s.forEach(function(a){var l=r.counters[a.counter];i.push(a.counter),l||(l=r.counters[a.counter]=[]),l.push(a.reset)}),i},t}(),PC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},LC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},N6={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},R6={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Vo=function(t,e,r,n,s,A){return t<e||t>r?hu(t,s,A.length>0):n.integers.reduce(function(i,a,l){for(;t>=a;)t-=a,i+=n.values[l];return i},"")+A},nF=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},cr=function(t,e,r,n,s){var A=r-e+1;return(t<0?"-":"")+(nF(Math.abs(t),A,n,function(i){return ur(Math.floor(i%A)+e)})+s)},Di=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return nF(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},Xo=1,bA=2,CA=4,ac=8,Ds=function(t,e,r,n,s,A){if(t<-9999||t>9999)return hu(t,4,s.length>0);var i=Math.abs(t),a=s;if(i===0)return e[0]+a;for(var l=0;i>0&&l<=4;l++){var c=i%10;c===0&&Br(A,Xo)&&a!==""?a=e[c]+a:c>1||c===1&&l===0||c===1&&l===1&&Br(A,bA)||c===1&&l===1&&Br(A,CA)&&t>100||c===1&&l>1&&Br(A,ac)?a=e[c]+(l>0?r[l-1]:"")+a:c===1&&l>0&&(a=r[l-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},MC="",OC="",HC="",Xp="",hu=function(t,e,r){var n=r?". ":"",s=r?"":"",A=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=cr(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return Di(t,"",s);case 6:return Vo(t,1,3999,PC,3,n).toLowerCase();case 7:return Vo(t,1,3999,PC,3,n);case 8:return cr(t,945,969,!1,n);case 9:return cr(t,97,122,!1,n);case 10:return cr(t,65,90,!1,n);case 11:return cr(t,1632,1641,!0,n);case 12:case 49:return Vo(t,1,9999,LC,3,n);case 35:return Vo(t,1,9999,LC,3,n).toLowerCase();case 13:return cr(t,2534,2543,!0,n);case 14:case 30:return cr(t,6112,6121,!0,n);case 15:return Di(t,"",s);case 16:return Di(t,"",s);case 17:case 48:return Ds(t,"",MC,"",s,bA|CA|ac);case 47:return Ds(t,"",OC,"",s,Xo|bA|CA|ac);case 42:return Ds(t,"",MC,"",s,bA|CA|ac);case 41:return Ds(t,"",OC,"",s,Xo|bA|CA|ac);case 26:return Ds(t,"","",HC,s,0);case 25:return Ds(t,"","",HC,s,Xo|bA|CA);case 31:return Ds(t,"","",Xp,A,Xo|bA|CA);case 33:return Ds(t,"","",Xp,A,0);case 32:return Ds(t,"","",Xp,A,Xo|bA|CA);case 18:return cr(t,2406,2415,!0,n);case 20:return Vo(t,1,19999,R6,3,n);case 21:return cr(t,2790,2799,!0,n);case 22:return cr(t,2662,2671,!0,n);case 22:return Vo(t,1,10999,N6,3,n);case 23:return Di(t,"");case 24:return Di(t,"");case 27:return cr(t,3302,3311,!0,n);case 28:return Di(t,"",s);case 29:return Di(t,"",s);case 34:return cr(t,3792,3801,!0,n);case 37:return cr(t,6160,6169,!0,n);case 38:return cr(t,4160,4169,!0,n);case 39:return cr(t,2918,2927,!0,n);case 40:return cr(t,1776,1785,!0,n);case 43:return cr(t,3046,3055,!0,n);case 44:return cr(t,3174,3183,!0,n);case 45:return cr(t,3664,3673,!0,n);case 46:return cr(t,3872,3881,!0,n);case 3:default:return cr(t,48,57,!0,n)}},sF="data-html2canvas-ignore",VC=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Q6,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=j6(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=s.contentWindow,l=a.document,c=L6(s).then(function(){return un(n,void 0,void 0,function(){var d,h;return Yr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(V6),a&&(a.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-r.left,a.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,P6(l)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(O6(document.doctype)+"<html></html>"),H6(this.referenceElement.ownerDocument,A,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(K0(e,2))debugger;if(eF(e))return this.createCanvasClone(e);if(RC(e))return this.createVideoClone(e);if(jC(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return W0(r)&&(W0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),DC(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Jp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var a=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(a){var l=a.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!da(r)||!U6(r)&&!r.hasAttribute(sF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!da(r)||!jC(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(da(A)&&rF(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(a){return s.appendChildNode(r,a,n)})}else this.appendChildNode(r,A,n)},t.prototype.cloneNode=function(e,r){if(Yk(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&da(e)&&($0(e)||Eh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&$0(s)&&(this.clonedReferenceElement=s),gy(s)&&z6(s);var l=this.counters.parse(new yC(this.context,A)),c=this.resolvePseudoContent(e,s,i,Sc.BEFORE);DC(e)&&(r=!0),RC(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,a,Sc.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(A&&(this.options.copyStyles||Eh(e))&&!tF(e)||r)&&Jp(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(kf(e)||Ff(e))&&(kf(s)||Ff(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var A=this;if(n){var i=n.content,a=r.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new yC(this.context,n));var l=new T5(this.context,n),c=a.createElement("html2canvaspseudoelement");Jp(n,c),l.content.forEach(function(h){if(h.type===0)c.appendChild(a.createTextNode(h.value));else if(h.type===22){var f=a.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var p=h.values.filter(Ut);p.length&&c.appendChild(a.createTextNode(e.getAttribute(p[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(Xa),v=y[0],E=y[1];if(v&&Ut(v)){var B=A.counters.getCounterValue(v.value),x=E&&Ut(E)?V0.parse(A.context,E.value):3;c.appendChild(a.createTextNode(hu(B,x,!1)))}}else if(h.name==="counters"){var _=h.values.filter(Xa),v=_[0],S=_[1],E=_[2];if(v&&Ut(v)){var U=A.counters.getCounterValues(v.value),N=E&&Ut(E)?V0.parse(A.context,E.value):3,w=S&&S.type===0?S.value:"",b=U.map(function(R){return hu(R,N,!1)}).join(w);c.appendChild(a.createTextNode(b))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(a.createTextNode(xC(l.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(xC(l.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(h.value))}}),c.className=q0+" "+X0;var d=s===Sc.BEFORE?" "+q0:" "+X0;return Eh(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Sc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Sc||(Sc={}));var j6=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(sF,"true"),t.body.appendChild(r),r},D6=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},P6=function(t){return Promise.all([].slice.call(t.images,0).map(D6))},L6=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},M6=["all","d","content"],Jp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);M6.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},O6=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},H6=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},V6=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},K6=":before",G6=":after",q0="___html2canvas___pseudoelement_before",X0="___html2canvas___pseudoelement_after",KC=`{
    content: "" !important;
    display: none !important;
}`,z6=function(t){$6(t,"."+q0+K6+KC+`
         .`+X0+G6+KC)},$6=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},AF=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),W6=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Zp(e)||Y6(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return un(this,void 0,void 0,function(){var r,n,s,A,i=this;return Yr(this,function(a){switch(a.label){case 0:return r=AF.isSameOrigin(e),n=!Yp(e)&&this._options.useCORS===!0&&Pr.SUPPORT_CORS_IMAGES&&!r,s=!Yp(e)&&!r&&!Zp(e)&&typeof this._options.proxy=="string"&&Pr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Yp(e)&&!Zp(e)&&!s&&!n?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var d=new Image;d.onload=function(){return l(d)},d.onerror=c,(Z6(A)||n)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var a=Pr.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(a==="text")A(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=a),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),q6=/^data:image\/svg\+xml/i,X6=/^data:image\/.*;base64,/i,J6=/^data:image\/.*/i,Y6=function(t){return Pr.SUPPORT_SVG_DRAWING||!eK(t)},Yp=function(t){return J6.test(t)},Z6=function(t){return X6.test(t)},Zp=function(t){return t.substr(0,4)==="blob"},eK=function(t){return t.substr(-3).toLowerCase()==="svg"||q6.test(t)},Ue=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Ko=function(t,e,r){return new Ue(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Wd=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Ko(this.start,this.startControl,e),s=Ko(this.startControl,this.endControl,e),A=Ko(this.endControl,this.end,e),i=Ko(n,s,e),a=Ko(s,A,e),l=Ko(i,a,e);return r?new t(this.start,n,i,l):new t(l,a,A,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Wn=function(t){return t.type===1},tK=function(){function t(e){var r=e.styles,n=e.bounds,s=ic(r.borderTopLeftRadius,n.width,n.height),A=s[0],i=s[1],a=ic(r.borderTopRightRadius,n.width,n.height),l=a[0],c=a[1],d=ic(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],p=ic(r.borderBottomLeftRadius,n.width,n.height),y=p[0],v=p[1],E=[];E.push((A+l)/n.width),E.push((y+h)/n.width),E.push((i+v)/n.height),E.push((c+f)/n.height);var B=Math.max.apply(Math,E);B>1&&(A/=B,i/=B,l/=B,c/=B,h/=B,f/=B,y/=B,v/=B);var x=n.width-l,_=n.height-f,S=n.width-h,U=n.height-v,N=r.borderTopWidth,w=r.borderRightWidth,b=r.borderBottomWidth,C=r.borderLeftWidth,F=Ot(r.paddingTop,e.bounds.width),R=Ot(r.paddingRight,e.bounds.width),L=Ot(r.paddingBottom,e.bounds.width),Q=Ot(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?Xt(n.left+C/3,n.top+N/3,A-C/3,i-N/3,Et.TOP_LEFT):new Ue(n.left+C/3,n.top+N/3),this.topRightBorderDoubleOuterBox=A>0||i>0?Xt(n.left+x,n.top+N/3,l-w/3,c-N/3,Et.TOP_RIGHT):new Ue(n.left+n.width-w/3,n.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Xt(n.left+S,n.top+_,h-w/3,f-b/3,Et.BOTTOM_RIGHT):new Ue(n.left+n.width-w/3,n.top+n.height-b/3),this.bottomLeftBorderDoubleOuterBox=y>0||v>0?Xt(n.left+C/3,n.top+U,y-C/3,v-b/3,Et.BOTTOM_LEFT):new Ue(n.left+C/3,n.top+n.height-b/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?Xt(n.left+C*2/3,n.top+N*2/3,A-C*2/3,i-N*2/3,Et.TOP_LEFT):new Ue(n.left+C*2/3,n.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?Xt(n.left+x,n.top+N*2/3,l-w*2/3,c-N*2/3,Et.TOP_RIGHT):new Ue(n.left+n.width-w*2/3,n.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Xt(n.left+S,n.top+_,h-w*2/3,f-b*2/3,Et.BOTTOM_RIGHT):new Ue(n.left+n.width-w*2/3,n.top+n.height-b*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||v>0?Xt(n.left+C*2/3,n.top+U,y-C*2/3,v-b*2/3,Et.BOTTOM_LEFT):new Ue(n.left+C*2/3,n.top+n.height-b*2/3),this.topLeftBorderStroke=A>0||i>0?Xt(n.left+C/2,n.top+N/2,A-C/2,i-N/2,Et.TOP_LEFT):new Ue(n.left+C/2,n.top+N/2),this.topRightBorderStroke=A>0||i>0?Xt(n.left+x,n.top+N/2,l-w/2,c-N/2,Et.TOP_RIGHT):new Ue(n.left+n.width-w/2,n.top+N/2),this.bottomRightBorderStroke=h>0||f>0?Xt(n.left+S,n.top+_,h-w/2,f-b/2,Et.BOTTOM_RIGHT):new Ue(n.left+n.width-w/2,n.top+n.height-b/2),this.bottomLeftBorderStroke=y>0||v>0?Xt(n.left+C/2,n.top+U,y-C/2,v-b/2,Et.BOTTOM_LEFT):new Ue(n.left+C/2,n.top+n.height-b/2),this.topLeftBorderBox=A>0||i>0?Xt(n.left,n.top,A,i,Et.TOP_LEFT):new Ue(n.left,n.top),this.topRightBorderBox=l>0||c>0?Xt(n.left+x,n.top,l,c,Et.TOP_RIGHT):new Ue(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Xt(n.left+S,n.top+_,h,f,Et.BOTTOM_RIGHT):new Ue(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||v>0?Xt(n.left,n.top+U,y,v,Et.BOTTOM_LEFT):new Ue(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||i>0?Xt(n.left+C,n.top+N,Math.max(0,A-C),Math.max(0,i-N),Et.TOP_LEFT):new Ue(n.left+C,n.top+N),this.topRightPaddingBox=l>0||c>0?Xt(n.left+Math.min(x,n.width-w),n.top+N,x>n.width+w?0:Math.max(0,l-w),Math.max(0,c-N),Et.TOP_RIGHT):new Ue(n.left+n.width-w,n.top+N),this.bottomRightPaddingBox=h>0||f>0?Xt(n.left+Math.min(S,n.width-C),n.top+Math.min(_,n.height-b),Math.max(0,h-w),Math.max(0,f-b),Et.BOTTOM_RIGHT):new Ue(n.left+n.width-w,n.top+n.height-b),this.bottomLeftPaddingBox=y>0||v>0?Xt(n.left+C,n.top+Math.min(U,n.height-b),Math.max(0,y-C),Math.max(0,v-b),Et.BOTTOM_LEFT):new Ue(n.left+C,n.top+n.height-b),this.topLeftContentBox=A>0||i>0?Xt(n.left+C+Q,n.top+N+F,Math.max(0,A-(C+Q)),Math.max(0,i-(N+F)),Et.TOP_LEFT):new Ue(n.left+C+Q,n.top+N+F),this.topRightContentBox=l>0||c>0?Xt(n.left+Math.min(x,n.width+C+Q),n.top+N+F,x>n.width+C+Q?0:l-C+Q,c-(N+F),Et.TOP_RIGHT):new Ue(n.left+n.width-(w+R),n.top+N+F),this.bottomRightContentBox=h>0||f>0?Xt(n.left+Math.min(S,n.width-(C+Q)),n.top+Math.min(_,n.height+N+F),Math.max(0,h-(w+R)),f-(b+L),Et.BOTTOM_RIGHT):new Ue(n.left+n.width-(w+R),n.top+n.height-(b+L)),this.bottomLeftContentBox=y>0||v>0?Xt(n.left+C+Q,n.top+U,Math.max(0,y-(C+Q)),v-(b+L),Et.BOTTOM_LEFT):new Ue(n.left+C+Q,n.top+n.height-(b+L))}return t}(),Et;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Et||(Et={}));var Xt=function(t,e,r,n,s){var A=4*((Math.sqrt(2)-1)/3),i=r*A,a=n*A,l=t+r,c=e+n;switch(s){case Et.TOP_LEFT:return new Wd(new Ue(t,c),new Ue(t,c-a),new Ue(l-i,e),new Ue(l,e));case Et.TOP_RIGHT:return new Wd(new Ue(t,e),new Ue(t+i,e),new Ue(l,c-a),new Ue(l,c));case Et.BOTTOM_RIGHT:return new Wd(new Ue(l,e),new Ue(l,e+a),new Ue(t+i,c),new Ue(t,c));case Et.BOTTOM_LEFT:default:return new Wd(new Ue(l,c),new Ue(l-i,c),new Ue(t,e+a),new Ue(t,e))}},Sf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},rK=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Uf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},nK=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),qd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),sK=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),AK=function(t){return t.type===0},iF=function(t){return t.type===1},iK=function(t){return t.type===2},GC=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},oK=function(t,e,r,n,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+s);case 3:return A.add(e,r+s)}return A})},oF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),aF=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new tK(this.container),this.container.styles.opacity<1&&this.effects.push(new sK(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new nK(n,s,A))}if(this.container.styles.overflowX!==0){var i=Sf(this.curves),a=Uf(this.curves);GC(i,a)?this.effects.push(new qd(i,6)):(this.effects.push(new qd(i,2)),this.effects.push(new qd(a,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var A=n.effects.filter(function(l){return!iF(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Sf(n.curves),a=Uf(n.curves);GC(i,a)||s.unshift(new qd(a,6))}}else s.unshift.apply(s,A);n=n.parent}return s.filter(function(l){return Br(l.target,e)})},t}(),J0=function(t,e,r,n){t.container.elements.forEach(function(s){var A=Br(s.flags,4),i=Br(s.flags,2),a=new aF(s,t);Br(s.styles.display,2048)&&n.push(a);var l=Br(s.flags,8)?[]:n;if(A||i){var c=A||s.styles.isPositioned()?r:e,d=new oF(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(y,v){return h>y.element.container.styles.zIndex.order?(f=v,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var p=0;c.positiveZIndex.some(function(y,v){return h>=y.element.container.styles.zIndex.order?(p=v+1,!1):p>0}),c.positiveZIndex.splice(p,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);J0(a,d,A?d:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),J0(a,e,r,l);Br(s.flags,8)&&lF(s,l)})},lF=function(t,e){for(var r=t instanceof z0?t.start:1,n=t instanceof z0?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof zk&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=hu(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},aK=function(t){var e=new aF(t,null),r=new oF(e),n=[];return J0(e,r,r,n),lF(e.container,n),r},zC=function(t,e){switch(e){case 0:return Jn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Jn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Jn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Jn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},lK=function(t,e){switch(e){case 0:return Jn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Jn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Jn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Jn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},cK=function(t,e){switch(e){case 0:return Jn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Jn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Jn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Jn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},uK=function(t,e){switch(e){case 0:return Xd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Xd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Xd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Xd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Xd=function(t,e){var r=[];return Wn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Wn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Jn=function(t,e,r,n){var s=[];return Wn(t)?s.push(t.subdivide(.5,!1)):s.push(t),Wn(r)?s.push(r.subdivide(.5,!0)):s.push(r),Wn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Wn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},cF=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Qf=function(t){var e=t.styles,r=t.bounds,n=Ot(e.paddingLeft,r.width),s=Ot(e.paddingRight,r.width),A=Ot(e.paddingTop,r.width),i=Ot(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},dK=function(t,e){return t===0?e.bounds:t===2?Qf(e):cF(e)},hK=function(t,e){return t===0?e.bounds:t===2?Qf(e):cF(e)},em=function(t,e,r){var n=dK(Jo(t.styles.backgroundOrigin,e),t),s=hK(Jo(t.styles.backgroundClip,e),t),A=fK(Jo(t.styles.backgroundSize,e),r,n),i=A[0],a=A[1],l=ic(Jo(t.styles.backgroundPosition,e),n.width-i,n.height-a),c=gK(Jo(t.styles.backgroundRepeat,e),l,A,n,s),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[c,d,h,i,a]},Go=function(t){return Ut(t)&&t.value===Ca.AUTO},Jd=function(t){return typeof t=="number"},fK=function(t,e,r){var n=e[0],s=e[1],A=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(wr(i)&&a&&wr(a))return[Ot(i,r.width),Ot(a,r.height)];var l=Jd(A);if(Ut(i)&&(i.value===Ca.CONTAIN||i.value===Ca.COVER)){if(Jd(A)){var c=r.width/r.height;return c<A!=(i.value===Ca.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var d=Jd(n),h=Jd(s),f=d||h;if(Go(i)&&(!a||Go(a))){if(d&&h)return[n,s];if(!l&&!f)return[r.width,r.height];if(f&&l){var p=d?n:s*A,y=h?s:n/A;return[p,y]}var v=d?n:r.width,E=h?s:r.height;return[v,E]}if(l){var B=0,x=0;return wr(i)?B=Ot(i,r.width):wr(a)&&(x=Ot(a,r.height)),Go(i)?B=x*A:(!a||Go(a))&&(x=B/A),[B,x]}var _=null,S=null;if(wr(i)?_=Ot(i,r.width):a&&wr(a)&&(S=Ot(a,r.height)),_!==null&&(!a||Go(a))&&(S=d&&h?_/n*s:r.height),S!==null&&Go(i)&&(_=d&&h?S/s*n:r.width),_!==null&&S!==null)return[_,S];throw new Error("Unable to calculate background-size for element")},Jo=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},gK=function(t,e,r,n,s){var A=e[0],i=e[1],a=r[0],l=r[1];switch(t){case 2:return[new Ue(Math.round(n.left),Math.round(n.top+i)),new Ue(Math.round(n.left+n.width),Math.round(n.top+i)),new Ue(Math.round(n.left+n.width),Math.round(l+n.top+i)),new Ue(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new Ue(Math.round(n.left+A),Math.round(n.top)),new Ue(Math.round(n.left+A+a),Math.round(n.top)),new Ue(Math.round(n.left+A+a),Math.round(n.height+n.top)),new Ue(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new Ue(Math.round(n.left+A),Math.round(n.top+i)),new Ue(Math.round(n.left+A+a),Math.round(n.top+i)),new Ue(Math.round(n.left+A+a),Math.round(n.top+i+l)),new Ue(Math.round(n.left+A),Math.round(n.top+i+l))];default:return[new Ue(Math.round(s.left),Math.round(s.top)),new Ue(Math.round(s.left+s.width),Math.round(s.top)),new Ue(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ue(Math.round(s.left),Math.round(s.height+s.top))]}},pK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$C="Hidden Text",mK=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=pK,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode($C)),n.appendChild(A),n.appendChild(s);var a=s.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode($C)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),uF=function(){function t(e,r){this.context=e,this.options=r}return t}(),wK=1e4,xK=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new mK(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),iK(r)&&(this.ctx.globalAlpha=r.opacity),AK(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),iF(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return un(this,void 0,void 0,function(){var n;return Yr(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return un(this,void 0,void 0,function(){return Yr(this,function(n){switch(n.label){case 0:if(Br(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=hy(r.text);i.reduce(function(a,l){return A.ctx.fillText(l,a,r.bounds.top+s),a+A.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=CK(r.fontFamily).join(", "),A=Vu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(r,n){return un(this,void 0,void 0,function(){var s,A,i,a,l,c,d,h,f=this;return Yr(this,function(p){return s=this.createFontStyle(n),A=s[0],i=s[1],a=s[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,a),c=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(y){h.forEach(function(v){switch(v){case 0:f.ctx.fillStyle=kr(n.color),f.renderTextWithLetterSpacing(y,n.letterSpacing,c);var E=n.textShadow;E.length&&y.text.trim().length&&(E.slice(0).reverse().forEach(function(B){f.ctx.shadowColor=kr(B.color),f.ctx.shadowOffsetX=B.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=B.offsetY.number*f.options.scale,f.ctx.shadowBlur=B.blur.number,f.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=kr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(B){switch(B){case 1:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:f.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(f.ctx.strokeStyle=kr(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=Qf(r),i=Uf(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return un(this,void 0,void 0,function(){var n,s,A,i,a,l,x,x,c,d,h,f,S,p,y,U,v,E,B,x,_,S,U;return Yr(this,function(N){switch(N.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,A=n.styles,i=0,a=n.textNodes,N.label=1;case 1:return i<a.length?(l=a[i],[4,this.renderTextNode(l,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof Vk))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return x=N.sent(),this.renderReplacedElement(n,s,x),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Kk&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof Gk))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return x=N.sent(),this.renderReplacedElement(n,s,x),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof qk&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=N.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),N.label=14;case 14:if(n instanceof fy&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===Ef?n.checked&&(this.ctx.save(),this.path([new Ue(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Ue(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Ue(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Ue(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Ue(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Ue(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Ue(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=kr(NC),this.ctx.fill(),this.ctx.restore()):n.type===Tf&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=kr(NC),this.ctx.fill(),this.ctx.restore())),yK(n)&&n.value.length){switch(f=this.createFontStyle(A),S=f[0],p=f[1],y=this.fontMetrics.getMetrics(S,p).baseline,this.ctx.font=S,this.ctx.fillStyle=kr(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=BK(n.styles.textAlign),U=Qf(n),v=0,n.styles.textAlign){case 1:v+=U.width/2;break;case 2:v+=U.width;break}E=U.add(v,0,0,-U.height/2+1),this.ctx.save(),this.path([new Ue(U.left,U.top),new Ue(U.left+U.width,U.top),new Ue(U.left+U.width,U.top+U.height),new Ue(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Fc(n.value,E),A.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Br(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(B=n.styles.listStyleImage,B.type!==0)return[3,18];x=void 0,_=B.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return x=N.sent(),this.ctx.drawImage(x,n.bounds.left-(x.width+10),n.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(S=this.createFontStyle(A)[0],this.ctx.font=S,this.ctx.fillStyle=kr(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new AA(n.bounds.left,n.bounds.top+Ot(n.styles.paddingTop,n.bounds.width),n.bounds.width,mC(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Fc(r.listValue,U),A.letterSpacing,mC(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return un(this,void 0,void 0,function(){var n,s,B,A,i,B,a,l,B,c,d,B,h,f,B,p,y,B,v,E,B;return Yr(this,function(x){switch(x.label){case 0:if(Br(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:x.sent(),n=0,s=r.negativeZIndex,x.label=2;case 2:return n<s.length?(B=s[n],[4,this.renderStack(B)]):[3,5];case 3:x.sent(),x.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:x.sent(),A=0,i=r.nonInlineLevel,x.label=7;case 7:return A<i.length?(B=i[A],[4,this.renderNode(B)]):[3,10];case 8:x.sent(),x.label=9;case 9:return A++,[3,7];case 10:a=0,l=r.nonPositionedFloats,x.label=11;case 11:return a<l.length?(B=l[a],[4,this.renderStack(B)]):[3,14];case 12:x.sent(),x.label=13;case 13:return a++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,x.label=15;case 15:return c<d.length?(B=d[c],[4,this.renderStack(B)]):[3,18];case 16:x.sent(),x.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,x.label=19;case 19:return h<f.length?(B=f[h],[4,this.renderNode(B)]):[3,22];case 20:x.sent(),x.label=21;case 21:return h++,[3,19];case 22:p=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,x.label=23;case 23:return p<y.length?(B=y[p],[4,this.renderStack(B)]):[3,26];case 24:x.sent(),x.label=25;case 25:return p++,[3,23];case 26:v=0,E=r.positiveZIndex,x.label=27;case 27:return v<E.length?(B=E[v],[4,this.renderStack(B)]):[3,30];case 28:x.sent(),x.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,A){var i=Wn(s)?s.start:s;A===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Wn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(r,n,s){var A;if(r.width===n&&r.height===s)return r;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,s);var l=a.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),a},e.prototype.renderBackgroundImage=function(r){return un(this,void 0,void 0,function(){var n,s,A,i,a,l;return Yr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,f,p,F,Xe,ze,Q,Ge,b,y,F,Xe,ze,Q,Ge,v,E,B,x,_,S,U,N,w,b,C,F,R,L,Q,Ge,We,Xe,ze,ie,Be,ke,Ne,De,W,$,Fe;return Yr(this,function(we){switch(we.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,we.label=1;case 1:return we.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=we.sent(),[3,4];case 3:return we.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(p=em(r,n,[h.width,h.height,h.width/h.height]),F=p[0],Xe=p[1],ze=p[2],Q=p[3],Ge=p[4],b=A.ctx.createPattern(A.resizeImage(h,Q,Ge),"repeat"),A.renderRepeat(F,b,Xe,ze)),[3,6];case 5:A3(d)?(y=em(r,n,[null,null,null]),F=y[0],Xe=y[1],ze=y[2],Q=y[3],Ge=y[4],v=e3(d.angle,Q,Ge),E=v[0],B=v[1],x=v[2],_=v[3],S=v[4],U=document.createElement("canvas"),U.width=Q,U.height=Ge,N=U.getContext("2d"),w=N.createLinearGradient(B,_,x,S),gC(d.stops,E).forEach(function(Pe){return w.addColorStop(Pe.stop,kr(Pe.color))}),N.fillStyle=w,N.fillRect(0,0,Q,Ge),Q>0&&Ge>0&&(b=A.ctx.createPattern(U,"repeat"),A.renderRepeat(F,b,Xe,ze))):i3(d)&&(C=em(r,n,[null,null,null]),F=C[0],R=C[1],L=C[2],Q=C[3],Ge=C[4],We=d.position.length===0?[cy]:d.position,Xe=Ot(We[0],Q),ze=Ot(We[We.length-1],Ge),ie=t3(d,Xe,ze,Q,Ge),Be=ie[0],ke=ie[1],Be>0&&ke>0&&(Ne=A.ctx.createRadialGradient(R+Xe,L+ze,0,R+Xe,L+ze,Be),gC(d.stops,Be*2).forEach(function(Pe){return Ne.addColorStop(Pe.stop,kr(Pe.color))}),A.path(F),A.ctx.fillStyle=Ne,Be!==ke?(De=r.bounds.left+.5*r.bounds.width,W=r.bounds.top+.5*r.bounds.height,$=ke/Be,Fe=1/$,A.ctx.save(),A.ctx.translate(De,W),A.ctx.transform(1,0,0,$,0,0),A.ctx.translate(-De,-W),A.ctx.fillRect(R,Fe*(L-W)+W,Q,Ge*Fe),A.ctx.restore()):A.ctx.fill())),we.label=6;case 6:return n--,[2]}})},A=this,i=0,a=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<a.length?(l=a[i],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return un(this,void 0,void 0,function(){return Yr(this,function(A){return this.path(zC(s,n)),this.ctx.fillStyle=kr(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,A){return un(this,void 0,void 0,function(){var i,a;return Yr(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,A)]:[3,2];case 1:return l.sent(),[2];case 2:return i=lK(A,s),this.path(i),this.ctx.fillStyle=kr(r),this.ctx.fill(),a=cK(A,s),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return un(this,void 0,void 0,function(){var n,s,A,i,a,l,c,d,h=this;return Yr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!ii(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=vK(Jo(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),ii(n.backgroundColor)||(this.ctx.fillStyle=kr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var y=Sf(r.curves),v=p.inset?0:wK,E=oK(y,-v+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(y),h.ctx.clip(),h.mask(E)):(h.mask(y),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=p.offsetX.number+v,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=kr(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?kr(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:a=0,l=0,c=A,f.label=3;case 3:return l<c.length?(d=c[l],d.style!==0&&!ii(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,a,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,a,r.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,A,i){return un(this,void 0,void 0,function(){var a,l,c,d,h,f,p,y,v,E,B,x,_,S,U,N,U,N;return Yr(this,function(w){return this.ctx.save(),a=uK(A,s),l=zC(A,s),i===2&&(this.path(l),this.ctx.clip()),Wn(l[0])?(c=l[0].start.x,d=l[0].start.y):(c=l[0].x,d=l[0].y),Wn(l[1])?(h=l[1].end.x,f=l[1].end.y):(h=l[1].x,f=l[1].y),s===0||s===2?p=Math.abs(c-h):p=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(l.slice(0,2)),y=n<3?n*3:n*2,v=n<3?n*2:n,i===3&&(y=n,v=n),E=!0,p<=y*2?E=!1:p<=y*2+v?(B=p/(2*y+v),y*=B,v*=B):(x=Math.floor((p+v)/(y+v)),_=(p-x*y)/(x-1),S=(p-(x+1)*y)/x,v=S<=0||Math.abs(v-_)<Math.abs(v-S)?_:S),E&&(i===3?this.ctx.setLineDash([0,y+v]):this.ctx.setLineDash([y,v])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=kr(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Wn(l[0])&&(U=l[3],N=l[0],this.ctx.beginPath(),this.formatPath([new Ue(U.end.x,U.end.y),new Ue(N.start.x,N.start.y)]),this.ctx.stroke()),Wn(l[1])&&(U=l[1],N=l[2],this.ctx.beginPath(),this.formatPath([new Ue(U.end.x,U.end.y),new Ue(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return un(this,void 0,void 0,function(){var n;return Yr(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=kr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=aK(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(uF),yK=function(t){return t instanceof Wk||t instanceof $k?!0:t instanceof fy&&t.type!==Tf&&t.type!==Ef},vK=function(t,e){switch(t){case 0:return Sf(e);case 2:return rK(e);case 1:default:return Uf(e)}},BK=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},bK=["-apple-system","system-ui"],CK=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return bK.indexOf(e)===-1}):t},_K=function(t){hs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return un(this,void 0,void 0,function(){var n,s;return Yr(this,function(A){switch(A.label){case 0:return n=G0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,IK(n)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=kr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(uF),IK=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},EK=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,kd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,kd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,kd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,kd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),TK=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new EK({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new W6(this,e)}return t.instanceCount=1,t}(),Nf=function(t,e){return e===void 0&&(e={}),kK(t,e)};typeof window<"u"&&AF.setContext(window);var kK=function(t,e){return un(void 0,void 0,void 0,function(){var r,n,s,A,i,a,l,c,d,h,f,p,y,v,E,B,x,_,S,U,w,N,w,b,C,F,R,L,Q,Ge,We,Xe,ze,ie,Be,ke,Ne,De,W,$;return Yr(this,function(Fe){switch(Fe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(b=e.allowTaint)!==null&&b!==void 0?b:!1,imageTimeout:(C=e.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},A=F0({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(Q=e.windowHeight)!==null&&Q!==void 0?Q:n.innerHeight,scrollX:(Ge=e.scrollX)!==null&&Ge!==void 0?Ge:n.pageXOffset,scrollY:(We=e.scrollY)!==null&&We!==void 0?We:n.pageYOffset},a=new AA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new TK(A,a),c=(Xe=e.foreignObjectRendering)!==null&&Xe!==void 0?Xe:!1,d={allowTaint:(ze=e.allowTaint)!==null&&ze!==void 0?ze:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new VC(l,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=Fe.sent(),y=gy(f)||S6(f)?oH(f.ownerDocument):Sg(l,f),v=y.width,E=y.height,B=y.left,x=y.top,_=FK(l,f,e.backgroundColor),S={canvas:e.canvas,backgroundColor:_,scale:(Be=(ie=e.scale)!==null&&ie!==void 0?ie:n.devicePixelRatio)!==null&&Be!==void 0?Be:1,x:((ke=e.x)!==null&&ke!==void 0?ke:0)+B,y:((Ne=e.y)!==null&&Ne!==void 0?Ne:0)+x,width:(De=e.width)!==null&&De!==void 0?De:Math.ceil(v),height:(W=e.height)!==null&&W!==void 0?W:Math.ceil(E)},c?(l.logger.debug("Document cloned, using foreign object rendering"),w=new _K(l,S),[4,w.render(f)]):[3,3];case 2:return U=Fe.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+B+","+x+" with size "+v+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),N=Jk(l,f),_===N.styles.backgroundColor&&(N.styles.backgroundColor=Xs.TRANSPARENT),l.logger.debug("Starting renderer for element at "+S.x+","+S.y+" with size "+S.width+"x"+S.height),w=new xK(l,S),[4,w.render(N)];case 4:U=Fe.sent(),Fe.label=5;case 5:return(!(($=e.removeContainer)!==null&&$!==void 0)||$)&&(VC.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,U]}})})},FK=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Tc(t,getComputedStyle(n.documentElement).backgroundColor):Xs.TRANSPARENT,A=n.body?Tc(t,getComputedStyle(n.body).backgroundColor):Xs.TRANSPARENT,i=typeof r=="string"?Tc(t,r):r===null?Xs.TRANSPARENT:4294967295;return e===n.documentElement?ii(s)?ii(A)?i:A:s:i};const SK=()=>{var qt,_t,Bt,ae;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Mn(),[i,a]=I.useState("teachers"),[l,c]=I.useState(!1),[d,h]=I.useState(null),[f,p]=I.useState({}),[y,v]=I.useState({}),[E,B]=I.useState({}),[x,_]=I.useState({}),[S,U]=I.useState("preset_normal"),[N,w]=I.useState([]),[b,C]=I.useState(!1),[F,R]=I.useState(""),L=I.useRef(null),[Q,Ge]=I.useState(null);I.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const T=s.bellPresets.find(P=>P.id===S);if(T){w(T.bells);return}}w(tf)},[S,s.bellPresets]);const We=T=>{h(T||null),i==="teachers"?p(T?e.find(P=>P.id===T)??{}:{subjectIds:[],unavailableDates:[],shifts:[de.First,de.Second],telegramChatId:""}):i==="subjects"?v(T?t.find(P=>P.id===T)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?B(T?r.find(P=>P.id===T)??{}:{shift:de.First,studentsCount:25,excludeFromReports:!1}):i==="rooms"&&_(T?n.find(P=>P.id===T)??{}:{capacity:30,type:""}),c(!0)},Xe=async()=>{const T={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:y,key:"subjects"},classes:{list:r,form:E,key:"classes"},rooms:{list:n,form:x,key:"rooms"}};if(i==="bells"||!(i in T))return;const P=T[i],{list:V,form:J,key:ye}=P;if(!J.name)return;let re=[...V];if(d)re=re.map(z=>z.id===d?{...z,...J}:z);else{const z=V.reduce((O,Ae)=>Math.max(O,Ae.order||0),0),q={...J,id:hn(),order:z+1};re.push(q)}await A({[ye]:re}),c(!1)},ze=async T=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(P=>P.id!==T)});break;case"subjects":await A({subjects:t.filter(P=>P.id!==T)});break;case"classes":await A({classes:r.filter(P=>P.id!==T)});break;case"rooms":await A({rooms:n.filter(P=>P.id!==T)});break}},ie=(T,P)=>{Ge(P),T.dataTransfer.effectAllowed="move"},Be=T=>{T.preventDefault()},ke=async(T,P)=>{if(Q===null||Q===P)return;const V=J=>{const ye=[...J],[re]=ye.splice(Q,1);return ye.splice(P,0,re),ye.map((z,q)=>({...z,order:q}))};switch(i){case"teachers":{await A({teachers:V(e)});break}case"subjects":{await A({subjects:V(t)});break}case"classes":{await A({classes:V(r)});break}case"rooms":{await A({rooms:V(n)});break}}Ge(null)},Ne=(T,P,V,J)=>{const ye=[...N],re=ye.findIndex(z=>z.shift===T&&z.period===P&&z.day==="default");re>=0?ye[re]={...ye[re],[V]:J}:ye.push({shift:T,period:P,[V]:J,start:"00:00",end:"00:00",day:"default"}),w(ye)},De=(T,P)=>{const V=[...N],J=V.findIndex(ye=>ye.shift===T&&ye.period===P&&ye.day==="default");J>=0?V[J]={...V[J],cancelled:!V[J].cancelled}:V.push({shift:T,period:P,start:"00:00",end:"00:00",day:"default",cancelled:!0}),w(V)},W=async()=>{let T=[...s.bellPresets||[]];const P=T.findIndex(V=>V.id===S);P>=0?T[P]={...T[P],bells:N}:T.push({id:S,name:F||" ",bells:N}),await A({settings:{...s,bellPresets:T}}),alert(" !")},$=()=>{R(""),C(!0)},Fe=async()=>{if(!F)return;const T=`preset_${hn()}`,P=[...s.bellPresets||[]];P.push({id:T,name:F,bells:JSON.parse(JSON.stringify(N))}),await A({settings:{...s,bellPresets:P}}),U(T),C(!1)},we=async()=>{if(S==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const T=(s.bellPresets||[]).filter(P=>P.id!==S);await A({settings:{...s,bellPresets:T}}),U("preset_normal")},Pe=async()=>{var T,P;window.confirm(`   "${(P=(T=s.bellPresets)==null?void 0:T.find(V=>V.id===S))==null?void 0:P.name}"   ?`)&&(await A({bellSchedule:N}),alert("  !"))},on=async()=>{var V,J;if(!L.current)return;const T=await Nf(L.current,{scale:2,backgroundColor:"#ffffff"}),P=document.createElement("a");P.href=T.toDataURL("image/png"),P.download=`_${(J=(V=s.bellPresets)==null?void 0:V.find(ye=>ye.id===S))==null?void 0:J.name}.png`,document.body.appendChild(P),P.click(),document.body.removeChild(P)},gr=T=>{const P=f.shifts||[];P.includes(T)?p({...f,shifts:P.filter(V=>V!==T)}):p({...f,shifts:[...P,T]})};return o.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[o.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(T=>o.jsxs("button",{onClick:()=>a(T.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===T.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(M,{name:T.icon,size:18})," ",T.label]},T.id))}),i!=="bells"&&o.jsxs("button",{onClick:()=>We(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[o.jsx(M,{name:"Plus",size:20})," "]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&o.jsx(Td,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((T,P)=>o.jsxs("div",{draggable:!0,onDragStart:V=>ie(V,P),onDragOver:Be,onDrop:V=>ke(V,P),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:T.name})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(T.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:o.jsx(M,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>ze(T.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:o.jsx(M,{name:"Trash2",size:16})})]})]}),o.jsx("div",{className:"text-xs text-slate-500 mb-2",children:T.birthDate?`: ${new Date(T.birthDate).toLocaleDateString("ru-RU")}`:""}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[T.shifts.includes(de.First)&&o.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),T.shifts.includes(de.Second)&&o.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:T.subjectIds.map(V=>{const J=t.find(ye=>ye.id===V);return J?o.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:J.color,color:"#334155"},children:J.name},V):null})})]},T.id))}),i==="subjects"&&o.jsx(Td,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((T,P)=>o.jsxs("div",{draggable:!0,onDragStart:V=>ie(V,P),onDragOver:Be,onDrop:V=>ke(V,P),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:T.color},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:T.name}),o.jsxs("div",{className:"text-xs text-slate-400",children:[" ",T.difficulty,"  ",T.requiredRoomType]})]})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>ze(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(M,{name:"Trash2",size:16})})]})]},T.id))}),i==="classes"&&o.jsx(Td,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((T,P)=>o.jsxs("div",{draggable:!0,onDragStart:V=>ie(V,P),onDragOver:Be,onDrop:V=>ke(V,P),className:`bg-white dark:bg-dark-800 p-4 rounded-2xl border ${T.excludeFromReports?"border-dashed border-slate-300 bg-slate-50":"border-slate-100"} dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing`,children:[o.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:o.jsx(M,{name:"GripVertical",size:14})}),o.jsx("div",{className:`text-2xl font-black ${T.excludeFromReports?"text-slate-400":"text-slate-800 dark:text-slate-100"} mb-1`,children:T.name}),o.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[T.studentsCount||0," "]}),o.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${T.shift===de.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[T.shift===de.First?"I":"II"," "]}),T.excludeFromReports&&o.jsx("div",{className:"mt-2 text-[10px] text-slate-400 font-bold uppercase border border-slate-200 rounded px-1 inline-block",children:""}),o.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(T.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:14})}),o.jsx("button",{onClick:()=>ze(T.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(M,{name:"Trash2",size:14})})]})]},T.id))}),i==="rooms"&&o.jsx(Td,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((T,P)=>o.jsxs("div",{draggable:!0,onDragStart:V=>ie(V,P),onDragOver:Be,onDrop:V=>ke(V,P),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:o.jsx(M,{name:"DoorOpen",size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:T.name}),o.jsxs("div",{className:"text-xs text-slate-400",children:[": ",T.capacity,"  ",T.type]})]})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>ze(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(M,{name:"Trash2",size:16})})]})]},T.id))}),i==="bells"&&o.jsxs("div",{className:"flex flex-col gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-wrap items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:S,onChange:T=>U(T.target.value),className:"appearance-none bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500 cursor-pointer",children:(s.bellPresets||[]).map(T=>o.jsx("option",{value:T.id,children:T.name},T.id))}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:o.jsx(M,{name:"Filter",size:14})})]}),o.jsx("button",{onClick:$,className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition",title:"  ",children:o.jsx(M,{name:"Plus",size:18})}),o.jsx("button",{onClick:we,className:"p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",title:" ",children:o.jsx(M,{name:"Trash2",size:18})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:W,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Save",size:18}),"  "]}),o.jsxs("button",{onClick:Pe,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[o.jsx(M,{name:"CheckCircle",size:18}),"  "]}),o.jsxs("button",{onClick:on,className:"px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Image",size:18})," PNG"]})]})]}),o.jsxs("div",{ref:L,className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 text-slate-900",children:[o.jsxs("h3",{className:"text-2xl font-black text-center mb-6 uppercase text-slate-800",children:[" : ",(_t=(qt=s.bellPresets)==null?void 0:qt.find(T=>T.id===S))==null?void 0:_t.name]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[de.First,de.Second].map(T=>o.jsxs("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:[o.jsx("div",{className:`p-4 font-bold text-lg text-white text-center ${T===de.First?"bg-indigo-600":"bg-purple-600"}`,children:T}),o.jsx("div",{className:"p-4 space-y-2 bg-white",children:wn[T].map(P=>{const V=N.find(J=>J.shift===T&&J.period===P&&J.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return o.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-lg border ${V.cancelled?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[o.jsx("div",{className:"w-10 h-10 rounded bg-white flex items-center justify-center font-black text-slate-500 shadow-sm border border-slate-200",children:P}),V.cancelled?o.jsx("div",{className:"flex-1 flex justify-center items-center",children:o.jsx("span",{className:"text-red-500 font-bold uppercase tracking-wider text-sm",children:" "})}):o.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[o.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:V.start,onChange:J=>Ne(T,P,"start",J.target.value)}),o.jsx("span",{className:"text-slate-400 font-bold",children:""}),o.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:V.end,onChange:J=>Ne(T,P,"end",J.target.value)})]}),o.jsx("button",{onClick:()=>De(T,P),className:`w-8 h-8 rounded flex items-center justify-center transition-colors ${V.cancelled?"bg-white text-emerald-500 hover:text-emerald-700":"text-slate-400 hover:text-red-500 hover:bg-red-50"}`,title:V.cancelled?" ":" ","data-html2canvas-ignore":"true",children:o.jsx(M,{name:V.cancelled?"RotateCcw":"X",size:16})})]},P)})})]},T))}),o.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 flex justify-between items-end text-sm font-bold text-slate-500",children:[o.jsxs("div",{children:["",o.jsx("br",{})," "]}),o.jsx("div",{children:"____________"})]})]})]})]}),o.jsx(Or,{isOpen:l,onClose:()=>c(!1),title:d?"":"",children:o.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:T=>p({...f,name:T.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:T=>p({...f,birthDate:T.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),o.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:T=>p({...f,telegramChatId:T.target.value}),placeholder:"12345678"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Bt=f.shifts)==null?void 0:Bt.includes(de.First),onChange:()=>gr(de.First)})," ",o.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(ae=f.shifts)==null?void 0:ae.includes(de.Second),onChange:()=>gr(de.Second)})," ",o.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(T=>{var P;return o.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(P=f.subjectIds)==null?void 0:P.includes(T.id),onChange:V=>{const J=f.subjectIds||[];p({...f,subjectIds:V.target.checked?[...J,T.id]:J.filter(ye=>ye!==T.id)})}})," ",o.jsx("span",{className:"text-sm dark:text-slate-300",children:T.name})]},T.id)})})]}),i==="subjects"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:y.name||"",onChange:T=>v({...y,name:T.target.value})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),o.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:y.color||"#ffffff",onChange:T=>v({...y,color:T.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),o.jsx("input",{type:"number",inputMode:"numeric",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.difficulty||5,onChange:T=>v({...y,difficulty:parseInt(T.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),o.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.requiredRoomType,onChange:T=>v({...y,requiredRoomType:T.target.value}),children:nB.map(T=>o.jsx("option",{value:T,children:T},T))})]})]}),i==="classes"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:E.name||"",onChange:T=>B({...E,name:T.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:E.studentsCount||25,onChange:T=>B({...E,studentsCount:parseInt(T.target.value)})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:()=>B({...E,shift:de.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===de.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>B({...E,shift:de.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===de.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),o.jsxs("label",{className:"flex items-center gap-2 mt-4 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:E.excludeFromReports||!1,onChange:T=>B({...E,excludeFromReports:T.target.checked})}),o.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"   "})]}),o.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"      ,     ."})]}),i==="rooms"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:x.name||"",onChange:T=>_({...x,name:T.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),o.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:x.capacity||30,onChange:T=>_({...x,capacity:parseInt(T.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:x.type,onChange:T=>_({...x,type:T.target.value}),children:nB.map(T=>o.jsx("option",{value:T,children:T},T))})]})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:Xe,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),o.jsx(Or,{isOpen:b,onClose:()=>C(!1),title:"  ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:F,onChange:T=>R(T.target.value),autoFocus:!0})]}),o.jsx("div",{className:"flex justify-end pt-2",children:o.jsx("button",{onClick:Fe,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})})]})},UK=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Mn(),{schedule1:i,schedule2:a,substitutions:l,saveScheduleData:c}=Qi(),{addToast:d}=iy(),h=bi(),[f,p]=I.useState(si()),y=I.useRef(null),[v,E]=I.useState("pending"),[B,x]=I.useState("teacher"),[_,S]=I.useState(!1),[U,N]=I.useState(!1),[w,b]=I.useState(null),[C,F]=I.useState(!1),[R,L]=I.useState(!1),[Q,Ge]=I.useState(!1),[We,Xe]=I.useState(!1),[ze,ie]=I.useState(null),[Be,ke]=I.useState(null),[Ne,De]=I.useState(""),[W,$]=I.useState(""),[Fe,we]=I.useState(""),[Pe,on]=I.useState(""),[gr,qt]=I.useState("all"),[_t,Bt]=I.useState(""),[ae,T]=I.useState(""),[P,V]=I.useState(""),[J,ye]=I.useState(""),[re,z]=I.useState(null),[q,O]=I.useState([]),[Ae,ee]=I.useState(!1),[oe,Y]=I.useState(!1),[te,pe]=I.useState(!1),[Qe,Ve]=I.useState(null),[Ie,et]=I.useState(null),Ze=ok({maxWidth:767}),[it,Ke]=I.useState("lessons"),he=I.useMemo(()=>{const D={schedule:i,schedule2:a,settings:s};return XT(new Date(f),D)},[f,i,a,s]);I.useEffect(()=>{var D;(D=h.state)!=null&&D.subParams&&(b(h.state.subParams),V(""),ye(""),O([]),z(null),ee(!1),Y(!1),pe(!1),x("teacher"),N(!0),window.history.replaceState({},document.title))},[h.state]),I.useEffect(()=>{if(U&&w){if(w.isEditing)return;const D=l.find(G=>G.scheduleItemId===w.scheduleItemId&&G.date===f);D?(O(D.refusals||[]),D.replacementTeacherId==="cancelled"?x("cancel"):D.isMerger||D.replacementClassId?x("advanced"):x("teacher"),D.replacementTeacherId&&!["conducted","cancelled"].includes(D.replacementTeacherId)&&z(D.replacementTeacherId)):(O([]),x("teacher"),z(null)),ee(!1),Y(!1),pe(!1)}},[U,w,l,f]);const Ce=I.useMemo(()=>{const D=new Date(f).getDay();return D===0||D===6?null:wt[D-1]},[f]),tt=D=>{const G=new Date(f);G.setDate(G.getDate()+D),p(si(G))},Tt=()=>{p(si(new Date))},mt=()=>{y.current&&y.current.showPicker()},ot=I.useMemo(()=>e.filter(D=>{const G=D.name.toLowerCase().includes(Pe.toLowerCase()),se=gr==="all"?!0:D.shifts&&D.shifts.includes(gr);return G&&se}),[e,Pe,gr]),Kt=I.useMemo(()=>e.filter(D=>D.unavailableDates.includes(f)),[e,f]),bt=I.useMemo(()=>{if(!Ce)return[];const D=Kt.map(Te=>Te.id),G=he.filter(Te=>Te.day===Ce&&D.includes(Te.teacherId)),ce=l.filter(Te=>Te.date===f).map(Te=>Te.scheduleItemId),fe=he.filter(Te=>ce.includes(Te.id)),Le=[...G];return fe.forEach(Te=>{Le.find(At=>At.id===Te.id)||Le.push(Te)}),Le.sort((Te,At)=>Te.period-At.period)},[he,Ce,Kt,l,f]),{pendingLessons:yt,resolvedLessons:pr}=I.useMemo(()=>{const D=[],G=[];return bt.forEach(se=>{l.filter(fe=>fe.scheduleItemId===se.id&&fe.date===f).length>0?G.push(se):D.push(se)}),{pendingLessons:D,resolvedLessons:G}},[bt,l,f]),Gr=D=>{var se;const G=e.find(ce=>ce.id===D);ke(D),De(((se=G==null?void 0:G.absenceReasons)==null?void 0:se[f])||""),F(!0)},On=I.useCallback(async()=>{let D=[...e];const G=D.findIndex(ce=>ce.id===Be);if(G===-1)return;const se={...D[G]};se.unavailableDates.includes(f)||(se.unavailableDates=[...se.unavailableDates,f]),se.absenceReasons||(se.absenceReasons={}),se.absenceReasons[f]=Ne,D[G]=se,await A({teachers:D}),F(!1)},[e,Be,f,Ne,A]),ct=I.useCallback(async D=>{let G=[...e];const se=G.findIndex(fe=>fe.id===D);if(se===-1)return;const ce={...G[se]};ce.unavailableDates=ce.unavailableDates.filter(fe=>fe!==f),ce.absenceReasons&&delete ce.absenceReasons[f],G[se]=ce,await A({teachers:G})},[e,f,A]),zr=I.useCallback(async(D,G=!1)=>{if(!w){alert(":   .    .");return}const se=he.find(Le=>Le.id===w.scheduleItemId);if(!se){alert(":     .");return}const ce=l.filter(Le=>!(Le.scheduleItemId===w.scheduleItemId&&Le.date===f)),fe={id:hn(),date:f,scheduleItemId:w.scheduleItemId,originalTeacherId:se.teacherId,replacementTeacherId:D,replacementRoomId:P||void 0,isMerger:G,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&J?J:void 0,refusals:q};ce.push(fe);try{await c({substitutions:ce}),N(!1),Bt(""),V(""),ye(""),O([]),z(null),b(null)}catch(Le){console.error("Failed to save substitution:",Le),alert("   .   .")}},[w,f,P,he,l,e,J,q,c]),j=I.useCallback(async D=>{if(!w||!Ce||!w.period||!w.shift||!w.teacherId){alert(":   .");return}const G=he.filter(ce=>ce.classId===D&&ce.day===Ce&&ce.period===w.period&&ce.shift===w.shift);if(G.length===0){alert("    .");return}const se=l.filter(ce=>!(ce.scheduleItemId===w.scheduleItemId&&ce.date===f));G.forEach(ce=>{const fe={id:hn(),date:f,scheduleItemId:w.scheduleItemId,originalTeacherId:w.teacherId,replacementTeacherId:ce.teacherId,replacementClassId:ce.classId,replacementSubjectId:ce.subjectId,isMerger:!0,replacementRoomId:ce.roomId,lessonAbsenceReason:J||void 0};se.push(fe)}),await c({substitutions:se}),N(!1),Bt(""),V(""),ye(""),b(null),Y(!1)},[w,f,Ce,he,l,J,c]),ne=I.useCallback(async D=>{if(!w)return;const G=he.find(jt=>jt.id===w.scheduleItemId),se=he.find(jt=>jt.id===D);if(!G||!se){alert(":     .");return}const ce=[...l];let fe,Le;P?(fe=P,Le=te?se.roomId:G.roomId):te?(fe=G.roomId,Le=se.roomId):(fe=se.roomId,Le=G.roomId);const Te=ce.findIndex(jt=>jt.scheduleItemId===G.id&&jt.date===f),At={id:Te>=0?ce[Te].id:hn(),date:f,scheduleItemId:G.id,originalTeacherId:G.teacherId,replacementTeacherId:G.teacherId,replacementClassId:se.classId,replacementSubjectId:se.subjectId,replacementRoomId:fe!==G.roomId?fe:void 0};Te>=0?ce[Te]=At:ce.push(At);const st=ce.findIndex(jt=>jt.scheduleItemId===se.id&&jt.date===f),It={id:st>=0?ce[st].id:hn(),date:f,scheduleItemId:se.id,originalTeacherId:se.teacherId,replacementTeacherId:se.teacherId,replacementClassId:G.classId,replacementSubjectId:G.subjectId,replacementRoomId:Le!==se.roomId?Le:void 0};st>=0?ce[st]=It:ce.push(It),await c({substitutions:ce}),N(!1),b(null),V(""),ee(!1),pe(!1)},[w,he,l,f,c,P,te]),Ee=I.useCallback(async D=>{const G=l.filter(se=>!(se.scheduleItemId===D&&se.date===f));await c({substitutions:G})},[l,f,c]),xe=(D,G)=>{b({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day,isEditing:!0}),G.replacementRoomId?V(G.replacementRoomId):V(""),G.lessonAbsenceReason?ye(G.lessonAbsenceReason):ye(""),G.refusals?O(G.refusals):O([]),G.replacementTeacherId==="cancelled"?x("cancel"):G.isMerger||G.replacementClassId?x("advanced"):(x("teacher"),z(G.replacementTeacherId)),N(!0)},Se=()=>{const D=l.filter(ce=>ce.date===f&&ce.replacementTeacherId!=="conducted"&&ce.replacementTeacherId!=="cancelled");if(D.length===0)return"    .";D.sort((ce,fe)=>{const Le=he.find(At=>At.id===ce.scheduleItemId),Te=he.find(At=>At.id===fe.scheduleItemId);return((Le==null?void 0:Le.period)||0)-((Te==null?void 0:Te.period)||0)});let G="";const se=new Set;return D.forEach(ce=>{if(se.has(ce.scheduleItemId))return;se.add(ce.scheduleItemId);const fe=he.find(Ct=>Ct.id===ce.scheduleItemId);if(!fe)return;const Le=r.find(Ct=>Ct.id===fe.classId),Te=t.find(Ct=>Ct.id===fe.subjectId),At=e.find(Ct=>Ct.id===ce.originalTeacherId),st=e.find(Ct=>Ct.id===ce.replacementTeacherId),It=n.find(Ct=>Ct.id===(ce.replacementRoomId||fe.roomId)),jt=It?It.name:ce.replacementRoomId||fe.roomId||"";if(G+=` **${fe.period} ** | ${Le==null?void 0:Le.name} | ${Te==null?void 0:Te.name}
`,G+=` ${At==null?void 0:At.name}
`,ce.isMerger)G+=` : ${st==null?void 0:st.name}
`;else if(ce.replacementClassId){const Ct=r.find(Er=>Er.id===ce.replacementClassId);G+=`  : ${Ct==null?void 0:Ct.name}
`}else G+=` ${st==null?void 0:st.name}
`;G+=` . ${jt}

`}),G},me=()=>{var ce;const D=Se(),G=new Date(f).toLocaleDateString("ru-RU");let se=(ce=s.telegramTemplates)==null?void 0:ce.summary;return se||(se=` **  {{date}}** 

{{content}}`),se.replace("{{date}}",G).replace("{{content}}",D)},Me=()=>{const D=me();navigator.clipboard.writeText(D),d({type:"success",title:"",message:"    "})},qe=async()=>{if(!s.telegramToken||!s.feedbackChatId){d({type:"warning",title:"",message:"Telegram  "});return}const D=me();S(!0);try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:D,parse_mode:"Markdown"})}),d({type:"success",title:"",message:"   Telegram"})}catch(G){console.error(G),d({type:"danger",title:"",message:"   "})}finally{S(!1)}},Rt=(D,G,se,ce,fe,Le,Te)=>{ie({teacherId:D,lessonId:G,roomName:se,className:ce,subjectName:fe,period:Le,roomChanged:Te}),Xe(!0)},an=async D=>{var Ct,Er;if(!ze)return;const{teacherId:G,lessonId:se,roomName:ce,className:fe,subjectName:Le,period:Te,roomChanged:At}=ze,st=e.find(mn=>mn.id===G);if(!(st!=null&&st.telegramChatId)||!s.telegramToken){alert("    Telegram ID    ."),Xe(!1);return}const It=new Date(f).toLocaleDateString("ru-RU");let jt="";if(D==="single"){const mn=` *${Te} * | ${fe}
 ${Le}
 . ${ce}`;let Hn=(Ct=s.telegramTemplates)==null?void 0:Ct.teacherNotification;Hn||(Hn=` **  !**
 {{date}}

{{content}}

,   .`),jt=Hn.replace("{{date}}",It).replace("{{content}}",mn)}else{const mn=l.filter(Vn=>Vn.date===f&&Vn.replacementTeacherId===G);if(mn.sort((Vn,ut)=>{const ln=he.find(ts=>ts.id===Vn.scheduleItemId),fs=he.find(ts=>ts.id===ut.scheduleItemId);return((ln==null?void 0:ln.period)||0)-((fs==null?void 0:fs.period)||0)}),mn.length===0){alert("       ."),Xe(!1);return}let Hn="";mn.forEach(Vn=>{var gA,$u,yl;const ut=he.find(Ns=>Ns.id===Vn.scheduleItemId);if(!ut)return;const ln=((gA=r.find(Ns=>Ns.id===ut.classId))==null?void 0:gA.name)||"?",fs=(($u=t.find(Ns=>Ns.id===ut.subjectId))==null?void 0:$u.name)||"?",ts=ut.roomId,ko=Vn.replacementRoomId,St=ko||ts,Fo=((yl=n.find(Ns=>Ns.id===St))==null?void 0:yl.name)||St||"",Ni=ko&&ko!==ts?" ( .)":"";Hn+=` *${ut.period} * | ${ln}
 ${fs}
 . ${Fo}${Ni}

`});let Qs=(Er=s.telegramTemplates)==null?void 0:Er.teacherSummary;Qs||(Qs=` **   {{date}}**

{{content}},   .`),jt=Qs.replace("{{date}}",It).replace("{{content}}",Hn)}try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:st.telegramChatId,text:jt,parse_mode:"Markdown"})}),d({type:"success",title:"",message:`  ${st.name}`})}catch(mn){console.error(mn),alert("   Telegram")}finally{Xe(!1),ie(null)}},Ir=I.useMemo(()=>w?new Set(l.filter(D=>D.date===f&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const G=he.find(se=>se.id===D.scheduleItemId);return G&&G.period===w.period&&G.shift===w.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[l,he,f,w]),fA=I.useMemo(()=>{if(!w||!Ce)return{recommended:[],others:[]};const D=f.substring(0,7),G=e.filter(fe=>fe.name.toLowerCase().includes(_t.toLowerCase())).map(fe=>{const Le=fe.unavailableDates.includes(f),Te=he.some(Er=>Er.teacherId===fe.id&&Er.day===Ce&&Er.period===w.period&&Er.shift===w.shift),At=Ir.has(fe.id),st=Te||At,It=fe.subjectIds.includes(w.subjectId),jt=l.filter(Er=>Er.replacementTeacherId===fe.id&&Er.date.startsWith(D)).length;let Ct=0;return Le&&(Ct-=1e3),st&&(Ct-=200),It&&(Ct+=50),!st&&!Le&&(Ct+=100),Ct-=jt,{teacher:fe,isAbsent:Le,isBusy:st,isSpecialist:It,score:Ct,subsCount:jt}}).sort((fe,Le)=>Le.score-fe.score),se=G.filter(fe=>!fe.isBusy&&!fe.isAbsent).slice(0,3),ce=G.filter(fe=>!se.includes(fe));return{recommended:se,others:ce}},[e,w,f,_t,Ce,he,l,Ir]),Us=I.useMemo(()=>{if(!w||!Ce)return[];const D=he.filter(se=>se.day===Ce&&se.period===w.period&&se.shift===w.shift&&se.classId!==w.classId),G=new Map;return D.forEach(se=>{const ce=r.find(Te=>Te.id===se.classId),fe=e.find(Te=>Te.id===se.teacherId),Le=t.find(Te=>Te.id===se.subjectId);if(ce&&fe){G.has(ce.id)||G.set(ce.id,{classEntity:ce,teachers:[],subjects:[]});const Te=G.get(ce.id);Te.teachers.includes(fe.name)||Te.teachers.push(fe.name),Le&&!Te.subjects.includes(Le.name)&&Te.subjects.push(Le.name)}}),Array.from(G.values())},[he,w,Ce,r,e,t]),Mt=I.useMemo(()=>{var Le;if(!w)return null;const D=he.find(Te=>Te.id===w.scheduleItemId);if(!D)return null;const G=r.find(Te=>Te.id===D.classId),se=t.find(Te=>Te.id===D.subjectId),ce=e.find(Te=>Te.id===D.teacherId),fe=((Le=ce==null?void 0:ce.unavailableDates)==null?void 0:Le.includes(f))||!1;return{className:G==null?void 0:G.name,subjectName:se==null?void 0:se.name,teacherName:ce==null?void 0:ce.name,teacherId:ce==null?void 0:ce.id,period:D.period,roomId:D.roomId,isTeacherAbsent:fe}},[w,he,r,t,e,f]),Tn=I.useMemo(()=>!(Mt!=null&&Mt.teacherId)||!Ce?[]:he.filter(D=>D.teacherId===Mt.teacherId&&D.day===Ce&&D.id!==(w==null?void 0:w.scheduleItemId)).sort((D,G)=>D.period-G.period),[he,Mt,Ce,w]),ml=I.useMemo(()=>{if(!Ce||ae.length<2)return[];const D=ae.toLowerCase(),G=e.filter(fe=>fe.name.toLowerCase().includes(D)),se=r.filter(fe=>fe.name.toLowerCase().includes(D)),ce=[];return G.forEach(fe=>{he.filter(Te=>Te.teacherId===fe.id&&Te.day===Ce).forEach(Te=>{const At=r.find(It=>It.id===Te.classId),st=t.find(It=>It.id===Te.subjectId);ce.push({...Te,entityName:fe.name,subInfo:At==null?void 0:At.name,subjectName:st==null?void 0:st.name})})}),se.forEach(fe=>{he.filter(Te=>Te.classId===fe.id&&Te.day===Ce).forEach(Te=>{if(ce.find(It=>It.id===Te.id))return;const At=e.find(It=>It.id===Te.teacherId),st=t.find(It=>It.id===Te.subjectId);ce.push({...Te,entityName:fe.name,subInfo:At==null?void 0:At.name,subjectName:st==null?void 0:st.name})})}),ce.sort((fe,Le)=>fe.period-Le.period)},[ae,Ce,e,r,he,t]),wl=(D,G)=>{Ve(G),D.dataTransfer.effectAllowed="copy",D.dataTransfer.setData("text/plain",G)},xl=(D,G)=>{D.preventDefault(),et(G)},Ku=()=>{et(null)},Gu=(D,G)=>{var se;D.preventDefault(),Qe&&(b({scheduleItemId:G.id,subjectId:G.subjectId,period:G.period,shift:G.shift,classId:G.classId,teacherId:G.teacherId,roomId:G.roomId,day:G.day}),N(!0),Bt(((se=e.find(ce=>ce.id===Qe))==null?void 0:se.name)||""),Ve(null),et(null))},Og=(D,G)=>{let se=!1;if(G){if(!window.confirm("  .   ?"))return;se=!0}zr(D,se)},To=(D,G)=>{G.stopPropagation(),q.includes(D)?O(q.filter(se=>se!==D)):O([...q,D])},zu=(D,G)=>{var Qs,Vn;const se=l.filter(ut=>ut.scheduleItemId===D.id&&ut.date===f),fe=se.length>0?se[0]:null,Le=fe&&!["conducted","cancelled"].includes(fe.replacementTeacherId)?e.find(ut=>ut.id===fe.replacementTeacherId):null,Te=e.find(ut=>ut.id===D.teacherId),At=t.find(ut=>ut.id===D.subjectId),st=r.find(ut=>ut.id===D.classId),It=((Qs=n.find(ut=>ut.id===D.roomId))==null?void 0:Qs.name)||D.roomId||"",jt=fe==null?void 0:fe.replacementRoomId,Ct=jt?((Vn=n.find(ut=>ut.id===jt))==null?void 0:Vn.name)||jt:null,Er=jt&&jt!==D.roomId,mn=(fe==null?void 0:fe.replacementTeacherId)==="cancelled",Hn=(fe==null?void 0:fe.replacementTeacherId)==="conducted";return o.jsxs("div",{onDragOver:ut=>xl(ut,D.id),onDragLeave:Ku,onDrop:ut=>Gu(ut,D),className:`p-5 rounded-2xl border transition-all ${Ie===D.id?"ring-2 ring-indigo-500 bg-indigo-50 border-indigo-500":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 shadow-sm"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-xl ${G?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:D.period}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg",children:st==null?void 0:st.name}),o.jsx("div",{className:"text-sm text-slate-500",children:At==null?void 0:At.name})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:D.shift===de.First?"1 ":"2 "}),o.jsx("div",{className:"mt-1",children:Er?o.jsxs("div",{className:"flex items-center justify-end gap-1.5 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:[o.jsx("span",{className:"text-xs font-mono font-bold text-slate-400 line-through decoration-red-400",children:It}),o.jsx(M,{name:"ArrowRight",size:10,className:"text-indigo-400"}),o.jsx("span",{className:"text-xs font-mono font-black text-indigo-700 dark:text-indigo-300",children:Ct})]}):o.jsx("div",{className:"text-xs font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block font-bold",children:It})})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[o.jsx("div",{className:`text-base font-medium ${G?"text-slate-400 line-through":"text-red-500"}`,children:Te==null?void 0:Te.name}),G?o.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[mn?o.jsx("span",{className:"text-red-600 font-black text-sm uppercase",children:" "}):Hn?o.jsx("span",{className:"text-blue-600 font-bold text-sm",children:""}):o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx("span",{className:"text-emerald-600 font-bold text-base",children:(Le==null?void 0:Le.name)||""}),(fe==null?void 0:fe.isMerger)&&o.jsx("span",{className:"text-[10px] text-purple-500 font-bold",children:""})]}),Le&&Le.telegramChatId&&!mn&&!Hn&&o.jsx("button",{onClick:()=>{const ut=Er?`${It} -> ${Ct}`:It;Rt(Le.id,D.id,ut,(st==null?void 0:st.name)||"?",(At==null?void 0:At.name)||"?",D.period,!!Er)},className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"   Telegram",children:o.jsx(M,{name:"Send",size:16})}),fe&&o.jsx("button",{onClick:()=>xe(D,fe),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 rounded-lg transition-colors",title:" ",children:o.jsx(M,{name:"Edit",size:18})}),o.jsx("button",{onClick:()=>Ee(D.id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx(M,{name:"X",size:18})})]}):o.jsx("button",{onClick:()=>{b({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),N(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition",children:""})]})]},D.id)};return o.jsxs("div",{className:"h-full flex flex-col gap-6",children:[o.jsx("div",{className:"flex flex-col gap-4",children:o.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 p-1.5 rounded-xl border border-slate-200 dark:border-slate-600",children:[o.jsx("button",{onClick:()=>tt(-1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:o.jsx(M,{name:"ArrowRight",className:"rotate-180",size:18})}),o.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 font-bold text-slate-700 dark:text-slate-200 cursor-pointer relative group",children:[o.jsx(M,{name:"Calendar",size:18,className:"text-indigo-500"}),o.jsx("span",{children:new Date(f).toLocaleDateString("ru-RU",{day:"numeric",month:"long",weekday:"short"})}),o.jsx("input",{ref:y,type:"date",value:f,onChange:D=>p(D.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]}),o.jsx("button",{onClick:mt,className:"p-2 bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-lg hover:text-indigo-600 shadow-sm border border-slate-200 dark:border-slate-500",title:" ",children:o.jsx(M,{name:"Calendar",size:16})}),o.jsx("button",{onClick:()=>Tt(),className:"px-3 py-1.5 text-xs font-bold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors",children:""}),o.jsx("button",{onClick:()=>tt(1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:o.jsx(M,{name:"ArrowRight",size:18})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-auto",children:[o.jsxs("button",{onClick:qe,disabled:_,className:"h-[48px] px-5 rounded-xl bg-blue-600 text-white font-bold text-sm shadow-lg shadow-blue-200 hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50",children:[_?o.jsx(M,{name:"Loader",className:"animate-spin",size:18}):o.jsx(M,{name:"Send",size:18})," Telegram"]}),o.jsxs("button",{onClick:Me,className:"h-[48px] px-5 rounded-xl bg-indigo-600 text-white font-bold text-sm shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition flex items-center gap-2",children:[o.jsx(M,{name:"Copy",size:18})," "]}),o.jsxs("button",{onClick:()=>Ge(!0),className:"h-[48px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 transition-colors",children:[o.jsx(M,{name:"History",size:18})," "]})]})]})})}),o.jsxs("div",{className:"md:hidden flex bg-white dark:bg-dark-800 p-1 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 shrink-0",children:[o.jsxs("button",{onClick:()=>Ke("lessons"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${it==="lessons"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[o.jsx(M,{name:"List",size:18}),""]}),o.jsxs("button",{onClick:()=>Ke("teachers"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${it==="teachers"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[o.jsx(M,{name:"Users",size:18}),""]})]}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[o.jsx("div",{className:`w-full md:w-80 flex-col gap-4 ${Ze&&it!=="teachers"?"hidden":"flex"}`,children:o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"UserX",size:18,className:"text-red-500"})," "]}),o.jsxs("div",{className:"mb-3 space-y-2",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>qt("all"),className:`flex-1 py-2 text-xs font-bold rounded-md ${gr==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),o.jsx("button",{onClick:()=>qt(de.First),className:`flex-1 py-2 text-xs font-bold rounded-md ${gr===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>qt(de.Second),className:`flex-1 py-2 text-xs font-bold rounded-md ${gr===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),o.jsx("input",{placeholder:" ...",value:Pe,onChange:D=>on(D.target.value),className:"w-full pl-9 pr-3 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-sm outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:ot.map(D=>{const G=D.unavailableDates.includes(f),se=D.absenceReasons?D.absenceReasons[f]:"";return o.jsxs("div",{draggable:!G,onDragStart:ce=>wl(ce,D.id),className:`flex flex-col p-4 rounded-xl border transition-all ${G?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600 cursor-grab active:cursor-grabbing hover:border-indigo-300"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:`text-base font-bold ${G?"text-red-700 dark:text-red-400":"text-slate-700 dark:text-slate-300"}`,children:D.name}),o.jsxs("div",{className:"flex gap-1",children:[G&&o.jsx("button",{onClick:()=>Gr(D.id),className:"p-1.5 bg-white text-slate-500 rounded-lg hover:text-indigo-600 shadow-sm",title:" ",children:o.jsx(M,{name:"Edit",size:14})}),o.jsx("button",{onClick:()=>G?ct(D.id):Gr(D.id),className:`text-xs px-2.5 py-1.5 rounded-lg font-bold transition-colors ${G?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:G?"":""})]})]}),o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("div",{className:"flex gap-1",children:D.shifts.map(ce=>o.jsx("span",{className:"text-[10px] bg-white dark:bg-slate-600 px-1.5 py-0.5 rounded border border-slate-100 dark:border-slate-500 text-slate-500 font-medium",children:ce===de.First?"1":"2"},ce))}),G&&se&&o.jsx("div",{className:"text-xs text-red-500 dark:text-red-400 italic font-medium",children:se})]})]},D.id)})})]})}),o.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${Ze&&it!=="lessons"?"hidden":"flex"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsxs("button",{onClick:()=>E("pending"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${v==="pending"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:["  ",yt.length>0&&o.jsx("span",{className:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded-full text-xs",children:yt.length})]}),o.jsxs("button",{onClick:()=>E("resolved"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${v==="resolved"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:[" ",pr.length>0&&o.jsx("span",{className:"ml-1 bg-emerald-500 text-white px-2 py-0.5 rounded-full text-xs",children:pr.length})]})]}),o.jsx("div",{className:"flex gap-2",children:o.jsx("button",{onClick:()=>{T(""),L(!0)},className:"p-3 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100",children:o.jsx(M,{name:"Search",size:20})})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[(v==="pending"?yt:pr).map(D=>zu(D,v==="resolved")),(v==="pending"?yt:pr).length===0&&o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[o.jsx(M,{name:v==="pending"?"CheckCircle":"List",size:64,className:"mb-4 text-slate-200 dark:text-slate-700"}),o.jsx("p",{className:"text-lg font-medium",children:v==="pending"?"  !":"  "})]})]})]})]}),o.jsx(Or,{isOpen:U,onClose:()=>N(!1),title:" ",maxWidth:"max-w-2xl",children:o.jsxs("div",{className:"flex flex-col h-[90vh] md:h-[850px] -m-6",children:[o.jsxs("div",{className:"p-6 pb-2 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-dark-800 z-10",children:[Mt&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-xl",children:Mt.className}),o.jsxs("div",{className:"text-slate-500 dark:text-slate-400 font-medium",children:[Mt.period,"   ",Mt.subjectName]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-slate-400 text-xs uppercase font-bold",children:""}),o.jsx("div",{className:`text-base ${Mt.isTeacherAbsent?"line-through decoration-red-400 text-red-400":"font-bold dark:text-white"}`,children:Mt.teacherName})]})]}),o.jsxs("div",{className:"flex gap-2 border-b border-slate-100 dark:border-slate-700",children:[o.jsx("button",{onClick:()=>x("teacher"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${B==="teacher"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),o.jsx("button",{onClick:()=>x("cancel"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${B==="cancel"?"border-red-600 text-red-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),o.jsx("button",{onClick:()=>x("advanced"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${B==="advanced"?"border-amber-600 text-amber-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:". "})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-white dark:bg-dark-800",children:[B==="teacher"&&o.jsxs("div",{className:"space-y-6",children:[fA.recommended.length>0&&o.jsxs("div",{children:[o.jsxs("h4",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2 flex items-center gap-1",children:[o.jsx(M,{name:"Star",size:14})," "]}),o.jsx("div",{className:"space-y-2",children:fA.recommended.map(({teacher:D,isSpecialist:G})=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50/50 border border-emerald-100 rounded-xl hover:bg-emerald-100/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-200 text-emerald-700 flex items-center justify-center text-sm font-bold",children:D.name[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800 text-base",children:D.name}),o.jsx("div",{className:"text-xs text-emerald-600 font-bold uppercase",children:G?"":" "})]})]}),o.jsx("button",{onClick:()=>zr(D.id),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:""})]},D.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" "}),o.jsxs("div",{className:"relative mb-2",children:[o.jsx(M,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),o.jsx("input",{placeholder:" ...",value:_t,onChange:D=>Bt(D.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-indigo-500"})]}),o.jsx("div",{className:"space-y-1",children:fA.others.map(({teacher:D,isBusy:G,isAbsent:se,subsCount:ce})=>{const fe=q.includes(D.id);return o.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg text-sm ${se?"opacity-50":"hover:bg-slate-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${G?"bg-orange-400":se?"bg-red-400":"bg-slate-300"}`}),o.jsx("span",{className:"font-bold text-base text-slate-700",children:D.name}),fe&&o.jsx("span",{className:"text-[10px] bg-slate-200 px-1.5 py-0.5 rounded font-bold text-slate-500",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[!se&&o.jsx("button",{onClick:Le=>To(D.id,Le),className:"p-1.5 text-slate-300 hover:text-slate-500 hover:bg-slate-100 rounded",children:o.jsx(M,{name:"X",size:16})}),!se&&o.jsx("button",{onClick:()=>Og(D.id,G),className:`px-3 py-1.5 rounded-lg text-xs font-bold ${G?"text-orange-600 bg-orange-50":"text-indigo-600 bg-indigo-50"}`,children:G?"?":""})]})]},D.id)})})]})]}),B==="cancel"&&o.jsxs("div",{className:"text-center py-12 flex flex-col items-center justify-center h-full",children:[o.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-6",children:o.jsx(M,{name:"X",size:40})}),o.jsx("h3",{className:"font-black text-2xl mb-2 text-slate-800",children:" ?"}),o.jsx("p",{className:"text-slate-500 text-base mb-8 max-w-sm",children:"          ."}),o.jsx("button",{onClick:()=>zr("cancelled"),className:"px-8 py-4 bg-red-600 text-white rounded-xl font-bold text-lg hover:bg-red-700 shadow-lg shadow-red-200 hover:shadow-xl transition-all",children:" "})]}),B==="advanced"&&o.jsxs("div",{className:"space-y-6 pt-4",children:[o.jsxs("button",{onClick:()=>zr("conducted"),className:"w-full p-4 rounded-xl bg-blue-50 text-blue-700 font-bold text-base hover:bg-blue-100 flex items-center justify-center gap-3 border border-blue-100 transition-all hover:shadow-md",children:[o.jsx(M,{name:"CheckCircle",size:20}),"   ( )"]}),o.jsxs("div",{className:"bg-amber-50 p-5 rounded-2xl border border-amber-100",children:[o.jsxs("h4",{className:"font-bold text-amber-800 text-base mb-2 flex items-center gap-2",children:[o.jsx(M,{name:"Users",size:18})," "]}),o.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"     ."}),o.jsx("div",{className:"space-y-2",children:Us.length===0?o.jsx("div",{className:"text-sm text-amber-500 italic text-center py-4",children:"  "}):Us.map(D=>o.jsxs("button",{onClick:()=>j(D.classEntity.id),className:"w-full p-3 bg-white rounded-xl border border-amber-200 text-left text-sm hover:border-amber-400 hover:shadow-sm transition-all",children:[o.jsx("span",{className:"font-bold text-base",children:D.classEntity.name})," ",o.jsx("span",{className:"text-slate-400 mx-2",children:"|"})," ",o.jsx("span",{className:"font-medium",children:D.subjects.join(", ")})]},D.classEntity.id))})]}),Tn.length>0&&o.jsxs("div",{className:"bg-purple-50 p-5 rounded-2xl border border-purple-100",children:[o.jsxs("h4",{className:"font-bold text-purple-800 text-base mb-2 flex items-center gap-2",children:[o.jsx(M,{name:"RotateCw",size:18})," "]}),o.jsx("p",{className:"text-sm text-purple-700 mb-4",children:"      ."}),o.jsx("div",{className:"space-y-2",children:Tn.map(D=>{var G;return o.jsxs("button",{onClick:()=>ne(D.id),className:"w-full p-3 bg-white rounded-xl border border-purple-200 text-left text-sm hover:border-purple-400 hover:shadow-sm transition-all",children:[o.jsxs("span",{className:"font-bold text-base",children:[D.period," "]}),": ",o.jsx("span",{className:"font-medium",children:(G=r.find(se=>se.id===D.classId))==null?void 0:G.name})]},D.id)})})]})]})]}),B==="teacher"&&o.jsxs("div",{className:"p-6 pt-4 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-dark-800 flex flex-col gap-4 rounded-b-3xl",children:[o.jsx("div",{className:"flex gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" ()"}),o.jsxs("select",{value:P,onChange:D=>V(D.target.value),className:"w-full border border-slate-200 p-3 rounded-xl text-sm bg-white font-medium outline-none focus:ring-2 ring-indigo-500",children:[o.jsx("option",{value:"",children:" /  "}),n.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]})]})}),(re||(Mt==null?void 0:Mt.teacherId)&&P)&&o.jsx("button",{onClick:()=>zr(re||Mt.teacherId),className:"w-full py-3 bg-indigo-600 text-white rounded-xl text-base font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200",children:" "})]})]})}),o.jsx(Or,{isOpen:C,onClose:()=>F(!1),title:" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("select",{value:Ne,onChange:D=>De(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:On,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})}),o.jsxs(Or,{isOpen:R,onClose:()=>L(!1),title:"  ",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ."}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),o.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:ae,onChange:D=>T(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),o.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[ml.map(D=>{var G;return o.jsxs("button",{onClick:()=>{L(!1),b({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),N(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",o.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),o.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[o.jsx("span",{children:D.subjectName}),D.roomId&&o.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((G=n.find(se=>se.id===D.roomId))==null?void 0:G.name)||D.roomId]})]})]},D.id)}),ae.length>1&&ml.length===0&&o.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",f,")"]})]})]}),o.jsx(Or,{isOpen:Q,onClose:()=>Ge(!1),title:" ",maxWidth:"max-w-5xl",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4 p-1 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(M,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:16}),o.jsx("input",{placeholder:"   (YYYY-MM-DD)  ...",value:W,onChange:D=>$(D.target.value),className:"w-full pl-9 pr-3 py-2 bg-white dark:bg-slate-800 border-none rounded-lg text-sm outline-none dark:text-white"})]}),o.jsxs("div",{className:"relative w-64",children:[o.jsxs("select",{value:Fe,onChange:D=>we(D.target.value),className:"w-full py-2 px-3 bg-white dark:bg-slate-800 rounded-lg text-sm border-none outline-none cursor-pointer dark:text-white appearance-none",children:[o.jsx("option",{value:"",children:" "}),e.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]}),o.jsx(M,{name:"Filter",className:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:14})]})]}),o.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar rounded-xl border border-slate-200 dark:border-slate-700",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 sticky top-0 z-10 shadow-sm",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),o.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),o.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),o.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),o.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider text-right",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-dark-800",children:l.filter(D=>{var G,se;if(Fe&&D.replacementTeacherId!==Fe&&D.originalTeacherId!==Fe)return!1;if(W){const ce=W.toLowerCase(),fe=D.date.includes(ce),Le=(G=e.find(At=>At.id===D.originalTeacherId))==null?void 0:G.name.toLowerCase().includes(ce),Te=(se=e.find(At=>At.id===D.replacementTeacherId))==null?void 0:se.name.toLowerCase().includes(ce);return fe||Le||Te}return!0}).sort((D,G)=>new Date(G.date).getTime()-new Date(D.date).getTime()).map(D=>{const G=e.find(Le=>Le.id===D.originalTeacherId),se=e.find(Le=>Le.id===D.replacementTeacherId),ce=he.find(Le=>Le.id===D.scheduleItemId)||{period:"?",classId:"?"},fe=r.find(Le=>Le.id===ce.classId);return o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[o.jsx("td",{className:"p-4 text-sm font-medium text-slate-600 dark:text-slate-300 whitespace-nowrap",children:new Date(D.date).toLocaleDateString("ru-RU")}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[ce.period," "]}),o.jsx("span",{className:"text-xs text-slate-500",children:(fe==null?void 0:fe.name)||"?"})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-500",children:G==null?void 0:G.name[0]}),o.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:G==null?void 0:G.name})]})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[D.replacementTeacherId==="cancelled"?o.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-500",children:o.jsx(M,{name:"X",size:14})}):D.replacementTeacherId==="conducted"?o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-500",children:o.jsx(M,{name:"CheckCircle",size:14})}):o.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 font-bold text-xs",children:se==null?void 0:se.name[0]}),o.jsx("span",{className:`text-sm font-bold ${D.replacementTeacherId==="cancelled"?"text-red-500":"text-slate-800 dark:text-white"}`,children:D.replacementTeacherId==="cancelled"?" ":D.replacementTeacherId==="conducted"?"":se==null?void 0:se.name})]})}),o.jsx("td",{className:"p-4 text-right",children:D.isMerger?o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:""}):D.replacementTeacherId==="cancelled"?o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:""}):o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:""})})]},D.id)})})]})})]})}),o.jsx(Or,{isOpen:We,onClose:()=>Xe(!1),title:" ",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-base text-slate-600 dark:text-slate-300",children:"               ?"}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("button",{onClick:()=>an("single"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:o.jsx(M,{name:"Bell",size:20})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  "}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),o.jsxs("button",{onClick:()=>an("all"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:o.jsx(M,{name:"List",size:20})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  ()"}),o.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"     "})]})]})]})]})})]})},QK=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=Mn(),{schedule1:A,schedule2:i}=Qi(),[a,l]=I.useState("teachers"),[c,d]=I.useState(si()),[h,f]=I.useState(de.First),[p,y]=I.useState(1),[v,E]=I.useState(de.First),[B,x]=I.useState(1),[_,S]=I.useState(""),[U,N]=I.useState(""),[w,b]=I.useState(""),[C,F]=I.useState(""),[R,L]=I.useState({summary:"",teacherNotification:"",teacherSummary:""}),[Q,Ge]=I.useState(!1),[We,Xe]=I.useState({message:"",active:!1,lastUpdated:""}),ze=I.useMemo(()=>{const $={schedule:A,schedule2:i,settings:n};return XT(new Date(c),$)},[c,A,i,n]);I.useEffect(()=>{n&&(S(n.telegramToken||""),N(n.feedbackChatId||""),b(n.weatherApiKey||""),F(n.weatherCity||"Minsk,BY"),L(n.telegramTemplates||{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`}),Xe(n.adminAnnouncement||{message:"",active:!1,lastUpdated:""}))},[n]),I.useEffect(()=>{y(h===de.First?1:0)},[h]),I.useEffect(()=>{x(v===de.First?1:0)},[v]);const ie=I.useMemo(()=>{const $=new Date(c).getDay();return $===0||$===6?null:wt[$-1]},[c]),Be=wn[h],ke=I.useMemo(()=>ie?e.filter($=>$.shifts&&!$.shifts.includes(h)||$.unavailableDates.includes(c)?!1:!ze.some(we=>we.teacherId===$.id&&we.day===ie&&we.period>p&&we.shift===h)).sort(($,Fe)=>$.name.localeCompare(Fe.name)):[],[e,c,ie,p,h,ze]),Ne=I.useMemo(()=>{if(!ie)return[];const $=new Set;return ze.forEach(we=>{we.day===ie&&we.period===B&&we.shift===v&&we.roomId&&$.add(we.roomId)}),r.filter(we=>!$.has(we.id)).map(we=>we.name)},[ze,r,ie,B,v]),De=async()=>{await s({settings:{...n,telegramToken:_,feedbackChatId:U,weatherApiKey:w,weatherCity:C,telegramTemplates:R,adminAnnouncement:{...We,lastUpdated:new Date().toISOString()}}}),alert(" !"),Ge(!1)},W=()=>{Xe($=>({...$,active:!$.active}))};return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(M,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>l("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),o.jsx("button",{onClick:()=>l("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),o.jsx("button",{onClick:()=>l("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),a!=="settings"&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsx("input",{type:"date",value:c,onChange:$=>d($.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),a==="teachers"&&o.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>f(de.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>f(de.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),o.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:Be.map($=>o.jsx("button",{onClick:()=>y($),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${p===$?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:$},$))})]})]}),a==="rooms"&&o.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>E(de.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${v===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>E(de.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${v===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),o.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:wn[v].map($=>o.jsx("button",{onClick:()=>x($),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${B===$?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:$},$))})]})]}),a==="settings"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 space-y-6",children:[o.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(M,{name:"Zap",size:20}),"  "]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),o.jsx("input",{type:"password",value:_,onChange:$=>S($.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),o.jsx("input",{type:"text",value:U,onChange:$=>N($.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   "})]}),o.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-600",children:[o.jsxs("h4",{className:"font-bold text-sm text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-2",children:[o.jsx(M,{name:"Cloud",size:16}),"  (OpenWeatherMap)"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"API Key"}),o.jsx("input",{type:"password",value:w,onChange:$=>b($.target.value),placeholder:"b6907d28...",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),o.jsx("input",{type:"text",value:C,onChange:$=>F($.target.value),placeholder:"Minsk,BY",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]})]})]}),o.jsxs("button",{onClick:()=>Ge(!0),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-indigo-200 dark:border-slate-600 text-indigo-600 dark:text-indigo-400 rounded-xl font-bold hover:bg-indigo-50 dark:hover:bg-slate-600 transition flex items-center justify-center gap-2",children:[o.jsx(M,{name:"Edit",size:18}),"   "]})]})]}),o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-6 rounded-2xl border border-amber-100 dark:border-amber-900 space-y-6",children:[o.jsxs("h3",{className:"font-bold text-lg text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[o.jsx(M,{name:"Bell",size:20}),"  "]}),o.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:",        ( )."}),o.jsx("div",{children:o.jsx("textarea",{value:We.message,onChange:$=>Xe({...We,message:$.target.value}),rows:4,className:"w-full border border-amber-200 dark:border-amber-800 rounded-xl p-3 text-sm bg-white dark:bg-slate-800 dark:text-white outline-none focus:border-amber-500 focus:ring-2 ring-amber-500/20 resize-none",placeholder:":     14:00..."})}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${We.active?"bg-amber-500":"bg-slate-300 dark:bg-slate-600"}`,children:o.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${We.active?"translate-x-6":"translate-x-0"}`})}),o.jsx("input",{type:"checkbox",className:"hidden",checked:We.active,onChange:W}),o.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:""})]}),o.jsx("div",{className:"text-xs text-slate-400",children:We.lastUpdated?`: ${new Date(We.lastUpdated).toLocaleDateString()}`:""})]})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("button",{onClick:De,className:"w-full px-6 py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 text-lg",children:[o.jsx(M,{name:"Save",size:22}),"   "]})})]})]}),a==="teachers"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[ke.map($=>o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:o.jsx(M,{name:"CheckCircle",size:22})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:$.name}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:$.subjectIds.slice(0,2).map(Fe=>{const we=t.find(Pe=>Pe.id===Fe);return we?o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:we.name},Fe):null})})]})]},$.id)),ke.length===0&&o.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",p,"   ",h]})]}),a==="rooms"&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[Ne.map($=>o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:o.jsx(M,{name:"DoorOpen",size:20})}),o.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:$}),o.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},$)),Ne.length===0&&o.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[o.jsx(M,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),o.jsx("p",{children:"      (   )."})]})]}),o.jsx(Or,{isOpen:Q,onClose:()=>Ge(!1),title:" ",maxWidth:"max-w-3xl",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-900 text-sm text-blue-800 dark:text-blue-300",children:[o.jsx("p",{className:"font-bold mb-1",children:" :"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsxs("li",{children:[o.jsx("code",{children:"{{date}}"}),'    (. "01.09.2023")']}),o.jsxs("li",{children:[o.jsx("code",{children:"{{content}}"}),"    "]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (/)"}),o.jsx("textarea",{value:R.summary,onChange:$=>L({...R,summary:$.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ( )"}),o.jsx("textarea",{value:R.teacherNotification,onChange:$=>L({...R,teacherNotification:$.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (  )"}),o.jsx("textarea",{value:R.teacherSummary,onChange:$=>L({...R,teacherSummary:$.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:De,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:" "})})]})})]})};var NK=Object.defineProperty,Rf=Object.getOwnPropertySymbols,dF=Object.prototype.hasOwnProperty,hF=Object.prototype.propertyIsEnumerable,WC=(t,e,r)=>e in t?NK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,RK=(t,e)=>{for(var r in e||(e={}))dF.call(e,r)&&WC(t,r,e[r]);if(Rf)for(var r of Rf(e))hF.call(e,r)&&WC(t,r,e[r]);return t},jK=(t,e)=>{var r={};for(var n in t)dF.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Rf)for(var n of Rf(t))e.indexOf(n)<0&&hF.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var yo;(t=>{const e=class{constructor(l,c,d,h){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let y=0;y<this.size;y++)f.push(!1);for(let y=0;y<this.size;y++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(d);if(this.drawCodewords(p),h==-1){let y=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const E=this.getPenaltyScore();E<y&&(h=v,y=E),this.applyMask(v)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(l,c){const d=t.QrSegment.makeSegments(l);return e.encodeSegments(d,c)}static encodeBinary(l,c){const d=t.QrSegment.makeBytes(l);return e.encodeSegments([d],c)}static encodeSegments(l,c,d=1,h=40,f=-1,p=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let y,v;for(y=d;;y++){const _=e.getNumDataCodewords(y,c)*8,S=a.getTotalBits(l,y);if(S<=_){v=S;break}if(y>=h)throw new RangeError("Data too long")}for(const _ of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])p&&v<=e.getNumDataCodewords(y,_)*8&&(c=_);let E=[];for(const _ of l){n(_.mode.modeBits,4,E),n(_.numChars,_.mode.numCharCountBits(y),E);for(const S of _.getData())E.push(S)}A(E.length==v);const B=e.getNumDataCodewords(y,c)*8;A(E.length<=B),n(0,Math.min(4,B-E.length),E),n(0,(8-E.length%8)%8,E),A(E.length%8==0);for(let _=236;E.length<B;_^=253)n(_,8,E);let x=[];for(;x.length*8<E.length;)x.push(0);return E.forEach((_,S)=>x[S>>>3]|=_<<7-(S&7)),new e(y,c,x,f)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(l[d],l[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let d=0;d<12;d++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,p=Math.floor(d/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(l,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),p=l+h,y=c+d;0<=p&&p<this.size&&0<=y&&y<this.size&&this.setFunctionModule(p,y,f!=2&&f!=4)}}drawAlignmentPattern(l,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(l+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(l,c,d){this.modules[c][l]=d,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,d=this.errorCorrectionLevel;if(l.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],p=Math.floor(e.getNumRawDataModules(c)/8),y=h-p%h,v=Math.floor(p/h);let E=[];const B=e.reedSolomonComputeDivisor(f);for(let _=0,S=0;_<h;_++){let U=l.slice(S,S+v-f+(_<y?0:1));S+=U.length;const N=e.reedSolomonComputeRemainder(U,B);_<y&&U.push(0),E.push(U.concat(N))}let x=[];for(let _=0;_<E[0].length;_++)E.forEach((S,U)=>{(_!=v-f||U>=y)&&x.push(S[_])});return A(x.length==p),x}drawCodewords(l){if(l.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=d-f,v=(d+1&2)==0?this.size-1-h:h;!this.isFunction[v][p]&&c<l.length*8&&(this.modules[v][p]=s(l[c>>>3],7-(c&7)),c++)}}A(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(l){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let p=!1,y=0,v=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[f][E]==p?(y++,y==5?l+=e.PENALTY_N1:y>5&&l++):(this.finderPenaltyAddHistory(y,v),p||(l+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),p=this.modules[f][E],y=1);l+=this.finderPenaltyTerminateAndCount(p,y,v)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,y=0,v=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][f]==p?(y++,y==5?l+=e.PENALTY_N1:y>5&&l++):(this.finderPenaltyAddHistory(y,v),p||(l+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),p=this.modules[E][f],y=1);l+=this.finderPenaltyTerminateAndCount(p,y,v)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const y=this.modules[f][p];y==this.modules[f][p+1]&&y==this.modules[f+1][p]&&y==this.modules[f+1][p+1]&&(l+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((p,y)=>p+(y?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),l+=h*e.PENALTY_N4,A(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let d=[6];for(let h=this.size-7;d.length<l;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(l){if(l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const d=Math.floor(l/7)+2;c-=(25*d-10)*d-55,l>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(e.getNumRawDataModules(l)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<l-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<l;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(l,c){let d=c.map(h=>0);for(const h of l){const f=h^d.shift();d.push(0),c.forEach((p,y)=>d[y]^=e.reedSolomonMultiply(p,f))}return d}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*l;return A(d>>>8==0),d}finderPenaltyCountPatterns(l){const c=l[1];A(c<=this.size*3);const d=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(d&&l[0]>=c*4&&l[6]>=c?1:0)+(d&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,d){return l&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(l>>>h&1)}function s(l,c){return(l>>>c&1)!=0}function A(l){if(!l)throw new Error("Assertion error")}const i=class{constructor(l,c,d){if(this.mode=l,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(l){let c=[];for(const d of l)n(d,8,c);return new i(i.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!i.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<l.length;){const h=Math.min(l.length-d,3);n(parseInt(l.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!i.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=l.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d+1)),n(h,11,c)}return d<l.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:i.isNumeric(l)?[i.makeNumeric(l)]:i.isAlphanumeric(l)?[i.makeAlphanumeric(l)]:[i.makeBytes(i.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,c);else if(l<16384)n(2,2,c),n(l,14,c);else if(l<1e6)n(6,3,c),n(l,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(l){return i.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return i.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let d=0;for(const h of l){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let d=0;d<l.length;d++)l.charAt(d)!="%"?c.push(l.charCodeAt(d)):(c.push(parseInt(l.substr(d+1,2),16)),d+=2);return c}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(yo||(yo={}));(t=>{(e=>{const r=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(yo||(yo={}));(t=>{(e=>{const r=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(yo||(yo={}));var lc=yo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var DK={L:lc.QrCode.Ecc.LOW,M:lc.QrCode.Ecc.MEDIUM,Q:lc.QrCode.Ecc.QUARTILE,H:lc.QrCode.Ecc.HIGH},PK=128,LK="L",MK="#FFFFFF",OK="#000000",HK=!1,fF=4,VK=.1;function KK(t,e=0){const r=[];return t.forEach(function(n,s){let A=null;n.forEach(function(i,a){if(!i&&A!==null){r.push(`M${A+e} ${s+e}h${a-A}v1H${A+e}z`),A=null;return}if(a===n.length-1){if(!i)return;A===null?r.push(`M${a+e},${s+e} h1v1H${a+e}z`):r.push(`M${A+e},${s+e} h${a+1-A}v1H${A+e}z`);return}i&&A===null&&(A=a)})}),r.join("")}function GK(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function zK(t,e,r,n){if(n==null)return null;const s=r?fF:0,A=t.length+s*2,i=Math.floor(e*VK),a=A/e,l=(n.width||i)*a,c=(n.height||i)*a,d=n.x==null?t.length/2-l/2:n.x*a,h=n.y==null?t.length/2-c/2:n.y*a;let f=null;if(n.excavate){let p=Math.floor(d),y=Math.floor(h),v=Math.ceil(l+d-p),E=Math.ceil(c+h-y);f={x:p,y,w:v,h:E}}return{x:d,y:h,h:c,w:l,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function $K(t){const e=t,{value:r,size:n=PK,level:s=LK,bgColor:A=MK,fgColor:i=OK,includeMargin:a=HK,imageSettings:l}=e,c=jK(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=lc.QrCode.encodeText(r,DK[s]).getModules();const h=a?fF:0,f=d.length+h*2,p=zK(d,n,a,l);let y=null;l!=null&&p!=null&&(p.excavation!=null&&(d=GK(d,p.excavation)),y=Os.createElement("image",{xlinkHref:l.src,height:p.h,width:p.w,x:p.x+h,y:p.y+h,preserveAspectRatio:"none"}));const v=KK(d,h);return Os.createElement("svg",RK({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),Os.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Os.createElement("path",{fill:i,d:v,shapeRendering:"crispEdges"}),y)}const WK=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,saveStaticData:i,dutyZones:a}=Mn(),{schedule1:l,schedule2:c,substitutions:d,saveScheduleData:h,dutySchedule:f,nutritionRecords:p}=Qi(),y=I.useRef(null),v=I.useRef(null),E=I.useRef(null),[B,x]=I.useState(si()),[_,S]=I.useState(()=>Ou(new Date,s)),[U,N]=I.useState(!1),[w,b]=I.useState(!1),[C,F]=I.useState(""),[R,L]=I.useState(""),[Q,Ge]=I.useState(!1),[We,Xe]=I.useState(""),ze=I.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,schedule:l,schedule2:c,substitutions:d,dutyZones:a,dutySchedule:f,nutritionRecords:p}),[t,e,r,n,s,A,l,c,d,a,f,p]),ie=()=>_===2?c:l,Be=z=>{const q=new Date(z).getMonth();return q>=0&&q<=4?c:l},ke=I.useMemo(()=>{const z=new Set;return r.forEach(q=>{const O=q.name.match(/^(\d+)/);O&&z.add(O[1])}),Array.from(z).sort((q,O)=>parseInt(q)-parseInt(O))},[r]);I.useEffect(()=>{ke.length>0&&!We&&Xe(ke[0])},[ke]);const Ne=z=>{var Ae;const q=(Ae=z.target.files)==null?void 0:Ae[0];if(!q)return;const O=new FileReader;O.onload=async ee=>{var oe;try{const Y=JSON.parse((oe=ee.target)==null?void 0:oe.result);if(Y.teachers&&(Y.schedule||Y.schedule2)){if(window.confirm("    . ?")){const te={...en,...Y,rooms:Y.rooms||en.rooms,classes:Y.classes||[],schedule:Y.schedule||[],schedule2:Y.schedule2||[],teachers:Y.teachers||[],subjects:Y.subjects||[],substitutions:Y.substitutions||[],settings:{...en.settings,...Y.settings}};await i(te),await h(te),alert("  !")}}else alert("  .")}catch{alert("  .")}},O.readAsText(q)},De=()=>{const z=ie();let q=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;wt.forEach(oe=>{q+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${oe}</td></tr>`,[de.First,de.Second].forEach(Y=>{const te=r.filter(pe=>pe.shift===Y);te.length!==0&&(q+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${Y}</td></tr>`,q+='<tr><th class="header"></th>',wn[Y].forEach(pe=>q+=`<th class="header">${pe} </th>`),q+="</tr>",te.forEach(pe=>{q+=`<tr><td class="class-cell">${pe.name}</td>`,wn[Y].forEach(Qe=>{const Ve=z.filter(Ie=>Ie.classId===pe.id&&Ie.day===oe&&Ie.shift===Y&&Ie.period===Qe);q+='<td style="height: 60px;">',Ve.forEach(Ie=>{const et=t.find(he=>he.id===Ie.subjectId),Ze=e.find(he=>he.id===Ie.teacherId),it=n.find(he=>he.id===Ie.roomId),Ke=it?it.name:Ie.roomId;q+=`<div style="background-color: ${(et==null?void 0:et.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(et==null?void 0:et.name)||""} ${Ie.direction||""}</div>
                                <div class="meta">${(Ze==null?void 0:Ze.name)||""} ${Ke?`(. ${Ke})`:""}</div>
                            </div>`}),q+="</td>"}),q+="</tr>"}))})}),q+="</table></body></html>";const O=new Blob([q],{type:"application/vnd.ms-excel"}),Ae=URL.createObjectURL(O),ee=document.createElement("a");ee.href=Ae,ee.download=`_22_${_}.xls`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)},W=()=>{const z=ie(),q={[rt.Monday]:{header:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let O=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;O+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[de.First,de.Second].forEach(Y=>{const te=wn[Y];O+="<table>",O+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${wt.length*te.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,O+="<tr>",wt.forEach(Qe=>{var Ie;const Ve=((Ie=q[Qe])==null?void 0:Ie.header)||"#f3f4f6";O+=`<th colspan="${te.length}" class="header" style="border: 2px solid #000; background-color: ${Ve};">${Qe}</th>`}),O+="</tr>",O+="<tr>",wt.forEach(Qe=>{var Ie;const Ve=((Ie=q[Qe])==null?void 0:Ie.header)||"#f3f4f6";te.forEach(et=>O+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${Ve};"></th>`)}),O+="</tr>";const pe="#e5e7eb";O+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${pe};">${Y}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${pe};"></th>
            `,wt.forEach(Qe=>{var Ie;const Ve=((Ie=q[Qe])==null?void 0:Ie.header)||"#f3f4f6";te.forEach(et=>O+=`<th class="header" style="width: 40px; background-color: ${Ve};">${et}</th>`)}),O+="</tr>",t.forEach(Qe=>{const Ve=e.filter(Ie=>Ie.subjectIds.includes(Qe.id)&&Ie.shifts.includes(Y));Ve.length!==0&&(Ve.forEach((Ie,et)=>{O+="<tr>",et===0&&(O+=`<td rowspan="${Ve.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Qe.name}</td>`),O+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${Ie.name}</td>`,wt.forEach(Ze=>{var Ke;const it=((Ke=q[Ze])==null?void 0:Ke.cell)||"#fff";te.forEach(he=>{const Ce=z.find(tt=>tt.teacherId===Ie.id&&tt.subjectId===Qe.id&&tt.day===Ze&&tt.period===he&&tt.shift===Y);if(Ce){const tt=r.find(yt=>yt.id===Ce.classId),Tt=n.find(yt=>yt.id===Ce.roomId),mt=Tt?Tt.name:Ce.roomId,ot=mt?`<sub>${mt}</sub>`:"",Kt=Ce.direction?` <span style="font-size:10px">(${Ce.direction})</span>`:"";O+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${it};">${tt?tt.name:""}${Kt}${ot}</td>`}else O+=`<td style="border: 1px solid #000; background-color: ${it};"></td>`})}),O+="</tr>"}),O+=`<tr><td colspan="${2+wt.length*te.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),O+="</table><br/><br/>"}),O+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,O+="</body></html>";const Ae=new Blob([O],{type:"application/vnd.ms-excel"}),ee=URL.createObjectURL(Ae),oe=document.createElement("a");oe.href=ee,oe.download=`__${_}.xls`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},$=()=>{const z=ie(),q={[rt.Monday]:{header:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let O=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;O+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[de.First,de.Second].forEach(Y=>{const te=wn[Y];O+="<table>",O+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${wt.length*te.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,O+="<tr>",wt.forEach(Qe=>{var Ie;const Ve=((Ie=q[Qe])==null?void 0:Ie.header)||"#f3f4f6";O+=`<th colspan="${te.length}" class="header" style="border: 3px solid #000; background-color: ${Ve}; font-size: 20pt;">${Qe}</th>`}),O+="</tr>",O+="<tr>",wt.forEach(Qe=>{var Ie;const Ve=((Ie=q[Qe])==null?void 0:Ie.header)||"#f3f4f6";O+=`<th colspan="${te.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${Ve}; font-size: 16pt;"></th>`}),O+="</tr>";const pe="#e5e7eb";O+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${pe}; font-size: 24pt;">${Y}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${pe};"></th>
            `,wt.forEach(Qe=>{var Ie;const Ve=((Ie=q[Qe])==null?void 0:Ie.header)||"#f3f4f6";te.forEach(et=>O+=`<th class="header" style="width: 20px; background-color: ${Ve}; font-size: 16pt;">${et}</th>`)}),O+="</tr>",t.forEach(Qe=>{const Ve=e.filter(Ie=>Ie.subjectIds.includes(Qe.id)&&Ie.shifts.includes(Y));Ve.length!==0&&(Ve.forEach((Ie,et)=>{O+="<tr>",et===0&&(O+=`<td rowspan="${Ve.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Qe.name}</td>`),O+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${Ie.name}</td>`,wt.forEach(Ze=>{var Ke;const it=((Ke=q[Ze])==null?void 0:Ke.cell)||"#fff";te.forEach(he=>{const Ce=z.find(tt=>tt.teacherId===Ie.id&&tt.subjectId===Qe.id&&tt.day===Ze&&tt.period===he&&tt.shift===Y);if(Ce){const tt=r.find(bt=>bt.id===Ce.classId),Tt=n.find(bt=>bt.id===Ce.roomId),mt=Tt?Tt.name:Ce.roomId,ot=mt?`<sub>${mt}</sub>`:"",Kt=Ce.direction?` <span style="font-size:14px">(${Ce.direction})</span>`:"";O+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${it}; height: 60px;">${tt?tt.name:""}${Kt}${ot}</td>`}else O+=`<td style="border: 1px solid #000; background-color: ${it};"></td>`})}),O+="</tr>"}),O+=`<tr><td colspan="${2+wt.length*te.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),O+="</table><br/><br/>"}),O+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,O+="</body></html>";const Ae=new Blob([O],{type:"application/vnd.ms-excel"}),ee=URL.createObjectURL(Ae),oe=document.createElement("a");oe.href=ee,oe.download=`__${_}.xls`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},Fe=()=>{const z=ie(),q=r.filter(pe=>pe.name.startsWith(We)).sort((pe,Qe)=>pe.name.localeCompare(Qe.name)),O=Array.from(new Set(q.map(pe=>pe.shift))).sort(),Ae={[rt.Monday]:{label:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;O.forEach(pe=>{const Qe=q.filter(Ie=>Ie.shift===pe),Ve=wn[pe];Qe.length!==0&&(ee+="<table>",ee+="<tr>",ee+='<td style="border:none"></td>',ee+='<td style="border:none"></td>',ee+=`<td colspan="${Qe.length}" class="shift-header">${pe}</td>`,ee+="</tr>",ee+="<tr>",ee+='<td style="border:none"></td>',ee+='<td style="border:none"></td>',Qe.forEach(Ie=>{ee+=`<td class="class-header">${Ie.name}</td>`}),ee+="</tr>",wt.forEach(Ie=>{const et=Ae[Ie]||{label:"#e5e7eb",cell:"#f3f4f6"};Ve.forEach((Ze,it)=>{ee+="<tr>",it===0&&(ee+=`<td rowspan="${Ve.length}" class="day-cell" style="background-color: ${et.label};">${Ie.toUpperCase()}</td>`),ee+=`<td class="period-cell" style="background-color: ${et.label};">${Ze}</td>`,Qe.forEach(Ke=>{const he=z.filter(Ce=>Ce.classId===Ke.id&&Ce.day===Ie&&Ce.shift===pe&&Ce.period===Ze);ee+=`<td class="content-cell" style="background-color: ${et.cell};">`,he.forEach((Ce,tt)=>{tt>0&&(ee+='<br style="mso-data-placement:same-cell;">');const Tt=t.find(Kt=>Kt.id===Ce.subjectId),mt=n.find(Kt=>Kt.id===Ce.roomId),ot=mt?mt.name:Ce.roomId||"";ee+=`<span class="subject">${(Tt==null?void 0:Tt.name)||""}</span>`,ot&&(ee+=` <span class="room">${ot}</span>`)}),ee+="</td>"}),ee+="</tr>"}),ee+=`<tr><td colspan="${2+Qe.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),ee+="</table><br><br>")}),ee+="</body></html>";const oe=new Blob([ee],{type:"application/vnd.ms-excel"}),Y=URL.createObjectURL(oe),te=document.createElement("a");te.href=Y,te.download=`__${We}_.xls`,document.body.appendChild(te),te.click(),document.body.removeChild(te)},we=()=>{const z=new Date(B),q=z.getUTCMonth(),O=z.getUTCFullYear(),Ae=d.filter(Ke=>{const he=new Date(Ke.date);return he.getUTCMonth()===q&&he.getUTCFullYear()===O}).sort((Ke,he)=>new Date(Ke.date).getTime()-new Date(he.date).getTime());if(Ae.length===0){alert("      .");return}const ee=new Map;Ae.forEach(Ke=>{const he=`${Ke.scheduleItemId}_${Ke.date}`,Ce=ee.get(he)||[];Ce.push(Ke),ee.set(he,Ce)});const oe=[],Y=[];ee.forEach(Ke=>{var bt;const he=Ke[0],Ce=l.find(yt=>yt.id===he.scheduleItemId)||c.find(yt=>yt.id===he.scheduleItemId);if(!Ce)return;const tt=r.find(yt=>yt.id===Ce.classId),Tt=t.find(yt=>yt.id===Ce.subjectId),mt=e.find(yt=>yt.id===he.originalTeacherId);let ot=he.lessonAbsenceReason||((bt=mt==null?void 0:mt.absenceReasons)==null?void 0:bt[he.date])||"";he.replacementTeacherId===he.originalTeacherId&&he.replacementRoomId&&!he.replacementClassId&&(ot=" "),he.replacementClassId&&he.replacementSubjectId&&!he.isMerger&&(ot=" ");const Kt={subs:Ke,scheduleItem:Ce,cls:tt,subj:Tt,origTeacher:mt,reason:ot};ot===" "?Y.push(Kt):oe.push(Kt)});let te=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${z.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const pe=Ke=>Ke.map(he=>{const{subs:Ce,scheduleItem:tt,cls:Tt,subj:mt,origTeacher:ot,reason:Kt}=he,bt=Ce[0],yt=new Date(bt.date).toLocaleDateString("ru-RU");let pr="";if(bt.replacementTeacherId==="conducted")pr=" ";else if(bt.replacementTeacherId==="cancelled")pr=" ";else if(pr=Ce.map(xe=>{const Se=e.find(me=>me.id===xe.replacementTeacherId);return Se?Se.name:""}).join(", "),bt.isMerger){let xe=" ()";if(bt.replacementClassId){const Se=r.find(me=>me.id===bt.replacementClassId);Se&&(xe=` (  ${Se.name})`)}pr+=xe}else if(bt.replacementClassId&&bt.replacementSubjectId){const xe=r.find(me=>me.id===bt.replacementClassId),Se=t.find(me=>me.id===bt.replacementSubjectId);pr+=` ( ${(xe==null?void 0:xe.name)||"?"} ${(Se==null?void 0:Se.name)||"?"})`}const Gr=tt.roomId,On=bt.replacementRoomId,ct=On||Gr,zr=n.find(Ee=>Ee.id===ct),j=zr?zr.name:ct||"-",ne=On?`${j} ( .)`:j;return`
                    <tr>
                        <td>${yt}</td>
                        <td>${tt.period}</td>
                        <td>${tt.shift}</td>
                        <td>${(Tt==null?void 0:Tt.name)||"?"}</td>
                        <td>${(mt==null?void 0:mt.name)||"?"}</td>
                        <td>${(ot==null?void 0:ot.name)||"?"}</td>
                        <td>${pr}</td>
                        <td>${ne}</td>
                        <td>${Kt}</td>
                    </tr>
                `}).join(""),Qe=(Ke,he=!1)=>`
            <table>
            <thead>
                <tr class="${he?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${pe(Ke)}
            </tbody>
            </table>
        `;oe.length>0?te+=Qe(oe):te+="<p>     .</p>",Y.length>0&&(te+="<br/><br/>",te+='<h3 style="color: #b91c1c;">   (  )</h3>',te+=Qe(Y,!0));const Ve=new Map;Ae.forEach(Ke=>{var mt;if(Ke.replacementTeacherId==="conducted"||Ke.replacementTeacherId==="cancelled"||Ke.replacementTeacherId===Ke.originalTeacherId)return;const he=e.find(ot=>ot.id===Ke.replacementTeacherId);if(!he)return;const Ce=Ve.get(he.id)||{name:he.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},tt=e.find(ot=>ot.id===Ke.originalTeacherId);let Tt=Ke.lessonAbsenceReason||((mt=tt==null?void 0:tt.absenceReasons)==null?void 0:mt[Ke.date])||"";Ke.replacementClassId&&Ke.replacementSubjectId&&!Ke.isMerger&&(Tt=" "),Ce.total++,Ke.isMerger?Ce.merger++:Tt===""?Ce.illness++:Tt===" "?Ce.withoutRecord++:Ce.other++,Ve.set(he.id,Ce)});const Ie=Array.from(Ve.values()).sort((Ke,he)=>Ke.name.localeCompare(he.name));Ie.length>0&&(te+="<br/><br/>",te+="<h3>   </h3>",te+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,Ie.forEach(Ke=>{te+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${Ke.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ke.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ke.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ke.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ke.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ke.other}</td>
                     </tr>
                 `}),te+="</tbody></table>"),te+="</body></html>";const et=new Blob([te],{type:"application/vnd.ms-excel"}),Ze=URL.createObjectURL(et),it=document.createElement("a");it.href=Ze,it.download=`__${z.getMonth()+1}_${z.getFullYear()}.xls`,document.body.appendChild(it),it.click(),document.body.removeChild(it)},Pe=()=>{const z=new Date(B),q=z.getUTCMonth(),O=z.getUTCFullYear(),Ae=d.filter(pe=>{const Qe=new Date(pe.date),Ve=Qe.getUTCMonth()===q&&Qe.getUTCFullYear()===O,Ie=pe.refusals&&pe.refusals.length>0;return Ve&&Ie}).sort((pe,Qe)=>new Date(pe.date).getTime()-new Date(Qe.date).getTime());if(Ae.length===0){alert("      .");return}let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${z.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;Ae.forEach(pe=>{const Qe=l.find(he=>he.id===pe.scheduleItemId)||c.find(he=>he.id===pe.scheduleItemId);if(!Qe)return;const Ve=new Date(pe.date).toLocaleDateString("ru-RU"),Ie=r.find(he=>he.id===Qe.classId),et=t.find(he=>he.id===Qe.subjectId),Ze=e.find(he=>he.id===pe.originalTeacherId);let it="";if(pe.replacementTeacherId==="conducted")it=" ";else if(pe.replacementTeacherId==="cancelled")it=" ";else{const he=e.find(Ce=>Ce.id===pe.replacementTeacherId);it=he?he.name:""}const Ke=(pe.refusals||[]).map(he=>{const Ce=e.find(tt=>tt.id===he);return Ce?Ce.name:""}).join(", ");ee+=`
                <tr>
                    <td>${Ve}</td>
                    <td>${Qe.period}</td>
                    <td>${Qe.shift}</td>
                    <td>${(Ie==null?void 0:Ie.name)||"?"}</td>
                    <td>${(et==null?void 0:et.name)||"?"}</td>
                    <td>${(Ze==null?void 0:Ze.name)||"?"}</td>
                    <td>${it}</td>
                    <td>${Ke}</td>
                </tr>
            `}),ee+="</tbody></table></body></html>";const oe=new Blob([ee],{type:"application/vnd.ms-excel"}),Y=URL.createObjectURL(oe),te=document.createElement("a");te.href=Y,te.download=`__${z.getMonth()+1}_${z.getFullYear()}.xls`,document.body.appendChild(te),te.click(),document.body.removeChild(te)},on=()=>{const z=ie();let q=`							
`;wt.forEach(O=>{[de.First,de.Second].forEach(Ae=>{r.filter(oe=>oe.shift===Ae).forEach(oe=>{wn[Ae].forEach(Y=>{z.filter(pe=>pe.classId===oe.id&&pe.day===O&&pe.shift===Ae&&pe.period===Y).forEach(pe=>{const Qe=t.find(Ze=>Ze.id===pe.subjectId),Ve=e.find(Ze=>Ze.id===pe.teacherId),Ie=n.find(Ze=>Ze.id===pe.roomId),et=Ie?Ie.name:pe.roomId||"";q+=`${O}	${Ae}	${oe.name}	${Y}	${(Qe==null?void 0:Qe.name)||""}	${(Ve==null?void 0:Ve.name)||""}	${et}	${pe.direction||""}
`})})})})}),navigator.clipboard.writeText(q).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},gr=async()=>{N(!0);try{if(!v.current){alert("   1- .");return}const z=await Nf(v.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),q=document.createElement("a");q.href=z.toDataURL("image/png"),q.download=`_${B}_1.png`,document.body.appendChild(q),q.click(),document.body.removeChild(q)}catch(z){console.error(z),alert("   ")}finally{N(!1)}},qt=async()=>{N(!0);try{if(!E.current){alert("   2- .");return}const z=await Nf(E.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),q=document.createElement("a");q.href=z.toDataURL("image/png"),q.download=`_${B}_2.png`,document.body.appendChild(q),q.click(),document.body.removeChild(q)}catch(z){console.error(z),alert("   ")}finally{N(!1)}},_t=I.useMemo(()=>d.filter(z=>z.date===B),[d,B]),Bt=I.useMemo(()=>{const z=Be(B);return _t.filter(q=>{const O=z.find(Ae=>Ae.id===q.scheduleItemId);return O&&O.shift===de.First}).filter(q=>q.replacementTeacherId!=="conducted").length>0},[_t,Be,B]),ae=I.useMemo(()=>{const z=Be(B);return _t.filter(q=>{const O=z.find(Ae=>Ae.id===q.scheduleItemId);return O&&O.shift===de.Second}).filter(q=>q.replacementTeacherId!=="conducted").length>0},[_t,Be,B]),T=z=>{const q=Be(B),O=_t.filter(ee=>{const oe=q.find(Y=>Y.id===ee.scheduleItemId);return oe&&oe.shift===z}).filter(ee=>ee.replacementTeacherId!=="conducted");if(O.length===0)return null;const Ae=Array.from(new Set(O.map(ee=>ee.scheduleItemId))).sort((ee,oe)=>{const Y=q.find(pe=>pe.id===ee),te=q.find(pe=>pe.id===oe);return((Y==null?void 0:Y.period)??0)-((te==null?void 0:te.period)??0)});return o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:z}),o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-200",children:[o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:Ae.map(ee=>{var pr,Gr,On;const oe=O.filter(ct=>ct.scheduleItemId===ee),Y=oe[0],te=q.find(ct=>ct.id===ee);if(!te)return null;const pe=r.find(ct=>ct.id===te.classId),Qe=t.find(ct=>ct.id===te.subjectId),Ve=e.find(ct=>ct.id===Y.originalTeacherId),Ie=Y.replacementRoomId,et=te.roomId?n.find(ct=>ct.id===te.roomId):null,Ze=et?et.name:te.roomId||"",it=Ie?n.find(ct=>ct.id===Ie):null,Ke=it?it.name:Ie||"",he=Y.replacementTeacherId==="cancelled",Ce=(pr=Ve==null?void 0:Ve.absenceReasons)==null?void 0:pr[B],tt=Y.lessonAbsenceReason,Tt=tt===" "?tt:Ce===" "?Ce:"",mt=Y.replacementClassId?r.find(ct=>ct.id===Y.replacementClassId):null,ot=Y.replacementSubjectId?t.find(ct=>ct.id===Y.replacementSubjectId):null,Kt=Y.replacementTeacherId===Y.originalTeacherId&&Ie&&!mt,bt=mt&&ot&&!Y.isMerger,yt=Y.replacementTeacherId===Y.originalTeacherId;return o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:te.period}),o.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:pe==null?void 0:pe.name}),o.jsxs("td",{className:"py-3 px-2",children:[o.jsx("div",{className:"font-semibold text-slate-800",children:Qe==null?void 0:Qe.name}),te.direction&&o.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:te.direction})]}),o.jsx("td",{className:"py-3 px-2",children:!yt&&!Kt&&!bt&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[Ve==null?void 0:Ve.name,o.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),Tt&&o.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:Tt})]})}),o.jsx("td",{className:`py-3 px-2 font-bold text-sm ${he?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Kt?o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-800",children:Ve==null?void 0:Ve.name}),o.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):bt?o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-800",children:Ve==null?void 0:Ve.name}),o.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",mt==null?void 0:mt.name]})]}):he?o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{children:" "})}):o.jsx("div",{className:"flex flex-col",children:oe.length>1||Y.isMerger?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-800 text-xs",children:oe.map(ct=>{const zr=e.find(j=>j.id===ct.replacementTeacherId);return zr?zr.name:""}).join(", ")}),o.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",Y.replacementClassId?`(${(Gr=r.find(ct=>ct.id===Y.replacementClassId))==null?void 0:Gr.name})`:""]})]}):o.jsx("span",{children:(On=e.find(ct=>ct.id===Y.replacementTeacherId))==null?void 0:On.name})})}),o.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Ie?"text-indigo-600":"text-slate-700"}`,children:Ie&&Ie!==te.roomId?o.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[o.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Ze}),o.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),o.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Ke})]}):o.jsx("span",{className:"text-xl",children:Ze})})]},String(ee))})})]})]})},P=async()=>{const z=hn();await yr.setPublicData(z,ze),await i({settings:{...s,publicScheduleId:z}});const q=`${window.location.origin}${window.location.pathname}#/public?id=${z}`;F(q),L(z),b(!0)},V=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await yr.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),F(""),L(""))},J=()=>o.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),o.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),o.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(B).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),ye=()=>o.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[o.jsx("div",{children:" "}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsx("div",{className:"h-px w-32 bg-slate-300"}),o.jsx("div",{children:" "})]})]}),re=()=>{const z=ie(),q=r.filter(ee=>ee.name.startsWith(We)).sort((ee,oe)=>ee.name.localeCompare(oe.name)),O=Array.from(new Set(q.map(ee=>ee.shift))).sort(),Ae={[rt.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[rt.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[rt.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[rt.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[rt.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return q.length===0?o.jsx("div",{className:"text-center p-10",children:"    "}):o.jsx("div",{className:"font-sans text-black",children:O.map(ee=>{const oe=q.filter(te=>te.shift===ee),Y=wn[ee];return oe.length===0?null:o.jsx("div",{className:"mb-10 page-break-inside-avoid",children:o.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[o.jsxs("thead",{children:[o.jsxs("tr",{children:[o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{colSpan:oe.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:ee})]}),o.jsxs("tr",{children:[o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{className:"border-2 border-black w-8"}),oe.map(te=>o.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:te.name},String(te.id)))]})]}),o.jsx("tbody",{children:wt.map(te=>{const pe=Ae[te]||{label:"bg-gray-200",cell:"bg-gray-100"};return o.jsxs(Os.Fragment,{children:[Y.map((Qe,Ve)=>o.jsxs("tr",{children:[Ve===0&&o.jsx("td",{rowSpan:Y.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${pe.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:te===rt.Monday?"":te===rt.Tuesday?"":te===rt.Wednesday?"":te===rt.Thursday?"":te===rt.Friday?"":te}),o.jsx("td",{className:`border-2 border-black font-bold text-base ${pe.label}`,children:Qe}),oe.map(Ie=>{const et=z.filter(Ze=>Ze.classId===Ie.id&&Ze.day===te&&Ze.shift===ee&&Ze.period===Qe);return o.jsx("td",{className:`border-2 border-black p-1 h-12 ${pe.cell}`,children:et.map(Ze=>{const it=t.find(Ce=>Ce.id===Ze.subjectId),Ke=n.find(Ce=>Ce.id===Ze.roomId),he=Ke?Ke.name:Ze.roomId||"";return o.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[o.jsx("span",{children:it==null?void 0:it.name}),he&&o.jsx("span",{className:"font-black",children:he})]},String(Ze.id))})},String(Ie.id))})]},`${String(te)}-${Qe}`)),o.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:o.jsx("td",{colSpan:2+oe.length})})]},String(te))})})]})},String(ee))})})};return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("button",{onClick:()=>yr.exportJson(ze),className:"btn-primary btn-ripple flex items-center gap-2",children:[o.jsx(M,{name:"Download",size:20}),"  JSON"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"file",ref:y,onChange:Ne,accept:".json",className:"hidden"}),o.jsxs("button",{onClick:()=>{var z;return(z=y.current)==null?void 0:z.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[o.jsx(M,{name:"Upload",size:20}),"  JSON"]})]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(M,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsx("input",{type:"date",value:B,onChange:z=>x(z.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),o.jsx("button",{onClick:gr,disabled:U||!Bt,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:U?o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Download",size:20})," 1- "]})}),o.jsx("button",{onClick:qt,disabled:U||!ae,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:U?o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(M,{name:"Download",size:20})," 2- "]})})]})]}),o.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:_t.length===0?o.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(J,{}),o.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:o.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),o.jsx(ye,{})]}):o.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[Bt&&o.jsxs("div",{ref:v,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(J,{}),T(de.First),o.jsx(ye,{})]}),ae&&o.jsxs("div",{ref:E,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(J,{}),T(de.Second),o.jsx(ye,{})]})]})})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsx("select",{value:We,onChange:z=>Xe(z.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:ke.map(z=>o.jsxs("option",{value:z,children:[z,"- "]},z))})]}),o.jsxs("button",{onClick:()=>Ge(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"Printer",size:20}),"    "]}),o.jsxs("button",{onClick:Fe,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:_,onChange:z=>S(Number(z.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1- (-)"}),o.jsx("option",{value:2,children:"2- (-)"})]})]}),o.jsxs("button",{onClick:De,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),o.jsxs("button",{onClick:W,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Table",size:20}),"   (XLS)"]}),o.jsxs("button",{onClick:$,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Table",size:20}),"   (XLS)"]}),o.jsxs("button",{onClick:on,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(M,{name:"Clipboard",size:20}),"   Google Sheets"]}),o.jsxs("button",{onClick:we,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"List",size:20}),"    (XLS)"]}),o.jsxs("button",{onClick:Pe,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"UserX",size:20}),"    (XLS)"]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?o.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",o.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),o.jsxs("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[o.jsx(M,{name:"Share2",size:16}),"  QR-  "]}),o.jsxs("button",{onClick:V,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Trash2",size:16}),"  "]})]})}):o.jsxs("button",{onClick:P,disabled:U,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[o.jsx(M,{name:"Share2",size:20}),"  "]})]}),o.jsx(Or,{isOpen:w,onClose:()=>b(!1),title:" ",children:o.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),C&&o.jsxs(o.Fragment,{children:[o.jsx($K,{value:C,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),o.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:C}),o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(C),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[o.jsx(M,{name:"Copy",size:16}),"  "]})]})]})}),Q&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[o.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",We,"- )"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[o.jsx(M,{name:"Printer",size:16})," "]}),o.jsx("button",{onClick:()=>Ge(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:o.jsx(re,{})})]})]})},qK=()=>{var B;const{subjects:t,teachers:e,classes:r}=Mn(),{schedule1:n,schedule2:s,substitutions:A}=Qi(),[i,a]=I.useState("load"),[l,c]=I.useState(((B=r[0])==null?void 0:B.id)||""),[d,h]=I.useState(()=>{const x=new Date().getMonth();return x>=0&&x<=4?2:1}),f=I.useMemo(()=>d===2?s:n,[d,n,s]),p=I.useMemo(()=>e.map(_=>{const S=f.filter(R=>R.teacherId===_.id),U=S.length,N=U*4,w=A.filter(R=>R.replacementTeacherId===_.id).length,b=A.filter(R=>R.originalTeacherId===_.id).length,C=N+w-b,F={};return S.forEach(R=>{const L=t.find(Q=>Q.id===R.subjectId);L&&(F[L.name]=(F[L.name]||0)+1)}),{id:_.id,name:_.name,weeklyHours:U,subsTaken:w,subsMissed:b,actualHours:C,subjectBreakdown:F}}).sort((_,S)=>S.actualHours-_.actualHours),[e,f,A,t]),y=I.useMemo(()=>l?wt.map(x=>{const S=f.filter(U=>U.classId===l&&U.day===x).reduce((U,N)=>{const w=t.find(b=>b.id===N.subjectId);return U+((w==null?void 0:w.difficulty)||5)},0);return{label:x,value:S}}):[],[f,t,l]),v=I.useMemo(()=>{const x=e.map(S=>({name:S.name,count:A.filter(U=>U.replacementTeacherId===S.id).length})).sort((S,U)=>U.count-S.count).slice(0,5),_=e.map(S=>({name:S.name,count:S.unavailableDates.length})).sort((S,U)=>U.count-S.count).slice(0,5);return{heroes:x,absentees:_}},[e,A]),E=()=>{let x="";i==="load"?x=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+p.map(U=>`"${U.name}",${U.weeklyHours},${U.subsTaken},${U.subsMissed},${U.actualHours},"${Object.entries(U.subjectBreakdown).map(([N,w])=>N+": "+w).join(", ")}"`).join(`
`):i==="sanpin"&&(x=`Day,Score
`+y.map(U=>`${U.label},${U.value}`).join(`
`));const _=new Blob([`\uFEFF${x}`],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(_),S.download=`report_${i}_${d}sem.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return o.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(M,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:d,onChange:x=>h(Number(x.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1- (-)"}),o.jsx("option",{value:2,children:"2- (-)"})]})]}),o.jsxs("button",{onClick:E,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[o.jsx(M,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[o.jsx("button",{onClick:()=>a("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),o.jsx("button",{onClick:()=>a("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),o.jsx("button",{onClick:()=>a("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&o.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:p.map(x=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:x.name}),o.jsx("td",{className:"p-4 text-right font-mono",children:x.weeklyHours}),o.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",x.subsTaken]}),o.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",x.subsMissed]}),o.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:x.actualHours}),o.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(x.subjectBreakdown).map(([_,S])=>o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[_,": ",S]},_))})})]},x.id))})]})}),i==="sanpin"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),o.jsx("select",{value:l,onChange:x=>c(x.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(x=>o.jsx("option",{value:x.id,children:x.name},x.id))})]}),o.jsx(Qp,{items:y,max:60,barClassName:"bg-indigo-500"}),o.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[o.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),o.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"TrendingUp",size:20}),"   ( 5)"]}),o.jsx(Qp,{items:v.heroes.map(x=>({label:x.name,value:x.count})),max:Math.max(...v.heroes.map(x=>x.count),1),barClassName:"bg-emerald-500"})]}),o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Activity",size:20}),"  ( 5)"]}),o.jsx(Qp,{items:v.absentees.map(x=>({label:x.name,value:x.count})),max:Math.max(...v.absentees.map(x=>x.count),1),barClassName:"bg-red-500"})]})]})]})},XK=()=>{var Bt;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=Mn(),{dutySchedule:s,saveScheduleData:A,schedule1:i,schedule2:a}=Qi(),l={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,d]=I.useState(()=>{const ae=new Date().getMonth();return ae>=0&&ae<=4?2:1}),[h,f]=I.useState(de.First),p=c===1?i:a,y=I.useRef(null),[v,E]=I.useState(!1),[B,x]=I.useState(!1),[_,S]=I.useState(null),[U,N]=I.useState({}),[w,b]=I.useState(""),[C,F]=I.useState(null),R=(ae,T,P)=>{const V=s.find(J=>J.zoneId===ae&&J.day===T&&J.shift===P);return V?t.find(J=>J.id===V.teacherId):null},L=(ae,T,P,V)=>V?!!s.find(ye=>ye.teacherId===V&&ye.day===T&&ye.shift===P&&ye.zoneId!==ae):!1,Q=(ae,T)=>{S({zoneId:ae,day:T});const P=R(ae,T,h);F((P==null?void 0:P.id)||null),E(!0)},Ge=async()=>{if(!_)return;let ae=[...s];ae=ae.filter(T=>!(T.zoneId===_.zoneId&&T.day===_.day&&T.shift===h)),C&&ae.push({id:hn(),zoneId:_.zoneId,day:_.day,shift:h,teacherId:C}),await A({dutySchedule:ae}),E(!1),F(null)},We=async()=>{if(!_)return;let ae=[...s];ae=ae.filter(T=>!(T.zoneId===_.zoneId&&T.day===_.day&&T.shift===h)),await A({dutySchedule:ae}),E(!1),F(null)},Xe=(ae,T)=>{if(!ae||!T.includedRooms)return!1;const P=ae.replace(/\D/g,"");return P&&T.includedRooms.includes(P)?!0:T.includedRooms.includes(ae)},ze=async()=>{if(!window.confirm("    . ?"))return;let ae=[];const T=[de.First,de.Second],P={};wt.forEach(V=>P[V]=new Set);for(const V of wt)for(const J of T){const ye=t.filter(re=>p.filter(q=>q.teacherId===re.id&&q.day===V&&q.shift===J).length>=1);for(const re of e){const z=ye.map(O=>{let Ae=0;P[V].has(O.id)&&(Ae-=2e3);const ee=p.filter(Y=>{var te;return Y.teacherId===O.id&&Y.day===V&&Y.shift===J&&Y.roomId&&Xe(((te=r.find(pe=>pe.id===Y.roomId))==null?void 0:te.name)||Y.roomId,re)}).length;return ee===0?{teacher:O,score:-9999}:(Ae+=ee*10,p.filter(Y=>Y.teacherId===O.id&&Y.day===V&&Y.shift===J).length>=4&&(Ae+=5),{teacher:O,score:Ae})});z.sort((O,Ae)=>Ae.score-O.score);const q=z[0];q&&q.score>-500&&(ae.push({id:hn(),zoneId:re.id,day:V,shift:J,teacherId:q.teacher.id}),P[V].add(q.teacher.id))}}await A({dutySchedule:ae})},ie=async()=>{window.confirm("   (  )?")&&await A({dutySchedule:[]})},Be=async()=>{if(!y.current)return;const ae=await Nf(y.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),T=document.createElement("a");T.href=ae.toDataURL("image/png"),T.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(T),T.click(),document.body.removeChild(T)},ke={[rt.Monday]:{label:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}},Ne=()=>{let T=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 6px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 18pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 12pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #312e81; color: white; border: 2px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #e5e7eb; border: 2px solid #000; text-align: left; padding-left: 10px; }
                    .zone-cell { font-size: 11pt; font-weight: bold; background-color: #fff; text-align: left; width: 250px; }
                    .day-header { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 10pt; font-weight: bold; height: 35px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 11pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 11pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 15px; }
                </style>
            </head>
            <body>
        `;T+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,3)}" style="border:none"></td>
                    <td colspan="3" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        __________ ..<br>
                        "__" ______ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,T+=`
            <table>
                <tr><td colspan="6" class="title-main"> </td></tr>
                <tr><td colspan="6" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,[de.First,de.Second].forEach(ye=>{T+="<table>",T+=`<tr><th colspan="6" class="shift-header">${ye}</th></tr>`,T+="<tr>",T+='<th class="day-header" style="background-color: #f3f4f6;"> </th>',wt.forEach(re=>{const z=ke[re]||{label:"#ffffff"};T+=`<th class="day-header" style="background-color: ${z.label};">${re}</th>`}),T+="</tr>",qt.forEach(re=>{T+=`<tr><td colspan="6" class="floor-header">${re.floor}</td></tr>`,re.zones.forEach(z=>{T+="<tr>",T+=`<td class="zone-cell">${z.name}</td>`,wt.forEach(q=>{const O=ke[q]||{cell:"#ffffff"},Ae=R(z.id,q,ye);T+=`<td class="content-cell" style="background-color: ${O.cell};">${Ae?Ae.name:""}</td>`}),T+="</tr>"})}),T+="</table><br/><br/>"}),T+=`
            <table>
                <tr>
                    <td colspan="3" class="footer-block">  </td>
                    <td colspan="1" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="2" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,T+="</body></html>";const P=new Blob([T],{type:"application/vnd.ms-excel"}),V=URL.createObjectURL(P),J=document.createElement("a");J.href=V,J.download=`__${c}__.xls`,document.body.appendChild(J),J.click(),document.body.removeChild(J)},De=()=>{const T=_t.length+1;let J=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 5px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 20pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 14pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #e5e7eb; border: 3px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #d1d5db; border: 2px solid #000; text-transform: uppercase; }
                    .zone-header { font-size: 10pt; font-weight: bold; background-color: #f3f4f6; border: 2px solid #000; }
                    .day-label { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 11pt; font-weight: bold; height: 40px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 12pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 12pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 20px; }
                </style>
            </head>
            <body>
        `;J+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,T-4)}" style="border:none"></td>
                    <td colspan="4" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="${T}" style="border:none"></td></tr>
            </table>
        `,J+=`
            <table>
                <tr><td colspan="${T}" class="title-main"> </td></tr>
                <tr><td colspan="${T}" class="title-sub">       22 . </td></tr>
                <tr><td colspan="${T}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="${T}" style="border:none"></td></tr>
            </table>
        `,[de.First,de.Second].forEach(ee=>{J+="<table>",J+=`<tr><th colspan="${T}" class="shift-header">${ee}</th></tr>`,J+="<tr>",J+='<th rowspan="2" class="floor-header" style="width: 100px;"> </th>',qt.forEach(oe=>{J+=`<th colspan="${oe.zones.length}" class="floor-header">${oe.floor}</th>`}),J+="</tr>",J+="<tr>",_t.forEach(oe=>{J+=`<th class="zone-header">${oe.name}</th>`}),J+="</tr>",wt.forEach(oe=>{const Y=ke[oe]||{label:"#ffffff",cell:"#ffffff"};J+="<tr>",J+=`<td class="day-label" style="background-color: ${Y.label};">${oe}</td>`,_t.forEach(te=>{const pe=R(te.id,oe,ee);J+=`<td class="content-cell" style="background-color: ${Y.cell};">${pe?pe.name:""}</td>`}),J+="</tr>"}),J+=`<tr><td colspan="${T}" style="height: 4px; background-color: #000; border:none;"></td></tr>`,J+="</table><br>"});const ye=Math.floor(T*.4),re=Math.floor(T*.3),z=T-ye-re;J+=`
            <table>
                 <tr class="empty-row"><td colspan="${T}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${ye}" class="footer-block">    22 .</td>
                    <td colspan="${z}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${re}" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,J+="</body></html>";const q=new Blob([J],{type:"application/vnd.ms-excel"}),O=URL.createObjectURL(q),Ae=document.createElement("a");Ae.href=O,Ae.download=`__${c}_.xls`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae)},W=async()=>{if(!U.name)return;const ae=w.split(",").map(V=>V.trim()).filter(Boolean),T={...U,includedRooms:ae};let P=[...e];U.id?P=P.map(V=>V.id===U.id?{...V,...T}:V):P.push({...T,id:hn()}),await n({dutyZones:P}),x(!1)},$=async ae=>{if(!window.confirm(" ?"))return;const T=e.filter(P=>P.id!==ae);await n({dutyZones:T})},Fe=ae=>{var T;ae?(N(ae),b(((T=ae.includedRooms)==null?void 0:T.join(", "))||"")):(N({}),b("")),x(!0)},we=()=>{if(!_)return{recommended:[],others:[],allTeachers:[]};const ae=_.day,T=e.find(re=>re.id===_.zoneId),P=t.map(re=>{const z=p.filter(Ae=>Ae.teacherId===re.id&&Ae.day===ae&&Ae.shift===h).length,q=s.some(Ae=>Ae.day===ae&&Ae.teacherId===re.id&&Ae.zoneId!==_.zoneId&&Ae.shift===h),O=T&&T.includedRooms?p.filter(Ae=>{var ee;return Ae.teacherId===re.id&&Ae.day===ae&&Ae.shift===h&&Ae.roomId&&Xe(((ee=r.find(oe=>oe.id===Ae.roomId))==null?void 0:ee.name)||Ae.roomId,T)}).length:0;return{t:re,lessonsCount:z,isBusy:q,lessonsInZone:O}}),V=P.filter(re=>re.lessonsInZone>0&&!re.isBusy).sort((re,z)=>z.lessonsInZone-re.lessonsInZone).map(re=>({value:re.t.id,label:`${re.t.name} (${re.lessonsInZone} .  )`})),J=P.filter(re=>(re.lessonsInZone===0||re.isBusy)&&re.lessonsCount>0).map(re=>({value:re.t.id,label:re.t.name+(re.isBusy?" ()":"")+(re.lessonsInZone===0?" (   )":"")})),ye=P.filter(re=>re.lessonsCount===0).map(re=>({value:re.t.id,label:`${re.t.name} ( )`}));return{recommended:V,others:J,allTeachers:ye}},{recommended:Pe,others:on,allTeachers:gr}=we(),qt=I.useMemo(()=>{const ae={};return e.forEach(P=>{const V=P.floor||" ";ae[V]||(ae[V]=[]),ae[V].push(P)}),Object.keys(ae).sort().map(P=>({floor:P,zones:ae[P].sort((V,J)=>(V.order||0)-(J.order||0))}))},[e]),_t=I.useMemo(()=>qt.flatMap(ae=>ae.zones),[qt]);return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(M,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>f(de.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>f(de.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:c,onChange:ae=>d(Number(ae.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1-"}),o.jsx("option",{value:2,children:"2-"})]})]}),o.jsxs("button",{onClick:ze,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Zap",size:16})," "]}),o.jsx("button",{onClick:ie,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:o.jsx(M,{name:"Trash2",size:16})}),o.jsxs("button",{onClick:Be,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Image",size:16})," PNG"]}),o.jsxs("button",{onClick:Ne,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"Table",size:16}),"  (XLS)"]}),o.jsxs("button",{onClick:De,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(M,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),o.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(ae=>o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[ae.name," ",o.jsxs("span",{className:"text-slate-400 text-xs",children:["(",ae.floor||"?",")"]})]}),o.jsx("button",{onClick:()=>Fe(ae),className:"text-slate-400 hover:text-indigo-600",children:o.jsx(M,{name:"Edit2",size:12})})]},ae.id)),o.jsxs("button",{onClick:()=>Fe(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[o.jsx(M,{name:"Plus",size:14})," "]})]}),o.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),wt.map(ae=>o.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:ae},ae))]})}),o.jsx("tbody",{children:e.map(ae=>{var T;return o.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[o.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[o.jsx("div",{children:ae.name}),o.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:ae.floor}),o.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(T=ae.includedRooms)==null?void 0:T.join(", ")})]}),wt.map(P=>{const V=R(ae.id,P,h),J=V?L(ae.id,P,h,V.id):!1;return o.jsx("td",{onClick:()=>Q(ae.id,P),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${V?J?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:V?o.jsxs("div",{className:`font-bold text-sm ${J?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[V.name,J&&o.jsx("div",{className:"text-[9px] uppercase",children:""})]}):o.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${ae.id}-${P}`)})]},ae.id)})})]})})]}),o.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[o.jsx(M,{name:"Image",size:16}),"  "]}),o.jsx("div",{className:"overflow-auto custom-scrollbar",children:o.jsxs("div",{ref:y,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[o.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:l.approvalBlock},children:o.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[o.jsx("div",{className:"font-bold mb-1",children:""}),o.jsx("div",{children:" "}),o.jsx("div",{children:" "}),o.jsx("div",{children:"  22 . "}),o.jsxs("div",{className:"mt-8 flex items-end",children:[o.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:l.signatureLine}}),o.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),o.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:l.mainTitle},children:[o.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),o.jsx("h2",{className:"text-lg",children:"       22 . "}),o.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[de.First,de.Second].map((ae,T)=>o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:ae}),o.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[o.jsxs("thead",{children:[o.jsxs("tr",{children:[o.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:l.tableHeaders},children:" "}),qt.map(P=>o.jsx("th",{colSpan:P.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:l.tableHeaders},children:P.floor},P.floor))]}),o.jsx("tr",{children:_t.map(P=>o.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:l.tableHeaders},children:P.name},P.id))})]}),o.jsx("tbody",{children:wt.map(P=>o.jsxs("tr",{children:[o.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:P}),_t.map(V=>{const J=R(V.id,P,ae);return o.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:J?J.name:"-"},V.id)})]},P))})]})]},ae)),o.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:l.footerBlock},children:[o.jsx("div",{children:"    22 ."}),o.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:l.signatureLine}}),o.jsx("div",{children:".."})]})]})})]}),o.jsx(Or,{isOpen:v,onClose:()=>E(!1),title:" ",maxWidth:"max-w-2xl",children:o.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[_&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(Bt=e.find(ae=>ae.id===_.zoneId))==null?void 0:Bt.name}),o.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[o.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:_.day}),o.jsx("span",{className:"text-slate-400",children:"|"}),o.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:h})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsx("p",{className:"text-[10px] text-slate-400 mb-2",children:"        "}),o.jsx(Ic,{options:[{label:" (   )",options:Pe},{label:" (    )",options:on},{label:"  (  )",options:gr}],value:C,onChange:ae=>F(String(ae)),placeholder:"   ",groupBy:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[o.jsx("button",{onClick:We,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),o.jsx("button",{onClick:Ge,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),o.jsx(Or,{isOpen:B,onClose:()=>x(!1),title:U.id?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:U.name||"",onChange:ae=>N({...U,name:ae.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:U.floor||"",onChange:ae=>N({...U,floor:ae.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:w,onChange:ae=>b(ae.target.value)}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[U.id&&o.jsx("button",{onClick:()=>{$(U.id),x(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),o.jsx("button",{onClick:W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},JK=()=>{const{classes:t}=Mn(),{nutritionRecords:e,saveScheduleData:r}=Qi(),{role:n,user:s}=Ui(),{addToast:A}=iy(),i=n==="admin",a=n==="teacher",l=n==="canteen",[c,d]=I.useState(si()),[h,f]=I.useState("day"),[p,y]=I.useState(()=>{const W=new Date;return`${W.getFullYear()}-${String(W.getMonth()+1).padStart(2,"0")}`}),[v,E]=I.useState(!1),[B,x]=I.useState(null),[_,S]=I.useState(""),[U,N]=I.useState(0),[w,b]=I.useState(0),C=I.useRef(null),F=I.useMemo(()=>e.filter(W=>W.date===c),[e,c]),R=I.useMemo(()=>{const[W,$]=p.split("-").map(Number);return e.filter(Fe=>{const we=new Date(Fe.date);return we.getFullYear()===W&&we.getMonth()+1===$})},[e,p]),L=I.useMemo(()=>{const W={totalStudents:0,totalBenefit:0,totalRegular:0,classCount:F.length,records:F};return F.forEach($=>{W.totalStudents+=$.totalCount,W.totalBenefit+=$.benefitCount,W.totalRegular+=$.regularCount}),W},[F]),Q=I.useMemo(()=>{const W=new Map;R.forEach(we=>{const Pe=W.get(we.date)||{total:0,benefit:0,regular:0,classCount:0};Pe.total+=we.totalCount,Pe.benefit+=we.benefitCount,Pe.regular+=we.regularCount,Pe.classCount+=1,W.set(we.date,Pe)});const $=Array.from(W.values()).reduce((we,Pe)=>({total:we.total+Pe.total,benefit:we.benefit+Pe.benefit,regular:we.regular+Pe.regular,classCount:Math.max(we.classCount,Pe.classCount)}),{total:0,benefit:0,regular:0,classCount:0}),Fe=W.size>0?{total:Math.round($.total/W.size),benefit:Math.round($.benefit/W.size),regular:Math.round($.regular/W.size)}:{total:0,benefit:0,regular:0};return{total:$,avgPerDay:Fe,daysCount:W.size,statsByDate:Array.from(W.entries()).sort((we,Pe)=>we[0].localeCompare(Pe[0]))}},[R]),Ge=W=>{var $;return(($=t.find(Fe=>Fe.id===W))==null?void 0:$.name)||W},We=W=>{const $=t.find(Fe=>Fe.id===W);return $&&typeof $.order=="number"?$.order:Number.MAX_SAFE_INTEGER},Xe=(W,$)=>{$?(x($),S($.classId),N($.totalCount),b($.benefitCount)):(x(null),S(W||""),N(0),b(0)),E(!0)},ze=()=>{E(!1),x(null),S(""),N(0),b(0)},ie=I.useCallback(async()=>{if(!_){A({type:"warning",title:" "});return}if(U<0||w<0){A({type:"warning",title:"    "});return}if(w>U){A({type:"warning",title:"      "});return}const W=U-w,$=new Date().toISOString();let Fe;if(B)Fe=e.map(we=>we.id===B.id?{...we,classId:_,totalCount:U,benefitCount:w,regularCount:W,enteredBy:(s==null?void 0:s.uid)||we.enteredBy,enteredAt:$}:we);else{const we=e.find(Pe=>Pe.date===c&&Pe.classId===_);if(we)Fe=e.map(Pe=>Pe.id===we.id?{...Pe,totalCount:U,benefitCount:w,regularCount:W,enteredBy:(s==null?void 0:s.uid)||Pe.enteredBy,enteredAt:$}:Pe);else{const Pe={id:hn(),date:c,classId:_,totalCount:U,benefitCount:w,regularCount:W,enteredBy:s==null?void 0:s.uid,enteredAt:$};Fe=[...e,Pe]}}await r({nutritionRecords:Fe}),A({type:"success",title:" "}),ze()},[_,U,w,B,c,e,r,s,A]),Be=I.useCallback(async W=>{const $=e.find(we=>we.id===W);if(!$)return;if(!i&&$.enteredBy!==(s==null?void 0:s.uid)){A({type:"warning",title:"     "});return}if(!window.confirm(" ?"))return;const Fe=e.filter(we=>we.id!==W);await r({nutritionRecords:Fe}),A({type:"success",title:" "})},[e,r,i,s,A]),ke=()=>{if(!C.current)return;const W=window.open("","_blank");if(!W){A({type:"warning",title:"    "});return}const $=C.current.innerHTML;W.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${$}
            </body>
            </html>
        `),W.document.close(),W.focus(),setTimeout(()=>{W.print(),W.close()},250)},Ne=I.useMemo(()=>i||s?t:[],[t,i,s]),De=I.useMemo(()=>{if(h!=="day")return[];const W=F.map($=>$.classId);return t.filter($=>!W.includes($.id)).sort(($,Fe)=>{const we=typeof $.order=="number"?$.order:Number.MAX_SAFE_INTEGER,Pe=typeof Fe.order=="number"?Fe.order:Number.MAX_SAFE_INTEGER;return we!==Pe?we-Pe:$.name.localeCompare(Fe.name)})},[t,F,h]);return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2",children:""}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:i?"   ":l?"   ":"   "})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>f(h==="day"?"month":"day"),className:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-semibold",children:h==="day"?" ":" "}),(i||l)&&o.jsxs("button",{onClick:ke,className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[o.jsx(M,{name:"Download",size:18})," PDF"]})]})]}),o.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:h==="day"?o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),o.jsx("input",{type:"date",value:c,onChange:W=>d(W.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}):o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),o.jsx("input",{type:"month",value:p,onChange:W=>y(W.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})}),h==="day"&&De.length>0&&o.jsxs("div",{className:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-amber-500 text-white p-2.5 rounded-xl",children:o.jsx(M,{name:"AlertTriangle",size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"    "}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[De.length," ",De.length===1?"":De.length<5?"":"","   "]})]})]}),a||i?o.jsx("div",{className:"flex flex-wrap gap-2",children:De.map(W=>o.jsx("button",{onClick:()=>{d(si()),Xe(W.id)},className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-700 dark:text-slate-300 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:W.name},W.id))}):o.jsx("div",{className:"flex flex-wrap gap-2",children:De.map(W=>o.jsx("span",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-500 dark:text-slate-400",children:W.name},W.id))})]}),h==="day"?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.totalStudents})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-indigo-600",children:L.totalBenefit})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-green-600",children:L.totalRegular})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.classCount})]})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:Q.total.total}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",Q.avgPerDay.total,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-indigo-600",children:Q.total.benefit}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",Q.avgPerDay.benefit,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-green-600",children:Q.total.regular}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",Q.avgPerDay.regular,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:Q.daysCount})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:h==="day"?`  ${new Date(c).toLocaleDateString("ru-RU")}`:`  ${new Date(p+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}`}),(a||i)&&h==="day"&&o.jsxs("button",{onClick:()=>Xe(),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[o.jsx(M,{name:"Plus",size:18}),""]})]}),h==="day"?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),i&&o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a&&o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:F.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:i?5:4,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):F.slice().sort((W,$)=>{const Fe=We(W.classId),we=We($.classId);return Fe!==we?Fe-we:Ge(W.classId).localeCompare(Ge($.classId))}).map(W=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:Ge(W.classId)}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:W.totalCount}),o.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:W.benefitCount}),o.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:W.regularCount}),!l&&o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(a||i)&&o.jsx("button",{onClick:()=>Xe(void 0,W),className:"p-2 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 rounded-lg transition-colors",title:"",children:o.jsx(M,{name:"Edit",size:18})}),o.jsx("button",{onClick:()=>Be(W.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 rounded-lg transition-colors",title:"",children:o.jsx(M,{name:"Trash2",size:18})})]})})]},W.id))})]})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:Q.statsByDate.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):Q.statsByDate.map(([W,$])=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:new Date(W).toLocaleDateString("ru-RU",{weekday:"short",day:"numeric",month:"short"})}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:$.total}),o.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:$.benefit}),o.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:$.regular}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:$.classCount})]},W))})]})})]}),o.jsx("div",{ref:C,className:"hidden print:block",children:o.jsxs("div",{className:"p-8",children:[o.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:"  "}),h==="day"?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),o.jsx("tbody",{children:F.slice().sort((W,$)=>{const Fe=We(W.classId),we=We($.classId);return Fe!==we?Fe-we:Ge(W.classId).localeCompare(Ge($.classId))}).map(W=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:Ge(W.classId)}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:W.totalCount}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:W.benefitCount}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:W.regularCount})]},W.id))}),o.jsx("tfoot",{className:"bg-slate-100 font-bold",children:o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalStudents}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalBenefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalRegular})]})})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(p+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),o.jsx("tbody",{children:Q.statsByDate.map(([W,$])=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:new Date(W).toLocaleDateString("ru-RU")}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.classCount})]},W))}),o.jsxs("tfoot",{className:"bg-slate-100 font-bold",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Q.total.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Q.total.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Q.total.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:"  "}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Q.avgPerDay.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Q.avgPerDay.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:Q.avgPerDay.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]})]})]})]})]})}),o.jsx(Or,{isOpen:v,onClose:ze,title:B?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:""}),o.jsx(Ic,{options:Ne.slice().sort((W,$)=>W.name.localeCompare($.name)).map(W=>({value:W.id,label:W.name})),value:_||null,onChange:W=>S(String(W)),placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),o.jsx("input",{type:"number",inputMode:"numeric",min:"0",value:U,onChange:W=>{const $=parseInt(W.target.value)||0;N($),$<w&&b($)},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),o.jsx("input",{type:"number",inputMode:"numeric",min:"0",max:U,value:w,onChange:W=>{const $=parseInt(W.target.value)||0;b(Math.min($,U))},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:" ()"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:U-w})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:ie,className:"flex-1 px-4 py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold",children:""}),o.jsx("button",{onClick:ze,className:"px-4 py-3 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-semibold",children:""})]})]})})]})},YK=()=>{const{setGuestRole:t,role:e,loading:r}=Ui(),n=xu(),[s,A]=I.useState("select"),[i,a]=I.useState(""),[l,c]=I.useState(""),[d,h]=I.useState(""),[f,p]=I.useState(!1);I.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher"||e==="canteen")&&n("/dashboard")},[e,r,n]);const y=async E=>{if(E.preventDefault(),h(""),p(!0),!$n){h("Firebase .  ."),p(!1);return}try{let B=i;s==="teacher"?B="teacher@gymnasium22.com":s==="canteen"&&(B="canteen@gymnasium22.com"),await wM($n,B,l)}catch(B){console.error("Firebase Auth Error:",B);const x=B==null?void 0:B.code;let _="   .";switch(x){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":_="   .";break;case"auth/invalid-email":_="  email.";break;case"auth/too-many-requests":_="  . .";break;default:_=" .  ."}h(_)}finally{p(!1)}},v=()=>{t(),n("/schedule")};return o.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),o.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),o.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),o.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10 bg-white/60 dark:bg-slate-800/60 border border-white/20 dark:border-slate-700 backdrop-blur-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:o.jsx(M,{name:"GraduationCap",size:48})}),o.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("button",{onClick:v,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"Users",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"BookOpen",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("canteen"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-xl text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"Coffee",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-green-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:o.jsx(M,{name:"Settings",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"    "})]}),o.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&o.jsxs("form",{onSubmit:y,className:"space-y-5 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:o.jsx(M,{name:"ArrowRight",className:"rotate-180",size:24})}),o.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":s==="canteen"?"  ":"  "})]}),s==="admin"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),o.jsx("input",{type:"email",inputMode:"email",autoComplete:"email",value:i,onChange:E=>a(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),o.jsxs("div",{className:"relative",children:[o.jsx(M,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),o.jsx("input",{type:"password",inputMode:"text",autoComplete:"current-password",value:l,onChange:E=>c(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&o.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),o.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?o.jsx(M,{name:"Loader",className:"animate-spin",size:20}):o.jsx(M,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),o.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},qC=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},XC=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},Ps=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=Ui();return s?o.jsx("div",{className:"h-screen flex items-center justify-center",children:o.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?o.jsx(Zh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t}):o.jsx(Zh,{to:"/login",replace:!0})},ZK=()=>{const{role:t,loading:e}=Ui();return e?null:t==="guest"?o.jsx(Zh,{to:"/schedule",replace:!0}):o.jsx(Zh,{to:"/dashboard",replace:!0})},e8=()=>{const[t,e]=I.useState(!1),[r,n]=I.useState(qC("theme")||"light"),[s,A]=I.useState(qC("new_year_mode")==="true"),{isLoading:i}=Mn(),{logout:a,role:l,user:c}=Ui();if(I.useEffect(()=>{const f=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),I.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),XC("theme",r)},[r]),I.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),XC("new_year_mode",String(s))},[s]),i)return o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:o.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher","canteen"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin"]},{to:"/nutrition",label:"",icon:"Coffee",roles:["admin","teacher","canteen"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(l||""));return o.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&o.jsx("div",{className:"snow-overlay no-print"}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),o.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 lg:w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none overflow-hidden`,children:o.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&o.jsx("div",{className:"bg-garland"}),o.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[o.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[o.jsx(M,{name:"GraduationCap",size:24}),s&&o.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:h.map(f=>o.jsxs(ys,{to:f.to,onClick:()=>e(!1),className:({isActive:p})=>`
                                    group flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-semibold transition-all relative
                                    ${p?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-slate-700 dark:hover:text-slate-300"}
                                `,children:[o.jsx(M,{name:f.icon,size:18,className:"flex-shrink-0"}),o.jsx("span",{className:"flex-1 truncate",children:f.label})]},f.to))}),o.jsx("div",{className:"hidden lg:block mb-2",children:o.jsx(JO,{})}),o.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-2",children:[o.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),o.jsx("button",{onClick:a,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:o.jsx(M,{name:"LogOut",size:16})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?o.jsx(M,{name:"Moon",size:18}):o.jsx(M,{name:"Sun",size:18})}),o.jsx("button",{onClick:()=>A(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:o.jsx(M,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[o.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&o.jsx("div",{className:"ml-auto text-xl",children:""})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:o.jsx(GQ,{})}),o.jsx(YO,{onMenuClick:()=>e(!0),role:l})]})]})},t8=()=>{const[t,e]=I.useState(null),[r,n]=I.useState(!0),[s]=vE(),A=s.get("id");return I.useEffect(()=>{A?(n(!0),yr.getPublicData(A).then(i=>{const a={...en,...i,settings:{...en.settings,...i==null?void 0:i.settings}};e(a),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[A]),r?o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:o.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?o.jsx(YT,{initialData:t,children:o.jsx(tk,{children:o.jsx(rk,{children:o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[o.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:o.jsx(M,{name:"GraduationCap",size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),o.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:o.jsx(ak,{readOnly:!0})})]})})})}):o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[o.jsx(M,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function r8(){return o.jsx($O,{children:o.jsx(KO,{children:o.jsx(YT,{children:o.jsx(tk,{children:o.jsx(rk,{children:o.jsx(rN,{children:o.jsxs($Q,{children:[o.jsx(cn,{path:"/login",element:o.jsx(YK,{})}),o.jsxs(cn,{path:"/",element:o.jsx(Ps,{children:o.jsx(e8,{})}),children:[o.jsx(cn,{index:!0,element:o.jsx(ZK,{})}),o.jsx(cn,{path:"dashboard",element:o.jsx(Ps,{allowedRoles:["admin","teacher","canteen"],children:o.jsx(tH,{})})}),o.jsx(cn,{path:"schedule",element:o.jsx(JC,{semester:1})}),o.jsx(cn,{path:"schedule2",element:o.jsx(JC,{semester:2})}),o.jsx(cn,{path:"substitutions",element:o.jsx(Ps,{allowedRoles:["admin"],children:o.jsx(UK,{})})}),o.jsx(cn,{path:"duty",element:o.jsx(Ps,{allowedRoles:["admin"],children:o.jsx(XK,{})})}),o.jsx(cn,{path:"nutrition",element:o.jsx(Ps,{allowedRoles:["admin","teacher","canteen"],children:o.jsx(JK,{})})}),o.jsx(cn,{path:"directory",element:o.jsx(Ps,{allowedRoles:["admin"],children:o.jsx(SK,{})})}),o.jsx(cn,{path:"admin",element:o.jsx(Ps,{allowedRoles:["admin"],children:o.jsx(QK,{})})}),o.jsx(cn,{path:"reports",element:o.jsx(Ps,{allowedRoles:["admin"],children:o.jsx(qK,{})})}),o.jsx(cn,{path:"export",element:o.jsx(Ps,{allowedRoles:["admin"],children:o.jsx(WK,{})})})]}),o.jsx(cn,{path:"/public",element:o.jsx(t8,{})})]})})})})})})})}const JC=({semester:t=1})=>{const{role:e}=Ui();return o.jsx(ak,{readOnly:e!=="admin",semester:t})};tm.createRoot(document.getElementById("root")).render(o.jsx(Os.StrictMode,{children:o.jsx(r8,{})}));
