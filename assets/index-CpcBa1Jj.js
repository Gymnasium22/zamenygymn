function cU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const A in n)if(A!=="default"&&!(A in t)){const s=Object.getOwnPropertyDescriptor(n,A);s&&Object.defineProperty(t,A,s.get?s:{enumerable:!0,get:()=>n[A]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))n(A);new MutationObserver(A=>{for(const s of A)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(A){const s={};return A.integrity&&(s.integrity=A.integrity),A.referrerPolicy&&(s.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?s.credentials="include":A.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(A){if(A.ep)return;A.ep=!0;const s=r(A);fetch(A.href,s)}})();function kI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RI={exports:{}},sf={},NI={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc=Symbol.for("react.element"),uU=Symbol.for("react.portal"),dU=Symbol.for("react.fragment"),hU=Symbol.for("react.strict_mode"),fU=Symbol.for("react.profiler"),gU=Symbol.for("react.provider"),pU=Symbol.for("react.context"),mU=Symbol.for("react.forward_ref"),wU=Symbol.for("react.suspense"),BU=Symbol.for("react.memo"),yU=Symbol.for("react.lazy"),xy=Symbol.iterator;function vU(t){return t===null||typeof t!="object"?null:(t=xy&&t[xy]||t["@@iterator"],typeof t=="function"?t:null)}var DI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PI=Object.assign,LI={};function ba(t,e,r){this.props=t,this.context=e,this.refs=LI,this.updater=r||DI}ba.prototype.isReactComponent={};ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jI(){}jI.prototype=ba.prototype;function E0(t,e,r){this.props=t,this.context=e,this.refs=LI,this.updater=r||DI}var b0=E0.prototype=new jI;b0.constructor=E0;PI(b0,ba.prototype);b0.isPureReactComponent=!0;var Cy=Array.isArray,MI=Object.prototype.hasOwnProperty,T0={current:null},OI={key:!0,ref:!0,__self:!0,__source:!0};function HI(t,e,r){var n,A={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)MI.call(e,n)&&!OI.hasOwnProperty(n)&&(A[n]=e[n]);var a=arguments.length-2;if(a===1)A.children=r;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];A.children=o}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)A[n]===void 0&&(A[n]=a[n]);return{$$typeof:Oc,type:t,key:s,ref:i,props:A,_owner:T0.current}}function xU(t,e){return{$$typeof:Oc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function F0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oc}function CU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Iy=/\/+/g;function yg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CU(""+t.key):e.toString(36)}function Cd(t,e,r,n,A){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Oc:case uU:i=!0}}if(i)return i=t,A=A(i),t=n===""?"."+yg(i,0):n,Cy(A)?(r="",t!=null&&(r=t.replace(Iy,"$&/")+"/"),Cd(A,e,r,"",function(c){return c})):A!=null&&(F0(A)&&(A=xU(A,r+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(Iy,"$&/")+"/")+t)),e.push(A)),1;if(i=0,n=n===""?".":n+":",Cy(t))for(var a=0;a<t.length;a++){s=t[a];var o=n+yg(s,a);i+=Cd(s,e,r,o,A)}else if(o=vU(t),typeof o=="function")for(t=o.call(t),a=0;!(s=t.next()).done;)s=s.value,o=n+yg(s,a++),i+=Cd(s,e,r,o,A);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function bu(t,e,r){if(t==null)return t;var n=[],A=0;return Cd(t,n,"","",function(s){return e.call(r,s,A++)}),n}function IU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Id={transition:null},_U={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Id,ReactCurrentOwner:T0};function VI(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:bu,forEach:function(t,e,r){bu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return bu(t,function(){e++}),e},toArray:function(t){return bu(t,function(e){return e})||[]},only:function(t){if(!F0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};it.Component=ba;it.Fragment=dU;it.Profiler=fU;it.PureComponent=E0;it.StrictMode=hU;it.Suspense=wU;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_U;it.act=VI;it.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=PI({},t.props),A=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=T0.current),e.key!==void 0&&(A=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)MI.call(e,o)&&!OI.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Oc,type:t.type,key:A,ref:s,props:n,_owner:i}};it.createContext=function(t){return t={$$typeof:pU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gU,_context:t},t.Consumer=t};it.createElement=HI;it.createFactory=function(t){var e=HI.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:mU,render:t}};it.isValidElement=F0;it.lazy=function(t){return{$$typeof:yU,_payload:{_status:-1,_result:t},_init:IU}};it.memo=function(t,e){return{$$typeof:BU,type:t,compare:e===void 0?null:e}};it.startTransition=function(t){var e=Id.transition;Id.transition={};try{t()}finally{Id.transition=e}};it.unstable_act=VI;it.useCallback=function(t,e){return tn.current.useCallback(t,e)};it.useContext=function(t){return tn.current.useContext(t)};it.useDebugValue=function(){};it.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};it.useEffect=function(t,e){return tn.current.useEffect(t,e)};it.useId=function(){return tn.current.useId()};it.useImperativeHandle=function(t,e,r){return tn.current.useImperativeHandle(t,e,r)};it.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};it.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};it.useMemo=function(t,e){return tn.current.useMemo(t,e)};it.useReducer=function(t,e,r){return tn.current.useReducer(t,e,r)};it.useRef=function(t){return tn.current.useRef(t)};it.useState=function(t){return tn.current.useState(t)};it.useSyncExternalStore=function(t,e,r){return tn.current.useSyncExternalStore(t,e,r)};it.useTransition=function(){return tn.current.useTransition()};it.version="18.3.1";NI.exports=it;var k=NI.exports;const yA=kI(k),EU=cU({__proto__:null,default:yA},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bU=k,TU=Symbol.for("react.element"),FU=Symbol.for("react.fragment"),QU=Object.prototype.hasOwnProperty,UU=bU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SU={key:!0,ref:!0,__self:!0,__source:!0};function KI(t,e,r){var n,A={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)QU.call(e,n)&&!SU.hasOwnProperty(n)&&(A[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)A[n]===void 0&&(A[n]=e[n]);return{$$typeof:TU,type:t,key:s,ref:i,props:A,_owner:UU.current}}sf.Fragment=FU;sf.jsx=KI;sf.jsxs=KI;RI.exports=sf;var l=RI.exports,Fp={},GI={exports:{}},En={},zI={exports:{}},$I={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ae,L){var Y=Ae.length;Ae.push(L);e:for(;0<Y;){var O=Y-1>>>1,ae=Ae[O];if(0<A(ae,L))Ae[O]=L,Ae[Y]=ae,Y=O;else break e}}function r(Ae){return Ae.length===0?null:Ae[0]}function n(Ae){if(Ae.length===0)return null;var L=Ae[0],Y=Ae.pop();if(Y!==L){Ae[0]=Y;e:for(var O=0,ae=Ae.length,ie=ae>>>1;O<ie;){var Re=2*(O+1)-1,Ue=Ae[Re],De=Re+1,Ke=Ae[De];if(0>A(Ue,Y))De<ae&&0>A(Ke,Ue)?(Ae[O]=Ke,Ae[De]=Y,O=De):(Ae[O]=Ue,Ae[Re]=Y,O=Re);else if(De<ae&&0>A(Ke,Y))Ae[O]=Ke,Ae[De]=Y,O=De;else break e}}return L}function A(Ae,L){var Y=Ae.sortIndex-L.sortIndex;return Y!==0?Y:Ae.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var o=[],c=[],d=1,h=null,f=3,m=!1,y=!1,B=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ae){for(var L=r(c);L!==null;){if(L.callback===null)n(c);else if(L.startTime<=Ae)n(c),L.sortIndex=L.expirationTime,e(o,L);else break;L=r(c)}}function F(Ae){if(B=!1,I(Ae),!y)if(r(o)!==null)y=!0,et(R);else{var L=r(c);L!==null&&We(F,L.startTime-Ae)}}function R(Ae,L){y=!1,B&&(B=!1,x(C),C=-1),m=!0;var Y=f;try{for(I(L),h=r(o);h!==null&&(!(h.expirationTime>L)||Ae&&!N());){var O=h.callback;if(typeof O=="function"){h.callback=null,f=h.priorityLevel;var ae=O(h.expirationTime<=L);L=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===r(o)&&n(o),I(L)}else n(o);h=r(o)}if(h!==null)var ie=!0;else{var Re=r(c);Re!==null&&We(F,Re.startTime-L),ie=!1}return ie}finally{h=null,f=Y,m=!1}}var U=!1,v=null,C=-1,_=5,Q=-1;function N(){return!(t.unstable_now()-Q<_)}function P(){if(v!==null){var Ae=t.unstable_now();Q=Ae;var L=!0;try{L=v(!0,Ae)}finally{L?b():(U=!1,v=null)}}else U=!1}var b;if(typeof w=="function")b=function(){w(P)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,je=Ve.port2;Ve.port1.onmessage=P,b=function(){je.postMessage(null)}}else b=function(){E(P,0)};function et(Ae){v=Ae,U||(U=!0,b())}function We(Ae,L){C=E(function(){Ae(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ae){Ae.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,et(R))},t.unstable_forceFrameRate=function(Ae){0>Ae||125<Ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Ae?Math.floor(1e3/Ae):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(Ae){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var Y=f;f=L;try{return Ae()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ae,L){switch(Ae){case 1:case 2:case 3:case 4:case 5:break;default:Ae=3}var Y=f;f=Ae;try{return L()}finally{f=Y}},t.unstable_scheduleCallback=function(Ae,L,Y){var O=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?O+Y:O):Y=O,Ae){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Y+ae,Ae={id:d++,callback:L,priorityLevel:Ae,startTime:Y,expirationTime:ae,sortIndex:-1},Y>O?(Ae.sortIndex=Y,e(c,Ae),r(o)===null&&Ae===r(c)&&(B?(x(C),C=-1):B=!0,We(F,Y-O))):(Ae.sortIndex=ae,e(o,Ae),y||m||(y=!0,et(R))),Ae},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Ae){var L=f;return function(){var Y=f;f=L;try{return Ae.apply(this,arguments)}finally{f=Y}}}})($I);zI.exports=$I;var kU=zI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RU=k,Cn=kU;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WI=new Set,sc={};function eo(t,e){ta(t,e),ta(t+"Capture",e)}function ta(t,e){for(sc[t]=e,t=0;t<e.length;t++)WI.add(e[t])}var UA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qp=Object.prototype.hasOwnProperty,NU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_y={},Ey={};function DU(t){return Qp.call(Ey,t)?!0:Qp.call(_y,t)?!1:NU.test(t)?Ey[t]=!0:(_y[t]=!0,!1)}function PU(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LU(t,e,r,n){if(e===null||typeof e>"u"||PU(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,r,n,A,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=A,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dr[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dr[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dr[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dr[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dr[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dr[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dr[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dr[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dr[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q0=/[\-:]([a-z])/g;function U0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Q0,U0);Dr[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Q0,U0);Dr[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Q0,U0);Dr[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dr[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dr.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dr[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function S0(t,e,r,n){var A=Dr.hasOwnProperty(e)?Dr[e]:null;(A!==null?A.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LU(e,r,A,n)&&(r=null),n||A===null?DU(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):A.mustUseProperty?t[A.propertyName]=r===null?A.type===3?!1:"":r:(e=A.attributeName,n=A.attributeNamespace,r===null?t.removeAttribute(e):(A=A.type,r=A===3||A===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var MA=RU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tu=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),k0=Symbol.for("react.strict_mode"),Up=Symbol.for("react.profiler"),qI=Symbol.for("react.provider"),JI=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),Sp=Symbol.for("react.suspense"),kp=Symbol.for("react.suspense_list"),N0=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),XI=Symbol.for("react.offscreen"),by=Symbol.iterator;function rl(t){return t===null||typeof t!="object"?null:(t=by&&t[by]||t["@@iterator"],typeof t=="function"?t:null)}var er=Object.assign,vg;function yl(t){if(vg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);vg=e&&e[1]||""}return`
`+vg+t}var xg=!1;function Cg(t,e){if(!t||xg)return"";xg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var A=c.stack.split(`
`),s=n.stack.split(`
`),i=A.length-1,a=s.length-1;1<=i&&0<=a&&A[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(A[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||A[i]!==s[a]){var o=`
`+A[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=a);break}}}finally{xg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?yl(t):""}function jU(t){switch(t.tag){case 5:return yl(t.type);case 16:return yl("Lazy");case 13:return yl("Suspense");case 19:return yl("SuspenseList");case 0:case 2:case 15:return t=Cg(t.type,!1),t;case 11:return t=Cg(t.type.render,!1),t;case 1:return t=Cg(t.type,!0),t;default:return""}}function Rp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qo:return"Fragment";case Fo:return"Portal";case Up:return"Profiler";case k0:return"StrictMode";case Sp:return"Suspense";case kp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case JI:return(t.displayName||"Context")+".Consumer";case qI:return(t._context.displayName||"Context")+".Provider";case R0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N0:return e=t.displayName||null,e!==null?e:Rp(t.type)||"Memo";case ss:e=t._payload,t=t._init;try{return Rp(t(e))}catch{}}return null}function MU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rp(e);case 8:return e===k0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ms(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function YI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OU(t){var e=YI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var A=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return A.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fu(t){t._valueTracker||(t._valueTracker=OU(t))}function ZI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=YI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Np(t,e){var r=e.checked;return er({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ty(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ms(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e_(t,e){e=e.checked,e!=null&&S0(t,"checked",e,!1)}function Dp(t,e){e_(t,e);var r=Ms(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Pp(t,e.type,Ms(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fy(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Pp(t,e,r){(e!=="number"||eh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var vl=Array.isArray;function Vo(t,e,r,n){if(t=t.options,e){e={};for(var A=0;A<r.length;A++)e["$"+r[A]]=!0;for(r=0;r<t.length;r++)A=e.hasOwnProperty("$"+t[r].value),t[r].selected!==A&&(t[r].selected=A),A&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ms(r),e=null,A=0;A<t.length;A++){if(t[A].value===r){t[A].selected=!0,n&&(t[A].defaultSelected=!0);return}e!==null||t[A].disabled||(e=t[A])}e!==null&&(e.selected=!0)}}function Lp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return er({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qy(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(le(92));if(vl(r)){if(1<r.length)throw Error(le(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ms(r)}}function t_(t,e){var r=Ms(e.value),n=Ms(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Uy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qu,n_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,A){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,A)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qu=Qu||document.createElement("div"),Qu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ic(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HU=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(t){HU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ll[e]=Ll[t]})});function A_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ll.hasOwnProperty(t)&&Ll[t]?(""+e).trim():e+"px"}function s_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,A=A_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,A):t[r]=A}}var VU=er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mp(t,e){if(e){if(VU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Op(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function D0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vp=null,Ko=null,Go=null;function Sy(t){if(t=Kc(t)){if(typeof Vp!="function")throw Error(le(280));var e=t.stateNode;e&&(e=uf(e),Vp(t.stateNode,t.type,e))}}function i_(t){Ko?Go?Go.push(t):Go=[t]:Ko=t}function o_(){if(Ko){var t=Ko,e=Go;if(Go=Ko=null,Sy(t),e)for(t=0;t<e.length;t++)Sy(e[t])}}function a_(t,e){return t(e)}function l_(){}var Ig=!1;function c_(t,e,r){if(Ig)return t(e,r);Ig=!0;try{return a_(t,e,r)}finally{Ig=!1,(Ko!==null||Go!==null)&&(l_(),o_())}}function oc(t,e){var r=t.stateNode;if(r===null)return null;var n=uf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(le(231,e,typeof r));return r}var Kp=!1;if(UA)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Kp=!1}function KU(t,e,r,n,A,s,i,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var jl=!1,th=null,rh=!1,Gp=null,GU={onError:function(t){jl=!0,th=t}};function zU(t,e,r,n,A,s,i,a,o){jl=!1,th=null,KU.apply(GU,arguments)}function $U(t,e,r,n,A,s,i,a,o){if(zU.apply(this,arguments),jl){if(jl){var c=th;jl=!1,th=null}else throw Error(le(198));rh||(rh=!0,Gp=c)}}function to(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function u_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ky(t){if(to(t)!==t)throw Error(le(188))}function WU(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(le(188));return e!==t?null:t}for(var r=t,n=e;;){var A=r.return;if(A===null)break;var s=A.alternate;if(s===null){if(n=A.return,n!==null){r=n;continue}break}if(A.child===s.child){for(s=A.child;s;){if(s===r)return ky(A),t;if(s===n)return ky(A),e;s=s.sibling}throw Error(le(188))}if(r.return!==n.return)r=A,n=s;else{for(var i=!1,a=A.child;a;){if(a===r){i=!0,r=A,n=s;break}if(a===n){i=!0,n=A,r=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===r){i=!0,r=s,n=A;break}if(a===n){i=!0,n=s,r=A;break}a=a.sibling}if(!i)throw Error(le(189))}}if(r.alternate!==n)throw Error(le(190))}if(r.tag!==3)throw Error(le(188));return r.stateNode.current===r?t:e}function d_(t){return t=WU(t),t!==null?h_(t):null}function h_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h_(t);if(e!==null)return e;t=t.sibling}return null}var f_=Cn.unstable_scheduleCallback,Ry=Cn.unstable_cancelCallback,qU=Cn.unstable_shouldYield,JU=Cn.unstable_requestPaint,lr=Cn.unstable_now,XU=Cn.unstable_getCurrentPriorityLevel,P0=Cn.unstable_ImmediatePriority,g_=Cn.unstable_UserBlockingPriority,nh=Cn.unstable_NormalPriority,YU=Cn.unstable_LowPriority,p_=Cn.unstable_IdlePriority,of=null,sA=null;function ZU(t){if(sA&&typeof sA.onCommitFiberRoot=="function")try{sA.onCommitFiberRoot(of,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:rS,eS=Math.log,tS=Math.LN2;function rS(t){return t>>>=0,t===0?32:31-(eS(t)/tS|0)|0}var Uu=64,Su=4194304;function xl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ah(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,A=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var a=i&~A;a!==0?n=xl(a):(s&=i,s!==0&&(n=xl(s)))}else i=r&~A,i!==0?n=xl(i):s!==0&&(n=xl(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&A)&&(A=n&-n,s=e&-e,A>=s||A===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Gn(e),A=1<<r,n|=t[r],e&=~A;return n}function nS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,A=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Gn(s),a=1<<i,o=A[i];o===-1?(!(a&r)||a&n)&&(A[i]=nS(a,e)):o<=e&&(t.expiredLanes|=a),s&=~a}}function zp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m_(){var t=Uu;return Uu<<=1,!(Uu&4194240)&&(Uu=64),t}function _g(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=r}function sS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var A=31-Gn(r),s=1<<A;e[A]=0,n[A]=-1,t[A]=-1,r&=~s}}function L0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Gn(r),A=1<<n;A&e|t[n]&e&&(t[n]|=e),r&=~A}}var Ct=0;function w_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B_,j0,y_,v_,x_,$p=!1,ku=[],_s=null,Es=null,bs=null,ac=new Map,lc=new Map,as=[],iS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ny(t,e){switch(t){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":ac.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(e.pointerId)}}function Al(t,e,r,n,A,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[A]},e!==null&&(e=Kc(e),e!==null&&j0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,A!==null&&e.indexOf(A)===-1&&e.push(A),t)}function oS(t,e,r,n,A){switch(e){case"focusin":return _s=Al(_s,t,e,r,n,A),!0;case"dragenter":return Es=Al(Es,t,e,r,n,A),!0;case"mouseover":return bs=Al(bs,t,e,r,n,A),!0;case"pointerover":var s=A.pointerId;return ac.set(s,Al(ac.get(s)||null,t,e,r,n,A)),!0;case"gotpointercapture":return s=A.pointerId,lc.set(s,Al(lc.get(s)||null,t,e,r,n,A)),!0}return!1}function C_(t){var e=bi(t.target);if(e!==null){var r=to(e);if(r!==null){if(e=r.tag,e===13){if(e=u_(r),e!==null){t.blockedOn=e,x_(t.priority,function(){y_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Wp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Hp=n,r.target.dispatchEvent(n),Hp=null}else return e=Kc(r),e!==null&&j0(e),t.blockedOn=r,!1;e.shift()}return!0}function Dy(t,e,r){_d(t)&&r.delete(e)}function aS(){$p=!1,_s!==null&&_d(_s)&&(_s=null),Es!==null&&_d(Es)&&(Es=null),bs!==null&&_d(bs)&&(bs=null),ac.forEach(Dy),lc.forEach(Dy)}function sl(t,e){t.blockedOn===e&&(t.blockedOn=null,$p||($p=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,aS)))}function cc(t){function e(A){return sl(A,t)}if(0<ku.length){sl(ku[0],t);for(var r=1;r<ku.length;r++){var n=ku[r];n.blockedOn===t&&(n.blockedOn=null)}}for(_s!==null&&sl(_s,t),Es!==null&&sl(Es,t),bs!==null&&sl(bs,t),ac.forEach(e),lc.forEach(e),r=0;r<as.length;r++)n=as[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<as.length&&(r=as[0],r.blockedOn===null);)C_(r),r.blockedOn===null&&as.shift()}var zo=MA.ReactCurrentBatchConfig,sh=!0;function lS(t,e,r,n){var A=Ct,s=zo.transition;zo.transition=null;try{Ct=1,M0(t,e,r,n)}finally{Ct=A,zo.transition=s}}function cS(t,e,r,n){var A=Ct,s=zo.transition;zo.transition=null;try{Ct=4,M0(t,e,r,n)}finally{Ct=A,zo.transition=s}}function M0(t,e,r,n){if(sh){var A=Wp(t,e,r,n);if(A===null)Ng(t,e,n,ih,r),Ny(t,n);else if(oS(A,t,e,r,n))n.stopPropagation();else if(Ny(t,n),e&4&&-1<iS.indexOf(t)){for(;A!==null;){var s=Kc(A);if(s!==null&&B_(s),s=Wp(t,e,r,n),s===null&&Ng(t,e,n,ih,r),s===A)break;A=s}A!==null&&n.stopPropagation()}else Ng(t,e,n,null,r)}}var ih=null;function Wp(t,e,r,n){if(ih=null,t=D0(n),t=bi(t),t!==null)if(e=to(t),e===null)t=null;else if(r=e.tag,r===13){if(t=u_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ih=t,null}function I_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XU()){case P0:return 1;case g_:return 4;case nh:case YU:return 16;case p_:return 536870912;default:return 16}default:return 16}}var ms=null,O0=null,Ed=null;function __(){if(Ed)return Ed;var t,e=O0,r=e.length,n,A="value"in ms?ms.value:ms.textContent,s=A.length;for(t=0;t<r&&e[t]===A[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===A[s-n];n++);return Ed=A.slice(t,1<n?1-n:void 0)}function bd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ru(){return!0}function Py(){return!1}function bn(t){function e(r,n,A,s,i){this._reactName=r,this._targetInst=A,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ru:Py,this.isPropagationStopped=Py,this}return er(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),e}var Ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H0=bn(Ta),Vc=er({},Ta,{view:0,detail:0}),uS=bn(Vc),Eg,bg,il,af=er({},Vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:V0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(Eg=t.screenX-il.screenX,bg=t.screenY-il.screenY):bg=Eg=0,il=t),Eg)},movementY:function(t){return"movementY"in t?t.movementY:bg}}),Ly=bn(af),dS=er({},af,{dataTransfer:0}),hS=bn(dS),fS=er({},Vc,{relatedTarget:0}),Tg=bn(fS),gS=er({},Ta,{animationName:0,elapsedTime:0,pseudoElement:0}),pS=bn(gS),mS=er({},Ta,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wS=bn(mS),BS=er({},Ta,{data:0}),jy=bn(BS),yS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xS[t])?!!e[t]:!1}function V0(){return CS}var IS=er({},Vc,{key:function(t){if(t.key){var e=yS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:V0,charCode:function(t){return t.type==="keypress"?bd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_S=bn(IS),ES=er({},af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),My=bn(ES),bS=er({},Vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:V0}),TS=bn(bS),FS=er({},Ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),QS=bn(FS),US=er({},af,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SS=bn(US),kS=[9,13,27,32],K0=UA&&"CompositionEvent"in window,Ml=null;UA&&"documentMode"in document&&(Ml=document.documentMode);var RS=UA&&"TextEvent"in window&&!Ml,E_=UA&&(!K0||Ml&&8<Ml&&11>=Ml),Oy=" ",Hy=!1;function b_(t,e){switch(t){case"keyup":return kS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function NS(t,e){switch(t){case"compositionend":return T_(e);case"keypress":return e.which!==32?null:(Hy=!0,Oy);case"textInput":return t=e.data,t===Oy&&Hy?null:t;default:return null}}function DS(t,e){if(Uo)return t==="compositionend"||!K0&&b_(t,e)?(t=__(),Ed=O0=ms=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E_&&e.locale!=="ko"?null:e.data;default:return null}}var PS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PS[t.type]:e==="textarea"}function F_(t,e,r,n){i_(n),e=oh(e,"onChange"),0<e.length&&(r=new H0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ol=null,uc=null;function LS(t){M_(t,0)}function lf(t){var e=Ro(t);if(ZI(e))return t}function jS(t,e){if(t==="change")return e}var Q_=!1;if(UA){var Fg;if(UA){var Qg="oninput"in document;if(!Qg){var Ky=document.createElement("div");Ky.setAttribute("oninput","return;"),Qg=typeof Ky.oninput=="function"}Fg=Qg}else Fg=!1;Q_=Fg&&(!document.documentMode||9<document.documentMode)}function Gy(){Ol&&(Ol.detachEvent("onpropertychange",U_),uc=Ol=null)}function U_(t){if(t.propertyName==="value"&&lf(uc)){var e=[];F_(e,uc,t,D0(t)),c_(LS,e)}}function MS(t,e,r){t==="focusin"?(Gy(),Ol=e,uc=r,Ol.attachEvent("onpropertychange",U_)):t==="focusout"&&Gy()}function OS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lf(uc)}function HS(t,e){if(t==="click")return lf(e)}function VS(t,e){if(t==="input"||t==="change")return lf(e)}function KS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:KS;function dc(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var A=r[n];if(!Qp.call(e,A)||!Wn(t[A],e[A]))return!1}return!0}function zy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $y(t,e){var r=zy(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zy(r)}}function S_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k_(){for(var t=window,e=eh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=eh(t.document)}return e}function G0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GS(t){var e=k_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&S_(r.ownerDocument.documentElement,r)){if(n!==null&&G0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var A=r.textContent.length,s=Math.min(n.start,A);n=n.end===void 0?s:Math.min(n.end,A),!t.extend&&s>n&&(A=n,n=s,s=A),A=$y(r,s);var i=$y(r,n);A&&i&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(A.node,A.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zS=UA&&"documentMode"in document&&11>=document.documentMode,So=null,qp=null,Hl=null,Jp=!1;function Wy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jp||So==null||So!==eh(n)||(n=So,"selectionStart"in n&&G0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hl&&dc(Hl,n)||(Hl=n,n=oh(qp,"onSelect"),0<n.length&&(e=new H0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=So)))}function Nu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ko={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},Ug={},R_={};UA&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function cf(t){if(Ug[t])return Ug[t];if(!ko[t])return t;var e=ko[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in R_)return Ug[t]=e[r];return t}var N_=cf("animationend"),D_=cf("animationiteration"),P_=cf("animationstart"),L_=cf("transitionend"),j_=new Map,qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(t,e){j_.set(t,e),eo(e,[t])}for(var Sg=0;Sg<qy.length;Sg++){var kg=qy[Sg],$S=kg.toLowerCase(),WS=kg[0].toUpperCase()+kg.slice(1);Zs($S,"on"+WS)}Zs(N_,"onAnimationEnd");Zs(D_,"onAnimationIteration");Zs(P_,"onAnimationStart");Zs("dblclick","onDoubleClick");Zs("focusin","onFocus");Zs("focusout","onBlur");Zs(L_,"onTransitionEnd");ta("onMouseEnter",["mouseout","mouseover"]);ta("onMouseLeave",["mouseout","mouseover"]);ta("onPointerEnter",["pointerout","pointerover"]);ta("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function Jy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,$U(n,e,void 0,t),t.currentTarget=null}function M_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],A=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==s&&A.isPropagationStopped())break e;Jy(A,a,c),s=o}else for(i=0;i<n.length;i++){if(a=n[i],o=a.instance,c=a.currentTarget,a=a.listener,o!==s&&A.isPropagationStopped())break e;Jy(A,a,c),s=o}}}if(rh)throw t=Gp,rh=!1,Gp=null,t}function Lt(t,e){var r=e[tm];r===void 0&&(r=e[tm]=new Set);var n=t+"__bubble";r.has(n)||(O_(e,t,2,!1),r.add(n))}function Rg(t,e,r){var n=0;e&&(n|=4),O_(r,t,n,e)}var Du="_reactListening"+Math.random().toString(36).slice(2);function hc(t){if(!t[Du]){t[Du]=!0,WI.forEach(function(r){r!=="selectionchange"&&(qS.has(r)||Rg(r,!1,t),Rg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Du]||(e[Du]=!0,Rg("selectionchange",!1,e))}}function O_(t,e,r,n){switch(I_(e)){case 1:var A=lS;break;case 4:A=cS;break;default:A=M0}r=A.bind(null,e,r,t),A=void 0,!Kp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(A=!0),n?A!==void 0?t.addEventListener(e,r,{capture:!0,passive:A}):t.addEventListener(e,r,!0):A!==void 0?t.addEventListener(e,r,{passive:A}):t.addEventListener(e,r,!1)}function Ng(t,e,r,n,A){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===A||a.nodeType===8&&a.parentNode===A)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===A||o.nodeType===8&&o.parentNode===A))return;i=i.return}for(;a!==null;){if(i=bi(a),i===null)return;if(o=i.tag,o===5||o===6){n=s=i;continue e}a=a.parentNode}}n=n.return}c_(function(){var c=s,d=D0(r),h=[];e:{var f=j_.get(t);if(f!==void 0){var m=H0,y=t;switch(t){case"keypress":if(bd(r)===0)break e;case"keydown":case"keyup":m=_S;break;case"focusin":y="focus",m=Tg;break;case"focusout":y="blur",m=Tg;break;case"beforeblur":case"afterblur":m=Tg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ly;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=hS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=TS;break;case N_:case D_:case P_:m=pS;break;case L_:m=QS;break;case"scroll":m=uS;break;case"wheel":m=SS;break;case"copy":case"cut":case"paste":m=wS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=My}var B=(e&4)!==0,E=!B&&t==="scroll",x=B?f!==null?f+"Capture":null:f;B=[];for(var w=c,I;w!==null;){I=w;var F=I.stateNode;if(I.tag===5&&F!==null&&(I=F,x!==null&&(F=oc(w,x),F!=null&&B.push(fc(w,F,I)))),E)break;w=w.return}0<B.length&&(f=new m(f,y,null,r,d),h.push({event:f,listeners:B}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==Hp&&(y=r.relatedTarget||r.fromElement)&&(bi(y)||y[SA]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=c,y=y?bi(y):null,y!==null&&(E=to(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(B=Ly,F="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(B=My,F="onPointerLeave",x="onPointerEnter",w="pointer"),E=m==null?f:Ro(m),I=y==null?f:Ro(y),f=new B(F,w+"leave",m,r,d),f.target=E,f.relatedTarget=I,F=null,bi(d)===c&&(B=new B(x,w+"enter",y,r,d),B.target=I,B.relatedTarget=E,F=B),E=F,m&&y)t:{for(B=m,x=y,w=0,I=B;I;I=uo(I))w++;for(I=0,F=x;F;F=uo(F))I++;for(;0<w-I;)B=uo(B),w--;for(;0<I-w;)x=uo(x),I--;for(;w--;){if(B===x||x!==null&&B===x.alternate)break t;B=uo(B),x=uo(x)}B=null}else B=null;m!==null&&Xy(h,f,m,B,!1),y!==null&&E!==null&&Xy(h,E,y,B,!0)}}e:{if(f=c?Ro(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var R=jS;else if(Vy(f))if(Q_)R=VS;else{R=OS;var U=MS}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=HS);if(R&&(R=R(t,c))){F_(h,R,r,d);break e}U&&U(t,f,c),t==="focusout"&&(U=f._wrapperState)&&U.controlled&&f.type==="number"&&Pp(f,"number",f.value)}switch(U=c?Ro(c):window,t){case"focusin":(Vy(U)||U.contentEditable==="true")&&(So=U,qp=c,Hl=null);break;case"focusout":Hl=qp=So=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,Wy(h,r,d);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":Wy(h,r,d)}var v;if(K0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Uo?b_(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(E_&&r.locale!=="ko"&&(Uo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Uo&&(v=__()):(ms=d,O0="value"in ms?ms.value:ms.textContent,Uo=!0)),U=oh(c,C),0<U.length&&(C=new jy(C,t,null,r,d),h.push({event:C,listeners:U}),v?C.data=v:(v=T_(r),v!==null&&(C.data=v)))),(v=RS?NS(t,r):DS(t,r))&&(c=oh(c,"onBeforeInput"),0<c.length&&(d=new jy("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=v))}M_(h,e)})}function fc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function oh(t,e){for(var r=e+"Capture",n=[];t!==null;){var A=t,s=A.stateNode;A.tag===5&&s!==null&&(A=s,s=oc(t,r),s!=null&&n.unshift(fc(t,s,A)),s=oc(t,e),s!=null&&n.push(fc(t,s,A))),t=t.return}return n}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xy(t,e,r,n,A){for(var s=e._reactName,i=[];r!==null&&r!==n;){var a=r,o=a.alternate,c=a.stateNode;if(o!==null&&o===n)break;a.tag===5&&c!==null&&(a=c,A?(o=oc(r,s),o!=null&&i.unshift(fc(r,o,a))):A||(o=oc(r,s),o!=null&&i.push(fc(r,o,a)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var JS=/\r\n?/g,XS=/\u0000|\uFFFD/g;function Yy(t){return(typeof t=="string"?t:""+t).replace(JS,`
`).replace(XS,"")}function Pu(t,e,r){if(e=Yy(e),Yy(t)!==e&&r)throw Error(le(425))}function ah(){}var Xp=null,Yp=null;function Zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var em=typeof setTimeout=="function"?setTimeout:void 0,YS=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,ZS=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(t){return Zy.resolve(null).then(t).catch(ek)}:em;function ek(t){setTimeout(function(){throw t})}function Dg(t,e){var r=e,n=0;do{var A=r.nextSibling;if(t.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(n===0){t.removeChild(A),cc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=A}while(r);cc(e)}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ev(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fa=Math.random().toString(36).slice(2),rA="__reactFiber$"+Fa,gc="__reactProps$"+Fa,SA="__reactContainer$"+Fa,tm="__reactEvents$"+Fa,tk="__reactListeners$"+Fa,rk="__reactHandles$"+Fa;function bi(t){var e=t[rA];if(e)return e;for(var r=t.parentNode;r;){if(e=r[SA]||r[rA]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ev(t);t!==null;){if(r=t[rA])return r;t=ev(t)}return e}t=r,r=t.parentNode}return null}function Kc(t){return t=t[rA]||t[SA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function uf(t){return t[gc]||null}var rm=[],No=-1;function ei(t){return{current:t}}function Ot(t){0>No||(t.current=rm[No],rm[No]=null,No--)}function Nt(t,e){No++,rm[No]=t.current,t.current=e}var Os={},qr=ei(Os),dn=ei(!1),Pi=Os;function ra(t,e){var r=t.type.contextTypes;if(!r)return Os;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var A={},s;for(s in r)A[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=A),A}function hn(t){return t=t.childContextTypes,t!=null}function lh(){Ot(dn),Ot(qr)}function tv(t,e,r){if(qr.current!==Os)throw Error(le(168));Nt(qr,e),Nt(dn,r)}function H_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var A in n)if(!(A in e))throw Error(le(108,MU(t)||"Unknown",A));return er({},r,n)}function ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Os,Pi=qr.current,Nt(qr,t),Nt(dn,dn.current),!0}function rv(t,e,r){var n=t.stateNode;if(!n)throw Error(le(169));r?(t=H_(t,e,Pi),n.__reactInternalMemoizedMergedChildContext=t,Ot(dn),Ot(qr),Nt(qr,t)):Ot(dn),Nt(dn,r)}var BA=null,df=!1,Pg=!1;function V_(t){BA===null?BA=[t]:BA.push(t)}function nk(t){df=!0,V_(t)}function ti(){if(!Pg&&BA!==null){Pg=!0;var t=0,e=Ct;try{var r=BA;for(Ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}BA=null,df=!1}catch(A){throw BA!==null&&(BA=BA.slice(t+1)),f_(P0,ti),A}finally{Ct=e,Pg=!1}}return null}var Do=[],Po=0,uh=null,dh=0,Qn=[],Un=0,Li=null,vA=1,xA="";function wi(t,e){Do[Po++]=dh,Do[Po++]=uh,uh=t,dh=e}function K_(t,e,r){Qn[Un++]=vA,Qn[Un++]=xA,Qn[Un++]=Li,Li=t;var n=vA;t=xA;var A=32-Gn(n)-1;n&=~(1<<A),r+=1;var s=32-Gn(e)+A;if(30<s){var i=A-A%5;s=(n&(1<<i)-1).toString(32),n>>=i,A-=i,vA=1<<32-Gn(e)+A|r<<A|n,xA=s+t}else vA=1<<s|r<<A|n,xA=t}function z0(t){t.return!==null&&(wi(t,1),K_(t,1,0))}function $0(t){for(;t===uh;)uh=Do[--Po],Do[Po]=null,dh=Do[--Po],Do[Po]=null;for(;t===Li;)Li=Qn[--Un],Qn[Un]=null,xA=Qn[--Un],Qn[Un]=null,vA=Qn[--Un],Qn[Un]=null}var xn=null,vn=null,Gt=!1,Kn=null;function G_(t,e){var r=kn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function nv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,vn=Ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Li!==null?{id:vA,overflow:xA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=kn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,xn=t,vn=null,!0):!1;default:return!1}}function nm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Am(t){if(Gt){var e=vn;if(e){var r=e;if(!nv(t,e)){if(nm(t))throw Error(le(418));e=Ts(r.nextSibling);var n=xn;e&&nv(t,e)?G_(n,r):(t.flags=t.flags&-4097|2,Gt=!1,xn=t)}}else{if(nm(t))throw Error(le(418));t.flags=t.flags&-4097|2,Gt=!1,xn=t}}}function Av(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function Lu(t){if(t!==xn)return!1;if(!Gt)return Av(t),Gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zp(t.type,t.memoizedProps)),e&&(e=vn)){if(nm(t))throw z_(),Error(le(418));for(;e;)G_(t,e),e=Ts(e.nextSibling)}if(Av(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){vn=Ts(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=xn?Ts(t.stateNode.nextSibling):null;return!0}function z_(){for(var t=vn;t;)t=Ts(t.nextSibling)}function na(){vn=xn=null,Gt=!1}function W0(t){Kn===null?Kn=[t]:Kn.push(t)}var Ak=MA.ReactCurrentBatchConfig;function ol(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(le(309));var n=r.stateNode}if(!n)throw Error(le(147,t));var A=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=A.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(le(284));if(!r._owner)throw Error(le(290,t))}return t}function ju(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sv(t){var e=t._init;return e(t._payload)}function $_(t){function e(x,w){if(t){var I=x.deletions;I===null?(x.deletions=[w],x.flags|=16):I.push(w)}}function r(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function A(x,w){return x=Ss(x,w),x.index=0,x.sibling=null,x}function s(x,w,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<w?(x.flags|=2,w):I):(x.flags|=2,w)):(x.flags|=1048576,w)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,I,F){return w===null||w.tag!==6?(w=Kg(I,x.mode,F),w.return=x,w):(w=A(w,I),w.return=x,w)}function o(x,w,I,F){var R=I.type;return R===Qo?d(x,w,I.props.children,F,I.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ss&&sv(R)===w.type)?(F=A(w,I.props),F.ref=ol(x,w,I),F.return=x,F):(F=Rd(I.type,I.key,I.props,null,x.mode,F),F.ref=ol(x,w,I),F.return=x,F)}function c(x,w,I,F){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=Gg(I,x.mode,F),w.return=x,w):(w=A(w,I.children||[]),w.return=x,w)}function d(x,w,I,F,R){return w===null||w.tag!==7?(w=Si(I,x.mode,F,R),w.return=x,w):(w=A(w,I),w.return=x,w)}function h(x,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Kg(""+w,x.mode,I),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tu:return I=Rd(w.type,w.key,w.props,null,x.mode,I),I.ref=ol(x,null,w),I.return=x,I;case Fo:return w=Gg(w,x.mode,I),w.return=x,w;case ss:var F=w._init;return h(x,F(w._payload),I)}if(vl(w)||rl(w))return w=Si(w,x.mode,I,null),w.return=x,w;ju(x,w)}return null}function f(x,w,I,F){var R=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return R!==null?null:a(x,w,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Tu:return I.key===R?o(x,w,I,F):null;case Fo:return I.key===R?c(x,w,I,F):null;case ss:return R=I._init,f(x,w,R(I._payload),F)}if(vl(I)||rl(I))return R!==null?null:d(x,w,I,F,null);ju(x,I)}return null}function m(x,w,I,F,R){if(typeof F=="string"&&F!==""||typeof F=="number")return x=x.get(I)||null,a(w,x,""+F,R);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Tu:return x=x.get(F.key===null?I:F.key)||null,o(w,x,F,R);case Fo:return x=x.get(F.key===null?I:F.key)||null,c(w,x,F,R);case ss:var U=F._init;return m(x,w,I,U(F._payload),R)}if(vl(F)||rl(F))return x=x.get(I)||null,d(w,x,F,R,null);ju(w,F)}return null}function y(x,w,I,F){for(var R=null,U=null,v=w,C=w=0,_=null;v!==null&&C<I.length;C++){v.index>C?(_=v,v=null):_=v.sibling;var Q=f(x,v,I[C],F);if(Q===null){v===null&&(v=_);break}t&&v&&Q.alternate===null&&e(x,v),w=s(Q,w,C),U===null?R=Q:U.sibling=Q,U=Q,v=_}if(C===I.length)return r(x,v),Gt&&wi(x,C),R;if(v===null){for(;C<I.length;C++)v=h(x,I[C],F),v!==null&&(w=s(v,w,C),U===null?R=v:U.sibling=v,U=v);return Gt&&wi(x,C),R}for(v=n(x,v);C<I.length;C++)_=m(v,x,C,I[C],F),_!==null&&(t&&_.alternate!==null&&v.delete(_.key===null?C:_.key),w=s(_,w,C),U===null?R=_:U.sibling=_,U=_);return t&&v.forEach(function(N){return e(x,N)}),Gt&&wi(x,C),R}function B(x,w,I,F){var R=rl(I);if(typeof R!="function")throw Error(le(150));if(I=R.call(I),I==null)throw Error(le(151));for(var U=R=null,v=w,C=w=0,_=null,Q=I.next();v!==null&&!Q.done;C++,Q=I.next()){v.index>C?(_=v,v=null):_=v.sibling;var N=f(x,v,Q.value,F);if(N===null){v===null&&(v=_);break}t&&v&&N.alternate===null&&e(x,v),w=s(N,w,C),U===null?R=N:U.sibling=N,U=N,v=_}if(Q.done)return r(x,v),Gt&&wi(x,C),R;if(v===null){for(;!Q.done;C++,Q=I.next())Q=h(x,Q.value,F),Q!==null&&(w=s(Q,w,C),U===null?R=Q:U.sibling=Q,U=Q);return Gt&&wi(x,C),R}for(v=n(x,v);!Q.done;C++,Q=I.next())Q=m(v,x,C,Q.value,F),Q!==null&&(t&&Q.alternate!==null&&v.delete(Q.key===null?C:Q.key),w=s(Q,w,C),U===null?R=Q:U.sibling=Q,U=Q);return t&&v.forEach(function(P){return e(x,P)}),Gt&&wi(x,C),R}function E(x,w,I,F){if(typeof I=="object"&&I!==null&&I.type===Qo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Tu:e:{for(var R=I.key,U=w;U!==null;){if(U.key===R){if(R=I.type,R===Qo){if(U.tag===7){r(x,U.sibling),w=A(U,I.props.children),w.return=x,x=w;break e}}else if(U.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ss&&sv(R)===U.type){r(x,U.sibling),w=A(U,I.props),w.ref=ol(x,U,I),w.return=x,x=w;break e}r(x,U);break}else e(x,U);U=U.sibling}I.type===Qo?(w=Si(I.props.children,x.mode,F,I.key),w.return=x,x=w):(F=Rd(I.type,I.key,I.props,null,x.mode,F),F.ref=ol(x,w,I),F.return=x,x=F)}return i(x);case Fo:e:{for(U=I.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){r(x,w.sibling),w=A(w,I.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else e(x,w);w=w.sibling}w=Gg(I,x.mode,F),w.return=x,x=w}return i(x);case ss:return U=I._init,E(x,w,U(I._payload),F)}if(vl(I))return y(x,w,I,F);if(rl(I))return B(x,w,I,F);ju(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(r(x,w.sibling),w=A(w,I),w.return=x,x=w):(r(x,w),w=Kg(I,x.mode,F),w.return=x,x=w),i(x)):r(x,w)}return E}var Aa=$_(!0),W_=$_(!1),hh=ei(null),fh=null,Lo=null,q0=null;function J0(){q0=Lo=fh=null}function X0(t){var e=hh.current;Ot(hh),t._currentValue=e}function sm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function $o(t,e){fh=t,q0=Lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Pn(t){var e=t._currentValue;if(q0!==t)if(t={context:t,memoizedValue:e,next:null},Lo===null){if(fh===null)throw Error(le(308));Lo=t,fh.dependencies={lanes:0,firstContext:t}}else Lo=Lo.next=t;return e}var Ti=null;function Y0(t){Ti===null?Ti=[t]:Ti.push(t)}function q_(t,e,r,n){var A=e.interleaved;return A===null?(r.next=r,Y0(e)):(r.next=A.next,A.next=r),e.interleaved=r,kA(t,n)}function kA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var is=!1;function Z0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function TA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fs(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ft&2){var A=n.pending;return A===null?e.next=e:(e.next=A.next,A.next=e),n.pending=e,kA(t,r)}return A=n.interleaved,A===null?(e.next=e,Y0(n)):(e.next=A.next,A.next=e),n.interleaved=e,kA(t,r)}function Td(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,L0(t,r)}}function iv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var A=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?A=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?A=s=e:s=s.next=e}else A=s=e;r={baseState:n.baseState,firstBaseUpdate:A,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function gh(t,e,r,n){var A=t.updateQueue;is=!1;var s=A.firstBaseUpdate,i=A.lastBaseUpdate,a=A.shared.pending;if(a!==null){A.shared.pending=null;var o=a,c=o.next;o.next=null,i===null?s=c:i.next=c,i=o;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=o))}if(s!==null){var h=A.baseState;i=0,d=c=o=null,a=s;do{var f=a.lane,m=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,B=a;switch(f=e,m=r,B.tag){case 1:if(y=B.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=B.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=er({},h,f);break e;case 2:is=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=A.effects,f===null?A.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,o=h):d=d.next=m,i|=f;if(a=a.next,a===null){if(a=A.shared.pending,a===null)break;f=a,a=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(d===null&&(o=h),A.baseState=o,A.firstBaseUpdate=c,A.lastBaseUpdate=d,e=A.shared.interleaved,e!==null){A=e;do i|=A.lane,A=A.next;while(A!==e)}else s===null&&(A.shared.lanes=0);Mi|=i,t.lanes=i,t.memoizedState=h}}function ov(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],A=n.callback;if(A!==null){if(n.callback=null,n=r,typeof A!="function")throw Error(le(191,A));A.call(n)}}}var Gc={},iA=ei(Gc),pc=ei(Gc),mc=ei(Gc);function Fi(t){if(t===Gc)throw Error(le(174));return t}function ew(t,e){switch(Nt(mc,e),Nt(pc,t),Nt(iA,Gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jp(e,t)}Ot(iA),Nt(iA,e)}function sa(){Ot(iA),Ot(pc),Ot(mc)}function X_(t){Fi(mc.current);var e=Fi(iA.current),r=jp(e,t.type);e!==r&&(Nt(pc,t),Nt(iA,r))}function tw(t){pc.current===t&&(Ot(iA),Ot(pc))}var Xt=ei(0);function ph(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lg=[];function rw(){for(var t=0;t<Lg.length;t++)Lg[t]._workInProgressVersionPrimary=null;Lg.length=0}var Fd=MA.ReactCurrentDispatcher,jg=MA.ReactCurrentBatchConfig,ji=0,Yt=null,gr=null,Cr=null,mh=!1,Vl=!1,wc=0,sk=0;function Mr(){throw Error(le(321))}function nw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Wn(t[r],e[r]))return!1;return!0}function Aw(t,e,r,n,A,s){if(ji=s,Yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fd.current=t===null||t.memoizedState===null?lk:ck,t=r(n,A),Vl){s=0;do{if(Vl=!1,wc=0,25<=s)throw Error(le(301));s+=1,Cr=gr=null,e.updateQueue=null,Fd.current=uk,t=r(n,A)}while(Vl)}if(Fd.current=wh,e=gr!==null&&gr.next!==null,ji=0,Cr=gr=Yt=null,mh=!1,e)throw Error(le(300));return t}function sw(){var t=wc!==0;return wc=0,t}function eA(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cr===null?Yt.memoizedState=Cr=t:Cr=Cr.next=t,Cr}function Ln(){if(gr===null){var t=Yt.alternate;t=t!==null?t.memoizedState:null}else t=gr.next;var e=Cr===null?Yt.memoizedState:Cr.next;if(e!==null)Cr=e,gr=t;else{if(t===null)throw Error(le(310));gr=t,t={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Cr===null?Yt.memoizedState=Cr=t:Cr=Cr.next=t}return Cr}function Bc(t,e){return typeof e=="function"?e(t):e}function Mg(t){var e=Ln(),r=e.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=t;var n=gr,A=n.baseQueue,s=r.pending;if(s!==null){if(A!==null){var i=A.next;A.next=s.next,s.next=i}n.baseQueue=A=s,r.pending=null}if(A!==null){s=A.next,n=n.baseState;var a=i=null,o=null,c=s;do{var d=c.lane;if((ji&d)===d)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=h,i=n):o=o.next=h,Yt.lanes|=d,Mi|=d}c=c.next}while(c!==null&&c!==s);o===null?i=n:o.next=a,Wn(n,e.memoizedState)||(an=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=o,r.lastRenderedState=n}if(t=r.interleaved,t!==null){A=t;do s=A.lane,Yt.lanes|=s,Mi|=s,A=A.next;while(A!==t)}else A===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Og(t){var e=Ln(),r=e.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=t;var n=r.dispatch,A=r.pending,s=e.memoizedState;if(A!==null){r.pending=null;var i=A=A.next;do s=t(s,i.action),i=i.next;while(i!==A);Wn(s,e.memoizedState)||(an=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Y_(){}function Z_(t,e){var r=Yt,n=Ln(),A=e(),s=!Wn(n.memoizedState,A);if(s&&(n.memoizedState=A,an=!0),n=n.queue,iw(rE.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Cr!==null&&Cr.memoizedState.tag&1){if(r.flags|=2048,yc(9,tE.bind(null,r,n,A,e),void 0,null),_r===null)throw Error(le(349));ji&30||eE(r,e,A)}return A}function eE(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function tE(t,e,r,n){e.value=r,e.getSnapshot=n,nE(e)&&AE(t)}function rE(t,e,r){return r(function(){nE(e)&&AE(t)})}function nE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Wn(t,r)}catch{return!0}}function AE(t){var e=kA(t,1);e!==null&&zn(e,t,1,-1)}function av(t){var e=eA();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:t},e.queue=t,t=t.dispatch=ak.bind(null,Yt,t),[e.memoizedState,t]}function yc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function sE(){return Ln().memoizedState}function Qd(t,e,r,n){var A=eA();Yt.flags|=t,A.memoizedState=yc(1|e,r,void 0,n===void 0?null:n)}function hf(t,e,r,n){var A=Ln();n=n===void 0?null:n;var s=void 0;if(gr!==null){var i=gr.memoizedState;if(s=i.destroy,n!==null&&nw(n,i.deps)){A.memoizedState=yc(e,r,s,n);return}}Yt.flags|=t,A.memoizedState=yc(1|e,r,s,n)}function lv(t,e){return Qd(8390656,8,t,e)}function iw(t,e){return hf(2048,8,t,e)}function iE(t,e){return hf(4,2,t,e)}function oE(t,e){return hf(4,4,t,e)}function aE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lE(t,e,r){return r=r!=null?r.concat([t]):null,hf(4,4,aE.bind(null,e,t),r)}function ow(){}function cE(t,e){var r=Ln();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function uE(t,e){var r=Ln();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function dE(t,e,r){return ji&21?(Wn(r,e)||(r=m_(),Yt.lanes|=r,Mi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=r)}function ik(t,e){var r=Ct;Ct=r!==0&&4>r?r:4,t(!0);var n=jg.transition;jg.transition={};try{t(!1),e()}finally{Ct=r,jg.transition=n}}function hE(){return Ln().memoizedState}function ok(t,e,r){var n=Us(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},fE(t))gE(e,r);else if(r=q_(t,e,r,n),r!==null){var A=en();zn(r,t,n,A),pE(r,e,n)}}function ak(t,e,r){var n=Us(t),A={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(fE(t))gE(e,A);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,r);if(A.hasEagerState=!0,A.eagerState=a,Wn(a,i)){var o=e.interleaved;o===null?(A.next=A,Y0(e)):(A.next=o.next,o.next=A),e.interleaved=A;return}}catch{}finally{}r=q_(t,e,A,n),r!==null&&(A=en(),zn(r,t,n,A),pE(r,e,n))}}function fE(t){var e=t.alternate;return t===Yt||e!==null&&e===Yt}function gE(t,e){Vl=mh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function pE(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,L0(t,r)}}var wh={readContext:Pn,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},lk={readContext:Pn,useCallback:function(t,e){return eA().memoizedState=[t,e===void 0?null:e],t},useContext:Pn,useEffect:lv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Qd(4194308,4,aE.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qd(4,2,t,e)},useMemo:function(t,e){var r=eA();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=eA();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=ok.bind(null,Yt,t),[n.memoizedState,t]},useRef:function(t){var e=eA();return t={current:t},e.memoizedState=t},useState:av,useDebugValue:ow,useDeferredValue:function(t){return eA().memoizedState=t},useTransition:function(){var t=av(!1),e=t[0];return t=ik.bind(null,t[1]),eA().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Yt,A=eA();if(Gt){if(r===void 0)throw Error(le(407));r=r()}else{if(r=e(),_r===null)throw Error(le(349));ji&30||eE(n,e,r)}A.memoizedState=r;var s={value:r,getSnapshot:e};return A.queue=s,lv(rE.bind(null,n,s,t),[t]),n.flags|=2048,yc(9,tE.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=eA(),e=_r.identifierPrefix;if(Gt){var r=xA,n=vA;r=(n&~(1<<32-Gn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=wc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=sk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ck={readContext:Pn,useCallback:cE,useContext:Pn,useEffect:iw,useImperativeHandle:lE,useInsertionEffect:iE,useLayoutEffect:oE,useMemo:uE,useReducer:Mg,useRef:sE,useState:function(){return Mg(Bc)},useDebugValue:ow,useDeferredValue:function(t){var e=Ln();return dE(e,gr.memoizedState,t)},useTransition:function(){var t=Mg(Bc)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:Z_,useId:hE,unstable_isNewReconciler:!1},uk={readContext:Pn,useCallback:cE,useContext:Pn,useEffect:iw,useImperativeHandle:lE,useInsertionEffect:iE,useLayoutEffect:oE,useMemo:uE,useReducer:Og,useRef:sE,useState:function(){return Og(Bc)},useDebugValue:ow,useDeferredValue:function(t){var e=Ln();return gr===null?e.memoizedState=t:dE(e,gr.memoizedState,t)},useTransition:function(){var t=Og(Bc)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:Z_,useId:hE,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=er({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function im(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:er({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ff={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=en(),A=Us(t),s=TA(n,A);s.payload=e,r!=null&&(s.callback=r),e=Fs(t,s,A),e!==null&&(zn(e,t,A,n),Td(e,t,A))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=en(),A=Us(t),s=TA(n,A);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Fs(t,s,A),e!==null&&(zn(e,t,A,n),Td(e,t,A))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=en(),n=Us(t),A=TA(r,n);A.tag=2,e!=null&&(A.callback=e),e=Fs(t,A,n),e!==null&&(zn(e,t,n,r),Td(e,t,n))}};function cv(t,e,r,n,A,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!dc(r,n)||!dc(A,s):!0}function mE(t,e,r){var n=!1,A=Os,s=e.contextType;return typeof s=="object"&&s!==null?s=Pn(s):(A=hn(e)?Pi:qr.current,n=e.contextTypes,s=(n=n!=null)?ra(t,A):Os),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ff,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=s),e}function uv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ff.enqueueReplaceState(e,e.state,null)}function om(t,e,r,n){var A=t.stateNode;A.props=r,A.state=t.memoizedState,A.refs={},Z0(t);var s=e.contextType;typeof s=="object"&&s!==null?A.context=Pn(s):(s=hn(e)?Pi:qr.current,A.context=ra(t,s)),A.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(im(t,e,s,r),A.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(e=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),e!==A.state&&ff.enqueueReplaceState(A,A.state,null),gh(t,r,A,n),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function ia(t,e){try{var r="",n=e;do r+=jU(n),n=n.return;while(n);var A=r}catch(s){A=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:A,digest:null}}function Hg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function am(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var dk=typeof WeakMap=="function"?WeakMap:Map;function wE(t,e,r){r=TA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){yh||(yh=!0,wm=n),am(t,e)},r}function BE(t,e,r){r=TA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var A=e.value;r.payload=function(){return n(A)},r.callback=function(){am(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){am(t,e),typeof n!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function dv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new dk;var A=new Set;n.set(e,A)}else A=n.get(e),A===void 0&&(A=new Set,n.set(e,A));A.has(r)||(A.add(r),t=Ek.bind(null,t,e,r),e.then(t,t))}function hv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fv(t,e,r,n,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=TA(-1,1),e.tag=2,Fs(r,e,1))),r.lanes|=1),t)}var hk=MA.ReactCurrentOwner,an=!1;function Yr(t,e,r,n){e.child=t===null?W_(e,null,r,n):Aa(e,t.child,r,n)}function gv(t,e,r,n,A){r=r.render;var s=e.ref;return $o(e,A),n=Aw(t,e,r,n,s,A),r=sw(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,RA(t,e,A)):(Gt&&r&&z0(e),e.flags|=1,Yr(t,e,n,A),e.child)}function pv(t,e,r,n,A){if(t===null){var s=r.type;return typeof s=="function"&&!gw(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,yE(t,e,s,n,A)):(t=Rd(r.type,null,n,e,e.mode,A),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&A)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:dc,r(i,n)&&t.ref===e.ref)return RA(t,e,A)}return e.flags|=1,t=Ss(s,n),t.ref=e.ref,t.return=e,e.child=t}function yE(t,e,r,n,A){if(t!==null){var s=t.memoizedProps;if(dc(s,n)&&t.ref===e.ref)if(an=!1,e.pendingProps=n=s,(t.lanes&A)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,RA(t,e,A)}return lm(t,e,r,n,A)}function vE(t,e,r){var n=e.pendingProps,A=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(Mo,wn),wn|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Nt(Mo,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Nt(Mo,wn),wn|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Nt(Mo,wn),wn|=n;return Yr(t,e,A,r),e.child}function xE(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function lm(t,e,r,n,A){var s=hn(r)?Pi:qr.current;return s=ra(e,s),$o(e,A),r=Aw(t,e,r,n,s,A),n=sw(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,RA(t,e,A)):(Gt&&n&&z0(e),e.flags|=1,Yr(t,e,r,A),e.child)}function mv(t,e,r,n,A){if(hn(r)){var s=!0;ch(e)}else s=!1;if($o(e,A),e.stateNode===null)Ud(t,e),mE(e,r,n),om(e,r,n,A),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Pn(c):(c=hn(r)?Pi:qr.current,c=ra(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||o!==c)&&uv(e,i,n,c),is=!1;var f=e.memoizedState;i.state=f,gh(e,n,i,A),o=e.memoizedState,a!==n||f!==o||dn.current||is?(typeof d=="function"&&(im(e,r,d,n),o=e.memoizedState),(a=is||cv(e,r,a,n,f,o,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),i.props=n,i.state=o,i.context=c,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,J_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hn(e.type,a),i.props=c,h=e.pendingProps,f=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=Pn(o):(o=hn(r)?Pi:qr.current,o=ra(e,o));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||f!==o)&&uv(e,i,n,o),is=!1,f=e.memoizedState,i.state=f,gh(e,n,i,A);var y=e.memoizedState;a!==h||f!==y||dn.current||is?(typeof m=="function"&&(im(e,r,m,n),y=e.memoizedState),(c=is||cv(e,r,c,n,f,y,o)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),i.props=n,i.state=y,i.context=o,n=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return cm(t,e,r,n,s,A)}function cm(t,e,r,n,A,s){xE(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return A&&rv(e,r,!1),RA(t,e,s);n=e.stateNode,hk.current=e;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Aa(e,t.child,null,s),e.child=Aa(e,null,a,s)):Yr(t,e,a,s),e.memoizedState=n.state,A&&rv(e,r,!0),e.child}function CE(t){var e=t.stateNode;e.pendingContext?tv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tv(t,e.context,!1),ew(t,e.containerInfo)}function wv(t,e,r,n,A){return na(),W0(A),e.flags|=256,Yr(t,e,r,n),e.child}var um={dehydrated:null,treeContext:null,retryLane:0};function dm(t){return{baseLanes:t,cachePool:null,transitions:null}}function IE(t,e,r){var n=e.pendingProps,A=Xt.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(A&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),Nt(Xt,A&1),t===null)return Am(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=mf(i,n,0,null),t=Si(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=dm(r),e.memoizedState=um,t):aw(e,i));if(A=t.memoizedState,A!==null&&(a=A.dehydrated,a!==null))return fk(t,e,i,n,a,A,r);if(s){s=n.fallback,i=e.mode,A=t.child,a=A.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&e.child!==A?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=Ss(A,o),n.subtreeFlags=A.subtreeFlags&14680064),a!==null?s=Ss(a,s):(s=Si(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?dm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=um,n}return s=t.child,t=s.sibling,n=Ss(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function aw(t,e){return e=mf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mu(t,e,r,n){return n!==null&&W0(n),Aa(e,t.child,null,r),t=aw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fk(t,e,r,n,A,s,i){if(r)return e.flags&256?(e.flags&=-257,n=Hg(Error(le(422))),Mu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,A=e.mode,n=mf({mode:"visible",children:n.children},A,0,null),s=Si(s,A,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Aa(e,t.child,null,i),e.child.memoizedState=dm(i),e.memoizedState=um,s);if(!(e.mode&1))return Mu(t,e,i,null);if(A.data==="$!"){if(n=A.nextSibling&&A.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(le(419)),n=Hg(s,n,void 0),Mu(t,e,i,n)}if(a=(i&t.childLanes)!==0,an||a){if(n=_r,n!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(n.suspendedLanes|i)?0:A,A!==0&&A!==s.retryLane&&(s.retryLane=A,kA(t,A),zn(n,t,A,-1))}return fw(),n=Hg(Error(le(421))),Mu(t,e,i,n)}return A.data==="$?"?(e.flags|=128,e.child=t.child,e=bk.bind(null,t),A._reactRetry=e,null):(t=s.treeContext,vn=Ts(A.nextSibling),xn=e,Gt=!0,Kn=null,t!==null&&(Qn[Un++]=vA,Qn[Un++]=xA,Qn[Un++]=Li,vA=t.id,xA=t.overflow,Li=e),e=aw(e,n.children),e.flags|=4096,e)}function Bv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),sm(t.return,e,r)}function Vg(t,e,r,n,A){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:A}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=A)}function _E(t,e,r){var n=e.pendingProps,A=n.revealOrder,s=n.tail;if(Yr(t,e,n.children,r),n=Xt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bv(t,r,e);else if(t.tag===19)Bv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Nt(Xt,n),!(e.mode&1))e.memoizedState=null;else switch(A){case"forwards":for(r=e.child,A=null;r!==null;)t=r.alternate,t!==null&&ph(t)===null&&(A=r),r=r.sibling;r=A,r===null?(A=e.child,e.child=null):(A=r.sibling,r.sibling=null),Vg(e,!1,A,r,s);break;case"backwards":for(r=null,A=e.child,e.child=null;A!==null;){if(t=A.alternate,t!==null&&ph(t)===null){e.child=A;break}t=A.sibling,A.sibling=r,r=A,A=t}Vg(e,!0,r,null,s);break;case"together":Vg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ud(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function RA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Mi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,r=Ss(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ss(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function gk(t,e,r){switch(e.tag){case 3:CE(e),na();break;case 5:X_(e);break;case 1:hn(e.type)&&ch(e);break;case 4:ew(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,A=e.memoizedProps.value;Nt(hh,n._currentValue),n._currentValue=A;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Nt(Xt,Xt.current&1),e.flags|=128,null):r&e.child.childLanes?IE(t,e,r):(Nt(Xt,Xt.current&1),t=RA(t,e,r),t!==null?t.sibling:null);Nt(Xt,Xt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return _E(t,e,r);e.flags|=128}if(A=e.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Nt(Xt,Xt.current),n)break;return null;case 22:case 23:return e.lanes=0,vE(t,e,r)}return RA(t,e,r)}var EE,hm,bE,TE;EE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};hm=function(){};bE=function(t,e,r,n){var A=t.memoizedProps;if(A!==n){t=e.stateNode,Fi(iA.current);var s=null;switch(r){case"input":A=Np(t,A),n=Np(t,n),s=[];break;case"select":A=er({},A,{value:void 0}),n=er({},n,{value:void 0}),s=[];break;case"textarea":A=Lp(t,A),n=Lp(t,n),s=[];break;default:typeof A.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ah)}Mp(r,n);var i;r=null;for(c in A)if(!n.hasOwnProperty(c)&&A.hasOwnProperty(c)&&A[c]!=null)if(c==="style"){var a=A[c];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var o=n[c];if(a=A!=null?A[c]:void 0,n.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&a[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(s||(s=[]),s.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(s=s||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sc.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Lt("scroll",t),s||a===o||(s=[])):(s=s||[]).push(c,o))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};TE=function(t,e,r,n){r!==n&&(e.flags|=4)};function al(t,e){if(!Gt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Or(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var A=t.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags&14680064,n|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags,n|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function pk(t,e,r){var n=e.pendingProps;switch($0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Or(e),null;case 1:return hn(e.type)&&lh(),Or(e),null;case 3:return n=e.stateNode,sa(),Ot(dn),Ot(qr),rw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(vm(Kn),Kn=null))),hm(t,e),Or(e),null;case 5:tw(e);var A=Fi(mc.current);if(r=e.type,t!==null&&e.stateNode!=null)bE(t,e,r,n,A),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(le(166));return Or(e),null}if(t=Fi(iA.current),Lu(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[rA]=e,n[gc]=s,t=(e.mode&1)!==0,r){case"dialog":Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":case"embed":Lt("load",n);break;case"video":case"audio":for(A=0;A<Cl.length;A++)Lt(Cl[A],n);break;case"source":Lt("error",n);break;case"img":case"image":case"link":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"input":Ty(n,s),Lt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Lt("invalid",n);break;case"textarea":Qy(n,s),Lt("invalid",n)}Mp(r,s),A=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Pu(n.textContent,a,t),A=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Pu(n.textContent,a,t),A=["children",""+a]):sc.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Lt("scroll",n)}switch(r){case"input":Fu(n),Fy(n,s,!0);break;case"textarea":Fu(n),Uy(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ah)}n=A,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[rA]=e,t[gc]=n,EE(t,e,!1,!1),e.stateNode=t;e:{switch(i=Op(r,n),r){case"dialog":Lt("cancel",t),Lt("close",t),A=n;break;case"iframe":case"object":case"embed":Lt("load",t),A=n;break;case"video":case"audio":for(A=0;A<Cl.length;A++)Lt(Cl[A],t);A=n;break;case"source":Lt("error",t),A=n;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),A=n;break;case"details":Lt("toggle",t),A=n;break;case"input":Ty(t,n),A=Np(t,n),Lt("invalid",t);break;case"option":A=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},A=er({},n,{value:void 0}),Lt("invalid",t);break;case"textarea":Qy(t,n),A=Lp(t,n),Lt("invalid",t);break;default:A=n}Mp(r,A),a=A;for(s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="style"?s_(t,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&n_(t,o)):s==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&ic(t,o):typeof o=="number"&&ic(t,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sc.hasOwnProperty(s)?o!=null&&s==="onScroll"&&Lt("scroll",t):o!=null&&S0(t,s,o,i))}switch(r){case"input":Fu(t),Fy(t,n,!1);break;case"textarea":Fu(t),Uy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ms(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Vo(t,!!n.multiple,s,!1):n.defaultValue!=null&&Vo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=ah)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Or(e),null;case 6:if(t&&e.stateNode!=null)TE(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(le(166));if(r=Fi(mc.current),Fi(iA.current),Lu(e)){if(n=e.stateNode,r=e.memoizedProps,n[rA]=e,(s=n.nodeValue!==r)&&(t=xn,t!==null))switch(t.tag){case 3:Pu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pu(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[rA]=e,e.stateNode=n}return Or(e),null;case 13:if(Ot(Xt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gt&&vn!==null&&e.mode&1&&!(e.flags&128))z_(),na(),e.flags|=98560,s=!1;else if(s=Lu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[rA]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Or(e),s=!1}else Kn!==null&&(vm(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Xt.current&1?mr===0&&(mr=3):fw())),e.updateQueue!==null&&(e.flags|=4),Or(e),null);case 4:return sa(),hm(t,e),t===null&&hc(e.stateNode.containerInfo),Or(e),null;case 10:return X0(e.type._context),Or(e),null;case 17:return hn(e.type)&&lh(),Or(e),null;case 19:if(Ot(Xt),s=e.memoizedState,s===null)return Or(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)al(s,!1);else{if(mr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=ph(t),i!==null){for(e.flags|=128,al(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Nt(Xt,Xt.current&1|2),e.child}t=t.sibling}s.tail!==null&&lr()>oa&&(e.flags|=128,n=!0,al(s,!1),e.lanes=4194304)}else{if(!n)if(t=ph(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),al(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Gt)return Or(e),null}else 2*lr()-s.renderingStartTime>oa&&r!==1073741824&&(e.flags|=128,n=!0,al(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=lr(),e.sibling=null,r=Xt.current,Nt(Xt,n?r&1|2:r&1),e):(Or(e),null);case 22:case 23:return hw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?wn&1073741824&&(Or(e),e.subtreeFlags&6&&(e.flags|=8192)):Or(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function mk(t,e){switch($0(e),e.tag){case 1:return hn(e.type)&&lh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sa(),Ot(dn),Ot(qr),rw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tw(e),null;case 13:if(Ot(Xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(Xt),null;case 4:return sa(),null;case 10:return X0(e.type._context),null;case 22:case 23:return hw(),null;case 24:return null;default:return null}}var Ou=!1,zr=!1,wk=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function jo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){nr(t,e,n)}else r.current=null}function fm(t,e,r){try{r()}catch(n){nr(t,e,n)}}var yv=!1;function Bk(t,e){if(Xp=sh,t=k_(),G0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var A=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,a=-1,o=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||A!==0&&h.nodeType!==3||(a=i+A),h!==s||n!==0&&h.nodeType!==3||(o=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===A&&(a=i),f===s&&++d===n&&(o=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=a===-1||o===-1?null:{start:a,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yp={focusedElem:t,selectionRange:r},sh=!1,Qe=e;Qe!==null;)if(e=Qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Qe=t;else for(;Qe!==null;){e=Qe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var B=y.memoizedProps,E=y.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?B:Hn(e.type,B),E);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(F){nr(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}return y=yv,yv=!1,y}function Kl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var A=n=n.next;do{if((A.tag&t)===t){var s=A.destroy;A.destroy=void 0,s!==void 0&&fm(e,r,s)}A=A.next}while(A!==n)}}function gf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function gm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function FE(t){var e=t.alternate;e!==null&&(t.alternate=null,FE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rA],delete e[gc],delete e[tm],delete e[tk],delete e[rk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QE(t){return t.tag===5||t.tag===3||t.tag===4}function vv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ah));else if(n!==4&&(t=t.child,t!==null))for(pm(t,e,r),t=t.sibling;t!==null;)pm(t,e,r),t=t.sibling}function mm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(mm(t,e,r),t=t.sibling;t!==null;)mm(t,e,r),t=t.sibling}var Qr=null,Vn=!1;function ZA(t,e,r){for(r=r.child;r!==null;)UE(t,e,r),r=r.sibling}function UE(t,e,r){if(sA&&typeof sA.onCommitFiberUnmount=="function")try{sA.onCommitFiberUnmount(of,r)}catch{}switch(r.tag){case 5:zr||jo(r,e);case 6:var n=Qr,A=Vn;Qr=null,ZA(t,e,r),Qr=n,Vn=A,Qr!==null&&(Vn?(t=Qr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Qr.removeChild(r.stateNode));break;case 18:Qr!==null&&(Vn?(t=Qr,r=r.stateNode,t.nodeType===8?Dg(t.parentNode,r):t.nodeType===1&&Dg(t,r),cc(t)):Dg(Qr,r.stateNode));break;case 4:n=Qr,A=Vn,Qr=r.stateNode.containerInfo,Vn=!0,ZA(t,e,r),Qr=n,Vn=A;break;case 0:case 11:case 14:case 15:if(!zr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){A=n=n.next;do{var s=A,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&fm(r,e,i),A=A.next}while(A!==n)}ZA(t,e,r);break;case 1:if(!zr&&(jo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){nr(r,e,a)}ZA(t,e,r);break;case 21:ZA(t,e,r);break;case 22:r.mode&1?(zr=(n=zr)||r.memoizedState!==null,ZA(t,e,r),zr=n):ZA(t,e,r);break;default:ZA(t,e,r)}}function xv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new wk),e.forEach(function(n){var A=Tk.bind(null,t,n);r.has(n)||(r.add(n),n.then(A,A))})}}function Mn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var A=r[n];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Qr=a.stateNode,Vn=!1;break e;case 3:Qr=a.stateNode.containerInfo,Vn=!0;break e;case 4:Qr=a.stateNode.containerInfo,Vn=!0;break e}a=a.return}if(Qr===null)throw Error(le(160));UE(s,i,A),Qr=null,Vn=!1;var o=A.alternate;o!==null&&(o.return=null),A.return=null}catch(c){nr(A,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SE(e,t),e=e.sibling}function SE(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mn(e,t),Yn(t),n&4){try{Kl(3,t,t.return),gf(3,t)}catch(B){nr(t,t.return,B)}try{Kl(5,t,t.return)}catch(B){nr(t,t.return,B)}}break;case 1:Mn(e,t),Yn(t),n&512&&r!==null&&jo(r,r.return);break;case 5:if(Mn(e,t),Yn(t),n&512&&r!==null&&jo(r,r.return),t.flags&32){var A=t.stateNode;try{ic(A,"")}catch(B){nr(t,t.return,B)}}if(n&4&&(A=t.stateNode,A!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&e_(A,s),Op(a,i);var c=Op(a,s);for(i=0;i<o.length;i+=2){var d=o[i],h=o[i+1];d==="style"?s_(A,h):d==="dangerouslySetInnerHTML"?n_(A,h):d==="children"?ic(A,h):S0(A,d,h,c)}switch(a){case"input":Dp(A,s);break;case"textarea":t_(A,s);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Vo(A,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Vo(A,!!s.multiple,s.defaultValue,!0):Vo(A,!!s.multiple,s.multiple?[]:"",!1))}A[gc]=s}catch(B){nr(t,t.return,B)}}break;case 6:if(Mn(e,t),Yn(t),n&4){if(t.stateNode===null)throw Error(le(162));A=t.stateNode,s=t.memoizedProps;try{A.nodeValue=s}catch(B){nr(t,t.return,B)}}break;case 3:if(Mn(e,t),Yn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{cc(e.containerInfo)}catch(B){nr(t,t.return,B)}break;case 4:Mn(e,t),Yn(t);break;case 13:Mn(e,t),Yn(t),A=t.child,A.flags&8192&&(s=A.memoizedState!==null,A.stateNode.isHidden=s,!s||A.alternate!==null&&A.alternate.memoizedState!==null||(uw=lr())),n&4&&xv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(zr=(c=zr)||d,Mn(e,t),zr=c):Mn(e,t),Yn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Qe=t,d=t.child;d!==null;){for(h=Qe=d;Qe!==null;){switch(f=Qe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Kl(4,f,f.return);break;case 1:jo(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(B){nr(n,r,B)}}break;case 5:jo(f,f.return);break;case 22:if(f.memoizedState!==null){Iv(h);continue}}m!==null?(m.return=f,Qe=m):Iv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{A=h.stateNode,c?(s=A.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=A_("display",i))}catch(B){nr(t,t.return,B)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(B){nr(t,t.return,B)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mn(e,t),Yn(t),n&4&&xv(t);break;case 21:break;default:Mn(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(QE(r)){var n=r;break e}r=r.return}throw Error(le(160))}switch(n.tag){case 5:var A=n.stateNode;n.flags&32&&(ic(A,""),n.flags&=-33);var s=vv(t);mm(t,s,A);break;case 3:case 4:var i=n.stateNode.containerInfo,a=vv(t);pm(t,a,i);break;default:throw Error(le(161))}}catch(o){nr(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yk(t,e,r){Qe=t,kE(t)}function kE(t,e,r){for(var n=(t.mode&1)!==0;Qe!==null;){var A=Qe,s=A.child;if(A.tag===22&&n){var i=A.memoizedState!==null||Ou;if(!i){var a=A.alternate,o=a!==null&&a.memoizedState!==null||zr;a=Ou;var c=zr;if(Ou=i,(zr=o)&&!c)for(Qe=A;Qe!==null;)i=Qe,o=i.child,i.tag===22&&i.memoizedState!==null?_v(A):o!==null?(o.return=i,Qe=o):_v(A);for(;s!==null;)Qe=s,kE(s),s=s.sibling;Qe=A,Ou=a,zr=c}Cv(t)}else A.subtreeFlags&8772&&s!==null?(s.return=A,Qe=s):Cv(t)}}function Cv(t){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||gf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!zr)if(r===null)n.componentDidMount();else{var A=e.elementType===e.type?r.memoizedProps:Hn(e.type,r.memoizedProps);n.componentDidUpdate(A,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ov(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ov(e,i,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&cc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}zr||e.flags&512&&gm(e)}catch(f){nr(e,e.return,f)}}if(e===t){Qe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Qe=r;break}Qe=e.return}}function Iv(t){for(;Qe!==null;){var e=Qe;if(e===t){Qe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Qe=r;break}Qe=e.return}}function _v(t){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{gf(4,e)}catch(o){nr(e,r,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var A=e.return;try{n.componentDidMount()}catch(o){nr(e,A,o)}}var s=e.return;try{gm(e)}catch(o){nr(e,s,o)}break;case 5:var i=e.return;try{gm(e)}catch(o){nr(e,i,o)}}}catch(o){nr(e,e.return,o)}if(e===t){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var vk=Math.ceil,Bh=MA.ReactCurrentDispatcher,lw=MA.ReactCurrentOwner,Dn=MA.ReactCurrentBatchConfig,ft=0,_r=null,fr=null,Nr=0,wn=0,Mo=ei(0),mr=0,vc=null,Mi=0,pf=0,cw=0,Gl=null,sn=null,uw=0,oa=1/0,wA=null,yh=!1,wm=null,Qs=null,Hu=!1,ws=null,vh=0,zl=0,Bm=null,Sd=-1,kd=0;function en(){return ft&6?lr():Sd!==-1?Sd:Sd=lr()}function Us(t){return t.mode&1?ft&2&&Nr!==0?Nr&-Nr:Ak.transition!==null?(kd===0&&(kd=m_()),kd):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:I_(t.type)),t):1}function zn(t,e,r,n){if(50<zl)throw zl=0,Bm=null,Error(le(185));Hc(t,r,n),(!(ft&2)||t!==_r)&&(t===_r&&(!(ft&2)&&(pf|=r),mr===4&&ls(t,Nr)),fn(t,n),r===1&&ft===0&&!(e.mode&1)&&(oa=lr()+500,df&&ti()))}function fn(t,e){var r=t.callbackNode;AS(t,e);var n=Ah(t,t===_r?Nr:0);if(n===0)r!==null&&Ry(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ry(r),e===1)t.tag===0?nk(Ev.bind(null,t)):V_(Ev.bind(null,t)),ZS(function(){!(ft&6)&&ti()}),r=null;else{switch(w_(n)){case 1:r=P0;break;case 4:r=g_;break;case 16:r=nh;break;case 536870912:r=p_;break;default:r=nh}r=OE(r,RE.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function RE(t,e){if(Sd=-1,kd=0,ft&6)throw Error(le(327));var r=t.callbackNode;if(Wo()&&t.callbackNode!==r)return null;var n=Ah(t,t===_r?Nr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=xh(t,n);else{e=n;var A=ft;ft|=2;var s=DE();(_r!==t||Nr!==e)&&(wA=null,oa=lr()+500,Ui(t,e));do try{Ik();break}catch(a){NE(t,a)}while(!0);J0(),Bh.current=s,ft=A,fr!==null?e=0:(_r=null,Nr=0,e=mr)}if(e!==0){if(e===2&&(A=zp(t),A!==0&&(n=A,e=ym(t,A))),e===1)throw r=vc,Ui(t,0),ls(t,n),fn(t,lr()),r;if(e===6)ls(t,n);else{if(A=t.current.alternate,!(n&30)&&!xk(A)&&(e=xh(t,n),e===2&&(s=zp(t),s!==0&&(n=s,e=ym(t,s))),e===1))throw r=vc,Ui(t,0),ls(t,n),fn(t,lr()),r;switch(t.finishedWork=A,t.finishedLanes=n,e){case 0:case 1:throw Error(le(345));case 2:Bi(t,sn,wA);break;case 3:if(ls(t,n),(n&130023424)===n&&(e=uw+500-lr(),10<e)){if(Ah(t,0)!==0)break;if(A=t.suspendedLanes,(A&n)!==n){en(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=em(Bi.bind(null,t,sn,wA),e);break}Bi(t,sn,wA);break;case 4:if(ls(t,n),(n&4194240)===n)break;for(e=t.eventTimes,A=-1;0<n;){var i=31-Gn(n);s=1<<i,i=e[i],i>A&&(A=i),n&=~s}if(n=A,n=lr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vk(n/1960))-n,10<n){t.timeoutHandle=em(Bi.bind(null,t,sn,wA),n);break}Bi(t,sn,wA);break;case 5:Bi(t,sn,wA);break;default:throw Error(le(329))}}}return fn(t,lr()),t.callbackNode===r?RE.bind(null,t):null}function ym(t,e){var r=Gl;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=xh(t,e),t!==2&&(e=sn,sn=r,e!==null&&vm(e)),t}function vm(t){sn===null?sn=t:sn.push.apply(sn,t)}function xk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var A=r[n],s=A.getSnapshot;A=A.value;try{if(!Wn(s(),A))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~cw,e&=~pf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Gn(e),n=1<<r;t[r]=-1,e&=~n}}function Ev(t){if(ft&6)throw Error(le(327));Wo();var e=Ah(t,0);if(!(e&1))return fn(t,lr()),null;var r=xh(t,e);if(t.tag!==0&&r===2){var n=zp(t);n!==0&&(e=n,r=ym(t,n))}if(r===1)throw r=vc,Ui(t,0),ls(t,e),fn(t,lr()),r;if(r===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bi(t,sn,wA),fn(t,lr()),null}function dw(t,e){var r=ft;ft|=1;try{return t(e)}finally{ft=r,ft===0&&(oa=lr()+500,df&&ti())}}function Oi(t){ws!==null&&ws.tag===0&&!(ft&6)&&Wo();var e=ft;ft|=1;var r=Dn.transition,n=Ct;try{if(Dn.transition=null,Ct=1,t)return t()}finally{Ct=n,Dn.transition=r,ft=e,!(ft&6)&&ti()}}function hw(){wn=Mo.current,Ot(Mo)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,YS(r)),fr!==null)for(r=fr.return;r!==null;){var n=r;switch($0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&lh();break;case 3:sa(),Ot(dn),Ot(qr),rw();break;case 5:tw(n);break;case 4:sa();break;case 13:Ot(Xt);break;case 19:Ot(Xt);break;case 10:X0(n.type._context);break;case 22:case 23:hw()}r=r.return}if(_r=t,fr=t=Ss(t.current,null),Nr=wn=e,mr=0,vc=null,cw=pf=Mi=0,sn=Gl=null,Ti!==null){for(e=0;e<Ti.length;e++)if(r=Ti[e],n=r.interleaved,n!==null){r.interleaved=null;var A=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=A,n.next=i}r.pending=n}Ti=null}return t}function NE(t,e){do{var r=fr;try{if(J0(),Fd.current=wh,mh){for(var n=Yt.memoizedState;n!==null;){var A=n.queue;A!==null&&(A.pending=null),n=n.next}mh=!1}if(ji=0,Cr=gr=Yt=null,Vl=!1,wc=0,lw.current=null,r===null||r.return===null){mr=1,vc=e,fr=null;break}e:{var s=t,i=r.return,a=r,o=e;if(e=Nr,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=hv(i);if(m!==null){m.flags&=-257,fv(m,i,a,s,e),m.mode&1&&dv(s,c,e),e=m,o=c;var y=e.updateQueue;if(y===null){var B=new Set;B.add(o),e.updateQueue=B}else y.add(o);break e}else{if(!(e&1)){dv(s,c,e),fw();break e}o=Error(le(426))}}else if(Gt&&a.mode&1){var E=hv(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),fv(E,i,a,s,e),W0(ia(o,a));break e}}s=o=ia(o,a),mr!==4&&(mr=2),Gl===null?Gl=[s]:Gl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=wE(s,o,e);iv(s,x);break e;case 1:a=o;var w=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Qs===null||!Qs.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var F=BE(s,a,e);iv(s,F);break e}}s=s.return}while(s!==null)}LE(r)}catch(R){e=R,fr===r&&r!==null&&(fr=r=r.return);continue}break}while(!0)}function DE(){var t=Bh.current;return Bh.current=wh,t===null?wh:t}function fw(){(mr===0||mr===3||mr===2)&&(mr=4),_r===null||!(Mi&268435455)&&!(pf&268435455)||ls(_r,Nr)}function xh(t,e){var r=ft;ft|=2;var n=DE();(_r!==t||Nr!==e)&&(wA=null,Ui(t,e));do try{Ck();break}catch(A){NE(t,A)}while(!0);if(J0(),ft=r,Bh.current=n,fr!==null)throw Error(le(261));return _r=null,Nr=0,mr}function Ck(){for(;fr!==null;)PE(fr)}function Ik(){for(;fr!==null&&!qU();)PE(fr)}function PE(t){var e=ME(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?LE(t):fr=e,lw.current=null}function LE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=mk(r,e),r!==null){r.flags&=32767,fr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mr=6,fr=null;return}}else if(r=pk(r,e,wn),r!==null){fr=r;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);mr===0&&(mr=5)}function Bi(t,e,r){var n=Ct,A=Dn.transition;try{Dn.transition=null,Ct=1,_k(t,e,r,n)}finally{Dn.transition=A,Ct=n}return null}function _k(t,e,r,n){do Wo();while(ws!==null);if(ft&6)throw Error(le(327));r=t.finishedWork;var A=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(sS(t,s),t===_r&&(fr=_r=null,Nr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hu||(Hu=!0,OE(nh,function(){return Wo(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Dn.transition,Dn.transition=null;var i=Ct;Ct=1;var a=ft;ft|=4,lw.current=null,Bk(t,r),SE(r,t),GS(Yp),sh=!!Xp,Yp=Xp=null,t.current=r,yk(r),JU(),ft=a,Ct=i,Dn.transition=s}else t.current=r;if(Hu&&(Hu=!1,ws=t,vh=A),s=t.pendingLanes,s===0&&(Qs=null),ZU(r.stateNode),fn(t,lr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)A=e[r],n(A.value,{componentStack:A.stack,digest:A.digest});if(yh)throw yh=!1,t=wm,wm=null,t;return vh&1&&t.tag!==0&&Wo(),s=t.pendingLanes,s&1?t===Bm?zl++:(zl=0,Bm=t):zl=0,ti(),null}function Wo(){if(ws!==null){var t=w_(vh),e=Dn.transition,r=Ct;try{if(Dn.transition=null,Ct=16>t?16:t,ws===null)var n=!1;else{if(t=ws,ws=null,vh=0,ft&6)throw Error(le(331));var A=ft;for(ft|=4,Qe=t.current;Qe!==null;){var s=Qe,i=s.child;if(Qe.flags&16){var a=s.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(Qe=c;Qe!==null;){var d=Qe;switch(d.tag){case 0:case 11:case 15:Kl(8,d,s)}var h=d.child;if(h!==null)h.return=d,Qe=h;else for(;Qe!==null;){d=Qe;var f=d.sibling,m=d.return;if(FE(d),d===c){Qe=null;break}if(f!==null){f.return=m,Qe=f;break}Qe=m}}}var y=s.alternate;if(y!==null){var B=y.child;if(B!==null){y.child=null;do{var E=B.sibling;B.sibling=null,B=E}while(B!==null)}}Qe=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Qe=i;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Kl(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Qe=x;break e}Qe=s.return}}var w=t.current;for(Qe=w;Qe!==null;){i=Qe;var I=i.child;if(i.subtreeFlags&2064&&I!==null)I.return=i,Qe=I;else e:for(i=w;Qe!==null;){if(a=Qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gf(9,a)}}catch(R){nr(a,a.return,R)}if(a===i){Qe=null;break e}var F=a.sibling;if(F!==null){F.return=a.return,Qe=F;break e}Qe=a.return}}if(ft=A,ti(),sA&&typeof sA.onPostCommitFiberRoot=="function")try{sA.onPostCommitFiberRoot(of,t)}catch{}n=!0}return n}finally{Ct=r,Dn.transition=e}}return!1}function bv(t,e,r){e=ia(r,e),e=wE(t,e,1),t=Fs(t,e,1),e=en(),t!==null&&(Hc(t,1,e),fn(t,e))}function nr(t,e,r){if(t.tag===3)bv(t,t,r);else for(;e!==null;){if(e.tag===3){bv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qs===null||!Qs.has(n))){t=ia(r,t),t=BE(e,t,1),e=Fs(e,t,1),t=en(),e!==null&&(Hc(e,1,t),fn(e,t));break}}e=e.return}}function Ek(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&r,_r===t&&(Nr&r)===r&&(mr===4||mr===3&&(Nr&130023424)===Nr&&500>lr()-uw?Ui(t,0):cw|=r),fn(t,e)}function jE(t,e){e===0&&(t.mode&1?(e=Su,Su<<=1,!(Su&130023424)&&(Su=4194304)):e=1);var r=en();t=kA(t,e),t!==null&&(Hc(t,e,r),fn(t,r))}function bk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),jE(t,r)}function Tk(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,A=t.memoizedState;A!==null&&(r=A.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(e),jE(t,r)}var ME;ME=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)an=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return an=!1,gk(t,e,r);an=!!(t.flags&131072)}else an=!1,Gt&&e.flags&1048576&&K_(e,dh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ud(t,e),t=e.pendingProps;var A=ra(e,qr.current);$o(e,r),A=Aw(null,e,n,t,A,r);var s=sw();return e.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(n)?(s=!0,ch(e)):s=!1,e.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Z0(e),A.updater=ff,e.stateNode=A,A._reactInternals=e,om(e,n,t,r),e=cm(null,e,n,!0,s,r)):(e.tag=0,Gt&&s&&z0(e),Yr(null,e,A,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ud(t,e),t=e.pendingProps,A=n._init,n=A(n._payload),e.type=n,A=e.tag=Qk(n),t=Hn(n,t),A){case 0:e=lm(null,e,n,t,r);break e;case 1:e=mv(null,e,n,t,r);break e;case 11:e=gv(null,e,n,t,r);break e;case 14:e=pv(null,e,n,Hn(n.type,t),r);break e}throw Error(le(306,n,""))}return e;case 0:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Hn(n,A),lm(t,e,n,A,r);case 1:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Hn(n,A),mv(t,e,n,A,r);case 3:e:{if(CE(e),t===null)throw Error(le(387));n=e.pendingProps,s=e.memoizedState,A=s.element,J_(t,e),gh(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){A=ia(Error(le(423)),e),e=wv(t,e,n,r,A);break e}else if(n!==A){A=ia(Error(le(424)),e),e=wv(t,e,n,r,A);break e}else for(vn=Ts(e.stateNode.containerInfo.firstChild),xn=e,Gt=!0,Kn=null,r=W_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(na(),n===A){e=RA(t,e,r);break e}Yr(t,e,n,r)}e=e.child}return e;case 5:return X_(e),t===null&&Am(e),n=e.type,A=e.pendingProps,s=t!==null?t.memoizedProps:null,i=A.children,Zp(n,A)?i=null:s!==null&&Zp(n,s)&&(e.flags|=32),xE(t,e),Yr(t,e,i,r),e.child;case 6:return t===null&&Am(e),null;case 13:return IE(t,e,r);case 4:return ew(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Aa(e,null,n,r):Yr(t,e,n,r),e.child;case 11:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Hn(n,A),gv(t,e,n,A,r);case 7:return Yr(t,e,e.pendingProps,r),e.child;case 8:return Yr(t,e,e.pendingProps.children,r),e.child;case 12:return Yr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,A=e.pendingProps,s=e.memoizedProps,i=A.value,Nt(hh,n._currentValue),n._currentValue=i,s!==null)if(Wn(s.value,i)){if(s.children===A.children&&!dn.current){e=RA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var o=a.firstContext;o!==null;){if(o.context===n){if(s.tag===1){o=TA(-1,r&-r),o.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o}}s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),sm(s.return,r,e),a.lanes|=r;break}o=o.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(le(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),sm(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Yr(t,e,A.children,r),e=e.child}return e;case 9:return A=e.type,n=e.pendingProps.children,$o(e,r),A=Pn(A),n=n(A),e.flags|=1,Yr(t,e,n,r),e.child;case 14:return n=e.type,A=Hn(n,e.pendingProps),A=Hn(n.type,A),pv(t,e,n,A,r);case 15:return yE(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Hn(n,A),Ud(t,e),e.tag=1,hn(n)?(t=!0,ch(e)):t=!1,$o(e,r),mE(e,n,A),om(e,n,A,r),cm(null,e,n,!0,t,r);case 19:return _E(t,e,r);case 22:return vE(t,e,r)}throw Error(le(156,e.tag))};function OE(t,e){return f_(t,e)}function Fk(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,e,r,n){return new Fk(t,e,r,n)}function gw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qk(t){if(typeof t=="function")return gw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R0)return 11;if(t===N0)return 14}return 2}function Ss(t,e){var r=t.alternate;return r===null?(r=kn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Rd(t,e,r,n,A,s){var i=2;if(n=t,typeof t=="function")gw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Qo:return Si(r.children,A,s,e);case k0:i=8,A|=8;break;case Up:return t=kn(12,r,e,A|2),t.elementType=Up,t.lanes=s,t;case Sp:return t=kn(13,r,e,A),t.elementType=Sp,t.lanes=s,t;case kp:return t=kn(19,r,e,A),t.elementType=kp,t.lanes=s,t;case XI:return mf(r,A,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qI:i=10;break e;case JI:i=9;break e;case R0:i=11;break e;case N0:i=14;break e;case ss:i=16,n=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=kn(i,r,e,A),e.elementType=t,e.type=n,e.lanes=s,e}function Si(t,e,r,n){return t=kn(7,t,n,e),t.lanes=r,t}function mf(t,e,r,n){return t=kn(22,t,n,e),t.elementType=XI,t.lanes=r,t.stateNode={isHidden:!1},t}function Kg(t,e,r){return t=kn(6,t,null,e),t.lanes=r,t}function Gg(t,e,r){return e=kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uk(t,e,r,n,A){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_g(0),this.expirationTimes=_g(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_g(0),this.identifierPrefix=n,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function pw(t,e,r,n,A,s,i,a,o){return t=new Uk(t,e,r,a,o),e===1?(e=1,s===!0&&(e|=8)):e=0,s=kn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z0(s),t}function Sk(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function HE(t){if(!t)return Os;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var r=t.type;if(hn(r))return H_(t,r,e)}return e}function VE(t,e,r,n,A,s,i,a,o){return t=pw(r,n,!0,t,A,s,i,a,o),t.context=HE(null),r=t.current,n=en(),A=Us(r),s=TA(n,A),s.callback=e??null,Fs(r,s,A),t.current.lanes=A,Hc(t,A,n),fn(t,n),t}function wf(t,e,r,n){var A=e.current,s=en(),i=Us(A);return r=HE(r),e.context===null?e.context=r:e.pendingContext=r,e=TA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Fs(A,e,i),t!==null&&(zn(t,A,i,s),Td(t,A,i)),i}function Ch(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function mw(t,e){Tv(t,e),(t=t.alternate)&&Tv(t,e)}function kk(){return null}var KE=typeof reportError=="function"?reportError:function(t){console.error(t)};function ww(t){this._internalRoot=t}Bf.prototype.render=ww.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));wf(t,e,null,null)};Bf.prototype.unmount=ww.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oi(function(){wf(null,t,null,null)}),e[SA]=null}};function Bf(t){this._internalRoot=t}Bf.prototype.unstable_scheduleHydration=function(t){if(t){var e=v_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<as.length&&e!==0&&e<as[r].priority;r++);as.splice(r,0,t),r===0&&C_(t)}};function Bw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fv(){}function Rk(t,e,r,n,A){if(A){if(typeof n=="function"){var s=n;n=function(){var c=Ch(i);s.call(c)}}var i=VE(e,n,t,0,null,!1,!1,"",Fv);return t._reactRootContainer=i,t[SA]=i.current,hc(t.nodeType===8?t.parentNode:t),Oi(),i}for(;A=t.lastChild;)t.removeChild(A);if(typeof n=="function"){var a=n;n=function(){var c=Ch(o);a.call(c)}}var o=pw(t,0,!1,null,null,!1,!1,"",Fv);return t._reactRootContainer=o,t[SA]=o.current,hc(t.nodeType===8?t.parentNode:t),Oi(function(){wf(e,o,r,n)}),o}function vf(t,e,r,n,A){var s=r._reactRootContainer;if(s){var i=s;if(typeof A=="function"){var a=A;A=function(){var o=Ch(i);a.call(o)}}wf(e,i,t,A)}else i=Rk(r,e,t,A,n);return Ch(i)}B_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xl(e.pendingLanes);r!==0&&(L0(e,r|1),fn(e,lr()),!(ft&6)&&(oa=lr()+500,ti()))}break;case 13:Oi(function(){var n=kA(t,1);if(n!==null){var A=en();zn(n,t,1,A)}}),mw(t,1)}};j0=function(t){if(t.tag===13){var e=kA(t,134217728);if(e!==null){var r=en();zn(e,t,134217728,r)}mw(t,134217728)}};y_=function(t){if(t.tag===13){var e=Us(t),r=kA(t,e);if(r!==null){var n=en();zn(r,t,e,n)}mw(t,e)}};v_=function(){return Ct};x_=function(t,e){var r=Ct;try{return Ct=t,e()}finally{Ct=r}};Vp=function(t,e,r){switch(e){case"input":if(Dp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var A=uf(n);if(!A)throw Error(le(90));ZI(n),Dp(n,A)}}}break;case"textarea":t_(t,r);break;case"select":e=r.value,e!=null&&Vo(t,!!r.multiple,e,!1)}};a_=dw;l_=Oi;var Nk={usingClientEntryPoint:!1,Events:[Kc,Ro,uf,i_,o_,dw]},ll={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dk={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:MA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d_(t),t===null?null:t.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{of=Vu.inject(Dk),sA=Vu}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nk;En.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bw(e))throw Error(le(200));return Sk(t,e,null,r)};En.createRoot=function(t,e){if(!Bw(t))throw Error(le(299));var r=!1,n="",A=KE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=pw(t,1,!1,null,null,r,!1,n,A),t[SA]=e.current,hc(t.nodeType===8?t.parentNode:t),new ww(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=d_(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return Oi(t)};En.hydrate=function(t,e,r){if(!yf(e))throw Error(le(200));return vf(null,t,e,!0,r)};En.hydrateRoot=function(t,e,r){if(!Bw(t))throw Error(le(405));var n=r!=null&&r.hydratedSources||null,A=!1,s="",i=KE;if(r!=null&&(r.unstable_strictMode===!0&&(A=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=VE(e,null,t,1,r??null,A,!1,s,i),t[SA]=e.current,hc(t),n)for(t=0;t<n.length;t++)r=n[t],A=r._getVersion,A=A(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,A]:e.mutableSourceEagerHydrationData.push(r,A);return new Bf(e)};En.render=function(t,e,r){if(!yf(e))throw Error(le(200));return vf(null,t,e,!1,r)};En.unmountComponentAtNode=function(t){if(!yf(t))throw Error(le(40));return t._reactRootContainer?(Oi(function(){vf(null,null,t,!1,function(){t._reactRootContainer=null,t[SA]=null})}),!0):!1};En.unstable_batchedUpdates=dw;En.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!yf(r))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return vf(t,e,r,!1,n)};En.version="18.3.1-next-f1338f8080-20240426";function GE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GE)}catch(t){console.error(t)}}GE(),GI.exports=En;var Pk=GI.exports,Qv=Pk;Fp.createRoot=Qv.createRoot,Fp.hydrateRoot=Qv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xc.apply(this,arguments)}var Bs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Bs||(Bs={}));const Uv="popstate";function Lk(t){t===void 0&&(t={});function e(A,s){let{pathname:i="/",search:a="",hash:o=""}=ro(A.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),xm("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(A,s){let i=A.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let o=A.location.href,c=o.indexOf("#");a=c===-1?o:o.slice(0,c)}return a+"#"+(typeof s=="string"?s:Ih(s))}function n(A,s){xf(A.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Mk(e,r,n,t)}function Zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jk(){return Math.random().toString(36).substr(2,8)}function Sv(t,e){return{usr:t.state,key:t.key,idx:e}}function xm(t,e,r,n){return r===void 0&&(r=null),xc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:r,key:e&&e.key||n||jk()})}function Ih(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ro(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Mk(t,e,r,n){n===void 0&&(n={});let{window:A=document.defaultView,v5Compat:s=!1}=n,i=A.history,a=Bs.Pop,o=null,c=d();c==null&&(c=0,i.replaceState(xc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){a=Bs.Pop;let E=d(),x=E==null?null:E-c;c=E,o&&o({action:a,location:B.location,delta:x})}function f(E,x){a=Bs.Push;let w=xm(B.location,E,x);r&&r(w,E),c=d()+1;let I=Sv(w,c),F=B.createHref(w);try{i.pushState(I,"",F)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;A.location.assign(F)}s&&o&&o({action:a,location:B.location,delta:1})}function m(E,x){a=Bs.Replace;let w=xm(B.location,E,x);r&&r(w,E),c=d();let I=Sv(w,c),F=B.createHref(w);i.replaceState(I,"",F),s&&o&&o({action:a,location:B.location,delta:0})}function y(E){let x=A.location.origin!=="null"?A.location.origin:A.location.href,w=typeof E=="string"?E:Ih(E);return w=w.replace(/ $/,"%20"),Zt(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let B={get action(){return a},get location(){return t(A,i)},listen(E){if(o)throw new Error("A history only accepts one active listener");return A.addEventListener(Uv,h),o=E,()=>{A.removeEventListener(Uv,h),o=null}},createHref(E){return e(A,E)},createURL:y,encodeLocation(E){let x=y(E);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(E){return i.go(E)}};return B}var kv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(kv||(kv={}));function Ok(t,e,r){return r===void 0&&(r="/"),Hk(t,e,r)}function Hk(t,e,r,n){let A=typeof e=="string"?ro(e):e,s=aa(A.pathname||"/",r);if(s==null)return null;let i=zE(t);Vk(i);let a=null;for(let o=0;a==null&&o<i.length;++o){let c=e2(s);a=Yk(i[o],c)}return a}function zE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let A=(s,i,a)=>{let o={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};o.relativePath.startsWith("/")&&(Zt(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=ks([n,o.relativePath]),d=r.concat(o);s.children&&s.children.length>0&&(Zt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),zE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Jk(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))A(s,i);else for(let o of $E(s.path))A(s,i,o)}),e}function $E(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,A=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return A?[s,""]:[s];let i=$E(n.join("/")),a=[];return a.push(...i.map(o=>o===""?s:[s,o].join("/"))),A&&a.push(...i),a.map(o=>t.startsWith("/")&&o===""?"/":o)}function Vk(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Xk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Kk=/^:[\w-]+$/,Gk=3,zk=2,$k=1,Wk=10,qk=-2,Rv=t=>t==="*";function Jk(t,e){let r=t.split("/"),n=r.length;return r.some(Rv)&&(n+=qk),e&&(n+=zk),r.filter(A=>!Rv(A)).reduce((A,s)=>A+(Kk.test(s)?Gk:s===""?$k:Wk),n)}function Xk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,A)=>n===e[A])?t[t.length-1]-e[e.length-1]:0}function Yk(t,e,r){let{routesMeta:n}=t,A={},s="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Cm({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d),f=o.route;if(!h)return null;Object.assign(A,h.params),i.push({params:A,pathname:ks([s,h.pathname]),pathnameBase:s2(ks([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=ks([s,h.pathnameBase]))}return i}function Cm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Zk(t.path,t.caseSensitive,t.end),A=e.match(r);if(!A)return null;let s=A[0],i=s.replace(/(.)\/+$/,"$1"),a=A.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let B=a[h]||"";i=s.slice(0,s.length-B.length).replace(/(.)\/+$/,"$1")}const y=a[h];return m&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function Zk(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),xf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],A="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(n.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),A+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?A+="\\/*$":t!==""&&t!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,e?void 0:"i"),n]}function e2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function aa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const t2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r2=t=>t2.test(t);function n2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:A=""}=typeof t=="string"?ro(t):t,s;if(r)if(r2(r))s=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),xf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?s=Nv(r.substring(1),"/"):s=Nv(r,e)}else s=e;return{pathname:s,search:i2(n),hash:o2(A)}}function Nv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(A=>{A===".."?r.length>1&&r.pop():A!=="."&&r.push(A)}),r.length>1?r.join("/"):"/"}function zg(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function A2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function yw(t,e){let r=A2(t);return e?r.map((n,A)=>A===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function vw(t,e,r,n){n===void 0&&(n=!1);let A;typeof t=="string"?A=ro(t):(A=xc({},t),Zt(!A.pathname||!A.pathname.includes("?"),zg("?","pathname","search",A)),Zt(!A.pathname||!A.pathname.includes("#"),zg("#","pathname","hash",A)),Zt(!A.search||!A.search.includes("#"),zg("#","search","hash",A)));let s=t===""||A.pathname==="",i=s?"/":A.pathname,a;if(i==null)a=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;A.pathname=f.join("/")}a=h>=0?e[h]:"/"}let o=n2(A,a),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||d)&&(o.pathname+="/"),o}const ks=t=>t.join("/").replace(/\/\/+/g,"/"),s2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),i2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,o2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function a2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WE=["post","put","patch","delete"];new Set(WE);const l2=["get",...WE];new Set(l2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cc(){return Cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cc.apply(this,arguments)}const Cf=k.createContext(null),qE=k.createContext(null),OA=k.createContext(null),If=k.createContext(null),HA=k.createContext({outlet:null,matches:[],isDataRoute:!1}),JE=k.createContext(null);function c2(t,e){let{relative:r}=e===void 0?{}:e;Qa()||Zt(!1);let{basename:n,navigator:A}=k.useContext(OA),{hash:s,pathname:i,search:a}=_f(t,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:ks([n,i])),A.createHref({pathname:o,search:a,hash:s})}function Qa(){return k.useContext(If)!=null}function ri(){return Qa()||Zt(!1),k.useContext(If).location}function XE(t){k.useContext(OA).static||k.useLayoutEffect(t)}function zc(){let{isDataRoute:t}=k.useContext(HA);return t?_2():u2()}function u2(){Qa()||Zt(!1);let t=k.useContext(Cf),{basename:e,future:r,navigator:n}=k.useContext(OA),{matches:A}=k.useContext(HA),{pathname:s}=ri(),i=JSON.stringify(yw(A,r.v7_relativeSplatPath)),a=k.useRef(!1);return XE(()=>{a.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=vw(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ks([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}const d2=k.createContext(null);function h2(t){let e=k.useContext(HA).outlet;return e&&k.createElement(d2.Provider,{value:t},e)}function _f(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext(OA),{matches:A}=k.useContext(HA),{pathname:s}=ri(),i=JSON.stringify(yw(A,n.v7_relativeSplatPath));return k.useMemo(()=>vw(t,JSON.parse(i),s,r==="path"),[t,i,s,r])}function f2(t,e){return g2(t,e)}function g2(t,e,r,n){Qa()||Zt(!1);let{navigator:A}=k.useContext(OA),{matches:s}=k.useContext(HA),i=s[s.length-1],a=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c=ri(),d;if(e){var h;let E=typeof e=="string"?ro(e):e;o==="/"||(h=E.pathname)!=null&&h.startsWith(o)||Zt(!1),d=E}else d=c;let f=d.pathname||"/",m=f;if(o!=="/"){let E=o.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=Ok(t,{pathname:m}),B=y2(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:ks([o,A.encodeLocation?A.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?o:ks([o,A.encodeLocation?A.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,r,n);return e&&B?k.createElement(If.Provider,{value:{location:Cc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Bs.Pop}},B):B}function p2(){let t=I2(),e=a2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:A},r):null,null)}const m2=k.createElement(p2,null);class w2 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement(HA.Provider,{value:this.props.routeContext},k.createElement(JE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B2(t){let{routeContext:e,match:r,children:n}=t,A=k.useContext(Cf);return A&&A.static&&A.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(HA.Provider,{value:e},n)}function y2(t,e,r,n){var A;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=(A=r)==null?void 0:A.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Zt(!1),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,y=!1,B=null,E=null;r&&(m=a&&h.route.id?a[h.route.id]:void 0,B=h.route.errorElement||m2,o&&(c<0&&f===0?(E2("route-fallback"),y=!0,E=null):c===f&&(y=!0,E=h.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,f+1)),w=()=>{let I;return m?I=B:y?I=E:h.route.Component?I=k.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,k.createElement(B2,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:I})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(w2,{location:r.location,revalidation:r.revalidation,component:B,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var YE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YE||{}),ZE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ZE||{});function v2(t){let e=k.useContext(Cf);return e||Zt(!1),e}function x2(t){let e=k.useContext(qE);return e||Zt(!1),e}function C2(t){let e=k.useContext(HA);return e||Zt(!1),e}function eb(t){let e=C2(),r=e.matches[e.matches.length-1];return r.route.id||Zt(!1),r.route.id}function I2(){var t;let e=k.useContext(JE),r=x2(),n=eb();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function _2(){let{router:t}=v2(YE.UseNavigateStable),e=eb(ZE.UseNavigateStable),r=k.useRef(!1);return XE(()=>{r.current=!0}),k.useCallback(function(A,s){s===void 0&&(s={}),r.current&&(typeof A=="number"?t.navigate(A):t.navigate(A,Cc({fromRouteId:e},s)))},[t,e])}const Dv={};function E2(t,e,r){Dv[t]||(Dv[t]=!0)}function b2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _h(t){let{to:e,replace:r,state:n,relative:A}=t;Qa()||Zt(!1);let{future:s,static:i}=k.useContext(OA),{matches:a}=k.useContext(HA),{pathname:o}=ri(),c=zc(),d=vw(e,yw(a,s.v7_relativeSplatPath),o,A==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:A}),[c,h,A,r,n]),null}function T2(t){return h2(t.context)}function pn(t){Zt(!1)}function F2(t){let{basename:e="/",children:r=null,location:n,navigationType:A=Bs.Pop,navigator:s,static:i=!1,future:a}=t;Qa()&&Zt(!1);let o=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:o,navigator:s,static:i,future:Cc({v7_relativeSplatPath:!1},a)}),[o,a,s,i]);typeof n=="string"&&(n=ro(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:y="default"}=n,B=k.useMemo(()=>{let E=aa(d,o);return E==null?null:{location:{pathname:E,search:h,hash:f,state:m,key:y},navigationType:A}},[o,d,h,f,m,y,A]);return B==null?null:k.createElement(OA.Provider,{value:c},k.createElement(If.Provider,{children:r,value:B}))}function Q2(t){let{children:e,location:r}=t;return f2(Im(e),r)}new Promise(()=>{});function Im(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,A)=>{if(!k.isValidElement(n))return;let s=[...e,A];if(n.type===k.Fragment){r.push.apply(r,Im(n.props.children,s));return}n.type!==pn&&Zt(!1),!n.props.index||!n.props.children||Zt(!1);let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Im(n.props.children,s)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eh(){return Eh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eh.apply(this,arguments)}function tb(t,e){if(t==null)return{};var r={},n=Object.keys(t),A,s;for(s=0;s<n.length;s++)A=n[s],!(e.indexOf(A)>=0)&&(r[A]=t[A]);return r}function U2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function S2(t,e){return t.button===0&&(!e||e==="_self")&&!U2(t)}function _m(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(A=>[r,A]):[[r,n]])},[]))}function k2(t,e){let r=_m(t);return e&&e.forEach((n,A)=>{r.has(A)||e.getAll(A).forEach(s=>{r.append(A,s)})}),r}const R2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],N2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],D2="6";try{window.__reactRouterVersion=D2}catch{}const P2=k.createContext({isTransitioning:!1}),L2="startTransition",Pv=EU[L2];function j2(t){let{basename:e,children:r,future:n,window:A}=t,s=k.useRef();s.current==null&&(s.current=Lk({window:A,v5Compat:!0}));let i=s.current,[a,o]=k.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=k.useCallback(h=>{c&&Pv?Pv(()=>o(h)):o(h)},[o,c]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.useEffect(()=>b2(n),[n]),k.createElement(F2,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const M2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H2=k.forwardRef(function(e,r){let{onClick:n,relative:A,reloadDocument:s,replace:i,state:a,target:o,to:c,preventScrollReset:d,viewTransition:h}=e,f=tb(e,R2),{basename:m}=k.useContext(OA),y,B=!1;if(typeof c=="string"&&O2.test(c)&&(y=c,M2))try{let I=new URL(window.location.href),F=c.startsWith("//")?new URL(I.protocol+c):new URL(c),R=aa(F.pathname,m);F.origin===I.origin&&R!=null?c=R+F.search+F.hash:B=!0}catch{}let E=c2(c,{relative:A}),x=K2(c,{replace:i,state:a,target:o,preventScrollReset:d,relative:A,viewTransition:h});function w(I){n&&n(I),I.defaultPrevented||x(I)}return k.createElement("a",Eh({},f,{href:y||E,onClick:B||s?n:w,ref:r,target:o}))}),Nd=k.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:A=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:c,children:d}=e,h=tb(e,N2),f=_f(o,{relative:h.relative}),m=ri(),y=k.useContext(qE),{navigator:B,basename:E}=k.useContext(OA),x=y!=null&&z2(f)&&c===!0,w=B.encodeLocation?B.encodeLocation(f).pathname:f.pathname,I=m.pathname,F=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;A||(I=I.toLowerCase(),F=F?F.toLowerCase():null,w=w.toLowerCase()),F&&E&&(F=aa(F,E)||F);const R=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let U=I===w||!i&&I.startsWith(w)&&I.charAt(R)==="/",v=F!=null&&(F===w||!i&&F.startsWith(w)&&F.charAt(w.length)==="/"),C={isActive:U,isPending:v,isTransitioning:x},_=U?n:void 0,Q;typeof s=="function"?Q=s(C):Q=[s,U?"active":null,v?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(C):a;return k.createElement(H2,Eh({},h,{"aria-current":_,className:Q,ref:r,style:N,to:o,viewTransition:c}),typeof d=="function"?d(C):d)});var Em;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Em||(Em={}));var Lv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Lv||(Lv={}));function V2(t){let e=k.useContext(Cf);return e||Zt(!1),e}function K2(t,e){let{target:r,replace:n,state:A,preventScrollReset:s,relative:i,viewTransition:a}=e===void 0?{}:e,o=zc(),c=ri(),d=_f(t,{relative:i});return k.useCallback(h=>{if(S2(h,r)){h.preventDefault();let f=n!==void 0?n:Ih(c)===Ih(d);o(t,{replace:f,state:A,preventScrollReset:s,relative:i,viewTransition:a})}},[c,o,d,n,A,r,t,s,i,a])}function G2(t){let e=k.useRef(_m(t)),r=k.useRef(!1),n=ri(),A=k.useMemo(()=>k2(n.search,r.current?null:e.current),[n.search]),s=zc(),i=k.useCallback((a,o)=>{const c=_m(typeof a=="function"?a(A):a);r.current=!0,s("?"+c,o)},[s,A]);return[A,i]}function z2(t,e){e===void 0&&(e={});let r=k.useContext(P2);r==null&&Zt(!1);let{basename:n}=V2(Em.useViewTransitionState),A=_f(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=aa(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=aa(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Cm(A.pathname,i)!=null||Cm(A.pathname,s)!=null}var me=(t=>(t.First="1 ",t.Second="2 ",t))(me||{}),At=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(At||{});const Vt=["","","","",""],Bn={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},jv=["","","/","","","",""," "],rb=[{shift:me.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:me.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:me.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:me.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:me.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:me.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:me.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:me.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:me.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:me.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:me.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:me.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:me.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:me.Second,period:6,start:"18:50",end:"19:35",day:"default"}],on={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:me.First,studentsCount:25},{id:"c2",name:"6",shift:me.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2ndHalf:[],substitutions:[],bellSchedule:rb,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}},$2="modulepreload",W2=function(t){return"/zamenygymn/"+t},Mv={},q2=function(e,r,n){let A=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));A=Promise.allSettled(r.map(o=>{if(o=W2(o),o in Mv)return;Mv[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":$2,c||(h.as="script"),h.crossOrigin="",h.href=o,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return A.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Ov={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let A=t.charCodeAt(n);A<128?e[r++]=A:A<2048?(e[r++]=A>>6|192,e[r++]=A&63|128):(A&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(A=65536+((A&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=A>>18|240,e[r++]=A>>12&63|128,e[r++]=A>>6&63|128,e[r++]=A&63|128):(e[r++]=A>>12|224,e[r++]=A>>6&63|128,e[r++]=A&63|128)}return e},J2=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const A=t[r++];if(A<128)e[n++]=String.fromCharCode(A);else if(A>191&&A<224){const s=t[r++];e[n++]=String.fromCharCode((A&31)<<6|s&63)}else if(A>239&&A<365){const s=t[r++],i=t[r++],a=t[r++],o=((A&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((A&15)<<12|(s&63)<<6|i&63)}}return e.join("")},Ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let A=0;A<t.length;A+=3){const s=t[A],i=A+1<t.length,a=i?t[A+1]:0,o=A+2<t.length,c=o?t[A+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,m=c&63;o||(m=64,i||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):J2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let A=0;A<t.length;){const s=r[t.charAt(A++)],a=A<t.length?r[t.charAt(A)]:0;++A;const c=A<t.length?r[t.charAt(A)]:64;++A;const h=A<t.length?r[t.charAt(A)]:64;if(++A,s==null||a==null||c==null||h==null)throw new X2;const f=s<<2|a>>4;if(n.push(f),c!==64){const m=a<<4&240|c>>2;if(n.push(m),h!==64){const y=c<<6&192|h;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class X2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Y2=function(t){const e=nb(t);return Ab.encodeByteArray(e,!0)},bh=function(t){return Y2(t).replace(/\./g,"")},sb=function(t){try{return Ab.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=()=>Z2().__FIREBASE_DEFAULTS__,tR=()=>{if(typeof process>"u"||typeof Ov>"u")return;const t=Ov.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sb(t[1]);return e&&JSON.parse(e)},Ef=()=>{try{return eR()||tR()||rR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ib=t=>{var e,r;return(r=(e=Ef())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},nR=t=>{const e=ib(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},ob=()=>{var t;return(t=Ef())===null||t===void 0?void 0:t.config},ab=t=>{var e;return(e=Ef())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",A=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:A,exp:A+3600,auth_time:A,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bh(JSON.stringify(r)),bh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function oR(){var t;const e=(t=Ef())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uR(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lb(){return!oR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cb(){try{return typeof indexedDB=="object"}catch{return!1}}function dR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(n);A.onsuccess=()=>{A.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},A.onupgradeneeded=()=>{r=!1},A.onerror=()=>{var s;e(((s=A.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="FirebaseError";class VA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=hR,Object.setPrototypeOf(this,VA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},A=`${this.service}/${e}`,s=this.errors[e],i=s?fR(s,n):"Error",a=`${this.serviceName}: ${i} (${A}).`;return new VA(A,a,n)}}function fR(t,e){return t.replace(gR,(r,n)=>{const A=e[n];return A!=null?String(A):`<${n}?>`})}const gR=/\{\$([^}]+)}/g;function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hs(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const A of r){if(!n.includes(A))return!1;const s=t[A],i=e[A];if(Hv(s)&&Hv(i)){if(!Hs(s,i))return!1}else if(s!==i)return!1}for(const A of n)if(!r.includes(A))return!1;return!0}function Hv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(A=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Il(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[A,s]=n.split("=");e[decodeURIComponent(A)]=decodeURIComponent(s)}}),e}function _l(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function mR(t,e){const r=new wR(t,e);return r.subscribe.bind(r)}class wR{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let A;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");BR(e,["next","error","complete"])?A=e:A={next:e,error:r,complete:n},A.next===void 0&&(A.next=$g),A.error===void 0&&(A.error=$g),A.complete===void 0&&(A.complete=$g);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function $g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Hi{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new AR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:r});A&&n.resolve(A)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),A=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(A)return null;throw s}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xR(e))try{this.getOrInitializeService({instanceIdentifier:yi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:A});n.resolve(s)}catch{}}}}clearInstance(e=yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yi){return this.instances.has(e)}getOptions(e=yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&i.resolve(A)}return A}onInit(e,r){var n;const A=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(A))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(A,s);const i=this.instances.get(A);return i&&e(i,A),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const A of n)try{A(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:vR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=yi){return this.component?this.component.multipleInstances?e:yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vR(t){return t===yi?void 0:t}function xR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new yR(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const IR={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},_R=at.INFO,ER={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},bR=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),A=ER[e];if(A)console[A](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let xw=class{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}};const TR=(t,e)=>e.some(r=>t instanceof r);let Vv,Kv;function FR(){return Vv||(Vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QR(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ub=new WeakMap,bm=new WeakMap,db=new WeakMap,Wg=new WeakMap,Cw=new WeakMap;function UR(t){const e=new Promise((r,n)=>{const A=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(Rs(t.result)),A()},i=()=>{n(t.error),A()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&ub.set(r,t)}).catch(()=>{}),Cw.set(e,t),e}function SR(t){if(bm.has(t))return;const e=new Promise((r,n)=>{const A=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),A()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),A()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});bm.set(t,e)}let Tm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return bm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||db.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Rs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kR(t){Tm=t(Tm)}function RR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(qg(this),e,...r);return db.set(n,e.sort?e.sort():[e]),Rs(n)}:QR().includes(t)?function(...e){return t.apply(qg(this),e),Rs(ub.get(this))}:function(...e){return Rs(t.apply(qg(this),e))}}function NR(t){return typeof t=="function"?RR(t):(t instanceof IDBTransaction&&SR(t),TR(t,FR())?new Proxy(t,Tm):t)}function Rs(t){if(t instanceof IDBRequest)return UR(t);if(Wg.has(t))return Wg.get(t);const e=NR(t);return e!==t&&(Wg.set(t,e),Cw.set(e,t)),e}const qg=t=>Cw.get(t);function DR(t,e,{blocked:r,upgrade:n,blocking:A,terminated:s}={}){const i=indexedDB.open(t,e),a=Rs(i);return n&&i.addEventListener("upgradeneeded",o=>{n(Rs(i.result),o.oldVersion,o.newVersion,Rs(i.transaction),o)}),r&&i.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{s&&o.addEventListener("close",()=>s()),A&&o.addEventListener("versionchange",c=>A(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const PR=["get","getKey","getAll","getAllKeys","count"],LR=["put","add","delete","clear"],Jg=new Map;function Gv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jg.get(e))return Jg.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,A=LR.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(A||PR.includes(r)))return;const s=async function(i,...a){const o=this.transaction(i,A?"readwrite":"readonly");let c=o.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),A&&o.done]))[0]};return Jg.set(e,s),s}kR(t=>({...t,get:(e,r,n)=>Gv(e,r)||t.get(e,r,n),has:(e,r)=>!!Gv(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(MR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function MR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fm="@firebase/app",zv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=new xw("@firebase/app"),OR="@firebase/app-compat",HR="@firebase/analytics-compat",VR="@firebase/analytics",KR="@firebase/app-check-compat",GR="@firebase/app-check",zR="@firebase/auth",$R="@firebase/auth-compat",WR="@firebase/database",qR="@firebase/data-connect",JR="@firebase/database-compat",XR="@firebase/functions",YR="@firebase/functions-compat",ZR="@firebase/installations",eN="@firebase/installations-compat",tN="@firebase/messaging",rN="@firebase/messaging-compat",nN="@firebase/performance",AN="@firebase/performance-compat",sN="@firebase/remote-config",iN="@firebase/remote-config-compat",oN="@firebase/storage",aN="@firebase/storage-compat",lN="@firebase/firestore",cN="@firebase/vertexai-preview",uN="@firebase/firestore-compat",dN="firebase",hN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",fN={[Fm]:"fire-core",[OR]:"fire-core-compat",[VR]:"fire-analytics",[HR]:"fire-analytics-compat",[GR]:"fire-app-check",[KR]:"fire-app-check-compat",[zR]:"fire-auth",[$R]:"fire-auth-compat",[WR]:"fire-rtdb",[qR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[XR]:"fire-fn",[YR]:"fire-fn-compat",[ZR]:"fire-iid",[eN]:"fire-iid-compat",[tN]:"fire-fcm",[rN]:"fire-fcm-compat",[nN]:"fire-perf",[AN]:"fire-perf-compat",[sN]:"fire-rc",[iN]:"fire-rc-compat",[oN]:"fire-gcs",[aN]:"fire-gcs-compat",[lN]:"fire-fst",[uN]:"fire-fst-compat",[cN]:"fire-vertex","fire-js":"fire-js",[dN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,gN=new Map,Qm=new Map;function $v(t,e){try{t.container.addComponent(e)}catch(r){NA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function la(t){const e=t.name;if(Qm.has(e))return NA.debug(`There were multiple attempts to register component ${e}.`),!1;Qm.set(e,t);for(const r of Ic.values())$v(r,t);for(const r of gN.values())$v(r,t);return!0}function qc(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function pN(t,e,r=Th){qc(t,e).clearInstance(r)}function CA(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new $c("app","Firebase",mN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=hN;function hb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),A=n.name;if(typeof A!="string"||!A)throw Ns.create("bad-app-name",{appName:String(A)});if(r||(r=ob()),!r)throw Ns.create("no-options");const s=Ic.get(A);if(s){if(Hs(r,s.options)&&Hs(n,s.config))return s;throw Ns.create("duplicate-app",{appName:A})}const i=new CR(A);for(const o of Qm.values())i.addComponent(o);const a=new wN(r,n,i);return Ic.set(A,a),a}function Iw(t=Th){const e=Ic.get(t);if(!e&&t===Th&&ob())return hb();if(!e)throw Ns.create("no-app",{appName:t});return e}function BN(){return Array.from(Ic.values())}function Ds(t,e,r){var n;let A=(n=fN[t])!==null&&n!==void 0?n:t;r&&(A+=`-${r}`);const s=A.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${A}" with version "${e}":`];s&&a.push(`library name "${A}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),NA.warn(a.join(" "));return}la(new Hi(`${A}-version`,()=>({library:A,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="firebase-heartbeat-database",vN=1,_c="firebase-heartbeat-store";let Xg=null;function fb(){return Xg||(Xg=DR(yN,vN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_c)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Xg}async function xN(t){try{const r=(await fb()).transaction(_c),n=await r.objectStore(_c).get(gb(t));return await r.done,n}catch(e){if(e instanceof VA)NA.warn(e.message);else{const r=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});NA.warn(r.message)}}}async function Wv(t,e){try{const n=(await fb()).transaction(_c,"readwrite");await n.objectStore(_c).put(e,gb(t)),await n.done}catch(r){if(r instanceof VA)NA.warn(r.message);else{const n=Ns.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});NA.warn(n.message)}}}function gb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=1024,IN=30*24*60*60*1e3;class _N{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new bN(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const A=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:A}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=IN}),this._storage.overwrite(this._heartbeatsCache))}catch(n){NA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=qv(),{heartbeatsToSend:n,unsentEntries:A}=EN(this._heartbeatsCache.heartbeats),s=bh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return NA.warn(r),""}}}function qv(){return new Date().toISOString().substring(0,10)}function EN(t,e=CN){const r=[];let n=t.slice();for(const A of t){const s=r.find(i=>i.agent===A.agent);if(s){if(s.dates.push(A.date),Jv(r)>e){s.dates.pop();break}}else if(r.push({agent:A.agent,dates:[A.date]}),Jv(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class bN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cb()?dR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await xN(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const A=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const A=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}else return}}function Jv(t){return bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){la(new Hi("platform-logger",e=>new jR(e),"PRIVATE")),la(new Hi("heartbeat",e=>new _N(e),"PRIVATE")),Ds(Fm,zv,t),Ds(Fm,zv,"esm2017"),Ds("fire-js","")}TN("");var FN="firebase",QN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(FN,QN,"app");var Xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,pb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,C){function _(){}_.prototype=C.prototype,v.D=C.prototype,v.prototype=new _,v.prototype.constructor=v,v.C=function(Q,N,P){for(var b=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)b[Ve-2]=arguments[Ve];return C.prototype[N].apply(Q,b)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(v,C,_){_||(_=0);var Q=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)Q[N]=C.charCodeAt(_++)|C.charCodeAt(_++)<<8|C.charCodeAt(_++)<<16|C.charCodeAt(_++)<<24;else for(N=0;16>N;++N)Q[N]=C[_++]|C[_++]<<8|C[_++]<<16|C[_++]<<24;C=v.g[0],_=v.g[1],N=v.g[2];var P=v.g[3],b=C+(P^_&(N^P))+Q[0]+3614090360&4294967295;C=_+(b<<7&4294967295|b>>>25),b=P+(N^C&(_^N))+Q[1]+3905402710&4294967295,P=C+(b<<12&4294967295|b>>>20),b=N+(_^P&(C^_))+Q[2]+606105819&4294967295,N=P+(b<<17&4294967295|b>>>15),b=_+(C^N&(P^C))+Q[3]+3250441966&4294967295,_=N+(b<<22&4294967295|b>>>10),b=C+(P^_&(N^P))+Q[4]+4118548399&4294967295,C=_+(b<<7&4294967295|b>>>25),b=P+(N^C&(_^N))+Q[5]+1200080426&4294967295,P=C+(b<<12&4294967295|b>>>20),b=N+(_^P&(C^_))+Q[6]+2821735955&4294967295,N=P+(b<<17&4294967295|b>>>15),b=_+(C^N&(P^C))+Q[7]+4249261313&4294967295,_=N+(b<<22&4294967295|b>>>10),b=C+(P^_&(N^P))+Q[8]+1770035416&4294967295,C=_+(b<<7&4294967295|b>>>25),b=P+(N^C&(_^N))+Q[9]+2336552879&4294967295,P=C+(b<<12&4294967295|b>>>20),b=N+(_^P&(C^_))+Q[10]+4294925233&4294967295,N=P+(b<<17&4294967295|b>>>15),b=_+(C^N&(P^C))+Q[11]+2304563134&4294967295,_=N+(b<<22&4294967295|b>>>10),b=C+(P^_&(N^P))+Q[12]+1804603682&4294967295,C=_+(b<<7&4294967295|b>>>25),b=P+(N^C&(_^N))+Q[13]+4254626195&4294967295,P=C+(b<<12&4294967295|b>>>20),b=N+(_^P&(C^_))+Q[14]+2792965006&4294967295,N=P+(b<<17&4294967295|b>>>15),b=_+(C^N&(P^C))+Q[15]+1236535329&4294967295,_=N+(b<<22&4294967295|b>>>10),b=C+(N^P&(_^N))+Q[1]+4129170786&4294967295,C=_+(b<<5&4294967295|b>>>27),b=P+(_^N&(C^_))+Q[6]+3225465664&4294967295,P=C+(b<<9&4294967295|b>>>23),b=N+(C^_&(P^C))+Q[11]+643717713&4294967295,N=P+(b<<14&4294967295|b>>>18),b=_+(P^C&(N^P))+Q[0]+3921069994&4294967295,_=N+(b<<20&4294967295|b>>>12),b=C+(N^P&(_^N))+Q[5]+3593408605&4294967295,C=_+(b<<5&4294967295|b>>>27),b=P+(_^N&(C^_))+Q[10]+38016083&4294967295,P=C+(b<<9&4294967295|b>>>23),b=N+(C^_&(P^C))+Q[15]+3634488961&4294967295,N=P+(b<<14&4294967295|b>>>18),b=_+(P^C&(N^P))+Q[4]+3889429448&4294967295,_=N+(b<<20&4294967295|b>>>12),b=C+(N^P&(_^N))+Q[9]+568446438&4294967295,C=_+(b<<5&4294967295|b>>>27),b=P+(_^N&(C^_))+Q[14]+3275163606&4294967295,P=C+(b<<9&4294967295|b>>>23),b=N+(C^_&(P^C))+Q[3]+4107603335&4294967295,N=P+(b<<14&4294967295|b>>>18),b=_+(P^C&(N^P))+Q[8]+1163531501&4294967295,_=N+(b<<20&4294967295|b>>>12),b=C+(N^P&(_^N))+Q[13]+2850285829&4294967295,C=_+(b<<5&4294967295|b>>>27),b=P+(_^N&(C^_))+Q[2]+4243563512&4294967295,P=C+(b<<9&4294967295|b>>>23),b=N+(C^_&(P^C))+Q[7]+1735328473&4294967295,N=P+(b<<14&4294967295|b>>>18),b=_+(P^C&(N^P))+Q[12]+2368359562&4294967295,_=N+(b<<20&4294967295|b>>>12),b=C+(_^N^P)+Q[5]+4294588738&4294967295,C=_+(b<<4&4294967295|b>>>28),b=P+(C^_^N)+Q[8]+2272392833&4294967295,P=C+(b<<11&4294967295|b>>>21),b=N+(P^C^_)+Q[11]+1839030562&4294967295,N=P+(b<<16&4294967295|b>>>16),b=_+(N^P^C)+Q[14]+4259657740&4294967295,_=N+(b<<23&4294967295|b>>>9),b=C+(_^N^P)+Q[1]+2763975236&4294967295,C=_+(b<<4&4294967295|b>>>28),b=P+(C^_^N)+Q[4]+1272893353&4294967295,P=C+(b<<11&4294967295|b>>>21),b=N+(P^C^_)+Q[7]+4139469664&4294967295,N=P+(b<<16&4294967295|b>>>16),b=_+(N^P^C)+Q[10]+3200236656&4294967295,_=N+(b<<23&4294967295|b>>>9),b=C+(_^N^P)+Q[13]+681279174&4294967295,C=_+(b<<4&4294967295|b>>>28),b=P+(C^_^N)+Q[0]+3936430074&4294967295,P=C+(b<<11&4294967295|b>>>21),b=N+(P^C^_)+Q[3]+3572445317&4294967295,N=P+(b<<16&4294967295|b>>>16),b=_+(N^P^C)+Q[6]+76029189&4294967295,_=N+(b<<23&4294967295|b>>>9),b=C+(_^N^P)+Q[9]+3654602809&4294967295,C=_+(b<<4&4294967295|b>>>28),b=P+(C^_^N)+Q[12]+3873151461&4294967295,P=C+(b<<11&4294967295|b>>>21),b=N+(P^C^_)+Q[15]+530742520&4294967295,N=P+(b<<16&4294967295|b>>>16),b=_+(N^P^C)+Q[2]+3299628645&4294967295,_=N+(b<<23&4294967295|b>>>9),b=C+(N^(_|~P))+Q[0]+4096336452&4294967295,C=_+(b<<6&4294967295|b>>>26),b=P+(_^(C|~N))+Q[7]+1126891415&4294967295,P=C+(b<<10&4294967295|b>>>22),b=N+(C^(P|~_))+Q[14]+2878612391&4294967295,N=P+(b<<15&4294967295|b>>>17),b=_+(P^(N|~C))+Q[5]+4237533241&4294967295,_=N+(b<<21&4294967295|b>>>11),b=C+(N^(_|~P))+Q[12]+1700485571&4294967295,C=_+(b<<6&4294967295|b>>>26),b=P+(_^(C|~N))+Q[3]+2399980690&4294967295,P=C+(b<<10&4294967295|b>>>22),b=N+(C^(P|~_))+Q[10]+4293915773&4294967295,N=P+(b<<15&4294967295|b>>>17),b=_+(P^(N|~C))+Q[1]+2240044497&4294967295,_=N+(b<<21&4294967295|b>>>11),b=C+(N^(_|~P))+Q[8]+1873313359&4294967295,C=_+(b<<6&4294967295|b>>>26),b=P+(_^(C|~N))+Q[15]+4264355552&4294967295,P=C+(b<<10&4294967295|b>>>22),b=N+(C^(P|~_))+Q[6]+2734768916&4294967295,N=P+(b<<15&4294967295|b>>>17),b=_+(P^(N|~C))+Q[13]+1309151649&4294967295,_=N+(b<<21&4294967295|b>>>11),b=C+(N^(_|~P))+Q[4]+4149444226&4294967295,C=_+(b<<6&4294967295|b>>>26),b=P+(_^(C|~N))+Q[11]+3174756917&4294967295,P=C+(b<<10&4294967295|b>>>22),b=N+(C^(P|~_))+Q[2]+718787259&4294967295,N=P+(b<<15&4294967295|b>>>17),b=_+(P^(N|~C))+Q[9]+3951481745&4294967295,v.g[0]=v.g[0]+C&4294967295,v.g[1]=v.g[1]+(N+(b<<21&4294967295|b>>>11))&4294967295,v.g[2]=v.g[2]+N&4294967295,v.g[3]=v.g[3]+P&4294967295}n.prototype.u=function(v,C){C===void 0&&(C=v.length);for(var _=C-this.blockSize,Q=this.B,N=this.h,P=0;P<C;){if(N==0)for(;P<=_;)A(this,v,P),P+=this.blockSize;if(typeof v=="string"){for(;P<C;)if(Q[N++]=v.charCodeAt(P++),N==this.blockSize){A(this,Q),N=0;break}}else for(;P<C;)if(Q[N++]=v[P++],N==this.blockSize){A(this,Q),N=0;break}}this.h=N,this.o+=C},n.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var C=1;C<v.length-8;++C)v[C]=0;var _=8*this.o;for(C=v.length-8;C<v.length;++C)v[C]=_&255,_/=256;for(this.u(v),v=Array(16),C=_=0;4>C;++C)for(var Q=0;32>Q;Q+=8)v[_++]=this.g[C]>>>Q&255;return v};function s(v,C){var _=a;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=C(v)}function i(v,C){this.h=C;for(var _=[],Q=!0,N=v.length-1;0<=N;N--){var P=v[N]|0;Q&&P==C||(_[N]=P,Q=!1)}this.g=_}var a={};function o(v){return-128<=v&&128>v?s(v,function(C){return new i([C|0],0>C?-1:0)}):new i([v|0],0>v?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return h;if(0>v)return E(c(-v));for(var C=[],_=1,Q=0;v>=_;Q++)C[Q]=v/_|0,_*=4294967296;return new i(C,0)}function d(v,C){if(v.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v.charAt(0)=="-")return E(d(v.substring(1),C));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(C,8)),Q=h,N=0;N<v.length;N+=8){var P=Math.min(8,v.length-N),b=parseInt(v.substring(N,N+P),C);8>P?(P=c(Math.pow(C,P)),Q=Q.j(P).add(c(b))):(Q=Q.j(_),Q=Q.add(c(b)))}return Q}var h=o(0),f=o(1),m=o(16777216);t=i.prototype,t.m=function(){if(B(this))return-E(this).m();for(var v=0,C=1,_=0;_<this.g.length;_++){var Q=this.i(_);v+=(0<=Q?Q:4294967296+Q)*C,C*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y(this))return"0";if(B(this))return"-"+E(this).toString(v);for(var C=c(Math.pow(v,6)),_=this,Q="";;){var N=F(_,C).g;_=x(_,N.j(C));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(v);if(_=N,y(_))return P+Q;for(;6>P.length;)P="0"+P;Q=P+Q}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function y(v){if(v.h!=0)return!1;for(var C=0;C<v.g.length;C++)if(v.g[C]!=0)return!1;return!0}function B(v){return v.h==-1}t.l=function(v){return v=x(this,v),B(v)?-1:y(v)?0:1};function E(v){for(var C=v.g.length,_=[],Q=0;Q<C;Q++)_[Q]=~v.g[Q];return new i(_,~v.h).add(f)}t.abs=function(){return B(this)?E(this):this},t.add=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0,N=0;N<=C;N++){var P=Q+(this.i(N)&65535)+(v.i(N)&65535),b=(P>>>16)+(this.i(N)>>>16)+(v.i(N)>>>16);Q=b>>>16,P&=65535,b&=65535,_[N]=b<<16|P}return new i(_,_[_.length-1]&-2147483648?-1:0)};function x(v,C){return v.add(E(C))}t.j=function(v){if(y(this)||y(v))return h;if(B(this))return B(v)?E(this).j(E(v)):E(E(this).j(v));if(B(v))return E(this.j(E(v)));if(0>this.l(m)&&0>v.l(m))return c(this.m()*v.m());for(var C=this.g.length+v.g.length,_=[],Q=0;Q<2*C;Q++)_[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var N=0;N<v.g.length;N++){var P=this.i(Q)>>>16,b=this.i(Q)&65535,Ve=v.i(N)>>>16,je=v.i(N)&65535;_[2*Q+2*N]+=b*je,w(_,2*Q+2*N),_[2*Q+2*N+1]+=P*je,w(_,2*Q+2*N+1),_[2*Q+2*N+1]+=b*Ve,w(_,2*Q+2*N+1),_[2*Q+2*N+2]+=P*Ve,w(_,2*Q+2*N+2)}for(Q=0;Q<C;Q++)_[Q]=_[2*Q+1]<<16|_[2*Q];for(Q=C;Q<2*C;Q++)_[Q]=0;return new i(_,0)};function w(v,C){for(;(v[C]&65535)!=v[C];)v[C+1]+=v[C]>>>16,v[C]&=65535,C++}function I(v,C){this.g=v,this.h=C}function F(v,C){if(y(C))throw Error("division by zero");if(y(v))return new I(h,h);if(B(v))return C=F(E(v),C),new I(E(C.g),E(C.h));if(B(C))return C=F(v,E(C)),new I(E(C.g),C.h);if(30<v.g.length){if(B(v)||B(C))throw Error("slowDivide_ only works with positive integers.");for(var _=f,Q=C;0>=Q.l(v);)_=R(_),Q=R(Q);var N=U(_,1),P=U(Q,1);for(Q=U(Q,2),_=U(_,2);!y(Q);){var b=P.add(Q);0>=b.l(v)&&(N=N.add(_),P=b),Q=U(Q,1),_=U(_,1)}return C=x(v,N.j(C)),new I(N,C)}for(N=h;0<=v.l(C);){for(_=Math.max(1,Math.floor(v.m()/C.m())),Q=Math.ceil(Math.log(_)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),P=c(_),b=P.j(C);B(b)||0<b.l(v);)_-=Q,P=c(_),b=P.j(C);y(P)&&(P=f),N=N.add(P),v=x(v,b)}return new I(N,v)}t.A=function(v){return F(this,v).h},t.and=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0;Q<C;Q++)_[Q]=this.i(Q)&v.i(Q);return new i(_,this.h&v.h)},t.or=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0;Q<C;Q++)_[Q]=this.i(Q)|v.i(Q);return new i(_,this.h|v.h)},t.xor=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0;Q<C;Q++)_[Q]=this.i(Q)^v.i(Q);return new i(_,this.h^v.h)};function R(v){for(var C=v.g.length+1,_=[],Q=0;Q<C;Q++)_[Q]=v.i(Q)<<1|v.i(Q-1)>>>31;return new i(_,v.h)}function U(v,C){var _=C>>5;C%=32;for(var Q=v.g.length-_,N=[],P=0;P<Q;P++)N[P]=0<C?v.i(P+_)>>>C|v.i(P+_+1)<<32-C:v.i(P+_);return new i(N,v.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,pb=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,ki=i}).apply(typeof Xv<"u"?Xv:typeof self<"u"?self:typeof window<"u"?window:{});var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mb,El,wb,Dd,Um,Bb,yb,vb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ku=="object"&&Ku];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function A(u,g){if(g)e:{var p=n;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in p))break e;p=p[M]}u=u[u.length-1],T=p[u],g=g(T),g!=T&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var p=0,T=!1,M={next:function(){if(!T&&p<u.length){var z=p++;return{value:g(z,u[z]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}A("Array.prototype.values",function(u){return u||function(){return s(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(g,M)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function y(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,M,z){for(var pe=Array(arguments.length-2),St=2;St<arguments.length;St++)pe[St-2]=arguments[St];return g.prototype[M].apply(T,pe)}}function B(u){const g=u.length;if(0<g){const p=Array(g);for(let T=0;T<g;T++)p[T]=u[T];return p}return[]}function E(u,g){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(o(T)){const M=u.length||0,z=T.length||0;u.length=M+z;for(let pe=0;pe<z;pe++)u[M+pe]=T[pe]}else u.push(T)}}class x{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var R=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function U(u,g,p){for(const T in u)g.call(p,u[T],T,u)}function v(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function C(u){const g={};for(const p in u)g[p]=u[p];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,g){let p,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(p in T)u[p]=T[p];for(let z=0;z<_.length;z++)p=_[z],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function N(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function P(u){a.setTimeout(()=>{throw u},0)}function b(){var u=L;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ve{constructor(){this.h=this.g=null}add(g,p){const T=je.get();T.set(g,p),this.h?this.h.next=T:this.g=T,this.h=T}}var je=new x(()=>new et,u=>u.reset());class et{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let We,Ae=!1,L=new Ve,Y=()=>{const u=a.Promise.resolve(void 0);We=()=>{u.then(O)}};var O=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(p){P(p)}var g=je;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}Ae=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,g),a.removeEventListener("test",p,g)}catch{}return u}();function Ue(u,g){if(ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(R){e:{try{F(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ue.aa.h.call(this)}}y(Ue,ie);var De={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function Oe(u,g,p,T,M){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!T,this.ha=M,this.key=++Ft,this.da=this.fa=!1}function It(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qt(u){this.src=u,this.g={},this.h=0}Qt.prototype.add=function(u,g,p,T,M){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var pe=gt(u,g,T,M);return-1<pe?(g=u[pe],p||(g.fa=!1)):(g=new Oe(g,this.src,z,!!T,M),g.fa=p,u.push(g)),g};function Ze(u,g){var p=g.type;if(p in u.g){var T=u.g[p],M=Array.prototype.indexOf.call(T,g,void 0),z;(z=0<=M)&&Array.prototype.splice.call(T,M,1),z&&(It(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function gt(u,g,p,T){for(var M=0;M<u.length;++M){var z=u[M];if(!z.da&&z.listener==g&&z.capture==!!p&&z.ha==T)return M}return-1}var Bt="closure_lm_"+(1e6*Math.random()|0),$e={};function _e(u,g,p,T,M){if(Array.isArray(g)){for(var z=0;z<g.length;z++)_e(u,g[z],p,T,M);return null}return p=fe(p),u&&u[Ke]?u.K(g,p,c(T)?!!T.capture:!1,M):ee(u,g,p,!1,T,M)}function ee(u,g,p,T,M,z){if(!g)throw Error("Invalid event type");var pe=c(M)?!!M.capture:!!M,St=ue(u);if(St||(u[Bt]=St=new Qt(u)),p=St.add(g,p,T,pe,z),p.proxy)return p;if(T=ce(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)Re||(M=pe),M===void 0&&(M=!1),u.addEventListener(g.toString(),T,M);else if(u.attachEvent)u.attachEvent(de(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ce(){function u(p){return g.call(u.src,u.listener,p)}const g=Me;return u}function ve(u,g,p,T,M){if(Array.isArray(g))for(var z=0;z<g.length;z++)ve(u,g[z],p,T,M);else T=c(T)?!!T.capture:!!T,p=fe(p),u&&u[Ke]?(u=u.i,g=String(g).toString(),g in u.g&&(z=u.g[g],p=gt(z,p,T,M),-1<p&&(It(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete u.g[g],u.h--)))):u&&(u=ue(u))&&(g=u.g[g.toString()],u=-1,g&&(u=gt(g,p,T,M)),(p=-1<u?g[u]:null)&&he(p))}function he(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ke])Ze(g.i,u);else{var p=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(p,T,u.capture):g.detachEvent?g.detachEvent(de(p),T):g.addListener&&g.removeListener&&g.removeListener(T),(p=ue(g))?(Ze(p,u),p.h==0&&(p.src=null,g[Bt]=null)):It(u)}}}function de(u){return u in $e?$e[u]:$e[u]="on"+u}function Me(u,g){if(u.da)u=!0;else{g=new Ue(g,this);var p=u.listener,T=u.ha||u.src;u.fa&&he(u),u=p.call(T,g)}return u}function ue(u){return u=u[Bt],u instanceof Qt?u:null}var ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(u){return typeof u=="function"?u:(u[ne]||(u[ne]=function(g){return u.handleEvent(g)}),u[ne])}function Ce(){ae.call(this),this.i=new Qt(this),this.M=this,this.F=null}y(Ce,ae),Ce.prototype[Ke]=!0,Ce.prototype.removeEventListener=function(u,g,p,T){ve(this,u,g,p,T)};function ye(u,g){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new ie(g,u);else if(g instanceof ie)g.target=g.target||u;else{var M=g;g=new ie(T,u),Q(g,M)}if(M=!0,p)for(var z=p.length-1;0<=z;z--){var pe=g.g=p[z];M=we(pe,T,!0,g)&&M}if(pe=g.g=u,M=we(pe,T,!0,g)&&M,M=we(pe,T,!1,g)&&M,p)for(z=0;z<p.length;z++)pe=g.g=p[z],M=we(pe,T,!1,g)&&M}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],T=0;T<p.length;T++)It(p[T]);delete u.g[g],u.h--}}this.F=null},Ce.prototype.K=function(u,g,p,T){return this.i.add(String(u),g,!1,p,T)},Ce.prototype.L=function(u,g,p,T){return this.i.add(String(u),g,!0,p,T)};function we(u,g,p,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,z=0;z<g.length;++z){var pe=g[z];if(pe&&!pe.da&&pe.capture==p){var St=pe.listener,Tr=pe.ha||pe.src;pe.fa&&Ze(u.i,pe),M=St.call(Tr,T)!==!1&&M}}return M&&!T.defaultPrevented}function Ge(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Pe(u){u.g=Ge(()=>{u.g=null,u.i&&(u.i=!1,Pe(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ut extends ae{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Pe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(u){ae.call(this),this.h=u,this.g={}}y(Se,ae);var xe=[];function He(u){U(u.g,function(g,p){this.g.hasOwnProperty(p)&&he(g)},u),u.g={}}Se.prototype.N=function(){Se.aa.N.call(this),He(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=a.JSON.stringify,dt=a.JSON.parse,nt=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function mt(){}mt.prototype.h=null;function qt(u){return u.h||(u.h=u.i())}function D(){}var G={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function q(){ie.call(this,"d")}y(q,ie);function V(){ie.call(this,"c")}y(V,ie);var Ee={},se=null;function oe(){return se=se||new Ce}Ee.La="serverreachability";function S(u){ie.call(this,Ee.La,u)}y(S,ie);function H(u){const g=oe();ye(g,new S(g))}Ee.STAT_EVENT="statevent";function X(u,g){ie.call(this,Ee.STAT_EVENT,u),this.stat=g}y(X,ie);function Z(u){const g=oe();ye(g,new X(g,u))}Ee.Ma="timingevent";function J(u,g){ie.call(this,Ee.Ma,u),this.size=g}y(J,ie);function W(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function Fe(){this.g=!0}Fe.prototype.xa=function(){this.g=!1};function tt(u,g,p,T,M,z){u.info(function(){if(u.g)if(z)for(var pe="",St=z.split("&"),Tr=0;Tr<St.length;Tr++){var pt=St[Tr].split("=");if(1<pt.length){var Lr=pt[0];pt=pt[1];var jr=Lr.split("_");pe=2<=jr.length&&jr[1]=="type"?pe+(Lr+"="+pt+"&"):pe+(Lr+"=redacted&")}}else pe=null;else pe=z;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+g+`
`+p+`
`+pe})}function Xe(u,g,p,T,M,z,pe){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+g+`
`+p+`
`+z+" "+pe})}function Ye(u,g,p,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Ut(u,p)+(T?" "+T:"")})}function ze(u,g){u.info(function(){return"TIMEOUT: "+g})}Fe.prototype.info=function(){};function Ut(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var pe=1;pe<M.length;pe++)M[pe]=""}}}}return Le(p)}catch{return g}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vt;function Jr(){}y(Jr,mt),Jr.prototype.g=function(){return new XMLHttpRequest},Jr.prototype.i=function(){return{}},vt=new Jr;function sr(u,g,p,T){this.j=u,this.i=g,this.l=p,this.R=T||1,this.U=new Se(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pr}function Pr(){this.i=null,this.g="",this.h=!1}var Tn={},Xn={};function qA(u,g,p){u.L=1,u.v=wu(fA(g)),u.m=p,u.P=!0,nn(u,null)}function nn(u,g){u.F=Date.now(),ui(u),u.A=fA(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),ey(p.i,"t",T),u.C=0,p=u.j.J,u.h=new Pr,u.g=wy(u.j,p?g:null,!u.m),0<u.O&&(u.M=new ut(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(xe[0]=M.toString()),M=xe);for(var z=0;z<M.length;z++){var pe=_e(p,M[z],T||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),H(),tt(u.i,u.u,u.A,u.l,u.R,u.m)}sr.prototype.ca=function(u){u=u.target;const g=this.M;g&&gA(u)==3?g.j():this.Y(u)},sr.prototype.Y=function(u){try{if(u==this.g)e:{const jr=gA(this.g);var g=this.g.Ba();const co=this.g.Z();if(!(3>jr)&&(jr!=3||this.g&&(this.h.h||this.g.oa()||oy(this.g)))){this.J||jr!=4||g==7||(g==8||0>=co?H(3):H(2)),ug(this);var p=this.g.Z();this.X=p;t:if(JA(this)){var T=oy(this.g);u="";var M=T.length,z=gA(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),Wa(this);var pe="";break t}this.h.i=new a.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,u+=this.h.i.decode(T[g],{stream:!(z&&g==M-1)});T.length=0,this.h.g+=u,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=p==200,Xe(this.i,this.u,this.A,this.l,this.R,jr,p),this.o){if(this.T&&!this.K){t:{if(this.g){var St,Tr=this.g;if((St=Tr.g?Tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(St)){var pt=St;break t}}pt=null}if(p=pt)Ye(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dg(this,p);else{this.o=!1,this.s=3,Z(12),di(this),Wa(this);break e}}if(this.P){p=!0;let jn;for(;!this.J&&this.C<pe.length;)if(jn=Jt(this,pe),jn==Xn){jr==4&&(this.s=4,Z(14),p=!1),Ye(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==Tn){this.s=4,Z(15),Ye(this.i,this.l,pe,"[Invalid Chunk]"),p=!1;break}else Ye(this.i,this.l,jn,null),dg(this,jn);if(JA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jr!=4||pe.length!=0||this.h.h||(this.s=1,Z(16),p=!1),this.o=this.o&&p,!p)Ye(this.i,this.l,pe,"[Invalid Chunked Response]"),di(this),Wa(this);else if(0<pe.length&&!this.W){this.W=!0;var Lr=this.j;Lr.g==this&&Lr.ba&&!Lr.M&&(Lr.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),wg(Lr),Lr.M=!0,Z(11))}}else Ye(this.i,this.l,pe,null),dg(this,pe);jr==4&&di(this),this.o&&!this.J&&(jr==4?fy(this.j,this):(this.o=!1,ui(this)))}else aU(this.g),p==400&&0<pe.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),di(this),Wa(this)}}}catch{}finally{}};function JA(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Jt(u,g){var p=u.C,T=g.indexOf(`
`,p);return T==-1?Xn:(p=Number(g.substring(p,T)),isNaN(p)?Tn:(T+=1,T+p>g.length?Xn:(g=g.slice(T,T+p),u.C=T+p,g)))}sr.prototype.cancel=function(){this.J=!0,di(this)};function ui(u){u.S=Date.now()+u.I,yr(u,u.I)}function yr(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=W(f(u.ba,u),g)}function ug(u){u.B&&(a.clearTimeout(u.B),u.B=null)}sr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ze(this.i,this.A),this.L!=2&&(H(),Z(17)),di(this),this.s=2,Wa(this)):yr(this,this.S-u)};function Wa(u){u.j.G==0||u.J||fy(u.j,u)}function di(u){ug(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,He(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function dg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||hg(p.h,u))){if(!u.K&&hg(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Iu(p),xu(p);else break e;mg(p),Z(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=W(f(p.Za,p),6e3));if(1>=GB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else fi(p,11)}else if((u.K||p.g==u)&&Iu(p),!w(g))for(M=p.Da.g.parse(g),g=0;g<M.length;g++){let pt=M[g];if(p.T=pt[0],pt=pt[1],p.G==2)if(pt[0]=="c"){p.K=pt[1],p.ia=pt[2];const Lr=pt[3];Lr!=null&&(p.la=Lr,p.j.info("VER="+p.la));const jr=pt[4];jr!=null&&(p.Aa=jr,p.j.info("SVER="+p.Aa));const co=pt[5];co!=null&&typeof co=="number"&&0<co&&(T=1.5*co,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const jn=u.g;if(jn){const Eu=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eu){var z=T.h;z.g||Eu.indexOf("spdy")==-1&&Eu.indexOf("quic")==-1&&Eu.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(fg(z,z.h),z.h=null))}if(T.D){const Bg=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Bg&&(T.ya=Bg,Pt(T.I,T.D,Bg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var pe=u;if(T.qa=my(T,T.J?T.ia:null,T.W),pe.K){zB(T.h,pe);var St=pe,Tr=T.L;Tr&&(St.I=Tr),St.B&&(ug(St),ui(St)),T.g=pe}else dy(T);0<p.i.length&&Cu(p)}else pt[0]!="stop"&&pt[0]!="close"||fi(p,7);else p.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?fi(p,7):pg(p):pt[0]!="noop"&&p.l&&p.l.ta(pt),p.v=0)}}H(4)}catch{}}var zQ=class{constructor(u,g){this.g=u,this.map=g}};function VB(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function GB(u){return u.h?1:u.g?u.g.size:0}function hg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function fg(u,g){u.g?u.g.add(g):u.h=g}function zB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}VB.prototype.cancel=function(){if(this.i=$B(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $B(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return B(u.i)}function $Q(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(o(u)){for(var g=[],p=u.length,T=0;T<p;T++)g.push(u[T]);return g}g=[],p=0;for(T in u)g[p++]=u[T];return g}function WQ(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(o(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const T in u)g[p++]=T;return g}}}function WB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(o(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=WQ(u),T=$Q(u),M=T.length,z=0;z<M;z++)g.call(void 0,T[z],p&&p[z],u)}var qB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qQ(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),M=null;if(0<=T){var z=u[p].substring(0,T);M=u[p].substring(T+1)}else z=u[p];g(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function hi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hi){this.h=u.h,pu(this,u.j),this.o=u.o,this.g=u.g,mu(this,u.s),this.l=u.l;var g=u.i,p=new Xa;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),JB(this,p),this.m=u.m}else u&&(g=String(u).match(qB))?(this.h=!1,pu(this,g[1]||"",!0),this.o=qa(g[2]||""),this.g=qa(g[3]||"",!0),mu(this,g[4]),this.l=qa(g[5]||"",!0),JB(this,g[6]||"",!0),this.m=qa(g[7]||"")):(this.h=!1,this.i=new Xa(null,this.h))}hi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Ja(g,XB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ja(g,XB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ja(p,p.charAt(0)=="/"?YQ:XQ,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ja(p,eU)),u.join("")};function fA(u){return new hi(u)}function pu(u,g,p){u.j=p?qa(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function mu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function JB(u,g,p){g instanceof Xa?(u.i=g,tU(u.i,u.h)):(p||(g=Ja(g,ZQ)),u.i=new Xa(g,u.h))}function Pt(u,g,p){u.i.set(g,p)}function wu(u){return Pt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function qa(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ja(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,JQ),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function JQ(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var XB=/[#\/\?@]/g,XQ=/[#\?:]/g,YQ=/[#\?]/g,ZQ=/[#\?@]/g,eU=/#/g;function Xa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function XA(u){u.g||(u.g=new Map,u.h=0,u.i&&qQ(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=Xa.prototype,t.add=function(u,g){XA(this),this.i=null,u=ao(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function YB(u,g){XA(u),g=ao(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function ZB(u,g){return XA(u),g=ao(u,g),u.g.has(g)}t.forEach=function(u,g){XA(this),this.g.forEach(function(p,T){p.forEach(function(M){u.call(g,M,T,this)},this)},this)},t.na=function(){XA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let T=0;T<g.length;T++){const M=u[T];for(let z=0;z<M.length;z++)p.push(g[T])}return p},t.V=function(u){XA(this);let g=[];if(typeof u=="string")ZB(this,u)&&(g=g.concat(this.g.get(ao(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return XA(this),this.i=null,u=ao(this,u),ZB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function ey(u,g,p){YB(u,g),0<p.length&&(u.i=null,u.g.set(ao(u,g),B(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var T=g[p];const z=encodeURIComponent(String(T)),pe=this.V(T);for(T=0;T<pe.length;T++){var M=z;pe[T]!==""&&(M+="="+encodeURIComponent(String(pe[T]))),u.push(M)}}return this.i=u.join("&")};function ao(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function tU(u,g){g&&!u.j&&(XA(u),u.i=null,u.g.forEach(function(p,T){var M=T.toLowerCase();T!=M&&(YB(this,T),ey(this,M,p))},u)),u.j=g}function rU(u,g){const p=new Fe;if(a.Image){const T=new Image;T.onload=m(YA,p,"TestLoadImage: loaded",!0,g,T),T.onerror=m(YA,p,"TestLoadImage: error",!1,g,T),T.onabort=m(YA,p,"TestLoadImage: abort",!1,g,T),T.ontimeout=m(YA,p,"TestLoadImage: timeout",!1,g,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function nU(u,g){const p=new Fe,T=new AbortController,M=setTimeout(()=>{T.abort(),YA(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(M),z.ok?YA(p,"TestPingServer: ok",!0,g):YA(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),YA(p,"TestPingServer: error",!1,g)})}function YA(u,g,p,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(p)}catch{}}function AU(){this.g=new nt}function sU(u,g,p){const T=p||"";try{WB(u,function(M,z){let pe=M;c(M)&&(pe=Le(M)),g.push(T+z+"="+encodeURIComponent(pe))})}catch(M){throw g.push(T+"type="+encodeURIComponent("_badmap")),M}}function Bu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Bu,mt),Bu.prototype.g=function(){return new yu(this.l,this.j)},Bu.prototype.i=function(u){return function(){return u}}({});function yu(u,g){Ce.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(yu,Ce),t=yu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Za(this)),this.g&&(this.readyState=3,Za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ty(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ty(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ya(this):Za(this),this.readyState==3&&ty(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ya(this))},t.Qa=function(u){this.g&&(this.response=u,Ya(this))},t.ga=function(){this.g&&Ya(this)};function Ya(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Za(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function Za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ry(u){let g="";return U(u,function(p,T){g+=T,g+=":",g+=p,g+=`\r
`}),g}function gg(u,g,p){e:{for(T in p){var T=!1;break e}T=!0}T||(p=ry(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Pt(u,g,p))}function rr(u){Ce.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(rr,Ce);var iU=/^https?$/i,oU=["POST","PUT"];t=rr.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vt.g(),this.v=this.o?qt(this.o):qt(vt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(z){ny(this,z);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)p.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())p.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oU,g,void 0))||T||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,pe]of p)this.g.setRequestHeader(z,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iy(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){ny(this,z)}};function ny(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Ay(u),vu(u)}function Ay(u){u.A||(u.A=!0,ye(u,"complete"),ye(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ye(this,"complete"),ye(this,"abort"),vu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vu(this,!0)),rr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sy(this):this.bb())},t.bb=function(){sy(this)};function sy(u){if(u.h&&typeof i<"u"&&(!u.v[1]||gA(u)!=4||u.Z()!=2)){if(u.u&&gA(u)==4)Ge(u.Ea,0,u);else if(ye(u,"readystatechange"),gA(u)==4){u.h=!1;try{const pe=u.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var T;if(T=pe===0){var M=String(u.D).match(qB)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),T=!iU.test(M?M.toLowerCase():"")}p=T}if(p)ye(u,"complete"),ye(u,"success");else{u.m=6;try{var z=2<gA(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",Ay(u)}}finally{vu(u)}}}}function vu(u,g){if(u.g){iy(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ye(u,"ready");try{p.onreadystatechange=T}catch{}}}function iy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function gA(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<gA(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),dt(g)}};function oy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function aU(u){const g={};u=(u.g&&2<=gA(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(w(u[T]))continue;var p=N(u[T]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=g[M]||[];g[M]=z,z.push(p)}v(g,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function el(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function ay(u){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=el("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=el("baseRetryDelayMs",5e3,u),this.cb=el("retryDelaySeedMs",1e4,u),this.Wa=el("forwardChannelMaxRetries",2,u),this.wa=el("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new VB(u&&u.concurrentRequestLimit),this.Da=new AU,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ay.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,T){Z(0),this.W=u,this.H=g||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=my(this,null,this.W),Cu(this)};function pg(u){if(ly(u),u.G==3){var g=u.U++,p=fA(u.I);if(Pt(p,"SID",u.K),Pt(p,"RID",g),Pt(p,"TYPE","terminate"),tl(u,p),g=new sr(u,u.j,g),g.L=2,g.v=wu(fA(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=g.v,p=!0),p||(g.g=wy(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ui(g)}py(u)}function xu(u){u.g&&(wg(u),u.g.cancel(),u.g=null)}function ly(u){xu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Iu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Cu(u){if(!KB(u.h)&&!u.s){u.s=!0;var g=u.Ga;We||Y(),Ae||(We(),Ae=!0),L.add(g,u),u.B=0}}function lU(u,g){return GB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=W(f(u.Ga,u,g),gy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new sr(this,this.j,u);let z=this.o;if(this.S&&(z?(z=C(z),Q(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=uy(this,M,g),p=fA(this.I),Pt(p,"RID",u),Pt(p,"CVER",22),this.D&&Pt(p,"X-HTTP-Session-Id",this.D),tl(this,p),z&&(this.O?g="headers="+encodeURIComponent(String(ry(z)))+"&"+g:this.m&&gg(p,this.m,z)),fg(this.h,M),this.Ua&&Pt(p,"TYPE","init"),this.P?(Pt(p,"$req",g),Pt(p,"SID","null"),M.T=!0,qA(M,p,null)):qA(M,p,g),this.G=2}}else this.G==3&&(u?cy(this,u):this.i.length==0||KB(this.h)||cy(this))};function cy(u,g){var p;g?p=g.l:p=u.U++;const T=fA(u.I);Pt(T,"SID",u.K),Pt(T,"RID",p),Pt(T,"AID",u.T),tl(u,T),u.m&&u.o&&gg(T,u.m,u.o),p=new sr(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=uy(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),fg(u.h,p),qA(p,T,g)}function tl(u,g){u.H&&U(u.H,function(p,T){Pt(g,T,p)}),u.l&&WB({},function(p,T){Pt(g,T,p)})}function uy(u,g,p){p=Math.min(u.i.length,p);var T=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let z=-1;for(;;){const pe=["count="+p];z==-1?0<p?(z=M[0].g,pe.push("ofs="+z)):z=0:pe.push("ofs="+z);let St=!0;for(let Tr=0;Tr<p;Tr++){let pt=M[Tr].g;const Lr=M[Tr].map;if(pt-=z,0>pt)z=Math.max(0,M[Tr].g-100),St=!1;else try{sU(Lr,pe,"req"+pt+"_")}catch{T&&T(Lr)}}if(St){T=pe.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,T}function dy(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;We||Y(),Ae||(We(),Ae=!0),L.add(g,u),u.v=0}}function mg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=W(f(u.Fa,u),gy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,hy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=W(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),xu(this),hy(this))};function wg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function hy(u){u.g=new sr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=fA(u.qa);Pt(g,"RID","rpc"),Pt(g,"SID",u.K),Pt(g,"AID",u.T),Pt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pt(g,"TO",u.ja),Pt(g,"TYPE","xmlhttp"),tl(u,g),u.m&&u.o&&gg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=wu(fA(g)),p.m=null,p.P=!0,nn(p,u)}t.Za=function(){this.C!=null&&(this.C=null,xu(this),mg(this),Z(19))};function Iu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function fy(u,g){var p=null;if(u.g==g){Iu(u),wg(u),u.g=null;var T=2}else if(hg(u.h,g))p=g.D,zB(u.h,g),T=1;else return;if(u.G!=0){if(g.o)if(T==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var M=u.B;T=oe(),ye(T,new J(T,p)),Cu(u)}else dy(u);else if(M=g.s,M==3||M==0&&0<g.X||!(T==1&&lU(u,g)||T==2&&mg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),M){case 1:fi(u,5);break;case 4:fi(u,10);break;case 3:fi(u,6);break;default:fi(u,2)}}}function gy(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function fi(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),T=u.Xa;const M=!T;T=new hi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pu(T,"https"),wu(T),M?rU(T.toString(),p):nU(T.toString(),p)}else Z(2);u.G=0,u.l&&u.l.sa(g),py(u),ly(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function py(u){if(u.G=0,u.ka=[],u.l){const g=$B(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ka,g),E(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function my(u,g,p){var T=p instanceof hi?fA(p):new hi(p);if(T.g!="")g&&(T.g=g+"."+T.g),mu(T,T.s);else{var M=a.location;T=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var z=new hi(null);T&&pu(z,T),g&&(z.g=g),M&&mu(z,M),p&&(z.l=p),T=z}return p=u.D,g=u.ya,p&&g&&Pt(T,p,g),Pt(T,"VER",u.la),tl(u,T),T}function wy(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new rr(new Bu({eb:p})):new rr(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function By(){}t=By.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _u(){}_u.prototype.g=function(u,g){return new gn(u,g)};function gn(u,g){Ce.call(this),this.g=new ay(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new lo(this)}y(gn,Ce),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){pg(this.g)},gn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Le(u),u=p);g.i.push(new zQ(g.Ya++,u)),g.G==3&&Cu(g)},gn.prototype.N=function(){this.g.l=null,delete this.j,pg(this.g),delete this.g,gn.aa.N.call(this)};function yy(u){q.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(yy,q);function vy(){V.call(this),this.status=1}y(vy,V);function lo(u){this.g=u}y(lo,By),lo.prototype.ua=function(){ye(this.g,"a")},lo.prototype.ta=function(u){ye(this.g,new yy(u))},lo.prototype.sa=function(u){ye(this.g,new vy)},lo.prototype.ra=function(){ye(this.g,"b")},_u.prototype.createWebChannel=_u.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,vb=function(){return new _u},yb=function(){return oe()},Bb=Ee,Um={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,Dd=wt,_t.COMPLETE="complete",wb=_t,D.EventType=G,G.OPEN="a",G.CLOSE="b",G.ERROR="c",G.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,El=D,rr.prototype.listenOnce=rr.prototype.L,rr.prototype.getLastError=rr.prototype.Ka,rr.prototype.getLastErrorCode=rr.prototype.Ba,rr.prototype.getStatus=rr.prototype.Z,rr.prototype.getResponseJson=rr.prototype.Oa,rr.prototype.getResponseText=rr.prototype.oa,rr.prototype.send=rr.prototype.ea,rr.prototype.setWithCredentials=rr.prototype.Ha,mb=rr}).apply(typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new xw("@firebase/firestore");function Co(){return Vs.logLevel}function UN(t){Vs.setLogLevel(t)}function re(t,...e){if(Vs.logLevel<=at.DEBUG){const r=e.map(_w);Vs.debug(`Firestore (${Sa}): ${t}`,...r)}}function cr(t,...e){if(Vs.logLevel<=at.ERROR){const r=e.map(_w);Vs.error(`Firestore (${Sa}): ${t}`,...r)}}function In(t,...e){if(Vs.logLevel<=at.WARN){const r=e.map(_w);Vs.warn(`Firestore (${Sa}): ${t}`,...r)}}function _w(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function ke(t,e){t||Te()}function SN(t,e){t||Te()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends VA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ir.UNAUTHENTICATED))}shutdown(){}}class kN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class RN{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){ke(this.o===void 0);let n=this.i;const A=o=>this.i!==n?(n=this.i,r(o)):Promise.resolve();let s=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Er,e.enqueueRetryable(()=>A(this.currentUser))};const i=()=>{const o=s;e.enqueueRetryable(async()=>{await o.promise,await A(this.currentUser)})},a=o=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Er)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ke(typeof n.accessToken=="string"),new xb(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new Ir(e)}}class NN{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DN{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new NN(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){ke(this.o===void 0);const n=s=>{s.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,re("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const A=s=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>A(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?A(s):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ke(typeof r.token=="string"),this.R=r.token,new Ib(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class LN{getToken(){return Promise.resolve(new Ib(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const A=jN(40);for(let s=0;s<A.length;++s)n.length<20&&A[s]<r&&(n+=e.charAt(A[s]%e.length))}return n}}function Je(t,e){return t<e?-1:t>e?1:0}function ca(t,e,r){return t.length===e.length&&t.every((n,A)=>r(n,e[A]))}function _b(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new te(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new te(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new te(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new $t(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new $t(0,0))}static max(){return new Ne(new $t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,r,n){r===void 0?r=0:r>e.length&&Te(),n===void 0?n=e.length-r:n>e.length-r&&Te(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ec.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ec?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let A=0;A<n;A++){const s=e.get(A),i=r.get(A);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class lt extends Ec{construct(e,r,n){return new lt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new te(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(A=>A.length>0))}return new lt(r)}static emptyPath(){return new lt([])}}const MN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Ec{construct(e,r,n){return new Mt(e,r,n)}static isValidIdentifier(e){return MN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mt(["__name__"])}static fromServerFormat(e){const r=[];let n="",A=0;const s=()=>{if(n.length===0)throw new te(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;A<e.length;){const a=e[A];if(a==="\\"){if(A+1===e.length)throw new te(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[A+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new te(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=o,A+=2}else a==="`"?(i=!i,A++):a!=="."||i?(n+=a,A++):(s(),A++)}if(s(),i)throw new te(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(r)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(lt.fromString(e))}static fromName(e){return new Be(lt.fromString(e).popFirst(5))}static empty(){return new Be(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return lt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new lt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,r,n,A){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=A}}function Sm(t){return t.fields.find(e=>e.kind===2)}function vi(t){return t.fields.filter(e=>e.kind!==2)}function ON(t,e){let r=Je(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=HN(t.fields[n],e.fields[n]),r!==0)return r;return Je(t.fields.length,e.fields.length)}ua.UNKNOWN_ID=-1;class Ri{constructor(e,r){this.fieldPath=e,this.kind=r}}function HN(t,e){const r=Mt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Je(t.kind,e.kind)}class da{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new da(0,_n.min())}}function Eb(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,A=Ne.fromTimestamp(n===1e9?new $t(r+1,0):new $t(r,n));return new _n(A,Be.empty(),e)}function bb(t){return new _n(t.readTime,t.key,-1)}class _n{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new _n(Ne.min(),Be.empty(),-1)}static max(){return new _n(Ne.max(),Be.empty(),-1)}}function bw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Be.comparator(t.documentKey,e.documentKey),r!==0?r:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ni(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==Tb)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new j((n,A)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,A)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,A)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof j?r:j.resolve(r)}catch(r){return j.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):j.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):j.reject(r)}static resolve(e){return new j((r,n)=>{r(e)})}static reject(e){return new j((r,n)=>{n(e)})}static waitFor(e){return new j((r,n)=>{let A=0,s=0,i=!1;e.forEach(a=>{++A,a.next(()=>{++s,i&&s===A&&r()},o=>n(o))}),i=!0,s===A&&r()})}static or(e){let r=j.resolve(!1);for(const n of e)r=r.next(A=>A?j.resolve(A):n());return r}static forEach(e,r){const n=[];return e.forEach((A,s)=>{n.push(r.call(this,A,s))}),this.waitFor(n)}static mapArray(e,r){return new j((n,A)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const c=o;r(e[c]).next(d=>{i[c]=d,++a,a===s&&n(i)},d=>A(d))}})}static doWhile(e,r){return new j((n,A)=>{const s=()=>{e()===!0?r().next(()=>{s()},A):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Er,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new $l(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const A=Tw(n.target.error);this.V.reject(new $l(e,A))}}static open(e,r,n,A){try{return new bf(r,e.transaction(A,n))}catch(s){throw new $l(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new KN(r)}}class oA{constructor(e,r,n){this.name=e,this.version=r,this.p=n,oA.S(wr())===12.2&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return re("SimpleDb","Removing database:",e),xi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cb())return!1;if(oA.v())return!0;const e=wr(),r=oA.S(e),n=0<r&&r<10,A=Qb(e),s=0<A&&A<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(re("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const A=indexedDB.open(this.name,this.version);A.onsuccess=s=>{const i=s.target.result;r(i)},A.onblocked=()=>{n(new $l(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new te(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new te(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new $l(e,i))},A.onupgradeneeded=s=>{re("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,A.transaction,s.oldVersion,this.version).next(()=>{re("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,A){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const a=bf.open(this.db,e,s?"readonly":"readwrite",n),o=A(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),j.reject(c))).toPromise();return o.catch(()=>{}),await a.m,o}catch(a){const o=a,c=o.name!=="FirebaseError"&&i<3;if(re("SimpleDb","Transaction failed with error:",o.message,"Retrying:",c),this.close(),!c)return Promise.reject(o)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Qb(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class VN{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xi(this.B.delete())}}class $l extends te{constructor(e,r){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ai(t){return t.name==="IndexedDbTransactionError"}class KN{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(re("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(re("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xi(n)}add(e){return re("SimpleDb","ADD",this.store.name,e,e),xi(this.store.add(e))}get(e){return xi(this.store.get(e)).next(r=>(r===void 0&&(r=null),re("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return re("SimpleDb","DELETE",this.store.name,e),xi(this.store.delete(e))}count(){return re("SimpleDb","COUNT",this.store.name),xi(this.store.count())}U(e,r){const n=this.options(e,r),A=n.index?this.store.index(n.index):this.store;if(typeof A.getAll=="function"){const s=A.getAll(n.range);return new j((i,a)=>{s.onerror=o=>{a(o.target.error)},s.onsuccess=o=>{i(o.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(a,o)=>{i.push(o)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new j((A,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{A(i.target.result)}})}j(e,r){re("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const A=this.cursor(n);return this.W(A,(s,i,a)=>a.delete())}J(e,r){let n;r?n=e:(n={},r=e);const A=this.cursor(n);return this.W(A,r)}Y(e){const r=this.cursor({});return new j((n,A)=>{r.onerror=s=>{const i=Tw(s.target.error);A(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():n()}):n()}})}W(e,r){const n=[];return new j((A,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void A();const o=new VN(a),c=r(a.primaryKey,a.value,o);if(c instanceof j){const d=c.catch(h=>(o.done(),j.reject(h)));n.push(d)}o.isDone?A():o.K===null?a.continue():a.continue(o.K)}}).next(()=>j.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function xi(t){return new j((e,r)=>{t.onsuccess=n=>{const A=n.target.result;e(A)},t.onerror=n=>{const A=Tw(n.target.error);r(A)}})}let Zv=!1;function Tw(t){const e=oA.S(wr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zv||(Zv=!0,setTimeout(()=>{throw n},0)),n}}return t}class GN{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){re("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{re("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Ai(r)?re("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ni(r)}await this.X(6e4)})}}class zN{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let A=r,s=!0;return j.doWhile(()=>s===!0&&A>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return re("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,A).next(a=>{A-=a,n.add(i)});s=!1})).next(()=>r-A)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(A=>this.localStore.localDocuments.getNextDocuments(e,r,A,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(A,s)).next(a=>(re("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,r,a))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((A,s)=>{const i=bb(s);bw(i,n)>0&&(n=i)}),new _n(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ln.oe=-1;function Jc(t){return t==null}function bc(t){return t===0&&1/t==-1/0}function Ub(t){return typeof t=="number"&&Number.isInteger(t)&&!bc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=ex(e)),e=$N(t.get(r),e);return ex(e)}function $N(t,e){let r=e;const n=t.length;for(let A=0;A<n;A++){const s=t.charAt(A);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function ex(t){return t+""}function nA(t){const e=t.length;if(ke(e>=2),e===2)return ke(t.charAt(0)===""&&t.charAt(1)===""),lt.emptyPath();const r=e-2,n=[];let A="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&Te(),t.charAt(i+1)){case"":const a=t.substring(s,i);let o;A.length===0?o=a:(A+=a,o=A,A=""),n.push(o);break;case"":A+=t.substring(s,i),A+="\0";break;case"":A+=t.substring(s,i+1);break;default:Te()}s=i+2}return new lt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e){return[t,$r(e)]}function Sb(t,e,r){return[t,$r(e),r]}const WN={},qN=["prefixPath","collectionGroup","readTime","documentId"],JN=["prefixPath","collectionGroup","documentId"],XN=["collectionGroup","readTime","prefixPath","documentId"],YN=["canonicalId","targetId"],ZN=["targetId","path"],e4=["path","targetId"],t4=["collectionId","parent"],r4=["indexId","uid"],n4=["uid","sequenceNumber"],A4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],s4=["indexId","uid","orderedDocumentKey"],i4=["userId","collectionPath","documentId"],o4=["userId","collectionPath","largestBatchId"],a4=["userId","collectionGroup","largestBatchId"],kb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],l4=[...kb,"documentOverlays"],Rb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nb=Rb,Fw=[...Nb,"indexConfiguration","indexState","indexEntries"],c4=Fw,u4=[...Fw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends Fb{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Br(t,e){const r=ge(t);return oA.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function si(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Db(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function Pb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,r){this.comparator=e,this.root=r||Sr.EMPTY}insert(e,r){return new Dt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const A=this.comparator(e,n.key);if(A===0)return r+n.left.size;A<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gu(this.root,e,this.comparator,!0)}}class Gu{constructor(e,r,n,A){this.isReverse=A,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&A&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sr{constructor(e,r,n,A,s){this.key=e,this.value=r,this.color=n??Sr.RED,this.left=A??Sr.EMPTY,this.right=s??Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,A,s){return new Sr(e??this.key,r??this.value,n??this.color,A??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let A=this;const s=n(e,A.key);return A=s<0?A.copy(null,null,null,A.left.insert(e,r,n),null):s===0?A.copy(null,r,null,null,null):A.copy(null,null,null,null,A.right.insert(e,r,n)),A.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,A=this;if(r(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,r),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),r(e,A.key)===0){if(A.right.isEmpty())return Sr.EMPTY;n=A.right.min(),A=A.copy(n.key,n.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,r))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,r,n,A,s){return this}insert(e,r,n){return new Sr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const A=n.getNext();if(this.comparator(A.key,e[1])>=0)return;r(A.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new nx(this.data.getIterator())}getIteratorFrom(e){return new nx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const A=r.getNext().key,s=n.getNext().key;if(this.comparator(A,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new bt(this.comparator);return r.data=e,r}}class nx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ho(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new cn([])}unionWith(e){let r=new bt(Mt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new cn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(A){try{return atob(A)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lb("Invalid base64 string: "+s):s}}(e);return new tr(r)}static fromUint8Array(e){const r=function(A){let s="";for(let i=0;i<A.length;++i)s+=String.fromCharCode(A[i]);return s}(e);return new tr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let A=0;A<r.length;A++)n[A]=r.charCodeAt(A);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const h4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function DA(t){if(ke(!!t),typeof t=="string"){let e=0;const r=h4.exec(t);if(ke(!!r),r[1]){let A=r[1];A=(A+"000000000").substr(0,9),e=Number(A)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Kt(t.seconds),nanos:Kt(t.nanos)}}function Kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function PA(t){return typeof t=="string"?tr.fromBase64String(t):tr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ff(t){const e=t.mapValue.fields.__previous_value__;return Tf(e)?Ff(e):e}function Tc(t){const e=DA(t.mapValue.fields.__local_write_time__.timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,r,n,A,s,i,a,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=A,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class Ks{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ks("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ks&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ld={nullValue:"NULL_VALUE"};function Gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tf(t)?4:jb(t)?9007199254740991:Qf(t)?10:11:Te()}function uA(t,e){if(t===e)return!0;const r=Gs(t);if(r!==Gs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tc(t).isEqual(Tc(e));case 3:return function(A,s){if(typeof A.timestampValue=="string"&&typeof s.timestampValue=="string"&&A.timestampValue.length===s.timestampValue.length)return A.timestampValue===s.timestampValue;const i=DA(A.timestampValue),a=DA(s.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(A,s){return PA(A.bytesValue).isEqual(PA(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(A,s){return Kt(A.geoPointValue.latitude)===Kt(s.geoPointValue.latitude)&&Kt(A.geoPointValue.longitude)===Kt(s.geoPointValue.longitude)}(t,e);case 2:return function(A,s){if("integerValue"in A&&"integerValue"in s)return Kt(A.integerValue)===Kt(s.integerValue);if("doubleValue"in A&&"doubleValue"in s){const i=Kt(A.doubleValue),a=Kt(s.doubleValue);return i===a?bc(i)===bc(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return ca(t.arrayValue.values||[],e.arrayValue.values||[],uA);case 10:case 11:return function(A,s){const i=A.mapValue.fields||{},a=s.mapValue.fields||{};if(rx(i)!==rx(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!uA(i[o],a[o])))return!1;return!0}(t,e);default:return Te()}}function Fc(t,e){return(t.values||[]).find(r=>uA(r,e))!==void 0}function zs(t,e){if(t===e)return 0;const r=Gs(t),n=Gs(e);if(r!==n)return Je(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return function(s,i){const a=Kt(s.integerValue||s.doubleValue),o=Kt(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return Ax(t.timestampValue,e.timestampValue);case 4:return Ax(Tc(t),Tc(e));case 5:return Je(t.stringValue,e.stringValue);case 6:return function(s,i){const a=PA(s),o=PA(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const a=s.split("/"),o=i.split("/");for(let c=0;c<a.length&&c<o.length;c++){const d=Je(a[c],o[c]);if(d!==0)return d}return Je(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const a=Je(Kt(s.latitude),Kt(i.latitude));return a!==0?a:Je(Kt(s.longitude),Kt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sx(t.arrayValue,e.arrayValue);case 10:return function(s,i){var a,o,c,d;const h=s.fields||{},f=i.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(o=f.value)===null||o===void 0?void 0:o.arrayValue,B=Je(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return B!==0?B:sx(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===ys.mapValue&&i===ys.mapValue)return 0;if(s===ys.mapValue)return 1;if(i===ys.mapValue)return-1;const a=s.fields||{},o=Object.keys(a),c=i.fields||{},d=Object.keys(c);o.sort(),d.sort();for(let h=0;h<o.length&&h<d.length;++h){const f=Je(o[h],d[h]);if(f!==0)return f;const m=zs(a[o[h]],c[d[h]]);if(m!==0)return m}return Je(o.length,d.length)}(t.mapValue,e.mapValue);default:throw Te()}}function Ax(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const r=DA(t),n=DA(e),A=Je(r.seconds,n.seconds);return A!==0?A:Je(r.nanos,n.nanos)}function sx(t,e){const r=t.values||[],n=e.values||[];for(let A=0;A<r.length&&A<n.length;++A){const s=zs(r[A],n[A]);if(s)return s}return Je(r.length,n.length)}function ha(t){return Rm(t)}function Rm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=DA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return PA(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Be.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",A=!0;for(const s of r.values||[])A?A=!1:n+=",",n+=Rm(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let A="{",s=!0;for(const i of n)s?s=!1:A+=",",A+=`${i}:${Rm(r.fields[i])}`;return A+"}"}(t.mapValue):Te()}function jd(t){switch(Gs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ff(t);return e?16+jd(e):16;case 5:return 2*t.stringValue.length;case 6:return PA(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((A,s)=>A+jd(s),0)}(t.arrayValue);case 10:case 11:return function(n){let A=0;return si(n.fields,(s,i)=>{A+=s.length+jd(i)}),A}(t.mapValue);default:throw Te()}}function Vi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nm(t){return!!t&&"integerValue"in t}function Qc(t){return!!t&&"arrayValue"in t}function ix(t){return!!t&&"nullValue"in t}function ox(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Md(t){return!!t&&"mapValue"in t}function Qf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return si(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Wl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Wl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function jb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Mb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function g4(t){return"nullValue"in t?Ld:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vi(Ks.empty(),Be.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Qf(t)?Mb:{mapValue:{}}:Te()}function p4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vi(Ks.empty(),Be.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Mb:"mapValue"in t?Qf(t)?{mapValue:{}}:ys:Te()}function ax(t,e){const r=zs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function lx(t,e){const r=zs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.value=e}static empty(){return new kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Md(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(r)}setAll(e){let r=Mt.emptyPath(),n={},A=[];e.forEach((i,a)=>{if(!r.isImmediateParentOf(a)){const o=this.getFieldsMap(r);this.applyChanges(o,n,A),n={},A=[],r=a.popLast()}i?n[a.lastSegment()]=Wl(i):A.push(a.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,A)}delete(e){const r=this.field(e.popLast());Md(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return uA(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let A=r.mapValue.fields[e.get(n)];Md(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=A),r=A}return r.mapValue.fields}applyChanges(e,r,n){si(r,(A,s)=>e[A]=s);for(const A of n)delete e[A]}clone(){return new kr(Wl(this.value))}}function Ob(t){const e=[];return si(t.fields,(r,n)=>{const A=new Mt([r]);if(Md(n)){const s=Ob(n.mapValue).fields;if(s.length===0)e.push(A);else for(const i of s)e.push(A.child(i))}else e.push(A)}),new cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r,n,A,s,i,a){this.key=e,this.documentType=r,this.version=n,this.readTime=A,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,Ne.min(),Ne.min(),Ne.min(),kr.empty(),0)}static newFoundDocument(e,r,n,A){return new jt(e,1,r,Ne.min(),n,A,0)}static newNoDocument(e,r){return new jt(e,2,r,Ne.min(),Ne.min(),kr.empty(),0)}static newUnknownDocument(e,r){return new jt(e,3,r,Ne.min(),Ne.min(),kr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,r){this.position=e,this.inclusive=r}}function cx(t,e,r){let n=0;for(let A=0;A<t.position.length;A++){const s=e[A],i=t.position[A];if(s.field.isKeyField()?n=Be.comparator(Be.fromName(i.referenceValue),r.key):n=zs(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function ux(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!uA(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,r="asc"){this.field=e,this.dir=r}}function m4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{}class ct extends Hb{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new w4(e,r,n):r==="array-contains"?new v4(e,n):r==="in"?new Wb(e,n):r==="not-in"?new x4(e,n):r==="array-contains-any"?new C4(e,n):new ct(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new B4(e,n):new y4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(zs(r,this.value)):r!==null&&Gs(this.value)===Gs(r)&&this.matchesComparison(zs(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xt extends Hb{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new xt(e,r)}matches(e){return fa(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fa(t){return t.op==="and"}function Dm(t){return t.op==="or"}function Qw(t){return Vb(t)&&fa(t)}function Vb(t){for(const e of t.filters)if(e instanceof xt)return!1;return!0}function Pm(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+ha(t.value);if(Qw(t))return t.filters.map(e=>Pm(e)).join(",");{const e=t.filters.map(r=>Pm(r)).join(",");return`${t.op}(${e})`}}function Kb(t,e){return t instanceof ct?function(n,A){return A instanceof ct&&n.op===A.op&&n.field.isEqual(A.field)&&uA(n.value,A.value)}(t,e):t instanceof xt?function(n,A){return A instanceof xt&&n.op===A.op&&n.filters.length===A.filters.length?n.filters.reduce((s,i,a)=>s&&Kb(i,A.filters[a]),!0):!1}(t,e):void Te()}function Gb(t,e){const r=t.filters.concat(e);return xt.create(r,t.op)}function zb(t){return t instanceof ct?function(r){return`${r.field.canonicalString()} ${r.op} ${ha(r.value)}`}(t):t instanceof xt?function(r){return r.op.toString()+" {"+r.getFilters().map(zb).join(" ,")+"}"}(t):"Filter"}class w4 extends ct{constructor(e,r,n){super(e,r,n),this.key=Be.fromName(n.referenceValue)}matches(e){const r=Be.comparator(e.key,this.key);return this.matchesComparison(r)}}class B4 extends ct{constructor(e,r){super(e,"in",r),this.keys=$b("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class y4 extends ct{constructor(e,r){super(e,"not-in",r),this.keys=$b("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function $b(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Be.fromName(n.referenceValue))}class v4 extends ct{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Qc(r)&&Fc(r.arrayValue,this.value)}}class Wb extends ct{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Fc(this.value.arrayValue,r)}}class x4 extends ct{constructor(e,r){super(e,"not-in",r)}matches(e){if(Fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Fc(this.value.arrayValue,r)}}class C4 extends ct{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Qc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Fc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,r=null,n=[],A=[],s=null,i=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=A,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Lm(t,e=null,r=[],n=[],A=null,s=null,i=null){return new I4(t,e,r,n,A,s,i)}function Ki(t){const e=ge(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Pm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Jc(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ha(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ha(n)).join(",")),e.ue=r}return e.ue}function Xc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!m4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Kb(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ux(t.startAt,e.startAt)&&ux(t.endAt,e.endAt)}function Fh(t){return Be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Qh(t,e){return t.filters.filter(r=>r instanceof ct&&r.field.isEqual(e))}function dx(t,e,r){let n=Ld,A=!0;for(const s of Qh(t,e)){let i=Ld,a=!0;switch(s.op){case"<":case"<=":i=g4(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,a=!1;break;case"!=":case"not-in":i=Ld}ax({value:n,inclusive:A},{value:i,inclusive:a})<0&&(n=i,A=a)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];ax({value:n,inclusive:A},{value:i,inclusive:r.inclusive})<0&&(n=i,A=r.inclusive);break}}return{value:n,inclusive:A}}function hx(t,e,r){let n=ys,A=!0;for(const s of Qh(t,e)){let i=ys,a=!0;switch(s.op){case">=":case">":i=p4(s.value),a=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,a=!1;break;case"!=":case"not-in":i=ys}lx({value:n,inclusive:A},{value:i,inclusive:a})>0&&(n=i,A=a)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];lx({value:n,inclusive:A},{value:i,inclusive:r.inclusive})>0&&(n=i,A=r.inclusive);break}}return{value:n,inclusive:A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,r=null,n=[],A=[],s=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=A,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qb(t,e,r,n,A,s,i,a){return new KA(t,e,r,n,A,s,i,a)}function ka(t){return new KA(t)}function fx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Uw(t){return t.collectionGroup!==null}function qo(t){const e=ge(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new bt(Mt.comparator);return i.filters.forEach(o=>{o.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Uc(s,n))}),r.has(Mt.keyField().canonicalString())||e.ce.push(new Uc(Mt.keyField(),n))}return e.ce}function Wr(t){const e=ge(t);return e.le||(e.le=Xb(e,qo(t))),e.le}function Jb(t){const e=ge(t);return e.he||(e.he=Xb(e,t.explicitOrderBy)),e.he}function Xb(t,e){if(t.limitType==="F")return Lm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(A=>{const s=A.dir==="desc"?"asc":"desc";return new Uc(A.field,s)});const r=t.endAt?new $s(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new $s(t.startAt.position,t.startAt.inclusive):null;return Lm(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function jm(t,e){const r=t.filters.concat([e]);return new KA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Uh(t,e,r){return new KA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Yc(t,e){return Xc(Wr(t),Wr(e))&&t.limitType===e.limitType}function Yb(t){return`${Ki(Wr(t))}|lt:${t.limitType}`}function Io(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(A=>zb(A)).join(", ")}]`),Jc(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(A=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(A)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(A=>ha(A)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(A=>ha(A)).join(",")),`Target(${n})`}(Wr(t))}; limitType=${t.limitType})`}function Zc(t,e){return e.isFoundDocument()&&function(n,A){const s=A.key.path;return n.collectionGroup!==null?A.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Be.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,A){for(const s of qo(n))if(!s.field.isKeyField()&&A.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,A){for(const s of n.filters)if(!s.matches(A))return!1;return!0}(t,e)&&function(n,A){return!(n.startAt&&!function(i,a,o){const c=cx(i,a,o);return i.inclusive?c<=0:c<0}(n.startAt,qo(n),A)||n.endAt&&!function(i,a,o){const c=cx(i,a,o);return i.inclusive?c>=0:c>0}(n.endAt,qo(n),A))}(t,e)}function Zb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function e1(t){return(e,r)=>{let n=!1;for(const A of qo(t)){const s=_4(A,e,r);if(s!==0)return s;n=n||A.field.isKeyField()}return 0}}function _4(t,e,r){const n=t.field.isKeyField()?Be.comparator(e.key,r.key):function(s,i,a){const o=i.data.field(s),c=a.data.field(s);return o!==null&&c!==null?zs(o,c):Te()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[A,s]of n)if(this.equalsFn(A,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),A=this.inner[n];if(A===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<A.length;s++)if(this.equalsFn(A[s][0],e))return void(A[s]=[e,r]);A.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let A=0;A<n.length;A++)if(this.equalsFn(n[A][0],e))return n.length===1?delete this.inner[r]:n.splice(A,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(r,n)=>{for(const[A,s]of n)e(A,s)})}isEmpty(){return Pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new Dt(Be.comparator);function un(){return E4}const t1=new Dt(Be.comparator);function bl(...t){let e=t1;for(const r of t)e=e.insert(r.key,r);return e}function r1(t){let e=t1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function AA(){return ql()}function n1(){return ql()}function ql(){return new GA(t=>t.toString(),(t,e)=>t.isEqual(e))}const b4=new Dt(Be.comparator),T4=new bt(Be.comparator);function rt(...t){let e=T4;for(const r of t)e=e.add(r);return e}const F4=new bt(Je);function Sw(){return F4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bc(e)?"-0":e}}function A1(t){return{integerValue:""+t}}function s1(t,e){return Ub(e)?A1(e):kw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this._=void 0}}function Q4(t,e,r){return t instanceof ga?function(A,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return s&&Tf(s)&&(s=Ff(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof Gi?o1(t,e):t instanceof zi?a1(t,e):function(A,s){const i=i1(A,s),a=gx(i)+gx(A.Pe);return Nm(i)&&Nm(A.Pe)?A1(a):kw(A.serializer,a)}(t,e)}function U4(t,e,r){return t instanceof Gi?o1(t,e):t instanceof zi?a1(t,e):r}function i1(t,e){return t instanceof pa?function(n){return Nm(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class ga extends Uf{}class Gi extends Uf{constructor(e){super(),this.elements=e}}function o1(t,e){const r=l1(e);for(const n of t.elements)r.some(A=>uA(A,n))||r.push(n);return{arrayValue:{values:r}}}class zi extends Uf{constructor(e){super(),this.elements=e}}function a1(t,e){let r=l1(e);for(const n of t.elements)r=r.filter(A=>!uA(A,n));return{arrayValue:{values:r}}}class pa extends Uf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function gx(t){return Kt(t.integerValue||t.doubleValue)}function l1(t){return Qc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,r){this.field=e,this.transform=r}}function S4(t,e){return t.field.isEqual(e.field)&&function(n,A){return n instanceof Gi&&A instanceof Gi||n instanceof zi&&A instanceof zi?ca(n.elements,A.elements,uA):n instanceof pa&&A instanceof pa?uA(n.Pe,A.Pe):n instanceof ga&&A instanceof ga}(t.transform,e.transform)}class k4{constructor(e,r){this.version=e,this.transformResults=r}}class zt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sf{}function c1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Na(t.key,zt.none()):new Ra(t.key,t.data,zt.none());{const r=t.data,n=kr.empty();let A=new bt(Mt.comparator);for(let s of e.fields)if(!A.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),A=A.add(s)}return new zA(t.key,n,new cn(A.toArray()),zt.none())}}function R4(t,e,r){t instanceof Ra?function(A,s,i){const a=A.value.clone(),o=mx(A.fieldTransforms,s,i.transformResults);a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):t instanceof zA?function(A,s,i){if(!Od(A.precondition,s))return void s.convertToUnknownDocument(i.version);const a=mx(A.fieldTransforms,s,i.transformResults),o=s.data;o.setAll(u1(A)),o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):function(A,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Jl(t,e,r,n){return t instanceof Ra?function(s,i,a,o){if(!Od(s.precondition,i))return a;const c=s.value.clone(),d=wx(s.fieldTransforms,o,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof zA?function(s,i,a,o){if(!Od(s.precondition,i))return a;const c=wx(s.fieldTransforms,o,i),d=i.data;return d.setAll(u1(s)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,i,a){return Od(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,r)}function N4(t,e){let r=null;for(const n of t.fieldTransforms){const A=e.data.field(n.field),s=i1(n.transform,A||null);s!=null&&(r===null&&(r=kr.empty()),r.set(n.field,s))}return r||null}function px(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,A){return n===void 0&&A===void 0||!(!n||!A)&&ca(n,A,(s,i)=>S4(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ra extends Sf{constructor(e,r,n,A=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class zA extends Sf{constructor(e,r,n,A,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=A,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function u1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function mx(t,e,r){const n=new Map;ke(t.length===r.length);for(let A=0;A<r.length;A++){const s=t[A],i=s.transform,a=e.data.field(s.field);n.set(s.field,U4(i,a,r[A]))}return n}function wx(t,e,r){const n=new Map;for(const A of t){const s=A.transform,i=r.data.field(A.field);n.set(A.field,Q4(s,i,e))}return n}class Na extends Sf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rw extends Sf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,r,n,A){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=A}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let A=0;A<this.mutations.length;A++){const s=this.mutations[A];s.key.isEqual(e.key)&&R4(s,e,n[A])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Jl(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Jl(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=n1();return this.mutations.forEach(A=>{const s=e.get(A.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=r.has(A.key)?null:a;const o=c1(i,a);o!==null&&n.set(A.key,o),i.isValidDocument()||i.convertToNoDocument(Ne.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),rt())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,(r,n)=>px(r,n))&&ca(this.baseMutations,e.baseMutations,(r,n)=>px(r,n))}}class Dw{constructor(e,r,n,A){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=A}static from(e,r,n){ke(e.mutations.length===n.length);let A=function(){return b4}();const s=e.mutations;for(let i=0;i<s.length;i++)A=A.insert(s[i].key,n[i].version);return new Dw(e,r,n,A)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr,ht;function h1(t){switch(t){default:return Te();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function f1(t){if(t===void 0)return cr("GRPC error has no .code"),K.UNKNOWN;switch(t){case dr.OK:return K.OK;case dr.CANCELLED:return K.CANCELLED;case dr.UNKNOWN:return K.UNKNOWN;case dr.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case dr.INTERNAL:return K.INTERNAL;case dr.UNAVAILABLE:return K.UNAVAILABLE;case dr.UNAUTHENTICATED:return K.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case dr.NOT_FOUND:return K.NOT_FOUND;case dr.ALREADY_EXISTS:return K.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return K.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case dr.ABORTED:return K.ABORTED;case dr.OUT_OF_RANGE:return K.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return K.UNIMPLEMENTED;case dr.DATA_LOSS:return K.DATA_LOSS;default:return Te()}}(ht=dr||(dr={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new ki([4294967295,4294967295],0);function Bx(t){const e=g1().encode(t),r=new pb;return r.update(e),new Uint8Array(r.digest())}function yx(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),A=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ki([r,n],0),new ki([A,s],0)]}class Lw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Tl(`Invalid padding: ${r}`);if(n<0)throw new Tl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=ki.fromNumber(this.Ie)}Ee(e,r,n){let A=e.add(r.multiply(ki.fromNumber(n)));return A.compare(P4)===1&&(A=new ki([A.getBits(0),A.getBits(1)],0)),A.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Bx(e),[n,A]=yx(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,A,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const A=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Lw(s,A,r);return n.forEach(a=>i.insert(a)),i}insert(e){if(this.Ie===0)return;const r=Bx(e),[n,A]=yx(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,A,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,r,n,A,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=A,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const A=new Map;return A.set(e,ru.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new tu(Ne.min(),A,new Dt(Je),un(),rt())}}class ru{constructor(e,r,n,A,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=A,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new ru(n,r,rt(),rt(),rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r,n,A){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=A}}class p1{constructor(e,r){this.targetId=e,this.me=r}}class m1{constructor(e,r,n=tr.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=A}}class vx{constructor(){this.fe=0,this.ge=Cx(),this.pe=tr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=rt(),r=rt(),n=rt();return this.ge.forEach((A,s)=>{switch(s){case 0:e=e.add(A);break;case 2:r=r.add(A);break;case 1:n=n.add(A);break;default:Te()}}),new ru(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Cx()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class L4{constructor(e){this.Le=e,this.Be=new Map,this.ke=un(),this.qe=xx(),this.Qe=new Dt(Je)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,A)=>{this.ze(A)&&r(A)})}He(e){const r=e.targetId,n=e.me.count,A=this.Je(r);if(A){const s=A.target;if(Fh(s))if(n===0){const i=new Be(s.path);this.Ue(r,i,jt.newNoDocument(i,Ne.min()))}else ke(n===1);else{const i=this.Ye(r);if(i!==n){const a=this.Ze(e),o=a?this.Xe(a,e,i):1;if(o!==0){this.je(r);const c=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Sh==null||Sh.et(function(d,h,f,m,y){var B,E,x,w,I,F;const R={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},U=h.unchangedNames;return U&&(R.bloomFilter={applied:y===0,hashCount:(B=U==null?void 0:U.hashCount)!==null&&B!==void 0?B:0,bitmapLength:(w=(x=(E=U==null?void 0:U.bits)===null||E===void 0?void 0:E.bitmap)===null||x===void 0?void 0:x.length)!==null&&w!==void 0?w:0,padding:(F=(I=U==null?void 0:U.bits)===null||I===void 0?void 0:I.padding)!==null&&F!==void 0?F:0,mightContain:v=>{var C;return(C=m==null?void 0:m.mightContain(v))!==null&&C!==void 0&&C}}),R}(i,e.me,this.Le.tt(),a,o))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:A=0},hashCount:s=0}=r;let i,a;try{i=PA(n).toUint8Array()}catch(o){if(o instanceof Lb)return In("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Lw(i,A,s)}catch(o){return In(o instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let A=0;return n.forEach(s=>{const i=this.Le.tt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,s,null),A++)}),A}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const a=this.Je(i);if(a){if(s.current&&Fh(a.target)){const o=new Be(a.target.path);this.ke.get(o)!==null||this.it(i,o)||this.Ue(i,o,jt.newNoDocument(o,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=rt();this.qe.forEach((s,i)=>{let a=!0;i.forEachWhile(o=>{const c=this.Je(o);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const A=new tu(e,r,this.Qe,this.ke,n);return this.ke=un(),this.qe=xx(),this.Qe=new Dt(Je),A}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const A=this.Ge(e);this.it(e,r)?A.Fe(r,1):A.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new vx,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new bt(Je),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||re("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vx),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function xx(){return new Dt(Be.comparator)}function Cx(){return new Dt(Be.comparator)}const j4={asc:"ASCENDING",desc:"DESCENDING"},M4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},O4={and:"AND",or:"OR"};class H4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Mm(t,e){return t.useProto3Json||Jc(e)?e:{value:e}}function ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function V4(t,e){return ma(t,e.toTimestamp())}function ur(t){return ke(!!t),Ne.fromTimestamp(function(r){const n=DA(r);return new $t(n.seconds,n.nanos)}(t))}function jw(t,e){return Om(t,e).canonicalString()}function Om(t,e){const r=function(A){return new lt(["projects",A.projectId,"databases",A.database])}(t).child("documents");return e===void 0?r:r.child(e)}function B1(t){const e=lt.fromString(t);return ke(F1(e)),e}function Sc(t,e){return jw(t.databaseId,e.path)}function aA(t,e){const r=B1(e);if(r.get(1)!==t.databaseId.projectId)throw new te(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new te(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Be(x1(r))}function y1(t,e){return jw(t.databaseId,e)}function v1(t){const e=B1(t);return e.length===4?lt.emptyPath():x1(e)}function Hm(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function x1(t){return ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ix(t,e,r){return{name:Sc(t,e),fields:r.value.mapValue.fields}}function C1(t,e,r){const n=aA(t,e.name),A=ur(e.updateTime),s=e.createTime?ur(e.createTime):Ne.min(),i=new kr({mapValue:{fields:e.fields}}),a=jt.newFoundDocument(n,A,s,i);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function K4(t,e){return"found"in e?function(n,A){ke(!!A.found),A.found.name,A.found.updateTime;const s=aA(n,A.found.name),i=ur(A.found.updateTime),a=A.found.createTime?ur(A.found.createTime):Ne.min(),o=new kr({mapValue:{fields:A.found.fields}});return jt.newFoundDocument(s,i,a,o)}(t,e):"missing"in e?function(n,A){ke(!!A.missing),ke(!!A.readTime);const s=aA(n,A.missing),i=ur(A.readTime);return jt.newNoDocument(s,i)}(t,e):Te()}function G4(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(ke(d===void 0||typeof d=="string"),tr.fromBase64String(d||"")):(ke(d===void 0||d instanceof Buffer||d instanceof Uint8Array),tr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const d=c.code===void 0?K.UNKNOWN:f1(c.code);return new te(d,c.message||"")}(i);r=new m1(n,A,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const A=aA(t,n.document.name),s=ur(n.document.updateTime),i=n.document.createTime?ur(n.document.createTime):Ne.min(),a=new kr({mapValue:{fields:n.document.fields}}),o=jt.newFoundDocument(A,s,i,a),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Hd(c,d,o.key,o)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const A=aA(t,n.document),s=n.readTime?ur(n.readTime):Ne.min(),i=jt.newNoDocument(A,s),a=n.removedTargetIds||[];r=new Hd([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const A=aA(t,n.document),s=n.removedTargetIds||[];r=new Hd([],s,A,null)}else{if(!("filter"in e))return Te();{e.filter;const n=e.filter;n.targetId;const{count:A=0,unchangedNames:s}=n,i=new D4(A,s),a=n.targetId;r=new p1(a,i)}}return r}function kc(t,e){let r;if(e instanceof Ra)r={update:Ix(t,e.key,e.value)};else if(e instanceof Na)r={delete:Sc(t,e.key)};else if(e instanceof zA)r={update:Ix(t,e.key,e.data),updateMask:X4(e.fieldMask)};else{if(!(e instanceof Rw))return Te();r={verify:Sc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const a=i.transform;if(a instanceof ga)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof pa)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw Te()}(0,n))),e.precondition.isNone||(r.currentDocument=function(A,s){return s.updateTime!==void 0?{updateTime:V4(A,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te()}(t,e.precondition)),r}function Vm(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?zt.updateTime(ur(s.updateTime)):s.exists!==void 0?zt.exists(s.exists):zt.none()}(e.currentDocument):zt.none(),n=e.updateTransforms?e.updateTransforms.map(A=>function(i,a){let o=null;if("setToServerValue"in a)ke(a.setToServerValue==="REQUEST_TIME"),o=new ga;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];o=new Gi(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];o=new zi(d)}else"increment"in a?o=new pa(i,a.increment):Te();const c=Mt.fromServerFormat(a.fieldPath);return new eu(c,o)}(t,A)):[];if(e.update){e.update.name;const A=aA(t,e.update.name),s=new kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(o){const c=o.fieldPaths||[];return new cn(c.map(d=>Mt.fromServerFormat(d)))}(e.updateMask);return new zA(A,s,i,r,n)}return new Ra(A,s,r,n)}if(e.delete){const A=aA(t,e.delete);return new Na(A,r)}if(e.verify){const A=aA(t,e.verify);return new Rw(A,r)}return Te()}function z4(t,e){return t&&t.length>0?(ke(e!==void 0),t.map(r=>function(A,s){let i=A.updateTime?ur(A.updateTime):ur(s);return i.isEqual(Ne.min())&&(i=ur(s)),new k4(i,A.transformResults||[])}(r,e))):[]}function I1(t,e){return{documents:[y1(t,e.path)]}}function kf(t,e){const r={structuredQuery:{}},n=e.path;let A;e.collectionGroup!==null?(A=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=y1(t,A);const s=function(c){if(c.length!==0)return T1(xt.create(c,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:cs(f.field),direction:W4(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const a=Mm(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:A}}function _1(t,e,r,n){const{_t:A,parent:s}=kf(t,e),i={},a=[];let o=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+o++;i[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:cs(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:cs(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:A.structuredQuery},parent:A.parent},ut:i,parent:s}}function E1(t){let e=v1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let A=null;if(n>0){ke(n===1);const d=r.from[0];d.allDescendants?A=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const f=b1(h);return f instanceof xt&&Qw(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(y){return new Uc(_o(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Jc(f)?null:f}(r.limit));let o=null;r.startAt&&(o=function(h){const f=!!h.before,m=h.values||[];return new $s(m,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new $s(m,f)}(r.endAt)),qb(e,A,i,s,a,"F",o,c)}function $4(t,e){const r=function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function b1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=_o(r.unaryFilter.field);return ct.create(n,"==",{doubleValue:NaN});case"IS_NULL":const A=_o(r.unaryFilter.field);return ct.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=_o(r.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=_o(r.unaryFilter.field);return ct.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(r){return ct.create(_o(r.fieldFilter.field),function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return xt.create(r.compositeFilter.filters.map(n=>b1(n)),function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return Te()}}(r.compositeFilter.op))}(t):Te()}function W4(t){return j4[t]}function q4(t){return M4[t]}function J4(t){return O4[t]}function cs(t){return{fieldPath:t.canonicalString()}}function _o(t){return Mt.fromServerFormat(t.fieldPath)}function T1(t){return t instanceof ct?function(r){if(r.op==="=="){if(ox(r.value))return{unaryFilter:{field:cs(r.field),op:"IS_NAN"}};if(ix(r.value))return{unaryFilter:{field:cs(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(ox(r.value))return{unaryFilter:{field:cs(r.field),op:"IS_NOT_NAN"}};if(ix(r.value))return{unaryFilter:{field:cs(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(r.field),op:q4(r.op),value:r.value}}}(t):t instanceof xt?function(r){const n=r.getFilters().map(A=>T1(A));return n.length===1?n[0]:{compositeFilter:{op:J4(r.op),filters:n}}}(t):Te()}function X4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function F1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,r,n,A,s=Ne.min(),i=Ne.min(),a=tr.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=A,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new IA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new IA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new IA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new IA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.ct=e}}function Y4(t,e){let r;if(e.document)r=C1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Be.fromSegments(e.noDocument.path),A=Wi(e.noDocument.readTime);r=jt.newNoDocument(n,A),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Te();{const n=Be.fromSegments(e.unknownDocument.path),A=Wi(e.unknownDocument.version);r=jt.newUnknownDocument(n,A)}}return e.readTime&&r.setReadTime(function(A){const s=new $t(A[0],A[1]);return Ne.fromTimestamp(s)}(e.readTime)),r}function _x(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:kh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:Sc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:ma(s,i.version.toTimestamp()),createTime:ma(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return Te();n.unknownDocument={path:r.path.toArray(),version:$i(e.version)}}return n}function kh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wi(t){const e=new $t(t.seconds,t.nanoseconds);return Ne.fromTimestamp(e)}function Ci(t,e){const r=(e.baseMutations||[]).map(s=>Vm(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];i.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>Vm(t.ct,s)),A=$t.fromMillis(e.localWriteTimeMs);return new Nw(e.batchId,A,r,n)}function Fl(t){const e=Wi(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Wi(t.lastLimboFreeSnapshotVersion):Ne.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return ke(s.documents.length===1),Wr(ka(v1(s.documents[0])))}(t.query):function(s){return Wr(E1(s))}(t.query),new IA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,tr.fromBase64String(t.resumeToken))}function U1(t,e){const r=$i(e.snapshotVersion),n=$i(e.lastLimboFreeSnapshotVersion);let A;A=Fh(e.target)?I1(t.ct,e.target):kf(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ki(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:A}}function Mw(t){const e=E1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uh(e,e.limit,"L"):e}function Yg(t,e){return new Pw(e.largestBatchId,Vm(t.ct,e.overlayMutation))}function Ex(t,e){const r=e.path.lastSegment();return[t,$r(e.path.popLast()),r]}function bx(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:$i(n.readTime),documentKey:$r(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{getBundleMetadata(e,r){return Tx(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:Wi(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return Tx(e).put(function(A){return{bundleId:A.id,createTime:$i(ur(A.createTime)),version:A.version}}(r))}getNamedQuery(e,r){return Fx(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:Mw(s.bundledQuery),readTime:Wi(s.readTime)}}(n)})}saveNamedQuery(e,r){return Fx(e).put(function(A){return{name:A.name,readTime:$i(ur(A.readTime)),bundledQuery:A.bundledQuery}}(r))}}function Tx(t){return Br(t,"bundles")}function Fx(t){return Br(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Rf(e,n)}getOverlay(e,r){return cl(e).get(Ex(this.userId,r)).next(n=>n?Yg(this.serializer,n):null)}getOverlays(e,r){const n=AA();return j.forEach(r,A=>this.getOverlay(e,A).next(s=>{s!==null&&n.set(A,s)})).next(()=>n)}saveOverlays(e,r,n){const A=[];return n.forEach((s,i)=>{const a=new Pw(r,i);A.push(this.ht(e,a))}),j.waitFor(A)}removeOverlaysForBatchId(e,r,n){const A=new Set;r.forEach(i=>A.add($r(i.getCollectionPath())));const s=[];return A.forEach(i=>{const a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(cl(e).j("collectionPathOverlayIndex",a))}),j.waitFor(s)}getOverlaysForCollection(e,r,n){const A=AA(),s=$r(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cl(e).U("collectionPathOverlayIndex",i).next(a=>{for(const o of a){const c=Yg(this.serializer,o);A.set(c.getKey(),c)}return A})}getOverlaysForCollectionGroup(e,r,n,A){const s=AA();let i;const a=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return cl(e).J({index:"collectionGroupOverlayIndex",range:a},(o,c,d)=>{const h=Yg(this.serializer,c);s.size()<A||h.largestBatchId===i?(s.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return cl(e).put(function(A,s,i){const[a,o,c]=Ex(s,i.mutation.key);return{userId:s,collectionPath:o,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:kc(A.ct,i.mutation)}}(this.serializer,this.userId,r))}}function cl(t){return Br(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{Pt(e){return Br(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?tr.fromUint8Array(n):tr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Kt(e.integerValue));else if("doubleValue"in e){const n=Kt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),bc(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=DA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(PA(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?jb(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Qf(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Te()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const A of Object.keys(n))this.Vt(A,r),this.Tt(n[A],r)}wt(e,r){var n,A;const s=e.fields||{};this.dt(r,53);const i="value",a=((A=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||A===void 0?void 0:A.length)||0;this.dt(r,15),r.At(Kt(a)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const A of n)this.Tt(A,r)}yt(e,r){this.dt(r,37),Be.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Ii.vt=new Ii;function tD(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Qx(t){const e=64-function(n){let A=0;for(let s=0;s<8;++s){const i=tD(255&n[s]);if(A+=i,i!==8)break}return A}(t);return Math.ceil(e/8)}class rD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const A=r.codePointAt(0);this.Ft(240|A>>>18),this.Ft(128|63&A>>>12),this.Ft(128|63&A>>>6),this.Ft(128|63&A)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const A=r.codePointAt(0);this.Ot(240|A>>>18),this.Ot(128|63&A>>>12),this.Ot(128|63&A>>>6),this.Ot(128|63&A)}}this.Nt()}kt(e){const r=this.qt(e),n=Qx(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let A=r.length-n;A<r.length;++A)this.buffer[this.position++]=255&r[A]}Kt(e){const r=this.qt(e),n=Qx(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let A=r.length-n;A<r.length;++A)this.buffer[this.position++]=~(255&r[A])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let A=1;A<r.length;++A)r[A]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const A=new Uint8Array(n);A.set(this.buffer),this.buffer=A}}class nD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class AD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ul{constructor(){this.jt=new rD,this.Ht=new nD(this.jt),this.Jt=new AD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,r,n,A){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=A}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new _i(this.indexId,this.documentKey,this.arrayValue,n)}}function es(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=Ux(t.arrayValue,e.arrayValue),r!==0?r:(r=Ux(t.directionalValue,e.directionalValue),r!==0?r:Be.comparator(t.documentKey,e.documentKey)))}function Ux(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.Xt=new bt((r,n)=>Mt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(ke(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Sm(e);if(r!==void 0&&!this.sn(r))return!1;const n=vi(e);let A=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)A=A.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!A.has(a.field.canonicalString())){const o=n[s];if(!this.on(a,o)||!this._n(this.en[i++],o))return!1}++s}for(;s<n.length;++s){const a=n[s];if(i>=this.en.length||!this._n(this.en[i++],a))return!1}return!0}an(){if(this.nn)return null;let e=new bt(Mt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Ri(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Ri(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Ri(n.field,n.dir==="asc"?0:1)));return new ua(ua.UNKNOWN_ID,this.collectionId,r,da.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){var e,r;if(ke(t instanceof ct||t instanceof xt),t instanceof ct){if(t instanceof Wb){const A=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>ct.create(t.field,"==",s)))||[];return xt.create(A,"or")}return t}const n=t.filters.map(A=>S1(A));return xt.create(n,t.op)}function sD(t){if(t.getFilters().length===0)return[];const e=zm(S1(t));return ke(k1(e)),Km(e)||Gm(e)?[e]:e.getFilters()}function Km(t){return t instanceof ct}function Gm(t){return t instanceof xt&&Qw(t)}function k1(t){return Km(t)||Gm(t)||function(r){if(r instanceof xt&&Dm(r)){for(const n of r.getFilters())if(!Km(n)&&!Gm(n))return!1;return!0}return!1}(t)}function zm(t){if(ke(t instanceof ct||t instanceof xt),t instanceof ct)return t;if(t.filters.length===1)return zm(t.filters[0]);const e=t.filters.map(n=>zm(n));let r=xt.create(e,t.op);return r=Rh(r),k1(r)?r:(ke(r instanceof xt),ke(fa(r)),ke(r.filters.length>1),r.filters.reduce((n,A)=>Ow(n,A)))}function Ow(t,e){let r;return ke(t instanceof ct||t instanceof xt),ke(e instanceof ct||e instanceof xt),r=t instanceof ct?e instanceof ct?function(A,s){return xt.create([A,s],"and")}(t,e):kx(t,e):e instanceof ct?kx(e,t):function(A,s){if(ke(A.filters.length>0&&s.filters.length>0),fa(A)&&fa(s))return Gb(A,s.getFilters());const i=Dm(A)?A:s,a=Dm(A)?s:A,o=i.filters.map(c=>Ow(c,a));return xt.create(o,"or")}(t,e),Rh(r)}function kx(t,e){if(fa(e))return Gb(e,t.getFilters());{const r=e.filters.map(n=>Ow(t,n));return xt.create(r,"or")}}function Rh(t){if(ke(t instanceof ct||t instanceof xt),t instanceof ct)return t;const e=t.getFilters();if(e.length===1)return Rh(e[0]);if(Vb(t))return t;const r=e.map(A=>Rh(A)),n=[];return r.forEach(A=>{A instanceof ct?n.push(A):A instanceof xt&&(A.op===t.op?n.push(...A.filters):n.push(A))}),n.length===1?n[0]:xt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.un=new Hw}addToCollectionParentIndex(e,r){return this.un.add(r),j.resolve()}getCollectionParents(e,r){return j.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return j.resolve()}deleteFieldIndex(e,r){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,r){return j.resolve()}getDocumentsMatchingTarget(e,r){return j.resolve(null)}getIndexType(e,r){return j.resolve(0)}getFieldIndexes(e,r){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,r){return j.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,r){return j.resolve(_n.min())}updateCollectionGroup(e,r,n){return j.resolve()}updateIndexEntries(e,r){return j.resolve()}}class Hw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),A=this.index[r]||new bt(lt.comparator),s=!A.has(n);return this.index[r]=A.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),A=this.index[r];return A&&A.has(n)}getEntries(e){return(this.index[e]||new bt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=new Uint8Array(0);class oD{constructor(e,r){this.databaseId=r,this.cn=new Hw,this.ln=new GA(n=>Ki(n),(n,A)=>Xc(n,A)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),A=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:$r(A)};return Rx(e).put(s)}return j.resolve()}getCollectionParents(e,r){const n=[],A=IDBKeyRange.bound([r,""],[_b(r),""],!1,!0);return Rx(e).U(A).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(nA(i.parent))}return n})}addFieldIndex(e,r){const n=dl(e),A=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(r);delete A.indexId;const s=n.add(A);if(r.indexState){const i=go(e);return s.next(a=>{i.put(bx(a,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=dl(e),A=go(e),s=fo(e);return n.delete(r.indexId).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=dl(e),n=fo(e),A=go(e);return r.j().next(()=>n.j()).next(()=>A.j())}createTargetIndexes(e,r){return j.forEach(this.hn(r),n=>this.getIndexType(e,n).next(A=>{if(A===0||A===1){const s=new Sx(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=fo(e);let A=!0;const s=new Map;return j.forEach(this.hn(r),i=>this.Pn(e,i).next(a=>{A&&(A=!!a),s.set(i,a)})).next(()=>{if(A){let i=rt();const a=[];return j.forEach(s,(o,c)=>{re("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(o)} to execute ${Ki(r)}`);const d=function(I,F){const R=Sm(F);if(R===void 0)return null;for(const U of Qh(I,R.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(c,o),h=function(I,F){const R=new Map;for(const U of vi(F))for(const v of Qh(I,U.fieldPath))switch(v.op){case"==":case"in":R.set(U.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return R.set(U.fieldPath.canonicalString(),v.value),Array.from(R.values())}return null}(c,o),f=function(I,F){const R=[];let U=!0;for(const v of vi(F)){const C=v.kind===0?dx(I,v.fieldPath,I.startAt):hx(I,v.fieldPath,I.startAt);R.push(C.value),U&&(U=C.inclusive)}return new $s(R,U)}(c,o),m=function(I,F){const R=[];let U=!0;for(const v of vi(F)){const C=v.kind===0?hx(I,v.fieldPath,I.endAt):dx(I,v.fieldPath,I.endAt);R.push(C.value),U&&(U=C.inclusive)}return new $s(R,U)}(c,o),y=this.In(o,c,f),B=this.In(o,c,m),E=this.Tn(o,c,h),x=this.En(o.indexId,d,y,f.inclusive,B,m.inclusive,E);return j.forEach(x,w=>n.G(w,r.limit).next(I=>{I.forEach(F=>{const R=Be.fromSegments(F.documentKey);i.has(R)||(i=i.add(R),a.push(R))})}))}).next(()=>a)}return j.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=sD(xt.create(e.filters,"and")).map(n=>Lm(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,A,s,i,a){const o=(r!=null?r.length:1)*Math.max(n.length,s.length),c=o/(r!=null?r.length:1),d=[];for(let h=0;h<o;++h){const f=r?this.dn(r[h/c]):zu,m=this.An(e,f,n[h%c],A),y=this.Rn(e,f,s[h%c],i),B=a.map(E=>this.An(e,f,E,!0));d.push(...this.createRange(m,y,B))}return d}An(e,r,n,A){const s=new _i(e,Be.empty(),r,n);return A?s:s.Zt()}Rn(e,r,n,A){const s=new _i(e,Be.empty(),r,n);return A?s.Zt():s}Pn(e,r){const n=new Sx(r),A=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,A).next(s=>{let i=null;for(const a of s)n.rn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a);return i})}getIndexType(e,r){let n=2;const A=this.hn(r);return j.forEach(A,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(o){let c=new bt(Mt.comparator),d=!1;for(const h of o.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of o.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&A.length>1&&n===2?1:n)}Vn(e,r){const n=new ul;for(const A of vi(e)){const s=r.data.field(A.fieldPath);if(s==null)return null;const i=n.Yt(A.kind);Ii.vt.It(s,i)}return n.zt()}dn(e){const r=new ul;return Ii.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new ul;return Ii.vt.It(Vi(this.databaseId,r),n.Yt(function(s){const i=vi(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let A=[];A.push(new ul);let s=0;for(const i of vi(e)){const a=n[s++];for(const o of A)if(this.fn(r,i.fieldPath)&&Qc(a))A=this.gn(A,i,a);else{const c=o.Yt(i.kind);Ii.vt.It(a,c)}}return this.pn(A)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const A=[...e],s=[];for(const i of n.arrayValue.values||[])for(const a of A){const o=new ul;o.seed(a.zt()),Ii.vt.It(i,o.Yt(r.kind)),s.push(o)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof ct&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=dl(e),A=go(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return j.forEach(s,a=>A.get([a.indexId,this.uid]).next(o=>{i.push(function(d,h){const f=h?new da(h.sequenceNumber,new _n(Wi(h.readTime),new Be(nA(h.documentKey)),h.largestBatchId)):da.empty(),m=d.fields.map(([y,B])=>new Ri(Mt.fromServerFormat(y),B));return new ua(d.indexId,d.collectionGroup,m,f)}(a,o))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,A)=>{const s=n.indexState.sequenceNumber-A.indexState.sequenceNumber;return s!==0?s:Je(n.collectionGroup,A.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const A=dl(e),s=go(e);return this.yn(e).next(i=>A.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(a=>j.forEach(a,o=>s.put(bx(o.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return j.forEach(r,(A,s)=>{const i=n.get(A.collectionGroup);return(i?j.resolve(i):this.getFieldIndexes(e,A.collectionGroup)).next(a=>(n.set(A.collectionGroup,a),j.forEach(a,o=>this.wn(e,A,o).next(c=>{const d=this.Sn(s,o);return c.isEqual(d)?j.resolve():this.bn(e,s,o,c,d)}))))})}Dn(e,r,n,A){return fo(e).put({indexId:A.indexId,uid:this.uid,arrayValue:A.arrayValue,directionalValue:A.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,A){return fo(e).delete([A.indexId,this.uid,A.arrayValue,A.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const A=fo(e);let s=new bt(es);return A.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,a)=>{s=s.add(new _i(n.indexId,r,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,r){let n=new bt(es);const A=this.Vn(r,e);if(A==null)return n;const s=Sm(r);if(s!=null){const i=e.data.field(s.fieldPath);if(Qc(i))for(const a of i.arrayValue.values||[])n=n.add(new _i(r.indexId,e.key,this.dn(a),A))}else n=n.add(new _i(r.indexId,e.key,zu,A));return n}bn(e,r,n,A,s){re("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(o,c,d,h,f){const m=o.getIterator(),y=c.getIterator();let B=ho(m),E=ho(y);for(;B||E;){let x=!1,w=!1;if(B&&E){const I=d(B,E);I<0?w=!0:I>0&&(x=!0)}else B!=null?w=!0:x=!0;x?(h(E),E=ho(y)):w?(f(B),B=ho(m)):(B=ho(m),E=ho(y))}}(A,s,es,a=>{i.push(this.Dn(e,r,n,a))},a=>{i.push(this.vn(e,r,n,a))}),j.waitFor(i)}yn(e){let r=1;return go(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,A,s)=>{s.done(),r=A.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,a)=>es(i,a)).filter((i,a,o)=>!a||es(i,o[a-1])!==0);const A=[];A.push(e);for(const i of n){const a=es(i,e),o=es(i,r);if(a===0)A[0]=e.Zt();else if(a>0&&o<0)A.push(i),A.push(i.Zt());else if(o>0)break}A.push(r);const s=[];for(let i=0;i<A.length;i+=2){if(this.Cn(A[i],A[i+1]))return[];const a=[A[i].indexId,this.uid,A[i].arrayValue,A[i].directionalValue,zu,[]],o=[A[i+1].indexId,this.uid,A[i+1].arrayValue,A[i+1].directionalValue,zu,[]];s.push(IDBKeyRange.bound(a,o))}return s}Cn(e,r){return es(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Nx)}getMinOffset(e,r){return j.mapArray(this.hn(r),n=>this.Pn(e,n).next(A=>A||Te())).next(Nx)}}function Rx(t){return Br(t,"collectionParents")}function fo(t){return Br(t,"indexEntries")}function dl(t){return Br(t,"indexConfiguration")}function go(t){return Br(t,"indexState")}function Nx(t){ke(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const A=t[n].indexState.offset;bw(A,e)<0&&(e=A),r<A.largestBatchId&&(r=A.largestBatchId)}return new _n(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Kr(e,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e,r){const n=t.store("mutations"),A=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let a=0;const o=n.J({range:i},(d,h,f)=>(a++,f.delete()));s.push(o.next(()=>{ke(a===1)}));const c=[];for(const d of r.mutations){const h=Sb(e,d.key.path,r.batchId);s.push(A.delete(h)),c.push(d.key)}return j.waitFor(s).next(()=>c)}function Nh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Te();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(41943040,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);class Nf{constructor(e,r,n,A){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=A,this.Fn={}}static lt(e,r,n,A){ke(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Nf(s,r,n,A)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).J({index:"userMutationsIndex",range:n},(A,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,A){const s=Eo(e),i=ts(e);return i.add({}).next(a=>{ke(typeof a=="number");const o=new Nw(a,r,n,A),c=function(m,y,B){const E=B.baseMutations.map(w=>kc(m.ct,w)),x=B.mutations.map(w=>kc(m.ct,w));return{userId:y,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:E,mutations:x}}(this.serializer,this.userId,o),d=[];let h=new bt((f,m)=>Je(f.canonicalString(),m.canonicalString()));for(const f of A){const m=Sb(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(s.put(m,WN))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),j.waitFor(d).next(()=>o)})}lookupMutationBatch(e,r){return ts(e).get(r).next(n=>n?(ke(n.userId===this.userId),Ci(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?j.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const A=n.keys();return this.Fn[r]=A,A}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,A=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return ts(e).J({index:"userMutationsIndex",range:A},(i,a,o)=>{a.userId===this.userId&&(ke(a.batchId>=n),s=Ci(this.serializer,a)),o.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ts(e).J({index:"userMutationsIndex",range:r,reverse:!0},(A,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).U("userMutationsIndex",r).next(n=>n.map(A=>Ci(this.serializer,A)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Pd(this.userId,r.path),A=IDBKeyRange.lowerBound(n),s=[];return Eo(e).J({range:A},(i,a,o)=>{const[c,d,h]=i,f=nA(d);if(c===this.userId&&r.path.isEqual(f))return ts(e).get(h).next(m=>{if(!m)throw Te();ke(m.userId===this.userId),s.push(Ci(this.serializer,m))});o.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new bt(Je);const A=[];return r.forEach(s=>{const i=Pd(this.userId,s.path),a=IDBKeyRange.lowerBound(i),o=Eo(e).J({range:a},(c,d,h)=>{const[f,m,y]=c,B=nA(m);f===this.userId&&s.path.isEqual(B)?n=n.add(y):h.done()});A.push(o)}),j.waitFor(A).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,A=n.length+1,s=Pd(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new bt(Je);return Eo(e).J({range:i},(o,c,d)=>{const[h,f,m]=o,y=nA(f);h===this.userId&&n.isPrefixOf(y)?y.length===A&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,r){const n=[],A=[];return r.forEach(s=>{A.push(ts(e).get(s).next(i=>{if(i===null)throw Te();ke(i.userId===this.userId),n.push(Ci(this.serializer,i))}))}),j.waitFor(A).next(()=>n)}removeMutationBatch(e,r){return R1(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),j.forEach(n,A=>this.referenceDelegate.markPotentiallyOrphaned(e,A))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return j.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),A=[];return Eo(e).J({range:n},(s,i,a)=>{if(s[0]===this.userId){const o=nA(s[1]);A.push(o)}else a.done()}).next(()=>{ke(A.length===0)})})}containsKey(e,r){return N1(e,this.userId,r)}Nn(e){return D1(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function N1(t,e,r){const n=Pd(e,r.path),A=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return Eo(t).J({range:s,H:!0},(a,o,c)=>{const[d,h,f]=a;d===e&&h===A&&(i=!0),c.done()}).next(()=>i)}function ts(t){return Br(t,"mutations")}function Eo(t){return Br(t,"documentMutations")}function D1(t){return Br(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qi(0)}static kn(){return new qi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new qi(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Ne.fromTimestamp(new $t(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(A=>(A.highestListenSequenceNumber=r,n&&(A.lastRemoteSnapshotVersion=n.toTimestamp()),r>A.highestListenSequenceNumber&&(A.highestListenSequenceNumber=r),this.Qn(e,A)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>po(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(ke(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let A=0;const s=[];return po(e).J((i,a)=>{const o=Fl(a);o.sequenceNumber<=r&&n.get(o.targetId)===null&&(A++,s.push(this.removeTargetData(e,o)))}).next(()=>j.waitFor(s)).next(()=>A)}forEachTarget(e,r){return po(e).J((n,A)=>{const s=Fl(A);r(s)})}qn(e){return Px(e).get("targetGlobalKey").next(r=>(ke(r!==null),r))}Qn(e,r){return Px(e).put("targetGlobalKey",r)}Kn(e,r){return po(e).put(U1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Ki(r),A=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return po(e).J({range:A,index:"queryTargetsIndex"},(i,a,o)=>{const c=Fl(a);Xc(r,c.target)&&(s=c,o.done())}).next(()=>s)}addMatchingKeys(e,r,n){const A=[],s=us(e);return r.forEach(i=>{const a=$r(i.path);A.push(s.put({targetId:n,path:a})),A.push(this.referenceDelegate.addReference(e,n,i))}),j.waitFor(A)}removeMatchingKeys(e,r,n){const A=us(e);return j.forEach(r,s=>{const i=$r(s.path);return j.waitFor([A.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=us(e),A=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(A)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),A=us(e);let s=rt();return A.J({range:n,H:!0},(i,a,o)=>{const c=nA(i[1]),d=new Be(c);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=$r(r.path),A=IDBKeyRange.bound([n],[_b(n)],!1,!0);let s=0;return us(e).J({index:"documentTargetsIndex",H:!0,range:A},([i,a],o,c)=>{i!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,r){return po(e).get(r).next(n=>n?Fl(n):null)}}function po(t){return Br(t,"targets")}function Px(t){return Br(t,"targetGlobal")}function us(t){return Br(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx([t,e],[r,n]){const A=Je(t,r);return A===0?Je(e,n):A}class lD{constructor(e){this.Un=e,this.buffer=new bt(Lx),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Lx(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class P1{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ai(r)?re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ni(r)}await this.Hn(3e5)})}}class cD{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return j.resolve(ln.oe);const n=new lD(r);return this.Jn.forEachTarget(e,A=>n.zn(A.sequenceNumber)).next(()=>this.Jn.Zn(e,A=>n.zn(A))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Dx)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dx):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,A,s,i,a,o,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),A=this.params.maximumSequenceNumbersToCollect):A=h,i=Date.now(),this.nthSequenceNumber(e,A))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),Co()<=at.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${A} in `+(a-i)+`ms
	Removed ${s} targets in `+(o-a)+`ms
	Removed ${h} documents in `+(c-o)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:s,documentsRemoved:h})))}}function L1(t,e){return new cD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,r){this.db=e,this.garbageCollector=L1(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(A=>n+A))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,A)=>r(A))}addReference(e,r,n){return $u(e,n)}removeReference(e,r,n){return $u(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return $u(e,r)}nr(e,r){return function(A,s){let i=!1;return D1(A).Y(a=>N1(A,a,s).next(o=>(o&&(i=!0),j.resolve(!o)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),A=[];let s=0;return this.tr(e,(i,a)=>{if(a<=r){const o=this.nr(e,i).next(c=>{if(!c)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Ne.min()),us(e).delete(function(h){return[0,$r(h.path)]}(i))))});A.push(o)}}).next(()=>j.waitFor(A)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return $u(e,r)}tr(e,r){const n=us(e);let A,s=ln.oe;return n.J({index:"documentTargetsIndex"},([i,a],{path:o,sequenceNumber:c})=>{i===0?(s!==ln.oe&&r(new Be(nA(A)),s),s=c,A=o):s=ln.oe}).next(()=>{s!==ln.oe&&r(new Be(nA(A)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $u(t,e){return us(t).put(function(n,A){return{targetId:0,path:$r(n.path),sequenceNumber:A}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(){this.changes=new GA(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?j.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return gi(e).put(n)}removeEntry(e,r,n){return gi(e).delete(function(s,i){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],kh(i),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=jt.newInvalidDocument(r);return gi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hl(r))},(A,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:jt.newInvalidDocument(r)};return gi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hl(r))},(A,s)=>{n={document:this.ir(r,s),size:Nh(s)}}).next(()=>n)}getEntries(e,r){let n=un();return this._r(e,r,(A,s)=>{const i=this.ir(A,s);n=n.insert(A,i)}).next(()=>n)}ar(e,r){let n=un(),A=new Dt(Be.comparator);return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a),A=A.insert(s,Nh(i))}).next(()=>({documents:n,ur:A}))}_r(e,r,n){if(r.isEmpty())return j.resolve();let A=new bt(Ox);r.forEach(o=>A=A.add(o));const s=IDBKeyRange.bound(hl(A.first()),hl(A.last())),i=A.getIterator();let a=i.getNext();return gi(e).J({index:"documentKeyIndex",range:s},(o,c,d)=>{const h=Be.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Ox(a,h)<0;)n(a,null),a=i.getNext();a&&a.isEqual(h)&&(n(a,c),a=i.hasNext()?i.getNext():null),a?d.$(hl(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,A,s){const i=r.path,a=[i.popLast().toArray(),i.lastSegment(),kh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gi(e).U(IDBKeyRange.bound(a,o,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=un();for(const h of c){const f=this.ir(Be.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Zc(r,f)||A.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,A){let s=un();const i=Mx(r,n),a=Mx(r,_n.max());return gi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(o,c,d)=>{const h=this.ir(Be.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===A&&d.done()}).next(()=>s)}newChangeBuffer(e){return new hD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return jx(e).get("remoteDocumentGlobalKey").next(r=>(ke(!!r),r))}rr(e,r){return jx(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Y4(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ne.min())))return n}return jt.newInvalidDocument(e)}}function M1(t){return new dD(t)}class hD extends j1{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new GA(n=>n.toString(),(n,A)=>n.isEqual(A))}applyChanges(e){const r=[];let n=0,A=new bt((s,i)=>Je(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=_x(this.cr.serializer,i);A=A.add(s.path.popLast());const c=Nh(o);n+=c-a.size,r.push(this.cr.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const o=_x(this.cr.serializer,i.convertToNoDocument(Ne.min()));r.push(this.cr.addEntry(e,s,o))}}),A.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),j.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:A})=>(A.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function jx(t){return Br(t,"remoteDocumentGlobal")}function gi(t){return Br(t,"remoteDocumentsV14")}function hl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Mx(t,e){const r=e.documentKey.path.toArray();return[t,kh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ox(t,e){const r=t.path.toArray(),n=e.path.toArray();let A=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(A=Je(r[s],n[s]),A)return A;return A=Je(r.length,n.length),A||(A=Je(r[r.length-2],n[n.length-2]),A||Je(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,r,n,A){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=A}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(A=>(n=A,this.remoteDocumentCache.getEntry(e,r))).next(A=>(n!==null&&Jl(n.mutation,A,cn.empty(),$t.now()),A))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,rt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=rt()){const A=AA();return this.populateOverlays(e,A,r).next(()=>this.computeViews(e,r,A,n).next(s=>{let i=bl();return s.forEach((a,o)=>{i=i.insert(a,o.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=AA();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,rt()))}populateOverlays(e,r,n){const A=[];return n.forEach(s=>{r.has(s)||A.push(s)}),this.documentOverlayCache.getOverlays(e,A).next(s=>{s.forEach((i,a)=>{r.set(i,a)})})}computeViews(e,r,n,A){let s=un();const i=ql(),a=function(){return ql()}();return r.forEach((o,c)=>{const d=n.get(c.key);A.has(c.key)&&(d===void 0||d.mutation instanceof zA)?s=s.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),Jl(d.mutation,c,d.mutation.getFieldMask(),$t.now())):i.set(c.key,cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(o=>(o.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return a.set(c,new fD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=ql();let A=new Dt((i,a)=>i-a),s=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const a of i)a.keys().forEach(o=>{const c=r.get(o);if(c===null)return;let d=n.get(o)||cn.empty();d=a.applyToLocalView(c,d),n.set(o,d);const h=(A.get(a.batchId)||rt()).add(o);A=A.insert(a.batchId,h)})}).next(()=>{const i=[],a=A.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),c=o.key,d=o.value,h=n1();d.forEach(f=>{if(!s.has(f)){const m=c1(r.get(f),n.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return j.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,A){return function(i){return Be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Uw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,A):this.getDocumentsMatchingCollectionQuery(e,r,n,A)}getNextDocuments(e,r,n,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,A).next(s=>{const i=A-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,A-s.size):j.resolve(AA());let a=-1,o=s;return i.next(c=>j.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{o=o.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,o,c,rt())).next(d=>({batchId:a,changes:r1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Be(r)).next(n=>{let A=bl();return n.isFoundDocument()&&(A=A.insert(n.key,n)),A})}getDocumentsMatchingCollectionGroupQuery(e,r,n,A){const s=r.collectionGroup;let i=bl();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,o=>{const c=function(h,f){return new KA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,A).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,A){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,A))).next(i=>{s.forEach((o,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,jt.newInvalidDocument(d)))});let a=bl();return i.forEach((o,c)=>{const d=s.get(o);d!==void 0&&Jl(d.mutation,c,cn.empty(),$t.now()),Zc(r,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return j.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(A){return{id:A.id,version:A.version,createTime:ur(A.createTime)}}(r)),j.resolve()}getNamedQuery(e,r){return j.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(A){return{name:A.name,query:Mw(A.bundledQuery),readTime:ur(A.readTime)}}(r)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.overlays=new Dt(Be.comparator),this.Ir=new Map}getOverlay(e,r){return j.resolve(this.overlays.get(r))}getOverlays(e,r){const n=AA();return j.forEach(r,A=>this.getOverlay(e,A).next(s=>{s!==null&&n.set(A,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((A,s)=>{this.ht(e,r,s)}),j.resolve()}removeOverlaysForBatchId(e,r,n){const A=this.Ir.get(n);return A!==void 0&&(A.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),j.resolve()}getOverlaysForCollection(e,r,n){const A=AA(),s=r.length+1,i=new Be(r.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const o=a.getNext().value,c=o.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&o.largestBatchId>n&&A.set(o.getKey(),o)}return j.resolve(A)}getOverlaysForCollectionGroup(e,r,n,A){let s=new Dt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=s.get(c.largestBatchId);d===null&&(d=AA(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=AA(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=A)););return j.resolve(a)}ht(e,r,n){const A=this.overlays.get(n.key);if(A!==null){const i=this.Ir.get(A.largestBatchId).delete(n.key);this.Ir.set(A.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Pw(r,n));let s=this.Ir.get(r);s===void 0&&(s=rt(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.Tr=new bt(xr.Er),this.dr=new bt(xr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new xr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new xr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Be(new lt([])),n=new xr(r,e),A=new xr(r,e+1),s=[];return this.dr.forEachInRange([n,A],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Be(new lt([])),n=new xr(r,e),A=new xr(r,e+1);let s=rt();return this.dr.forEachInRange([n,A],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new xr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class xr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Be.comparator(e.key,r.key)||Je(e.wr,r.wr)}static Ar(e,r){return Je(e.wr,r.wr)||Be.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new bt(xr.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,A){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Nw(s,r,n,A);this.mutationQueue.push(i);for(const a of A)this.br=this.br.add(new xr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(i)}lookupMutationBatch(e,r){return j.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,A=this.vr(n),s=A<0?0:A;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new xr(r,0),A=new xr(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,A],i=>{const a=this.Dr(i.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new bt(Je);return r.forEach(A=>{const s=new xr(A,0),i=new xr(A,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],a=>{n=n.add(a.wr)})}),j.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,A=n.length+1;let s=n;Be.isDocumentKey(s)||(s=s.child(""));const i=new xr(new Be(s),0);let a=new bt(Je);return this.br.forEachWhile(o=>{const c=o.key.path;return!!n.isPrefixOf(c)&&(c.length===A&&(a=a.add(o.wr)),!0)},i),j.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const A=this.Dr(n);A!==null&&r.push(A)}),r}removeMutationBatch(e,r){ke(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return j.forEach(r.mutations,A=>{const s=new xr(A.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new xr(r,0),A=this.br.firstAfterOrEqual(n);return j.resolve(r.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.Mr=e,this.docs=function(){return new Dt(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,A=this.docs.get(n),s=A?A.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return j.resolve(n?n.document.mutableCopy():jt.newInvalidDocument(r))}getEntries(e,r){let n=un();return r.forEach(A=>{const s=this.docs.get(A);n=n.insert(A,s?s.document.mutableCopy():jt.newInvalidDocument(A))}),j.resolve(n)}getDocumentsMatchingQuery(e,r,n,A){let s=un();const i=r.path,a=new Be(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:c,value:{document:d}}=o.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||bw(bb(d),n)<=0||(A.has(d.key)||Zc(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,r,n,A){Te()}Or(e,r){return j.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new yD(this)}getSize(e){return j.resolve(this.size)}}class yD extends j1{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,A)=>{A.isValidDocument()?r.push(this.cr.addEntry(e,A)):this.cr.removeEntry(n)}),j.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.persistence=e,this.Nr=new GA(r=>Ki(r),Xc),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vw,this.targetCount=0,this.kr=qi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,A)=>r(A)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),j.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new qi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,j.resolve()}updateTargetData(e,r){return this.Kn(r),j.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,r,n){let A=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),A++)}),j.waitFor(s).next(()=>A)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return j.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),j.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const A=this.persistence.referenceDelegate,s=[];return A&&r.forEach(i=>{s.push(A.markPotentiallyOrphaned(e,i))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),j.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return j.resolve(n)}containsKey(e,r){return j.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new ln(0),this.Kr=!1,this.Kr=!0,this.$r=new mD,this.referenceDelegate=e(this),this.Ur=new vD(this),this.indexManager=new iD,this.remoteDocumentCache=function(A){return new BD(A)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Q1(r),this.Gr=new gD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new pD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new wD(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){re("MemoryPersistence","Starting transaction:",e);const A=new xD(this.Qr.next());return this.referenceDelegate.zr(),n(A).next(s=>this.referenceDelegate.jr(A).next(()=>s)).toPromise().then(s=>(A.raiseOnCommittedEvent(),s))}Hr(e,r){return j.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class xD extends Fb{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Jr=new Vw,this.Yr=null}static Zr(e){return new Df(e)}get Xr(){if(this.Yr)return this.Yr;throw Te()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),j.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),j.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),j.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(A=>this.Xr.add(A.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(A=>{A.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,n=>{const A=Be.fromPath(n);return this.ei(e,A).next(s=>{s||r.removeEntry(A,Ne.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return j.or([()=>j.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Dh{constructor(e,r){this.persistence=e,this.ti=new GA(n=>$r(n.path),(n,A)=>n.isEqual(A)),this.garbageCollector=L1(this,r)}static Zr(e,r){return new Dh(e,r)}zr(){}jr(e){return j.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(A=>n+A))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return j.forEach(this.ti,(n,A)=>this.nr(e,n,A).next(s=>s?j.resolve():r(A)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const A=this.persistence.getRemoteDocumentCache(),s=A.newChangeBuffer();return A.Or(e,i=>this.nr(e,i,r).next(a=>{a||(n++,s.removeEntry(i,Ne.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=jd(e.data.value)),r}nr(e,r,n){return j.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const A=this.ti.get(r);return j.resolve(A!==void 0&&A>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.serializer=e}O(e,r,n,A){const s=new bf("createOrUpgrade",r);n<1&&A>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tx,{unique:!0}),o.createObjectStore("documentMutations")}(e),Hx(e),function(o){o.createObjectStore("remoteDocuments")}(e));let i=j.resolve();return n<3&&A>=3&&(n!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),Hx(e)),i=i.next(()=>function(o){const c=o.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),n<4&&A>=4&&(n!==0&&(i=i.next(()=>function(o,c){return c.store("mutations").U().next(d=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tx,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return j.waitFor(f)})}(e,s))),i=i.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&A>=5&&(i=i.next(()=>this.ni(s))),n<6&&A>=6&&(i=i.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&A>=7&&(i=i.next(()=>this.ii(s))),n<8&&A>=8&&(i=i.next(()=>this.si(e,s))),n<9&&A>=9&&(i=i.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&A>=10&&(i=i.next(()=>this.oi(s))),n<11&&A>=11&&(i=i.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&A>=12&&(i=i.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:i4});c.createIndex("collectionPathOverlayIndex",o4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",a4,{unique:!1})})(e)})),n<13&&A>=13&&(i=i.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:qN});c.createIndex("documentKeyIndex",JN),c.createIndex("collectionGroupIndex",XN)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&A>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&A>=15&&(i=i.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:r4}).createIndex("sequenceNumberIndex",n4,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:A4}).createIndex("documentKeyIndex",s4,{unique:!1})}(e))),n<16&&A>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&A>=17&&(i=i.next(()=>{(function(o){o.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,A)=>{r+=Nh(A)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(A=>j.forEach(A,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(a=>j.forEach(a,o=>{ke(o.userId===s.userId);const c=Ci(this.serializer,o);return R1(e,s.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(A=>{const s=[];return n.J((i,a)=>{const o=new lt(i),c=function(h){return[0,$r(h)]}(o);s.push(r.get(c).next(d=>d?j.resolve():(h=>r.put({targetId:0,path:$r(h),sequenceNumber:A.highestListenSequenceNumber}))(o)))}).next(()=>j.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:t4});const n=r.store("collectionParents"),A=new Hw,s=i=>{if(A.add(i)){const a=i.lastSegment(),o=i.popLast();return n.put({collectionId:a,parent:$r(o)})}};return r.store("remoteDocuments").J({H:!0},(i,a)=>{const o=new lt(i);return s(o.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,a,o],c)=>{const d=nA(a);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,A)=>{const s=Fl(A),i=U1(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),A=[];return n.J((s,i)=>{const a=r.store("remoteDocumentsV14"),o=function(h){return h.document?new Be(lt.fromString(h.document.name).popFirst(5)):h.noDocument?Be.fromSegments(h.noDocument.path):h.unknownDocument?Be.fromSegments(h.unknownDocument.path):Te()}(i).path.toArray(),c={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};A.push(a.put(c))}).next(()=>j.waitFor(A))}ai(e,r){const n=r.store("mutations"),A=M1(this.serializer),s=new Kw(Df.Zr,this.serializer.ct);return n.U().next(i=>{const a=new Map;return i.forEach(o=>{var c;let d=(c=a.get(o.userId))!==null&&c!==void 0?c:rt();Ci(this.serializer,o).keys().forEach(h=>d=d.add(h)),a.set(o.userId,d)}),j.forEach(a,(o,c)=>{const d=new Ir(c),h=Rf.lt(this.serializer,d),f=s.getIndexManager(d),m=Nf.lt(d,this.serializer,f,s.referenceDelegate);return new O1(A,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new km(r,ln.oe),o).next()})})}}function Hx(t){t.createObjectStore("targetDocuments",{keyPath:ZN}).createIndex("documentTargetsIndex",e4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YN,{unique:!0}),t.createObjectStore("targetGlobal")}const Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gw{constructor(e,r,n,A,s,i,a,o,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Gw.D())throw new te(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uD(this,A),this.Ai=r+"main",this.serializer=new Q1(o),this.Ri=new oA(this.Ai,this.hi,new CD(this.serializer)),this.$r=new eD,this.Ur=new aD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=M1(this.serializer),this.Gr=new Z4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(K.FAILED_PRECONDITION,Zg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ln(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Ai(e))return re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return fl(e).get("owner").next(r=>j.resolve(this.vi(r)))}Ci(e){return Wu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Br(r,"clientMetadata");return n.U().next(A=>{const s=this.xi(A,18e5),i=A.filter(a=>s.indexOf(a)===-1);return j.forEach(i,a=>n.delete(a.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?j.resolve(!0):fl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new te(K.FAILED_PRECONDITION,Zg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wu(e).U().next(n=>this.xi(n,5e3).find(A=>{if(this.clientId!==A.clientId){const s=!this.networkEnabled&&A.networkEnabled,i=!this.inForeground&&A.inForeground,a=this.networkEnabled===A.networkEnabled;if(s||i&&a)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&re("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new km(e,ln.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Wu(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Nf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Rf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){re("IndexedDbPersistence","Starting transaction:",e);const A=r==="readonly"?"readonly":"readwrite",s=function(o){return o===17?u4:o===16?c4:o===15?Fw:o===14?Nb:o===13?Rb:o===12?l4:o===11?kb:void Te()}(this.hi);let i;return this.Ri.runTransaction(e,A,s,a=>(i=new km(a,this.Qr?this.Qr.next():ln.oe),r==="readwrite-primary"?this.wi(i).next(o=>!!o||this.Si(i)).next(o=>{if(!o)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new te(K.FAILED_PRECONDITION,Tb);return n(i)}).next(o=>this.Di(i).next(()=>o)):this.Ki(i).next(()=>n(i)))).then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e){return fl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new te(K.FAILED_PRECONDITION,Zg)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fl(e).put("owner",r)}static D(){return oA.D()}bi(e){const r=fl(e);return r.get("owner").next(n=>this.vi(n)?(re("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):j.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(cr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;lb()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return re("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return cr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fl(t){return Br(t,"owner")}function Wu(t){return Br(t,"clientMetadata")}function zw(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,r,n,A){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=A}static Wi(e,r){let n=rt(),A=rt();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:A=A.add(s.doc.key)}return new $w(e,r.fromCache,n,A)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lb()?8:Qb(wr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,A){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,A,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new ID;return this.Xi(e,r,i).next(a=>{if(s.result=a,this.zi)return this.es(e,r,i,a.size)})}).next(()=>s.result)}es(e,r,n,A){return n.documentReadCount<this.ji?(Co()<=at.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Io(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Co()<=at.DEBUG&&re("QueryEngine","Query:",Io(r),"scans",n.documentReadCount,"local documents and returns",A,"documents as results."),n.documentReadCount>this.Hi*A?(Co()<=at.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Io(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wr(r))):j.resolve())}Yi(e,r){if(fx(r))return j.resolve(null);let n=Wr(r);return this.indexManager.getIndexType(e,n).next(A=>A===0?null:(r.limit!==null&&A===1&&(r=Uh(r,null,"F"),n=Wr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=rt(...s);return this.Ji.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,n).next(o=>{const c=this.ts(r,a);return this.ns(r,c,i,o.readTime)?this.Yi(e,Uh(r,null,"F")):this.rs(e,c,r,o)}))})))}Zi(e,r,n,A){return fx(r)||A.isEqual(Ne.min())?j.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,A)?j.resolve(null):(Co()<=at.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),Io(r)),this.rs(e,i,r,Eb(A,-1)).next(a=>a))})}ts(e,r){let n=new bt(e1(e));return r.forEach((A,s)=>{Zc(e,s)&&(n=n.add(s))}),n}ns(e,r,n,A){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(A)>0)}Xi(e,r,n){return Co()<=at.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Io(r)),this.Ji.getDocumentsMatchingQuery(e,r,_n.min(),n)}rs(e,r,n,A){return this.Ji.getDocumentsMatchingQuery(e,n,A).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,r,n,A){this.persistence=e,this.ss=r,this.serializer=A,this.os=new Dt(Je),this._s=new GA(s=>Ki(s),Xc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function V1(t,e,r,n){return new _D(t,e,r,n)}async function K1(t,e){const r=ge(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let A;return r.mutationQueue.getAllMutationBatches(n).next(s=>(A=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],a=[];let o=rt();for(const c of A){i.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}return r.localDocuments.getDocuments(n,o).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:a}))})})}function ED(t,e){const r=ge(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const A=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,o,c,d){const h=c.batch,f=h.keys();let m=j.resolve();return f.forEach(y=>{m=m.next(()=>d.getEntry(o,y)).next(B=>{const E=c.docVersions.get(y);ke(E!==null),B.version.compareTo(E)<0&&(h.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),d.addEntry(B)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(o,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,A,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let o=rt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,A))})}function G1(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function bD(t,e){const r=ge(t),n=e.snapshotVersion;let A=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});A=r.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=A.get(h);if(!f)return;a.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(tr.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),A=A.insert(h,m),function(B,E,x){return B.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,m,d)&&a.push(r.Ur.updateTargetData(s,m))});let o=un(),c=rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(z1(s,i,e.documentUpdates).next(d=>{o=d.Ps,c=d.Is})),!n.isEqual(Ne.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(h=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(d)}return j.waitFor(a).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,o,c)).next(()=>o)}).then(s=>(r.os=A,s))}function z1(t,e,r){let n=rt(),A=rt();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=un();return r.forEach((a,o)=>{const c=s.get(a);o.isFoundDocument()!==c.isFoundDocument()&&(A=A.add(a)),o.isNoDocument()&&o.version.isEqual(Ne.min())?(e.removeEntry(a,o.readTime),i=i.insert(a,o)):!c.isValidDocument()||o.version.compareTo(c.version)>0||o.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(o),i=i.insert(a,o)):re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",o.version)}),{Ps:i,Is:A}})}function TD(t,e){const r=ge(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function wa(t,e){const r=ge(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let A;return r.Ur.getTargetData(n,e).next(s=>s?(A=s,j.resolve(A)):r.Ur.allocateTargetId(n).next(i=>(A=new IA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,A).next(()=>A))))}).then(n=>{const A=r.os.get(n.targetId);return(A===null||n.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ba(t,e,r){const n=ge(t),A=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,A))}catch(i){if(!Ai(i))throw i;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(A.target)}function Ph(t,e,r){const n=ge(t);let A=Ne.min(),s=rt();return n.persistence.runTransaction("Execute query","readwrite",i=>function(o,c,d){const h=ge(o),f=h._s.get(d);return f!==void 0?j.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,Wr(e)).next(a=>{if(a)return A=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,a.targetId).next(o=>{s=o})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?A:Ne.min(),r?s:rt())).next(a=>(q1(n,Zb(e),a),{documents:a,Ts:s})))}function $1(t,e){const r=ge(t),n=ge(r.Ur),A=r.os.get(e);return A?Promise.resolve(A.target):r.persistence.runTransaction("Get target data","readonly",s=>n.ot(s,e).next(i=>i?i.target:null))}function W1(t,e){const r=ge(t),n=r.us.get(e)||Ne.min();return r.persistence.runTransaction("Get new document changes","readonly",A=>r.cs.getAllFromCollectionGroup(A,e,Eb(n,-1),Number.MAX_SAFE_INTEGER)).then(A=>(q1(r,e,A),A))}function q1(t,e,r){let n=t.us.get(e)||Ne.min();r.forEach((A,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}async function FD(t,e,r,n){const A=ge(t);let s=rt(),i=un();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const a=A.cs.newChangeBuffer({trackRemovals:!0}),o=await wa(A,function(d){return Wr(ka(lt.fromString(`__bundle__/docs/${d}`)))}(n));return A.persistence.runTransaction("Apply bundle documents","readwrite",c=>z1(c,a,i).next(d=>(a.apply(c),d)).next(d=>A.Ur.removeMatchingKeysForTargetId(c,o.targetId).next(()=>A.Ur.addMatchingKeys(c,s,o.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function QD(t,e,r=rt()){const n=await wa(t,Wr(Mw(e.bundledQuery))),A=ge(t);return A.persistence.runTransaction("Save named query","readwrite",s=>{const i=ur(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return A.Gr.saveNamedQuery(s,e);const a=n.withResumeToken(tr.EMPTY_BYTE_STRING,i);return A.os=A.os.insert(a.targetId,a),A.Ur.updateTargetData(s,a).next(()=>A.Ur.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>A.Ur.addMatchingKeys(s,r,n.targetId)).next(()=>A.Gr.saveNamedQuery(s,e))})}function Vx(t,e){return`firestore_clients_${t}_${e}`}function Kx(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function ep(t,e){return`firestore_targets_${t}_${e}`}class Lh{constructor(e,r,n,A){this.user=e,this.batchId=r,this.state=n,this.error=A}static Rs(e,r,n){const A=JSON.parse(n);let s,i=typeof A=="object"&&["pending","acknowledged","rejected"].indexOf(A.state)!==-1&&(A.error===void 0||typeof A.error=="object");return i&&A.error&&(i=typeof A.error.message=="string"&&typeof A.error.code=="string",i&&(s=new te(A.error.code,A.error.message))),i?new Lh(e,r,A.state,s):(cr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xl{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let A,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(A=new te(n.error.code,n.error.message))),s?new Xl(e,n.state,A):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let A=typeof n=="object"&&n.activeTargetIds instanceof Array,s=Sw();for(let i=0;A&&i<n.activeTargetIds.length;++i)A=Ub(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return A?new jh(e,s):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Ww{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Ww(r.clientId,r.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $m{constructor(){this.activeTargetIds=Sw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tp{constructor(e,r,n,A,s){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=A,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Dt(Je),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Vx(this.persistenceKey,this.ps),this.vs=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new $m),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Os=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const A=this.getItem(Vx(this.persistenceKey,n));if(A){const s=jh.Rs(n,A);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,A)=>{A.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(ep(this.persistenceKey,e));if(A){const s=Xl.Rs(e,A);s&&(n=s.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ep(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(A=>{this.Qs(A)}),this.currentUser=e,n.forEach(A=>{this.addPendingMutation(A)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return re("SharedClientState","READ",e,r),r}setItem(e,r){re("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(s){let i=ln.oe;if(s!=null)try{const a=JSON.parse(s);ke(typeof a=="number"),i=a}catch(a){cr("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(r.newValue);n!==ln.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(A=>this.syncEngine.eo(A)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const A=new Lh(this.currentUser,e,r,n),s=Kx(this.persistenceKey,this.currentUser,e);this.setItem(s,A.Vs())}Qs(e){const r=Kx(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const A=ep(this.persistenceKey,e),s=new Xl(e,r,n);this.setItem(A,s.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return jh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),A=Number(n[1]),s=n[2]!==void 0?n[2]:null;return Lh.Rs(new Ir(s),A,r)}Ys(e,r){const n=this.Ms.exec(e),A=Number(n[1]);return Xl.Rs(A,r)}Ls(e){return Ww.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),A=this.ks(this.Ss),s=this.ks(n),i=[],a=[];return s.forEach(o=>{A.has(o)||i.push(o)}),A.forEach(o=>{s.has(o)||a.push(o)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Sw();return e.forEach((n,A)=>{r=r.unionWith(A.activeTargetIds)}),r}}class J1{constructor(){this.so=new $m,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $m,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function rp(){return qu===null?qu=function(){return 268435456+Math.round(2147483648*Math.random())}():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr="WebChannelConnection";class RD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${A}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${A}`:`project_id=${A}&database_id=${s}`}get Fo(){return!1}Mo(r,n,A,s,i){const a=rp(),o=this.xo(r,n.toUriEncodedString());re("RestConnection",`Sending RPC '${r}' ${a}:`,o,A);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,i),this.No(r,o,c,A).then(d=>(re("RestConnection",`Received RPC '${r}' ${a}: `,d),d),d=>{throw In("RestConnection",`RPC '${r}' ${a} failed with error: `,d,"url: ",o,"request:",A),d})}Lo(r,n,A,s,i,a){return this.Mo(r,n,A,s,i)}Oo(r,n,A){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),A&&A.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const A=SD[r];return`${this.Do}/v1/${n}:${A}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,A){const s=rp();return new Promise((i,a)=>{const o=new mb;o.setWithCredentials(!0),o.listenOnce(wb.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Dd.NO_ERROR:const d=o.getResponseJson();re(Hr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case Dd.TIMEOUT:re(Hr,`RPC '${e}' ${s} timed out`),a(new te(K.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const h=o.getStatus();if(re(Hr,`RPC '${e}' ${s} failed with status:`,h,"response text:",o.getResponseText()),h>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const y=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(m.status);a(new te(y,m.message))}else a(new te(K.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new te(K.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{re(Hr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(A);re(Hr,`RPC '${e}' ${s} sending request:`,A),o.send(r,"POST",c,n,15)})}Bo(e,r,n){const A=rp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=vb(),a=yb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const d=s.join("");re(Hr,`Creating RPC '${e}' stream ${A}: ${d}`,o);const h=i.createWebChannel(d,o);let f=!1,m=!1;const y=new kD({Io:E=>{m?re(Hr,`Not sending because RPC '${e}' stream ${A} is closed:`,E):(f||(re(Hr,`Opening RPC '${e}' stream ${A} transport.`),h.open(),f=!0),re(Hr,`RPC '${e}' stream ${A} sending:`,E),h.send(E))},To:()=>h.close()}),B=(E,x,w)=>{E.listen(x,I=>{try{w(I)}catch(F){setTimeout(()=>{throw F},0)}})};return B(h,El.EventType.OPEN,()=>{m||(re(Hr,`RPC '${e}' stream ${A} transport opened.`),y.yo())}),B(h,El.EventType.CLOSE,()=>{m||(m=!0,re(Hr,`RPC '${e}' stream ${A} transport closed`),y.So())}),B(h,El.EventType.ERROR,E=>{m||(m=!0,In(Hr,`RPC '${e}' stream ${A} transport errored:`,E),y.So(new te(K.UNAVAILABLE,"The operation could not be completed")))}),B(h,El.EventType.MESSAGE,E=>{var x;if(!m){const w=E.data[0];ke(!!w);const I=w,F=I.error||((x=I[0])===null||x===void 0?void 0:x.error);if(F){re(Hr,`RPC '${e}' stream ${A} received error:`,F);const R=F.status;let U=function(_){const Q=dr[_];if(Q!==void 0)return f1(Q)}(R),v=F.message;U===void 0&&(U=K.INTERNAL,v="Unknown error status: "+R+" with message "+F.message),m=!0,y.So(new te(U,v)),h.close()}else re(Hr,`RPC '${e}' stream ${A} received:`,w),y.bo(w)}}),B(a,Bb.STAT_EVENT,E=>{E.stat===Um.PROXY?re(Hr,`RPC '${e}' stream ${A} detected buffering proxy`):E.stat===Um.NOPROXY&&re(Hr,`RPC '${e}' stream ${A} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return typeof window<"u"?window:null}function Vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){return new H4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,r,n=1e3,A=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=A,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),A=Math.max(0,r-n);A>0&&re("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,A,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,r,n,A,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=A,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===K.RESOURCE_EXHAUSTED?(cr(r.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,A])=>{this.Yo===r&&this.P_(n,A)},n=>{e(()=>{const A=new te(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(A)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(A=>{n(()=>this.I_(A))}),this.stream.onMessage(A=>{n(()=>++this.e_==1?this.E_(A):this.onNext(A))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ND extends Y1{constructor(e,r,n,A,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,A,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=G4(this.serializer,e),n=function(s){if(!("targetChange"in s))return Ne.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Ne.min():i.readTime?ur(i.readTime):Ne.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Hm(this.serializer),r.addTarget=function(s,i){let a;const o=i.target;if(a=Fh(o)?{documents:I1(s,o)}:{query:kf(s,o)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=w1(s,i.resumeToken);const c=Mm(s,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ne.min())>0){a.readTime=ma(s,i.snapshotVersion.toTimestamp());const c=Mm(s,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=$4(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Hm(this.serializer),r.removeTarget=e,this.a_(r)}}class DD extends Y1{constructor(e,r,n,A,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,A,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=z4(e.writeResults,e.commitTime),n=ur(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Hm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>kc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD extends class{}{constructor(e,r,n,A){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=A,this.y_=!1}w_(){if(this.y_)throw new te(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,Om(r,n),A,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new te(K.UNKNOWN,s.toString())})}Lo(e,r,n,A,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Lo(e,Om(r,n),A,i,a,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(K.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class LD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(r),this.D_=!1):re("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,r,n,A,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{ii(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=ge(o);c.L_.add(4),await Da(c),c.q_.set("Unknown"),c.L_.delete(4),await Au(c)}(this))})}),this.q_=new LD(n,A)}}async function Au(t){if(ii(t))for(const e of t.B_)await e(!0)}async function Da(t){for(const e of t.B_)await e(!1)}function Pf(t,e){const r=ge(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Yw(r)?Xw(r):La(r).r_()&&Jw(r,e))}function ya(t,e){const r=ge(t),n=La(r);r.N_.delete(e),n.r_()&&Z1(r,e),r.N_.size===0&&(n.r_()?n.o_():ii(r)&&r.q_.set("Unknown"))}function Jw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}La(t).A_(e)}function Z1(t,e){t.Q_.xe(e),La(t).R_(e)}function Xw(t){t.Q_=new L4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),La(t).start(),t.q_.v_()}function Yw(t){return ii(t)&&!La(t).n_()&&t.N_.size>0}function ii(t){return ge(t).L_.size===0}function eT(t){t.Q_=void 0}async function MD(t){t.q_.set("Online")}async function OD(t){t.N_.forEach((e,r)=>{Jw(t,e)})}async function HD(t,e){eT(t),Yw(t)?(t.q_.M_(e),Xw(t)):t.q_.set("Unknown")}async function VD(t,e,r){if(t.q_.set("Online"),e instanceof m1&&e.state===2&&e.cause)try{await async function(A,s){const i=s.cause;for(const a of s.targetIds)A.N_.has(a)&&(await A.remoteSyncer.rejectListen(a,i),A.N_.delete(a),A.Q_.removeTarget(a))}(t,e)}catch(n){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Mh(t,n)}else if(e instanceof Hd?t.Q_.Ke(e):e instanceof p1?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ne.min()))try{const n=await G1(t.localStore);r.compareTo(n)>=0&&await function(s,i){const a=s.Q_.rt(i);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,c)=>{const d=s.N_.get(o);if(!d)return;s.N_.set(o,d.withResumeToken(tr.EMPTY_BYTE_STRING,d.snapshotVersion)),Z1(s,o);const h=new IA(d.target,o,c,d.sequenceNumber);Jw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){re("RemoteStore","Failed to raise snapshot:",n),await Mh(t,n)}}async function Mh(t,e,r){if(!Ai(e))throw e;t.L_.add(1),await Da(t),t.q_.set("Offline"),r||(r=()=>G1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Au(t)})}function tT(t,e){return e().catch(r=>Mh(t,r,e))}async function Pa(t){const e=ge(t),r=Ws(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KD(e);)try{const A=await TD(e.localStore,n);if(A===null){e.O_.length===0&&r.o_();break}n=A.batchId,GD(e,A)}catch(A){await Mh(e,A)}rT(e)&&nT(e)}function KD(t){return ii(t)&&t.O_.length<10}function GD(t,e){t.O_.push(e);const r=Ws(t);r.r_()&&r.V_&&r.m_(e.mutations)}function rT(t){return ii(t)&&!Ws(t).n_()&&t.O_.length>0}function nT(t){Ws(t).start()}async function zD(t){Ws(t).p_()}async function $D(t){const e=Ws(t);for(const r of t.O_)e.m_(r.mutations)}async function WD(t,e,r){const n=t.O_.shift(),A=Dw.from(n,e,r);await tT(t,()=>t.remoteSyncer.applySuccessfulWrite(A)),await Pa(t)}async function qD(t,e){e&&Ws(t).V_&&await async function(n,A){if(function(i){return h1(i)&&i!==K.ABORTED}(A.code)){const s=n.O_.shift();Ws(n).s_(),await tT(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,A)),await Pa(n)}}(t,e),rT(t)&&nT(t)}async function zx(t,e){const r=ge(t);r.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const n=ii(r);r.L_.add(3),await Da(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Au(r)}async function Wm(t,e){const r=ge(t);e?(r.L_.delete(2),await Au(r)):e||(r.L_.add(2),await Da(r),r.q_.set("Unknown"))}function La(t){return t.K_||(t.K_=function(r,n,A){const s=ge(r);return s.w_(),new ND(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:MD.bind(null,t),Ro:OD.bind(null,t),mo:HD.bind(null,t),d_:VD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yw(t)?Xw(t):t.q_.set("Unknown")):(await t.K_.stop(),eT(t))})),t.K_}function Ws(t){return t.U_||(t.U_=function(r,n,A){const s=ge(r);return s.w_(),new DD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zD.bind(null,t),mo:qD.bind(null,t),f_:$D.bind(null,t),g_:WD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pa(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,r,n,A,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=A,this.removalCallback=s,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,A,s){const i=Date.now()+n,a=new Zw(e,r,i,A,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ja(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Ai(t))return new te(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Be.comparator(r.key,n.key):(r,n)=>Be.comparator(r.key,n.key),this.keyedMap=bl(),this.sortedSet=new Dt(this.comparator)}static emptySet(e){return new Jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const A=r.getNext().key,s=n.getNext().key;if(!A.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Jo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.W_=new Dt(Be.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Te():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class va{constructor(e,r,n,A,s,i,a,o,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=A,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,A,s){const i=[];return r.forEach(a=>{i.push({type:0,doc:a})}),new va(e,r,Jo.emptySet(r),i,n,A,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let A=0;A<r.length;A++)if(r[A].type!==n[A].type||!r[A].doc.isEqual(n[A].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XD{constructor(){this.queries=Wx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const A=ge(r),s=A.queries;A.queries=Wx(),s.forEach((i,a)=>{for(const o of a.j_)o.onError(n)})})(this,new te(K.ABORTED,"Firestore shutting down"))}}function Wx(){return new GA(t=>Yb(t),Yc)}async function eB(t,e){const r=ge(t);let n=3;const A=e.query;let s=r.queries.get(A);s?!s.H_()&&e.J_()&&(n=2):(s=new JD,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(A,!0);break;case 1:s.z_=await r.onListen(A,!1);break;case 2:await r.onFirstRemoteStoreListen(A)}}catch(i){const a=ja(i,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(a)}r.queries.set(A,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&rB(r)}async function tB(t,e){const r=ge(t),n=e.query;let A=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?A=e.J_()?0:1:!s.H_()&&e.J_()&&(A=2))}switch(A){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function YD(t,e){const r=ge(t);let n=!1;for(const A of e){const s=A.query,i=r.queries.get(s);if(i){for(const a of i.j_)a.X_(A)&&(n=!0);i.z_=A}}n&&rB(r)}function ZD(t,e,r){const n=ge(t),A=n.queries.get(e);if(A)for(const s of A.j_)s.onError(r);n.queries.delete(e)}function rB(t){t.Y_.forEach(e=>{e.next()})}var qm,qx;(qx=qm||(qm={})).ea="default",qx.Cache="cache";class nB{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const A of e.docChanges)A.type!==3&&n.push(A);e=new va(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.serializer=e}Es(e){return aA(this.serializer,e)}ds(e){return e.metadata.exists?C1(this.serializer,e.document,!1):jt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ur(e)}}class tP{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=AT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=lt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new Jx(this.serializer);for(const A of e)if(A.metadata.queries){const s=n.Es(A.metadata.name);for(const i of A.metadata.queries){const a=(r.get(i)||rt()).add(s);r.set(i,a)}}return r}async complete(){const e=await FD(this.localStore,new Jx(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await QD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function AT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.key=e}}class iT{constructor(e){this.key=e}}class oT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=rt(),this.mutatedKeys=rt(),this.Aa=e1(e),this.Ra=new Jo(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new $x,A=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=A,a=!1;const o=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,c=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal((d,h)=>{const f=A.get(d),m=Zc(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),B=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?y!==B&&(n.track({type:3,doc:m}),E=!0):this.ga(f,m)||(n.track({type:2,doc:m}),E=!0,(o&&this.Aa(m,o)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!f&&m?(n.track({type:0,doc:m}),E=!0):f&&!m&&(n.track({type:1,doc:f}),E=!0,(o||c)&&(a=!0)),E&&(m?(i=i.add(m),s=B?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,A){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,y){const B=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return B(m)-B(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),A=A!=null&&A;const a=r&&!A?this.ya():[],o=this.da.size===0&&this.current&&!A?1:0,c=o!==this.Ea;return this.Ea=o,i.length!==0||c?{snapshot:new va(this.query,e.Ra,s,i,e.mutatedKeys,o===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $x,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=rt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new iT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new sT(n))}),r}ba(e){this.Ta=e.Ts,this.da=rt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return va.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class rP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class nP{constructor(e){this.key=e,this.va=!1}}class AP{constructor(e,r,n,A,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=A,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new GA(a=>Yb(a),Yc),this.Ma=new Map,this.xa=new Set,this.Oa=new Dt(Be.comparator),this.Na=new Map,this.La=new Vw,this.Ba={},this.ka=new Map,this.qa=qi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sP(t,e,r=!0){const n=Lf(t);let A;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),A=s.view.Da()):A=await aT(n,e,r,!0),A}async function iP(t,e){const r=Lf(t);await aT(r,e,!0,!1)}async function aT(t,e,r,n){const A=await wa(t.localStore,Wr(e)),s=A.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let a;return n&&(a=await AB(t,e,s,i==="current",A.resumeToken)),t.isPrimaryClient&&r&&Pf(t.remoteStore,A),a}async function AB(t,e,r,n,A){t.Ka=(h,f,m)=>async function(B,E,x,w){let I=E.view.ma(x);I.ns&&(I=await Ph(B.localStore,E.query,!1).then(({documents:v})=>E.view.ma(v,I)));const F=w&&w.targetChanges.get(E.targetId),R=w&&w.targetMismatches.get(E.targetId)!=null,U=E.view.applyChanges(I,B.isPrimaryClient,F,R);return Jm(B,E.targetId,U.wa),U.snapshot}(t,h,f,m);const s=await Ph(t.localStore,e,!0),i=new oT(e,s.Ts),a=i.ma(s.documents),o=ru.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",A),c=i.applyChanges(a,t.isPrimaryClient,o);Jm(t,r,c.wa);const d=new rP(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function oP(t,e,r){const n=ge(t),A=n.Fa.get(e),s=n.Ma.get(A.targetId);if(s.length>1)return n.Ma.set(A.targetId,s.filter(i=>!Yc(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(A.targetId),n.sharedClientState.isActiveQueryTarget(A.targetId)||await Ba(n.localStore,A.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(A.targetId),r&&ya(n.remoteStore,A.targetId),xa(n,A.targetId)}).catch(ni)):(xa(n,A.targetId),await Ba(n.localStore,A.targetId,!0))}async function aP(t,e){const r=ge(t),n=r.Fa.get(e),A=r.Ma.get(n.targetId);r.isPrimaryClient&&A.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),ya(r.remoteStore,n.targetId))}async function lP(t,e,r){const n=aB(t);try{const A=await function(i,a){const o=ge(i),c=$t.now(),d=a.reduce((m,y)=>m.add(y.key),rt());let h,f;return o.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=un(),B=rt();return o.cs.getEntries(m,d).next(E=>{y=E,y.forEach((x,w)=>{w.isValidDocument()||(B=B.add(x))})}).next(()=>o.localDocuments.getOverlayedDocuments(m,y)).next(E=>{h=E;const x=[];for(const w of a){const I=N4(w,h.get(w.key).overlayedDocument);I!=null&&x.push(new zA(w.key,I,Ob(I.value.mapValue),zt.exists(!0)))}return o.mutationQueue.addMutationBatch(m,c,x,a)}).next(E=>{f=E;const x=E.applyToLocalDocumentSet(h,B);return o.documentOverlayCache.saveOverlays(m,E.batchId,x)})}).then(()=>({batchId:f.batchId,changes:r1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(A.batchId),function(i,a,o){let c=i.Ba[i.currentUser.toKey()];c||(c=new Dt(Je)),c=c.insert(a,o),i.Ba[i.currentUser.toKey()]=c}(n,A.batchId,r),await $A(n,A.changes),await Pa(n.remoteStore)}catch(A){const s=ja(A,"Failed to persist write");r.reject(s)}}async function lT(t,e){const r=ge(t);try{const n=await bD(r.localStore,e);e.targetChanges.forEach((A,s)=>{const i=r.Na.get(s);i&&(ke(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1),A.addedDocuments.size>0?i.va=!0:A.modifiedDocuments.size>0?ke(i.va):A.removedDocuments.size>0&&(ke(i.va),i.va=!1))}),await $A(r,n,e)}catch(n){await ni(n)}}function Xx(t,e,r){const n=ge(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const A=[];n.Fa.forEach((s,i)=>{const a=i.view.Z_(e);a.snapshot&&A.push(a.snapshot)}),function(i,a){const o=ge(i);o.onlineState=a;let c=!1;o.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&rB(o)}(n.eventManager,e),A.length&&n.Ca.d_(A),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function cP(t,e,r){const n=ge(t);n.sharedClientState.updateQueryState(e,"rejected",r);const A=n.Na.get(e),s=A&&A.key;if(s){let i=new Dt(Be.comparator);i=i.insert(s,jt.newNoDocument(s,Ne.min()));const a=rt().add(s),o=new tu(Ne.min(),new Map,new Dt(Je),i,a);await lT(n,o),n.Oa=n.Oa.remove(s),n.Na.delete(e),oB(n)}else await Ba(n.localStore,e,!1).then(()=>xa(n,e,r)).catch(ni)}async function uP(t,e){const r=ge(t),n=e.batch.batchId;try{const A=await ED(r.localStore,e);iB(r,n,null),sB(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await $A(r,A)}catch(A){await ni(A)}}async function dP(t,e,r){const n=ge(t);try{const A=await function(i,a){const o=ge(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return o.mutationQueue.lookupMutationBatch(c,a).next(h=>(ke(h!==null),d=h.keys(),o.mutationQueue.removeMutationBatch(c,h))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>o.localDocuments.getDocuments(c,d))})}(n.localStore,e);iB(n,e,r),sB(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await $A(n,A)}catch(A){await ni(A)}}async function hP(t,e){const r=ge(t);ii(r.remoteStore)||re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const a=ge(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(r.localStore);if(n===-1)return void e.resolve();const A=r.ka.get(n)||[];A.push(e),r.ka.set(n,A)}catch(n){const A=ja(n,"Initialization of waitForPendingWrites() operation failed");e.reject(A)}}function sB(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function iB(t,e,r){const n=ge(t);let A=n.Ba[n.currentUser.toKey()];if(A){const s=A.get(e);s&&(r?s.reject(r):s.resolve(),A=A.remove(e)),n.Ba[n.currentUser.toKey()]=A}}function xa(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||cT(t,n)})}function cT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(ya(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),oB(t))}function Jm(t,e,r){for(const n of r)n instanceof sT?(t.La.addReference(n.key,e),fP(t,n)):n instanceof iT?(re("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||cT(t,n.key)):Te()}function fP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(re("SyncEngine","New document in limbo: "+r),t.xa.add(n),oB(t))}function oB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Be(lt.fromString(e)),n=t.qa.next();t.Na.set(n,new nP(r)),t.Oa=t.Oa.insert(r,n),Pf(t.remoteStore,new IA(Wr(ka(r.path)),n,"TargetPurposeLimboResolution",ln.oe))}}async function $A(t,e,r){const n=ge(t),A=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((a,o)=>{i.push(n.Ka(o,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(o.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(o.targetId,h?"current":"not-current")}if(c){A.push(c);const h=$w.Wi(o.targetId,c);s.push(h)}}))}),await Promise.all(i),n.Ca.d_(A),await async function(o,c){const d=ge(o);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(c,f=>j.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>j.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Ai(h))throw h;re("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),y=m.snapshotVersion,B=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,B)}}}(n.localStore,s))}async function gP(t,e){const r=ge(t);if(!r.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const n=await K1(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(a=>{a.forEach(o=>{o.reject(new te(K.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await $A(r,n.hs)}}function pP(t,e){const r=ge(t),n=r.Na.get(e);if(n&&n.va)return rt().add(n.key);{let A=rt();const s=r.Ma.get(e);if(!s)return A;for(const i of s){const a=r.Fa.get(i);A=A.unionWith(a.view.Va)}return A}}async function mP(t,e){const r=ge(t),n=await Ph(r.localStore,e.query,!0),A=e.view.ba(n);return r.isPrimaryClient&&Jm(r,e.targetId,A.wa),A}async function wP(t,e){const r=ge(t);return W1(r.localStore,e).then(n=>$A(r,n))}async function BP(t,e,r,n){const A=ge(t),s=await function(a,o){const c=ge(a),d=ge(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,o).next(f=>f?c.localDocuments.getDocuments(h,f):j.resolve(null)))}(A.localStore,e);s!==null?(r==="pending"?await Pa(A.remoteStore):r==="acknowledged"||r==="rejected"?(iB(A,e,n||null),sB(A,e),function(a,o){ge(ge(a).mutationQueue).On(o)}(A.localStore,e)):Te(),await $A(A,s)):re("SyncEngine","Cannot apply mutation batch with id: "+e)}async function yP(t,e){const r=ge(t);if(Lf(r),aB(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),A=await Yx(r,n.toArray());r.Qa=!0,await Wm(r.remoteStore,!0);for(const s of A)Pf(r.remoteStore,s)}else if(e===!1&&r.Qa!==!1){const n=[];let A=Promise.resolve();r.Ma.forEach((s,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):A=A.then(()=>(xa(r,i),Ba(r.localStore,i,!0))),ya(r.remoteStore,i)}),await A,await Yx(r,n),function(i){const a=ge(i);a.Na.forEach((o,c)=>{ya(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Dt(Be.comparator)}(r),r.Qa=!1,await Wm(r.remoteStore,!1)}}async function Yx(t,e,r){const n=ge(t),A=[],s=[];for(const i of e){let a;const o=n.Ma.get(i);if(o&&o.length!==0){a=await wa(n.localStore,Wr(o[0]));for(const c of o){const d=n.Fa.get(c),h=await mP(n,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await $1(n.localStore,i);a=await wa(n.localStore,c),await AB(n,uT(c),i,!1,a.resumeToken)}A.push(a)}return n.Ca.d_(s),A}function uT(t){return qb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vP(t){return function(r){return ge(ge(r).persistence).Qi()}(ge(t).localStore)}async function xP(t,e,r,n){const A=ge(t);if(A.Qa)return void re("SyncEngine","Ignoring unexpected query state notification.");const s=A.Ma.get(e);if(s&&s.length>0)switch(r){case"current":case"not-current":{const i=await W1(A.localStore,Zb(s[0])),a=tu.createSynthesizedRemoteEventForCurrentChange(e,r==="current",tr.EMPTY_BYTE_STRING);await $A(A,i,a);break}case"rejected":await Ba(A.localStore,e,!0),xa(A,e,n);break;default:Te()}}async function CP(t,e,r){const n=Lf(t);if(n.Qa){for(const A of e){if(n.Ma.has(A)&&n.sharedClientState.isActiveQueryTarget(A)){re("SyncEngine","Adding an already active target "+A);continue}const s=await $1(n.localStore,A),i=await wa(n.localStore,s);await AB(n,uT(s),i.targetId,!1,i.resumeToken),Pf(n.remoteStore,i)}for(const A of r)n.Ma.has(A)&&await Ba(n.localStore,A,!1).then(()=>{ya(n.remoteStore,A),xa(n,A)}).catch(ni)}}function Lf(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cP.bind(null,e),e.Ca.d_=YD.bind(null,e.eventManager),e.Ca.$a=ZD.bind(null,e.eventManager),e}function aB(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dP.bind(null,e),e}function IP(t,e,r){const n=ge(t);(async function(s,i,a){try{const o=await i.getMetadata();if(await function(m,y){const B=ge(m),E=ur(y.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",x=>B.Gr.getBundleMetadata(x,y.id)).then(x=>!!x&&x.createTime.compareTo(E)>=0)}(s.localStore,o))return await i.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(AT(o));const c=new tP(o,s.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&a._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await $A(s,h.Ia,void 0),await function(m,y){const B=ge(m);return B.persistence.runTransaction("Save bundle","readwrite",E=>B.Gr.saveBundleMetadata(E,y))}(s.localStore,o),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(o){return In("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(n,e,r).then(A=>{n.sharedClientState.notifyBundleLoaded(A)})}class qs{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return V1(this.persistence,new H1,e.initialUser,this.serializer)}Ga(e){return new Kw(Df.Zr,this.serializer)}Wa(e){return new J1}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qs.provider={build:()=>new qs};class _P extends qs{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){ke(this.persistence.referenceDelegate instanceof Dh);const n=this.persistence.referenceDelegate.garbageCollector;return new P1(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new Kw(n=>Dh.Zr(n,r),this.serializer)}}class lB extends qs{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await aB(this.Ja.syncEngine),await Pa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return V1(this.persistence,new H1,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new P1(n,e.asyncQueue,r)}Ha(e,r){const n=new zN(r,this.persistence);return new GN(e.asyncQueue,n)}Ga(e){const r=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new Gw(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,X1(),Vd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new J1}}class dT extends lB{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof tp&&(this.sharedClientState.syncEngine={no:BP.bind(null,r),ro:xP.bind(null,r),io:CP.bind(null,r),Qi:vP.bind(null,r),eo:wP.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await yP(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=X1();if(!tp.D(r))throw new te(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tp(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Js{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Xx(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=gP.bind(null,this.syncEngine),await Wm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XD}()}createDatastore(e){const r=nu(e.databaseInfo.databaseId),n=function(s){return new RD(s)}(e.databaseInfo);return function(s,i,a,o){return new PD(s,i,a,o)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,A,s,i,a){return new jD(n,A,s,i,a)}(this.localStore,this.datastore,e.asyncQueue,r=>Xx(this.syncEngine,r,0),function(){return Gx.D()?new Gx:new UD}())}createSyncEngine(e,r){return function(A,s,i,a,o,c,d){const h=new AP(A,s,i,a,o,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(A){const s=ge(A);re("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Da(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Js.provider={build:()=>new Js};function Zx(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Er,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const A=await this.iu(n);return new eP(JSON.parse(A),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new te(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(A,s){const i=ge(A),a={documents:s.map(h=>Sc(i.serializer,h))},o=await i.Lo("BatchGetDocuments",i.serializer.databaseId,lt.emptyPath(),a,s.length),c=new Map;o.forEach(h=>{const f=K4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());ke(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Na(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const A=Be.fromPath(n);this.mutations.push(new Rw(A,this.precondition(A)))}),await async function(n,A){const s=ge(n),i={writes:A.map(a=>kc(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,lt.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Te();r=Ne.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new te(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ne.min())?zt.exists(!1):zt.updateTime(r):zt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ne.min()))throw new te(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zt.updateTime(r)}return zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,r,n,A,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=A,this.deferred=s,this._u=n.maxAttempts,this.t_=new qw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new bP(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(A=>{this.lu(A)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Jc(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!h1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,r,n,A,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=A,this.user=Ir.UNAUTHENTICATED,this.clientId=Ew.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{re("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(re("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=ja(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function np(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async A=>{n.isEqual(A)||(await K1(e.localStore,A),n=A)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eC(t,e){t.asyncQueue.verifyOperationInProgress();const r=await cB(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>zx(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,A)=>zx(e.remoteStore,A)),t._onlineComponents=e}async function cB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await np(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(A){return A.name==="FirebaseError"?A.code===K.FAILED_PRECONDITION||A.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11}(r))throw r;In("Error using user provided cache. Falling back to memory cache: "+r),await np(t,new qs)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await np(t,new qs);return t._offlineComponents}async function Mf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await eC(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await eC(t,new Js))),t._onlineComponents}function hT(t){return cB(t).then(e=>e.persistence)}function Ma(t){return cB(t).then(e=>e.localStore)}function fT(t){return Mf(t).then(e=>e.remoteStore)}function uB(t){return Mf(t).then(e=>e.syncEngine)}function gT(t){return Mf(t).then(e=>e.datastore)}async function Ca(t){const e=await Mf(t),r=e.eventManager;return r.onListen=sP.bind(null,e.syncEngine),r.onUnlisten=oP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=iP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=aP.bind(null,e.syncEngine),r}function QP(t){return t.asyncQueue.enqueue(async()=>{const e=await hT(t),r=await fT(t);return e.setNetworkEnabled(!0),function(A){const s=ge(A);return s.L_.delete(0),Au(s)}(r)})}function UP(t){return t.asyncQueue.enqueue(async()=>{const e=await hT(t),r=await fT(t);return e.setNetworkEnabled(!1),async function(A){const s=ge(A);s.L_.add(0),await Da(s),s.q_.set("Offline")}(r)})}function SP(t,e){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const a=await function(c,d){const h=ge(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(A,s);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new te(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=ja(a,`Failed to get document '${s} from cache`);i.reject(o)}}(await Ma(t),e,r)),r.promise}function pT(t,e,r={}){const n=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,c){const d=new jf({next:f=>{d.Za(),i.enqueueAndForget(()=>tB(s,h));const m=f.docs.has(a);!m&&f.fromCache?c.reject(new te(K.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&o&&o.source==="server"?c.reject(new te(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new nB(ka(a.path),d,{includeMetadataChanges:!0,_a:!0});return eB(s,h)}(await Ca(t),t.asyncQueue,e,r,n)),n.promise}function kP(t,e){const r=new Er;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const a=await Ph(A,s,!0),o=new oT(s,a.Ts),c=o.ma(a.documents),d=o.applyChanges(c,!1);i.resolve(d.snapshot)}catch(a){const o=ja(a,`Failed to execute query '${s} against cache`);i.reject(o)}}(await Ma(t),e,r)),r.promise}function mT(t,e,r={}){const n=new Er;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,c){const d=new jf({next:f=>{d.Za(),i.enqueueAndForget(()=>tB(s,h)),f.fromCache&&o.source==="server"?c.reject(new te(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new nB(a,d,{includeMetadataChanges:!0,_a:!0});return eB(s,h)}(await Ca(t),t.asyncQueue,e,r,n)),n.promise}function RP(t,e,r){const n=new Er;return t.asyncQueue.enqueueAndForget(async()=>{try{const A=await gT(t);n.resolve(async function(i,a,o){var c;const d=ge(i),{request:h,ut:f,parent:m}=_1(d.serializer,Jb(a),o);d.connection.Fo||delete h.parent;const y=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(E=>!!E.result);ke(y.length===1);const B=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(B).reduce((E,x)=>(E[f[x]]=B[x],E),{})}(A,e,r))}catch(A){n.reject(A)}}),n.promise}function NP(t,e){const r=new jf(e);return t.asyncQueue.enqueueAndForget(async()=>function(A,s){ge(A).Y_.add(s),s.next()}(await Ca(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(A,s){ge(A).Y_.delete(s)}(await Ca(t),r))}}function DP(t,e,r,n){const A=function(i,a){let o;return o=typeof i=="string"?g1().encode(i):i,function(d,h){return new EP(d,h)}(function(d,h){if(d instanceof Uint8Array)return Zx(d,h);if(d instanceof ArrayBuffer)return Zx(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(r,nu(e));t.asyncQueue.enqueueAndForget(async()=>{IP(await uB(t),A,n)})}function PP(t,e){return t.asyncQueue.enqueue(async()=>function(n,A){const s=ge(n);return s.persistence.runTransaction("Get named query","readonly",i=>s.Gr.getNamedQuery(i,A))}(await Ma(t),e))}function LP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,A){const s=ge(n),i=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",o=>i.getFieldIndexes(o).next(c=>function(h,f,m,y,B){h=[...h],f=[...f],h.sort(m),f.sort(m);const E=h.length,x=f.length;let w=0,I=0;for(;w<x&&I<E;){const F=m(h[I],f[w]);F<0?B(h[I++]):F>0?y(f[w++]):(w++,I++)}for(;w<x;)y(f[w++]);for(;I<E;)B(h[I++])}(c,A,ON,d=>{a.push(i.addFieldIndex(o,d))},d=>{a.push(i.deleteFieldIndex(o,d))})).next(()=>j.waitFor(a)))}(await Ma(t),e))}function jP(t,e){return t.asyncQueue.enqueue(async()=>function(n,A){ge(n).ss.zi=A}(await Ma(t),e))}function MP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=ge(r),A=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",s=>A.deleteAllFieldIndexes(s))}(await Ma(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t,e,r){if(!r)throw new te(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BT(t,e,r,n){if(e===!0&&n===!0)throw new te(K.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function rC(t){if(!Be.isDocumentKey(t))throw new te(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nC(t){if(Be.isDocumentKey(t))throw new te(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Of(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Of(t);throw new te(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function yT(t,e){if(e<=0)throw new te(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new te(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new te(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new te(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new te(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,A){return n.timeoutSeconds===A.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class su{constructor(e,r,n,A){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Cb;switch(n.type){case"firstParty":return new DN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new te(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=tC.get(r);n&&(re("ComponentProvider","Removing Datastore"),tC.delete(r),n.terminate())}(this),Promise.resolve()}}function vT(t,e,r,n={}){var A;const s=(t=st(t,su))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let a,o;if(typeof n.mockUserToken=="string")a=n.mockUserToken,o=Ir.MOCK_USER;else{a=sR(n.mockUserToken,(A=t._app)===null||A===void 0?void 0:A.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new te(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new Ir(c)}t._authCredentials=new kN(new xb(a,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new br(this.firestore,e,this._query)}}class Ar{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class $n extends br{constructor(e,r,n){super(e,r,ka(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new Be(e))}withConverter(e){return new $n(this.firestore,e,this._path)}}function Xm(t,e,...r){if(t=kt(t),dB("collection","path",e),t instanceof su){const n=lt.fromString(e,...r);return nC(n),new $n(t,null,n)}{if(!(t instanceof Ar||t instanceof $n))throw new te(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(lt.fromString(e,...r));return nC(n),new $n(t.firestore,null,n)}}function OP(t,e){if(t=st(t,su),dB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new te(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new br(t,null,function(n){return new KA(lt.emptyPath(),n)}(e))}function tA(t,e,...r){if(t=kt(t),arguments.length===1&&(e=Ew.newId()),dB("doc","path",e),t instanceof su){const n=lt.fromString(e,...r);return rC(n),new Ar(t,null,new Be(n))}{if(!(t instanceof Ar||t instanceof $n))throw new te(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(lt.fromString(e,...r));return rC(n),new Ar(t.firestore,t instanceof $n?t.converter:null,new Be(n))}}function HP(t,e){return t=kt(t),e=kt(e),(t instanceof Ar||t instanceof $n)&&(e instanceof Ar||e instanceof $n)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function hB(t,e){return t=kt(t),e=kt(e),t instanceof br&&e instanceof br&&t.firestore===e.firestore&&Yc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qw(this,"async_queue_retry"),this.Vu=()=>{const n=Vd();n&&re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Vd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Vd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Er;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ai(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const A=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(n);throw cr("INTERNAL UNHANDLED ERROR: ",A),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const A=Zw.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(A),A}fu(){this.Eu&&Te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function Ym(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const A=r;for(const s of n)if(s in A&&typeof A[s]=="function")return!0;return!1}(t,["next","error","complete"])}class xT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=-1;class Tt extends su{constructor(e,r,n,A){super(e,r,n,A),this.type="firestore",this._queue=new sC,this._persistenceKey=(A==null?void 0:A.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sC(e),this._firestoreClient=void 0,await e}}}function KP(t,e,r){r||(r="(default)");const n=qc(t,"firestore");if(n.isInitialized(r)){const A=n.getImmediate({identifier:r}),s=n.getOptions(r);if(Hs(s,e))return A;throw new te(K.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new te(K.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function CT(t,e){const r=typeof t=="object"?t:Iw(),n=typeof t=="string"?t:e||"(default)",A=qc(r,"firestore").getImmediate({identifier:n});if(!A._initialized){const s=nR("firestore");s&&vT(A,...s)}return A}function Wt(t){if(t._terminated)throw new te(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IT(t),t._firestoreClient}function IT(t){var e,r,n;const A=t._freezeSettings(),s=function(a,o,c,d){return new f4(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,wT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,A);t._componentsProvider||!((r=A.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=A.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:A.localCache._offlineComponentProvider,_online:A.localCache._onlineComponentProvider}),t._firestoreClient=new FP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}function GP(t,e){In("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return _T(t,Js.provider,{build:n=>new lB(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function zP(t){In("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();_T(t,Js.provider,{build:r=>new dT(r,e.cacheSizeBytes)})}function _T(t,e,r){if((t=st(t,Tt))._firestoreClient||t._terminated)throw new te(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new te(K.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},IT(t)}function $P(t){if(t._initialized&&!t._terminated)throw new te(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!oA.D())return Promise.resolve();const A=n+"main";await oA.delete(A)}(zw(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function WP(t){return function(r){const n=new Er;return r.asyncQueue.enqueueAndForget(async()=>hP(await uB(r),n)),n.promise}(Wt(t=st(t,Tt)))}function qP(t){return QP(Wt(t=st(t,Tt)))}function JP(t){return UP(Wt(t=st(t,Tt)))}function XP(t){return pN(t.app,"firestore",t._databaseId.database),t._delete()}function YP(t,e){const r=Wt(t=st(t,Tt)),n=new xT;return DP(r,t._databaseId,e,n),n}function ZP(t,e){return PP(Wt(t=st(t,Tt)),e).then(r=>r?new br(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class ET{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xs(tr.fromBase64String(e))}catch(r){throw new te(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Xs(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new te(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function eL(){return new oi("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new te(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new te(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,A){if(n.length!==A.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==A[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=/^__.*__$/;class rL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new zA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ra(e,this.data,r,this.fieldTransforms)}}class bT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new zA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function TT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class Vf{constructor(e,r,n,A,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=A,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),A=this.Fu({path:n,xu:!1});return A.Ou(e),A}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),A=this.Fu({path:n,xu:!1});return A.vu(),A}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Oh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(TT(this.Cu)&&tL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||nu(e)}Qu(e,r,n,A=!1){return new Vf({Cu:e,methodName:r,qu:n,path:Mt.emptyPath(),xu:!1,ku:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function no(t){const e=t._freezeSettings(),r=nu(t._databaseId);return new nL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Kf(t,e,r,n,A,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,A);yB("Data must be an object, but it was:",i,n);const a=UT(n,i);let o,c;if(s.merge)o=new cn(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Rc(e,h,r);if(!i.contains(f))throw new te(K.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);kT(d,f)||d.push(f)}o=new cn(d),c=i.fieldTransforms.filter(h=>o.covers(h.field))}else o=null,c=i.fieldTransforms;return new rL(new kr(a),o,c)}class ou extends ai{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ou}}function FT(t,e,r){return new Vf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fB extends ai{_toFieldTransform(e){return new eu(e.path,new ga)}isEqual(e){return e instanceof fB}}class gB extends ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=FT(this,e,!0),n=this.Ku.map(s=>Ao(s,r)),A=new Gi(n);return new eu(e.path,A)}isEqual(e){return e instanceof gB&&Hs(this.Ku,e.Ku)}}class pB extends ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=FT(this,e,!0),n=this.Ku.map(s=>Ao(s,r)),A=new zi(n);return new eu(e.path,A)}isEqual(e){return e instanceof pB&&Hs(this.Ku,e.Ku)}}class mB extends ai{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new pa(e.serializer,s1(e.serializer,this.$u));return new eu(e.path,r)}isEqual(e){return e instanceof mB&&this.$u===e.$u}}function wB(t,e,r,n){const A=t.Qu(1,e,r);yB("Data must be an object, but it was:",A,n);const s=[],i=kr.empty();si(n,(o,c)=>{const d=Gf(e,o,r);c=kt(c);const h=A.Nu(d);if(c instanceof ou)s.push(d);else{const f=Ao(c,h);f!=null&&(s.push(d),i.set(d,f))}});const a=new cn(s);return new bT(i,a,A.fieldTransforms)}function BB(t,e,r,n,A,s){const i=t.Qu(1,e,r),a=[Rc(e,n,r)],o=[A];if(s.length%2!=0)throw new te(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Rc(e,s[f])),o.push(s[f+1]);const c=[],d=kr.empty();for(let f=a.length-1;f>=0;--f)if(!kT(c,a[f])){const m=a[f];let y=o[f];y=kt(y);const B=i.Nu(m);if(y instanceof ou)c.push(m);else{const E=Ao(y,B);E!=null&&(c.push(m),d.set(m,E))}}const h=new cn(c);return new bT(d,h,i.fieldTransforms)}function QT(t,e,r,n=!1){return Ao(r,t.Qu(n?4:3,e))}function Ao(t,e){if(ST(t=kt(t)))return yB("Unsupported field value:",e,t),UT(t,e);if(t instanceof ai)return function(n,A){if(!TT(A.Cu))throw A.Bu(`${n._methodName}() can only be used with update() and set()`);if(!A.path)throw A.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(A);s&&A.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,A){const s=[];let i=0;for(const a of n){let o=Ao(a,A.Lu(i));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,A){if((n=kt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return s1(A.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=$t.fromDate(n);return{timestampValue:ma(A.serializer,s)}}if(n instanceof $t){const s=new $t(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ma(A.serializer,s)}}if(n instanceof Hf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Xs)return{bytesValue:w1(A.serializer,n._byteString)};if(n instanceof Ar){const s=A.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw A.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jw(n.firestore._databaseId||A.databaseId,n._key.path)}}if(n instanceof iu)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(o=>{if(typeof o!="number")throw a.Bu("VectorValues must only contain numeric values.");return kw(a.serializer,o)})}}}}}}(n,A);throw A.Bu(`Unsupported field value: ${Of(n)}`)}(t,e)}function UT(t,e){const r={};return Pb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(t,(n,A)=>{const s=Ao(A,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function ST(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof Hf||t instanceof Xs||t instanceof Ar||t instanceof ai||t instanceof iu)}function yB(t,e,r){if(!ST(r)||!function(A){return typeof A=="object"&&A!==null&&(Object.getPrototypeOf(A)===Object.prototype||Object.getPrototypeOf(A)===null)}(r)){const n=Of(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Rc(t,e,r){if((e=kt(e))instanceof oi)return e._internalPath;if(typeof e=="string")return Gf(t,e);throw Oh("Field path arguments must be of type string or ",t,!1,void 0,r)}const AL=new RegExp("[~\\*/\\[\\]]");function Gf(t,e,r){if(e.search(AL)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new oi(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Oh(t,e,r,n,A){const s=n&&!n.isEmpty(),i=A!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(s||i)&&(o+=" (found",s&&(o+=` in field ${n}`),i&&(o+=` in document ${A}`),o+=")"),new te(K.INVALID_ARGUMENT,a+t+o)}function kT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,r,n,A,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=A,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class sL extends Nc{data(){return super.data()}}function zf(t,e){return typeof e=="string"?Gf(t,e):e instanceof oi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vB{}class Oa extends vB{}function Zm(t,e,...r){let n=[];e instanceof vB&&n.push(e),n=n.concat(r),function(s){const i=s.filter(o=>o instanceof so).length,a=s.filter(o=>o instanceof Ha).length;if(i>1||i>0&&a>0)throw new te(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const A of n)t=A._apply(t);return t}class Ha extends Oa{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Ha(e,r,n)}_apply(e){const r=this._parse(e);return DT(e._query,r),new br(e.firestore,e.converter,jm(e._query,r))}_parse(e){const r=no(e.firestore);return function(s,i,a,o,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new te(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){oC(h,d);const m=[];for(const y of h)m.push(iC(o,s,y));f={arrayValue:{values:m}}}else f=iC(o,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||oC(h,d),f=QT(a,i,h,d==="in"||d==="not-in");return ct.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function iL(t,e,r){const n=e,A=zf("where",t);return Ha._create(A,n,r)}class so extends vB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new so(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:xt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(A,s){let i=A;const a=s.getFlattenedFilters();for(const o of a)DT(i,o),i=jm(i,o)}(e._query,r),new br(e.firestore,e.converter,jm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function oL(...t){return t.forEach(e=>PT("or",e)),so._create("or",t)}function aL(...t){return t.forEach(e=>PT("and",e)),so._create("and",t)}class $f extends Oa{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new $f(e,r)}_apply(e){const r=function(A,s,i){if(A.startAt!==null)throw new te(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(A.endAt!==null)throw new te(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uc(s,i)}(e._query,this._field,this._direction);return new br(e.firestore,e.converter,function(A,s){const i=A.explicitOrderBy.concat([s]);return new KA(A.path,A.collectionGroup,i,A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e._query,r))}}function lL(t,e="asc"){const r=e,n=zf("orderBy",t);return $f._create(n,r)}class au extends Oa{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new au(e,r,n)}_apply(e){return new br(e.firestore,e.converter,Uh(e._query,this._limit,this._limitType))}}function cL(t){return yT("limit",t),au._create("limit",t,"F")}function uL(t){return yT("limitToLast",t),au._create("limitToLast",t,"L")}class lu extends Oa{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new lu(e,r,n)}_apply(e){const r=NT(e,this.type,this._docOrFields,this._inclusive);return new br(e.firestore,e.converter,function(A,s){return new KA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,s,A.endAt)}(e._query,r))}}function dL(...t){return lu._create("startAt",t,!0)}function hL(...t){return lu._create("startAfter",t,!1)}class cu extends Oa{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new cu(e,r,n)}_apply(e){const r=NT(e,this.type,this._docOrFields,this._inclusive);return new br(e.firestore,e.converter,function(A,s){return new KA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,s)}(e._query,r))}}function fL(...t){return cu._create("endBefore",t,!1)}function gL(...t){return cu._create("endAt",t,!0)}function NT(t,e,r,n){if(r[0]=kt(r[0]),r[0]instanceof Nc)return function(s,i,a,o,c){if(!o)throw new te(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of qo(s))if(h.field.isKeyField())d.push(Vi(i,o.key));else{const f=o.data.field(h.field);if(Tf(f))throw new te(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new te(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new $s(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const A=no(t.firestore);return function(i,a,o,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new te(K.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<d.length;y++){const B=d[y];if(f[y].field.isKeyField()){if(typeof B!="string")throw new te(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof B}`);if(!Uw(i)&&B.indexOf("/")!==-1)throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${B}' contains a slash.`);const E=i.path.child(lt.fromString(B));if(!Be.isDocumentKey(E))throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const x=new Be(E);m.push(Vi(a,x))}else{const E=QT(o,c,B);m.push(E)}}return new $s(m,h)}(t._query,t.firestore._databaseId,A,e,r,n)}}function iC(t,e,r){if(typeof(r=kt(r))=="string"){if(r==="")throw new te(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uw(e)&&r.indexOf("/")!==-1)throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(lt.fromString(r));if(!Be.isDocumentKey(n))throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Vi(t,new Be(n))}if(r instanceof Ar)return Vi(t,r._key);throw new te(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Of(r)}.`)}function oC(t,e){if(!Array.isArray(t)||t.length===0)throw new te(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DT(t,e){const r=function(A,s){for(const i of A)for(const a of i.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new te(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function PT(t,e){if(!(e instanceof Ha||e instanceof so))throw new te(K.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class xB{convertValue(e,r="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(PA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return si(e,(A,s)=>{n[A]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,A;const s=(A=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||A===void 0?void 0:A.map(i=>Kt(i.doubleValue));return new iu(s)}convertGeoPoint(e){return new Hf(Kt(e.latitude),Kt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ff(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const r=DA(e);return new $t(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=lt.fromString(e);ke(F1(n));const A=new Ks(n.get(1),n.get(3)),s=new Be(n.popFirst(5));return A.isEqual(r)||cr(`Document ${s} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class pL extends xB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){return new Ia("sum",Rc("sum",t))}function wL(t){return new Ia("avg",Rc("average",t))}function LT(){return new Ia("count")}function BL(t,e){var r,n;return t instanceof Ia&&e instanceof Ia&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function yL(t,e){return hB(t.query,e.query)&&Hs(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ji extends Nc{constructor(e,r,n,A,s,i){super(e,r,n,A,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(zf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Yl extends Ji{data(e={}){return super.data(e)}}class Xi{constructor(e,r,n,A){this._firestore=e,this._userDataWriter=r,this._snapshot=A,this.metadata=new vs(A.hasPendingWrites,A.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Yl(this._firestore,this._userDataWriter,n.key,n,new vs(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new te(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(A,s){if(A._snapshot.oldDocs.isEmpty()){let i=0;return A._snapshot.docChanges.map(a=>{const o=new Yl(A._firestore,A._userDataWriter,a.doc.key,a.doc,new vs(A._snapshot.mutatedKeys.has(a.doc.key),A._snapshot.fromCache),A.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=A._snapshot.oldDocs;return A._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const o=new Yl(A._firestore,A._userDataWriter,a.doc.key,a.doc,new vs(A._snapshot.mutatedKeys.has(a.doc.key),A._snapshot.fromCache),A.query.converter);let c=-1,d=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:vL(a.type),doc:o,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function vL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}function xL(t,e){return t instanceof Ji&&e instanceof Ji?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xi&&e instanceof Xi&&t._firestore===e._firestore&&hB(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){t=st(t,Ar);const e=st(t.firestore,Tt);return pT(Wt(e),t._key).then(r=>CB(e,t,r))}class li extends xB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,r)}}function IL(t){t=st(t,Ar);const e=st(t.firestore,Tt),r=Wt(e),n=new li(e);return SP(r,t._key).then(A=>new Ji(e,n,t._key,A,new vs(A!==null&&A.hasLocalMutations,!0),t.converter))}function _L(t){t=st(t,Ar);const e=st(t.firestore,Tt);return pT(Wt(e),t._key,{source:"server"}).then(r=>CB(e,t,r))}function jT(t){t=st(t,br);const e=st(t.firestore,Tt),r=Wt(e),n=new li(e);return RT(t._query),mT(r,t._query).then(A=>new Xi(e,n,t,A))}function EL(t){t=st(t,br);const e=st(t.firestore,Tt),r=Wt(e),n=new li(e);return kP(r,t._query).then(A=>new Xi(e,n,t,A))}function bL(t){t=st(t,br);const e=st(t.firestore,Tt),r=Wt(e),n=new li(e);return mT(r,t._query,{source:"server"}).then(A=>new Xi(e,n,t,A))}function Kd(t,e,r){t=st(t,Ar);const n=st(t.firestore,Tt),A=Wf(t.converter,e,r);return Va(n,[Kf(no(n),"setDoc",t._key,A,t.converter!==null,r).toMutation(t._key,zt.none())])}function TL(t,e,r,...n){t=st(t,Ar);const A=st(t.firestore,Tt),s=no(A);let i;return i=typeof(e=kt(e))=="string"||e instanceof oi?BB(s,"updateDoc",t._key,e,r,n):wB(s,"updateDoc",t._key,e),Va(A,[i.toMutation(t._key,zt.exists(!0))])}function MT(t){return Va(st(t.firestore,Tt),[new Na(t._key,zt.none())])}function FL(t,e){const r=st(t.firestore,Tt),n=tA(t),A=Wf(t.converter,e);return Va(r,[Kf(no(t.firestore),"addDoc",n._key,A,t.converter!==null,{}).toMutation(n._key,zt.exists(!1))]).then(()=>n)}function Gd(t,...e){var r,n,A;t=kt(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ym(e[i])||(s=e[i],i++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ym(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(A=h.complete)===null||A===void 0?void 0:A.bind(h)}let o,c,d;if(t instanceof Ar)c=st(t.firestore,Tt),d=ka(t._key.path),o={next:h=>{e[i]&&e[i](CB(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=st(t,br);c=st(h.firestore,Tt),d=h._query;const f=new li(c);o={next:m=>{e[i]&&e[i](new Xi(c,f,h,m))},error:e[i+1],complete:e[i+2]},RT(t._query)}return function(f,m,y,B){const E=new jf(B),x=new nB(m,E,y);return f.asyncQueue.enqueueAndForget(async()=>eB(await Ca(f),x)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>tB(await Ca(f),x))}}(Wt(c),d,a,o)}function QL(t,e){return NP(Wt(t=st(t,Tt)),Ym(e)?e:{next:e})}function Va(t,e){return function(n,A){const s=new Er;return n.asyncQueue.enqueueAndForget(async()=>lP(await uB(n),A,s)),s.promise}(Wt(t),e)}function CB(t,e,r){const n=r.docs.get(e._key),A=new li(t);return new Ji(t,A,e._key,n,new vs(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UL(t){return OT(t,{count:LT()})}function OT(t,e){const r=st(t.firestore,Tt),n=Wt(r),A=Db(e,(s,i)=>new d1(i,s.aggregateType,s._internalFieldPath));return RP(n,t._query,A).then(s=>function(a,o,c){const d=new li(a);return new ET(o,d,c)}(r,t,s))}class SL{constructor(e){this.kind="memory",this._onlineComponentProvider=Js.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=qs.provider}toJSON(){return{kind:this.kind}}}class kL{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=HT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class RL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=qs.provider}toJSON(){return{kind:this.kind}}}class NL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new _P(e)}}toJSON(){return{kind:this.kind}}}function DL(){return new RL}function PL(t){return new NL(t==null?void 0:t.cacheSizeBytes)}function LL(t){return new SL(t)}function jL(t){return new kL(t)}class ML{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Js.provider,this._offlineComponentProvider={build:r=>new lB(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class OL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Js.provider,this._offlineComponentProvider={build:r=>new dT(r,e==null?void 0:e.cacheSizeBytes)}}}function HT(t){return new ML(t==null?void 0:t.forceOwnership)}function HL(){return new OL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=no(e)}set(e,r,n){this._verifyNotCommitted();const A=ds(e,this._firestore),s=Wf(A.converter,r,n),i=Kf(this._dataReader,"WriteBatch.set",A._key,s,A.converter!==null,n);return this._mutations.push(i.toMutation(A._key,zt.none())),this}update(e,r,n,...A){this._verifyNotCommitted();const s=ds(e,this._firestore);let i;return i=typeof(r=kt(r))=="string"||r instanceof oi?BB(this._dataReader,"WriteBatch.update",s._key,r,n,A):wB(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=ds(e,this._firestore);return this._mutations=this._mutations.concat(new Na(r._key,zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new te(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ds(t,e){if((t=kt(t)).firestore!==e)throw new te(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=no(r)}get(r){const n=ds(r,this._firestore),A=new pL(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Te();const i=s[0];if(i.isFoundDocument())return new Nc(this._firestore,A,i.key,i,n.converter);if(i.isNoDocument())return new Nc(this._firestore,A,n._key,null,n.converter);throw Te()})}set(r,n,A){const s=ds(r,this._firestore),i=Wf(s.converter,n,A),a=Kf(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,A);return this._transaction.set(s._key,a),this}update(r,n,A,...s){const i=ds(r,this._firestore);let a;return a=typeof(n=kt(n))=="string"||n instanceof oi?BB(this._dataReader,"Transaction.update",i._key,n,A,s):wB(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(r){const n=ds(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=ds(e,this._firestore),n=new li(this._firestore);return super.get(e).then(A=>new Ji(this._firestore,n,r._key,A._document,new vs(!1,!1),r.converter))}}function KL(t,e,r){t=st(t,Tt);const n=Object.assign(Object.assign({},VL),r);return function(s){if(s.maxAttempts<1)throw new te(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,a){const o=new Er;return s.asyncQueue.enqueueAndForget(async()=>{const c=await gT(s);new TP(s.asyncQueue,c,a,i,o).au()}),o.promise}(Wt(t),A=>e(new KT(t,A)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(){return new ou("deleteField")}function zL(){return new fB("serverTimestamp")}function $L(...t){return new gB("arrayUnion",t)}function WL(...t){return new pB("arrayRemove",t)}function qL(t){return new mB("increment",t)}function JL(t){return new iu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){return Wt(t=st(t,Tt)),new VT(t,e=>Va(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t,e){const r=Wt(t=st(t,Tt));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return In("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(s){const i=typeof s=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new te(K.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,a=[];if(Array.isArray(i.indexes))for(const o of i.indexes){const c=aC(o,"collectionGroup"),d=[];if(Array.isArray(o.fields))for(const h of o.fields){const f=Gf("setIndexConfiguration",aC(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Ri(f,2)):h.order==="ASCENDING"?d.push(new Ri(f,0)):h.order==="DESCENDING"&&d.push(new Ri(f,1))}a.push(new ua(ua.UNKNOWN_ID,c,d,da.empty()))}return a}(e);return LP(r,n)}function aC(t,e){if(typeof t[e]!="string")throw new te(K.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function YL(t){var e;t=st(t,Tt);const r=lC.get(t);if(r)return r;if(((e=Wt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new zT(t);return lC.set(t,n),n}function ZL(t){$T(t,!0)}function ej(t){$T(t,!1)}function tj(t){MP(Wt(t._firestore)).then(e=>re("deleting all persistent cache indexes succeeded")).catch(e=>In("deleting all persistent cache indexes failed",e))}function $T(t,e){jP(Wt(t._firestore),e).then(r=>re(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>In(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const lC=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t){var e;const r=(e=Wt(st(t.firestore,Tt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:kf(r,Wr(t._query))._t}function nj(t,e){var r;const n=Db(e,(s,i)=>new d1(i,s.aggregateType,s._internalFieldPath)),A=(r=Wt(st(t.firestore,Tt))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return A===void 0?null:_1(A,Jb(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return IB.instance.onExistenceFilterMismatch(e)}}class IB{constructor(){this.Uu=new Map}static get instance(){return Ju||(Ju=new IB,function(r){if(Sh)throw new Error("a TestingHooksSpi instance is already set");Sh=r}(Ju)),Ju}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Ju=null;(function(e,r=!0){(function(A){Sa=A})(Ua),la(new Hi("firestore",(n,{instanceIdentifier:A,options:s})=>{const i=n.getProvider("app").getImmediate(),a=new Tt(new RN(n.getProvider("auth-internal")),new PN(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new te(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(c.options.projectId,d)}(i,A),i);return s=Object.assign({useFetchStreams:r},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ds(Yv,"4.7.3",e),Ds(Yv,"4.7.3","esm2017")})();const sj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xB,AggregateField:Ia,AggregateQuerySnapshot:ET,Bytes:Xs,CACHE_SIZE_UNLIMITED:VP,CollectionReference:$n,DocumentReference:Ar,DocumentSnapshot:Ji,FieldPath:oi,FieldValue:ai,Firestore:Tt,FirestoreError:te,GeoPoint:Hf,LoadBundleTask:xT,PersistentCacheIndexManager:zT,Query:br,QueryCompositeFilterConstraint:so,QueryConstraint:Oa,QueryDocumentSnapshot:Yl,QueryEndAtConstraint:cu,QueryFieldFilterConstraint:Ha,QueryLimitConstraint:au,QueryOrderByConstraint:$f,QuerySnapshot:Xi,QueryStartAtConstraint:lu,SnapshotMetadata:vs,Timestamp:$t,Transaction:KT,VectorValue:iu,WriteBatch:VT,_AutoId:Ew,_ByteString:tr,_DatabaseId:Ks,_DocumentKey:Be,_EmptyAppCheckTokenProvider:LN,_EmptyAuthCredentialsProvider:Cb,_FieldPath:Mt,_TestingHooks:Aj,_cast:st,_debugAssert:SN,_internalAggregationQueryToProtoRunAggregationQueryRequest:nj,_internalQueryToProtoQueryTarget:rj,_isBase64Available:d4,_logWarn:In,_validateIsNotUsedTogether:BT,addDoc:FL,aggregateFieldEqual:BL,aggregateQuerySnapshotEqual:yL,and:aL,arrayRemove:WL,arrayUnion:$L,average:wL,clearIndexedDbPersistence:$P,collection:Xm,collectionGroup:OP,connectFirestoreEmulator:vT,count:LT,deleteAllPersistentCacheIndexes:tj,deleteDoc:MT,deleteField:GL,disableNetwork:JP,disablePersistentCacheIndexAutoCreation:ej,doc:tA,documentId:eL,enableIndexedDbPersistence:GP,enableMultiTabIndexedDbPersistence:zP,enableNetwork:qP,enablePersistentCacheIndexAutoCreation:ZL,endAt:gL,endBefore:fL,ensureFirestoreConfigured:Wt,executeWrite:Va,getAggregateFromServer:OT,getCountFromServer:UL,getDoc:CL,getDocFromCache:IL,getDocFromServer:_L,getDocs:jT,getDocsFromCache:EL,getDocsFromServer:bL,getFirestore:CT,getPersistentCacheIndexManager:YL,increment:qL,initializeFirestore:KP,limit:cL,limitToLast:uL,loadBundle:YP,memoryEagerGarbageCollector:DL,memoryLocalCache:LL,memoryLruGarbageCollector:PL,namedQuery:ZP,onSnapshot:Gd,onSnapshotsInSync:QL,or:oL,orderBy:lL,persistentLocalCache:jL,persistentMultipleTabManager:HL,persistentSingleTabManager:HT,query:Zm,queryEqual:hB,refEqual:HP,runTransaction:KL,serverTimestamp:zL,setDoc:Kd,setIndexConfiguration:XL,setLogLevel:UN,snapshotEqual:xL,startAfter:hL,startAt:dL,sum:mL,terminate:XP,updateDoc:TL,vector:JL,waitForPendingWrites:WP,where:iL,writeBatch:GT},Symbol.toStringTag,{value:"Module"}));function _B(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,n=Object.getOwnPropertySymbols(t);A<n.length;A++)e.indexOf(n[A])<0&&Object.prototype.propertyIsEnumerable.call(t,n[A])&&(r[n[A]]=t[n[A]]);return r}function WT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ij=WT,qT=new $c("auth","Firebase",WT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new xw("@firebase/auth");function oj(t,...e){Hh.logLevel<=at.WARN&&Hh.warn(`Auth (${Ua}): ${t}`,...e)}function zd(t,...e){Hh.logLevel<=at.ERROR&&Hh.error(`Auth (${Ua}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw EB(t,...e)}function lA(t,...e){return EB(t,...e)}function JT(t,e,r){const n=Object.assign(Object.assign({},ij()),{[e]:r});return new $c("auth","Firebase",n).create(e,{appName:t.name})}function Ps(t){return JT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EB(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return qT.create(t,...e)}function qe(t,e,...r){if(!t)throw EB(e,...r)}function _A(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zd(e),new Error(e)}function LA(t,e){t||_A(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aj(){return cC()==="http:"||cC()==="https:"}function cC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aj()||lR()||"connection"in navigator)?navigator.onLine:!0}function cj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r){this.shortDelay=e,this.longDelay=r,LA(r>e,"Short delay should be less than long delay!"),this.isMobile=iR()||cR()}get(){return lj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t,e){LA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_A("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_A("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_A("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new uu(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,r,n,A={}){return YT(t,A,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const a=Wc(Object.assign({key:t.config.apiKey},i)).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:o},s);return aR()||(c.referrerPolicy="no-referrer"),XT.fetch()(ZT(t,t.config.apiHost,r,a),c)})}async function YT(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},uj),e);try{const A=new fj(t),s=await Promise.race([r(),A.promise]);A.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Xu(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const a=s.ok?i.errorMessage:i.error.message,[o,c]=a.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xu(t,"credential-already-in-use",i);if(o==="EMAIL_EXISTS")throw Xu(t,"email-already-in-use",i);if(o==="USER_DISABLED")throw Xu(t,"user-disabled",i);const d=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JT(t,d,c);qn(t,d)}}catch(A){if(A instanceof VA)throw A;qn(t,"network-request-failed",{message:String(A)})}}async function qf(t,e,r,n,A={}){const s=await ci(t,e,r,n,A);return"mfaPendingCredential"in s&&qn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ZT(t,e,r,n){const A=`${e}${r}?${n}`;return t.config.emulator?bB(t.config,A):`${t.config.apiScheme}://${A}`}function hj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(lA(this.auth,"network-request-failed")),dj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const A=lA(t,e,n);return A.customData._tokenResponse=r,A}function uC(t){return t!==void 0&&t.enterprise!==void 0}class gj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return hj(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function pj(t,e){return ci(t,"GET","/v2/recaptchaConfig",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function eF(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wj(t,e=!1){const r=kt(t),n=await r.getIdToken(e),A=TB(n);qe(A&&A.exp&&A.auth_time&&A.iat,r.auth,"internal-error");const s=typeof A.firebase=="object"?A.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:A,token:n,authTime:Zl(Ap(A.auth_time)),issuedAtTime:Zl(Ap(A.iat)),expirationTime:Zl(Ap(A.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ap(t){return Number(t)*1e3}function TB(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return zd("JWT malformed, contained fewer than 3 sections"),null;try{const A=sb(r);return A?JSON.parse(A):(zd("Failed to decode base64 JWT payload"),null)}catch(A){return zd("Caught error parsing JWT payload as JSON",A==null?void 0:A.toString()),null}}function dC(t){const e=TB(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof VA&&Bj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Bj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const A=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(t){var e;const r=t.auth,n=await t.getIdToken(),A=await Dc(t,eF(r,{idToken:n}));qe(A==null?void 0:A.users.length,r,"internal-error");const s=A.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tF(s.providerUserInfo):[],a=xj(t.providerData,i),o=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=o?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new t0(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function vj(t){const e=kt(t);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xj(t,e){return[...t.filter(n=>!e.some(A=>A.providerId===n.providerId)),...e]}function tF(t){return t.map(e=>{var{providerId:r}=e,n=_B(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cj(t,e){const r=await YT(t,{},async()=>{const n=Wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:s}=t.config,i=ZT(t,A,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",XT.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Ij(t,e){return ci(t,"POST","/v2/accounts:revokeToken",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const r=dC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:A,expiresIn:s}=await Cj(e,r);this.updateTokensAndExpiration(n,A,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:A,expirationTime:s}=r,i=new Xo;return n&&(qe(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),A&&(qe(typeof A=="string","internal-error",{appName:e}),i.accessToken=A),s&&(qe(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return _A("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class EA{constructor(e){var{uid:r,auth:n,stsTokenManager:A}=e,s=_B(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new t0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return qe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return wj(this,e)}reload(){return vj(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new EA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Vh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(CA(this.auth.app))return Promise.reject(Ps(this.auth));const e=await this.getIdToken();return await Dc(this,mj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,A,s,i,a,o,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(A=r.email)!==null&&A!==void 0?A:void 0,m=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,y=(i=r.photoURL)!==null&&i!==void 0?i:void 0,B=(a=r.tenantId)!==null&&a!==void 0?a:void 0,E=(o=r._redirectEventId)!==null&&o!==void 0?o:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:F,isAnonymous:R,providerData:U,stsTokenManager:v}=r;qe(I&&v,e,"internal-error");const C=Xo.fromJSON(this.name,v);qe(typeof I=="string",e,"internal-error"),rs(h,e.name),rs(f,e.name),qe(typeof F=="boolean",e,"internal-error"),qe(typeof R=="boolean",e,"internal-error"),rs(m,e.name),rs(y,e.name),rs(B,e.name),rs(E,e.name),rs(x,e.name),rs(w,e.name);const _=new EA({uid:I,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:R,photoURL:y,phoneNumber:m,tenantId:B,stsTokenManager:C,createdAt:x,lastLoginAt:w});return U&&Array.isArray(U)&&(_.providerData=U.map(Q=>Object.assign({},Q))),E&&(_._redirectEventId=E),_}static async _fromIdTokenResponse(e,r,n=!1){const A=new Xo;A.updateFromServerResponse(r);const s=new EA({uid:r.localId,auth:e,stsTokenManager:A,isAnonymous:n});return await Vh(s),s}static async _fromGetAccountInfoResponse(e,r,n){const A=r.users[0];qe(A.localId!==void 0,"internal-error");const s=A.providerUserInfo!==void 0?tF(A.providerUserInfo):[],i=!(A.email&&A.passwordHash)&&!(s!=null&&s.length),a=new Xo;a.updateFromIdToken(n);const o=new EA({uid:A.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:s,metadata:new t0(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!(s!=null&&s.length)};return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new Map;function bA(t){LA(t instanceof Function,"Expected a class definition");let e=hC.get(t);return e?(LA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}rF.type="NONE";const fC=rF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t,e,r){return`firebase:${t}:${e}:${r}`}class Yo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:A,name:s}=this.auth;this.fullUserKey=$d(this.userKey,A.apiKey,s),this.fullPersistenceKey=$d("persistence",A.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?EA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Yo(bA(fC),e,n);const A=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=A[0]||bA(fC);const i=$d(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const d=await c._get(i);if(d){const h=EA._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const o=A.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new Yo(s,e,n):(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new Yo(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aF(e))return"Blackberry";if(lF(e))return"Webos";if(AF(e))return"Safari";if((e.includes("chrome/")||sF(e))&&!e.includes("edge/"))return"Chrome";if(oF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function nF(t=wr()){return/firefox\//i.test(t)}function AF(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sF(t=wr()){return/crios\//i.test(t)}function iF(t=wr()){return/iemobile/i.test(t)}function oF(t=wr()){return/android/i.test(t)}function aF(t=wr()){return/blackberry/i.test(t)}function lF(t=wr()){return/webos/i.test(t)}function FB(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _j(t=wr()){var e;return FB(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ej(){return uR()&&document.documentMode===10}function cF(t=wr()){return FB(t)||oF(t)||lF(t)||aF(t)||/windows phone/i.test(t)||iF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t,e=[]){let r;switch(t){case"Browser":r=gC(wr());break;case"Worker":r=`${gC(wr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ua}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,a)=>{try{const o=e(s);i(o)}catch(o){a(o)}});n.onAbort=r,this.queue.push(n);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const A of r)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,e={}){return ci(t,"GET","/v2/passwordPolicy",io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=6;class Qj{constructor(e){var r,n,A,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:Fj,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(A=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&A!==void 0?A:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,A,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(r=o.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(n=o.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),o.isValid&&(o.isValid=(A=o.containsLowercaseLetter)!==null&&A!==void 0?A:!0),o.isValid&&(o.isValid=(s=o.containsUppercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(i=o.containsNumericCharacter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(a=o.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),o}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),A&&(r.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let A=0;A<e.length;A++)n=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,A,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,r,n,A){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pC(this),this.idTokenSubscription=new pC(this),this.beforeStateQueue=new bj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=bA(r)),this._initializationPromise=this.queue(async()=>{var n,A;if(!this._deleted&&(this.persistenceManager=await Yo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((A=this.currentUser)===null||A===void 0?void 0:A.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await eF(this,{idToken:e}),n=await EA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(CA(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let A=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=A==null?void 0:A._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&(o!=null&&o.user)&&(A=o.user,s=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(A)}catch(i){A=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(CA(this.app))return Promise.reject(Ps(this));const r=e?kt(e):null;return r&&qe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return CA(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return CA(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Tj(this),r=new Qj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Ij(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&bA(e)||this._popupRedirectResolver;qe(r,this,"argument-error"),this.redirectPersistenceManager=await Yo.create(this,[bA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,A){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const o=e.addObserver(r,n,A);return()=>{i=!0,o()}}else{const o=e.addObserver(r);return()=>{i=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const A=await this._getAppCheckToken();return A&&(r["X-Firebase-AppCheck"]=A),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&oj(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ka(t){return kt(t)}class pC{constructor(e){this.auth=e,this.observer=null,this.addObserver=mR(r=>this.observer=r)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sj(t){Jf=t}function dF(t){return Jf.loadJS(t)}function kj(){return Jf.recaptchaEnterpriseScript}function Rj(){return Jf.gapiScript}function Nj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Dj="recaptcha-enterprise",Pj="NO_RECAPTCHA";class Lj{constructor(e){this.type=Dj,this.auth=Ka(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,a)=>{pj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new gj(o);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(o=>{a(o)})})}function A(s,i,a){const o=window.grecaptcha;uC(o)?o.enterprise.ready(()=>{o.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(Pj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(a=>{if(!r&&uC(window.grecaptcha))A(a,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let o=kj();o.length!==0&&(o+=a),dF(o).then(()=>{A(a,s,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function mC(t,e,r,n=!1){const A=new Lj(t);let s;try{s=await A.verify(r)}catch{s=await A.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function wC(t,e,r,n){var A;if(!((A=t._getRecaptchaConfig())===null||A===void 0)&&A.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await mC(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await mC(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t,e){const r=qc(t,"auth");if(r.isInitialized()){const A=r.getImmediate(),s=r.getOptions();if(Hs(s,e??{}))return A;qn(A,"already-initialized")}return r.initialize({options:e})}function Mj(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(bA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Oj(t,e,r){const n=Ka(t);qe(n._canInitEmulator,n,"emulator-config-failed"),qe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const A=!1,s=hF(e),{host:i,port:a}=Hj(e),o=a===null?"":`:${a}`;n.config.emulator={url:`${s}//${i}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:A})}),Vj()}function hF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Hj(t){const e=hF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(n);if(A){const s=A[1];return{host:s,port:BC(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:BC(i)}}}function BC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Vj(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return _A("not implemented")}_getIdTokenResponse(e){return _A("not implemented")}_linkToIdToken(e,r){return _A("not implemented")}_getReauthenticationResolver(e){return _A("not implemented")}}async function Kj(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e){return qf(t,"POST","/v1/accounts:signInWithPassword",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e){return qf(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}async function $j(t,e){return qf(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends QB{constructor(e,r,n,A=null){super("password",n),this._email=e,this._password=r,this._tenantId=A}static _fromEmailAndPassword(e,r){return new Pc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Pc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wC(e,r,"signInWithPassword",Gj);case"emailLink":return zj(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wC(e,n,"signUpPassword",Kj);case"emailLink":return $j(e,{idToken:r,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t,e){return qf(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="http://localhost";class Yi extends QB{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):qn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:A}=r,s=_B(r,["providerId","signInMethod"]);if(!n||!A)return null;const i=new Yi(n,A);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Zo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Zo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Zo(e,r)}buildRequest(){const e={requestUri:Wj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Wc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Jj(t){const e=Il(_l(t)).link,r=e?Il(_l(e)).deep_link_id:null,n=Il(_l(t)).deep_link_id;return(n?Il(_l(n)).link:null)||n||r||e||t}class UB{constructor(e){var r,n,A,s,i,a;const o=Il(_l(e)),c=(r=o.apiKey)!==null&&r!==void 0?r:null,d=(n=o.oobCode)!==null&&n!==void 0?n:null,h=qj((A=o.mode)!==null&&A!==void 0?A:null);qe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=o.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=o.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=o.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=Jj(e);try{return new UB(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,r){return Pc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=UB.parseLink(r);return qe(n,"argument-error"),Pc._fromEmailAndCode(e,n.code,n.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends fF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends du{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Yi._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return fs.credential(r,n)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends du{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends du{constructor(){super("twitter.com")}static credential(e,r){return Yi._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ps.credential(r,n)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,A=!1){const s=await EA._fromIdTokenResponse(e,n,A),i=yC(n);return new _a({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const A=yC(n);return new _a({user:e,providerId:A,_tokenResponse:n,operationType:r})}}function yC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends VA{constructor(e,r,n,A){var s;super(r.code,r.message),this.operationType=n,this.user=A,Object.setPrototypeOf(this,Kh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,A){return new Kh(e,r,n,A)}}function gF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kh._fromErrorAndOperation(t,s,e,n):s})}async function Xj(t,e,r=!1){const n=await Dc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return _a._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(t,e,r=!1){const{auth:n}=t;if(CA(n.app))return Promise.reject(Ps(n));const A="reauthenticate";try{const s=await Dc(t,gF(n,A,e,t),r);qe(s.idToken,n,"internal-error");const i=TB(s.idToken);qe(i,n,"internal-error");const{sub:a}=i;return qe(t.uid===a,n,"user-mismatch"),_a._forOperation(t,A,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qn(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pF(t,e,r=!1){if(CA(t.app))return Promise.reject(Ps(t));const n="signIn",A=await gF(t,n,e),s=await _a._fromIdTokenResponse(t,n,A);return r||await t._updateCurrentUser(s.user),s}async function Zj(t,e){return pF(Ka(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t){const e=Ka(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function tM(t,e,r){return CA(t.app)?Promise.reject(Ps(t)):Zj(kt(t),Ga.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&eM(t),n})}function rM(t,e,r,n){return kt(t).onIdTokenChanged(e,r,n)}function nM(t,e,r){return kt(t).beforeAuthStateChanged(e,r)}function AM(t,e,r,n){return kt(t).onAuthStateChanged(e,r,n)}function vC(t){return kt(t).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=1e3,iM=10;class wF extends mF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),A=this.localCache[r];n!==A&&e(r,A,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,o)=>{this.notifyListeners(i,o)});return}const n=e.key;r?this.detachListener():this.stopPolling();const A=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);Ej()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,iM):A()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const A of Array.from(n))A(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},sM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}wF.type="LOCAL";const oM=wF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF extends mF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}BF.type="SESSION";const yF=BF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(A=>A.isListeningto(e));if(r)return r;const n=new Xf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:A,data:s}=r.data,i=this.handlersMap[A];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:A});const a=Array.from(i).map(async c=>c(r.origin,s)),o=await aM(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:A,response:o})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const c=SB("",20);A.port1.start();const d=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:A,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(i),A.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[A.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){return window}function cM(t){cA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(){return typeof cA().WorkerGlobalScope<"u"&&typeof cA().importScripts=="function"}async function uM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hM(){return vF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF="firebaseLocalStorageDb",fM=1,zh="firebaseLocalStorage",CF="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Yf(t,e){return t.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function gM(){const t=indexedDB.deleteDatabase(xF);return new hu(t).toPromise()}function r0(){const t=indexedDB.open(xF,fM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(zh,{keyPath:CF})}catch(A){r(A)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(zh)?e(n):(n.close(),await gM(),e(await r0()))})})}async function xC(t,e,r){const n=Yf(t,!0).put({[CF]:e,value:r});return new hu(n).toPromise()}async function pM(t,e){const r=Yf(t,!1).get(e),n=await new hu(r).toPromise();return n===void 0?null:n.value}function CC(t,e){const r=Yf(t,!0).delete(e);return new hu(r).toPromise()}const mM=800,wM=3;class IF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await r0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>wM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(hM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await uM(),!this.activeServiceWorker)return;this.sender=new lM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await r0();return await xC(e,Gh,"1"),await CC(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>xC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>pM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>CC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const s=Yf(A,!1).getAll();return new hu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:A,value:s}of e)n.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(s)&&(this.notifyListeners(A,s),r.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!n.has(A)&&(this.notifyListeners(A,null),r.push(A));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const A of Array.from(n))A(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IF.type="LOCAL";const BM=IF;new uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t,e){return e?bA(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB extends QB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Zo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function vM(t){return pF(t.auth,new kB(t),t.bypassAuthState)}function xM(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),Yj(r,new kB(t),t.bypassAuthState)}async function CM(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),Xj(r,new kB(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,r,n,A,s=!1){this.auth=e,this.resolver=n,this.user=A,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:A,tenantId:s,error:i,type:a}=e;if(i){this.reject(i);return}const o={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vM;case"linkViaPopup":case"linkViaRedirect":return CM;case"reauthViaPopup":case"reauthViaRedirect":return xM;default:qn(this.auth,"internal-error")}}resolve(e){LA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){LA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=new uu(2e3,1e4);class Oo extends _F{constructor(e,r,n,A,s){super(e,r,A,s),this.provider=n,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){LA(this.filter.length===1,"Popup operations only handle one event");const e=SB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(lA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IM.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="pendingRedirect",Wd=new Map;class EM extends _F{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Wd.get(this.auth._key());if(!e){try{const n=await bM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Wd.set(this.auth._key(),e)}return this.bypassAuthState||Wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bM(t,e){const r=QM(e),n=FM(t);if(!await n._isAvailable())return!1;const A=await n._get(r)==="true";return await n._remove(r),A}function TM(t,e){Wd.set(t._key(),e)}function FM(t){return bA(t._redirectPersistence)}function QM(t){return $d(_M,t.config.apiKey,t.name)}async function UM(t,e,r=!1){if(CA(t.app))return Promise.reject(Ps(t));const n=Ka(t),A=yM(n,e),i=await new EM(n,A,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=10*60*1e3;class kM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!EF(e)){const A=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(lA(this.auth,A))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SM&&this.cachedEventUids.clear(),this.cachedEventUids.has(IC(e))}saveEventToCache(e){this.cachedEventUids.add(IC(e)),this.lastProcessedEventTime=Date.now()}}function IC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PM=/^https?/;async function LM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await NM(t);for(const r of e)try{if(jM(r))return}catch{}qn(t,"unauthorized-domain")}function jM(t){const e=e0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!PM.test(r))return!1;if(DM.test(t))return n===t;const A=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new uu(3e4,6e4);function _C(){const t=cA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function OM(t){return new Promise((e,r)=>{var n,A,s;function i(){_C(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_C(),r(lA(t,"network-request-failed"))},timeout:MM.get()})}if(!((A=(n=cA().gapi)===null||n===void 0?void 0:n.iframes)===null||A===void 0)&&A.Iframe)e(gapi.iframes.getContext());else if(!((s=cA().gapi)===null||s===void 0)&&s.load)i();else{const a=Nj("iframefcb");return cA()[a]=()=>{gapi.load?i():r(lA(t,"network-request-failed"))},dF(`${Rj()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw qd=null,e})}let qd=null;function HM(t){return qd=qd||OM(t),qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new uu(5e3,15e3),KM="__/auth/iframe",GM="emulator/auth/iframe",zM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$M=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WM(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?bB(e,GM):`https://${t.config.authDomain}/${KM}`,n={apiKey:e.apiKey,appName:t.name,v:Ua},A=$M.get(t.config.apiHost);A&&(n.eid=A);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Wc(n).slice(1)}`}async function qM(t){const e=await HM(t),r=cA().gapi;return qe(r,t,"internal-error"),e.open({where:document.body,url:WM(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zM,dontclear:!0},n=>new Promise(async(A,s)=>{await n.restyle({setHideOnLeave:!1});const i=lA(t,"network-request-failed"),a=cA().setTimeout(()=>{s(i)},VM.get());function o(){cA().clearTimeout(a),A(n)}n.ping(o).then(o,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XM=500,YM=600,ZM="_blank",eO="http://localhost";class EC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tO(t,e,r,n=XM,A=YM){const s=Math.max((window.screen.availHeight-A)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const o=Object.assign(Object.assign({},JM),{width:n.toString(),height:A.toString(),top:s,left:i}),c=wr().toLowerCase();r&&(a=sF(c)?ZM:r),nF(c)&&(e=e||eO,o.scrollbars="yes");const d=Object.entries(o).reduce((f,[m,y])=>`${f}${m}=${y},`,"");if(_j(c)&&a!=="_self")return rO(e||"",a),new EC(null);const h=window.open(e||"",a,d);qe(h,t,"popup-blocked");try{h.focus()}catch{}return new EC(h)}function rO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="__/auth/handler",AO="emulator/auth/handler",sO=encodeURIComponent("fac");async function bC(t,e,r,n,A,s){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Ua,eventId:A};if(e instanceof fF){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",pR(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof du){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const o=await t._getAppCheckToken(),c=o?`#${sO}=${encodeURIComponent(o)}`:"";return`${iO(t)}?${Wc(a).slice(1)}${c}`}function iO({config:t}){return t.emulator?bB(t,AO):`https://${t.authDomain}/${nO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class oO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yF,this._completeRedirectFn=UM,this._overrideRedirectResult=TM}async _openPopup(e,r,n,A){var s;LA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await bC(e,r,n,e0(),A);return tO(e,i,SB())}async _openRedirect(e,r,n,A){await this._originValidation(e);const s=await bC(e,r,n,e0(),A);return cM(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:A,promise:s}=this.eventManagers[r];return A?Promise.resolve(A):(LA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await qM(e),n=new kM(e);return r.register("authEvent",A=>(qe(A==null?void 0:A.authEvent,e,"invalid-auth-event"),{status:n.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(sp,{type:sp},A=>{var s;const i=(s=A==null?void 0:A[0])===null||s===void 0?void 0:s[sp];i!==void 0&&r(!!i),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=LM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return cF()||AF()||FB()}}const aO=oO;var TC="@firebase/auth",FC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uO(t){la(new Hi("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;qe(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uF(t)},c=new Uj(n,A,s,o);return Mj(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),la(new Hi("auth-internal",e=>{const r=Ka(e.getProvider("auth").getImmediate());return(n=>new lO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(TC,FC,cO(t)),Ds(TC,FC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=5*60,hO=ab("authIdTokenMaxAge")||dO;let QC=null;const fO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>hO)return;const A=r==null?void 0:r.token;QC!==A&&(QC=A,await fetch(t,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))};function gO(t=Iw()){const e=qc(t,"auth");if(e.isInitialized())return e.getImmediate();const r=jj(t,{popupRedirectResolver:aO,persistence:[BM,oM,yF]}),n=ab("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=fO(s.toString());nM(r,i,()=>i(r.currentUser)),rM(r,a=>i(a))}}const A=ib("auth");return A&&Oj(r,`http://${A}`),r}function pO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Sj({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=A=>{const s=lA("internal-error");s.customData=A,r(s)},n.type="text/javascript",n.charset="UTF-8",pO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uO("Browser");const mO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",wO="zameny-b6c3f.firebaseapp.com",BO="zameny-b6c3f",yO="zameny-b6c3f.firebasestorage.app",vO="323355347910",xO="1:323355347910:web:c81f2813dce5ee9373c0c7",bF={apiKey:mO,authDomain:wO,projectId:BO,storageBucket:yO,messagingSenderId:vO,appId:xO};let $h;BN().length?$h=Iw():$h=hb(bF);const Fr=CT($h),yn=gO($h);bF.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const ir={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules"},CO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},Yu=t=>JSON.parse(JSON.stringify(t)),Zr={syncCollection:async(t,e)=>{if(!Fr)return;const r=Zm(Xm(Fr,t)),n=await IO(async()=>await jT(r)),A=new Map;n.docs.forEach(o=>{A.set(o.id,o.data())});const s=new Map;e.forEach(o=>s.set(o.id,o));const i=[];if(A.forEach((o,c)=>{s.has(c)||i.push({type:"delete",id:c})}),e.forEach(o=>{const c=A.get(o.id),d=Yu(o);(!c||JSON.stringify(c)!==JSON.stringify(d))&&i.push({type:"set",item:d})}),i.length===0)return;console.log(`Syncing ${t}: ${i.length} changes.`);const a=CO(i,450);for(const o of a){const c=GT(Fr);o.forEach(d=>{const h=tA(Fr,t,d.id||d.item.id);d.type==="delete"?c.delete(h):c.set(h,d.item)}),await c.commit()}},save:async t=>{if(!Fr){console.error("Database not initialized");return}const e=yn==null?void 0:yn.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :   .");return}const r=[];t.teachers&&r.push(Zr.syncCollection(ir.TEACHERS,t.teachers)),t.subjects&&r.push(Zr.syncCollection(ir.SUBJECTS,t.subjects)),t.classes&&r.push(Zr.syncCollection(ir.CLASSES,t.classes)),t.rooms&&r.push(Zr.syncCollection(ir.ROOMS,t.rooms)),t.schedule&&r.push(Zr.syncCollection(ir.SCHEDULE_1,t.schedule)),t.schedule2ndHalf&&r.push(Zr.syncCollection(ir.SCHEDULE_2,t.schedule2ndHalf)),t.substitutions&&r.push(Zr.syncCollection(ir.SUBSTITUTIONS,t.substitutions)),t.settings&&r.push(Kd(tA(Fr,ir.CONFIG,"settings"),Yu(t.settings))),t.bellSchedule&&r.push(Kd(tA(Fr,ir.CONFIG,"bells"),Yu({items:t.bellSchedule}))),await Promise.all(r),console.log("Data saved successfully to collections")},subscribe:(t,e)=>{if(!Fr)return()=>{};let r={...on},n;const A=()=>{clearTimeout(n),n=setTimeout(()=>{t({...r})},50)},s=[],i=(a,o)=>{const c=Zm(Xm(Fr,a));return Gd(c,d=>{const h=d.docs.map(f=>f.data());h.sort((f,m)=>{const y=typeof f.order=="number"?f.order:999999,B=typeof m.order=="number"?m.order:999999;return y-B}),r[o]=h,A()},d=>{console.warn(`Error reading ${a}:`,d)})};return s.push(i(ir.TEACHERS,"teachers")),s.push(i(ir.SUBJECTS,"subjects")),s.push(i(ir.CLASSES,"classes")),s.push(i(ir.ROOMS,"rooms")),s.push(i(ir.SCHEDULE_1,"schedule")),s.push(i(ir.SCHEDULE_2,"schedule2ndHalf")),s.push(i(ir.SUBSTITUTIONS,"substitutions")),s.push(Gd(tA(Fr,ir.CONFIG,"settings"),a=>{a.exists()&&(r.settings={...on.settings,...a.data()},A())})),s.push(Gd(tA(Fr,ir.CONFIG,"bells"),a=>{if(a.exists()){const o=a.data();r.bellSchedule=o.items||on.bellSchedule,A()}})),()=>{s.forEach(a=>a()),clearTimeout(n)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Fr)throw new Error("Database not initialized");const r=yn==null?void 0:yn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects,teachers:e.teachers.map(s=>({id:s.id,name:s.name,subjectIds:s.subjectIds,shifts:s.shifts,unavailableDates:[],telegramChatId:""})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,schedule2ndHalf:e.schedule2ndHalf,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},A=Yu(n);await Kd(tA(Fr,ir.PUBLIC,t),A)},getPublicData:async t=>{if(!Fr)return null;try{const e=await q2(()=>Promise.resolve().then(()=>sj),void 0).then(r=>r.getDoc(tA(Fr,ir.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Fr&&await MT(tA(Fr,ir.PUBLIC,t))}};async function IO(t){try{return await t()}catch(e){return console.error("Firestore read error (likely quota):",e),{docs:[]}}}const TF=k.createContext(void 0),_O="admin@gymnasium22.com",EO="teacher@gymnasium22.com",bO=({children:t})=>{const[e,r]=k.useState(null),[n,A]=k.useState(null),[s,i]=k.useState(!0);k.useEffect(()=>{if(!yn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=AM(yn,d=>{r(d),d?d.email===_O?A("admin"):d.email===EO?A("teacher"):(A(null),vC(yn)):A(null),i(!1)});return()=>c()},[]);const a=async()=>{yn&&await vC(yn),A(null)},o=()=>{A("guest"),i(!1)};return l.jsx(TF.Provider,{value:{user:e,role:n,loading:s,logout:a,setGuestRole:o},children:t})},oo=()=>{const t=k.useContext(TF);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},FF=k.createContext(void 0),gl="gym_data_local_backup_v2",QF=({children:t,initialData:e})=>{const[r,n]=k.useState(on),[A,s]=k.useState(!0),[i,a]=k.useState([]),[o,c]=k.useState(-1),{user:d,role:h,loading:f}=oo();k.useEffect(()=>{if(e){n(e),a([e]),c(0),s(!1);return}if(f)return;const w=localStorage.getItem(gl);if(w)try{const R=JSON.parse(w);R&&R.teachers&&(n(U=>({...U,...R})),console.log("Loaded from local storage backup"))}catch(R){console.error("Error parsing local backup",R)}if(!(d||h==="guest")){w||n(on),s(!1);return}s(!0);const F=Zr.subscribe(R=>{const U={...on,...R};U.teachers||(U.teachers=[]),U.teachers=U.teachers.map(v=>({telegramChatId:"",...v,shifts:v.shifts||[me.First,me.Second]})),U.schedule||(U.schedule=[]),U.schedule2ndHalf||(U.schedule2ndHalf=[]),U.substitutions||(U.substitutions=[]),U.bellSchedule||(U.bellSchedule=rb),U.settings?U.settings={...on.settings,...U.settings}:U.settings=on.settings,n(U),localStorage.setItem(gl,JSON.stringify(U)),a(v=>v.length===0?[U]:v),c(v=>v===-1?0:v),s(!1)},R=>{console.error("Failed to subscribe to data:",R),s(!1)});return()=>{F&&F()}},[e,d,h,f]);const m=k.useCallback(async(w,I=!0)=>{const F=!d&&h==="guest",R={...r,...w};n(R);try{localStorage.setItem(gl,JSON.stringify(R))}catch(U){console.error("Local storage quota exceeded",U)}if(!e&&d&&!F)try{await Zr.save(w)}catch(U){console.error("Save failed:",U),(U==null?void 0:U.code)==="resource-exhausted"?console.warn("Quota exceeded. Saved locally only."):(U==null?void 0:U.code)==="permission-denied"?alert("  .    ."):console.warn("Cloud save error. Saved locally.",U.message)}else F&&console.warn("       .");if(I){const U=i.slice(0,o+1);U.push(R),U.length>50&&U.shift(),a(U),c(U.length-1)}},[r,i,o,d,h,e]),y=k.useCallback(async()=>{if(o>0){const w=i[o-1];if(c(o-1),n(w),localStorage.setItem(gl,JSON.stringify(w)),!e&&d)try{await Zr.save(w)}catch(I){console.error(I)}}},[i,o,d,e]),B=k.useCallback(async()=>{if(o<i.length-1){const w=i[o+1];if(c(o+1),n(w),localStorage.setItem(gl,JSON.stringify(w)),!e&&d)try{await Zr.save(w)}catch(I){console.error(I)}}},[i,o,d,e]),E=k.useCallback(async()=>{await m(on)},[m]),x=k.useMemo(()=>({data:r,isLoading:A,saveData:m,resetData:E,undo:y,redo:B,canUndo:o>0,canRedo:o<i.length-1}),[r,A,m,E,y,B,o]);return l.jsx(FF.Provider,{value:x,children:t})},Zf=()=>{const t=k.useContext(FF);if(!t)throw new Error("useFullData must be used within DataProvider");return t},UF=k.createContext(void 0),SF=k.createContext(void 0),kF=({children:t})=>{const{data:e,saveData:r}=Zf(),n=k.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),A=k.useCallback(async(i,a)=>{await r(i,a)},[r]),s=k.useMemo(()=>({...n,saveStaticData:A}),[n,A]);return l.jsx(UF.Provider,{value:s,children:t})},RF=({children:t})=>{const{data:e,saveData:r}=Zf(),n=new Date().getMonth(),s=n>=0&&n<=4?e.schedule2ndHalf||[]:e.schedule,i=k.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2ndHalf:h})},[r]),a=k.useCallback(async(d,h)=>{await r(d,h)},[r]),o=k.useMemo(()=>({schedule:s,schedule1:e.schedule,schedule2:e.schedule2ndHalf||[],substitutions:e.substitutions,saveSemesterSchedule:i,saveScheduleData:a}),[s,e.schedule,e.schedule2ndHalf,e.substitutions,i,a]),c=k.useMemo(()=>({...o,saveScheduleData:a}),[o,a]);return l.jsx(SF.Provider,{value:c,children:t})},WA=()=>{const t=k.useContext(UF);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Zf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},za=()=>{const t=k.useContext(SF);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Zf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},TO={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),l.jsx("path",{d:"m20 16-4-4 4-4"}),l.jsx("path",{d:"m4 8 4 4-4 4"}),l.jsx("path",{d:"m16 4-4 4-4-4"}),l.jsx("path",{d:"m8 20 4-4 4 4"})]})},$=({name:t,size:e=24,className:r="",...n})=>{const A=TO[t];return A?l.jsx(A,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},FA=({isOpen:t,onClose:e,title:r,children:n,maxWidth:A="max-w-lg"})=>(k.useEffect(()=>{if(!t)return;const s=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",s),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:s=>s.target===s.currentTarget&&e(),children:l.jsxs("div",{className:`glass-panel bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${A} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx($,{name:"X",size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),FO=({x:t,y:e,onClose:r,actions:n})=>{const A=k.useRef(null);if(k.useEffect(()=>{if(t===null||e===null)return;const i=o=>{A.current&&!A.current.contains(o.target)&&r()},a=o=>{o.key==="Escape"&&r()};return window.addEventListener("click",i,!0),document.addEventListener("keydown",a),()=>{window.removeEventListener("click",i,!0),document.removeEventListener("keydown",a)}},[t,e,r]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{ref:A,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:n.map(i=>l.jsxs("button",{onClick:a=>{a.stopPropagation(),i.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${i.color||"text-slate-700 dark:text-slate-200"}`,children:[i.icon&&l.jsx($,{name:i.icon,size:16}),i.label]},i.id||i.label))})},QO=()=>{const{bellSchedule:t}=WA(),[e,r]=k.useState("..."),[n,A]=k.useState(""),[s,i]=k.useState(0),[a,o]=k.useState("bg-slate-500"),[c,d]=k.useState("");return k.useEffect(()=>{const h=()=>{const m=new Date,y=m.getDay(),E=[null,At.Monday,At.Tuesday,At.Wednesday,At.Thursday,At.Friday,null][y];if(d(E||""),!E){r(" "),A(" "),o("bg-slate-400"),i(0);return}const x=U=>{const[v,C]=U.split(":").map(Number);return v*60+C},w=m.getHours()*60+m.getMinutes();let I=t.filter(U=>U.day===E);I.length===0&&(I=t.filter(U=>U.day==="default")),I.sort((U,v)=>x(U.start)-x(v.start));let F=null,R=null;for(let U=0;U<I.length;U++){const v=I[U],C=x(v.start),_=x(v.end);if(w>=C&&w<_){F={...v,duration:_-C,passed:w-C};break}if(U<I.length-1){const Q=I[U+1],N=x(Q.start);if(w>=_&&w<N){const P=N-_;if(P>0&&P<60){const b=w-_,Ve=N-w;R={nextLesson:Q,duration:P,passed:b,remaining:Ve};break}}}}if(F){r(`${F.period} `);const U=Math.max(0,F.duration-F.passed);A(`${F.shift===me.First?"1 ":"2 "}  . ${U} `);const v=F.duration>0?F.passed/F.duration*100:0;i(Math.min(100,Math.max(0,v))),o("bg-indigo-600")}else if(R){r(""),A(` ${R.remaining}  ${R.nextLesson.period} `),o("bg-amber-500");const U=R.duration>0?R.passed/R.duration*100:0;i(Math.min(100,Math.max(0,U)))}else r(" "),A(" "),o("bg-slate-400"),i(0)};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 glass-panel rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${a}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:n})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${a} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center`,children:l.jsx($,{name:"Clock",size:16,className:a==="bg-indigo-600"?"text-indigo-600":a==="bg-amber-500"?"text-amber-500":"text-slate-400"})})]}),s>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${a} transition-all duration-1000`,style:{width:`${s}%`}})})]})},ip=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:A})=>{var y;const[s,i]=k.useState(!1),[a,o]=k.useState(""),c=k.useRef(null);k.useEffect(()=>{const B=x=>{c.current&&!c.current.contains(x.target)&&i(!1)},E=x=>{x.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",B),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("keydown",E)}},[]);const h=((y=(A?t.flatMap(B=>B.options):t).find(B=>B.value===e))==null?void 0:y.label)||n,f=A?t.map(B=>({...B,options:B.options.filter(E=>E.label.toLowerCase().includes(a.toLowerCase()))})).filter(B=>B.options.length>0):null,m=A?null:t.filter(B=>B.label.toLowerCase().includes(a.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!s),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx($,{name:"Filter",size:14,className:"text-slate-400"})]}),s&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:a,onChange:B=>o(B.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),A&&f?f.map(B=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:B.label}),B.options.map(E=>l.jsx("div",{onClick:()=>{r(E.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===E.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:E.label},E.value))]},B.id||B.label)):m?m.map(B=>l.jsx("div",{onClick:()=>{r(B.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===B.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:B.label},B.value)):null]})]})},Zu=({children:t,className:e=""})=>{const r=yA.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,A)=>{const s=yA.isValidElement(n)&&n.key?n.key:A;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${A*.05}s`,opacity:0},children:n},s)})})},op=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(A=>{const s=A.id??A.label,i=Math.min(100,Math.max(0,A.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:A.label,children:A.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:A.value})]},s)})})},UO=({onMenuClick:t,role:e})=>{const r=e==="admin"||e==="teacher",n=e==="admin";return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:l.jsxs("div",{className:"flex justify-around items-center h-16",children:[r&&l.jsx(Nd,{to:"/dashboard",className:({isActive:A})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${A?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx($,{name:"Home",size:24,strokeWidth:2.5})}),l.jsx(Nd,{to:"/schedule",className:({isActive:A})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${A?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx($,{name:"Calendar",size:24,strokeWidth:2.5})}),n&&l.jsx(Nd,{to:"/substitutions",className:({isActive:A})=>`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 ${A?"text-indigo-600 dark:text-indigo-400 scale-110":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300"}`,children:l.jsx($,{name:"Repeat",size:24,strokeWidth:2.5})}),l.jsx("button",{onClick:t,className:"flex flex-col items-center gap-1 p-2 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 transition-all duration-300",children:l.jsx($,{name:"Menu",size:24,strokeWidth:2.5})})]})})},SO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:A,settings:s}=WA(),{schedule:i,substitutions:a}=za(),{role:o}=oo(),c=zc(),[d,h]=k.useState(localStorage.getItem("gym_notes")||""),[f]=k.useState(new Date),[m,y]=k.useState(""),[B,E]=k.useState(null),[x,w]=k.useState(!1),[I,F]=k.useState(""),[R,U]=k.useState(!1),[v,C]=k.useState(""),[_,Q]=k.useState(!1);k.useEffect(()=>{if(localStorage.setItem("gym_notes",d),d){F("");const O=setTimeout(()=>F(""),2e3);return()=>clearTimeout(O)}},[d]);const N=k.useMemo(()=>{const O=f.getHours();return O<5?" ":O<12?" ":O<18?" ":" "},[f]),P=O=>new Date(O.getTime()-O.getTimezoneOffset()*6e4).toISOString().split("T")[0],b=k.useMemo(()=>P(f),[f]),Ve=k.useMemo(()=>{const O=f.getDay();return O===0||O===6?null:Vt[O-1]},[f]),je=k.useMemo(()=>{const O=new Date;return O.setHours(0,0,0,0),e.filter(ae=>ae.birthDate).map(ae=>{const ie=new Date(ae.birthDate);let Re=new Date(O.getFullYear(),ie.getMonth(),ie.getDate());Re<O&&Re.setFullYear(O.getFullYear()+1);const Ue=Math.ceil((Re.getTime()-O.getTime())/(1e3*60*60*24));return{...ae,diff:Ue,age:O.getFullYear()-ie.getFullYear()}}).filter(ae=>ae.diff<=30).sort((ae,ie)=>ae.diff-ie.diff)},[e]),et=k.useMemo(()=>{const O=e.length,ae=new Map;e.filter(Oe=>Oe.unavailableDates.includes(b)).forEach(Oe=>{var Ze;const Qt=((Ze=Oe.absenceReasons)==null?void 0:Ze[b])===" "?" ":"";ae.set(Oe.id,{id:Oe.id,name:Oe.name,displayReason:Qt})});const ie=a.filter(Oe=>Oe.date===b&&Oe.replacementTeacherId!=="conducted"&&Oe.replacementTeacherId!==Oe.originalTeacherId),Re=new Map;ie.forEach(Oe=>{if(ae.has(Oe.originalTeacherId))return;const It=e.find(gt=>gt.id===Oe.originalTeacherId);if(!It)return;const Qt=i.find(gt=>gt.id===Oe.scheduleItemId);if(!Qt)return;Re.has(Oe.originalTeacherId)||Re.set(Oe.originalTeacherId,{teacher:It,lessons:[]}),Re.get(Oe.originalTeacherId).lessons.push({period:Qt.period,reason:Oe.lessonAbsenceReason})});const Ue=Array.from(ae.values());Re.forEach((Oe,It)=>{const Qt=Oe.lessons.sort(($e,_e)=>$e.period-_e.period),Ze=Qt.map($e=>$e.period).join(", "),Bt=Qt.some($e=>$e.reason===" ")?" ":"";Ue.push({id:It,name:Oe.teacher.name,displayReason:`${Ze} : ${Bt}`})}),Ue.sort((Oe,It)=>Oe.name.localeCompare(It.name));const De=Ue.length,Ke=O-De;return{presentPercent:O>0?Math.round(Ke/O*100):0,absentCount:De,totalTeachers:O,absentTeachersList:Ue}},[e,b,a,i]),We=k.useMemo(()=>{const O=new Date(f);for(O.setDate(f.getDate()+1);O.getDay()===0||O.getDay()===6;)O.setDate(O.getDate()+1);const ie=[null,"","","","","",null][O.getDay()];if(!ie)return[];const Re=[];return r.forEach(Ue=>{const De=i.filter(Ke=>Ke.classId===Ue.id&&Ke.day===ie);De.length===0?Re.push({class:Ue.name,issue:`   ${ie}`}):De.length<4&&Re.push({class:Ue.name,issue:`  (${De.length})`}),De.forEach(Ke=>{if(i.some(Oe=>Oe.id!==Ke.id&&Oe.day===ie&&Oe.period===Ke.period&&Oe.shift===Ke.shift&&Oe.teacherId===Ke.teacherId)&&Re.push({class:Ue.name,issue:`  (${Ke.period} )`}),Ke.roomId){const Oe=n.find(It=>It.id===Ke.roomId);Oe&&Oe.capacity<Ue.studentsCount&&Re.push({class:Ue.name,issue:`: ${Oe.name} (${Ke.period} )`})}})}),Re.filter((Ue,De,Ke)=>Ke.findIndex(Ft=>Ft.class===Ue.class&&Ft.issue===Ue.issue)===De).slice(0,10)},[i,r,e,n,f]),Ae=k.useMemo(()=>{if(!Ve)return 0;let O=0;const ae=i.filter(ie=>ie.day===Ve);for(const ie of ae){const Re=e.find(Ue=>Ue.id===ie.teacherId);Re&&Re.unavailableDates.includes(b)&&(a.find(De=>De.scheduleItemId===ie.id&&De.date===b)||O++)}return O},[i,e,a,b,Ve]),L=()=>{var Qt;if(!m){E(null);return}const O=new Date,ie=[null,At.Monday,At.Tuesday,At.Wednesday,At.Thursday,At.Friday,null][O.getDay()];if(!ie){E({status:"",detail:"  ",color:"text-slate-500"});return}const Re=Ze=>{const[gt,Bt]=Ze.split(":").map(Number);return gt*60+Bt},Ue=O.getHours()*60+O.getMinutes();let De=A.filter(Ze=>Ze.day===ie);De.length===0&&(De=A.filter(Ze=>Ze.day==="default"));const Ke=De.find(Ze=>{const gt=Re(Ze.start),Bt=Re(Ze.end);return Ue>=gt&&Ue<=Bt}),Ft=m.toLowerCase(),Oe=e.find(Ze=>Ze.name.toLowerCase().includes(Ft)),It=r.find(Ze=>Ze.name.toLowerCase().includes(Ft));if(!Oe&&!It){E({status:" ",detail:" ",color:"text-red-500"});return}if(Oe){if(Oe.unavailableDates.includes(b)){const _e=((Qt=Oe.absenceReasons)==null?void 0:Qt[b])===" "?" ":"";E({status:"",detail:_e,color:"text-red-500",icon:"UserX",items:[]});return}if(!Ke){E({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Ze=i.filter($e=>$e.teacherId===Oe.id&&$e.day===ie&&$e.period===Ke.period&&$e.shift===Ke.shift),gt=a.filter($e=>$e.date===b&&$e.replacementTeacherId===Oe.id).map($e=>i.find(_e=>_e.id===$e.scheduleItemId)).filter($e=>!!$e&&$e.day===ie&&$e.period===Ke.period&&$e.shift===Ke.shift);let Bt=[];Ze.forEach($e=>{var ee,ce,ve;const _e=a.find(he=>he.date===b&&he.scheduleItemId===$e.id);if(!_e||_e.replacementTeacherId===Oe.id){const he=((ee=n.find(ue=>ue.id===((_e==null?void 0:_e.replacementRoomId)||$e.roomId)))==null?void 0:ee.name)||(_e==null?void 0:_e.replacementRoomId)||$e.roomId||" .",de=(ce=t.find(ue=>ue.id===$e.subjectId))==null?void 0:ce.name,Me=(ve=r.find(ue=>ue.id===$e.classId))==null?void 0:ve.name;Bt.push({room:he,subject:de,entityName:Me,direction:$e.direction,isSubstitution:!!(_e&&_e.replacementTeacherId===Oe.id),originalTeacherName:null})}}),gt.forEach($e=>{var de,Me,ue;const _e=a.find(ne=>ne.date===b&&ne.scheduleItemId===$e.id&&ne.replacementTeacherId===Oe.id);if(!_e)return;const ee=((de=n.find(ne=>ne.id===(_e.replacementRoomId||$e.roomId)))==null?void 0:de.name)||_e.replacementRoomId||$e.roomId||" .",ce=(Me=t.find(ne=>ne.id===$e.subjectId))==null?void 0:Me.name,ve=(ue=r.find(ne=>ne.id===$e.classId))==null?void 0:ue.name,he=e.find(ne=>ne.id===_e.originalTeacherId);Bt.push({room:ee,subject:ce,entityName:ve,direction:$e.direction,isSubstitution:!0,originalTeacherName:he==null?void 0:he.name})}),Bt.length>0?E({status:` ${Ke.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Bt}):E({status:"",detail:` ( ${Ke.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(It){if(!Ke){E({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Ze=i.filter(gt=>gt.classId===It.id&&gt.day===ie&&gt.period===Ke.period&&gt.shift===Ke.shift);if(Ze.length>0){const gt=Ze.map(_e=>{var fe,Ce,ye,we,Ge;const ee=a.find(Pe=>Pe.scheduleItemId===_e.id&&Pe.date===b);if(ee&&ee.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(fe=t.find(Pe=>Pe.id===_e.subjectId))==null?void 0:fe.name};const ce=!!(ee&&ee.replacementTeacherId!=="conducted"&&ee.replacementTeacherId!=="cancelled"),ve=ce?ee.replacementTeacherId:_e.teacherId,he=(ee==null?void 0:ee.replacementRoomId)||_e.roomId,de=(Ce=e.find(Pe=>Pe.id===ve))==null?void 0:Ce.name,Me=((ye=n.find(Pe=>Pe.id===he))==null?void 0:ye.name)||he||" .",ue=(we=t.find(Pe=>Pe.id===_e.subjectId))==null?void 0:we.name,ne=ce?(Ge=e.find(Pe=>Pe.id===ee.originalTeacherId))==null?void 0:Ge.name:null;return{room:Me,subject:ue,entityName:de,direction:_e.direction,isSubstitution:ce,originalTeacherName:ne}}),Bt=gt.filter(_e=>!_e.cancelled),$e=gt.filter(_e=>!!_e.cancelled);Bt.length>0?E({status:` ${Ke.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Bt}):$e.length>0?E({status:" ",detail:$e.map(_e=>_e.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):E({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else E({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},Y=async()=>{if(!v.trim()){alert(",   .");return}if(!(s!=null&&s.telegramToken)||!(s!=null&&s.feedbackChatId)){alert("     .");return}Q(!0);const O=` *   :*

${v}`;try{const ie=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:O,parse_mode:"Markdown"})})).json();if(ie.ok)alert("!   ."),U(!1),C("");else throw new Error(ie.description)}catch(ae){console.error("   Telegram:",ae),alert(`   . : ${ae}`)}finally{Q(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[l.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 animate-fade-in",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[N,", ",o==="admin"?"":"","!"]}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:[" ",f.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]})]}),l.jsx("div",{className:"flex gap-3",children:l.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[l.jsx($,{name:"Send",size:18}),"  "]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:l.jsx($,{name:"Search",size:22})}),l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:m,onChange:O=>y(O.target.value),onKeyDown:O=>O.key==="Enter"&&L(),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl p-3.5 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),l.jsx("button",{onClick:L,className:"bg-slate-800 dark:bg-indigo-600 hover:bg-slate-700 text-white p-3.5 rounded-xl transition-all shadow-md active:scale-95",children:l.jsx($,{name:"Search",size:20})})]}),B&&l.jsxs("div",{className:"mt-auto p-4 bg-slate-50/80 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 animate-fade-in backdrop-blur-sm",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-3 flex items-center gap-2 ${B.color}`,children:[l.jsx($,{name:B.icon||"Info",size:16})," ",B.status]}),B.items&&B.items.length>0?l.jsx("div",{className:"space-y-2.5",children:B.items.map((O,ae)=>l.jsxs("div",{className:"bg-white dark:bg-dark-900/80 p-3 rounded-xl border border-slate-100 dark:border-slate-600 text-sm shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:O.subject}),O.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-md",children:O.direction})]}),O.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500 mt-1",children:O.originalTeacherName?` (${O.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-2 text-slate-500 dark:text-slate-400 text-xs",children:[l.jsx("span",{children:O.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg font-mono font-bold text-slate-600 dark:text-slate-300",children:O.room})]})]},`${O.room}-${O.subject}-${O.entityName}-${ae}`))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-base leading-snug",children:B.detail})]})]}),l.jsxs("div",{className:`glass-panel p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden ${Ae>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[Ae>0&&l.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),l.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[l.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${Ae>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:l.jsx($,{name:Ae>0?"AlertTriangle":"CheckCircle",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:Ae>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:Ae}),l.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),l.jsxs("button",{onClick:()=>c("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",l.jsx($,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:l.jsx($,{name:"CheckCircle",size:64})}),l.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full card-hover",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:l.jsx($,{name:"PieChart",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>w(!x),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:x?" ":" ",children:l.jsx($,{name:x?"PieChart":"List",size:20})})]}),x?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:et.absentTeachersList.length>0?l.jsx("div",{className:"space-y-3",children:et.absentTeachersList.map(O=>l.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:O.name}),l.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:O.displayReason})]},O.id))}):l.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:l.jsx("p",{className:"text-sm font-medium",children:"   "})})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[l.jsxs("div",{className:"relative w-28 h-28",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${et.presentPercent}, 100`,strokeLinecap:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),l.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),l.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[et.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:et.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl flex flex-col h-full group card-hover relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:l.jsx($,{name:"Edit2",size:22})}),l.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(d),alert("")},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx($,{name:"Copy",size:16})}),l.jsx("button",{onClick:()=>{confirm(" ?")&&h("")},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:l.jsx($,{name:"Trash2",size:16})})]})]}),l.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[l.jsx("textarea",{className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:d,onChange:O=>h(O.target.value)}),I&&l.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-emerald-500 animate-fade-in flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[l.jsx($,{name:"CheckCircle",size:10})," ",I]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:l.jsx($,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:We.length?We.map(O=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:O.class}),l.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:O.issue})]},`${O.class}-${O.issue}`)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]}),l.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:l.jsx($,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:je.length?je.map(O=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:O.name}),l.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${O.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:O.diff===0?"!":` ${O.diff} .`})]},O.id)):l.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]})]}),l.jsx(FA,{isOpen:R,onClose:()=>U(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),l.jsx("textarea",{value:v,onChange:O=>C(O.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:Y,disabled:_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-500/30 flex items-center gap-2 disabled:opacity-50",children:[_?l.jsx($,{name:"Loader",size:16,className:"animate-spin"}):l.jsx($,{name:"Send",size:16}),_?"...":""]})})]})})]})};var NF={},DF={},PF={},eg={};Object.defineProperty(eg,"__esModule",{value:!0});function kO(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}eg.default=kO;var RB={};Object.defineProperty(RB,"__esModule",{value:!0});var RO=eg,NO=" and ";function DO(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],A=RO.default(r),s=n;return typeof s=="boolean"?s?A:"not "+A:(typeof s=="number"&&/[height|width]$/.test(A)&&(s=s+"px"),"("+A+": "+s+")")}).join(NO)}RB.default=DO;var NB={};Object.defineProperty(NB,"__esModule",{value:!0});function PO(){}NB.default=PO;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=eg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=RB;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=NB;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(PF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=k,r=PF;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(A){return!0}};var n=function(A){return function(s,i){i===void 0&&(i=!1);var a=e.useState(i),o=a[0],c=a[1],d=r.queryObjectToString(s);return A(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),o}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(DF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=DF;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(NF);const LF=kI(NF),jF=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:A,rooms:s}=WA(),{schedule1:i,schedule2:a,saveSemesterSchedule:o,canUndo:c,canRedo:d,undo:h,redo:f}=za(),m=e===2?a:i,y=async S=>{await o(e,S)},[B,E]=k.useState(me.First),[x,w]=k.useState(At.Monday),[I,F]=k.useState(!1),[R,U]=k.useState({}),[v,C]=k.useState("class"),[_,Q]=k.useState(""),[N,P]=k.useState(""),[b,Ve]=k.useState(""),[je,et]=k.useState(!1),[We,Ae]=k.useState({visible:!1,x:0,y:0,item:null,cell:null}),[L,Y]=k.useState(null),[O,ae]=k.useState([]),[ie,Re]=k.useState(null),[Ue,De]=k.useState(null),Ke=LF({maxWidth:767}),[Ft,Oe]=k.useState(!0),[It,Qt]=k.useState(!1),[Ze,gt]=k.useState({isOpen:!1,type:"",day:"",classId:""}),[Bt,$e]=k.useState(At.Monday),[_e,ee]=k.useState(""),ce=Bn[B],ve=()=>v==="week"?Bn[B].map(S=>({id:S.toString(),name:`${S} `})):v==="class"?_?A.filter(S=>S.id===_&&S.shift===B):A.filter(S=>S.shift===B):v==="teacher"?_?n.filter(S=>S.id===_):n:v==="subject"?_?r.filter(S=>S.id===_):r:[],he=(S,H)=>{let X=[];if(v==="week"){const Z=parseInt(S),J=H;X=m.filter(W=>W.shift===B&&W.period===Z&&W.day===J),_&&(X=X.filter(W=>W.classId===_))}else{const Z=H;v==="class"&&(X=m.filter(J=>J.classId===S&&J.period===Z&&J.day===x&&J.shift===B)),v==="teacher"&&(X=m.filter(J=>J.teacherId===S&&J.period===Z&&J.day===x&&J.shift===B)),v==="subject"&&(X=m.filter(J=>J.subjectId===S&&J.period===Z&&J.day===x&&J.shift===B))}return N&&(X=X.filter(Z=>{if(!Z.roomId)return!1;const J=s.find(Fe=>Fe.id===Z.roomId);return((J?J.name:Z.roomId)||"").toLowerCase().includes(N.toLowerCase())})),b&&(X=X.filter(Z=>{var J;return(J=Z.direction)==null?void 0:J.toLowerCase().includes(b.toLowerCase())})),X},de=S=>{const H=[],X=m.filter(W=>W.id!==S.id&&W.day===S.day&&W.period===S.period&&W.shift===S.shift);return X.find(W=>W.teacherId===S.teacherId)&&H.push("teacher"),X.find(W=>!(W.classId!==S.classId||W.direction&&S.direction&&W.direction!==S.direction))&&H.push("class"),S.roomId&&X.find(Fe=>Fe.roomId===S.roomId)&&H.push("room"),H},Me=(S,H,X)=>{const Z=[],J=A.find(tt=>tt.id===S),W=r.find(tt=>tt.id===H),Fe=s.find(tt=>tt.id===X);return Fe&&(J&&Fe.capacity<J.studentsCount&&Z.push(`  !   ${J.studentsCount} .,     ${Fe.capacity}.`),W&&W.requiredRoomType&&W.requiredRoomType!==""&&Fe.type!==W.requiredRoomType&&Z.push(`   !   "${W.requiredRoomType}",   "${Fe.type}".`)),Z},ue=S=>{if(!S.classId||!S.subjectId||!S.roomId){ae([]);return}const H=Me(S.classId,S.subjectId,S.roomId);ae(H)},ne=S=>{t||(U(S),ue(S),F(!0))},fe=(S,H,X=x)=>{if(t)return;const Z={period:H,day:X,shift:B,id:Math.random().toString(36).substr(2,9)};v==="class"&&(Z.classId=S),v==="teacher"&&(Z.teacherId=S),v==="subject"&&(Z.subjectId=S),v==="week"&&(Z.period=parseInt(S),Z.day=X,_&&A.find(J=>J.id===_)&&(Z.classId=_)),U(Z),ae([]),F(!0)},Ce=async()=>{if(!R.subjectId||!R.teacherId||!R.classId)return;let S=[...m];const H=S.findIndex(X=>X.id===R.id);H>=0?S[H]=R:S.push(R),await y(S),F(!1)},ye=async S=>{const H=m.filter(X=>X.id!==(S||R.id));await y(H),F(!1)},we=(S,H,X)=>{t||(S.preventDefault(),S.stopPropagation(),Ae({visible:!0,x:S.clientX,y:S.clientY,item:H,cell:X}))},Ge=(S,H)=>{if(t)return;Re(H),S.dataTransfer.effectAllowed="move";const X=S.currentTarget;setTimeout(()=>X.classList.add("dragging"),0)},Pe=S=>{S.currentTarget.classList.remove("dragging"),Re(null),De(null)},ut=(S,H)=>{S.preventDefault(),!t&&De(`${H.rowId}-${H.colKey}`)},Se=async(S,H)=>{if(S.preventDefault(),!ie||t)return;const X={...ie};v==="week"?(X.period=parseInt(H.rowId),X.day=H.colKey):(X.period=H.colKey,X.day=x,v==="class"&&(X.classId=H.rowId),v==="teacher"&&(X.teacherId=H.rowId),v==="subject"&&(X.subjectId=H.rowId));let Z=m.map(J=>J.id===X.id?X:J);await y(Z),Re(null),De(null)},xe=[];if(We.item)xe.push({label:"",icon:"Copy",onClick:()=>Y(We.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>ye(We.item.id)});else if(We.cell){const S=We.cell;L&&xe.push({label:"",icon:"Clipboard",onClick:async()=>{const H={...L,id:Math.random().toString(36).substr(2,9),day:x,shift:B,period:S.colKey};v==="week"&&(H.day=S.colKey,H.period=parseInt(S.rowId)),v==="class"?H.classId=S.rowId:v==="teacher"?H.teacherId=S.rowId:v==="subject"&&(H.subjectId=S.rowId);let X=[...m,H];await y(X),Y(null)}}),xe.push({label:" ",icon:"Plus",onClick:()=>fe(S.rowId||"",typeof S.colKey=="number"?S.colKey:parseInt(S.rowId||"0"),v==="week"?S.colKey:x)})}const He=R.subjectId?n.filter(S=>S.subjectIds.includes(R.subjectId)):[],Le=R.subjectId?n.filter(S=>!S.subjectIds.includes(R.subjectId)):n,dt=k.useMemo(()=>{var H,X,Z,J;const S=e===2?" (2- )":"";if(_){if(v==="teacher")return((H=n.find(W=>W.id===_))==null?void 0:H.name)+S;if(v==="class")return((X=A.find(W=>W.id===_))==null?void 0:X.name)+S;if(v==="subject")return((Z=r.find(W=>W.id===_))==null?void 0:Z.name)+S;if(v==="week")return((J=A.find(W=>W.id===_))==null?void 0:J.name)+S}return`  ${x}`+S},[_,v,n,A,r,x,e]),nt=!!_,mt=k.useMemo(()=>nt?Vt:ce,[nt,ce]),qt=k.useMemo(()=>nt?Bn[B].map(S=>({id:S.toString(),name:`${S} `})):ve(),[nt,B,ve]),D=(S,H)=>{if(nt){const X=parseInt(S),Z=H;let J=m.filter(W=>W.shift===B&&W.period===X&&W.day===Z);return v==="class"||v==="week"?J=J.filter(W=>W.classId===_):v==="teacher"?J=J.filter(W=>W.teacherId===_):v==="subject"&&(J=J.filter(W=>W.subjectId===_)),J}else return he(S,H)},G=ve(),q=v==="week"?Vt:ce,V=(S,H,X)=>{gt({isOpen:!0,type:S,day:H||"",classId:X||""})},Ee=async()=>{let S=[...m];Ze.type==="clearAll"?S=[]:Ze.type==="clearDay"&&Ze.day?S=S.filter(H=>H.day!==Ze.day):Ze.type==="clearClass"&&Ze.classId&&(S=S.filter(H=>H.classId!==Ze.classId)),await y(S),gt({isOpen:!1,type:"",day:"",classId:""}),Qt(!1)},se=(S,H,X)=>t&&S.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[S.map(Z=>{const J=r.find(ze=>ze.id===Z.subjectId),W=n.find(ze=>ze.id===Z.teacherId),Fe=A.find(ze=>ze.id===Z.classId),tt=de(Z),Xe=s.find(ze=>ze.id===Z.roomId),Ye=Xe?Xe.name:Z.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:ze=>Ge(ze,Z),onDragEnd:t?void 0:Pe,onClick:t?void 0:()=>ne(Z),onContextMenu:t?void 0:ze=>we(ze,Z,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${tt.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:tt.length===0&&(J!=null&&J.color)?{backgroundColor:`${J.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:v==="subject"||v==="week"?Fe==null?void 0:Fe.name:J==null?void 0:J.name}),Z.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Z.direction})]}),v==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:J==null?void 0:J.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:W==null?void 0:W.name,children:[l.jsx($,{name:v==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:v==="teacher"?Fe==null?void 0:Fe.name:W==null?void 0:W.name})]}),Ye&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Xe?`: ${Xe.capacity}, : ${Xe.type}`:"",children:Ye})]}),tt.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${tt.join(", ")}`,children:"!"})]},Z.id)}),!t&&S.length<3&&l.jsx("button",{onClick:()=>fe(X,typeof H=="number"?H:parseInt(X),v==="week"?H:x),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx($,{name:"Plus",size:16})})]}),oe=()=>{if(!_)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const S=m.filter(H=>H.day===x&&H.shift===B&&(v==="class"&&H.classId===_||v==="teacher"&&H.teacherId===_||v==="subject"&&H.subjectId===_)).sort((H,X)=>H.period-X.period);return S.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",x,"  ",B,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:S.map(H=>{const X=r.find(Xe=>Xe.id===H.subjectId),Z=n.find(Xe=>Xe.id===H.teacherId),J=A.find(Xe=>Xe.id===H.classId),W=s.find(Xe=>Xe.id===H.roomId),Fe=W?W.name:H.roomId,tt=de(H);return l.jsxs("div",{onClick:t?void 0:()=>ne(H),className:`rounded-xl p-4 shadow-sm border ${tt.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[H.period," "]}),tt.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${tt.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[X==null?void 0:X.name," ",H.direction&&`(${H.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[J==null?void 0:J.name,"  ",Z==null?void 0:Z.name]}),Fe&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Fe]})]},H.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),We.visible&&l.jsx(FO,{x:We.x,y:We.y,onClose:()=>Ae({...We,visible:!1}),actions:xe}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>E(me.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===me.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>E(me.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===me.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),v!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Vt.map(S=>l.jsx("button",{onClick:()=>w(S),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${x===S?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:S},S))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx($,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx($,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{C("class"),Q("")},className:`p-2 rounded-md ${v==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{C("teacher"),Q("")},className:`p-2 rounded-md ${v==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{C("subject"),Q("")},className:`p-2 rounded-md ${v==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var S;C("week"),Q(((S=A[0])==null?void 0:S.id)||"")},className:`p-2 rounded-md ${v==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx($,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx($,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:_,onChange:S=>Q(S.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",v==="class"?"":v==="teacher"?"":v==="week"?" ()":""]}),(v==="class"||v==="week")&&A.filter(S=>S.shift===B).map(S=>l.jsx("option",{value:S.id,children:S.name},S.id)),v==="teacher"&&n.map(S=>l.jsx("option",{value:S.id,children:S.name},S.id)),v==="subject"&&r.map(S=>l.jsx("option",{value:S.id,children:S.name},S.id))]})]}),l.jsx("input",{placeholder:"...",value:N,onChange:S=>P(S.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:b,onChange:S=>Ve(S.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>Qt(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx($,{name:"List",size:16})," . ."]}),(_||v==="week")&&l.jsx("button",{onClick:()=>et(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx($,{name:"Printer",size:16})})]})]}),Ke&&!t&&_&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>Oe(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Ft?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx($,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>Oe(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Ft?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx($,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Ke&&Ft&&!t&&_?oe():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:v==="week"?"":v==="class"?"":v==="teacher"?"":""}),q.map(S=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:v==="week"?S:`${S} `},S))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:G.length>0?G.map(S=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:S.name}),q.map(H=>{const X=he(S.id,H),Z=`${S.id}-${H}`,J={rowId:S.id,colKey:H};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${Ue===Z?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:W=>we(W,null,J),onDragOver:t?void 0:W=>ut(W,J),onDrop:t?void 0:W=>Se(W,J),children:se(X,H,S.id)},H)})]},S.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(FA,{isOpen:I,onClose:()=>F(!1),title:R.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",R.day]}),l.jsxs("span",{children:[": ",R.period]}),l.jsxs("span",{children:[": ",R.shift===me.First?"1 ":"2 "]})]}),O.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:O.map(S=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($,{name:"AlertTriangle",size:14}),S]},S))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(ip,{options:A.filter(S=>S.shift===B).map(S=>({value:S.id,label:S.name})),value:R.classId||null,onChange:S=>{U({...R,classId:S}),ue({...R,classId:S})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(ip,{options:r.map(S=>({value:S.id,label:S.name})),value:R.subjectId||null,onChange:S=>{U({...R,subjectId:S}),ue({...R,subjectId:S})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(ip,{options:[{label:"",options:He.map(S=>({value:S.id,label:S.name}))},{label:"",options:Le.map(S=>({value:S.id,label:S.name}))}],value:R.teacherId||null,onChange:S=>U({...R,teacherId:S}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:R.direction||"",onChange:S=>U({...R,direction:S.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:R.roomId||"",onChange:S=>{U({...R,roomId:S.target.value}),ue({...R,roomId:S.target.value})},children:[l.jsx("option",{value:"",children:" "}),s.map(S=>l.jsxs("option",{value:S.id,children:[S.name," (",S.capacity," )"]},S.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[R.id&&l.jsx("button",{onClick:()=>ye(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:Ce,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(FA,{isOpen:It,onClose:()=>Qt(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>V("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:Bt,onChange:S=>$e(S.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Vt.map(S=>l.jsx("option",{value:S,children:S},S))})}),l.jsxs("button",{onClick:()=>V("clearDay",Bt),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",Bt]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:_e,onChange:S=>ee(S.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),A.map(S=>l.jsx("option",{value:S.id,children:S.name},S.id))]})}),l.jsx("button",{onClick:()=>{_e&&V("clearClass",void 0,_e)},disabled:!_e,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(FA,{isOpen:Ze.isOpen,onClose:()=>gt({...Ze,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>gt({...Ze,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),je&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx($,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>et(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:dt}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:nt||v==="week"?"":v==="class"?"":v==="teacher"?"":""}),mt.map(S=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:nt||v==="week"?S:`${S} `},S))]})}),l.jsx("tbody",{children:qt.map(S=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:S.name}),mt.map(H=>{const X=D(S.id,H);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:X.map(Z=>{const J=r.find(vt=>vt.id===Z.subjectId),W=n.find(vt=>vt.id===Z.teacherId),Fe=A.find(vt=>vt.id===Z.classId),tt=s.find(vt=>vt.id===Z.roomId),Xe=tt?tt.name:Z.roomId,Ye=v==="teacher",wt=v==="subject"||v==="week"||nt&&Ye?Fe==null?void 0:Fe.name:J==null?void 0:J.name,_t=Ye?Fe==null?void 0:Fe.name:W==null?void 0:W.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[wt,Z.direction&&` (${Z.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:_t}),Xe&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Xe})]})]},Z.id)})},H)})]},S.id))})]})]})})]})]})},LO=()=>{var We,Ae;const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:A,saveStaticData:s}=WA(),[i,a]=k.useState("teachers"),[o,c]=k.useState(!1),[d,h]=k.useState(null),[f,m]=k.useState({}),[y,B]=k.useState({}),[E,x]=k.useState({}),[w,I]=k.useState({}),[F,R]=k.useState("default"),[U,v]=k.useState(null),C=L=>{h(L||null),i==="teachers"?m(L?e.find(Y=>Y.id===L)??{}:{subjectIds:[],unavailableDates:[],shifts:[me.First,me.Second],telegramChatId:""}):i==="subjects"?B(L?t.find(Y=>Y.id===L)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?x(L?r.find(Y=>Y.id===L)??{}:{shift:me.First,studentsCount:25}):i==="rooms"&&I(L?n.find(Y=>Y.id===L)??{}:{capacity:30,type:""}),c(!0)},_=async()=>{const L=()=>Math.random().toString(36).substr(2,9),Y={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:y,key:"subjects"},classes:{list:r,form:E,key:"classes"},rooms:{list:n,form:w,key:"rooms"}};if(i==="bells"||!(i in Y))return;const O=Y[i],{list:ae,form:ie,key:Re}=O;if(!ie.name)return;let Ue=[...ae];if(d)Ue=Ue.map(De=>De.id===d?{...De,...ie}:De);else{const De=ae.reduce((Ke,Ft)=>Math.max(Ke,Ft.order||0),0);Ue.push({...ie,id:L(),order:De+1})}await s({[Re]:Ue}),c(!1)},Q=async L=>{if(window.confirm(" ?"))switch(i){case"teachers":await s({teachers:e.filter(Y=>Y.id!==L)});break;case"subjects":await s({subjects:t.filter(Y=>Y.id!==L)});break;case"classes":await s({classes:r.filter(Y=>Y.id!==L)});break;case"rooms":await s({rooms:n.filter(Y=>Y.id!==L)});break}},N=(L,Y)=>{v(Y),L.dataTransfer.effectAllowed="move"},P=L=>{L.preventDefault()},b=async(L,Y)=>{if(U===null||U===Y)return;const O=ae=>{const ie=[...ae],[Re]=ie.splice(U,1);return ie.splice(Y,0,Re),ie.map((Ue,De)=>({...Ue,order:De}))};switch(i){case"teachers":{await s({teachers:O(e)});break}case"subjects":{await s({subjects:O(t)});break}case"classes":{await s({classes:O(r)});break}case"rooms":{await s({rooms:O(n)});break}}v(null)},Ve=(L,Y)=>{const O=F;let ae=A.find(ie=>ie.shift===L&&ie.period===Y&&ie.day===O);if(!ae&&O!=="default"){const ie=A.find(Re=>Re.shift===L&&Re.period===Y&&Re.day==="default");return ie?{...ie,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return ae?{...ae,isInherited:!1}:{start:"",end:"",isInherited:!1}},je=async(L,Y,O,ae)=>{let ie=[...A];const Re=F,Ue=ie.findIndex(De=>De.shift===L&&De.period===Y&&De.day===Re);Ue>=0?ie[Ue]={...ie[Ue],[O]:ae}:ie.push({shift:L,period:Y,[O]:ae,start:"00:00",end:"00:00",day:Re}),await s({bellSchedule:ie})},et=L=>{const Y=f.shifts||[];Y.includes(L)?m({...f,shifts:Y.filter(O=>O!==L)}):m({...f,shifts:[...Y,L]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(L=>l.jsxs("button",{onClick:()=>a(L.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===L.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx($,{name:L.icon,size:18})," ",L.label]},L.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx($,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(Zu,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((L,Y)=>l.jsxs("div",{draggable:!0,onDragStart:O=>N(O,Y),onDragOver:P,onDrop:O=>b(O,Y),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:L.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(L.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx($,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:L.birthDate?`: ${new Date(L.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[L.shifts.includes(me.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),L.shifts.includes(me.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:L.subjectIds.map(O=>{const ae=t.find(ie=>ie.id===O);return ae?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:ae.color,color:"#334155"},children:ae.name},O):null})})]},L.id))}),i==="subjects"&&l.jsx(Zu,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((L,Y)=>l.jsxs("div",{draggable:!0,onDragStart:O=>N(O,Y),onDragOver:P,onDrop:O=>b(O,Y),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:L.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",L.difficulty,"  ",L.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:16})})]})]},L.id))}),i==="classes"&&l.jsx(Zu,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((L,Y)=>l.jsxs("div",{draggable:!0,onDragStart:O=>N(O,Y),onDragOver:P,onDrop:O=>b(O,Y),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx($,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[L.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${L.shift===me.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[L.shift===me.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>Q(L.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:14})})]})]},L.id))}),i==="rooms"&&l.jsx(Zu,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((L,Y)=>l.jsxs("div",{draggable:!0,onDragStart:O=>N(O,Y),onDragOver:P,onDrop:O=>b(O,Y),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx($,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:L.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",L.capacity,"  ",L.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(L.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:16})})]})]},L.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(L=>l.jsx("button",{onClick:()=>R(L),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${F===L?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:L==="default"?"":L===""?"":""},L))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[me.First,me.Second].map(L=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${L===me.First?"bg-indigo-600":"bg-purple-600"}`,children:L}),l.jsx("div",{className:"p-6 space-y-3",children:Bn[L].map(Y=>{const O=Ve(L,Y);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${O.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:Y}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:O.start,onChange:ae=>je(L,Y,"start",ae.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:O.end,onChange:ae=>je(L,Y,"end",ae.target.value)})]})]},Y)})})]},L))})]})]}),l.jsx(FA,{isOpen:o,onClose:()=>c(!1),title:d?"":"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:L=>m({...f,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:L=>m({...f,birthDate:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:L=>m({...f,telegramChatId:L.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(We=f.shifts)==null?void 0:We.includes(me.First),onChange:()=>et(me.First)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(Ae=f.shifts)==null?void 0:Ae.includes(me.Second),onChange:()=>et(me.Second)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(L=>{var Y;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Y=f.subjectIds)==null?void 0:Y.includes(L.id),onChange:O=>{const ae=f.subjectIds||[];m({...f,subjectIds:O.target.checked?[...ae,L.id]:ae.filter(ie=>ie!==L.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:L.name})]},L.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:y.name||"",onChange:L=>B({...y,name:L.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:y.color||"#ffffff",onChange:L=>B({...y,color:L.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.difficulty||5,onChange:L=>B({...y,difficulty:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.requiredRoomType,onChange:L=>B({...y,requiredRoomType:L.target.value}),children:jv.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:E.name||"",onChange:L=>x({...E,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:E.studentsCount||25,onChange:L=>x({...E,studentsCount:parseInt(L.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>x({...E,shift:me.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===me.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>x({...E,shift:me.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===me.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:w.name||"",onChange:L=>I({...w,name:L.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.capacity||30,onChange:L=>I({...w,capacity:parseInt(L.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.type,onChange:L=>I({...w,type:L.target.value}),children:jv.map(L=>l.jsx("option",{value:L,children:L},L))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},jO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:A,saveStaticData:s}=WA(),{schedule1:i,schedule2:a,substitutions:o,saveScheduleData:c}=za(),d=ri(),[h,f]=k.useState(new Date().toISOString().split("T")[0]),[m,y]=k.useState(!1),[B,E]=k.useState(null),[x,w]=k.useState(!1),[I,F]=k.useState(!1),[R,U]=k.useState(null),[v,C]=k.useState(""),[_,Q]=k.useState(!1),[N,P]=k.useState(""),[b,Ve]=k.useState(""),[je,et]=k.useState("all"),[We,Ae]=k.useState(""),[L,Y]=k.useState(""),[O,ae]=k.useState(""),[ie,Re]=k.useState(""),[Ue,De]=k.useState([]),[Ke,Ft]=k.useState(!1),[Oe,It]=k.useState(!1),[Qt,Ze]=k.useState(!1),gt=LF({maxWidth:767}),[Bt,$e]=k.useState("lessons"),_e=k.useMemo(()=>{const D=new Date(h).getMonth();return D>=0&&D<=4?a:i},[h,i,a]);k.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(E(d.state.subParams),ae(""),Re(""),De([]),Ft(!1),It(!1),Ze(!1),y(!0),window.history.replaceState({},document.title))},[d.state]),k.useEffect(()=>{if(m&&B){const D=o.find(G=>G.scheduleItemId===B.scheduleItemId&&G.date===h);De(D?D.refusals||[]:[]),Ft(!1),It(!1),Ze(!1)}},[m,B,o,h]);const ee=k.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:Vt[D-1]},[h]),ce=k.useMemo(()=>e.filter(D=>{const G=D.name.toLowerCase().includes(b.toLowerCase()),q=je==="all"?!0:D.shifts.includes(je);return G&&q}),[e,b,je]),ve=k.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),he=k.useMemo(()=>{if(!ee)return[];const D=ve.map(oe=>oe.id),G=_e.filter(oe=>oe.day===ee&&D.includes(oe.teacherId)),V=o.filter(oe=>oe.date===h).map(oe=>oe.scheduleItemId),Ee=_e.filter(oe=>V.includes(oe.id)),se=[...G];return Ee.forEach(oe=>{se.find(S=>S.id===oe.id)||se.push(oe)}),se.sort((oe,S)=>oe.period-S.period)},[_e,ee,ve,o,h]),de=D=>{var q;const G=e.find(V=>V.id===D);U(D),C(((q=G==null?void 0:G.absenceReasons)==null?void 0:q[h])||""),w(!0)},Me=k.useCallback(async()=>{let D=[...e];const G=D.findIndex(V=>V.id===R);if(G===-1)return;const q={...D[G]};q.unavailableDates.includes(h)||(q.unavailableDates=[...q.unavailableDates,h]),q.absenceReasons||(q.absenceReasons={}),q.absenceReasons[h]=v,D[G]=q,await s({teachers:D}),w(!1)},[e,R,h,v,s]),ue=k.useCallback(async D=>{let G=[...e];const q=G.findIndex(Ee=>Ee.id===D);if(q===-1)return;const V={...G[q]};V.unavailableDates=V.unavailableDates.filter(Ee=>Ee!==h),V.absenceReasons&&delete V.absenceReasons[h],G[q]=V,await s({teachers:G})},[e,h,s]),ne=k.useCallback(async(D,G=!1)=>{if(!B){alert(":   .    .");return}const q=[...o],V=_e.find(oe=>oe.id===B.scheduleItemId);if(!V){alert(":     .");return}const Ee=q.filter(oe=>!(oe.scheduleItemId===B.scheduleItemId&&oe.date===h)),se={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:B.scheduleItemId,originalTeacherId:V.teacherId,replacementTeacherId:D,replacementRoomId:O||void 0,isMerger:G,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&ie?ie:void 0,refusals:Ue};Ee.push(se),await c({substitutions:Ee}),y(!1),Ae(""),ae(""),Re(""),De([]),E(null)},[B,h,O,_e,o,e,ie,Ue,c]),fe=k.useCallback(async D=>{if(!B||!ee)return;const G=_e.filter(V=>V.classId===D&&V.day===ee&&V.period===B.period&&V.shift===B.shift);if(G.length===0){alert("    .");return}const q=o.filter(V=>!(V.scheduleItemId===B.scheduleItemId&&V.date===h));G.forEach(V=>{const Ee={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:B.scheduleItemId,originalTeacherId:B.teacherId,replacementTeacherId:V.teacherId,replacementClassId:V.classId,replacementSubjectId:V.subjectId,isMerger:!0,replacementRoomId:V.roomId,lessonAbsenceReason:ie||void 0};q.push(Ee)}),await c({substitutions:q}),y(!1),Ae(""),ae(""),Re(""),E(null),It(!1)},[B,h,ee,_e,o,ie,c]),Ce=k.useCallback(async D=>{if(!B)return;const G=_e.find(Z=>Z.id===B.scheduleItemId),q=_e.find(Z=>Z.id===D);if(!G||!q){alert(":     .");return}const V=[...o];let Ee;O?Ee=O:Ee=Qt?G.roomId:q.roomId;const se=Qt?q.roomId:G.roomId,oe=V.findIndex(Z=>Z.scheduleItemId===G.id&&Z.date===h),S={id:oe>=0?V[oe].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:G.id,originalTeacherId:G.teacherId,replacementTeacherId:G.teacherId,replacementClassId:q.classId,replacementSubjectId:q.subjectId,replacementRoomId:Ee!==G.roomId?Ee:void 0};oe>=0?V[oe]=S:V.push(S);const H=V.findIndex(Z=>Z.scheduleItemId===q.id&&Z.date===h),X={id:H>=0?V[H].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:q.id,originalTeacherId:q.teacherId,replacementTeacherId:q.teacherId,replacementClassId:G.classId,replacementSubjectId:G.subjectId,replacementRoomId:se!==q.roomId?se:void 0};H>=0?V[H]=X:V.push(X),await c({substitutions:V}),y(!1),E(null),ae(""),Ft(!1),Ze(!1)},[B,_e,o,h,c,O,Qt]),ye=k.useCallback(async D=>{const G=o.filter(q=>!(q.scheduleItemId===D&&q.date===h));await c({substitutions:G})},[o,h,c]),we=k.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const G=o.some(V=>V.date===h&&V.replacementTeacherId!=="conducted"),q=(V,Ee)=>{const oe=he.filter(S=>S.shift===Ee).filter(S=>{const H=o.filter(X=>X.scheduleItemId===S.id&&X.date===h);return H.length>0&&H.some(X=>X.replacementTeacherId!=="conducted")});oe.length>0&&(D+=`
 *${V.toUpperCase()}*
`,oe.forEach(S=>{var Z;const H=o.filter(J=>J.scheduleItemId===S.id&&J.date===h);if(H.some(J=>J.isMerger)){const J=r.find(_t=>_t.id===S.classId),W=t.find(_t=>_t.id===S.subjectId),Fe=e.find(_t=>_t.id===S.teacherId),tt=(Fe==null?void 0:Fe.name)||"?",Xe=H.map(_t=>{var vt;return(vt=e.find(Jr=>Jr.id===_t.replacementTeacherId))==null?void 0:vt.name}).filter(Boolean).join(", "),Ye=H[0],ze=Ye!=null&&Ye.replacementClassId?r.find(_t=>_t.id===Ye.replacementClassId):null;let Ut=` ${J==null?void 0:J.name} (${S.period} ): ${W==null?void 0:W.name} -> ${Xe} (${ze?`  ${ze.name}`:""}) ( ${tt})`;const wt=Ye==null?void 0:Ye.replacementRoomId;if(wt){const _t=((Z=n.find(vt=>vt.id===wt))==null?void 0:Z.name)||wt;Ut+=`  . ${_t}`}D+=Ut+`
`}else H.forEach(J=>{var qA,nn,JA;if(J.replacementTeacherId==="conducted")return;const W=r.find(Jt=>Jt.id===S.classId),Fe=t.find(Jt=>Jt.id===S.subjectId),tt=e.find(Jt=>Jt.id===J.replacementTeacherId),Xe=e.find(Jt=>Jt.id===S.teacherId),Ye=((qA=n.find(Jt=>Jt.id===S.roomId))==null?void 0:qA.name)||S.roomId||"?",ze=(nn=Xe==null?void 0:Xe.absenceReasons)==null?void 0:nn[h],Ut=J==null?void 0:J.lessonAbsenceReason,vt=(Ut===" "?Ut:null)||(ze===" "?ze:null),Jr=(Xe==null?void 0:Xe.name)+(vt?` (${vt})`:""),sr=J!=null&&J.replacementRoomId?((JA=n.find(Jt=>Jt.id===J.replacementRoomId))==null?void 0:JA.name)||J.replacementRoomId:null,Pr=J!=null&&J.replacementClassId?r.find(Jt=>Jt.id===J.replacementClassId):null,Tn=J!=null&&J.replacementSubjectId?t.find(Jt=>Jt.id===J.replacementSubjectId):null,Xn=Pr&&Tn&&!J.isMerger;if(J.replacementTeacherId==="cancelled")D+=` ${W==null?void 0:W.name} (${S.period} ): ${Fe==null?void 0:Fe.name} (${Jr}) ->  
`;else if(J.replacementTeacherId===J.originalTeacherId&&sr&&!Pr)D+=` ${W==null?void 0:W.name} (${S.period} ): ${Fe==null?void 0:Fe.name} (${Xe==null?void 0:Xe.name}) ->  ${Ye}  ${sr}
`;else if(Xn)D+=` ${W==null?void 0:W.name} (${S.period} ): ${Fe==null?void 0:Fe.name} ->  ${Pr==null?void 0:Pr.name} ${Tn==null?void 0:Tn.name} ( )${sr?`  . ${sr}`:""}
`;else{let Jt=` ${W==null?void 0:W.name} (${S.period} ): ${Fe==null?void 0:Fe.name} -> ${tt==null?void 0:tt.name} ( ${Jr})`;sr&&(Jt+=`  . ${sr}`),D+=Jt+`
`}})}),D+=`
`)};G?(q(me.First,me.First),q(me.Second,me.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,o,he,r,t,e,n]),Ge=k.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(se=>se.date===h).forEach(se=>{var ze;const oe=_e.find(Ut=>Ut.id===se.scheduleItemId);if(!oe)return;let S="Unknown";if(se.replacementTeacherId==="cancelled")S=" ";else if(se.replacementTeacherId==="conducted")S=" ";else{const Ut=e.find(wt=>wt.id===se.replacementTeacherId);Ut&&(S=Ut.name)}const H=t.find(Ut=>Ut.id===oe.subjectId),X=r.find(Ut=>Ut.id===oe.classId),Z=se.date.replace(/-/g,""),J=e.find(Ut=>Ut.id===se.originalTeacherId),W=(ze=J==null?void 0:J.absenceReasons)==null?void 0:ze[h],Fe=se.lessonAbsenceReason,Ye=(Fe===" "?Fe:null)||(W===" "?W:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${Z}
SUMMARY:: ${X==null?void 0:X.name} - ${H==null?void 0:H.name}
DESCRIPTION:: ${S}${se.isMerger?" ()":""}${Ye?` (: ${Ye})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const q=new Blob([D],{type:"text/calendar"}),V=URL.createObjectURL(q),Ee=document.createElement("a");Ee.href=V,Ee.download="substitutions.ics",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee)},[h,o,_e,e,t,r]),Pe=k.useCallback(async()=>{if(!(A!=null&&A.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,G=!1;const q=new Set,V=[me.First,me.Second];for(const se of V){const S=he.filter(H=>H.shift===se).filter(H=>o.some(X=>X.scheduleItemId===H.id&&X.date===h&&X.replacementTeacherId!=="conducted"));S.length>0&&(G=!0,D+=` *${se.toUpperCase()}*
`,S.forEach(H=>{var J;const X=o.filter(W=>W.scheduleItemId===H.id&&W.date===h);if(X.some(W=>W.isMerger)){const W=r.find(wt=>wt.id===H.classId),Fe=t.find(wt=>wt.id===H.subjectId),tt=e.find(wt=>wt.id===H.teacherId),Xe=X.map(wt=>{var _t;return(_t=e.find(vt=>vt.id===wt.replacementTeacherId))==null?void 0:_t.name}).filter(Boolean).join(", "),Ye=X[0],ze=Ye!=null&&Ye.replacementClassId?r.find(wt=>wt.id===Ye.replacementClassId):null;tt!=null&&tt.telegramChatId&&q.add(tt.telegramChatId),X.forEach(wt=>{const _t=e.find(vt=>vt.id===wt.replacementTeacherId);_t!=null&&_t.telegramChatId&&q.add(_t.telegramChatId)});const Ut=Ye!=null&&Ye.replacementRoomId?((J=n.find(wt=>wt.id===Ye.replacementRoomId))==null?void 0:J.name)||Ye.replacementRoomId:"";D+=`${H.period}  (${W==null?void 0:W.name} ${Fe==null?void 0:Fe.name}): *${Xe}* (${ze?`  ${ze.name}`:""}). : ${Ut}
`}else X.forEach(W=>{var JA,Jt,ui;if(!W)return;const Fe=r.find(yr=>yr.id===H.classId),tt=t.find(yr=>yr.id===H.subjectId),Xe=e.find(yr=>yr.id===W.originalTeacherId),Ye=e.find(yr=>yr.id===W.replacementTeacherId),ze=(JA=Xe==null?void 0:Xe.absenceReasons)==null?void 0:JA[h],Ut=W.lessonAbsenceReason,vt=(Ut===" "?Ut:null)||(ze===" "?ze:null),Jr=(Xe==null?void 0:Xe.name)+(vt?` (${vt})`:""),sr=((Jt=n.find(yr=>yr.id===H.roomId))==null?void 0:Jt.name)||H.roomId||"",Pr=W.replacementRoomId?((ui=n.find(yr=>yr.id===W.replacementRoomId))==null?void 0:ui.name)||W.replacementRoomId:sr,Tn=W.replacementClassId?r.find(yr=>yr.id===W.replacementClassId):null,Xn=W.replacementSubjectId?t.find(yr=>yr.id===W.replacementSubjectId):null,qA=Tn&&Xn&&!W.isMerger;let nn=`${H.period}  (${Fe==null?void 0:Fe.name} ${tt==null?void 0:tt.name}${H.direction?` ${H.direction}`:""}): `;W.replacementTeacherId==="cancelled"?nn+=`* * ( ${Jr})`:qA?(nn+=`  : ${Tn==null?void 0:Tn.name} ${Xn==null?void 0:Xn.name} ( ${Fe==null?void 0:Fe.name} ${tt==null?void 0:tt.name})`,Pr!==sr&&(nn+=`  . ${Pr}`)):W.replacementTeacherId===W.originalTeacherId?nn+=`: ${Jr}.  : ${sr}  ${Pr}`:(nn+=`*${Ye==null?void 0:Ye.name}* ( *${Jr}*)`,sr!==Pr?nn+=`. : ${sr}  ${Pr}`:Pr!==""&&(nn+=`. : ${Pr}`)),D+=`${nn}
`,Xe!=null&&Xe.telegramChatId&&q.add(Xe.telegramChatId),Ye!=null&&Ye.telegramChatId&&q.add(Ye.telegramChatId)})}),D+=`
`)}if(G||(D+=` .
`),ve.forEach(se=>{var X;const oe=o.some(Z=>Z.date===h&&Z.originalTeacherId===se.id&&Z.replacementTeacherId!=="cancelled"&&Z.replacementTeacherId!=="conducted"),S=(X=se.absenceReasons)==null?void 0:X[h],H=S===" "?S:"";se.telegramChatId&&!oe&&se.unavailableDates.includes(h)&&(q.add(se.telegramChatId),G?D+=`_:  ${se.name} ${H},        /._
`:D+=`_:  ${se.name} ${H},      ._
`)}),q.size===0){alert("    Telegram Chat ID   .");return}const Ee=`https://api.telegram.org/bot${A.telegramToken}/sendMessage`;try{const se=Array.from(q).map(oe=>fetch(Ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:oe,text:D,parse_mode:"Markdown"})}));await Promise.all(se),alert(`   ${q.size} !`)}catch(se){console.error("    Telegram:",se),alert("     Telegram.     .")}},[h,he,o,r,t,e,n,ve,A==null?void 0:A.telegramToken]),ut=k.useCallback(async(D,G,q,V,Ee,se)=>{const S=new Date(se).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),H=G.shift===me.First?"1 ":"2 ",X=` *  *
${D.name}

 : ${S}
 : ${H}
 : ${q==null?void 0:q.name}
1 : ${G.period}
 : ${V==null?void 0:V.name}
 : ${Ee||" "}`;if(A!=null&&A.telegramToken&&D.telegramChatId)try{const J=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:X,parse_mode:"Markdown"})})).json();J.ok?alert(`   Telegram  ${D.name}!`):J.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${J.description}`)}catch(Z){alert("   Telegram (/)."),console.error(Z)}else navigator.share?navigator.share({title:"",text:X}).catch(()=>{}):(navigator.clipboard.writeText(X),alert(" ! (Telegram     Chat ID)"))},[A==null?void 0:A.telegramToken]),Se=k.useMemo(()=>B?new Set(o.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const G=_e.find(q=>q.id===D.scheduleItemId);return G&&G.period===B.period&&G.shift===B.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[o,_e,h,B]),xe=k.useMemo(()=>{if(!B||!ee)return[];const D=h.substring(0,7);return e.filter(G=>G.name.toLowerCase().includes(We.toLowerCase())).map(G=>{const q=G.unavailableDates.includes(h),V=_e.some(X=>X.teacherId===G.id&&X.day===ee&&X.period===B.period&&X.shift===B.shift),Ee=Se.has(G.id),se=V||Ee,oe=G.subjectIds.includes(B.subjectId),S=o.filter(X=>X.replacementTeacherId===G.id&&X.date.startsWith(D)).length;let H=0;return q&&(H-=1e3),se&&(H-=100),oe&&(H+=50),{teacher:G,isAbsent:q,isBusy:se,isSpecialist:oe,score:H,subsCount:S}}).sort((G,q)=>q.score-G.score)},[e,B,h,We,ee,_e,o,Se]),He=k.useMemo(()=>{if(!B||!ee)return[];const D=_e.filter(q=>q.day===ee&&q.period===B.period&&q.shift===B.shift&&q.classId!==B.classId),G=new Map;return D.forEach(q=>{const V=r.find(oe=>oe.id===q.classId),Ee=e.find(oe=>oe.id===q.teacherId),se=t.find(oe=>oe.id===q.subjectId);if(V&&Ee){G.has(V.id)||G.set(V.id,{classEntity:V,teachers:[],subjects:[]});const oe=G.get(V.id);oe.teachers.includes(Ee.name)||oe.teachers.push(Ee.name),se&&!oe.subjects.includes(se.name)&&oe.subjects.push(se.name)}}),Array.from(G.values())},[_e,B,ee,r,e,t]),Le=k.useMemo(()=>{var se;if(!B)return null;const D=_e.find(oe=>oe.id===B.scheduleItemId);if(!D)return null;const G=r.find(oe=>oe.id===D.classId),q=t.find(oe=>oe.id===D.subjectId),V=e.find(oe=>oe.id===D.teacherId),Ee=((se=V==null?void 0:V.unavailableDates)==null?void 0:se.includes(h))||!1;return{className:G==null?void 0:G.name,subjectName:q==null?void 0:q.name,teacherName:V==null?void 0:V.name,teacherId:V==null?void 0:V.id,period:D.period,roomId:D.roomId,isTeacherAbsent:Ee}},[B,_e,r,t,e,h]),dt=k.useMemo(()=>!(Le!=null&&Le.teacherId)||!ee?[]:_e.filter(D=>D.teacherId===Le.teacherId&&D.day===ee&&D.id!==(B==null?void 0:B.scheduleItemId)).sort((D,G)=>D.period-G.period),[_e,Le,ee,B]),nt=k.useMemo(()=>{if(!ee||L.length<2)return[];const D=L.toLowerCase(),G=e.filter(Ee=>Ee.name.toLowerCase().includes(D)),q=r.filter(Ee=>Ee.name.toLowerCase().includes(D)),V=[];return G.forEach(Ee=>{_e.filter(oe=>oe.teacherId===Ee.id&&oe.day===ee).forEach(oe=>{const S=r.find(X=>X.id===oe.classId),H=t.find(X=>X.id===oe.subjectId);V.push({...oe,entityName:Ee.name,subInfo:S==null?void 0:S.name,subjectName:H==null?void 0:H.name})})}),q.forEach(Ee=>{_e.filter(oe=>oe.classId===Ee.id&&oe.day===ee).forEach(oe=>{if(V.find(X=>X.id===oe.id))return;const S=e.find(X=>X.id===oe.teacherId),H=t.find(X=>X.id===oe.subjectId);V.push({...oe,entityName:Ee.name,subInfo:S==null?void 0:S.name,subjectName:H==null?void 0:H.name})})}),V.sort((Ee,se)=>Ee.period-se.period)},[L,ee,e,r,_e,t]),mt=(D,G)=>{let q=!1;if(G){if(!window.confirm("     .     ?"))return;q=!0}ne(D,q)},qt=(D,G)=>{G.stopPropagation(),Ue.includes(D)?De(Ue.filter(q=>q!==D)):De([...Ue,D])};return l.jsxs("div",{className:"h-full flex flex-col gap-6",children:[l.jsx("div",{className:"flex flex-col gap-4",children:l.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]})]}),l.jsxs("div",{className:"flex md:hidden bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-full",children:[l.jsxs("button",{onClick:()=>$e("lessons"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${Bt==="lessons"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:["  ",he.length>0&&`(${he.length})`]}),l.jsx("button",{onClick:()=>$e("teachers"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${Bt==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]}),l.jsx("div",{className:"hidden md:block",children:l.jsxs("button",{onClick:()=>Q(!_),className:`h-[50px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all mt-6 ${_?"bg-indigo-600 text-white border-indigo-600":"bg-slate-50 dark:bg-slate-700 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-600"}`,children:[l.jsx($,{name:"History",size:18})," ",_?" ":""]})})]})})}),l.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[l.jsxs("div",{className:`w-full md:w-80 flex-col gap-4 ${gt&&Bt!=="teachers"?"hidden":"flex"}`,children:[l.jsx("div",{className:"md:hidden",children:l.jsxs("button",{onClick:()=>Q(!_),className:`w-full py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all ${_?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-dark-800 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-700"}`,children:[l.jsx($,{name:"History",size:18})," ",_?" ":"  "]})}),_?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:N,onChange:D=>P(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(D=>{var G;return D.date.includes(N)||((G=e.find(q=>q.id===D.replacementTeacherId))==null?void 0:G.name.toLowerCase().includes(N.toLowerCase()))}).map(D=>{const G=e.find(V=>V.id===D.replacementTeacherId),q=n.find(V=>V.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[(G==null?void 0:G.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),q&&l.jsxs("div",{className:"text-indigo-500",children:[". ",q.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>et("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${je==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>et(me.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${je===me.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>et(me.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${je===me.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:b,onChange:D=>Ve(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[ce.map(D=>{const G=D.unavailableDates.includes(h),q=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${G?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${G?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>G?ue(D.id):de(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${G?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:G?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(V=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:V===me.First?"1":"2"},V))}),G&&l.jsxs("div",{className:"flex items-center gap-1",children:[q&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:q}),l.jsx("button",{onClick:()=>de(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx($,{name:"Edit2",size:14})})]})]})]},D.id)}),ce.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${gt&&Bt!=="lessons"?"hidden":"flex"}`,children:[l.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["   (",he.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 w-full xl:w-auto",children:[l.jsxs("button",{onClick:Ge,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-xs font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx($,{name:"Calendar",size:16})," iCal"]}),he.length>0&&l.jsxs("button",{onClick:we,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-xs font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx($,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Pe,className:"px-3 py-2 bg-blue-500 text-white rounded-xl text-xs font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{Y(""),F(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-xs font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx($,{name:"Search",size:16})," "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:he.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx($,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):he.map(D=>{var Ye;const G=o.filter(ze=>ze.scheduleItemId===D.id&&ze.date===h),q=G.length>0,V=q?G[0]:null,Ee=V&&V.replacementTeacherId!=="cancelled"&&V.replacementTeacherId!=="conducted"?e.find(ze=>ze.id===V.replacementTeacherId):null,se=e.find(ze=>ze.id===D.teacherId),oe=t.find(ze=>ze.id===D.subjectId),S=r.find(ze=>ze.id===D.classId),H=n.find(ze=>ze.id===D.roomId),X=H?H.name:D.roomId,Z=V==null?void 0:V.replacementRoomId,J=Z?((Ye=n.find(ze=>ze.id===Z))==null?void 0:Ye.name)||Z:void 0,W=V!=null&&V.replacementClassId?r.find(ze=>ze.id===V.replacementClassId):null,Fe=V!=null&&V.replacementSubjectId?t.find(ze=>ze.id===V.replacementSubjectId):null;let tt=null;if((V==null?void 0:V.replacementTeacherId)==="conducted")tt=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ye(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx($,{name:"X",size:16})})]});else if((V==null?void 0:V.replacementTeacherId)==="cancelled")tt=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ye(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx($,{name:"X",size:16})})]});else if(q){const ze=(V==null?void 0:V.replacementTeacherId)===(V==null?void 0:V.originalTeacherId)&&Z&&!W,Ut=W&&Fe&&!(V!=null&&V.isMerger),wt=G.map(_t=>{var vt;return(vt=e.find(Jr=>Jr.id===_t.replacementTeacherId))==null?void 0:vt.name}).filter(Boolean).join(", ");tt=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl flex-1 justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:ze?" ":Ut?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm truncate",title:wt,children:ze?"  ":Ut?` ${W==null?void 0:W.name}`:wt}),(V==null?void 0:V.isMerger)&&l.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",W?`(  ${W.name})`:""]}),(V==null?void 0:V.lessonAbsenceReason)&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",V.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1 shrink-0",children:[l.jsx("button",{onClick:()=>{(Ee||se)&&ut(Ee||se,D,S,oe,J||X||void 0,h)},className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx($,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>ye(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx($,{name:"UserX",size:18})})]})]})}else tt=l.jsxs("button",{onClick:()=>{E({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),y(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx($,{name:"ArrowRight",size:16})]});const Xe=!ve.find(ze=>ze.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:S==null?void 0:S.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===me.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:oe==null?void 0:oe.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex flex-wrap items-center gap-2",children:[l.jsx("span",{className:Xe?"font-semibold":"line-through decoration-red-400 decoration-2",children:se==null?void 0:se.name}),X&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[X," ",J&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",J]})]}),(V==null?void 0:V.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",V.lessonAbsenceReason,")"]}),W&&Fe&&!(V!=null&&V.isMerger)&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",W.name]})]})]})]}),l.jsx("div",{className:"w-full xl:w-auto mt-2 xl:mt-0",children:tt})]},D.id)})})]})]}),l.jsxs(FA,{isOpen:m,onClose:()=>y(!1),title:" ",children:[Le&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[Le.className,"  ",Le.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:Le.subjectName}),l.jsx("span",{className:Le.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:Le.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:O,onChange:D=>ae(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),n.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),Le&&!Le.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:ie,onChange:D=>Re(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>ne("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>ne("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>It(!Oe),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[l.jsx($,{name:"Users",size:16})," :    (  )"]}),Oe&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),He.length===0?l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):He.map(D=>l.jsxs("button",{onClick:()=>fe(D.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.classEntity.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D.subjects.join(", ")," ",l.jsx("span",{className:"text-slate-400",children:"|"})," ",D.teachers.join(", ")]})]},D.classEntity.id))]})]}),(Le==null?void 0:Le.teacherId)&&!Le.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>ne(Le.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),dt.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>Ft(!Ke),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx($,{name:"RotateCw",size:16}),"     "]}),Ke&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:Qt,onChange:D=>Ze(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),dt.map(D=>{const G=r.find(V=>V.id===D.classId),q=t.find(V=>V.id===D.subjectId);return l.jsxs("button",{onClick:()=>Ce(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",G==null?void 0:G.name," - ",q==null?void 0:q.name]},D.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:We,onChange:D=>Ae(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[xe.map(({teacher:D,isAbsent:G,isBusy:q,isSpecialist:V,subsCount:Ee})=>{const se=Ue.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${G?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":se?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":q?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${V?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:V?l.jsx($,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[V&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),q&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),G&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),se&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${Ee>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Ee]})]})]})]}),!G&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:oe=>qt(D.id,oe),className:`px-3 py-1 text-xs font-bold rounded border ${se?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:se?"":""}),!se&&!q&&l.jsx("button",{onClick:()=>mt(D.id,q),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!se&&q&&l.jsx("button",{onClick:()=>mt(D.id,q),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),xe.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(FA,{isOpen:I,onClose:()=>F(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:L,onChange:D=>Y(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[nt.map(D=>{var G;return l.jsxs("button",{onClick:()=>{F(!1),E({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),y(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((G=n.find(q=>q.id===D.roomId))==null?void 0:G.name)||D.roomId]})]})]},D.id)}),L.length>1&&nt.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(FA,{isOpen:x,onClose:()=>w(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:Me,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},MO=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:A}=WA(),{schedule1:s,schedule2:i}=za(),[a,o]=k.useState("teachers"),[c,d]=k.useState(new Date().toISOString().split("T")[0]),[h,f]=k.useState(me.First),[m,y]=k.useState(1),[B,E]=k.useState(me.First),[x,w]=k.useState(1),[I,F]=k.useState(""),[R,U]=k.useState(""),v=k.useMemo(()=>{const b=new Date(c).getMonth();return b>=0&&b<=4?i:s},[c,s,i]);k.useEffect(()=>{n&&(F(n.telegramToken||""),U(n.feedbackChatId||""))},[n]),k.useEffect(()=>{y(h===me.First?1:0)},[h]),k.useEffect(()=>{w(B===me.First?1:0)},[B]);const C=k.useMemo(()=>{const b=new Date(c).getDay();return b===0||b===6?null:Vt[b-1]},[c]),_=Bn[h],Q=k.useMemo(()=>C?e.filter(b=>b.shifts&&!b.shifts.includes(h)||b.unavailableDates.includes(c)?!1:!v.some(je=>je.teacherId===b.id&&je.day===C&&je.period>m&&je.shift===h)).sort((b,Ve)=>b.name.localeCompare(Ve.name)):[],[e,c,C,m,h,v]),N=k.useMemo(()=>{if(!C)return[];const b=new Set;return v.forEach(je=>{je.day===C&&je.period===x&&je.shift===B&&je.roomId&&b.add(je.roomId)}),r.filter(je=>!b.has(je.id)).map(je=>je.name)},[v,r,C,x,B]),P=async()=>{await A({settings:{...n,telegramToken:I,feedbackChatId:R}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx($,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),a!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:b=>d(b.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),a==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(me.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===me.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(me.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===me.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:_.map(b=>l.jsx("button",{onClick:()=>y(b),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${m===b?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:b},b))})]})]}),a==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>E(me.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===me.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>E(me.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===me.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:Bn[B].map(b=>l.jsx("button",{onClick:()=>w(b),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${x===b?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:b},b))})]})]}),a==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:I,onChange:b=>F(b.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:R,onChange:b=>U(b.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:P,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Save",size:20}),"  "]})]})]}),a==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[Q.map(b=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx($,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:b.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:b.subjectIds.slice(0,2).map(Ve=>{const je=t.find(et=>et.id===Ve);return je?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:je.name},Ve):null})})]})]},b.id)),Q.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",m,"   ",h]})]}),a==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[N.map(b=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx($,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:b}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},b)),N.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx($,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n0=function(t,e){return n0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(r[A]=n[A])},n0(t,e)};function Jn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var A0=function(){return A0=Object.assign||function(e){for(var r,n=1,A=arguments.length;n<A;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},A0.apply(this,arguments)};function Xr(t,e,r,n){function A(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function o(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):A(d.value).then(a,o)}c((n=n.apply(t,[])).next())})}function Vr(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,A,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return o([c,d])}}function o(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,A&&(s=c[0]&2?A.return:c[0]?A.throw||((s=A.return)&&s.call(A),0):A.next)&&!(s=s.call(A,c[1])).done)return s;switch(A=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,A=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],A=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ed(t,e,r){if(arguments.length===2)for(var n=0,A=e.length,s;n<A;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var jA=function(){function t(e,r,n,A){this.left=e,this.top=r,this.width=n,this.height=A}return t.prototype.add=function(e,r,n,A){return new t(this.left+e,this.top+r,this.width+n,this.height+A)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(A){return A.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),tg=function(t,e){return jA.fromClientRect(t,e.getBoundingClientRect())},OO=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),A=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new jA(0,0,n,A)},rg=function(t){for(var e=[],r=0,n=t.length;r<n;){var A=t.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),r--)}else e.push(A)}return e},ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],A=-1,s="";++A<r;){var i=t[A];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(A+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},UC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var td=0;td<UC.length;td++)HO[UC.charCodeAt(td)]=td;var SC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ql=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rd=0;rd<SC.length;rd++)Ql[SC.charCodeAt(rd)]=rd;var VO=function(t){var e=t.length*.75,r=t.length,n,A=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)s=Ql[t.charCodeAt(n)],i=Ql[t.charCodeAt(n+1)],a=Ql[t.charCodeAt(n+2)],o=Ql[t.charCodeAt(n+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|a>>2,d[A++]=(a&3)<<6|o&63;return c},KO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},GO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Ni=5,DB=11,ap=2,zO=DB-Ni,MF=65536>>Ni,$O=1<<Ni,lp=$O-1,WO=1024>>Ni,qO=MF+WO,JO=qO,XO=32,YO=JO+XO,ZO=65536>>DB,eH=1<<zO,tH=eH-1,kC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},rH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},nH=function(t,e){var r=VO(t),n=Array.isArray(r)?GO(r):new Uint32Array(r),A=Array.isArray(r)?KO(r):new Uint16Array(r),s=24,i=kC(A,s/2,n[4]/2),a=n[5]===2?kC(A,(s+n[4])/2):rH(n,Math.ceil((s+n[4])/4));return new AH(n[0],n[1],n[2],n[3],i,a)},AH=function(){function t(e,r,n,A,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Ni],r=(r<<ap)+(e&lp),this.data[r];if(e<=65535)return r=this.index[MF+(e-55296>>Ni)],r=(r<<ap)+(e&lp),this.data[r];if(e<this.highStart)return r=YO-ZO+(e>>DB),r=this.index[r],r+=e>>Ni&tH,r=this.index[r],r=(r<<ap)+(e&lp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),RC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nd=0;nd<RC.length;nd++)sH[RC.charCodeAt(nd)]=nd;var iH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",NC=50,oH=1,OF=2,HF=3,aH=4,lH=5,DC=7,VF=8,PC=9,xs=10,s0=11,LC=12,i0=13,cH=14,Ul=15,o0=16,Ad=17,pl=18,uH=19,jC=20,a0=21,ml=22,cp=23,mo=24,mn=25,Sl=26,kl=27,wo=28,dH=29,Ei=30,hH=31,sd=32,id=33,l0=34,c0=35,u0=36,Lc=37,d0=38,Jd=39,Xd=40,up=41,KF=42,fH=43,gH=[9001,65288],GF="!",ot="",od="",h0=nH(iH),pA=[Ei,u0],f0=[oH,OF,HF,lH],zF=[xs,VF],MC=[kl,Sl],pH=f0.concat(zF),OC=[d0,Jd,Xd,l0,c0],mH=[Ul,i0],wH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],A=[];return t.forEach(function(s,i){var a=h0.get(s);if(a>NC?(A.push(!0),a-=NC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(o0);if(a===aH||a===s0){if(i===0)return n.push(i),r.push(Ei);var o=r[i-1];return pH.indexOf(o)===-1?(n.push(n[i-1]),r.push(o)):(n.push(i),r.push(Ei))}if(n.push(i),a===hH)return r.push(e==="strict"?a0:Lc);if(a===KF||a===dH)return r.push(Ei);if(a===fH)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Lc):r.push(Ei);r.push(a)}),[n,r,A]},dp=function(t,e,r,n){var A=n[r];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==xs)break}if(A===xs)for(var s=r;s>0;){s--;var a=n[s];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var o=r;o<=n.length;){o++;var i=n[o];if(i===e)return!0;if(i!==xs)break}if(a!==xs)break}return!1},HC=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===xs)r--;else return n}return 0},BH=function(t,e,r,n,A){if(r[n]===0)return ot;var s=n-1;if(Array.isArray(A)&&A[s]===!0)return ot;var i=s-1,a=s+1,o=e[s],c=i>=0?e[i]:0,d=e[a];if(o===OF&&d===HF)return ot;if(f0.indexOf(o)!==-1)return GF;if(f0.indexOf(d)!==-1||zF.indexOf(d)!==-1)return ot;if(HC(s,e)===VF)return od;if(h0.get(t[s])===s0||(o===sd||o===id)&&h0.get(t[a])===s0||o===DC||d===DC||o===PC||[xs,i0,Ul].indexOf(o)===-1&&d===PC||[Ad,pl,uH,mo,wo].indexOf(d)!==-1||HC(s,e)===ml||dp(cp,ml,s,e)||dp([Ad,pl],a0,s,e)||dp(LC,LC,s,e))return ot;if(o===xs)return od;if(o===cp||d===cp)return ot;if(d===o0||o===o0)return od;if([i0,Ul,a0].indexOf(d)!==-1||o===cH||c===u0&&mH.indexOf(o)!==-1||o===wo&&d===u0||d===jC||pA.indexOf(d)!==-1&&o===mn||pA.indexOf(o)!==-1&&d===mn||o===kl&&[Lc,sd,id].indexOf(d)!==-1||[Lc,sd,id].indexOf(o)!==-1&&d===Sl||pA.indexOf(o)!==-1&&MC.indexOf(d)!==-1||MC.indexOf(o)!==-1&&pA.indexOf(d)!==-1||[kl,Sl].indexOf(o)!==-1&&(d===mn||[ml,Ul].indexOf(d)!==-1&&e[a+1]===mn)||[ml,Ul].indexOf(o)!==-1&&d===mn||o===mn&&[mn,wo,mo].indexOf(d)!==-1)return ot;if([mn,wo,mo,Ad,pl].indexOf(d)!==-1)for(var h=s;h>=0;){var f=e[h];if(f===mn)return ot;if([wo,mo].indexOf(f)!==-1)h--;else break}if([kl,Sl].indexOf(d)!==-1)for(var h=[Ad,pl].indexOf(o)!==-1?i:s;h>=0;){var f=e[h];if(f===mn)return ot;if([wo,mo].indexOf(f)!==-1)h--;else break}if(d0===o&&[d0,Jd,l0,c0].indexOf(d)!==-1||[Jd,l0].indexOf(o)!==-1&&[Jd,Xd].indexOf(d)!==-1||[Xd,c0].indexOf(o)!==-1&&d===Xd||OC.indexOf(o)!==-1&&[jC,Sl].indexOf(d)!==-1||OC.indexOf(d)!==-1&&o===kl||pA.indexOf(o)!==-1&&pA.indexOf(d)!==-1||o===mo&&pA.indexOf(d)!==-1||pA.concat(mn).indexOf(o)!==-1&&d===ml&&gH.indexOf(t[a])===-1||pA.concat(mn).indexOf(d)!==-1&&o===pl)return ot;if(o===up&&d===up){for(var m=r[s],y=1;m>0&&(m--,e[m]===up);)y++;if(y%2!==0)return ot}return o===sd&&d===id?ot:od},yH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=wH(t,e.lineBreak),n=r[0],A=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(a){return[mn,Ei,KF].indexOf(a)!==-1?Lc:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,o){return a&&t[o]>=19968&&t[o]<=40959}):void 0;return[n,A,i]},vH=function(){function t(e,r,n,A){this.codePoints=e,this.required=r===GF,this.start=n,this.end=A}return t.prototype.slice=function(){return ar.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),xH=function(t,e){var r=rg(t),n=yH(r,e),A=n[0],s=n[1],i=n[2],a=r.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var d=ot;c<a&&(d=BH(r,s,A,++c,i))===ot;);if(d!==ot||c===a){var h=new vH(r,d,o,c);return o=c,{value:h,done:!1}}return{done:!0,value:null}}}},CH=1,IH=2,fu=4,VC=8,Wh=10,KC=47,ec=92,_H=9,EH=32,ad=34,wl=61,bH=35,TH=36,FH=37,ld=39,cd=40,Bl=41,QH=95,An=45,UH=33,SH=60,kH=62,RH=64,NH=91,DH=93,PH=61,LH=123,ud=63,jH=125,GC=124,MH=126,OH=128,zC=65533,hp=42,Qi=43,HH=44,VH=58,KH=59,jc=46,GH=0,zH=8,$H=11,WH=14,qH=31,JH=127,Zn=-1,$F=48,WF=97,qF=101,XH=102,YH=117,ZH=122,JF=65,XF=69,YF=70,eV=85,tV=90,Gr=function(t){return t>=$F&&t<=57},rV=function(t){return t>=55296&&t<=57343},Bo=function(t){return Gr(t)||t>=JF&&t<=YF||t>=WF&&t<=XH},nV=function(t){return t>=WF&&t<=ZH},AV=function(t){return t>=JF&&t<=tV},sV=function(t){return nV(t)||AV(t)},iV=function(t){return t>=OH},dd=function(t){return t===Wh||t===_H||t===EH},qh=function(t){return sV(t)||iV(t)||t===QH},$C=function(t){return qh(t)||Gr(t)||t===An},oV=function(t){return t>=GH&&t<=zH||t===$H||t>=WH&&t<=qH||t===JH},os=function(t,e){return t!==ec?!1:e!==Wh},hd=function(t,e,r){return t===An?qh(e)||os(e,r):qh(t)?!0:!!(t===ec&&os(t,e))},fp=function(t,e,r){return t===Qi||t===An?Gr(e)?!0:e===jc&&Gr(r):Gr(t===jc?e:t)},aV=function(t){var e=0,r=1;(t[e]===Qi||t[e]===An)&&(t[e]===An&&(r=-1),e++);for(var n=[];Gr(t[e]);)n.push(t[e++]);var A=n.length?parseInt(ar.apply(void 0,n),10):0;t[e]===jc&&e++;for(var s=[];Gr(t[e]);)s.push(t[e++]);var i=s.length,a=i?parseInt(ar.apply(void 0,s),10):0;(t[e]===XF||t[e]===qF)&&e++;var o=1;(t[e]===Qi||t[e]===An)&&(t[e]===An&&(o=-1),e++);for(var c=[];Gr(t[e]);)c.push(t[e++]);var d=c.length?parseInt(ar.apply(void 0,c),10):0;return r*(A+a*Math.pow(10,-i))*Math.pow(10,o*d)},lV={type:2},cV={type:3},uV={type:4},dV={type:13},hV={type:8},fV={type:21},gV={type:9},pV={type:10},mV={type:11},wV={type:12},BV={type:14},fd={type:23},yV={type:1},vV={type:25},xV={type:24},CV={type:26},IV={type:27},_V={type:28},EV={type:29},bV={type:31},g0={type:32},ZF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(rg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==g0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ad:return this.consumeStringToken(ad);case bH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),A=this.peekCodePoint(2);if($C(r)||os(n,A)){var s=hd(r,n,A)?IH:CH,i=this.consumeName();return{type:5,value:i,flags:s}}break;case TH:if(this.peekCodePoint(0)===wl)return this.consumeCodePoint(),dV;break;case ld:return this.consumeStringToken(ld);case cd:return lV;case Bl:return cV;case hp:if(this.peekCodePoint(0)===wl)return this.consumeCodePoint(),BV;break;case Qi:if(fp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case HH:return uV;case An:var a=e,o=this.peekCodePoint(0),c=this.peekCodePoint(1);if(fp(a,o,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(hd(a,o,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===An&&c===kH)return this.consumeCodePoint(),this.consumeCodePoint(),xV;break;case jc:if(fp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case KC:if(this.peekCodePoint(0)===hp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===hp&&(d=this.consumeCodePoint(),d===KC))return this.consumeToken();if(d===Zn)return this.consumeToken()}break;case VH:return CV;case KH:return IV;case SH:if(this.peekCodePoint(0)===UH&&this.peekCodePoint(1)===An&&this.peekCodePoint(2)===An)return this.consumeCodePoint(),this.consumeCodePoint(),vV;break;case RH:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(hd(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case NH:return _V;case ec:if(os(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case DH:return EV;case PH:if(this.peekCodePoint(0)===wl)return this.consumeCodePoint(),hV;break;case LH:return mV;case jH:return wV;case YH:case eV:var y=this.peekCodePoint(0),B=this.peekCodePoint(1);return y===Qi&&(Bo(B)||B===ud)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case GC:if(this.peekCodePoint(0)===wl)return this.consumeCodePoint(),gV;if(this.peekCodePoint(0)===GC)return this.consumeCodePoint(),fV;break;case MH:if(this.peekCodePoint(0)===wl)return this.consumeCodePoint(),pV;break;case Zn:return g0}return dd(e)?(this.consumeWhiteSpace(),bV):Gr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):qh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ar(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Bo(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===ud&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var A=parseInt(ar.apply(void 0,e.map(function(o){return o===ud?$F:o})),16),s=parseInt(ar.apply(void 0,e.map(function(o){return o===ud?YF:o})),16);return{type:30,start:A,end:s}}var i=parseInt(ar.apply(void 0,e),16);if(this.peekCodePoint(0)===An&&Bo(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var a=[];Bo(r)&&a.length<6;)a.push(r),r=this.consumeCodePoint();var s=parseInt(ar.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===cd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===cd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zn)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===ld||r===ad){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zn||this.peekCodePoint(0)===Bl)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),fd)}for(;;){var A=this.consumeCodePoint();if(A===Zn||A===Bl)return{type:22,value:ar.apply(void 0,e)};if(dd(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Zn||this.peekCodePoint(0)===Bl?(this.consumeCodePoint(),{type:22,value:ar.apply(void 0,e)}):(this.consumeBadUrlRemnants(),fd);if(A===ad||A===ld||A===cd||oV(A))return this.consumeBadUrlRemnants(),fd;if(A===ec)if(os(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),fd;else e.push(A)}},t.prototype.consumeWhiteSpace=function(){for(;dd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Bl||e===Zn)return;os(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var A=Math.min(r,e);n+=ar.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var A=this._value[n];if(A===Zn||A===void 0||A===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(A===Wh)return this._value.splice(0,n),yV;if(A===ec){var s=this._value[n+1];s!==Zn&&s!==void 0&&(s===Wh?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):os(A,s)&&(r+=this.consumeStringSlice(n),r+=ar(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=fu,n=this.peekCodePoint(0);for((n===Qi||n===An)&&e.push(this.consumeCodePoint());Gr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(n===jc&&Gr(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=VC;Gr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),A=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===XF||n===qF)&&((A===Qi||A===An)&&Gr(s)||Gr(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=VC;Gr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[aV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],A=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(hd(A,s,i)){var a=this.consumeName();return{type:15,number:r,flags:n,unit:a}}return A===FH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Bo(e)){for(var r=ar(e);Bo(this.peekCodePoint(0))&&r.length<6;)r+=ar(this.consumeCodePoint());dd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||rV(n)||n>1114111?zC:n}return e===Zn?zC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if($C(r))e+=ar(r);else if(os(r,this.peekCodePoint(0)))e+=ar(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),eQ=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new ZF;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||FV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?g0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),gu=function(t){return t.type===15},$a=function(t){return t.type===17},Et=function(t){return t.type===20},TV=function(t){return t.type===0},p0=function(t,e){return Et(t)&&t.value===e},tQ=function(t){return t.type!==31},Ea=function(t){return t.type!==31&&t.type!==4},dA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},FV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ys=function(t){return t.type===17||t.type===15},hr=function(t){return t.type===16||Ys(t)},rQ=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Rr={type:17,number:0,flags:fu},PB={type:16,number:50,flags:fu},Cs={type:16,number:100,flags:fu},Rl=function(t,e,r){var n=t[0],A=t[1];return[Rt(n,e),Rt(typeof A<"u"?A:n,r)]},Rt=function(t,e){if(t.type===16)return t.number/100*e;if(gu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},nQ="deg",AQ="grad",sQ="rad",iQ="turn",ng={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case nQ:return Math.PI*e.number/180;case AQ:return Math.PI/200*e.number;case sQ:return e.number;case iQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},oQ=function(t){return t.type===15&&(t.unit===nQ||t.unit===AQ||t.unit===sQ||t.unit===iQ)},aQ=function(t){var e=t.filter(Et).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Rr,Rr];case"to top":case"bottom":return Rn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Rr,Cs];case"to right":case"left":return Rn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Cs,Cs];case"to bottom":case"top":return Rn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Cs,Rr];case"to left":case"right":return Rn(270)}return 0},Rn=function(t){return Math.PI*t/180},Ls={name:"color",parse:function(t,e){if(e.type===18){var r=QV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3);return Is(parseInt(n+n,16),parseInt(A+A,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return Is(parseInt(n+n,16),parseInt(A+A,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6);return Is(parseInt(n,16),parseInt(A,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return Is(parseInt(n,16),parseInt(A,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var a=QA[e.value.toUpperCase()];if(typeof a<"u")return a}return QA.TRANSPARENT}},js=function(t){return(255&t)===0},vr=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,A=255&t>>24;return e<255?"rgba("+A+","+n+","+r+","+e/255+")":"rgb("+A+","+n+","+r+")"},Is=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},WC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},qC=function(t,e){var r=e.filter(Ea);if(r.length===3){var n=r.map(WC),A=n[0],s=n[1],i=n[2];return Is(A,s,i,1)}if(r.length===4){var a=r.map(WC),A=a[0],s=a[1],i=a[2],o=a[3];return Is(A,s,i,o)}return 0};function gp(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var JC=function(t,e){var r=e.filter(Ea),n=r[0],A=r[1],s=r[2],i=r[3],a=(n.type===17?Rn(n.number):ng.parse(t,n))/(Math.PI*2),o=hr(A)?A.number/100:0,c=hr(s)?s.number/100:0,d=typeof i<"u"&&hr(i)?Rt(i,1):1;if(o===0)return Is(c*255,c*255,c*255,1);var h=c<=.5?c*(o+1):c+o-c*o,f=c*2-h,m=gp(f,h,a+1/3),y=gp(f,h,a),B=gp(f,h,a-1/3);return Is(m*255,y*255,B*255,d)},QV={hsl:JC,hsla:JC,rgb:qC,rgba:qC},tc=function(t,e){return Ls.parse(t,eQ.create(e).parseComponentValue())},QA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},UV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Et(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},SV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ag=function(t,e){var r=Ls.parse(t,e[0]),n=e[1];return n&&hr(n)?{color:r,stop:n}:{color:r,stop:null}},XC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Rr),n.stop===null&&(n.stop=Cs);for(var A=[],s=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var o=Rt(a,e);o>s?A.push(o):A.push(s),s=o}else A.push(null)}for(var c=null,i=0;i<A.length;i++){var d=A[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=A[c-1],m=(d-f)/(h+1),y=1;y<=h;y++)A[c+y-1]=m*y;c=null}}return t.map(function(B,E){var x=B.color;return{color:x,stop:Math.max(Math.min(1,A[E]/e),0)}})},kV=function(t,e,r){var n=e/2,A=r/2,s=Rt(t[0],e)-n,i=A-Rt(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},RV=function(t,e,r){var n=typeof t=="number"?t:kV(t,e,r),A=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,a=A/2,o=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[A,s-c,s+c,i-o,i+o]},On=function(t,e){return Math.sqrt(t*t+e*e)},YC=function(t,e,r,n,A){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,a){var o=a[0],c=a[1],d=On(r-o,n-c);return(A?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:a,optimumDistance:d}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},NV=function(t,e,r,n,A){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-A)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-A)));break;case 2:if(t.shape===0)s=i=Math.min(On(e,r),On(e,r-A),On(e-n,r),On(e-n,r-A));else if(t.shape===1){var a=Math.min(Math.abs(r),Math.abs(r-A))/Math.min(Math.abs(e),Math.abs(e-n)),o=YC(n,A,e,r,!0),c=o[0],d=o[1];s=On(c-e,(d-r)/a),i=a*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-A)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-A)));break;case 3:if(t.shape===0)s=i=Math.max(On(e,r),On(e,r-A),On(e-n,r),On(e-n,r-A));else if(t.shape===1){var a=Math.max(Math.abs(r),Math.abs(r-A))/Math.max(Math.abs(e),Math.abs(e-n)),h=YC(n,A,e,r,!1),c=h[0],d=h[1];s=On(c-e,(d-r)/a),i=a*s}break}return Array.isArray(t.size)&&(s=Rt(t.size[0],n),i=t.size.length===2?Rt(t.size[1],A):s),[s,i]},DV=function(t,e){var r=Rn(180),n=[];return dA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&i.value==="to"){r=aQ(A);return}else if(oQ(i)){r=ng.parse(t,i);return}}var a=Ag(t,A);n.push(a)}),{angle:r,stops:n,type:1}},gd=function(t,e){var r=Rn(180),n=[];return dA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=aQ(A);return}else if(oQ(i)){r=(ng.parse(t,i)+Rn(270))%Rn(360);return}}var a=Ag(t,A);n.push(a)}),{angle:r,stops:n,type:1}},PV=function(t,e){var r=Rn(180),n=[],A=1,s=0,i=3,a=[];return dA(e).forEach(function(o,c){var d=o[0];if(c===0){if(Et(d)&&d.value==="linear"){A=1;return}else if(Et(d)&&d.value==="radial"){A=2;return}}if(d.type===18){if(d.name==="from"){var h=Ls.parse(t,d.values[0]);n.push({stop:Rr,color:h})}else if(d.name==="to"){var h=Ls.parse(t,d.values[0]);n.push({stop:Cs,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Ea);if(f.length===2){var h=Ls.parse(t,f[1]),m=f[0];$a(m)&&n.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),A===1?{angle:(r+Rn(180))%Rn(360),stops:n,type:A}:{size:i,shape:s,stops:n,position:a,type:A}},lQ="closest-side",cQ="farthest-side",uQ="closest-corner",dQ="farthest-corner",hQ="circle",fQ="ellipse",gQ="cover",pQ="contain",LV=function(t,e){var r=0,n=3,A=[],s=[];return dA(e).forEach(function(i,a){var o=!0;if(a===0){var c=!1;o=i.reduce(function(h,f){if(c)if(Et(f))switch(f.value){case"center":return s.push(PB),h;case"top":case"left":return s.push(Rr),h;case"right":case"bottom":return s.push(Cs),h}else(hr(f)||Ys(f))&&s.push(f);else if(Et(f))switch(f.value){case hQ:return r=0,!1;case fQ:return r=1,!1;case"at":return c=!0,!1;case lQ:return n=0,!1;case gQ:case cQ:return n=1,!1;case pQ:case uQ:return n=2,!1;case dQ:return n=3,!1}else if(Ys(f)||hr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},o)}if(o){var d=Ag(t,i);A.push(d)}}),{size:n,shape:r,stops:A,position:s,type:2}},pd=function(t,e){var r=0,n=3,A=[],s=[];return dA(e).forEach(function(i,a){var o=!0;if(a===0?o=i.reduce(function(d,h){if(Et(h))switch(h.value){case"center":return s.push(PB),!1;case"top":case"left":return s.push(Rr),!1;case"right":case"bottom":return s.push(Cs),!1}else if(hr(h)||Ys(h))return s.push(h),!1;return d},o):a===1&&(o=i.reduce(function(d,h){if(Et(h))switch(h.value){case hQ:return r=0,!1;case fQ:return r=1,!1;case pQ:case lQ:return n=0,!1;case cQ:return n=1,!1;case uQ:return n=2,!1;case gQ:case dQ:return n=3,!1}else if(Ys(h)||hr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},o)),o){var c=Ag(t,i);A.push(c)}}),{size:n,shape:r,stops:A,position:s,type:2}},jV=function(t){return t.type===1},MV=function(t){return t.type===2},LB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=mQ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function OV(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!mQ[t.name])}var mQ={"linear-gradient":DV,"-moz-linear-gradient":gd,"-ms-linear-gradient":gd,"-o-linear-gradient":gd,"-webkit-linear-gradient":gd,"radial-gradient":LV,"-moz-radial-gradient":pd,"-ms-radial-gradient":pd,"-o-radial-gradient":pd,"-webkit-radial-gradient":pd,"-webkit-gradient":PV},HV={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Ea(n)&&OV(n)}).map(function(n){return LB.parse(t,n)})}},VV={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Et(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},KV={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return dA(e).map(function(r){return r.filter(hr)}).map(rQ)}},GV={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return dA(e).map(function(r){return r.filter(Et).map(function(n){return n.value}).join(" ")}).map(zV)}},zV=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},ea;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(ea||(ea={}));var $V={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return dA(e).map(function(r){return r.filter(WV)})}},WV=function(t){return Et(t)||hr(t)},sg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},qV=sg("top"),JV=sg("right"),XV=sg("bottom"),YV=sg("left"),ig=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return rQ(r.filter(hr))}}},ZV=ig("top-left"),e3=ig("top-right"),t3=ig("bottom-right"),r3=ig("bottom-left"),og=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},n3=og("top"),A3=og("right"),s3=og("bottom"),i3=og("left"),ag=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return gu(r)?r.number:0}}},o3=ag("top"),a3=ag("right"),l3=ag("bottom"),c3=ag("left"),u3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},d3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},h3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Et).reduce(function(r,n){return r|f3(n.value)},0)}},f3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},g3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},p3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Jh;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Jh||(Jh={}));var m3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Jh.STRICT;case"normal":default:return Jh.NORMAL}}},w3={name:"line-height",initialValue:"normal",prefix:!1,type:4},ZC=function(t,e){return Et(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:hr(t)?Rt(t,e):e},B3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:LB.parse(t,e)}},y3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},m0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},lg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},v3=lg("top"),x3=lg("right"),C3=lg("bottom"),I3=lg("left"),_3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Et).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},E3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},cg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},b3=cg("top"),T3=cg("right"),F3=cg("bottom"),Q3=cg("left"),U3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},S3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},k3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&p0(e[0],"none")?[]:dA(e).map(function(r){for(var n={color:QA.TRANSPARENT,offsetX:Rr,offsetY:Rr,blur:Rr},A=0,s=0;s<r.length;s++){var i=r[s];Ys(i)?(A===0?n.offsetX=i:A===1?n.offsetY=i:n.blur=i,A++):n.color=Ls.parse(t,i)}return n})}},R3={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},N3={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=L3[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},D3=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},P3=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=e[0],n=e[1];e[2],e[3];var A=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[r,n,A,s,i,a]:null},L3={matrix:D3,matrix3d:P3},eI={type:16,number:50,flags:fu},j3=[eI,eI],M3={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(hr);return r.length!==2?j3:[r[0],r[1]]}},O3={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},rc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(rc||(rc={}));var H3={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return rc.BREAK_ALL;case"keep-all":return rc.KEEP_ALL;case"normal":default:return rc.NORMAL}}},V3={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if($a(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},wQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},K3={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return $a(e)?e.number:1}},G3={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},z3={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Et).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},$3={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(A){switch(A.type){case 20:case 0:r.push(A.value);break;case 17:r.push(A.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},W3={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},q3={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if($a(e))return e.number;if(Et(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},J3={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Et).map(function(r){return r.value})}},X3={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pr=function(t,e){return(t&e)!==0},Y3={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Z3={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],A=e.filter(tQ),s=0;s<A.length;s++){var i=A[s],a=A[s+1];if(i.type===20){var o=a&&$a(a)?a.number:1;n.push({counter:i.value,increment:o})}}return n}},eK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(tQ),A=0;A<n.length;A++){var s=n[A],i=n[A+1];if(Et(s)&&s.value!=="none"){var a=i&&$a(i)?i.number:0;r.push({counter:s.value,reset:a})}}return r}},tK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(gu).map(function(r){return wQ.parse(t,r)})}},rK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],A=e.filter(TV);if(A.length%2!==0)return null;for(var s=0;s<A.length;s+=2){var i=A[s].value,a=A[s+1].value;n.push({open:i,close:a})}return n}},tI=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},nK={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&p0(e[0],"none")?[]:dA(e).map(function(r){for(var n={color:255,offsetX:Rr,offsetY:Rr,blur:Rr,spread:Rr,inset:!1},A=0,s=0;s<r.length;s++){var i=r[s];p0(i,"inset")?n.inset=!0:Ys(i)?(A===0?n.offsetX=i:A===1?n.offsetY=i:A===2?n.blur=i:n.spread=i,A++):n.color=Ls.parse(t,i)}return n})}},AK={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Et).forEach(function(A){switch(A.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(A){n.indexOf(A)===-1&&n.push(A)}),n}},sK={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},iK={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return gu(e)?e.number:0}},oK=function(){function t(e,r){var n,A;this.animationDuration=be(e,tK,r.animationDuration),this.backgroundClip=be(e,UV,r.backgroundClip),this.backgroundColor=be(e,SV,r.backgroundColor),this.backgroundImage=be(e,HV,r.backgroundImage),this.backgroundOrigin=be(e,VV,r.backgroundOrigin),this.backgroundPosition=be(e,KV,r.backgroundPosition),this.backgroundRepeat=be(e,GV,r.backgroundRepeat),this.backgroundSize=be(e,$V,r.backgroundSize),this.borderTopColor=be(e,qV,r.borderTopColor),this.borderRightColor=be(e,JV,r.borderRightColor),this.borderBottomColor=be(e,XV,r.borderBottomColor),this.borderLeftColor=be(e,YV,r.borderLeftColor),this.borderTopLeftRadius=be(e,ZV,r.borderTopLeftRadius),this.borderTopRightRadius=be(e,e3,r.borderTopRightRadius),this.borderBottomRightRadius=be(e,t3,r.borderBottomRightRadius),this.borderBottomLeftRadius=be(e,r3,r.borderBottomLeftRadius),this.borderTopStyle=be(e,n3,r.borderTopStyle),this.borderRightStyle=be(e,A3,r.borderRightStyle),this.borderBottomStyle=be(e,s3,r.borderBottomStyle),this.borderLeftStyle=be(e,i3,r.borderLeftStyle),this.borderTopWidth=be(e,o3,r.borderTopWidth),this.borderRightWidth=be(e,a3,r.borderRightWidth),this.borderBottomWidth=be(e,l3,r.borderBottomWidth),this.borderLeftWidth=be(e,c3,r.borderLeftWidth),this.boxShadow=be(e,nK,r.boxShadow),this.color=be(e,u3,r.color),this.direction=be(e,d3,r.direction),this.display=be(e,h3,r.display),this.float=be(e,g3,r.cssFloat),this.fontFamily=be(e,$3,r.fontFamily),this.fontSize=be(e,W3,r.fontSize),this.fontStyle=be(e,X3,r.fontStyle),this.fontVariant=be(e,J3,r.fontVariant),this.fontWeight=be(e,q3,r.fontWeight),this.letterSpacing=be(e,p3,r.letterSpacing),this.lineBreak=be(e,m3,r.lineBreak),this.lineHeight=be(e,w3,r.lineHeight),this.listStyleImage=be(e,B3,r.listStyleImage),this.listStylePosition=be(e,y3,r.listStylePosition),this.listStyleType=be(e,m0,r.listStyleType),this.marginTop=be(e,v3,r.marginTop),this.marginRight=be(e,x3,r.marginRight),this.marginBottom=be(e,C3,r.marginBottom),this.marginLeft=be(e,I3,r.marginLeft),this.opacity=be(e,K3,r.opacity);var s=be(e,_3,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=be(e,E3,r.overflowWrap),this.paddingTop=be(e,b3,r.paddingTop),this.paddingRight=be(e,T3,r.paddingRight),this.paddingBottom=be(e,F3,r.paddingBottom),this.paddingLeft=be(e,Q3,r.paddingLeft),this.paintOrder=be(e,AK,r.paintOrder),this.position=be(e,S3,r.position),this.textAlign=be(e,U3,r.textAlign),this.textDecorationColor=be(e,G3,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=be(e,z3,(A=r.textDecorationLine)!==null&&A!==void 0?A:r.textDecoration),this.textShadow=be(e,k3,r.textShadow),this.textTransform=be(e,R3,r.textTransform),this.transform=be(e,N3,r.transform),this.transformOrigin=be(e,M3,r.transformOrigin),this.visibility=be(e,O3,r.visibility),this.webkitTextStrokeColor=be(e,sK,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=be(e,iK,r.webkitTextStrokeWidth),this.wordBreak=be(e,H3,r.wordBreak),this.zIndex=be(e,V3,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return js(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return pr(this.display,4)||pr(this.display,33554432)||pr(this.display,268435456)||pr(this.display,536870912)||pr(this.display,67108864)||pr(this.display,134217728)},t}(),aK=function(){function t(e,r){this.content=be(e,Y3,r.content),this.quotes=be(e,rK,r.quotes)}return t}(),rI=function(){function t(e,r){this.counterIncrement=be(e,Z3,r.counterIncrement),this.counterReset=be(e,eK,r.counterReset)}return t}(),be=function(t,e,r){var n=new ZF,A=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(A);var s=new eQ(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Et(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return ng.parse(t,s.parseComponentValue());case"color":return Ls.parse(t,s.parseComponentValue());case"image":return LB.parse(t,s.parseComponentValue());case"length":var a=s.parseComponentValue();return Ys(a)?a:Rr;case"length-percentage":var o=s.parseComponentValue();return hr(o)?o:Rr;case"time":return wQ.parse(t,s.parseComponentValue())}break}},lK="data-html2canvas-debug",cK=function(t){var e=t.getAttribute(lK);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},w0=function(t,e){var r=cK(t);return r===1||e===r},hA=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,w0(r,3))debugger;this.styles=new oK(e,window.getComputedStyle(r,null)),v0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=tg(this.context,r),w0(r,4)&&(this.flags|=16)}return t}(),uK="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",nI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var md=0;md<nI.length;md++)Nl[nI.charCodeAt(md)]=md;var dK=function(t){var e=t.length*.75,r=t.length,n,A=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)s=Nl[t.charCodeAt(n)],i=Nl[t.charCodeAt(n+1)],a=Nl[t.charCodeAt(n+2)],o=Nl[t.charCodeAt(n+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|a>>2,d[A++]=(a&3)<<6|o&63;return c},hK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},fK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Di=5,jB=11,pp=2,gK=jB-Di,BQ=65536>>Di,pK=1<<Di,mp=pK-1,mK=1024>>Di,wK=BQ+mK,BK=wK,yK=32,vK=BK+yK,xK=65536>>jB,CK=1<<gK,IK=CK-1,AI=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},_K=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},EK=function(t,e){var r=dK(t),n=Array.isArray(r)?fK(r):new Uint32Array(r),A=Array.isArray(r)?hK(r):new Uint16Array(r),s=24,i=AI(A,s/2,n[4]/2),a=n[5]===2?AI(A,(s+n[4])/2):_K(n,Math.ceil((s+n[4])/4));return new bK(n[0],n[1],n[2],n[3],i,a)},bK=function(){function t(e,r,n,A,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Di],r=(r<<pp)+(e&mp),this.data[r];if(e<=65535)return r=this.index[BQ+(e-55296>>Di)],r=(r<<pp)+(e&mp),this.data[r];if(e<this.highStart)return r=vK-xK+(e>>jB),r=this.index[r],r+=e>>Di&IK,r=this.index[r],r=(r<<pp)+(e&mp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),sI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var wd=0;wd<sI.length;wd++)TK[sI.charCodeAt(wd)]=wd;var FK=1,wp=2,Bp=3,iI=4,oI=5,QK=7,aI=8,yp=9,vp=10,lI=11,cI=12,uI=13,dI=14,xp=15,UK=function(t){for(var e=[],r=0,n=t.length;r<n;){var A=t.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),r--)}else e.push(A)}return e},SK=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],A=-1,s="";++A<r;){var i=t[A];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(A+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},kK=EK(uK),Fn="",Cp="",RK=function(t){return kK.get(t)},NK=function(t,e,r){var n=r-2,A=e[n],s=e[r-1],i=e[r];if(s===wp&&i===Bp)return Fn;if(s===wp||s===Bp||s===iI||i===wp||i===Bp||i===iI)return Cp;if(s===aI&&[aI,yp,lI,cI].indexOf(i)!==-1||(s===lI||s===yp)&&(i===yp||i===vp)||(s===cI||s===vp)&&i===vp||i===uI||i===oI||i===QK||s===FK)return Fn;if(s===uI&&i===dI){for(;A===oI;)A=e[--n];if(A===dI)return Fn}if(s===xp&&i===xp){for(var a=0;A===xp;)a++,A=e[--n];if(a%2===0)return Fn}return Cp},DK=function(t){var e=UK(t),r=e.length,n=0,A=0,s=e.map(RK);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Fn;n<r&&(i=NK(e,s,++n))===Fn;);if(i!==Fn||n===r){var a=SK.apply(null,e.slice(A,n));return A=n,{value:a,done:!1}}return{done:!0,value:null}}}},PK=function(t){for(var e=DK(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},LK=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var A=r.getBoundingClientRect(),s=Math.round(A.height);if(t.body.removeChild(n),s===e)return!0}}return!1},jK=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,A=rg(n.data).map(function(o){return ar(o)}),s=0,i={},a=A.every(function(o,c){r.setStart(n,s),r.setEnd(n,s+o.length);var d=r.getBoundingClientRect();s+=o.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),a},MK=function(){return typeof new Image().crossOrigin<"u"},OK=function(){return typeof new XMLHttpRequest().responseType=="string"},HK=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},hI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},VK=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var A=new Image,s=e.toDataURL();A.src=s;var i=B0(r,r,0,0,A);return n.fillStyle="red",n.fillRect(0,0,r,r),fI(i).then(function(a){n.drawImage(a,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=r+"px",hI(o)?fI(B0(r,r,0,0,c)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),hI(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},B0=function(t,e,r,n,A){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(A),i},fI=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Ur={get SUPPORT_RANGE_BOUNDS(){var t=LK(document);return Object.defineProperty(Ur,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Ur.SUPPORT_RANGE_BOUNDS&&jK(document);return Object.defineProperty(Ur,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=HK(document);return Object.defineProperty(Ur,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?VK(document):Promise.resolve(!1);return Object.defineProperty(Ur,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=MK();return Object.defineProperty(Ur,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=OK();return Object.defineProperty(Ur,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ur,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ur,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},nc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),KK=function(t,e,r,n){var A=$K(e,r),s=[],i=0;return A.forEach(function(a){if(r.textDecorationLine.length||a.trim().length>0)if(Ur.SUPPORT_RANGE_BOUNDS){var o=gI(n,i,a.length).getClientRects();if(o.length>1){var c=MB(a),d=0;c.forEach(function(f){s.push(new nc(f,jA.fromDOMRectList(t,gI(n,d+i,f.length).getClientRects()))),d+=f.length})}else s.push(new nc(a,jA.fromDOMRectList(t,o)))}else{var h=n.splitText(a.length);s.push(new nc(a,GK(t,n))),n=h}else Ur.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),s},GK=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(n,e);var s=tg(t,n);return n.firstChild&&A.replaceChild(n.firstChild,n),s}}return jA.EMPTY},gI=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var A=n.createRange();return A.setStart(t,e),A.setEnd(t,e+r),A},MB=function(t){if(Ur.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return PK(t)},zK=function(t,e){if(Ur.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return qK(t,e)},$K=function(t,e){return e.letterSpacing!==0?MB(t):zK(t,e)},WK=[32,160,4961,65792,65793,4153,4241],qK=function(t,e){for(var r=xH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],A,s=function(){if(A.value){var i=A.value.slice(),a=rg(i),o="";a.forEach(function(c){WK.indexOf(c)===-1?o+=ar(c):(o.length&&n.push(o),n.push(ar(c)),o="")}),o.length&&n.push(o)}};!(A=r.next()).done;)s();return n},JK=function(){function t(e,r,n){this.text=XK(r.data,n.textTransform),this.textBounds=KK(e,this.text,n,r)}return t}(),XK=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(YK,ZK);case 2:return t.toUpperCase();default:return t}},YK=/(^|\s|:|-|\(|\))([a-z])/g,ZK=function(t,e,r){return t.length>0?e+r.toUpperCase():t},yQ=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.src=n.currentSrc||n.src,A.intrinsicWidth=n.naturalWidth,A.intrinsicHeight=n.naturalHeight,A.context.cache.addImage(A.src),A}return e}(hA),vQ=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.canvas=n,A.intrinsicWidth=n.width,A.intrinsicHeight=n.height,A}return e}(hA),xQ=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this,s=new XMLSerializer,i=tg(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),A.intrinsicWidth=n.width.baseVal.value,A.intrinsicHeight=n.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e}(hA),CQ=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.value=n.value,A}return e}(hA),y0=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.start=n.start,A.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,A}return e}(hA),e5=[{type:15,flags:0,unit:"px",number:3}],t5=[{type:16,flags:0,number:50}],r5=function(t){return t.width>t.height?new jA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new jA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},n5=function(t){var e=t.type===A5?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Xh="checkbox",Yh="radio",A5="password",pI=707406591,OB=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;switch(A.type=n.type.toLowerCase(),A.checked=n.checked,A.value=n5(n),(A.type===Xh||A.type===Yh)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=r5(A.bounds)),A.type){case Xh:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=e5;break;case Yh:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=t5;break}return A}return e}(hA),IQ=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return A.value=s&&s.text||"",A}return e}(hA),_Q=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.value=n.value,A}return e}(hA),EQ=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;A.src=n.src,A.width=parseInt(n.width,10)||0,A.height=parseInt(n.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){A.tree=TQ(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?tc(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):QA.TRANSPARENT,i=n.contentWindow.document.body?tc(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):QA.TRANSPARENT;A.backgroundColor=js(s)?js(i)?A.styles.backgroundColor:i:s}}catch{}return A}return e}(hA),s5=["OL","UL","MENU"],Yd=function(t,e,r,n){for(var A=e.firstChild,s=void 0;A;A=s)if(s=A.nextSibling,FQ(A)&&A.data.trim().length>0)r.textNodes.push(new JK(t,A,r.styles));else if(Ho(A))if(kQ(A)&&A.assignedNodes)A.assignedNodes().forEach(function(a){return Yd(t,a,r,n)});else{var i=bQ(t,A);i.styles.isVisible()&&(i5(A,i,n)?i.flags|=4:o5(i.styles)&&(i.flags|=2),s5.indexOf(A.tagName)!==-1&&(i.flags|=8),r.elements.push(i),A.slot,A.shadowRoot?Yd(t,A.shadowRoot,i,n):!Zh(A)&&!QQ(A)&&!ef(A)&&Yd(t,A,i,n))}},bQ=function(t,e){return x0(e)?new yQ(t,e):UQ(e)?new vQ(t,e):QQ(e)?new xQ(t,e):a5(e)?new CQ(t,e):l5(e)?new y0(t,e):c5(e)?new OB(t,e):ef(e)?new IQ(t,e):Zh(e)?new _Q(t,e):SQ(e)?new EQ(t,e):new hA(t,e)},TQ=function(t,e){var r=bQ(t,e);return r.flags|=4,Yd(t,e,r,r),r},i5=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||HB(t)&&r.styles.isTransparent()},o5=function(t){return t.isPositioned()||t.isFloating()},FQ=function(t){return t.nodeType===Node.TEXT_NODE},Ho=function(t){return t.nodeType===Node.ELEMENT_NODE},v0=function(t){return Ho(t)&&typeof t.style<"u"&&!Zd(t)},Zd=function(t){return typeof t.className=="object"},a5=function(t){return t.tagName==="LI"},l5=function(t){return t.tagName==="OL"},c5=function(t){return t.tagName==="INPUT"},u5=function(t){return t.tagName==="HTML"},QQ=function(t){return t.tagName==="svg"},HB=function(t){return t.tagName==="BODY"},UQ=function(t){return t.tagName==="CANVAS"},mI=function(t){return t.tagName==="VIDEO"},x0=function(t){return t.tagName==="IMG"},SQ=function(t){return t.tagName==="IFRAME"},wI=function(t){return t.tagName==="STYLE"},d5=function(t){return t.tagName==="SCRIPT"},Zh=function(t){return t.tagName==="TEXTAREA"},ef=function(t){return t.tagName==="SELECT"},kQ=function(t){return t.tagName==="SLOT"},BI=function(t){return t.tagName.indexOf("-")>0},h5=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,A=e.counterReset,s=!0;n!==null&&n.forEach(function(a){var o=r.counters[a.counter];o&&a.increment!==0&&(s=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=a.increment)});var i=[];return s&&A.forEach(function(a){var o=r.counters[a.counter];i.push(a.counter),o||(o=r.counters[a.counter]=[]),o.push(a.reset)}),i},t}(),yI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},f5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},g5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},yo=function(t,e,r,n,A,s){return t<e||t>r?Mc(t,A,s.length>0):n.integers.reduce(function(i,a,o){for(;t>=a;)t-=a,i+=n.values[o];return i},"")+s},RQ=function(t,e,r,n){var A="";do r||t--,A=n(t)+A,t/=e;while(t*e>=e);return A},or=function(t,e,r,n,A){var s=r-e+1;return(t<0?"-":"")+(RQ(Math.abs(t),s,n,function(i){return ar(Math.floor(i%s)+e)})+A)},pi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return RQ(Math.abs(t),n,!1,function(A){return e[Math.floor(A%n)]})+r},bo=1,ns=2,As=4,Dl=8,mA=function(t,e,r,n,A,s){if(t<-9999||t>9999)return Mc(t,4,A.length>0);var i=Math.abs(t),a=A;if(i===0)return e[0]+a;for(var o=0;i>0&&o<=4;o++){var c=i%10;c===0&&pr(s,bo)&&a!==""?a=e[c]+a:c>1||c===1&&o===0||c===1&&o===1&&pr(s,ns)||c===1&&o===1&&pr(s,As)&&t>100||c===1&&o>1&&pr(s,Dl)?a=e[c]+(o>0?r[o-1]:"")+a:c===1&&o>0&&(a=r[o-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},xI="",CI="",II="",Ip="",Mc=function(t,e,r){var n=r?". ":"",A=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=or(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return pi(t,"",A);case 6:return yo(t,1,3999,yI,3,n).toLowerCase();case 7:return yo(t,1,3999,yI,3,n);case 8:return or(t,945,969,!1,n);case 9:return or(t,97,122,!1,n);case 10:return or(t,65,90,!1,n);case 11:return or(t,1632,1641,!0,n);case 12:case 49:return yo(t,1,9999,vI,3,n);case 35:return yo(t,1,9999,vI,3,n).toLowerCase();case 13:return or(t,2534,2543,!0,n);case 14:case 30:return or(t,6112,6121,!0,n);case 15:return pi(t,"",A);case 16:return pi(t,"",A);case 17:case 48:return mA(t,"",xI,"",A,ns|As|Dl);case 47:return mA(t,"",CI,"",A,bo|ns|As|Dl);case 42:return mA(t,"",xI,"",A,ns|As|Dl);case 41:return mA(t,"",CI,"",A,bo|ns|As|Dl);case 26:return mA(t,"","",II,A,0);case 25:return mA(t,"","",II,A,bo|ns|As);case 31:return mA(t,"","",Ip,s,bo|ns|As);case 33:return mA(t,"","",Ip,s,0);case 32:return mA(t,"","",Ip,s,bo|ns|As);case 18:return or(t,2406,2415,!0,n);case 20:return yo(t,1,19999,g5,3,n);case 21:return or(t,2790,2799,!0,n);case 22:return or(t,2662,2671,!0,n);case 22:return yo(t,1,10999,f5,3,n);case 23:return pi(t,"");case 24:return pi(t,"");case 27:return or(t,3302,3311,!0,n);case 28:return pi(t,"",A);case 29:return pi(t,"",A);case 34:return or(t,3792,3801,!0,n);case 37:return or(t,6160,6169,!0,n);case 38:return or(t,4160,4169,!0,n);case 39:return or(t,2918,2927,!0,n);case 40:return or(t,1776,1785,!0,n);case 43:return or(t,3046,3055,!0,n);case 44:return or(t,3174,3183,!0,n);case 45:return or(t,3664,3673,!0,n);case 46:return or(t,3872,3881,!0,n);case 3:default:return or(t,48,57,!0,n)}},NQ="data-html2canvas-ignore",_I=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new h5,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,A=p5(e,r);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=A.contentWindow,o=a.document,c=B5(A).then(function(){return Xr(n,void 0,void 0,function(){var d,h;return Vr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(C5),a&&(a.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-r.left,a.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,w5(o)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(o,h)}).then(function(){return A})]:[2,A]}})})});return o.open(),o.write(v5(document.doctype)+"<html></html>"),x5(this.referenceElement.ownerDocument,s,i),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),c},t.prototype.createElementClone=function(e){if(w0(e,2))debugger;if(UQ(e))return this.createCanvasClone(e);if(mI(e))return this.createVideoClone(e);if(wI(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return x0(r)&&(x0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),BI(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return _p(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),A=e.cloneNode(!1);return A.textContent=n,A}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var s=e.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(a){var o=a.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},t.prototype.appendChildNode=function(e,r,n){(!Ho(r)||!d5(r)&&!r.hasAttribute(NQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Ho(r)||!wI(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var A=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Ho(s)&&kQ(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return A.appendChildNode(r,a,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(FQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Ho(e)&&(v0(e)||Zd(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&v0(A)&&(this.clonedReferenceElement=A),HB(A)&&E5(A);var o=this.counters.parse(new rI(this.context,s)),c=this.resolvePseudoContent(e,A,i,Ac.BEFORE);BI(e)&&(r=!0),mI(e)||this.cloneChildNodes(e,A,r),c&&A.insertBefore(c,A.firstChild);var d=this.resolvePseudoContent(e,A,a,Ac.AFTER);return d&&A.appendChild(d),this.counters.pop(o),(s&&(this.options.copyStyles||Zd(e))&&!SQ(e)||r)&&_p(s,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(Zh(e)||ef(e))&&(Zh(A)||ef(A))&&(A.value=e.value),A}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,A){var s=this;if(n){var i=n.content,a=r.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new rI(this.context,n));var o=new aK(this.context,n),c=a.createElement("html2canvaspseudoelement");_p(n,c),o.content.forEach(function(h){if(h.type===0)c.appendChild(a.createTextNode(h.value));else if(h.type===22){var f=a.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(Et);m.length&&c.appendChild(a.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(Ea),B=y[0],E=y[1];if(B&&Et(B)){var x=s.counters.getCounterValue(B.value),w=E&&Et(E)?m0.parse(s.context,E.value):3;c.appendChild(a.createTextNode(Mc(x,w,!1)))}}else if(h.name==="counters"){var I=h.values.filter(Ea),B=I[0],F=I[1],E=I[2];if(B&&Et(B)){var R=s.counters.getCounterValues(B.value),U=E&&Et(E)?m0.parse(s.context,E.value):3,v=F&&F.type===0?F.value:"",C=R.map(function(N){return Mc(N,U,!1)}).join(v);c.appendChild(a.createTextNode(C))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(a.createTextNode(tI(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(tI(o.quotes,--s.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(h.value))}}),c.className=C0+" "+I0;var d=A===Ac.BEFORE?" "+C0:" "+I0;return Zd(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Ac;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Ac||(Ac={}));var p5=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(NQ,"true"),t.body.appendChild(r),r},m5=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},w5=function(t){return Promise.all([].slice.call(t.images,0).map(m5))},B5=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var A=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},y5=["all","d","content"],_p=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);y5.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},v5=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},x5=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},C5=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},I5=":before",_5=":after",C0="___html2canvas___pseudoelement_before",I0="___html2canvas___pseudoelement_after",EI=`{
    content: "" !important;
    display: none !important;
}`,E5=function(t){b5(t,"."+C0+I5+EI+`
         .`+I0+_5+EI)},b5=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},DQ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),T5=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(bp(e)||S5(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Xr(this,void 0,void 0,function(){var r,n,A,s,i=this;return Vr(this,function(a){switch(a.label){case 0:return r=DQ.isSameOrigin(e),n=!Ep(e)&&this._options.useCORS===!0&&Ur.SUPPORT_CORS_IMAGES&&!r,A=!Ep(e)&&!r&&!bp(e)&&typeof this._options.proxy=="string"&&Ur.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Ep(e)&&!bp(e)&&!A&&!n?[2]:(s=e,A?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,c){var d=new Image;d.onload=function(){return o(d)},d.onerror=c,(k5(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return o(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(s,i){var a=Ur.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(a==="text")s(o.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(o.response)}else i("Failed to proxy resource "+A+" with status code "+o.status)},o.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=a),r._options.imageTimeout){var d=r._options.imageTimeout;o.timeout=d,o.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+A)}}o.send()})},t}(),F5=/^data:image\/svg\+xml/i,Q5=/^data:image\/.*;base64,/i,U5=/^data:image\/.*/i,S5=function(t){return Ur.SUPPORT_SVG_DRAWING||!R5(t)},Ep=function(t){return U5.test(t)},k5=function(t){return Q5.test(t)},bp=function(t){return t.substr(0,4)==="blob"},R5=function(t){return t.substr(-3).toLowerCase()==="svg"||F5.test(t)},Ie=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),vo=function(t,e,r){return new Ie(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Bd=function(){function t(e,r,n,A){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=A}return t.prototype.subdivide=function(e,r){var n=vo(this.start,this.startControl,e),A=vo(this.startControl,this.endControl,e),s=vo(this.endControl,this.end,e),i=vo(n,A,e),a=vo(A,s,e),o=vo(i,a,e);return r?new t(this.start,n,i,o):new t(o,a,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Sn=function(t){return t.type===1},N5=function(){function t(e){var r=e.styles,n=e.bounds,A=Rl(r.borderTopLeftRadius,n.width,n.height),s=A[0],i=A[1],a=Rl(r.borderTopRightRadius,n.width,n.height),o=a[0],c=a[1],d=Rl(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],m=Rl(r.borderBottomLeftRadius,n.width,n.height),y=m[0],B=m[1],E=[];E.push((s+o)/n.width),E.push((y+h)/n.width),E.push((i+B)/n.height),E.push((c+f)/n.height);var x=Math.max.apply(Math,E);x>1&&(s/=x,i/=x,o/=x,c/=x,h/=x,f/=x,y/=x,B/=x);var w=n.width-o,I=n.height-f,F=n.width-h,R=n.height-B,U=r.borderTopWidth,v=r.borderRightWidth,C=r.borderBottomWidth,_=r.borderLeftWidth,Q=Rt(r.paddingTop,e.bounds.width),N=Rt(r.paddingRight,e.bounds.width),P=Rt(r.paddingBottom,e.bounds.width),b=Rt(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Ht(n.left+_/3,n.top+U/3,s-_/3,i-U/3,yt.TOP_LEFT):new Ie(n.left+_/3,n.top+U/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Ht(n.left+w,n.top+U/3,o-v/3,c-U/3,yt.TOP_RIGHT):new Ie(n.left+n.width-v/3,n.top+U/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Ht(n.left+F,n.top+I,h-v/3,f-C/3,yt.BOTTOM_RIGHT):new Ie(n.left+n.width-v/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=y>0||B>0?Ht(n.left+_/3,n.top+R,y-_/3,B-C/3,yt.BOTTOM_LEFT):new Ie(n.left+_/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Ht(n.left+_*2/3,n.top+U*2/3,s-_*2/3,i-U*2/3,yt.TOP_LEFT):new Ie(n.left+_*2/3,n.top+U*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Ht(n.left+w,n.top+U*2/3,o-v*2/3,c-U*2/3,yt.TOP_RIGHT):new Ie(n.left+n.width-v*2/3,n.top+U*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Ht(n.left+F,n.top+I,h-v*2/3,f-C*2/3,yt.BOTTOM_RIGHT):new Ie(n.left+n.width-v*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||B>0?Ht(n.left+_*2/3,n.top+R,y-_*2/3,B-C*2/3,yt.BOTTOM_LEFT):new Ie(n.left+_*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=s>0||i>0?Ht(n.left+_/2,n.top+U/2,s-_/2,i-U/2,yt.TOP_LEFT):new Ie(n.left+_/2,n.top+U/2),this.topRightBorderStroke=s>0||i>0?Ht(n.left+w,n.top+U/2,o-v/2,c-U/2,yt.TOP_RIGHT):new Ie(n.left+n.width-v/2,n.top+U/2),this.bottomRightBorderStroke=h>0||f>0?Ht(n.left+F,n.top+I,h-v/2,f-C/2,yt.BOTTOM_RIGHT):new Ie(n.left+n.width-v/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=y>0||B>0?Ht(n.left+_/2,n.top+R,y-_/2,B-C/2,yt.BOTTOM_LEFT):new Ie(n.left+_/2,n.top+n.height-C/2),this.topLeftBorderBox=s>0||i>0?Ht(n.left,n.top,s,i,yt.TOP_LEFT):new Ie(n.left,n.top),this.topRightBorderBox=o>0||c>0?Ht(n.left+w,n.top,o,c,yt.TOP_RIGHT):new Ie(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Ht(n.left+F,n.top+I,h,f,yt.BOTTOM_RIGHT):new Ie(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||B>0?Ht(n.left,n.top+R,y,B,yt.BOTTOM_LEFT):new Ie(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Ht(n.left+_,n.top+U,Math.max(0,s-_),Math.max(0,i-U),yt.TOP_LEFT):new Ie(n.left+_,n.top+U),this.topRightPaddingBox=o>0||c>0?Ht(n.left+Math.min(w,n.width-v),n.top+U,w>n.width+v?0:Math.max(0,o-v),Math.max(0,c-U),yt.TOP_RIGHT):new Ie(n.left+n.width-v,n.top+U),this.bottomRightPaddingBox=h>0||f>0?Ht(n.left+Math.min(F,n.width-_),n.top+Math.min(I,n.height-C),Math.max(0,h-v),Math.max(0,f-C),yt.BOTTOM_RIGHT):new Ie(n.left+n.width-v,n.top+n.height-C),this.bottomLeftPaddingBox=y>0||B>0?Ht(n.left+_,n.top+Math.min(R,n.height-C),Math.max(0,y-_),Math.max(0,B-C),yt.BOTTOM_LEFT):new Ie(n.left+_,n.top+n.height-C),this.topLeftContentBox=s>0||i>0?Ht(n.left+_+b,n.top+U+Q,Math.max(0,s-(_+b)),Math.max(0,i-(U+Q)),yt.TOP_LEFT):new Ie(n.left+_+b,n.top+U+Q),this.topRightContentBox=o>0||c>0?Ht(n.left+Math.min(w,n.width+_+b),n.top+U+Q,w>n.width+_+b?0:o-_+b,c-(U+Q),yt.TOP_RIGHT):new Ie(n.left+n.width-(v+N),n.top+U+Q),this.bottomRightContentBox=h>0||f>0?Ht(n.left+Math.min(F,n.width-(_+b)),n.top+Math.min(I,n.height+U+Q),Math.max(0,h-(v+N)),f-(C+P),yt.BOTTOM_RIGHT):new Ie(n.left+n.width-(v+N),n.top+n.height-(C+P)),this.bottomLeftContentBox=y>0||B>0?Ht(n.left+_+b,n.top+R,Math.max(0,y-(_+b)),B-(C+P),yt.BOTTOM_LEFT):new Ie(n.left+_+b,n.top+n.height-(C+P))}return t}(),yt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(yt||(yt={}));var Ht=function(t,e,r,n,A){var s=4*((Math.sqrt(2)-1)/3),i=r*s,a=n*s,o=t+r,c=e+n;switch(A){case yt.TOP_LEFT:return new Bd(new Ie(t,c),new Ie(t,c-a),new Ie(o-i,e),new Ie(o,e));case yt.TOP_RIGHT:return new Bd(new Ie(t,e),new Ie(t+i,e),new Ie(o,c-a),new Ie(o,c));case yt.BOTTOM_RIGHT:return new Bd(new Ie(o,e),new Ie(o,e+a),new Ie(t+i,c),new Ie(t,c));case yt.BOTTOM_LEFT:default:return new Bd(new Ie(o,c),new Ie(o-i,c),new Ie(t,e+a),new Ie(t,e))}},tf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},D5=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},rf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},P5=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),yd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),L5=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),j5=function(t){return t.type===0},PQ=function(t){return t.type===1},M5=function(t){return t.type===2},bI=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},O5=function(t,e,r,n,A){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+A);case 3:return s.add(e,r+A)}return s})},LQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),jQ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new N5(this.container),this.container.styles.opacity<1&&this.effects.push(new L5(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new P5(n,A,s))}if(this.container.styles.overflowX!==0){var i=tf(this.curves),a=rf(this.curves);bI(i,a)?this.effects.push(new yd(i,6)):(this.effects.push(new yd(i,2)),this.effects.push(new yd(a,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,A=this.effects.slice(0);n;){var s=n.effects.filter(function(o){return!PQ(o)});if(r||n.container.styles.position!==0||!n.parent){if(A.unshift.apply(A,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=tf(n.curves),a=rf(n.curves);bI(i,a)||A.unshift(new yd(a,6))}}else A.unshift.apply(A,s);n=n.parent}return A.filter(function(o){return pr(o.target,e)})},t}(),_0=function(t,e,r,n){t.container.elements.forEach(function(A){var s=pr(A.flags,4),i=pr(A.flags,2),a=new jQ(A,t);pr(A.styles.display,2048)&&n.push(a);var o=pr(A.flags,8)?[]:n;if(s||i){var c=s||A.styles.isPositioned()?r:e,d=new LQ(a);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var h=A.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(y,B){return h>y.element.container.styles.zIndex.order?(f=B,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(y,B){return h>=y.element.container.styles.zIndex.order?(m=B+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else A.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);_0(a,d,s?d:r,o)}else A.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),_0(a,e,r,o);pr(A.flags,8)&&MQ(A,o)})},MQ=function(t,e){for(var r=t instanceof y0?t.start:1,n=t instanceof y0?t.reversed:!1,A=0;A<e.length;A++){var s=e[A];s.container instanceof CQ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Mc(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},H5=function(t){var e=new jQ(t,null),r=new LQ(e),n=[];return _0(e,r,r,n),MQ(e.container,n),r},TI=function(t,e){switch(e){case 0:return Nn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Nn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Nn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Nn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},V5=function(t,e){switch(e){case 0:return Nn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Nn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Nn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Nn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},K5=function(t,e){switch(e){case 0:return Nn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Nn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Nn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Nn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},G5=function(t,e){switch(e){case 0:return vd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return vd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return vd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return vd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},vd=function(t,e){var r=[];return Sn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Sn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Nn=function(t,e,r,n){var A=[];return Sn(t)?A.push(t.subdivide(.5,!1)):A.push(t),Sn(r)?A.push(r.subdivide(.5,!0)):A.push(r),Sn(n)?A.push(n.subdivide(.5,!0).reverse()):A.push(n),Sn(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},OQ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},nf=function(t){var e=t.styles,r=t.bounds,n=Rt(e.paddingLeft,r.width),A=Rt(e.paddingRight,r.width),s=Rt(e.paddingTop,r.width),i=Rt(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+A),-(e.borderTopWidth+e.borderBottomWidth+s+i))},z5=function(t,e){return t===0?e.bounds:t===2?nf(e):OQ(e)},$5=function(t,e){return t===0?e.bounds:t===2?nf(e):OQ(e)},Tp=function(t,e,r){var n=z5(To(t.styles.backgroundOrigin,e),t),A=$5(To(t.styles.backgroundClip,e),t),s=W5(To(t.styles.backgroundSize,e),r,n),i=s[0],a=s[1],o=Rl(To(t.styles.backgroundPosition,e),n.width-i,n.height-a),c=q5(To(t.styles.backgroundRepeat,e),o,s,n,A),d=Math.round(n.left+o[0]),h=Math.round(n.top+o[1]);return[c,d,h,i,a]},xo=function(t){return Et(t)&&t.value===ea.AUTO},xd=function(t){return typeof t=="number"},W5=function(t,e,r){var n=e[0],A=e[1],s=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(hr(i)&&a&&hr(a))return[Rt(i,r.width),Rt(a,r.height)];var o=xd(s);if(Et(i)&&(i.value===ea.CONTAIN||i.value===ea.COVER)){if(xd(s)){var c=r.width/r.height;return c<s!=(i.value===ea.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=xd(n),h=xd(A),f=d||h;if(xo(i)&&(!a||xo(a))){if(d&&h)return[n,A];if(!o&&!f)return[r.width,r.height];if(f&&o){var m=d?n:A*s,y=h?A:n/s;return[m,y]}var B=d?n:r.width,E=h?A:r.height;return[B,E]}if(o){var x=0,w=0;return hr(i)?x=Rt(i,r.width):hr(a)&&(w=Rt(a,r.height)),xo(i)?x=w*s:(!a||xo(a))&&(w=x/s),[x,w]}var I=null,F=null;if(hr(i)?I=Rt(i,r.width):a&&hr(a)&&(F=Rt(a,r.height)),I!==null&&(!a||xo(a))&&(F=d&&h?I/n*A:r.height),F!==null&&xo(i)&&(I=d&&h?F/A*n:r.width),I!==null&&F!==null)return[I,F];throw new Error("Unable to calculate background-size for element")},To=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},q5=function(t,e,r,n,A){var s=e[0],i=e[1],a=r[0],o=r[1];switch(t){case 2:return[new Ie(Math.round(n.left),Math.round(n.top+i)),new Ie(Math.round(n.left+n.width),Math.round(n.top+i)),new Ie(Math.round(n.left+n.width),Math.round(o+n.top+i)),new Ie(Math.round(n.left),Math.round(o+n.top+i))];case 3:return[new Ie(Math.round(n.left+s),Math.round(n.top)),new Ie(Math.round(n.left+s+a),Math.round(n.top)),new Ie(Math.round(n.left+s+a),Math.round(n.height+n.top)),new Ie(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Ie(Math.round(n.left+s),Math.round(n.top+i)),new Ie(Math.round(n.left+s+a),Math.round(n.top+i)),new Ie(Math.round(n.left+s+a),Math.round(n.top+i+o)),new Ie(Math.round(n.left+s),Math.round(n.top+i+o))];default:return[new Ie(Math.round(A.left),Math.round(A.top)),new Ie(Math.round(A.left+A.width),Math.round(A.top)),new Ie(Math.round(A.left+A.width),Math.round(A.height+A.top)),new Ie(Math.round(A.left),Math.round(A.height+A.top))]}},J5="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",FI="Hidden Text",X5=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),A=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),A.src=J5,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(FI)),n.appendChild(s),n.appendChild(A);var a=A.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(FI)),n.style.lineHeight="normal",A.style.verticalAlign="super";var o=A.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),HQ=function(){function t(e,r){this.context=e,this.options=r}return t}(),Y5=1e4,Z5=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A._activeEffects=[],A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),n.canvas||(A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px"),A.fontMetrics=new X5(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),A}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(A){return n.applyEffect(A)})},e.prototype.applyEffect=function(r){this.ctx.save(),M5(r)&&(this.ctx.globalAlpha=r.opacity),j5(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),PQ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Xr(this,void 0,void 0,function(){var n;return Vr(this,function(A){switch(A.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Xr(this,void 0,void 0,function(){return Vr(this,function(n){switch(n.label){case 0:if(pr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,A){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+A);else{var i=MB(r.text);i.reduce(function(a,o){return s.ctx.fillText(o,a,r.bounds.top+A),a+s.ctx.measureText(o).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=A6(r.fontFamily).join(", "),s=gu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,A].join(" "),A,s]},e.prototype.renderTextNode=function(r,n){return Xr(this,void 0,void 0,function(){var A,s,i,a,o,c,d,h,f=this;return Vr(this,function(m){return A=this.createFontStyle(n),s=A[0],i=A[1],a=A[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),c=o.baseline,d=o.middle,h=n.paintOrder,r.textBounds.forEach(function(y){h.forEach(function(B){switch(B){case 0:f.ctx.fillStyle=vr(n.color),f.renderTextWithLetterSpacing(y,n.letterSpacing,c);var E=n.textShadow;E.length&&y.text.trim().length&&(E.slice(0).reverse().forEach(function(x){f.ctx.shadowColor=vr(x.color),f.ctx.shadowOffsetX=x.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=x.offsetY.number*f.options.scale,f.ctx.shadowBlur=x.blur.number,f.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=vr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:f.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(f.ctx.strokeStyle=vr(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,A){if(A&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=nf(r),i=rf(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Xr(this,void 0,void 0,function(){var n,A,s,i,a,o,w,w,c,d,h,f,F,m,y,R,B,E,x,w,I,F,R;return Vr(this,function(U){switch(U.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,A=r.curves,s=n.styles,i=0,a=n.textNodes,U.label=1;case 1:return i<a.length?(o=a[i],[4,this.renderTextNode(o,s)]):[3,4];case 2:U.sent(),U.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof yQ))return[3,8];U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=U.sent(),this.renderReplacedElement(n,A,w),[3,8];case 7:return U.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof vQ&&this.renderReplacedElement(n,A,n.canvas),!(n instanceof xQ))return[3,12];U.label=9;case 9:return U.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=U.sent(),this.renderReplacedElement(n,A,w),[3,12];case 11:return U.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof EQ&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=U.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),U.label=14;case 14:if(n instanceof OB&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===Xh?n.checked&&(this.ctx.save(),this.path([new Ie(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Ie(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Ie(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Ie(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Ie(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Ie(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Ie(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=vr(pI),this.ctx.fill(),this.ctx.restore()):n.type===Yh&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=vr(pI),this.ctx.fill(),this.ctx.restore())),e6(n)&&n.value.length){switch(f=this.createFontStyle(s),F=f[0],m=f[1],y=this.fontMetrics.getMetrics(F,m).baseline,this.ctx.font=F,this.ctx.fillStyle=vr(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=r6(n.styles.textAlign),R=nf(n),B=0,n.styles.textAlign){case 1:B+=R.width/2;break;case 2:B+=R.width;break}E=R.add(B,0,0,-R.height/2+1),this.ctx.save(),this.path([new Ie(R.left,R.top),new Ie(R.left+R.width,R.top),new Ie(R.left+R.width,R.top+R.height),new Ie(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new nc(n.value,E),s.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];w=void 0,I=x.url,U.label=15;case 15:return U.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return w=U.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return U.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(s)[0],this.ctx.font=F,this.ctx.fillStyle=vr(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new jA(n.bounds.left,n.bounds.top+Rt(n.styles.paddingTop,n.bounds.width),n.bounds.width,ZC(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new nc(r.listValue,R),s.letterSpacing,ZC(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),U.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Xr(this,void 0,void 0,function(){var n,A,x,s,i,x,a,o,x,c,d,x,h,f,x,m,y,x,B,E,x;return Vr(this,function(w){switch(w.label){case 0:if(pr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,A=r.negativeZIndex,w.label=2;case 2:return n<A.length?(x=A[n],[4,this.renderStack(x)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:a=0,o=r.nonPositionedFloats,w.label=11;case 11:return a<o.length?(x=o[a],[4,this.renderStack(x)]):[3,14];case 12:w.sent(),w.label=13;case 13:return a++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(x=d[c],[4,this.renderStack(x)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,w.label=19;case 19:return h<f.length?(x=f[h],[4,this.renderNode(x)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:m=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<y.length?(x=y[m],[4,this.renderStack(x)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:B=0,E=r.positiveZIndex,w.label=27;case 27:return B<E.length?(x=E[B],[4,this.renderStack(x)]):[3,30];case 28:w.sent(),w.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(A,s){var i=Sn(A)?A.start:A;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Sn(A)&&n.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(r,n,A,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(A,s),this.ctx.fill(),this.ctx.translate(-A,-s)},e.prototype.resizeImage=function(r,n,A){var s;if(r.width===n&&r.height===A)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,A);var o=a.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,A),a},e.prototype.renderBackgroundImage=function(r){return Xr(this,void 0,void 0,function(){var n,A,s,i,a,o;return Vr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,A=function(d){var h,f,m,Q,et,We,b,Ve,C,y,Q,et,We,b,Ve,B,E,x,w,I,F,R,U,v,C,_,Q,N,P,b,Ve,je,et,We,Ae,L,Y,O,ae,ie,Re,Ue;return Vr(this,function(De){switch(De.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,De.label=1;case 1:return De.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return h=De.sent(),[3,4];case 3:return De.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=Tp(r,n,[h.width,h.height,h.width/h.height]),Q=m[0],et=m[1],We=m[2],b=m[3],Ve=m[4],C=s.ctx.createPattern(s.resizeImage(h,b,Ve),"repeat"),s.renderRepeat(Q,C,et,We)),[3,6];case 5:jV(d)?(y=Tp(r,n,[null,null,null]),Q=y[0],et=y[1],We=y[2],b=y[3],Ve=y[4],B=RV(d.angle,b,Ve),E=B[0],x=B[1],w=B[2],I=B[3],F=B[4],R=document.createElement("canvas"),R.width=b,R.height=Ve,U=R.getContext("2d"),v=U.createLinearGradient(x,I,w,F),XC(d.stops,E).forEach(function(Ke){return v.addColorStop(Ke.stop,vr(Ke.color))}),U.fillStyle=v,U.fillRect(0,0,b,Ve),b>0&&Ve>0&&(C=s.ctx.createPattern(R,"repeat"),s.renderRepeat(Q,C,et,We))):MV(d)&&(_=Tp(r,n,[null,null,null]),Q=_[0],N=_[1],P=_[2],b=_[3],Ve=_[4],je=d.position.length===0?[PB]:d.position,et=Rt(je[0],b),We=Rt(je[je.length-1],Ve),Ae=NV(d,et,We,b,Ve),L=Ae[0],Y=Ae[1],L>0&&Y>0&&(O=s.ctx.createRadialGradient(N+et,P+We,0,N+et,P+We,L),XC(d.stops,L*2).forEach(function(Ke){return O.addColorStop(Ke.stop,vr(Ke.color))}),s.path(Q),s.ctx.fillStyle=O,L!==Y?(ae=r.bounds.left+.5*r.bounds.width,ie=r.bounds.top+.5*r.bounds.height,Re=Y/L,Ue=1/Re,s.ctx.save(),s.ctx.translate(ae,ie),s.ctx.transform(1,0,0,Re,0,0),s.ctx.translate(-ae,-ie),s.ctx.fillRect(N,Ue*(P-ie)+ie,b,Ve*Ue),s.ctx.restore()):s.ctx.fill())),De.label=6;case 6:return n--,[2]}})},s=this,i=0,a=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<a.length?(o=a[i],[5,A(o)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,A){return Xr(this,void 0,void 0,function(){return Vr(this,function(s){return this.path(TI(A,n)),this.ctx.fillStyle=vr(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,A,s){return Xr(this,void 0,void 0,function(){var i,a;return Vr(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,A,s)]:[3,2];case 1:return o.sent(),[2];case 2:return i=V5(s,A),this.path(i),this.ctx.fillStyle=vr(r),this.ctx.fill(),a=K5(s,A),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Xr(this,void 0,void 0,function(){var n,A,s,i,a,o,c,d,h=this;return Vr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,A=!js(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=t6(To(n.backgroundClip,0),r.curves),A||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),js(n.backgroundColor)||(this.ctx.fillStyle=vr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var y=tf(r.curves),B=m.inset?0:Y5,E=O5(y,-B+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(y),h.ctx.clip(),h.mask(E)):(h.mask(y),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=m.offsetX.number+B,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=vr(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?vr(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:a=0,o=0,c=s,f.label=3;case 3:return o<c.length?(d=c[o],d.style!==0&&!js(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,a,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,a,r.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,A,s,i){return Xr(this,void 0,void 0,function(){var a,o,c,d,h,f,m,y,B,E,x,w,I,F,R,U,R,U;return Vr(this,function(v){return this.ctx.save(),a=G5(s,A),o=TI(s,A),i===2&&(this.path(o),this.ctx.clip()),Sn(o[0])?(c=o[0].start.x,d=o[0].start.y):(c=o[0].x,d=o[0].y),Sn(o[1])?(h=o[1].end.x,f=o[1].end.y):(h=o[1].x,f=o[1].y),A===0||A===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(o.slice(0,2)),y=n<3?n*3:n*2,B=n<3?n*2:n,i===3&&(y=n,B=n),E=!0,m<=y*2?E=!1:m<=y*2+B?(x=m/(2*y+B),y*=x,B*=x):(w=Math.floor((m+B)/(y+B)),I=(m-w*y)/(w-1),F=(m-(w+1)*y)/w,B=F<=0||Math.abs(B-I)<Math.abs(B-F)?I:F),E&&(i===3?this.ctx.setLineDash([0,y+B]):this.ctx.setLineDash([y,B])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=vr(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Sn(o[0])&&(R=o[3],U=o[0],this.ctx.beginPath(),this.formatPath([new Ie(R.end.x,R.end.y),new Ie(U.start.x,U.start.y)]),this.ctx.stroke()),Sn(o[1])&&(R=o[1],U=o[2],this.ctx.beginPath(),this.formatPath([new Ie(R.end.x,R.end.y),new Ie(U.start.x,U.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Xr(this,void 0,void 0,function(){var n;return Vr(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=vr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=H5(r),[4,this.renderStack(n)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(HQ),e6=function(t){return t instanceof _Q||t instanceof IQ?!0:t instanceof OB&&t.type!==Yh&&t.type!==Xh},t6=function(t,e){switch(t){case 0:return tf(e);case 2:return D5(e);case 1:default:return rf(e)}},r6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},n6=["-apple-system","system-ui"],A6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return n6.indexOf(e)===-1}):t},s6=function(t){Jn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=n,A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),A}return e.prototype.render=function(r){return Xr(this,void 0,void 0,function(){var n,A;return Vr(this,function(s){switch(s.label){case 0:return n=B0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,i6(n)];case 1:return A=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=vr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(HQ),i6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},o6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ed([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),a6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new o6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new T5(this,e)}return t.instanceCount=1,t}(),QI=function(t,e){return e===void 0&&(e={}),l6(t,e)};typeof window<"u"&&DQ.setContext(window);var l6=function(t,e){return Xr(void 0,void 0,void 0,function(){var r,n,A,s,i,a,o,c,d,h,f,m,y,B,E,x,w,I,F,R,v,U,v,C,_,Q,N,P,b,Ve,je,et,We,Ae,L,Y,O,ae,ie,Re;return Vr(this,function(Ue){switch(Ue.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return A={allowTaint:(C=e.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(_=e.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=A0({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},A),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(b=e.windowHeight)!==null&&b!==void 0?b:n.innerHeight,scrollX:(Ve=e.scrollX)!==null&&Ve!==void 0?Ve:n.pageXOffset,scrollY:(je=e.scrollY)!==null&&je!==void 0?je:n.pageYOffset},a=new jA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),o=new a6(s,a),c=(et=e.foreignObjectRendering)!==null&&et!==void 0?et:!1,d={allowTaint:(We=e.allowTaint)!==null&&We!==void 0?We:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},o.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new _I(o,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=Ue.sent(),y=HB(f)||u5(f)?OO(f.ownerDocument):tg(o,f),B=y.width,E=y.height,x=y.left,w=y.top,I=c6(o,f,e.backgroundColor),F={canvas:e.canvas,backgroundColor:I,scale:(L=(Ae=e.scale)!==null&&Ae!==void 0?Ae:n.devicePixelRatio)!==null&&L!==void 0?L:1,x:((Y=e.x)!==null&&Y!==void 0?Y:0)+x,y:((O=e.y)!==null&&O!==void 0?O:0)+w,width:(ae=e.width)!==null&&ae!==void 0?ae:Math.ceil(B),height:(ie=e.height)!==null&&ie!==void 0?ie:Math.ceil(E)},c?(o.logger.debug("Document cloned, using foreign object rendering"),v=new s6(o,F),[4,v.render(f)]):[3,3];case 2:return R=Ue.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+x+","+w+" with size "+B+"x"+E+" using computed rendering"),o.logger.debug("Starting DOM parsing"),U=TQ(o,f),I===U.styles.backgroundColor&&(U.styles.backgroundColor=QA.TRANSPARENT),o.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),v=new Z5(o,F),[4,v.render(U)];case 4:R=Ue.sent(),Ue.label=5;case 5:return(!((Re=e.removeContainer)!==null&&Re!==void 0)||Re)&&(_I.destroy(m)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,R]}})})},c6=function(t,e,r){var n=e.ownerDocument,A=n.documentElement?tc(t,getComputedStyle(n.documentElement).backgroundColor):QA.TRANSPARENT,s=n.body?tc(t,getComputedStyle(n.body).backgroundColor):QA.TRANSPARENT,i=typeof r=="string"?tc(t,r):r===null?QA.TRANSPARENT:4294967295;return e===n.documentElement?js(A)?js(s)?i:s:A:i},u6=Object.defineProperty,Af=Object.getOwnPropertySymbols,VQ=Object.prototype.hasOwnProperty,KQ=Object.prototype.propertyIsEnumerable,UI=(t,e,r)=>e in t?u6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d6=(t,e)=>{for(var r in e||(e={}))VQ.call(e,r)&&UI(t,r,e[r]);if(Af)for(var r of Af(e))KQ.call(e,r)&&UI(t,r,e[r]);return t},h6=(t,e)=>{var r={};for(var n in t)VQ.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Af)for(var n of Af(t))e.indexOf(n)<0&&KQ.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Zi;(t=>{const e=class{constructor(o,c,d,h){if(this.version=o,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let f=[];for(let y=0;y<this.size;y++)f.push(!1);for(let y=0;y<this.size;y++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let y=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const E=this.getPenaltyScore();E<y&&(h=B,y=E),this.applyMask(B)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(o,c){const d=t.QrSegment.makeSegments(o);return e.encodeSegments(d,c)}static encodeBinary(o,c){const d=t.QrSegment.makeBytes(o);return e.encodeSegments([d],c)}static encodeSegments(o,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let y,B;for(y=d;;y++){const I=e.getNumDataCodewords(y,c)*8,F=a.getTotalBits(o,y);if(F<=I){B=F;break}if(y>=h)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&B<=e.getNumDataCodewords(y,I)*8&&(c=I);let E=[];for(const I of o){n(I.mode.modeBits,4,E),n(I.numChars,I.mode.numCharCountBits(y),E);for(const F of I.getData())E.push(F)}s(E.length==B);const x=e.getNumDataCodewords(y,c)*8;s(E.length<=x),n(0,Math.min(4,x-E.length),E),n(0,(8-E.length%8)%8,E),s(E.length%8==0);for(let I=236;E.length<x;I^=253)n(I,8,E);let w=[];for(;w.length*8<E.length;)w.push(0);return E.forEach((I,F)=>w[F>>>3]|=I<<7-(F&7)),new e(y,c,w,f)}getModule(o,c){return 0<=o&&o<this.size&&0<=c&&c<this.size&&this.modules[c][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),c=o.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(o[d],o[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const c=this.errorCorrectionLevel.formatBits<<3|o;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,A(h,f));this.setFunctionModule(8,7,A(h,6)),this.setFunctionModule(8,8,A(h,7)),this.setFunctionModule(7,8,A(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,A(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,A(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,A(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let d=0;d<12;d++)o=o<<1^(o>>>11)*7973;const c=this.version<<12|o;s(c>>>18==0);for(let d=0;d<18;d++){const h=A(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(o,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=o+h,y=c+d;0<=m&&m<this.size&&0<=y&&y<this.size&&this.setFunctionModule(m,y,f!=2&&f!=4)}}drawAlignmentPattern(o,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(o+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(o,c,d){this.modules[c][o]=d,this.isFunction[c][o]=!0}addEccAndInterleave(o){const c=this.version,d=this.errorCorrectionLevel;if(o.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),y=h-m%h,B=Math.floor(m/h);let E=[];const x=e.reedSolomonComputeDivisor(f);for(let I=0,F=0;I<h;I++){let R=o.slice(F,F+B-f+(I<y?0:1));F+=R.length;const U=e.reedSolomonComputeRemainder(R,x);I<y&&R.push(0),E.push(R.concat(U))}let w=[];for(let I=0;I<E[0].length;I++)E.forEach((F,R)=>{(I!=B-f||R>=y)&&w.push(F[I])});return s(w.length==m),w}drawCodewords(o){if(o.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,B=(d+1&2)==0?this.size-1-h:h;!this.isFunction[B][m]&&c<o.length*8&&(this.modules[B][m]=A(o[c>>>3],7-(c&7)),c++)}}s(c==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(o){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let o=0;for(let f=0;f<this.size;f++){let m=!1,y=0,B=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[f][E]==m?(y++,y==5?o+=e.PENALTY_N1:y>5&&o++):(this.finderPenaltyAddHistory(y,B),m||(o+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),m=this.modules[f][E],y=1);o+=this.finderPenaltyTerminateAndCount(m,y,B)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,y=0,B=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][f]==m?(y++,y==5?o+=e.PENALTY_N1:y>5&&o++):(this.finderPenaltyAddHistory(y,B),m||(o+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),m=this.modules[E][f],y=1);o+=this.finderPenaltyTerminateAndCount(m,y,B)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const y=this.modules[f][m];y==this.modules[f][m+1]&&y==this.modules[f+1][m]&&y==this.modules[f+1][m+1]&&(o+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,y)=>m+(y?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),o+=h*e.PENALTY_N4,s(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let d=[6];for(let h=this.size-7;d.length<o;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(o){if(o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*o+128)*o+64;if(o>=2){const d=Math.floor(o/7)+2;c-=(25*d-10)*d-55,o>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(o,c){return Math.floor(e.getNumRawDataModules(o)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][o]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<o-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<o;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(o,c){let d=c.map(h=>0);for(const h of o){const f=h^d.shift();d.push(0),c.forEach((m,y)=>d[y]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(o,c){if(o>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*o;return s(d>>>8==0),d}finderPenaltyCountPatterns(o){const c=o[1];s(c<=this.size*3);const d=c>0&&o[2]==c&&o[3]==c*3&&o[4]==c&&o[5]==c;return(d&&o[0]>=c*4&&o[6]>=c?1:0)+(d&&o[6]>=c*4&&o[0]>=c?1:0)}finderPenaltyTerminateAndCount(o,c,d){return o&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(o,c){c[0]==0&&(o+=this.size),c.pop(),c.unshift(o)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(o,c,d){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(o>>>h&1)}function A(o,c){return(o>>>c&1)!=0}function s(o){if(!o)throw new Error("Assertion error")}const i=class{constructor(o,c,d){if(this.mode=o,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(o){let c=[];for(const d of o)n(d,8,c);return new i(i.Mode.BYTE,o.length,c)}static makeNumeric(o){if(!i.isNumeric(o))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<o.length;){const h=Math.min(o.length-d,3);n(parseInt(o.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,o.length,c)}static makeAlphanumeric(o){if(!i.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=o.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d+1)),n(h,11,c)}return d<o.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,o.length,c)}static makeSegments(o){return o==""?[]:i.isNumeric(o)?[i.makeNumeric(o)]:i.isAlphanumeric(o)?[i.makeAlphanumeric(o)]:[i.makeBytes(i.toUtf8ByteArray(o))]}static makeEci(o){let c=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,c);else if(o<16384)n(2,2,c),n(o,14,c);else if(o<1e6)n(6,3,c),n(o,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(o){return i.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return i.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,c){let d=0;for(const h of o){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(o){o=encodeURI(o);let c=[];for(let d=0;d<o.length;d++)o.charAt(d)!="%"?c.push(o.charCodeAt(d)):(c.push(parseInt(o.substr(d+1,2),16)),d+=2);return c}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(Zi||(Zi={}));(t=>{(e=>{const r=class{constructor(A,s){this.ordinal=A,this.formatBits=s}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Zi||(Zi={}));(t=>{(e=>{const r=class{constructor(A,s){this.modeBits=A,this.numBitsCharCount=s}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Zi||(Zi={}));var Pl=Zi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var f6={L:Pl.QrCode.Ecc.LOW,M:Pl.QrCode.Ecc.MEDIUM,Q:Pl.QrCode.Ecc.QUARTILE,H:Pl.QrCode.Ecc.HIGH},g6=128,p6="L",m6="#FFFFFF",w6="#000000",B6=!1,GQ=4,y6=.1;function v6(t,e=0){const r=[];return t.forEach(function(n,A){let s=null;n.forEach(function(i,a){if(!i&&s!==null){r.push(`M${s+e} ${A+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===n.length-1){if(!i)return;s===null?r.push(`M${a+e},${A+e} h1v1H${a+e}z`):r.push(`M${s+e},${A+e} h${a+1-s}v1H${s+e}z`);return}i&&s===null&&(s=a)})}),r.join("")}function x6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((A,s)=>s<e.x||s>=e.x+e.w?A:!1))}function C6(t,e,r,n){if(n==null)return null;const A=r?GQ:0,s=t.length+A*2,i=Math.floor(e*y6),a=s/e,o=(n.width||i)*a,c=(n.height||i)*a,d=n.x==null?t.length/2-o/2:n.x*a,h=n.y==null?t.length/2-c/2:n.y*a;let f=null;if(n.excavate){let m=Math.floor(d),y=Math.floor(h),B=Math.ceil(o+d-m),E=Math.ceil(c+h-y);f={x:m,y,w:B,h:E}}return{x:d,y:h,h:c,w:o,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function I6(t){const e=t,{value:r,size:n=g6,level:A=p6,bgColor:s=m6,fgColor:i=w6,includeMargin:a=B6,imageSettings:o}=e,c=h6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Pl.QrCode.encodeText(r,f6[A]).getModules();const h=a?GQ:0,f=d.length+h*2,m=C6(d,n,a,o);let y=null;o!=null&&m!=null&&(m.excavation!=null&&(d=x6(d,m.excavation)),y=yA.createElement("image",{xlinkHref:o.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const B=v6(d,h);return yA.createElement("svg",d6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),yA.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),yA.createElement("path",{fill:i,d:B,shapeRendering:"crispEdges"}),y)}const _6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:A,bellSchedule:s,saveStaticData:i}=WA(),{schedule1:a,schedule2:o,substitutions:c,saveScheduleData:d}=za(),h=k.useRef(null),f=k.useRef(null),m=k.useRef(null),[y,B]=k.useState(new Date().toISOString().split("T")[0]),[E,x]=k.useState(()=>{const ee=new Date().getMonth();return ee>=0&&ee<=4?2:1}),[w,I]=k.useState(!1),[F,R]=k.useState(!1),[U,v]=k.useState(""),[C,_]=k.useState(""),[Q,N]=k.useState(!1),[P,b]=k.useState(""),Ve=k.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:A,bellSchedule:s,schedule:a,schedule2ndHalf:o,substitutions:c}),[t,e,r,n,A,s,a,o,c]),je=()=>E===2?o:a,et=ee=>{const ce=new Date(ee).getMonth();return ce>=0&&ce<=4?o:a},We=k.useMemo(()=>{const ee=new Set;return r.forEach(ce=>{const ve=ce.name.match(/^(\d+)/);ve&&ee.add(ve[1])}),Array.from(ee).sort((ce,ve)=>parseInt(ce)-parseInt(ve))},[r]);k.useEffect(()=>{We.length>0&&!P&&b(We[0])},[We]);const Ae=ee=>{var he;const ce=(he=ee.target.files)==null?void 0:he[0];if(!ce)return;const ve=new FileReader;ve.onload=async de=>{var Me;try{const ue=JSON.parse((Me=de.target)==null?void 0:Me.result);if(ue.teachers&&(ue.schedule||ue.schedule2ndHalf)){if(window.confirm("    . ?")){const ne={...on,...ue,rooms:ue.rooms||on.rooms,classes:ue.classes||[],schedule:ue.schedule||[],schedule2ndHalf:ue.schedule2ndHalf||[],teachers:ue.teachers||[],subjects:ue.subjects||[],substitutions:ue.substitutions||[],settings:{...on.settings,...ue.settings}};await i(ne),await d(ne),alert("  !")}}else alert("  .")}catch{alert("  .")}},ve.readAsText(ce)},L=()=>{const ee=je();let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Vt.forEach(Me=>{ce+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${Me}</td></tr>`,[me.First,me.Second].forEach(ue=>{const ne=r.filter(fe=>fe.shift===ue);ne.length!==0&&(ce+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${ue}</td></tr>`,ce+='<tr><th class="header"></th>',Bn[ue].forEach(fe=>ce+=`<th class="header">${fe} </th>`),ce+="</tr>",ne.forEach(fe=>{ce+=`<tr><td class="class-cell">${fe.name}</td>`,Bn[ue].forEach(Ce=>{const ye=ee.filter(we=>we.classId===fe.id&&we.day===Me&&we.shift===ue&&we.period===Ce);ce+='<td style="height: 60px;">',ye.forEach(we=>{const Ge=t.find(xe=>xe.id===we.subjectId),Pe=e.find(xe=>xe.id===we.teacherId),ut=n.find(xe=>xe.id===we.roomId),Se=ut?ut.name:we.roomId;ce+=`<div style="background-color: ${(Ge==null?void 0:Ge.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(Ge==null?void 0:Ge.name)||""} ${we.direction||""}</div>
                                <div class="meta">${(Pe==null?void 0:Pe.name)||""} ${Se?`(. ${Se})`:""}</div>
                            </div>`}),ce+="</td>"}),ce+="</tr>"}))})}),ce+="</table></body></html>";const ve=new Blob([ce],{type:"application/vnd.ms-excel"}),he=URL.createObjectURL(ve),de=document.createElement("a");de.href=he,de.download=`_22_${E}.xls`,document.body.appendChild(de),de.click(),document.body.removeChild(de)},Y=()=>{const ee=je(),ce={[At.Monday]:{header:"#fecaca",cell:"#fee2e2"},[At.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[At.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[At.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[At.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let ve=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ve+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[me.First,me.Second].forEach(ue=>{const ne=Bn[ue];ve+="<table>",ve+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${Vt.length*ne.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,ve+="<tr>",Vt.forEach(Ce=>{var we;const ye=((we=ce[Ce])==null?void 0:we.header)||"#f3f4f6";ve+=`<th colspan="${ne.length}" class="header" style="border: 2px solid #000; background-color: ${ye};">${Ce}</th>`}),ve+="</tr>",ve+="<tr>",Vt.forEach(Ce=>{var we;const ye=((we=ce[Ce])==null?void 0:we.header)||"#f3f4f6";ne.forEach(Ge=>ve+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${ye};"></th>`)}),ve+="</tr>";const fe="#e5e7eb";ve+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${fe};">${ue}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${fe};"></th>
            `,Vt.forEach(Ce=>{var we;const ye=((we=ce[Ce])==null?void 0:we.header)||"#f3f4f6";ne.forEach(Ge=>ve+=`<th class="header" style="width: 40px; background-color: ${ye};">${Ge}</th>`)}),ve+="</tr>",t.forEach(Ce=>{const ye=e.filter(we=>we.subjectIds.includes(Ce.id)&&we.shifts.includes(ue));ye.length!==0&&(ye.forEach((we,Ge)=>{ve+="<tr>",Ge===0&&(ve+=`<td rowspan="${ye.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Ce.name}</td>`),ve+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${we.name}</td>`,Vt.forEach(Pe=>{var Se;const ut=((Se=ce[Pe])==null?void 0:Se.cell)||"#fff";ne.forEach(xe=>{const He=ee.find(Le=>Le.teacherId===we.id&&Le.subjectId===Ce.id&&Le.day===Pe&&Le.period===xe&&Le.shift===ue);if(He){const Le=r.find(G=>G.id===He.classId),dt=n.find(G=>G.id===He.roomId),nt=dt?dt.name:He.roomId,mt=nt?`<sub>${nt}</sub>`:"",qt=He.direction?` <span style="font-size:10px">(${He.direction})</span>`:"";ve+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ut};">${Le?Le.name:""}${qt}${mt}</td>`}else ve+=`<td style="border: 1px solid #000; background-color: ${ut};"></td>`})}),ve+="</tr>"}),ve+=`<tr><td colspan="${2+Vt.length*ne.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),ve+="</table><br/><br/>"}),ve+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ve+="</body></html>";const he=new Blob([ve],{type:"application/vnd.ms-excel"}),de=URL.createObjectURL(he),Me=document.createElement("a");Me.href=de,Me.download=`__${E}.xls`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me)},O=()=>{const ee=je(),ce={[At.Monday]:{header:"#fecaca",cell:"#fee2e2"},[At.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[At.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[At.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[At.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}},ve=ne=>{if(!ne)return"";const fe=ne.toLowerCase();return fe.includes("")?"/":fe.includes("")?"":fe.includes("")?"":ne};let he=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 10pt; vertical-align: sub; display: block; line-height: 1; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;he+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[me.First,me.Second].forEach(ne=>{const fe=Bn[ne];he+="<table>",he+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${Vt.length*fe.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,he+="<tr>",Vt.forEach(ye=>{var Ge;const we=((Ge=ce[ye])==null?void 0:Ge.header)||"#f3f4f6";he+=`<th colspan="${fe.length}" class="header" style="border: 3px solid #000; background-color: ${we}; font-size: 20pt;">${ye}</th>`}),he+="</tr>",he+="<tr>",Vt.forEach(ye=>{var Ge;const we=((Ge=ce[ye])==null?void 0:Ge.header)||"#f3f4f6";he+=`<th colspan="${fe.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${we}; font-size: 16pt;"></th>`}),he+="</tr>";const Ce="#e5e7eb";he+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${Ce}; font-size: 24pt;">${ne}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${Ce};"></th>
            `,Vt.forEach(ye=>{var Ge;const we=((Ge=ce[ye])==null?void 0:Ge.header)||"#f3f4f6";fe.forEach(Pe=>he+=`<th class="header" style="width: 25px; background-color: ${we}; font-size: 16pt;">${Pe}</th>`)}),he+="</tr>",t.forEach(ye=>{const we=e.filter(Ge=>Ge.subjectIds.includes(ye.id)&&Ge.shifts.includes(ne));we.length!==0&&(we.forEach((Ge,Pe)=>{he+="<tr>",Pe===0&&(he+=`<td rowspan="${we.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${ye.name}</td>`),he+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${Ge.name}</td>`,Vt.forEach(ut=>{var xe;const Se=((xe=ce[ut])==null?void 0:xe.cell)||"#fff";fe.forEach(He=>{const Le=ee.find(dt=>dt.teacherId===Ge.id&&dt.subjectId===ye.id&&dt.day===ut&&dt.period===He&&dt.shift===ne);if(Le){const dt=r.find(q=>q.id===Le.classId),nt=n.find(q=>q.id===Le.roomId),mt=nt?nt.name:Le.roomId,qt=ve(mt||""),D=qt?`<sub>${qt}</sub>`:"",G=Le.direction?` <span style="font-size:10pt">(${Le.direction})</span>`:"";he+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${Se}; height: 60px; font-size: 18pt; line-height: 1.1;">${dt?dt.name:""}${G}${D}</td>`}else he+=`<td style="border: 1px solid #000; background-color: ${Se};"></td>`})}),he+="</tr>"}),he+=`<tr><td colspan="${2+Vt.length*fe.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),he+="</table><br/><br/>"}),he+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,he+="</body></html>";const de=new Blob([he],{type:"application/vnd.ms-excel"}),Me=URL.createObjectURL(de),ue=document.createElement("a");ue.href=Me,ue.download=`__${E}.xls`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},ae=()=>{const ee=je(),ce=r.filter(fe=>fe.name.startsWith(P)).sort((fe,Ce)=>fe.name.localeCompare(Ce.name)),ve=Array.from(new Set(ce.map(fe=>fe.shift))).sort(),he={[At.Monday]:{label:"#fecaca",cell:"#fee2e2"},[At.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[At.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[At.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[At.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let de=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;ve.forEach(fe=>{const Ce=ce.filter(we=>we.shift===fe),ye=Bn[fe];Ce.length!==0&&(de+="<table>",de+="<tr>",de+='<td style="border:none"></td>',de+='<td style="border:none"></td>',de+=`<td colspan="${Ce.length}" class="shift-header">${fe}</td>`,de+="</tr>",de+="<tr>",de+='<td style="border:none"></td>',de+='<td style="border:none"></td>',Ce.forEach(we=>{de+=`<td class="class-header">${we.name}</td>`}),de+="</tr>",Vt.forEach(we=>{const Ge=he[we]||{label:"#e5e7eb",cell:"#f3f4f6"};ye.forEach((Pe,ut)=>{de+="<tr>",ut===0&&(de+=`<td rowspan="${ye.length}" class="day-cell" style="background-color: ${Ge.label};">${we.toUpperCase()}</td>`),de+=`<td class="period-cell" style="background-color: ${Ge.label};">${Pe}</td>`,Ce.forEach(Se=>{const xe=ee.filter(He=>He.classId===Se.id&&He.day===we&&He.shift===fe&&He.period===Pe);de+=`<td class="content-cell" style="background-color: ${Ge.cell};">`,xe.forEach((He,Le)=>{Le>0&&(de+='<br style="mso-data-placement:same-cell;">');const dt=t.find(qt=>qt.id===He.subjectId),nt=n.find(qt=>qt.id===He.roomId),mt=nt?nt.name:He.roomId||"";de+=`<span class="subject">${(dt==null?void 0:dt.name)||""}</span>`,mt&&(de+=` <span class="room">${mt}</span>`)}),de+="</td>"}),de+="</tr>"}),de+=`<tr><td colspan="${2+Ce.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),de+="</table><br><br>")}),de+="</body></html>";const Me=new Blob([de],{type:"application/vnd.ms-excel"}),ue=URL.createObjectURL(Me),ne=document.createElement("a");ne.href=ue,ne.download=`__${P}_.xls`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)},ie=()=>{const ee=new Date(y),ce=ee.getMonth(),ve=ee.getFullYear(),he=c.filter(Se=>{const xe=new Date(Se.date);return xe.getMonth()===ce&&xe.getFullYear()===ve}).sort((Se,xe)=>new Date(Se.date).getTime()-new Date(xe.date).getTime());if(he.length===0){alert("      .");return}const de=new Map;he.forEach(Se=>{const xe=`${Se.scheduleItemId}_${Se.date}`,He=de.get(xe)||[];He.push(Se),de.set(xe,He)});const Me=[],ue=[];de.forEach(Se=>{var D;const xe=Se[0],He=a.find(G=>G.id===xe.scheduleItemId)||o.find(G=>G.id===xe.scheduleItemId);if(!He)return;const Le=r.find(G=>G.id===He.classId),dt=t.find(G=>G.id===He.subjectId),nt=e.find(G=>G.id===xe.originalTeacherId);let mt=xe.lessonAbsenceReason||((D=nt==null?void 0:nt.absenceReasons)==null?void 0:D[xe.date])||"";xe.replacementTeacherId===xe.originalTeacherId&&xe.replacementRoomId&&!xe.replacementClassId&&(mt=" "),xe.replacementClassId&&xe.replacementSubjectId&&!xe.isMerger&&(mt=" ");const qt={subs:Se,scheduleItem:He,cls:Le,subj:dt,origTeacher:nt,reason:mt};mt===" "?ue.push(qt):Me.push(qt)});let ne=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${ee.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const fe=Se=>Se.map(xe=>{const{subs:He,scheduleItem:Le,cls:dt,subj:nt,origTeacher:mt,reason:qt}=xe,D=He[0],G=new Date(D.date).toLocaleDateString("ru-RU");let q="";if(D.replacementTeacherId==="conducted")q=" ";else if(D.replacementTeacherId==="cancelled")q=" ";else if(q=He.map(Z=>{const J=e.find(W=>W.id===Z.replacementTeacherId);return J?J.name:""}).join(", "),D.isMerger){let Z=" ()";if(D.replacementClassId){const J=r.find(W=>W.id===D.replacementClassId);J&&(Z=` (  ${J.name})`)}q+=Z}else if(D.replacementClassId&&D.replacementSubjectId){const Z=r.find(W=>W.id===D.replacementClassId),J=t.find(W=>W.id===D.replacementSubjectId);q+=` ( ${(Z==null?void 0:Z.name)||"?"} ${(J==null?void 0:J.name)||"?"})`}const V=Le.roomId,Ee=D.replacementRoomId,se=Ee||V,oe=n.find(X=>X.id===se),S=oe?oe.name:se||"-",H=Ee?`${S} ( .)`:S;return`
                    <tr>
                        <td>${G}</td>
                        <td>${Le.period}</td>
                        <td>${Le.shift}</td>
                        <td>${(dt==null?void 0:dt.name)||"?"}</td>
                        <td>${(nt==null?void 0:nt.name)||"?"}</td>
                        <td>${(mt==null?void 0:mt.name)||"?"}</td>
                        <td>${q}</td>
                        <td>${H}</td>
                        <td>${qt}</td>
                    </tr>
                `}).join(""),Ce=(Se,xe=!1)=>`
            <table>
            <thead>
                <tr class="${xe?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${fe(Se)}
            </tbody>
            </table>
        `;Me.length>0?ne+=Ce(Me):ne+="<p>     .</p>",ue.length>0&&(ne+="<br/><br/>",ne+='<h3 style="color: #b91c1c;">   (  )</h3>',ne+=Ce(ue,!0));const ye=new Map;he.forEach(Se=>{var nt;if(Se.replacementTeacherId==="conducted"||Se.replacementTeacherId==="cancelled"||Se.replacementTeacherId===Se.originalTeacherId)return;const xe=e.find(mt=>mt.id===Se.replacementTeacherId);if(!xe)return;const He=ye.get(xe.id)||{name:xe.name,total:0,withoutRecord:0,merger:0,other:0},Le=e.find(mt=>mt.id===Se.originalTeacherId);let dt=Se.lessonAbsenceReason||((nt=Le==null?void 0:Le.absenceReasons)==null?void 0:nt[Se.date])||"";Se.replacementClassId&&Se.replacementSubjectId&&!Se.isMerger&&(dt=" "),He.total++,Se.isMerger?He.merger++:dt===" "?He.withoutRecord++:He.other++,ye.set(xe.id,He)});const we=Array.from(ye.values()).sort((Se,xe)=>Se.name.localeCompare(xe.name));we.length>0&&(ne+="<br/><br/>",ne+="<h3>   </h3>",ne+=`
             <table style="border-collapse: collapse; width: 50%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,we.forEach(Se=>{ne+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${Se.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Se.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Se.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Se.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Se.other}</td>
                     </tr>
                 `}),ne+="</tbody></table>"),ne+="</body></html>";const Ge=new Blob([ne],{type:"application/vnd.ms-excel"}),Pe=URL.createObjectURL(Ge),ut=document.createElement("a");ut.href=Pe,ut.download=`__${ee.getMonth()+1}_${ee.getFullYear()}.xls`,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut)},Re=()=>{const ee=new Date(y),ce=ee.getMonth(),ve=ee.getFullYear(),he=c.filter(fe=>{const Ce=new Date(fe.date),ye=Ce.getMonth()===ce&&Ce.getFullYear()===ve,we=fe.refusals&&fe.refusals.length>0;return ye&&we}).sort((fe,Ce)=>new Date(fe.date).getTime()-new Date(Ce.date).getTime());if(he.length===0){alert("      .");return}let de=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${ee.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;he.forEach(fe=>{const Ce=a.find(xe=>xe.id===fe.scheduleItemId)||o.find(xe=>xe.id===fe.scheduleItemId);if(!Ce)return;const ye=new Date(fe.date).toLocaleDateString("ru-RU"),we=r.find(xe=>xe.id===Ce.classId),Ge=t.find(xe=>xe.id===Ce.subjectId),Pe=e.find(xe=>xe.id===fe.originalTeacherId);let ut="";if(fe.replacementTeacherId==="conducted")ut=" ";else if(fe.replacementTeacherId==="cancelled")ut=" ";else{const xe=e.find(He=>He.id===fe.replacementTeacherId);ut=xe?xe.name:""}const Se=(fe.refusals||[]).map(xe=>{const He=e.find(Le=>Le.id===xe);return He?He.name:""}).join(", ");de+=`
                <tr>
                    <td>${ye}</td>
                    <td>${Ce.period}</td>
                    <td>${Ce.shift}</td>
                    <td>${(we==null?void 0:we.name)||"?"}</td>
                    <td>${(Ge==null?void 0:Ge.name)||"?"}</td>
                    <td>${(Pe==null?void 0:Pe.name)||"?"}</td>
                    <td>${ut}</td>
                    <td>${Se}</td>
                </tr>
            `}),de+="</tbody></table></body></html>";const Me=new Blob([de],{type:"application/vnd.ms-excel"}),ue=URL.createObjectURL(Me),ne=document.createElement("a");ne.href=ue,ne.download=`__${ee.getMonth()+1}_${ee.getFullYear()}.xls`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)},Ue=()=>{const ee=je();let ce=`							
`;Vt.forEach(ve=>{[me.First,me.Second].forEach(he=>{r.filter(Me=>Me.shift===he).forEach(Me=>{Bn[he].forEach(ue=>{ee.filter(fe=>fe.classId===Me.id&&fe.day===ve&&fe.shift===he&&fe.period===ue).forEach(fe=>{const Ce=t.find(Pe=>Pe.id===fe.subjectId),ye=e.find(Pe=>Pe.id===fe.teacherId),we=n.find(Pe=>Pe.id===fe.roomId),Ge=we?we.name:fe.roomId||"";ce+=`${ve}	${he}	${Me.name}	${ue}	${(Ce==null?void 0:Ce.name)||""}	${(ye==null?void 0:ye.name)||""}	${Ge}	${fe.direction||""}
`})})})})}),navigator.clipboard.writeText(ce).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},De=async()=>{I(!0);try{if(!f.current){alert("   1- .");return}const ee=await QI(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),ce=document.createElement("a");ce.href=ee.toDataURL("image/png"),ce.download=`_${y}_1.png`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)}catch(ee){console.error(ee),alert("   ")}finally{I(!1)}},Ke=async()=>{I(!0);try{if(!m.current){alert("   2- .");return}const ee=await QI(m.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),ce=document.createElement("a");ce.href=ee.toDataURL("image/png"),ce.download=`_${y}_2.png`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)}catch(ee){console.error(ee),alert("   ")}finally{I(!1)}},Ft=k.useMemo(()=>c.filter(ee=>ee.date===y),[c,y]),Oe=k.useMemo(()=>{const ee=et(y);return Ft.filter(ce=>{const ve=ee.find(he=>he.id===ce.scheduleItemId);return ve&&ve.shift===me.First}).filter(ce=>ce.replacementTeacherId!=="conducted").length>0},[Ft,et,y]),It=k.useMemo(()=>{const ee=et(y);return Ft.filter(ce=>{const ve=ee.find(he=>he.id===ce.scheduleItemId);return ve&&ve.shift===me.Second}).filter(ce=>ce.replacementTeacherId!=="conducted").length>0},[Ft,et,y]),Qt=ee=>{const ce=et(y),ve=Ft.filter(de=>{const Me=ce.find(ue=>ue.id===de.scheduleItemId);return Me&&Me.shift===ee}).filter(de=>de.replacementTeacherId!=="conducted");if(ve.length===0)return null;const he=Array.from(new Set(ve.map(de=>de.scheduleItemId))).sort((de,Me)=>{const ue=ce.find(fe=>fe.id===de),ne=ce.find(fe=>fe.id===Me);return((ue==null?void 0:ue.period)??0)-((ne==null?void 0:ne.period)??0)});return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:ee}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:he.map(de=>{var q,V,Ee;const Me=ve.filter(se=>se.scheduleItemId===de),ue=Me[0],ne=ce.find(se=>se.id===de);if(!ne)return null;const fe=r.find(se=>se.id===ne.classId),Ce=t.find(se=>se.id===ne.subjectId),ye=e.find(se=>se.id===ue.originalTeacherId),we=ue.replacementRoomId,Ge=ne.roomId?n.find(se=>se.id===ne.roomId):null,Pe=Ge?Ge.name:ne.roomId||"",ut=we?n.find(se=>se.id===we):null,Se=ut?ut.name:we||"",xe=ue.replacementTeacherId==="cancelled",He=(q=ye==null?void 0:ye.absenceReasons)==null?void 0:q[y],Le=ue.lessonAbsenceReason,dt=Le===" "?Le:He===" "?He:"",nt=ue.replacementClassId?r.find(se=>se.id===ue.replacementClassId):null,mt=ue.replacementSubjectId?t.find(se=>se.id===ue.replacementSubjectId):null,qt=ue.replacementTeacherId===ue.originalTeacherId&&we&&!nt,D=nt&&mt&&!ue.isMerger,G=ue.replacementTeacherId===ue.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:ne.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:fe==null?void 0:fe.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Ce==null?void 0:Ce.name}),ne.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:ne.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!G&&!qt&&!D&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[ye==null?void 0:ye.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),dt&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:dt})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${xe?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:qt?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:ye==null?void 0:ye.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):D?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:ye==null?void 0:ye.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",nt==null?void 0:nt.name]})]}):xe?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:Me.length>1||ue.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:Me.map(se=>{const oe=e.find(S=>S.id===se.replacementTeacherId);return oe?oe.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",ue.replacementClassId?`(${(V=r.find(se=>se.id===ue.replacementClassId))==null?void 0:V.name})`:""]})]}):l.jsx("span",{children:(Ee=e.find(se=>se.id===ue.replacementTeacherId))==null?void 0:Ee.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${we?"text-indigo-600":"text-slate-700"}`,children:we&&we!==ne.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Pe}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Se})]}):l.jsx("span",{className:"text-xl",children:Pe})})]},String(de))})})]})]})},Ze=async()=>{const ee=Math.random().toString(36).substr(2,9);await Zr.setPublicData(ee,Ve),await i({settings:{...A,publicScheduleId:ee}});const ce=`${window.location.origin}${window.location.pathname}#/public?id=${ee}`;v(ce),_(ee),R(!0)},gt=async()=>{!A.publicScheduleId||!window.confirm(" ,     ?      .")||(await Zr.deletePublicData(A.publicScheduleId),await i({settings:{...A,publicScheduleId:null}}),alert("  ."),v(""),_(""))},Bt=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(y).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),$e=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]}),_e=()=>{const ee=je(),ce=r.filter(de=>de.name.startsWith(P)).sort((de,Me)=>de.name.localeCompare(Me.name)),ve=Array.from(new Set(ce.map(de=>de.shift))).sort(),he={[At.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[At.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[At.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[At.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[At.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return ce.length===0?l.jsx("div",{className:"text-center p-10",children:"    "}):l.jsx("div",{className:"font-sans text-black",children:ve.map(de=>{const Me=ce.filter(ne=>ne.shift===de),ue=Bn[de];return Me.length===0?null:l.jsx("div",{className:"mb-10 page-break-inside-avoid",children:l.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{colSpan:Me.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:de})]}),l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),Me.map(ne=>l.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:ne.name},String(ne.id)))]})]}),l.jsx("tbody",{children:Vt.map(ne=>{const fe=he[ne]||{label:"bg-gray-200",cell:"bg-gray-100"};return l.jsxs(yA.Fragment,{children:[ue.map((Ce,ye)=>l.jsxs("tr",{children:[ye===0&&l.jsx("td",{rowSpan:ue.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${fe.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:ne===At.Monday?"":ne===At.Tuesday?"":ne===At.Wednesday?"":ne===At.Thursday?"":ne===At.Friday?"":ne}),l.jsx("td",{className:`border-2 border-black font-bold text-base ${fe.label}`,children:Ce}),Me.map(we=>{const Ge=ee.filter(Pe=>Pe.classId===we.id&&Pe.day===ne&&Pe.shift===de&&Pe.period===Ce);return l.jsx("td",{className:`border-2 border-black p-1 h-12 ${fe.cell}`,children:Ge.map(Pe=>{const ut=t.find(He=>He.id===Pe.subjectId),Se=n.find(He=>He.id===Pe.roomId),xe=Se?Se.name:Pe.roomId||"";return l.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[l.jsx("span",{children:ut==null?void 0:ut.name}),xe&&l.jsx("span",{className:"font-black",children:xe})]},String(Pe.id))})},String(we.id))})]},`${String(ne)}-${Ce}`)),l.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:l.jsx("td",{colSpan:2+Me.length})})]},String(ne))})})]})},String(de))})})};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>Zr.exportJson(Ve),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:Ae,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var ee;return(ee=h.current)==null?void 0:ee.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx($,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx($,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:y,onChange:ee=>B(ee.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:De,disabled:w||!Oe,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:w?l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:Ke,disabled:w||!It,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:w?l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:Ft.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Bt,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx($e,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[Oe&&l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Bt,{}),Qt(me.First),l.jsx($e,{})]}),It&&l.jsxs("div",{ref:m,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Bt,{}),Qt(me.Second),l.jsx($e,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsx("select",{value:P,onChange:ee=>b(ee.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:We.map(ee=>l.jsxs("option",{value:ee,children:[ee,"- "]},ee))})]}),l.jsxs("button",{onClick:()=>N(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Printer",size:20}),"  "]}),l.jsxs("button",{onClick:ae,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:E,onChange:ee=>x(Number(ee.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:L,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:Y,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:O,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Ue,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:ie,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:Re,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),A.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.publicScheduleId})]}),l.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx($,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:gt,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:Ze,disabled:w,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx($,{name:"Share2",size:20}),"  "]})]}),l.jsx(FA,{isOpen:F,onClose:()=>R(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),U&&l.jsxs(l.Fragment,{children:[l.jsx(I6,{value:U,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:U}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(U),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Copy",size:16}),"  "]})]})]})}),Q&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",P,"- )"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx($,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:l.jsx(_e,{})})]})]})},E6=()=>{var x;const{subjects:t,teachers:e,classes:r}=WA(),{schedule1:n,schedule2:A,substitutions:s}=za(),[i,a]=k.useState("load"),[o,c]=k.useState(((x=r[0])==null?void 0:x.id)||""),[d,h]=k.useState(()=>{const w=new Date().getMonth();return w>=0&&w<=4?2:1}),f=k.useMemo(()=>d===2?A:n,[d,n,A]),m=k.useMemo(()=>e.map(I=>{const F=f.filter(N=>N.teacherId===I.id),R=F.length,U=R*4,v=s.filter(N=>N.replacementTeacherId===I.id).length,C=s.filter(N=>N.originalTeacherId===I.id).length,_=U+v-C,Q={};return F.forEach(N=>{const P=t.find(b=>b.id===N.subjectId);P&&(Q[P.name]=(Q[P.name]||0)+1)}),{id:I.id,name:I.name,weeklyHours:R,subsTaken:v,subsMissed:C,actualHours:_,subjectBreakdown:Q}}).sort((I,F)=>F.actualHours-I.actualHours),[e,f,s,t]),y=k.useMemo(()=>o?Vt.map(w=>{const F=f.filter(R=>R.classId===o&&R.day===w).reduce((R,U)=>{const v=t.find(C=>C.id===U.subjectId);return R+((v==null?void 0:v.difficulty)||5)},0);return{label:w,value:F}}):[],[f,t,o]),B=k.useMemo(()=>{const w=e.map(F=>({name:F.name,count:s.filter(R=>R.replacementTeacherId===F.id).length})).sort((F,R)=>R.count-F.count).slice(0,5),I=e.map(F=>({name:F.name,count:F.unavailableDates.length})).sort((F,R)=>R.count-F.count).slice(0,5);return{heroes:w,absentees:I}},[e,s]),E=()=>{let w="";i==="load"?w=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(R=>`"${R.name}",${R.weeklyHours},${R.subsTaken},${R.subsMissed},${R.actualHours},"${Object.entries(R.subjectBreakdown).map(([U,v])=>U+": "+v).join(", ")}"`).join(`
`):i==="sanpin"&&(w=`Day,Score
`+y.map(R=>`${R.label},${R.value}`).join(`
`));const I=new Blob([`\uFEFF${w}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(I),F.download=`report_${i}_${d}sem.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx($,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:w=>h(Number(w.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:E,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx($,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>a("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(w=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:w.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:w.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",w.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",w.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:w.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.subjectBreakdown).map(([I,F])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[I,": ",F]},I))})})]},w.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:w=>c(w.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))})]}),l.jsx(op,{items:y,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(op,{items:B.heroes.map(w=>({label:w.name,value:w.count})),max:Math.max(...B.heroes.map(w=>w.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(op,{items:B.absentees.map(w=>({label:w.name,value:w.count})),max:Math.max(...B.absentees.map(w=>w.count),1),barClassName:"bg-red-500"})]})]})]})},b6=()=>{const{setGuestRole:t,role:e,loading:r}=oo(),n=zc(),[A,s]=k.useState("select"),[i,a]=k.useState(""),[o,c]=k.useState(""),[d,h]=k.useState(""),[f,m]=k.useState(!1);k.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher")&&n("/dashboard")},[e,r,n]);const y=async E=>{if(E.preventDefault(),h(""),m(!0),!yn){h("Firebase .  ."),m(!1);return}try{let x=i;A==="teacher"&&(x="teacher@gymnasium22.com"),await tM(yn,x,o)}catch(x){console.error("Firebase Auth Error:",x);const w=x==null?void 0:x.code;let I="   .";switch(w){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":I="   .";break;case"auth/invalid-email":I="  email.";break;case"auth/too-many-requests":I="  . .";break;default:I=" .  ."}h(I)}finally{m(!1)}},B=()=>{t(),n("/schedule")};return l.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),l.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),l.jsxs("div",{className:"glass-panel rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:l.jsx($,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),A==="select"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:B,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"Users",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx($,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>s("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"BookOpen",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),l.jsx($,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),l.jsxs("button",{onClick:()=>s("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"Settings",size:24})}),l.jsxs("div",{className:"relative z-10",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),l.jsx($,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),A!=="select"&&l.jsxs("form",{onSubmit:y,className:"space-y-5 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx("button",{type:"button",onClick:()=>{s("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx($,{name:"ArrowRight",className:"rotate-180",size:24})}),l.jsx("h2",{className:"font-bold text-xl dark:text-white",children:A==="teacher"?"  ":"  "})]}),A==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"email",value:i,onChange:E=>a(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),l.jsx("input",{type:"password",value:o,onChange:E=>c(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),l.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?l.jsx($,{name:"Loader",className:"animate-spin",size:20}):l.jsx($,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},mi=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:A}=oo();return A?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(_h,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(_h,{to:"/login",replace:!0})},T6=()=>{const{role:t,loading:e}=oo();return e?null:t==="guest"?l.jsx(_h,{to:"/schedule",replace:!0}):l.jsx(_h,{to:"/dashboard",replace:!0})},F6=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(localStorage.getItem("theme")||"light"),[A,s]=k.useState(localStorage.getItem("new_year_mode")==="true"),{isLoading:i}=WA(),{logout:a,role:o,user:c}=oo();if(k.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",r)},[r]),k.useEffect(()=>{A?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),localStorage.setItem("new_year_mode",String(A))},[A]),i)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(o||""));return l.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${A?"festive-bg":"mesh-gradient-bg"}`,children:[A&&l.jsx("div",{className:"snow-overlay no-print"}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none`,children:l.jsxs("div",{className:"h-full flex flex-col relative",children:[A&&l.jsx("div",{className:"bg-garland"}),l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[l.jsx($,{name:"GraduationCap",size:24}),A&&l.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:[l.jsx("div",{className:"px-2 mb-2",children:l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""})}),h.map(f=>l.jsxs(Nd,{to:f.to,onClick:()=>e(!1),className:({isActive:m})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${m?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx($,{name:f.icon,size:20}),f.label]},f.to))]}),l.jsx("div",{className:"hidden lg:block",children:l.jsx(QO,{})}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between px-2",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),l.jsx("button",{onClick:a,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx($,{name:"LogOut",size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?l.jsx($,{name:"Moon",size:18}):l.jsx($,{name:"Sun",size:18})}),l.jsx("button",{onClick:()=>s(!A),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${A?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:l.jsx($,{name:"Snowflake",size:18,className:A?"animate-spin-slow":""})})]})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),A&&l.jsx("div",{className:"ml-auto text-xl",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:l.jsx(T2,{})}),l.jsx(UO,{onMenuClick:()=>e(!0),role:o})]})]})},Q6=()=>{const[t,e]=k.useState(null),[r,n]=k.useState(!0),[A]=G2(),s=A.get("id");return k.useEffect(()=>{s?(n(!0),Zr.getPublicData(s).then(i=>{const a={...on,...i,settings:{...on.settings,...i==null?void 0:i.settings}};e(a),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[s]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(QF,{initialData:t,children:l.jsx(kF,{children:l.jsx(RF,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx($,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(jF,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx($,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function U6(){return l.jsx(bO,{children:l.jsx(QF,{children:l.jsx(kF,{children:l.jsx(RF,{children:l.jsx(j2,{children:l.jsxs(Q2,{children:[l.jsx(pn,{path:"/login",element:l.jsx(b6,{})}),l.jsxs(pn,{path:"/",element:l.jsx(mi,{children:l.jsx(F6,{})}),children:[l.jsx(pn,{index:!0,element:l.jsx(T6,{})}),l.jsx(pn,{path:"dashboard",element:l.jsx(mi,{allowedRoles:["admin","teacher"],children:l.jsx(SO,{})})}),l.jsx(pn,{path:"schedule",element:l.jsx(SI,{semester:1})}),l.jsx(pn,{path:"schedule2",element:l.jsx(SI,{semester:2})}),l.jsx(pn,{path:"substitutions",element:l.jsx(mi,{allowedRoles:["admin"],children:l.jsx(jO,{})})}),l.jsx(pn,{path:"directory",element:l.jsx(mi,{allowedRoles:["admin"],children:l.jsx(LO,{})})}),l.jsx(pn,{path:"admin",element:l.jsx(mi,{allowedRoles:["admin"],children:l.jsx(MO,{})})}),l.jsx(pn,{path:"reports",element:l.jsx(mi,{allowedRoles:["admin"],children:l.jsx(E6,{})})}),l.jsx(pn,{path:"export",element:l.jsx(mi,{allowedRoles:["admin"],children:l.jsx(_6,{})})})]}),l.jsx(pn,{path:"/public",element:l.jsx(Q6,{})})]})})})})})})}const SI=({semester:t=1})=>{const{role:e}=oo();return l.jsx(jF,{readOnly:e!=="admin",semester:t})};Fp.createRoot(document.getElementById("root")).render(l.jsx(yA.StrictMode,{children:l.jsx(U6,{})}));
