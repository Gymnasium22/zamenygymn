function EF(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(n,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=r(s);fetch(s.href,A)}})();function YC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZC={exports:{}},Df={},eI={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=Symbol.for("react.element"),kF=Symbol.for("react.portal"),TF=Symbol.for("react.fragment"),FF=Symbol.for("react.strict_mode"),SF=Symbol.for("react.profiler"),UF=Symbol.for("react.provider"),QF=Symbol.for("react.context"),NF=Symbol.for("react.forward_ref"),RF=Symbol.for("react.suspense"),jF=Symbol.for("react.memo"),DF=Symbol.for("react.lazy"),My=Symbol.iterator;function PF(t){return t===null||typeof t!="object"?null:(t=My&&t[My]||t["@@iterator"],typeof t=="function"?t:null)}var tI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rI=Object.assign,nI={};function nl(t,e,r){this.props=t,this.context=e,this.refs=nI,this.updater=r||tI}nl.prototype.isReactComponent={};nl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sI(){}sI.prototype=nl.prototype;function Y0(t,e,r){this.props=t,this.context=e,this.refs=nI,this.updater=r||tI}var Z0=Y0.prototype=new sI;Z0.constructor=Y0;rI(Z0,nl.prototype);Z0.isPureReactComponent=!0;var Oy=Array.isArray,AI=Object.prototype.hasOwnProperty,ex={current:null},iI={key:!0,ref:!0,__self:!0,__source:!0};function aI(t,e,r){var n,s={},A=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)AI.call(e,n)&&!iI.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:mu,type:t,key:A,ref:i,props:s,_owner:ex.current}}function LF(t,e){return{$$typeof:mu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tx(t){return typeof t=="object"&&t!==null&&t.$$typeof===mu}function MF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Hy=/\/+/g;function $g(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MF(""+t.key):e.toString(36)}function Zd(t,e,r,n,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case mu:case kF:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+$g(i,0):n,Oy(s)?(r="",t!=null&&(r=t.replace(Hy,"$&/")+"/"),Zd(s,e,r,"",function(c){return c})):s!=null&&(tx(s)&&(s=LF(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Hy,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Oy(t))for(var o=0;o<t.length;o++){A=t[o];var l=n+$g(A,o);i+=Zd(A,e,r,l,s)}else if(l=PF(t),typeof l=="function")for(t=l.call(t),o=0;!(A=t.next()).done;)A=A.value,l=n+$g(A,o++),i+=Zd(A,e,r,l,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function nd(t,e,r){if(t==null)return t;var n=[],s=0;return Zd(t,n,"","",function(A){return e.call(r,A,s++)}),n}function OF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},eh={transition:null},HF={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:eh,ReactCurrentOwner:ex};function oI(){throw Error("act(...) is not supported in production builds of React.")}ct.Children={map:nd,forEach:function(t,e,r){nd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return nd(t,function(){e++}),e},toArray:function(t){return nd(t,function(e){return e})||[]},only:function(t){if(!tx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=nl;ct.Fragment=TF;ct.Profiler=SF;ct.PureComponent=Y0;ct.StrictMode=FF;ct.Suspense=RF;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HF;ct.act=oI;ct.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=rI({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=ex.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)AI.call(e,l)&&!iI.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:mu,type:t.type,key:s,ref:A,props:n,_owner:i}};ct.createContext=function(t){return t={$$typeof:QF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UF,_context:t},t.Consumer=t};ct.createElement=aI;ct.createFactory=function(t){var e=aI.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:NF,render:t}};ct.isValidElement=tx;ct.lazy=function(t){return{$$typeof:DF,_payload:{_status:-1,_result:t},_init:OF}};ct.memo=function(t,e){return{$$typeof:jF,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=eh.transition;eh.transition={};try{t()}finally{eh.transition=e}};ct.unstable_act=oI;ct.useCallback=function(t,e){return mn.current.useCallback(t,e)};ct.useContext=function(t){return mn.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};ct.useEffect=function(t,e){return mn.current.useEffect(t,e)};ct.useId=function(){return mn.current.useId()};ct.useImperativeHandle=function(t,e,r){return mn.current.useImperativeHandle(t,e,r)};ct.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return mn.current.useMemo(t,e)};ct.useReducer=function(t,e,r){return mn.current.useReducer(t,e,r)};ct.useRef=function(t){return mn.current.useRef(t)};ct.useState=function(t){return mn.current.useState(t)};ct.useSyncExternalStore=function(t,e,r){return mn.current.useSyncExternalStore(t,e,r)};ct.useTransition=function(){return mn.current.useTransition()};ct.version="18.3.1";eI.exports=ct;var _=eI.exports;const zs=YC(_),VF=EF({__proto__:null,default:zs},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KF=_,GF=Symbol.for("react.element"),zF=Symbol.for("react.fragment"),$F=Object.prototype.hasOwnProperty,WF=KF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qF={key:!0,ref:!0,__self:!0,__source:!0};function lI(t,e,r){var n,s={},A=null,i=null;r!==void 0&&(A=""+r),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)$F.call(e,n)&&!qF.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:GF,type:t,key:A,ref:i,props:s,_owner:WF.current}}Df.Fragment=zF;Df.jsx=lI;Df.jsxs=lI;ZC.exports=Df;var a=ZC.exports,tm={},cI={exports:{}},Hn={},uI={exports:{}},dI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ae,ye){var Te=Ae.length;Ae.push(ye);e:for(;0<Te;){var Re=Te-1>>>1,Pe=Ae[Re];if(0<s(Pe,ye))Ae[Re]=ye,Ae[Te]=Pe,Te=Re;else break e}}function r(Ae){return Ae.length===0?null:Ae[0]}function n(Ae){if(Ae.length===0)return null;var ye=Ae[0],Te=Ae.pop();if(Te!==ye){Ae[0]=Te;e:for(var Re=0,Pe=Ae.length,q=Pe>>>1;Re<q;){var $=2*(Re+1)-1,Se=Ae[$],xe=$+1,Le=Ae[xe];if(0>s(Se,Te))xe<Pe&&0>s(Le,Se)?(Ae[Re]=Le,Ae[xe]=Te,Re=xe):(Ae[Re]=Se,Ae[$]=Te,Re=$);else if(xe<Pe&&0>s(Le,Te))Ae[Re]=Le,Ae[xe]=Te,Re=xe;else break e}}return ye}function s(Ae,ye){var Te=Ae.sortIndex-ye.sortIndex;return Te!==0?Te:Ae.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],c=[],d=1,h=null,f=3,p=!1,w=!1,B=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Ae){for(var ye=r(c);ye!==null;){if(ye.callback===null)n(c);else if(ye.startTime<=Ae)n(c),ye.sortIndex=ye.expirationTime,e(l,ye);else break;ye=r(c)}}function Q(Ae){if(B=!1,I(Ae),!w)if(r(l)!==null)w=!0,Xe(N);else{var ye=r(c);ye!==null&&Ke(Q,ye.startTime-Ae)}}function N(Ae,ye){w=!1,B&&(B=!1,C(y),y=-1),p=!0;var Te=f;try{for(I(ye),h=r(l);h!==null&&(!(h.expirationTime>ye)||Ae&&!R());){var Re=h.callback;if(typeof Re=="function"){h.callback=null,f=h.priorityLevel;var Pe=Re(h.expirationTime<=ye);ye=t.unstable_now(),typeof Pe=="function"?h.callback=Pe:h===r(l)&&n(l),I(ye)}else n(l);h=r(l)}if(h!==null)var q=!0;else{var $=r(c);$!==null&&Ke(Q,$.startTime-ye),q=!1}return q}finally{h=null,f=Te,p=!1}}var S=!1,m=null,y=-1,v=5,k=-1;function R(){return!(t.unstable_now()-k<v)}function L(){if(m!==null){var Ae=t.unstable_now();k=Ae;var ye=!0;try{ye=m(!0,Ae)}finally{ye?U():(S=!1,m=null)}}else S=!1}var U;if(typeof b=="function")U=function(){b(L)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,We=Oe.port2;Oe.port1.onmessage=L,U=function(){We.postMessage(null)}}else U=function(){E(L,0)};function Xe(Ae){m=Ae,S||(S=!0,U())}function Ke(Ae,ye){y=E(function(){Ae(t.unstable_now())},ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ae){Ae.callback=null},t.unstable_continueExecution=function(){w||p||(w=!0,Xe(N))},t.unstable_forceFrameRate=function(Ae){0>Ae||125<Ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<Ae?Math.floor(1e3/Ae):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(Ae){switch(f){case 1:case 2:case 3:var ye=3;break;default:ye=f}var Te=f;f=ye;try{return Ae()}finally{f=Te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ae,ye){switch(Ae){case 1:case 2:case 3:case 4:case 5:break;default:Ae=3}var Te=f;f=Ae;try{return ye()}finally{f=Te}},t.unstable_scheduleCallback=function(Ae,ye,Te){var Re=t.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Re+Te:Re):Te=Re,Ae){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=Te+Pe,Ae={id:d++,callback:ye,priorityLevel:Ae,startTime:Te,expirationTime:Pe,sortIndex:-1},Te>Re?(Ae.sortIndex=Te,e(c,Ae),r(l)===null&&Ae===r(c)&&(B?(C(y),y=-1):B=!0,Ke(Q,Te-Re))):(Ae.sortIndex=Pe,e(l,Ae),w||p||(w=!0,Xe(N))),Ae},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(Ae){var ye=f;return function(){var Te=f;f=ye;try{return Ae.apply(this,arguments)}finally{f=Te}}}})(dI);uI.exports=dI;var XF=uI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JF=_,Ln=XF;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hI=new Set,Rc={};function Ca(t,e){So(t,e),So(t+"Capture",e)}function So(t,e){for(Rc[t]=e,t=0;t<e.length;t++)hI.add(e[t])}var rA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,YF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vy={},Ky={};function ZF(t){return rm.call(Ky,t)?!0:rm.call(Vy,t)?!1:YF.test(t)?Ky[t]=!0:(Vy[t]=!0,!1)}function eS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tS(t,e,r,n){if(e===null||typeof e>"u"||eS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xn(t,e,r,n,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var $r={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$r[t]=new xn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$r[e]=new xn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$r[t]=new xn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$r[t]=new xn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$r[t]=new xn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$r[t]=new xn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$r[t]=new xn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$r[t]=new xn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$r[t]=new xn(t,5,!1,t.toLowerCase(),null,!1,!1)});var rx=/[\-:]([a-z])/g;function nx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rx,nx);$r[e]=new xn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rx,nx);$r[e]=new xn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rx,nx);$r[e]=new xn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$r[t]=new xn(t,1,!1,t.toLowerCase(),null,!1,!1)});$r.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$r[t]=new xn(t,1,!1,t.toLowerCase(),null,!0,!0)});function sx(t,e,r,n){var s=$r.hasOwnProperty(e)?$r[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tS(e,r,s,n)&&(r=null),n||s===null?ZF(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var uA=JF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sd=Symbol.for("react.element"),no=Symbol.for("react.portal"),so=Symbol.for("react.fragment"),Ax=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),fI=Symbol.for("react.provider"),gI=Symbol.for("react.context"),ix=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),Am=Symbol.for("react.suspense_list"),ax=Symbol.for("react.memo"),TA=Symbol.for("react.lazy"),pI=Symbol.for("react.offscreen"),Gy=Symbol.iterator;function Tl(t){return t===null||typeof t!="object"?null:(t=Gy&&t[Gy]||t["@@iterator"],typeof t=="function"?t:null)}var ir=Object.assign,Wg;function ql(t){if(Wg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Wg=e&&e[1]||""}return`
`+Wg+t}var qg=!1;function Xg(t,e){if(!t||qg)return"";qg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=n.stack.split(`
`),i=s.length-1,o=A.length-1;1<=i&&0<=o&&s[i]!==A[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==A[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==A[o]){var l=`
`+s[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=o);break}}}finally{qg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ql(t):""}function rS(t){switch(t.tag){case 5:return ql(t.type);case 16:return ql("Lazy");case 13:return ql("Suspense");case 19:return ql("SuspenseList");case 0:case 2:case 15:return t=Xg(t.type,!1),t;case 11:return t=Xg(t.type.render,!1),t;case 1:return t=Xg(t.type,!0),t;default:return""}}function im(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case so:return"Fragment";case no:return"Portal";case nm:return"Profiler";case Ax:return"StrictMode";case sm:return"Suspense";case Am:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gI:return(t.displayName||"Context")+".Consumer";case fI:return(t._context.displayName||"Context")+".Provider";case ix:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ax:return e=t.displayName||null,e!==null?e:im(t.type)||"Memo";case TA:e=t._payload,t=t._init;try{return im(t(e))}catch{}}return null}function nS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return im(e);case 8:return e===Ax?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sS(t){var e=mI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,A=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ad(t){t._valueTracker||(t._valueTracker=sS(t))}function xI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=mI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Th(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function am(t,e){var r=e.checked;return ir({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function zy(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ui(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wI(t,e){e=e.checked,e!=null&&sx(t,"checked",e,!1)}function om(t,e){wI(t,e);var r=ui(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lm(t,e.type,r):e.hasOwnProperty("defaultValue")&&lm(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $y(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function lm(t,e,r){(e!=="number"||Th(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Xl=Array.isArray;function wo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ui(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function cm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return ir({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wy(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(pe(92));if(Xl(r)){if(1<r.length)throw Error(pe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ui(r)}}function yI(t,e){var r=ui(e.value),n=ui(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function qy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function um(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var id,BI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(id=id||document.createElement("div"),id.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=id.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var hc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AS=["Webkit","ms","Moz","O"];Object.keys(hc).forEach(function(t){AS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hc[e]=hc[t]})});function bI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||hc.hasOwnProperty(t)&&hc[t]?(""+e).trim():e+"px"}function CI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=bI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var iS=ir({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dm(t,e){if(e){if(iS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function hm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fm=null;function ox(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,yo=null,vo=null;function Xy(t){if(t=yu(t)){if(typeof gm!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=Hf(e),gm(t.stateNode,t.type,e))}}function II(t){yo?vo?vo.push(t):vo=[t]:yo=t}function _I(){if(yo){var t=yo,e=vo;if(vo=yo=null,Xy(t),e)for(t=0;t<e.length;t++)Xy(e[t])}}function EI(t,e){return t(e)}function kI(){}var Jg=!1;function TI(t,e,r){if(Jg)return t(e,r);Jg=!0;try{return EI(t,e,r)}finally{Jg=!1,(yo!==null||vo!==null)&&(kI(),_I())}}function Dc(t,e){var r=t.stateNode;if(r===null)return null;var n=Hf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(pe(231,e,typeof r));return r}var pm=!1;if(rA)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){pm=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{pm=!1}function aS(t,e,r,n,s,A,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var fc=!1,Fh=null,Sh=!1,mm=null,oS={onError:function(t){fc=!0,Fh=t}};function lS(t,e,r,n,s,A,i,o,l){fc=!1,Fh=null,aS.apply(oS,arguments)}function cS(t,e,r,n,s,A,i,o,l){if(lS.apply(this,arguments),fc){if(fc){var c=Fh;fc=!1,Fh=null}else throw Error(pe(198));Sh||(Sh=!0,mm=c)}}function Ia(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function FI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jy(t){if(Ia(t)!==t)throw Error(pe(188))}function uS(t){var e=t.alternate;if(!e){if(e=Ia(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var A=s.alternate;if(A===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===r)return Jy(s),t;if(A===n)return Jy(s),e;A=A.sibling}throw Error(pe(188))}if(r.return!==n.return)r=s,n=A;else{for(var i=!1,o=s.child;o;){if(o===r){i=!0,r=s,n=A;break}if(o===n){i=!0,n=s,r=A;break}o=o.sibling}if(!i){for(o=A.child;o;){if(o===r){i=!0,r=A,n=s;break}if(o===n){i=!0,n=A,r=s;break}o=o.sibling}if(!i)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?t:e}function SI(t){return t=uS(t),t!==null?UI(t):null}function UI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UI(t);if(e!==null)return e;t=t.sibling}return null}var QI=Ln.unstable_scheduleCallback,Yy=Ln.unstable_cancelCallback,dS=Ln.unstable_shouldYield,hS=Ln.unstable_requestPaint,hr=Ln.unstable_now,fS=Ln.unstable_getCurrentPriorityLevel,lx=Ln.unstable_ImmediatePriority,NI=Ln.unstable_UserBlockingPriority,Uh=Ln.unstable_NormalPriority,gS=Ln.unstable_LowPriority,RI=Ln.unstable_IdlePriority,Pf=null,ks=null;function pS(t){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(Pf,t,void 0,(t.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:wS,mS=Math.log,xS=Math.LN2;function wS(t){return t>>>=0,t===0?32:31-(mS(t)/xS|0)|0}var ad=64,od=4194304;function Jl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,A=t.pingedLanes,i=r&268435455;if(i!==0){var o=i&~s;o!==0?n=Jl(o):(A&=i,A!==0&&(n=Jl(A)))}else i=r&~s,i!==0?n=Jl(i):A!==0&&(n=Jl(A));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ds(e),s=1<<r,n|=t[r],e&=~s;return n}function yS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-ds(A),o=1<<i,l=s[i];l===-1?(!(o&r)||o&n)&&(s[i]=yS(o,e)):l<=e&&(t.expiredLanes|=o),A&=~o}}function xm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jI(){var t=ad;return ad<<=1,!(ad&4194240)&&(ad=64),t}function Yg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function xu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ds(e),t[e]=r}function BS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ds(r),A=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~A}}function cx(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ds(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Ft=0;function DI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PI,ux,LI,MI,OI,wm=!1,ld=[],qA=null,XA=null,JA=null,Pc=new Map,Lc=new Map,UA=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e){switch(t){case"focusin":case"focusout":qA=null;break;case"dragenter":case"dragleave":XA=null;break;case"mouseover":case"mouseout":JA=null;break;case"pointerover":case"pointerout":Pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(e.pointerId)}}function Sl(t,e,r,n,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:A,targetContainers:[s]},e!==null&&(e=yu(e),e!==null&&ux(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CS(t,e,r,n,s){switch(e){case"focusin":return qA=Sl(qA,t,e,r,n,s),!0;case"dragenter":return XA=Sl(XA,t,e,r,n,s),!0;case"mouseover":return JA=Sl(JA,t,e,r,n,s),!0;case"pointerover":var A=s.pointerId;return Pc.set(A,Sl(Pc.get(A)||null,t,e,r,n,s)),!0;case"gotpointercapture":return A=s.pointerId,Lc.set(A,Sl(Lc.get(A)||null,t,e,r,n,s)),!0}return!1}function HI(t){var e=Ji(t.target);if(e!==null){var r=Ia(e);if(r!==null){if(e=r.tag,e===13){if(e=FI(r),e!==null){t.blockedOn=e,OI(t.priority,function(){LI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=ym(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);fm=n,r.target.dispatchEvent(n),fm=null}else return e=yu(r),e!==null&&ux(e),t.blockedOn=r,!1;e.shift()}return!0}function ev(t,e,r){th(t)&&r.delete(e)}function IS(){wm=!1,qA!==null&&th(qA)&&(qA=null),XA!==null&&th(XA)&&(XA=null),JA!==null&&th(JA)&&(JA=null),Pc.forEach(ev),Lc.forEach(ev)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,wm||(wm=!0,Ln.unstable_scheduleCallback(Ln.unstable_NormalPriority,IS)))}function Mc(t){function e(s){return Ul(s,t)}if(0<ld.length){Ul(ld[0],t);for(var r=1;r<ld.length;r++){var n=ld[r];n.blockedOn===t&&(n.blockedOn=null)}}for(qA!==null&&Ul(qA,t),XA!==null&&Ul(XA,t),JA!==null&&Ul(JA,t),Pc.forEach(e),Lc.forEach(e),r=0;r<UA.length;r++)n=UA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<UA.length&&(r=UA[0],r.blockedOn===null);)HI(r),r.blockedOn===null&&UA.shift()}var Bo=uA.ReactCurrentBatchConfig,Nh=!0;function _S(t,e,r,n){var s=Ft,A=Bo.transition;Bo.transition=null;try{Ft=1,dx(t,e,r,n)}finally{Ft=s,Bo.transition=A}}function ES(t,e,r,n){var s=Ft,A=Bo.transition;Bo.transition=null;try{Ft=4,dx(t,e,r,n)}finally{Ft=s,Bo.transition=A}}function dx(t,e,r,n){if(Nh){var s=ym(t,e,r,n);if(s===null)op(t,e,n,Rh,r),Zy(t,n);else if(CS(s,t,e,r,n))n.stopPropagation();else if(Zy(t,n),e&4&&-1<bS.indexOf(t)){for(;s!==null;){var A=yu(s);if(A!==null&&PI(A),A=ym(t,e,r,n),A===null&&op(t,e,n,Rh,r),A===s)break;s=A}s!==null&&n.stopPropagation()}else op(t,e,n,null,r)}}var Rh=null;function ym(t,e,r,n){if(Rh=null,t=ox(n),t=Ji(t),t!==null)if(e=Ia(t),e===null)t=null;else if(r=e.tag,r===13){if(t=FI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rh=t,null}function VI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fS()){case lx:return 1;case NI:return 4;case Uh:case gS:return 16;case RI:return 536870912;default:return 16}default:return 16}}var OA=null,hx=null,rh=null;function KI(){if(rh)return rh;var t,e=hx,r=e.length,n,s="value"in OA?OA.value:OA.textContent,A=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[A-n];n++);return rh=s.slice(t,1<n?1-n:void 0)}function nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cd(){return!0}function tv(){return!1}function Vn(t){function e(r,n,s,A,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(A):A[o]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?cd:tv,this.isPropagationStopped=tv,this}return ir(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cd)},persist:function(){},isPersistent:cd}),e}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fx=Vn(sl),wu=ir({},sl,{view:0,detail:0}),kS=Vn(wu),Zg,ep,Ql,Lf=ir({},wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ql&&(Ql&&t.type==="mousemove"?(Zg=t.screenX-Ql.screenX,ep=t.screenY-Ql.screenY):ep=Zg=0,Ql=t),Zg)},movementY:function(t){return"movementY"in t?t.movementY:ep}}),rv=Vn(Lf),TS=ir({},Lf,{dataTransfer:0}),FS=Vn(TS),SS=ir({},wu,{relatedTarget:0}),tp=Vn(SS),US=ir({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=Vn(US),NS=ir({},sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RS=Vn(NS),jS=ir({},sl,{data:0}),nv=Vn(jS),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LS[t])?!!e[t]:!1}function gx(){return MS}var OS=ir({},wu,{key:function(t){if(t.key){var e=DS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gx,charCode:function(t){return t.type==="keypress"?nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HS=Vn(OS),VS=ir({},Lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sv=Vn(VS),KS=ir({},wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gx}),GS=Vn(KS),zS=ir({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),$S=Vn(zS),WS=ir({},Lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qS=Vn(WS),XS=[9,13,27,32],px=rA&&"CompositionEvent"in window,gc=null;rA&&"documentMode"in document&&(gc=document.documentMode);var JS=rA&&"TextEvent"in window&&!gc,GI=rA&&(!px||gc&&8<gc&&11>=gc),Av=" ",iv=!1;function zI(t,e){switch(t){case"keyup":return XS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $I(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ao=!1;function YS(t,e){switch(t){case"compositionend":return $I(e);case"keypress":return e.which!==32?null:(iv=!0,Av);case"textInput":return t=e.data,t===Av&&iv?null:t;default:return null}}function ZS(t,e){if(Ao)return t==="compositionend"||!px&&zI(t,e)?(t=KI(),rh=hx=OA=null,Ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GI&&e.locale!=="ko"?null:e.data;default:return null}}var eU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eU[t.type]:e==="textarea"}function WI(t,e,r,n){II(n),e=jh(e,"onChange"),0<e.length&&(r=new fx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var pc=null,Oc=null;function tU(t){A_(t,0)}function Mf(t){var e=oo(t);if(xI(e))return t}function rU(t,e){if(t==="change")return e}var qI=!1;if(rA){var rp;if(rA){var np="oninput"in document;if(!np){var ov=document.createElement("div");ov.setAttribute("oninput","return;"),np=typeof ov.oninput=="function"}rp=np}else rp=!1;qI=rp&&(!document.documentMode||9<document.documentMode)}function lv(){pc&&(pc.detachEvent("onpropertychange",XI),Oc=pc=null)}function XI(t){if(t.propertyName==="value"&&Mf(Oc)){var e=[];WI(e,Oc,t,ox(t)),TI(tU,e)}}function nU(t,e,r){t==="focusin"?(lv(),pc=e,Oc=r,pc.attachEvent("onpropertychange",XI)):t==="focusout"&&lv()}function sU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mf(Oc)}function AU(t,e){if(t==="click")return Mf(e)}function iU(t,e){if(t==="input"||t==="change")return Mf(e)}function aU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gs=typeof Object.is=="function"?Object.is:aU;function Hc(t,e){if(gs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!rm.call(e,s)||!gs(t[s],e[s]))return!1}return!0}function cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uv(t,e){var r=cv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cv(r)}}function JI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function YI(){for(var t=window,e=Th();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Th(t.document)}return e}function mx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oU(t){var e=YI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&JI(r.ownerDocument.documentElement,r)){if(n!==null&&mx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,A=Math.min(n.start,s);n=n.end===void 0?A:Math.min(n.end,s),!t.extend&&A>n&&(s=n,n=A,A=s),s=uv(r,A);var i=uv(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lU=rA&&"documentMode"in document&&11>=document.documentMode,io=null,vm=null,mc=null,Bm=!1;function dv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bm||io==null||io!==Th(n)||(n=io,"selectionStart"in n&&mx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),mc&&Hc(mc,n)||(mc=n,n=jh(vm,"onSelect"),0<n.length&&(e=new fx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=io)))}function ud(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ao={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},sp={},ZI={};rA&&(ZI=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Of(t){if(sp[t])return sp[t];if(!ao[t])return t;var e=ao[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in ZI)return sp[t]=e[r];return t}var e_=Of("animationend"),t_=Of("animationiteration"),r_=Of("animationstart"),n_=Of("transitionend"),s_=new Map,hv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(t,e){s_.set(t,e),Ca(e,[t])}for(var Ap=0;Ap<hv.length;Ap++){var ip=hv[Ap],cU=ip.toLowerCase(),uU=ip[0].toUpperCase()+ip.slice(1);Ci(cU,"on"+uU)}Ci(e_,"onAnimationEnd");Ci(t_,"onAnimationIteration");Ci(r_,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(n_,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yl));function fv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,cS(n,e,void 0,t),t.currentTarget=null}function A_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var A=void 0;if(e)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==A&&s.isPropagationStopped())break e;fv(s,o,c),A=l}else for(i=0;i<n.length;i++){if(o=n[i],l=o.instance,c=o.currentTarget,o=o.listener,l!==A&&s.isPropagationStopped())break e;fv(s,o,c),A=l}}}if(Sh)throw t=mm,Sh=!1,mm=null,t}function Kt(t,e){var r=e[Em];r===void 0&&(r=e[Em]=new Set);var n=t+"__bubble";r.has(n)||(i_(e,t,2,!1),r.add(n))}function ap(t,e,r){var n=0;e&&(n|=4),i_(r,t,n,e)}var dd="_reactListening"+Math.random().toString(36).slice(2);function Vc(t){if(!t[dd]){t[dd]=!0,hI.forEach(function(r){r!=="selectionchange"&&(dU.has(r)||ap(r,!1,t),ap(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dd]||(e[dd]=!0,ap("selectionchange",!1,e))}}function i_(t,e,r,n){switch(VI(e)){case 1:var s=_S;break;case 4:s=ES;break;default:s=dx}r=s.bind(null,e,r,t),s=void 0,!pm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function op(t,e,r,n,s){var A=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;o!==null;){if(i=Ji(o),i===null)return;if(l=i.tag,l===5||l===6){n=A=i;continue e}o=o.parentNode}}n=n.return}TI(function(){var c=A,d=ox(r),h=[];e:{var f=s_.get(t);if(f!==void 0){var p=fx,w=t;switch(t){case"keypress":if(nh(r)===0)break e;case"keydown":case"keyup":p=HS;break;case"focusin":w="focus",p=tp;break;case"focusout":w="blur",p=tp;break;case"beforeblur":case"afterblur":p=tp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=FS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=GS;break;case e_:case t_:case r_:p=QS;break;case n_:p=$S;break;case"scroll":p=kS;break;case"wheel":p=qS;break;case"copy":case"cut":case"paste":p=RS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=sv}var B=(e&4)!==0,E=!B&&t==="scroll",C=B?f!==null?f+"Capture":null:f;B=[];for(var b=c,I;b!==null;){I=b;var Q=I.stateNode;if(I.tag===5&&Q!==null&&(I=Q,C!==null&&(Q=Dc(b,C),Q!=null&&B.push(Kc(b,Q,I)))),E)break;b=b.return}0<B.length&&(f=new p(f,w,null,r,d),h.push({event:f,listeners:B}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==fm&&(w=r.relatedTarget||r.fromElement)&&(Ji(w)||w[nA]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=r.relatedTarget||r.toElement,p=c,w=w?Ji(w):null,w!==null&&(E=Ia(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=c),p!==w)){if(B=rv,Q="onMouseLeave",C="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(B=sv,Q="onPointerLeave",C="onPointerEnter",b="pointer"),E=p==null?f:oo(p),I=w==null?f:oo(w),f=new B(Q,b+"leave",p,r,d),f.target=E,f.relatedTarget=I,Q=null,Ji(d)===c&&(B=new B(C,b+"enter",w,r,d),B.target=I,B.relatedTarget=E,Q=B),E=Q,p&&w)t:{for(B=p,C=w,b=0,I=B;I;I=La(I))b++;for(I=0,Q=C;Q;Q=La(Q))I++;for(;0<b-I;)B=La(B),b--;for(;0<I-b;)C=La(C),I--;for(;b--;){if(B===C||C!==null&&B===C.alternate)break t;B=La(B),C=La(C)}B=null}else B=null;p!==null&&gv(h,f,p,B,!1),w!==null&&E!==null&&gv(h,E,w,B,!0)}}e:{if(f=c?oo(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=rU;else if(av(f))if(qI)N=iU;else{N=sU;var S=nU}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=AU);if(N&&(N=N(t,c))){WI(h,N,r,d);break e}S&&S(t,f,c),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&lm(f,"number",f.value)}switch(S=c?oo(c):window,t){case"focusin":(av(S)||S.contentEditable==="true")&&(io=S,vm=c,mc=null);break;case"focusout":mc=vm=io=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,dv(h,r,d);break;case"selectionchange":if(lU)break;case"keydown":case"keyup":dv(h,r,d)}var m;if(px)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ao?zI(t,r)&&(y="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(GI&&r.locale!=="ko"&&(Ao||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ao&&(m=KI()):(OA=d,hx="value"in OA?OA.value:OA.textContent,Ao=!0)),S=jh(c,y),0<S.length&&(y=new nv(y,t,null,r,d),h.push({event:y,listeners:S}),m?y.data=m:(m=$I(r),m!==null&&(y.data=m)))),(m=JS?YS(t,r):ZS(t,r))&&(c=jh(c,"onBeforeInput"),0<c.length&&(d=new nv("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=m))}A_(h,e)})}function Kc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=Dc(t,r),A!=null&&n.unshift(Kc(t,A,s)),A=Dc(t,e),A!=null&&n.push(Kc(t,A,s))),t=t.return}return n}function La(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gv(t,e,r,n,s){for(var A=e._reactName,i=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=Dc(r,A),l!=null&&i.unshift(Kc(r,l,o))):s||(l=Dc(r,A),l!=null&&i.push(Kc(r,l,o)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var hU=/\r\n?/g,fU=/\u0000|\uFFFD/g;function pv(t){return(typeof t=="string"?t:""+t).replace(hU,`
`).replace(fU,"")}function hd(t,e,r){if(e=pv(e),pv(t)!==e&&r)throw Error(pe(425))}function Dh(){}var bm=null,Cm=null;function Im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _m=typeof setTimeout=="function"?setTimeout:void 0,gU=typeof clearTimeout=="function"?clearTimeout:void 0,mv=typeof Promise=="function"?Promise:void 0,pU=typeof queueMicrotask=="function"?queueMicrotask:typeof mv<"u"?function(t){return mv.resolve(null).then(t).catch(mU)}:_m;function mU(t){setTimeout(function(){throw t})}function lp(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Mc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Mc(e)}function YA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Al=Math.random().toString(36).slice(2),Cs="__reactFiber$"+Al,Gc="__reactProps$"+Al,nA="__reactContainer$"+Al,Em="__reactEvents$"+Al,xU="__reactListeners$"+Al,wU="__reactHandles$"+Al;function Ji(t){var e=t[Cs];if(e)return e;for(var r=t.parentNode;r;){if(e=r[nA]||r[Cs]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=xv(t);t!==null;){if(r=t[Cs])return r;t=xv(t)}return e}t=r,r=t.parentNode}return null}function yu(t){return t=t[Cs]||t[nA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function Hf(t){return t[Gc]||null}var km=[],lo=-1;function Ii(t){return{current:t}}function $t(t){0>lo||(t.current=km[lo],km[lo]=null,lo--)}function Ht(t,e){lo++,km[lo]=t.current,t.current=e}var di={},ln=Ii(di),Fn=Ii(!1),aa=di;function Uo(t,e){var r=t.type.contextTypes;if(!r)return di;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in r)s[A]=e[A];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sn(t){return t=t.childContextTypes,t!=null}function Ph(){$t(Fn),$t(ln)}function wv(t,e,r){if(ln.current!==di)throw Error(pe(168));Ht(ln,e),Ht(Fn,r)}function a_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(pe(108,nS(t)||"Unknown",s));return ir({},r,n)}function Lh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,aa=ln.current,Ht(ln,t),Ht(Fn,Fn.current),!0}function yv(t,e,r){var n=t.stateNode;if(!n)throw Error(pe(169));r?(t=a_(t,e,aa),n.__reactInternalMemoizedMergedChildContext=t,$t(Fn),$t(ln),Ht(ln,t)):$t(Fn),Ht(Fn,r)}var Gs=null,Vf=!1,cp=!1;function o_(t){Gs===null?Gs=[t]:Gs.push(t)}function yU(t){Vf=!0,o_(t)}function _i(){if(!cp&&Gs!==null){cp=!0;var t=0,e=Ft;try{var r=Gs;for(Ft=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Gs=null,Vf=!1}catch(s){throw Gs!==null&&(Gs=Gs.slice(t+1)),QI(lx,_i),s}finally{Ft=e,cp=!1}}return null}var co=[],uo=0,Mh=null,Oh=0,Wn=[],qn=0,oa=null,$s=1,Ws="";function Hi(t,e){co[uo++]=Oh,co[uo++]=Mh,Mh=t,Oh=e}function l_(t,e,r){Wn[qn++]=$s,Wn[qn++]=Ws,Wn[qn++]=oa,oa=t;var n=$s;t=Ws;var s=32-ds(n)-1;n&=~(1<<s),r+=1;var A=32-ds(e)+s;if(30<A){var i=s-s%5;A=(n&(1<<i)-1).toString(32),n>>=i,s-=i,$s=1<<32-ds(e)+s|r<<s|n,Ws=A+t}else $s=1<<A|r<<s|n,Ws=t}function xx(t){t.return!==null&&(Hi(t,1),l_(t,1,0))}function wx(t){for(;t===Mh;)Mh=co[--uo],co[uo]=null,Oh=co[--uo],co[uo]=null;for(;t===oa;)oa=Wn[--qn],Wn[qn]=null,Ws=Wn[--qn],Wn[qn]=null,$s=Wn[--qn],Wn[qn]=null}var Pn=null,Dn=null,Zt=!1,us=null;function c_(t,e){var r=Yn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function vv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,Dn=YA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,Dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=oa!==null?{id:$s,overflow:Ws}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Yn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Pn=t,Dn=null,!0):!1;default:return!1}}function Tm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fm(t){if(Zt){var e=Dn;if(e){var r=e;if(!vv(t,e)){if(Tm(t))throw Error(pe(418));e=YA(r.nextSibling);var n=Pn;e&&vv(t,e)?c_(n,r):(t.flags=t.flags&-4097|2,Zt=!1,Pn=t)}}else{if(Tm(t))throw Error(pe(418));t.flags=t.flags&-4097|2,Zt=!1,Pn=t}}}function Bv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function fd(t){if(t!==Pn)return!1;if(!Zt)return Bv(t),Zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Im(t.type,t.memoizedProps)),e&&(e=Dn)){if(Tm(t))throw u_(),Error(pe(418));for(;e;)c_(t,e),e=YA(e.nextSibling)}if(Bv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Dn=YA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Dn=null}}else Dn=Pn?YA(t.stateNode.nextSibling):null;return!0}function u_(){for(var t=Dn;t;)t=YA(t.nextSibling)}function Qo(){Dn=Pn=null,Zt=!1}function yx(t){us===null?us=[t]:us.push(t)}var vU=uA.ReactCurrentBatchConfig;function Nl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,t));var s=n,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var o=s.refs;i===null?delete o[A]:o[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,t))}return t}function gd(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bv(t){var e=t._init;return e(t._payload)}function d_(t){function e(C,b){if(t){var I=C.deletions;I===null?(C.deletions=[b],C.flags|=16):I.push(b)}}function r(C,b){if(!t)return null;for(;b!==null;)e(C,b),b=b.sibling;return null}function n(C,b){for(C=new Map;b!==null;)b.key!==null?C.set(b.key,b):C.set(b.index,b),b=b.sibling;return C}function s(C,b){return C=ri(C,b),C.index=0,C.sibling=null,C}function A(C,b,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<b?(C.flags|=2,b):I):(C.flags|=2,b)):(C.flags|=1048576,b)}function i(C){return t&&C.alternate===null&&(C.flags|=2),C}function o(C,b,I,Q){return b===null||b.tag!==6?(b=mp(I,C.mode,Q),b.return=C,b):(b=s(b,I),b.return=C,b)}function l(C,b,I,Q){var N=I.type;return N===so?d(C,b,I.props.children,Q,I.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===TA&&bv(N)===b.type)?(Q=s(b,I.props),Q.ref=Nl(C,b,I),Q.return=C,Q):(Q=ch(I.type,I.key,I.props,null,C.mode,Q),Q.ref=Nl(C,b,I),Q.return=C,Q)}function c(C,b,I,Q){return b===null||b.tag!==4||b.stateNode.containerInfo!==I.containerInfo||b.stateNode.implementation!==I.implementation?(b=xp(I,C.mode,Q),b.return=C,b):(b=s(b,I.children||[]),b.return=C,b)}function d(C,b,I,Q,N){return b===null||b.tag!==7?(b=ra(I,C.mode,Q,N),b.return=C,b):(b=s(b,I),b.return=C,b)}function h(C,b,I){if(typeof b=="string"&&b!==""||typeof b=="number")return b=mp(""+b,C.mode,I),b.return=C,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case sd:return I=ch(b.type,b.key,b.props,null,C.mode,I),I.ref=Nl(C,null,b),I.return=C,I;case no:return b=xp(b,C.mode,I),b.return=C,b;case TA:var Q=b._init;return h(C,Q(b._payload),I)}if(Xl(b)||Tl(b))return b=ra(b,C.mode,I,null),b.return=C,b;gd(C,b)}return null}function f(C,b,I,Q){var N=b!==null?b.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return N!==null?null:o(C,b,""+I,Q);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case sd:return I.key===N?l(C,b,I,Q):null;case no:return I.key===N?c(C,b,I,Q):null;case TA:return N=I._init,f(C,b,N(I._payload),Q)}if(Xl(I)||Tl(I))return N!==null?null:d(C,b,I,Q,null);gd(C,I)}return null}function p(C,b,I,Q,N){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return C=C.get(I)||null,o(b,C,""+Q,N);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case sd:return C=C.get(Q.key===null?I:Q.key)||null,l(b,C,Q,N);case no:return C=C.get(Q.key===null?I:Q.key)||null,c(b,C,Q,N);case TA:var S=Q._init;return p(C,b,I,S(Q._payload),N)}if(Xl(Q)||Tl(Q))return C=C.get(I)||null,d(b,C,Q,N,null);gd(b,Q)}return null}function w(C,b,I,Q){for(var N=null,S=null,m=b,y=b=0,v=null;m!==null&&y<I.length;y++){m.index>y?(v=m,m=null):v=m.sibling;var k=f(C,m,I[y],Q);if(k===null){m===null&&(m=v);break}t&&m&&k.alternate===null&&e(C,m),b=A(k,b,y),S===null?N=k:S.sibling=k,S=k,m=v}if(y===I.length)return r(C,m),Zt&&Hi(C,y),N;if(m===null){for(;y<I.length;y++)m=h(C,I[y],Q),m!==null&&(b=A(m,b,y),S===null?N=m:S.sibling=m,S=m);return Zt&&Hi(C,y),N}for(m=n(C,m);y<I.length;y++)v=p(m,C,y,I[y],Q),v!==null&&(t&&v.alternate!==null&&m.delete(v.key===null?y:v.key),b=A(v,b,y),S===null?N=v:S.sibling=v,S=v);return t&&m.forEach(function(R){return e(C,R)}),Zt&&Hi(C,y),N}function B(C,b,I,Q){var N=Tl(I);if(typeof N!="function")throw Error(pe(150));if(I=N.call(I),I==null)throw Error(pe(151));for(var S=N=null,m=b,y=b=0,v=null,k=I.next();m!==null&&!k.done;y++,k=I.next()){m.index>y?(v=m,m=null):v=m.sibling;var R=f(C,m,k.value,Q);if(R===null){m===null&&(m=v);break}t&&m&&R.alternate===null&&e(C,m),b=A(R,b,y),S===null?N=R:S.sibling=R,S=R,m=v}if(k.done)return r(C,m),Zt&&Hi(C,y),N;if(m===null){for(;!k.done;y++,k=I.next())k=h(C,k.value,Q),k!==null&&(b=A(k,b,y),S===null?N=k:S.sibling=k,S=k);return Zt&&Hi(C,y),N}for(m=n(C,m);!k.done;y++,k=I.next())k=p(m,C,y,k.value,Q),k!==null&&(t&&k.alternate!==null&&m.delete(k.key===null?y:k.key),b=A(k,b,y),S===null?N=k:S.sibling=k,S=k);return t&&m.forEach(function(L){return e(C,L)}),Zt&&Hi(C,y),N}function E(C,b,I,Q){if(typeof I=="object"&&I!==null&&I.type===so&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case sd:e:{for(var N=I.key,S=b;S!==null;){if(S.key===N){if(N=I.type,N===so){if(S.tag===7){r(C,S.sibling),b=s(S,I.props.children),b.return=C,C=b;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===TA&&bv(N)===S.type){r(C,S.sibling),b=s(S,I.props),b.ref=Nl(C,S,I),b.return=C,C=b;break e}r(C,S);break}else e(C,S);S=S.sibling}I.type===so?(b=ra(I.props.children,C.mode,Q,I.key),b.return=C,C=b):(Q=ch(I.type,I.key,I.props,null,C.mode,Q),Q.ref=Nl(C,b,I),Q.return=C,C=Q)}return i(C);case no:e:{for(S=I.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===I.containerInfo&&b.stateNode.implementation===I.implementation){r(C,b.sibling),b=s(b,I.children||[]),b.return=C,C=b;break e}else{r(C,b);break}else e(C,b);b=b.sibling}b=xp(I,C.mode,Q),b.return=C,C=b}return i(C);case TA:return S=I._init,E(C,b,S(I._payload),Q)}if(Xl(I))return w(C,b,I,Q);if(Tl(I))return B(C,b,I,Q);gd(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,b!==null&&b.tag===6?(r(C,b.sibling),b=s(b,I),b.return=C,C=b):(r(C,b),b=mp(I,C.mode,Q),b.return=C,C=b),i(C)):r(C,b)}return E}var No=d_(!0),h_=d_(!1),Hh=Ii(null),Vh=null,ho=null,vx=null;function Bx(){vx=ho=Vh=null}function bx(t){var e=Hh.current;$t(Hh),t._currentValue=e}function Sm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function bo(t,e){Vh=t,vx=ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function rs(t){var e=t._currentValue;if(vx!==t)if(t={context:t,memoizedValue:e,next:null},ho===null){if(Vh===null)throw Error(pe(308));ho=t,Vh.dependencies={lanes:0,firstContext:t}}else ho=ho.next=t;return e}var Yi=null;function Cx(t){Yi===null?Yi=[t]:Yi.push(t)}function f_(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Cx(e)):(r.next=s.next,s.next=r),e.interleaved=r,sA(t,n)}function sA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var FA=!1;function Ix(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function eA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ZA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,yt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,sA(t,r)}return s=n.interleaved,s===null?(e.next=e,Cx(n)):(e.next=s.next,s.next=e),n.interleaved=e,sA(t,r)}function sh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,cx(t,r)}}function Cv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};A===null?s=A=i:A=A.next=i,r=r.next}while(r!==null);A===null?s=A=e:A=A.next=e}else s=A=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Kh(t,e,r,n){var s=t.updateQueue;FA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,i===null?A=c:i.next=c,i=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(A!==null){var h=s.baseState;i=0,d=c=l=null,o=A;do{var f=o.lane,p=o.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,B=o;switch(f=e,p=r,B.tag){case 1:if(w=B.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=B.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=ir({},h,f);break e;case 2:FA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,i|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);ca|=i,t.lanes=i,t.memoizedState=h}}function Iv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(pe(191,s));s.call(n)}}}var vu={},Ts=Ii(vu),zc=Ii(vu),$c=Ii(vu);function Zi(t){if(t===vu)throw Error(pe(174));return t}function _x(t,e){switch(Ht($c,e),Ht(zc,t),Ht(Ts,vu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:um(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=um(e,t)}$t(Ts),Ht(Ts,e)}function Ro(){$t(Ts),$t(zc),$t($c)}function p_(t){Zi($c.current);var e=Zi(Ts.current),r=um(e,t.type);e!==r&&(Ht(zc,t),Ht(Ts,r))}function Ex(t){zc.current===t&&($t(Ts),$t(zc))}var nr=Ii(0);function Gh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var up=[];function kx(){for(var t=0;t<up.length;t++)up[t]._workInProgressVersionPrimary=null;up.length=0}var Ah=uA.ReactCurrentDispatcher,dp=uA.ReactCurrentBatchConfig,la=0,sr=null,Cr=null,Nr=null,zh=!1,xc=!1,Wc=0,BU=0;function Yr(){throw Error(pe(321))}function Tx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!gs(t[r],e[r]))return!1;return!0}function Fx(t,e,r,n,s,A){if(la=A,sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ah.current=t===null||t.memoizedState===null?_U:EU,t=r(n,s),xc){A=0;do{if(xc=!1,Wc=0,25<=A)throw Error(pe(301));A+=1,Nr=Cr=null,e.updateQueue=null,Ah.current=kU,t=r(n,s)}while(xc)}if(Ah.current=$h,e=Cr!==null&&Cr.next!==null,la=0,Nr=Cr=sr=null,zh=!1,e)throw Error(pe(300));return t}function Sx(){var t=Wc!==0;return Wc=0,t}function Bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?sr.memoizedState=Nr=t:Nr=Nr.next=t,Nr}function ns(){if(Cr===null){var t=sr.alternate;t=t!==null?t.memoizedState:null}else t=Cr.next;var e=Nr===null?sr.memoizedState:Nr.next;if(e!==null)Nr=e,Cr=t;else{if(t===null)throw Error(pe(310));Cr=t,t={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},Nr===null?sr.memoizedState=Nr=t:Nr=Nr.next=t}return Nr}function qc(t,e){return typeof e=="function"?e(t):e}function hp(t){var e=ns(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=Cr,s=n.baseQueue,A=r.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}n.baseQueue=s=A,r.pending=null}if(s!==null){A=s.next,n=n.baseState;var o=i=null,l=null,c=A;do{var d=c.lane;if((la&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=h,i=n):l=l.next=h,sr.lanes|=d,ca|=d}c=c.next}while(c!==null&&c!==A);l===null?i=n:l.next=o,gs(n,e.memoizedState)||(_n=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do A=s.lane,sr.lanes|=A,ca|=A,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function fp(t){var e=ns(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,A=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);gs(A,e.memoizedState)||(_n=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),r.lastRenderedState=A}return[A,n]}function m_(){}function x_(t,e){var r=sr,n=ns(),s=e(),A=!gs(n.memoizedState,s);if(A&&(n.memoizedState=s,_n=!0),n=n.queue,Ux(v_.bind(null,r,n,t),[t]),n.getSnapshot!==e||A||Nr!==null&&Nr.memoizedState.tag&1){if(r.flags|=2048,Xc(9,y_.bind(null,r,n,s,e),void 0,null),Dr===null)throw Error(pe(349));la&30||w_(r,e,s)}return s}function w_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function y_(t,e,r,n){e.value=r,e.getSnapshot=n,B_(e)&&b_(t)}function v_(t,e,r){return r(function(){B_(e)&&b_(t)})}function B_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!gs(t,r)}catch{return!0}}function b_(t){var e=sA(t,1);e!==null&&hs(e,t,1,-1)}function _v(t){var e=Bs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:t},e.queue=t,t=t.dispatch=IU.bind(null,sr,t),[e.memoizedState,t]}function Xc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=sr.updateQueue,e===null?(e={lastEffect:null,stores:null},sr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function C_(){return ns().memoizedState}function ih(t,e,r,n){var s=Bs();sr.flags|=t,s.memoizedState=Xc(1|e,r,void 0,n===void 0?null:n)}function Kf(t,e,r,n){var s=ns();n=n===void 0?null:n;var A=void 0;if(Cr!==null){var i=Cr.memoizedState;if(A=i.destroy,n!==null&&Tx(n,i.deps)){s.memoizedState=Xc(e,r,A,n);return}}sr.flags|=t,s.memoizedState=Xc(1|e,r,A,n)}function Ev(t,e){return ih(8390656,8,t,e)}function Ux(t,e){return Kf(2048,8,t,e)}function I_(t,e){return Kf(4,2,t,e)}function __(t,e){return Kf(4,4,t,e)}function E_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function k_(t,e,r){return r=r!=null?r.concat([t]):null,Kf(4,4,E_.bind(null,e,t),r)}function Qx(){}function T_(t,e){var r=ns();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Tx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function F_(t,e){var r=ns();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Tx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function S_(t,e,r){return la&21?(gs(r,e)||(r=jI(),sr.lanes|=r,ca|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=r)}function bU(t,e){var r=Ft;Ft=r!==0&&4>r?r:4,t(!0);var n=dp.transition;dp.transition={};try{t(!1),e()}finally{Ft=r,dp.transition=n}}function U_(){return ns().memoizedState}function CU(t,e,r){var n=ti(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Q_(t))N_(e,r);else if(r=f_(t,e,r,n),r!==null){var s=pn();hs(r,t,n,s),R_(r,e,n)}}function IU(t,e,r){var n=ti(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Q_(t))N_(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,o=A(i,r);if(s.hasEagerState=!0,s.eagerState=o,gs(o,i)){var l=e.interleaved;l===null?(s.next=s,Cx(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=f_(t,e,s,n),r!==null&&(s=pn(),hs(r,t,n,s),R_(r,e,n))}}function Q_(t){var e=t.alternate;return t===sr||e!==null&&e===sr}function N_(t,e){xc=zh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function R_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,cx(t,r)}}var $h={readContext:rs,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useInsertionEffect:Yr,useLayoutEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useMutableSource:Yr,useSyncExternalStore:Yr,useId:Yr,unstable_isNewReconciler:!1},_U={readContext:rs,useCallback:function(t,e){return Bs().memoizedState=[t,e===void 0?null:e],t},useContext:rs,useEffect:Ev,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ih(4194308,4,E_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var r=Bs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Bs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=CU.bind(null,sr,t),[n.memoizedState,t]},useRef:function(t){var e=Bs();return t={current:t},e.memoizedState=t},useState:_v,useDebugValue:Qx,useDeferredValue:function(t){return Bs().memoizedState=t},useTransition:function(){var t=_v(!1),e=t[0];return t=bU.bind(null,t[1]),Bs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=sr,s=Bs();if(Zt){if(r===void 0)throw Error(pe(407));r=r()}else{if(r=e(),Dr===null)throw Error(pe(349));la&30||w_(n,e,r)}s.memoizedState=r;var A={value:r,getSnapshot:e};return s.queue=A,Ev(v_.bind(null,n,A,t),[t]),n.flags|=2048,Xc(9,y_.bind(null,n,A,r,e),void 0,null),r},useId:function(){var t=Bs(),e=Dr.identifierPrefix;if(Zt){var r=Ws,n=$s;r=(n&~(1<<32-ds(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Wc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=BU++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EU={readContext:rs,useCallback:T_,useContext:rs,useEffect:Ux,useImperativeHandle:k_,useInsertionEffect:I_,useLayoutEffect:__,useMemo:F_,useReducer:hp,useRef:C_,useState:function(){return hp(qc)},useDebugValue:Qx,useDeferredValue:function(t){var e=ns();return S_(e,Cr.memoizedState,t)},useTransition:function(){var t=hp(qc)[0],e=ns().memoizedState;return[t,e]},useMutableSource:m_,useSyncExternalStore:x_,useId:U_,unstable_isNewReconciler:!1},kU={readContext:rs,useCallback:T_,useContext:rs,useEffect:Ux,useImperativeHandle:k_,useInsertionEffect:I_,useLayoutEffect:__,useMemo:F_,useReducer:fp,useRef:C_,useState:function(){return fp(qc)},useDebugValue:Qx,useDeferredValue:function(t){var e=ns();return Cr===null?e.memoizedState=t:S_(e,Cr.memoizedState,t)},useTransition:function(){var t=fp(qc)[0],e=ns().memoizedState;return[t,e]},useMutableSource:m_,useSyncExternalStore:x_,useId:U_,unstable_isNewReconciler:!1};function ls(t,e){if(t&&t.defaultProps){e=ir({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Um(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ir({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Gf={isMounted:function(t){return(t=t._reactInternals)?Ia(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=pn(),s=ti(t),A=eA(n,s);A.payload=e,r!=null&&(A.callback=r),e=ZA(t,A,s),e!==null&&(hs(e,t,s,n),sh(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=pn(),s=ti(t),A=eA(n,s);A.tag=1,A.payload=e,r!=null&&(A.callback=r),e=ZA(t,A,s),e!==null&&(hs(e,t,s,n),sh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=pn(),n=ti(t),s=eA(r,n);s.tag=2,e!=null&&(s.callback=e),e=ZA(t,s,n),e!==null&&(hs(e,t,n,r),sh(e,t,n))}};function kv(t,e,r,n,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,A,i):e.prototype&&e.prototype.isPureReactComponent?!Hc(r,n)||!Hc(s,A):!0}function j_(t,e,r){var n=!1,s=di,A=e.contextType;return typeof A=="object"&&A!==null?A=rs(A):(s=Sn(e)?aa:ln.current,n=e.contextTypes,A=(n=n!=null)?Uo(t,s):di),e=new e(r,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function Tv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Gf.enqueueReplaceState(e,e.state,null)}function Qm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Ix(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=rs(A):(A=Sn(e)?aa:ln.current,s.context=Uo(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(Um(t,e,A,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Gf.enqueueReplaceState(s,s.state,null),Kh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jo(t,e){try{var r="",n=e;do r+=rS(n),n=n.return;while(n);var s=r}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function gp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Nm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var TU=typeof WeakMap=="function"?WeakMap:Map;function D_(t,e,r){r=eA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){qh||(qh=!0,Km=n),Nm(t,e)},r}function P_(t,e,r){r=eA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Nm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){Nm(t,e),typeof n!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function Fv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new TU;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=VU.bind(null,t,e,r),e.then(t,t))}function Sv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=eA(-1,1),e.tag=2,ZA(r,e,1))),r.lanes|=1),t)}var FU=uA.ReactCurrentOwner,_n=!1;function fn(t,e,r,n){e.child=t===null?h_(e,null,r,n):No(e,t.child,r,n)}function Qv(t,e,r,n,s){r=r.render;var A=e.ref;return bo(e,s),n=Fx(t,e,r,n,A,s),r=Sx(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,AA(t,e,s)):(Zt&&r&&xx(e),e.flags|=1,fn(t,e,n,s),e.child)}function Nv(t,e,r,n,s){if(t===null){var A=r.type;return typeof A=="function"&&!Ox(A)&&A.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=A,L_(t,e,A,n,s)):(t=ch(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(r=r.compare,r=r!==null?r:Hc,r(i,n)&&t.ref===e.ref)return AA(t,e,s)}return e.flags|=1,t=ri(A,n),t.ref=e.ref,t.return=e,e.child=t}function L_(t,e,r,n,s){if(t!==null){var A=t.memoizedProps;if(Hc(A,n)&&t.ref===e.ref)if(_n=!1,e.pendingProps=n=A,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,AA(t,e,s)}return Rm(t,e,r,n,s)}function M_(t,e,r){var n=e.pendingProps,s=n.children,A=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(go,jn),jn|=r;else{if(!(r&1073741824))return t=A!==null?A.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ht(go,jn),jn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=A!==null?A.baseLanes:r,Ht(go,jn),jn|=n}else A!==null?(n=A.baseLanes|r,e.memoizedState=null):n=r,Ht(go,jn),jn|=n;return fn(t,e,s,r),e.child}function O_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Rm(t,e,r,n,s){var A=Sn(r)?aa:ln.current;return A=Uo(e,A),bo(e,s),r=Fx(t,e,r,n,A,s),n=Sx(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,AA(t,e,s)):(Zt&&n&&xx(e),e.flags|=1,fn(t,e,r,s),e.child)}function Rv(t,e,r,n,s){if(Sn(r)){var A=!0;Lh(e)}else A=!1;if(bo(e,s),e.stateNode===null)ah(t,e),j_(e,r,n),Qm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var l=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=rs(c):(c=Sn(r)?aa:ln.current,c=Uo(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||l!==c)&&Tv(e,i,n,c),FA=!1;var f=e.memoizedState;i.state=f,Kh(e,n,i,s),l=e.memoizedState,o!==n||f!==l||Fn.current||FA?(typeof d=="function"&&(Um(e,r,d,n),l=e.memoizedState),(o=FA||kv(e,r,o,n,f,l,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),i.props=n,i.state=l,i.context=c,n=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,g_(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:ls(e.type,o),i.props=c,h=e.pendingProps,f=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=rs(l):(l=Sn(r)?aa:ln.current,l=Uo(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==l)&&Tv(e,i,n,l),FA=!1,f=e.memoizedState,i.state=f,Kh(e,n,i,s);var w=e.memoizedState;o!==h||f!==w||Fn.current||FA?(typeof p=="function"&&(Um(e,r,p,n),w=e.memoizedState),(c=FA||kv(e,r,c,n,f,w,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,w,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,w,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=w),i.props=n,i.state=w,i.context=l,n=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return jm(t,e,r,n,A,s)}function jm(t,e,r,n,s,A){O_(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&yv(e,r,!1),AA(t,e,A);n=e.stateNode,FU.current=e;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=No(e,t.child,null,A),e.child=No(e,null,o,A)):fn(t,e,o,A),e.memoizedState=n.state,s&&yv(e,r,!0),e.child}function H_(t){var e=t.stateNode;e.pendingContext?wv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wv(t,e.context,!1),_x(t,e.containerInfo)}function jv(t,e,r,n,s){return Qo(),yx(s),e.flags|=256,fn(t,e,r,n),e.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Pm(t){return{baseLanes:t,cachePool:null,transitions:null}}function V_(t,e,r){var n=e.pendingProps,s=nr.current,A=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ht(nr,s&1),t===null)return Fm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,A?(n=e.mode,A=e.child,i={mode:"hidden",children:i},!(n&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=Wf(i,n,0,null),t=ra(t,n,r,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=Pm(r),e.memoizedState=Dm,t):Nx(e,i));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return SU(t,e,i,n,o,s,r);if(A){A=n.fallback,i=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=ri(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?A=ri(o,A):(A=ra(A,i,r,null),A.flags|=2),A.return=e,n.return=e,n.sibling=A,e.child=n,n=A,A=e.child,i=t.child.memoizedState,i=i===null?Pm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~r,e.memoizedState=Dm,n}return A=t.child,t=A.sibling,n=ri(A,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Nx(t,e){return e=Wf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pd(t,e,r,n){return n!==null&&yx(n),No(e,t.child,null,r),t=Nx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SU(t,e,r,n,s,A,i){if(r)return e.flags&256?(e.flags&=-257,n=gp(Error(pe(422))),pd(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=n.fallback,s=e.mode,n=Wf({mode:"visible",children:n.children},s,0,null),A=ra(A,s,i,null),A.flags|=2,n.return=e,A.return=e,n.sibling=A,e.child=n,e.mode&1&&No(e,t.child,null,i),e.child.memoizedState=Pm(i),e.memoizedState=Dm,A);if(!(e.mode&1))return pd(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,A=Error(pe(419)),n=gp(A,n,void 0),pd(t,e,i,n)}if(o=(i&t.childLanes)!==0,_n||o){if(n=Dr,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,sA(t,s),hs(n,t,s,-1))}return Mx(),n=gp(Error(pe(421))),pd(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KU.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,Dn=YA(s.nextSibling),Pn=e,Zt=!0,us=null,t!==null&&(Wn[qn++]=$s,Wn[qn++]=Ws,Wn[qn++]=oa,$s=t.id,Ws=t.overflow,oa=e),e=Nx(e,n.children),e.flags|=4096,e)}function Dv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Sm(t.return,e,r)}function pp(t,e,r,n,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=n,A.tail=r,A.tailMode=s)}function K_(t,e,r){var n=e.pendingProps,s=n.revealOrder,A=n.tail;if(fn(t,e,n.children,r),n=nr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dv(t,r,e);else if(t.tag===19)Dv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ht(nr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Gh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),pp(e,!1,s,r,A);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}pp(e,!0,r,null,A);break;case"together":pp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function AA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ca|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,r=ri(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ri(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function UU(t,e,r){switch(e.tag){case 3:H_(e),Qo();break;case 5:p_(e);break;case 1:Sn(e.type)&&Lh(e);break;case 4:_x(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ht(Hh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ht(nr,nr.current&1),e.flags|=128,null):r&e.child.childLanes?V_(t,e,r):(Ht(nr,nr.current&1),t=AA(t,e,r),t!==null?t.sibling:null);Ht(nr,nr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return K_(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ht(nr,nr.current),n)break;return null;case 22:case 23:return e.lanes=0,M_(t,e,r)}return AA(t,e,r)}var G_,Lm,z_,$_;G_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lm=function(){};z_=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Zi(Ts.current);var A=null;switch(r){case"input":s=am(t,s),n=am(t,n),A=[];break;case"select":s=ir({},s,{value:void 0}),n=ir({},n,{value:void 0}),A=[];break;case"textarea":s=cm(t,s),n=cm(t,n),A=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Dh)}dm(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&o[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(A||(A=[]),A.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(A=A||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(A=A||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kt("scroll",t),A||o===l||(A=[])):(A=A||[]).push(c,l))}r&&(A=A||[]).push("style",r);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};$_=function(t,e,r,n){r!==n&&(e.flags|=4)};function Rl(t,e){if(!Zt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Zr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function QU(t,e,r){var n=e.pendingProps;switch(wx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(e),null;case 1:return Sn(e.type)&&Ph(),Zr(e),null;case 3:return n=e.stateNode,Ro(),$t(Fn),$t(ln),kx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(fd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,us!==null&&($m(us),us=null))),Lm(t,e),Zr(e),null;case 5:Ex(e);var s=Zi($c.current);if(r=e.type,t!==null&&e.stateNode!=null)z_(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(pe(166));return Zr(e),null}if(t=Zi(Ts.current),fd(e)){n=e.stateNode,r=e.type;var A=e.memoizedProps;switch(n[Cs]=e,n[Gc]=A,t=(e.mode&1)!==0,r){case"dialog":Kt("cancel",n),Kt("close",n);break;case"iframe":case"object":case"embed":Kt("load",n);break;case"video":case"audio":for(s=0;s<Yl.length;s++)Kt(Yl[s],n);break;case"source":Kt("error",n);break;case"img":case"image":case"link":Kt("error",n),Kt("load",n);break;case"details":Kt("toggle",n);break;case"input":zy(n,A),Kt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!A.multiple},Kt("invalid",n);break;case"textarea":Wy(n,A),Kt("invalid",n)}dm(r,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var o=A[i];i==="children"?typeof o=="string"?n.textContent!==o&&(A.suppressHydrationWarning!==!0&&hd(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(A.suppressHydrationWarning!==!0&&hd(n.textContent,o,t),s=["children",""+o]):Rc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Kt("scroll",n)}switch(r){case"input":Ad(n),$y(n,A,!0);break;case"textarea":Ad(n),qy(n);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(n.onclick=Dh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Cs]=e,t[Gc]=n,G_(t,e,!1,!1),e.stateNode=t;e:{switch(i=hm(r,n),r){case"dialog":Kt("cancel",t),Kt("close",t),s=n;break;case"iframe":case"object":case"embed":Kt("load",t),s=n;break;case"video":case"audio":for(s=0;s<Yl.length;s++)Kt(Yl[s],t);s=n;break;case"source":Kt("error",t),s=n;break;case"img":case"image":case"link":Kt("error",t),Kt("load",t),s=n;break;case"details":Kt("toggle",t),s=n;break;case"input":zy(t,n),s=am(t,n),Kt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=ir({},n,{value:void 0}),Kt("invalid",t);break;case"textarea":Wy(t,n),s=cm(t,n),Kt("invalid",t);break;default:s=n}dm(r,s),o=s;for(A in o)if(o.hasOwnProperty(A)){var l=o[A];A==="style"?CI(t,l):A==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BI(t,l)):A==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&jc(t,l):typeof l=="number"&&jc(t,""+l):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(Rc.hasOwnProperty(A)?l!=null&&A==="onScroll"&&Kt("scroll",t):l!=null&&sx(t,A,l,i))}switch(r){case"input":Ad(t),$y(t,n,!1);break;case"textarea":Ad(t),qy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ui(n.value));break;case"select":t.multiple=!!n.multiple,A=n.value,A!=null?wo(t,!!n.multiple,A,!1):n.defaultValue!=null&&wo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Dh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zr(e),null;case 6:if(t&&e.stateNode!=null)$_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pe(166));if(r=Zi($c.current),Zi(Ts.current),fd(e)){if(n=e.stateNode,r=e.memoizedProps,n[Cs]=e,(A=n.nodeValue!==r)&&(t=Pn,t!==null))switch(t.tag){case 3:hd(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hd(n.nodeValue,r,(t.mode&1)!==0)}A&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Cs]=e,e.stateNode=n}return Zr(e),null;case 13:if($t(nr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Zt&&Dn!==null&&e.mode&1&&!(e.flags&128))u_(),Qo(),e.flags|=98560,A=!1;else if(A=fd(e),n!==null&&n.dehydrated!==null){if(t===null){if(!A)throw Error(pe(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(pe(317));A[Cs]=e}else Qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zr(e),A=!1}else us!==null&&($m(us),us=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||nr.current&1?_r===0&&(_r=3):Mx())),e.updateQueue!==null&&(e.flags|=4),Zr(e),null);case 4:return Ro(),Lm(t,e),t===null&&Vc(e.stateNode.containerInfo),Zr(e),null;case 10:return bx(e.type._context),Zr(e),null;case 17:return Sn(e.type)&&Ph(),Zr(e),null;case 19:if($t(nr),A=e.memoizedState,A===null)return Zr(e),null;if(n=(e.flags&128)!==0,i=A.rendering,i===null)if(n)Rl(A,!1);else{if(_r!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Gh(t),i!==null){for(e.flags|=128,Rl(A,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)A=r,t=n,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ht(nr,nr.current&1|2),e.child}t=t.sibling}A.tail!==null&&hr()>Do&&(e.flags|=128,n=!0,Rl(A,!1),e.lanes=4194304)}else{if(!n)if(t=Gh(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Rl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!Zt)return Zr(e),null}else 2*hr()-A.renderingStartTime>Do&&r!==1073741824&&(e.flags|=128,n=!0,Rl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(r=A.last,r!==null?r.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=hr(),e.sibling=null,r=nr.current,Ht(nr,n?r&1|2:r&1),e):(Zr(e),null);case 22:case 23:return Lx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?jn&1073741824&&(Zr(e),e.subtreeFlags&6&&(e.flags|=8192)):Zr(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function NU(t,e){switch(wx(e),e.tag){case 1:return Sn(e.type)&&Ph(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),$t(Fn),$t(ln),kx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ex(e),null;case 13:if($t(nr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));Qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(nr),null;case 4:return Ro(),null;case 10:return bx(e.type._context),null;case 22:case 23:return Lx(),null;case 24:return null;default:return null}}var md=!1,An=!1,RU=typeof WeakSet=="function"?WeakSet:Set,He=null;function fo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){lr(t,e,n)}else r.current=null}function Mm(t,e,r){try{r()}catch(n){lr(t,e,n)}}var Pv=!1;function jU(t,e){if(bm=Nh,t=YI(),mx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,A=n.focusNode;n=n.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var i=0,o=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(o=i+s),h!==A||n!==0&&h.nodeType!==3||(l=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===s&&(o=i),f===A&&++d===n&&(l=i),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Cm={focusedElem:t,selectionRange:r},Nh=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var B=w.memoizedProps,E=w.memoizedState,C=e.stateNode,b=C.getSnapshotBeforeUpdate(e.elementType===e.type?B:ls(e.type,B),E);C.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(Q){lr(e,e.return,Q)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return w=Pv,Pv=!1,w}function wc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&Mm(e,r,A)}s=s.next}while(s!==n)}}function zf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Om(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function W_(t){var e=t.alternate;e!==null&&(t.alternate=null,W_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cs],delete e[Gc],delete e[Em],delete e[xU],delete e[wU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q_(t){return t.tag===5||t.tag===3||t.tag===4}function Lv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Dh));else if(n!==4&&(t=t.child,t!==null))for(Hm(t,e,r),t=t.sibling;t!==null;)Hm(t,e,r),t=t.sibling}function Vm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Vm(t,e,r),t=t.sibling;t!==null;)Vm(t,e,r),t=t.sibling}var Or=null,cs=!1;function BA(t,e,r){for(r=r.child;r!==null;)X_(t,e,r),r=r.sibling}function X_(t,e,r){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(Pf,r)}catch{}switch(r.tag){case 5:An||fo(r,e);case 6:var n=Or,s=cs;Or=null,BA(t,e,r),Or=n,cs=s,Or!==null&&(cs?(t=Or,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Or.removeChild(r.stateNode));break;case 18:Or!==null&&(cs?(t=Or,r=r.stateNode,t.nodeType===8?lp(t.parentNode,r):t.nodeType===1&&lp(t,r),Mc(t)):lp(Or,r.stateNode));break;case 4:n=Or,s=cs,Or=r.stateNode.containerInfo,cs=!0,BA(t,e,r),Or=n,cs=s;break;case 0:case 11:case 14:case 15:if(!An&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&Mm(r,e,i),s=s.next}while(s!==n)}BA(t,e,r);break;case 1:if(!An&&(fo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){lr(r,e,o)}BA(t,e,r);break;case 21:BA(t,e,r);break;case 22:r.mode&1?(An=(n=An)||r.memoizedState!==null,BA(t,e,r),An=n):BA(t,e,r);break;default:BA(t,e,r)}}function Mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new RU),e.forEach(function(n){var s=GU.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function as(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var A=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:Or=o.stateNode,cs=!1;break e;case 3:Or=o.stateNode.containerInfo,cs=!0;break e;case 4:Or=o.stateNode.containerInfo,cs=!0;break e}o=o.return}if(Or===null)throw Error(pe(160));X_(A,i,s),Or=null,cs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){lr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J_(e,t),e=e.sibling}function J_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(as(e,t),ys(t),n&4){try{wc(3,t,t.return),zf(3,t)}catch(B){lr(t,t.return,B)}try{wc(5,t,t.return)}catch(B){lr(t,t.return,B)}}break;case 1:as(e,t),ys(t),n&512&&r!==null&&fo(r,r.return);break;case 5:if(as(e,t),ys(t),n&512&&r!==null&&fo(r,r.return),t.flags&32){var s=t.stateNode;try{jc(s,"")}catch(B){lr(t,t.return,B)}}if(n&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=r!==null?r.memoizedProps:A,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&A.type==="radio"&&A.name!=null&&wI(s,A),hm(o,i);var c=hm(o,A);for(i=0;i<l.length;i+=2){var d=l[i],h=l[i+1];d==="style"?CI(s,h):d==="dangerouslySetInnerHTML"?BI(s,h):d==="children"?jc(s,h):sx(s,d,h,c)}switch(o){case"input":om(s,A);break;case"textarea":yI(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var p=A.value;p!=null?wo(s,!!A.multiple,p,!1):f!==!!A.multiple&&(A.defaultValue!=null?wo(s,!!A.multiple,A.defaultValue,!0):wo(s,!!A.multiple,A.multiple?[]:"",!1))}s[Gc]=A}catch(B){lr(t,t.return,B)}}break;case 6:if(as(e,t),ys(t),n&4){if(t.stateNode===null)throw Error(pe(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(B){lr(t,t.return,B)}}break;case 3:if(as(e,t),ys(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Mc(e.containerInfo)}catch(B){lr(t,t.return,B)}break;case 4:as(e,t),ys(t);break;case 13:as(e,t),ys(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(Dx=hr())),n&4&&Mv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(An=(c=An)||d,as(e,t),An=c):as(e,t),ys(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(He=t,d=t.child;d!==null;){for(h=He=d;He!==null;){switch(f=He,p=f.child,f.tag){case 0:case 11:case 14:case 15:wc(4,f,f.return);break;case 1:fo(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(B){lr(n,r,B)}}break;case 5:fo(f,f.return);break;case 22:if(f.memoizedState!==null){Hv(h);continue}}p!==null?(p.return=f,He=p):Hv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(o=h.stateNode,l=h.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=bI("display",i))}catch(B){lr(t,t.return,B)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(B){lr(t,t.return,B)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:as(e,t),ys(t),n&4&&Mv(t);break;case 21:break;default:as(e,t),ys(t)}}function ys(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(q_(r)){var n=r;break e}r=r.return}throw Error(pe(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(jc(s,""),n.flags&=-33);var A=Lv(t);Vm(t,A,s);break;case 3:case 4:var i=n.stateNode.containerInfo,o=Lv(t);Hm(t,o,i);break;default:throw Error(pe(161))}}catch(l){lr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DU(t,e,r){He=t,Y_(t)}function Y_(t,e,r){for(var n=(t.mode&1)!==0;He!==null;){var s=He,A=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||md;if(!i){var o=s.alternate,l=o!==null&&o.memoizedState!==null||An;o=md;var c=An;if(md=i,(An=l)&&!c)for(He=s;He!==null;)i=He,l=i.child,i.tag===22&&i.memoizedState!==null?Vv(s):l!==null?(l.return=i,He=l):Vv(s);for(;A!==null;)He=A,Y_(A),A=A.sibling;He=s,md=o,An=c}Ov(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,He=A):Ov(t)}}function Ov(t){for(;He!==null;){var e=He;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:An||zf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!An)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ls(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&Iv(e,A,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Iv(e,i,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Mc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}An||e.flags&512&&Om(e)}catch(f){lr(e,e.return,f)}}if(e===t){He=null;break}if(r=e.sibling,r!==null){r.return=e.return,He=r;break}He=e.return}}function Hv(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var r=e.sibling;if(r!==null){r.return=e.return,He=r;break}He=e.return}}function Vv(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{zf(4,e)}catch(l){lr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){lr(e,s,l)}}var A=e.return;try{Om(e)}catch(l){lr(e,A,l)}break;case 5:var i=e.return;try{Om(e)}catch(l){lr(e,i,l)}}}catch(l){lr(e,e.return,l)}if(e===t){He=null;break}var o=e.sibling;if(o!==null){o.return=e.return,He=o;break}He=e.return}}var PU=Math.ceil,Wh=uA.ReactCurrentDispatcher,Rx=uA.ReactCurrentOwner,ts=uA.ReactCurrentBatchConfig,yt=0,Dr=null,xr=null,zr=0,jn=0,go=Ii(0),_r=0,Jc=null,ca=0,$f=0,jx=0,yc=null,In=null,Dx=0,Do=1/0,Ks=null,qh=!1,Km=null,ei=null,xd=!1,HA=null,Xh=0,vc=0,Gm=null,oh=-1,lh=0;function pn(){return yt&6?hr():oh!==-1?oh:oh=hr()}function ti(t){return t.mode&1?yt&2&&zr!==0?zr&-zr:vU.transition!==null?(lh===0&&(lh=jI()),lh):(t=Ft,t!==0||(t=window.event,t=t===void 0?16:VI(t.type)),t):1}function hs(t,e,r,n){if(50<vc)throw vc=0,Gm=null,Error(pe(185));xu(t,r,n),(!(yt&2)||t!==Dr)&&(t===Dr&&(!(yt&2)&&($f|=r),_r===4&&QA(t,zr)),Un(t,n),r===1&&yt===0&&!(e.mode&1)&&(Do=hr()+500,Vf&&_i()))}function Un(t,e){var r=t.callbackNode;vS(t,e);var n=Qh(t,t===Dr?zr:0);if(n===0)r!==null&&Yy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Yy(r),e===1)t.tag===0?yU(Kv.bind(null,t)):o_(Kv.bind(null,t)),pU(function(){!(yt&6)&&_i()}),r=null;else{switch(DI(n)){case 1:r=lx;break;case 4:r=NI;break;case 16:r=Uh;break;case 536870912:r=RI;break;default:r=Uh}r=iE(r,Z_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Z_(t,e){if(oh=-1,lh=0,yt&6)throw Error(pe(327));var r=t.callbackNode;if(Co()&&t.callbackNode!==r)return null;var n=Qh(t,t===Dr?zr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Jh(t,n);else{e=n;var s=yt;yt|=2;var A=tE();(Dr!==t||zr!==e)&&(Ks=null,Do=hr()+500,ta(t,e));do try{OU();break}catch(o){eE(t,o)}while(!0);Bx(),Wh.current=A,yt=s,xr!==null?e=0:(Dr=null,zr=0,e=_r)}if(e!==0){if(e===2&&(s=xm(t),s!==0&&(n=s,e=zm(t,s))),e===1)throw r=Jc,ta(t,0),QA(t,n),Un(t,hr()),r;if(e===6)QA(t,n);else{if(s=t.current.alternate,!(n&30)&&!LU(s)&&(e=Jh(t,n),e===2&&(A=xm(t),A!==0&&(n=A,e=zm(t,A))),e===1))throw r=Jc,ta(t,0),QA(t,n),Un(t,hr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(pe(345));case 2:Vi(t,In,Ks);break;case 3:if(QA(t,n),(n&130023424)===n&&(e=Dx+500-hr(),10<e)){if(Qh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){pn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_m(Vi.bind(null,t,In,Ks),e);break}Vi(t,In,Ks);break;case 4:if(QA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-ds(n);A=1<<i,i=e[i],i>s&&(s=i),n&=~A}if(n=s,n=hr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*PU(n/1960))-n,10<n){t.timeoutHandle=_m(Vi.bind(null,t,In,Ks),n);break}Vi(t,In,Ks);break;case 5:Vi(t,In,Ks);break;default:throw Error(pe(329))}}}return Un(t,hr()),t.callbackNode===r?Z_.bind(null,t):null}function zm(t,e){var r=yc;return t.current.memoizedState.isDehydrated&&(ta(t,e).flags|=256),t=Jh(t,e),t!==2&&(e=In,In=r,e!==null&&$m(e)),t}function $m(t){In===null?In=t:In.push.apply(In,t)}function LU(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],A=s.getSnapshot;s=s.value;try{if(!gs(A(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function QA(t,e){for(e&=~jx,e&=~$f,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ds(e),n=1<<r;t[r]=-1,e&=~n}}function Kv(t){if(yt&6)throw Error(pe(327));Co();var e=Qh(t,0);if(!(e&1))return Un(t,hr()),null;var r=Jh(t,e);if(t.tag!==0&&r===2){var n=xm(t);n!==0&&(e=n,r=zm(t,n))}if(r===1)throw r=Jc,ta(t,0),QA(t,e),Un(t,hr()),r;if(r===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vi(t,In,Ks),Un(t,hr()),null}function Px(t,e){var r=yt;yt|=1;try{return t(e)}finally{yt=r,yt===0&&(Do=hr()+500,Vf&&_i())}}function ua(t){HA!==null&&HA.tag===0&&!(yt&6)&&Co();var e=yt;yt|=1;var r=ts.transition,n=Ft;try{if(ts.transition=null,Ft=1,t)return t()}finally{Ft=n,ts.transition=r,yt=e,!(yt&6)&&_i()}}function Lx(){jn=go.current,$t(go)}function ta(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gU(r)),xr!==null)for(r=xr.return;r!==null;){var n=r;switch(wx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ph();break;case 3:Ro(),$t(Fn),$t(ln),kx();break;case 5:Ex(n);break;case 4:Ro();break;case 13:$t(nr);break;case 19:$t(nr);break;case 10:bx(n.type._context);break;case 22:case 23:Lx()}r=r.return}if(Dr=t,xr=t=ri(t.current,null),zr=jn=e,_r=0,Jc=null,jx=$f=ca=0,In=yc=null,Yi!==null){for(e=0;e<Yi.length;e++)if(r=Yi[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,A=r.pending;if(A!==null){var i=A.next;A.next=s,n.next=i}r.pending=n}Yi=null}return t}function eE(t,e){do{var r=xr;try{if(Bx(),Ah.current=$h,zh){for(var n=sr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}zh=!1}if(la=0,Nr=Cr=sr=null,xc=!1,Wc=0,Rx.current=null,r===null||r.return===null){_r=1,Jc=e,xr=null;break}e:{var A=t,i=r.return,o=r,l=e;if(e=zr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Sv(i);if(p!==null){p.flags&=-257,Uv(p,i,o,A,e),p.mode&1&&Fv(A,c,e),e=p,l=c;var w=e.updateQueue;if(w===null){var B=new Set;B.add(l),e.updateQueue=B}else w.add(l);break e}else{if(!(e&1)){Fv(A,c,e),Mx();break e}l=Error(pe(426))}}else if(Zt&&o.mode&1){var E=Sv(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Uv(E,i,o,A,e),yx(jo(l,o));break e}}A=l=jo(l,o),_r!==4&&(_r=2),yc===null?yc=[A]:yc.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var C=D_(A,l,e);Cv(A,C);break e;case 1:o=l;var b=A.type,I=A.stateNode;if(!(A.flags&128)&&(typeof b.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ei===null||!ei.has(I)))){A.flags|=65536,e&=-e,A.lanes|=e;var Q=P_(A,o,e);Cv(A,Q);break e}}A=A.return}while(A!==null)}nE(r)}catch(N){e=N,xr===r&&r!==null&&(xr=r=r.return);continue}break}while(!0)}function tE(){var t=Wh.current;return Wh.current=$h,t===null?$h:t}function Mx(){(_r===0||_r===3||_r===2)&&(_r=4),Dr===null||!(ca&268435455)&&!($f&268435455)||QA(Dr,zr)}function Jh(t,e){var r=yt;yt|=2;var n=tE();(Dr!==t||zr!==e)&&(Ks=null,ta(t,e));do try{MU();break}catch(s){eE(t,s)}while(!0);if(Bx(),yt=r,Wh.current=n,xr!==null)throw Error(pe(261));return Dr=null,zr=0,_r}function MU(){for(;xr!==null;)rE(xr)}function OU(){for(;xr!==null&&!dS();)rE(xr)}function rE(t){var e=AE(t.alternate,t,jn);t.memoizedProps=t.pendingProps,e===null?nE(t):xr=e,Rx.current=null}function nE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=NU(r,e),r!==null){r.flags&=32767,xr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_r=6,xr=null;return}}else if(r=QU(r,e,jn),r!==null){xr=r;return}if(e=e.sibling,e!==null){xr=e;return}xr=e=t}while(e!==null);_r===0&&(_r=5)}function Vi(t,e,r){var n=Ft,s=ts.transition;try{ts.transition=null,Ft=1,HU(t,e,r,n)}finally{ts.transition=s,Ft=n}return null}function HU(t,e,r,n){do Co();while(HA!==null);if(yt&6)throw Error(pe(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var A=r.lanes|r.childLanes;if(BS(t,A),t===Dr&&(xr=Dr=null,zr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||xd||(xd=!0,iE(Uh,function(){return Co(),null})),A=(r.flags&15990)!==0,r.subtreeFlags&15990||A){A=ts.transition,ts.transition=null;var i=Ft;Ft=1;var o=yt;yt|=4,Rx.current=null,jU(t,r),J_(r,t),oU(Cm),Nh=!!bm,Cm=bm=null,t.current=r,DU(r),hS(),yt=o,Ft=i,ts.transition=A}else t.current=r;if(xd&&(xd=!1,HA=t,Xh=s),A=t.pendingLanes,A===0&&(ei=null),pS(r.stateNode),Un(t,hr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(qh)throw qh=!1,t=Km,Km=null,t;return Xh&1&&t.tag!==0&&Co(),A=t.pendingLanes,A&1?t===Gm?vc++:(vc=0,Gm=t):vc=0,_i(),null}function Co(){if(HA!==null){var t=DI(Xh),e=ts.transition,r=Ft;try{if(ts.transition=null,Ft=16>t?16:t,HA===null)var n=!1;else{if(t=HA,HA=null,Xh=0,yt&6)throw Error(pe(331));var s=yt;for(yt|=4,He=t.current;He!==null;){var A=He,i=A.child;if(He.flags&16){var o=A.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(He=c;He!==null;){var d=He;switch(d.tag){case 0:case 11:case 15:wc(8,d,A)}var h=d.child;if(h!==null)h.return=d,He=h;else for(;He!==null;){d=He;var f=d.sibling,p=d.return;if(W_(d),d===c){He=null;break}if(f!==null){f.return=p,He=f;break}He=p}}}var w=A.alternate;if(w!==null){var B=w.child;if(B!==null){w.child=null;do{var E=B.sibling;B.sibling=null,B=E}while(B!==null)}}He=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,He=i;else e:for(;He!==null;){if(A=He,A.flags&2048)switch(A.tag){case 0:case 11:case 15:wc(9,A,A.return)}var C=A.sibling;if(C!==null){C.return=A.return,He=C;break e}He=A.return}}var b=t.current;for(He=b;He!==null;){i=He;var I=i.child;if(i.subtreeFlags&2064&&I!==null)I.return=i,He=I;else e:for(i=b;He!==null;){if(o=He,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:zf(9,o)}}catch(N){lr(o,o.return,N)}if(o===i){He=null;break e}var Q=o.sibling;if(Q!==null){Q.return=o.return,He=Q;break e}He=o.return}}if(yt=s,_i(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(Pf,t)}catch{}n=!0}return n}finally{Ft=r,ts.transition=e}}return!1}function Gv(t,e,r){e=jo(r,e),e=D_(t,e,1),t=ZA(t,e,1),e=pn(),t!==null&&(xu(t,1,e),Un(t,e))}function lr(t,e,r){if(t.tag===3)Gv(t,t,r);else for(;e!==null;){if(e.tag===3){Gv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ei===null||!ei.has(n))){t=jo(r,t),t=P_(e,t,1),e=ZA(e,t,1),t=pn(),e!==null&&(xu(e,1,t),Un(e,t));break}}e=e.return}}function VU(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&r,Dr===t&&(zr&r)===r&&(_r===4||_r===3&&(zr&130023424)===zr&&500>hr()-Dx?ta(t,0):jx|=r),Un(t,e)}function sE(t,e){e===0&&(t.mode&1?(e=od,od<<=1,!(od&130023424)&&(od=4194304)):e=1);var r=pn();t=sA(t,e),t!==null&&(xu(t,e,r),Un(t,r))}function KU(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),sE(t,r)}function GU(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(e),sE(t,r)}var AE;AE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fn.current)_n=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return _n=!1,UU(t,e,r);_n=!!(t.flags&131072)}else _n=!1,Zt&&e.flags&1048576&&l_(e,Oh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ah(t,e),t=e.pendingProps;var s=Uo(e,ln.current);bo(e,r),s=Fx(null,e,n,t,s,r);var A=Sx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(n)?(A=!0,Lh(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ix(e),s.updater=Gf,e.stateNode=s,s._reactInternals=e,Qm(e,n,t,r),e=jm(null,e,n,!0,A,r)):(e.tag=0,Zt&&A&&xx(e),fn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ah(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=$U(n),t=ls(n,t),s){case 0:e=Rm(null,e,n,t,r);break e;case 1:e=Rv(null,e,n,t,r);break e;case 11:e=Qv(null,e,n,t,r);break e;case 14:e=Nv(null,e,n,ls(n.type,t),r);break e}throw Error(pe(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),Rm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),Rv(t,e,n,s,r);case 3:e:{if(H_(e),t===null)throw Error(pe(387));n=e.pendingProps,A=e.memoizedState,s=A.element,g_(t,e),Kh(e,n,null,r);var i=e.memoizedState;if(n=i.element,A.isDehydrated)if(A={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=jo(Error(pe(423)),e),e=jv(t,e,n,r,s);break e}else if(n!==s){s=jo(Error(pe(424)),e),e=jv(t,e,n,r,s);break e}else for(Dn=YA(e.stateNode.containerInfo.firstChild),Pn=e,Zt=!0,us=null,r=h_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qo(),n===s){e=AA(t,e,r);break e}fn(t,e,n,r)}e=e.child}return e;case 5:return p_(e),t===null&&Fm(e),n=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,Im(n,s)?i=null:A!==null&&Im(n,A)&&(e.flags|=32),O_(t,e),fn(t,e,i,r),e.child;case 6:return t===null&&Fm(e),null;case 13:return V_(t,e,r);case 4:return _x(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=No(e,null,n,r):fn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),Qv(t,e,n,s,r);case 7:return fn(t,e,e.pendingProps,r),e.child;case 8:return fn(t,e,e.pendingProps.children,r),e.child;case 12:return fn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,Ht(Hh,n._currentValue),n._currentValue=i,A!==null)if(gs(A.value,i)){if(A.children===s.children&&!Fn.current){e=AA(t,e,r);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var o=A.dependencies;if(o!==null){i=A.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(A.tag===1){l=eA(-1,r&-r),l.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}A.lanes|=r,l=A.alternate,l!==null&&(l.lanes|=r),Sm(A.return,r,e),o.lanes|=r;break}l=l.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(pe(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),Sm(i,r,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}fn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,bo(e,r),s=rs(s),n=n(s),e.flags|=1,fn(t,e,n,r),e.child;case 14:return n=e.type,s=ls(n,e.pendingProps),s=ls(n.type,s),Nv(t,e,n,s,r);case 15:return L_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),ah(t,e),e.tag=1,Sn(n)?(t=!0,Lh(e)):t=!1,bo(e,r),j_(e,n,s),Qm(e,n,s,r),jm(null,e,n,!0,t,r);case 19:return K_(t,e,r);case 22:return M_(t,e,r)}throw Error(pe(156,e.tag))};function iE(t,e){return QI(t,e)}function zU(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,e,r,n){return new zU(t,e,r,n)}function Ox(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $U(t){if(typeof t=="function")return Ox(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ix)return 11;if(t===ax)return 14}return 2}function ri(t,e){var r=t.alternate;return r===null?(r=Yn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ch(t,e,r,n,s,A){var i=2;if(n=t,typeof t=="function")Ox(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case so:return ra(r.children,s,A,e);case Ax:i=8,s|=8;break;case nm:return t=Yn(12,r,e,s|2),t.elementType=nm,t.lanes=A,t;case sm:return t=Yn(13,r,e,s),t.elementType=sm,t.lanes=A,t;case Am:return t=Yn(19,r,e,s),t.elementType=Am,t.lanes=A,t;case pI:return Wf(r,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fI:i=10;break e;case gI:i=9;break e;case ix:i=11;break e;case ax:i=14;break e;case TA:i=16,n=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=Yn(i,r,e,s),e.elementType=t,e.type=n,e.lanes=A,e}function ra(t,e,r,n){return t=Yn(7,t,n,e),t.lanes=r,t}function Wf(t,e,r,n){return t=Yn(22,t,n,e),t.elementType=pI,t.lanes=r,t.stateNode={isHidden:!1},t}function mp(t,e,r){return t=Yn(6,t,null,e),t.lanes=r,t}function xp(t,e,r){return e=Yn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WU(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yg(0),this.expirationTimes=Yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hx(t,e,r,n,s,A,i,o,l){return t=new WU(t,e,r,o,l),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Yn(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ix(A),t}function qU(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:no,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function aE(t){if(!t)return di;t=t._reactInternals;e:{if(Ia(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var r=t.type;if(Sn(r))return a_(t,r,e)}return e}function oE(t,e,r,n,s,A,i,o,l){return t=Hx(r,n,!0,t,s,A,i,o,l),t.context=aE(null),r=t.current,n=pn(),s=ti(r),A=eA(n,s),A.callback=e??null,ZA(r,A,s),t.current.lanes=s,xu(t,s,n),Un(t,n),t}function qf(t,e,r,n){var s=e.current,A=pn(),i=ti(s);return r=aE(r),e.context===null?e.context=r:e.pendingContext=r,e=eA(A,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ZA(s,e,i),t!==null&&(hs(t,s,i,A),sh(t,s,i)),i}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Vx(t,e){zv(t,e),(t=t.alternate)&&zv(t,e)}function XU(){return null}var lE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kx(t){this._internalRoot=t}Xf.prototype.render=Kx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));qf(t,e,null,null)};Xf.prototype.unmount=Kx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ua(function(){qf(null,t,null,null)}),e[nA]=null}};function Xf(t){this._internalRoot=t}Xf.prototype.unstable_scheduleHydration=function(t){if(t){var e=MI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<UA.length&&e!==0&&e<UA[r].priority;r++);UA.splice(r,0,t),r===0&&HI(t)}};function Gx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $v(){}function JU(t,e,r,n,s){if(s){if(typeof n=="function"){var A=n;n=function(){var c=Yh(i);A.call(c)}}var i=oE(e,n,t,0,null,!1,!1,"",$v);return t._reactRootContainer=i,t[nA]=i.current,Vc(t.nodeType===8?t.parentNode:t),ua(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=Yh(l);o.call(c)}}var l=Hx(t,0,!1,null,null,!1,!1,"",$v);return t._reactRootContainer=l,t[nA]=l.current,Vc(t.nodeType===8?t.parentNode:t),ua(function(){qf(e,l,r,n)}),l}function Yf(t,e,r,n,s){var A=r._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var o=s;s=function(){var l=Yh(i);o.call(l)}}qf(e,i,t,s)}else i=JU(r,e,t,s,n);return Yh(i)}PI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Jl(e.pendingLanes);r!==0&&(cx(e,r|1),Un(e,hr()),!(yt&6)&&(Do=hr()+500,_i()))}break;case 13:ua(function(){var n=sA(t,1);if(n!==null){var s=pn();hs(n,t,1,s)}}),Vx(t,1)}};ux=function(t){if(t.tag===13){var e=sA(t,134217728);if(e!==null){var r=pn();hs(e,t,134217728,r)}Vx(t,134217728)}};LI=function(t){if(t.tag===13){var e=ti(t),r=sA(t,e);if(r!==null){var n=pn();hs(r,t,e,n)}Vx(t,e)}};MI=function(){return Ft};OI=function(t,e){var r=Ft;try{return Ft=t,e()}finally{Ft=r}};gm=function(t,e,r){switch(e){case"input":if(om(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Hf(n);if(!s)throw Error(pe(90));xI(n),om(n,s)}}}break;case"textarea":yI(t,r);break;case"select":e=r.value,e!=null&&wo(t,!!r.multiple,e,!1)}};EI=Px;kI=ua;var YU={usingClientEntryPoint:!1,Events:[yu,oo,Hf,II,_I,Px]},jl={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZU={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:uA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SI(t),t===null?null:t.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||XU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Pf=wd.inject(ZU),ks=wd}catch{}}Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YU;Hn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gx(e))throw Error(pe(200));return qU(t,e,null,r)};Hn.createRoot=function(t,e){if(!Gx(t))throw Error(pe(299));var r=!1,n="",s=lE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hx(t,1,!1,null,null,r,!1,n,s),t[nA]=e.current,Vc(t.nodeType===8?t.parentNode:t),new Kx(e)};Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=SI(e),t=t===null?null:t.stateNode,t};Hn.flushSync=function(t){return ua(t)};Hn.hydrate=function(t,e,r){if(!Jf(e))throw Error(pe(200));return Yf(null,t,e,!0,r)};Hn.hydrateRoot=function(t,e,r){if(!Gx(t))throw Error(pe(405));var n=r!=null&&r.hydratedSources||null,s=!1,A="",i=lE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(A=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=oE(e,null,t,1,r??null,s,!1,A,i),t[nA]=e.current,Vc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Xf(e)};Hn.render=function(t,e,r){if(!Jf(e))throw Error(pe(200));return Yf(null,t,e,!1,r)};Hn.unmountComponentAtNode=function(t){if(!Jf(t))throw Error(pe(40));return t._reactRootContainer?(ua(function(){Yf(null,null,t,!1,function(){t._reactRootContainer=null,t[nA]=null})}),!0):!1};Hn.unstable_batchedUpdates=Px;Hn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Jf(r))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return Yf(t,e,r,!1,n)};Hn.version="18.3.1-next-f1338f8080-20240426";function cE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cE)}catch(t){console.error(t)}}cE(),cI.exports=Hn;var eQ=cI.exports,Wv=eQ;tm.createRoot=Wv.createRoot,tm.hydrateRoot=Wv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yc(){return Yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yc.apply(this,arguments)}var VA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(VA||(VA={}));const qv="popstate";function tQ(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:o="",hash:l=""}=_a(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Wm("",{pathname:i,search:o,hash:l},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(s,A){let i=s.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof A=="string"?A:Zh(A))}function n(s,A){Zf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return nQ(e,r,n,t)}function Ar(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rQ(){return Math.random().toString(36).substr(2,8)}function Xv(t,e){return{usr:t.state,key:t.key,idx:e}}function Wm(t,e,r,n){return r===void 0&&(r=null),Yc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_a(e):e,{state:r,key:e&&e.key||n||rQ()})}function Zh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function _a(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function nQ(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:A=!1}=n,i=s.history,o=VA.Pop,l=null,c=d();c==null&&(c=0,i.replaceState(Yc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=VA.Pop;let E=d(),C=E==null?null:E-c;c=E,l&&l({action:o,location:B.location,delta:C})}function f(E,C){o=VA.Push;let b=Wm(B.location,E,C);r&&r(b,E),c=d()+1;let I=Xv(b,c),Q=B.createHref(b);try{i.pushState(I,"",Q)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(Q)}A&&l&&l({action:o,location:B.location,delta:1})}function p(E,C){o=VA.Replace;let b=Wm(B.location,E,C);r&&r(b,E),c=d();let I=Xv(b,c),Q=B.createHref(b);i.replaceState(I,"",Q),A&&l&&l({action:o,location:B.location,delta:0})}function w(E){let C=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof E=="string"?E:Zh(E);return b=b.replace(/ $/,"%20"),Ar(C,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,C)}let B={get action(){return o},get location(){return t(s,i)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(qv,h),l=E,()=>{s.removeEventListener(qv,h),l=null}},createHref(E){return e(s,E)},createURL:w,encodeLocation(E){let C=w(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:p,go(E){return i.go(E)}};return B}var Jv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jv||(Jv={}));function sQ(t,e,r){return r===void 0&&(r="/"),AQ(t,e,r)}function AQ(t,e,r,n){let s=typeof e=="string"?_a(e):e,A=Po(s.pathname||"/",r);if(A==null)return null;let i=uE(t);iQ(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let c=mQ(A);o=gQ(i[l],c)}return o}function uE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(A,i,o)=>{let l={relativePath:o===void 0?A.path||"":o,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};l.relativePath.startsWith("/")&&(Ar(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=ni([n,l.relativePath]),d=r.concat(l);A.children&&A.children.length>0&&(Ar(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),uE(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:hQ(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var o;if(A.path===""||!((o=A.path)!=null&&o.includes("?")))s(A,i);else for(let l of dE(A.path))s(A,i,l)}),e}function dE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return s?[A,""]:[A];let i=dE(n.join("/")),o=[];return o.push(...i.map(l=>l===""?A:[A,l].join("/"))),s&&o.push(...i),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function iQ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:fQ(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const aQ=/^:[\w-]+$/,oQ=3,lQ=2,cQ=1,uQ=10,dQ=-2,Yv=t=>t==="*";function hQ(t,e){let r=t.split("/"),n=r.length;return r.some(Yv)&&(n+=dQ),e&&(n+=lQ),r.filter(s=>!Yv(s)).reduce((s,A)=>s+(aQ.test(A)?oQ:A===""?cQ:uQ),n)}function fQ(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function gQ(t,e,r){let{routesMeta:n}=t,s={},A="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],c=o===n.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=qm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:ni([A,h.pathname]),pathnameBase:BQ(ni([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=ni([A,h.pathnameBase]))}return i}function qm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=pQ(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let B=o[h]||"";i=A.slice(0,A.length-B.length).replace(/(.)\/+$/,"$1")}const w=o[h];return p&&!w?c[f]=void 0:c[f]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function pQ(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Zf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function mQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Po(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const xQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wQ=t=>xQ.test(t);function yQ(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?_a(t):t,A;if(r)if(wQ(r))A=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Zf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?A=Zv(r.substring(1),"/"):A=Zv(r,e)}else A=e;return{pathname:A,search:bQ(n),hash:CQ(s)}}function Zv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function wp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vQ(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function zx(t,e){let r=vQ(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function $x(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=_a(t):(s=Yc({},t),Ar(!s.pathname||!s.pathname.includes("?"),wp("?","pathname","search",s)),Ar(!s.pathname||!s.pathname.includes("#"),wp("#","pathname","hash",s)),Ar(!s.search||!s.search.includes("#"),wp("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,o;if(i==null)o=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=yQ(s,o),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ni=t=>t.join("/").replace(/\/\/+/g,"/"),BQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,CQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function IQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hE=["post","put","patch","delete"];new Set(hE);const _Q=["get",...hE];new Set(_Q);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zc(){return Zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zc.apply(this,arguments)}const eg=_.createContext(null),fE=_.createContext(null),dA=_.createContext(null),tg=_.createContext(null),hA=_.createContext({outlet:null,matches:[],isDataRoute:!1}),gE=_.createContext(null);function EQ(t,e){let{relative:r}=e===void 0?{}:e;il()||Ar(!1);let{basename:n,navigator:s}=_.useContext(dA),{hash:A,pathname:i,search:o}=rg(t,{relative:r}),l=i;return n!=="/"&&(l=i==="/"?n:ni([n,i])),s.createHref({pathname:l,search:o,hash:A})}function il(){return _.useContext(tg)!=null}function Ei(){return il()||Ar(!1),_.useContext(tg).location}function pE(t){_.useContext(dA).static||_.useLayoutEffect(t)}function Bu(){let{isDataRoute:t}=_.useContext(hA);return t?HQ():kQ()}function kQ(){il()||Ar(!1);let t=_.useContext(eg),{basename:e,future:r,navigator:n}=_.useContext(dA),{matches:s}=_.useContext(hA),{pathname:A}=Ei(),i=JSON.stringify(zx(s,r.v7_relativeSplatPath)),o=_.useRef(!1);return pE(()=>{o.current=!0}),_.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){n.go(c);return}let h=$x(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ni([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,A,t])}const TQ=_.createContext(null);function FQ(t){let e=_.useContext(hA).outlet;return e&&_.createElement(TQ.Provider,{value:t},e)}function rg(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=_.useContext(dA),{matches:s}=_.useContext(hA),{pathname:A}=Ei(),i=JSON.stringify(zx(s,n.v7_relativeSplatPath));return _.useMemo(()=>$x(t,JSON.parse(i),A,r==="path"),[t,i,A,r])}function SQ(t,e){return UQ(t,e)}function UQ(t,e,r,n){il()||Ar(!1);let{navigator:s}=_.useContext(dA),{matches:A}=_.useContext(hA),i=A[A.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c=Ei(),d;if(e){var h;let E=typeof e=="string"?_a(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||Ar(!1),d=E}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let E=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let w=sQ(t,{pathname:p}),B=DQ(w&&w.map(E=>Object.assign({},E,{params:Object.assign({},o,E.params),pathname:ni([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:ni([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),A,r,n);return e&&B?_.createElement(tg.Provider,{value:{location:Zc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:VA.Pop}},B):B}function QQ(){let t=OQ(),e=IQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),r?_.createElement("pre",{style:s},r):null,null)}const NQ=_.createElement(QQ,null);class RQ extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?_.createElement(hA.Provider,{value:this.props.routeContext},_.createElement(gE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jQ(t){let{routeContext:e,match:r,children:n}=t,s=_.useContext(eg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(hA.Provider,{value:e},n)}function DQ(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var A;if(!r)return null;if(r.errors)t=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Ar(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let p,w=!1,B=null,E=null;r&&(p=o&&h.route.id?o[h.route.id]:void 0,B=h.route.errorElement||NQ,l&&(c<0&&f===0?(VQ("route-fallback"),w=!0,E=null):c===f&&(w=!0,E=h.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,f+1)),b=()=>{let I;return p?I=B:w?I=E:h.route.Component?I=_.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,_.createElement(jQ,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:I})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(RQ,{location:r.location,revalidation:r.revalidation,component:B,error:p,children:b(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):b()},null)}var mE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mE||{}),xE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(xE||{});function PQ(t){let e=_.useContext(eg);return e||Ar(!1),e}function LQ(t){let e=_.useContext(fE);return e||Ar(!1),e}function MQ(t){let e=_.useContext(hA);return e||Ar(!1),e}function wE(t){let e=MQ(),r=e.matches[e.matches.length-1];return r.route.id||Ar(!1),r.route.id}function OQ(){var t;let e=_.useContext(gE),r=LQ(),n=wE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function HQ(){let{router:t}=PQ(mE.UseNavigateStable),e=wE(xE.UseNavigateStable),r=_.useRef(!1);return pE(()=>{r.current=!0}),_.useCallback(function(s,A){A===void 0&&(A={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Zc({fromRouteId:e},A)))},[t,e])}const eB={};function VQ(t,e,r){eB[t]||(eB[t]=!0)}function KQ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ef(t){let{to:e,replace:r,state:n,relative:s}=t;il()||Ar(!1);let{future:A,static:i}=_.useContext(dA),{matches:o}=_.useContext(hA),{pathname:l}=Ei(),c=Bu(),d=$x(e,zx(o,A.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return _.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function GQ(t){return FQ(t.context)}function dn(t){Ar(!1)}function zQ(t){let{basename:e="/",children:r=null,location:n,navigationType:s=VA.Pop,navigator:A,static:i=!1,future:o}=t;il()&&Ar(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:A,static:i,future:Zc({v7_relativeSplatPath:!1},o)}),[l,o,A,i]);typeof n=="string"&&(n=_a(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=n,B=_.useMemo(()=>{let E=Po(d,l);return E==null?null:{location:{pathname:E,search:h,hash:f,state:p,key:w},navigationType:s}},[l,d,h,f,p,w,s]);return B==null?null:_.createElement(dA.Provider,{value:c},_.createElement(tg.Provider,{children:r,value:B}))}function $Q(t){let{children:e,location:r}=t;return SQ(Xm(e),r)}new Promise(()=>{});function Xm(t,e){e===void 0&&(e=[]);let r=[];return _.Children.forEach(t,(n,s)=>{if(!_.isValidElement(n))return;let A=[...e,s];if(n.type===_.Fragment){r.push.apply(r,Xm(n.props.children,A));return}n.type!==dn&&Ar(!1),!n.props.index||!n.props.children||Ar(!1);let i={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Xm(n.props.children,A)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tf.apply(this,arguments)}function yE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,A;for(A=0;A<n.length;A++)s=n[A],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function WQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qQ(t,e){return t.button===0&&(!e||e==="_self")&&!WQ(t)}function Jm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function XQ(t,e){let r=Jm(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(A=>{r.append(s,A)})}),r}const JQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YQ=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ZQ="6";try{window.__reactRouterVersion=ZQ}catch{}const eN=_.createContext({isTransitioning:!1}),tN="startTransition",tB=VF[tN];function rN(t){let{basename:e,children:r,future:n,window:s}=t,A=_.useRef();A.current==null&&(A.current=tQ({window:s,v5Compat:!0}));let i=A.current,[o,l]=_.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=_.useCallback(h=>{c&&tB?tB(()=>l(h)):l(h)},[l,c]);return _.useLayoutEffect(()=>i.listen(d),[i,d]),_.useEffect(()=>KQ(n),[n]),_.createElement(zQ,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const nN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AN=_.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:A,replace:i,state:o,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=yE(e,JQ),{basename:p}=_.useContext(dA),w,B=!1;if(typeof c=="string"&&sN.test(c)&&(w=c,nN))try{let I=new URL(window.location.href),Q=c.startsWith("//")?new URL(I.protocol+c):new URL(c),N=Po(Q.pathname,p);Q.origin===I.origin&&N!=null?c=N+Q.search+Q.hash:B=!0}catch{}let E=EQ(c,{relative:s}),C=aN(c,{replace:i,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:h});function b(I){n&&n(I),I.defaultPrevented||C(I)}return _.createElement("a",tf({},f,{href:w||E,onClick:B||A?n:b,ref:r,target:l}))}),Is=_.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:A="",end:i=!1,style:o,to:l,viewTransition:c,children:d}=e,h=yE(e,YQ),f=rg(l,{relative:h.relative}),p=Ei(),w=_.useContext(fE),{navigator:B,basename:E}=_.useContext(dA),C=w!=null&&oN(f)&&c===!0,b=B.encodeLocation?B.encodeLocation(f).pathname:f.pathname,I=p.pathname,Q=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(I=I.toLowerCase(),Q=Q?Q.toLowerCase():null,b=b.toLowerCase()),Q&&E&&(Q=Po(Q,E)||Q);const N=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let S=I===b||!i&&I.startsWith(b)&&I.charAt(N)==="/",m=Q!=null&&(Q===b||!i&&Q.startsWith(b)&&Q.charAt(b.length)==="/"),y={isActive:S,isPending:m,isTransitioning:C},v=S?n:void 0,k;typeof A=="function"?k=A(y):k=[A,S?"active":null,m?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(y):o;return _.createElement(AN,tf({},h,{"aria-current":v,className:k,ref:r,style:R,to:l,viewTransition:c}),typeof d=="function"?d(y):d)});var Ym;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ym||(Ym={}));var rB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rB||(rB={}));function iN(t){let e=_.useContext(eg);return e||Ar(!1),e}function aN(t,e){let{target:r,replace:n,state:s,preventScrollReset:A,relative:i,viewTransition:o}=e===void 0?{}:e,l=Bu(),c=Ei(),d=rg(t,{relative:i});return _.useCallback(h=>{if(qQ(h,r)){h.preventDefault();let f=n!==void 0?n:Zh(c)===Zh(d);l(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:o})}},[c,l,d,n,s,r,t,A,i,o])}function vE(t){let e=_.useRef(Jm(t)),r=_.useRef(!1),n=Ei(),s=_.useMemo(()=>XQ(n.search,r.current?null:e.current),[n.search]),A=Bu(),i=_.useCallback((o,l)=>{const c=Jm(typeof o=="function"?o(s):o);r.current=!0,A("?"+c,l)},[A,s]);return[s,i]}function oN(t,e){e===void 0&&(e={});let r=_.useContext(eN);r==null&&Ar(!1);let{basename:n}=iN(Ym.useViewTransitionState),s=rg(t,{relative:e.relative});if(!r.isTransitioning)return!1;let A=Po(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Po(r.nextLocation.pathname,n)||r.nextLocation.pathname;return qm(s.pathname,i)!=null||qm(s.pathname,A)!=null}var de=(t=>(t.First="1 ",t.Second="2 ",t))(de||{}),rt=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(rt||{});const wt=["","","","",""],bn={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},nB=["","","/","","","",""," "],rf=[{shift:de.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:de.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:de.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:de.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:de.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:de.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:de.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:de.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:de.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:de.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:de.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:de.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:de.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:de.Second,period:6,start:"18:50",end:"19:35",day:"default"}],lN=[{shift:de.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:de.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:de.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:de.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:de.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:de.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:de.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:de.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:de.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:de.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:de.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:de.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:de.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:de.Second,period:6,start:"17:00",end:"17:35",day:"default"}],Dl=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),BE=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:Dl(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:Dl(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:Dl(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:Dl(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:Dl(78,86),order:5}],nn={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:de.First,studentsCount:25},{id:"c2",name:"6",shift:de.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:rf,dutyZones:BE,dutySchedule:[],nutritionRecords:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",weatherApiKey:"",weatherCity:"Minsk,BY",bellPresets:[{id:"preset_normal",name:" (45 )",bells:rf},{id:"preset_short",name:" (35 )",bells:lN}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]},telegramTemplates:{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`},adminAnnouncement:{message:"",active:!1,lastUpdated:""}}},cN="modulepreload",uN=function(t){return"/zamenygymn/"+t},sB={},dN=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=uN(l),l in sB)return;sB[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":cN,c||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function A(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&A(o.reason);return e().catch(A)})};var AB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},hN=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[r++];e[n++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[r++],i=t[r++],o=t[r++],l=((s&7)<<18|(A&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const A=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},CE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=A>>2,h=(A&3)<<4|o>>4;let f=(o&15)<<2|c>>6,p=c&63;l||(p=64,i||(f=64)),n.push(r[d],r[h],r[f],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const A=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,A==null||o==null||c==null||h==null)throw new fN;const f=A<<2|o>>4;if(n.push(f),c!==64){const p=o<<4&240|c>>2;if(n.push(p),h!==64){const w=c<<6&192|h;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gN=function(t){const e=bE(t);return CE.encodeByteArray(e,!0)},nf=function(t){return gN(t).replace(/\./g,"")},IE=function(t){try{return CE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=()=>pN().__FIREBASE_DEFAULTS__,xN=()=>{if(typeof process>"u"||typeof AB>"u")return;const t=AB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IE(t[1]);return e&&JSON.parse(e)},ng=()=>{try{return mN()||xN()||wN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_E=t=>{var e,r;return(r=(e=ng())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},yN=t=>{const e=_E(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},EE=()=>{var t;return(t=ng())===null||t===void 0?void 0:t.config},kE=t=>{var e;return(e=ng())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nf(JSON.stringify(r)),nf(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Er())}function CN(){var t;const e=(t=ng())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _N(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kN(){const t=Er();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TE(){return!CN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FE(){try{return typeof indexedDB=="object"}catch{return!1}}function TN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="FirebaseError";class fA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=FN,Object.setPrototypeOf(this,fA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?SN(A,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new fA(s,o,n)}}function SN(t,e){return t.replace(UN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const UN=/\{\$([^}]+)}/g;function QN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hi(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const A=t[s],i=e[s];if(iB(A)&&iB(i)){if(!hi(A,i))return!1}else if(A!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function iB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Zl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,A]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function ec(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function NN(t,e){const r=new RN(t,e);return r.subscribe.bind(r)}class RN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");jN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=yp),s.error===void 0&&(s.error=yp),s.complete===void 0&&(s.complete=yp);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function yp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class da{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new vN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LN(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const A=this.getOrInitializeService({instanceIdentifier:s});n.resolve(A)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[A,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(A);n===o&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),A=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:PN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PN(t){return t===Ki?void 0:t}function LN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new DN(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ht||(ht={}));const ON={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},HN=ht.INFO,VN={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},KN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=VN[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Wx=class{constructor(e){this.name=e,this._logLevel=HN,this._logHandler=KN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ON[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}};const GN=(t,e)=>e.some(r=>t instanceof r);let aB,oB;function zN(){return aB||(aB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $N(){return oB||(oB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,Zm=new WeakMap,UE=new WeakMap,vp=new WeakMap,qx=new WeakMap;function WN(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{r(si(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&SE.set(r,t)}).catch(()=>{}),qx.set(e,t),e}function qN(t){if(Zm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});Zm.set(t,e)}let e0={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return si(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XN(t){e0=t(e0)}function JN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Bp(this),e,...r);return UE.set(n,e.sort?e.sort():[e]),si(n)}:$N().includes(t)?function(...e){return t.apply(Bp(this),e),si(SE.get(this))}:function(...e){return si(t.apply(Bp(this),e))}}function YN(t){return typeof t=="function"?JN(t):(t instanceof IDBTransaction&&qN(t),GN(t,zN())?new Proxy(t,e0):t)}function si(t){if(t instanceof IDBRequest)return WN(t);if(vp.has(t))return vp.get(t);const e=YN(t);return e!==t&&(vp.set(t,e),qx.set(e,t)),e}const Bp=t=>qx.get(t);function ZN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),o=si(i);return n&&i.addEventListener("upgradeneeded",l=>{n(si(i.result),l.oldVersion,l.newVersion,si(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{A&&l.addEventListener("close",()=>A()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const e4=["get","getKey","getAll","getAllKeys","count"],t4=["put","add","delete","clear"],bp=new Map;function lB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=t4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||e4.includes(r)))return;const A=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(o.shift())),(await Promise.all([c[r](...o),s&&l.done]))[0]};return bp.set(e,A),A}XN(t=>({...t,get:(e,r,n)=>lB(e,r)||t.get(e,r,n),has:(e,r)=>!!lB(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(n4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function n4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const t0="@firebase/app",cB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new Wx("@firebase/app"),s4="@firebase/app-compat",A4="@firebase/analytics-compat",i4="@firebase/analytics",a4="@firebase/app-check-compat",o4="@firebase/app-check",l4="@firebase/auth",c4="@firebase/auth-compat",u4="@firebase/database",d4="@firebase/data-connect",h4="@firebase/database-compat",f4="@firebase/functions",g4="@firebase/functions-compat",p4="@firebase/installations",m4="@firebase/installations-compat",x4="@firebase/messaging",w4="@firebase/messaging-compat",y4="@firebase/performance",v4="@firebase/performance-compat",B4="@firebase/remote-config",b4="@firebase/remote-config-compat",C4="@firebase/storage",I4="@firebase/storage-compat",_4="@firebase/firestore",E4="@firebase/vertexai-preview",k4="@firebase/firestore-compat",T4="firebase",F4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",S4={[t0]:"fire-core",[s4]:"fire-core-compat",[i4]:"fire-analytics",[A4]:"fire-analytics-compat",[o4]:"fire-app-check",[a4]:"fire-app-check-compat",[l4]:"fire-auth",[c4]:"fire-auth-compat",[u4]:"fire-rtdb",[d4]:"fire-data-connect",[h4]:"fire-rtdb-compat",[f4]:"fire-fn",[g4]:"fire-fn-compat",[p4]:"fire-iid",[m4]:"fire-iid-compat",[x4]:"fire-fcm",[w4]:"fire-fcm-compat",[y4]:"fire-perf",[v4]:"fire-perf-compat",[B4]:"fire-rc",[b4]:"fire-rc-compat",[C4]:"fire-gcs",[I4]:"fire-gcs-compat",[_4]:"fire-fst",[k4]:"fire-fst-compat",[E4]:"fire-vertex","fire-js":"fire-js",[T4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,U4=new Map,r0=new Map;function uB(t,e){try{t.container.addComponent(e)}catch(r){iA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Lo(t){const e=t.name;if(r0.has(e))return iA.debug(`There were multiple attempts to register component ${e}.`),!1;r0.set(e,t);for(const r of eu.values())uB(r,t);for(const r of U4.values())uB(r,t);return!0}function Iu(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Q4(t,e,r=sf){Iu(t,e).clearInstance(r)}function qs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new bu("app","Firebase",N4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=F4;function QE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:sf,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Ai.create("bad-app-name",{appName:String(s)});if(r||(r=EE()),!r)throw Ai.create("no-options");const A=eu.get(s);if(A){if(hi(r,A.options)&&hi(n,A.config))return A;throw Ai.create("duplicate-app",{appName:s})}const i=new MN(s);for(const l of r0.values())i.addComponent(l);const o=new R4(r,n,i);return eu.set(s,o),o}function Xx(t=sf){const e=eu.get(t);if(!e&&t===sf&&EE())return QE();if(!e)throw Ai.create("no-app",{appName:t});return e}function j4(){return Array.from(eu.values())}function ii(t,e,r){var n;let s=(n=S4[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const o=[`Unable to register library "${s}" with version "${e}":`];A&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),iA.warn(o.join(" "));return}Lo(new da(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="firebase-heartbeat-database",P4=1,tu="firebase-heartbeat-store";let Cp=null;function NE(){return Cp||(Cp=ZN(D4,P4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tu)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ai.create("idb-open",{originalErrorMessage:t.message})})),Cp}async function L4(t){try{const r=(await NE()).transaction(tu),n=await r.objectStore(tu).get(RE(t));return await r.done,n}catch(e){if(e instanceof fA)iA.warn(e.message);else{const r=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});iA.warn(r.message)}}}async function dB(t,e){try{const n=(await NE()).transaction(tu,"readwrite");await n.objectStore(tu).put(e,RE(t)),await n.done}catch(r){if(r instanceof fA)iA.warn(r.message);else{const n=Ai.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});iA.warn(n.message)}}}function RE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=1024,O4=30*24*60*60*1e3;class H4{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new K4(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=hB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=O4}),this._storage.overwrite(this._heartbeatsCache))}catch(n){iA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=hB(),{heartbeatsToSend:n,unsentEntries:s}=V4(this._heartbeatsCache.heartbeats),A=nf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(r){return iA.warn(r),""}}}function hB(){return new Date().toISOString().substring(0,10)}function V4(t,e=M4){const r=[];let n=t.slice();for(const s of t){const A=r.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),fB(r)>e){A.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),fB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class K4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FE()?TN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await L4(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return dB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return dB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fB(t){return nf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){Lo(new da("platform-logger",e=>new r4(e),"PRIVATE")),Lo(new da("heartbeat",e=>new H4(e),"PRIVATE")),ii(t0,cB,t),ii(t0,cB,"esm2017"),ii("fire-js","")}G4("");var z4="firebase",$4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii(z4,$4,"app");var gB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var na,jE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(m,y){function v(){}v.prototype=y.prototype,m.D=y.prototype,m.prototype=new v,m.prototype.constructor=m,m.C=function(k,R,L){for(var U=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)U[Oe-2]=arguments[Oe];return y.prototype[R].apply(k,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(m,y,v){v||(v=0);var k=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)k[R]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(R=0;16>R;++R)k[R]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=m.g[0],v=m.g[1],R=m.g[2];var L=m.g[3],U=y+(L^v&(R^L))+k[0]+3614090360&4294967295;y=v+(U<<7&4294967295|U>>>25),U=L+(R^y&(v^R))+k[1]+3905402710&4294967295,L=y+(U<<12&4294967295|U>>>20),U=R+(v^L&(y^v))+k[2]+606105819&4294967295,R=L+(U<<17&4294967295|U>>>15),U=v+(y^R&(L^y))+k[3]+3250441966&4294967295,v=R+(U<<22&4294967295|U>>>10),U=y+(L^v&(R^L))+k[4]+4118548399&4294967295,y=v+(U<<7&4294967295|U>>>25),U=L+(R^y&(v^R))+k[5]+1200080426&4294967295,L=y+(U<<12&4294967295|U>>>20),U=R+(v^L&(y^v))+k[6]+2821735955&4294967295,R=L+(U<<17&4294967295|U>>>15),U=v+(y^R&(L^y))+k[7]+4249261313&4294967295,v=R+(U<<22&4294967295|U>>>10),U=y+(L^v&(R^L))+k[8]+1770035416&4294967295,y=v+(U<<7&4294967295|U>>>25),U=L+(R^y&(v^R))+k[9]+2336552879&4294967295,L=y+(U<<12&4294967295|U>>>20),U=R+(v^L&(y^v))+k[10]+4294925233&4294967295,R=L+(U<<17&4294967295|U>>>15),U=v+(y^R&(L^y))+k[11]+2304563134&4294967295,v=R+(U<<22&4294967295|U>>>10),U=y+(L^v&(R^L))+k[12]+1804603682&4294967295,y=v+(U<<7&4294967295|U>>>25),U=L+(R^y&(v^R))+k[13]+4254626195&4294967295,L=y+(U<<12&4294967295|U>>>20),U=R+(v^L&(y^v))+k[14]+2792965006&4294967295,R=L+(U<<17&4294967295|U>>>15),U=v+(y^R&(L^y))+k[15]+1236535329&4294967295,v=R+(U<<22&4294967295|U>>>10),U=y+(R^L&(v^R))+k[1]+4129170786&4294967295,y=v+(U<<5&4294967295|U>>>27),U=L+(v^R&(y^v))+k[6]+3225465664&4294967295,L=y+(U<<9&4294967295|U>>>23),U=R+(y^v&(L^y))+k[11]+643717713&4294967295,R=L+(U<<14&4294967295|U>>>18),U=v+(L^y&(R^L))+k[0]+3921069994&4294967295,v=R+(U<<20&4294967295|U>>>12),U=y+(R^L&(v^R))+k[5]+3593408605&4294967295,y=v+(U<<5&4294967295|U>>>27),U=L+(v^R&(y^v))+k[10]+38016083&4294967295,L=y+(U<<9&4294967295|U>>>23),U=R+(y^v&(L^y))+k[15]+3634488961&4294967295,R=L+(U<<14&4294967295|U>>>18),U=v+(L^y&(R^L))+k[4]+3889429448&4294967295,v=R+(U<<20&4294967295|U>>>12),U=y+(R^L&(v^R))+k[9]+568446438&4294967295,y=v+(U<<5&4294967295|U>>>27),U=L+(v^R&(y^v))+k[14]+3275163606&4294967295,L=y+(U<<9&4294967295|U>>>23),U=R+(y^v&(L^y))+k[3]+4107603335&4294967295,R=L+(U<<14&4294967295|U>>>18),U=v+(L^y&(R^L))+k[8]+1163531501&4294967295,v=R+(U<<20&4294967295|U>>>12),U=y+(R^L&(v^R))+k[13]+2850285829&4294967295,y=v+(U<<5&4294967295|U>>>27),U=L+(v^R&(y^v))+k[2]+4243563512&4294967295,L=y+(U<<9&4294967295|U>>>23),U=R+(y^v&(L^y))+k[7]+1735328473&4294967295,R=L+(U<<14&4294967295|U>>>18),U=v+(L^y&(R^L))+k[12]+2368359562&4294967295,v=R+(U<<20&4294967295|U>>>12),U=y+(v^R^L)+k[5]+4294588738&4294967295,y=v+(U<<4&4294967295|U>>>28),U=L+(y^v^R)+k[8]+2272392833&4294967295,L=y+(U<<11&4294967295|U>>>21),U=R+(L^y^v)+k[11]+1839030562&4294967295,R=L+(U<<16&4294967295|U>>>16),U=v+(R^L^y)+k[14]+4259657740&4294967295,v=R+(U<<23&4294967295|U>>>9),U=y+(v^R^L)+k[1]+2763975236&4294967295,y=v+(U<<4&4294967295|U>>>28),U=L+(y^v^R)+k[4]+1272893353&4294967295,L=y+(U<<11&4294967295|U>>>21),U=R+(L^y^v)+k[7]+4139469664&4294967295,R=L+(U<<16&4294967295|U>>>16),U=v+(R^L^y)+k[10]+3200236656&4294967295,v=R+(U<<23&4294967295|U>>>9),U=y+(v^R^L)+k[13]+681279174&4294967295,y=v+(U<<4&4294967295|U>>>28),U=L+(y^v^R)+k[0]+3936430074&4294967295,L=y+(U<<11&4294967295|U>>>21),U=R+(L^y^v)+k[3]+3572445317&4294967295,R=L+(U<<16&4294967295|U>>>16),U=v+(R^L^y)+k[6]+76029189&4294967295,v=R+(U<<23&4294967295|U>>>9),U=y+(v^R^L)+k[9]+3654602809&4294967295,y=v+(U<<4&4294967295|U>>>28),U=L+(y^v^R)+k[12]+3873151461&4294967295,L=y+(U<<11&4294967295|U>>>21),U=R+(L^y^v)+k[15]+530742520&4294967295,R=L+(U<<16&4294967295|U>>>16),U=v+(R^L^y)+k[2]+3299628645&4294967295,v=R+(U<<23&4294967295|U>>>9),U=y+(R^(v|~L))+k[0]+4096336452&4294967295,y=v+(U<<6&4294967295|U>>>26),U=L+(v^(y|~R))+k[7]+1126891415&4294967295,L=y+(U<<10&4294967295|U>>>22),U=R+(y^(L|~v))+k[14]+2878612391&4294967295,R=L+(U<<15&4294967295|U>>>17),U=v+(L^(R|~y))+k[5]+4237533241&4294967295,v=R+(U<<21&4294967295|U>>>11),U=y+(R^(v|~L))+k[12]+1700485571&4294967295,y=v+(U<<6&4294967295|U>>>26),U=L+(v^(y|~R))+k[3]+2399980690&4294967295,L=y+(U<<10&4294967295|U>>>22),U=R+(y^(L|~v))+k[10]+4293915773&4294967295,R=L+(U<<15&4294967295|U>>>17),U=v+(L^(R|~y))+k[1]+2240044497&4294967295,v=R+(U<<21&4294967295|U>>>11),U=y+(R^(v|~L))+k[8]+1873313359&4294967295,y=v+(U<<6&4294967295|U>>>26),U=L+(v^(y|~R))+k[15]+4264355552&4294967295,L=y+(U<<10&4294967295|U>>>22),U=R+(y^(L|~v))+k[6]+2734768916&4294967295,R=L+(U<<15&4294967295|U>>>17),U=v+(L^(R|~y))+k[13]+1309151649&4294967295,v=R+(U<<21&4294967295|U>>>11),U=y+(R^(v|~L))+k[4]+4149444226&4294967295,y=v+(U<<6&4294967295|U>>>26),U=L+(v^(y|~R))+k[11]+3174756917&4294967295,L=y+(U<<10&4294967295|U>>>22),U=R+(y^(L|~v))+k[2]+718787259&4294967295,R=L+(U<<15&4294967295|U>>>17),U=v+(L^(R|~y))+k[9]+3951481745&4294967295,m.g[0]=m.g[0]+y&4294967295,m.g[1]=m.g[1]+(R+(U<<21&4294967295|U>>>11))&4294967295,m.g[2]=m.g[2]+R&4294967295,m.g[3]=m.g[3]+L&4294967295}n.prototype.u=function(m,y){y===void 0&&(y=m.length);for(var v=y-this.blockSize,k=this.B,R=this.h,L=0;L<y;){if(R==0)for(;L<=v;)s(this,m,L),L+=this.blockSize;if(typeof m=="string"){for(;L<y;)if(k[R++]=m.charCodeAt(L++),R==this.blockSize){s(this,k),R=0;break}}else for(;L<y;)if(k[R++]=m[L++],R==this.blockSize){s(this,k),R=0;break}}this.h=R,this.o+=y},n.prototype.v=function(){var m=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);m[0]=128;for(var y=1;y<m.length-8;++y)m[y]=0;var v=8*this.o;for(y=m.length-8;y<m.length;++y)m[y]=v&255,v/=256;for(this.u(m),m=Array(16),y=v=0;4>y;++y)for(var k=0;32>k;k+=8)m[v++]=this.g[y]>>>k&255;return m};function A(m,y){var v=o;return Object.prototype.hasOwnProperty.call(v,m)?v[m]:v[m]=y(m)}function i(m,y){this.h=y;for(var v=[],k=!0,R=m.length-1;0<=R;R--){var L=m[R]|0;k&&L==y||(v[R]=L,k=!1)}this.g=v}var o={};function l(m){return-128<=m&&128>m?A(m,function(y){return new i([y|0],0>y?-1:0)}):new i([m|0],0>m?-1:0)}function c(m){if(isNaN(m)||!isFinite(m))return h;if(0>m)return E(c(-m));for(var y=[],v=1,k=0;m>=v;k++)y[k]=m/v|0,v*=4294967296;return new i(y,0)}function d(m,y){if(m.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(m.charAt(0)=="-")return E(d(m.substring(1),y));if(0<=m.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=c(Math.pow(y,8)),k=h,R=0;R<m.length;R+=8){var L=Math.min(8,m.length-R),U=parseInt(m.substring(R,R+L),y);8>L?(L=c(Math.pow(y,L)),k=k.j(L).add(c(U))):(k=k.j(v),k=k.add(c(U)))}return k}var h=l(0),f=l(1),p=l(16777216);t=i.prototype,t.m=function(){if(B(this))return-E(this).m();for(var m=0,y=1,v=0;v<this.g.length;v++){var k=this.i(v);m+=(0<=k?k:4294967296+k)*y,y*=4294967296}return m},t.toString=function(m){if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w(this))return"0";if(B(this))return"-"+E(this).toString(m);for(var y=c(Math.pow(m,6)),v=this,k="";;){var R=Q(v,y).g;v=C(v,R.j(y));var L=((0<v.g.length?v.g[0]:v.h)>>>0).toString(m);if(v=R,w(v))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},t.i=function(m){return 0>m?0:m<this.g.length?this.g[m]:this.h};function w(m){if(m.h!=0)return!1;for(var y=0;y<m.g.length;y++)if(m.g[y]!=0)return!1;return!0}function B(m){return m.h==-1}t.l=function(m){return m=C(this,m),B(m)?-1:w(m)?0:1};function E(m){for(var y=m.g.length,v=[],k=0;k<y;k++)v[k]=~m.g[k];return new i(v,~m.h).add(f)}t.abs=function(){return B(this)?E(this):this},t.add=function(m){for(var y=Math.max(this.g.length,m.g.length),v=[],k=0,R=0;R<=y;R++){var L=k+(this.i(R)&65535)+(m.i(R)&65535),U=(L>>>16)+(this.i(R)>>>16)+(m.i(R)>>>16);k=U>>>16,L&=65535,U&=65535,v[R]=U<<16|L}return new i(v,v[v.length-1]&-2147483648?-1:0)};function C(m,y){return m.add(E(y))}t.j=function(m){if(w(this)||w(m))return h;if(B(this))return B(m)?E(this).j(E(m)):E(E(this).j(m));if(B(m))return E(this.j(E(m)));if(0>this.l(p)&&0>m.l(p))return c(this.m()*m.m());for(var y=this.g.length+m.g.length,v=[],k=0;k<2*y;k++)v[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<m.g.length;R++){var L=this.i(k)>>>16,U=this.i(k)&65535,Oe=m.i(R)>>>16,We=m.i(R)&65535;v[2*k+2*R]+=U*We,b(v,2*k+2*R),v[2*k+2*R+1]+=L*We,b(v,2*k+2*R+1),v[2*k+2*R+1]+=U*Oe,b(v,2*k+2*R+1),v[2*k+2*R+2]+=L*Oe,b(v,2*k+2*R+2)}for(k=0;k<y;k++)v[k]=v[2*k+1]<<16|v[2*k];for(k=y;k<2*y;k++)v[k]=0;return new i(v,0)};function b(m,y){for(;(m[y]&65535)!=m[y];)m[y+1]+=m[y]>>>16,m[y]&=65535,y++}function I(m,y){this.g=m,this.h=y}function Q(m,y){if(w(y))throw Error("division by zero");if(w(m))return new I(h,h);if(B(m))return y=Q(E(m),y),new I(E(y.g),E(y.h));if(B(y))return y=Q(m,E(y)),new I(E(y.g),y.h);if(30<m.g.length){if(B(m)||B(y))throw Error("slowDivide_ only works with positive integers.");for(var v=f,k=y;0>=k.l(m);)v=N(v),k=N(k);var R=S(v,1),L=S(k,1);for(k=S(k,2),v=S(v,2);!w(k);){var U=L.add(k);0>=U.l(m)&&(R=R.add(v),L=U),k=S(k,1),v=S(v,1)}return y=C(m,R.j(y)),new I(R,y)}for(R=h;0<=m.l(y);){for(v=Math.max(1,Math.floor(m.m()/y.m())),k=Math.ceil(Math.log(v)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=c(v),U=L.j(y);B(U)||0<U.l(m);)v-=k,L=c(v),U=L.j(y);w(L)&&(L=f),R=R.add(L),m=C(m,U)}return new I(R,m)}t.A=function(m){return Q(this,m).h},t.and=function(m){for(var y=Math.max(this.g.length,m.g.length),v=[],k=0;k<y;k++)v[k]=this.i(k)&m.i(k);return new i(v,this.h&m.h)},t.or=function(m){for(var y=Math.max(this.g.length,m.g.length),v=[],k=0;k<y;k++)v[k]=this.i(k)|m.i(k);return new i(v,this.h|m.h)},t.xor=function(m){for(var y=Math.max(this.g.length,m.g.length),v=[],k=0;k<y;k++)v[k]=this.i(k)^m.i(k);return new i(v,this.h^m.h)};function N(m){for(var y=m.g.length+1,v=[],k=0;k<y;k++)v[k]=m.i(k)<<1|m.i(k-1)>>>31;return new i(v,m.h)}function S(m,y){var v=y>>5;y%=32;for(var k=m.g.length-v,R=[],L=0;L<k;L++)R[L]=0<y?m.i(L+v)>>>y|m.i(L+v+1)<<32-y:m.i(L+v);return new i(R,m.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,jE=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,na=i}).apply(typeof gB<"u"?gB:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DE,tc,PE,uh,n0,LE,ME,OE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,x){return u==Array.prototype||u==Object.prototype||(u[g]=x.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var g=0;g<u.length;++g){var x=u[g];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var n=r(this);function s(u,g){if(g)e:{var x=n;u=u.split(".");for(var F=0;F<u.length-1;F++){var K=u[F];if(!(K in x))break e;x=x[K]}u=u[u.length-1],F=x[u],g=g(F),g!=F&&g!=null&&e(x,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var x=0,F=!1,K={next:function(){if(!F&&x<u.length){var Z=x++;return{value:g(Z,u[Z]),done:!1}}return F=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,x){return u.call.apply(u.bind,arguments)}function h(u,g,x){if(!u)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,F),u.apply(g,K)}}return function(){return u.apply(g,arguments)}}function f(u,g,x){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(u,g){var x=Array.prototype.slice.call(arguments,1);return function(){var F=x.slice();return F.push.apply(F,arguments),u.apply(this,F)}}function w(u,g){function x(){}x.prototype=g.prototype,u.aa=g.prototype,u.prototype=new x,u.prototype.constructor=u,u.Qb=function(F,K,Z){for(var ve=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)ve[Pt-2]=arguments[Pt];return g.prototype[K].apply(F,ve)}}function B(u){const g=u.length;if(0<g){const x=Array(g);for(let F=0;F<g;F++)x[F]=u[F];return x}return[]}function E(u,g){for(let x=1;x<arguments.length;x++){const F=arguments[x];if(l(F)){const K=u.length||0,Z=F.length||0;u.length=K+Z;for(let ve=0;ve<Z;ve++)u[K+ve]=F[ve]}else u.push(F)}}class C{constructor(g,x){this.i=g,this.j=x,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function Q(u){return Q[" "](u),u}Q[" "]=function(){};var N=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function S(u,g,x){for(const F in u)g.call(x,u[F],F,u)}function m(u,g){for(const x in u)g.call(void 0,u[x],x,u)}function y(u){const g={};for(const x in u)g[x]=u[x];return g}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,g){let x,F;for(let K=1;K<arguments.length;K++){F=arguments[K];for(x in F)u[x]=F[x];for(let Z=0;Z<v.length;Z++)x=v[Z],Object.prototype.hasOwnProperty.call(F,x)&&(u[x]=F[x])}}function R(u){var g=1;u=u.split(":");const x=[];for(;0<g&&u.length;)x.push(u.shift()),g--;return u.length&&x.push(u.join(":")),x}function L(u){o.setTimeout(()=>{throw u},0)}function U(){var u=ye;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Oe{constructor(){this.h=this.g=null}add(g,x){const F=We.get();F.set(g,x),this.h?this.h.next=F:this.g=F,this.h=F}}var We=new C(()=>new Xe,u=>u.reset());class Xe{constructor(){this.next=this.g=this.h=null}set(g,x){this.h=g,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,Ae=!1,ye=new Oe,Te=()=>{const u=o.Promise.resolve(void 0);Ke=()=>{u.then(Re)}};var Re=()=>{for(var u;u=U();){try{u.h.call(u.g)}catch(x){L(x)}var g=We;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}Ae=!1};function Pe(){this.s=this.s,this.C=this.C}Pe.prototype.s=!1,Pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};o.addEventListener("test",x,g),o.removeEventListener("test",x,g)}catch{}return u}();function Se(u,g){if(q.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var x=this.type=u.type,F=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(N){e:{try{Q(g.nodeName);var K=!0;break e}catch{}K=!1}K||(g=null)}}else x=="mouseover"?g=u.fromElement:x=="mouseout"&&(g=u.toElement);this.relatedTarget=g,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:xe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Se.aa.h.call(this)}}w(Se,q);var xe={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Wr=0;function wr(u,g,x,F,K){this.listener=u,this.proxy=null,this.src=g,this.type=x,this.capture=!!F,this.ha=K,this.key=++Wr,this.da=this.fa=!1}function Rt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Et(u){this.src=u,this.g={},this.h=0}Et.prototype.add=function(u,g,x,F,K){var Z=u.toString();u=this.g[Z],u||(u=this.g[Z]=[],this.h++);var ve=ue(u,g,F,K);return-1<ve?(g=u[ve],x||(g.fa=!1)):(g=new wr(g,this.src,Z,!!F,K),g.fa=x,u.push(g)),g};function Wt(u,g){var x=g.type;if(x in u.g){var F=u.g[x],K=Array.prototype.indexOf.call(F,g,void 0),Z;(Z=0<=K)&&Array.prototype.splice.call(F,K,1),Z&&(Rt(g),u.g[x].length==0&&(delete u.g[x],u.h--))}}function ue(u,g,x,F){for(var K=0;K<u.length;++K){var Z=u[K];if(!Z.da&&Z.listener==g&&Z.capture==!!x&&Z.ha==F)return K}return-1}var T="closure_lm_"+(1e6*Math.random()|0),P={};function H(u,g,x,F,K){if(Array.isArray(g)){for(var Z=0;Z<g.length;Z++)H(u,g[Z],x,F,K);return null}return x=ae(x),u&&u[Le]?u.K(g,x,c(F)?!!F.capture:!1,K):W(u,g,x,!1,F,K)}function W(u,g,x,F,K,Z){if(!g)throw Error("Invalid event type");var ve=c(K)?!!K.capture:!!K,Pt=ie(u);if(Pt||(u[T]=Pt=new Et(u)),x=Pt.add(g,x,F,ve,Z),x.proxy)return x;if(F=Be(),x.proxy=F,F.src=u,F.listener=x,u.addEventListener)$||(K=ve),K===void 0&&(K=!1),u.addEventListener(g.toString(),F,K);else if(u.attachEvent)u.attachEvent(J(g.toString()),F);else if(u.addListener&&u.removeListener)u.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Be(){function u(x){return g.call(u.src,u.listener,x)}const g=O;return u}function ne(u,g,x,F,K){if(Array.isArray(g))for(var Z=0;Z<g.length;Z++)ne(u,g[Z],x,F,K);else F=c(F)?!!F.capture:!!F,x=ae(x),u&&u[Le]?(u=u.i,g=String(g).toString(),g in u.g&&(Z=u.g[g],x=ue(Z,x,F,K),-1<x&&(Rt(Z[x]),Array.prototype.splice.call(Z,x,1),Z.length==0&&(delete u.g[g],u.h--)))):u&&(u=ie(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ue(g,x,F,K)),(x=-1<u?g[u]:null)&&G(x))}function G(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Le])Wt(g.i,u);else{var x=u.type,F=u.proxy;g.removeEventListener?g.removeEventListener(x,F,u.capture):g.detachEvent?g.detachEvent(J(x),F):g.addListener&&g.removeListener&&g.removeListener(F),(x=ie(g))?(Wt(x,u),x.h==0&&(x.src=null,g[T]=null)):Rt(u)}}}function J(u){return u in P?P[u]:P[u]="on"+u}function O(u,g){if(u.da)u=!0;else{g=new Se(g,this);var x=u.listener,F=u.ha||u.src;u.fa&&G(u),u=x.call(F,g)}return u}function ie(u){return u=u[T],u instanceof Et?u:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function ae(u){return typeof u=="function"?u:(u[ee]||(u[ee]=function(g){return u.handleEvent(g)}),u[ee])}function Y(){Pe.call(this),this.i=new Et(this),this.M=this,this.F=null}w(Y,Pe),Y.prototype[Le]=!0,Y.prototype.removeEventListener=function(u,g,x,F){ne(this,u,g,x,F)};function te(u,g){var x,F=u.F;if(F)for(x=[];F;F=F.F)x.push(F);if(u=u.M,F=g.type||g,typeof g=="string")g=new q(g,u);else if(g instanceof q)g.target=g.target||u;else{var K=g;g=new q(F,u),k(g,K)}if(K=!0,x)for(var Z=x.length-1;0<=Z;Z--){var ve=g.g=x[Z];K=me(ve,F,!0,g)&&K}if(ve=g.g=u,K=me(ve,F,!0,g)&&K,K=me(ve,F,!1,g)&&K,x)for(Z=0;Z<x.length;Z++)ve=g.g=x[Z],K=me(ve,F,!1,g)&&K}Y.prototype.N=function(){if(Y.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var x=u.g[g],F=0;F<x.length;F++)Rt(x[F]);delete u.g[g],u.h--}}this.F=null},Y.prototype.K=function(u,g,x,F){return this.i.add(String(u),g,!1,x,F)},Y.prototype.L=function(u,g,x,F){return this.i.add(String(u),g,!0,x,F)};function me(u,g,x,F){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var K=!0,Z=0;Z<g.length;++Z){var ve=g[Z];if(ve&&!ve.da&&ve.capture==x){var Pt=ve.listener,Mr=ve.ha||ve.src;ve.fa&&Wt(u.i,ve),K=Pt.call(Mr,F)!==!1&&K}}return K&&!F.defaultPrevented}function Ne(u,g,x){if(typeof u=="function")x&&(u=f(u,x));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function ze(u){u.g=Ne(()=>{u.g=null,u.i&&(u.i=!1,ze(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class _e extends Pe{constructor(g,x){super(),this.m=g,this.l=x,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(u){Pe.call(this),this.h=u,this.g={}}w(Ye,Pe);var et=[];function At(u){S(u.g,function(g,x){this.g.hasOwnProperty(x)&&G(g)},u),u.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),At(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=o.JSON.stringify,fe=o.JSON.parse,Ee=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function tt(){}tt.prototype.h=null;function kt(u){return u.h||(u.h=u.i())}function xt(){}var bt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qt(){q.call(this,"d")}w(qt,q);function pt(){q.call(this,"c")}w(pt,q);var vt={},yr=null;function wn(){return yr=yr||new Y}vt.La="serverreachability";function vr(u){q.call(this,vt.La,u)}w(vr,q);function lt(u){const g=wn();te(g,new vr(g))}vt.STAT_EVENT="statevent";function qr(u,g){q.call(this,vt.STAT_EVENT,u),this.stat=g}w(qr,q);function Xt(u){const g=wn();te(g,new qr(g,u))}vt.Ma="timingevent";function Ds(u,g){q.call(this,vt.Ma,u),this.size=g}w(Ds,q);function yn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Tr(){this.g=!0}Tr.prototype.xa=function(){this.g=!1};function cn(u,g,x,F,K,Z){u.info(function(){if(u.g)if(Z)for(var ve="",Pt=Z.split("&"),Mr=0;Mr<Pt.length;Mr++){var Bt=Pt[Mr].split("=");if(1<Bt.length){var Xr=Bt[0];Bt=Bt[1];var Jr=Xr.split("_");ve=2<=Jr.length&&Jr[1]=="type"?ve+(Xr+"="+Bt+"&"):ve+(Xr+"=redacted&")}}else ve=null;else ve=Z;return"XMLHTTP REQ ("+F+") [attempt "+K+"]: "+g+`
`+x+`
`+ve})}function vn(u,g,x,F,K,Z,ve){u.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+K+"]: "+g+`
`+x+`
`+Z+" "+ve})}function j(u,g,x,F){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Fe(u,x)+(F?" "+F:"")})}function re(u,g){u.info(function(){return"TIMEOUT: "+g})}Tr.prototype.info=function(){};function Fe(u,g){if(!u.g)return g;if(!g)return null;try{var x=JSON.parse(g);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var F=x[u];if(!(2>F.length)){var K=F[1];if(Array.isArray(K)&&!(1>K.length)){var Z=K[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var ve=1;ve<K.length;ve++)K[ve]=""}}}}return $e(x)}catch{return g}}var Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},he;function Ue(){}w(Ue,tt),Ue.prototype.g=function(){return new XMLHttpRequest},Ue.prototype.i=function(){return{}},he=new Ue;function Ie(u,g,x,F){this.j=u,this.i=g,this.l=x,this.R=F||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}var Br={},jt={};function xs(u,g,x){u.L=1,u.v=Ra(un(g)),u.m=x,u.P=!0,Sa(u,null)}function Sa(u,g){u.F=Date.now(),Qa(u),u.A=un(u.v);var x=u.A,F=u.R;Array.isArray(F)||(F=[String(F)]),xy(x.i,"t",F),u.C=0,x=u.j.J,u.h=new at,u.g=jy(u.j,x?g:null,!u.m),0<u.O&&(u.M=new _e(f(u.Y,u,u.g),u.O)),g=u.U,x=u.g,F=u.ca;var K="readystatechange";Array.isArray(K)||(K&&(et[0]=K.toString()),K=et);for(var Z=0;Z<K.length;Z++){var ve=H(x,K[Z],F||g.handleEvent,!1,g.h||g);if(!ve)break;g.g[ve.key]=ve}g=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),lt(),cn(u.i,u.u,u.A,u.l,u.R,u.m)}Ie.prototype.ca=function(u){u=u.target;const g=this.M;g&&Ms(u)==3?g.j():this.Y(u)},Ie.prototype.Y=function(u){try{if(u==this.g)e:{const Jr=Ms(this.g);var g=this.g.Ba();const Pa=this.g.Z();if(!(3>Jr)&&(Jr!=3||this.g&&(this.h.h||this.g.oa()||Iy(this.g)))){this.J||Jr!=4||g==7||(g==8||0>=Pa?lt(3):lt(2)),D(this);var x=this.g.Z();this.X=x;t:if(Ua(this)){var F=Iy(this.g);u="";var K=F.length,Z=Ms(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){se(this),z(this);var ve="";break t}this.h.i=new o.TextDecoder}for(g=0;g<K;g++)this.h.h=!0,u+=this.h.i.decode(F[g],{stream:!(Z&&g==K-1)});F.length=0,this.h.g+=u,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=x==200,vn(this.i,this.u,this.A,this.l,this.R,Jr,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Pt,Mr=this.g;if((Pt=Mr.g?Mr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Pt)){var Bt=Pt;break t}}Bt=null}if(x=Bt)j(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,le(this,x);else{this.o=!1,this.s=3,Xt(12),se(this),z(this);break e}}if(this.P){x=!0;let is;for(;!this.J&&this.C<ve.length;)if(is=ss(this,ve),is==jt){Jr==4&&(this.s=4,Xt(14),x=!1),j(this.i,this.l,null,"[Incomplete Response]");break}else if(is==Br){this.s=4,Xt(15),j(this.i,this.l,ve,"[Invalid Chunk]"),x=!1;break}else j(this.i,this.l,is,null),le(this,is);if(Ua(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jr!=4||ve.length!=0||this.h.h||(this.s=1,Xt(16),x=!1),this.o=this.o&&x,!x)j(this.i,this.l,ve,"[Invalid Chunked Response]"),se(this),z(this);else if(0<ve.length&&!this.W){this.W=!0;var Xr=this.j;Xr.g==this&&Xr.ba&&!Xr.M&&(Xr.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),Gg(Xr),Xr.M=!0,Xt(11))}}else j(this.i,this.l,ve,null),le(this,ve);Jr==4&&se(this),this.o&&!this.J&&(Jr==4?Uy(this.j,this):(this.o=!1,Qa(this)))}else IF(this.g),x==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),se(this),z(this)}}}catch{}finally{}};function Ua(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ss(u,g){var x=u.C,F=g.indexOf(`
`,x);return F==-1?jt:(x=Number(g.substring(x,F)),isNaN(x)?Br:(F+=1,F+x>g.length?jt:(g=g.slice(F,F+x),u.C=F+x,g)))}Ie.prototype.cancel=function(){this.J=!0,se(this)};function Qa(u){u.S=Date.now()+u.I,$u(u,u.I)}function $u(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=yn(f(u.ba,u),g)}function D(u){u.B&&(o.clearTimeout(u.B),u.B=null)}Ie.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(re(this.i,this.A),this.L!=2&&(lt(),Xt(17)),se(this),this.s=2,z(this)):$u(this,this.S-u)};function z(u){u.j.G==0||u.J||Uy(u.j,u)}function se(u){D(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,At(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function le(u,g){try{var x=u.j;if(x.G!=0&&(x.g==u||st(x.h,u))){if(!u.K&&st(x.h,u)&&x.G==3){try{var F=x.Da.g.parse(g)}catch{F=null}if(Array.isArray(F)&&F.length==3){var K=F;if(K[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<u.F)ed(x),Yu(x);else break e;Kg(x),Xt(18)}}else x.za=K[1],0<x.za-x.T&&37500>K[2]&&x.F&&x.v==0&&!x.C&&(x.C=yn(f(x.Za,x),6e3));if(1>=it(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Li(x,11)}else if((u.K||x.g==u)&&ed(x),!b(g))for(K=x.Da.g.parse(g),g=0;g<K.length;g++){let Bt=K[g];if(x.T=Bt[0],Bt=Bt[1],x.G==2)if(Bt[0]=="c"){x.K=Bt[1],x.ia=Bt[2];const Xr=Bt[3];Xr!=null&&(x.la=Xr,x.j.info("VER="+x.la));const Jr=Bt[4];Jr!=null&&(x.Aa=Jr,x.j.info("SVER="+x.Aa));const Pa=Bt[5];Pa!=null&&typeof Pa=="number"&&0<Pa&&(F=1.5*Pa,x.L=F,x.j.info("backChannelRequestTimeoutMs_="+F)),F=x;const is=u.g;if(is){const rd=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rd){var Z=F.h;Z.g||rd.indexOf("spdy")==-1&&rd.indexOf("quic")==-1&&rd.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(It(Z,Z.h),Z.h=null))}if(F.D){const zg=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;zg&&(F.ya=zg,St(F.I,F.D,zg))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-u.F,x.j.info("Handshake RTT: "+x.R+"ms")),F=x;var ve=u;if(F.qa=Ry(F,F.J?F.ia:null,F.W),ve.K){Dt(F.h,ve);var Pt=ve,Mr=F.L;Mr&&(Pt.I=Mr),Pt.B&&(D(Pt),Qa(Pt)),F.g=ve}else Fy(F);0<x.i.length&&Zu(x)}else Bt[0]!="stop"&&Bt[0]!="close"||Li(x,7);else x.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?Li(x,7):Vg(x):Bt[0]!="noop"&&x.l&&x.l.ta(Bt),x.v=0)}}lt(4)}catch{}}var ge=class{constructor(u,g){this.g=u,this.map=g}};function Me(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ke(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function it(u){return u.h?1:u.g?u.g.size:0}function st(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function It(u,g){u.g?u.g.add(g):u.h=g}function Dt(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Me.prototype.cancel=function(){if(this.i=Ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ct(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const x of u.g.values())g=g.concat(x.D);return g}return B(u.i)}function Fr(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],x=u.length,F=0;F<x;F++)g.push(u[F]);return g}g=[],x=0;for(F in u)g[x++]=u[F];return g}function Bn(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var x=0;x<u;x++)g.push(x);return g}g=[],x=0;for(const F in u)g[x++]=F;return g}}}function Gn(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var x=Bn(u),F=Fr(u),K=F.length,Z=0;Z<K;Z++)g.call(void 0,F[Z],x&&x[Z],u)}var Ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zn(u,g){if(u){u=u.split("&");for(var x=0;x<u.length;x++){var F=u[x].indexOf("="),K=null;if(0<=F){var Z=u[x].substring(0,F);K=u[x].substring(F+1)}else Z=u[x];g(Z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ut(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ut){this.h=u.h,ws(this,u.j),this.o=u.o,this.g=u.g,As(this,u.s),this.l=u.l;var g=u.i,x=new Cl;x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),Na(this,x),this.m=u.m}else u&&(g=String(u).match(Ps))?(this.h=!1,ws(this,g[1]||"",!0),this.o=Pi(g[2]||""),this.g=Pi(g[3]||"",!0),As(this,g[4]),this.l=Pi(g[5]||"",!0),Na(this,g[6]||"",!0),this.m=Pi(g[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}ut.prototype.toString=function(){var u=[],g=this.j;g&&u.push(wA(g,bl,!0),":");var x=this.g;return(x||g=="file")&&(u.push("//"),(g=this.o)&&u.push(wA(g,bl,!0),"@"),u.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&u.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(wA(x,x.charAt(0)=="/"?gF:Ls,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",wA(x,mF)),u.join("")};function un(u){return new ut(u)}function ws(u,g,x){u.j=x?Pi(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function As(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Na(u,g,x){g instanceof Cl?(u.i=g,xF(u.i,u.h)):(x||(g=wA(g,pF)),u.i=new Cl(g,u.h))}function St(u,g,x){u.i.set(g,x)}function Ra(u){return St(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pi(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function wA(u,g,x){return typeof u=="string"?(u=encodeURI(u).replace(g,Wu),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Wu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var bl=/[#\/\?@]/g,Ls=/[#\?:]/g,gF=/[#\?]/g,pF=/[#\?@]/g,mF=/#/g;function Cl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function yA(u){u.g||(u.g=new Map,u.h=0,u.i&&zn(u.i,function(g,x){u.add(decodeURIComponent(g.replace(/\+/g," ")),x)}))}t=Cl.prototype,t.add=function(u,g){yA(this),this.i=null,u=ja(this,u);var x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(g),this.h+=1,this};function py(u,g){yA(u),g=ja(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function my(u,g){return yA(u),g=ja(u,g),u.g.has(g)}t.forEach=function(u,g){yA(this),this.g.forEach(function(x,F){x.forEach(function(K){u.call(g,K,F,this)},this)},this)},t.na=function(){yA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),x=[];for(let F=0;F<g.length;F++){const K=u[F];for(let Z=0;Z<K.length;Z++)x.push(g[F])}return x},t.V=function(u){yA(this);let g=[];if(typeof u=="string")my(this,u)&&(g=g.concat(this.g.get(ja(this,u))));else{u=Array.from(this.g.values());for(let x=0;x<u.length;x++)g=g.concat(u[x])}return g},t.set=function(u,g){return yA(this),this.i=null,u=ja(this,u),my(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function xy(u,g,x){py(u,g),0<x.length&&(u.i=null,u.g.set(ja(u,g),B(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var x=0;x<g.length;x++){var F=g[x];const Z=encodeURIComponent(String(F)),ve=this.V(F);for(F=0;F<ve.length;F++){var K=Z;ve[F]!==""&&(K+="="+encodeURIComponent(String(ve[F]))),u.push(K)}}return this.i=u.join("&")};function ja(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function xF(u,g){g&&!u.j&&(yA(u),u.i=null,u.g.forEach(function(x,F){var K=F.toLowerCase();F!=K&&(py(this,F),xy(this,K,x))},u)),u.j=g}function wF(u,g){const x=new Tr;if(o.Image){const F=new Image;F.onload=p(vA,x,"TestLoadImage: loaded",!0,g,F),F.onerror=p(vA,x,"TestLoadImage: error",!1,g,F),F.onabort=p(vA,x,"TestLoadImage: abort",!1,g,F),F.ontimeout=p(vA,x,"TestLoadImage: timeout",!1,g,F),o.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=u}else g(!1)}function yF(u,g){const x=new Tr,F=new AbortController,K=setTimeout(()=>{F.abort(),vA(x,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:F.signal}).then(Z=>{clearTimeout(K),Z.ok?vA(x,"TestPingServer: ok",!0,g):vA(x,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(K),vA(x,"TestPingServer: error",!1,g)})}function vA(u,g,x,F,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),F(x)}catch{}}function vF(){this.g=new Ee}function BF(u,g,x){const F=x||"";try{Gn(u,function(K,Z){let ve=K;c(K)&&(ve=$e(K)),g.push(F+Z+"="+encodeURIComponent(ve))})}catch(K){throw g.push(F+"type="+encodeURIComponent("_badmap")),K}}function qu(u){this.l=u.Ub||null,this.j=u.eb||!1}w(qu,tt),qu.prototype.g=function(){return new Xu(this.l,this.j)},qu.prototype.i=function(u){return function(){return u}}({});function Xu(u,g){Y.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Xu,Y),t=Xu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,_l(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Il(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,_l(this)),this.g&&(this.readyState=3,_l(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function wy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Il(this):_l(this),this.readyState==3&&wy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Il(this))},t.Qa=function(u){this.g&&(this.response=u,Il(this))},t.ga=function(){this.g&&Il(this)};function Il(u){u.readyState=4,u.l=null,u.j=null,u.v=null,_l(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var x=g.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=g.next();return u.join(`\r
`)};function _l(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yy(u){let g="";return S(u,function(x,F){g+=F,g+=":",g+=x,g+=`\r
`}),g}function Hg(u,g,x){e:{for(F in x){var F=!1;break e}F=!0}F||(x=yy(x),typeof u=="string"?x!=null&&encodeURIComponent(String(x)):St(u,g,x))}function or(u){Y.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(or,Y);var bF=/^https?$/i,CF=["POST","PUT"];t=or.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,x,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():he.g(),this.v=this.o?kt(this.o):kt(he),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Z){vy(this,Z);return}if(u=x||"",x=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var K in F)x.set(K,F[K]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Z of F.keys())x.set(Z,F.get(Z));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(x.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(CF,g,void 0))||F||K||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ve]of x)this.g.setRequestHeader(Z,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cy(this),this.u=!0,this.g.send(u),this.u=!1}catch(Z){vy(this,Z)}};function vy(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,By(u),Ju(u)}function By(u){u.A||(u.A=!0,te(u,"complete"),te(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,te(this,"complete"),te(this,"abort"),Ju(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ju(this,!0)),or.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?by(this):this.bb())},t.bb=function(){by(this)};function by(u){if(u.h&&typeof i<"u"&&(!u.v[1]||Ms(u)!=4||u.Z()!=2)){if(u.u&&Ms(u)==4)Ne(u.Ea,0,u);else if(te(u,"readystatechange"),Ms(u)==4){u.h=!1;try{const ve=u.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var x;if(!(x=g)){var F;if(F=ve===0){var K=String(u.D).match(Ps)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),F=!bF.test(K?K.toLowerCase():"")}x=F}if(x)te(u,"complete"),te(u,"success");else{u.m=6;try{var Z=2<Ms(u)?u.g.statusText:""}catch{Z=""}u.l=Z+" ["+u.Z()+"]",By(u)}}finally{Ju(u)}}}}function Ju(u,g){if(u.g){Cy(u);const x=u.g,F=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||te(u,"ready");try{x.onreadystatechange=F}catch{}}}function Cy(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ms(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ms(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),fe(g)}};function Iy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function IF(u){const g={};u=(u.g&&2<=Ms(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<u.length;F++){if(b(u[F]))continue;var x=R(u[F]);const K=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Z=g[K]||[];g[K]=Z,Z.push(x)}m(g,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function El(u,g,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||g}function _y(u){this.Aa=0,this.i=[],this.j=new Tr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=El("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=El("baseRetryDelayMs",5e3,u),this.cb=El("retryDelaySeedMs",1e4,u),this.Wa=El("forwardChannelMaxRetries",2,u),this.wa=El("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Me(u&&u.concurrentRequestLimit),this.Da=new vF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_y.prototype,t.la=8,t.G=1,t.connect=function(u,g,x,F){Xt(0),this.W=u,this.H=g||{},x&&F!==void 0&&(this.H.OSID=x,this.H.OAID=F),this.F=this.X,this.I=Ry(this,null,this.W),Zu(this)};function Vg(u){if(Ey(u),u.G==3){var g=u.U++,x=un(u.I);if(St(x,"SID",u.K),St(x,"RID",g),St(x,"TYPE","terminate"),kl(u,x),g=new Ie(u,u.j,g),g.L=2,g.v=Ra(un(x)),x=!1,o.navigator&&o.navigator.sendBeacon)try{x=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!x&&o.Image&&(new Image().src=g.v,x=!0),x||(g.g=jy(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Qa(g)}Ny(u)}function Yu(u){u.g&&(Gg(u),u.g.cancel(),u.g=null)}function Ey(u){Yu(u),u.u&&(o.clearTimeout(u.u),u.u=null),ed(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function Zu(u){if(!ke(u.h)&&!u.s){u.s=!0;var g=u.Ga;Ke||Te(),Ae||(Ke(),Ae=!0),ye.add(g,u),u.B=0}}function _F(u,g){return it(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=yn(f(u.Ga,u,g),Qy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const K=new Ie(this,this.j,u);let Z=this.o;if(this.S&&(Z?(Z=y(Z),k(Z,this.S)):Z=this.S),this.m!==null||this.O||(K.H=Z,Z=null),this.P)e:{for(var g=0,x=0;x<this.i.length;x++){t:{var F=this.i[x];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(g+=F,4096<g){g=x;break e}if(g===4096||x===this.i.length-1){g=x+1;break e}}g=1e3}else g=1e3;g=Ty(this,K,g),x=un(this.I),St(x,"RID",u),St(x,"CVER",22),this.D&&St(x,"X-HTTP-Session-Id",this.D),kl(this,x),Z&&(this.O?g="headers="+encodeURIComponent(String(yy(Z)))+"&"+g:this.m&&Hg(x,this.m,Z)),It(this.h,K),this.Ua&&St(x,"TYPE","init"),this.P?(St(x,"$req",g),St(x,"SID","null"),K.T=!0,xs(K,x,null)):xs(K,x,g),this.G=2}}else this.G==3&&(u?ky(this,u):this.i.length==0||ke(this.h)||ky(this))};function ky(u,g){var x;g?x=g.l:x=u.U++;const F=un(u.I);St(F,"SID",u.K),St(F,"RID",x),St(F,"AID",u.T),kl(u,F),u.m&&u.o&&Hg(F,u.m,u.o),x=new Ie(u,u.j,x,u.B+1),u.m===null&&(x.H=u.o),g&&(u.i=g.D.concat(u.i)),g=Ty(u,x,1e3),x.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),It(u.h,x),xs(x,F,g)}function kl(u,g){u.H&&S(u.H,function(x,F){St(g,F,x)}),u.l&&Gn({},function(x,F){St(g,F,x)})}function Ty(u,g,x){x=Math.min(u.i.length,x);var F=u.l?f(u.l.Na,u.l,u):null;e:{var K=u.i;let Z=-1;for(;;){const ve=["count="+x];Z==-1?0<x?(Z=K[0].g,ve.push("ofs="+Z)):Z=0:ve.push("ofs="+Z);let Pt=!0;for(let Mr=0;Mr<x;Mr++){let Bt=K[Mr].g;const Xr=K[Mr].map;if(Bt-=Z,0>Bt)Z=Math.max(0,K[Mr].g-100),Pt=!1;else try{BF(Xr,ve,"req"+Bt+"_")}catch{F&&F(Xr)}}if(Pt){F=ve.join("&");break e}}}return u=u.i.splice(0,x),g.D=u,F}function Fy(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Ke||Te(),Ae||(Ke(),Ae=!0),ye.add(g,u),u.v=0}}function Kg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=yn(f(u.Fa,u),Qy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Sy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=yn(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Yu(this),Sy(this))};function Gg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function Sy(u){u.g=new Ie(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=un(u.qa);St(g,"RID","rpc"),St(g,"SID",u.K),St(g,"AID",u.T),St(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&St(g,"TO",u.ja),St(g,"TYPE","xmlhttp"),kl(u,g),u.m&&u.o&&Hg(g,u.m,u.o),u.L&&(u.g.I=u.L);var x=u.g;u=u.ia,x.L=1,x.v=Ra(un(g)),x.m=null,x.P=!0,Sa(x,u)}t.Za=function(){this.C!=null&&(this.C=null,Yu(this),Kg(this),Xt(19))};function ed(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Uy(u,g){var x=null;if(u.g==g){ed(u),Gg(u),u.g=null;var F=2}else if(st(u.h,g))x=g.D,Dt(u.h,g),F=1;else return;if(u.G!=0){if(g.o)if(F==1){x=g.m?g.m.length:0,g=Date.now()-g.F;var K=u.B;F=wn(),te(F,new Ds(F,x)),Zu(u)}else Fy(u);else if(K=g.s,K==3||K==0&&0<g.X||!(F==1&&_F(u,g)||F==2&&Kg(u)))switch(x&&0<x.length&&(g=u.h,g.i=g.i.concat(x)),K){case 1:Li(u,5);break;case 4:Li(u,10);break;case 3:Li(u,6);break;default:Li(u,2)}}}function Qy(u,g){let x=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(x*=2),x*g}function Li(u,g){if(u.j.info("Error code "+g),g==2){var x=f(u.fb,u),F=u.Xa;const K=!F;F=new ut(F||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ws(F,"https"),Ra(F),K?wF(F.toString(),x):yF(F.toString(),x)}else Xt(2);u.G=0,u.l&&u.l.sa(g),Ny(u),Ey(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function Ny(u){if(u.G=0,u.ka=[],u.l){const g=Ct(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ka,g),E(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Ry(u,g,x){var F=x instanceof ut?un(x):new ut(x);if(F.g!="")g&&(F.g=g+"."+F.g),As(F,F.s);else{var K=o.location;F=K.protocol,g=g?g+"."+K.hostname:K.hostname,K=+K.port;var Z=new ut(null);F&&ws(Z,F),g&&(Z.g=g),K&&As(Z,K),x&&(Z.l=x),F=Z}return x=u.D,g=u.ya,x&&g&&St(F,x,g),St(F,"VER",u.la),kl(u,F),F}function jy(u,g,x){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new or(new qu({eb:x})):new or(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dy(){}t=Dy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function td(){}td.prototype.g=function(u,g){return new Qn(u,g)};function Qn(u,g){Y.call(this),this.g=new _y(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!b(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Da(this)}w(Qn,Y),Qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Vg(this.g)},Qn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.u&&(x={},x.__data__=$e(u),u=x);g.i.push(new ge(g.Ya++,u)),g.G==3&&Zu(g)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Vg(this.g),delete this.g,Qn.aa.N.call(this)};function Py(u){qt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const x in g){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}w(Py,qt);function Ly(){pt.call(this),this.status=1}w(Ly,pt);function Da(u){this.g=u}w(Da,Dy),Da.prototype.ua=function(){te(this.g,"a")},Da.prototype.ta=function(u){te(this.g,new Py(u))},Da.prototype.sa=function(u){te(this.g,new Ly)},Da.prototype.ra=function(){te(this.g,"b")},td.prototype.createWebChannel=td.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,OE=function(){return new td},ME=function(){return wn()},LE=vt,n0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,uh=Ce,Ve.COMPLETE="complete",PE=Ve,xt.EventType=bt,bt.OPEN="a",bt.CLOSE="b",bt.ERROR="c",bt.MESSAGE="d",Y.prototype.listen=Y.prototype.K,tc=xt,or.prototype.listenOnce=or.prototype.L,or.prototype.getLastError=or.prototype.Ka,or.prototype.getLastErrorCode=or.prototype.Ba,or.prototype.getStatus=or.prototype.Z,or.prototype.getResponseJson=or.prototype.Oa,or.prototype.getResponseText=or.prototype.oa,or.prototype.send=or.prototype.ea,or.prototype.setWithCredentials=or.prototype.Ha,DE=or}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});const pB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Wx("@firebase/firestore");function Ja(){return fi.logLevel}function W4(t){fi.setLogLevel(t)}function ce(t,...e){if(fi.logLevel<=ht.DEBUG){const r=e.map(Jx);fi.debug(`Firestore (${ol}): ${t}`,...r)}}function fr(t,...e){if(fi.logLevel<=ht.ERROR){const r=e.map(Jx);fi.error(`Firestore (${ol}): ${t}`,...r)}}function Mn(t,...e){if(fi.logLevel<=ht.WARN){const r=e.map(Jx);fi.warn(`Firestore (${ol}): ${t}`,...r)}}function Jx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: `+t;throw fr(e),new Error(e)}function Ge(t,e){t||De()}function q4(t,e){t||De()}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends fA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Rr.UNAUTHENTICATED))}shutdown(){}}class X4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class J4{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ge(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let A=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Pr,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=A;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Pr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ge(typeof n.accessToken=="string"),new HE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Rr(e)}}class Y4{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Z4{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Y4(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Ge(this.o===void 0);const n=A=>{A.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,ce("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>n(A))};const s=A=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ge(typeof r.token=="string"),this.R=r.token,new KE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class tR{getToken(){return Promise.resolve(new KE(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=rR(40);for(let A=0;A<s.length;++A)n.length<20&&s[A]<r&&(n+=e.charAt(s[A]%e.length))}return n}}function Ze(t,e){return t<e?-1:t>e?1:0}function Mo(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function GE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new tr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new qe(e)}static min(){return new qe(new tr(0,0))}static max(){return new qe(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,r,n){r===void 0?r=0:r>e.length&&De(),n===void 0?n=e.length-r:n>e.length-r&&De(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ru.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ru?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const A=e.get(s),i=r.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ft extends ru{construct(e,r,n){return new ft(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new oe(X.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ft(r)}static emptyPath(){return new ft([])}}const nR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends ru{construct(e,r,n){return new zt(e,r,n)}static isValidIdentifier(e){return nR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const A=()=>{if(n.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new oe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new oe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(n+=o,s++):(A(),s++)}if(A(),i)throw new oe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(r)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ft.fromString(e))}static fromName(e){return new be(ft.fromString(e).popFirst(5))}static empty(){return new be(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ft.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function s0(t){return t.fields.find(e=>e.kind===2)}function Gi(t){return t.fields.filter(e=>e.kind!==2)}function sR(t,e){let r=Ze(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=AR(t.fields[n],e.fields[n]),r!==0)return r;return Ze(t.fields.length,e.fields.length)}Oo.UNKNOWN_ID=-1;class sa{constructor(e,r){this.fieldPath=e,this.kind=r}}function AR(t,e){const r=zt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Ze(t.kind,e.kind)}class Ho{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ho(0,On.min())}}function zE(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=qe.fromTimestamp(n===1e9?new tr(r+1,0):new tr(r,n));return new On(s,be.empty(),e)}function $E(t){return new On(t.readTime,t.key,-1)}class On{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new On(qe.min(),be.empty(),-1)}static max(){return new On(qe.max(),be.empty(),-1)}}function Zx(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=be.comparator(t.documentKey,e.documentKey),r!==0?r:Ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==WE)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new V((n,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(n,s)},this.catchCallback=A=>{this.wrapFailure(r,A).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof V?r:V.resolve(r)}catch(r){return V.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):V.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):V.reject(r)}static resolve(e){return new V((r,n)=>{r(e)})}static reject(e){return new V((r,n)=>{n(e)})}static waitFor(e){return new V((r,n)=>{let s=0,A=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++A,i&&A===s&&r()},l=>n(l))}),i=!0,A===s&&r()})}static or(e){let r=V.resolve(!1);for(const n of e)r=r.next(s=>s?V.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,A)=>{n.push(r.call(this,s,A))}),this.waitFor(n)}static mapArray(e,r){return new V((n,s)=>{const A=e.length,i=new Array(A);let o=0;for(let l=0;l<A;l++){const c=l;r(e[c]).next(d=>{i[c]=d,++o,o===A&&n(i)},d=>s(d))}})}static doWhile(e,r){return new V((n,s)=>{const A=()=>{e()===!0?r().next(()=>{A()},s):n()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Pr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Bc(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=ew(n.target.error);this.V.reject(new Bc(e,s))}}static open(e,r,n,s){try{return new sg(r,e.transaction(s,n))}catch(A){throw new Bc(r,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new aR(r)}}class Fs{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Fs.S(Er())===12.2&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),zi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!FE())return!1;if(Fs.v())return!0;const e=Er(),r=Fs.S(e),n=0<r&&r<10,s=XE(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ce("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;r(i)},s.onblocked=()=>{n(new Bc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?n(new oe(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new oe(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Bc(e,i))},s.onupgradeneeded=A=>{ce("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{ce("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const A=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=sg.open(this.db,e,A?"readonly":"readwrite",n),l=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),V.reject(c))).toPromise();return l.catch(()=>{}),await o.m,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&i<3;if(ce("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function XE(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class iR{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return zi(this.B.delete())}}class Bc extends oe{constructor(e,r){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Ti(t){return t.name==="IndexedDbTransactionError"}class aR{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(ce("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),zi(n)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),zi(this.store.add(e))}get(e){return zi(this.store.get(e)).next(r=>(r===void 0&&(r=null),ce("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),zi(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),zi(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(n.range);return new V((i,o)=>{A.onerror=l=>{o(l.target.error)},A.onsuccess=l=>{i(l.target.result)}})}{const A=this.cursor(n),i=[];return this.W(A,(o,l)=>{i.push(l)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new V((s,A)=>{n.onerror=i=>{A(i.target.error)},n.onsuccess=i=>{s(i.target.result)}})}j(e,r){ce("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(A,i,o)=>o.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new V((n,s)=>{r.onerror=A=>{const i=ew(A.target.error);s(i)},r.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():n()}):n()}})}W(e,r){const n=[];return new V((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void s();const l=new iR(o),c=r(o.primaryKey,o.value,l);if(c instanceof V){const d=c.catch(h=>(l.done(),V.reject(h)));n.push(d)}l.isDone?s():l.K===null?o.continue():o.continue(l.K)}}).next(()=>V.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function zi(t){return new V((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=ew(n.target.error);r(s)}})}let mB=!1;function ew(t){const e=Fs.S(Er());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mB||(mB=!0,setTimeout(()=>{throw n},0)),n}}return t}class oR{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ce("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Ti(r)?ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await ki(r)}await this.X(6e4)})}}class lR{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,A=!0;return V.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return ce("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(o=>{s-=o,n.add(i)});A=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(o=>(ce("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,r,o))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((s,A)=>{const i=$E(A);Zx(i,n)>0&&(n=i)}),new On(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}En.oe=-1;function _u(t){return t==null}function nu(t){return t===0&&1/t==-1/0}function JE(t){return typeof t=="number"&&Number.isInteger(t)&&!nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=xB(e)),e=cR(t.get(r),e);return xB(e)}function cR(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const A=t.charAt(s);switch(A){case"\0":r+="";break;case"":r+="";break;default:r+=A}}return r}function xB(t){return t+""}function _s(t){const e=t.length;if(Ge(e>=2),e===2)return Ge(t.charAt(0)===""&&t.charAt(1)===""),ft.emptyPath();const r=e-2,n=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>r)&&De(),t.charAt(i+1)){case"":const o=t.substring(A,i);let l;s.length===0?l=o:(s+=o,l=s,s=""),n.push(l);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:De()}A=i+2}return new ft(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e){return[t,an(e)]}function YE(t,e,r){return[t,an(e),r]}const uR={},dR=["prefixPath","collectionGroup","readTime","documentId"],hR=["prefixPath","collectionGroup","documentId"],fR=["collectionGroup","readTime","prefixPath","documentId"],gR=["canonicalId","targetId"],pR=["targetId","path"],mR=["path","targetId"],xR=["collectionId","parent"],wR=["indexId","uid"],yR=["uid","sequenceNumber"],vR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BR=["indexId","uid","orderedDocumentKey"],bR=["userId","collectionPath","documentId"],CR=["userId","collectionPath","largestBatchId"],IR=["userId","collectionGroup","largestBatchId"],ZE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_R=[...ZE,"documentOverlays"],e1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],t1=e1,tw=[...t1,"indexConfiguration","indexState","indexEntries"],ER=tw,kR=[...tw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends qE{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function kr(t,e){const r=we(t);return Fs.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Fi(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function r1(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function n1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,r){this.comparator=e,this.root=r||Vr.EMPTY}insert(e,r){return new Vt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=r?n(e.key,r):1,r&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,r,n,s,A){this.key=e,this.value=r,this.color=n??Vr.RED,this.left=s??Vr.EMPTY,this.right=A??Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,A){return new Vr(e??this.key,r??this.value,n??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const A=n(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,r,n),null):A===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Vr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1;Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,r,n,s,A){return this}insert(e,r,n){return new Vr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new vB(this.data.getIterator())}getIteratorFrom(e){return new vB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Qt(this.comparator);return r.data=e,r}}class vB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ma(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new kn([])}unionWith(e){let r=new Qt(zt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new kn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new s1("Invalid base64 string: "+A):A}}(e);return new ar(r)}static fromUint8Array(e){const r=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new ar(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ar.EMPTY_BYTE_STRING=new ar("");const FR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aA(t){if(Ge(!!t),typeof t=="string"){let e=0;const r=FR.exec(t);if(Ge(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oA(t){return typeof t=="string"?ar.fromBase64String(t):ar.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function ig(t){const e=t.mapValue.fields.__previous_value__;return Ag(e)?ig(e):e}function su(t){const e=aA(t.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,r,n,s,A,i,o,l,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c}}class gi{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new gi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hh={nullValue:"NULL_VALUE"};function pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ag(t)?4:A1(t)?9007199254740991:ag(t)?10:11:De()}function Ns(t,e){if(t===e)return!0;const r=pi(t);if(r!==pi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return su(t).isEqual(su(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=aA(s.timestampValue),o=aA(A.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return oA(s.bytesValue).isEqual(oA(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return Yt(s.geoPointValue.latitude)===Yt(A.geoPointValue.latitude)&&Yt(s.geoPointValue.longitude)===Yt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return Yt(s.integerValue)===Yt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=Yt(s.doubleValue),o=Yt(A.doubleValue);return i===o?nu(i)===nu(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Mo(t.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},o=A.mapValue.fields||{};if(yB(i)!==yB(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Ns(i[l],o[l])))return!1;return!0}(t,e);default:return De()}}function Au(t,e){return(t.values||[]).find(r=>Ns(r,e))!==void 0}function mi(t,e){if(t===e)return 0;const r=pi(t),n=pi(e);if(r!==n)return Ze(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ze(t.booleanValue,e.booleanValue);case 2:return function(A,i){const o=Yt(A.integerValue||A.doubleValue),l=Yt(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return BB(t.timestampValue,e.timestampValue);case 4:return BB(su(t),su(e));case 5:return Ze(t.stringValue,e.stringValue);case 6:return function(A,i){const o=oA(A),l=oA(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const o=A.split("/"),l=i.split("/");for(let c=0;c<o.length&&c<l.length;c++){const d=Ze(o[c],l[c]);if(d!==0)return d}return Ze(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const o=Ze(Yt(A.latitude),Yt(i.latitude));return o!==0?o:Ze(Yt(A.longitude),Yt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return bB(t.arrayValue,e.arrayValue);case 10:return function(A,i){var o,l,c,d;const h=A.fields||{},f=i.fields||{},p=(o=h.value)===null||o===void 0?void 0:o.arrayValue,w=(l=f.value)===null||l===void 0?void 0:l.arrayValue,B=Ze(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return B!==0?B:bB(p,w)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===KA.mapValue&&i===KA.mapValue)return 0;if(A===KA.mapValue)return 1;if(i===KA.mapValue)return-1;const o=A.fields||{},l=Object.keys(o),c=i.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=Ze(l[h],d[h]);if(f!==0)return f;const p=mi(o[l[h]],c[d[h]]);if(p!==0)return p}return Ze(l.length,d.length)}(t.mapValue,e.mapValue);default:throw De()}}function BB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ze(t,e);const r=aA(t),n=aA(e),s=Ze(r.seconds,n.seconds);return s!==0?s:Ze(r.nanos,n.nanos)}function bB(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const A=mi(r[s],n[s]);if(A)return A}return Ze(r.length,n.length)}function Vo(t){return i0(t)}function i0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=aA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return oA(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return be.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const A of r.values||[])s?s=!1:n+=",",n+=i0(A);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",A=!0;for(const i of n)A?A=!1:s+=",",s+=`${i}:${i0(r.fields[i])}`;return s+"}"}(t.mapValue):De()}function fh(t){switch(pi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ig(t);return e?16+fh(e):16;case 5:return 2*t.stringValue.length;case 6:return oA(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,A)=>s+fh(A),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Fi(n.fields,(A,i)=>{s+=A.length+fh(i)}),s}(t.mapValue);default:throw De()}}function ha(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function a0(t){return!!t&&"integerValue"in t}function iu(t){return!!t&&"arrayValue"in t}function CB(t){return!!t&&"nullValue"in t}function IB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gh(t){return!!t&&"mapValue"in t}function ag(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function bc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=bc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=bc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function A1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const i1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function UR(t){return"nullValue"in t?hh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ha(gi.empty(),be.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ag(t)?i1:{mapValue:{}}:De()}function QR(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ha(gi.empty(),be.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?i1:"mapValue"in t?ag(t)?{mapValue:{}}:KA:De()}function _B(t,e){const r=mi(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function EB(t,e){const r=mi(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!gh(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(r)}setAll(e){let r=zt.emptyPath(),n={},s=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}i?n[o.lastSegment()]=bc(i):s.push(o.lastSegment())});const A=this.getFieldsMap(r);this.applyChanges(A,n,s)}delete(e){const r=this.field(e.popLast());gh(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];gh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Fi(r,(s,A)=>e[s]=A);for(const s of n)delete e[s]}clone(){return new Kr(bc(this.value))}}function a1(t){const e=[];return Fi(t.fields,(r,n)=>{const s=new zt([r]);if(gh(n)){const A=a1(n.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,r,n,s,A,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=A,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Gt(e,0,qe.min(),qe.min(),qe.min(),Kr.empty(),0)}static newFoundDocument(e,r,n,s){return new Gt(e,1,r,qe.min(),n,s,0)}static newNoDocument(e,r){return new Gt(e,2,r,qe.min(),qe.min(),Kr.empty(),0)}static newUnknownDocument(e,r){return new Gt(e,3,r,qe.min(),qe.min(),Kr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,r){this.position=e,this.inclusive=r}}function kB(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?n=be.comparator(be.fromName(i.referenceValue),r.key):n=mi(i,r.data.field(A.field)),A.dir==="desc"&&(n*=-1),n!==0)break}return n}function TB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Ns(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,r="asc"){this.field=e,this.dir=r}}function NR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{}class gt extends o1{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new RR(e,r,n):r==="array-contains"?new PR(e,n):r==="in"?new f1(e,n):r==="not-in"?new LR(e,n):r==="array-contains-any"?new MR(e,n):new gt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new jR(e,n):new DR(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(mi(r,this.value)):r!==null&&pi(this.value)===pi(r)&&this.matchesComparison(mi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends o1{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Tt(e,r)}matches(e){return Ko(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ko(t){return t.op==="and"}function o0(t){return t.op==="or"}function rw(t){return l1(t)&&Ko(t)}function l1(t){for(const e of t.filters)if(e instanceof Tt)return!1;return!0}function l0(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Vo(t.value);if(rw(t))return t.filters.map(e=>l0(e)).join(",");{const e=t.filters.map(r=>l0(r)).join(",");return`${t.op}(${e})`}}function c1(t,e){return t instanceof gt?function(n,s){return s instanceof gt&&n.op===s.op&&n.field.isEqual(s.field)&&Ns(n.value,s.value)}(t,e):t instanceof Tt?function(n,s){return s instanceof Tt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((A,i,o)=>A&&c1(i,s.filters[o]),!0):!1}(t,e):void De()}function u1(t,e){const r=t.filters.concat(e);return Tt.create(r,t.op)}function d1(t){return t instanceof gt?function(r){return`${r.field.canonicalString()} ${r.op} ${Vo(r.value)}`}(t):t instanceof Tt?function(r){return r.op.toString()+" {"+r.getFilters().map(d1).join(" ,")+"}"}(t):"Filter"}class RR extends gt{constructor(e,r,n){super(e,r,n),this.key=be.fromName(n.referenceValue)}matches(e){const r=be.comparator(e.key,this.key);return this.matchesComparison(r)}}class jR extends gt{constructor(e,r){super(e,"in",r),this.keys=h1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class DR extends gt{constructor(e,r){super(e,"not-in",r),this.keys=h1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function h1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>be.fromName(n.referenceValue))}class PR extends gt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return iu(r)&&Au(r.arrayValue,this.value)}}class f1 extends gt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Au(this.value.arrayValue,r)}}class LR extends gt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Au(this.value.arrayValue,r)}}class MR extends gt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!iu(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Au(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,r=null,n=[],s=[],A=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=A,this.startAt=i,this.endAt=o,this.ue=null}}function c0(t,e=null,r=[],n=[],s=null,A=null,i=null){return new OR(t,e,r,n,s,A,i)}function fa(t){const e=we(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>l0(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(A){return A.field.canonicalString()+A.dir}(n)).join(","),_u(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Vo(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Vo(n)).join(",")),e.ue=r}return e.ue}function Eu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!NR(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!c1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TB(t.startAt,e.startAt)&&TB(t.endAt,e.endAt)}function Af(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function af(t,e){return t.filters.filter(r=>r instanceof gt&&r.field.isEqual(e))}function FB(t,e,r){let n=hh,s=!0;for(const A of af(t,e)){let i=hh,o=!0;switch(A.op){case"<":case"<=":i=UR(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,o=!1;break;case"!=":case"not-in":i=hh}_B({value:n,inclusive:s},{value:i,inclusive:o})<0&&(n=i,s=o)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];_B({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function SB(t,e,r){let n=KA,s=!0;for(const A of af(t,e)){let i=KA,o=!0;switch(A.op){case">=":case">":i=QR(A.value),o=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,o=!1;break;case"!=":case"not-in":i=KA}EB({value:n,inclusive:s},{value:i,inclusive:o})>0&&(n=i,s=o)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];EB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,r=null,n=[],s=[],A=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=A,this.limitType=i,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function g1(t,e,r,n,s,A,i,o){return new gA(t,e,r,n,s,A,i,o)}function ll(t){return new gA(t)}function UB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nw(t){return t.collectionGroup!==null}function Io(t){const e=we(t);if(e.ce===null){e.ce=[];const r=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),r.add(A.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Qt(zt.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(A=>{r.has(A.canonicalString())||A.isKeyField()||e.ce.push(new au(A,n))}),r.has(zt.keyField().canonicalString())||e.ce.push(new au(zt.keyField(),n))}return e.ce}function on(t){const e=we(t);return e.le||(e.le=m1(e,Io(t))),e.le}function p1(t){const e=we(t);return e.he||(e.he=m1(e,t.explicitOrderBy)),e.he}function m1(t,e){if(t.limitType==="F")return c0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new au(s.field,A)});const r=t.endAt?new xi(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new xi(t.startAt.position,t.startAt.inclusive):null;return c0(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function u0(t,e){const r=t.filters.concat([e]);return new gA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function of(t,e,r){return new gA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function ku(t,e){return Eu(on(t),on(e))&&t.limitType===e.limitType}function x1(t){return`${fa(on(t))}|lt:${t.limitType}`}function Ya(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>d1(s)).join(", ")}]`),_u(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Vo(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Vo(s)).join(",")),`Target(${n})`}(on(t))}; limitType=${t.limitType})`}function Tu(t,e){return e.isFoundDocument()&&function(n,s){const A=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(A):be.isDocumentKey(n.path)?n.path.isEqual(A):n.path.isImmediateParentOf(A)}(t,e)&&function(n,s){for(const A of Io(n))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const A of n.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,o,l){const c=kB(i,o,l);return i.inclusive?c<=0:c<0}(n.startAt,Io(n),s)||n.endAt&&!function(i,o,l){const c=kB(i,o,l);return i.inclusive?c>=0:c>0}(n.endAt,Io(n),s))}(t,e)}function w1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y1(t){return(e,r)=>{let n=!1;for(const s of Io(t)){const A=HR(s,e,r);if(A!==0)return A;n=n||s.field.isKeyField()}return 0}}function HR(t,e,r){const n=t.field.isKeyField()?be.comparator(e.key,r.key):function(A,i,o){const l=i.data.field(A),c=o.data.field(A);return l!==null&&c!==null?mi(l,c):De()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,A]of n)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(r,n)=>{for(const[s,A]of n)e(s,A)})}isEmpty(){return n1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=new Vt(be.comparator);function Tn(){return VR}const v1=new Vt(be.comparator);function rc(...t){let e=v1;for(const r of t)e=e.insert(r.key,r);return e}function B1(t){let e=v1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Es(){return Cc()}function b1(){return Cc()}function Cc(){return new pA(t=>t.toString(),(t,e)=>t.isEqual(e))}const KR=new Vt(be.comparator),GR=new Qt(be.comparator);function nt(...t){let e=GR;for(const r of t)e=e.add(r);return e}const zR=new Qt(Ze);function sw(){return zR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function C1(t){return{integerValue:""+t}}function I1(t,e){return JE(e)?C1(e):Aw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this._=void 0}}function $R(t,e,r){return t instanceof Go?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&Ag(A)&&(A=ig(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(r,e):t instanceof ga?E1(t,e):t instanceof pa?k1(t,e):function(s,A){const i=_1(s,A),o=QB(i)+QB(s.Pe);return a0(i)&&a0(s.Pe)?C1(o):Aw(s.serializer,o)}(t,e)}function WR(t,e,r){return t instanceof ga?E1(t,e):t instanceof pa?k1(t,e):r}function _1(t,e){return t instanceof zo?function(n){return a0(n)||function(A){return!!A&&"doubleValue"in A}(n)}(e)?e:{integerValue:0}:null}class Go extends og{}class ga extends og{constructor(e){super(),this.elements=e}}function E1(t,e){const r=T1(e);for(const n of t.elements)r.some(s=>Ns(s,n))||r.push(n);return{arrayValue:{values:r}}}class pa extends og{constructor(e){super(),this.elements=e}}function k1(t,e){let r=T1(e);for(const n of t.elements)r=r.filter(s=>!Ns(s,n));return{arrayValue:{values:r}}}class zo extends og{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function QB(t){return Yt(t.integerValue||t.doubleValue)}function T1(t){return iu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,r){this.field=e,this.transform=r}}function qR(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ga&&s instanceof ga||n instanceof pa&&s instanceof pa?Mo(n.elements,s.elements,Ns):n instanceof zo&&s instanceof zo?Ns(n.Pe,s.Pe):n instanceof Go&&s instanceof Go}(t.transform,e.transform)}class XR{constructor(e,r){this.version=e,this.transformResults=r}}class er{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ph(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lg{}function F1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ul(t.key,er.none()):new cl(t.key,t.data,er.none());{const r=t.data,n=Kr.empty();let s=new Qt(zt.comparator);for(let A of e.fields)if(!s.has(A)){let i=r.field(A);i===null&&A.length>1&&(A=A.popLast(),i=r.field(A)),i===null?n.delete(A):n.set(A,i),s=s.add(A)}return new mA(t.key,n,new kn(s.toArray()),er.none())}}function JR(t,e,r){t instanceof cl?function(s,A,i){const o=s.value.clone(),l=RB(s.fieldTransforms,A,i.transformResults);o.setAll(l),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof mA?function(s,A,i){if(!ph(s.precondition,A))return void A.convertToUnknownDocument(i.version);const o=RB(s.fieldTransforms,A,i.transformResults),l=A.data;l.setAll(S1(s)),l.setAll(o),A.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Ic(t,e,r,n){return t instanceof cl?function(A,i,o,l){if(!ph(A.precondition,i))return o;const c=A.value.clone(),d=jB(A.fieldTransforms,l,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof mA?function(A,i,o,l){if(!ph(A.precondition,i))return o;const c=jB(A.fieldTransforms,l,i),d=i.data;return d.setAll(S1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(A,i,o){return ph(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function YR(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),A=_1(n.transform,s||null);A!=null&&(r===null&&(r=Kr.empty()),r.set(n.field,A))}return r||null}function NB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Mo(n,s,(A,i)=>qR(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cl extends lg{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class mA extends lg{constructor(e,r,n,s,A=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function S1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function RB(t,e,r){const n=new Map;Ge(t.length===r.length);for(let s=0;s<r.length;s++){const A=t[s],i=A.transform,o=e.data.field(A.field);n.set(A.field,WR(i,o,r[s]))}return n}function jB(t,e,r){const n=new Map;for(const s of t){const A=s.transform,i=r.data.field(s.field);n.set(s.field,$R(A,i,e))}return n}class ul extends lg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iw extends lg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&JR(A,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Ic(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Ic(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=b1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let o=this.applyToLocalView(i,A.mutatedFields);o=r.has(s.key)?null:o;const l=F1(i,o);l!==null&&n.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(qe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),nt())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,(r,n)=>NB(r,n))&&Mo(this.baseMutations,e.baseMutations,(r,n)=>NB(r,n))}}class ow{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Ge(e.mutations.length===n.length);let s=function(){return KR}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,n[i].version);return new ow(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr,mt;function Q1(t){switch(t){default:return De();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function N1(t){if(t===void 0)return fr("GRPC error has no .code"),X.UNKNOWN;switch(t){case pr.OK:return X.OK;case pr.CANCELLED:return X.CANCELLED;case pr.UNKNOWN:return X.UNKNOWN;case pr.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case pr.INTERNAL:return X.INTERNAL;case pr.UNAVAILABLE:return X.UNAVAILABLE;case pr.UNAUTHENTICATED:return X.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case pr.NOT_FOUND:return X.NOT_FOUND;case pr.ALREADY_EXISTS:return X.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return X.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case pr.ABORTED:return X.ABORTED;case pr.OUT_OF_RANGE:return X.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return X.UNIMPLEMENTED;case pr.DATA_LOSS:return X.DATA_LOSS;default:return De()}}(mt=pr||(pr={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new na([4294967295,4294967295],0);function DB(t){const e=R1().encode(t),r=new jE;return r.update(e),new Uint8Array(r.digest())}function PB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new na([r,n],0),new na([s,A],0)]}class cw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new nc(`Invalid padding: ${r}`);if(n<0)throw new nc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new nc(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=na.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(na.fromNumber(n)));return s.compare(ej)===1&&(s=new na([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=DB(e),[n,s]=PB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new cw(A,s,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const r=DB(e),[n,s]=PB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,r,n,s,A){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Su(qe.min(),s,new Vt(Ze),Tn(),nt())}}class Uu{constructor(e,r,n,s,A){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Uu(n,r,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class j1{constructor(e,r){this.targetId=e,this.me=r}}class D1{constructor(e,r,n=ar.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class LB{constructor(){this.fe=0,this.ge=OB(),this.pe=ar.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=nt(),r=nt(),n=nt();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:De()}}),new Uu(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=OB()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tn(),this.qe=MB(),this.Qe=new Vt(Ze)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:De()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const A=s.target;if(Af(A))if(n===0){const i=new be(A.path);this.Ue(r,i,Gt.newNoDocument(i,qe.min()))}else Ge(n===1);else{const i=this.Ye(r);if(i!==n){const o=this.Ze(e),l=o?this.Xe(o,e,i):1;if(l!==0){this.je(r);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}lf==null||lf.et(function(d,h,f,p,w){var B,E,C,b,I,Q;const N={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},S=h.unchangedNames;return S&&(N.bloomFilter={applied:w===0,hashCount:(B=S==null?void 0:S.hashCount)!==null&&B!==void 0?B:0,bitmapLength:(b=(C=(E=S==null?void 0:S.bits)===null||E===void 0?void 0:E.bitmap)===null||C===void 0?void 0:C.length)!==null&&b!==void 0?b:0,padding:(Q=(I=S==null?void 0:S.bits)===null||I===void 0?void 0:I.padding)!==null&&Q!==void 0?Q:0,mightContain:m=>{var y;return(y=p==null?void 0:p.mightContain(m))!==null&&y!==void 0&&y}}),N}(i,e.me,this.Le.tt(),o,l))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:A=0}=r;let i,o;try{i=oA(n).toUint8Array()}catch(l){if(l instanceof s1)return Mn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new cw(i,s,A)}catch(l){return Mn(l instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(A=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(o)||(this.Ue(r,A,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((A,i)=>{const o=this.Je(i);if(o){if(A.current&&Af(o.target)){const l=new be(o.target.path);this.ke.get(l)!==null||this.it(i,l)||this.Ue(i,l,Gt.newNoDocument(l,e))}A.be&&(r.set(i,A.ve()),A.Ce())}});let n=nt();this.qe.forEach((A,i)=>{let o=!0;i.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new Su(e,r,this.Qe,this.ke,n);return this.ke=Tn(),this.qe=MB(),this.Qe=new Vt(Ze),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new LB,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Qt(Ze),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||ce("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new LB),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function MB(){return new Vt(be.comparator)}function OB(){return new Vt(be.comparator)}const rj={asc:"ASCENDING",desc:"DESCENDING"},nj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sj={and:"AND",or:"OR"};class Aj{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function d0(t,e){return t.useProto3Json||_u(e)?e:{value:e}}function $o(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ij(t,e){return $o(t,e.toTimestamp())}function gr(t){return Ge(!!t),qe.fromTimestamp(function(r){const n=aA(r);return new tr(n.seconds,n.nanos)}(t))}function uw(t,e){return h0(t,e).canonicalString()}function h0(t,e){const r=function(s){return new ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function L1(t){const e=ft.fromString(t);return Ge(q1(e)),e}function ou(t,e){return uw(t.databaseId,e.path)}function Ss(t,e){const r=L1(e);if(r.get(1)!==t.databaseId.projectId)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new be(H1(r))}function M1(t,e){return uw(t.databaseId,e)}function O1(t){const e=L1(t);return e.length===4?ft.emptyPath():H1(e)}function f0(t){return new ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function H1(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function HB(t,e,r){return{name:ou(t,e),fields:r.value.mapValue.fields}}function V1(t,e,r){const n=Ss(t,e.name),s=gr(e.updateTime),A=e.createTime?gr(e.createTime):qe.min(),i=new Kr({mapValue:{fields:e.fields}}),o=Gt.newFoundDocument(n,s,A,i);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function aj(t,e){return"found"in e?function(n,s){Ge(!!s.found),s.found.name,s.found.updateTime;const A=Ss(n,s.found.name),i=gr(s.found.updateTime),o=s.found.createTime?gr(s.found.createTime):qe.min(),l=new Kr({mapValue:{fields:s.found.fields}});return Gt.newFoundDocument(A,i,o,l)}(t,e):"missing"in e?function(n,s){Ge(!!s.missing),Ge(!!s.readTime);const A=Ss(n,s.missing),i=gr(s.readTime);return Gt.newNoDocument(A,i)}(t,e):De()}function oj(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(Ge(d===void 0||typeof d=="string"),ar.fromBase64String(d||"")):(Ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ar.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?X.UNKNOWN:N1(c.code);return new oe(d,c.message||"")}(i);r=new D1(n,s,A,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Ss(t,n.document.name),A=gr(n.document.updateTime),i=n.document.createTime?gr(n.document.createTime):qe.min(),o=new Kr({mapValue:{fields:n.document.fields}}),l=Gt.newFoundDocument(s,A,i,o),c=n.targetIds||[],d=n.removedTargetIds||[];r=new mh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Ss(t,n.document),A=n.readTime?gr(n.readTime):qe.min(),i=Gt.newNoDocument(s,A),o=n.removedTargetIds||[];r=new mh([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Ss(t,n.document),A=n.removedTargetIds||[];r=new mh([],A,s,null)}else{if(!("filter"in e))return De();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:A}=n,i=new ZR(s,A),o=n.targetId;r=new j1(o,i)}}return r}function lu(t,e){let r;if(e instanceof cl)r={update:HB(t,e.key,e.value)};else if(e instanceof ul)r={delete:ou(t,e.key)};else if(e instanceof mA)r={update:HB(t,e.key,e.data),updateMask:fj(e.fieldMask)};else{if(!(e instanceof iw))return De();r={verify:ou(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(A,i){const o=i.transform;if(o instanceof Go)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ga)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof pa)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zo)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw De()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:ij(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:De()}(t,e.precondition)),r}function g0(t,e){const r=e.currentDocument?function(A){return A.updateTime!==void 0?er.updateTime(gr(A.updateTime)):A.exists!==void 0?er.exists(A.exists):er.none()}(e.currentDocument):er.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let l=null;if("setToServerValue"in o)Ge(o.setToServerValue==="REQUEST_TIME"),l=new Go;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];l=new ga(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];l=new pa(d)}else"increment"in o?l=new zo(i,o.increment):De();const c=zt.fromServerFormat(o.fieldPath);return new Fu(c,l)}(t,s)):[];if(e.update){e.update.name;const s=Ss(t,e.update.name),A=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(l){const c=l.fieldPaths||[];return new kn(c.map(d=>zt.fromServerFormat(d)))}(e.updateMask);return new mA(s,A,i,r,n)}return new cl(s,A,r,n)}if(e.delete){const s=Ss(t,e.delete);return new ul(s,r)}if(e.verify){const s=Ss(t,e.verify);return new iw(s,r)}return De()}function lj(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(r=>function(s,A){let i=s.updateTime?gr(s.updateTime):gr(A);return i.isEqual(qe.min())&&(i=gr(A)),new XR(i,s.transformResults||[])}(r,e))):[]}function K1(t,e){return{documents:[M1(t,e.path)]}}function cg(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=M1(t,s);const A=function(c){if(c.length!==0)return W1(Tt.create(c,"and"))}(e.filters);A&&(r.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:NA(f.field),direction:uj(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=d0(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function G1(t,e,r,n){const{_t:s,parent:A}=cg(t,e),i={},o=[];let l=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+l++;i[d]=c.alias,c.aggregateType==="count"?o.push({alias:d,count:{}}):c.aggregateType==="avg"?o.push({alias:d,avg:{field:NA(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:d,sum:{field:NA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:A}}function z1(t){let e=O1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Ge(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];r.where&&(A=function(h){const f=$1(h);return f instanceof Tt&&rw(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(w){return new au(Za(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(r.orderBy));let o=null;r.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,_u(f)?null:f}(r.limit));let l=null;r.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new xi(p,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new xi(p,f)}(r.endAt)),g1(e,s,i,A,o,"F",l,c)}function cj(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function $1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Za(r.unaryFilter.field);return gt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Za(r.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=Za(r.unaryFilter.field);return gt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Za(r.unaryFilter.field);return gt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(r){return gt.create(Za(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Tt.create(r.compositeFilter.filters.map(n=>$1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return De()}}(r.compositeFilter.op))}(t):De()}function uj(t){return rj[t]}function dj(t){return nj[t]}function hj(t){return sj[t]}function NA(t){return{fieldPath:t.canonicalString()}}function Za(t){return zt.fromServerFormat(t.fieldPath)}function W1(t){return t instanceof gt?function(r){if(r.op==="=="){if(IB(r.value))return{unaryFilter:{field:NA(r.field),op:"IS_NAN"}};if(CB(r.value))return{unaryFilter:{field:NA(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(IB(r.value))return{unaryFilter:{field:NA(r.field),op:"IS_NOT_NAN"}};if(CB(r.value))return{unaryFilter:{field:NA(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:NA(r.field),op:dj(r.op),value:r.value}}}(t):t instanceof Tt?function(r){const n=r.getFilters().map(s=>W1(s));return n.length===1?n[0]:{compositeFilter:{op:hj(r.op),filters:n}}}(t):De()}function fj(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,r,n,s,A=qe.min(),i=qe.min(),o=ar.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.ct=e}}function gj(t,e){let r;if(e.document)r=V1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=be.fromSegments(e.noDocument.path),s=xa(e.noDocument.readTime);r=Gt.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const n=be.fromSegments(e.unknownDocument.path),s=xa(e.unknownDocument.version);r=Gt.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const A=new tr(s[0],s[1]);return qe.fromTimestamp(A)}(e.readTime)),r}function VB(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:cf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(A,i){return{name:ou(A,i.key),fields:i.data.value.mapValue.fields,updateTime:$o(A,i.version.toTimestamp()),createTime:$o(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:ma(e.version)};else{if(!e.isUnknownDocument())return De();n.unknownDocument={path:r.path.toArray(),version:ma(e.version)}}return n}function cf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ma(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xa(t){const e=new tr(t.seconds,t.nanoseconds);return qe.fromTimestamp(e)}function $i(t,e){const r=(e.baseMutations||[]).map(A=>g0(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const o=e.mutations[A+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const n=e.mutations.map(A=>g0(t.ct,A)),s=tr.fromMillis(e.localWriteTimeMs);return new aw(e.batchId,s,r,n)}function sc(t){const e=xa(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?xa(t.lastLimboFreeSnapshotVersion):qe.min();let n;return n=function(A){return A.documents!==void 0}(t.query)?function(A){return Ge(A.documents.length===1),on(ll(O1(A.documents[0])))}(t.query):function(A){return on(z1(A))}(t.query),new Xs(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,ar.fromBase64String(t.resumeToken))}function J1(t,e){const r=ma(e.snapshotVersion),n=ma(e.lastLimboFreeSnapshotVersion);let s;s=Af(e.target)?K1(t.ct,e.target):cg(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fa(e.target),readTime:r,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function dw(t){const e=z1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?of(e,e.limit,"L"):e}function Ip(t,e){return new lw(e.largestBatchId,g0(t.ct,e.overlayMutation))}function KB(t,e){const r=e.path.lastSegment();return[t,an(e.path.popLast()),r]}function GB(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:ma(n.readTime),documentKey:an(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{getBundleMetadata(e,r){return zB(e).get(r).next(n=>{if(n)return function(A){return{id:A.bundleId,createTime:xa(A.createTime),version:A.version}}(n)})}saveBundleMetadata(e,r){return zB(e).put(function(s){return{bundleId:s.id,createTime:ma(gr(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return $B(e).get(r).next(n=>{if(n)return function(A){return{name:A.name,query:dw(A.bundledQuery),readTime:xa(A.readTime)}}(n)})}saveNamedQuery(e,r){return $B(e).put(function(s){return{name:s.name,readTime:ma(gr(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function zB(t){return kr(t,"bundles")}function $B(t){return kr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new ug(e,n)}getOverlay(e,r){return Pl(e).get(KB(this.userId,r)).next(n=>n?Ip(this.serializer,n):null)}getOverlays(e,r){const n=Es();return V.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((A,i)=>{const o=new lw(r,i);s.push(this.ht(e,o))}),V.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(i=>s.add(an(i.getCollectionPath())));const A=[];return s.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);A.push(Pl(e).j("collectionPathOverlayIndex",o))}),V.waitFor(A)}getOverlaysForCollection(e,r,n){const s=Es(),A=an(r),i=IDBKeyRange.bound([this.userId,A,n],[this.userId,A,Number.POSITIVE_INFINITY],!0);return Pl(e).U("collectionPathOverlayIndex",i).next(o=>{for(const l of o){const c=Ip(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const A=Es();let i;const o=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Pl(e).J({index:"collectionGroupOverlayIndex",range:o},(l,c,d)=>{const h=Ip(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,r){return Pl(e).put(function(s,A,i){const[o,l,c]=KB(A,i.mutation.key);return{userId:A,collectionPath:l,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:lu(s.ct,i.mutation)}}(this.serializer,this.userId,r))}}function Pl(t){return kr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{Pt(e){return kr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?ar.fromUint8Array(n):ar.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Yt(e.integerValue));else if("doubleValue"in e){const n=Yt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),nu(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=aA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(oA(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?A1(e)?this.dt(r,Number.MAX_SAFE_INTEGER):ag(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):De()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const A=e.fields||{};this.dt(r,53);const i="value",o=((s=(n=A[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(Yt(o)),this.Vt(i,r),this.Tt(A[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),be.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}Wi.vt=new Wi;function xj(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function WB(t){const e=64-function(n){let s=0;for(let A=0;A<8;++A){const i=xj(255&n[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class wj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=WB(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=WB(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class yj{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class vj{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ll{constructor(){this.jt=new wj,this.Ht=new yj(this.jt),this.Jt=new vj(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new qi(this.indexId,this.documentKey,this.arrayValue,n)}}function bA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=qB(t.arrayValue,e.arrayValue),r!==0?r:(r=qB(t.directionalValue,e.directionalValue),r!==0?r:be.comparator(t.documentKey,e.documentKey)))}function qB(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.Xt=new Qt((r,n)=>zt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Ge(e.collectionGroup===this.collectionId),this.nn)return!1;const r=s0(e);if(r!==void 0&&!this.sn(r))return!1;const n=Gi(e);let s=new Set,A=0,i=0;for(;A<n.length&&this.sn(n[A]);++A)s=s.add(n[A].fieldPath.canonicalString());if(A===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const l=n[A];if(!this.on(o,l)||!this._n(this.en[i++],l))return!1}++A}for(;A<n.length;++A){const o=n[A];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Qt(zt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new sa(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new sa(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new sa(n.field,n.dir==="asc"?0:1)));return new Oo(Oo.UNKNOWN_ID,this.collectionId,r,Ho.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){var e,r;if(Ge(t instanceof gt||t instanceof Tt),t instanceof gt){if(t instanceof f1){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(A=>gt.create(t.field,"==",A)))||[];return Tt.create(s,"or")}return t}const n=t.filters.map(s=>Y1(s));return Tt.create(n,t.op)}function Bj(t){if(t.getFilters().length===0)return[];const e=x0(Y1(t));return Ge(Z1(e)),p0(e)||m0(e)?[e]:e.getFilters()}function p0(t){return t instanceof gt}function m0(t){return t instanceof Tt&&rw(t)}function Z1(t){return p0(t)||m0(t)||function(r){if(r instanceof Tt&&o0(r)){for(const n of r.getFilters())if(!p0(n)&&!m0(n))return!1;return!0}return!1}(t)}function x0(t){if(Ge(t instanceof gt||t instanceof Tt),t instanceof gt)return t;if(t.filters.length===1)return x0(t.filters[0]);const e=t.filters.map(n=>x0(n));let r=Tt.create(e,t.op);return r=uf(r),Z1(r)?r:(Ge(r instanceof Tt),Ge(Ko(r)),Ge(r.filters.length>1),r.filters.reduce((n,s)=>hw(n,s)))}function hw(t,e){let r;return Ge(t instanceof gt||t instanceof Tt),Ge(e instanceof gt||e instanceof Tt),r=t instanceof gt?e instanceof gt?function(s,A){return Tt.create([s,A],"and")}(t,e):JB(t,e):e instanceof gt?JB(e,t):function(s,A){if(Ge(s.filters.length>0&&A.filters.length>0),Ko(s)&&Ko(A))return u1(s,A.getFilters());const i=o0(s)?s:A,o=o0(s)?A:s,l=i.filters.map(c=>hw(c,o));return Tt.create(l,"or")}(t,e),uf(r)}function JB(t,e){if(Ko(e))return u1(e,t.getFilters());{const r=e.filters.map(n=>hw(t,n));return Tt.create(r,"or")}}function uf(t){if(Ge(t instanceof gt||t instanceof Tt),t instanceof gt)return t;const e=t.getFilters();if(e.length===1)return uf(e[0]);if(l1(t))return t;const r=e.map(s=>uf(s)),n=[];return r.forEach(s=>{s instanceof gt?n.push(s):s instanceof Tt&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Tt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this.un=new fw}addToCollectionParentIndex(e,r){return this.un.add(r),V.resolve()}getCollectionParents(e,r){return V.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return V.resolve()}deleteFieldIndex(e,r){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,r){return V.resolve()}getDocumentsMatchingTarget(e,r){return V.resolve(null)}getIndexType(e,r){return V.resolve(0)}getFieldIndexes(e,r){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,r){return V.resolve(On.min())}getMinOffsetFromCollectionGroup(e,r){return V.resolve(On.min())}updateCollectionGroup(e,r,n){return V.resolve()}updateIndexEntries(e,r){return V.resolve()}}class fw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Qt(ft.comparator),A=!s.has(n);return this.index[r]=s.add(n),A}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Qt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Uint8Array(0);class Cj{constructor(e,r){this.databaseId=r,this.cn=new fw,this.ln=new pA(n=>fa(n),(n,s)=>Eu(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const A={collectionId:n,parent:an(s)};return YB(e).put(A)}return V.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[GE(r),""],!1,!0);return YB(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==r)break;n.push(_s(i.parent))}return n})}addFieldIndex(e,r){const n=Ml(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(r);delete s.indexId;const A=n.add(s);if(r.indexState){const i=Ha(e);return A.next(o=>{i.put(GB(o,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return A.next()}deleteFieldIndex(e,r){const n=Ml(e),s=Ha(e),A=Oa(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Ml(e),n=Oa(e),s=Ha(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return V.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const A=new XB(n).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,r){const n=Oa(e);let s=!0;const A=new Map;return V.forEach(this.hn(r),i=>this.Pn(e,i).next(o=>{s&&(s=!!o),A.set(i,o)})).next(()=>{if(s){let i=nt();const o=[];return V.forEach(A,(l,c)=>{ce("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(l)} to execute ${fa(r)}`);const d=function(I,Q){const N=s0(Q);if(N===void 0)return null;for(const S of af(I,N.fieldPath))switch(S.op){case"array-contains-any":return S.value.arrayValue.values||[];case"array-contains":return[S.value]}return null}(c,l),h=function(I,Q){const N=new Map;for(const S of Gi(Q))for(const m of af(I,S.fieldPath))switch(m.op){case"==":case"in":N.set(S.fieldPath.canonicalString(),m.value);break;case"not-in":case"!=":return N.set(S.fieldPath.canonicalString(),m.value),Array.from(N.values())}return null}(c,l),f=function(I,Q){const N=[];let S=!0;for(const m of Gi(Q)){const y=m.kind===0?FB(I,m.fieldPath,I.startAt):SB(I,m.fieldPath,I.startAt);N.push(y.value),S&&(S=y.inclusive)}return new xi(N,S)}(c,l),p=function(I,Q){const N=[];let S=!0;for(const m of Gi(Q)){const y=m.kind===0?SB(I,m.fieldPath,I.endAt):FB(I,m.fieldPath,I.endAt);N.push(y.value),S&&(S=y.inclusive)}return new xi(N,S)}(c,l),w=this.In(l,c,f),B=this.In(l,c,p),E=this.Tn(l,c,h),C=this.En(l.indexId,d,w,f.inclusive,B,p.inclusive,E);return V.forEach(C,b=>n.G(b,r.limit).next(I=>{I.forEach(Q=>{const N=be.fromSegments(Q.documentKey);i.has(N)||(i=i.add(N),o.push(N))})}))}).next(()=>o)}return V.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Bj(Tt.create(e.filters,"and")).map(n=>c0(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,A,i,o){const l=(r!=null?r.length:1)*Math.max(n.length,A.length),c=l/(r!=null?r.length:1),d=[];for(let h=0;h<l;++h){const f=r?this.dn(r[h/c]):Bd,p=this.An(e,f,n[h%c],s),w=this.Rn(e,f,A[h%c],i),B=o.map(E=>this.An(e,f,E,!0));d.push(...this.createRange(p,w,B))}return d}An(e,r,n,s){const A=new qi(e,be.empty(),r,n);return s?A:A.Zt()}Rn(e,r,n,s){const A=new qi(e,be.empty(),r,n);return s?A.Zt():A}Pn(e,r){const n=new XB(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const o of A)n.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,r){let n=2;const s=this.hn(r);return V.forEach(s,A=>this.Pn(e,A).next(i=>{i?n!==0&&i.fields.length<function(l){let c=new Qt(zt.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new Ll;for(const s of Gi(e)){const A=r.data.field(s.fieldPath);if(A==null)return null;const i=n.Yt(s.kind);Wi.vt.It(A,i)}return n.zt()}dn(e){const r=new Ll;return Wi.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Ll;return Wi.vt.It(ha(this.databaseId,r),n.Yt(function(A){const i=Gi(A);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new Ll);let A=0;for(const i of Gi(e)){const o=n[A++];for(const l of s)if(this.fn(r,i.fieldPath)&&iu(o))s=this.gn(s,i,o);else{const c=l.Yt(i.kind);Wi.vt.It(o,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],A=[];for(const i of n.arrayValue.values||[])for(const o of s){const l=new Ll;l.seed(o.zt()),Wi.vt.It(i,l.Yt(r.kind)),A.push(l)}return A}fn(e,r){return!!e.filters.find(n=>n instanceof gt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Ml(e),s=Ha(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(A=>{const i=[];return V.forEach(A,o=>s.get([o.indexId,this.uid]).next(l=>{i.push(function(d,h){const f=h?new Ho(h.sequenceNumber,new On(xa(h.readTime),new be(_s(h.documentKey)),h.largestBatchId)):Ho.empty(),p=d.fields.map(([w,B])=>new sa(zt.fromServerFormat(w),B));return new Oo(d.indexId,d.collectionGroup,p,f)}(o,l))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const A=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:Ze(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=Ml(e),A=Ha(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(o=>V.forEach(o,l=>A.put(GB(l.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return V.forEach(r,(s,A)=>{const i=n.get(s.collectionGroup);return(i?V.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(n.set(s.collectionGroup,o),V.forEach(o,l=>this.wn(e,s,l).next(c=>{const d=this.Sn(A,l);return c.isEqual(d)?V.resolve():this.bn(e,A,l,c,d)}))))})}Dn(e,r,n,s){return Oa(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return Oa(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=Oa(e);let A=new Qt(bA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,o)=>{A=A.add(new qi(n.indexId,r,o.arrayValue,o.directionalValue))}).next(()=>A)}Sn(e,r){let n=new Qt(bA);const s=this.Vn(r,e);if(s==null)return n;const A=s0(r);if(A!=null){const i=e.data.field(A.fieldPath);if(iu(i))for(const o of i.arrayValue.values||[])n=n.add(new qi(r.indexId,e.key,this.dn(o),s))}else n=n.add(new qi(r.indexId,e.key,Bd,s));return n}bn(e,r,n,s,A){ce("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(l,c,d,h,f){const p=l.getIterator(),w=c.getIterator();let B=Ma(p),E=Ma(w);for(;B||E;){let C=!1,b=!1;if(B&&E){const I=d(B,E);I<0?b=!0:I>0&&(C=!0)}else B!=null?b=!0:C=!0;C?(h(E),E=Ma(w)):b?(f(B),B=Ma(p)):(B=Ma(p),E=Ma(w))}}(s,A,bA,o=>{i.push(this.Dn(e,r,n,o))},o=>{i.push(this.vn(e,r,n,o))}),V.waitFor(i)}yn(e){let r=1;return Ha(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,A)=>{A.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,o)=>bA(i,o)).filter((i,o,l)=>!o||bA(i,l[o-1])!==0);const s=[];s.push(e);for(const i of n){const o=bA(i,e),l=bA(i,r);if(o===0)s[0]=e.Zt();else if(o>0&&l<0)s.push(i),s.push(i.Zt());else if(l>0)break}s.push(r);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const o=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,Bd,[]],l=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,Bd,[]];A.push(IDBKeyRange.bound(o,l))}return A}Cn(e,r){return bA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(ZB)}getMinOffset(e,r){return V.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||De())).next(ZB)}}function YB(t){return kr(t,"collectionParents")}function Oa(t){return kr(t,"indexEntries")}function Ml(t){return kr(t,"indexConfiguration")}function Ha(t){return kr(t,"indexState")}function ZB(t){Ge(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Zx(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new On(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rn{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(r.batchId);let o=0;const l=n.J({range:i},(d,h,f)=>(o++,f.delete()));A.push(l.next(()=>{Ge(o===1)}));const c=[];for(const d of r.mutations){const h=YE(e,d.key.path,r.batchId);A.push(s.delete(h)),c.push(d.key)}return V.waitFor(A).next(()=>c)}function df(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw De();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class dg{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){Ge(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new dg(A,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return CA(e).J({index:"userMutationsIndex",range:n},(s,A,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const A=eo(e),i=CA(e);return i.add({}).next(o=>{Ge(typeof o=="number");const l=new aw(o,r,n,s),c=function(p,w,B){const E=B.baseMutations.map(b=>lu(p.ct,b)),C=B.mutations.map(b=>lu(p.ct,b));return{userId:w,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:E,mutations:C}}(this.serializer,this.userId,l),d=[];let h=new Qt((f,p)=>Ze(f.canonicalString(),p.canonicalString()));for(const f of s){const p=YE(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(p,uR))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,r){return CA(e).get(r).next(n=>n?(Ge(n.userId===this.userId),$i(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?V.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let A=null;return CA(e).J({index:"userMutationsIndex",range:s},(i,o,l)=>{o.userId===this.userId&&(Ge(o.batchId>=n),A=$i(this.serializer,o)),l.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return CA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,A,i)=>{n=A.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return CA(e).U("userMutationsIndex",r).next(n=>n.map(s=>$i(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=dh(this.userId,r.path),s=IDBKeyRange.lowerBound(n),A=[];return eo(e).J({range:s},(i,o,l)=>{const[c,d,h]=i,f=_s(d);if(c===this.userId&&r.path.isEqual(f))return CA(e).get(h).next(p=>{if(!p)throw De();Ge(p.userId===this.userId),A.push($i(this.serializer,p))});l.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qt(Ze);const s=[];return r.forEach(A=>{const i=dh(this.userId,A.path),o=IDBKeyRange.lowerBound(i),l=eo(e).J({range:o},(c,d,h)=>{const[f,p,w]=c,B=_s(p);f===this.userId&&A.path.isEqual(B)?n=n.add(w):h.done()});s.push(l)}),V.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,A=dh(this.userId,n),i=IDBKeyRange.lowerBound(A);let o=new Qt(Ze);return eo(e).J({range:i},(l,c,d)=>{const[h,f,p]=l,w=_s(f);h===this.userId&&n.isPrefixOf(w)?w.length===s&&(o=o.add(p)):d.done()}).next(()=>this.xn(e,o))}xn(e,r){const n=[],s=[];return r.forEach(A=>{s.push(CA(e).get(A).next(i=>{if(i===null)throw De();Ge(i.userId===this.userId),n.push($i(this.serializer,i))}))}),V.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return ek(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),V.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return V.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return eo(e).J({range:n},(A,i,o)=>{if(A[0]===this.userId){const l=_s(A[1]);s.push(l)}else o.done()}).next(()=>{Ge(s.length===0)})})}containsKey(e,r){return tk(e,this.userId,r)}Nn(e){return rk(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tk(t,e,r){const n=dh(e,r.path),s=n[1],A=IDBKeyRange.lowerBound(n);let i=!1;return eo(t).J({range:A,H:!0},(o,l,c)=>{const[d,h,f]=o;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function CA(t){return kr(t,"mutations")}function eo(t){return kr(t,"documentMutations")}function rk(t){return kr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wa(0)}static kn(){return new wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new wa(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>qe.fromTimestamp(new tr(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Va(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Ge(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const A=[];return Va(e).J((i,o)=>{const l=sc(o);l.sequenceNumber<=r&&n.get(l.targetId)===null&&(s++,A.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(A)).next(()=>s)}forEachTarget(e,r){return Va(e).J((n,s)=>{const A=sc(s);r(A)})}qn(e){return tb(e).get("targetGlobalKey").next(r=>(Ge(r!==null),r))}Qn(e,r){return tb(e).put("targetGlobalKey",r)}Kn(e,r){return Va(e).put(J1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=fa(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let A=null;return Va(e).J({range:s,index:"queryTargetsIndex"},(i,o,l)=>{const c=sc(o);Eu(r,c.target)&&(A=c,l.done())}).next(()=>A)}addMatchingKeys(e,r,n){const s=[],A=RA(e);return r.forEach(i=>{const o=an(i.path);s.push(A.put({targetId:n,path:o})),s.push(this.referenceDelegate.addReference(e,n,i))}),V.waitFor(s)}removeMatchingKeys(e,r,n){const s=RA(e);return V.forEach(r,A=>{const i=an(A.path);return V.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,A)])})}removeMatchingKeysForTargetId(e,r){const n=RA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=RA(e);let A=nt();return s.J({range:n,H:!0},(i,o,l)=>{const c=_s(i[1]),d=new be(c);A=A.add(d)}).next(()=>A)}containsKey(e,r){const n=an(r.path),s=IDBKeyRange.bound([n],[GE(n)],!1,!0);let A=0;return RA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,o],l,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,r){return Va(e).get(r).next(n=>n?sc(n):null)}}function Va(t){return kr(t,"targets")}function tb(t){return kr(t,"targetGlobal")}function RA(t){return kr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb([t,e],[r,n]){const s=Ze(t,r);return s===0?Ze(e,n):s}class _j{constructor(e){this.Un=e,this.buffer=new Qt(rb),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();rb(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class nk{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ti(r)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ki(r)}await this.Hn(3e5)})}}class Ej{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return V.resolve(En.oe);const n=new _j(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(eb)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eb):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,A,i,o,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(A=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),Ja()<=ht.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${A} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function sk(t,e){return new Ej(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,r){this.db=e,this.garbageCollector=sk(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return bd(e,n)}removeReference(e,r,n){return bd(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return bd(e,r)}nr(e,r){return function(s,A){let i=!1;return rk(s).Y(o=>tk(s,o,A).next(l=>(l&&(i=!0),V.resolve(!l)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,o)=>{if(o<=r){const l=this.nr(e,i).next(c=>{if(!c)return A++,n.getEntry(e,i).next(()=>(n.removeEntry(i,qe.min()),RA(e).delete(function(h){return[0,an(h.path)]}(i))))});s.push(l)}}).next(()=>V.waitFor(s)).next(()=>n.apply(e)).next(()=>A)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return bd(e,r)}tr(e,r){const n=RA(e);let s,A=En.oe;return n.J({index:"documentTargetsIndex"},([i,o],{path:l,sequenceNumber:c})=>{i===0?(A!==En.oe&&r(new be(_s(s)),A),A=c,s=l):A=En.oe}).next(()=>{A!==En.oe&&r(new be(_s(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bd(t,e){return RA(t).put(function(n,s){return{targetId:0,path:an(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.changes=new pA(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?V.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Mi(e).put(n)}removeEntry(e,r,n){return Mi(e).delete(function(A,i){const o=A.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],cf(i),o[o.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Gt.newInvalidDocument(r);return Mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ol(r))},(s,A)=>{n=this.ir(r,A)}).next(()=>n)}sr(e,r){let n={size:0,document:Gt.newInvalidDocument(r)};return Mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ol(r))},(s,A)=>{n={document:this.ir(r,A),size:df(A)}}).next(()=>n)}getEntries(e,r){let n=Tn();return this._r(e,r,(s,A)=>{const i=this.ir(s,A);n=n.insert(s,i)}).next(()=>n)}ar(e,r){let n=Tn(),s=new Vt(be.comparator);return this._r(e,r,(A,i)=>{const o=this.ir(A,i);n=n.insert(A,o),s=s.insert(A,df(i))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return V.resolve();let s=new Qt(Ab);r.forEach(l=>s=s.add(l));const A=IDBKeyRange.bound(Ol(s.first()),Ol(s.last())),i=s.getIterator();let o=i.getNext();return Mi(e).J({index:"documentKeyIndex",range:A},(l,c,d)=>{const h=be.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Ab(o,h)<0;)n(o,null),o=i.getNext();o&&o.isEqual(h)&&(n(o,c),o=i.hasNext()?i.getNext():null),o?d.$(Ol(o)):d.done()}).next(()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,A){const i=r.path,o=[i.popLast().toArray(),i.lastSegment(),cf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mi(e).U(IDBKeyRange.bound(o,l,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=Tn();for(const h of c){const f=this.ir(be.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Tu(r,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,s){let A=Tn();const i=sb(r,n),o=sb(r,On.max());return Mi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(l,c,d)=>{const h=this.ir(be.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new Fj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return nb(e).get("remoteDocumentGlobalKey").next(r=>(Ge(!!r),r))}rr(e,r){return nb(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=gj(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(qe.min())))return n}return Gt.newInvalidDocument(e)}}function ik(t){return new Tj(t)}class Fj extends Ak{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new pA(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new Qt((A,i)=>Ze(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const o=this.lr.get(A);if(r.push(this.cr.removeEntry(e,A,o.readTime)),i.isValidDocument()){const l=VB(this.cr.serializer,i);s=s.add(A.path.popLast());const c=df(l);n+=c-o.size,r.push(this.cr.addEntry(e,A,l))}else if(n-=o.size,this.trackRemovals){const l=VB(this.cr.serializer,i.convertToNoDocument(qe.min()));r.push(this.cr.addEntry(e,A,l))}}),s.forEach(A=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),r.push(this.cr.updateMetadata(e,n)),V.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:n.get(A).readTime})}),n))}}function nb(t){return kr(t,"remoteDocumentGlobal")}function Mi(t){return kr(t,"remoteDocumentsV14")}function Ol(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sb(t,e){const r=e.documentKey.path.toArray();return[t,cf(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ab(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let A=0;A<r.length-2&&A<n.length-2;++A)if(s=Ze(r[A],n[A]),s)return s;return s=Ze(r.length,n.length),s||(s=Ze(r[r.length-2],n[n.length-2]),s||Ze(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Ic(n.mutation,s,kn.empty(),tr.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,nt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=nt()){const s=Es();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(A=>{let i=rc();return A.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=Es();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,nt()))}populateOverlays(e,r,n){const s=[];return n.forEach(A=>{r.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,s){let A=Tn();const i=Cc(),o=function(){return Cc()}();return r.forEach((l,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof mA)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),Ic(d.mutation,c,d.mutation.getFieldMask(),tr.now())):i.set(c.key,kn.empty())}),this.recalculateAndSaveOverlays(e,A).next(l=>(l.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return o.set(c,new Sj(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,r){const n=Cc();let s=new Vt((i,o)=>i-o),A=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const c=r.get(l);if(c===null)return;let d=n.get(l)||kn.empty();d=o.applyToLocalView(c,d),n.set(l,d);const h=(s.get(o.batchId)||nt()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,d=l.value,h=b1();d.forEach(f=>{if(!A.has(f)){const p=F1(r.get(f),n.get(f));p!==null&&h.set(f,p),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return V.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-A.size):V.resolve(Es());let o=-1,l=A;return i.next(c=>V.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),A.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,l,c,nt())).next(d=>({batchId:o,changes:B1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new be(r)).next(n=>{let s=rc();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const A=r.collectionGroup;let i=rc();return this.indexManager.getCollectionParents(e,A).next(o=>V.forEach(o,l=>{const c=function(h,f){return new gA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,A,s))).next(i=>{A.forEach((l,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Gt.newInvalidDocument(d)))});let o=rc();return i.forEach((l,c)=>{const d=A.get(l);d!==void 0&&Ic(d.mutation,c,kn.empty(),tr.now()),Tu(r,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return V.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:gr(s.createTime)}}(r)),V.resolve()}getNamedQuery(e,r){return V.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:dw(s.bundledQuery),readTime:gr(s.readTime)}}(r)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.overlays=new Vt(be.comparator),this.Ir=new Map}getOverlay(e,r){return V.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Es();return V.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,A)=>{this.ht(e,r,A)}),V.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(n)),V.resolve()}getOverlaysForCollection(e,r,n){const s=Es(),A=r.length+1,i=new be(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===A&&l.largestBatchId>n&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let A=new Vt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=A.get(c.largestBatchId);d===null&&(d=Es(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Es(),l=A.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return V.resolve(o)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new lw(r,n));let A=this.Ir.get(r);A===void 0&&(A=nt(),this.Ir.set(r,A)),this.Ir.set(r,A.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.sessionToken=ar.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.Tr=new Qt(Qr.Er),this.dr=new Qt(Qr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Qr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Qr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new be(new ft([])),n=new Qr(r,e),s=new Qr(r,e+1),A=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new be(new ft([])),n=new Qr(r,e),s=new Qr(r,e+1);let A=nt();return this.dr.forEachInRange([n,s],i=>{A=A.add(i.key)}),A}containsKey(e){const r=new Qr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Qr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return be.comparator(e.key,r.key)||Ze(e.wr,r.wr)}static Ar(e,r){return Ze(e.wr,r.wr)||be.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Qt(Qr.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new aw(A,r,n,s);this.mutationQueue.push(i);for(const o of s)this.br=this.br.add(new Qr(o.key,A)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return V.resolve(i)}lookupMutationBatch(e,r){return V.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),A=s<0?0:s;return V.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Qr(r,0),s=new Qr(r,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([n,s],i=>{const o=this.Dr(i.wr);A.push(o)}),V.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Qt(Ze);return r.forEach(s=>{const A=new Qr(s,0),i=new Qr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],o=>{n=n.add(o.wr)})}),V.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let A=n;be.isDocumentKey(A)||(A=A.child(""));const i=new Qr(new be(A),0);let o=new Qt(Ze);return this.br.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.wr)),!0)},i),V.resolve(this.Cr(o))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Ge(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return V.forEach(r.mutations,s=>{const A=new Qr(s.key,r.batchId);return n=n.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Qr(r,0),s=this.br.firstAfterOrEqual(n);return V.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.Mr=e,this.docs=function(){return new Vt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),A=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return V.resolve(n?n.document.mutableCopy():Gt.newInvalidDocument(r))}getEntries(e,r){let n=Tn();return r.forEach(s=>{const A=this.docs.get(s);n=n.insert(s,A?A.document.mutableCopy():Gt.newInvalidDocument(s))}),V.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let A=Tn();const i=r.path,o=new be(i.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Zx($E(d),n)<=0||(s.has(d.key)||Tu(r,d))&&(A=A.insert(d.key,d.mutableCopy()))}return V.resolve(A)}getAllFromCollectionGroup(e,r,n,s){De()}Or(e,r){return V.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Dj(this)}getSize(e){return V.resolve(this.size)}}class Dj extends Ak{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),V.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.persistence=e,this.Nr=new pA(r=>fa(r),Eu),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gw,this.targetCount=0,this.kr=wa.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),V.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new wa(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,V.resolve()}updateTargetData(e,r){return this.Kn(r),V.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,r,n){let s=0;const A=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),V.waitFor(A).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return V.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),V.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,A=[];return s&&r.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),V.waitFor(A)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),V.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return V.resolve(n)}containsKey(e,r){return V.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new En(0),this.Kr=!1,this.Kr=!0,this.$r=new Nj,this.referenceDelegate=e(this),this.Ur=new Pj(this),this.indexManager=new bj,this.remoteDocumentCache=function(s){return new jj(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new X1(r),this.Gr=new Uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Qj,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Rj(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){ce("MemoryPersistence","Starting transaction:",e);const s=new Lj(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,r){return V.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class Lj extends qE{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Jr=new gw,this.Yr=null}static Zr(e){return new hg(e)}get Xr(){if(this.Yr)return this.Yr;throw De()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),V.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),V.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),V.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,n=>{const s=be.fromPath(n);return this.ei(e,s).next(A=>{A||r.removeEntry(s,qe.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return V.or([()=>V.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class hf{constructor(e,r){this.persistence=e,this.ti=new pA(n=>an(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=sk(this,r)}static Zr(e,r){return new hf(e,r)}zr(){}jr(e){return V.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return V.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(A=>A?V.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),A=s.newChangeBuffer();return s.Or(e,i=>this.nr(e,i,r).next(o=>{o||(n++,A.removeEntry(i,qe.min()))})).next(()=>A.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),V.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),V.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),V.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=fh(e.data.value)),r}nr(e,r,n){return V.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return V.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.serializer=e}O(e,r,n,s){const A=new sg("createOrUpgrade",r);n<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wB,{unique:!0}),l.createObjectStore("documentMutations")}(e),ib(e),function(l){l.createObjectStore("remoteDocuments")}(e));let i=V.resolve();return n<3&&s>=3&&(n!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),ib(e)),i=i.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),n<4&&s>=4&&(n!==0&&(i=i.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wB,{unique:!0});const h=c.store("mutations"),f=d.map(p=>h.put(p));return V.waitFor(f)})}(e,A))),i=i.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(i=i.next(()=>this.ni(A))),n<6&&s>=6&&(i=i.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),n<7&&s>=7&&(i=i.next(()=>this.ii(A))),n<8&&s>=8&&(i=i.next(()=>this.si(e,A))),n<9&&s>=9&&(i=i.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(i=i.next(()=>this.oi(A))),n<11&&s>=11&&(i=i.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:bR});c.createIndex("collectionPathOverlayIndex",CR,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",IR,{unique:!1})})(e)})),n<13&&s>=13&&(i=i.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:dR});c.createIndex("documentKeyIndex",hR),c.createIndex("collectionGroupIndex",fR)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),n<15&&s>=15&&(i=i.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:wR}).createIndex("sequenceNumberIndex",yR,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:vR}).createIndex("documentKeyIndex",BR,{unique:!1})}(e))),n<16&&s>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(i=i.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=df(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>V.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(o=>V.forEach(o,l=>{Ge(l.userId===A.userId);const c=$i(this.serializer,l);return ek(e,A.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return n.J((i,o)=>{const l=new ft(i),c=function(h){return[0,an(h)]}(l);A.push(r.get(c).next(d=>d?V.resolve():(h=>r.put({targetId:0,path:an(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(A))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:xR});const n=r.store("collectionParents"),s=new fw,A=i=>{if(s.add(i)){const o=i.lastSegment(),l=i.popLast();return n.put({collectionId:o,parent:an(l)})}};return r.store("remoteDocuments").J({H:!0},(i,o)=>{const l=new ft(i);return A(l.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,o,l],c)=>{const d=_s(o);return A(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const A=sc(s),i=J1(this.serializer,A);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((A,i)=>{const o=r.store("remoteDocumentsV14"),l=function(h){return h.document?new be(ft.fromString(h.document.name).popFirst(5)):h.noDocument?be.fromSegments(h.noDocument.path):h.unknownDocument?be.fromSegments(h.unknownDocument.path):De()}(i).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(o.put(c))}).next(()=>V.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=ik(this.serializer),A=new pw(hg.Zr,this.serializer.ct);return n.U().next(i=>{const o=new Map;return i.forEach(l=>{var c;let d=(c=o.get(l.userId))!==null&&c!==void 0?c:nt();$i(this.serializer,l).keys().forEach(h=>d=d.add(h)),o.set(l.userId,d)}),V.forEach(o,(l,c)=>{const d=new Rr(c),h=ug.lt(this.serializer,d),f=A.getIndexManager(d),p=dg.lt(d,this.serializer,f,A.referenceDelegate);return new ak(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new A0(r,En.oe),l).next()})})}}function ib(t){t.createObjectStore("targetDocuments",{keyPath:pR}).createIndex("documentTargetsIndex",mR,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gR,{unique:!0}),t.createObjectStore("targetGlobal")}const _p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mw{constructor(e,r,n,s,A,i,o,l,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=A,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!mw.D())throw new oe(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kj(this,s),this.Ai=r+"main",this.serializer=new X1(l),this.Ri=new Fs(this.Ai,this.hi,new Mj(this.serializer)),this.$r=new mj,this.Ur=new Ij(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ik(this.serializer),this.Gr=new pj,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(X.FAILED_PRECONDITION,_p);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new En(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(Ti(e))return ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Hl(e).get("owner").next(r=>V.resolve(this.vi(r)))}Ci(e){return Cd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=kr(r,"clientMetadata");return n.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(o=>A.indexOf(o)===-1);return V.forEach(i,o=>n.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?V.resolve(!0):Hl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new oe(X.FAILED_PRECONDITION,_p);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cd(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(A||i&&o)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&ce("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new A0(e,En.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Cd(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return dg.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cj(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ug.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){ce("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",A=function(l){return l===17?kR:l===16?ER:l===15?tw:l===14?t1:l===13?e1:l===12?_R:l===11?ZE:void De()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,o=>(i=new A0(o,this.Qr?this.Qr.next():En.oe),r==="readwrite-primary"?this.wi(i).next(l=>!!l||this.Si(i)).next(l=>{if(!l)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new oe(X.FAILED_PRECONDITION,WE);return n(i)}).next(l=>this.Di(i).next(()=>l)):this.Ki(i).next(()=>n(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return Hl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new oe(X.FAILED_PRECONDITION,_p)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hl(e).put("owner",r)}static D(){return Fs.D()}bi(e){const r=Hl(e);return r.get("owner").next(n=>this.vi(n)?(ce("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):V.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(fr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;TE()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return ce("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return fr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hl(t){return kr(t,"owner")}function Cd(t){return kr(t,"clientMetadata")}function xw(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=nt(),s=nt();for(const A of r.docChanges)switch(A.type){case 0:n=n.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new ww(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return TE()?8:XE(Er())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const A={result:null};return this.Yi(e,r).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,r,s,n).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new Oj;return this.Xi(e,r,i).next(o=>{if(A.result=o,this.zi)return this.es(e,r,i,o.size)})}).next(()=>A.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Ja()<=ht.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Ya(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Ja()<=ht.DEBUG&&ce("QueryEngine","Query:",Ya(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Ja()<=ht.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Ya(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,on(r))):V.resolve())}Yi(e,r){if(UB(r))return V.resolve(null);let n=on(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=of(r,null,"F"),n=on(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(A=>{const i=nt(...A);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.ts(r,o);return this.ns(r,c,i,l.readTime)?this.Yi(e,of(r,null,"F")):this.rs(e,c,r,l)}))})))}Zi(e,r,n,s){return UB(r)||s.isEqual(qe.min())?V.resolve(null):this.Ji.getDocuments(e,n).next(A=>{const i=this.ts(r,A);return this.ns(r,i,n,s)?V.resolve(null):(Ja()<=ht.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ya(r)),this.rs(e,i,r,zE(s,-1)).next(o=>o))})}ts(e,r){let n=new Qt(y1(e));return r.forEach((s,A)=>{Tu(e,A)&&(n=n.add(A))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const A=e.limitType==="F"?r.last():r.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,r,n){return Ja()<=ht.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Ya(r)),this.Ji.getDocumentsMatchingQuery(e,r,On.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(A=>(r.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Vt(Ze),this._s=new pA(A=>fa(A),Eu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ak(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function lk(t,e,r,n){return new Hj(t,e,r,n)}async function ck(t,e){const r=we(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(A=>(s=A,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(A=>{const i=[],o=[];let l=nt();for(const c of s){i.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of A){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function Vj(t,e){const r=we(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),A=r.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,c,d){const h=c.batch,f=h.keys();let p=V.resolve();return f.forEach(w=>{p=p.next(()=>d.getEntry(l,w)).next(B=>{const E=c.docVersions.get(w);Ge(E!==null),B.version.compareTo(E)<0&&(h.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),d.addEntry(B)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,A).next(()=>A.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=nt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function uk(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Kj(t,e){const r=we(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;o.push(r.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(A,d.addedDocuments,h)));let p=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(ar.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),s=s.insert(h,p),function(B,E,C){return B.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(f,p,d)&&o.push(r.Ur.updateTargetData(A,p))});let l=Tn(),c=nt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(A,d))}),o.push(dk(A,i,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!n.isEqual(qe.min())){const d=r.Ur.getLastRemoteSnapshotVersion(A).next(h=>r.Ur.setTargetsMetadata(A,A.currentSequenceNumber,n));o.push(d)}return V.waitFor(o).next(()=>i.apply(A)).next(()=>r.localDocuments.getLocalViewOfDocuments(A,l,c)).next(()=>l)}).then(A=>(r.os=s,A))}function dk(t,e,r){let n=nt(),s=nt();return r.forEach(A=>n=n.add(A)),e.getEntries(t,n).next(A=>{let i=Tn();return r.forEach((o,l)=>{const c=A.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(qe.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):ce("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{Ps:i,Is:s}})}function Gj(t,e){const r=we(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Wo(t,e){const r=we(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(A=>A?(s=A,V.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Xs(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function qo(t,e,r){const n=we(t),s=n.os.get(e),A=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",A,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Ti(i))throw i;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function ff(t,e,r){const n=we(t);let s=qe.min(),A=nt();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,d){const h=we(l),f=h._s.get(d);return f!==void 0?V.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,on(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,o.targetId).next(l=>{A=l})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:qe.min(),r?A:nt())).next(o=>(gk(n,w1(e),o),{documents:o,Ts:A})))}function hk(t,e){const r=we(t),n=we(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",A=>n.ot(A,e).next(i=>i?i.target:null))}function fk(t,e){const r=we(t),n=r.us.get(e)||qe.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,zE(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(gk(r,e,s),s))}function gk(t,e,r){let n=t.us.get(e)||qe.min();r.forEach((s,A)=>{A.readTime.compareTo(n)>0&&(n=A.readTime)}),t.us.set(e,n)}async function zj(t,e,r,n){const s=we(t);let A=nt(),i=Tn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),l=await Wo(s,function(d){return on(ll(ft.fromString(`__bundle__/docs/${d}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>dk(c,o,i).next(d=>(o.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>s.Ur.addMatchingKeys(c,A,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function $j(t,e,r=nt()){const n=await Wo(t,on(dw(e.bundledQuery))),s=we(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=gr(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const o=n.withResumeToken(ar.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(A,o).next(()=>s.Ur.removeMatchingKeysForTargetId(A,n.targetId)).next(()=>s.Ur.addMatchingKeys(A,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function ab(t,e){return`firestore_clients_${t}_${e}`}function ob(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Ep(t,e){return`firestore_targets_${t}_${e}`}class gf{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new oe(s.error.code,s.error.message))),i?new gf(e,r,s.state,A):(fr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _c{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,A=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return A&&n.error&&(A=typeof n.error.message=="string"&&typeof n.error.code=="string",A&&(s=new oe(n.error.code,n.error.message))),A?new _c(e,n.state,s):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pf{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,A=sw();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=JE(n.activeTargetIds[i]),A=A.add(n.activeTargetIds[i]);return s?new pf(e,A):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class yw{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new yw(r.clientId,r.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class w0{constructor(){this.activeTargetIds=sw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kp{constructor(e,r,n,s,A){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Vt(Ze),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=ab(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new w0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(ab(this.persistenceKey,n));if(s){const A=pf.Rs(n,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ep(this.persistenceKey,e));if(s){const A=_c.Rs(e,s);A&&(n=A.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ep(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ce("SharedClientState","READ",e,r),r}setItem(e,r){ce("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(ce("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(A){let i=En.oe;if(A!=null)try{const o=JSON.parse(A);Ge(typeof o=="number"),i=o}catch(o){fr("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(r.newValue);n!==En.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new gf(this.currentUser,e,r,n),A=ob(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const r=ob(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=Ep(this.persistenceKey,e),A=new _c(e,r,n);this.setItem(s,A.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return pf.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),A=n[2]!==void 0?n[2]:null;return gf.Rs(new Rr(A),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return _c.Rs(s,r)}Ls(e){return yw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(n),i=[],o=[];return A.forEach(l=>{s.has(l)||i.push(l)}),s.forEach(l=>{A.has(l)||o.push(l)}),this.syncEngine.io(i,o).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=sw();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class pk{constructor(){this.so=new w0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new w0,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id=null;function Tp(){return Id===null?Id=function(){return 268435456+Math.round(2147483648*Math.random())}():Id++,"0x"+Id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class Jj extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(r,n,s,A,i){const o=Tp(),l=this.xo(r,n.toUriEncodedString());ce("RestConnection",`Sending RPC '${r}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(r,l,c,s).then(d=>(ce("RestConnection",`Received RPC '${r}' ${o}: `,d),d),d=>{throw Mn("RestConnection",`RPC '${r}' ${o} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(r,n,s,A,i,o){return this.Mo(r,n,s,A,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((A,i)=>r[i]=A),s&&s.headers.forEach((A,i)=>r[i]=A)}xo(r,n){const s=qj[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const A=Tp();return new Promise((i,o)=>{const l=new DE;l.setWithCredentials(!0),l.listenOnce(PE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case uh.NO_ERROR:const d=l.getResponseJson();ce(en,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case uh.TIMEOUT:ce(en,`RPC '${e}' ${A} timed out`),o(new oe(X.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const h=l.getStatus();if(ce(en,`RPC '${e}' ${A} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const w=function(E){const C=E.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(C)>=0?C:X.UNKNOWN}(p.status);o(new oe(w,p.message))}else o(new oe(X.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new oe(X.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ce(en,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);ce(en,`RPC '${e}' ${A} sending request:`,s),l.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=Tp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=OE(),o=ME(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=A.join("");ce(en,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);let f=!1,p=!1;const w=new Xj({Io:E=>{p?ce(en,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(f||(ce(en,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ce(en,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},To:()=>h.close()}),B=(E,C,b)=>{E.listen(C,I=>{try{b(I)}catch(Q){setTimeout(()=>{throw Q},0)}})};return B(h,tc.EventType.OPEN,()=>{p||(ce(en,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),B(h,tc.EventType.CLOSE,()=>{p||(p=!0,ce(en,`RPC '${e}' stream ${s} transport closed`),w.So())}),B(h,tc.EventType.ERROR,E=>{p||(p=!0,Mn(en,`RPC '${e}' stream ${s} transport errored:`,E),w.So(new oe(X.UNAVAILABLE,"The operation could not be completed")))}),B(h,tc.EventType.MESSAGE,E=>{var C;if(!p){const b=E.data[0];Ge(!!b);const I=b,Q=I.error||((C=I[0])===null||C===void 0?void 0:C.error);if(Q){ce(en,`RPC '${e}' stream ${s} received error:`,Q);const N=Q.status;let S=function(v){const k=pr[v];if(k!==void 0)return N1(k)}(N),m=Q.message;S===void 0&&(S=X.INTERNAL,m="Unknown error status: "+N+" with message "+Q.message),p=!0,w.So(new oe(S,m)),h.close()}else ce(en,`RPC '${e}' stream ${s} received:`,b),w.bo(b)}}),B(o,LE.STAT_EVENT,E=>{E.stat===n0.PROXY?ce(en,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===n0.NOPROXY&&ce(en,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return typeof window<"u"?window:null}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){return new Aj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,r,n=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,r,n,s,A,i,o,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===X.RESOURCE_EXHAUSTED?(fr(r.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new oe(X.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yj extends xk{constructor(e,r,n,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=oj(this.serializer,e),n=function(A){if(!("targetChange"in A))return qe.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?qe.min():i.readTime?gr(i.readTime):qe.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=f0(this.serializer),r.addTarget=function(A,i){let o;const l=i.target;if(o=Af(l)?{documents:K1(A,l)}:{query:cg(A,l)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=P1(A,i.resumeToken);const c=d0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(qe.min())>0){o.readTime=$o(A,i.snapshotVersion.toTimestamp());const c=d0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const n=cj(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=f0(this.serializer),r.removeTarget=e,this.a_(r)}}class Zj extends xk{constructor(e,r,n,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=lj(e.writeResults,e.commitTime),n=gr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=f0(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>lu(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,h0(r,n),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new oe(X.UNKNOWN,A.toString())})}Lo(e,r,n,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,h0(r,n),s,i,o,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(X.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fr(r),this.D_=!1):ce("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,r,n,s,A){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{n.enqueueAndForget(async()=>{Si(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=we(l);c.L_.add(4),await dl(c),c.q_.set("Unknown"),c.L_.delete(4),await Nu(c)}(this))})}),this.q_=new tD(n,s)}}async function Nu(t){if(Si(t))for(const e of t.B_)await e(!0)}async function dl(t){for(const e of t.B_)await e(!1)}function fg(t,e){const r=we(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Cw(r)?bw(r):fl(r).r_()&&Bw(r,e))}function Xo(t,e){const r=we(t),n=fl(r);r.N_.delete(e),n.r_()&&wk(r,e),r.N_.size===0&&(n.r_()?n.o_():Si(r)&&r.q_.set("Unknown"))}function Bw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}fl(t).A_(e)}function wk(t,e){t.Q_.xe(e),fl(t).R_(e)}function bw(t){t.Q_=new tj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fl(t).start(),t.q_.v_()}function Cw(t){return Si(t)&&!fl(t).n_()&&t.N_.size>0}function Si(t){return we(t).L_.size===0}function yk(t){t.Q_=void 0}async function nD(t){t.q_.set("Online")}async function sD(t){t.N_.forEach((e,r)=>{Bw(t,e)})}async function AD(t,e){yk(t),Cw(t)?(t.q_.M_(e),bw(t)):t.q_.set("Unknown")}async function iD(t,e,r){if(t.q_.set("Online"),e instanceof D1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const o of A.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(n){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await mf(t,n)}else if(e instanceof mh?t.Q_.Ke(e):e instanceof j1?t.Q_.He(e):t.Q_.We(e),!r.isEqual(qe.min()))try{const n=await uk(t.localStore);r.compareTo(n)>=0&&await function(A,i){const o=A.Q_.rt(i);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,c)=>{const d=A.N_.get(l);if(!d)return;A.N_.set(l,d.withResumeToken(ar.EMPTY_BYTE_STRING,d.snapshotVersion)),wk(A,l);const h=new Xs(d.target,l,c,d.sequenceNumber);Bw(A,h)}),A.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){ce("RemoteStore","Failed to raise snapshot:",n),await mf(t,n)}}async function mf(t,e,r){if(!Ti(e))throw e;t.L_.add(1),await dl(t),t.q_.set("Offline"),r||(r=()=>uk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Nu(t)})}function vk(t,e){return e().catch(r=>mf(t,r,e))}async function hl(t){const e=we(t),r=wi(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aD(e);)try{const s=await Gj(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,oD(e,s)}catch(s){await mf(e,s)}Bk(e)&&bk(e)}function aD(t){return Si(t)&&t.O_.length<10}function oD(t,e){t.O_.push(e);const r=wi(t);r.r_()&&r.V_&&r.m_(e.mutations)}function Bk(t){return Si(t)&&!wi(t).n_()&&t.O_.length>0}function bk(t){wi(t).start()}async function lD(t){wi(t).p_()}async function cD(t){const e=wi(t);for(const r of t.O_)e.m_(r.mutations)}async function uD(t,e,r){const n=t.O_.shift(),s=ow.from(n,e,r);await vk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hl(t)}async function dD(t,e){e&&wi(t).V_&&await async function(n,s){if(function(i){return Q1(i)&&i!==X.ABORTED}(s.code)){const A=n.O_.shift();wi(n).s_(),await vk(n,()=>n.remoteSyncer.rejectFailedWrite(A.batchId,s)),await hl(n)}}(t,e),Bk(t)&&bk(t)}async function cb(t,e){const r=we(t);r.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const n=Si(r);r.L_.add(3),await dl(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Nu(r)}async function y0(t,e){const r=we(t);e?(r.L_.delete(2),await Nu(r)):e||(r.L_.add(2),await dl(r),r.q_.set("Unknown"))}function fl(t){return t.K_||(t.K_=function(r,n,s){const A=we(r);return A.w_(),new Yj(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:nD.bind(null,t),Ro:sD.bind(null,t),mo:AD.bind(null,t),d_:iD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Cw(t)?bw(t):t.q_.set("Unknown")):(await t.K_.stop(),yk(t))})),t.K_}function wi(t){return t.U_||(t.U_=function(r,n,s){const A=we(r);return A.w_(),new Zj(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:lD.bind(null,t),mo:dD.bind(null,t),f_:cD.bind(null,t),g_:uD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hl(t)):(await t.U_.stop(),t.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,r,n,s,A){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=A,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,A){const i=Date.now()+n,o=new Iw(e,r,i,s,A);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gl(t,e){if(fr("AsyncQueue",`${e}: ${t}`),Ti(t))return new oe(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.comparator=e?(r,n)=>e(r,n)||be.comparator(r.key,n.key):(r,n)=>be.comparator(r.key,n.key),this.keyedMap=rc(),this.sortedSet=new Vt(this.comparator)}static emptySet(e){return new _o(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new _o;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.W_=new Vt(be.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):De():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Jo{constructor(e,r,n,s,A,i,o,l,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,A){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Jo(e,r,_o.emptySet(r),i,n,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class fD{constructor(){this.queries=db(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=we(r),A=s.queries;s.queries=db(),A.forEach((i,o)=>{for(const l of o.j_)l.onError(n)})})(this,new oe(X.ABORTED,"Firestore shutting down"))}}function db(){return new pA(t=>x1(t),ku)}async function _w(t,e){const r=we(t);let n=3;const s=e.query;let A=r.queries.get(s);A?!A.H_()&&e.J_()&&(n=2):(A=new hD,n=e.J_()?0:1);try{switch(n){case 0:A.z_=await r.onListen(s,!0);break;case 1:A.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const o=gl(i,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,A),A.j_.push(e),e.Z_(r.onlineState),A.z_&&e.X_(A.z_)&&kw(r)}async function Ew(t,e){const r=we(t),n=e.query;let s=3;const A=r.queries.get(n);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function gD(t,e){const r=we(t);let n=!1;for(const s of e){const A=s.query,i=r.queries.get(A);if(i){for(const o of i.j_)o.X_(s)&&(n=!0);i.z_=s}}n&&kw(r)}function pD(t,e,r){const n=we(t),s=n.queries.get(e);if(s)for(const A of s.j_)A.onError(r);n.queries.delete(e)}function kw(t){t.Y_.forEach(e=>{e.next()})}var v0,hb;(hb=v0||(v0={})).ea="default",hb.Cache="cache";class Tw{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Jo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==v0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.serializer=e}Es(e){return Ss(this.serializer,e)}ds(e){return e.metadata.exists?V1(this.serializer,e.document,!1):Gt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return gr(e)}}class xD{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ck(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=ft.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new fb(this.serializer);for(const s of e)if(s.metadata.queries){const A=n.Es(s.metadata.name);for(const i of s.metadata.queries){const o=(r.get(i)||nt()).add(A);r.set(i,o)}}return r}async complete(){const e=await zj(this.localStore,new fb(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await $j(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function Ck(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.key=e}}class _k{constructor(e){this.key=e}}class Ek{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=nt(),this.mutatedKeys=nt(),this.Aa=y1(e),this.Ra=new _o(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new ub,s=r?r.Ra:this.Ra;let A=r?r.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=Tu(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),B=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;f&&p?f.data.isEqual(p.data)?w!==B&&(n.track({type:3,doc:p}),E=!0):this.ga(f,p)||(n.track({type:2,doc:p}),E=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(o=!0)):!f&&p?(n.track({type:0,doc:p}),E=!0):f&&!p&&(n.track({type:1,doc:f}),E=!0,(l||c)&&(o=!0)),E&&(p?(i=i.add(p),A=B?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:o,mutatedKeys:A}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(p,w){const B=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return B(p)-B(w)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const o=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,i.length!==0||c?{snapshot:new Jo(this.query,e.Ra,A,i,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ub,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=nt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new _k(n))}),this.da.forEach(n=>{e.has(n)||r.push(new Ik(n))}),r}ba(e){this.Ta=e.Ts,this.da=nt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Jo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wD{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class yD{constructor(e){this.key=e,this.va=!1}}class vD{constructor(e,r,n,s,A,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new pA(o=>x1(o),ku),this.Ma=new Map,this.xa=new Set,this.Oa=new Vt(be.comparator),this.Na=new Map,this.La=new gw,this.Ba={},this.ka=new Map,this.qa=wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BD(t,e,r=!0){const n=gg(t);let s;const A=n.Fa.get(e);return A?(n.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await kk(n,e,r,!0),s}async function bD(t,e){const r=gg(t);await kk(r,e,!0,!1)}async function kk(t,e,r,n){const s=await Wo(t.localStore,on(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,r);let o;return n&&(o=await Fw(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&fg(t.remoteStore,s),o}async function Fw(t,e,r,n,s){t.Ka=(h,f,p)=>async function(B,E,C,b){let I=E.view.ma(C);I.ns&&(I=await ff(B.localStore,E.query,!1).then(({documents:m})=>E.view.ma(m,I)));const Q=b&&b.targetChanges.get(E.targetId),N=b&&b.targetMismatches.get(E.targetId)!=null,S=E.view.applyChanges(I,B.isPrimaryClient,Q,N);return B0(B,E.targetId,S.wa),S.snapshot}(t,h,f,p);const A=await ff(t.localStore,e,!0),i=new Ek(e,A.Ts),o=i.ma(A.documents),l=Uu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(o,t.isPrimaryClient,l);B0(t,r,c.wa);const d=new wD(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function CD(t,e,r){const n=we(t),s=n.Fa.get(e),A=n.Ma.get(s.targetId);if(A.length>1)return n.Ma.set(s.targetId,A.filter(i=>!ku(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await qo(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Xo(n.remoteStore,s.targetId),Yo(n,s.targetId)}).catch(ki)):(Yo(n,s.targetId),await qo(n.localStore,s.targetId,!0))}async function ID(t,e){const r=we(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Xo(r.remoteStore,n.targetId))}async function _D(t,e,r){const n=Nw(t);try{const s=await function(i,o){const l=we(i),c=tr.now(),d=o.reduce((p,w)=>p.add(w.key),nt());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=Tn(),B=nt();return l.cs.getEntries(p,d).next(E=>{w=E,w.forEach((C,b)=>{b.isValidDocument()||(B=B.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,w)).next(E=>{h=E;const C=[];for(const b of o){const I=YR(b,h.get(b.key).overlayedDocument);I!=null&&C.push(new mA(b.key,I,a1(I.value.mapValue),er.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,C,o)}).next(E=>{f=E;const C=E.applyToLocalDocumentSet(h,B);return l.documentOverlayCache.saveOverlays(p,E.batchId,C)})}).then(()=>({batchId:f.batchId,changes:B1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let c=i.Ba[i.currentUser.toKey()];c||(c=new Vt(Ze)),c=c.insert(o,l),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await xA(n,s.changes),await hl(n.remoteStore)}catch(s){const A=gl(s,"Failed to persist write");r.reject(A)}}async function Tk(t,e){const r=we(t);try{const n=await Kj(r.localStore,e);e.targetChanges.forEach((s,A)=>{const i=r.Na.get(A);i&&(Ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Ge(i.va):s.removedDocuments.size>0&&(Ge(i.va),i.va=!1))}),await xA(r,n,e)}catch(n){await ki(n)}}function gb(t,e,r){const n=we(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((A,i)=>{const o=i.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=we(i);l.onlineState=o;let c=!1;l.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&kw(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ED(t,e,r){const n=we(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),A=s&&s.key;if(A){let i=new Vt(be.comparator);i=i.insert(A,Gt.newNoDocument(A,qe.min()));const o=nt().add(A),l=new Su(qe.min(),new Map,new Vt(Ze),i,o);await Tk(n,l),n.Oa=n.Oa.remove(A),n.Na.delete(e),Qw(n)}else await qo(n.localStore,e,!1).then(()=>Yo(n,e,r)).catch(ki)}async function kD(t,e){const r=we(t),n=e.batch.batchId;try{const s=await Vj(r.localStore,e);Uw(r,n,null),Sw(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await xA(r,s)}catch(s){await ki(s)}}async function TD(t,e,r){const n=we(t);try{const s=await function(i,o){const l=we(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,o).next(h=>(Ge(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(n.localStore,e);Uw(n,e,r),Sw(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await xA(n,s)}catch(s){await ki(s)}}async function FD(t,e){const r=we(t);Si(r.remoteStore)||ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const o=we(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=gl(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Sw(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function Uw(t,e,r){const n=we(t);let s=n.Ba[n.currentUser.toKey()];if(s){const A=s.get(e);A&&(r?A.reject(r):A.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Yo(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||Fk(t,n)})}function Fk(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Xo(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),Qw(t))}function B0(t,e,r){for(const n of r)n instanceof Ik?(t.La.addReference(n.key,e),SD(t,n)):n instanceof _k?(ce("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||Fk(t,n.key)):De()}function SD(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(ce("SyncEngine","New document in limbo: "+r),t.xa.add(n),Qw(t))}function Qw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new be(ft.fromString(e)),n=t.qa.next();t.Na.set(n,new yD(r)),t.Oa=t.Oa.insert(r,n),fg(t.remoteStore,new Xs(on(ll(r.path)),n,"TargetPurposeLimboResolution",En.oe))}}async function xA(t,e,r){const n=we(t),s=[],A=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((o,l)=>{i.push(n.Ka(l,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);const h=ww.Wi(l.targetId,c);A.push(h)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(l,c){const d=we(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(c,f=>V.forEach(f.$i,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>V.forEach(f.Ui,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Ti(h))throw h;ce("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.os.get(f),w=p.snapshotVersion,B=p.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(f,B)}}}(n.localStore,A))}async function UD(t,e){const r=we(t);if(!r.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const n=await ck(r.localStore,e);r.currentUser=e,function(A,i){A.ka.forEach(o=>{o.forEach(l=>{l.reject(new oe(X.CANCELLED,i))})}),A.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await xA(r,n.hs)}}function QD(t,e){const r=we(t),n=r.Na.get(e);if(n&&n.va)return nt().add(n.key);{let s=nt();const A=r.Ma.get(e);if(!A)return s;for(const i of A){const o=r.Fa.get(i);s=s.unionWith(o.view.Va)}return s}}async function ND(t,e){const r=we(t),n=await ff(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&B0(r,e.targetId,s.wa),s}async function RD(t,e){const r=we(t);return fk(r.localStore,e).then(n=>xA(r,n))}async function jD(t,e,r,n){const s=we(t),A=await function(o,l){const c=we(o),d=we(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,l).next(f=>f?c.localDocuments.getDocuments(h,f):V.resolve(null)))}(s.localStore,e);A!==null?(r==="pending"?await hl(s.remoteStore):r==="acknowledged"||r==="rejected"?(Uw(s,e,n||null),Sw(s,e),function(o,l){we(we(o).mutationQueue).On(l)}(s.localStore,e)):De(),await xA(s,A)):ce("SyncEngine","Cannot apply mutation batch with id: "+e)}async function DD(t,e){const r=we(t);if(gg(r),Nw(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await pb(r,n.toArray());r.Qa=!0,await y0(r.remoteStore,!0);for(const A of s)fg(r.remoteStore,A)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((A,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then(()=>(Yo(r,i),qo(r.localStore,i,!0))),Xo(r.remoteStore,i)}),await s,await pb(r,n),function(i){const o=we(i);o.Na.forEach((l,c)=>{Xo(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new Vt(be.comparator)}(r),r.Qa=!1,await y0(r.remoteStore,!1)}}async function pb(t,e,r){const n=we(t),s=[],A=[];for(const i of e){let o;const l=n.Ma.get(i);if(l&&l.length!==0){o=await Wo(n.localStore,on(l[0]));for(const c of l){const d=n.Fa.get(c),h=await ND(n,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await hk(n.localStore,i);o=await Wo(n.localStore,c),await Fw(n,Sk(c),i,!1,o.resumeToken)}s.push(o)}return n.Ca.d_(A),s}function Sk(t){return g1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function PD(t){return function(r){return we(we(r).persistence).Qi()}(we(t).localStore)}async function LD(t,e,r,n){const s=we(t);if(s.Qa)return void ce("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(r){case"current":case"not-current":{const i=await fk(s.localStore,w1(A[0])),o=Su.createSynthesizedRemoteEventForCurrentChange(e,r==="current",ar.EMPTY_BYTE_STRING);await xA(s,i,o);break}case"rejected":await qo(s.localStore,e,!0),Yo(s,e,n);break;default:De()}}async function MD(t,e,r){const n=gg(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){ce("SyncEngine","Adding an already active target "+s);continue}const A=await hk(n.localStore,s),i=await Wo(n.localStore,A);await Fw(n,Sk(A),i.targetId,!1,i.resumeToken),fg(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await qo(n.localStore,s,!1).then(()=>{Xo(n.remoteStore,s),Yo(n,s)}).catch(ki)}}function gg(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ED.bind(null,e),e.Ca.d_=gD.bind(null,e.eventManager),e.Ca.$a=pD.bind(null,e.eventManager),e}function Nw(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TD.bind(null,e),e}function OD(t,e,r){const n=we(t);(async function(A,i,o){try{const l=await i.getMetadata();if(await function(p,w){const B=we(p),E=gr(w.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",C=>B.Gr.getBundleMetadata(C,w.id)).then(C=>!!C&&C.createTime.compareTo(E)>=0)}(A.localStore,l))return await i.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(Ck(l));const c=new xD(l,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await xA(A,h.Ia,void 0),await function(p,w){const B=we(p);return B.persistence.runTransaction("Save bundle","readwrite",E=>B.Gr.saveBundleMetadata(E,w))}(A.localStore,l),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(l){return Mn("SyncEngine",`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class yi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return lk(this.persistence,new ok,e.initialUser,this.serializer)}Ga(e){return new pw(hg.Zr,this.serializer)}Wa(e){return new pk}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yi.provider={build:()=>new yi};class HD extends yi{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Ge(this.persistence.referenceDelegate instanceof hf);const n=this.persistence.referenceDelegate.garbageCollector;return new nk(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new pw(n=>hf.Zr(n,r),this.serializer)}}class Rw extends yi{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Nw(this.Ja.syncEngine),await hl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return lk(this.persistence,new ok,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new nk(n,e.asyncQueue,r)}Ha(e,r){const n=new lR(r,this.persistence);return new oR(e.asyncQueue,n)}Ga(e){const r=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new mw(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,mk(),xh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new pk}}class Uk extends Rw{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof kp&&(this.sharedClientState.syncEngine={no:jD.bind(null,r),ro:LD.bind(null,r),io:MD.bind(null,r),Qi:PD.bind(null,r),eo:RD.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await DD(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=mk();if(!kp.D(r))throw new oe(X.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=xw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kp(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class vi{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>gb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=UD.bind(null,this.syncEngine),await y0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fD}()}createDatastore(e){const r=Qu(e.databaseInfo.databaseId),n=function(A){return new Jj(A)}(e.databaseInfo);return function(A,i,o,l){return new eD(A,i,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,A,i,o){return new rD(n,s,A,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>gb(this.syncEngine,r,0),function(){return lb.D()?new lb:new Wj}())}createSyncEngine(e,r){return function(s,A,i,o,l,c,d){const h=new vD(s,A,i,o,l,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const A=we(s);ce("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await dl(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}vi.provider={build:()=>new vi};function mb(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Pr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new mD(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,A){const i=we(s),o={documents:A.map(h=>ou(i.serializer,h))},l=await i.Lo("BatchGetDocuments",i.serializer.databaseId,ft.emptyPath(),o,A.length),c=new Map;l.forEach(h=>{const f=aj(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());Ge(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=be.fromPath(n);this.mutations.push(new iw(s,this.precondition(s)))}),await async function(n,s){const A=we(n),i={writes:s.map(o=>lu(A.serializer,o))};await A.Mo("Commit",A.serializer.databaseId,ft.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw De();r=qe.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new oe(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(qe.min())?er.exists(!1):er.updateTime(r):er.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(qe.min()))throw new oe(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return er.updateTime(r)}return er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,r,n,s,A){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=A,this._u=n.maxAttempts,this.t_=new vw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new KD(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!_u(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!Q1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,r,n,s,A){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Rr.UNAUTHENTICATED,this.clientId=Yx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(n,async i=>{ce("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(ce("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=gl(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Fp(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await ck(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xb(t,e){t.asyncQueue.verifyOperationInProgress();const r=await jw(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>cb(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>cb(e.remoteStore,s)),t._onlineComponents=e}async function jw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===X.FAILED_PRECONDITION||s.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Mn("Error using user provided cache. Falling back to memory cache: "+r),await Fp(t,new yi)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await Fp(t,new yi);return t._offlineComponents}async function mg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await xb(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await xb(t,new vi))),t._onlineComponents}function Qk(t){return jw(t).then(e=>e.persistence)}function pl(t){return jw(t).then(e=>e.localStore)}function Nk(t){return mg(t).then(e=>e.remoteStore)}function Dw(t){return mg(t).then(e=>e.syncEngine)}function Rk(t){return mg(t).then(e=>e.datastore)}async function Zo(t){const e=await mg(t),r=e.eventManager;return r.onListen=BD.bind(null,e.syncEngine),r.onUnlisten=CD.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=ID.bind(null,e.syncEngine),r}function $D(t){return t.asyncQueue.enqueue(async()=>{const e=await Qk(t),r=await Nk(t);return e.setNetworkEnabled(!0),function(s){const A=we(s);return A.L_.delete(0),Nu(A)}(r)})}function WD(t){return t.asyncQueue.enqueue(async()=>{const e=await Qk(t),r=await Nk(t);return e.setNetworkEnabled(!1),async function(s){const A=we(s);A.L_.add(0),await dl(A),A.q_.set("Offline")}(r)})}function qD(t,e){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await function(c,d){const h=we(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new oe(X.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=gl(o,`Failed to get document '${A} from cache`);i.reject(l)}}(await pl(t),e,r)),r.promise}function jk(t,e,r={}){const n=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,l,c){const d=new pg({next:f=>{d.Za(),i.enqueueAndForget(()=>Ew(A,h));const p=f.docs.has(o);!p&&f.fromCache?c.reject(new oe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new oe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Tw(ll(o.path),d,{includeMetadataChanges:!0,_a:!0});return _w(A,h)}(await Zo(t),t.asyncQueue,e,r,n)),n.promise}function XD(t,e){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await ff(s,A,!0),l=new Ek(A,o.Ts),c=l.ma(o.documents),d=l.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const l=gl(o,`Failed to execute query '${A} against cache`);i.reject(l)}}(await pl(t),e,r)),r.promise}function Dk(t,e,r={}){const n=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,l,c){const d=new pg({next:f=>{d.Za(),i.enqueueAndForget(()=>Ew(A,h)),f.fromCache&&l.source==="server"?c.reject(new oe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Tw(o,d,{includeMetadataChanges:!0,_a:!0});return _w(A,h)}(await Zo(t),t.asyncQueue,e,r,n)),n.promise}function JD(t,e,r){const n=new Pr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await Rk(t);n.resolve(async function(i,o,l){var c;const d=we(i),{request:h,ut:f,parent:p}=G1(d.serializer,p1(o),l);d.connection.Fo||delete h.parent;const w=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,p,h,1)).filter(E=>!!E.result);Ge(w.length===1);const B=(c=w[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(B).reduce((E,C)=>(E[f[C]]=B[C],E),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function YD(t,e){const r=new pg(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){we(s).Y_.add(A),A.next()}(await Zo(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){we(s).Y_.delete(A)}(await Zo(t),r))}}function ZD(t,e,r,n){const s=function(i,o){let l;return l=typeof i=="string"?R1().encode(i):i,function(d,h){return new VD(d,h)}(function(d,h){if(d instanceof Uint8Array)return mb(d,h);if(d instanceof ArrayBuffer)return mb(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(r,Qu(e));t.asyncQueue.enqueueAndForget(async()=>{OD(await Dw(t),s,n)})}function eP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const A=we(n);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await pl(t),e))}function tP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const A=we(n),i=A.indexManager,o=[];return A.persistence.runTransaction("Configure indexes","readwrite",l=>i.getFieldIndexes(l).next(c=>function(h,f,p,w,B){h=[...h],f=[...f],h.sort(p),f.sort(p);const E=h.length,C=f.length;let b=0,I=0;for(;b<C&&I<E;){const Q=p(h[I],f[b]);Q<0?B(h[I++]):Q>0?w(f[b++]):(b++,I++)}for(;b<C;)w(f[b++]);for(;I<E;)B(h[I++])}(c,s,sR,d=>{o.push(i.addFieldIndex(l,d))},d=>{o.push(i.deleteFieldIndex(l,d))})).next(()=>V.waitFor(o)))}(await pl(t),e))}function rP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){we(n).ss.zi=s}(await pl(t),e))}function nP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=we(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",A=>s.deleteAllFieldIndexes(A))}(await pl(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e,r){if(!r)throw new oe(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Lk(t,e,r,n){if(e===!0&&n===!0)throw new oe(X.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function yb(t){if(!be.isDocumentKey(t))throw new oe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vb(t){if(be.isDocumentKey(t))throw new oe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=xg(t);throw new oe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Mk(t,e){if(e<=0)throw new oe(X.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pk((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ru{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new VE;switch(n.type){case"firstParty":return new Z4(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new oe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=wb.get(r);n&&(ce("ComponentProvider","Removing Datastore"),wb.delete(r),n.terminate())}(this),Promise.resolve()}}function Ok(t,e,r,n={}){var s;const A=(t=ot(t,Ru))._getSettings(),i=`${e}:${r}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&Mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),n.mockUserToken){let o,l;if(typeof n.mockUserToken=="string")o=n.mockUserToken,l=Rr.MOCK_USER;else{o=BN(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new oe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Rr(c)}t._authCredentials=new X4(new HE(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class cr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class fs extends Lr{constructor(e,r,n){super(e,r,ll(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new be(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function b0(t,e,...r){if(t=Mt(t),Pw("collection","path",e),t instanceof Ru){const n=ft.fromString(e,...r);return vb(n),new fs(t,null,n)}{if(!(t instanceof cr||t instanceof fs))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ft.fromString(e,...r));return vb(n),new fs(t.firestore,null,n)}}function sP(t,e){if(t=ot(t,Ru),Pw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oe(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lr(t,null,function(n){return new gA(ft.emptyPath(),n)}(e))}function bs(t,e,...r){if(t=Mt(t),arguments.length===1&&(e=Yx.newId()),Pw("doc","path",e),t instanceof Ru){const n=ft.fromString(e,...r);return yb(n),new cr(t,null,new be(n))}{if(!(t instanceof cr||t instanceof fs))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ft.fromString(e,...r));return yb(n),new cr(t.firestore,t instanceof fs?t.converter:null,new be(n))}}function AP(t,e){return t=Mt(t),e=Mt(e),(t instanceof cr||t instanceof fs)&&(e instanceof cr||e instanceof fs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Lw(t,e){return t=Mt(t),e=Mt(e),t instanceof Lr&&e instanceof Lr&&t.firestore===e.firestore&&ku(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vw(this,"async_queue_retry"),this.Vu=()=>{const n=xh();n&&ce("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=xh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=xh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ti(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(n);throw fr("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=Iw.createAndSchedule(this,e,r,n,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&De()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function C0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const A of n)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class Hk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=-1;class Nt extends Ru{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new bb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bb(e),this._firestoreClient=void 0,await e}}}function aP(t,e,r){r||(r="(default)");const n=Iu(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),A=n.getOptions(r);if(hi(A,e))return s;throw new oe(X.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new oe(X.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function Vk(t,e){const r=typeof t=="object"?t:Xx(),n=typeof t=="string"?t:e||"(default)",s=Iu(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const A=yN("firestore");A&&Ok(s,...A)}return s}function rr(t){if(t._terminated)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Kk(t),t._firestoreClient}function Kk(t){var e,r,n;const s=t._freezeSettings(),A=function(o,l,c,d){return new SR(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Pk(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new zD(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function oP(t,e){Mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return Gk(t,vi.provider,{build:n=>new Rw(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function lP(t){Mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Gk(t,vi.provider,{build:r=>new Uk(r,e.cacheSizeBytes)})}function Gk(t,e,r){if((t=ot(t,Nt))._firestoreClient||t._terminated)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new oe(X.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},Kk(t)}function cP(t){if(t._initialized&&!t._terminated)throw new oe(X.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Fs.D())return Promise.resolve();const s=n+"main";await Fs.delete(s)}(xw(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function uP(t){return function(r){const n=new Pr;return r.asyncQueue.enqueueAndForget(async()=>FD(await Dw(r),n)),n.promise}(rr(t=ot(t,Nt)))}function dP(t){return $D(rr(t=ot(t,Nt)))}function hP(t){return WD(rr(t=ot(t,Nt)))}function fP(t){return Q4(t.app,"firestore",t._databaseId.database),t._delete()}function gP(t,e){const r=rr(t=ot(t,Nt)),n=new Hk;return ZD(r,t._databaseId,e,n),n}function pP(t,e){return eP(rr(t=ot(t,Nt)),e).then(r=>r?new Lr(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class zk{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bi(ar.fromBase64String(e))}catch(r){throw new oe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Bi(ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new oe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function mP(){return new Ui("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new oe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new oe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let A=0;A<n.length;++A)if(n[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=/^__.*__$/;class wP{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new mA(e,this.data,this.fieldMask,r,this.fieldTransforms):new cl(e,this.data,r,this.fieldTransforms)}}class $k{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new mA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Wk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class yg{constructor(e,r,n,s,A,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Wk(this.Cu)&&xP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class yP{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Qu(e)}Qu(e,r,n,s=!1){return new yg({Cu:e,methodName:r,qu:n,path:zt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ea(t){const e=t._freezeSettings(),r=Qu(t._databaseId);return new yP(t._databaseId,!!e.ignoreUndefinedProperties,r)}function vg(t,e,r,n,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,r,s);zw("Data must be an object, but it was:",i,n);const o=Jk(n,i);let l,c;if(A.merge)l=new kn(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=cu(e,h,r);if(!i.contains(f))throw new oe(X.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Zk(d,f)||d.push(f)}l=new kn(d),c=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=i.fieldTransforms;return new wP(new Kr(o),l,c)}class Du extends Qi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Du}}function qk(t,e,r){return new yg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Mw extends Qi{_toFieldTransform(e){return new Fu(e.path,new Go)}isEqual(e){return e instanceof Mw}}class Ow extends Qi{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=qk(this,e,!0),n=this.Ku.map(A=>ka(A,r)),s=new ga(n);return new Fu(e.path,s)}isEqual(e){return e instanceof Ow&&hi(this.Ku,e.Ku)}}class Hw extends Qi{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=qk(this,e,!0),n=this.Ku.map(A=>ka(A,r)),s=new pa(n);return new Fu(e.path,s)}isEqual(e){return e instanceof Hw&&hi(this.Ku,e.Ku)}}class Vw extends Qi{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new zo(e.serializer,I1(e.serializer,this.$u));return new Fu(e.path,r)}isEqual(e){return e instanceof Vw&&this.$u===e.$u}}function Kw(t,e,r,n){const s=t.Qu(1,e,r);zw("Data must be an object, but it was:",s,n);const A=[],i=Kr.empty();Fi(n,(l,c)=>{const d=Bg(e,l,r);c=Mt(c);const h=s.Nu(d);if(c instanceof Du)A.push(d);else{const f=ka(c,h);f!=null&&(A.push(d),i.set(d,f))}});const o=new kn(A);return new $k(i,o,s.fieldTransforms)}function Gw(t,e,r,n,s,A){const i=t.Qu(1,e,r),o=[cu(e,n,r)],l=[s];if(A.length%2!=0)throw new oe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)o.push(cu(e,A[f])),l.push(A[f+1]);const c=[],d=Kr.empty();for(let f=o.length-1;f>=0;--f)if(!Zk(c,o[f])){const p=o[f];let w=l[f];w=Mt(w);const B=i.Nu(p);if(w instanceof Du)c.push(p);else{const E=ka(w,B);E!=null&&(c.push(p),d.set(p,E))}}const h=new kn(c);return new $k(d,h,i.fieldTransforms)}function Xk(t,e,r,n=!1){return ka(r,t.Qu(n?4:3,e))}function ka(t,e){if(Yk(t=Mt(t)))return zw("Unsupported field value:",e,t),Jk(t,e);if(t instanceof Qi)return function(n,s){if(!Wk(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const A=n._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const A=[];let i=0;for(const o of n){let l=ka(o,s.Lu(i));l==null&&(l={nullValue:"NULL_VALUE"}),A.push(l),i++}return{arrayValue:{values:A}}}(t,e)}return function(n,s){if((n=Mt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return I1(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const A=tr.fromDate(n);return{timestampValue:$o(s.serializer,A)}}if(n instanceof tr){const A=new tr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$o(s.serializer,A)}}if(n instanceof wg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Bi)return{bytesValue:P1(s.serializer,n._byteString)};if(n instanceof cr){const A=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:uw(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof ju)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return Aw(o.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${xg(n)}`)}(t,e)}function Jk(t,e){const r={};return n1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(n,s)=>{const A=ka(s,e.Mu(n));A!=null&&(r[n]=A)}),{mapValue:{fields:r}}}function Yk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tr||t instanceof wg||t instanceof Bi||t instanceof cr||t instanceof Qi||t instanceof ju)}function zw(t,e,r){if(!Yk(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=xg(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function cu(t,e,r){if((e=Mt(e))instanceof Ui)return e._internalPath;if(typeof e=="string")return Bg(t,e);throw xf("Field path arguments must be of type string or ",t,!1,void 0,r)}const vP=new RegExp("[~\\*/\\[\\]]");function Bg(t,e,r){if(e.search(vP)>=0)throw xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Ui(...e.split("."))._internalPath}catch{throw xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function xf(t,e,r,n,s){const A=n&&!n.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(A||i)&&(l+=" (found",A&&(l+=` in field ${n}`),i&&(l+=` in document ${s}`),l+=")"),new oe(X.INVALID_ARGUMENT,o+t+l)}function Zk(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,r,n,s,A){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class BP extends uu{data(){return super.data()}}function bg(t,e){return typeof e=="string"?Bg(t,e):e instanceof Ui?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $w{}class ml extends $w{}function I0(t,e,...r){let n=[];e instanceof $w&&n.push(e),n=n.concat(r),function(A){const i=A.filter(l=>l instanceof Ta).length,o=A.filter(l=>l instanceof xl).length;if(i>1||i>0&&o>0)throw new oe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class xl extends ml{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new xl(e,r,n)}_apply(e){const r=this._parse(e);return r2(e._query,r),new Lr(e.firestore,e.converter,u0(e._query,r))}_parse(e){const r=Ea(e.firestore);return function(A,i,o,l,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Ib(h,d);const p=[];for(const w of h)p.push(Cb(l,A,w));f={arrayValue:{values:p}}}else f=Cb(l,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Ib(h,d),f=Xk(o,i,h,d==="in"||d==="not-in");return gt.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function bP(t,e,r){const n=e,s=bg("where",t);return xl._create(s,n,r)}class Ta extends $w{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Ta(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Tt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,A){let i=s;const o=A.getFlattenedFilters();for(const l of o)r2(i,l),i=u0(i,l)}(e._query,r),new Lr(e.firestore,e.converter,u0(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function CP(...t){return t.forEach(e=>n2("or",e)),Ta._create("or",t)}function IP(...t){return t.forEach(e=>n2("and",e)),Ta._create("and",t)}class Cg extends ml{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Cg(e,r)}_apply(e){const r=function(s,A,i){if(s.startAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(A,i)}(e._query,this._field,this._direction);return new Lr(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new gA(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function _P(t,e="asc"){const r=e,n=bg("orderBy",t);return Cg._create(n,r)}class Pu extends ml{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Pu(e,r,n)}_apply(e){return new Lr(e.firestore,e.converter,of(e._query,this._limit,this._limitType))}}function EP(t){return Mk("limit",t),Pu._create("limit",t,"F")}function kP(t){return Mk("limitToLast",t),Pu._create("limitToLast",t,"L")}class Lu extends ml{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Lu(e,r,n)}_apply(e){const r=t2(e,this.type,this._docOrFields,this._inclusive);return new Lr(e.firestore,e.converter,function(s,A){return new gA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,r))}}function TP(...t){return Lu._create("startAt",t,!0)}function FP(...t){return Lu._create("startAfter",t,!1)}class Mu extends ml{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Mu(e,r,n)}_apply(e){const r=t2(e,this.type,this._docOrFields,this._inclusive);return new Lr(e.firestore,e.converter,function(s,A){return new gA(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,r))}}function SP(...t){return Mu._create("endBefore",t,!1)}function UP(...t){return Mu._create("endAt",t,!0)}function t2(t,e,r,n){if(r[0]=Mt(r[0]),r[0]instanceof uu)return function(A,i,o,l,c){if(!l)throw new oe(X.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of Io(A))if(h.field.isKeyField())d.push(ha(i,l.key));else{const f=l.data.field(h.field);if(Ag(f))throw new oe(X.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=h.field.canonicalString();throw new oe(X.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(f)}return new xi(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Ea(t.firestore);return function(i,o,l,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new oe(X.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let w=0;w<d.length;w++){const B=d[w];if(f[w].field.isKeyField()){if(typeof B!="string")throw new oe(X.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof B}`);if(!nw(i)&&B.indexOf("/")!==-1)throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${B}' contains a slash.`);const E=i.path.child(ft.fromString(B));if(!be.isDocumentKey(E))throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const C=new be(E);p.push(ha(o,C))}else{const E=Xk(l,c,B);p.push(E)}}return new xi(p,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function Cb(t,e,r){if(typeof(r=Mt(r))=="string"){if(r==="")throw new oe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nw(e)&&r.indexOf("/")!==-1)throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ft.fromString(r));if(!be.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ha(t,new be(n))}if(r instanceof cr)return ha(t,r._key);throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xg(r)}.`)}function Ib(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r2(t,e){const r=function(s,A){for(const i of s)for(const o of i.getFlattenedFilters())if(A.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function n2(t,e){if(!(e instanceof xl||e instanceof Ta))throw new oe(X.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Ww{convertValue(e,r="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(oA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw De()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Fi(e,(s,A)=>{n[s]=this.convertValue(A,r)}),n}convertVectorValue(e){var r,n,s;const A=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>Yt(i.doubleValue));return new ju(A)}convertGeoPoint(e){return new wg(Yt(e.latitude),Yt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=ig(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const r=aA(e);return new tr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ft.fromString(e);Ge(q1(n));const s=new gi(n.get(1),n.get(3)),A=new be(n.popFirst(5));return s.isEqual(r)||fr(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class QP extends Ww{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){return new el("sum",cu("sum",t))}function RP(t){return new el("avg",cu("average",t))}function s2(){return new el("count")}function jP(t,e){var r,n;return t instanceof el&&e instanceof el&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function DP(t,e){return Lw(t.query,e.query)&&hi(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends uu{constructor(e,r,n,s,A,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Ec extends ya{data(e={}){return super.data(e)}}class va{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new GA(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Ec(this._firestore,this._userDataWriter,n.key,n,new GA(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new oe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new Ec(s._firestore,s._userDataWriter,o.doc.key,o.doc,new GA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>A||o.type!==3).map(o=>{const l=new Ec(s._firestore,s._userDataWriter,o.doc.key,o.doc,new GA(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:PP(o.type),doc:l,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function PP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function LP(t,e){return t instanceof ya&&e instanceof ya?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof va&&e instanceof va&&t._firestore===e._firestore&&Lw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t){t=ot(t,cr);const e=ot(t.firestore,Nt);return jk(rr(e),t._key).then(r=>qw(e,t,r))}class Ni extends Ww{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,r)}}function OP(t){t=ot(t,cr);const e=ot(t.firestore,Nt),r=rr(e),n=new Ni(e);return qD(r,t._key).then(s=>new ya(e,n,t._key,s,new GA(s!==null&&s.hasLocalMutations,!0),t.converter))}function HP(t){t=ot(t,cr);const e=ot(t.firestore,Nt);return jk(rr(e),t._key,{source:"server"}).then(r=>qw(e,t,r))}function A2(t){t=ot(t,Lr);const e=ot(t.firestore,Nt),r=rr(e),n=new Ni(e);return e2(t._query),Dk(r,t._query).then(s=>new va(e,n,t,s))}function VP(t){t=ot(t,Lr);const e=ot(t.firestore,Nt),r=rr(e),n=new Ni(e);return XD(r,t._query).then(s=>new va(e,n,t,s))}function KP(t){t=ot(t,Lr);const e=ot(t.firestore,Nt),r=rr(e),n=new Ni(e);return Dk(r,t._query,{source:"server"}).then(s=>new va(e,n,t,s))}function wh(t,e,r){t=ot(t,cr);const n=ot(t.firestore,Nt),s=Ig(t.converter,e,r);return wl(n,[vg(Ea(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,er.none())])}function GP(t,e,r,...n){t=ot(t,cr);const s=ot(t.firestore,Nt),A=Ea(s);let i;return i=typeof(e=Mt(e))=="string"||e instanceof Ui?Gw(A,"updateDoc",t._key,e,r,n):Kw(A,"updateDoc",t._key,e),wl(s,[i.toMutation(t._key,er.exists(!0))])}function i2(t){return wl(ot(t.firestore,Nt),[new ul(t._key,er.none())])}function zP(t,e){const r=ot(t.firestore,Nt),n=bs(t),s=Ig(t.converter,e);return wl(r,[vg(Ea(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,er.exists(!1))]).then(()=>n)}function yh(t,...e){var r,n,s;t=Mt(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||C0(e[i])||(A=e[i],i++);const o={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(C0(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,d;if(t instanceof cr)c=ot(t.firestore,Nt),d=ll(t._key.path),l={next:h=>{e[i]&&e[i](qw(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=ot(t,Lr);c=ot(h.firestore,Nt),d=h._query;const f=new Ni(c);l={next:p=>{e[i]&&e[i](new va(c,f,h,p))},error:e[i+1],complete:e[i+2]},e2(t._query)}return function(f,p,w,B){const E=new pg(B),C=new Tw(p,E,w);return f.asyncQueue.enqueueAndForget(async()=>_w(await Zo(f),C)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>Ew(await Zo(f),C))}}(rr(c),d,o,l)}function $P(t,e){return YD(rr(t=ot(t,Nt)),C0(e)?e:{next:e})}function wl(t,e){return function(n,s){const A=new Pr;return n.asyncQueue.enqueueAndForget(async()=>_D(await Dw(n),s,A)),A.promise}(rr(t),e)}function qw(t,e,r){const n=r.docs.get(e._key),s=new Ni(t);return new ya(t,s,e._key,n,new GA(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){return a2(t,{count:s2()})}function a2(t,e){const r=ot(t.firestore,Nt),n=rr(r),s=r1(e,(A,i)=>new U1(i,A.aggregateType,A._internalFieldPath));return JD(n,t._query,s).then(A=>function(o,l,c){const d=new Ni(o);return new zk(l,d,c)}(r,t,A))}class qP{constructor(e){this.kind="memory",this._onlineComponentProvider=vi.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=yi.provider}toJSON(){return{kind:this.kind}}}class XP{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=o2(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class JP{constructor(){this.kind="memoryEager",this._offlineComponentProvider=yi.provider}toJSON(){return{kind:this.kind}}}class YP{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new HD(e)}}toJSON(){return{kind:this.kind}}}function ZP(){return new JP}function eL(t){return new YP(t==null?void 0:t.cacheSizeBytes)}function tL(t){return new qP(t)}function rL(t){return new XP(t)}class nL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=vi.provider,this._offlineComponentProvider={build:r=>new Rw(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class sL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=vi.provider,this._offlineComponentProvider={build:r=>new Uk(r,e==null?void 0:e.cacheSizeBytes)}}}function o2(t){return new nL(t==null?void 0:t.forceOwnership)}function AL(){return new sL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Ea(e)}set(e,r,n){this._verifyNotCommitted();const s=jA(e,this._firestore),A=Ig(s.converter,r,n),i=vg(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,er.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const A=jA(e,this._firestore);let i;return i=typeof(r=Mt(r))=="string"||r instanceof Ui?Gw(this._dataReader,"WriteBatch.update",A._key,r,n,s):Kw(this._dataReader,"WriteBatch.update",A._key,r),this._mutations.push(i.toMutation(A._key,er.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=jA(e,this._firestore);return this._mutations=this._mutations.concat(new ul(r._key,er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jA(t,e){if((t=Mt(t)).firestore!==e)throw new oe(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2 extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Ea(r)}get(r){const n=jA(r,this._firestore),s=new QP(this._firestore);return this._transaction.lookup([n._key]).then(A=>{if(!A||A.length!==1)return De();const i=A[0];if(i.isFoundDocument())return new uu(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new uu(this._firestore,s,n._key,null,n.converter);throw De()})}set(r,n,s){const A=jA(r,this._firestore),i=Ig(A.converter,n,s),o=vg(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,o),this}update(r,n,s,...A){const i=jA(r,this._firestore);let o;return o=typeof(n=Mt(n))=="string"||n instanceof Ui?Gw(this._dataReader,"Transaction.update",i._key,n,s,A):Kw(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(r){const n=jA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=jA(e,this._firestore),n=new Ni(this._firestore);return super.get(e).then(s=>new ya(this._firestore,n,r._key,s._document,new GA(!1,!1),r.converter))}}function aL(t,e,r){t=ot(t,Nt);const n=Object.assign(Object.assign({},iL),r);return function(A){if(A.maxAttempts<1)throw new oe(X.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(A,i,o){const l=new Pr;return A.asyncQueue.enqueueAndForget(async()=>{const c=await Rk(A);new GD(A.asyncQueue,c,o,i,l).au()}),l.promise}(rr(t),s=>e(new c2(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(){return new Du("deleteField")}function lL(){return new Mw("serverTimestamp")}function cL(...t){return new Ow("arrayUnion",t)}function uL(...t){return new Hw("arrayRemove",t)}function dL(t){return new Vw("increment",t)}function hL(t){return new ju(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){return rr(t=ot(t,Nt)),new l2(t,e=>wl(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t,e){const r=rr(t=ot(t,Nt));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return Mn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(A){const i=typeof A=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new oe(X.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(A):A,o=[];if(Array.isArray(i.indexes))for(const l of i.indexes){const c=_b(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const f=Bg("setIndexConfiguration",_b(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new sa(f,2)):h.order==="ASCENDING"?d.push(new sa(f,0)):h.order==="DESCENDING"&&d.push(new sa(f,1))}o.push(new Oo(Oo.UNKNOWN_ID,c,d,Ho.empty()))}return o}(e);return tP(r,n)}function _b(t,e){if(typeof t[e]!="string")throw new oe(X.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function gL(t){var e;t=ot(t,Nt);const r=Eb.get(t);if(r)return r;if(((e=rr(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new d2(t);return Eb.set(t,n),n}function pL(t){h2(t,!0)}function mL(t){h2(t,!1)}function xL(t){nP(rr(t._firestore)).then(e=>ce("deleting all persistent cache indexes succeeded")).catch(e=>Mn("deleting all persistent cache indexes failed",e))}function h2(t,e){rP(rr(t._firestore),e).then(r=>ce(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>Mn(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const Eb=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){var e;const r=(e=rr(ot(t.firestore,Nt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:cg(r,on(t._query))._t}function yL(t,e){var r;const n=r1(e,(A,i)=>new U1(i,A.aggregateType,A._internalFieldPath)),s=(r=rr(ot(t.firestore,Nt))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:G1(s,p1(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Xw.instance.onExistenceFilterMismatch(e)}}class Xw{constructor(){this.Uu=new Map}static get instance(){return _d||(_d=new Xw,function(r){if(lf)throw new Error("a TestingHooksSpi instance is already set");lf=r}(_d)),_d}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let _d=null;(function(e,r=!0){(function(s){ol=s})(al),Lo(new da("firestore",(n,{instanceIdentifier:s,options:A})=>{const i=n.getProvider("app").getImmediate(),o=new Nt(new J4(n.getProvider("auth-internal")),new eR(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gi(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:r},A),o._setSettings(A),o},"PUBLIC").setMultipleInstances(!0)),ii(pB,"4.7.3",e),ii(pB,"4.7.3","esm2017")})();const BL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Ww,AggregateField:el,AggregateQuerySnapshot:zk,Bytes:Bi,CACHE_SIZE_UNLIMITED:iP,CollectionReference:fs,DocumentReference:cr,DocumentSnapshot:ya,FieldPath:Ui,FieldValue:Qi,Firestore:Nt,FirestoreError:oe,GeoPoint:wg,LoadBundleTask:Hk,PersistentCacheIndexManager:d2,Query:Lr,QueryCompositeFilterConstraint:Ta,QueryConstraint:ml,QueryDocumentSnapshot:Ec,QueryEndAtConstraint:Mu,QueryFieldFilterConstraint:xl,QueryLimitConstraint:Pu,QueryOrderByConstraint:Cg,QuerySnapshot:va,QueryStartAtConstraint:Lu,SnapshotMetadata:GA,Timestamp:tr,Transaction:c2,VectorValue:ju,WriteBatch:l2,_AutoId:Yx,_ByteString:ar,_DatabaseId:gi,_DocumentKey:be,_EmptyAppCheckTokenProvider:tR,_EmptyAuthCredentialsProvider:VE,_FieldPath:zt,_TestingHooks:vL,_cast:ot,_debugAssert:q4,_internalAggregationQueryToProtoRunAggregationQueryRequest:yL,_internalQueryToProtoQueryTarget:wL,_isBase64Available:TR,_logWarn:Mn,_validateIsNotUsedTogether:Lk,addDoc:zP,aggregateFieldEqual:jP,aggregateQuerySnapshotEqual:DP,and:IP,arrayRemove:uL,arrayUnion:cL,average:RP,clearIndexedDbPersistence:cP,collection:b0,collectionGroup:sP,connectFirestoreEmulator:Ok,count:s2,deleteAllPersistentCacheIndexes:xL,deleteDoc:i2,deleteField:oL,disableNetwork:hP,disablePersistentCacheIndexAutoCreation:mL,doc:bs,documentId:mP,enableIndexedDbPersistence:oP,enableMultiTabIndexedDbPersistence:lP,enableNetwork:dP,enablePersistentCacheIndexAutoCreation:pL,endAt:UP,endBefore:SP,ensureFirestoreConfigured:rr,executeWrite:wl,getAggregateFromServer:a2,getCountFromServer:WP,getDoc:MP,getDocFromCache:OP,getDocFromServer:HP,getDocs:A2,getDocsFromCache:VP,getDocsFromServer:KP,getFirestore:Vk,getPersistentCacheIndexManager:gL,increment:dL,initializeFirestore:aP,limit:EP,limitToLast:kP,loadBundle:gP,memoryEagerGarbageCollector:ZP,memoryLocalCache:tL,memoryLruGarbageCollector:eL,namedQuery:pP,onSnapshot:yh,onSnapshotsInSync:$P,or:CP,orderBy:_P,persistentLocalCache:rL,persistentMultipleTabManager:AL,persistentSingleTabManager:o2,query:I0,queryEqual:Lw,refEqual:AP,runTransaction:aL,serverTimestamp:lL,setDoc:wh,setIndexConfiguration:fL,setLogLevel:W4,snapshotEqual:LP,startAfter:FP,startAt:TP,sum:NP,terminate:fP,updateDoc:GP,vector:hL,waitForPendingWrites:uP,where:bP,writeBatch:u2},Symbol.toStringTag,{value:"Module"}));function Jw(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function f2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bL=f2,g2=new bu("auth","Firebase",f2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Wx("@firebase/auth");function CL(t,...e){wf.logLevel<=ht.WARN&&wf.warn(`Auth (${al}): ${t}`,...e)}function vh(t,...e){wf.logLevel<=ht.ERROR&&wf.error(`Auth (${al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,...e){throw Yw(t,...e)}function Us(t,...e){return Yw(t,...e)}function p2(t,e,r){const n=Object.assign(Object.assign({},bL()),{[e]:r});return new bu("auth","Firebase",n).create(e,{appName:t.name})}function ai(t){return p2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yw(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return g2.create(t,...e)}function Je(t,e,...r){if(!t)throw Yw(e,...r)}function Js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vh(e),new Error(e)}function lA(t,e){t||Js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IL(){return kb()==="http:"||kb()==="https:"}function kb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IL()||_N()||"connection"in navigator)?navigator.onLine:!0}function EL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,r){this.shortDelay=e,this.longDelay=r,lA(r>e,"Short delay should be less than long delay!"),this.isMobile=bN()||EN()}get(){return _L()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){lA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Ou(3e4,6e4);function Fa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ri(t,e,r,n,s={}){return x2(t,s,async()=>{let A={},i={};n&&(e==="GET"?i=n:A={body:JSON.stringify(n)});const o=Cu(Object.assign({key:t.config.apiKey},i)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},A);return IN()||(c.referrerPolicy="no-referrer"),m2.fetch()(w2(t,t.config.apiHost,r,o),c)})}async function x2(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},kL),e);try{const s=new SL(t),A=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw Ed(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const o=A.ok?i.errorMessage:i.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw Ed(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw Ed(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw p2(t,d,c);ps(t,d)}}catch(s){if(s instanceof fA)throw s;ps(t,"network-request-failed",{message:String(s)})}}async function _g(t,e,r,n,s={}){const A=await Ri(t,e,r,n,s);return"mfaPendingCredential"in A&&ps(t,"multi-factor-auth-required",{_serverResponse:A}),A}function w2(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Zw(t.config,s):`${t.config.apiScheme}://${s}`}function FL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Us(this.auth,"network-request-failed")),TL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ed(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Us(t,e,n);return s.customData._tokenResponse=r,s}function Tb(t){return t!==void 0&&t.enterprise!==void 0}class UL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return FL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function QL(t,e){return Ri(t,"GET","/v2/recaptchaConfig",Fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e){return Ri(t,"POST","/v1/accounts:delete",e)}async function y2(t,e){return Ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RL(t,e=!1){const r=Mt(t),n=await r.getIdToken(e),s=ey(n);Je(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:n,authTime:kc(Sp(s.auth_time)),issuedAtTime:kc(Sp(s.iat)),expirationTime:kc(Sp(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function Sp(t){return Number(t)*1e3}function ey(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const s=IE(r);return s?JSON.parse(s):(vh("Failed to decode base64 JWT payload"),null)}catch(s){return vh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Fb(t){const e=ey(t);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof fA&&jL(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function jL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(t){var e;const r=t.auth,n=await t.getIdToken(),s=await du(t,y2(r,{idToken:n}));Je(s==null?void 0:s.users.length,r,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?v2(A.providerUserInfo):[],o=LL(t.providerData,i),l=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:o,metadata:new E0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function PL(t){const e=Mt(t);await yf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LL(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function v2(t){return t.map(e=>{var{providerId:r}=e,n=Jw(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t,e){const r=await x2(t,{},async()=>{const n=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=w2(t,s,"/v1/token",`key=${A}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",m2.fetch()(i,{method:"POST",headers:o,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function OL(t,e){return Ri(t,"POST","/v2/accounts:revokeToken",Fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const r=Fb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:A}=await ML(e,r);this.updateTokensAndExpiration(n,s,Number(A))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:A}=r,i=new Eo;return n&&(Je(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(Je(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(Je(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t,e){Je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ys{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,A=Jw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new E0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const r=await du(this,this.stsTokenManager.getToken(this.auth,e));return Je(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return RL(this,e)}reload(){return PL(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await yf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qs(this.auth.app))return Promise.reject(ai(this.auth));const e=await this.getIdToken();return await du(this,NL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,A,i,o,l,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,p=(A=r.phoneNumber)!==null&&A!==void 0?A:void 0,w=(i=r.photoURL)!==null&&i!==void 0?i:void 0,B=(o=r.tenantId)!==null&&o!==void 0?o:void 0,E=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,C=(c=r.createdAt)!==null&&c!==void 0?c:void 0,b=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:Q,isAnonymous:N,providerData:S,stsTokenManager:m}=r;Je(I&&m,e,"internal-error");const y=Eo.fromJSON(this.name,m);Je(typeof I=="string",e,"internal-error"),IA(h,e.name),IA(f,e.name),Je(typeof Q=="boolean",e,"internal-error"),Je(typeof N=="boolean",e,"internal-error"),IA(p,e.name),IA(w,e.name),IA(B,e.name),IA(E,e.name),IA(C,e.name),IA(b,e.name);const v=new Ys({uid:I,auth:e,email:f,emailVerified:Q,displayName:h,isAnonymous:N,photoURL:w,phoneNumber:p,tenantId:B,stsTokenManager:y,createdAt:C,lastLoginAt:b});return S&&Array.isArray(S)&&(v.providerData=S.map(k=>Object.assign({},k))),E&&(v._redirectEventId=E),v}static async _fromIdTokenResponse(e,r,n=!1){const s=new Eo;s.updateFromServerResponse(r);const A=new Ys({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await yf(A),A}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Je(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?v2(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),o=new Eo;o.updateFromIdToken(n);const l=new Ys({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new E0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Map;function Zs(t){lA(t instanceof Function,"Expected a class definition");let e=Sb.get(t);return e?(lA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}B2.type="NONE";const Ub=B2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t,e,r){return`firebase:${t}:${e}:${r}`}class ko{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:A}=this.auth;this.fullUserKey=Bh(this.userKey,s.apiKey,A),this.fullPersistenceKey=Bh("persistence",s.apiKey,A),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new ko(Zs(Ub),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||Zs(Ub);const i=Bh(n,e.config.apiKey,e.name);let o=null;for(const c of r)try{const d=await c._get(i);if(d){const h=Ys._fromJSON(e,d);c!==A&&(o=h),A=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!l.length?new ko(A,e,n):(A=l[0],o&&await A._set(i,o.toJSON()),await Promise.all(r.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new ko(A,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k2(e))return"Blackberry";if(T2(e))return"Webos";if(C2(e))return"Safari";if((e.includes("chrome/")||I2(e))&&!e.includes("edge/"))return"Chrome";if(E2(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function b2(t=Er()){return/firefox\//i.test(t)}function C2(t=Er()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I2(t=Er()){return/crios\//i.test(t)}function _2(t=Er()){return/iemobile/i.test(t)}function E2(t=Er()){return/android/i.test(t)}function k2(t=Er()){return/blackberry/i.test(t)}function T2(t=Er()){return/webos/i.test(t)}function ty(t=Er()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HL(t=Er()){var e;return ty(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VL(){return kN()&&document.documentMode===10}function F2(t=Er()){return ty(t)||E2(t)||T2(t)||k2(t)||/windows phone/i.test(t)||_2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e=[]){let r;switch(t){case"Browser":r=Qb(Er());break;case"Worker":r=`${Qb(Er())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${al}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=A=>new Promise((i,o)=>{try{const l=e(A);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e={}){return Ri(t,"GET","/v2/passwordPolicy",Fa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=6;class $L{constructor(e){var r,n,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:zL,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,A,i,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(A=l.containsUppercaseLetter)!==null&&A!==void 0?A:!0),l.isValid&&(l.isValid=(i=l.containsNumericCharacter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nb(this),this.idTokenSubscription=new Nb(this),this.beforeStateQueue=new KL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Zs(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await y2(this,{idToken:e}),n=await Ys._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(qs(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(s=l.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await yf(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qs(this.app))return Promise.reject(ai(this));const r=e?Mt(e):null;return r&&Je(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qs(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qs(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GL(this),r=new $L(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await OL(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Zs(e)||this._popupRedirectResolver;Je(r,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[Zs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const A=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(o,this,"internal-error"),o.then(()=>{i||A(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&CL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function yl(t){return Mt(t)}class Nb{constructor(e){this.auth=e,this.observer=null,this.addObserver=NN(r=>this.observer=r)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qL(t){Eg=t}function U2(t){return Eg.loadJS(t)}function XL(){return Eg.recaptchaEnterpriseScript}function JL(){return Eg.gapiScript}function YL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZL="recaptcha-enterprise",eM="NO_RECAPTCHA";class tM{constructor(e){this.type=ZL,this.auth=yl(e)}async verify(e="verify",r=!1){async function n(A){if(!r){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,o)=>{QL(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new UL(l);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(l=>{o(l)})})}function s(A,i,o){const l=window.grecaptcha;Tb(l)?l.enterprise.ready(()=>{l.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(eM)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{n(this.auth).then(o=>{if(!r&&Tb(window.grecaptcha))s(o,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XL();l.length!==0&&(l+=o),U2(l).then(()=>{s(o,A,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function Rb(t,e,r,n=!1){const s=new tM(t);let A;try{A=await s.verify(r)}catch{A=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function jb(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await Rb(t,e,r,r==="getOobCode");return n(t,A)}else return n(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Rb(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(A)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t,e){const r=Iu(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),A=r.getOptions();if(hi(A,e??{}))return s;ps(s,"already-initialized")}return r.initialize({options:e})}function nM(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Zs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function sM(t,e,r){const n=yl(t);Je(n._canInitEmulator,n,"emulator-config-failed"),Je(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,A=Q2(e),{host:i,port:o}=AM(e),l=o===null?"":`:${o}`;n.config.emulator={url:`${A}//${i}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:o,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),iM()}function Q2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function AM(t){const e=Q2(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const A=s[1];return{host:A,port:Db(n.substr(A.length+1))}}else{const[A,i]=n.split(":");return{host:A,port:Db(i)}}}function Db(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iM(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Js("not implemented")}_getIdTokenResponse(e){return Js("not implemented")}_linkToIdToken(e,r){return Js("not implemented")}_getReauthenticationResolver(e){return Js("not implemented")}}async function aM(t,e){return Ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return _g(t,"POST","/v1/accounts:signInWithPassword",Fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){return _g(t,"POST","/v1/accounts:signInWithEmailLink",Fa(t,e))}async function cM(t,e){return _g(t,"POST","/v1/accounts:signInWithEmailLink",Fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends ry{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new hu(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new hu(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,r,"signInWithPassword",oM);case"emailLink":return lM(e,{email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jb(e,n,"signUpPassword",aM);case"emailLink":return cM(e,{idToken:r,email:this._email,oobCode:this._password});default:ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e){return _g(t,"POST","/v1/accounts:signInWithIdp",Fa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM="http://localhost";class Ba extends ry{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ps("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,A=Jw(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new Ba(n,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return To(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,To(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,To(e,r)}buildRequest(){const e={requestUri:uM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Cu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hM(t){const e=Zl(ec(t)).link,r=e?Zl(ec(e)).deep_link_id:null,n=Zl(ec(t)).deep_link_id;return(n?Zl(ec(n)).link:null)||n||r||e||t}class ny{constructor(e){var r,n,s,A,i,o;const l=Zl(ec(e)),c=(r=l.apiKey)!==null&&r!==void 0?r:null,d=(n=l.oobCode)!==null&&n!==void 0?n:null,h=dM((s=l.mode)!==null&&s!==void 0?s:null);Je(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=l.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=l.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const r=hM(e);try{return new ny(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.providerId=vl.PROVIDER_ID}static credential(e,r){return hu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=ny.parseLink(r);return Je(n,"argument-error"),hu._fromEmailAndCode(e,n.code,n.tenantId)}}vl.PROVIDER_ID="password";vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends N2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends Hu{constructor(){super("facebook.com")}static credential(e){return Ba._fromParams({providerId:DA.PROVIDER_ID,signInMethod:DA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return DA.credentialFromTaggedObject(e)}static credentialFromError(e){return DA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return DA.credential(e.oauthAccessToken)}catch{return null}}}DA.FACEBOOK_SIGN_IN_METHOD="facebook.com";DA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ba._fromParams({providerId:PA.PROVIDER_ID,signInMethod:PA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return PA.credentialFromTaggedObject(e)}static credentialFromError(e){return PA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return PA.credential(r,n)}catch{return null}}}PA.GOOGLE_SIGN_IN_METHOD="google.com";PA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Hu{constructor(){super("github.com")}static credential(e){return Ba._fromParams({providerId:LA.PROVIDER_ID,signInMethod:LA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return LA.credentialFromTaggedObject(e)}static credentialFromError(e){return LA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return LA.credential(e.oauthAccessToken)}catch{return null}}}LA.GITHUB_SIGN_IN_METHOD="github.com";LA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends Hu{constructor(){super("twitter.com")}static credential(e,r){return Ba._fromParams({providerId:MA.PROVIDER_ID,signInMethod:MA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return MA.credentialFromTaggedObject(e)}static credentialFromError(e){return MA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return MA.credential(r,n)}catch{return null}}}MA.TWITTER_SIGN_IN_METHOD="twitter.com";MA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const A=await Ys._fromIdTokenResponse(e,n,s),i=Pb(n);return new tl({user:A,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Pb(n);return new tl({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Pb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends fA{constructor(e,r,n,s){var A;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new vf(e,r,n,s)}}function R2(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(t,A,e,n):A})}async function fM(t,e,r=!1){const n=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return tl._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e,r=!1){const{auth:n}=t;if(qs(n.app))return Promise.reject(ai(n));const s="reauthenticate";try{const A=await du(t,R2(n,s,e,t),r);Je(A.idToken,n,"internal-error");const i=ey(A.idToken);Je(i,n,"internal-error");const{sub:o}=i;return Je(t.uid===o,n,"user-mismatch"),tl._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&ps(n,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e,r=!1){if(qs(t.app))return Promise.reject(ai(t));const n="signIn",s=await R2(t,n,e),A=await tl._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(A.user),A}async function pM(t,e){return j2(yl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t){const e=yl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function xM(t,e,r){return qs(t.app)?Promise.reject(ai(t)):pM(Mt(t),vl.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&mM(t),n})}function wM(t,e,r,n){return Mt(t).onIdTokenChanged(e,r,n)}function yM(t,e,r){return Mt(t).beforeAuthStateChanged(e,r)}function vM(t,e,r,n){return Mt(t).onAuthStateChanged(e,r,n)}function BM(t){return Mt(t).signOut()}const Bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Bf,"1"),this.storage.removeItem(Bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=1e3,CM=10;class P2 extends D2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},A=this.storage.getItem(n);VL()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,CM):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},bM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}P2.type="LOCAL";const IM=P2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2 extends D2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}L2.type="SESSION";const M2=L2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new kg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:A}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(i).map(async c=>c(r.origin,A)),l=await _M(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((o,l)=>{const c=sy("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),o(f.data.response);break;default:clearTimeout(d),clearTimeout(A),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(){return window}function kM(t){Qs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(){return typeof Qs().WorkerGlobalScope<"u"&&typeof Qs().importScripts=="function"}async function TM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SM(){return O2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="firebaseLocalStorageDb",UM=1,bf="firebaseLocalStorage",V2="fbase_key";class Vu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Tg(t,e){return t.transaction([bf],e?"readwrite":"readonly").objectStore(bf)}function QM(){const t=indexedDB.deleteDatabase(H2);return new Vu(t).toPromise()}function k0(){const t=indexedDB.open(H2,UM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(bf,{keyPath:V2})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(bf)?e(n):(n.close(),await QM(),e(await k0()))})})}async function Lb(t,e,r){const n=Tg(t,!0).put({[V2]:e,value:r});return new Vu(n).toPromise()}async function NM(t,e){const r=Tg(t,!1).get(e),n=await new Vu(r).toPromise();return n===void 0?null:n.value}function Mb(t,e){const r=Tg(t,!0).delete(e);return new Vu(r).toPromise()}const RM=800,jM=3;class K2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await k0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>jM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kg._getInstance(SM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await TM(),!this.activeServiceWorker)return;this.sender=new EM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await k0();return await Lb(e,Bf,"1"),await Mb(e,Bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lb(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>NM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=Tg(s,!1).getAll();return new Vu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}K2.type="LOCAL";const DM=K2;new Ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t,e){return e?Zs(e):(Je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay extends ry{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,r){return To(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function LM(t){return j2(t.auth,new Ay(t),t.bypassAuthState)}function MM(t){const{auth:e,user:r}=t;return Je(r,e,"internal-error"),gM(r,new Ay(t),t.bypassAuthState)}async function OM(t){const{auth:e,user:r}=t;return Je(r,e,"internal-error"),fM(r,new Ay(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,r,n,s,A=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:A,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LM;case"linkViaPopup":case"linkViaRedirect":return OM;case"reauthViaPopup":case"reauthViaRedirect":return MM;default:ps(this.auth,"internal-error")}}resolve(e){lA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=new Ou(2e3,1e4);class po extends G2{constructor(e,r,n,s,A){super(e,r,s,A),this.provider=n,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){lA(this.filter.length===1,"Popup operations only handle one event");const e=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HM.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="pendingRedirect",bh=new Map;class KM extends G2{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const n=await GM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GM(t,e){const r=WM(e),n=$M(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function zM(t,e){bh.set(t._key(),e)}function $M(t){return Zs(t._redirectPersistence)}function WM(t){return Bh(VM,t.config.apiKey,t.name)}async function qM(t,e,r=!1){if(qs(t.app))return Promise.reject(ai(t));const n=yl(t),s=PM(n,e),i=await new KM(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=10*60*1e3;class JM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!z2(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Us(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ob(e))}saveEventToCache(e){this.cachedEventUids.add(Ob(e)),this.lastProcessedEventTime=Date.now()}}function Ob(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function z2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(t,e={}){return Ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tO=/^https?/;async function rO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZM(t);for(const r of e)try{if(nO(r))return}catch{}ps(t,"unauthorized-domain")}function nO(t){const e=_0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!tO.test(r))return!1;if(eO.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO=new Ou(3e4,6e4);function Hb(){const t=Qs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function AO(t){return new Promise((e,r)=>{var n,s,A;function i(){Hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hb(),r(Us(t,"network-request-failed"))},timeout:sO.get()})}if(!((s=(n=Qs().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=Qs().gapi)===null||A===void 0)&&A.load)i();else{const o=YL("iframefcb");return Qs()[o]=()=>{gapi.load?i():r(Us(t,"network-request-failed"))},U2(`${JL()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Ch=null,e})}let Ch=null;function iO(t){return Ch=Ch||AO(t),Ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=new Ou(5e3,15e3),oO="__/auth/iframe",lO="emulator/auth/iframe",cO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dO(t){const e=t.config;Je(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Zw(e,lO):`https://${t.config.authDomain}/${oO}`,n={apiKey:e.apiKey,appName:t.name,v:al},s=uO.get(t.config.apiHost);s&&(n.eid=s);const A=t._getFrameworks();return A.length&&(n.fw=A.join(",")),`${r}?${Cu(n).slice(1)}`}async function hO(t){const e=await iO(t),r=Qs().gapi;return Je(r,t,"internal-error"),e.open({where:document.body,url:dO(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cO,dontclear:!0},n=>new Promise(async(s,A)=>{await n.restyle({setHideOnLeave:!1});const i=Us(t,"network-request-failed"),o=Qs().setTimeout(()=>{A(i)},aO.get());function l(){Qs().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gO=500,pO=600,mO="_blank",xO="http://localhost";class Vb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wO(t,e,r,n=gO,s=pO){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l=Object.assign(Object.assign({},fO),{width:n.toString(),height:s.toString(),top:A,left:i}),c=Er().toLowerCase();r&&(o=I2(c)?mO:r),b2(c)&&(e=e||xO,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[p,w])=>`${f}${p}=${w},`,"");if(HL(c)&&o!=="_self")return yO(e||"",o),new Vb(null);const h=window.open(e||"",o,d);Je(h,t,"popup-blocked");try{h.focus()}catch{}return new Vb(h)}function yO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="__/auth/handler",BO="emulator/auth/handler",bO=encodeURIComponent("fac");async function Kb(t,e,r,n,s,A){Je(t.config.authDomain,t,"auth-domain-config-required"),Je(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:al,eventId:s};if(e instanceof N2){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",QN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Hu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),c=l?`#${bO}=${encodeURIComponent(l)}`:"";return`${CO(t)}?${Cu(o).slice(1)}${c}`}function CO({config:t}){return t.emulator?Zw(t,BO):`https://${t.authDomain}/${vO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="webStorageSupport";class IO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M2,this._completeRedirectFn=qM,this._overrideRedirectResult=zM}async _openPopup(e,r,n,s){var A;lA((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await Kb(e,r,n,_0(),s);return wO(e,i,sy())}async _openRedirect(e,r,n,s){await this._originValidation(e);const A=await Kb(e,r,n,_0(),s);return kM(A),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:A}=this.eventManagers[r];return s?Promise.resolve(s):(lA(A,"If manager is not set, promise should be"),A)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await hO(e),n=new JM(e);return r.register("authEvent",s=>(Je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Up,{type:Up},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[Up];i!==void 0&&r(!!i),ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=rO(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return F2()||C2()||ty()}}const _O=IO;var Gb="@firebase/auth",zb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TO(t){Lo(new da("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Je(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S2(t)},c=new WL(n,s,A,l);return nM(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Lo(new da("auth-internal",e=>{const r=yl(e.getProvider("auth").getImmediate());return(n=>new EO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ii(Gb,zb,kO(t)),ii(Gb,zb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=5*60,SO=kE("authIdTokenMaxAge")||FO;let $b=null;const UO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>SO)return;const s=r==null?void 0:r.token;$b!==s&&($b=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function QO(t=Xx()){const e=Iu(t,"auth");if(e.isInitialized())return e.getImmediate();const r=rM(t,{popupRedirectResolver:_O,persistence:[DM,IM,M2]}),n=kE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const A=new URL(n,location.origin);if(location.origin===A.origin){const i=UO(A.toString());yM(r,i,()=>i(r.currentUser)),wM(r,o=>i(o))}}const s=_E("auth");return s&&sM(r,`http://${s}`),r}function NO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qL({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const A=Us("internal-error");A.customData=s,r(A)},n.type="text/javascript",n.charset="UTF-8",NO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TO("Browser");const RO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",jO="zameny-b6c3f.firebaseapp.com",DO="zameny-b6c3f",PO="zameny-b6c3f.firebasestorage.app",LO="323355347910",MO="1:323355347910:web:c81f2813dce5ee9373c0c7",$2={apiKey:RO,authDomain:jO,projectId:DO,storageBucket:PO,messagingSenderId:LO,appId:MO};let Cf;j4().length?Cf=Xx():Cf=QE($2);const Sr=Vk(Cf),Xn=QO(Cf);$2.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Lt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule",NUTRITION:"nutrition_records"},Ka=new Map,OO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},mo=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>mo(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=mo(n);s!==void 0&&(e[r]=s)}return e}return t},W2=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!W2(t[s],e[s]))return!1;return!0}return!1};async function HO(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const br={syncCollection:async(t,e)=>{if(!Sr)return;let r=Ka.get(t);r||(r=new Map,Ka.set(t,r));const n=new Map;e.forEach(A=>{A&&A.id&&n.set(A.id,mo(A))});const s=[];if(r.forEach((A,i)=>{n.has(i)||s.push({type:"delete",id:i})}),n.forEach((A,i)=>{const o=r.get(i);(!o||!W2(o,A))&&s.push({type:o?"update":"create",item:A,id:i})}),s.length!==0)try{const A=OO(s,450);for(const i of A){const o=u2(Sr);i.forEach(l=>{const c=bs(Sr,t,l.id);l.type==="delete"?(o.delete(c),r.delete(l.id)):(o.set(c,l.item,{merge:!0}),r.set(l.id,l.item))}),await o.commit()}}catch(A){throw console.error(`Failed to sync ${t}:`,A),A}},syncCacheWithDatabase:async t=>{if(Sr){if(Ka.has(t)&&Ka.get(t).size>0){console.log(`Cache already exists for ${t}, skipping sync`);return}try{const e=I0(b0(Sr,t)),r=await HO(async()=>await A2(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),Ka.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)}catch(e){console.error(`Failed to sync cache for ${t}:`,e)}}},save:async(t,e)=>{if(!Sr||!(e||(Xn==null?void 0:Xn.currentUser)))return;const n=[];t.teachers&&n.push(br.syncCollection(Lt.TEACHERS,t.teachers)),t.subjects&&n.push(br.syncCollection(Lt.SUBJECTS,t.subjects)),t.classes&&n.push(br.syncCollection(Lt.CLASSES,t.classes)),t.rooms&&n.push(br.syncCollection(Lt.ROOMS,t.rooms)),t.schedule&&n.push(br.syncCollection(Lt.SCHEDULE_1,t.schedule)),t.schedule2&&n.push(br.syncCollection(Lt.SCHEDULE_2,t.schedule2)),t.substitutions&&n.push(br.syncCollection(Lt.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&n.push(br.syncCollection(Lt.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&n.push(br.syncCollection(Lt.DUTY_SCHEDULE,t.dutySchedule)),t.nutritionRecords&&n.push(br.syncCollection(Lt.NUTRITION,t.nutritionRecords)),t.settings&&n.push(wh(bs(Sr,Lt.CONFIG,"settings"),mo(t.settings),{merge:!0})),t.bellSchedule&&n.push(wh(bs(Sr,Lt.CONFIG,"bells"),mo({items:t.bellSchedule}))),await Promise.all(n)},subscribe:(t,e)=>{if(!Sr)return()=>{};let r={...nn},n=!0,s;const A=()=>{clearTimeout(s),s=setTimeout(async()=>{const l={...r};n&&(n=!1,console.log("Skipping initial cache synchronization to save Firestore quota")),t(l)},50)},i=[],o=(l,c)=>{const d=I0(b0(Sr,l));return yh(d,h=>{const f=h.docs.map(w=>w.data()),p=new Map;f.forEach(w=>{w&&w.id&&p.set(w.id,w)}),Ka.set(l,p),f.sort((w,B)=>{const E=typeof w.order=="number"?w.order:999999,C=typeof B.order=="number"?B.order:999999;return E-C}),r[c]=f,A()},h=>{console.warn(`Error reading ${l}:`,h)})};return i.push(o(Lt.TEACHERS,"teachers")),i.push(o(Lt.SUBJECTS,"subjects")),i.push(o(Lt.CLASSES,"classes")),i.push(o(Lt.ROOMS,"rooms")),i.push(o(Lt.SCHEDULE_1,"schedule")),i.push(o(Lt.SCHEDULE_2,"schedule2")),i.push(o(Lt.SUBSTITUTIONS,"substitutions")),i.push(o(Lt.DUTY_ZONES,"dutyZones")),i.push(o(Lt.DUTY_SCHEDULE,"dutySchedule")),i.push(o(Lt.NUTRITION,"nutritionRecords")),i.push(yh(bs(Sr,Lt.CONFIG,"settings"),l=>{l.exists()&&(r.settings={...nn.settings,...l.data()},A())})),i.push(yh(bs(Sr,Lt.CONFIG,"bells"),l=>{if(l.exists()){const c=l.data();r.bellSchedule=c.items||nn.bellSchedule,A()}})),()=>{i.forEach(l=>l()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(A=new Date)=>{const i=A.getFullYear(),o=String(A.getMonth()+1).padStart(2,"0"),l=String(A.getDate()).padStart(2,"0");return`${i}-${o}-${l}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Sr)throw new Error("Database not initialized");const r=Xn==null?void 0:Xn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(A=>({id:A.id,name:A.name,color:A.color,difficulty:A.difficulty,requiredRoomType:A.requiredRoomType,order:A.order})),teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:A.order})),classes:e.classes.map(A=>({id:A.id,name:A.name,shift:A.shift,studentsCount:A.studentsCount,order:A.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=mo(n);await wh(bs(Sr,Lt.PUBLIC,t),s)},getPublicData:async t=>{if(!Sr)return null;try{const e=await dN(()=>Promise.resolve().then(()=>BL),void 0).then(r=>r.getDoc(bs(Sr,Lt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Sr&&await i2(bs(Sr,Lt.PUBLIC,t))}},q2=_.createContext(void 0),VO="admin@gymnasium22.com",KO=({children:t})=>{const[e,r]=_.useState(null),[n,s]=_.useState(null),[A,i]=_.useState(!0);_.useEffect(()=>{if(!Xn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=vM(Xn,d=>{r(d),d?d.email===VO?s("admin"):d.email==="canteen@gymnasium22.com"?s("canteen"):d.email&&d.email.includes("@")?s("teacher"):s("guest"):s(null),i(!1)});return()=>c()},[]);const o=async()=>{Xn&&await BM(Xn),s(null)},l=()=>{s("guest"),i(!1)};return a.jsx(q2.Provider,{value:{user:e,role:n,loading:A,logout:o,setGuestRole:l},children:t})},ji=()=>{const t=_.useContext(q2);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},gn=()=>crypto.randomUUID(),Ku=(t,e)=>{const r=t.getMonth(),n=e==null?void 0:e.semesterConfig;if(n){if(n.secondSemesterMonths.includes(r))return 2;if(n.firstSemesterMonths.includes(r))return 1}return r>=0&&r<=4?2:1},X2=(t,e)=>Ku(t,e.settings)===2?e.schedule2||[]:e.schedule||[],oi=(t=new Date)=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},GO=oi,J2=_.createContext(void 0),Vl="gym_data_local_backup_v2",Kl=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},kd=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},zO=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},Rn={items:[],isProcessing:!1,add:t=>{const e=gn();Rn.items.push({id:e,data:t,timestamp:Date.now(),retryCount:0}),console.log("   :",e)},process:async t=>{if(Rn.isProcessing||!navigator.onLine)return;Rn.isProcessing=!0;const e=[];try{for(const r of Rn.items){if(!navigator.onLine)break;try{await br.save(r.data,t),e.push(r.id),console.log(" :",r.id)}catch{r.retryCount++,r.retryCount>=3?(console.error("    3 :",r.id),e.push(r.id)):console.log(`   ${r.retryCount}/3:`,r.id)}}}finally{Rn.items=Rn.items.filter(r=>!e.includes(r.id)),Rn.isProcessing=!1,Rn.items.length>0&&navigator.onLine&&setTimeout(()=>Rn.process(t),5e3)}}},_A={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)},firebaseOffline:(t,e,r)=>{const n=window.innerWidth<768,s=n?" .     .":` ${e}.         .`;console.warn(`Firebase ${e} ():`,t),n||alert(s),Rn.add(r)}},Y2=({children:t,initialData:e})=>{const[r,n]=_.useState(nn),[s,A]=_.useState(!0),[i,o]=_.useState(!1),[l,c]=_.useState([]),[d,h]=_.useState(-1),{user:f,role:p,loading:w}=ji();_.useEffect(()=>{if(e){n(e),c([e]),h(0),A(!1);return}if(w)return;let Q=null;if(Kl()&&(Q=zO(Vl),Q))try{const y=JSON.parse(Q);y&&y.teachers&&(n(v=>({...v,...y})),console.log("Loaded from local storage backup"))}catch(y){_A.log("Error parsing local backup",y)}const N=f&&p!=="guest";if(!(f||p==="guest")){n(nn),A(!1);return}if(!N){Q||n(nn),A(!1);return}A(!0);let m;try{m=br.subscribe(y=>{const v={...nn,...y};v.teachers||(v.teachers=[]),v.teachers=v.teachers.map(k=>({telegramChatId:"",...k,shifts:k.shifts||[de.First,de.Second]})),v.schedule||(v.schedule=[]),v.schedule2||(v.schedule2=[]),v.substitutions||(v.substitutions=[]),v.bellSchedule||(v.bellSchedule=rf),(!v.dutyZones||v.dutyZones.length===0)&&(v.dutyZones=BE),v.dutySchedule||(v.dutySchedule=[]),v.nutritionRecords||(v.nutritionRecords=[]),v.settings?v.settings={...nn.settings,...v.settings}:v.settings=nn.settings,n(v),Kl()&&kd(Vl,JSON.stringify(v)),c(k=>k.length===0?[v]:k),h(k=>k===-1?0:k),A(!1)},y=>{_A.log("Failed to subscribe to data:",y),A(!1)})}catch(y){_A.log("Failed to initialize subscription:",y),A(!1),m=void 0}return()=>{m&&m()}},[e,f,p,w]);const B=_.useCallback(async(Q,N=!0)=>{const S=p==="guest";o(!0);try{const m={...r,...Q};if(n(m),Kl()&&kd(Vl,JSON.stringify(m)),!e&&f&&!S)try{await br.save(Q,f)}catch(y){_A.firebaseOffline(y," ",Q)}else S&&console.warn("       .");if(N){const y=l.slice(0,d+1);y.push(m);const v=50;if(y.length>v){const k=y.length-v;y.splice(0,k),h(v-1)}else h(y.length-1);c(y)}}finally{o(!1)}},[r,l,d,f,p,e]);_.useEffect(()=>{const Q=()=>{Rn.items.length>0&&f&&p!=="guest"&&!e&&(console.log(` .  ${Rn.items.length} ...`),Rn.process(f))};return window.addEventListener("online",Q),()=>window.removeEventListener("online",Q)},[f,p,e]);const E=_.useCallback(async()=>{h(Q=>{if(Q>0){const N=l[Q-1];if(n(N),Kl()&&kd(Vl,JSON.stringify(N)),!e&&f)try{br.save(N,f).catch(S=>_A.firebase(S," "))}catch(S){_A.firebase(S," ")}return Q-1}return Q})},[l,e,f]),C=_.useCallback(async()=>{h(Q=>{if(Q<l.length-1){const N=l[Q+1];if(n(N),Kl()&&kd(Vl,JSON.stringify(N)),!e&&f)try{br.save(N,f).catch(S=>_A.firebase(S," "))}catch(S){_A.firebase(S," ")}return Q+1}return Q})},[l,e,f]),b=_.useCallback(async()=>{await B(nn)},[B]),I=_.useMemo(()=>({data:r,isLoading:s,isSaving:i,saveData:B,resetData:b,undo:E,redo:C,canUndo:d>0,canRedo:d<l.length-1}),[r,s,i,B,b,E,C,d]);return a.jsx(J2.Provider,{value:I,children:t})},Fg=()=>{const t=_.useContext(J2);if(!t)throw new Error("useFullData must be used within DataProvider");return t},Z2=_.createContext(void 0),eT=_.createContext(void 0),tT=({children:t})=>{const{data:e,saveData:r}=Fg(),n=_.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=_.useCallback(async(i,o)=>{await r(i,o)},[r]),A=_.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return a.jsx(Z2.Provider,{value:A,children:t})},rT=({children:t})=>{const{data:e,saveData:r}=Fg(),A=Ku(new Date,e.settings)===2?e.schedule2||[]:e.schedule||[],i=_.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2:h})},[r]),o=_.useCallback(async(d,h)=>{await r(d,h)},[r]),l=_.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,nutritionRecords:e.nutritionRecords||[],saveSemesterSchedule:i,saveScheduleData:o}),[A,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,e.nutritionRecords,i,o]),c=_.useMemo(()=>({...l,saveScheduleData:o}),[l,o]);return a.jsx(eT.Provider,{value:c,children:t})},Kn=()=>{const t=_.useContext(Z2);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Fg();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||nn.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Di=()=>{const t=_.useContext(eT);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Fg();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[],nutritionRecords:t.nutritionRecords||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Wb={Home:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),a.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),a.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"17 1 21 5 17 9"}),a.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),a.jsx("polyline",{points:"7 23 3 19 7 15"}),a.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),a.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),a.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),a.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),a.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),a.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"3 6 5 6 21 6"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),a.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),a.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),a.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),a.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),a.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),a.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),a.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),a.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),a.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),a.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"23 4 23 10 17 10"}),a.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),a.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),a.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"18",cy:"5",r:"3"}),a.jsx("circle",{cx:"6",cy:"12",r:"3"}),a.jsx("circle",{cx:"18",cy:"19",r:"3"}),a.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),a.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),a.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),a.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),a.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),a.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),a.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),a.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),a.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),a.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),a.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),a.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),a.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),a.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),a.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),a.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),a.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("path",{d:"M8 13h2"}),a.jsx("path",{d:"M8 17h2"}),a.jsx("path",{d:"M14 13h2"}),a.jsx("path",{d:"M14 17h2"})]}),Activity:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),a.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),a.jsx("path",{d:"M3 9h18"}),a.jsx("path",{d:"M12 21V9"})]}),Image:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),a.jsx("circle",{cx:"9",cy:"9",r:"2"}),a.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"17 8 12 3 7 8"}),a.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 3v5h5"}),a.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),a.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),a.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),a.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"9",cy:"12",r:"1"}),a.jsx("circle",{cx:"9",cy:"5",r:"1"}),a.jsx("circle",{cx:"9",cy:"19",r:"1"}),a.jsx("circle",{cx:"15",cy:"12",r:"1"}),a.jsx("circle",{cx:"15",cy:"5",r:"1"}),a.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),a.jsx("path",{d:"M2 20h3"}),a.jsx("path",{d:"M13 20h9"}),a.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),a.jsx("path",{d:"M13 12h1"}),a.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),a.jsx("path",{d:"M8 12h1"}),a.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),a.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),a.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"9 11 12 14 22 4"}),a.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),a.jsx("path",{d:"M17 17h.01"}),a.jsx("path",{d:"M12 17h.01"}),a.jsx("path",{d:"M14 14h.01"}),a.jsx("path",{d:"M17 14h.01"}),a.jsx("path",{d:"M14 12h.01"}),a.jsx("path",{d:"M19 12h.01"}),a.jsx("path",{d:"M12 19h.01"}),a.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),a.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M21 12H3"}),a.jsx("path",{d:"M21 6H3"}),a.jsx("path",{d:"M21 18H3"})]}),Send:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),a.jsx("path",{d:"m20 16-4-4 4-4"}),a.jsx("path",{d:"m4 8 4 4-4 4"}),a.jsx("path",{d:"m16 4-4 4-4-4"}),a.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Coffee:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),Edit:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Info:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),WifiOff:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),a.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),a.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),a.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),a.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),a.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),a.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),Cloud:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M17.5 19c0-1.7-1.3-3-3-3h-1.1c-.2-2.3-2.1-4-4.4-4-2.5 0-4.5 1.8-4.9 4.2-2.3.2-4.1 2.2-4.1 4.5 0 2.5 2 4.5 4.5 4.5h8.5c2.5 0 4.5-2 4.5-4.5z"})}),CloudRain:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"21"}),a.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"21"}),a.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"23"}),a.jsx("path",{d:"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"})]}),Wind:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"})}),Droplets:t=>a.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"}),a.jsx("path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"})]}),Thermometer:t=>a.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"})})},M=({name:t,size:e=24,className:r="",...n})=>{const s=Wb[t]||Wb.Info;return a.jsx(s,{width:e,height:e,className:r,...n})},nT=_.createContext(void 0),$O=({children:t})=>{const[e,r]=_.useState([]),n=A=>{const i=gn();r(o=>[...o,{...A,id:i}])},s=A=>{r(i=>i.filter(o=>o.id!==A))};return a.jsxs(nT.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,a.jsx(WO,{toasts:e,onRemoveToast:s})]})},iy=()=>{const t=_.useContext(nT);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},WO=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:a.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&a.jsx("div",{className:"flex justify-end mb-2",children:a.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>a.jsx(qO,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},jr=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(_.useEffect(()=>{if(!t)return;const A=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[t,e]),t?a.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:A=>A.target===A.currentTarget&&e(),children:a.jsxs("div",{className:`bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),a.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:a.jsx(M,{name:"X",size:20})})]}),a.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),qO=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:A})=>{const[i,o]=_.useState(!0),[l,c]=_.useState(!1),d=_.useRef(null);_.useEffect(()=>(d.current=setTimeout(()=>{h()},s),()=>{d.current&&clearTimeout(d.current)}),[]);const h=()=>{d.current&&(clearTimeout(d.current),d.current=null),c(!0),setTimeout(()=>{o(!1),A(t)},300)};if(!i)return null;const p=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),w=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return a.jsx("div",{className:`max-w-sm w-full animate-slide-in ${l?"animate-fade-out":""}`,children:a.jsx("div",{className:`modern-card border p-4 ${p.bg}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`flex-shrink-0 ${p.icon}`,children:a.jsx(M,{name:w,size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:`text-sm font-semibold ${p.title}`,children:r}),n&&a.jsx("p",{className:`text-sm mt-1 ${p.message}`,children:n})]}),a.jsx("button",{onClick:h,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:a.jsx(M,{name:"X",size:16})})]})})})},XO=({x:t,y:e,onClose:r,actions:n})=>{const s=_.useRef(null);if(_.useEffect(()=>{if(t===null||e===null)return;const o=c=>{s.current&&!s.current.contains(c.target)&&r()},l=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",o,!0),document.addEventListener("keydown",l),()=>{window.removeEventListener("click",o,!0),document.removeEventListener("keydown",l)}},[t,e,r]),t===null||e===null)return null;const A=window.innerWidth-t<200?t-200:t,i={top:e,left:A};return a.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:i,children:n.map(o=>a.jsxs("button",{onClick:l=>{l.stopPropagation(),o.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${o.color||"text-slate-700 dark:text-slate-200"}`,children:[o.icon&&a.jsx(M,{name:o.icon,size:16}),o.label]},o.id||o.label))})},JO=()=>{const{bellSchedule:t,isSaving:e}=Kn(),[r,n]=_.useState("..."),[s,A]=_.useState(""),[i,o]=_.useState(0),[l,c]=_.useState("bg-slate-500"),[d,h]=_.useState(""),[f,p]=_.useState(navigator.onLine);return _.useEffect(()=>{const w=()=>p(!0),B=()=>p(!1);return window.addEventListener("online",w),window.addEventListener("offline",B),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",B)}},[]),_.useEffect(()=>{const w=()=>{const E=new Date,C=E.getDay(),I=[null,rt.Monday,rt.Tuesday,rt.Wednesday,rt.Thursday,rt.Friday,null][C];if(h(I||""),!I){n(" "),A(" "),c("bg-slate-400"),o(0);return}const Q=v=>{const[k,R]=v.split(":").map(Number);return k*60+R},N=E.getHours()*60+E.getMinutes();let S=t.filter(v=>v.day===I);S.length===0&&(S=t.filter(v=>v.day==="default")),S.sort((v,k)=>Q(v.start)-Q(k.start));let m=null,y=null;for(let v=0;v<S.length;v++){const k=S[v],R=Q(k.start),L=Q(k.end);if(N>=R&&N<L){m={...k,duration:L-R,passed:N-R};break}if(v<S.length-1){const U=S[v+1],Oe=Q(U.start);if(N>=L&&N<Oe){const We=Oe-L;if(We>0&&We<60){const Xe=N-L,Ke=Oe-N;y={nextLesson:U,duration:We,passed:Xe,remaining:Ke};break}}}}if(m){n(`${m.period} `);const v=Math.max(0,m.duration-m.passed);A(`${m.shift===de.First?"1 ":"2 "}  . ${v} `);const k=m.duration>0?m.passed/m.duration*100:0;o(Math.min(100,Math.max(0,k))),c("bg-indigo-600")}else if(y){n(""),A(` ${y.remaining}  ${y.nextLesson.period} `),c("bg-amber-500");const v=y.duration>0?y.passed/y.duration*100:0;o(Math.min(100,Math.max(0,v)))}else n(" "),A(" "),c("bg-slate-400"),o(0)};w();const B=setInterval(w,6e4);return()=>clearInterval(B)},[t]),a.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[a.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${l}`}),!f&&a.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-amber-500 text-white text-xs font-bold py-1 px-3 rounded-t-2xl text-center flex items-center justify-center gap-1",children:[a.jsx(M,{name:"WifiOff",size:12}),a.jsx("span",{children:"      "})]}),a.jsxs("div",{className:"flex justify-between items-start z-10",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:d}),a.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),a.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),a.jsxs("div",{className:`w-8 h-8 rounded-full ${l} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(M,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),!f&&!e&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(M,{name:"WifiOff",size:16,className:"text-amber-500"})}),a.jsx(M,{name:e?"Loader":f?"Clock":"WifiOff",size:16,className:e?"text-indigo-600 animate-spin":f?l==="bg-indigo-600"?"text-indigo-600":l==="bg-amber-500"?"text-amber-500":"text-slate-400":"text-amber-500"})]})]}),i>0&&a.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:a.jsx("div",{className:`h-full ${l} transition-all duration-1000`,style:{width:`${i}%`}})})]})},Tc=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var w;const[A,i]=_.useState(!1),[o,l]=_.useState(""),c=_.useRef(null);_.useEffect(()=>{const B=C=>{c.current&&!c.current.contains(C.target)&&i(!1)},E=C=>{C.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",B),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("keydown",E)}},[]);const h=((w=(s?t.flatMap(B=>B.options):t).find(B=>B.value===e))==null?void 0:w.label)||n,f=s?t.map(B=>({...B,options:B.options.filter(E=>E.label.toLowerCase().includes(o.toLowerCase()))})).filter(B=>B.options.length>0):null,p=s?null:t.filter(B=>B.label.toLowerCase().includes(o.toLowerCase()));return a.jsxs("div",{className:"relative w-full",ref:c,children:[a.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[a.jsx("span",{className:e?"":"text-slate-400",children:h}),a.jsx(M,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[a.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:a.jsx("input",{autoFocus:!0,value:o,onChange:B=>l(B.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&f?f.map(B=>a.jsxs("div",{children:[a.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:B.label}),B.options.map(E=>a.jsx("div",{onClick:()=>{r(E.value),i(!1),l("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===E.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:E.label},E.value))]},B.id||B.label)):p?p.map(B=>a.jsx("div",{onClick:()=>{r(B.value),i(!1),l("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===B.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:B.label},B.value)):null]})]})},Td=({children:t,className:e=""})=>{const r=zs.Children.toArray(t);return a.jsx("div",{className:e,children:r.map((n,s)=>{const A=zs.isValidElement(n)&&n.key?n.key:s;return a.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},A)})})},Qp=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return a.jsx("div",{className:"space-y-3",children:t.map(s=>{const A=s.id??s.label,i=Math.min(100,Math.max(0,s.value/n*100));return a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),a.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),a.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},A)})})},YO=({onMenuClick:t,role:e})=>{const{settings:r}=Kn(),n=e==="admin",s=e==="teacher",A=e==="canteen",i=e==="guest",o=n||s,l=n||s||i,c=n||s||A,h=Ku(new Date,r)===2?"/schedule2":"/schedule";return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:a.jsxs("div",{className:"flex justify-around items-center h-20",children:[o&&a.jsxs(Is,{to:"/dashboard",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[a.jsx(M,{name:"Home",size:26,strokeWidth:2.5}),a.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),l&&a.jsxs(Is,{to:h,className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[a.jsx(M,{name:"Calendar",size:26,strokeWidth:2.5}),a.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),c&&a.jsxs(Is,{to:"/nutrition",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[a.jsx(M,{name:"Coffee",size:26,strokeWidth:2.5}),a.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),n&&a.jsxs(Is,{to:"/substitutions",className:({isActive:f})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${f?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[a.jsx(M,{name:"Repeat",size:26,strokeWidth:2.5}),a.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]}),a.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 active:bg-indigo-50/50 dark:active:bg-indigo-900/20 transition-all duration-300 flex-1 h-full hover:bg-slate-100/50 dark:hover:bg-slate-700/30",children:[a.jsx(M,{name:"Menu",size:26,strokeWidth:2.5}),a.jsx("span",{className:"text-[11px] md:text-[10px] font-bold uppercase tracking-wider",children:""})]})]})})},ZO=[{id:"search",label:"",visible:!0},{id:"substitutions",label:"",visible:!0},{id:"occupancy",label:"",visible:!0},{id:"conflicts",label:"",visible:!0},{id:"birthdays",label:"",visible:!0},{id:"notes",label:"",visible:!0}],eH=()=>{const{settings:t}=Kn(),[e,r]=_.useState(null),[n,s]=_.useState([]),[A,i]=_.useState(!0),[o,l]=_.useState(null),c=t.weatherApiKey,d=t.weatherCity||"Minsk,BY";if(_.useEffect(()=>{(async()=>{if(!c){i(!1);return}const w="gym_weather_cache",B=30*60*1e3,E=localStorage.getItem(w);if(E)try{const C=JSON.parse(E);if(Date.now()-C.timestamp<B){r(C.current),s(C.forecast),i(!1);return}}catch{console.warn("Weather cache invalid")}try{const C=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${d}&units=metric&lang=ru&appid=${c}`);if(!C.ok)throw new Error("Weather API Error");const b=await C.json(),I=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${d}&units=metric&lang=ru&appid=${c}`);if(!I.ok)throw new Error("Forecast API Error");const Q=await I.json(),N=[],S=new Set,m=new Date().toISOString().split("T")[0];for(const y of Q.list){const v=y.dt_txt.split(" ")[0];if(v!==m&&!S.has(v)&&(N.push(y),S.add(v),N.length>=3))break}r(b),s(N),i(!1),localStorage.setItem(w,JSON.stringify({timestamp:Date.now(),current:b,forecast:N}))}catch(C){console.error(C),l("  "),i(!1)}})()},[c,d]),!c)return null;if(A)return a.jsx("div",{className:"h-32 w-full bg-slate-100 dark:bg-slate-800 rounded-3xl animate-pulse"});if(o||!e)return null;const h=p=>p.startsWith("01")?"Sun":p.startsWith("02")||p.startsWith("03")||p.startsWith("04")?"Cloud":p.startsWith("09")||p.startsWith("10")?"CloudRain":p.startsWith("11")?"Snowflake":p.startsWith("50")?"Wind":"Cloud",f=(()=>{const p=e.weather[0].icon;return p.endsWith("n")?"bg-gradient-to-br from-indigo-900 to-purple-900":p.startsWith("01")||p.startsWith("02")?"bg-gradient-to-br from-sky-400 to-blue-600":p.startsWith("09")||p.startsWith("10")||p.startsWith("11")?"bg-gradient-to-br from-slate-500 to-slate-700":"bg-gradient-to-br from-blue-300 to-slate-400"})();return a.jsxs("div",{className:`p-5 rounded-3xl relative overflow-hidden shadow-lg text-white ${f} flex flex-col justify-center h-full`,children:[a.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-white/10 rounded-full blur-2xl pointer-events-none"}),a.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-black",children:[Math.round(e.main.temp),""]}),a.jsx("div",{className:"text-xs opacity-90 font-medium",children:e.name})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx(M,{name:h(e.weather[0].icon),size:36,className:"text-white/90 drop-shadow-md mb-1"}),a.jsx("div",{className:"text-[10px] opacity-75 capitalize",children:e.weather[0].description})]})]}),a.jsx("div",{className:"mt-3 pt-2 border-t border-white/20 flex justify-between text-center relative z-10",children:n.slice(0,3).map((p,w)=>a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-[9px] opacity-80 uppercase font-bold",children:new Date(p.dt*1e3).toLocaleDateString("ru-RU",{weekday:"short"})}),a.jsxs("span",{className:"text-xs font-bold",children:[Math.round(p.main.temp),""]})]},w))})]})},tH=()=>{var ue;const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:A}=Kn(),{schedule:i,substitutions:o,nutritionRecords:l}=Di(),{role:c}=ji(),d=Bu(),{addToast:h}=iy(),[f,p]=_.useState(localStorage.getItem("gym_notes")||""),[w]=_.useState(new Date),[B,E]=_.useState(""),[C,b]=_.useState([]),[I,Q]=_.useState(!1),[N,S]=_.useState(!1),[m,y]=_.useState(()=>{const T=localStorage.getItem("gym_dashboard_widgets_v4");return T?JSON.parse(T):ZO}),[v,k]=_.useState(!1),[R,L]=_.useState(!1),[U,Oe]=_.useState(""),[We,Xe]=_.useState(!1),Ke=T=>T.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),Ae=T=>{const P=Ke(T);p(P),S(!0)},ye=()=>{localStorage.setItem("gym_notes",f),S(!1),h({type:"success",title:" ",message:"     ",duration:3e3})};_.useEffect(()=>{if(!N)return;const T=setTimeout(()=>{localStorage.setItem("gym_notes",f),S(!1)},3e3);return()=>clearTimeout(T)},[f,N]);const Te=_.useMemo(()=>{const T=w.getHours();return T<5?" ":T<12?" ":T<18?" ":" "},[w]),Re=_.useMemo(()=>GO(w),[w]),Pe=_.useMemo(()=>{const T=w.getDay();return T===0||T===6?null:wt[T-1]},[w]),q=_.useMemo(()=>{const T=new Date,P=T.getHours()*60+T.getMinutes(),W=[null,rt.Monday,rt.Tuesday,rt.Wednesday,rt.Thursday,rt.Friday,null][T.getDay()];if(!W)return{type:"weekend",label:""};let Be=s.filter(G=>G.day===W);Be.length===0&&(Be=s.filter(G=>G.day==="default"));const ne=G=>{const[J,O]=G.split(":").map(Number);return J*60+O};Be.sort((G,J)=>ne(G.start)-ne(J.start));for(let G=0;G<Be.length;G++){const J=Be[G],O=ne(J.start),ie=ne(J.end);if(P>=O&&P<ie)return{type:"lesson",bell:J,label:`${J.period} `};if(G<Be.length-1){const ee=Be[G+1],ae=ne(ee.start);if(P>=ie&&P<ae)return{type:"break",nextBell:ee,label:` (. ${ee.period} )`}}}if(Be.length>0){const G=ne(Be[0].start);return P<G?{type:"before",label:" "}:{type:"after",label:" "}}return{type:"unknown",label:"  "}},[s,w]);_.useEffect(()=>{if(!B.trim()){b([]);return}const T=B.toLowerCase(),P=[],H=q.type==="lesson",W=q.type==="lesson"?q.bell:null,Be=(ne,G,J)=>{var ae,Y;if(!ne)return{text:"",color:"blue",room:""};const O=o.find(te=>te.date===Re&&te.scheduleItemId===ne.id);if((O==null?void 0:O.replacementTeacherId)==="cancelled")return{text:" ",color:"red",room:""};const ie=((ae=t.find(te=>te.id===ne.subjectId))==null?void 0:ae.name)||"",ee=((Y=n.find(te=>te.id===((O==null?void 0:O.replacementRoomId)||ne.roomId)))==null?void 0:Y.name)||(O==null?void 0:O.replacementRoomId)||ne.roomId||"?";return{text:`${ie} ${J?"()":""}`,color:J?"amber":"green",room:ee}};e.forEach(ne=>{if(ne.name.toLowerCase().includes(T)){let G={type:"teacher",id:ne.id,name:ne.name,icon:"User",statusText:"",statusColor:"slate",isBusy:!1};if(ne.unavailableDates.includes(Re))G.statusText="",G.statusColor="red",G.icon="UserX";else if(H&&W){const J=i.find(ae=>ae.teacherId===ne.id&&ae.period===W.period&&ae.day===Pe&&ae.shift===W.shift),O=o.find(ae=>ae.date===Re&&ae.replacementTeacherId===ne.id);let ie=J,ee=!1;if(O){const ae=i.find(Y=>Y.id===O.scheduleItemId);ae&&ae.period===W.period&&ae.shift===W.shift&&(ie=ae,ee=!0)}else if(J){const ae=o.find(Y=>Y.date===Re&&Y.scheduleItemId===J.id);ae&&ae.replacementTeacherId!==ne.id&&(ie=void 0)}if(ie){const ae=Be(ie,ne.id,ee);G.statusText=ae.text,G.location=`. ${ae.room}`,G.statusColor=ae.color,G.isBusy=!0}else G.statusText="",G.statusColor="blue",G.isBusy=!1}else G.statusText=q.label,G.statusColor="slate";P.push(G)}}),r.forEach(ne=>{var G,J;if(ne.name.toLowerCase().includes(T)){let O={type:"class",id:ne.id,name:ne.name,icon:"GraduationCap",statusText:"",statusColor:"slate",isBusy:!1};if(H&&W){const ie=i.find(ee=>ee.classId===ne.id&&ee.period===W.period&&ee.day===Pe&&ee.shift===W.shift);if(ie){const ee=o.find(ae=>ae.date===Re&&ae.scheduleItemId===ie.id);if((ee==null?void 0:ee.replacementTeacherId)==="cancelled")O.statusText=" ",O.statusColor="red";else{const ae=(G=t.find(te=>te.id===ie.subjectId))==null?void 0:G.name,Y=((J=n.find(te=>te.id===((ee==null?void 0:ee.replacementRoomId)||ie.roomId)))==null?void 0:J.name)||(ee==null?void 0:ee.replacementRoomId)||ie.roomId;O.statusText=ae||"",O.location=`. ${Y}`,O.statusColor="green",O.isBusy=!0}}else O.statusText=" ",O.statusColor="blue"}else O.statusText=q.label;P.push(O)}}),n.forEach(ne=>{var G,J;if(ne.name.toLowerCase().includes(T)){let O={type:"room",id:ne.id,name:ne.name,subName:ne.type,icon:"DoorOpen",statusText:"",statusColor:"slate",isBusy:!1};if(H&&W){const ie=i.find(Y=>Y.roomId===ne.id&&Y.period===W.period&&Y.day===Pe&&Y.shift===W.shift),ee=o.find(Y=>Y.date===Re&&Y.replacementRoomId===ne.id);let ae=ie;if(ee){const Y=i.find(te=>te.id===ee.scheduleItemId);Y&&Y.period===W.period&&Y.shift===W.shift&&(ae=Y)}if(ie&&o.find(te=>te.date===Re&&te.scheduleItemId===ie.id&&te.replacementRoomId&&te.replacementRoomId!==ne.id)&&(ae=void 0),ae){const Y=(G=r.find(me=>me.id===ae.classId))==null?void 0:G.name,te=(J=e.find(me=>{var Ne;return me.id===(((Ne=o.find(ze=>ze.scheduleItemId===ae.id&&ze.date===Re))==null?void 0:Ne.replacementTeacherId)||ae.teacherId)}))==null?void 0:J.name;O.statusText="",O.location=`${Y}  ${te==null?void 0:te.split(" ")[0]}`,O.statusColor="green",O.isBusy=!0}else O.statusText="",O.statusColor="blue"}else O.statusText=q.label;P.push(O)}}),b(P.slice(0,5))},[B,e,r,n,i,o,q,Re,Pe,t]);const $=_.useMemo(()=>{const T=new Date;return T.setHours(0,0,0,0),e.filter(P=>P.birthDate).map(P=>{const H=new Date(P.birthDate);let W=new Date(T.getFullYear(),H.getMonth(),H.getDate());W<T&&W.setFullYear(T.getFullYear()+1);const Be=Math.ceil((W.getTime()-T.getTime())/(1e3*60*60*24));return{...P,diff:Be,age:T.getFullYear()-H.getFullYear()}}).filter(P=>P.diff<=30).sort((P,H)=>P.diff-H.diff)},[e]),Se=_.useMemo(()=>{const T=e.length,P=new Map;e.filter(O=>O.unavailableDates.includes(Re)).forEach(O=>{var ae;const ee=((ae=O.absenceReasons)==null?void 0:ae[Re])===" "?" ":"";P.set(O.id,{id:O.id,name:O.name,displayReason:ee})});const H=o.filter(O=>O.date===Re&&O.replacementTeacherId!=="conducted"&&O.replacementTeacherId!==O.originalTeacherId),W=new Map;H.forEach(O=>{if(P.has(O.originalTeacherId))return;const ie=e.find(Y=>Y.id===O.originalTeacherId);if(!ie)return;const ee=i.find(Y=>Y.id===O.scheduleItemId);if(!ee)return;W.has(O.originalTeacherId)||W.set(O.originalTeacherId,{teacher:ie,lessons:[]}),W.get(O.originalTeacherId).lessons.push({period:ee.period,reason:O.lessonAbsenceReason})});const Be=Array.from(P.values());W.forEach((O,ie)=>{const ee=O.lessons.sort((me,Ne)=>me.period-Ne.period),ae=ee.map(me=>me.period).join(", "),te=ee.some(me=>me.reason===" ")?" ":"";Be.push({id:ie,name:O.teacher.name,displayReason:`${ae} : ${te}`})}),Be.sort((O,ie)=>O.name.localeCompare(ie.name));const ne=Be.length,G=T-ne;return{presentPercent:T>0?Math.round(G/T*100):0,absentCount:ne,totalTeachers:T,absentTeachersList:Be}},[e,Re,o,i]),xe=_.useMemo(()=>{const T=new Date(w);for(T.setDate(w.getDate()+1);T.getDay()===0||T.getDay()===6;)T.setDate(T.getDate()+1);const H=[null,"","","","","",null][T.getDay()];if(!H)return[];const W=[];return r.filter(ne=>!ne.excludeFromReports).forEach(ne=>{const G=i.filter(J=>J.classId===ne.id&&J.day===H);G.length===0?W.push({class:ne.name,issue:`   ${H}`}):G.length<4&&W.push({class:ne.name,issue:`  (${G.length})`}),G.forEach(J=>{if(i.some(ie=>ie.id!==J.id&&ie.day===H&&ie.period===J.period&&ie.shift===J.shift&&ie.teacherId===J.teacherId)&&W.push({class:ne.name,issue:`  (${J.period} )`}),J.roomId){const ie=n.find(ee=>ee.id===J.roomId);ie&&ie.capacity<ne.studentsCount&&W.push({class:ne.name,issue:`: ${ie.name} (${J.period} )`})}})}),W.filter((ne,G,J)=>J.findIndex(O=>O.class===ne.class&&O.issue===ne.issue)===G)},[i,r,e,n,w]),Le=_.useMemo(()=>{if(!Pe)return 0;let T=0;const P=i.filter(H=>H.day===Pe);for(const H of P){const W=e.find(Be=>Be.id===H.teacherId);W&&W.unavailableDates.includes(Re)&&(o.find(ne=>ne.scheduleItemId===H.id&&ne.date===Re)||T++)}return T},[i,e,o,Re,Pe]);_.useMemo(()=>{if(c!=="canteen")return 0;const T=l.filter(H=>H.date===Re),P=new Set(T.map(H=>H.classId));return r.filter(H=>!P.has(H.id)).length},[c,l,Re,r]);const Wr=async()=>{if(!U.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}Xe(!0);const T=` *   :*

${U}`;try{const H=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:T,parse_mode:"Markdown"})})).json();if(H.ok)alert("!   ."),L(!1),Oe("");else throw new Error(H.description)}catch(P){console.error("   Telegram:",P),alert(`   . : ${P}`)}finally{Xe(!1)}},wr=T=>{const P=m.map(H=>H.id===T?{...H,visible:!H.visible}:H);y(P)},Rt=(T,P)=>{const H=m.findIndex(Be=>Be.id===T);if(H===-1)return;const W=[...m];P==="up"&&H>0?[W[H],W[H-1]]=[W[H-1],W[H]]:P==="down"&&H<W.length-1&&([W[H],W[H+1]]=[W[H+1],W[H]]),y(W)},Et=()=>{localStorage.setItem("gym_dashboard_widgets_v4",JSON.stringify(m)),k(!1)},Wt=T=>{if(!T.visible)return null;switch(T.id){case"search":return a.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:a.jsx(M,{name:"Search",size:22})}),a.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),a.jsxs("div",{className:"relative mb-4",children:[a.jsx("input",{type:"text",inputMode:"search",placeholder:",   ...",value:B,onChange:P=>E(P.target.value),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl py-3.5 pl-11 pr-4 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),a.jsx(M,{name:"Search",size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]}),C.length>0&&a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mr-2 pr-2 space-y-2",children:C.map(P=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white dark:bg-slate-700/50 border border-slate-100 dark:border-slate-600 hover:border-indigo-300 dark:hover:border-indigo-500 transition-colors cursor-pointer",onClick:()=>{const W=Ku(new Date,A)===2?"/schedule2":"/schedule",Be=Pe?`&day=${Pe}`:"";let ne="";if(P.type==="class"){const G=r.find(J=>J.id===P.id);G&&(ne=`&shift=${G.shift===de.First?1:2}`)}P.type==="teacher"&&d(`${W}?view=teacher&id=${P.id}${Be}`),P.type==="class"&&d(`${W}?view=class&id=${P.id}${Be}${ne}`)},children:[a.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${P.isBusy?"bg-indigo-100 text-indigo-600":P.statusColor==="red"?"bg-red-100 text-red-600":"bg-slate-100 text-slate-500"}`,children:a.jsx(M,{name:P.icon,size:18})}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm truncate",children:[P.name," ",P.subName&&a.jsx("span",{className:"text-slate-400 font-normal",children:P.subName})]}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:P.type==="room"?"":P.type==="class"?"":""})]})]}),a.jsxs("div",{className:"text-right shrink-0",children:[a.jsx("div",{className:`text-xs font-bold px-2 py-1 rounded-lg inline-block ${P.statusColor==="green"?"bg-emerald-100 text-emerald-700":P.statusColor==="red"?"bg-red-100 text-red-700":P.statusColor==="blue"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}`,children:P.statusText}),P.location&&a.jsx("div",{className:"text-[10px] font-mono mt-1 text-slate-400",children:P.location})]})]},`${P.type}-${P.id}`))})]},T.id);case"substitutions":return a.jsxs("div",{className:`p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 ${Le>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[Le>0&&a.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),a.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[a.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${Le>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:a.jsx(M,{name:Le>0?"AlertTriangle":"CheckCircle",size:22})}),a.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),a.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:Le>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:Le}),a.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),a.jsxs("button",{onClick:()=>d("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",a.jsx(M,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:a.jsx(M,{name:"CheckCircle",size:64})}),a.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]},T.id);case"occupancy":return a.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:a.jsx(M,{name:"PieChart",size:22})}),a.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),a.jsx("button",{onClick:()=>Q(!I),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:I?" ":" ",children:a.jsx(M,{name:I?"PieChart":"List",size:20})})]}),I?a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:Se.absentTeachersList.length>0?a.jsx("div",{className:"space-y-3",children:Se.absentTeachersList.map(P=>a.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[a.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:P.name}),a.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:P.displayReason})]},P.id))}):a.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:a.jsx("p",{className:"text-sm font-medium",children:"   "})})}):a.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[a.jsxs("div",{className:"relative w-28 h-28",children:[a.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[a.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),a.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${Se.presentPercent}, 100`,strokeLinecap:"round"}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),a.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),a.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[Se.presentPercent,"%"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:Se.absentCount}),a.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",a.jsx("br",{}),""]})]})]})]},T.id);case"notes":return a.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full group card-hover relative bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:a.jsx(M,{name:"Edit2",size:22})}),a.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:ye,disabled:!N,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${N?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:N?" ":" ",children:a.jsx(M,{name:"Save",size:16})}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f),h({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:a.jsx(M,{name:"Copy",size:16})}),a.jsx("button",{onClick:()=>{confirm(" ?")&&(p(""),localStorage.setItem("gym_notes",""),S(!1),h({type:"success",title:" ",duration:2e3}))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:a.jsx(M,{name:"Trash2",size:16})})]})]}),a.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[a.jsx("textarea",{inputMode:"text",className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:f,onChange:P=>Ae(P.target.value),maxLength:1e4}),N&&a.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[a.jsx(M,{name:"Clock",size:10}),"  "]})]})]},T.id);case"conflicts":return a.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:a.jsx(M,{name:"AlertTriangle",size:20})}),a.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:xe.length?xe.map(P=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[a.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:P.class}),a.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:P.issue})]},`${P.class}-${P.issue}`)):a.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},T.id);case"birthdays":return a.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:a.jsx(M,{name:"Gift",size:20})}),a.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:$.length?$.map(P=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[a.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:P.name}),a.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${P.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:P.diff===0?"!":` ${P.diff} .`})]},P.id)):a.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]},T.id);default:return null}};return a.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fade-in",children:[a.jsxs("div",{className:"lg:col-span-2 flex flex-col justify-end",children:[a.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[Te,", ",c==="admin"?"":c==="canteen"?"":"","!"]}),a.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium mb-4",children:[" ",w.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",title:"  ",children:a.jsx(M,{name:"Settings",size:18})}),a.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[a.jsx(M,{name:"Send",size:18}),"  "]})]}),((ue=A==null?void 0:A.adminAnnouncement)==null?void 0:ue.active)&&a.jsx("div",{className:"mt-6 bg-amber-100 dark:bg-amber-900/30 border-l-4 border-amber-500 p-4 rounded-r-xl shadow-sm",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-amber-600 dark:text-amber-400 shrink-0 mt-1",children:a.jsx(M,{name:"Bell",size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-base text-amber-800 dark:text-amber-100 mb-1",children:""}),a.jsx("p",{className:"text-slate-800 dark:text-slate-200 text-sm whitespace-pre-wrap leading-relaxed",children:A.adminAnnouncement.message})]})]})})]}),a.jsx("div",{className:"hidden lg:block h-full min-h-[160px]",children:a.jsx(eH,{})})]}),c==="admin"&&Le>0&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-4 animate-fade-in",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-amber-500 text-white p-2 rounded-xl",children:a.jsx(M,{name:"AlertTriangle",size:20})}),a.jsx("div",{className:"flex-1",children:a.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:[Le," ",Le===1?"":Le<5?"":"","  "]})}),a.jsx(Is,{to:"/substitutions",className:"px-4 py-2 bg-amber-500 text-white rounded-xl font-semibold hover:bg-amber-600 transition-colors text-sm",children:""})]})}),a.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3 animate-fade-in",children:[a.jsxs(Is,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[a.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-xl",children:a.jsx(M,{name:"Calendar",size:20})}),a.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&a.jsxs(Is,{to:"/substitutions",className:"p-4 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[a.jsx("div",{className:"bg-orange-500 text-white p-3 rounded-xl",children:a.jsx(M,{name:"Repeat",size:20})}),a.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="admin"&&a.jsxs(Is,{to:"/duty",className:"p-4 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[a.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-xl",children:a.jsx(M,{name:"Shield",size:20})}),a.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),c==="guest"&&a.jsxs(Is,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30 border border-emerald-200 dark:border-emerald-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[a.jsx("div",{className:"bg-emerald-500 text-white p-3 rounded-xl",children:a.jsx(M,{name:"Users",size:20})}),a.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:m.slice(0,4).map(T=>Wt(T))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.slice(4).map(T=>Wt(T))}),a.jsx(jr,{isOpen:R,onClose:()=>L(!1),title:" ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),a.jsx("textarea",{inputMode:"text",value:U,onChange:T=>Oe(T.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:Wr,disabled:We,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[We?a.jsx(M,{name:"Loader",size:16,className:"animate-spin"}):a.jsx(M,{name:"Send",size:16}),We?"...":""]})})]})}),a.jsx(jr,{isOpen:v,onClose:()=>k(!1),title:"  ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      ."}),a.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto custom-scrollbar pr-2",children:m.map((T,P)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-xl border border-slate-200 dark:border-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",checked:T.visible,onChange:()=>wr(T.id),className:"w-5 h-5 rounded text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),a.jsx("span",{className:"font-bold text-slate-700 dark:text-white",children:T.label})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>Rt(T.id,"up"),disabled:P===0,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:a.jsx(M,{name:"ArrowRight",className:"-rotate-90",size:16})}),a.jsx("button",{onClick:()=>Rt(T.id,"down"),disabled:P===m.length-1,className:"p-1.5 text-slate-400 hover:text-indigo-600 disabled:opacity-30 disabled:cursor-not-allowed",children:a.jsx(M,{name:"ArrowRight",className:"rotate-90",size:16})})]})]},T.id))}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:Et,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})})]})})]})};var sT={},AT={},iT={},Sg={};Object.defineProperty(Sg,"__esModule",{value:!0});function rH(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Sg.default=rH;var ay={};Object.defineProperty(ay,"__esModule",{value:!0});var nH=Sg,sH=" and ";function AH(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=nH.default(r),A=n;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(sH)}ay.default=AH;var oy={};Object.defineProperty(oy,"__esModule",{value:!0});function iH(){}oy.default=iH;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Sg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=ay;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=oy;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(iT);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=_,r=iT;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(A,i){i===void 0&&(i=!1);var o=e.useState(i),l=o[0],c=o[1],d=r.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),p=function(){h&&c(!!f.matches)};return f.addListener(p),c(f.matches),function(){h=!1,f.removeListener(p)}},[d]),l}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(AT);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=AT;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(sT);const aT=YC(sT),oT=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:A}=Kn(),{schedule1:i,schedule2:o,saveSemesterSchedule:l,canUndo:c,canRedo:d,undo:h,redo:f}=Di(),p=e===2?o:i,w=async j=>{await l(e,j)},[B,E]=_.useState(de.First),[C,b]=_.useState(rt.Monday),[I,Q]=_.useState(!1),[N,S]=_.useState({}),[m,y]=_.useState("class"),[v,k]=_.useState(""),[R,L]=_.useState(""),[U,Oe]=_.useState(""),[We,Xe]=_.useState(!1),[Ke,Ae]=_.useState({visible:!1,x:0,y:0,item:null,cell:null}),[ye,Te]=_.useState(null),[Re,Pe]=_.useState([]),[q,$]=_.useState(!1),[Se,xe]=_.useState(null),[Le,Wr]=_.useState(null),[wr,Rt]=_.useState(null),Et=aT({maxWidth:767}),[Wt,ue]=_.useState(!0),[T,P]=_.useState(!1),[H,W]=_.useState({isOpen:!1,type:"",day:"",classId:""}),[Be,ne]=_.useState(rt.Monday),[G,J]=_.useState(""),[O]=vE();_.useEffect(()=>{const j=O.get("view"),re=O.get("id"),Fe=O.get("day"),Ce=O.get("shift");j&&["class","teacher","subject","week"].includes(j)&&(y(j),re&&k(re),Fe&&wt.includes(Fe)&&b(Fe),Ce&&(Ce==="1"&&E(de.First),Ce==="2"&&E(de.Second)))},[O]);const ie=bn[B],ee=_.useMemo(()=>m==="week"?bn[B].map(j=>({id:j.toString(),name:`${j} `})):m==="class"?v?s.filter(j=>j.id===v&&j.shift===B):s.filter(j=>j.shift===B):m==="teacher"?v?n.filter(j=>j.id===v):n:m==="subject"?v?r.filter(j=>j.id===v):r:[],[m,v,s,n,r,B]),ae=()=>ee,[Y]=_.useState(()=>new Map);_.useEffect(()=>{Y.clear()},[p,Y]),_.useEffect(()=>{Y.size>500&&(Y.clear(),console.warn("Schedule cache cleared to prevent memory leak"))},[Y]);const te=_.useCallback((j,re)=>{const Fe=`${m}-${j}-${re}-${B}-${C}-${v}-${R}-${U}`;if(Y.has(Fe))return Y.get(Fe);let Ce=[];if(m==="week"){const Ve=parseInt(j);if(isNaN(Ve))return[];const he=String(re);Ce=p.filter(Ue=>Ue.shift===B&&Ue.period===Ve&&Ue.day===he),v&&(Ce=Ce.filter(Ue=>Ue.classId===v))}else{const Ve=typeof re=="string"?parseInt(re):re;if(isNaN(Ve))return[];m==="class"&&(Ce=p.filter(he=>he.classId===j&&he.period===Ve&&he.day===C&&he.shift===B)),m==="teacher"&&(Ce=p.filter(he=>he.teacherId===j&&he.period===Ve&&he.day===C&&he.shift===B)),m==="subject"&&(Ce=p.filter(he=>he.subjectId===j&&he.period===Ve&&he.day===C&&he.shift===B))}return R&&(Ce=Ce.filter(Ve=>{if(!Ve.roomId)return!1;const he=A.find(Ie=>Ie.id===Ve.roomId);return((he?he.name:Ve.roomId)||"").toLowerCase().includes(R.toLowerCase())})),U&&(Ce=Ce.filter(Ve=>{var he;return(he=Ve.direction)==null?void 0:he.toLowerCase().includes(U.toLowerCase())})),Y.set(Fe,Ce),Ce},[m,p,B,C,v,R,U,A]),me=j=>{const re=[],Fe=p.filter(he=>he.id!==j.id&&he.day===j.day&&he.period===j.period&&he.shift===j.shift);return Fe.find(he=>he.teacherId===j.teacherId)&&re.push("teacher"),Fe.find(he=>!(he.classId!==j.classId||he.direction&&j.direction&&he.direction!==j.direction))&&re.push("class"),j.roomId&&Fe.find(Ue=>Ue.roomId===j.roomId)&&re.push("room"),re},Ne=j=>{const re=[],Fe=p.filter(he=>he.id!==j.id&&he.day===j.day&&he.period===j.period&&he.shift===j.shift);return Fe.filter(he=>he.teacherId===j.teacherId).forEach(he=>{var at,Br;const Ue=(at=s.find(jt=>jt.id===he.classId))==null?void 0:at.name,Ie=((Br=A.find(jt=>jt.id===he.roomId))==null?void 0:Br.name)||he.roomId;re.push({type:"",description:`   ${Ue}  . ${Ie||"?"}`})}),Fe.filter(he=>!(he.classId!==j.classId||he.direction&&j.direction&&he.direction!==j.direction)).forEach(he=>{var Ie;const Ue=(Ie=r.find(at=>at.id===he.subjectId))==null?void 0:Ie.name;re.push({type:"",description:`   "${Ue}"`})}),j.roomId&&Fe.filter(Ue=>Ue.roomId===j.roomId).forEach(Ue=>{var Br,jt;const Ie=(Br=n.find(xs=>xs.id===Ue.teacherId))==null?void 0:Br.name,at=(jt=s.find(xs=>xs.id===Ue.classId))==null?void 0:jt.name;re.push({type:"",description:`: ${at}, ${Ie}`})}),re},ze=(j,re)=>{j.stopPropagation();const Fe=Ne(re);xe({item:re,conflicts:Fe}),$(!0)},_e=(j,re,Fe)=>{const Ce=[],Ve=s.find(Ie=>Ie.id===j),he=r.find(Ie=>Ie.id===re),Ue=A.find(Ie=>Ie.id===Fe);return Ue&&(Ve&&Ue.capacity<Ve.studentsCount&&Ce.push(`  !   ${Ve.studentsCount} .,     ${Ue.capacity}.`),he&&he.requiredRoomType&&he.requiredRoomType!==""&&Ue.type!==he.requiredRoomType&&Ce.push(`   !   "${he.requiredRoomType}",   "${Ue.type}".`)),Ce},Ye=j=>{if(!j.classId||!j.subjectId||!j.roomId){Pe([]);return}const re=_e(j.classId,j.subjectId,j.roomId);Pe(re)},et=j=>{t||(S(j),Ye(j),Q(!0))},At=(j,re,Fe=C)=>{if(t)return;const Ce={period:re,day:Fe,shift:B,id:gn()};m==="class"&&(Ce.classId=j),m==="teacher"&&(Ce.teacherId=j),m==="subject"&&(Ce.subjectId=j),m==="week"&&(Ce.period=parseInt(j),Ce.day=Fe,v&&s.find(Ve=>Ve.id===v)&&(Ce.classId=v)),S(Ce),Pe([]),Q(!0)},$e=async()=>{if(!N.subjectId||!N.teacherId||!N.classId)return;const j=[];if(N.period!==void 0){const Ie=N.shift||B;(bn[Ie]||[]).includes(N.period)||j.push(` ${N.period}    "${Ie}"`)}if(n.find(Ie=>Ie.id===N.teacherId)||j.push("   "),r.find(Ie=>Ie.id===N.subjectId)||j.push("   "),s.find(Ie=>Ie.id===N.classId)||j.push("   "),N.roomId&&(A.find(at=>at.id===N.roomId)||j.push("   ")),j.length>0){alert(`  :

${j.join(`
`)}`);return}const Ve=me(N);if(Ve.length>0){const Ie={teacher:"",class:"",room:""},at=Ve.map(Br=>Ie[Br]).join(", ");if(!confirm(`  : ${at}     .

   ?`))return}let he=[...p];const Ue=he.findIndex(Ie=>Ie.id===N.id);Ue>=0?he[Ue]=N:he.push(N),await w(he),Q(!1)},fe=async j=>{const re=p.filter(Fe=>Fe.id!==(j||N.id));await w(re),Q(!1)},Ee=(j,re,Fe)=>{t||(j.preventDefault(),j.stopPropagation(),Ae({visible:!0,x:j.clientX,y:j.clientY,item:re,cell:Fe}))},tt=(j,re)=>{if(t)return;Wr(re),j.dataTransfer.effectAllowed="move";const Fe=j.currentTarget;setTimeout(()=>Fe.classList.add("dragging"),0)},kt=j=>{j.currentTarget.classList.remove("dragging"),Wr(null),Rt(null)},xt=(j,re)=>{j.preventDefault(),!t&&Rt(`${re.rowId}-${re.colKey}`)},bt=async(j,re)=>{if(j.preventDefault(),!Le||t)return;const Fe={...Le};m==="week"?(Fe.period=parseInt(re.rowId),Fe.day=re.colKey):(Fe.period=re.colKey,Fe.day=C,m==="class"&&(Fe.classId=re.rowId),m==="teacher"&&(Fe.teacherId=re.rowId),m==="subject"&&(Fe.subjectId=re.rowId));const Ce=p.map(Ue=>Ue.id===Fe.id?Fe:Ue),Ve=qt(Ce,Fe);if(Ve.length>0){const Ue=Ve.map(Ie=>{switch(Ie.type){case"teacher":return` ${Ie.entityName}     `;case"room":return` ${Ie.entityName}     `;case"class":return` ${Ie.entityName}      `;default:return"  "}});alert(`  :
${Ue.join(`
`)}`),Wr(null),Rt(null);return}await w(Ce),Wr(null),Rt(null)},qt=(j,re)=>{const Fe=[],Ce=j.filter(Ue=>Ue.id!==re.id&&Ue.day===re.day&&Ue.period===re.period&&Ue.shift===re.shift);if(Ce.find(Ue=>Ue.teacherId===re.teacherId)){const Ue=n.find(Ie=>Ie.id===re.teacherId);Fe.push({type:"teacher",entityName:(Ue==null?void 0:Ue.name)||re.teacherId})}if(re.roomId&&Ce.find(Ie=>Ie.roomId===re.roomId)){const Ie=A.find(at=>at.id===re.roomId);Fe.push({type:"room",entityName:(Ie==null?void 0:Ie.name)||re.roomId})}if(Ce.find(Ue=>Ue.classId===re.classId)){const Ue=s.find(Ie=>Ie.id===re.classId);Fe.push({type:"class",entityName:(Ue==null?void 0:Ue.name)||re.classId})}return Fe},pt=[];if(Ke.item)pt.push({label:"",icon:"Copy",onClick:()=>Te(Ke.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>fe(Ke.item.id)});else if(Ke.cell){const j=Ke.cell;ye&&pt.push({label:"",icon:"Clipboard",onClick:async()=>{const re={...ye,id:gn(),day:C,shift:B,period:j.colKey};m==="week"&&(re.day=j.colKey,re.period=parseInt(j.rowId)),m==="class"?re.classId=j.rowId:m==="teacher"?re.teacherId=j.rowId:m==="subject"&&(re.subjectId=j.rowId);let Fe=[...p,re];await w(Fe),Te(null)}}),pt.push({label:" ",icon:"Plus",onClick:()=>At(j.rowId||"",typeof j.colKey=="number"?j.colKey:parseInt(j.rowId||"0"),m==="week"?j.colKey:C)})}const vt=N.subjectId?n.filter(j=>j.subjectIds&&j.subjectIds.includes(N.subjectId)):[],yr=N.subjectId?n.filter(j=>!j.subjectIds||!j.subjectIds.includes(N.subjectId)):n,wn=_.useMemo(()=>{const j=e===2?" (2- )":"";if(v){if(m==="teacher"){const re=n.find(Fe=>Fe.id===v);return re?re.name+j:""+j}if(m==="class"){const re=s.find(Fe=>Fe.id===v);return re?re.name+j:""+j}if(m==="subject"){const re=r.find(Fe=>Fe.id===v);return re?re.name+j:""+j}if(m==="week"){const re=s.find(Fe=>Fe.id===v);return re?re.name+j:""+j}}return`  ${C}`+j},[v,m,n,s,r,C,e]),vr=!!v,lt=_.useMemo(()=>vr?wt:ie,[vr,ie]),qr=_.useMemo(()=>vr?bn[B].map(j=>({id:j.toString(),name:`${j} `})):ae(),[vr,B,ae]),Xt=(j,re)=>{if(vr){const Fe=parseInt(j),Ce=re;let Ve=p.filter(he=>he.shift===B&&he.period===Fe&&he.day===Ce);return m==="class"||m==="week"?Ve=Ve.filter(he=>he.classId===v):m==="teacher"?Ve=Ve.filter(he=>he.teacherId===v):m==="subject"&&(Ve=Ve.filter(he=>he.subjectId===v)),Ve}else return te(j,re)},Ds=m==="week"?wt:ie,yn=(j,re,Fe)=>{W({isOpen:!0,type:j,day:re||"",classId:Fe||""})},Tr=async()=>{let j=[...p];H.type==="clearAll"?j=[]:H.type==="clearDay"&&H.day?j=j.filter(re=>re.day!==H.day):H.type==="clearClass"&&H.classId&&(j=j.filter(re=>re.classId!==H.classId)),await w(j),W({isOpen:!1,type:"",day:"",classId:""}),P(!1)},cn=(j,re,Fe)=>t&&j.length===0?null:a.jsxs("div",{className:"h-full flex flex-col gap-1",children:[j.map(Ce=>{const Ve=r.find(jt=>jt.id===Ce.subjectId),he=n.find(jt=>jt.id===Ce.teacherId),Ue=s.find(jt=>jt.id===Ce.classId),Ie=me(Ce),at=A.find(jt=>jt.id===Ce.roomId),Br=at?at.name:Ce.roomId;return a.jsxs("div",{draggable:!t,onDragStart:t?void 0:jt=>tt(jt,Ce),onDragEnd:t?void 0:kt,onClick:t?void 0:()=>et(Ce),onContextMenu:t?void 0:jt=>Ee(jt,Ce,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Ie.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Ie.length===0&&(Ve!=null&&Ve.color)?{backgroundColor:`${Ve.color}40`}:{},children:[a.jsxs("div",{className:"flex justify-between items-center gap-1",children:[a.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:m==="subject"||m==="week"?Ue==null?void 0:Ue.name:Ve==null?void 0:Ve.name}),Ce.direction&&a.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Ce.direction})]}),m==="week"&&a.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:Ve==null?void 0:Ve.name}),a.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[a.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:he==null?void 0:he.name,children:[a.jsx(M,{name:m==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),a.jsx("span",{className:"truncate",children:m==="teacher"?Ue==null?void 0:Ue.name:he==null?void 0:he.name})]}),Br&&a.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:at?`: ${at.capacity}, : ${at.type}`:"",children:Br})]}),Ie.length>0&&a.jsx("button",{onClick:jt=>ze(jt,Ce),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-[10px] font-bold shadow-sm hover:bg-red-600 hover:scale-110 transition-all z-10",title:"   ",children:"!"})]},Ce.id)}),!t&&j.length<3&&a.jsx("button",{onClick:()=>At(Fe,typeof re=="number"?re:parseInt(Fe),m==="week"?re:C),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:a.jsx(M,{name:"Plus",size:16})})]}),vn=()=>{if(!v)return a.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const j=p.filter(re=>re.day===C&&re.shift===B&&(m==="class"&&re.classId===v||m==="teacher"&&re.teacherId===v||m==="subject"&&re.subjectId===v)).sort((re,Fe)=>re.period-Fe.period);return j.length===0?a.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",C,"  ",B,"."]}):a.jsx("div",{className:"p-4 space-y-4",children:j.map(re=>{const Fe=r.find(at=>at.id===re.subjectId),Ce=n.find(at=>at.id===re.teacherId),Ve=s.find(at=>at.id===re.classId),he=A.find(at=>at.id===re.roomId),Ue=he?he.name:re.roomId,Ie=me(re);return a.jsxs("div",{onClick:t?void 0:()=>et(re),className:`rounded-xl p-4 shadow-sm border ${Ie.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[re.period," "]}),Ie.length>0&&a.jsx("button",{onClick:at=>ze(at,re),className:"bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-sm",children:"!"})]}),a.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[Fe==null?void 0:Fe.name," ",re.direction&&`(${re.direction})`]}),a.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[Ve==null?void 0:Ve.name,"  ",Ce==null?void 0:Ce.name]}),Ue&&a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Ue]})]},re.id)})})};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:a.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Ke.visible&&a.jsx(XO,{x:Ke.x,y:Ke.y,onClose:()=>Ae({...Ke,visible:!1}),actions:pt}),a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[a.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>E(de.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),a.jsx("button",{onClick:()=>E(de.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),m!=="week"&&a.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:wt.map(j=>a.jsx("button",{onClick:()=>b(j),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${C===j?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:j},j))}),!t&&a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:a.jsx(M,{name:"RotateCcw",size:18})}),a.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:a.jsx(M,{name:"RotateCw",size:18})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[a.jsx("button",{onClick:()=>{y("class"),k("")},className:`p-2 rounded-md ${m==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:a.jsx(M,{name:"GraduationCap",size:18})}),a.jsx("button",{onClick:()=>{y("teacher"),k("")},className:`p-2 rounded-md ${m==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:a.jsx(M,{name:"Users",size:18})}),a.jsx("button",{onClick:()=>{y("subject"),k("")},className:`p-2 rounded-md ${m==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:a.jsx(M,{name:"BookOpen",size:18})}),a.jsx("button",{onClick:()=>{var j;y("week"),k(((j=s[0])==null?void 0:j.id)||"")},className:`p-2 rounded-md ${m==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:a.jsx(M,{name:"Calendar",size:18})})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[a.jsx(M,{name:"Filter",size:16,className:"text-slate-400"}),a.jsxs("select",{value:v,onChange:j=>k(j.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[a.jsxs("option",{value:"",children:[" ",m==="class"?"":m==="teacher"?"":m==="week"?" ()":""]}),(m==="class"||m==="week")&&s.filter(j=>j.shift===B).map(j=>a.jsx("option",{value:j.id,children:j.name},j.id)),m==="teacher"&&n.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id)),m==="subject"&&r.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})]}),a.jsx("input",{placeholder:"...",value:R,onChange:j=>L(j.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),a.jsx("input",{placeholder:"...",value:U,onChange:j=>Oe(j.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&a.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[a.jsx(M,{name:"List",size:16})," . ."]}),(v||m==="week")&&a.jsx("button",{onClick:()=>Xe(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:a.jsx(M,{name:"Printer",size:16})})]})]}),Et&&!t&&v&&a.jsx("div",{className:"flex justify-center mb-4 no-print",children:a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>ue(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Wt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:a.jsx(M,{name:"Columns",size:16})}),a.jsx("button",{onClick:()=>ue(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${Wt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:a.jsx(M,{name:"Rows",size:16})})]})}),a.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:a.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Et&&Wt&&!t&&v?vn():a.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:m==="week"?"":m==="class"?"":m==="teacher"?"":""}),Ds.map(j=>a.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:m==="week"?j:`${j} `},j))]})}),a.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:ee.length>0?ee.map(j=>a.jsxs("tr",{children:[a.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:j.name}),Ds.map(re=>{const Fe=te(j.id,re),Ce=`${j.id}-${re}`,Ve={rowId:j.id,colKey:re};return a.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${wr===Ce?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:he=>Ee(he,null,Ve),onDragOver:t?void 0:he=>xt(he,Ve),onDrop:t?void 0:he=>bt(he,Ve),children:cn(Fe,re,j.id)},re)})]},j.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),a.jsx(jr,{isOpen:I,onClose:()=>Q(!1),title:N.id?" ":" ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[a.jsxs("span",{children:[": ",N.day]}),a.jsxs("span",{children:[": ",N.period]}),a.jsxs("span",{children:[": ",N.shift===de.First?"1 ":"2 "]})]}),Re.length>0&&a.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Re.map(j=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M,{name:"AlertTriangle",size:14}),j]},j))}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),a.jsx(Tc,{options:s.filter(j=>j.shift===B).map(j=>({value:j.id,label:j.name})),value:N.classId||null,onChange:j=>{S({...N,classId:j}),Ye({...N,classId:j})},placeholder:" "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),a.jsx(Tc,{options:r.map(j=>({value:j.id,label:j.name})),value:N.subjectId||null,onChange:j=>{S({...N,subjectId:j}),Ye({...N,subjectId:j})},placeholder:" "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),a.jsx(Tc,{options:[{label:"",options:vt.map(j=>({value:j.id,label:j.name}))},{label:"",options:yr.map(j=>({value:j.id,label:j.name}))}],value:N.teacherId||null,onChange:j=>S({...N,teacherId:j}),placeholder:" ",groupBy:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:N.direction||"",onChange:j=>S({...N,direction:j.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),a.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:N.roomId||"",onChange:j=>{S({...N,roomId:j.target.value}),Ye({...N,roomId:j.target.value})},children:[a.jsx("option",{value:"",children:" "}),A.map(j=>a.jsxs("option",{value:j.id,children:[j.name," (",j.capacity," )"]},j.id))]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[N.id&&a.jsx("button",{onClick:()=>fe(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),a.jsx("button",{onClick:$e,className:"btn-primary btn-ripple",children:""})]})]})}),a.jsx(jr,{isOpen:T,onClose:()=>P(!1),title:"   ",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),a.jsx("button",{onClick:()=>yn("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),a.jsx("div",{className:"flex gap-2",children:a.jsx("select",{value:Be,onChange:j=>ne(j.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:wt.map(j=>a.jsx("option",{value:j,children:j},j))})}),a.jsxs("button",{onClick:()=>yn("clearDay",Be),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",Be]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("select",{value:G,onChange:j=>J(j.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[a.jsx("option",{value:"",disabled:!0,children:" "}),s.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})}),a.jsx("button",{onClick:()=>{G&&yn("clearClass",void 0,G)},disabled:!G,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),a.jsxs(jr,{isOpen:H.isOpen,onClose:()=>W({...H,isOpen:!1}),title:"",children:[a.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>W({...H,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),a.jsx("button",{onClick:Tr,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),a.jsx(jr,{isOpen:q,onClose:()=>$(!1),title:" ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"     :"}),a.jsx("div",{className:"space-y-3",children:Se&&Se.conflicts.length>0?Se.conflicts.map((j,re)=>a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-3 flex items-start gap-3",children:[a.jsx(M,{name:"AlertTriangle",className:"text-red-500 shrink-0 mt-0.5",size:18}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-red-700 dark:text-red-300 text-sm mb-1",children:j.type}),a.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:j.description})]})]},re)):a.jsx("p",{className:"text-center text-slate-400 py-4",children:" "})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-bold hover:bg-slate-300 transition text-sm",children:""})})]})}),We&&a.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[a.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[a.jsx(M,{name:"Printer",size:16})," "]}),a.jsx("button",{onClick:()=>Xe(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:wn}),a.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),a.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:vr||m==="week"?"":m==="class"?"":m==="teacher"?"":""}),lt.map(j=>a.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:vr||m==="week"?j:`${j} `},j))]})}),a.jsx("tbody",{children:qr.map(j=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:j.name}),lt.map(re=>{const Fe=Xt(j.id,re);return a.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:Fe.map(Ce=>{const Ve=r.find(ss=>ss.id===Ce.subjectId),he=n.find(ss=>ss.id===Ce.teacherId),Ue=s.find(ss=>ss.id===Ce.classId),Ie=A.find(ss=>ss.id===Ce.roomId),at=Ie?Ie.name:Ce.roomId,Br=m==="teacher",Sa=m==="subject"||m==="week"||vr&&Br?Ue==null?void 0:Ue.name:Ve==null?void 0:Ve.name,Ua=Br?Ue==null?void 0:Ue.name:he==null?void 0:he.name;return a.jsxs("div",{className:"mb-1",children:[a.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Sa,Ce.direction&&` (${Ce.direction})`]}),a.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[a.jsx("span",{children:Ua}),at&&a.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:at})]})]},Ce.id)})},re)})]},j.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T0=function(t,e){return T0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},T0(t,e)};function ms(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");T0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var F0=function(){return F0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},F0.apply(this,arguments)};function hn(t,e,r,n){function s(A){return A instanceof r?A:new r(function(i){i(A)})}return new(r||(r=Promise))(function(A,i){function o(d){try{c(n.next(d))}catch(h){i(h)}}function l(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(o,l)}c((n=n.apply(t,[])).next())})}function tn(t,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,s,A,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){r.label=c[1];break}if(c[0]===6&&r.label<A[1]){r.label=A[1],A=c;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(c);break}A[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Fd(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,A;n<s;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||e)}var cA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Ug=function(t,e){return cA.fromClientRect(t,e.getBoundingClientRect())},aH=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new cA(0,0,n,s)},Qg=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},dr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},qb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Sd=0;Sd<qb.length;Sd++)oH[qb.charCodeAt(Sd)]=Sd;var Xb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ac=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ud=0;Ud<Xb.length;Ud++)Ac[Xb.charCodeAt(Ud)]=Ud;var lH=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Ac[t.charCodeAt(n)],i=Ac[t.charCodeAt(n+1)],o=Ac[t.charCodeAt(n+2)],l=Ac[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return c},cH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},uH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Aa=5,ly=11,Np=2,dH=ly-Aa,lT=65536>>Aa,hH=1<<Aa,Rp=hH-1,fH=1024>>Aa,gH=lT+fH,pH=gH,mH=32,xH=pH+mH,wH=65536>>ly,yH=1<<dH,vH=yH-1,Jb=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},BH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},bH=function(t,e){var r=lH(t),n=Array.isArray(r)?uH(r):new Uint32Array(r),s=Array.isArray(r)?cH(r):new Uint16Array(r),A=24,i=Jb(s,A/2,n[4]/2),o=n[5]===2?Jb(s,(A+n[4])/2):BH(n,Math.ceil((A+n[4])/4));return new CH(n[0],n[1],n[2],n[3],i,o)},CH=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Aa],r=(r<<Np)+(e&Rp),this.data[r];if(e<=65535)return r=this.index[lT+(e-55296>>Aa)],r=(r<<Np)+(e&Rp),this.data[r];if(e<this.highStart)return r=xH-wH+(e>>ly),r=this.index[r],r+=e>>Aa&vH,r=this.index[r],r=(r<<Np)+(e&Rp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Yb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",IH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qd=0;Qd<Yb.length;Qd++)IH[Yb.charCodeAt(Qd)]=Qd;var _H="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Zb=50,EH=1,cT=2,uT=3,kH=4,TH=5,eC=7,dT=8,tC=9,zA=10,S0=11,rC=12,U0=13,FH=14,ic=15,Q0=16,Nd=17,Gl=18,SH=19,nC=20,N0=21,zl=22,jp=23,Ga=24,Nn=25,ac=26,oc=27,za=28,UH=29,Xi=30,QH=31,Rd=32,jd=33,R0=34,j0=35,D0=36,fu=37,P0=38,Ih=39,_h=40,Dp=41,hT=42,NH=43,RH=[9001,65288],fT="!",dt="",Dd="",L0=bH(_H),Os=[Xi,D0],M0=[EH,cT,uT,TH],gT=[zA,dT],sC=[oc,ac],jH=M0.concat(gT),AC=[P0,Ih,_h,R0,j0],DH=[ic,U0],PH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(A,i){var o=L0.get(A);if(o>Zb?(s.push(!0),o-=Zb):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(i),r.push(Q0);if(o===kH||o===S0){if(i===0)return n.push(i),r.push(Xi);var l=r[i-1];return jH.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(Xi))}if(n.push(i),o===QH)return r.push(e==="strict"?N0:fu);if(o===hT||o===UH)return r.push(Xi);if(o===NH)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(fu):r.push(Xi);r.push(o)}),[n,r,s]},Pp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=r;A<=n.length;){A++;var i=n[A];if(i===e)return!0;if(i!==zA)break}if(s===zA)for(var A=r;A>0;){A--;var o=n[A];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==zA)break}if(o!==zA)break}return!1},iC=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===zA)r--;else return n}return 0},LH=function(t,e,r,n,s){if(r[n]===0)return dt;var A=n-1;if(Array.isArray(s)&&s[A]===!0)return dt;var i=A-1,o=A+1,l=e[A],c=i>=0?e[i]:0,d=e[o];if(l===cT&&d===uT)return dt;if(M0.indexOf(l)!==-1)return fT;if(M0.indexOf(d)!==-1||gT.indexOf(d)!==-1)return dt;if(iC(A,e)===dT)return Dd;if(L0.get(t[A])===S0||(l===Rd||l===jd)&&L0.get(t[o])===S0||l===eC||d===eC||l===tC||[zA,U0,ic].indexOf(l)===-1&&d===tC||[Nd,Gl,SH,Ga,za].indexOf(d)!==-1||iC(A,e)===zl||Pp(jp,zl,A,e)||Pp([Nd,Gl],N0,A,e)||Pp(rC,rC,A,e))return dt;if(l===zA)return Dd;if(l===jp||d===jp)return dt;if(d===Q0||l===Q0)return Dd;if([U0,ic,N0].indexOf(d)!==-1||l===FH||c===D0&&DH.indexOf(l)!==-1||l===za&&d===D0||d===nC||Os.indexOf(d)!==-1&&l===Nn||Os.indexOf(l)!==-1&&d===Nn||l===oc&&[fu,Rd,jd].indexOf(d)!==-1||[fu,Rd,jd].indexOf(l)!==-1&&d===ac||Os.indexOf(l)!==-1&&sC.indexOf(d)!==-1||sC.indexOf(l)!==-1&&Os.indexOf(d)!==-1||[oc,ac].indexOf(l)!==-1&&(d===Nn||[zl,ic].indexOf(d)!==-1&&e[o+1]===Nn)||[zl,ic].indexOf(l)!==-1&&d===Nn||l===Nn&&[Nn,za,Ga].indexOf(d)!==-1)return dt;if([Nn,za,Ga,Nd,Gl].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===Nn)return dt;if([za,Ga].indexOf(f)!==-1)h--;else break}if([oc,ac].indexOf(d)!==-1)for(var h=[Nd,Gl].indexOf(l)!==-1?i:A;h>=0;){var f=e[h];if(f===Nn)return dt;if([za,Ga].indexOf(f)!==-1)h--;else break}if(P0===l&&[P0,Ih,R0,j0].indexOf(d)!==-1||[Ih,R0].indexOf(l)!==-1&&[Ih,_h].indexOf(d)!==-1||[_h,j0].indexOf(l)!==-1&&d===_h||AC.indexOf(l)!==-1&&[nC,ac].indexOf(d)!==-1||AC.indexOf(d)!==-1&&l===oc||Os.indexOf(l)!==-1&&Os.indexOf(d)!==-1||l===Ga&&Os.indexOf(d)!==-1||Os.concat(Nn).indexOf(l)!==-1&&d===zl&&RH.indexOf(t[o])===-1||Os.concat(Nn).indexOf(d)!==-1&&l===Gl)return dt;if(l===Dp&&d===Dp){for(var p=r[A],w=1;p>0&&(p--,e[p]===Dp);)w++;if(w%2!==0)return dt}return l===Rd&&d===jd?dt:Dd},MH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=PH(t,e.lineBreak),n=r[0],s=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Nn,Xi,hT].indexOf(o)!==-1?fu:o}));var i=e.wordBreak==="keep-all"?A.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,i]},OH=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===fT,this.start=n,this.end=s}return t.prototype.slice=function(){return dr.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),HH=function(t,e){var r=Qg(t),n=MH(r,e),s=n[0],A=n[1],i=n[2],o=r.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=dt;c<o&&(d=LH(r,A,s,++c,i))===dt;);if(d!==dt||c===o){var h=new OH(r,d,l,c);return l=c,{value:h,done:!1}}return{done:!0,value:null}}}},VH=1,KH=2,Gu=4,aC=8,If=10,oC=47,Fc=92,GH=9,zH=32,Pd=34,$l=61,$H=35,WH=36,qH=37,Ld=39,Md=40,Wl=41,XH=95,Cn=45,JH=33,YH=60,ZH=62,eV=64,tV=91,rV=93,nV=61,sV=123,Od=63,AV=125,lC=124,iV=126,aV=128,cC=65533,Lp=42,ea=43,oV=44,lV=58,cV=59,gu=46,uV=0,dV=8,hV=11,fV=14,gV=31,pV=127,vs=-1,pT=48,mT=97,xT=101,mV=102,xV=117,wV=122,wT=65,yT=69,vT=70,yV=85,vV=90,sn=function(t){return t>=pT&&t<=57},BV=function(t){return t>=55296&&t<=57343},$a=function(t){return sn(t)||t>=wT&&t<=vT||t>=mT&&t<=mV},bV=function(t){return t>=mT&&t<=wV},CV=function(t){return t>=wT&&t<=vV},IV=function(t){return bV(t)||CV(t)},_V=function(t){return t>=aV},Hd=function(t){return t===If||t===GH||t===zH},_f=function(t){return IV(t)||_V(t)||t===XH},uC=function(t){return _f(t)||sn(t)||t===Cn},EV=function(t){return t>=uV&&t<=dV||t===hV||t>=fV&&t<=gV||t===pV},SA=function(t,e){return t!==Fc?!1:e!==If},Vd=function(t,e,r){return t===Cn?_f(e)||SA(e,r):_f(t)?!0:!!(t===Fc&&SA(t,e))},Mp=function(t,e,r){return t===ea||t===Cn?sn(e)?!0:e===gu&&sn(r):sn(t===gu?e:t)},kV=function(t){var e=0,r=1;(t[e]===ea||t[e]===Cn)&&(t[e]===Cn&&(r=-1),e++);for(var n=[];sn(t[e]);)n.push(t[e++]);var s=n.length?parseInt(dr.apply(void 0,n),10):0;t[e]===gu&&e++;for(var A=[];sn(t[e]);)A.push(t[e++]);var i=A.length,o=i?parseInt(dr.apply(void 0,A),10):0;(t[e]===yT||t[e]===xT)&&e++;var l=1;(t[e]===ea||t[e]===Cn)&&(t[e]===Cn&&(l=-1),e++);for(var c=[];sn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(dr.apply(void 0,c),10):0;return r*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},TV={type:2},FV={type:3},SV={type:4},UV={type:13},QV={type:8},NV={type:21},RV={type:9},jV={type:10},DV={type:11},PV={type:12},LV={type:14},Kd={type:23},MV={type:1},OV={type:25},HV={type:24},VV={type:26},KV={type:27},GV={type:28},zV={type:29},$V={type:31},O0={type:32},BT=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Qg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==O0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Pd:return this.consumeStringToken(Pd);case $H:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(uC(r)||SA(n,s)){var A=Vd(r,n,s)?KH:VH,i=this.consumeName();return{type:5,value:i,flags:A}}break;case WH:if(this.peekCodePoint(0)===$l)return this.consumeCodePoint(),UV;break;case Ld:return this.consumeStringToken(Ld);case Md:return TV;case Wl:return FV;case Lp:if(this.peekCodePoint(0)===$l)return this.consumeCodePoint(),LV;break;case ea:if(Mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case oV:return SV;case Cn:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Mp(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Vd(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Cn&&c===ZH)return this.consumeCodePoint(),this.consumeCodePoint(),HV;break;case gu:if(Mp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case oC:if(this.peekCodePoint(0)===Lp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Lp&&(d=this.consumeCodePoint(),d===oC))return this.consumeToken();if(d===vs)return this.consumeToken()}break;case lV:return VV;case cV:return KV;case YH:if(this.peekCodePoint(0)===JH&&this.peekCodePoint(1)===Cn&&this.peekCodePoint(2)===Cn)return this.consumeCodePoint(),this.consumeCodePoint(),OV;break;case eV:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Vd(h,f,p)){var i=this.consumeName();return{type:7,value:i}}break;case tV:return GV;case Fc:if(SA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case rV:return zV;case nV:if(this.peekCodePoint(0)===$l)return this.consumeCodePoint(),QV;break;case sV:return DV;case AV:return PV;case xV:case yV:var w=this.peekCodePoint(0),B=this.peekCodePoint(1);return w===ea&&($a(B)||B===Od)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case lC:if(this.peekCodePoint(0)===$l)return this.consumeCodePoint(),RV;if(this.peekCodePoint(0)===lC)return this.consumeCodePoint(),NV;break;case iV:if(this.peekCodePoint(0)===$l)return this.consumeCodePoint(),jV;break;case vs:return O0}return Hd(e)?(this.consumeWhiteSpace(),$V):sn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):_f(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:dr(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();$a(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Od&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(dr.apply(void 0,e.map(function(l){return l===Od?pT:l})),16),A=parseInt(dr.apply(void 0,e.map(function(l){return l===Od?vT:l})),16);return{type:30,start:s,end:A}}var i=parseInt(dr.apply(void 0,e),16);if(this.peekCodePoint(0)===Cn&&$a(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];$a(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var A=parseInt(dr.apply(void 0,o),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Md?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Md?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===vs)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Ld||r===Pd){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===vs||this.peekCodePoint(0)===Wl)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Kd)}for(;;){var s=this.consumeCodePoint();if(s===vs||s===Wl)return{type:22,value:dr.apply(void 0,e)};if(Hd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===vs||this.peekCodePoint(0)===Wl?(this.consumeCodePoint(),{type:22,value:dr.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Kd);if(s===Pd||s===Ld||s===Md||EV(s))return this.consumeBadUrlRemnants(),Kd;if(s===Fc)if(SA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Kd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Hd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Wl||e===vs)return;SA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=dr.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===vs||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===If)return this._value.splice(0,n),MV;if(s===Fc){var A=this._value[n+1];A!==vs&&A!==void 0&&(A===If?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):SA(s,A)&&(r+=this.consumeStringSlice(n),r+=dr(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Gu,n=this.peekCodePoint(0);for((n===ea||n===Cn)&&e.push(this.consumeCodePoint());sn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===gu&&sn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=aC;sn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===yT||n===xT)&&((s===ea||s===Cn)&&sn(A)||sn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=aC;sn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[kV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Vd(s,A,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===qH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if($a(e)){for(var r=dr(e);$a(this.peekCodePoint(0))&&r.length<6;)r+=dr(this.consumeCodePoint());Hd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||BV(n)||n>1114111?cC:n}return e===vs?cC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(uC(r))e+=dr(r);else if(SA(r,this.peekCodePoint(0)))e+=dr(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),bT=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new BT;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||qV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?O0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),zu=function(t){return t.type===15},Bl=function(t){return t.type===17},Ut=function(t){return t.type===20},WV=function(t){return t.type===0},H0=function(t,e){return Ut(t)&&t.value===e},CT=function(t){return t.type!==31},rl=function(t){return t.type!==31&&t.type!==4},Rs=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},qV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},bi=function(t){return t.type===17||t.type===15},mr=function(t){return t.type===16||bi(t)},IT=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Gr={type:17,number:0,flags:Gu},cy={type:16,number:50,flags:Gu},$A={type:16,number:100,flags:Gu},lc=function(t,e,r){var n=t[0],s=t[1];return[Ot(n,e),Ot(typeof s<"u"?s:n,r)]},Ot=function(t,e){if(t.type===16)return t.number/100*e;if(zu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},_T="deg",ET="grad",kT="rad",TT="turn",Ng={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case _T:return Math.PI*e.number/180;case ET:return Math.PI/200*e.number;case kT:return e.number;case TT:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},FT=function(t){return t.type===15&&(t.unit===_T||t.unit===ET||t.unit===kT||t.unit===TT)},ST=function(t){var e=t.filter(Ut).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Gr,Gr];case"to top":case"bottom":return Zn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Gr,$A];case"to right":case"left":return Zn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$A,$A];case"to bottom":case"top":return Zn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$A,Gr];case"to left":case"right":return Zn(270)}return 0},Zn=function(t){return Math.PI*t/180},li={name:"color",parse:function(t,e){if(e.type===18){var r=XV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return WA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return WA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return WA(parseInt(n,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return WA(parseInt(n,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var o=tA[e.value.toUpperCase()];if(typeof o<"u")return o}return tA.TRANSPARENT}},ci=function(t){return(255&t)===0},Ur=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},WA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},dC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},hC=function(t,e){var r=e.filter(rl);if(r.length===3){var n=r.map(dC),s=n[0],A=n[1],i=n[2];return WA(s,A,i,1)}if(r.length===4){var o=r.map(dC),s=o[0],A=o[1],i=o[2],l=o[3];return WA(s,A,i,l)}return 0};function Op(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var fC=function(t,e){var r=e.filter(rl),n=r[0],s=r[1],A=r[2],i=r[3],o=(n.type===17?Zn(n.number):Ng.parse(t,n))/(Math.PI*2),l=mr(s)?s.number/100:0,c=mr(A)?A.number/100:0,d=typeof i<"u"&&mr(i)?Ot(i,1):1;if(l===0)return WA(c*255,c*255,c*255,1);var h=c<=.5?c*(l+1):c+l-c*l,f=c*2-h,p=Op(f,h,o+1/3),w=Op(f,h,o),B=Op(f,h,o-1/3);return WA(p*255,w*255,B*255,d)},XV={hsl:fC,hsla:fC,rgb:hC,rgba:hC},Sc=function(t,e){return li.parse(t,bT.create(e).parseComponentValue())},tA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},JV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ut(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},YV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rg=function(t,e){var r=li.parse(t,e[0]),n=e[1];return n&&mr(n)?{color:r,stop:n}:{color:r,stop:null}},gC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Gr),n.stop===null&&(n.stop=$A);for(var s=[],A=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=Ot(o,e);l>A?s.push(l):s.push(A),A=l}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],p=(d-f)/(h+1),w=1;w<=h;w++)s[c+w-1]=p*w;c=null}}return t.map(function(B,E){var C=B.color;return{color:C,stop:Math.max(Math.min(1,s[E]/e),0)}})},ZV=function(t,e,r){var n=e/2,s=r/2,A=Ot(t[0],e)-n,i=s-Ot(t[1],r);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},e3=function(t,e,r){var n=typeof t=="number"?t:ZV(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,i=r/2,o=s/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[s,A-c,A+c,i-l,i+l]},os=function(t,e){return Math.sqrt(t*t+e*e)},pC=function(t,e,r,n,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,o){var l=o[0],c=o[1],d=os(r-l,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},t3=function(t,e,r,n,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)A=i=Math.min(os(e,r),os(e,r-s),os(e-n,r),os(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=pC(n,s,e,r,!0),c=l[0],d=l[1];A=os(c-e,(d-r)/o),i=o*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)A=i=Math.max(os(e,r),os(e,r-s),os(e-n,r),os(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=pC(n,s,e,r,!1),c=h[0],d=h[1];A=os(c-e,(d-r)/o),i=o*A}break}return Array.isArray(t.size)&&(A=Ot(t.size[0],n),i=t.size.length===2?Ot(t.size[1],s):A),[A,i]},r3=function(t,e){var r=Zn(180),n=[];return Rs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){r=ST(s);return}else if(FT(i)){r=Ng.parse(t,i);return}}var o=Rg(t,s);n.push(o)}),{angle:r,stops:n,type:1}},Gd=function(t,e){var r=Zn(180),n=[];return Rs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=ST(s);return}else if(FT(i)){r=(Ng.parse(t,i)+Zn(270))%Zn(360);return}}var o=Rg(t,s);n.push(o)}),{angle:r,stops:n,type:1}},n3=function(t,e){var r=Zn(180),n=[],s=1,A=0,i=3,o=[];return Rs(e).forEach(function(l,c){var d=l[0];if(c===0){if(Ut(d)&&d.value==="linear"){s=1;return}else if(Ut(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=li.parse(t,d.values[0]);n.push({stop:Gr,color:h})}else if(d.name==="to"){var h=li.parse(t,d.values[0]);n.push({stop:$A,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(rl);if(f.length===2){var h=li.parse(t,f[1]),p=f[0];Bl(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),s===1?{angle:(r+Zn(180))%Zn(360),stops:n,type:s}:{size:i,shape:A,stops:n,position:o,type:s}},UT="closest-side",QT="farthest-side",NT="closest-corner",RT="farthest-corner",jT="circle",DT="ellipse",PT="cover",LT="contain",s3=function(t,e){var r=0,n=3,s=[],A=[];return Rs(e).forEach(function(i,o){var l=!0;if(o===0){var c=!1;l=i.reduce(function(h,f){if(c)if(Ut(f))switch(f.value){case"center":return A.push(cy),h;case"top":case"left":return A.push(Gr),h;case"right":case"bottom":return A.push($A),h}else(mr(f)||bi(f))&&A.push(f);else if(Ut(f))switch(f.value){case jT:return r=0,!1;case DT:return r=1,!1;case"at":return c=!0,!1;case UT:return n=0,!1;case PT:case QT:return n=1,!1;case LT:case NT:return n=2,!1;case RT:return n=3,!1}else if(bi(f)||mr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},l)}if(l){var d=Rg(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:A,type:2}},zd=function(t,e){var r=0,n=3,s=[],A=[];return Rs(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(Ut(h))switch(h.value){case"center":return A.push(cy),!1;case"top":case"left":return A.push(Gr),!1;case"right":case"bottom":return A.push($A),!1}else if(mr(h)||bi(h))return A.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(Ut(h))switch(h.value){case jT:return r=0,!1;case DT:return r=1,!1;case LT:case UT:return n=0,!1;case QT:return n=1,!1;case NT:return n=2,!1;case PT:case RT:return n=3,!1}else if(bi(h)||mr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var c=Rg(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:A,type:2}},A3=function(t){return t.type===1},i3=function(t){return t.type===2},uy={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=MT[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function a3(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!MT[t.name])}var MT={"linear-gradient":r3,"-moz-linear-gradient":Gd,"-ms-linear-gradient":Gd,"-o-linear-gradient":Gd,"-webkit-linear-gradient":Gd,"radial-gradient":s3,"-moz-radial-gradient":zd,"-ms-radial-gradient":zd,"-o-radial-gradient":zd,"-webkit-radial-gradient":zd,"-webkit-gradient":n3},o3={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return rl(n)&&a3(n)}).map(function(n){return uy.parse(t,n)})}},l3={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ut(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},c3={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Rs(e).map(function(r){return r.filter(mr)}).map(IT)}},u3={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Rs(e).map(function(r){return r.filter(Ut).map(function(n){return n.value}).join(" ")}).map(d3)}},d3=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Fo;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Fo||(Fo={}));var h3={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Rs(e).map(function(r){return r.filter(f3)})}},f3=function(t){return Ut(t)||mr(t)},jg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},g3=jg("top"),p3=jg("right"),m3=jg("bottom"),x3=jg("left"),Dg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return IT(r.filter(mr))}}},w3=Dg("top-left"),y3=Dg("top-right"),v3=Dg("bottom-right"),B3=Dg("bottom-left"),Pg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},b3=Pg("top"),C3=Pg("right"),I3=Pg("bottom"),_3=Pg("left"),Lg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return zu(r)?r.number:0}}},E3=Lg("top"),k3=Lg("right"),T3=Lg("bottom"),F3=Lg("left"),S3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},U3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Q3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ut).reduce(function(r,n){return r|N3(n.value)},0)}},N3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},R3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},j3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Ef;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Ef||(Ef={}));var D3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Ef.STRICT;case"normal":default:return Ef.NORMAL}}},P3={name:"line-height",initialValue:"normal",prefix:!1,type:4},mC=function(t,e){return Ut(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:mr(t)?Ot(t,e):e},L3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:uy.parse(t,e)}},M3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},V0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Mg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},O3=Mg("top"),H3=Mg("right"),V3=Mg("bottom"),K3=Mg("left"),G3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ut).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},z3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Og=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},$3=Og("top"),W3=Og("right"),q3=Og("bottom"),X3=Og("left"),J3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Y3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Z3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H0(e[0],"none")?[]:Rs(e).map(function(r){for(var n={color:tA.TRANSPARENT,offsetX:Gr,offsetY:Gr,blur:Gr},s=0,A=0;A<r.length;A++){var i=r[A];bi(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=li.parse(t,i)}return n})}},e5={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},t5={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=s5[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},r5=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},n5=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,A,i,o]:null},s5={matrix:r5,matrix3d:n5},xC={type:16,number:50,flags:Gu},A5=[xC,xC],i5={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(mr);return r.length!==2?A5:[r[0],r[1]]}},a5={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Uc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Uc||(Uc={}));var o5={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Uc.BREAK_ALL;case"keep-all":return Uc.KEEP_ALL;case"normal":default:return Uc.NORMAL}}},l5={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Bl(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},OT={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},c5={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Bl(e)?e.number:1}},u5={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},d5={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ut).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},h5={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},f5={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},g5={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Bl(e))return e.number;if(Ut(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},p5={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ut).map(function(r){return r.value})}},m5={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ir=function(t,e){return(t&e)!==0},x5={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},w5={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(CT),A=0;A<s.length;A++){var i=s[A],o=s[A+1];if(i.type===20){var l=o&&Bl(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},y5={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(CT),s=0;s<n.length;s++){var A=n[s],i=n[s+1];if(Ut(A)&&A.value!=="none"){var o=i&&Bl(i)?i.number:0;r.push({counter:A.value,reset:o})}}return r}},v5={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(zu).map(function(r){return OT.parse(t,r)})}},B5={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(WV);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,o=s[A+1].value;n.push({open:i,close:o})}return n}},wC=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},b5={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&H0(e[0],"none")?[]:Rs(e).map(function(r){for(var n={color:255,offsetX:Gr,offsetY:Gr,blur:Gr,spread:Gr,inset:!1},s=0,A=0;A<r.length;A++){var i=r[A];H0(i,"inset")?n.inset=!0:bi(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=li.parse(t,i)}return n})}},C5={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ut).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},I5={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},_5={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return zu(e)?e.number:0}},E5=function(){function t(e,r){var n,s;this.animationDuration=je(e,v5,r.animationDuration),this.backgroundClip=je(e,JV,r.backgroundClip),this.backgroundColor=je(e,YV,r.backgroundColor),this.backgroundImage=je(e,o3,r.backgroundImage),this.backgroundOrigin=je(e,l3,r.backgroundOrigin),this.backgroundPosition=je(e,c3,r.backgroundPosition),this.backgroundRepeat=je(e,u3,r.backgroundRepeat),this.backgroundSize=je(e,h3,r.backgroundSize),this.borderTopColor=je(e,g3,r.borderTopColor),this.borderRightColor=je(e,p3,r.borderRightColor),this.borderBottomColor=je(e,m3,r.borderBottomColor),this.borderLeftColor=je(e,x3,r.borderLeftColor),this.borderTopLeftRadius=je(e,w3,r.borderTopLeftRadius),this.borderTopRightRadius=je(e,y3,r.borderTopRightRadius),this.borderBottomRightRadius=je(e,v3,r.borderBottomRightRadius),this.borderBottomLeftRadius=je(e,B3,r.borderBottomLeftRadius),this.borderTopStyle=je(e,b3,r.borderTopStyle),this.borderRightStyle=je(e,C3,r.borderRightStyle),this.borderBottomStyle=je(e,I3,r.borderBottomStyle),this.borderLeftStyle=je(e,_3,r.borderLeftStyle),this.borderTopWidth=je(e,E3,r.borderTopWidth),this.borderRightWidth=je(e,k3,r.borderRightWidth),this.borderBottomWidth=je(e,T3,r.borderBottomWidth),this.borderLeftWidth=je(e,F3,r.borderLeftWidth),this.boxShadow=je(e,b5,r.boxShadow),this.color=je(e,S3,r.color),this.direction=je(e,U3,r.direction),this.display=je(e,Q3,r.display),this.float=je(e,R3,r.cssFloat),this.fontFamily=je(e,h5,r.fontFamily),this.fontSize=je(e,f5,r.fontSize),this.fontStyle=je(e,m5,r.fontStyle),this.fontVariant=je(e,p5,r.fontVariant),this.fontWeight=je(e,g5,r.fontWeight),this.letterSpacing=je(e,j3,r.letterSpacing),this.lineBreak=je(e,D3,r.lineBreak),this.lineHeight=je(e,P3,r.lineHeight),this.listStyleImage=je(e,L3,r.listStyleImage),this.listStylePosition=je(e,M3,r.listStylePosition),this.listStyleType=je(e,V0,r.listStyleType),this.marginTop=je(e,O3,r.marginTop),this.marginRight=je(e,H3,r.marginRight),this.marginBottom=je(e,V3,r.marginBottom),this.marginLeft=je(e,K3,r.marginLeft),this.opacity=je(e,c5,r.opacity);var A=je(e,G3,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=je(e,z3,r.overflowWrap),this.paddingTop=je(e,$3,r.paddingTop),this.paddingRight=je(e,W3,r.paddingRight),this.paddingBottom=je(e,q3,r.paddingBottom),this.paddingLeft=je(e,X3,r.paddingLeft),this.paintOrder=je(e,C5,r.paintOrder),this.position=je(e,Y3,r.position),this.textAlign=je(e,J3,r.textAlign),this.textDecorationColor=je(e,u5,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=je(e,d5,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=je(e,Z3,r.textShadow),this.textTransform=je(e,e5,r.textTransform),this.transform=je(e,t5,r.transform),this.transformOrigin=je(e,i5,r.transformOrigin),this.visibility=je(e,a5,r.visibility),this.webkitTextStrokeColor=je(e,I5,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=je(e,_5,r.webkitTextStrokeWidth),this.wordBreak=je(e,o5,r.wordBreak),this.zIndex=je(e,l5,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return ci(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ir(this.display,4)||Ir(this.display,33554432)||Ir(this.display,268435456)||Ir(this.display,536870912)||Ir(this.display,67108864)||Ir(this.display,134217728)},t}(),k5=function(){function t(e,r){this.content=je(e,x5,r.content),this.quotes=je(e,B5,r.quotes)}return t}(),yC=function(){function t(e,r){this.counterIncrement=je(e,w5,r.counterIncrement),this.counterReset=je(e,y5,r.counterReset)}return t}(),je=function(t,e,r){var n=new BT,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var A=new bT(n.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,Ut(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return Ng.parse(t,A.parseComponentValue());case"color":return li.parse(t,A.parseComponentValue());case"image":return uy.parse(t,A.parseComponentValue());case"length":var o=A.parseComponentValue();return bi(o)?o:Gr;case"length-percentage":var l=A.parseComponentValue();return mr(l)?l:Gr;case"time":return OT.parse(t,A.parseComponentValue())}break}},T5="data-html2canvas-debug",F5=function(t){var e=t.getAttribute(T5);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},K0=function(t,e){var r=F5(t);return r===1||e===r},js=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,K0(r,3))debugger;this.styles=new E5(e,window.getComputedStyle(r,null)),$0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Ug(this.context,r),K0(r,4)&&(this.flags|=16)}return t}(),S5="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $d=0;$d<vC.length;$d++)cc[vC.charCodeAt($d)]=$d;var U5=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=cc[t.charCodeAt(n)],i=cc[t.charCodeAt(n+1)],o=cc[t.charCodeAt(n+2)],l=cc[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return c},Q5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},N5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},ia=5,dy=11,Hp=2,R5=dy-ia,HT=65536>>ia,j5=1<<ia,Vp=j5-1,D5=1024>>ia,P5=HT+D5,L5=P5,M5=32,O5=L5+M5,H5=65536>>dy,V5=1<<R5,K5=V5-1,BC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},G5=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},z5=function(t,e){var r=U5(t),n=Array.isArray(r)?N5(r):new Uint32Array(r),s=Array.isArray(r)?Q5(r):new Uint16Array(r),A=24,i=BC(s,A/2,n[4]/2),o=n[5]===2?BC(s,(A+n[4])/2):G5(n,Math.ceil((A+n[4])/4));return new $5(n[0],n[1],n[2],n[3],i,o)},$5=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>ia],r=(r<<Hp)+(e&Vp),this.data[r];if(e<=65535)return r=this.index[HT+(e-55296>>ia)],r=(r<<Hp)+(e&Vp),this.data[r];if(e<this.highStart)return r=O5-H5+(e>>dy),r=this.index[r],r+=e>>ia&K5,r=this.index[r],r=(r<<Hp)+(e&Vp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),bC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wd=0;Wd<bC.length;Wd++)W5[bC.charCodeAt(Wd)]=Wd;var q5=1,Kp=2,Gp=3,CC=4,IC=5,X5=7,_C=8,zp=9,$p=10,EC=11,kC=12,TC=13,FC=14,Wp=15,J5=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Y5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},Z5=z5(S5),$n="",qp="",e6=function(t){return Z5.get(t)},t6=function(t,e,r){var n=r-2,s=e[n],A=e[r-1],i=e[r];if(A===Kp&&i===Gp)return $n;if(A===Kp||A===Gp||A===CC||i===Kp||i===Gp||i===CC)return qp;if(A===_C&&[_C,zp,EC,kC].indexOf(i)!==-1||(A===EC||A===zp)&&(i===zp||i===$p)||(A===kC||A===$p)&&i===$p||i===TC||i===IC||i===X5||A===q5)return $n;if(A===TC&&i===FC){for(;s===IC;)s=e[--n];if(s===FC)return $n}if(A===Wp&&i===Wp){for(var o=0;s===Wp;)o++,s=e[--n];if(o%2===0)return $n}return qp},r6=function(t){var e=J5(t),r=e.length,n=0,s=0,A=e.map(e6);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=$n;n<r&&(i=t6(e,A,++n))===$n;);if(i!==$n||n===r){var o=Y5.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},n6=function(t){for(var e=r6(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},s6=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(n),A===e)return!0}}return!1},A6=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=Qg(n.data).map(function(l){return dr(l)}),A=0,i={},o=s.every(function(l,c){r.setStart(n,A),r.setEnd(n,A+l.length);var d=r.getBoundingClientRect();A+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},i6=function(){return typeof new Image().crossOrigin<"u"},a6=function(){return typeof new XMLHttpRequest().responseType=="string"},o6=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},SC=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},l6=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,A=e.toDataURL();s.src=A;var i=G0(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),UC(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=r+"px",SC(l)?UC(G0(r,r,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),SC(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},G0=function(t,e,r,n,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),o=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},UC=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Hr={get SUPPORT_RANGE_BOUNDS(){var t=s6(document);return Object.defineProperty(Hr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Hr.SUPPORT_RANGE_BOUNDS&&A6(document);return Object.defineProperty(Hr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=o6(document);return Object.defineProperty(Hr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?l6(document):Promise.resolve(!1);return Object.defineProperty(Hr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=i6();return Object.defineProperty(Hr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=a6();return Object.defineProperty(Hr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Hr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Hr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Qc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),c6=function(t,e,r,n){var s=h6(e,r),A=[],i=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Hr.SUPPORT_RANGE_BOUNDS){var l=QC(n,i,o.length).getClientRects();if(l.length>1){var c=hy(o),d=0;c.forEach(function(f){A.push(new Qc(f,cA.fromDOMRectList(t,QC(n,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new Qc(o,cA.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);A.push(new Qc(o,u6(t,n))),n=h}else Hr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),A},u6=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var A=Ug(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),A}}return cA.EMPTY},QC=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},hy=function(t){if(Hr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return n6(t)},d6=function(t,e){if(Hr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return g6(t,e)},h6=function(t,e){return e.letterSpacing!==0?hy(t):d6(t,e)},f6=[32,160,4961,65792,65793,4153,4241],g6=function(t,e){for(var r=HH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,A=function(){if(s.value){var i=s.value.slice(),o=Qg(i),l="";o.forEach(function(c){f6.indexOf(c)===-1?l+=dr(c):(l.length&&n.push(l),n.push(dr(c)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)A();return n},p6=function(){function t(e,r,n){this.text=m6(r.data,n.textTransform),this.textBounds=c6(e,this.text,n,r)}return t}(),m6=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(x6,w6);case 2:return t.toUpperCase();default:return t}},x6=/(^|\s|:|-|\(|\))([a-z])/g,w6=function(t,e,r){return t.length>0?e+r.toUpperCase():t},VT=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(js),KT=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(js),GT=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=new XMLSerializer,i=Ug(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(js),zT=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(js),z0=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(js),y6=[{type:15,flags:0,unit:"px",number:3}],v6=[{type:16,flags:0,number:50}],B6=function(t){return t.width>t.height?new cA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new cA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},b6=function(t){var e=t.type===C6?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},kf="checkbox",Tf="radio",C6="password",NC=707406591,fy=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=b6(n),(s.type===kf||s.type===Tf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=B6(s.bounds)),s.type){case kf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=y6;break;case Tf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=v6;break}return s}return e}(js),$T=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(js),WT=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(js),qT=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=JT(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?Sc(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):tA.TRANSPARENT,i=n.contentWindow.document.body?Sc(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):tA.TRANSPARENT;s.backgroundColor=ci(A)?ci(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(js),I6=["OL","UL","MENU"],Eh=function(t,e,r,n){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,YT(s)&&s.data.trim().length>0)r.textNodes.push(new p6(t,s,r.styles));else if(xo(s))if(rF(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Eh(t,o,r,n)});else{var i=XT(t,s);i.styles.isVisible()&&(_6(s,i,n)?i.flags|=4:E6(i.styles)&&(i.flags|=2),I6.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?Eh(t,s.shadowRoot,i,n):!Ff(s)&&!ZT(s)&&!Sf(s)&&Eh(t,s,i,n))}},XT=function(t,e){return W0(e)?new VT(t,e):eF(e)?new KT(t,e):ZT(e)?new GT(t,e):k6(e)?new zT(t,e):T6(e)?new z0(t,e):F6(e)?new fy(t,e):Sf(e)?new $T(t,e):Ff(e)?new WT(t,e):tF(e)?new qT(t,e):new js(t,e)},JT=function(t,e){var r=XT(t,e);return r.flags|=4,Eh(t,e,r,r),r},_6=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||gy(t)&&r.styles.isTransparent()},E6=function(t){return t.isPositioned()||t.isFloating()},YT=function(t){return t.nodeType===Node.TEXT_NODE},xo=function(t){return t.nodeType===Node.ELEMENT_NODE},$0=function(t){return xo(t)&&typeof t.style<"u"&&!kh(t)},kh=function(t){return typeof t.className=="object"},k6=function(t){return t.tagName==="LI"},T6=function(t){return t.tagName==="OL"},F6=function(t){return t.tagName==="INPUT"},S6=function(t){return t.tagName==="HTML"},ZT=function(t){return t.tagName==="svg"},gy=function(t){return t.tagName==="BODY"},eF=function(t){return t.tagName==="CANVAS"},RC=function(t){return t.tagName==="VIDEO"},W0=function(t){return t.tagName==="IMG"},tF=function(t){return t.tagName==="IFRAME"},jC=function(t){return t.tagName==="STYLE"},U6=function(t){return t.tagName==="SCRIPT"},Ff=function(t){return t.tagName==="TEXTAREA"},Sf=function(t){return t.tagName==="SELECT"},rF=function(t){return t.tagName==="SLOT"},DC=function(t){return t.tagName.indexOf("-")>0},Q6=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,A=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(A=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return A&&s.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),PC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},LC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},N6={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},R6={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Wa=function(t,e,r,n,s,A){return t<e||t>r?pu(t,s,A.length>0):n.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=n.values[l];return i},"")+A},nF=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},ur=function(t,e,r,n,s){var A=r-e+1;return(t<0?"-":"")+(nF(Math.abs(t),A,n,function(i){return dr(Math.floor(i%A)+e)})+s)},Oi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return nF(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},to=1,EA=2,kA=4,uc=8,Hs=function(t,e,r,n,s,A){if(t<-9999||t>9999)return pu(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var c=i%10;c===0&&Ir(A,to)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&Ir(A,EA)||c===1&&l===1&&Ir(A,kA)&&t>100||c===1&&l>1&&Ir(A,uc)?o=e[c]+(l>0?r[l-1]:"")+o:c===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},MC="",OC="",HC="",Xp="",pu=function(t,e,r){var n=r?". ":"",s=r?"":"",A=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=ur(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Oi(t,"",s);case 6:return Wa(t,1,3999,PC,3,n).toLowerCase();case 7:return Wa(t,1,3999,PC,3,n);case 8:return ur(t,945,969,!1,n);case 9:return ur(t,97,122,!1,n);case 10:return ur(t,65,90,!1,n);case 11:return ur(t,1632,1641,!0,n);case 12:case 49:return Wa(t,1,9999,LC,3,n);case 35:return Wa(t,1,9999,LC,3,n).toLowerCase();case 13:return ur(t,2534,2543,!0,n);case 14:case 30:return ur(t,6112,6121,!0,n);case 15:return Oi(t,"",s);case 16:return Oi(t,"",s);case 17:case 48:return Hs(t,"",MC,"",s,EA|kA|uc);case 47:return Hs(t,"",OC,"",s,to|EA|kA|uc);case 42:return Hs(t,"",MC,"",s,EA|kA|uc);case 41:return Hs(t,"",OC,"",s,to|EA|kA|uc);case 26:return Hs(t,"","",HC,s,0);case 25:return Hs(t,"","",HC,s,to|EA|kA);case 31:return Hs(t,"","",Xp,A,to|EA|kA);case 33:return Hs(t,"","",Xp,A,0);case 32:return Hs(t,"","",Xp,A,to|EA|kA);case 18:return ur(t,2406,2415,!0,n);case 20:return Wa(t,1,19999,R6,3,n);case 21:return ur(t,2790,2799,!0,n);case 22:return ur(t,2662,2671,!0,n);case 22:return Wa(t,1,10999,N6,3,n);case 23:return Oi(t,"");case 24:return Oi(t,"");case 27:return ur(t,3302,3311,!0,n);case 28:return Oi(t,"",s);case 29:return Oi(t,"",s);case 34:return ur(t,3792,3801,!0,n);case 37:return ur(t,6160,6169,!0,n);case 38:return ur(t,4160,4169,!0,n);case 39:return ur(t,2918,2927,!0,n);case 40:return ur(t,1776,1785,!0,n);case 43:return ur(t,3046,3055,!0,n);case 44:return ur(t,3174,3183,!0,n);case 45:return ur(t,3664,3673,!0,n);case 46:return ur(t,3872,3881,!0,n);case 3:default:return ur(t,48,57,!0,n)}},sF="data-html2canvas-ignore",VC=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Q6,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=j6(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,c=L6(s).then(function(){return hn(n,void 0,void 0,function(){var d,h;return tn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(V6),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,P6(l)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(O6(document.doctype)+"<html></html>"),H6(this.referenceElement.ownerDocument,A,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},t.prototype.createElementClone=function(e){if(K0(e,2))debugger;if(eF(e))return this.createCanvasClone(e);if(RC(e))return this.createVideoClone(e);if(jC(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return W0(r)&&(W0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),DC(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Jp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!xo(r)||!U6(r)&&!r.hasAttribute(sF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!xo(r)||!jC(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(xo(A)&&rF(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,A,n)},t.prototype.cloneNode=function(e,r){if(YT(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&xo(e)&&($0(e)||kh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&$0(s)&&(this.clonedReferenceElement=s),gy(s)&&z6(s);var l=this.counters.parse(new yC(this.context,A)),c=this.resolvePseudoContent(e,s,i,Nc.BEFORE);DC(e)&&(r=!0),RC(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,Nc.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(A&&(this.options.copyStyles||kh(e))&&!tF(e)||r)&&Jp(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Ff(e)||Sf(e))&&(Ff(s)||Sf(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var A=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new yC(this.context,n));var l=new k5(this.context,n),c=o.createElement("html2canvaspseudoelement");Jp(n,c),l.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var p=h.values.filter(Ut);p.length&&c.appendChild(o.createTextNode(e.getAttribute(p[0].value)||""))}else if(h.name==="counter"){var w=h.values.filter(rl),B=w[0],E=w[1];if(B&&Ut(B)){var C=A.counters.getCounterValue(B.value),b=E&&Ut(E)?V0.parse(A.context,E.value):3;c.appendChild(o.createTextNode(pu(C,b,!1)))}}else if(h.name==="counters"){var I=h.values.filter(rl),B=I[0],Q=I[1],E=I[2];if(B&&Ut(B)){var N=A.counters.getCounterValues(B.value),S=E&&Ut(E)?V0.parse(A.context,E.value):3,m=Q&&Q.type===0?Q.value:"",y=N.map(function(R){return pu(R,S,!1)}).join(m);c.appendChild(o.createTextNode(y))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(wC(l.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(wC(l.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=q0+" "+X0;var d=s===Nc.BEFORE?" "+q0:" "+X0;return kh(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Nc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Nc||(Nc={}));var j6=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(sF,"true"),t.body.appendChild(r),r},D6=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},P6=function(t){return Promise.all([].slice.call(t.images,0).map(D6))},L6=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},M6=["all","d","content"],Jp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);M6.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},O6=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},H6=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},V6=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},K6=":before",G6=":after",q0="___html2canvas___pseudoelement_before",X0="___html2canvas___pseudoelement_after",KC=`{
    content: "" !important;
    display: none !important;
}`,z6=function(t){$6(t,"."+q0+K6+KC+`
         .`+X0+G6+KC)},$6=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},AF=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),W6=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Zp(e)||Y6(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return hn(this,void 0,void 0,function(){var r,n,s,A,i=this;return tn(this,function(o){switch(o.label){case 0:return r=AF.isSameOrigin(e),n=!Yp(e)&&this._options.useCORS===!0&&Hr.SUPPORT_CORS_IMAGES&&!r,s=!Yp(e)&&!r&&!Zp(e)&&typeof this._options.proxy=="string"&&Hr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Yp(e)&&!Zp(e)&&!s&&!n?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var d=new Image;d.onload=function(){return l(d)},d.onerror=c,(Z6(A)||n)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var o=Hr.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")A(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),q6=/^data:image\/svg\+xml/i,X6=/^data:image\/.*;base64,/i,J6=/^data:image\/.*/i,Y6=function(t){return Hr.SUPPORT_SVG_DRAWING||!eK(t)},Yp=function(t){return J6.test(t)},Z6=function(t){return X6.test(t)},Zp=function(t){return t.substr(0,4)==="blob"},eK=function(t){return t.substr(-3).toLowerCase()==="svg"||q6.test(t)},Qe=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),qa=function(t,e,r){return new Qe(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},qd=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=qa(this.start,this.startControl,e),s=qa(this.startControl,this.endControl,e),A=qa(this.endControl,this.end,e),i=qa(n,s,e),o=qa(s,A,e),l=qa(i,o,e);return r?new t(this.start,n,i,l):new t(l,o,A,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Jn=function(t){return t.type===1},tK=function(){function t(e){var r=e.styles,n=e.bounds,s=lc(r.borderTopLeftRadius,n.width,n.height),A=s[0],i=s[1],o=lc(r.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],d=lc(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],p=lc(r.borderBottomLeftRadius,n.width,n.height),w=p[0],B=p[1],E=[];E.push((A+l)/n.width),E.push((w+h)/n.width),E.push((i+B)/n.height),E.push((c+f)/n.height);var C=Math.max.apply(Math,E);C>1&&(A/=C,i/=C,l/=C,c/=C,h/=C,f/=C,w/=C,B/=C);var b=n.width-l,I=n.height-f,Q=n.width-h,N=n.height-B,S=r.borderTopWidth,m=r.borderRightWidth,y=r.borderBottomWidth,v=r.borderLeftWidth,k=Ot(r.paddingTop,e.bounds.width),R=Ot(r.paddingRight,e.bounds.width),L=Ot(r.paddingBottom,e.bounds.width),U=Ot(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?Jt(n.left+v/3,n.top+S/3,A-v/3,i-S/3,_t.TOP_LEFT):new Qe(n.left+v/3,n.top+S/3),this.topRightBorderDoubleOuterBox=A>0||i>0?Jt(n.left+b,n.top+S/3,l-m/3,c-S/3,_t.TOP_RIGHT):new Qe(n.left+n.width-m/3,n.top+S/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Jt(n.left+Q,n.top+I,h-m/3,f-y/3,_t.BOTTOM_RIGHT):new Qe(n.left+n.width-m/3,n.top+n.height-y/3),this.bottomLeftBorderDoubleOuterBox=w>0||B>0?Jt(n.left+v/3,n.top+N,w-v/3,B-y/3,_t.BOTTOM_LEFT):new Qe(n.left+v/3,n.top+n.height-y/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?Jt(n.left+v*2/3,n.top+S*2/3,A-v*2/3,i-S*2/3,_t.TOP_LEFT):new Qe(n.left+v*2/3,n.top+S*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?Jt(n.left+b,n.top+S*2/3,l-m*2/3,c-S*2/3,_t.TOP_RIGHT):new Qe(n.left+n.width-m*2/3,n.top+S*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Jt(n.left+Q,n.top+I,h-m*2/3,f-y*2/3,_t.BOTTOM_RIGHT):new Qe(n.left+n.width-m*2/3,n.top+n.height-y*2/3),this.bottomLeftBorderDoubleInnerBox=w>0||B>0?Jt(n.left+v*2/3,n.top+N,w-v*2/3,B-y*2/3,_t.BOTTOM_LEFT):new Qe(n.left+v*2/3,n.top+n.height-y*2/3),this.topLeftBorderStroke=A>0||i>0?Jt(n.left+v/2,n.top+S/2,A-v/2,i-S/2,_t.TOP_LEFT):new Qe(n.left+v/2,n.top+S/2),this.topRightBorderStroke=A>0||i>0?Jt(n.left+b,n.top+S/2,l-m/2,c-S/2,_t.TOP_RIGHT):new Qe(n.left+n.width-m/2,n.top+S/2),this.bottomRightBorderStroke=h>0||f>0?Jt(n.left+Q,n.top+I,h-m/2,f-y/2,_t.BOTTOM_RIGHT):new Qe(n.left+n.width-m/2,n.top+n.height-y/2),this.bottomLeftBorderStroke=w>0||B>0?Jt(n.left+v/2,n.top+N,w-v/2,B-y/2,_t.BOTTOM_LEFT):new Qe(n.left+v/2,n.top+n.height-y/2),this.topLeftBorderBox=A>0||i>0?Jt(n.left,n.top,A,i,_t.TOP_LEFT):new Qe(n.left,n.top),this.topRightBorderBox=l>0||c>0?Jt(n.left+b,n.top,l,c,_t.TOP_RIGHT):new Qe(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Jt(n.left+Q,n.top+I,h,f,_t.BOTTOM_RIGHT):new Qe(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=w>0||B>0?Jt(n.left,n.top+N,w,B,_t.BOTTOM_LEFT):new Qe(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||i>0?Jt(n.left+v,n.top+S,Math.max(0,A-v),Math.max(0,i-S),_t.TOP_LEFT):new Qe(n.left+v,n.top+S),this.topRightPaddingBox=l>0||c>0?Jt(n.left+Math.min(b,n.width-m),n.top+S,b>n.width+m?0:Math.max(0,l-m),Math.max(0,c-S),_t.TOP_RIGHT):new Qe(n.left+n.width-m,n.top+S),this.bottomRightPaddingBox=h>0||f>0?Jt(n.left+Math.min(Q,n.width-v),n.top+Math.min(I,n.height-y),Math.max(0,h-m),Math.max(0,f-y),_t.BOTTOM_RIGHT):new Qe(n.left+n.width-m,n.top+n.height-y),this.bottomLeftPaddingBox=w>0||B>0?Jt(n.left+v,n.top+Math.min(N,n.height-y),Math.max(0,w-v),Math.max(0,B-y),_t.BOTTOM_LEFT):new Qe(n.left+v,n.top+n.height-y),this.topLeftContentBox=A>0||i>0?Jt(n.left+v+U,n.top+S+k,Math.max(0,A-(v+U)),Math.max(0,i-(S+k)),_t.TOP_LEFT):new Qe(n.left+v+U,n.top+S+k),this.topRightContentBox=l>0||c>0?Jt(n.left+Math.min(b,n.width+v+U),n.top+S+k,b>n.width+v+U?0:l-v+U,c-(S+k),_t.TOP_RIGHT):new Qe(n.left+n.width-(m+R),n.top+S+k),this.bottomRightContentBox=h>0||f>0?Jt(n.left+Math.min(Q,n.width-(v+U)),n.top+Math.min(I,n.height+S+k),Math.max(0,h-(m+R)),f-(y+L),_t.BOTTOM_RIGHT):new Qe(n.left+n.width-(m+R),n.top+n.height-(y+L)),this.bottomLeftContentBox=w>0||B>0?Jt(n.left+v+U,n.top+N,Math.max(0,w-(v+U)),B-(y+L),_t.BOTTOM_LEFT):new Qe(n.left+v+U,n.top+n.height-(y+L))}return t}(),_t;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(_t||(_t={}));var Jt=function(t,e,r,n,s){var A=4*((Math.sqrt(2)-1)/3),i=r*A,o=n*A,l=t+r,c=e+n;switch(s){case _t.TOP_LEFT:return new qd(new Qe(t,c),new Qe(t,c-o),new Qe(l-i,e),new Qe(l,e));case _t.TOP_RIGHT:return new qd(new Qe(t,e),new Qe(t+i,e),new Qe(l,c-o),new Qe(l,c));case _t.BOTTOM_RIGHT:return new qd(new Qe(l,e),new Qe(l,e+o),new Qe(t+i,c),new Qe(t,c));case _t.BOTTOM_LEFT:default:return new qd(new Qe(l,c),new Qe(l-i,c),new Qe(t,e+o),new Qe(t,e))}},Uf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},rK=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Qf=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},nK=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Xd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),sK=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),AK=function(t){return t.type===0},iF=function(t){return t.type===1},iK=function(t){return t.type===2},GC=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},aK=function(t,e,r,n,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+s);case 3:return A.add(e,r+s)}return A})},aF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),oF=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new tK(this.container),this.container.styles.opacity<1&&this.effects.push(new sK(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new nK(n,s,A))}if(this.container.styles.overflowX!==0){var i=Uf(this.curves),o=Qf(this.curves);GC(i,o)?this.effects.push(new Xd(i,6)):(this.effects.push(new Xd(i,2)),this.effects.push(new Xd(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var A=n.effects.filter(function(l){return!iF(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Uf(n.curves),o=Qf(n.curves);GC(i,o)||s.unshift(new Xd(o,6))}}else s.unshift.apply(s,A);n=n.parent}return s.filter(function(l){return Ir(l.target,e)})},t}(),J0=function(t,e,r,n){t.container.elements.forEach(function(s){var A=Ir(s.flags,4),i=Ir(s.flags,2),o=new oF(s,t);Ir(s.styles.display,2048)&&n.push(o);var l=Ir(s.flags,8)?[]:n;if(A||i){var c=A||s.styles.isPositioned()?r:e,d=new aF(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(w,B){return h>w.element.container.styles.zIndex.order?(f=B,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var p=0;c.positiveZIndex.some(function(w,B){return h>=w.element.container.styles.zIndex.order?(p=B+1,!1):p>0}),c.positiveZIndex.splice(p,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);J0(o,d,A?d:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),J0(o,e,r,l);Ir(s.flags,8)&&lF(s,l)})},lF=function(t,e){for(var r=t instanceof z0?t.start:1,n=t instanceof z0?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof zT&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=pu(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},oK=function(t){var e=new oF(t,null),r=new aF(e),n=[];return J0(e,r,r,n),lF(e.container,n),r},zC=function(t,e){switch(e){case 0:return es(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return es(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return es(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return es(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},lK=function(t,e){switch(e){case 0:return es(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return es(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return es(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return es(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},cK=function(t,e){switch(e){case 0:return es(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return es(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return es(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return es(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},uK=function(t,e){switch(e){case 0:return Jd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Jd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Jd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Jd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Jd=function(t,e){var r=[];return Jn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Jn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},es=function(t,e,r,n){var s=[];return Jn(t)?s.push(t.subdivide(.5,!1)):s.push(t),Jn(r)?s.push(r.subdivide(.5,!0)):s.push(r),Jn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Jn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},cF=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Nf=function(t){var e=t.styles,r=t.bounds,n=Ot(e.paddingLeft,r.width),s=Ot(e.paddingRight,r.width),A=Ot(e.paddingTop,r.width),i=Ot(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},dK=function(t,e){return t===0?e.bounds:t===2?Nf(e):cF(e)},hK=function(t,e){return t===0?e.bounds:t===2?Nf(e):cF(e)},em=function(t,e,r){var n=dK(ro(t.styles.backgroundOrigin,e),t),s=hK(ro(t.styles.backgroundClip,e),t),A=fK(ro(t.styles.backgroundSize,e),r,n),i=A[0],o=A[1],l=lc(ro(t.styles.backgroundPosition,e),n.width-i,n.height-o),c=gK(ro(t.styles.backgroundRepeat,e),l,A,n,s),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[c,d,h,i,o]},Xa=function(t){return Ut(t)&&t.value===Fo.AUTO},Yd=function(t){return typeof t=="number"},fK=function(t,e,r){var n=e[0],s=e[1],A=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(mr(i)&&o&&mr(o))return[Ot(i,r.width),Ot(o,r.height)];var l=Yd(A);if(Ut(i)&&(i.value===Fo.CONTAIN||i.value===Fo.COVER)){if(Yd(A)){var c=r.width/r.height;return c<A!=(i.value===Fo.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var d=Yd(n),h=Yd(s),f=d||h;if(Xa(i)&&(!o||Xa(o))){if(d&&h)return[n,s];if(!l&&!f)return[r.width,r.height];if(f&&l){var p=d?n:s*A,w=h?s:n/A;return[p,w]}var B=d?n:r.width,E=h?s:r.height;return[B,E]}if(l){var C=0,b=0;return mr(i)?C=Ot(i,r.width):mr(o)&&(b=Ot(o,r.height)),Xa(i)?C=b*A:(!o||Xa(o))&&(b=C/A),[C,b]}var I=null,Q=null;if(mr(i)?I=Ot(i,r.width):o&&mr(o)&&(Q=Ot(o,r.height)),I!==null&&(!o||Xa(o))&&(Q=d&&h?I/n*s:r.height),Q!==null&&Xa(i)&&(I=d&&h?Q/s*n:r.width),I!==null&&Q!==null)return[I,Q];throw new Error("Unable to calculate background-size for element")},ro=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},gK=function(t,e,r,n,s){var A=e[0],i=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Qe(Math.round(n.left),Math.round(n.top+i)),new Qe(Math.round(n.left+n.width),Math.round(n.top+i)),new Qe(Math.round(n.left+n.width),Math.round(l+n.top+i)),new Qe(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new Qe(Math.round(n.left+A),Math.round(n.top)),new Qe(Math.round(n.left+A+o),Math.round(n.top)),new Qe(Math.round(n.left+A+o),Math.round(n.height+n.top)),new Qe(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new Qe(Math.round(n.left+A),Math.round(n.top+i)),new Qe(Math.round(n.left+A+o),Math.round(n.top+i)),new Qe(Math.round(n.left+A+o),Math.round(n.top+i+l)),new Qe(Math.round(n.left+A),Math.round(n.top+i+l))];default:return[new Qe(Math.round(s.left),Math.round(s.top)),new Qe(Math.round(s.left+s.width),Math.round(s.top)),new Qe(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Qe(Math.round(s.left),Math.round(s.height+s.top))]}},pK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",$C="Hidden Text",mK=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=pK,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode($C)),n.appendChild(A),n.appendChild(s);var o=s.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode($C)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),uF=function(){function t(e,r){this.context=e,this.options=r}return t}(),xK=1e4,wK=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new mK(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),iK(r)&&(this.ctx.globalAlpha=r.opacity),AK(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),iF(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return hn(this,void 0,void 0,function(){var n;return tn(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return hn(this,void 0,void 0,function(){return tn(this,function(n){switch(n.label){case 0:if(Ir(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=hy(r.text);i.reduce(function(o,l){return A.ctx.fillText(l,o,r.bounds.top+s),o+A.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=CK(r.fontFamily).join(", "),A=zu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(r,n){return hn(this,void 0,void 0,function(){var s,A,i,o,l,c,d,h,f=this;return tn(this,function(p){return s=this.createFontStyle(n),A=s[0],i=s[1],o=s[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),c=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(w){h.forEach(function(B){switch(B){case 0:f.ctx.fillStyle=Ur(n.color),f.renderTextWithLetterSpacing(w,n.letterSpacing,c);var E=n.textShadow;E.length&&w.text.trim().length&&(E.slice(0).reverse().forEach(function(C){f.ctx.shadowColor=Ur(C.color),f.ctx.shadowOffsetX=C.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=C.offsetY.number*f.options.scale,f.ctx.shadowBlur=C.blur.number,f.renderTextWithLetterSpacing(w,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=Ur(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(C){switch(C){case 1:f.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top+c),w.bounds.width,1);break;case 2:f.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top),w.bounds.width,1);break;case 3:f.ctx.fillRect(w.bounds.left,Math.ceil(w.bounds.top+d),w.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&w.text.trim().length&&(f.ctx.strokeStyle=Ur(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(w.text,w.bounds.left,w.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=Nf(r),i=Qf(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return hn(this,void 0,void 0,function(){var n,s,A,i,o,l,b,b,c,d,h,f,Q,p,w,N,B,E,C,b,I,Q,N;return tn(this,function(S){switch(S.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,A=n.styles,i=0,o=n.textNodes,S.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,A)]):[3,4];case 2:S.sent(),S.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof VT))return[3,8];S.label=5;case 5:return S.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return b=S.sent(),this.renderReplacedElement(n,s,b),[3,8];case 7:return S.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof KT&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof GT))return[3,12];S.label=9;case 9:return S.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return b=S.sent(),this.renderReplacedElement(n,s,b),[3,12];case 11:return S.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof qT&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=S.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),S.label=14;case 14:if(n instanceof fy&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===kf?n.checked&&(this.ctx.save(),this.path([new Qe(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Qe(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Qe(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Qe(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Qe(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Qe(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Qe(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=Ur(NC),this.ctx.fill(),this.ctx.restore()):n.type===Tf&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ur(NC),this.ctx.fill(),this.ctx.restore())),yK(n)&&n.value.length){switch(f=this.createFontStyle(A),Q=f[0],p=f[1],w=this.fontMetrics.getMetrics(Q,p).baseline,this.ctx.font=Q,this.ctx.fillStyle=Ur(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=BK(n.styles.textAlign),N=Nf(n),B=0,n.styles.textAlign){case 1:B+=N.width/2;break;case 2:B+=N.width;break}E=N.add(B,0,0,-N.height/2+1),this.ctx.save(),this.path([new Qe(N.left,N.top),new Qe(N.left+N.width,N.top),new Qe(N.left+N.width,N.top+N.height),new Qe(N.left,N.top+N.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Qc(n.value,E),A.letterSpacing,w),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ir(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(C=n.styles.listStyleImage,C.type!==0)return[3,18];b=void 0,I=C.url,S.label=15;case 15:return S.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return b=S.sent(),this.ctx.drawImage(b,n.bounds.left-(b.width+10),n.bounds.top),[3,18];case 17:return S.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(Q=this.createFontStyle(A)[0],this.ctx.font=Q,this.ctx.fillStyle=Ur(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",N=new cA(n.bounds.left,n.bounds.top+Ot(n.styles.paddingTop,n.bounds.width),n.bounds.width,mC(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Qc(r.listValue,N),A.letterSpacing,mC(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),S.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return hn(this,void 0,void 0,function(){var n,s,C,A,i,C,o,l,C,c,d,C,h,f,C,p,w,C,B,E,C;return tn(this,function(b){switch(b.label){case 0:if(Ir(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:b.sent(),n=0,s=r.negativeZIndex,b.label=2;case 2:return n<s.length?(C=s[n],[4,this.renderStack(C)]):[3,5];case 3:b.sent(),b.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:b.sent(),A=0,i=r.nonInlineLevel,b.label=7;case 7:return A<i.length?(C=i[A],[4,this.renderNode(C)]):[3,10];case 8:b.sent(),b.label=9;case 9:return A++,[3,7];case 10:o=0,l=r.nonPositionedFloats,b.label=11;case 11:return o<l.length?(C=l[o],[4,this.renderStack(C)]):[3,14];case 12:b.sent(),b.label=13;case 13:return o++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,b.label=15;case 15:return c<d.length?(C=d[c],[4,this.renderStack(C)]):[3,18];case 16:b.sent(),b.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,b.label=19;case 19:return h<f.length?(C=f[h],[4,this.renderNode(C)]):[3,22];case 20:b.sent(),b.label=21;case 21:return h++,[3,19];case 22:p=0,w=r.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return p<w.length?(C=w[p],[4,this.renderStack(C)]):[3,26];case 24:b.sent(),b.label=25;case 25:return p++,[3,23];case 26:B=0,E=r.positiveZIndex,b.label=27;case 27:return B<E.length?(C=E[B],[4,this.renderStack(C)]):[3,30];case 28:b.sent(),b.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,A){var i=Jn(s)?s.start:s;A===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Jn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(r,n,s){var A;if(r.width===n&&r.height===s)return r;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return hn(this,void 0,void 0,function(){var n,s,A,i,o,l;return tn(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,f,p,k,Xe,Ke,U,Oe,y,w,k,Xe,Ke,U,Oe,B,E,C,b,I,Q,N,S,m,y,v,k,R,L,U,Oe,We,Xe,Ke,Ae,ye,Te,Re,Pe,q,$,Se;return tn(this,function(xe){switch(xe.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,xe.label=1;case 1:return xe.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=xe.sent(),[3,4];case 3:return xe.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(p=em(r,n,[h.width,h.height,h.width/h.height]),k=p[0],Xe=p[1],Ke=p[2],U=p[3],Oe=p[4],y=A.ctx.createPattern(A.resizeImage(h,U,Oe),"repeat"),A.renderRepeat(k,y,Xe,Ke)),[3,6];case 5:A3(d)?(w=em(r,n,[null,null,null]),k=w[0],Xe=w[1],Ke=w[2],U=w[3],Oe=w[4],B=e3(d.angle,U,Oe),E=B[0],C=B[1],b=B[2],I=B[3],Q=B[4],N=document.createElement("canvas"),N.width=U,N.height=Oe,S=N.getContext("2d"),m=S.createLinearGradient(C,I,b,Q),gC(d.stops,E).forEach(function(Le){return m.addColorStop(Le.stop,Ur(Le.color))}),S.fillStyle=m,S.fillRect(0,0,U,Oe),U>0&&Oe>0&&(y=A.ctx.createPattern(N,"repeat"),A.renderRepeat(k,y,Xe,Ke))):i3(d)&&(v=em(r,n,[null,null,null]),k=v[0],R=v[1],L=v[2],U=v[3],Oe=v[4],We=d.position.length===0?[cy]:d.position,Xe=Ot(We[0],U),Ke=Ot(We[We.length-1],Oe),Ae=t3(d,Xe,Ke,U,Oe),ye=Ae[0],Te=Ae[1],ye>0&&Te>0&&(Re=A.ctx.createRadialGradient(R+Xe,L+Ke,0,R+Xe,L+Ke,ye),gC(d.stops,ye*2).forEach(function(Le){return Re.addColorStop(Le.stop,Ur(Le.color))}),A.path(k),A.ctx.fillStyle=Re,ye!==Te?(Pe=r.bounds.left+.5*r.bounds.width,q=r.bounds.top+.5*r.bounds.height,$=Te/ye,Se=1/$,A.ctx.save(),A.ctx.translate(Pe,q),A.ctx.transform(1,0,0,$,0,0),A.ctx.translate(-Pe,-q),A.ctx.fillRect(R,Se*(L-q)+q,U,Oe*Se),A.ctx.restore()):A.ctx.fill())),xe.label=6;case 6:return n--,[2]}})},A=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return hn(this,void 0,void 0,function(){return tn(this,function(A){return this.path(zC(s,n)),this.ctx.fillStyle=Ur(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,A){return hn(this,void 0,void 0,function(){var i,o;return tn(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,A)]:[3,2];case 1:return l.sent(),[2];case 2:return i=lK(A,s),this.path(i),this.ctx.fillStyle=Ur(r),this.ctx.fill(),o=cK(A,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return hn(this,void 0,void 0,function(){var n,s,A,i,o,l,c,d,h=this;return tn(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!ci(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=vK(ro(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),ci(n.backgroundColor)||(this.ctx.fillStyle=Ur(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var w=Uf(r.curves),B=p.inset?0:xK,E=aK(w,-B+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(w),h.ctx.clip(),h.mask(E)):(h.mask(w),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=p.offsetX.number+B,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=Ur(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?Ur(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,l=0,c=A,f.label=3;case 3:return l<c.length?(d=c[l],d.style!==0&&!ci(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,A,i){return hn(this,void 0,void 0,function(){var o,l,c,d,h,f,p,w,B,E,C,b,I,Q,N,S,N,S;return tn(this,function(m){return this.ctx.save(),o=uK(A,s),l=zC(A,s),i===2&&(this.path(l),this.ctx.clip()),Jn(l[0])?(c=l[0].start.x,d=l[0].start.y):(c=l[0].x,d=l[0].y),Jn(l[1])?(h=l[1].end.x,f=l[1].end.y):(h=l[1].x,f=l[1].y),s===0||s===2?p=Math.abs(c-h):p=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),w=n<3?n*3:n*2,B=n<3?n*2:n,i===3&&(w=n,B=n),E=!0,p<=w*2?E=!1:p<=w*2+B?(C=p/(2*w+B),w*=C,B*=C):(b=Math.floor((p+B)/(w+B)),I=(p-b*w)/(b-1),Q=(p-(b+1)*w)/b,B=Q<=0||Math.abs(B-I)<Math.abs(B-Q)?I:Q),E&&(i===3?this.ctx.setLineDash([0,w+B]):this.ctx.setLineDash([w,B])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ur(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Jn(l[0])&&(N=l[3],S=l[0],this.ctx.beginPath(),this.formatPath([new Qe(N.end.x,N.end.y),new Qe(S.start.x,S.start.y)]),this.ctx.stroke()),Jn(l[1])&&(N=l[1],S=l[2],this.ctx.beginPath(),this.formatPath([new Qe(N.end.x,N.end.y),new Qe(S.start.x,S.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return hn(this,void 0,void 0,function(){var n;return tn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ur(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=oK(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(uF),yK=function(t){return t instanceof WT||t instanceof $T?!0:t instanceof fy&&t.type!==Tf&&t.type!==kf},vK=function(t,e){switch(t){case 0:return Uf(e);case 2:return rK(e);case 1:default:return Qf(e)}},BK=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},bK=["-apple-system","system-ui"],CK=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return bK.indexOf(e)===-1}):t},IK=function(t){ms(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return hn(this,void 0,void 0,function(){var n,s;return tn(this,function(A){switch(A.label){case 0:return n=G0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,_K(n)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ur(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(uF),_K=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},EK=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Fd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Fd([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Fd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Fd([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),kK=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new EK({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new W6(this,e)}return t.instanceCount=1,t}(),Rf=function(t,e){return e===void 0&&(e={}),TK(t,e)};typeof window<"u"&&AF.setContext(window);var TK=function(t,e){return hn(void 0,void 0,void 0,function(){var r,n,s,A,i,o,l,c,d,h,f,p,w,B,E,C,b,I,Q,N,m,S,m,y,v,k,R,L,U,Oe,We,Xe,Ke,Ae,ye,Te,Re,Pe,q,$;return tn(this,function(Se){switch(Se.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(y=e.allowTaint)!==null&&y!==void 0?y:!1,imageTimeout:(v=e.imageTimeout)!==null&&v!==void 0?v:15e3,proxy:e.proxy,useCORS:(k=e.useCORS)!==null&&k!==void 0?k:!1},A=F0({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(U=e.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(Oe=e.scrollX)!==null&&Oe!==void 0?Oe:n.pageXOffset,scrollY:(We=e.scrollY)!==null&&We!==void 0?We:n.pageYOffset},o=new cA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new kK(A,o),c=(Xe=e.foreignObjectRendering)!==null&&Xe!==void 0?Xe:!1,d={allowTaint:(Ke=e.allowTaint)!==null&&Ke!==void 0?Ke:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new VC(l,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=Se.sent(),w=gy(f)||S6(f)?aH(f.ownerDocument):Ug(l,f),B=w.width,E=w.height,C=w.left,b=w.top,I=FK(l,f,e.backgroundColor),Q={canvas:e.canvas,backgroundColor:I,scale:(ye=(Ae=e.scale)!==null&&Ae!==void 0?Ae:n.devicePixelRatio)!==null&&ye!==void 0?ye:1,x:((Te=e.x)!==null&&Te!==void 0?Te:0)+C,y:((Re=e.y)!==null&&Re!==void 0?Re:0)+b,width:(Pe=e.width)!==null&&Pe!==void 0?Pe:Math.ceil(B),height:(q=e.height)!==null&&q!==void 0?q:Math.ceil(E)},c?(l.logger.debug("Document cloned, using foreign object rendering"),m=new IK(l,Q),[4,m.render(f)]):[3,3];case 2:return N=Se.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+C+","+b+" with size "+B+"x"+E+" using computed rendering"),l.logger.debug("Starting DOM parsing"),S=JT(l,f),I===S.styles.backgroundColor&&(S.styles.backgroundColor=tA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+Q.x+","+Q.y+" with size "+Q.width+"x"+Q.height),m=new wK(l,Q),[4,m.render(S)];case 4:N=Se.sent(),Se.label=5;case 5:return(!(($=e.removeContainer)!==null&&$!==void 0)||$)&&(VC.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,N]}})})},FK=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?Sc(t,getComputedStyle(n.documentElement).backgroundColor):tA.TRANSPARENT,A=n.body?Sc(t,getComputedStyle(n.body).backgroundColor):tA.TRANSPARENT,i=typeof r=="string"?Sc(t,r):r===null?tA.TRANSPARENT:4294967295;return e===n.documentElement?ci(s)?ci(A)?i:A:s:i};const SK=()=>{var Rt,Et,Wt,ue;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Kn(),[i,o]=_.useState("teachers"),[l,c]=_.useState(!1),[d,h]=_.useState(null),[f,p]=_.useState({}),[w,B]=_.useState({}),[E,C]=_.useState({}),[b,I]=_.useState({}),[Q,N]=_.useState("preset_normal"),[S,m]=_.useState([]),[y,v]=_.useState(!1),[k,R]=_.useState(""),L=_.useRef(null),[U,Oe]=_.useState(null);_.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const T=s.bellPresets.find(P=>P.id===Q);if(T){m(T.bells);return}}m(rf)},[Q,s.bellPresets]);const We=T=>{h(T||null),i==="teachers"?p(T?e.find(P=>P.id===T)??{}:{subjectIds:[],unavailableDates:[],shifts:[de.First,de.Second],telegramChatId:""}):i==="subjects"?B(T?t.find(P=>P.id===T)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?C(T?r.find(P=>P.id===T)??{}:{shift:de.First,studentsCount:25,excludeFromReports:!1}):i==="rooms"&&I(T?n.find(P=>P.id===T)??{}:{capacity:30,type:""}),c(!0)},Xe=async()=>{const T={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:w,key:"subjects"},classes:{list:r,form:E,key:"classes"},rooms:{list:n,form:b,key:"rooms"}};if(i==="bells"||!(i in T))return;const P=T[i],{list:H,form:W,key:Be}=P;if(!W.name)return;let ne=[...H];if(d)ne=ne.map(G=>G.id===d?{...G,...W}:G);else{const G=H.reduce((O,ie)=>Math.max(O,ie.order||0),0),J={...W,id:gn(),order:G+1};ne.push(J)}await A({[Be]:ne}),c(!1)},Ke=async T=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(P=>P.id!==T)});break;case"subjects":await A({subjects:t.filter(P=>P.id!==T)});break;case"classes":await A({classes:r.filter(P=>P.id!==T)});break;case"rooms":await A({rooms:n.filter(P=>P.id!==T)});break}},Ae=(T,P)=>{Oe(P),T.dataTransfer.effectAllowed="move"},ye=T=>{T.preventDefault()},Te=async(T,P)=>{if(U===null||U===P)return;const H=W=>{const Be=[...W],[ne]=Be.splice(U,1);return Be.splice(P,0,ne),Be.map((G,J)=>({...G,order:J}))};switch(i){case"teachers":{await A({teachers:H(e)});break}case"subjects":{await A({subjects:H(t)});break}case"classes":{await A({classes:H(r)});break}case"rooms":{await A({rooms:H(n)});break}}Oe(null)},Re=(T,P,H,W)=>{const Be=[...S],ne=Be.findIndex(G=>G.shift===T&&G.period===P&&G.day==="default");ne>=0?Be[ne]={...Be[ne],[H]:W}:Be.push({shift:T,period:P,[H]:W,start:"00:00",end:"00:00",day:"default"}),m(Be)},Pe=(T,P)=>{const H=[...S],W=H.findIndex(Be=>Be.shift===T&&Be.period===P&&Be.day==="default");W>=0?H[W]={...H[W],cancelled:!H[W].cancelled}:H.push({shift:T,period:P,start:"00:00",end:"00:00",day:"default",cancelled:!0}),m(H)},q=async()=>{let T=[...s.bellPresets||[]];const P=T.findIndex(H=>H.id===Q);P>=0?T[P]={...T[P],bells:S}:T.push({id:Q,name:k||" ",bells:S}),await A({settings:{...s,bellPresets:T}}),alert(" !")},$=()=>{R(""),v(!0)},Se=async()=>{if(!k)return;const T=`preset_${gn()}`,P=[...s.bellPresets||[]];P.push({id:T,name:k,bells:JSON.parse(JSON.stringify(S))}),await A({settings:{...s,bellPresets:P}}),N(T),v(!1)},xe=async()=>{if(Q==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const T=(s.bellPresets||[]).filter(P=>P.id!==Q);await A({settings:{...s,bellPresets:T}}),N("preset_normal")},Le=async()=>{var T,P;window.confirm(`   "${(P=(T=s.bellPresets)==null?void 0:T.find(H=>H.id===Q))==null?void 0:P.name}"   ?`)&&(await A({bellSchedule:S}),alert("  !"))},Wr=async()=>{var H,W;if(!L.current)return;const T=await Rf(L.current,{scale:2,backgroundColor:"#ffffff"}),P=document.createElement("a");P.href=T.toDataURL("image/png"),P.download=`_${(W=(H=s.bellPresets)==null?void 0:H.find(Be=>Be.id===Q))==null?void 0:W.name}.png`,document.body.appendChild(P),P.click(),document.body.removeChild(P)},wr=T=>{const P=f.shifts||[];P.includes(T)?p({...f,shifts:P.filter(H=>H!==T)}):p({...f,shifts:[...P,T]})};return a.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[a.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(T=>a.jsxs("button",{onClick:()=>o(T.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===T.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[a.jsx(M,{name:T.icon,size:18})," ",T.label]},T.id))}),i!=="bells"&&a.jsxs("button",{onClick:()=>We(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[a.jsx(M,{name:"Plus",size:20})," "]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&a.jsx(Td,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((T,P)=>a.jsxs("div",{draggable:!0,onDragStart:H=>Ae(H,P),onDragOver:ye,onDrop:H=>Te(H,P),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),a.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:T.name})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>We(T.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:a.jsx(M,{name:"Edit2",size:16})}),a.jsx("button",{onClick:()=>Ke(T.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:a.jsx(M,{name:"Trash2",size:16})})]})]}),a.jsx("div",{className:"text-xs text-slate-500 mb-2",children:T.birthDate?`: ${new Date(T.birthDate).toLocaleDateString("ru-RU")}`:""}),a.jsxs("div",{className:"flex gap-2 mb-3",children:[T.shifts.includes(de.First)&&a.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),T.shifts.includes(de.Second)&&a.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:T.subjectIds.map(H=>{const W=t.find(Be=>Be.id===H);return W?a.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:W.color,color:"#334155"},children:W.name},H):null})})]},T.id))}),i==="subjects"&&a.jsx(Td,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((T,P)=>a.jsxs("div",{draggable:!0,onDragStart:H=>Ae(H,P),onDragOver:ye,onDrop:H=>Te(H,P),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:T.color},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:T.name}),a.jsxs("div",{className:"text-xs text-slate-400",children:[" ",T.difficulty,"  ",T.requiredRoomType]})]})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>We(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:a.jsx(M,{name:"Edit2",size:16})}),a.jsx("button",{onClick:()=>Ke(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:a.jsx(M,{name:"Trash2",size:16})})]})]},T.id))}),i==="classes"&&a.jsx(Td,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((T,P)=>a.jsxs("div",{draggable:!0,onDragStart:H=>Ae(H,P),onDragOver:ye,onDrop:H=>Te(H,P),className:`bg-white dark:bg-dark-800 p-4 rounded-2xl border ${T.excludeFromReports?"border-dashed border-slate-300 bg-slate-50":"border-slate-100"} dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing`,children:[a.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:a.jsx(M,{name:"GripVertical",size:14})}),a.jsx("div",{className:`text-2xl font-black ${T.excludeFromReports?"text-slate-400":"text-slate-800 dark:text-slate-100"} mb-1`,children:T.name}),a.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[T.studentsCount||0," "]}),a.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${T.shift===de.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[T.shift===de.First?"I":"II"," "]}),T.excludeFromReports&&a.jsx("div",{className:"mt-2 text-[10px] text-slate-400 font-bold uppercase border border-slate-200 rounded px-1 inline-block",children:""}),a.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>We(T.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:a.jsx(M,{name:"Edit2",size:14})}),a.jsx("button",{onClick:()=>Ke(T.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:a.jsx(M,{name:"Trash2",size:14})})]})]},T.id))}),i==="rooms"&&a.jsx(Td,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((T,P)=>a.jsxs("div",{draggable:!0,onDragStart:H=>Ae(H,P),onDragOver:ye,onDrop:H=>Te(H,P),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(M,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),a.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:a.jsx(M,{name:"DoorOpen",size:20})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:T.name}),a.jsxs("div",{className:"text-xs text-slate-400",children:[": ",T.capacity,"  ",T.type]})]})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>We(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:a.jsx(M,{name:"Edit2",size:16})}),a.jsx("button",{onClick:()=>Ke(T.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:a.jsx(M,{name:"Trash2",size:16})})]})]},T.id))}),i==="bells"&&a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:":"}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:Q,onChange:T=>N(T.target.value),className:"appearance-none bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500 cursor-pointer",children:(s.bellPresets||[]).map(T=>a.jsx("option",{value:T.id,children:T.name},T.id))}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:a.jsx(M,{name:"Filter",size:14})})]}),a.jsx("button",{onClick:$,className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition",title:"  ",children:a.jsx(M,{name:"Plus",size:18})}),a.jsx("button",{onClick:xe,className:"p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",title:" ",children:a.jsx(M,{name:"Trash2",size:18})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:q,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[a.jsx(M,{name:"Save",size:18}),"  "]}),a.jsxs("button",{onClick:Le,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[a.jsx(M,{name:"CheckCircle",size:18}),"  "]}),a.jsxs("button",{onClick:Wr,className:"px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition text-sm flex items-center gap-2",children:[a.jsx(M,{name:"Image",size:18})," PNG"]})]})]}),a.jsxs("div",{ref:L,className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 text-slate-900",children:[a.jsxs("h3",{className:"text-2xl font-black text-center mb-6 uppercase text-slate-800",children:[" : ",(Et=(Rt=s.bellPresets)==null?void 0:Rt.find(T=>T.id===Q))==null?void 0:Et.name]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[de.First,de.Second].map(T=>a.jsxs("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:[a.jsx("div",{className:`p-4 font-bold text-lg text-white text-center ${T===de.First?"bg-indigo-600":"bg-purple-600"}`,children:T}),a.jsx("div",{className:"p-4 space-y-2 bg-white",children:bn[T].map(P=>{const H=S.find(W=>W.shift===T&&W.period===P&&W.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return a.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-lg border ${H.cancelled?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded bg-white flex items-center justify-center font-black text-slate-500 shadow-sm border border-slate-200",children:P}),H.cancelled?a.jsx("div",{className:"flex-1 flex justify-center items-center",children:a.jsx("span",{className:"text-red-500 font-bold uppercase tracking-wider text-sm",children:" "})}):a.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[a.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:H.start,onChange:W=>Re(T,P,"start",W.target.value)}),a.jsx("span",{className:"text-slate-400 font-bold",children:""}),a.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:H.end,onChange:W=>Re(T,P,"end",W.target.value)})]}),a.jsx("button",{onClick:()=>Pe(T,P),className:`w-8 h-8 rounded flex items-center justify-center transition-colors ${H.cancelled?"bg-white text-emerald-500 hover:text-emerald-700":"text-slate-400 hover:text-red-500 hover:bg-red-50"}`,title:H.cancelled?" ":" ","data-html2canvas-ignore":"true",children:a.jsx(M,{name:H.cancelled?"RotateCcw":"X",size:16})})]},P)})})]},T))}),a.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 flex justify-between items-end text-sm font-bold text-slate-500",children:[a.jsxs("div",{children:["",a.jsx("br",{})," "]}),a.jsx("div",{children:"____________"})]})]})]})]}),a.jsx(jr,{isOpen:l,onClose:()=>c(!1),title:d?"":"",children:a.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&a.jsxs(a.Fragment,{children:[a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:T=>p({...f,name:T.target.value})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),a.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:T=>p({...f,birthDate:T.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),a.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:T=>p({...f,telegramChatId:T.target.value}),placeholder:"12345678"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Wt=f.shifts)==null?void 0:Wt.includes(de.First),onChange:()=>wr(de.First)})," ",a.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(ue=f.shifts)==null?void 0:ue.includes(de.Second),onChange:()=>wr(de.Second)})," ",a.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(T=>{var P;return a.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(P=f.subjectIds)==null?void 0:P.includes(T.id),onChange:H=>{const W=f.subjectIds||[];p({...f,subjectIds:H.target.checked?[...W,T.id]:W.filter(Be=>Be!==T.id)})}})," ",a.jsx("span",{className:"text-sm dark:text-slate-300",children:T.name})]},T.id)})})]}),i==="subjects"&&a.jsxs(a.Fragment,{children:[a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:w.name||"",onChange:T=>B({...w,name:T.target.value})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),a.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:w.color||"#ffffff",onChange:T=>B({...w,color:T.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),a.jsx("input",{type:"number",inputMode:"numeric",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.difficulty||5,onChange:T=>B({...w,difficulty:parseInt(T.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),a.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.requiredRoomType,onChange:T=>B({...w,requiredRoomType:T.target.value}),children:nB.map(T=>a.jsx("option",{value:T,children:T},T))})]})]}),i==="classes"&&a.jsxs(a.Fragment,{children:[a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:E.name||"",onChange:T=>C({...E,name:T.target.value})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),a.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:E.studentsCount||25,onChange:T=>C({...E,studentsCount:parseInt(T.target.value)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>C({...E,shift:de.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===de.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),a.jsx("button",{onClick:()=>C({...E,shift:de.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===de.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),a.jsxs("label",{className:"flex items-center gap-2 mt-4 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:E.excludeFromReports||!1,onChange:T=>C({...E,excludeFromReports:T.target.checked})}),a.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"   "})]}),a.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"      ,     ."})]}),i==="rooms"&&a.jsxs(a.Fragment,{children:[a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:b.name||"",onChange:T=>I({...b,name:T.target.value})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:b.capacity||30,onChange:T=>I({...b,capacity:parseInt(T.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),a.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:b.type,onChange:T=>I({...b,type:T.target.value}),children:nB.map(T=>a.jsx("option",{value:T,children:T},T))})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:Xe,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),a.jsx(jr,{isOpen:y,onClose:()=>v(!1),title:"  ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:k,onChange:T=>R(T.target.value),autoFocus:!0})]}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx("button",{onClick:Se,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})})]})},UK=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Kn(),{schedule1:i,schedule2:o,substitutions:l,saveScheduleData:c}=Di(),{addToast:d}=iy(),h=Ei(),[f,p]=_.useState(oi()),w=_.useRef(null),[B,E]=_.useState("pending"),[C,b]=_.useState("teacher"),[I,Q]=_.useState(!1),[N,S]=_.useState(!1),[m,y]=_.useState(null),[v,k]=_.useState(!1),[R,L]=_.useState(!1),[U,Oe]=_.useState(!1),[We,Xe]=_.useState(!1),[Ke,Ae]=_.useState(null),[ye,Te]=_.useState(null),[Re,Pe]=_.useState(""),[q,$]=_.useState(""),[Se,xe]=_.useState(""),[Le,Wr]=_.useState(""),[wr,Rt]=_.useState("all"),[Et,Wt]=_.useState(""),[ue,T]=_.useState(""),[P,H]=_.useState(""),[W,Be]=_.useState(""),[ne,G]=_.useState(null),[J,O]=_.useState([]),[ie,ee]=_.useState(!1),[ae,Y]=_.useState(!1),[te,me]=_.useState(!1),[Ne,ze]=_.useState(null),[_e,Ye]=_.useState(null),et=aT({maxWidth:767}),[At,$e]=_.useState("lessons"),fe=_.useMemo(()=>{const D={schedule:i,schedule2:o,settings:s};return X2(new Date(f),D)},[f,i,o,s]);_.useEffect(()=>{var D;(D=h.state)!=null&&D.subParams&&(y(h.state.subParams),H(""),Be(""),O([]),G(null),ee(!1),Y(!1),me(!1),b("teacher"),S(!0),window.history.replaceState({},document.title))},[h.state]),_.useEffect(()=>{if(N&&m){if(m.isEditing)return;const D=l.find(z=>z.scheduleItemId===m.scheduleItemId&&z.date===f);D?(O(D.refusals||[]),D.replacementTeacherId==="cancelled"?b("cancel"):D.isMerger||D.replacementClassId?b("advanced"):b("teacher"),D.replacementTeacherId&&!["conducted","cancelled"].includes(D.replacementTeacherId)&&G(D.replacementTeacherId)):(O([]),b("teacher"),G(null)),ee(!1),Y(!1),me(!1)}},[N,m,l,f]);const Ee=_.useMemo(()=>{const D=new Date(f).getDay();return D===0||D===6?null:wt[D-1]},[f]),tt=D=>{const z=new Date(f);z.setDate(z.getDate()+D),p(oi(z))},kt=()=>{p(oi(new Date))},xt=()=>{w.current&&w.current.showPicker()},bt=_.useMemo(()=>e.filter(D=>{const z=D.name.toLowerCase().includes(Le.toLowerCase()),se=wr==="all"?!0:D.shifts&&D.shifts.includes(wr);return z&&se}),[e,Le,wr]),qt=_.useMemo(()=>e.filter(D=>D.unavailableDates.includes(f)),[e,f]),pt=_.useMemo(()=>{if(!Ee)return[];const D=qt.map(ke=>ke.id),z=fe.filter(ke=>ke.day===Ee&&D.includes(ke.teacherId)),le=l.filter(ke=>ke.date===f).map(ke=>ke.scheduleItemId),ge=fe.filter(ke=>le.includes(ke.id)),Me=[...z];return ge.forEach(ke=>{Me.find(it=>it.id===ke.id)||Me.push(ke)}),Me.sort((ke,it)=>ke.period-it.period)},[fe,Ee,qt,l,f]),{pendingLessons:vt,resolvedLessons:yr}=_.useMemo(()=>{const D=[],z=[];return pt.forEach(se=>{l.filter(ge=>ge.scheduleItemId===se.id&&ge.date===f).length>0?z.push(se):D.push(se)}),{pendingLessons:D,resolvedLessons:z}},[pt,l,f]),wn=D=>{var se;const z=e.find(le=>le.id===D);Te(D),Pe(((se=z==null?void 0:z.absenceReasons)==null?void 0:se[f])||""),k(!0)},vr=_.useCallback(async()=>{let D=[...e];const z=D.findIndex(le=>le.id===ye);if(z===-1)return;const se={...D[z]};se.unavailableDates.includes(f)||(se.unavailableDates=[...se.unavailableDates,f]),se.absenceReasons||(se.absenceReasons={}),se.absenceReasons[f]=Re,D[z]=se,await A({teachers:D}),k(!1)},[e,ye,f,Re,A]),lt=_.useCallback(async D=>{let z=[...e];const se=z.findIndex(ge=>ge.id===D);if(se===-1)return;const le={...z[se]};le.unavailableDates=le.unavailableDates.filter(ge=>ge!==f),le.absenceReasons&&delete le.absenceReasons[f],z[se]=le,await A({teachers:z})},[e,f,A]),qr=_.useCallback(async(D,z=!1)=>{if(!m){alert(":   .    .");return}const se=fe.find(Me=>Me.id===m.scheduleItemId);if(!se){alert(":     .");return}const le=l.filter(Me=>!(Me.scheduleItemId===m.scheduleItemId&&Me.date===f)),ge={id:gn(),date:f,scheduleItemId:m.scheduleItemId,originalTeacherId:se.teacherId,replacementTeacherId:D,replacementRoomId:P||void 0,isMerger:z,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&W?W:void 0,refusals:J};le.push(ge);try{await c({substitutions:le}),S(!1),Wt(""),H(""),Be(""),O([]),G(null),y(null)}catch(Me){console.error("Failed to save substitution:",Me),alert("   .   .")}},[m,f,P,fe,l,e,W,J,c]),Xt=_.useCallback(async D=>{if(!m||!Ee||!m.period||!m.shift||!m.teacherId){alert(":   .");return}const z=fe.filter(le=>le.classId===D&&le.day===Ee&&le.period===m.period&&le.shift===m.shift);if(z.length===0){alert("    .");return}const se=l.filter(le=>!(le.scheduleItemId===m.scheduleItemId&&le.date===f));z.forEach(le=>{const ge={id:gn(),date:f,scheduleItemId:m.scheduleItemId,originalTeacherId:m.teacherId,replacementTeacherId:le.teacherId,replacementClassId:le.classId,replacementSubjectId:le.subjectId,isMerger:!0,replacementRoomId:le.roomId,lessonAbsenceReason:W||void 0};se.push(ge)}),await c({substitutions:se}),S(!1),Wt(""),H(""),Be(""),y(null),Y(!1)},[m,f,Ee,fe,l,W,c]),Ds=_.useCallback(async D=>{if(!m)return;const z=fe.find(Dt=>Dt.id===m.scheduleItemId),se=fe.find(Dt=>Dt.id===D);if(!z||!se){alert(":     .");return}const le=[...l];let ge,Me;P?(ge=P,Me=te?se.roomId:z.roomId):te?(ge=z.roomId,Me=se.roomId):(ge=se.roomId,Me=z.roomId);const ke=le.findIndex(Dt=>Dt.scheduleItemId===z.id&&Dt.date===f),it={id:ke>=0?le[ke].id:gn(),date:f,scheduleItemId:z.id,originalTeacherId:z.teacherId,replacementTeacherId:z.teacherId,replacementClassId:se.classId,replacementSubjectId:se.subjectId,replacementRoomId:ge!==z.roomId?ge:void 0};ke>=0?le[ke]=it:le.push(it);const st=le.findIndex(Dt=>Dt.scheduleItemId===se.id&&Dt.date===f),It={id:st>=0?le[st].id:gn(),date:f,scheduleItemId:se.id,originalTeacherId:se.teacherId,replacementTeacherId:se.teacherId,replacementClassId:z.classId,replacementSubjectId:z.subjectId,replacementRoomId:Me!==se.roomId?Me:void 0};st>=0?le[st]=It:le.push(It),await c({substitutions:le}),S(!1),y(null),H(""),ee(!1),me(!1)},[m,fe,l,f,c,P,te]),yn=_.useCallback(async D=>{const z=l.filter(se=>!(se.scheduleItemId===D&&se.date===f));await c({substitutions:z})},[l,f,c]),Tr=(D,z)=>{y({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day,isEditing:!0}),z.replacementRoomId?H(z.replacementRoomId):H(""),z.lessonAbsenceReason?Be(z.lessonAbsenceReason):Be(""),z.refusals?O(z.refusals):O([]),z.replacementTeacherId==="cancelled"?b("cancel"):z.isMerger||z.replacementClassId?b("advanced"):(b("teacher"),G(z.replacementTeacherId)),S(!0)},cn=()=>{const D=l.filter(le=>le.date===f&&le.replacementTeacherId!=="conducted"&&le.replacementTeacherId!=="cancelled");if(D.length===0)return"    .";D.sort((le,ge)=>{const Me=fe.find(it=>it.id===le.scheduleItemId),ke=fe.find(it=>it.id===ge.scheduleItemId);return((Me==null?void 0:Me.period)||0)-((ke==null?void 0:ke.period)||0)});let z="";const se=new Set;return D.forEach(le=>{if(se.has(le.scheduleItemId))return;se.add(le.scheduleItemId);const ge=fe.find(Ct=>Ct.id===le.scheduleItemId);if(!ge)return;const Me=r.find(Ct=>Ct.id===ge.classId),ke=t.find(Ct=>Ct.id===ge.subjectId),it=e.find(Ct=>Ct.id===le.originalTeacherId),st=e.find(Ct=>Ct.id===le.replacementTeacherId),It=n.find(Ct=>Ct.id===(le.replacementRoomId||ge.roomId)),Dt=It?It.name:le.replacementRoomId||ge.roomId||"";if(z+=` **${ge.period} ** | ${Me==null?void 0:Me.name} | ${ke==null?void 0:ke.name}
`,z+=` ${it==null?void 0:it.name}
`,le.isMerger)z+=` : ${st==null?void 0:st.name}
`;else if(le.replacementClassId){const Ct=r.find(Fr=>Fr.id===le.replacementClassId);z+=`  : ${Ct==null?void 0:Ct.name}
`}else z+=` ${st==null?void 0:st.name}
`;z+=` . ${Dt}

`}),z},vn=()=>{var le;const D=cn(),z=new Date(f).toLocaleDateString("ru-RU");let se=(le=s.telegramTemplates)==null?void 0:le.summary;return se||(se=` **  {{date}}** 

{{content}}`),se.replace("{{date}}",z).replace("{{content}}",D)},j=()=>{const D=vn();navigator.clipboard.writeText(D),d({type:"success",title:"",message:"    "})},re=async()=>{if(!s.telegramToken||!s.feedbackChatId){d({type:"warning",title:"",message:"Telegram  "});return}const D=vn();Q(!0);try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:D,parse_mode:"Markdown"})}),d({type:"success",title:"",message:"   Telegram"})}catch(z){console.error(z),d({type:"danger",title:"",message:"   "})}finally{Q(!1)}},Fe=(D,z,se,le,ge,Me,ke)=>{Ae({teacherId:D,lessonId:z,roomName:se,className:le,subjectName:ge,period:Me,roomChanged:ke}),Xe(!0)},Ce=async D=>{var Ct,Fr;if(!Ke)return;const{teacherId:z,lessonId:se,roomName:le,className:ge,subjectName:Me,period:ke,roomChanged:it}=Ke,st=e.find(Bn=>Bn.id===z);if(!(st!=null&&st.telegramChatId)||!s.telegramToken){alert("    Telegram ID    ."),Xe(!1);return}const It=new Date(f).toLocaleDateString("ru-RU");let Dt="";if(D==="single"){const Bn=` *${ke} * | ${ge}
 ${Me}
 . ${le}`;let Gn=(Ct=s.telegramTemplates)==null?void 0:Ct.teacherNotification;Gn||(Gn=` **  !**
 {{date}}

{{content}}

,   .`),Dt=Gn.replace("{{date}}",It).replace("{{content}}",Bn)}else{const Bn=l.filter(zn=>zn.date===f&&zn.replacementTeacherId===z);if(Bn.sort((zn,ut)=>{const un=fe.find(As=>As.id===zn.scheduleItemId),ws=fe.find(As=>As.id===ut.scheduleItemId);return((un==null?void 0:un.period)||0)-((ws==null?void 0:ws.period)||0)}),Bn.length===0){alert("       ."),Xe(!1);return}let Gn="";Bn.forEach(zn=>{var wA,Wu,bl;const ut=fe.find(Ls=>Ls.id===zn.scheduleItemId);if(!ut)return;const un=((wA=r.find(Ls=>Ls.id===ut.classId))==null?void 0:wA.name)||"?",ws=((Wu=t.find(Ls=>Ls.id===ut.subjectId))==null?void 0:Wu.name)||"?",As=ut.roomId,Na=zn.replacementRoomId,St=Na||As,Ra=((bl=n.find(Ls=>Ls.id===St))==null?void 0:bl.name)||St||"",Pi=Na&&Na!==As?" ( .)":"";Gn+=` *${ut.period} * | ${un}
 ${ws}
 . ${Ra}${Pi}

`});let Ps=(Fr=s.telegramTemplates)==null?void 0:Fr.teacherSummary;Ps||(Ps=` **   {{date}}**

{{content}},   .`),Dt=Ps.replace("{{date}}",It).replace("{{content}}",Gn)}try{await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:st.telegramChatId,text:Dt,parse_mode:"Markdown"})}),d({type:"success",title:"",message:`  ${st.name}`})}catch(Bn){console.error(Bn),alert("   Telegram")}finally{Xe(!1),Ae(null)}},Ve=_.useMemo(()=>m?new Set(l.filter(D=>D.date===f&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const z=fe.find(se=>se.id===D.scheduleItemId);return z&&z.period===m.period&&z.shift===m.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[l,fe,f,m]),he=_.useMemo(()=>{if(!m||!Ee)return{recommended:[],others:[]};const D=f.substring(0,7),z=e.filter(ge=>ge.name.toLowerCase().includes(Et.toLowerCase())).map(ge=>{const Me=ge.unavailableDates.includes(f),ke=fe.some(Fr=>Fr.teacherId===ge.id&&Fr.day===Ee&&Fr.period===m.period&&Fr.shift===m.shift),it=Ve.has(ge.id),st=ke||it,It=ge.subjectIds.includes(m.subjectId),Dt=l.filter(Fr=>Fr.replacementTeacherId===ge.id&&Fr.date.startsWith(D)).length;let Ct=0;return Me&&(Ct-=1e3),st&&(Ct-=200),It&&(Ct+=50),!st&&!Me&&(Ct+=100),Ct-=Dt,{teacher:ge,isAbsent:Me,isBusy:st,isSpecialist:It,score:Ct,subsCount:Dt}}).sort((ge,Me)=>Me.score-ge.score),se=z.filter(ge=>!ge.isBusy&&!ge.isAbsent).slice(0,3),le=z.filter(ge=>!se.includes(ge));return{recommended:se,others:le}},[e,m,f,Et,Ee,fe,l,Ve]),Ue=_.useMemo(()=>{if(!m||!Ee)return[];const D=fe.filter(se=>se.day===Ee&&se.period===m.period&&se.shift===m.shift&&se.classId!==m.classId),z=new Map;return D.forEach(se=>{const le=r.find(ke=>ke.id===se.classId),ge=e.find(ke=>ke.id===se.teacherId),Me=t.find(ke=>ke.id===se.subjectId);if(le&&ge){z.has(le.id)||z.set(le.id,{classEntity:le,teachers:[],subjects:[]});const ke=z.get(le.id);ke.teachers.includes(ge.name)||ke.teachers.push(ge.name),Me&&!ke.subjects.includes(Me.name)&&ke.subjects.push(Me.name)}}),Array.from(z.values())},[fe,m,Ee,r,e,t]),Ie=_.useMemo(()=>{var Me;if(!m)return null;const D=fe.find(ke=>ke.id===m.scheduleItemId);if(!D)return null;const z=r.find(ke=>ke.id===D.classId),se=t.find(ke=>ke.id===D.subjectId),le=e.find(ke=>ke.id===D.teacherId),ge=((Me=le==null?void 0:le.unavailableDates)==null?void 0:Me.includes(f))||!1;return{className:z==null?void 0:z.name,subjectName:se==null?void 0:se.name,teacherName:le==null?void 0:le.name,teacherId:le==null?void 0:le.id,period:D.period,roomId:D.roomId,isTeacherAbsent:ge}},[m,fe,r,t,e,f]),at=_.useMemo(()=>!(Ie!=null&&Ie.teacherId)||!Ee?[]:fe.filter(D=>D.teacherId===Ie.teacherId&&D.day===Ee&&D.id!==(m==null?void 0:m.scheduleItemId)).sort((D,z)=>D.period-z.period),[fe,Ie,Ee,m]),Br=_.useMemo(()=>{if(!Ee||ue.length<2)return[];const D=ue.toLowerCase(),z=e.filter(ge=>ge.name.toLowerCase().includes(D)),se=r.filter(ge=>ge.name.toLowerCase().includes(D)),le=[];return z.forEach(ge=>{fe.filter(ke=>ke.teacherId===ge.id&&ke.day===Ee).forEach(ke=>{const it=r.find(It=>It.id===ke.classId),st=t.find(It=>It.id===ke.subjectId);le.push({...ke,entityName:ge.name,subInfo:it==null?void 0:it.name,subjectName:st==null?void 0:st.name})})}),se.forEach(ge=>{fe.filter(ke=>ke.classId===ge.id&&ke.day===Ee).forEach(ke=>{if(le.find(It=>It.id===ke.id))return;const it=e.find(It=>It.id===ke.teacherId),st=t.find(It=>It.id===ke.subjectId);le.push({...ke,entityName:ge.name,subInfo:it==null?void 0:it.name,subjectName:st==null?void 0:st.name})})}),le.sort((ge,Me)=>ge.period-Me.period)},[ue,Ee,e,r,fe,t]),jt=(D,z)=>{ze(z),D.dataTransfer.effectAllowed="copy",D.dataTransfer.setData("text/plain",z)},xs=(D,z)=>{D.preventDefault(),Ye(z)},Sa=()=>{Ye(null)},Ua=(D,z)=>{var se;D.preventDefault(),Ne&&(y({scheduleItemId:z.id,subjectId:z.subjectId,period:z.period,shift:z.shift,classId:z.classId,teacherId:z.teacherId,roomId:z.roomId,day:z.day}),S(!0),Wt(((se=e.find(le=>le.id===Ne))==null?void 0:se.name)||""),ze(null),Ye(null))},ss=(D,z)=>{let se=!1;if(z){if(!window.confirm("  .   ?"))return;se=!0}qr(D,se)},Qa=(D,z)=>{z.stopPropagation(),J.includes(D)?O(J.filter(se=>se!==D)):O([...J,D])},$u=(D,z)=>{var Ps,zn;const se=l.filter(ut=>ut.scheduleItemId===D.id&&ut.date===f),ge=se.length>0?se[0]:null,Me=ge&&!["conducted","cancelled"].includes(ge.replacementTeacherId)?e.find(ut=>ut.id===ge.replacementTeacherId):null,ke=e.find(ut=>ut.id===D.teacherId),it=t.find(ut=>ut.id===D.subjectId),st=r.find(ut=>ut.id===D.classId),It=((Ps=n.find(ut=>ut.id===D.roomId))==null?void 0:Ps.name)||D.roomId||"",Dt=ge==null?void 0:ge.replacementRoomId,Ct=Dt?((zn=n.find(ut=>ut.id===Dt))==null?void 0:zn.name)||Dt:null,Fr=Dt&&Dt!==D.roomId,Bn=(ge==null?void 0:ge.replacementTeacherId)==="cancelled",Gn=(ge==null?void 0:ge.replacementTeacherId)==="conducted";return a.jsxs("div",{onDragOver:ut=>xs(ut,D.id),onDragLeave:Sa,onDrop:ut=>Ua(ut,D),className:`p-5 rounded-2xl border transition-all ${_e===D.id?"ring-2 ring-indigo-500 bg-indigo-50 border-indigo-500":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 shadow-sm"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-xl ${z?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:D.period}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg",children:st==null?void 0:st.name}),a.jsx("div",{className:"text-sm text-slate-500",children:it==null?void 0:it.name})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:D.shift===de.First?"1 ":"2 "}),a.jsx("div",{className:"mt-1",children:Fr?a.jsxs("div",{className:"flex items-center justify-end gap-1.5 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded border border-indigo-100 dark:border-indigo-800",children:[a.jsx("span",{className:"text-xs font-mono font-bold text-slate-400 line-through decoration-red-400",children:It}),a.jsx(M,{name:"ArrowRight",size:10,className:"text-indigo-400"}),a.jsx("span",{className:"text-xs font-mono font-black text-indigo-700 dark:text-indigo-300",children:Ct})]}):a.jsx("div",{className:"text-xs font-mono bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded inline-block font-bold",children:It})})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[a.jsx("div",{className:`text-base font-medium ${z?"text-slate-400 line-through":"text-red-500"}`,children:ke==null?void 0:ke.name}),z?a.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[Bn?a.jsx("span",{className:"text-red-600 font-black text-sm uppercase",children:" "}):Gn?a.jsx("span",{className:"text-blue-600 font-bold text-sm",children:""}):a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-emerald-600 font-bold text-base",children:(Me==null?void 0:Me.name)||""}),(ge==null?void 0:ge.isMerger)&&a.jsx("span",{className:"text-[10px] text-purple-500 font-bold",children:""})]}),Me&&Me.telegramChatId&&!Bn&&!Gn&&a.jsx("button",{onClick:()=>{const ut=Fr?`${It} -> ${Ct}`:It;Fe(Me.id,D.id,ut,(st==null?void 0:st.name)||"?",(it==null?void 0:it.name)||"?",D.period,!!Fr)},className:"p-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",title:"   Telegram",children:a.jsx(M,{name:"Send",size:16})}),ge&&a.jsx("button",{onClick:()=>Tr(D,ge),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 rounded-lg transition-colors",title:" ",children:a.jsx(M,{name:"Edit",size:18})}),a.jsx("button",{onClick:()=>yn(D.id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(M,{name:"X",size:18})})]}):a.jsx("button",{onClick:()=>{y({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),S(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-indigo-700 transition",children:""})]})]},D.id)};return a.jsxs("div",{className:"h-full flex flex-col gap-6",children:[a.jsx("div",{className:"flex flex-col gap-4",children:a.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 p-1.5 rounded-xl border border-slate-200 dark:border-slate-600",children:[a.jsx("button",{onClick:()=>tt(-1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:a.jsx(M,{name:"ArrowRight",className:"rotate-180",size:18})}),a.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 font-bold text-slate-700 dark:text-slate-200 cursor-pointer relative group",children:[a.jsx(M,{name:"Calendar",size:18,className:"text-indigo-500"}),a.jsx("span",{children:new Date(f).toLocaleDateString("ru-RU",{day:"numeric",month:"long",weekday:"short"})}),a.jsx("input",{ref:w,type:"date",value:f,onChange:D=>p(D.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full"})]}),a.jsx("button",{onClick:xt,className:"p-2 bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-lg hover:text-indigo-600 shadow-sm border border-slate-200 dark:border-slate-500",title:" ",children:a.jsx(M,{name:"Calendar",size:16})}),a.jsx("button",{onClick:()=>kt(),className:"px-3 py-1.5 text-xs font-bold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors",children:""}),a.jsx("button",{onClick:()=>tt(1),className:"p-2 text-slate-500 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition-colors",children:a.jsx(M,{name:"ArrowRight",size:18})})]})]}),a.jsxs("div",{className:"flex gap-2 mt-auto",children:[a.jsxs("button",{onClick:re,disabled:I,className:"h-[48px] px-5 rounded-xl bg-blue-600 text-white font-bold text-sm shadow-lg shadow-blue-200 hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50",children:[I?a.jsx(M,{name:"Loader",className:"animate-spin",size:18}):a.jsx(M,{name:"Send",size:18})," Telegram"]}),a.jsxs("button",{onClick:j,className:"h-[48px] px-5 rounded-xl bg-indigo-600 text-white font-bold text-sm shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition flex items-center gap-2",children:[a.jsx(M,{name:"Copy",size:18})," "]}),a.jsxs("button",{onClick:()=>Oe(!0),className:"h-[48px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-200 transition-colors",children:[a.jsx(M,{name:"History",size:18})," "]})]})]})})}),a.jsxs("div",{className:"md:hidden flex bg-white dark:bg-dark-800 p-1 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 shrink-0",children:[a.jsxs("button",{onClick:()=>$e("lessons"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${At==="lessons"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[a.jsx(M,{name:"List",size:18}),""]}),a.jsxs("button",{onClick:()=>$e("teachers"),className:`flex-1 py-2.5 text-sm font-bold rounded-lg transition-all flex items-center justify-center gap-2 ${At==="teachers"?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400"}`,children:[a.jsx(M,{name:"Users",size:18}),""]})]}),a.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[a.jsx("div",{className:`w-full md:w-80 flex-col gap-4 ${et&&At!=="teachers"?"hidden":"flex"}`,children:a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[a.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"UserX",size:18,className:"text-red-500"})," "]}),a.jsxs("div",{className:"mb-3 space-y-2",children:[a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[a.jsx("button",{onClick:()=>Rt("all"),className:`flex-1 py-2 text-xs font-bold rounded-md ${wr==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),a.jsx("button",{onClick:()=>Rt(de.First),className:`flex-1 py-2 text-xs font-bold rounded-md ${wr===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),a.jsx("button",{onClick:()=>Rt(de.Second),className:`flex-1 py-2 text-xs font-bold rounded-md ${wr===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),a.jsxs("div",{className:"relative",children:[a.jsx(M,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),a.jsx("input",{placeholder:" ...",value:Le,onChange:D=>Wr(D.target.value),className:"w-full pl-9 pr-3 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-sm outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:bt.map(D=>{const z=D.unavailableDates.includes(f),se=D.absenceReasons?D.absenceReasons[f]:"";return a.jsxs("div",{draggable:!z,onDragStart:le=>jt(le,D.id),className:`flex flex-col p-4 rounded-xl border transition-all ${z?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600 cursor-grab active:cursor-grabbing hover:border-indigo-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:`text-base font-bold ${z?"text-red-700 dark:text-red-400":"text-slate-700 dark:text-slate-300"}`,children:D.name}),a.jsxs("div",{className:"flex gap-1",children:[z&&a.jsx("button",{onClick:()=>wn(D.id),className:"p-1.5 bg-white text-slate-500 rounded-lg hover:text-indigo-600 shadow-sm",title:" ",children:a.jsx(M,{name:"Edit",size:14})}),a.jsx("button",{onClick:()=>z?lt(D.id):wn(D.id),className:`text-xs px-2.5 py-1.5 rounded-lg font-bold transition-colors ${z?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:z?"":""})]})]}),a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsx("div",{className:"flex gap-1",children:D.shifts.map(le=>a.jsx("span",{className:"text-[10px] bg-white dark:bg-slate-600 px-1.5 py-0.5 rounded border border-slate-100 dark:border-slate-500 text-slate-500 font-medium",children:le===de.First?"1":"2"},le))}),z&&se&&a.jsx("div",{className:"text-xs text-red-500 dark:text-red-400 italic font-medium",children:se})]})]},D.id)})})]})}),a.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${et&&At!=="lessons"?"hidden":"flex"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsxs("button",{onClick:()=>E("pending"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${B==="pending"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:["  ",vt.length>0&&a.jsx("span",{className:"ml-1 bg-red-500 text-white px-2 py-0.5 rounded-full text-xs",children:vt.length})]}),a.jsxs("button",{onClick:()=>E("resolved"),className:`px-5 py-2.5 text-sm font-bold rounded-lg transition-all ${B==="resolved"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500"}`,children:[" ",yr.length>0&&a.jsx("span",{className:"ml-1 bg-emerald-500 text-white px-2 py-0.5 rounded-full text-xs",children:yr.length})]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{onClick:()=>{T(""),L(!0)},className:"p-3 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100",children:a.jsx(M,{name:"Search",size:20})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[(B==="pending"?vt:yr).map(D=>$u(D,B==="resolved")),(B==="pending"?vt:yr).length===0&&a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[a.jsx(M,{name:B==="pending"?"CheckCircle":"List",size:64,className:"mb-4 text-slate-200 dark:text-slate-700"}),a.jsx("p",{className:"text-lg font-medium",children:B==="pending"?"  !":"  "})]})]})]})]}),a.jsx(jr,{isOpen:N,onClose:()=>S(!1),title:" ",maxWidth:"max-w-2xl",children:a.jsxs("div",{className:"flex flex-col h-[90vh] md:h-[850px] -m-6",children:[a.jsxs("div",{className:"p-6 pb-2 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-dark-800 z-10",children:[Ie&&a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-xl",children:Ie.className}),a.jsxs("div",{className:"text-slate-500 dark:text-slate-400 font-medium",children:[Ie.period,"   ",Ie.subjectName]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-slate-400 text-xs uppercase font-bold",children:""}),a.jsx("div",{className:`text-base ${Ie.isTeacherAbsent?"line-through decoration-red-400 text-red-400":"font-bold dark:text-white"}`,children:Ie.teacherName})]})]}),a.jsxs("div",{className:"flex gap-2 border-b border-slate-100 dark:border-slate-700",children:[a.jsx("button",{onClick:()=>b("teacher"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${C==="teacher"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),a.jsx("button",{onClick:()=>b("cancel"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${C==="cancel"?"border-red-600 text-red-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:" "}),a.jsx("button",{onClick:()=>b("advanced"),className:`pb-3 px-4 text-sm font-bold border-b-2 transition-all ${C==="advanced"?"border-amber-600 text-amber-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:". "})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-white dark:bg-dark-800",children:[C==="teacher"&&a.jsxs("div",{className:"space-y-6",children:[he.recommended.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2 flex items-center gap-1",children:[a.jsx(M,{name:"Star",size:14})," "]}),a.jsx("div",{className:"space-y-2",children:he.recommended.map(({teacher:D,isSpecialist:z})=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50/50 border border-emerald-100 rounded-xl hover:bg-emerald-100/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-200 text-emerald-700 flex items-center justify-center text-sm font-bold",children:D.name[0]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-800 text-base",children:D.name}),a.jsx("div",{className:"text-xs text-emerald-600 font-bold uppercase",children:z?"":" "})]})]}),a.jsx("button",{onClick:()=>qr(D.id),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700",children:""})]},D.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" "}),a.jsxs("div",{className:"relative mb-2",children:[a.jsx(M,{name:"Search",className:"absolute left-3 top-3 text-slate-400",size:16}),a.jsx("input",{placeholder:" ...",value:Et,onChange:D=>Wt(D.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-indigo-500"})]}),a.jsx("div",{className:"space-y-1",children:he.others.map(({teacher:D,isBusy:z,isAbsent:se,subsCount:le})=>{const ge=J.includes(D.id);return a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg text-sm ${se?"opacity-50":"hover:bg-slate-50"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${z?"bg-orange-400":se?"bg-red-400":"bg-slate-300"}`}),a.jsx("span",{className:"font-bold text-base text-slate-700",children:D.name}),ge&&a.jsx("span",{className:"text-[10px] bg-slate-200 px-1.5 py-0.5 rounded font-bold text-slate-500",children:""})]}),a.jsxs("div",{className:"flex gap-2",children:[!se&&a.jsx("button",{onClick:Me=>Qa(D.id,Me),className:"p-1.5 text-slate-300 hover:text-slate-500 hover:bg-slate-100 rounded",children:a.jsx(M,{name:"X",size:16})}),!se&&a.jsx("button",{onClick:()=>ss(D.id,z),className:`px-3 py-1.5 rounded-lg text-xs font-bold ${z?"text-orange-600 bg-orange-50":"text-indigo-600 bg-indigo-50"}`,children:z?"?":""})]})]},D.id)})})]})]}),C==="cancel"&&a.jsxs("div",{className:"text-center py-12 flex flex-col items-center justify-center h-full",children:[a.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-6",children:a.jsx(M,{name:"X",size:40})}),a.jsx("h3",{className:"font-black text-2xl mb-2 text-slate-800",children:" ?"}),a.jsx("p",{className:"text-slate-500 text-base mb-8 max-w-sm",children:"          ."}),a.jsx("button",{onClick:()=>qr("cancelled"),className:"px-8 py-4 bg-red-600 text-white rounded-xl font-bold text-lg hover:bg-red-700 shadow-lg shadow-red-200 hover:shadow-xl transition-all",children:" "})]}),C==="advanced"&&a.jsxs("div",{className:"space-y-6 pt-4",children:[a.jsxs("button",{onClick:()=>qr("conducted"),className:"w-full p-4 rounded-xl bg-blue-50 text-blue-700 font-bold text-base hover:bg-blue-100 flex items-center justify-center gap-3 border border-blue-100 transition-all hover:shadow-md",children:[a.jsx(M,{name:"CheckCircle",size:20}),"   ( )"]}),a.jsxs("div",{className:"bg-amber-50 p-5 rounded-2xl border border-amber-100",children:[a.jsxs("h4",{className:"font-bold text-amber-800 text-base mb-2 flex items-center gap-2",children:[a.jsx(M,{name:"Users",size:18})," "]}),a.jsx("p",{className:"text-sm text-amber-700 mb-4",children:"     ."}),a.jsx("div",{className:"space-y-2",children:Ue.length===0?a.jsx("div",{className:"text-sm text-amber-500 italic text-center py-4",children:"  "}):Ue.map(D=>a.jsxs("button",{onClick:()=>Xt(D.classEntity.id),className:"w-full p-3 bg-white rounded-xl border border-amber-200 text-left text-sm hover:border-amber-400 hover:shadow-sm transition-all",children:[a.jsx("span",{className:"font-bold text-base",children:D.classEntity.name})," ",a.jsx("span",{className:"text-slate-400 mx-2",children:"|"})," ",a.jsx("span",{className:"font-medium",children:D.subjects.join(", ")})]},D.classEntity.id))})]}),at.length>0&&a.jsxs("div",{className:"bg-purple-50 p-5 rounded-2xl border border-purple-100",children:[a.jsxs("h4",{className:"font-bold text-purple-800 text-base mb-2 flex items-center gap-2",children:[a.jsx(M,{name:"RotateCw",size:18})," "]}),a.jsx("p",{className:"text-sm text-purple-700 mb-4",children:"      ."}),a.jsx("div",{className:"space-y-2",children:at.map(D=>{var z;return a.jsxs("button",{onClick:()=>Ds(D.id),className:"w-full p-3 bg-white rounded-xl border border-purple-200 text-left text-sm hover:border-purple-400 hover:shadow-sm transition-all",children:[a.jsxs("span",{className:"font-bold text-base",children:[D.period," "]}),": ",a.jsx("span",{className:"font-medium",children:(z=r.find(se=>se.id===D.classId))==null?void 0:z.name})]},D.id)})})]})]})]}),C==="teacher"&&a.jsxs("div",{className:"p-6 pt-4 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-dark-800 flex flex-col gap-4 rounded-b-3xl",children:[a.jsx("div",{className:"flex gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-2",children:" ()"}),a.jsxs("select",{value:P,onChange:D=>H(D.target.value),className:"w-full border border-slate-200 p-3 rounded-xl text-sm bg-white font-medium outline-none focus:ring-2 ring-indigo-500",children:[a.jsx("option",{value:"",children:" /  "}),n.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})]})}),(ne||(Ie==null?void 0:Ie.teacherId)&&P)&&a.jsx("button",{onClick:()=>qr(ne||Ie.teacherId),className:"w-full py-3 bg-indigo-600 text-white rounded-xl text-base font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200",children:" "})]})]})}),a.jsx(jr,{isOpen:v,onClose:()=>k(!1),title:" ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("select",{value:Re,onChange:D=>Pe(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[a.jsx("option",{children:""}),a.jsx("option",{children:""}),a.jsx("option",{children:""}),a.jsx("option",{children:" "}),a.jsx("option",{children:""}),a.jsx("option",{children:" "}),a.jsx("option",{children:""})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:vr,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})}),a.jsxs(jr,{isOpen:R,onClose:()=>L(!1),title:"  ",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ."}),a.jsxs("div",{className:"relative",children:[a.jsx(M,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),a.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:ue,onChange:D=>T(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),a.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[Br.map(D=>{var z;return a.jsxs("button",{onClick:()=>{L(!1),y({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),S(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",a.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),a.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),a.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[a.jsx("span",{children:D.subjectName}),D.roomId&&a.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((z=n.find(se=>se.id===D.roomId))==null?void 0:z.name)||D.roomId]})]})]},D.id)}),ue.length>1&&Br.length===0&&a.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",f,")"]})]})]}),a.jsx(jr,{isOpen:U,onClose:()=>Oe(!1),title:" ",maxWidth:"max-w-5xl",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-4 p-1 bg-slate-50 dark:bg-slate-700 rounded-xl",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(M,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:16}),a.jsx("input",{placeholder:"   (YYYY-MM-DD)  ...",value:q,onChange:D=>$(D.target.value),className:"w-full pl-9 pr-3 py-2 bg-white dark:bg-slate-800 border-none rounded-lg text-sm outline-none dark:text-white"})]}),a.jsxs("div",{className:"relative w-64",children:[a.jsxs("select",{value:Se,onChange:D=>xe(D.target.value),className:"w-full py-2 px-3 bg-white dark:bg-slate-800 rounded-lg text-sm border-none outline-none cursor-pointer dark:text-white appearance-none",children:[a.jsx("option",{value:"",children:" "}),e.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx(M,{name:"Filter",className:"absolute right-3 top-2.5 text-slate-400 pointer-events-none",size:14})]})]}),a.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar rounded-xl border border-slate-200 dark:border-slate-700",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 sticky top-0 z-10 shadow-sm",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),a.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:""}),a.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),a.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "}),a.jsx("th",{className:"p-4 text-xs font-black text-slate-500 dark:text-slate-400 uppercase tracking-wider text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 bg-white dark:bg-dark-800",children:l.filter(D=>{var z,se;if(Se&&D.replacementTeacherId!==Se&&D.originalTeacherId!==Se)return!1;if(q){const le=q.toLowerCase(),ge=D.date.includes(le),Me=(z=e.find(it=>it.id===D.originalTeacherId))==null?void 0:z.name.toLowerCase().includes(le),ke=(se=e.find(it=>it.id===D.replacementTeacherId))==null?void 0:se.name.toLowerCase().includes(le);return ge||Me||ke}return!0}).sort((D,z)=>new Date(z.date).getTime()-new Date(D.date).getTime()).map(D=>{const z=e.find(Me=>Me.id===D.originalTeacherId),se=e.find(Me=>Me.id===D.replacementTeacherId),le=fe.find(Me=>Me.id===D.scheduleItemId)||{period:"?",classId:"?"},ge=r.find(Me=>Me.id===le.classId);return a.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[a.jsx("td",{className:"p-4 text-sm font-medium text-slate-600 dark:text-slate-300 whitespace-nowrap",children:new Date(D.date).toLocaleDateString("ru-RU")}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"font-bold text-slate-800 dark:text-white",children:[le.period," "]}),a.jsx("span",{className:"text-xs text-slate-500",children:(ge==null?void 0:ge.name)||"?"})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-xs font-bold text-slate-500",children:z==null?void 0:z.name[0]}),a.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:z==null?void 0:z.name})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[D.replacementTeacherId==="cancelled"?a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-500",children:a.jsx(M,{name:"X",size:14})}):D.replacementTeacherId==="conducted"?a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-500",children:a.jsx(M,{name:"CheckCircle",size:14})}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 font-bold text-xs",children:se==null?void 0:se.name[0]}),a.jsx("span",{className:`text-sm font-bold ${D.replacementTeacherId==="cancelled"?"text-red-500":"text-slate-800 dark:text-white"}`,children:D.replacementTeacherId==="cancelled"?" ":D.replacementTeacherId==="conducted"?"":se==null?void 0:se.name})]})}),a.jsx("td",{className:"p-4 text-right",children:D.isMerger?a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:""}):D.replacementTeacherId==="cancelled"?a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:""}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:""})})]},D.id)})})]})})]})}),a.jsx(jr,{isOpen:We,onClose:()=>Xe(!1),title:" ",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("p",{className:"text-base text-slate-600 dark:text-slate-300",children:"               ?"}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:()=>Ce("single"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors",children:a.jsx(M,{name:"Bell",size:20})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  "}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),a.jsxs("button",{onClick:()=>Ce("all"),className:"w-full p-4 bg-white border border-slate-200 dark:bg-slate-700 dark:border-slate-600 rounded-xl flex items-center gap-4 hover:shadow-md transition-all group",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center group-hover:bg-purple-600 group-hover:text-white transition-colors",children:a.jsx(M,{name:"List",size:20})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:"  ()"}),a.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"     "})]})]})]})]})})]})},QK=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=Kn(),{schedule1:A,schedule2:i}=Di(),[o,l]=_.useState("teachers"),[c,d]=_.useState(oi()),[h,f]=_.useState(de.First),[p,w]=_.useState(1),[B,E]=_.useState(de.First),[C,b]=_.useState(1),[I,Q]=_.useState(""),[N,S]=_.useState(""),[m,y]=_.useState(""),[v,k]=_.useState(""),[R,L]=_.useState({summary:"",teacherNotification:"",teacherSummary:""}),[U,Oe]=_.useState(!1),[We,Xe]=_.useState({message:"",active:!1,lastUpdated:""}),Ke=_.useMemo(()=>{const $={schedule:A,schedule2:i,settings:n};return X2(new Date(c),$)},[c,A,i,n]);_.useEffect(()=>{n&&(Q(n.telegramToken||""),S(n.feedbackChatId||""),y(n.weatherApiKey||""),k(n.weatherCity||"Minsk,BY"),L(n.telegramTemplates||{summary:` **  {{date}}** 

{{content}}`,teacherNotification:` **  !**
 {{date}}

{{content}}

,   .`,teacherSummary:` **   {{date}}**

{{content}},   .`}),Xe(n.adminAnnouncement||{message:"",active:!1,lastUpdated:""}))},[n]),_.useEffect(()=>{w(h===de.First?1:0)},[h]),_.useEffect(()=>{b(B===de.First?1:0)},[B]);const Ae=_.useMemo(()=>{const $=new Date(c).getDay();return $===0||$===6?null:wt[$-1]},[c]),ye=bn[h],Te=_.useMemo(()=>Ae?e.filter($=>$.shifts&&!$.shifts.includes(h)||$.unavailableDates.includes(c)?!1:!Ke.some(xe=>xe.teacherId===$.id&&xe.day===Ae&&xe.period>p&&xe.shift===h)).sort(($,Se)=>$.name.localeCompare(Se.name)):[],[e,c,Ae,p,h,Ke]),Re=_.useMemo(()=>{if(!Ae)return[];const $=new Set;return Ke.forEach(xe=>{xe.day===Ae&&xe.period===C&&xe.shift===B&&xe.roomId&&$.add(xe.roomId)}),r.filter(xe=>!$.has(xe.id)).map(xe=>xe.name)},[Ke,r,Ae,C,B]),Pe=async()=>{await s({settings:{...n,telegramToken:I,feedbackChatId:N,weatherApiKey:m,weatherCity:v,telegramTemplates:R,adminAnnouncement:{...We,lastUpdated:new Date().toISOString()}}}),alert(" !"),Oe(!1)},q=()=>{Xe($=>({...$,active:!$.active}))};return a.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[a.jsx(M,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),a.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>l("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),a.jsx("button",{onClick:()=>l("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),a.jsx("button",{onClick:()=>l("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),o!=="settings"&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),a.jsx("input",{type:"date",value:c,onChange:$=>d($.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),o==="teachers"&&a.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),a.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>f(de.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),a.jsx("button",{onClick:()=>f(de.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),a.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:ye.map($=>a.jsx("button",{onClick:()=>w($),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${p===$?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:$},$))})]})]}),o==="rooms"&&a.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),a.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>E(de.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),a.jsx("button",{onClick:()=>E(de.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),a.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:bn[B].map($=>a.jsx("button",{onClick:()=>b($),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${C===$?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:$},$))})]})]}),o==="settings"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 space-y-6",children:[a.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(M,{name:"Zap",size:20}),"  "]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),a.jsx("input",{type:"password",value:I,onChange:$=>Q($.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),a.jsx("input",{type:"text",value:N,onChange:$=>S($.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   "})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-600",children:[a.jsxs("h4",{className:"font-bold text-sm text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-2",children:[a.jsx(M,{name:"Cloud",size:16}),"  (OpenWeatherMap)"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"API Key"}),a.jsx("input",{type:"password",value:m,onChange:$=>y($.target.value),placeholder:"b6907d28...",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),a.jsx("input",{type:"text",value:v,onChange:$=>k($.target.value),placeholder:"Minsk,BY",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"})]})]})]}),a.jsxs("button",{onClick:()=>Oe(!0),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-indigo-200 dark:border-slate-600 text-indigo-600 dark:text-indigo-400 rounded-xl font-bold hover:bg-indigo-50 dark:hover:bg-slate-600 transition flex items-center justify-center gap-2",children:[a.jsx(M,{name:"Edit",size:18}),"   "]})]})]}),a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-6 rounded-2xl border border-amber-100 dark:border-amber-900 space-y-6",children:[a.jsxs("h3",{className:"font-bold text-lg text-amber-900 dark:text-amber-100 flex items-center gap-2",children:[a.jsx(M,{name:"Bell",size:20}),"  "]}),a.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:",        ( )."}),a.jsx("div",{children:a.jsx("textarea",{value:We.message,onChange:$=>Xe({...We,message:$.target.value}),rows:4,className:"w-full border border-amber-200 dark:border-amber-800 rounded-xl p-3 text-sm bg-white dark:bg-slate-800 dark:text-white outline-none focus:border-amber-500 focus:ring-2 ring-amber-500/20 resize-none",placeholder:":     14:00..."})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${We.active?"bg-amber-500":"bg-slate-300 dark:bg-slate-600"}`,children:a.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow-sm transform transition-transform ${We.active?"translate-x-6":"translate-x-0"}`})}),a.jsx("input",{type:"checkbox",className:"hidden",checked:We.active,onChange:q}),a.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:""})]}),a.jsx("div",{className:"text-xs text-slate-400",children:We.lastUpdated?`: ${new Date(We.lastUpdated).toLocaleDateString()}`:""})]})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("button",{onClick:Pe,className:"w-full px-6 py-4 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 text-lg",children:[a.jsx(M,{name:"Save",size:22}),"   "]})})]})]}),o==="teachers"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[Te.map($=>a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:a.jsx(M,{name:"CheckCircle",size:22})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:$.name}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:$.subjectIds.slice(0,2).map(Se=>{const xe=t.find(Le=>Le.id===Se);return xe?a.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:xe.name},Se):null})})]})]},$.id)),Te.length===0&&a.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",p,"   ",h]})]}),o==="rooms"&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[Re.map($=>a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:a.jsx(M,{name:"DoorOpen",size:20})}),a.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:$}),a.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},$)),Re.length===0&&a.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[a.jsx(M,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),a.jsx("p",{children:"      (   )."})]})]}),a.jsx(jr,{isOpen:U,onClose:()=>Oe(!1),title:" ",maxWidth:"max-w-3xl",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-900 text-sm text-blue-800 dark:text-blue-300",children:[a.jsx("p",{className:"font-bold mb-1",children:" :"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsxs("li",{children:[a.jsx("code",{children:"{{date}}"}),'    (. "01.09.2023")']}),a.jsxs("li",{children:[a.jsx("code",{children:"{{content}}"}),"    "]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (/)"}),a.jsx("textarea",{value:R.summary,onChange:$=>L({...R,summary:$.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ( )"}),a.jsx("textarea",{value:R.teacherNotification,onChange:$=>L({...R,teacherNotification:$.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  (  )"}),a.jsx("textarea",{value:R.teacherSummary,onChange:$=>L({...R,teacherSummary:$.target.value}),rows:4,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 font-mono"})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{onClick:Pe,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:" "})})]})})]})};var NK=Object.defineProperty,jf=Object.getOwnPropertySymbols,dF=Object.prototype.hasOwnProperty,hF=Object.prototype.propertyIsEnumerable,WC=(t,e,r)=>e in t?NK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,RK=(t,e)=>{for(var r in e||(e={}))dF.call(e,r)&&WC(t,r,e[r]);if(jf)for(var r of jf(e))hF.call(e,r)&&WC(t,r,e[r]);return t},jK=(t,e)=>{var r={};for(var n in t)dF.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&jf)for(var n of jf(t))e.indexOf(n)<0&&hF.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ba;(t=>{const e=class{constructor(l,c,d,h){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let w=0;w<this.size;w++)f.push(!1);for(let w=0;w<this.size;w++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(d);if(this.drawCodewords(p),h==-1){let w=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const E=this.getPenaltyScore();E<w&&(h=B,w=E),this.applyMask(B)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(l,c){const d=t.QrSegment.makeSegments(l);return e.encodeSegments(d,c)}static encodeBinary(l,c){const d=t.QrSegment.makeBytes(l);return e.encodeSegments([d],c)}static encodeSegments(l,c,d=1,h=40,f=-1,p=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let w,B;for(w=d;;w++){const I=e.getNumDataCodewords(w,c)*8,Q=o.getTotalBits(l,w);if(Q<=I){B=Q;break}if(w>=h)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])p&&B<=e.getNumDataCodewords(w,I)*8&&(c=I);let E=[];for(const I of l){n(I.mode.modeBits,4,E),n(I.numChars,I.mode.numCharCountBits(w),E);for(const Q of I.getData())E.push(Q)}A(E.length==B);const C=e.getNumDataCodewords(w,c)*8;A(E.length<=C),n(0,Math.min(4,C-E.length),E),n(0,(8-E.length%8)%8,E),A(E.length%8==0);for(let I=236;E.length<C;I^=253)n(I,8,E);let b=[];for(;b.length*8<E.length;)b.push(0);return E.forEach((I,Q)=>b[Q>>>3]|=I<<7-(Q&7)),new e(w,c,b,f)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(l[d],l[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let d=0;d<12;d++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,p=Math.floor(d/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(l,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),p=l+h,w=c+d;0<=p&&p<this.size&&0<=w&&w<this.size&&this.setFunctionModule(p,w,f!=2&&f!=4)}}drawAlignmentPattern(l,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(l+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(l,c,d){this.modules[c][l]=d,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,d=this.errorCorrectionLevel;if(l.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],p=Math.floor(e.getNumRawDataModules(c)/8),w=h-p%h,B=Math.floor(p/h);let E=[];const C=e.reedSolomonComputeDivisor(f);for(let I=0,Q=0;I<h;I++){let N=l.slice(Q,Q+B-f+(I<w?0:1));Q+=N.length;const S=e.reedSolomonComputeRemainder(N,C);I<w&&N.push(0),E.push(N.concat(S))}let b=[];for(let I=0;I<E[0].length;I++)E.forEach((Q,N)=>{(I!=B-f||N>=w)&&b.push(Q[I])});return A(b.length==p),b}drawCodewords(l){if(l.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=d-f,B=(d+1&2)==0?this.size-1-h:h;!this.isFunction[B][p]&&c<l.length*8&&(this.modules[B][p]=s(l[c>>>3],7-(c&7)),c++)}}A(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(l){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let p=!1,w=0,B=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[f][E]==p?(w++,w==5?l+=e.PENALTY_N1:w>5&&l++):(this.finderPenaltyAddHistory(w,B),p||(l+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),p=this.modules[f][E],w=1);l+=this.finderPenaltyTerminateAndCount(p,w,B)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,w=0,B=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][f]==p?(w++,w==5?l+=e.PENALTY_N1:w>5&&l++):(this.finderPenaltyAddHistory(w,B),p||(l+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),p=this.modules[E][f],w=1);l+=this.finderPenaltyTerminateAndCount(p,w,B)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const w=this.modules[f][p];w==this.modules[f][p+1]&&w==this.modules[f+1][p]&&w==this.modules[f+1][p+1]&&(l+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((p,w)=>p+(w?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),l+=h*e.PENALTY_N4,A(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let d=[6];for(let h=this.size-7;d.length<l;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(l){if(l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const d=Math.floor(l/7)+2;c-=(25*d-10)*d-55,l>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(e.getNumRawDataModules(l)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<l-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<l;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(l,c){let d=c.map(h=>0);for(const h of l){const f=h^d.shift();d.push(0),c.forEach((p,w)=>d[w]^=e.reedSolomonMultiply(p,f))}return d}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*l;return A(d>>>8==0),d}finderPenaltyCountPatterns(l){const c=l[1];A(c<=this.size*3);const d=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(d&&l[0]>=c*4&&l[6]>=c?1:0)+(d&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,d){return l&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(l,c,d){if(c<0||c>31||l>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(l>>>h&1)}function s(l,c){return(l>>>c&1)!=0}function A(l){if(!l)throw new Error("Assertion error")}const i=class{constructor(l,c,d){if(this.mode=l,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(l){let c=[];for(const d of l)n(d,8,c);return new i(i.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!i.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<l.length;){const h=Math.min(l.length-d,3);n(parseInt(l.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!i.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=l.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d+1)),n(h,11,c)}return d<l.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(l.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:i.isNumeric(l)?[i.makeNumeric(l)]:i.isAlphanumeric(l)?[i.makeAlphanumeric(l)]:[i.makeBytes(i.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,c);else if(l<16384)n(2,2,c),n(l,14,c);else if(l<1e6)n(6,3,c),n(l,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(l){return i.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return i.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let d=0;for(const h of l){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let d=0;d<l.length;d++)l.charAt(d)!="%"?c.push(l.charCodeAt(d)):(c.push(parseInt(l.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(ba||(ba={}));(t=>{(e=>{const r=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(ba||(ba={}));(t=>{(e=>{const r=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(ba||(ba={}));var dc=ba;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var DK={L:dc.QrCode.Ecc.LOW,M:dc.QrCode.Ecc.MEDIUM,Q:dc.QrCode.Ecc.QUARTILE,H:dc.QrCode.Ecc.HIGH},PK=128,LK="L",MK="#FFFFFF",OK="#000000",HK=!1,fF=4,VK=.1;function KK(t,e=0){const r=[];return t.forEach(function(n,s){let A=null;n.forEach(function(i,o){if(!i&&A!==null){r.push(`M${A+e} ${s+e}h${o-A}v1H${A+e}z`),A=null;return}if(o===n.length-1){if(!i)return;A===null?r.push(`M${o+e},${s+e} h1v1H${o+e}z`):r.push(`M${A+e},${s+e} h${o+1-A}v1H${A+e}z`);return}i&&A===null&&(A=o)})}),r.join("")}function GK(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function zK(t,e,r,n){if(n==null)return null;const s=r?fF:0,A=t.length+s*2,i=Math.floor(e*VK),o=A/e,l=(n.width||i)*o,c=(n.height||i)*o,d=n.x==null?t.length/2-l/2:n.x*o,h=n.y==null?t.length/2-c/2:n.y*o;let f=null;if(n.excavate){let p=Math.floor(d),w=Math.floor(h),B=Math.ceil(l+d-p),E=Math.ceil(c+h-w);f={x:p,y:w,w:B,h:E}}return{x:d,y:h,h:c,w:l,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function $K(t){const e=t,{value:r,size:n=PK,level:s=LK,bgColor:A=MK,fgColor:i=OK,includeMargin:o=HK,imageSettings:l}=e,c=jK(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=dc.QrCode.encodeText(r,DK[s]).getModules();const h=o?fF:0,f=d.length+h*2,p=zK(d,n,o,l);let w=null;l!=null&&p!=null&&(p.excavation!=null&&(d=GK(d,p.excavation)),w=zs.createElement("image",{xlinkHref:l.src,height:p.h,width:p.w,x:p.x+h,y:p.y+h,preserveAspectRatio:"none"}));const B=KK(d,h);return zs.createElement("svg",RK({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),zs.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),zs.createElement("path",{fill:i,d:B,shapeRendering:"crispEdges"}),w)}const WK=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,saveStaticData:i,dutyZones:o}=Kn(),{schedule1:l,schedule2:c,substitutions:d,saveScheduleData:h,dutySchedule:f,nutritionRecords:p}=Di(),w=_.useRef(null),B=_.useRef(null),E=_.useRef(null),[C,b]=_.useState(oi()),[I,Q]=_.useState(()=>Ku(new Date,s)),[N,S]=_.useState(!1),[m,y]=_.useState(!1),[v,k]=_.useState(""),[R,L]=_.useState(""),[U,Oe]=_.useState(!1),[We,Xe]=_.useState(""),Ke=_.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,schedule:l,schedule2:c,substitutions:d,dutyZones:o,dutySchedule:f,nutritionRecords:p}),[t,e,r,n,s,A,l,c,d,o,f,p]),Ae=()=>I===2?c:l,ye=G=>{const J=new Date(G).getMonth();return J>=0&&J<=4?c:l},Te=_.useMemo(()=>{const G=new Set;return r.forEach(J=>{const O=J.name.match(/^(\d+)/);O&&G.add(O[1])}),Array.from(G).sort((J,O)=>parseInt(J)-parseInt(O))},[r]);_.useEffect(()=>{Te.length>0&&!We&&Xe(Te[0])},[Te]);const Re=G=>{var ie;const J=(ie=G.target.files)==null?void 0:ie[0];if(!J)return;const O=new FileReader;O.onload=async ee=>{var ae;try{const Y=JSON.parse((ae=ee.target)==null?void 0:ae.result);if(Y.teachers&&(Y.schedule||Y.schedule2)){if(window.confirm("    . ?")){const te={...nn,...Y,rooms:Y.rooms||nn.rooms,classes:Y.classes||[],schedule:Y.schedule||[],schedule2:Y.schedule2||[],teachers:Y.teachers||[],subjects:Y.subjects||[],substitutions:Y.substitutions||[],settings:{...nn.settings,...Y.settings}};await i(te),await h(te),alert("  !")}}else alert("  .")}catch{alert("  .")}},O.readAsText(J)},Pe=()=>{const G=Ae();let J=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;wt.forEach(ae=>{J+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${ae}</td></tr>`,[de.First,de.Second].forEach(Y=>{const te=r.filter(me=>me.shift===Y);te.length!==0&&(J+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${Y}</td></tr>`,J+='<tr><th class="header"></th>',bn[Y].forEach(me=>J+=`<th class="header">${me} </th>`),J+="</tr>",te.forEach(me=>{J+=`<tr><td class="class-cell">${me.name}</td>`,bn[Y].forEach(Ne=>{const ze=G.filter(_e=>_e.classId===me.id&&_e.day===ae&&_e.shift===Y&&_e.period===Ne);J+='<td style="height: 60px;">',ze.forEach(_e=>{const Ye=t.find(fe=>fe.id===_e.subjectId),et=e.find(fe=>fe.id===_e.teacherId),At=n.find(fe=>fe.id===_e.roomId),$e=At?At.name:_e.roomId;J+=`<div style="background-color: ${(Ye==null?void 0:Ye.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(Ye==null?void 0:Ye.name)||""} ${_e.direction||""}</div>
                                <div class="meta">${(et==null?void 0:et.name)||""} ${$e?`(. ${$e})`:""}</div>
                            </div>`}),J+="</td>"}),J+="</tr>"}))})}),J+="</table></body></html>";const O=new Blob([J],{type:"application/vnd.ms-excel"}),ie=URL.createObjectURL(O),ee=document.createElement("a");ee.href=ie,ee.download=`_22_${I}.xls`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee)},q=()=>{const G=Ae(),J={[rt.Monday]:{header:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let O=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;O+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[de.First,de.Second].forEach(Y=>{const te=bn[Y];O+="<table>",O+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${wt.length*te.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,O+="<tr>",wt.forEach(Ne=>{var _e;const ze=((_e=J[Ne])==null?void 0:_e.header)||"#f3f4f6";O+=`<th colspan="${te.length}" class="header" style="border: 2px solid #000; background-color: ${ze};">${Ne}</th>`}),O+="</tr>",O+="<tr>",wt.forEach(Ne=>{var _e;const ze=((_e=J[Ne])==null?void 0:_e.header)||"#f3f4f6";te.forEach(Ye=>O+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${ze};"></th>`)}),O+="</tr>";const me="#e5e7eb";O+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${me};">${Y}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${me};"></th>
            `,wt.forEach(Ne=>{var _e;const ze=((_e=J[Ne])==null?void 0:_e.header)||"#f3f4f6";te.forEach(Ye=>O+=`<th class="header" style="width: 40px; background-color: ${ze};">${Ye}</th>`)}),O+="</tr>",t.forEach(Ne=>{const ze=e.filter(_e=>_e.subjectIds.includes(Ne.id)&&_e.shifts.includes(Y));ze.length!==0&&(ze.forEach((_e,Ye)=>{O+="<tr>",Ye===0&&(O+=`<td rowspan="${ze.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Ne.name}</td>`),O+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${_e.name}</td>`,wt.forEach(et=>{var $e;const At=(($e=J[et])==null?void 0:$e.cell)||"#fff";te.forEach(fe=>{const Ee=G.find(tt=>tt.teacherId===_e.id&&tt.subjectId===Ne.id&&tt.day===et&&tt.period===fe&&tt.shift===Y);if(Ee){const tt=r.find(vt=>vt.id===Ee.classId),kt=n.find(vt=>vt.id===Ee.roomId),xt=kt?kt.name:Ee.roomId,bt=xt?`<sub>${xt}</sub>`:"",qt=Ee.direction?` <span style="font-size:10px">(${Ee.direction})</span>`:"";O+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${At};">${tt?tt.name:""}${qt}${bt}</td>`}else O+=`<td style="border: 1px solid #000; background-color: ${At};"></td>`})}),O+="</tr>"}),O+=`<tr><td colspan="${2+wt.length*te.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),O+="</table><br/><br/>"}),O+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,O+="</body></html>";const ie=new Blob([O],{type:"application/vnd.ms-excel"}),ee=URL.createObjectURL(ie),ae=document.createElement("a");ae.href=ee,ae.download=`__${I}.xls`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},$=()=>{const G=Ae(),J={[rt.Monday]:{header:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let O=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;O+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[de.First,de.Second].forEach(Y=>{const te=bn[Y];O+="<table>",O+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${wt.length*te.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,O+="<tr>",wt.forEach(Ne=>{var _e;const ze=((_e=J[Ne])==null?void 0:_e.header)||"#f3f4f6";O+=`<th colspan="${te.length}" class="header" style="border: 3px solid #000; background-color: ${ze}; font-size: 20pt;">${Ne}</th>`}),O+="</tr>",O+="<tr>",wt.forEach(Ne=>{var _e;const ze=((_e=J[Ne])==null?void 0:_e.header)||"#f3f4f6";O+=`<th colspan="${te.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${ze}; font-size: 16pt;"></th>`}),O+="</tr>";const me="#e5e7eb";O+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${me}; font-size: 24pt;">${Y}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${me};"></th>
            `,wt.forEach(Ne=>{var _e;const ze=((_e=J[Ne])==null?void 0:_e.header)||"#f3f4f6";te.forEach(Ye=>O+=`<th class="header" style="width: 20px; background-color: ${ze}; font-size: 16pt;">${Ye}</th>`)}),O+="</tr>",t.forEach(Ne=>{const ze=e.filter(_e=>_e.subjectIds.includes(Ne.id)&&_e.shifts.includes(Y));ze.length!==0&&(ze.forEach((_e,Ye)=>{O+="<tr>",Ye===0&&(O+=`<td rowspan="${ze.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Ne.name}</td>`),O+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${_e.name}</td>`,wt.forEach(et=>{var $e;const At=(($e=J[et])==null?void 0:$e.cell)||"#fff";te.forEach(fe=>{const Ee=G.find(tt=>tt.teacherId===_e.id&&tt.subjectId===Ne.id&&tt.day===et&&tt.period===fe&&tt.shift===Y);if(Ee){const tt=r.find(pt=>pt.id===Ee.classId),kt=n.find(pt=>pt.id===Ee.roomId),xt=kt?kt.name:Ee.roomId,bt=xt?`<sub>${xt}</sub>`:"",qt=Ee.direction?` <span style="font-size:14px">(${Ee.direction})</span>`:"";O+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${At}; height: 60px;">${tt?tt.name:""}${qt}${bt}</td>`}else O+=`<td style="border: 1px solid #000; background-color: ${At};"></td>`})}),O+="</tr>"}),O+=`<tr><td colspan="${2+wt.length*te.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),O+="</table><br/><br/>"}),O+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,O+="</body></html>";const ie=new Blob([O],{type:"application/vnd.ms-excel"}),ee=URL.createObjectURL(ie),ae=document.createElement("a");ae.href=ee,ae.download=`__${I}.xls`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},Se=()=>{const G=Ae(),J=r.filter(me=>me.name.startsWith(We)).sort((me,Ne)=>me.name.localeCompare(Ne.name)),O=Array.from(new Set(J.map(me=>me.shift))).sort(),ie={[rt.Monday]:{label:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;O.forEach(me=>{const Ne=J.filter(_e=>_e.shift===me),ze=bn[me];Ne.length!==0&&(ee+="<table>",ee+="<tr>",ee+='<td style="border:none"></td>',ee+='<td style="border:none"></td>',ee+=`<td colspan="${Ne.length}" class="shift-header">${me}</td>`,ee+="</tr>",ee+="<tr>",ee+='<td style="border:none"></td>',ee+='<td style="border:none"></td>',Ne.forEach(_e=>{ee+=`<td class="class-header">${_e.name}</td>`}),ee+="</tr>",wt.forEach(_e=>{const Ye=ie[_e]||{label:"#e5e7eb",cell:"#f3f4f6"};ze.forEach((et,At)=>{ee+="<tr>",At===0&&(ee+=`<td rowspan="${ze.length}" class="day-cell" style="background-color: ${Ye.label};">${_e.toUpperCase()}</td>`),ee+=`<td class="period-cell" style="background-color: ${Ye.label};">${et}</td>`,Ne.forEach($e=>{const fe=G.filter(Ee=>Ee.classId===$e.id&&Ee.day===_e&&Ee.shift===me&&Ee.period===et);ee+=`<td class="content-cell" style="background-color: ${Ye.cell};">`,fe.forEach((Ee,tt)=>{tt>0&&(ee+='<br style="mso-data-placement:same-cell;">');const kt=t.find(qt=>qt.id===Ee.subjectId),xt=n.find(qt=>qt.id===Ee.roomId),bt=xt?xt.name:Ee.roomId||"";ee+=`<span class="subject">${(kt==null?void 0:kt.name)||""}</span>`,bt&&(ee+=` <span class="room">${bt}</span>`)}),ee+="</td>"}),ee+="</tr>"}),ee+=`<tr><td colspan="${2+Ne.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),ee+="</table><br><br>")}),ee+="</body></html>";const ae=new Blob([ee],{type:"application/vnd.ms-excel"}),Y=URL.createObjectURL(ae),te=document.createElement("a");te.href=Y,te.download=`__${We}_.xls`,document.body.appendChild(te),te.click(),document.body.removeChild(te)},xe=()=>{const G=new Date(C),J=G.getUTCMonth(),O=G.getUTCFullYear(),ie=d.filter($e=>{const fe=new Date($e.date);return fe.getUTCMonth()===J&&fe.getUTCFullYear()===O}).sort(($e,fe)=>new Date($e.date).getTime()-new Date(fe.date).getTime());if(ie.length===0){alert("      .");return}const ee=new Map;ie.forEach($e=>{const fe=`${$e.scheduleItemId}_${$e.date}`,Ee=ee.get(fe)||[];Ee.push($e),ee.set(fe,Ee)});const ae=[],Y=[];ee.forEach($e=>{var pt;const fe=$e[0],Ee=l.find(vt=>vt.id===fe.scheduleItemId)||c.find(vt=>vt.id===fe.scheduleItemId);if(!Ee)return;const tt=r.find(vt=>vt.id===Ee.classId),kt=t.find(vt=>vt.id===Ee.subjectId),xt=e.find(vt=>vt.id===fe.originalTeacherId);let bt=fe.lessonAbsenceReason||((pt=xt==null?void 0:xt.absenceReasons)==null?void 0:pt[fe.date])||"";fe.replacementTeacherId===fe.originalTeacherId&&fe.replacementRoomId&&!fe.replacementClassId&&(bt=" "),fe.replacementClassId&&fe.replacementSubjectId&&!fe.isMerger&&(bt=" ");const qt={subs:$e,scheduleItem:Ee,cls:tt,subj:kt,origTeacher:xt,reason:bt};bt===" "?Y.push(qt):ae.push(qt)});let te=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${G.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const me=$e=>$e.map(fe=>{const{subs:Ee,scheduleItem:tt,cls:kt,subj:xt,origTeacher:bt,reason:qt}=fe,pt=Ee[0],vt=new Date(pt.date).toLocaleDateString("ru-RU");let yr="";if(pt.replacementTeacherId==="conducted")yr=" ";else if(pt.replacementTeacherId==="cancelled")yr=" ";else if(yr=Ee.map(Tr=>{const cn=e.find(vn=>vn.id===Tr.replacementTeacherId);return cn?cn.name:""}).join(", "),pt.isMerger){let Tr=" ()";if(pt.replacementClassId){const cn=r.find(vn=>vn.id===pt.replacementClassId);cn&&(Tr=` (  ${cn.name})`)}yr+=Tr}else if(pt.replacementClassId&&pt.replacementSubjectId){const Tr=r.find(vn=>vn.id===pt.replacementClassId),cn=t.find(vn=>vn.id===pt.replacementSubjectId);yr+=` ( ${(Tr==null?void 0:Tr.name)||"?"} ${(cn==null?void 0:cn.name)||"?"})`}const wn=tt.roomId,vr=pt.replacementRoomId,lt=vr||wn,qr=n.find(yn=>yn.id===lt),Xt=qr?qr.name:lt||"-",Ds=vr?`${Xt} ( .)`:Xt;return`
                    <tr>
                        <td>${vt}</td>
                        <td>${tt.period}</td>
                        <td>${tt.shift}</td>
                        <td>${(kt==null?void 0:kt.name)||"?"}</td>
                        <td>${(xt==null?void 0:xt.name)||"?"}</td>
                        <td>${(bt==null?void 0:bt.name)||"?"}</td>
                        <td>${yr}</td>
                        <td>${Ds}</td>
                        <td>${qt}</td>
                    </tr>
                `}).join(""),Ne=($e,fe=!1)=>`
            <table>
            <thead>
                <tr class="${fe?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${me($e)}
            </tbody>
            </table>
        `;ae.length>0?te+=Ne(ae):te+="<p>     .</p>",Y.length>0&&(te+="<br/><br/>",te+='<h3 style="color: #b91c1c;">   (  )</h3>',te+=Ne(Y,!0));const ze=new Map;ie.forEach($e=>{var xt;if($e.replacementTeacherId==="conducted"||$e.replacementTeacherId==="cancelled"||$e.replacementTeacherId===$e.originalTeacherId)return;const fe=e.find(bt=>bt.id===$e.replacementTeacherId);if(!fe)return;const Ee=ze.get(fe.id)||{name:fe.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},tt=e.find(bt=>bt.id===$e.originalTeacherId);let kt=$e.lessonAbsenceReason||((xt=tt==null?void 0:tt.absenceReasons)==null?void 0:xt[$e.date])||"";$e.replacementClassId&&$e.replacementSubjectId&&!$e.isMerger&&(kt=" "),Ee.total++,$e.isMerger?Ee.merger++:kt===""?Ee.illness++:kt===" "?Ee.withoutRecord++:Ee.other++,ze.set(fe.id,Ee)});const _e=Array.from(ze.values()).sort(($e,fe)=>$e.name.localeCompare(fe.name));_e.length>0&&(te+="<br/><br/>",te+="<h3>   </h3>",te+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,_e.forEach($e=>{te+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${$e.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${$e.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${$e.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${$e.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${$e.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${$e.other}</td>
                     </tr>
                 `}),te+="</tbody></table>"),te+="</body></html>";const Ye=new Blob([te],{type:"application/vnd.ms-excel"}),et=URL.createObjectURL(Ye),At=document.createElement("a");At.href=et,At.download=`__${G.getMonth()+1}_${G.getFullYear()}.xls`,document.body.appendChild(At),At.click(),document.body.removeChild(At)},Le=()=>{const G=new Date(C),J=G.getUTCMonth(),O=G.getUTCFullYear(),ie=d.filter(me=>{const Ne=new Date(me.date),ze=Ne.getUTCMonth()===J&&Ne.getUTCFullYear()===O,_e=me.refusals&&me.refusals.length>0;return ze&&_e}).sort((me,Ne)=>new Date(me.date).getTime()-new Date(Ne.date).getTime());if(ie.length===0){alert("      .");return}let ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${G.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;ie.forEach(me=>{const Ne=l.find(fe=>fe.id===me.scheduleItemId)||c.find(fe=>fe.id===me.scheduleItemId);if(!Ne)return;const ze=new Date(me.date).toLocaleDateString("ru-RU"),_e=r.find(fe=>fe.id===Ne.classId),Ye=t.find(fe=>fe.id===Ne.subjectId),et=e.find(fe=>fe.id===me.originalTeacherId);let At="";if(me.replacementTeacherId==="conducted")At=" ";else if(me.replacementTeacherId==="cancelled")At=" ";else{const fe=e.find(Ee=>Ee.id===me.replacementTeacherId);At=fe?fe.name:""}const $e=(me.refusals||[]).map(fe=>{const Ee=e.find(tt=>tt.id===fe);return Ee?Ee.name:""}).join(", ");ee+=`
                <tr>
                    <td>${ze}</td>
                    <td>${Ne.period}</td>
                    <td>${Ne.shift}</td>
                    <td>${(_e==null?void 0:_e.name)||"?"}</td>
                    <td>${(Ye==null?void 0:Ye.name)||"?"}</td>
                    <td>${(et==null?void 0:et.name)||"?"}</td>
                    <td>${At}</td>
                    <td>${$e}</td>
                </tr>
            `}),ee+="</tbody></table></body></html>";const ae=new Blob([ee],{type:"application/vnd.ms-excel"}),Y=URL.createObjectURL(ae),te=document.createElement("a");te.href=Y,te.download=`__${G.getMonth()+1}_${G.getFullYear()}.xls`,document.body.appendChild(te),te.click(),document.body.removeChild(te)},Wr=()=>{const G=Ae();let J=`							
`;wt.forEach(O=>{[de.First,de.Second].forEach(ie=>{r.filter(ae=>ae.shift===ie).forEach(ae=>{bn[ie].forEach(Y=>{G.filter(me=>me.classId===ae.id&&me.day===O&&me.shift===ie&&me.period===Y).forEach(me=>{const Ne=t.find(et=>et.id===me.subjectId),ze=e.find(et=>et.id===me.teacherId),_e=n.find(et=>et.id===me.roomId),Ye=_e?_e.name:me.roomId||"";J+=`${O}	${ie}	${ae.name}	${Y}	${(Ne==null?void 0:Ne.name)||""}	${(ze==null?void 0:ze.name)||""}	${Ye}	${me.direction||""}
`})})})})}),navigator.clipboard.writeText(J).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},wr=async()=>{S(!0);try{if(!B.current){alert("   1- .");return}const G=await Rf(B.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),J=document.createElement("a");J.href=G.toDataURL("image/png"),J.download=`_${C}_1.png`,document.body.appendChild(J),J.click(),document.body.removeChild(J)}catch(G){console.error(G),alert("   ")}finally{S(!1)}},Rt=async()=>{S(!0);try{if(!E.current){alert("   2- .");return}const G=await Rf(E.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),J=document.createElement("a");J.href=G.toDataURL("image/png"),J.download=`_${C}_2.png`,document.body.appendChild(J),J.click(),document.body.removeChild(J)}catch(G){console.error(G),alert("   ")}finally{S(!1)}},Et=_.useMemo(()=>d.filter(G=>G.date===C),[d,C]),Wt=_.useMemo(()=>{const G=ye(C);return Et.filter(J=>{const O=G.find(ie=>ie.id===J.scheduleItemId);return O&&O.shift===de.First}).filter(J=>J.replacementTeacherId!=="conducted").length>0},[Et,ye,C]),ue=_.useMemo(()=>{const G=ye(C);return Et.filter(J=>{const O=G.find(ie=>ie.id===J.scheduleItemId);return O&&O.shift===de.Second}).filter(J=>J.replacementTeacherId!=="conducted").length>0},[Et,ye,C]),T=G=>{const J=ye(C),O=Et.filter(ee=>{const ae=J.find(Y=>Y.id===ee.scheduleItemId);return ae&&ae.shift===G}).filter(ee=>ee.replacementTeacherId!=="conducted");if(O.length===0)return null;const ie=Array.from(new Set(O.map(ee=>ee.scheduleItemId))).sort((ee,ae)=>{const Y=J.find(me=>me.id===ee),te=J.find(me=>me.id===ae);return((Y==null?void 0:Y.period)??0)-((te==null?void 0:te.period)??0)});return a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:G}),a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-200",children:[a.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),a.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),a.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),a.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),a.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),a.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:ie.map(ee=>{var yr,wn,vr;const ae=O.filter(lt=>lt.scheduleItemId===ee),Y=ae[0],te=J.find(lt=>lt.id===ee);if(!te)return null;const me=r.find(lt=>lt.id===te.classId),Ne=t.find(lt=>lt.id===te.subjectId),ze=e.find(lt=>lt.id===Y.originalTeacherId),_e=Y.replacementRoomId,Ye=te.roomId?n.find(lt=>lt.id===te.roomId):null,et=Ye?Ye.name:te.roomId||"",At=_e?n.find(lt=>lt.id===_e):null,$e=At?At.name:_e||"",fe=Y.replacementTeacherId==="cancelled",Ee=(yr=ze==null?void 0:ze.absenceReasons)==null?void 0:yr[C],tt=Y.lessonAbsenceReason,kt=tt===" "?tt:Ee===" "?Ee:"",xt=Y.replacementClassId?r.find(lt=>lt.id===Y.replacementClassId):null,bt=Y.replacementSubjectId?t.find(lt=>lt.id===Y.replacementSubjectId):null,qt=Y.replacementTeacherId===Y.originalTeacherId&&_e&&!xt,pt=xt&&bt&&!Y.isMerger,vt=Y.replacementTeacherId===Y.originalTeacherId;return a.jsxs("tr",{children:[a.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:te.period}),a.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:me==null?void 0:me.name}),a.jsxs("td",{className:"py-3 px-2",children:[a.jsx("div",{className:"font-semibold text-slate-800",children:Ne==null?void 0:Ne.name}),te.direction&&a.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:te.direction})]}),a.jsx("td",{className:"py-3 px-2",children:!vt&&!qt&&!pt&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[ze==null?void 0:ze.name,a.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),kt&&a.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:kt})]})}),a.jsx("td",{className:`py-3 px-2 font-bold text-sm ${fe?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:qt?a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-slate-800",children:ze==null?void 0:ze.name}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):pt?a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-slate-800",children:ze==null?void 0:ze.name}),a.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",xt==null?void 0:xt.name]})]}):fe?a.jsx("div",{className:"flex flex-col",children:a.jsx("span",{children:" "})}):a.jsx("div",{className:"flex flex-col",children:ae.length>1||Y.isMerger?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-800 text-xs",children:ae.map(lt=>{const qr=e.find(Xt=>Xt.id===lt.replacementTeacherId);return qr?qr.name:""}).join(", ")}),a.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",Y.replacementClassId?`(${(wn=r.find(lt=>lt.id===Y.replacementClassId))==null?void 0:wn.name})`:""]})]}):a.jsx("span",{children:(vr=e.find(lt=>lt.id===Y.replacementTeacherId))==null?void 0:vr.name})})}),a.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${_e?"text-indigo-600":"text-slate-700"}`,children:_e&&_e!==te.roomId?a.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[a.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:et}),a.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),a.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:$e})]}):a.jsx("span",{className:"text-xl",children:et})})]},String(ee))})})]})]})},P=async()=>{const G=gn();await br.setPublicData(G,Ke),await i({settings:{...s,publicScheduleId:G}});const J=`${window.location.origin}${window.location.pathname}#/public?id=${G}`;k(J),L(G),y(!0)},H=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await br.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),k(""),L(""))},W=()=>a.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),a.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),a.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(C).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),Be=()=>a.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[a.jsx("div",{children:" "}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsx("div",{className:"h-px w-32 bg-slate-300"}),a.jsx("div",{children:" "})]})]}),ne=()=>{const G=Ae(),J=r.filter(ee=>ee.name.startsWith(We)).sort((ee,ae)=>ee.name.localeCompare(ae.name)),O=Array.from(new Set(J.map(ee=>ee.shift))).sort(),ie={[rt.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[rt.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[rt.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[rt.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[rt.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return J.length===0?a.jsx("div",{className:"text-center p-10",children:"    "}):a.jsx("div",{className:"font-sans text-black",children:O.map(ee=>{const ae=J.filter(te=>te.shift===ee),Y=bn[ee];return ae.length===0?null:a.jsx("div",{className:"mb-10 page-break-inside-avoid",children:a.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[a.jsxs("thead",{children:[a.jsxs("tr",{children:[a.jsx("th",{className:"border-2 border-black w-8"}),a.jsx("th",{className:"border-2 border-black w-8"}),a.jsx("th",{colSpan:ae.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:ee})]}),a.jsxs("tr",{children:[a.jsx("th",{className:"border-2 border-black w-8"}),a.jsx("th",{className:"border-2 border-black w-8"}),ae.map(te=>a.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:te.name},String(te.id)))]})]}),a.jsx("tbody",{children:wt.map(te=>{const me=ie[te]||{label:"bg-gray-200",cell:"bg-gray-100"};return a.jsxs(zs.Fragment,{children:[Y.map((Ne,ze)=>a.jsxs("tr",{children:[ze===0&&a.jsx("td",{rowSpan:Y.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${me.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:te===rt.Monday?"":te===rt.Tuesday?"":te===rt.Wednesday?"":te===rt.Thursday?"":te===rt.Friday?"":te}),a.jsx("td",{className:`border-2 border-black font-bold text-base ${me.label}`,children:Ne}),ae.map(_e=>{const Ye=G.filter(et=>et.classId===_e.id&&et.day===te&&et.shift===ee&&et.period===Ne);return a.jsx("td",{className:`border-2 border-black p-1 h-12 ${me.cell}`,children:Ye.map(et=>{const At=t.find(Ee=>Ee.id===et.subjectId),$e=n.find(Ee=>Ee.id===et.roomId),fe=$e?$e.name:et.roomId||"";return a.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[a.jsx("span",{children:At==null?void 0:At.name}),fe&&a.jsx("span",{className:"font-black",children:fe})]},String(et.id))})},String(_e.id))})]},`${String(te)}-${Ne}`)),a.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:a.jsx("td",{colSpan:2+ae.length})})]},String(te))})})]})},String(ee))})})};return a.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[a.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("button",{onClick:()=>br.exportJson(Ke),className:"btn-primary btn-ripple flex items-center gap-2",children:[a.jsx(M,{name:"Download",size:20}),"  JSON"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"file",ref:w,onChange:Re,accept:".json",className:"hidden"}),a.jsxs("button",{onClick:()=>{var G;return(G=w.current)==null?void 0:G.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[a.jsx(M,{name:"Upload",size:20}),"  JSON"]})]})]})]}),a.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[a.jsx(M,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsx("input",{type:"date",value:C,onChange:G=>b(G.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),a.jsx("button",{onClick:wr,disabled:N||!Wt,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:N?a.jsxs(a.Fragment,{children:[a.jsx(M,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):a.jsxs(a.Fragment,{children:[a.jsx(M,{name:"Download",size:20})," 1- "]})}),a.jsx("button",{onClick:Rt,disabled:N||!ue,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:N?a.jsxs(a.Fragment,{children:[a.jsx(M,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):a.jsxs(a.Fragment,{children:[a.jsx(M,{name:"Download",size:20})," 2- "]})})]})]}),a.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:Et.length===0?a.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[a.jsx(W,{}),a.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:a.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),a.jsx(Be,{})]}):a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[Wt&&a.jsxs("div",{ref:B,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[a.jsx(W,{}),T(de.First),a.jsx(Be,{})]}),ue&&a.jsxs("div",{ref:E,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[a.jsx(W,{}),T(de.Second),a.jsx(Be,{})]})]})})]}),a.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),a.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[a.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),a.jsx("select",{value:We,onChange:G=>Xe(G.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:Te.map(G=>a.jsxs("option",{value:G,children:[G,"- "]},G))})]}),a.jsxs("button",{onClick:()=>Oe(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[a.jsx(M,{name:"Printer",size:20}),"    "]}),a.jsxs("button",{onClick:Se,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[a.jsx(M,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),a.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),a.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[a.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),a.jsxs("select",{value:I,onChange:G=>Q(Number(G.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[a.jsx("option",{value:1,children:"1- (-)"}),a.jsx("option",{value:2,children:"2- (-)"})]})]}),a.jsxs("button",{onClick:Pe,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[a.jsx(M,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),a.jsxs("button",{onClick:q,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[a.jsx(M,{name:"Table",size:20}),"   (XLS)"]}),a.jsxs("button",{onClick:$,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[a.jsx(M,{name:"Table",size:20}),"   (XLS)"]}),a.jsxs("button",{onClick:Wr,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[a.jsx(M,{name:"Clipboard",size:20}),"   Google Sheets"]}),a.jsxs("button",{onClick:xe,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[a.jsx(M,{name:"List",size:20}),"    (XLS)"]}),a.jsxs("button",{onClick:Le,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[a.jsx(M,{name:"UserX",size:20}),"    (XLS)"]})]})]}),a.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?a.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",a.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),a.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[a.jsx(M,{name:"Share2",size:16}),"  QR-  "]}),a.jsxs("button",{onClick:H,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[a.jsx(M,{name:"Trash2",size:16}),"  "]})]})}):a.jsxs("button",{onClick:P,disabled:N,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[a.jsx(M,{name:"Share2",size:20}),"  "]})]}),a.jsx(jr,{isOpen:m,onClose:()=>y(!1),title:" ",children:a.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),v&&a.jsxs(a.Fragment,{children:[a.jsx($K,{value:v,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),a.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:v}),a.jsxs("button",{onClick:()=>navigator.clipboard.writeText(v),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[a.jsx(M,{name:"Copy",size:16}),"  "]})]})]})}),U&&a.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[a.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",We,"- )"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[a.jsx(M,{name:"Printer",size:16})," "]}),a.jsx("button",{onClick:()=>Oe(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:a.jsx(ne,{})})]})]})},qK=()=>{var N;const{subjects:t,teachers:e,classes:r}=Kn(),{schedule1:n,schedule2:s,substitutions:A}=Di(),[i,o]=_.useState("load"),[l,c]=_.useState(((N=r[0])==null?void 0:N.id)||""),[d,h]=_.useState(()=>{const S=new Date().getMonth();return S>=0&&S<=4?2:1}),[f,p]=_.useState(["name","weeklyHours","actualHours"]),w=_.useMemo(()=>d===2?s:n,[d,n,s]),B=_.useMemo(()=>e.map(m=>{const y=w.filter(Xe=>Xe.teacherId===m.id),v=y.length,k=v*4,R=A.filter(Xe=>Xe.replacementTeacherId===m.id).length,L=A.filter(Xe=>Xe.originalTeacherId===m.id).length,U=k+R-L,Oe={};y.forEach(Xe=>{const Ke=t.find(Ae=>Ae.id===Xe.subjectId);Ke&&(Oe[Ke.name]=(Oe[Ke.name]||0)+1)});const We=Object.keys(Oe).join(", ");return{id:m.id,name:m.name,weeklyHours:v,monthlyPlan:k,subsTaken:R,subsMissed:L,actualHours:U,subjectBreakdown:Oe,subjectsList:We}}).sort((m,y)=>y.actualHours-m.actualHours),[e,w,A,t]),E=[{key:"name",label:" "},{key:"weeklyHours",label:" ()"},{key:"monthlyPlan",label:" ()"},{key:"subsTaken",label:" (+)"},{key:"subsMissed",label:" (-)"},{key:"actualHours",label:" ()"},{key:"subjectsList",label:""}],C=_.useMemo(()=>l?wt.map(S=>{const y=w.filter(v=>v.classId===l&&v.day===S).reduce((v,k)=>{const R=t.find(L=>L.id===k.subjectId);return v+((R==null?void 0:R.difficulty)||5)},0);return{label:S,value:y}}):[],[w,t,l]),b=_.useMemo(()=>{const S=e.map(y=>({name:y.name,count:A.filter(v=>v.replacementTeacherId===y.id).length})).sort((y,v)=>v.count-y.count).slice(0,5),m=e.map(y=>({name:y.name,count:y.unavailableDates.length})).sort((y,v)=>v.count-y.count).slice(0,5);return{heroes:S,absentees:m}},[e,A]),I=S=>{p(m=>m.includes(S)?m.filter(y=>y!==S):[...m,S])},Q=()=>{let S="";if(i==="load")S=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+B.map(v=>`"${v.name}",${v.weeklyHours},${v.subsTaken},${v.subsMissed},${v.actualHours},"${Object.entries(v.subjectBreakdown).map(([k,R])=>k+": "+R).join(", ")}"`).join(`
`);else if(i==="sanpin")S=`Day,Score
`+C.map(v=>`${v.label},${v.value}`).join(`
`);else if(i==="builder"){const v=f.map(R=>{var L;return(L=E.find(U=>U.key===R))==null?void 0:L.label}).join(","),k=B.map(R=>f.map(L=>{const U=R[L];return typeof U=="string"&&U.includes(",")?`"${U}"`:U}).join(",")).join(`
`);S=v+`
`+k}const m=new Blob([`\uFEFF${S}`],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a");y.href=URL.createObjectURL(m),y.download=`report_${i}_${d}sem.csv`,document.body.appendChild(y),y.click(),document.body.removeChild(y)};return a.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[a.jsx(M,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),a.jsxs("div",{className:"flex gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[a.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),a.jsxs("select",{value:d,onChange:S=>h(Number(S.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[a.jsx("option",{value:1,children:"1- (-)"}),a.jsx("option",{value:2,children:"2- (-)"})]})]}),a.jsxs("button",{onClick:Q,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[a.jsx(M,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),a.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[a.jsx("button",{onClick:()=>o("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),a.jsx("button",{onClick:()=>o("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),a.jsx("button",{onClick:()=>o("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),a.jsx("button",{onClick:()=>o("builder"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="builder"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]})]}),i==="load"&&a.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),a.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),a.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),a.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),a.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),a.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:B.map(S=>a.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[a.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:S.name}),a.jsx("td",{className:"p-4 text-right font-mono",children:S.weeklyHours}),a.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",S.subsTaken]}),a.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",S.subsMissed]}),a.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:S.actualHours}),a.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(S.subjectBreakdown).map(([m,y])=>a.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[m,": ",y]},m))})})]},S.id))})]})}),i==="sanpin"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),a.jsx("select",{value:l,onChange:S=>c(S.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))})]}),a.jsx(Qp,{items:C,max:60,barClassName:"bg-indigo-500"}),a.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[a.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),a.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[a.jsxs("li",{className:"flex gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),a.jsxs("li",{className:"flex gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"TrendingUp",size:20}),"   ( 5)"]}),a.jsx(Qp,{items:b.heroes.map(S=>({label:S.name,value:S.count})),max:Math.max(...b.heroes.map(S=>S.count),1),barClassName:"bg-emerald-500"})]}),a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"Activity",size:20}),"  ( 5)"]}),a.jsx(Qp,{items:b.absentees.map(S=>({label:S.name,value:S.count})),max:Math.max(...b.absentees.map(S=>S.count),1),barClassName:"bg-red-500"})]})]}),i==="builder"&&a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2",children:" "}),a.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(S=>a.jsx("button",{onClick:()=>I(S.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${f.includes(S.key)?"bg-indigo-50 border-indigo-200 text-indigo-700 dark:bg-indigo-900/30 dark:border-indigo-800 dark:text-indigo-300":"bg-white border-slate-200 text-slate-500 hover:border-indigo-300 dark:bg-slate-800 dark:border-slate-600 dark:text-slate-400"}`,children:S.label},S.key))})]}),a.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-600",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:a.jsx("tr",{children:f.map(S=>{var m;return a.jsx("th",{className:"p-3 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase border-b border-slate-200 dark:border-slate-600",children:(m=E.find(y=>y.key===S))==null?void 0:m.label},S)})})}),a.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:B.map(S=>a.jsx("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:f.map(m=>{const y=S[m];return a.jsx("td",{className:"p-3 text-sm text-slate-700 dark:text-slate-300",children:typeof y=="object"?"":y},`${S.id}-${m}`)})},S.id))})]})})]})]})},XK=()=>{var Wt;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=Kn(),{dutySchedule:s,saveScheduleData:A,schedule1:i,schedule2:o}=Di(),l={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,d]=_.useState(()=>{const ue=new Date().getMonth();return ue>=0&&ue<=4?2:1}),[h,f]=_.useState(de.First),p=c===1?i:o,w=_.useRef(null),[B,E]=_.useState(!1),[C,b]=_.useState(!1),[I,Q]=_.useState(null),[N,S]=_.useState({}),[m,y]=_.useState(""),[v,k]=_.useState(null),R=(ue,T,P)=>{const H=s.find(W=>W.zoneId===ue&&W.day===T&&W.shift===P);return H?t.find(W=>W.id===H.teacherId):null},L=(ue,T,P,H)=>H?!!s.find(Be=>Be.teacherId===H&&Be.day===T&&Be.shift===P&&Be.zoneId!==ue):!1,U=(ue,T)=>{Q({zoneId:ue,day:T});const P=R(ue,T,h);k((P==null?void 0:P.id)||null),E(!0)},Oe=async()=>{if(!I)return;let ue=[...s];ue=ue.filter(T=>!(T.zoneId===I.zoneId&&T.day===I.day&&T.shift===h)),v&&ue.push({id:gn(),zoneId:I.zoneId,day:I.day,shift:h,teacherId:v}),await A({dutySchedule:ue}),E(!1),k(null)},We=async()=>{if(!I)return;let ue=[...s];ue=ue.filter(T=>!(T.zoneId===I.zoneId&&T.day===I.day&&T.shift===h)),await A({dutySchedule:ue}),E(!1),k(null)},Xe=(ue,T)=>{if(!ue||!T.includedRooms)return!1;const P=ue.replace(/\D/g,"");return P&&T.includedRooms.includes(P)?!0:T.includedRooms.includes(ue)},Ke=async()=>{if(!window.confirm("    . ?"))return;let ue=[];const T=[de.First,de.Second],P={};wt.forEach(H=>P[H]=new Set);for(const H of wt)for(const W of T){const Be=t.filter(ne=>p.filter(J=>J.teacherId===ne.id&&J.day===H&&J.shift===W).length>=1);for(const ne of e){const G=Be.map(O=>{let ie=0;P[H].has(O.id)&&(ie-=2e3);const ee=p.filter(Y=>{var te;return Y.teacherId===O.id&&Y.day===H&&Y.shift===W&&Y.roomId&&Xe(((te=r.find(me=>me.id===Y.roomId))==null?void 0:te.name)||Y.roomId,ne)}).length;return ee===0?{teacher:O,score:-9999}:(ie+=ee*10,p.filter(Y=>Y.teacherId===O.id&&Y.day===H&&Y.shift===W).length>=4&&(ie+=5),{teacher:O,score:ie})});G.sort((O,ie)=>ie.score-O.score);const J=G[0];J&&J.score>-500&&(ue.push({id:gn(),zoneId:ne.id,day:H,shift:W,teacherId:J.teacher.id}),P[H].add(J.teacher.id))}}await A({dutySchedule:ue})},Ae=async()=>{window.confirm("   (  )?")&&await A({dutySchedule:[]})},ye=async()=>{if(!w.current)return;const ue=await Rf(w.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),T=document.createElement("a");T.href=ue.toDataURL("image/png"),T.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(T),T.click(),document.body.removeChild(T)},Te={[rt.Monday]:{label:"#fecaca",cell:"#fee2e2"},[rt.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[rt.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[rt.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[rt.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}},Re=()=>{let T=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 6px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 18pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 12pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #312e81; color: white; border: 2px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #e5e7eb; border: 2px solid #000; text-align: left; padding-left: 10px; }
                    .zone-cell { font-size: 11pt; font-weight: bold; background-color: #fff; text-align: left; width: 250px; }
                    .day-header { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 10pt; font-weight: bold; height: 35px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 11pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 11pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 15px; }
                </style>
            </head>
            <body>
        `;T+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,3)}" style="border:none"></td>
                    <td colspan="3" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        __________ ..<br>
                        "__" ______ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,T+=`
            <table>
                <tr><td colspan="6" class="title-main"> </td></tr>
                <tr><td colspan="6" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="6" style="border:none"></td></tr>
            </table>
        `,[de.First,de.Second].forEach(Be=>{T+="<table>",T+=`<tr><th colspan="6" class="shift-header">${Be}</th></tr>`,T+="<tr>",T+='<th class="day-header" style="background-color: #f3f4f6;"> </th>',wt.forEach(ne=>{const G=Te[ne]||{label:"#ffffff"};T+=`<th class="day-header" style="background-color: ${G.label};">${ne}</th>`}),T+="</tr>",Rt.forEach(ne=>{T+=`<tr><td colspan="6" class="floor-header">${ne.floor}</td></tr>`,ne.zones.forEach(G=>{T+="<tr>",T+=`<td class="zone-cell">${G.name}</td>`,wt.forEach(J=>{const O=Te[J]||{cell:"#ffffff"},ie=R(G.id,J,Be);T+=`<td class="content-cell" style="background-color: ${O.cell};">${ie?ie.name:""}</td>`}),T+="</tr>"})}),T+="</table><br/><br/>"}),T+=`
            <table>
                <tr>
                    <td colspan="3" class="footer-block">  </td>
                    <td colspan="1" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="2" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,T+="</body></html>";const P=new Blob([T],{type:"application/vnd.ms-excel"}),H=URL.createObjectURL(P),W=document.createElement("a");W.href=H,W.download=`__${c}__.xls`,document.body.appendChild(W),W.click(),document.body.removeChild(W)},Pe=()=>{const T=Et.length+1;let W=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; text-align: center; }
                    td, th { border: 2px solid #000000; padding: 5px; vertical-align: middle; text-align: center; }
                    .title-main { font-size: 20pt; font-weight: bold; border: none; text-align: center; }
                    .title-sub { font-size: 14pt; border: none; text-align: center; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #e5e7eb; border: 3px solid #000; text-transform: uppercase; }
                    .floor-header { font-size: 12pt; font-weight: bold; background-color: #d1d5db; border: 2px solid #000; text-transform: uppercase; }
                    .zone-header { font-size: 10pt; font-weight: bold; background-color: #f3f4f6; border: 2px solid #000; }
                    .day-label { font-weight: bold; font-size: 12pt; border: 2px solid #000; }
                    .content-cell { font-size: 11pt; font-weight: bold; height: 40px; border: 1px solid #000; }
                    .approval-block { text-align: left; border: none !important; font-family: "Times New Roman", serif; font-size: 12pt; }
                    .footer-block { border: none !important; font-weight: bold; text-align: left; padding-top: 20px; font-size: 12pt; font-family: "Times New Roman", serif; }
                    .empty-row { border: none !important; height: 20px; }
                </style>
            </head>
            <body>
        `;W+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,T-4)}" style="border:none"></td>
                    <td colspan="4" class="approval-block">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-row"><td colspan="${T}" style="border:none"></td></tr>
            </table>
        `,W+=`
            <table>
                <tr><td colspan="${T}" class="title-main"> </td></tr>
                <tr><td colspan="${T}" class="title-sub">       22 . </td></tr>
                <tr><td colspan="${T}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-row"><td colspan="${T}" style="border:none"></td></tr>
            </table>
        `,[de.First,de.Second].forEach(ee=>{W+="<table>",W+=`<tr><th colspan="${T}" class="shift-header">${ee}</th></tr>`,W+="<tr>",W+='<th rowspan="2" class="floor-header" style="width: 100px;"> </th>',Rt.forEach(ae=>{W+=`<th colspan="${ae.zones.length}" class="floor-header">${ae.floor}</th>`}),W+="</tr>",W+="<tr>",Et.forEach(ae=>{W+=`<th class="zone-header">${ae.name}</th>`}),W+="</tr>",wt.forEach(ae=>{const Y=Te[ae]||{label:"#ffffff",cell:"#ffffff"};W+="<tr>",W+=`<td class="day-label" style="background-color: ${Y.label};">${ae}</td>`,Et.forEach(te=>{const me=R(te.id,ae,ee);W+=`<td class="content-cell" style="background-color: ${Y.cell};">${me?me.name:""}</td>`}),W+="</tr>"}),W+=`<tr><td colspan="${T}" style="height: 4px; background-color: #000; border:none;"></td></tr>`,W+="</table><br>"});const Be=Math.floor(T*.4),ne=Math.floor(T*.3),G=T-Be-ne;W+=`
            <table>
                 <tr class="empty-row"><td colspan="${T}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${Be}" class="footer-block">    22 .</td>
                    <td colspan="${G}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${ne}" class="footer-block" style="text-align: right;">..</td>
                </tr>
            </table>
        `,W+="</body></html>";const J=new Blob([W],{type:"application/vnd.ms-excel"}),O=URL.createObjectURL(J),ie=document.createElement("a");ie.href=O,ie.download=`__${c}_.xls`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},q=async()=>{if(!N.name)return;const ue=m.split(",").map(H=>H.trim()).filter(Boolean),T={...N,includedRooms:ue};let P=[...e];N.id?P=P.map(H=>H.id===N.id?{...H,...T}:H):P.push({...T,id:gn()}),await n({dutyZones:P}),b(!1)},$=async ue=>{if(!window.confirm(" ?"))return;const T=e.filter(P=>P.id!==ue);await n({dutyZones:T})},Se=ue=>{var T;ue?(S(ue),y(((T=ue.includedRooms)==null?void 0:T.join(", "))||"")):(S({}),y("")),b(!0)},xe=()=>{if(!I)return{recommended:[],others:[],allTeachers:[]};const ue=I.day,T=e.find(ne=>ne.id===I.zoneId),P=t.map(ne=>{const G=p.filter(ie=>ie.teacherId===ne.id&&ie.day===ue&&ie.shift===h).length,J=s.some(ie=>ie.day===ue&&ie.teacherId===ne.id&&ie.zoneId!==I.zoneId&&ie.shift===h),O=T&&T.includedRooms?p.filter(ie=>{var ee;return ie.teacherId===ne.id&&ie.day===ue&&ie.shift===h&&ie.roomId&&Xe(((ee=r.find(ae=>ae.id===ie.roomId))==null?void 0:ee.name)||ie.roomId,T)}).length:0;return{t:ne,lessonsCount:G,isBusy:J,lessonsInZone:O}}),H=P.filter(ne=>ne.lessonsInZone>0&&!ne.isBusy).sort((ne,G)=>G.lessonsInZone-ne.lessonsInZone).map(ne=>({value:ne.t.id,label:`${ne.t.name} (${ne.lessonsInZone} .  )`})),W=P.filter(ne=>(ne.lessonsInZone===0||ne.isBusy)&&ne.lessonsCount>0).map(ne=>({value:ne.t.id,label:ne.t.name+(ne.isBusy?" ()":"")+(ne.lessonsInZone===0?" (   )":"")})),Be=P.filter(ne=>ne.lessonsCount===0).map(ne=>({value:ne.t.id,label:`${ne.t.name} ( )`}));return{recommended:H,others:W,allTeachers:Be}},{recommended:Le,others:Wr,allTeachers:wr}=xe(),Rt=_.useMemo(()=>{const ue={};return e.forEach(P=>{const H=P.floor||" ";ue[H]||(ue[H]=[]),ue[H].push(P)}),Object.keys(ue).sort().map(P=>({floor:P,zones:ue[P].sort((H,W)=>(H.order||0)-(W.order||0))}))},[e]),Et=_.useMemo(()=>Rt.flatMap(ue=>ue.zones),[Rt]);return a.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[a.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[a.jsx(M,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),a.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[a.jsx("button",{onClick:()=>f(de.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===de.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),a.jsx("button",{onClick:()=>f(de.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===de.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[a.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),a.jsxs("select",{value:c,onChange:ue=>d(Number(ue.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[a.jsx("option",{value:1,children:"1-"}),a.jsx("option",{value:2,children:"2-"})]})]}),a.jsxs("button",{onClick:Ke,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[a.jsx(M,{name:"Zap",size:16})," "]}),a.jsx("button",{onClick:Ae,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:a.jsx(M,{name:"Trash2",size:16})}),a.jsxs("button",{onClick:ye,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[a.jsx(M,{name:"Image",size:16})," PNG"]}),a.jsxs("button",{onClick:Re,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[a.jsx(M,{name:"Table",size:16}),"  (XLS)"]}),a.jsxs("button",{onClick:Pe,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[a.jsx(M,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),a.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(ue=>a.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[a.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[ue.name," ",a.jsxs("span",{className:"text-slate-400 text-xs",children:["(",ue.floor||"?",")"]})]}),a.jsx("button",{onClick:()=>Se(ue),className:"text-slate-400 hover:text-indigo-600",children:a.jsx(M,{name:"Edit2",size:12})})]},ue.id)),a.jsxs("button",{onClick:()=>Se(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[a.jsx(M,{name:"Plus",size:14})," "]})]}),a.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[a.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),wt.map(ue=>a.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:ue},ue))]})}),a.jsx("tbody",{children:e.map(ue=>{var T;return a.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[a.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[a.jsx("div",{children:ue.name}),a.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:ue.floor}),a.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(T=ue.includedRooms)==null?void 0:T.join(", ")})]}),wt.map(P=>{const H=R(ue.id,P,h),W=H?L(ue.id,P,h,H.id):!1;return a.jsx("td",{onClick:()=>U(ue.id,P),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${H?W?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:H?a.jsxs("div",{className:`font-bold text-sm ${W?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[H.name,W&&a.jsx("div",{className:"text-[9px] uppercase",children:""})]}):a.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${ue.id}-${P}`)})]},ue.id)})})]})})]}),a.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[a.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[a.jsx(M,{name:"Image",size:16}),"  "]}),a.jsx("div",{className:"overflow-auto custom-scrollbar",children:a.jsxs("div",{ref:w,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[a.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:l.approvalBlock},children:a.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[a.jsx("div",{className:"font-bold mb-1",children:""}),a.jsx("div",{children:" "}),a.jsx("div",{children:" "}),a.jsx("div",{children:"  22 . "}),a.jsxs("div",{className:"mt-8 flex items-end",children:[a.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:l.signatureLine}}),a.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),a.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:l.mainTitle},children:[a.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),a.jsx("h2",{className:"text-lg",children:"       22 . "}),a.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[de.First,de.Second].map((ue,T)=>a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:ue}),a.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[a.jsxs("thead",{children:[a.jsxs("tr",{children:[a.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:l.tableHeaders},children:" "}),Rt.map(P=>a.jsx("th",{colSpan:P.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:l.tableHeaders},children:P.floor},P.floor))]}),a.jsx("tr",{children:Et.map(P=>a.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:l.tableHeaders},children:P.name},P.id))})]}),a.jsx("tbody",{children:wt.map(P=>a.jsxs("tr",{children:[a.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:P}),Et.map(H=>{const W=R(H.id,P,ue);return a.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:W?W.name:"-"},H.id)})]},P))})]})]},ue)),a.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:l.footerBlock},children:[a.jsx("div",{children:"    22 ."}),a.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:l.signatureLine}}),a.jsx("div",{children:".."})]})]})})]}),a.jsx(jr,{isOpen:B,onClose:()=>E(!1),title:" ",maxWidth:"max-w-2xl",children:a.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[I&&a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[a.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(Wt=e.find(ue=>ue.id===I.zoneId))==null?void 0:Wt.name}),a.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[a.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:I.day}),a.jsx("span",{className:"text-slate-400",children:"|"}),a.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:h})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),a.jsx("p",{className:"text-[10px] text-slate-400 mb-2",children:"        "}),a.jsx(Tc,{options:[{label:" (   )",options:Le},{label:" (    )",options:Wr},{label:"  (  )",options:wr}],value:v,onChange:ue=>k(String(ue)),placeholder:"   ",groupBy:!0})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[a.jsx("button",{onClick:We,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),a.jsx("button",{onClick:Oe,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),a.jsx(jr,{isOpen:C,onClose:()=>b(!1),title:N.id?" ":" ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:N.name||"",onChange:ue=>S({...N,name:ue.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:N.floor||"",onChange:ue=>S({...N,floor:ue.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),a.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:m,onChange:ue=>y(ue.target.value)}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[N.id&&a.jsx("button",{onClick:()=>{$(N.id),b(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),a.jsx("button",{onClick:q,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},JK=()=>{const{classes:t}=Kn(),{nutritionRecords:e,saveScheduleData:r}=Di(),{role:n,user:s}=ji(),{addToast:A}=iy(),i=n==="admin",o=n==="teacher",l=n==="canteen",[c,d]=_.useState(oi()),[h,f]=_.useState("day"),[p,w]=_.useState(()=>{const q=new Date;return`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`}),[B,E]=_.useState(!1),[C,b]=_.useState(null),[I,Q]=_.useState(""),[N,S]=_.useState(0),[m,y]=_.useState(0),v=_.useRef(null),k=_.useMemo(()=>e.filter(q=>q.date===c),[e,c]),R=_.useMemo(()=>{const[q,$]=p.split("-").map(Number);return e.filter(Se=>{const xe=new Date(Se.date);return xe.getFullYear()===q&&xe.getMonth()+1===$})},[e,p]),L=_.useMemo(()=>{const q={totalStudents:0,totalBenefit:0,totalRegular:0,classCount:k.length,records:k};return k.forEach($=>{q.totalStudents+=$.totalCount,q.totalBenefit+=$.benefitCount,q.totalRegular+=$.regularCount}),q},[k]),U=_.useMemo(()=>{const q=new Map;R.forEach(xe=>{const Le=q.get(xe.date)||{total:0,benefit:0,regular:0,classCount:0};Le.total+=xe.totalCount,Le.benefit+=xe.benefitCount,Le.regular+=xe.regularCount,Le.classCount+=1,q.set(xe.date,Le)});const $=Array.from(q.values()).reduce((xe,Le)=>({total:xe.total+Le.total,benefit:xe.benefit+Le.benefit,regular:xe.regular+Le.regular,classCount:Math.max(xe.classCount,Le.classCount)}),{total:0,benefit:0,regular:0,classCount:0}),Se=q.size>0?{total:Math.round($.total/q.size),benefit:Math.round($.benefit/q.size),regular:Math.round($.regular/q.size)}:{total:0,benefit:0,regular:0};return{total:$,avgPerDay:Se,daysCount:q.size,statsByDate:Array.from(q.entries()).sort((xe,Le)=>xe[0].localeCompare(Le[0]))}},[R]),Oe=q=>{var $;return(($=t.find(Se=>Se.id===q))==null?void 0:$.name)||q},We=q=>{const $=t.find(Se=>Se.id===q);return $&&typeof $.order=="number"?$.order:Number.MAX_SAFE_INTEGER},Xe=(q,$)=>{$?(b($),Q($.classId),S($.totalCount),y($.benefitCount)):(b(null),Q(q||""),S(0),y(0)),E(!0)},Ke=()=>{E(!1),b(null),Q(""),S(0),y(0)},Ae=_.useCallback(async()=>{if(!I){A({type:"warning",title:" "});return}if(N<0||m<0){A({type:"warning",title:"    "});return}if(m>N){A({type:"warning",title:"      "});return}const q=N-m,$=new Date().toISOString();let Se;if(C)Se=e.map(xe=>xe.id===C.id?{...xe,classId:I,totalCount:N,benefitCount:m,regularCount:q,enteredBy:(s==null?void 0:s.uid)||xe.enteredBy,enteredAt:$}:xe);else{const xe=e.find(Le=>Le.date===c&&Le.classId===I);if(xe)Se=e.map(Le=>Le.id===xe.id?{...Le,totalCount:N,benefitCount:m,regularCount:q,enteredBy:(s==null?void 0:s.uid)||Le.enteredBy,enteredAt:$}:Le);else{const Le={id:gn(),date:c,classId:I,totalCount:N,benefitCount:m,regularCount:q,enteredBy:s==null?void 0:s.uid,enteredAt:$};Se=[...e,Le]}}await r({nutritionRecords:Se}),A({type:"success",title:" "}),Ke()},[I,N,m,C,c,e,r,s,A]),ye=_.useCallback(async q=>{const $=e.find(xe=>xe.id===q);if(!$)return;if(!i&&$.enteredBy!==(s==null?void 0:s.uid)){A({type:"warning",title:"     "});return}if(!window.confirm(" ?"))return;const Se=e.filter(xe=>xe.id!==q);await r({nutritionRecords:Se}),A({type:"success",title:" "})},[e,r,i,s,A]),Te=()=>{if(!v.current)return;const q=window.open("","_blank");if(!q){A({type:"warning",title:"    "});return}const $=v.current.innerHTML;q.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${$}
            </body>
            </html>
        `),q.document.close(),q.focus(),setTimeout(()=>{q.print(),q.close()},250)},Re=_.useMemo(()=>i||s?t:[],[t,i,s]),Pe=_.useMemo(()=>{if(h!=="day")return[];const q=k.map($=>$.classId);return t.filter($=>!q.includes($.id)).sort(($,Se)=>{const xe=typeof $.order=="number"?$.order:Number.MAX_SAFE_INTEGER,Le=typeof Se.order=="number"?Se.order:Number.MAX_SAFE_INTEGER;return xe!==Le?xe-Le:$.name.localeCompare(Se.name)})},[t,k,h]);return a.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2",children:""}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:i?"   ":l?"   ":"   "})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>f(h==="day"?"month":"day"),className:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-semibold",children:h==="day"?" ":" "}),(i||l)&&a.jsxs("button",{onClick:Te,className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[a.jsx(M,{name:"Download",size:18})," PDF"]})]})]}),a.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:h==="day"?a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),a.jsx("input",{type:"date",value:c,onChange:q=>d(q.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}):a.jsxs(a.Fragment,{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),a.jsx("input",{type:"month",value:p,onChange:q=>w(q.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})}),h==="day"&&Pe.length>0&&a.jsxs("div",{className:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"bg-amber-500 text-white p-2.5 rounded-xl",children:a.jsx(M,{name:"AlertTriangle",size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"    "}),a.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Pe.length," ",Pe.length===1?"":Pe.length<5?"":"","   "]})]})]}),o||i?a.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.map(q=>a.jsx("button",{onClick:()=>{d(oi()),Xe(q.id)},className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-700 dark:text-slate-300 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:q.name},q.id))}):a.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.map(q=>a.jsx("span",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-500 dark:text-slate-400",children:q.name},q.id))})]}),h==="day"?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" "}),a.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.totalStudents})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),a.jsx("div",{className:"text-3xl font-black text-indigo-600",children:L.totalBenefit})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),a.jsx("div",{className:"text-3xl font-black text-green-600",children:L.totalRegular})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),a.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:L.classCount})]})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),a.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:U.total.total}),a.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",U.avgPerDay.total,"/"]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),a.jsx("div",{className:"text-3xl font-black text-indigo-600",children:U.total.benefit}),a.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",U.avgPerDay.benefit,"/"]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),a.jsx("div",{className:"text-3xl font-black text-green-600",children:U.total.regular}),a.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",U.avgPerDay.regular,"/"]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[a.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),a.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:U.daysCount})]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:h==="day"?`  ${new Date(c).toLocaleDateString("ru-RU")}`:`  ${new Date(p+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}`}),(o||i)&&h==="day"&&a.jsxs("button",{onClick:()=>Xe(),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[a.jsx(M,{name:"Plus",size:18}),""]})]}),h==="day"?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),i&&a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o&&a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:k.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:i?5:4,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):k.slice().sort((q,$)=>{const Se=We(q.classId),xe=We($.classId);return Se!==xe?Se-xe:Oe(q.classId).localeCompare(Oe($.classId))}).map(q=>a.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[a.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:Oe(q.classId)}),a.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:q.totalCount}),a.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:q.benefitCount}),a.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:q.regularCount}),!l&&a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(o||i)&&a.jsx("button",{onClick:()=>Xe(void 0,q),className:"p-2 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 rounded-lg transition-colors",title:"",children:a.jsx(M,{name:"Edit",size:18})}),a.jsx("button",{onClick:()=>ye(q.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 rounded-lg transition-colors",title:"",children:a.jsx(M,{name:"Trash2",size:18})})]})})]},q.id))})]})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:U.statsByDate.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):U.statsByDate.map(([q,$])=>a.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[a.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:new Date(q).toLocaleDateString("ru-RU",{weekday:"short",day:"numeric",month:"short"})}),a.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:$.total}),a.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:$.benefit}),a.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:$.regular}),a.jsx("td",{className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:$.classCount})]},q))})]})})]}),a.jsx("div",{ref:v,className:"hidden print:block",children:a.jsxs("div",{className:"p-8",children:[a.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:"  "}),h==="day"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]}),a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-100",children:[a.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),a.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),a.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),a.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),a.jsx("tbody",{children:k.slice().sort((q,$)=>{const Se=We(q.classId),xe=We($.classId);return Se!==xe?Se-xe:Oe(q.classId).localeCompare(Oe($.classId))}).map(q=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-slate-300 px-4 py-2",children:Oe(q.classId)}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:q.totalCount}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:q.benefitCount}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:q.regularCount})]},q.id))}),a.jsx("tfoot",{className:"bg-slate-100 font-bold",children:a.jsxs("tr",{children:[a.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalStudents}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalBenefit}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:L.totalRegular})]})})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(p+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-100",children:[a.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),a.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),a.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),a.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),a.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),a.jsx("tbody",{children:U.statsByDate.map(([q,$])=>a.jsxs("tr",{children:[a.jsx("td",{className:"border border-slate-300 px-4 py-2",children:new Date(q).toLocaleDateString("ru-RU")}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.total}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.benefit}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.regular}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.classCount})]},q))}),a.jsxs("tfoot",{className:"bg-slate-100 font-bold",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:U.total.total}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:U.total.benefit}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:U.total.regular}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"border border-slate-300 px-4 py-2",children:"  "}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:U.avgPerDay.total}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:U.avgPerDay.benefit}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:U.avgPerDay.regular}),a.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]})]})]})]})]})}),a.jsx(jr,{isOpen:B,onClose:Ke,title:C?" ":" ",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:""}),a.jsx(Tc,{options:Re.slice().sort((q,$)=>q.name.localeCompare($.name)).map(q=>({value:q.id,label:q.name})),value:I||null,onChange:q=>Q(String(q)),placeholder:" "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),a.jsx("input",{type:"number",inputMode:"numeric",min:"0",value:N,onChange:q=>{const $=parseInt(q.target.value)||0;S($),$<m&&y($)},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),a.jsx("input",{type:"number",inputMode:"numeric",min:"0",max:N,value:m,onChange:q=>{const $=parseInt(q.target.value)||0;y(Math.min($,N))},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),a.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4",children:[a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:" ()"}),a.jsx("div",{className:"text-2xl font-bold text-green-600",children:N-m})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:Ae,className:"flex-1 px-4 py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold",children:""}),a.jsx("button",{onClick:Ke,className:"px-4 py-3 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-semibold",children:""})]})]})})]})},YK=()=>{const{setGuestRole:t,role:e,loading:r}=ji(),n=Bu(),[s,A]=_.useState("select"),[i,o]=_.useState(""),[l,c]=_.useState(""),[d,h]=_.useState(""),[f,p]=_.useState(!1);_.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher"||e==="canteen")&&n("/dashboard")},[e,r,n]);const w=async E=>{if(E.preventDefault(),h(""),p(!0),!Xn){h("Firebase .  ."),p(!1);return}try{let C=i;s==="teacher"?C="teacher@gymnasium22.com":s==="canteen"&&(C="canteen@gymnasium22.com"),await xM(Xn,C,l)}catch(C){console.error("Firebase Auth Error:",C);const b=C==null?void 0:C.code;let I="   .";switch(b){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":I="   .";break;case"auth/invalid-email":I="  email.";break;case"auth/too-many-requests":I="  . .";break;default:I=" .  ."}h(I)}finally{p(!1)}},B=()=>{t(),n("/schedule")};return a.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),a.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),a.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10 bg-white/60 dark:bg-slate-800/60 border border-white/20 dark:border-slate-700 backdrop-blur-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:a.jsx(M,{name:"GraduationCap",size:48})}),a.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("button",{onClick:B,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:a.jsx(M,{name:"Users",size:24})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),a.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),a.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:a.jsx(M,{name:"BookOpen",size:24})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),a.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),a.jsxs("button",{onClick:()=>A("canteen"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-xl text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:a.jsx(M,{name:"Coffee",size:24})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),a.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-green-500 transition-colors",size:20})]}),a.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:a.jsx(M,{name:"Settings",size:24})}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),a.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"    "})]}),a.jsx(M,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&a.jsxs("form",{onSubmit:w,className:"space-y-5 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:a.jsx(M,{name:"ArrowRight",className:"rotate-180",size:24})}),a.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":s==="canteen"?"  ":"  "})]}),s==="admin"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(M,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),a.jsx("input",{type:"email",inputMode:"email",autoComplete:"email",value:i,onChange:E=>o(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"admin@school.com",autoFocus:!0,required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(M,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),a.jsx("input",{type:"password",inputMode:"text",autoComplete:"current-password",value:l,onChange:E=>c(E.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&a.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),a.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?a.jsx(M,{name:"Loader",className:"animate-spin",size:20}):a.jsx(M,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),a.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},qC=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},XC=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},Vs=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=ji();return s?a.jsx("div",{className:"h-screen flex items-center justify-center",children:a.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?a.jsx(ef,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):a.jsx(a.Fragment,{children:t}):a.jsx(ef,{to:"/login",replace:!0})},ZK=()=>{const{role:t,loading:e}=ji();return e?null:t==="guest"?a.jsx(ef,{to:"/schedule",replace:!0}):a.jsx(ef,{to:"/dashboard",replace:!0})},e8=()=>{const[t,e]=_.useState(!1),[r,n]=_.useState(qC("theme")||"light"),[s,A]=_.useState(qC("new_year_mode")==="true"),{isLoading:i}=Kn(),{logout:o,role:l,user:c}=ji();if(_.useEffect(()=>{const f=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),_.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),XC("theme",r)},[r]),_.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),XC("new_year_mode",String(s))},[s]),i)return a.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:a.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher","canteen"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin"]},{to:"/nutrition",label:"",icon:"Coffee",roles:["admin","teacher","canteen"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(l||""));return a.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&a.jsx("div",{className:"snow-overlay no-print"}),t&&a.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),a.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 lg:w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none overflow-hidden`,children:a.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&a.jsx("div",{className:"bg-garland"}),a.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[a.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[a.jsx(M,{name:"GraduationCap",size:24}),s&&a.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:h.map(f=>a.jsxs(Is,{to:f.to,onClick:()=>e(!1),className:({isActive:p})=>`
                                    group flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-semibold transition-all relative
                                    ${p?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-slate-700 dark:hover:text-slate-300"}
                                `,children:[a.jsx(M,{name:f.icon,size:18,className:"flex-shrink-0"}),a.jsx("span",{className:"flex-1 truncate",children:f.label})]},f.to))}),a.jsx("div",{className:"hidden lg:block mb-2",children:a.jsx(JO,{})}),a.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-2",children:[a.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),a.jsx("button",{onClick:o,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:a.jsx(M,{name:"LogOut",size:16})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?a.jsx(M,{name:"Moon",size:18}):a.jsx(M,{name:"Sun",size:18})}),a.jsx("button",{onClick:()=>A(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:a.jsx(M,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[a.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[a.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&a.jsx("div",{className:"ml-auto text-xl",children:""})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:a.jsx(GQ,{})}),a.jsx(YO,{onMenuClick:()=>e(!0),role:l})]})]})},t8=()=>{const[t,e]=_.useState(null),[r,n]=_.useState(!0),[s]=vE(),A=s.get("id");return _.useEffect(()=>{A?(n(!0),br.getPublicData(A).then(i=>{const o={...nn,...i,settings:{...nn.settings,...i==null?void 0:i.settings}};e(o),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[A]),r?a.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:a.jsx(M,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?a.jsx(Y2,{initialData:t,children:a.jsx(tT,{children:a.jsx(rT,{children:a.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[a.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:a.jsx(M,{name:"GraduationCap",size:24})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),a.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),a.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:a.jsx(oT,{readOnly:!0})})]})})})}):a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[a.jsx(M,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function r8(){return a.jsx($O,{children:a.jsx(KO,{children:a.jsx(Y2,{children:a.jsx(tT,{children:a.jsx(rT,{children:a.jsx(rN,{children:a.jsxs($Q,{children:[a.jsx(dn,{path:"/login",element:a.jsx(YK,{})}),a.jsxs(dn,{path:"/",element:a.jsx(Vs,{children:a.jsx(e8,{})}),children:[a.jsx(dn,{index:!0,element:a.jsx(ZK,{})}),a.jsx(dn,{path:"dashboard",element:a.jsx(Vs,{allowedRoles:["admin","teacher","canteen"],children:a.jsx(tH,{})})}),a.jsx(dn,{path:"schedule",element:a.jsx(JC,{semester:1})}),a.jsx(dn,{path:"schedule2",element:a.jsx(JC,{semester:2})}),a.jsx(dn,{path:"substitutions",element:a.jsx(Vs,{allowedRoles:["admin"],children:a.jsx(UK,{})})}),a.jsx(dn,{path:"duty",element:a.jsx(Vs,{allowedRoles:["admin"],children:a.jsx(XK,{})})}),a.jsx(dn,{path:"nutrition",element:a.jsx(Vs,{allowedRoles:["admin","teacher","canteen"],children:a.jsx(JK,{})})}),a.jsx(dn,{path:"directory",element:a.jsx(Vs,{allowedRoles:["admin"],children:a.jsx(SK,{})})}),a.jsx(dn,{path:"admin",element:a.jsx(Vs,{allowedRoles:["admin"],children:a.jsx(QK,{})})}),a.jsx(dn,{path:"reports",element:a.jsx(Vs,{allowedRoles:["admin"],children:a.jsx(qK,{})})}),a.jsx(dn,{path:"export",element:a.jsx(Vs,{allowedRoles:["admin"],children:a.jsx(WK,{})})})]}),a.jsx(dn,{path:"/public",element:a.jsx(t8,{})})]})})})})})})})}const JC=({semester:t=1})=>{const{role:e}=ji();return a.jsx(oT,{readOnly:e!=="admin",semester:t})};tm.createRoot(document.getElementById("root")).render(a.jsx(zs.StrictMode,{children:a.jsx(r8,{})}));
