function oU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const A in n)if(A!=="default"&&!(A in t)){const s=Object.getOwnPropertyDescriptor(n,A);s&&Object.defineProperty(t,A,s.get?s:{enumerable:!0,get:()=>n[A]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))n(A);new MutationObserver(A=>{for(const s of A)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(A){const s={};return A.integrity&&(s.integrity=A.integrity),A.referrerPolicy&&(s.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?s.credentials="include":A.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(A){if(A.ep)return;A.ep=!0;const s=r(A);fetch(A.href,s)}})();function QI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UI={exports:{}},tf={},SI={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),aU=Symbol.for("react.portal"),lU=Symbol.for("react.fragment"),cU=Symbol.for("react.strict_mode"),uU=Symbol.for("react.profiler"),dU=Symbol.for("react.provider"),hU=Symbol.for("react.context"),fU=Symbol.for("react.forward_ref"),gU=Symbol.for("react.suspense"),pU=Symbol.for("react.memo"),mU=Symbol.for("react.lazy"),Bv=Symbol.iterator;function wU(t){return t===null||typeof t!="object"?null:(t=Bv&&t[Bv]||t["@@iterator"],typeof t=="function"?t:null)}var kI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RI=Object.assign,NI={};function xa(t,e,r){this.props=t,this.context=e,this.refs=NI,this.updater=r||kI}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DI(){}DI.prototype=xa.prototype;function x0(t,e,r){this.props=t,this.context=e,this.refs=NI,this.updater=r||kI}var C0=x0.prototype=new DI;C0.constructor=x0;RI(C0,xa.prototype);C0.isPureReactComponent=!0;var vv=Array.isArray,PI=Object.prototype.hasOwnProperty,I0={current:null},LI={key:!0,ref:!0,__self:!0,__source:!0};function MI(t,e,r){var n,A={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)PI.call(e,n)&&!LI.hasOwnProperty(n)&&(A[n]=e[n]);var a=arguments.length-2;if(a===1)A.children=r;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];A.children=o}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)A[n]===void 0&&(A[n]=a[n]);return{$$typeof:Lc,type:t,key:s,ref:i,props:A,_owner:I0.current}}function BU(t,e){return{$$typeof:Lc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lc}function vU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var yv=/\/+/g;function pg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vU(""+t.key):e.toString(36)}function vd(t,e,r,n,A){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Lc:case aU:i=!0}}if(i)return i=t,A=A(i),t=n===""?"."+pg(i,0):n,vv(A)?(r="",t!=null&&(r=t.replace(yv,"$&/")+"/"),vd(A,e,r,"",function(c){return c})):A!=null&&(E0(A)&&(A=BU(A,r+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(yv,"$&/")+"/")+t)),e.push(A)),1;if(i=0,n=n===""?".":n+":",vv(t))for(var a=0;a<t.length;a++){s=t[a];var o=n+pg(s,a);i+=vd(s,e,r,o,A)}else if(o=wU(t),typeof o=="function")for(t=o.call(t),a=0;!(s=t.next()).done;)s=s.value,o=n+pg(s,a++),i+=vd(s,e,r,o,A);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Eu(t,e,r){if(t==null)return t;var n=[],A=0;return vd(t,n,"","",function(s){return e.call(r,s,A++)}),n}function yU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wr={current:null},yd={transition:null},xU={ReactCurrentDispatcher:Wr,ReactCurrentBatchConfig:yd,ReactCurrentOwner:I0};function jI(){throw Error("act(...) is not supported in production builds of React.")}At.Children={map:Eu,forEach:function(t,e,r){Eu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Eu(t,function(){e++}),e},toArray:function(t){return Eu(t,function(e){return e})||[]},only:function(t){if(!E0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};At.Component=xa;At.Fragment=lU;At.Profiler=uU;At.PureComponent=x0;At.StrictMode=cU;At.Suspense=gU;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xU;At.act=jI;At.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=RI({},t.props),A=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=I0.current),e.key!==void 0&&(A=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)PI.call(e,o)&&!LI.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Lc,type:t.type,key:A,ref:s,props:n,_owner:i}};At.createContext=function(t){return t={$$typeof:hU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dU,_context:t},t.Consumer=t};At.createElement=MI;At.createFactory=function(t){var e=MI.bind(null,t);return e.type=t,e};At.createRef=function(){return{current:null}};At.forwardRef=function(t){return{$$typeof:fU,render:t}};At.isValidElement=E0;At.lazy=function(t){return{$$typeof:mU,_payload:{_status:-1,_result:t},_init:yU}};At.memo=function(t,e){return{$$typeof:pU,type:t,compare:e===void 0?null:e}};At.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};At.unstable_act=jI;At.useCallback=function(t,e){return Wr.current.useCallback(t,e)};At.useContext=function(t){return Wr.current.useContext(t)};At.useDebugValue=function(){};At.useDeferredValue=function(t){return Wr.current.useDeferredValue(t)};At.useEffect=function(t,e){return Wr.current.useEffect(t,e)};At.useId=function(){return Wr.current.useId()};At.useImperativeHandle=function(t,e,r){return Wr.current.useImperativeHandle(t,e,r)};At.useInsertionEffect=function(t,e){return Wr.current.useInsertionEffect(t,e)};At.useLayoutEffect=function(t,e){return Wr.current.useLayoutEffect(t,e)};At.useMemo=function(t,e){return Wr.current.useMemo(t,e)};At.useReducer=function(t,e,r){return Wr.current.useReducer(t,e,r)};At.useRef=function(t){return Wr.current.useRef(t)};At.useState=function(t){return Wr.current.useState(t)};At.useSyncExternalStore=function(t,e,r){return Wr.current.useSyncExternalStore(t,e,r)};At.useTransition=function(){return Wr.current.useTransition()};At.version="18.3.1";SI.exports=At;var k=SI.exports;const ds=QI(k),CU=oU({__proto__:null,default:ds},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IU=k,EU=Symbol.for("react.element"),_U=Symbol.for("react.fragment"),bU=Object.prototype.hasOwnProperty,TU=IU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FU={key:!0,ref:!0,__self:!0,__source:!0};function OI(t,e,r){var n,A={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)bU.call(e,n)&&!FU.hasOwnProperty(n)&&(A[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)A[n]===void 0&&(A[n]=e[n]);return{$$typeof:EU,type:t,key:s,ref:i,props:A,_owner:TU.current}}tf.Fragment=_U;tf.jsx=OI;tf.jsxs=OI;UI.exports=tf;var l=UI.exports,Ep={},HI={exports:{}},Cn={},VI={exports:{}},KI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,S){var H=ie.length;ie.push(S);e:for(;0<H;){var z=H-1>>>1,re=ie[z];if(0<A(re,S))ie[z]=S,ie[H]=re,H=z;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var S=ie[0],H=ie.pop();if(H!==S){ie[0]=H;e:for(var z=0,re=ie.length,le=re>>>1;z<le;){var Pe=2*(z+1)-1,xe=ie[Pe],Ge=Pe+1,Be=ie[Ge];if(0>A(xe,H))Ge<re&&0>A(Be,xe)?(ie[z]=Be,ie[Ge]=H,z=Ge):(ie[z]=xe,ie[Pe]=H,z=Pe);else if(Ge<re&&0>A(Be,H))ie[z]=Be,ie[Ge]=H,z=Ge;else break e}}return S}function A(ie,S){var H=ie.sortIndex-S.sortIndex;return H!==0?H:ie.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var o=[],c=[],d=1,h=null,f=3,w=!1,v=!1,B=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ie){for(var S=r(c);S!==null;){if(S.callback===null)n(c);else if(S.startTime<=ie)n(c),S.sortIndex=S.expirationTime,e(o,S);else break;S=r(c)}}function F(ie){if(B=!1,I(ie),!v)if(r(o)!==null)v=!0,rt(R);else{var S=r(c);S!==null&&Re(F,S.startTime-ie)}}function R(ie,S){v=!1,B&&(B=!1,x(C),C=-1),w=!0;var H=f;try{for(I(S),h=r(o);h!==null&&(!(h.expirationTime>S)||ie&&!N());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var re=z(h.expirationTime<=S);S=t.unstable_now(),typeof re=="function"?h.callback=re:h===r(o)&&n(o),I(S)}else n(o);h=r(o)}if(h!==null)var le=!0;else{var Pe=r(c);Pe!==null&&Re(F,Pe.startTime-S),le=!1}return le}finally{h=null,f=H,w=!1}}var Q=!1,y=null,C=-1,E=5,U=-1;function N(){return!(t.unstable_now()-U<E)}function L(){if(y!==null){var ie=t.unstable_now();U=ie;var S=!0;try{S=y(!0,ie)}finally{S?T():(Q=!1,y=null)}}else Q=!1}var T;if(typeof m=="function")T=function(){m(L)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,je=Le.port2;Le.port1.onmessage=L,T=function(){je.postMessage(null)}}else T=function(){_(L,0)};function rt(ie){y=ie,Q||(Q=!0,T())}function Re(ie,S){C=_(function(){ie(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){v||w||(v=!0,rt(R))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(ie){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var H=f;f=S;try{return ie()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,S){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var H=f;f=ie;try{return S()}finally{f=H}},t.unstable_scheduleCallback=function(ie,S,H){var z=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,ie){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=H+re,ie={id:d++,callback:S,priorityLevel:ie,startTime:H,expirationTime:re,sortIndex:-1},H>z?(ie.sortIndex=H,e(c,ie),r(o)===null&&ie===r(c)&&(B?(x(C),C=-1):B=!0,Re(F,H-z))):(ie.sortIndex=re,e(o,ie),v||w||(v=!0,rt(R))),ie},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(ie){var S=f;return function(){var H=f;f=S;try{return ie.apply(this,arguments)}finally{f=H}}}})(KI);VI.exports=KI;var QU=VI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UU=k,vn=QU;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GI=new Set,rc={};function Ji(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(rc[t]=e,t=0;t<e.length;t++)GI.add(e[t])}var TA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_p=Object.prototype.hasOwnProperty,SU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xv={},Cv={};function kU(t){return _p.call(Cv,t)?!0:_p.call(xv,t)?!1:SU.test(t)?Cv[t]=!0:(xv[t]=!0,!1)}function RU(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NU(t,e,r,n){if(e===null||typeof e>"u"||RU(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qr(t,e,r,n,A,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=A,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Fr[t]=new qr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Fr[e]=new qr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Fr[t]=new qr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Fr[t]=new qr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Fr[t]=new qr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Fr[t]=new qr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Fr[t]=new qr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Fr[t]=new qr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Fr[t]=new qr(t,5,!1,t.toLowerCase(),null,!1,!1)});var _0=/[\-:]([a-z])/g;function b0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_0,b0);Fr[e]=new qr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_0,b0);Fr[e]=new qr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_0,b0);Fr[e]=new qr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Fr[t]=new qr(t,1,!1,t.toLowerCase(),null,!1,!1)});Fr.xlinkHref=new qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Fr[t]=new qr(t,1,!1,t.toLowerCase(),null,!0,!0)});function T0(t,e,r,n){var A=Fr.hasOwnProperty(e)?Fr[e]:null;(A!==null?A.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NU(e,r,A,n)&&(r=null),n||A===null?kU(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):A.mustUseProperty?t[A.propertyName]=r===null?A.type===3?!1:"":r:(e=A.attributeName,n=A.attributeNamespace,r===null?t.removeAttribute(e):(A=A.type,r=A===3||A===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var PA=UU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_u=Symbol.for("react.element"),Io=Symbol.for("react.portal"),Eo=Symbol.for("react.fragment"),F0=Symbol.for("react.strict_mode"),bp=Symbol.for("react.profiler"),zI=Symbol.for("react.provider"),$I=Symbol.for("react.context"),Q0=Symbol.for("react.forward_ref"),Tp=Symbol.for("react.suspense"),Fp=Symbol.for("react.suspense_list"),U0=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),WI=Symbol.for("react.offscreen"),Iv=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=Iv&&t[Iv]||t["@@iterator"],typeof t=="function"?t:null)}var Vt=Object.assign,mg;function ml(t){if(mg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);mg=e&&e[1]||""}return`
`+mg+t}var wg=!1;function Bg(t,e){if(!t||wg)return"";wg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var A=c.stack.split(`
`),s=n.stack.split(`
`),i=A.length-1,a=s.length-1;1<=i&&0<=a&&A[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(A[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||A[i]!==s[a]){var o=`
`+A[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=a);break}}}finally{wg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ml(t):""}function DU(t){switch(t.tag){case 5:return ml(t.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 2:case 15:return t=Bg(t.type,!1),t;case 11:return t=Bg(t.type.render,!1),t;case 1:return t=Bg(t.type,!0),t;default:return""}}function Qp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Eo:return"Fragment";case Io:return"Portal";case bp:return"Profiler";case F0:return"StrictMode";case Tp:return"Suspense";case Fp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $I:return(t.displayName||"Context")+".Consumer";case zI:return(t._context.displayName||"Context")+".Provider";case Q0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U0:return e=t.displayName||null,e!==null?e:Qp(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return Qp(t(e))}catch{}}return null}function PU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qp(e);case 8:return e===F0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LU(t){var e=qI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var A=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return A.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bu(t){t._valueTracker||(t._valueTracker=LU(t))}function JI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=qI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Jd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Up(t,e){var r=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ev(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ds(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XI(t,e){e=e.checked,e!=null&&T0(t,"checked",e,!1)}function Sp(t,e){XI(t,e);var r=Ds(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kp(t,e.type,r):e.hasOwnProperty("defaultValue")&&kp(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _v(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function kp(t,e,r){(e!=="number"||Jd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var wl=Array.isArray;function Lo(t,e,r,n){if(t=t.options,e){e={};for(var A=0;A<r.length;A++)e["$"+r[A]]=!0;for(r=0;r<t.length;r++)A=e.hasOwnProperty("$"+t[r].value),t[r].selected!==A&&(t[r].selected=A),A&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ds(r),e=null,A=0;A<t.length;A++){if(t[A].value===r){t[A].selected=!0,n&&(t[A].defaultSelected=!0);return}e!==null||t[A].disabled||(e=t[A])}e!==null&&(e.selected=!0)}}function Rp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bv(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(se(92));if(wl(r)){if(1<r.length)throw Error(se(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ds(r)}}function YI(t,e){var r=Ds(e.value),n=Ds(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Tv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Np(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tu,eE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,A){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,A)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tu=Tu||document.createElement("div"),Tu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MU=["Webkit","ms","Moz","O"];Object.keys(Nl).forEach(function(t){MU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nl[e]=Nl[t]})});function tE(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Nl.hasOwnProperty(t)&&Nl[t]?(""+e).trim():e+"px"}function rE(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,A=tE(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,A):t[r]=A}}var jU=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dp(t,e){if(e){if(jU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function Pp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lp=null;function S0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mp=null,Mo=null,jo=null;function Fv(t){if(t=Oc(t)){if(typeof Mp!="function")throw Error(se(280));var e=t.stateNode;e&&(e=of(e),Mp(t.stateNode,t.type,e))}}function nE(t){Mo?jo?jo.push(t):jo=[t]:Mo=t}function AE(){if(Mo){var t=Mo,e=jo;if(jo=Mo=null,Fv(t),e)for(t=0;t<e.length;t++)Fv(e[t])}}function sE(t,e){return t(e)}function iE(){}var vg=!1;function oE(t,e,r){if(vg)return t(e,r);vg=!0;try{return sE(t,e,r)}finally{vg=!1,(Mo!==null||jo!==null)&&(iE(),AE())}}function Ac(t,e){var r=t.stateNode;if(r===null)return null;var n=of(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(se(231,e,typeof r));return r}var jp=!1;if(TA)try{var el={};Object.defineProperty(el,"passive",{get:function(){jp=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{jp=!1}function OU(t,e,r,n,A,s,i,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Dl=!1,Xd=null,Yd=!1,Op=null,HU={onError:function(t){Dl=!0,Xd=t}};function VU(t,e,r,n,A,s,i,a,o){Dl=!1,Xd=null,OU.apply(HU,arguments)}function KU(t,e,r,n,A,s,i,a,o){if(VU.apply(this,arguments),Dl){if(Dl){var c=Xd;Dl=!1,Xd=null}else throw Error(se(198));Yd||(Yd=!0,Op=c)}}function Xi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function aE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qv(t){if(Xi(t)!==t)throw Error(se(188))}function GU(t){var e=t.alternate;if(!e){if(e=Xi(t),e===null)throw Error(se(188));return e!==t?null:t}for(var r=t,n=e;;){var A=r.return;if(A===null)break;var s=A.alternate;if(s===null){if(n=A.return,n!==null){r=n;continue}break}if(A.child===s.child){for(s=A.child;s;){if(s===r)return Qv(A),t;if(s===n)return Qv(A),e;s=s.sibling}throw Error(se(188))}if(r.return!==n.return)r=A,n=s;else{for(var i=!1,a=A.child;a;){if(a===r){i=!0,r=A,n=s;break}if(a===n){i=!0,n=A,r=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===r){i=!0,r=s,n=A;break}if(a===n){i=!0,n=s,r=A;break}a=a.sibling}if(!i)throw Error(se(189))}}if(r.alternate!==n)throw Error(se(190))}if(r.tag!==3)throw Error(se(188));return r.stateNode.current===r?t:e}function lE(t){return t=GU(t),t!==null?cE(t):null}function cE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cE(t);if(e!==null)return e;t=t.sibling}return null}var uE=vn.unstable_scheduleCallback,Uv=vn.unstable_cancelCallback,zU=vn.unstable_shouldYield,$U=vn.unstable_requestPaint,Yt=vn.unstable_now,WU=vn.unstable_getCurrentPriorityLevel,k0=vn.unstable_ImmediatePriority,dE=vn.unstable_UserBlockingPriority,Zd=vn.unstable_NormalPriority,qU=vn.unstable_LowPriority,hE=vn.unstable_IdlePriority,rf=null,rA=null;function JU(t){if(rA&&typeof rA.onCommitFiberRoot=="function")try{rA.onCommitFiberRoot(rf,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:ZU,XU=Math.log,YU=Math.LN2;function ZU(t){return t>>>=0,t===0?32:31-(XU(t)/YU|0)|0}var Fu=64,Qu=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,A=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var a=i&~A;a!==0?n=Bl(a):(s&=i,s!==0&&(n=Bl(s)))}else i=r&~A,i!==0?n=Bl(i):s!==0&&(n=Bl(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&A)&&(A=n&-n,s=e&-e,A>=s||A===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Hn(e),A=1<<r,n|=t[r],e&=~A;return n}function eS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,A=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Hn(s),a=1<<i,o=A[i];o===-1?(!(a&r)||a&n)&&(A[i]=eS(a,e)):o<=e&&(t.expiredLanes|=a),s&=~a}}function Hp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fE(){var t=Fu;return Fu<<=1,!(Fu&4194240)&&(Fu=64),t}function yg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Mc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=r}function rS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var A=31-Hn(r),s=1<<A;e[A]=0,n[A]=-1,t[A]=-1,r&=~s}}function R0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Hn(r),A=1<<n;A&e|t[n]&e&&(t[n]|=e),r&=~A}}var pt=0;function gE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pE,N0,mE,wE,BE,Vp=!1,Uu=[],ys=null,xs=null,Cs=null,sc=new Map,ic=new Map,ns=[],nS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sv(t,e){switch(t){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(e.pointerId)}}function tl(t,e,r,n,A,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[A]},e!==null&&(e=Oc(e),e!==null&&N0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,A!==null&&e.indexOf(A)===-1&&e.push(A),t)}function AS(t,e,r,n,A){switch(e){case"focusin":return ys=tl(ys,t,e,r,n,A),!0;case"dragenter":return xs=tl(xs,t,e,r,n,A),!0;case"mouseover":return Cs=tl(Cs,t,e,r,n,A),!0;case"pointerover":var s=A.pointerId;return sc.set(s,tl(sc.get(s)||null,t,e,r,n,A)),!0;case"gotpointercapture":return s=A.pointerId,ic.set(s,tl(ic.get(s)||null,t,e,r,n,A)),!0}return!1}function vE(t){var e=Ci(t.target);if(e!==null){var r=Xi(e);if(r!==null){if(e=r.tag,e===13){if(e=aE(r),e!==null){t.blockedOn=e,BE(t.priority,function(){mE(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Kp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Lp=n,r.target.dispatchEvent(n),Lp=null}else return e=Oc(r),e!==null&&N0(e),t.blockedOn=r,!1;e.shift()}return!0}function kv(t,e,r){xd(t)&&r.delete(e)}function sS(){Vp=!1,ys!==null&&xd(ys)&&(ys=null),xs!==null&&xd(xs)&&(xs=null),Cs!==null&&xd(Cs)&&(Cs=null),sc.forEach(kv),ic.forEach(kv)}function rl(t,e){t.blockedOn===e&&(t.blockedOn=null,Vp||(Vp=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,sS)))}function oc(t){function e(A){return rl(A,t)}if(0<Uu.length){rl(Uu[0],t);for(var r=1;r<Uu.length;r++){var n=Uu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ys!==null&&rl(ys,t),xs!==null&&rl(xs,t),Cs!==null&&rl(Cs,t),sc.forEach(e),ic.forEach(e),r=0;r<ns.length;r++)n=ns[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ns.length&&(r=ns[0],r.blockedOn===null);)vE(r),r.blockedOn===null&&ns.shift()}var Oo=PA.ReactCurrentBatchConfig,th=!0;function iS(t,e,r,n){var A=pt,s=Oo.transition;Oo.transition=null;try{pt=1,D0(t,e,r,n)}finally{pt=A,Oo.transition=s}}function oS(t,e,r,n){var A=pt,s=Oo.transition;Oo.transition=null;try{pt=4,D0(t,e,r,n)}finally{pt=A,Oo.transition=s}}function D0(t,e,r,n){if(th){var A=Kp(t,e,r,n);if(A===null)Ug(t,e,n,rh,r),Sv(t,n);else if(AS(A,t,e,r,n))n.stopPropagation();else if(Sv(t,n),e&4&&-1<nS.indexOf(t)){for(;A!==null;){var s=Oc(A);if(s!==null&&pE(s),s=Kp(t,e,r,n),s===null&&Ug(t,e,n,rh,r),s===A)break;A=s}A!==null&&n.stopPropagation()}else Ug(t,e,n,null,r)}}var rh=null;function Kp(t,e,r,n){if(rh=null,t=S0(n),t=Ci(t),t!==null)if(e=Xi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=aE(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rh=t,null}function yE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WU()){case k0:return 1;case dE:return 4;case Zd:case qU:return 16;case hE:return 536870912;default:return 16}default:return 16}}var hs=null,P0=null,Cd=null;function xE(){if(Cd)return Cd;var t,e=P0,r=e.length,n,A="value"in hs?hs.value:hs.textContent,s=A.length;for(t=0;t<r&&e[t]===A[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===A[s-n];n++);return Cd=A.slice(t,1<n?1-n:void 0)}function Id(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Su(){return!0}function Rv(){return!1}function In(t){function e(r,n,A,s,i){this._reactName=r,this._targetInst=A,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Su:Rv,this.isPropagationStopped=Rv,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Su)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Su)},persist:function(){},isPersistent:Su}),e}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L0=In(Ca),jc=Vt({},Ca,{view:0,detail:0}),aS=In(jc),xg,Cg,nl,nf=Vt({},jc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nl&&(nl&&t.type==="mousemove"?(xg=t.screenX-nl.screenX,Cg=t.screenY-nl.screenY):Cg=xg=0,nl=t),xg)},movementY:function(t){return"movementY"in t?t.movementY:Cg}}),Nv=In(nf),lS=Vt({},nf,{dataTransfer:0}),cS=In(lS),uS=Vt({},jc,{relatedTarget:0}),Ig=In(uS),dS=Vt({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),hS=In(dS),fS=Vt({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gS=In(fS),pS=Vt({},Ca,{data:0}),Dv=In(pS),mS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BS[t])?!!e[t]:!1}function M0(){return vS}var yS=Vt({},jc,{key:function(t){if(t.key){var e=mS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Id(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M0,charCode:function(t){return t.type==="keypress"?Id(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Id(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xS=In(yS),CS=Vt({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pv=In(CS),IS=Vt({},jc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M0}),ES=In(IS),_S=Vt({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),bS=In(_S),TS=Vt({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FS=In(TS),QS=[9,13,27,32],j0=TA&&"CompositionEvent"in window,Pl=null;TA&&"documentMode"in document&&(Pl=document.documentMode);var US=TA&&"TextEvent"in window&&!Pl,CE=TA&&(!j0||Pl&&8<Pl&&11>=Pl),Lv=" ",Mv=!1;function IE(t,e){switch(t){case"keyup":return QS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _o=!1;function SS(t,e){switch(t){case"compositionend":return EE(e);case"keypress":return e.which!==32?null:(Mv=!0,Lv);case"textInput":return t=e.data,t===Lv&&Mv?null:t;default:return null}}function kS(t,e){if(_o)return t==="compositionend"||!j0&&IE(t,e)?(t=xE(),Cd=P0=hs=null,_o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CE&&e.locale!=="ko"?null:e.data;default:return null}}var RS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RS[t.type]:e==="textarea"}function _E(t,e,r,n){nE(n),e=nh(e,"onChange"),0<e.length&&(r=new L0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ll=null,ac=null;function NS(t){PE(t,0)}function Af(t){var e=Fo(t);if(JI(e))return t}function DS(t,e){if(t==="change")return e}var bE=!1;if(TA){var Eg;if(TA){var _g="oninput"in document;if(!_g){var Ov=document.createElement("div");Ov.setAttribute("oninput","return;"),_g=typeof Ov.oninput=="function"}Eg=_g}else Eg=!1;bE=Eg&&(!document.documentMode||9<document.documentMode)}function Hv(){Ll&&(Ll.detachEvent("onpropertychange",TE),ac=Ll=null)}function TE(t){if(t.propertyName==="value"&&Af(ac)){var e=[];_E(e,ac,t,S0(t)),oE(NS,e)}}function PS(t,e,r){t==="focusin"?(Hv(),Ll=e,ac=r,Ll.attachEvent("onpropertychange",TE)):t==="focusout"&&Hv()}function LS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Af(ac)}function MS(t,e){if(t==="click")return Af(e)}function jS(t,e){if(t==="input"||t==="change")return Af(e)}function OS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:OS;function lc(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var A=r[n];if(!_p.call(e,A)||!Gn(t[A],e[A]))return!1}return!0}function Vv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kv(t,e){var r=Vv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vv(r)}}function FE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function QE(){for(var t=window,e=Jd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Jd(t.document)}return e}function O0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HS(t){var e=QE(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&FE(r.ownerDocument.documentElement,r)){if(n!==null&&O0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var A=r.textContent.length,s=Math.min(n.start,A);n=n.end===void 0?s:Math.min(n.end,A),!t.extend&&s>n&&(A=n,n=s,s=A),A=Kv(r,s);var i=Kv(r,n);A&&i&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(A.node,A.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VS=TA&&"documentMode"in document&&11>=document.documentMode,bo=null,Gp=null,Ml=null,zp=!1;function Gv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zp||bo==null||bo!==Jd(n)||(n=bo,"selectionStart"in n&&O0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ml&&lc(Ml,n)||(Ml=n,n=nh(Gp,"onSelect"),0<n.length&&(e=new L0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=bo)))}function ku(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var To={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},bg={},UE={};TA&&(UE=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function sf(t){if(bg[t])return bg[t];if(!To[t])return t;var e=To[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in UE)return bg[t]=e[r];return t}var SE=sf("animationend"),kE=sf("animationiteration"),RE=sf("animationstart"),NE=sf("transitionend"),DE=new Map,zv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){DE.set(t,e),Ji(e,[t])}for(var Tg=0;Tg<zv.length;Tg++){var Fg=zv[Tg],KS=Fg.toLowerCase(),GS=Fg[0].toUpperCase()+Fg.slice(1);qs(KS,"on"+GS)}qs(SE,"onAnimationEnd");qs(kE,"onAnimationIteration");qs(RE,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(NE,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zS=new Set("cancel close invalid load scroll toggle".split(" ").concat(vl));function $v(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,KU(n,e,void 0,t),t.currentTarget=null}function PE(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],A=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==s&&A.isPropagationStopped())break e;$v(A,a,c),s=o}else for(i=0;i<n.length;i++){if(a=n[i],o=a.instance,c=a.currentTarget,a=a.listener,o!==s&&A.isPropagationStopped())break e;$v(A,a,c),s=o}}}if(Yd)throw t=Op,Yd=!1,Op=null,t}function Qt(t,e){var r=e[Xp];r===void 0&&(r=e[Xp]=new Set);var n=t+"__bubble";r.has(n)||(LE(e,t,2,!1),r.add(n))}function Qg(t,e,r){var n=0;e&&(n|=4),LE(r,t,n,e)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function cc(t){if(!t[Ru]){t[Ru]=!0,GI.forEach(function(r){r!=="selectionchange"&&(zS.has(r)||Qg(r,!1,t),Qg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ru]||(e[Ru]=!0,Qg("selectionchange",!1,e))}}function LE(t,e,r,n){switch(yE(e)){case 1:var A=iS;break;case 4:A=oS;break;default:A=D0}r=A.bind(null,e,r,t),A=void 0,!jp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(A=!0),n?A!==void 0?t.addEventListener(e,r,{capture:!0,passive:A}):t.addEventListener(e,r,!0):A!==void 0?t.addEventListener(e,r,{passive:A}):t.addEventListener(e,r,!1)}function Ug(t,e,r,n,A){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===A||a.nodeType===8&&a.parentNode===A)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===A||o.nodeType===8&&o.parentNode===A))return;i=i.return}for(;a!==null;){if(i=Ci(a),i===null)return;if(o=i.tag,o===5||o===6){n=s=i;continue e}a=a.parentNode}}n=n.return}oE(function(){var c=s,d=S0(r),h=[];e:{var f=DE.get(t);if(f!==void 0){var w=L0,v=t;switch(t){case"keypress":if(Id(r)===0)break e;case"keydown":case"keyup":w=xS;break;case"focusin":v="focus",w=Ig;break;case"focusout":v="blur",w=Ig;break;case"beforeblur":case"afterblur":w=Ig;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=cS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=ES;break;case SE:case kE:case RE:w=hS;break;case NE:w=bS;break;case"scroll":w=aS;break;case"wheel":w=FS;break;case"copy":case"cut":case"paste":w=gS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Pv}var B=(e&4)!==0,_=!B&&t==="scroll",x=B?f!==null?f+"Capture":null:f;B=[];for(var m=c,I;m!==null;){I=m;var F=I.stateNode;if(I.tag===5&&F!==null&&(I=F,x!==null&&(F=Ac(m,x),F!=null&&B.push(uc(m,F,I)))),_)break;m=m.return}0<B.length&&(f=new w(f,v,null,r,d),h.push({event:f,listeners:B}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&r!==Lp&&(v=r.relatedTarget||r.fromElement)&&(Ci(v)||v[FA]))break e;if((w||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,w?(v=r.relatedTarget||r.toElement,w=c,v=v?Ci(v):null,v!==null&&(_=Xi(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(w=null,v=c),w!==v)){if(B=Nv,F="onMouseLeave",x="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(B=Pv,F="onPointerLeave",x="onPointerEnter",m="pointer"),_=w==null?f:Fo(w),I=v==null?f:Fo(v),f=new B(F,m+"leave",w,r,d),f.target=_,f.relatedTarget=I,F=null,Ci(d)===c&&(B=new B(x,m+"enter",v,r,d),B.target=I,B.relatedTarget=_,F=B),_=F,w&&v)t:{for(B=w,x=v,m=0,I=B;I;I=io(I))m++;for(I=0,F=x;F;F=io(F))I++;for(;0<m-I;)B=io(B),m--;for(;0<I-m;)x=io(x),I--;for(;m--;){if(B===x||x!==null&&B===x.alternate)break t;B=io(B),x=io(x)}B=null}else B=null;w!==null&&Wv(h,f,w,B,!1),v!==null&&_!==null&&Wv(h,_,v,B,!0)}}e:{if(f=c?Fo(c):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var R=DS;else if(jv(f))if(bE)R=jS;else{R=LS;var Q=PS}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=MS);if(R&&(R=R(t,c))){_E(h,R,r,d);break e}Q&&Q(t,f,c),t==="focusout"&&(Q=f._wrapperState)&&Q.controlled&&f.type==="number"&&kp(f,"number",f.value)}switch(Q=c?Fo(c):window,t){case"focusin":(jv(Q)||Q.contentEditable==="true")&&(bo=Q,Gp=c,Ml=null);break;case"focusout":Ml=Gp=bo=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,Gv(h,r,d);break;case"selectionchange":if(VS)break;case"keydown":case"keyup":Gv(h,r,d)}var y;if(j0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else _o?IE(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(CE&&r.locale!=="ko"&&(_o||C!=="onCompositionStart"?C==="onCompositionEnd"&&_o&&(y=xE()):(hs=d,P0="value"in hs?hs.value:hs.textContent,_o=!0)),Q=nh(c,C),0<Q.length&&(C=new Dv(C,t,null,r,d),h.push({event:C,listeners:Q}),y?C.data=y:(y=EE(r),y!==null&&(C.data=y)))),(y=US?SS(t,r):kS(t,r))&&(c=nh(c,"onBeforeInput"),0<c.length&&(d=new Dv("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=y))}PE(h,e)})}function uc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function nh(t,e){for(var r=e+"Capture",n=[];t!==null;){var A=t,s=A.stateNode;A.tag===5&&s!==null&&(A=s,s=Ac(t,r),s!=null&&n.unshift(uc(t,s,A)),s=Ac(t,e),s!=null&&n.push(uc(t,s,A))),t=t.return}return n}function io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wv(t,e,r,n,A){for(var s=e._reactName,i=[];r!==null&&r!==n;){var a=r,o=a.alternate,c=a.stateNode;if(o!==null&&o===n)break;a.tag===5&&c!==null&&(a=c,A?(o=Ac(r,s),o!=null&&i.unshift(uc(r,o,a))):A||(o=Ac(r,s),o!=null&&i.push(uc(r,o,a)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var $S=/\r\n?/g,WS=/\u0000|\uFFFD/g;function qv(t){return(typeof t=="string"?t:""+t).replace($S,`
`).replace(WS,"")}function Nu(t,e,r){if(e=qv(e),qv(t)!==e&&r)throw Error(se(425))}function Ah(){}var $p=null,Wp=null;function qp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jp=typeof setTimeout=="function"?setTimeout:void 0,qS=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,JS=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(t){return Jv.resolve(null).then(t).catch(XS)}:Jp;function XS(t){setTimeout(function(){throw t})}function Sg(t,e){var r=e,n=0;do{var A=r.nextSibling;if(t.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(n===0){t.removeChild(A),oc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=A}while(r);oc(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ia=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Ia,dc="__reactProps$"+Ia,FA="__reactContainer$"+Ia,Xp="__reactEvents$"+Ia,YS="__reactListeners$"+Ia,ZS="__reactHandles$"+Ia;function Ci(t){var e=t[Yn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[FA]||r[Yn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Xv(t);t!==null;){if(r=t[Yn])return r;t=Xv(t)}return e}t=r,r=t.parentNode}return null}function Oc(t){return t=t[Yn]||t[FA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function of(t){return t[dc]||null}var Yp=[],Qo=-1;function Js(t){return{current:t}}function kt(t){0>Qo||(t.current=Yp[Qo],Yp[Qo]=null,Qo--)}function Et(t,e){Qo++,Yp[Qo]=t.current,t.current=e}var Ps={},Hr=Js(Ps),an=Js(!1),ki=Ps;function Xo(t,e){var r=t.type.contextTypes;if(!r)return Ps;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var A={},s;for(s in r)A[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=A),A}function ln(t){return t=t.childContextTypes,t!=null}function sh(){kt(an),kt(Hr)}function Yv(t,e,r){if(Hr.current!==Ps)throw Error(se(168));Et(Hr,e),Et(an,r)}function ME(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var A in n)if(!(A in e))throw Error(se(108,PU(t)||"Unknown",A));return Vt({},r,n)}function ih(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ps,ki=Hr.current,Et(Hr,t),Et(an,an.current),!0}function Zv(t,e,r){var n=t.stateNode;if(!n)throw Error(se(169));r?(t=ME(t,e,ki),n.__reactInternalMemoizedMergedChildContext=t,kt(an),kt(Hr),Et(Hr,t)):kt(an),Et(an,r)}var mA=null,af=!1,kg=!1;function jE(t){mA===null?mA=[t]:mA.push(t)}function ek(t){af=!0,jE(t)}function Xs(){if(!kg&&mA!==null){kg=!0;var t=0,e=pt;try{var r=mA;for(pt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}mA=null,af=!1}catch(A){throw mA!==null&&(mA=mA.slice(t+1)),uE(k0,Xs),A}finally{pt=e,kg=!1}}return null}var Uo=[],So=0,oh=null,ah=0,_n=[],bn=0,Ri=null,wA=1,BA="";function fi(t,e){Uo[So++]=ah,Uo[So++]=oh,oh=t,ah=e}function OE(t,e,r){_n[bn++]=wA,_n[bn++]=BA,_n[bn++]=Ri,Ri=t;var n=wA;t=BA;var A=32-Hn(n)-1;n&=~(1<<A),r+=1;var s=32-Hn(e)+A;if(30<s){var i=A-A%5;s=(n&(1<<i)-1).toString(32),n>>=i,A-=i,wA=1<<32-Hn(e)+A|r<<A|n,BA=s+t}else wA=1<<s|r<<A|n,BA=t}function H0(t){t.return!==null&&(fi(t,1),OE(t,1,0))}function V0(t){for(;t===oh;)oh=Uo[--So],Uo[So]=null,ah=Uo[--So],Uo[So]=null;for(;t===Ri;)Ri=_n[--bn],_n[bn]=null,BA=_n[--bn],_n[bn]=null,wA=_n[--bn],_n[bn]=null}var Bn=null,wn=null,Dt=!1,On=null;function HE(t,e){var r=Fn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ey(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,wn=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ri!==null?{id:wA,overflow:BA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Fn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Bn=t,wn=null,!0):!1;default:return!1}}function Zp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function em(t){if(Dt){var e=wn;if(e){var r=e;if(!ey(t,e)){if(Zp(t))throw Error(se(418));e=Is(r.nextSibling);var n=Bn;e&&ey(t,e)?HE(n,r):(t.flags=t.flags&-4097|2,Dt=!1,Bn=t)}}else{if(Zp(t))throw Error(se(418));t.flags=t.flags&-4097|2,Dt=!1,Bn=t}}}function ty(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Du(t){if(t!==Bn)return!1;if(!Dt)return ty(t),Dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qp(t.type,t.memoizedProps)),e&&(e=wn)){if(Zp(t))throw VE(),Error(se(418));for(;e;)HE(t,e),e=Is(e.nextSibling)}if(ty(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){wn=Is(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=Bn?Is(t.stateNode.nextSibling):null;return!0}function VE(){for(var t=wn;t;)t=Is(t.nextSibling)}function Yo(){wn=Bn=null,Dt=!1}function K0(t){On===null?On=[t]:On.push(t)}var tk=PA.ReactCurrentBatchConfig;function Al(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(se(309));var n=r.stateNode}if(!n)throw Error(se(147,t));var A=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=A.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!r._owner)throw Error(se(290,t))}return t}function Pu(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ry(t){var e=t._init;return e(t._payload)}function KE(t){function e(x,m){if(t){var I=x.deletions;I===null?(x.deletions=[m],x.flags|=16):I.push(m)}}function r(x,m){if(!t)return null;for(;m!==null;)e(x,m),m=m.sibling;return null}function n(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function A(x,m){return x=Ts(x,m),x.index=0,x.sibling=null,x}function s(x,m,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<m?(x.flags|=2,m):I):(x.flags|=2,m)):(x.flags|=1048576,m)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,m,I,F){return m===null||m.tag!==6?(m=jg(I,x.mode,F),m.return=x,m):(m=A(m,I),m.return=x,m)}function o(x,m,I,F){var R=I.type;return R===Eo?d(x,m,I.props.children,F,I.key):m!==null&&(m.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===es&&ry(R)===m.type)?(F=A(m,I.props),F.ref=Al(x,m,I),F.return=x,F):(F=Ud(I.type,I.key,I.props,null,x.mode,F),F.ref=Al(x,m,I),F.return=x,F)}function c(x,m,I,F){return m===null||m.tag!==4||m.stateNode.containerInfo!==I.containerInfo||m.stateNode.implementation!==I.implementation?(m=Og(I,x.mode,F),m.return=x,m):(m=A(m,I.children||[]),m.return=x,m)}function d(x,m,I,F,R){return m===null||m.tag!==7?(m=Ti(I,x.mode,F,R),m.return=x,m):(m=A(m,I),m.return=x,m)}function h(x,m,I){if(typeof m=="string"&&m!==""||typeof m=="number")return m=jg(""+m,x.mode,I),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _u:return I=Ud(m.type,m.key,m.props,null,x.mode,I),I.ref=Al(x,null,m),I.return=x,I;case Io:return m=Og(m,x.mode,I),m.return=x,m;case es:var F=m._init;return h(x,F(m._payload),I)}if(wl(m)||Za(m))return m=Ti(m,x.mode,I,null),m.return=x,m;Pu(x,m)}return null}function f(x,m,I,F){var R=m!==null?m.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return R!==null?null:a(x,m,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case _u:return I.key===R?o(x,m,I,F):null;case Io:return I.key===R?c(x,m,I,F):null;case es:return R=I._init,f(x,m,R(I._payload),F)}if(wl(I)||Za(I))return R!==null?null:d(x,m,I,F,null);Pu(x,I)}return null}function w(x,m,I,F,R){if(typeof F=="string"&&F!==""||typeof F=="number")return x=x.get(I)||null,a(m,x,""+F,R);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case _u:return x=x.get(F.key===null?I:F.key)||null,o(m,x,F,R);case Io:return x=x.get(F.key===null?I:F.key)||null,c(m,x,F,R);case es:var Q=F._init;return w(x,m,I,Q(F._payload),R)}if(wl(F)||Za(F))return x=x.get(I)||null,d(m,x,F,R,null);Pu(m,F)}return null}function v(x,m,I,F){for(var R=null,Q=null,y=m,C=m=0,E=null;y!==null&&C<I.length;C++){y.index>C?(E=y,y=null):E=y.sibling;var U=f(x,y,I[C],F);if(U===null){y===null&&(y=E);break}t&&y&&U.alternate===null&&e(x,y),m=s(U,m,C),Q===null?R=U:Q.sibling=U,Q=U,y=E}if(C===I.length)return r(x,y),Dt&&fi(x,C),R;if(y===null){for(;C<I.length;C++)y=h(x,I[C],F),y!==null&&(m=s(y,m,C),Q===null?R=y:Q.sibling=y,Q=y);return Dt&&fi(x,C),R}for(y=n(x,y);C<I.length;C++)E=w(y,x,C,I[C],F),E!==null&&(t&&E.alternate!==null&&y.delete(E.key===null?C:E.key),m=s(E,m,C),Q===null?R=E:Q.sibling=E,Q=E);return t&&y.forEach(function(N){return e(x,N)}),Dt&&fi(x,C),R}function B(x,m,I,F){var R=Za(I);if(typeof R!="function")throw Error(se(150));if(I=R.call(I),I==null)throw Error(se(151));for(var Q=R=null,y=m,C=m=0,E=null,U=I.next();y!==null&&!U.done;C++,U=I.next()){y.index>C?(E=y,y=null):E=y.sibling;var N=f(x,y,U.value,F);if(N===null){y===null&&(y=E);break}t&&y&&N.alternate===null&&e(x,y),m=s(N,m,C),Q===null?R=N:Q.sibling=N,Q=N,y=E}if(U.done)return r(x,y),Dt&&fi(x,C),R;if(y===null){for(;!U.done;C++,U=I.next())U=h(x,U.value,F),U!==null&&(m=s(U,m,C),Q===null?R=U:Q.sibling=U,Q=U);return Dt&&fi(x,C),R}for(y=n(x,y);!U.done;C++,U=I.next())U=w(y,x,C,U.value,F),U!==null&&(t&&U.alternate!==null&&y.delete(U.key===null?C:U.key),m=s(U,m,C),Q===null?R=U:Q.sibling=U,Q=U);return t&&y.forEach(function(L){return e(x,L)}),Dt&&fi(x,C),R}function _(x,m,I,F){if(typeof I=="object"&&I!==null&&I.type===Eo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case _u:e:{for(var R=I.key,Q=m;Q!==null;){if(Q.key===R){if(R=I.type,R===Eo){if(Q.tag===7){r(x,Q.sibling),m=A(Q,I.props.children),m.return=x,x=m;break e}}else if(Q.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===es&&ry(R)===Q.type){r(x,Q.sibling),m=A(Q,I.props),m.ref=Al(x,Q,I),m.return=x,x=m;break e}r(x,Q);break}else e(x,Q);Q=Q.sibling}I.type===Eo?(m=Ti(I.props.children,x.mode,F,I.key),m.return=x,x=m):(F=Ud(I.type,I.key,I.props,null,x.mode,F),F.ref=Al(x,m,I),F.return=x,x=F)}return i(x);case Io:e:{for(Q=I.key;m!==null;){if(m.key===Q)if(m.tag===4&&m.stateNode.containerInfo===I.containerInfo&&m.stateNode.implementation===I.implementation){r(x,m.sibling),m=A(m,I.children||[]),m.return=x,x=m;break e}else{r(x,m);break}else e(x,m);m=m.sibling}m=Og(I,x.mode,F),m.return=x,x=m}return i(x);case es:return Q=I._init,_(x,m,Q(I._payload),F)}if(wl(I))return v(x,m,I,F);if(Za(I))return B(x,m,I,F);Pu(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,m!==null&&m.tag===6?(r(x,m.sibling),m=A(m,I),m.return=x,x=m):(r(x,m),m=jg(I,x.mode,F),m.return=x,x=m),i(x)):r(x,m)}return _}var Zo=KE(!0),GE=KE(!1),lh=Js(null),ch=null,ko=null,G0=null;function z0(){G0=ko=ch=null}function $0(t){var e=lh.current;kt(lh),t._currentValue=e}function tm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ho(t,e){ch=t,G0=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function kn(t){var e=t._currentValue;if(G0!==t)if(t={context:t,memoizedValue:e,next:null},ko===null){if(ch===null)throw Error(se(308));ko=t,ch.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var Ii=null;function W0(t){Ii===null?Ii=[t]:Ii.push(t)}function zE(t,e,r,n){var A=e.interleaved;return A===null?(r.next=r,W0(e)):(r.next=A.next,A.next=r),e.interleaved=r,QA(t,n)}function QA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ts=!1;function q0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $E(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function EA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,dt&2){var A=n.pending;return A===null?e.next=e:(e.next=A.next,A.next=e),n.pending=e,QA(t,r)}return A=n.interleaved,A===null?(e.next=e,W0(n)):(e.next=A.next,A.next=e),n.interleaved=e,QA(t,r)}function Ed(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,R0(t,r)}}function ny(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var A=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?A=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?A=s=e:s=s.next=e}else A=s=e;r={baseState:n.baseState,firstBaseUpdate:A,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function uh(t,e,r,n){var A=t.updateQueue;ts=!1;var s=A.firstBaseUpdate,i=A.lastBaseUpdate,a=A.shared.pending;if(a!==null){A.shared.pending=null;var o=a,c=o.next;o.next=null,i===null?s=c:i.next=c,i=o;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=o))}if(s!==null){var h=A.baseState;i=0,d=c=o=null,a=s;do{var f=a.lane,w=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,B=a;switch(f=e,w=r,B.tag){case 1:if(v=B.payload,typeof v=="function"){h=v.call(w,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=B.payload,f=typeof v=="function"?v.call(w,h,f):v,f==null)break e;h=Vt({},h,f);break e;case 2:ts=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=A.effects,f===null?A.effects=[a]:f.push(a))}else w={eventTime:w,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=w,o=h):d=d.next=w,i|=f;if(a=a.next,a===null){if(a=A.shared.pending,a===null)break;f=a,a=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(d===null&&(o=h),A.baseState=o,A.firstBaseUpdate=c,A.lastBaseUpdate=d,e=A.shared.interleaved,e!==null){A=e;do i|=A.lane,A=A.next;while(A!==e)}else s===null&&(A.shared.lanes=0);Di|=i,t.lanes=i,t.memoizedState=h}}function Ay(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],A=n.callback;if(A!==null){if(n.callback=null,n=r,typeof A!="function")throw Error(se(191,A));A.call(n)}}}var Hc={},nA=Js(Hc),hc=Js(Hc),fc=Js(Hc);function Ei(t){if(t===Hc)throw Error(se(174));return t}function J0(t,e){switch(Et(fc,e),Et(hc,t),Et(nA,Hc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Np(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Np(e,t)}kt(nA),Et(nA,e)}function ea(){kt(nA),kt(hc),kt(fc)}function WE(t){Ei(fc.current);var e=Ei(nA.current),r=Np(e,t.type);e!==r&&(Et(hc,t),Et(nA,r))}function X0(t){hc.current===t&&(kt(nA),kt(hc))}var jt=Js(0);function dh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rg=[];function Y0(){for(var t=0;t<Rg.length;t++)Rg[t]._workInProgressVersionPrimary=null;Rg.length=0}var _d=PA.ReactCurrentDispatcher,Ng=PA.ReactCurrentBatchConfig,Ni=0,Ot=null,ir=null,fr=null,hh=!1,jl=!1,gc=0,rk=0;function Sr(){throw Error(se(321))}function Z0(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Gn(t[r],e[r]))return!1;return!0}function ew(t,e,r,n,A,s){if(Ni=s,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_d.current=t===null||t.memoizedState===null?ik:ok,t=r(n,A),jl){s=0;do{if(jl=!1,gc=0,25<=s)throw Error(se(301));s+=1,fr=ir=null,e.updateQueue=null,_d.current=ak,t=r(n,A)}while(jl)}if(_d.current=fh,e=ir!==null&&ir.next!==null,Ni=0,fr=ir=Ot=null,hh=!1,e)throw Error(se(300));return t}function tw(){var t=gc!==0;return gc=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?Ot.memoizedState=fr=t:fr=fr.next=t,fr}function Rn(){if(ir===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=ir.next;var e=fr===null?Ot.memoizedState:fr.next;if(e!==null)fr=e,ir=t;else{if(t===null)throw Error(se(310));ir=t,t={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},fr===null?Ot.memoizedState=fr=t:fr=fr.next=t}return fr}function pc(t,e){return typeof e=="function"?e(t):e}function Dg(t){var e=Rn(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=ir,A=n.baseQueue,s=r.pending;if(s!==null){if(A!==null){var i=A.next;A.next=s.next,s.next=i}n.baseQueue=A=s,r.pending=null}if(A!==null){s=A.next,n=n.baseState;var a=i=null,o=null,c=s;do{var d=c.lane;if((Ni&d)===d)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=h,i=n):o=o.next=h,Ot.lanes|=d,Di|=d}c=c.next}while(c!==null&&c!==s);o===null?i=n:o.next=a,Gn(n,e.memoizedState)||(nn=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=o,r.lastRenderedState=n}if(t=r.interleaved,t!==null){A=t;do s=A.lane,Ot.lanes|=s,Di|=s,A=A.next;while(A!==t)}else A===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Pg(t){var e=Rn(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=r.dispatch,A=r.pending,s=e.memoizedState;if(A!==null){r.pending=null;var i=A=A.next;do s=t(s,i.action),i=i.next;while(i!==A);Gn(s,e.memoizedState)||(nn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function qE(){}function JE(t,e){var r=Ot,n=Rn(),A=e(),s=!Gn(n.memoizedState,A);if(s&&(n.memoizedState=A,nn=!0),n=n.queue,rw(ZE.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||fr!==null&&fr.memoizedState.tag&1){if(r.flags|=2048,mc(9,YE.bind(null,r,n,A,e),void 0,null),pr===null)throw Error(se(349));Ni&30||XE(r,e,A)}return A}function XE(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function YE(t,e,r,n){e.value=r,e.getSnapshot=n,e_(e)&&t_(t)}function ZE(t,e,r){return r(function(){e_(e)&&t_(t)})}function e_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Gn(t,r)}catch{return!0}}function t_(t){var e=QA(t,1);e!==null&&Vn(e,t,1,-1)}function sy(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:t},e.queue=t,t=t.dispatch=sk.bind(null,Ot,t),[e.memoizedState,t]}function mc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function r_(){return Rn().memoizedState}function bd(t,e,r,n){var A=Jn();Ot.flags|=t,A.memoizedState=mc(1|e,r,void 0,n===void 0?null:n)}function lf(t,e,r,n){var A=Rn();n=n===void 0?null:n;var s=void 0;if(ir!==null){var i=ir.memoizedState;if(s=i.destroy,n!==null&&Z0(n,i.deps)){A.memoizedState=mc(e,r,s,n);return}}Ot.flags|=t,A.memoizedState=mc(1|e,r,s,n)}function iy(t,e){return bd(8390656,8,t,e)}function rw(t,e){return lf(2048,8,t,e)}function n_(t,e){return lf(4,2,t,e)}function A_(t,e){return lf(4,4,t,e)}function s_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i_(t,e,r){return r=r!=null?r.concat([t]):null,lf(4,4,s_.bind(null,e,t),r)}function nw(){}function o_(t,e){var r=Rn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Z0(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function a_(t,e){var r=Rn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Z0(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function l_(t,e,r){return Ni&21?(Gn(r,e)||(r=fE(),Ot.lanes|=r,Di|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=r)}function nk(t,e){var r=pt;pt=r!==0&&4>r?r:4,t(!0);var n=Ng.transition;Ng.transition={};try{t(!1),e()}finally{pt=r,Ng.transition=n}}function c_(){return Rn().memoizedState}function Ak(t,e,r){var n=bs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},u_(t))d_(e,r);else if(r=zE(t,e,r,n),r!==null){var A=$r();Vn(r,t,n,A),h_(r,e,n)}}function sk(t,e,r){var n=bs(t),A={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(u_(t))d_(e,A);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,r);if(A.hasEagerState=!0,A.eagerState=a,Gn(a,i)){var o=e.interleaved;o===null?(A.next=A,W0(e)):(A.next=o.next,o.next=A),e.interleaved=A;return}}catch{}finally{}r=zE(t,e,A,n),r!==null&&(A=$r(),Vn(r,t,n,A),h_(r,e,n))}}function u_(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function d_(t,e){jl=hh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function h_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,R0(t,r)}}var fh={readContext:kn,useCallback:Sr,useContext:Sr,useEffect:Sr,useImperativeHandle:Sr,useInsertionEffect:Sr,useLayoutEffect:Sr,useMemo:Sr,useReducer:Sr,useRef:Sr,useState:Sr,useDebugValue:Sr,useDeferredValue:Sr,useTransition:Sr,useMutableSource:Sr,useSyncExternalStore:Sr,useId:Sr,unstable_isNewReconciler:!1},ik={readContext:kn,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:kn,useEffect:iy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,bd(4194308,4,s_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return bd(4,2,t,e)},useMemo:function(t,e){var r=Jn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Jn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ak.bind(null,Ot,t),[n.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:sy,useDebugValue:nw,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=sy(!1),e=t[0];return t=nk.bind(null,t[1]),Jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ot,A=Jn();if(Dt){if(r===void 0)throw Error(se(407));r=r()}else{if(r=e(),pr===null)throw Error(se(349));Ni&30||XE(n,e,r)}A.memoizedState=r;var s={value:r,getSnapshot:e};return A.queue=s,iy(ZE.bind(null,n,s,t),[t]),n.flags|=2048,mc(9,YE.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Jn(),e=pr.identifierPrefix;if(Dt){var r=BA,n=wA;r=(n&~(1<<32-Hn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=gc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=rk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ok={readContext:kn,useCallback:o_,useContext:kn,useEffect:rw,useImperativeHandle:i_,useInsertionEffect:n_,useLayoutEffect:A_,useMemo:a_,useReducer:Dg,useRef:r_,useState:function(){return Dg(pc)},useDebugValue:nw,useDeferredValue:function(t){var e=Rn();return l_(e,ir.memoizedState,t)},useTransition:function(){var t=Dg(pc)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:qE,useSyncExternalStore:JE,useId:c_,unstable_isNewReconciler:!1},ak={readContext:kn,useCallback:o_,useContext:kn,useEffect:rw,useImperativeHandle:i_,useInsertionEffect:n_,useLayoutEffect:A_,useMemo:a_,useReducer:Pg,useRef:r_,useState:function(){return Pg(pc)},useDebugValue:nw,useDeferredValue:function(t){var e=Rn();return ir===null?e.memoizedState=t:l_(e,ir.memoizedState,t)},useTransition:function(){var t=Pg(pc)[0],e=Rn().memoizedState;return[t,e]},useMutableSource:qE,useSyncExternalStore:JE,useId:c_,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=Vt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function rm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Vt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var cf={isMounted:function(t){return(t=t._reactInternals)?Xi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=$r(),A=bs(t),s=EA(n,A);s.payload=e,r!=null&&(s.callback=r),e=Es(t,s,A),e!==null&&(Vn(e,t,A,n),Ed(e,t,A))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=$r(),A=bs(t),s=EA(n,A);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Es(t,s,A),e!==null&&(Vn(e,t,A,n),Ed(e,t,A))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=$r(),n=bs(t),A=EA(r,n);A.tag=2,e!=null&&(A.callback=e),e=Es(t,A,n),e!==null&&(Vn(e,t,n,r),Ed(e,t,n))}};function oy(t,e,r,n,A,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!lc(r,n)||!lc(A,s):!0}function f_(t,e,r){var n=!1,A=Ps,s=e.contextType;return typeof s=="object"&&s!==null?s=kn(s):(A=ln(e)?ki:Hr.current,n=e.contextTypes,s=(n=n!=null)?Xo(t,A):Ps),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=s),e}function ay(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&cf.enqueueReplaceState(e,e.state,null)}function nm(t,e,r,n){var A=t.stateNode;A.props=r,A.state=t.memoizedState,A.refs={},q0(t);var s=e.contextType;typeof s=="object"&&s!==null?A.context=kn(s):(s=ln(e)?ki:Hr.current,A.context=Xo(t,s)),A.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rm(t,e,s,r),A.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(e=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),e!==A.state&&cf.enqueueReplaceState(A,A.state,null),uh(t,r,A,n),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function ta(t,e){try{var r="",n=e;do r+=DU(n),n=n.return;while(n);var A=r}catch(s){A=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:A,digest:null}}function Lg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Am(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var lk=typeof WeakMap=="function"?WeakMap:Map;function g_(t,e,r){r=EA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){ph||(ph=!0,fm=n),Am(t,e)},r}function p_(t,e,r){r=EA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var A=e.value;r.payload=function(){return n(A)},r.callback=function(){Am(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Am(t,e),typeof n!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function ly(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new lk;var A=new Set;n.set(e,A)}else A=n.get(e),A===void 0&&(A=new Set,n.set(e,A));A.has(r)||(A.add(r),t=Ck.bind(null,t,e,r),e.then(t,t))}function cy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uy(t,e,r,n,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=EA(-1,1),e.tag=2,Es(r,e,1))),r.lanes|=1),t)}var ck=PA.ReactCurrentOwner,nn=!1;function Gr(t,e,r,n){e.child=t===null?GE(e,null,r,n):Zo(e,t.child,r,n)}function dy(t,e,r,n,A){r=r.render;var s=e.ref;return Ho(e,A),n=ew(t,e,r,n,s,A),r=tw(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,UA(t,e,A)):(Dt&&r&&H0(e),e.flags|=1,Gr(t,e,n,A),e.child)}function hy(t,e,r,n,A){if(t===null){var s=r.type;return typeof s=="function"&&!uw(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,m_(t,e,s,n,A)):(t=Ud(r.type,null,n,e,e.mode,A),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&A)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:lc,r(i,n)&&t.ref===e.ref)return UA(t,e,A)}return e.flags|=1,t=Ts(s,n),t.ref=e.ref,t.return=e,e.child=t}function m_(t,e,r,n,A){if(t!==null){var s=t.memoizedProps;if(lc(s,n)&&t.ref===e.ref)if(nn=!1,e.pendingProps=n=s,(t.lanes&A)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,UA(t,e,A)}return sm(t,e,r,n,A)}function w_(t,e,r){var n=e.pendingProps,A=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(No,gn),gn|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(No,gn),gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Et(No,gn),gn|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Et(No,gn),gn|=n;return Gr(t,e,A,r),e.child}function B_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function sm(t,e,r,n,A){var s=ln(r)?ki:Hr.current;return s=Xo(e,s),Ho(e,A),r=ew(t,e,r,n,s,A),n=tw(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,UA(t,e,A)):(Dt&&n&&H0(e),e.flags|=1,Gr(t,e,r,A),e.child)}function fy(t,e,r,n,A){if(ln(r)){var s=!0;ih(e)}else s=!1;if(Ho(e,A),e.stateNode===null)Td(t,e),f_(e,r,n),nm(e,r,n,A),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=kn(c):(c=ln(r)?ki:Hr.current,c=Xo(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||o!==c)&&ay(e,i,n,c),ts=!1;var f=e.memoizedState;i.state=f,uh(e,n,i,A),o=e.memoizedState,a!==n||f!==o||an.current||ts?(typeof d=="function"&&(rm(e,r,d,n),o=e.memoizedState),(a=ts||oy(e,r,a,n,f,o,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),i.props=n,i.state=o,i.context=c,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,$E(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Mn(e.type,a),i.props=c,h=e.pendingProps,f=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=kn(o):(o=ln(r)?ki:Hr.current,o=Xo(e,o));var w=r.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||f!==o)&&ay(e,i,n,o),ts=!1,f=e.memoizedState,i.state=f,uh(e,n,i,A);var v=e.memoizedState;a!==h||f!==v||an.current||ts?(typeof w=="function"&&(rm(e,r,w,n),v=e.memoizedState),(c=ts||oy(e,r,c,n,f,v,o)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=o,n=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return im(t,e,r,n,s,A)}function im(t,e,r,n,A,s){B_(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return A&&Zv(e,r,!1),UA(t,e,s);n=e.stateNode,ck.current=e;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Zo(e,t.child,null,s),e.child=Zo(e,null,a,s)):Gr(t,e,a,s),e.memoizedState=n.state,A&&Zv(e,r,!0),e.child}function v_(t){var e=t.stateNode;e.pendingContext?Yv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yv(t,e.context,!1),J0(t,e.containerInfo)}function gy(t,e,r,n,A){return Yo(),K0(A),e.flags|=256,Gr(t,e,r,n),e.child}var om={dehydrated:null,treeContext:null,retryLane:0};function am(t){return{baseLanes:t,cachePool:null,transitions:null}}function y_(t,e,r){var n=e.pendingProps,A=jt.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(A&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),Et(jt,A&1),t===null)return em(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=hf(i,n,0,null),t=Ti(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=am(r),e.memoizedState=om,t):Aw(e,i));if(A=t.memoizedState,A!==null&&(a=A.dehydrated,a!==null))return uk(t,e,i,n,a,A,r);if(s){s=n.fallback,i=e.mode,A=t.child,a=A.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&e.child!==A?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=Ts(A,o),n.subtreeFlags=A.subtreeFlags&14680064),a!==null?s=Ts(a,s):(s=Ti(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?am(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=om,n}return s=t.child,t=s.sibling,n=Ts(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Aw(t,e){return e=hf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lu(t,e,r,n){return n!==null&&K0(n),Zo(e,t.child,null,r),t=Aw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uk(t,e,r,n,A,s,i){if(r)return e.flags&256?(e.flags&=-257,n=Lg(Error(se(422))),Lu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,A=e.mode,n=hf({mode:"visible",children:n.children},A,0,null),s=Ti(s,A,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Zo(e,t.child,null,i),e.child.memoizedState=am(i),e.memoizedState=om,s);if(!(e.mode&1))return Lu(t,e,i,null);if(A.data==="$!"){if(n=A.nextSibling&&A.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(se(419)),n=Lg(s,n,void 0),Lu(t,e,i,n)}if(a=(i&t.childLanes)!==0,nn||a){if(n=pr,n!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(n.suspendedLanes|i)?0:A,A!==0&&A!==s.retryLane&&(s.retryLane=A,QA(t,A),Vn(n,t,A,-1))}return cw(),n=Lg(Error(se(421))),Lu(t,e,i,n)}return A.data==="$?"?(e.flags|=128,e.child=t.child,e=Ik.bind(null,t),A._reactRetry=e,null):(t=s.treeContext,wn=Is(A.nextSibling),Bn=e,Dt=!0,On=null,t!==null&&(_n[bn++]=wA,_n[bn++]=BA,_n[bn++]=Ri,wA=t.id,BA=t.overflow,Ri=e),e=Aw(e,n.children),e.flags|=4096,e)}function py(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),tm(t.return,e,r)}function Mg(t,e,r,n,A){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:A}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=A)}function x_(t,e,r){var n=e.pendingProps,A=n.revealOrder,s=n.tail;if(Gr(t,e,n.children,r),n=jt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&py(t,r,e);else if(t.tag===19)py(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Et(jt,n),!(e.mode&1))e.memoizedState=null;else switch(A){case"forwards":for(r=e.child,A=null;r!==null;)t=r.alternate,t!==null&&dh(t)===null&&(A=r),r=r.sibling;r=A,r===null?(A=e.child,e.child=null):(A=r.sibling,r.sibling=null),Mg(e,!1,A,r,s);break;case"backwards":for(r=null,A=e.child,e.child=null;A!==null;){if(t=A.alternate,t!==null&&dh(t)===null){e.child=A;break}t=A.sibling,A.sibling=r,r=A,A=t}Mg(e,!0,r,null,s);break;case"together":Mg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function UA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,r=Ts(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ts(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function dk(t,e,r){switch(e.tag){case 3:v_(e),Yo();break;case 5:WE(e);break;case 1:ln(e.type)&&ih(e);break;case 4:J0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,A=e.memoizedProps.value;Et(lh,n._currentValue),n._currentValue=A;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Et(jt,jt.current&1),e.flags|=128,null):r&e.child.childLanes?y_(t,e,r):(Et(jt,jt.current&1),t=UA(t,e,r),t!==null?t.sibling:null);Et(jt,jt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return x_(t,e,r);e.flags|=128}if(A=e.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Et(jt,jt.current),n)break;return null;case 22:case 23:return e.lanes=0,w_(t,e,r)}return UA(t,e,r)}var C_,lm,I_,E_;C_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lm=function(){};I_=function(t,e,r,n){var A=t.memoizedProps;if(A!==n){t=e.stateNode,Ei(nA.current);var s=null;switch(r){case"input":A=Up(t,A),n=Up(t,n),s=[];break;case"select":A=Vt({},A,{value:void 0}),n=Vt({},n,{value:void 0}),s=[];break;case"textarea":A=Rp(t,A),n=Rp(t,n),s=[];break;default:typeof A.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ah)}Dp(r,n);var i;r=null;for(c in A)if(!n.hasOwnProperty(c)&&A.hasOwnProperty(c)&&A[c]!=null)if(c==="style"){var a=A[c];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var o=n[c];if(a=A!=null?A[c]:void 0,n.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&a[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(s||(s=[]),s.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(s=s||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rc.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Qt("scroll",t),s||a===o||(s=[])):(s=s||[]).push(c,o))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};E_=function(t,e,r,n){r!==n&&(e.flags|=4)};function sl(t,e){if(!Dt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function kr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var A=t.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags&14680064,n|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags,n|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function hk(t,e,r){var n=e.pendingProps;switch(V0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(e),null;case 1:return ln(e.type)&&sh(),kr(e),null;case 3:return n=e.stateNode,ea(),kt(an),kt(Hr),Y0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(mm(On),On=null))),lm(t,e),kr(e),null;case 5:X0(e);var A=Ei(fc.current);if(r=e.type,t!==null&&e.stateNode!=null)I_(t,e,r,n,A),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(se(166));return kr(e),null}if(t=Ei(nA.current),Du(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Yn]=e,n[dc]=s,t=(e.mode&1)!==0,r){case"dialog":Qt("cancel",n),Qt("close",n);break;case"iframe":case"object":case"embed":Qt("load",n);break;case"video":case"audio":for(A=0;A<vl.length;A++)Qt(vl[A],n);break;case"source":Qt("error",n);break;case"img":case"image":case"link":Qt("error",n),Qt("load",n);break;case"details":Qt("toggle",n);break;case"input":Ev(n,s),Qt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Qt("invalid",n);break;case"textarea":bv(n,s),Qt("invalid",n)}Dp(r,s),A=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nu(n.textContent,a,t),A=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nu(n.textContent,a,t),A=["children",""+a]):rc.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Qt("scroll",n)}switch(r){case"input":bu(n),_v(n,s,!0);break;case"textarea":bu(n),Tv(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ah)}n=A,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Yn]=e,t[dc]=n,C_(t,e,!1,!1),e.stateNode=t;e:{switch(i=Pp(r,n),r){case"dialog":Qt("cancel",t),Qt("close",t),A=n;break;case"iframe":case"object":case"embed":Qt("load",t),A=n;break;case"video":case"audio":for(A=0;A<vl.length;A++)Qt(vl[A],t);A=n;break;case"source":Qt("error",t),A=n;break;case"img":case"image":case"link":Qt("error",t),Qt("load",t),A=n;break;case"details":Qt("toggle",t),A=n;break;case"input":Ev(t,n),A=Up(t,n),Qt("invalid",t);break;case"option":A=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},A=Vt({},n,{value:void 0}),Qt("invalid",t);break;case"textarea":bv(t,n),A=Rp(t,n),Qt("invalid",t);break;default:A=n}Dp(r,A),a=A;for(s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="style"?rE(t,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&eE(t,o)):s==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&nc(t,o):typeof o=="number"&&nc(t,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rc.hasOwnProperty(s)?o!=null&&s==="onScroll"&&Qt("scroll",t):o!=null&&T0(t,s,o,i))}switch(r){case"input":bu(t),_v(t,n,!1);break;case"textarea":bu(t),Tv(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ds(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Lo(t,!!n.multiple,s,!1):n.defaultValue!=null&&Lo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=Ah)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kr(e),null;case 6:if(t&&e.stateNode!=null)E_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(se(166));if(r=Ei(fc.current),Ei(nA.current),Du(e)){if(n=e.stateNode,r=e.memoizedProps,n[Yn]=e,(s=n.nodeValue!==r)&&(t=Bn,t!==null))switch(t.tag){case 3:Nu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nu(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Yn]=e,e.stateNode=n}return kr(e),null;case 13:if(kt(jt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dt&&wn!==null&&e.mode&1&&!(e.flags&128))VE(),Yo(),e.flags|=98560,s=!1;else if(s=Du(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[Yn]=e}else Yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kr(e),s=!1}else On!==null&&(mm(On),On=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||jt.current&1?ar===0&&(ar=3):cw())),e.updateQueue!==null&&(e.flags|=4),kr(e),null);case 4:return ea(),lm(t,e),t===null&&cc(e.stateNode.containerInfo),kr(e),null;case 10:return $0(e.type._context),kr(e),null;case 17:return ln(e.type)&&sh(),kr(e),null;case 19:if(kt(jt),s=e.memoizedState,s===null)return kr(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)sl(s,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=dh(t),i!==null){for(e.flags|=128,sl(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Et(jt,jt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Yt()>ra&&(e.flags|=128,n=!0,sl(s,!1),e.lanes=4194304)}else{if(!n)if(t=dh(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),sl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Dt)return kr(e),null}else 2*Yt()-s.renderingStartTime>ra&&r!==1073741824&&(e.flags|=128,n=!0,sl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Yt(),e.sibling=null,r=jt.current,Et(jt,n?r&1|2:r&1),e):(kr(e),null);case 22:case 23:return lw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?gn&1073741824&&(kr(e),e.subtreeFlags&6&&(e.flags|=8192)):kr(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function fk(t,e){switch(V0(e),e.tag){case 1:return ln(e.type)&&sh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ea(),kt(an),kt(Hr),Y0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X0(e),null;case 13:if(kt(jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(jt),null;case 4:return ea(),null;case 10:return $0(e.type._context),null;case 22:case 23:return lw(),null;case 24:return null;default:return null}}var Mu=!1,Mr=!1,gk=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Ro(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){zt(t,e,n)}else r.current=null}function cm(t,e,r){try{r()}catch(n){zt(t,e,n)}}var my=!1;function pk(t,e){if($p=th,t=QE(),O0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var A=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,a=-1,o=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var w;h!==r||A!==0&&h.nodeType!==3||(a=i+A),h!==s||n!==0&&h.nodeType!==3||(o=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)f=h,h=w;for(;;){if(h===t)break t;if(f===r&&++c===A&&(a=i),f===s&&++d===n&&(o=i),(w=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=w}r=a===-1||o===-1?null:{start:a,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wp={focusedElem:t,selectionRange:r},th=!1,Ce=e;Ce!==null;)if(e=Ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ce=t;else for(;Ce!==null;){e=Ce;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var B=v.memoizedProps,_=v.memoizedState,x=e.stateNode,m=x.getSnapshotBeforeUpdate(e.elementType===e.type?B:Mn(e.type,B),_);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(F){zt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,Ce=t;break}Ce=e.return}return v=my,my=!1,v}function Ol(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var A=n=n.next;do{if((A.tag&t)===t){var s=A.destroy;A.destroy=void 0,s!==void 0&&cm(e,r,s)}A=A.next}while(A!==n)}}function uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function um(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function __(t){var e=t.alternate;e!==null&&(t.alternate=null,__(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[dc],delete e[Xp],delete e[YS],delete e[ZS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function b_(t){return t.tag===5||t.tag===3||t.tag===4}function wy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||b_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ah));else if(n!==4&&(t=t.child,t!==null))for(dm(t,e,r),t=t.sibling;t!==null;)dm(t,e,r),t=t.sibling}function hm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(hm(t,e,r),t=t.sibling;t!==null;)hm(t,e,r),t=t.sibling}var Cr=null,jn=!1;function WA(t,e,r){for(r=r.child;r!==null;)T_(t,e,r),r=r.sibling}function T_(t,e,r){if(rA&&typeof rA.onCommitFiberUnmount=="function")try{rA.onCommitFiberUnmount(rf,r)}catch{}switch(r.tag){case 5:Mr||Ro(r,e);case 6:var n=Cr,A=jn;Cr=null,WA(t,e,r),Cr=n,jn=A,Cr!==null&&(jn?(t=Cr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Cr.removeChild(r.stateNode));break;case 18:Cr!==null&&(jn?(t=Cr,r=r.stateNode,t.nodeType===8?Sg(t.parentNode,r):t.nodeType===1&&Sg(t,r),oc(t)):Sg(Cr,r.stateNode));break;case 4:n=Cr,A=jn,Cr=r.stateNode.containerInfo,jn=!0,WA(t,e,r),Cr=n,jn=A;break;case 0:case 11:case 14:case 15:if(!Mr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){A=n=n.next;do{var s=A,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&cm(r,e,i),A=A.next}while(A!==n)}WA(t,e,r);break;case 1:if(!Mr&&(Ro(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){zt(r,e,a)}WA(t,e,r);break;case 21:WA(t,e,r);break;case 22:r.mode&1?(Mr=(n=Mr)||r.memoizedState!==null,WA(t,e,r),Mr=n):WA(t,e,r);break;default:WA(t,e,r)}}function By(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new gk),e.forEach(function(n){var A=Ek.bind(null,t,n);r.has(n)||(r.add(n),n.then(A,A))})}}function Pn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var A=r[n];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Cr=a.stateNode,jn=!1;break e;case 3:Cr=a.stateNode.containerInfo,jn=!0;break e;case 4:Cr=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(Cr===null)throw Error(se(160));T_(s,i,A),Cr=null,jn=!1;var o=A.alternate;o!==null&&(o.return=null),A.return=null}catch(c){zt(A,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)F_(e,t),e=e.sibling}function F_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(e,t),Wn(t),n&4){try{Ol(3,t,t.return),uf(3,t)}catch(B){zt(t,t.return,B)}try{Ol(5,t,t.return)}catch(B){zt(t,t.return,B)}}break;case 1:Pn(e,t),Wn(t),n&512&&r!==null&&Ro(r,r.return);break;case 5:if(Pn(e,t),Wn(t),n&512&&r!==null&&Ro(r,r.return),t.flags&32){var A=t.stateNode;try{nc(A,"")}catch(B){zt(t,t.return,B)}}if(n&4&&(A=t.stateNode,A!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&XI(A,s),Pp(a,i);var c=Pp(a,s);for(i=0;i<o.length;i+=2){var d=o[i],h=o[i+1];d==="style"?rE(A,h):d==="dangerouslySetInnerHTML"?eE(A,h):d==="children"?nc(A,h):T0(A,d,h,c)}switch(a){case"input":Sp(A,s);break;case"textarea":YI(A,s);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Lo(A,!!s.multiple,w,!1):f!==!!s.multiple&&(s.defaultValue!=null?Lo(A,!!s.multiple,s.defaultValue,!0):Lo(A,!!s.multiple,s.multiple?[]:"",!1))}A[dc]=s}catch(B){zt(t,t.return,B)}}break;case 6:if(Pn(e,t),Wn(t),n&4){if(t.stateNode===null)throw Error(se(162));A=t.stateNode,s=t.memoizedProps;try{A.nodeValue=s}catch(B){zt(t,t.return,B)}}break;case 3:if(Pn(e,t),Wn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{oc(e.containerInfo)}catch(B){zt(t,t.return,B)}break;case 4:Pn(e,t),Wn(t);break;case 13:Pn(e,t),Wn(t),A=t.child,A.flags&8192&&(s=A.memoizedState!==null,A.stateNode.isHidden=s,!s||A.alternate!==null&&A.alternate.memoizedState!==null||(ow=Yt())),n&4&&By(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Mr=(c=Mr)||d,Pn(e,t),Mr=c):Pn(e,t),Wn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ce=t,d=t.child;d!==null;){for(h=Ce=d;Ce!==null;){switch(f=Ce,w=f.child,f.tag){case 0:case 11:case 14:case 15:Ol(4,f,f.return);break;case 1:Ro(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(B){zt(n,r,B)}}break;case 5:Ro(f,f.return);break;case 22:if(f.memoizedState!==null){yy(h);continue}}w!==null?(w.return=f,Ce=w):yy(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{A=h.stateNode,c?(s=A.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=tE("display",i))}catch(B){zt(t,t.return,B)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(B){zt(t,t.return,B)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pn(e,t),Wn(t),n&4&&By(t);break;case 21:break;default:Pn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(b_(r)){var n=r;break e}r=r.return}throw Error(se(160))}switch(n.tag){case 5:var A=n.stateNode;n.flags&32&&(nc(A,""),n.flags&=-33);var s=wy(t);hm(t,s,A);break;case 3:case 4:var i=n.stateNode.containerInfo,a=wy(t);dm(t,a,i);break;default:throw Error(se(161))}}catch(o){zt(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mk(t,e,r){Ce=t,Q_(t)}function Q_(t,e,r){for(var n=(t.mode&1)!==0;Ce!==null;){var A=Ce,s=A.child;if(A.tag===22&&n){var i=A.memoizedState!==null||Mu;if(!i){var a=A.alternate,o=a!==null&&a.memoizedState!==null||Mr;a=Mu;var c=Mr;if(Mu=i,(Mr=o)&&!c)for(Ce=A;Ce!==null;)i=Ce,o=i.child,i.tag===22&&i.memoizedState!==null?xy(A):o!==null?(o.return=i,Ce=o):xy(A);for(;s!==null;)Ce=s,Q_(s),s=s.sibling;Ce=A,Mu=a,Mr=c}vy(t)}else A.subtreeFlags&8772&&s!==null?(s.return=A,Ce=s):vy(t)}}function vy(t){for(;Ce!==null;){var e=Ce;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mr||uf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Mr)if(r===null)n.componentDidMount();else{var A=e.elementType===e.type?r.memoizedProps:Mn(e.type,r.memoizedProps);n.componentDidUpdate(A,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ay(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ay(e,i,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&oc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Mr||e.flags&512&&um(e)}catch(f){zt(e,e.return,f)}}if(e===t){Ce=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ce=r;break}Ce=e.return}}function yy(t){for(;Ce!==null;){var e=Ce;if(e===t){Ce=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ce=r;break}Ce=e.return}}function xy(t){for(;Ce!==null;){var e=Ce;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{uf(4,e)}catch(o){zt(e,r,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var A=e.return;try{n.componentDidMount()}catch(o){zt(e,A,o)}}var s=e.return;try{um(e)}catch(o){zt(e,s,o)}break;case 5:var i=e.return;try{um(e)}catch(o){zt(e,i,o)}}}catch(o){zt(e,e.return,o)}if(e===t){Ce=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ce=a;break}Ce=e.return}}var wk=Math.ceil,gh=PA.ReactCurrentDispatcher,sw=PA.ReactCurrentOwner,Sn=PA.ReactCurrentBatchConfig,dt=0,pr=null,sr=null,Tr=0,gn=0,No=Js(0),ar=0,wc=null,Di=0,df=0,iw=0,Hl=null,tn=null,ow=0,ra=1/0,pA=null,ph=!1,fm=null,_s=null,ju=!1,fs=null,mh=0,Vl=0,gm=null,Fd=-1,Qd=0;function $r(){return dt&6?Yt():Fd!==-1?Fd:Fd=Yt()}function bs(t){return t.mode&1?dt&2&&Tr!==0?Tr&-Tr:tk.transition!==null?(Qd===0&&(Qd=fE()),Qd):(t=pt,t!==0||(t=window.event,t=t===void 0?16:yE(t.type)),t):1}function Vn(t,e,r,n){if(50<Vl)throw Vl=0,gm=null,Error(se(185));Mc(t,r,n),(!(dt&2)||t!==pr)&&(t===pr&&(!(dt&2)&&(df|=r),ar===4&&As(t,Tr)),cn(t,n),r===1&&dt===0&&!(e.mode&1)&&(ra=Yt()+500,af&&Xs()))}function cn(t,e){var r=t.callbackNode;tS(t,e);var n=eh(t,t===pr?Tr:0);if(n===0)r!==null&&Uv(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Uv(r),e===1)t.tag===0?ek(Cy.bind(null,t)):jE(Cy.bind(null,t)),JS(function(){!(dt&6)&&Xs()}),r=null;else{switch(gE(n)){case 1:r=k0;break;case 4:r=dE;break;case 16:r=Zd;break;case 536870912:r=hE;break;default:r=Zd}r=L_(r,U_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function U_(t,e){if(Fd=-1,Qd=0,dt&6)throw Error(se(327));var r=t.callbackNode;if(Vo()&&t.callbackNode!==r)return null;var n=eh(t,t===pr?Tr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=wh(t,n);else{e=n;var A=dt;dt|=2;var s=k_();(pr!==t||Tr!==e)&&(pA=null,ra=Yt()+500,bi(t,e));do try{yk();break}catch(a){S_(t,a)}while(!0);z0(),gh.current=s,dt=A,sr!==null?e=0:(pr=null,Tr=0,e=ar)}if(e!==0){if(e===2&&(A=Hp(t),A!==0&&(n=A,e=pm(t,A))),e===1)throw r=wc,bi(t,0),As(t,n),cn(t,Yt()),r;if(e===6)As(t,n);else{if(A=t.current.alternate,!(n&30)&&!Bk(A)&&(e=wh(t,n),e===2&&(s=Hp(t),s!==0&&(n=s,e=pm(t,s))),e===1))throw r=wc,bi(t,0),As(t,n),cn(t,Yt()),r;switch(t.finishedWork=A,t.finishedLanes=n,e){case 0:case 1:throw Error(se(345));case 2:gi(t,tn,pA);break;case 3:if(As(t,n),(n&130023424)===n&&(e=ow+500-Yt(),10<e)){if(eh(t,0)!==0)break;if(A=t.suspendedLanes,(A&n)!==n){$r(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=Jp(gi.bind(null,t,tn,pA),e);break}gi(t,tn,pA);break;case 4:if(As(t,n),(n&4194240)===n)break;for(e=t.eventTimes,A=-1;0<n;){var i=31-Hn(n);s=1<<i,i=e[i],i>A&&(A=i),n&=~s}if(n=A,n=Yt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wk(n/1960))-n,10<n){t.timeoutHandle=Jp(gi.bind(null,t,tn,pA),n);break}gi(t,tn,pA);break;case 5:gi(t,tn,pA);break;default:throw Error(se(329))}}}return cn(t,Yt()),t.callbackNode===r?U_.bind(null,t):null}function pm(t,e){var r=Hl;return t.current.memoizedState.isDehydrated&&(bi(t,e).flags|=256),t=wh(t,e),t!==2&&(e=tn,tn=r,e!==null&&mm(e)),t}function mm(t){tn===null?tn=t:tn.push.apply(tn,t)}function Bk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var A=r[n],s=A.getSnapshot;A=A.value;try{if(!Gn(s(),A))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~iw,e&=~df,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Hn(e),n=1<<r;t[r]=-1,e&=~n}}function Cy(t){if(dt&6)throw Error(se(327));Vo();var e=eh(t,0);if(!(e&1))return cn(t,Yt()),null;var r=wh(t,e);if(t.tag!==0&&r===2){var n=Hp(t);n!==0&&(e=n,r=pm(t,n))}if(r===1)throw r=wc,bi(t,0),As(t,e),cn(t,Yt()),r;if(r===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,tn,pA),cn(t,Yt()),null}function aw(t,e){var r=dt;dt|=1;try{return t(e)}finally{dt=r,dt===0&&(ra=Yt()+500,af&&Xs())}}function Pi(t){fs!==null&&fs.tag===0&&!(dt&6)&&Vo();var e=dt;dt|=1;var r=Sn.transition,n=pt;try{if(Sn.transition=null,pt=1,t)return t()}finally{pt=n,Sn.transition=r,dt=e,!(dt&6)&&Xs()}}function lw(){gn=No.current,kt(No)}function bi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,qS(r)),sr!==null)for(r=sr.return;r!==null;){var n=r;switch(V0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&sh();break;case 3:ea(),kt(an),kt(Hr),Y0();break;case 5:X0(n);break;case 4:ea();break;case 13:kt(jt);break;case 19:kt(jt);break;case 10:$0(n.type._context);break;case 22:case 23:lw()}r=r.return}if(pr=t,sr=t=Ts(t.current,null),Tr=gn=e,ar=0,wc=null,iw=df=Di=0,tn=Hl=null,Ii!==null){for(e=0;e<Ii.length;e++)if(r=Ii[e],n=r.interleaved,n!==null){r.interleaved=null;var A=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=A,n.next=i}r.pending=n}Ii=null}return t}function S_(t,e){do{var r=sr;try{if(z0(),_d.current=fh,hh){for(var n=Ot.memoizedState;n!==null;){var A=n.queue;A!==null&&(A.pending=null),n=n.next}hh=!1}if(Ni=0,fr=ir=Ot=null,jl=!1,gc=0,sw.current=null,r===null||r.return===null){ar=1,wc=e,sr=null;break}e:{var s=t,i=r.return,a=r,o=e;if(e=Tr,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=cy(i);if(w!==null){w.flags&=-257,uy(w,i,a,s,e),w.mode&1&&ly(s,c,e),e=w,o=c;var v=e.updateQueue;if(v===null){var B=new Set;B.add(o),e.updateQueue=B}else v.add(o);break e}else{if(!(e&1)){ly(s,c,e),cw();break e}o=Error(se(426))}}else if(Dt&&a.mode&1){var _=cy(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),uy(_,i,a,s,e),K0(ta(o,a));break e}}s=o=ta(o,a),ar!==4&&(ar=2),Hl===null?Hl=[s]:Hl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=g_(s,o,e);ny(s,x);break e;case 1:a=o;var m=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(_s===null||!_s.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var F=p_(s,a,e);ny(s,F);break e}}s=s.return}while(s!==null)}N_(r)}catch(R){e=R,sr===r&&r!==null&&(sr=r=r.return);continue}break}while(!0)}function k_(){var t=gh.current;return gh.current=fh,t===null?fh:t}function cw(){(ar===0||ar===3||ar===2)&&(ar=4),pr===null||!(Di&268435455)&&!(df&268435455)||As(pr,Tr)}function wh(t,e){var r=dt;dt|=2;var n=k_();(pr!==t||Tr!==e)&&(pA=null,bi(t,e));do try{vk();break}catch(A){S_(t,A)}while(!0);if(z0(),dt=r,gh.current=n,sr!==null)throw Error(se(261));return pr=null,Tr=0,ar}function vk(){for(;sr!==null;)R_(sr)}function yk(){for(;sr!==null&&!zU();)R_(sr)}function R_(t){var e=P_(t.alternate,t,gn);t.memoizedProps=t.pendingProps,e===null?N_(t):sr=e,sw.current=null}function N_(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=fk(r,e),r!==null){r.flags&=32767,sr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,sr=null;return}}else if(r=hk(r,e,gn),r!==null){sr=r;return}if(e=e.sibling,e!==null){sr=e;return}sr=e=t}while(e!==null);ar===0&&(ar=5)}function gi(t,e,r){var n=pt,A=Sn.transition;try{Sn.transition=null,pt=1,xk(t,e,r,n)}finally{Sn.transition=A,pt=n}return null}function xk(t,e,r,n){do Vo();while(fs!==null);if(dt&6)throw Error(se(327));r=t.finishedWork;var A=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(rS(t,s),t===pr&&(sr=pr=null,Tr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ju||(ju=!0,L_(Zd,function(){return Vo(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Sn.transition,Sn.transition=null;var i=pt;pt=1;var a=dt;dt|=4,sw.current=null,pk(t,r),F_(r,t),HS(Wp),th=!!$p,Wp=$p=null,t.current=r,mk(r),$U(),dt=a,pt=i,Sn.transition=s}else t.current=r;if(ju&&(ju=!1,fs=t,mh=A),s=t.pendingLanes,s===0&&(_s=null),JU(r.stateNode),cn(t,Yt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)A=e[r],n(A.value,{componentStack:A.stack,digest:A.digest});if(ph)throw ph=!1,t=fm,fm=null,t;return mh&1&&t.tag!==0&&Vo(),s=t.pendingLanes,s&1?t===gm?Vl++:(Vl=0,gm=t):Vl=0,Xs(),null}function Vo(){if(fs!==null){var t=gE(mh),e=Sn.transition,r=pt;try{if(Sn.transition=null,pt=16>t?16:t,fs===null)var n=!1;else{if(t=fs,fs=null,mh=0,dt&6)throw Error(se(331));var A=dt;for(dt|=4,Ce=t.current;Ce!==null;){var s=Ce,i=s.child;if(Ce.flags&16){var a=s.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(Ce=c;Ce!==null;){var d=Ce;switch(d.tag){case 0:case 11:case 15:Ol(8,d,s)}var h=d.child;if(h!==null)h.return=d,Ce=h;else for(;Ce!==null;){d=Ce;var f=d.sibling,w=d.return;if(__(d),d===c){Ce=null;break}if(f!==null){f.return=w,Ce=f;break}Ce=w}}}var v=s.alternate;if(v!==null){var B=v.child;if(B!==null){v.child=null;do{var _=B.sibling;B.sibling=null,B=_}while(B!==null)}}Ce=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Ce=i;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ol(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ce=x;break e}Ce=s.return}}var m=t.current;for(Ce=m;Ce!==null;){i=Ce;var I=i.child;if(i.subtreeFlags&2064&&I!==null)I.return=i,Ce=I;else e:for(i=m;Ce!==null;){if(a=Ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uf(9,a)}}catch(R){zt(a,a.return,R)}if(a===i){Ce=null;break e}var F=a.sibling;if(F!==null){F.return=a.return,Ce=F;break e}Ce=a.return}}if(dt=A,Xs(),rA&&typeof rA.onPostCommitFiberRoot=="function")try{rA.onPostCommitFiberRoot(rf,t)}catch{}n=!0}return n}finally{pt=r,Sn.transition=e}}return!1}function Iy(t,e,r){e=ta(r,e),e=g_(t,e,1),t=Es(t,e,1),e=$r(),t!==null&&(Mc(t,1,e),cn(t,e))}function zt(t,e,r){if(t.tag===3)Iy(t,t,r);else for(;e!==null;){if(e.tag===3){Iy(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_s===null||!_s.has(n))){t=ta(r,t),t=p_(e,t,1),e=Es(e,t,1),t=$r(),e!==null&&(Mc(e,1,t),cn(e,t));break}}e=e.return}}function Ck(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=$r(),t.pingedLanes|=t.suspendedLanes&r,pr===t&&(Tr&r)===r&&(ar===4||ar===3&&(Tr&130023424)===Tr&&500>Yt()-ow?bi(t,0):iw|=r),cn(t,e)}function D_(t,e){e===0&&(t.mode&1?(e=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):e=1);var r=$r();t=QA(t,e),t!==null&&(Mc(t,e,r),cn(t,r))}function Ik(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),D_(t,r)}function Ek(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,A=t.memoizedState;A!==null&&(r=A.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(e),D_(t,r)}var P_;P_=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)nn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return nn=!1,dk(t,e,r);nn=!!(t.flags&131072)}else nn=!1,Dt&&e.flags&1048576&&OE(e,ah,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Td(t,e),t=e.pendingProps;var A=Xo(e,Hr.current);Ho(e,r),A=ew(null,e,n,t,A,r);var s=tw();return e.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(n)?(s=!0,ih(e)):s=!1,e.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,q0(e),A.updater=cf,e.stateNode=A,A._reactInternals=e,nm(e,n,t,r),e=im(null,e,n,!0,s,r)):(e.tag=0,Dt&&s&&H0(e),Gr(null,e,A,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Td(t,e),t=e.pendingProps,A=n._init,n=A(n._payload),e.type=n,A=e.tag=bk(n),t=Mn(n,t),A){case 0:e=sm(null,e,n,t,r);break e;case 1:e=fy(null,e,n,t,r);break e;case 11:e=dy(null,e,n,t,r);break e;case 14:e=hy(null,e,n,Mn(n.type,t),r);break e}throw Error(se(306,n,""))}return e;case 0:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),sm(t,e,n,A,r);case 1:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),fy(t,e,n,A,r);case 3:e:{if(v_(e),t===null)throw Error(se(387));n=e.pendingProps,s=e.memoizedState,A=s.element,$E(t,e),uh(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){A=ta(Error(se(423)),e),e=gy(t,e,n,r,A);break e}else if(n!==A){A=ta(Error(se(424)),e),e=gy(t,e,n,r,A);break e}else for(wn=Is(e.stateNode.containerInfo.firstChild),Bn=e,Dt=!0,On=null,r=GE(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yo(),n===A){e=UA(t,e,r);break e}Gr(t,e,n,r)}e=e.child}return e;case 5:return WE(e),t===null&&em(e),n=e.type,A=e.pendingProps,s=t!==null?t.memoizedProps:null,i=A.children,qp(n,A)?i=null:s!==null&&qp(n,s)&&(e.flags|=32),B_(t,e),Gr(t,e,i,r),e.child;case 6:return t===null&&em(e),null;case 13:return y_(t,e,r);case 4:return J0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Zo(e,null,n,r):Gr(t,e,n,r),e.child;case 11:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),dy(t,e,n,A,r);case 7:return Gr(t,e,e.pendingProps,r),e.child;case 8:return Gr(t,e,e.pendingProps.children,r),e.child;case 12:return Gr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,A=e.pendingProps,s=e.memoizedProps,i=A.value,Et(lh,n._currentValue),n._currentValue=i,s!==null)if(Gn(s.value,i)){if(s.children===A.children&&!an.current){e=UA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var o=a.firstContext;o!==null;){if(o.context===n){if(s.tag===1){o=EA(-1,r&-r),o.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o}}s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),tm(s.return,r,e),a.lanes|=r;break}o=o.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(se(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),tm(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Gr(t,e,A.children,r),e=e.child}return e;case 9:return A=e.type,n=e.pendingProps.children,Ho(e,r),A=kn(A),n=n(A),e.flags|=1,Gr(t,e,n,r),e.child;case 14:return n=e.type,A=Mn(n,e.pendingProps),A=Mn(n.type,A),hy(t,e,n,A,r);case 15:return m_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),Td(t,e),e.tag=1,ln(n)?(t=!0,ih(e)):t=!1,Ho(e,r),f_(e,n,A),nm(e,n,A,r),im(null,e,n,!0,t,r);case 19:return x_(t,e,r);case 22:return w_(t,e,r)}throw Error(se(156,e.tag))};function L_(t,e){return uE(t,e)}function _k(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,r,n){return new _k(t,e,r,n)}function uw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bk(t){if(typeof t=="function")return uw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Q0)return 11;if(t===U0)return 14}return 2}function Ts(t,e){var r=t.alternate;return r===null?(r=Fn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ud(t,e,r,n,A,s){var i=2;if(n=t,typeof t=="function")uw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Eo:return Ti(r.children,A,s,e);case F0:i=8,A|=8;break;case bp:return t=Fn(12,r,e,A|2),t.elementType=bp,t.lanes=s,t;case Tp:return t=Fn(13,r,e,A),t.elementType=Tp,t.lanes=s,t;case Fp:return t=Fn(19,r,e,A),t.elementType=Fp,t.lanes=s,t;case WI:return hf(r,A,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zI:i=10;break e;case $I:i=9;break e;case Q0:i=11;break e;case U0:i=14;break e;case es:i=16,n=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Fn(i,r,e,A),e.elementType=t,e.type=n,e.lanes=s,e}function Ti(t,e,r,n){return t=Fn(7,t,n,e),t.lanes=r,t}function hf(t,e,r,n){return t=Fn(22,t,n,e),t.elementType=WI,t.lanes=r,t.stateNode={isHidden:!1},t}function jg(t,e,r){return t=Fn(6,t,null,e),t.lanes=r,t}function Og(t,e,r){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Tk(t,e,r,n,A){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yg(0),this.expirationTimes=yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yg(0),this.identifierPrefix=n,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function dw(t,e,r,n,A,s,i,a,o){return t=new Tk(t,e,r,a,o),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},q0(s),t}function Fk(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function M_(t){if(!t)return Ps;t=t._reactInternals;e:{if(Xi(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var r=t.type;if(ln(r))return ME(t,r,e)}return e}function j_(t,e,r,n,A,s,i,a,o){return t=dw(r,n,!0,t,A,s,i,a,o),t.context=M_(null),r=t.current,n=$r(),A=bs(r),s=EA(n,A),s.callback=e??null,Es(r,s,A),t.current.lanes=A,Mc(t,A,n),cn(t,n),t}function ff(t,e,r,n){var A=e.current,s=$r(),i=bs(A);return r=M_(r),e.context===null?e.context=r:e.pendingContext=r,e=EA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Es(A,e,i),t!==null&&(Vn(t,A,i,s),Ed(t,A,i)),i}function Bh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ey(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hw(t,e){Ey(t,e),(t=t.alternate)&&Ey(t,e)}function Qk(){return null}var O_=typeof reportError=="function"?reportError:function(t){console.error(t)};function fw(t){this._internalRoot=t}gf.prototype.render=fw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));ff(t,e,null,null)};gf.prototype.unmount=fw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){ff(null,t,null,null)}),e[FA]=null}};function gf(t){this._internalRoot=t}gf.prototype.unstable_scheduleHydration=function(t){if(t){var e=wE();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ns.length&&e!==0&&e<ns[r].priority;r++);ns.splice(r,0,t),r===0&&vE(t)}};function gw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _y(){}function Uk(t,e,r,n,A){if(A){if(typeof n=="function"){var s=n;n=function(){var c=Bh(i);s.call(c)}}var i=j_(e,n,t,0,null,!1,!1,"",_y);return t._reactRootContainer=i,t[FA]=i.current,cc(t.nodeType===8?t.parentNode:t),Pi(),i}for(;A=t.lastChild;)t.removeChild(A);if(typeof n=="function"){var a=n;n=function(){var c=Bh(o);a.call(c)}}var o=dw(t,0,!1,null,null,!1,!1,"",_y);return t._reactRootContainer=o,t[FA]=o.current,cc(t.nodeType===8?t.parentNode:t),Pi(function(){ff(e,o,r,n)}),o}function mf(t,e,r,n,A){var s=r._reactRootContainer;if(s){var i=s;if(typeof A=="function"){var a=A;A=function(){var o=Bh(i);a.call(o)}}ff(e,i,t,A)}else i=Uk(r,e,t,A,n);return Bh(i)}pE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Bl(e.pendingLanes);r!==0&&(R0(e,r|1),cn(e,Yt()),!(dt&6)&&(ra=Yt()+500,Xs()))}break;case 13:Pi(function(){var n=QA(t,1);if(n!==null){var A=$r();Vn(n,t,1,A)}}),hw(t,1)}};N0=function(t){if(t.tag===13){var e=QA(t,134217728);if(e!==null){var r=$r();Vn(e,t,134217728,r)}hw(t,134217728)}};mE=function(t){if(t.tag===13){var e=bs(t),r=QA(t,e);if(r!==null){var n=$r();Vn(r,t,e,n)}hw(t,e)}};wE=function(){return pt};BE=function(t,e){var r=pt;try{return pt=t,e()}finally{pt=r}};Mp=function(t,e,r){switch(e){case"input":if(Sp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var A=of(n);if(!A)throw Error(se(90));JI(n),Sp(n,A)}}}break;case"textarea":YI(t,r);break;case"select":e=r.value,e!=null&&Lo(t,!!r.multiple,e,!1)}};sE=aw;iE=Pi;var Sk={usingClientEntryPoint:!1,Events:[Oc,Fo,of,nE,AE,aw]},il={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kk={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:PA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lE(t),t===null?null:t.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||Qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{rf=Ou.inject(kk),rA=Ou}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sk;Cn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gw(e))throw Error(se(200));return Fk(t,e,null,r)};Cn.createRoot=function(t,e){if(!gw(t))throw Error(se(299));var r=!1,n="",A=O_;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=dw(t,1,!1,null,null,r,!1,n,A),t[FA]=e.current,cc(t.nodeType===8?t.parentNode:t),new fw(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=lE(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Pi(t)};Cn.hydrate=function(t,e,r){if(!pf(e))throw Error(se(200));return mf(null,t,e,!0,r)};Cn.hydrateRoot=function(t,e,r){if(!gw(t))throw Error(se(405));var n=r!=null&&r.hydratedSources||null,A=!1,s="",i=O_;if(r!=null&&(r.unstable_strictMode===!0&&(A=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=j_(e,null,t,1,r??null,A,!1,s,i),t[FA]=e.current,cc(t),n)for(t=0;t<n.length;t++)r=n[t],A=r._getVersion,A=A(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,A]:e.mutableSourceEagerHydrationData.push(r,A);return new gf(e)};Cn.render=function(t,e,r){if(!pf(e))throw Error(se(200));return mf(null,t,e,!1,r)};Cn.unmountComponentAtNode=function(t){if(!pf(t))throw Error(se(40));return t._reactRootContainer?(Pi(function(){mf(null,null,t,!1,function(){t._reactRootContainer=null,t[FA]=null})}),!0):!1};Cn.unstable_batchedUpdates=aw;Cn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!pf(r))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return mf(t,e,r,!1,n)};Cn.version="18.3.1-next-f1338f8080-20240426";function H_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H_)}catch(t){console.error(t)}}H_(),HI.exports=Cn;var Rk=HI.exports,by=Rk;Ep.createRoot=by.createRoot,Ep.hydrateRoot=by.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bc.apply(this,arguments)}var gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gs||(gs={}));const Ty="popstate";function Nk(t){t===void 0&&(t={});function e(A,s){let{pathname:i="/",search:a="",hash:o=""}=Yi(A.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),wm("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(A,s){let i=A.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let o=A.location.href,c=o.indexOf("#");a=c===-1?o:o.slice(0,c)}return a+"#"+(typeof s=="string"?s:vh(s))}function n(A,s){wf(A.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Pk(e,r,n,t)}function Ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Dk(){return Math.random().toString(36).substr(2,8)}function Fy(t,e){return{usr:t.state,key:t.key,idx:e}}function wm(t,e,r,n){return r===void 0&&(r=null),Bc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yi(e):e,{state:r,key:e&&e.key||n||Dk()})}function vh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Pk(t,e,r,n){n===void 0&&(n={});let{window:A=document.defaultView,v5Compat:s=!1}=n,i=A.history,a=gs.Pop,o=null,c=d();c==null&&(c=0,i.replaceState(Bc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){a=gs.Pop;let _=d(),x=_==null?null:_-c;c=_,o&&o({action:a,location:B.location,delta:x})}function f(_,x){a=gs.Push;let m=wm(B.location,_,x);r&&r(m,_),c=d()+1;let I=Fy(m,c),F=B.createHref(m);try{i.pushState(I,"",F)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;A.location.assign(F)}s&&o&&o({action:a,location:B.location,delta:1})}function w(_,x){a=gs.Replace;let m=wm(B.location,_,x);r&&r(m,_),c=d();let I=Fy(m,c),F=B.createHref(m);i.replaceState(I,"",F),s&&o&&o({action:a,location:B.location,delta:0})}function v(_){let x=A.location.origin!=="null"?A.location.origin:A.location.href,m=typeof _=="string"?_:vh(_);return m=m.replace(/ $/,"%20"),Ht(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let B={get action(){return a},get location(){return t(A,i)},listen(_){if(o)throw new Error("A history only accepts one active listener");return A.addEventListener(Ty,h),o=_,()=>{A.removeEventListener(Ty,h),o=null}},createHref(_){return e(A,_)},createURL:v,encodeLocation(_){let x=v(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:w,go(_){return i.go(_)}};return B}var Qy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Qy||(Qy={}));function Lk(t,e,r){return r===void 0&&(r="/"),Mk(t,e,r)}function Mk(t,e,r,n){let A=typeof e=="string"?Yi(e):e,s=na(A.pathname||"/",r);if(s==null)return null;let i=V_(t);jk(i);let a=null;for(let o=0;a==null&&o<i.length;++o){let c=Xk(s);a=qk(i[o],c)}return a}function V_(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let A=(s,i,a)=>{let o={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};o.relativePath.startsWith("/")&&(Ht(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=Fs([n,o.relativePath]),d=r.concat(o);s.children&&s.children.length>0&&(Ht(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),V_(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:$k(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))A(s,i);else for(let o of K_(s.path))A(s,i,o)}),e}function K_(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,A=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return A?[s,""]:[s];let i=K_(n.join("/")),a=[];return a.push(...i.map(o=>o===""?s:[s,o].join("/"))),A&&a.push(...i),a.map(o=>t.startsWith("/")&&o===""?"/":o)}function jk(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Wk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ok=/^:[\w-]+$/,Hk=3,Vk=2,Kk=1,Gk=10,zk=-2,Uy=t=>t==="*";function $k(t,e){let r=t.split("/"),n=r.length;return r.some(Uy)&&(n+=zk),e&&(n+=Vk),r.filter(A=>!Uy(A)).reduce((A,s)=>A+(Ok.test(s)?Hk:s===""?Kk:Gk),n)}function Wk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,A)=>n===e[A])?t[t.length-1]-e[e.length-1]:0}function qk(t,e,r){let{routesMeta:n}=t,A={},s="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Bm({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d),f=o.route;if(!h)return null;Object.assign(A,h.params),i.push({params:A,pathname:Fs([s,h.pathname]),pathnameBase:r2(Fs([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Fs([s,h.pathnameBase]))}return i}function Bm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Jk(t.path,t.caseSensitive,t.end),A=e.match(r);if(!A)return null;let s=A[0],i=s.replace(/(.)\/+$/,"$1"),a=A.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:w}=d;if(f==="*"){let B=a[h]||"";i=s.slice(0,s.length-B.length).replace(/(.)\/+$/,"$1")}const v=a[h];return w&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function Jk(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),wf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],A="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(n.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),A+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?A+="\\/*$":t!==""&&t!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,e?void 0:"i"),n]}function Xk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function na(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Yk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zk=t=>Yk.test(t);function e2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:A=""}=typeof t=="string"?Yi(t):t,s;if(r)if(Zk(r))s=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),wf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?s=Sy(r.substring(1),"/"):s=Sy(r,e)}else s=e;return{pathname:s,search:n2(n),hash:A2(A)}}function Sy(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(A=>{A===".."?r.length>1&&r.pop():A!=="."&&r.push(A)}),r.length>1?r.join("/"):"/"}function Hg(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function t2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function pw(t,e){let r=t2(t);return e?r.map((n,A)=>A===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function mw(t,e,r,n){n===void 0&&(n=!1);let A;typeof t=="string"?A=Yi(t):(A=Bc({},t),Ht(!A.pathname||!A.pathname.includes("?"),Hg("?","pathname","search",A)),Ht(!A.pathname||!A.pathname.includes("#"),Hg("#","pathname","hash",A)),Ht(!A.search||!A.search.includes("#"),Hg("#","search","hash",A)));let s=t===""||A.pathname==="",i=s?"/":A.pathname,a;if(i==null)a=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;A.pathname=f.join("/")}a=h>=0?e[h]:"/"}let o=e2(A,a),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||d)&&(o.pathname+="/"),o}const Fs=t=>t.join("/").replace(/\/\/+/g,"/"),r2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),n2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,A2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function s2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const G_=["post","put","patch","delete"];new Set(G_);const i2=["get",...G_];new Set(i2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vc.apply(this,arguments)}const Bf=k.createContext(null),z_=k.createContext(null),LA=k.createContext(null),vf=k.createContext(null),MA=k.createContext({outlet:null,matches:[],isDataRoute:!1}),$_=k.createContext(null);function o2(t,e){let{relative:r}=e===void 0?{}:e;Ea()||Ht(!1);let{basename:n,navigator:A}=k.useContext(LA),{hash:s,pathname:i,search:a}=yf(t,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:Fs([n,i])),A.createHref({pathname:o,search:a,hash:s})}function Ea(){return k.useContext(vf)!=null}function Ys(){return Ea()||Ht(!1),k.useContext(vf).location}function W_(t){k.useContext(LA).static||k.useLayoutEffect(t)}function Vc(){let{isDataRoute:t}=k.useContext(MA);return t?x2():a2()}function a2(){Ea()||Ht(!1);let t=k.useContext(Bf),{basename:e,future:r,navigator:n}=k.useContext(LA),{matches:A}=k.useContext(MA),{pathname:s}=Ys(),i=JSON.stringify(pw(A,r.v7_relativeSplatPath)),a=k.useRef(!1);return W_(()=>{a.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=mw(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fs([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}const l2=k.createContext(null);function c2(t){let e=k.useContext(MA).outlet;return e&&k.createElement(l2.Provider,{value:t},e)}function yf(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext(LA),{matches:A}=k.useContext(MA),{pathname:s}=Ys(),i=JSON.stringify(pw(A,n.v7_relativeSplatPath));return k.useMemo(()=>mw(t,JSON.parse(i),s,r==="path"),[t,i,s,r])}function u2(t,e){return d2(t,e)}function d2(t,e,r,n){Ea()||Ht(!1);let{navigator:A}=k.useContext(LA),{matches:s}=k.useContext(MA),i=s[s.length-1],a=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c=Ys(),d;if(e){var h;let _=typeof e=="string"?Yi(e):e;o==="/"||(h=_.pathname)!=null&&h.startsWith(o)||Ht(!1),d=_}else d=c;let f=d.pathname||"/",w=f;if(o!=="/"){let _=o.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=Lk(t,{pathname:w}),B=m2(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Fs([o,A.encodeLocation?A.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?o:Fs([o,A.encodeLocation?A.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,r,n);return e&&B?k.createElement(vf.Provider,{value:{location:vc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gs.Pop}},B):B}function h2(){let t=y2(),e=s2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:A},r):null,null)}const f2=k.createElement(h2,null);class g2 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement(MA.Provider,{value:this.props.routeContext},k.createElement($_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function p2(t){let{routeContext:e,match:r,children:n}=t,A=k.useContext(Bf);return A&&A.static&&A.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(MA.Provider,{value:e},n)}function m2(t,e,r,n){var A;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=(A=r)==null?void 0:A.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Ht(!1),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:w}=r,v=h.route.loader&&f[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||v){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let w,v=!1,B=null,_=null;r&&(w=a&&h.route.id?a[h.route.id]:void 0,B=h.route.errorElement||f2,o&&(c<0&&f===0?(C2("route-fallback"),v=!0,_=null):c===f&&(v=!0,_=h.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,f+1)),m=()=>{let I;return w?I=B:v?I=_:h.route.Component?I=k.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,k.createElement(p2,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:I})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(g2,{location:r.location,revalidation:r.revalidation,component:B,error:w,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var q_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(q_||{}),J_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(J_||{});function w2(t){let e=k.useContext(Bf);return e||Ht(!1),e}function B2(t){let e=k.useContext(z_);return e||Ht(!1),e}function v2(t){let e=k.useContext(MA);return e||Ht(!1),e}function X_(t){let e=v2(),r=e.matches[e.matches.length-1];return r.route.id||Ht(!1),r.route.id}function y2(){var t;let e=k.useContext($_),r=B2(),n=X_();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function x2(){let{router:t}=w2(q_.UseNavigateStable),e=X_(J_.UseNavigateStable),r=k.useRef(!1);return W_(()=>{r.current=!0}),k.useCallback(function(A,s){s===void 0&&(s={}),r.current&&(typeof A=="number"?t.navigate(A):t.navigate(A,vc({fromRouteId:e},s)))},[t,e])}const ky={};function C2(t,e,r){ky[t]||(ky[t]=!0)}function I2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function yh(t){let{to:e,replace:r,state:n,relative:A}=t;Ea()||Ht(!1);let{future:s,static:i}=k.useContext(LA),{matches:a}=k.useContext(MA),{pathname:o}=Ys(),c=Vc(),d=mw(e,pw(a,s.v7_relativeSplatPath),o,A==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:A}),[c,h,A,r,n]),null}function E2(t){return c2(t.context)}function hn(t){Ht(!1)}function _2(t){let{basename:e="/",children:r=null,location:n,navigationType:A=gs.Pop,navigator:s,static:i=!1,future:a}=t;Ea()&&Ht(!1);let o=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:o,navigator:s,static:i,future:vc({v7_relativeSplatPath:!1},a)}),[o,a,s,i]);typeof n=="string"&&(n=Yi(n));let{pathname:d="/",search:h="",hash:f="",state:w=null,key:v="default"}=n,B=k.useMemo(()=>{let _=na(d,o);return _==null?null:{location:{pathname:_,search:h,hash:f,state:w,key:v},navigationType:A}},[o,d,h,f,w,v,A]);return B==null?null:k.createElement(LA.Provider,{value:c},k.createElement(vf.Provider,{children:r,value:B}))}function b2(t){let{children:e,location:r}=t;return u2(vm(e),r)}new Promise(()=>{});function vm(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,A)=>{if(!k.isValidElement(n))return;let s=[...e,A];if(n.type===k.Fragment){r.push.apply(r,vm(n.props.children,s));return}n.type!==hn&&Ht(!1),!n.props.index||!n.props.children||Ht(!1);let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=vm(n.props.children,s)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xh.apply(this,arguments)}function Y_(t,e){if(t==null)return{};var r={},n=Object.keys(t),A,s;for(s=0;s<n.length;s++)A=n[s],!(e.indexOf(A)>=0)&&(r[A]=t[A]);return r}function T2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function F2(t,e){return t.button===0&&(!e||e==="_self")&&!T2(t)}function ym(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(A=>[r,A]):[[r,n]])},[]))}function Q2(t,e){let r=ym(t);return e&&e.forEach((n,A)=>{r.has(A)||e.getAll(A).forEach(s=>{r.append(A,s)})}),r}const U2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],S2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],k2="6";try{window.__reactRouterVersion=k2}catch{}const R2=k.createContext({isTransitioning:!1}),N2="startTransition",Ry=CU[N2];function D2(t){let{basename:e,children:r,future:n,window:A}=t,s=k.useRef();s.current==null&&(s.current=Nk({window:A,v5Compat:!0}));let i=s.current,[a,o]=k.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=k.useCallback(h=>{c&&Ry?Ry(()=>o(h)):o(h)},[o,c]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.useEffect(()=>I2(n),[n]),k.createElement(_2,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const P2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M2=k.forwardRef(function(e,r){let{onClick:n,relative:A,reloadDocument:s,replace:i,state:a,target:o,to:c,preventScrollReset:d,viewTransition:h}=e,f=Y_(e,U2),{basename:w}=k.useContext(LA),v,B=!1;if(typeof c=="string"&&L2.test(c)&&(v=c,P2))try{let I=new URL(window.location.href),F=c.startsWith("//")?new URL(I.protocol+c):new URL(c),R=na(F.pathname,w);F.origin===I.origin&&R!=null?c=R+F.search+F.hash:B=!0}catch{}let _=o2(c,{relative:A}),x=H2(c,{replace:i,state:a,target:o,preventScrollReset:d,relative:A,viewTransition:h});function m(I){n&&n(I),I.defaultPrevented||x(I)}return k.createElement("a",xh({},f,{href:v||_,onClick:B||s?n:m,ref:r,target:o}))}),j2=k.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:A=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:c,children:d}=e,h=Y_(e,S2),f=yf(o,{relative:h.relative}),w=Ys(),v=k.useContext(z_),{navigator:B,basename:_}=k.useContext(LA),x=v!=null&&K2(f)&&c===!0,m=B.encodeLocation?B.encodeLocation(f).pathname:f.pathname,I=w.pathname,F=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;A||(I=I.toLowerCase(),F=F?F.toLowerCase():null,m=m.toLowerCase()),F&&_&&(F=na(F,_)||F);const R=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let Q=I===m||!i&&I.startsWith(m)&&I.charAt(R)==="/",y=F!=null&&(F===m||!i&&F.startsWith(m)&&F.charAt(m.length)==="/"),C={isActive:Q,isPending:y,isTransitioning:x},E=Q?n:void 0,U;typeof s=="function"?U=s(C):U=[s,Q?"active":null,y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(C):a;return k.createElement(M2,xh({},h,{"aria-current":E,className:U,ref:r,style:N,to:o,viewTransition:c}),typeof d=="function"?d(C):d)});var xm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xm||(xm={}));var Ny;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ny||(Ny={}));function O2(t){let e=k.useContext(Bf);return e||Ht(!1),e}function H2(t,e){let{target:r,replace:n,state:A,preventScrollReset:s,relative:i,viewTransition:a}=e===void 0?{}:e,o=Vc(),c=Ys(),d=yf(t,{relative:i});return k.useCallback(h=>{if(F2(h,r)){h.preventDefault();let f=n!==void 0?n:vh(c)===vh(d);o(t,{replace:f,state:A,preventScrollReset:s,relative:i,viewTransition:a})}},[c,o,d,n,A,r,t,s,i,a])}function V2(t){let e=k.useRef(ym(t)),r=k.useRef(!1),n=Ys(),A=k.useMemo(()=>Q2(n.search,r.current?null:e.current),[n.search]),s=Vc(),i=k.useCallback((a,o)=>{const c=ym(typeof a=="function"?a(A):a);r.current=!0,s("?"+c,o)},[s,A]);return[A,i]}function K2(t,e){e===void 0&&(e={});let r=k.useContext(R2);r==null&&Ht(!1);let{basename:n}=O2(xm.useViewTransitionState),A=yf(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=na(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=na(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Bm(A.pathname,i)!=null||Bm(A.pathname,s)!=null}var he=(t=>(t.First="1 ",t.Second="2 ",t))(he||{}),mn=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(mn||{});const Dr=["","","","",""],Zn={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Dy=["","","/","","","",""," "],Z_=[{shift:he.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:he.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:he.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:he.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:he.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:he.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:he.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:he.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:he.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:he.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:he.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:he.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:he.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:he.Second,period:6,start:"18:50",end:"19:35",day:"default"}],rn={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:he.First,studentsCount:25},{id:"c2",name:"6",shift:he.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2ndHalf:[],substitutions:[],bellSchedule:Z_,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}},G2="modulepreload",z2=function(t){return"/zamenygymn/"+t},Py={},$2=function(e,r,n){let A=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));A=Promise.allSettled(r.map(o=>{if(o=z2(o),o in Py)return;Py[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":G2,c||(h.as="script"),h.crossOrigin="",h.href=o,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,w)=>{h.addEventListener("load",f),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return A.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var Ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let A=t.charCodeAt(n);A<128?e[r++]=A:A<2048?(e[r++]=A>>6|192,e[r++]=A&63|128):(A&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(A=65536+((A&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=A>>18|240,e[r++]=A>>12&63|128,e[r++]=A>>6&63|128,e[r++]=A&63|128):(e[r++]=A>>12|224,e[r++]=A>>6&63|128,e[r++]=A&63|128)}return e},W2=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const A=t[r++];if(A<128)e[n++]=String.fromCharCode(A);else if(A>191&&A<224){const s=t[r++];e[n++]=String.fromCharCode((A&31)<<6|s&63)}else if(A>239&&A<365){const s=t[r++],i=t[r++],a=t[r++],o=((A&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((A&15)<<12|(s&63)<<6|i&63)}}return e.join("")},tb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let A=0;A<t.length;A+=3){const s=t[A],i=A+1<t.length,a=i?t[A+1]:0,o=A+2<t.length,c=o?t[A+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,w=c&63;o||(w=64,i||(f=64)),n.push(r[d],r[h],r[f],r[w])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):W2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let A=0;A<t.length;){const s=r[t.charAt(A++)],a=A<t.length?r[t.charAt(A)]:0;++A;const c=A<t.length?r[t.charAt(A)]:64;++A;const h=A<t.length?r[t.charAt(A)]:64;if(++A,s==null||a==null||c==null||h==null)throw new q2;const f=s<<2|a>>4;if(n.push(f),c!==64){const w=a<<4&240|c>>2;if(n.push(w),h!==64){const v=c<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class q2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J2=function(t){const e=eb(t);return tb.encodeByteArray(e,!0)},Ch=function(t){return J2(t).replace(/\./g,"")},rb=function(t){try{return tb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=()=>X2().__FIREBASE_DEFAULTS__,Z2=()=>{if(typeof process>"u"||typeof Ly>"u")return;const t=Ly.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rb(t[1]);return e&&JSON.parse(e)},xf=()=>{try{return Y2()||Z2()||eR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nb=t=>{var e,r;return(r=(e=xf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},tR=t=>{const e=nb(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},Ab=()=>{var t;return(t=xf())===null||t===void 0?void 0:t.config},sb=t=>{var e;return(e=xf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",A=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:A,exp:A+3600,auth_time:A,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ch(JSON.stringify(r)),Ch(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lr())}function sR(){var t;const e=(t=xf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lR(){const t=lr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ib(){return!sR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ob(){try{return typeof indexedDB=="object"}catch{return!1}}function cR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(n);A.onsuccess=()=>{A.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},A.onupgradeneeded=()=>{r=!1},A.onerror=()=>{var s;e(((s=A.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="FirebaseError";class jA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=uR,Object.setPrototypeOf(this,jA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kc.prototype.create)}}class Kc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},A=`${this.service}/${e}`,s=this.errors[e],i=s?dR(s,n):"Error",a=`${this.serviceName}: ${i} (${A}).`;return new jA(A,a,n)}}function dR(t,e){return t.replace(hR,(r,n)=>{const A=e[n];return A!=null?String(A):`<${n}?>`})}const hR=/\{\$([^}]+)}/g;function fR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ls(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const A of r){if(!n.includes(A))return!1;const s=t[A],i=e[A];if(My(s)&&My(i)){if(!Ls(s,i))return!1}else if(s!==i)return!1}for(const A of n)if(!r.includes(A))return!1;return!0}function My(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(A=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[A,s]=n.split("=");e[decodeURIComponent(A)]=decodeURIComponent(s)}}),e}function xl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function gR(t,e){const r=new pR(t,e);return r.subscribe.bind(r)}class pR{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let A;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");mR(e,["next","error","complete"])?A=e:A={next:e,error:r,complete:n},A.next===void 0&&(A.next=Vg),A.error===void 0&&(A.error=Vg),A.complete===void 0&&(A.complete=Vg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class Li{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new rR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:r});A&&n.resolve(A)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),A=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(A)return null;throw s}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vR(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:A});n.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&i.resolve(A)}return A}onInit(e,r){var n;const A=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(A))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(A,s);const i=this.instances.get(A);return i&&e(i,A),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const A of n)try{A(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:BR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BR(t){return t===pi?void 0:t}function vR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new wR(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const xR={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},CR=at.INFO,IR={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},ER=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),A=IR[e];if(A)console[A](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let ww=class{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=ER,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}};const _R=(t,e)=>e.some(r=>t instanceof r);let jy,Oy;function bR(){return jy||(jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return Oy||(Oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ab=new WeakMap,Cm=new WeakMap,lb=new WeakMap,Kg=new WeakMap,Bw=new WeakMap;function FR(t){const e=new Promise((r,n)=>{const A=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(Qs(t.result)),A()},i=()=>{n(t.error),A()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&ab.set(r,t)}).catch(()=>{}),Bw.set(e,t),e}function QR(t){if(Cm.has(t))return;const e=new Promise((r,n)=>{const A=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),A()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),A()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});Cm.set(t,e)}let Im={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Cm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lb.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Qs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UR(t){Im=t(Im)}function SR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Gg(this),e,...r);return lb.set(n,e.sort?e.sort():[e]),Qs(n)}:TR().includes(t)?function(...e){return t.apply(Gg(this),e),Qs(ab.get(this))}:function(...e){return Qs(t.apply(Gg(this),e))}}function kR(t){return typeof t=="function"?SR(t):(t instanceof IDBTransaction&&QR(t),_R(t,bR())?new Proxy(t,Im):t)}function Qs(t){if(t instanceof IDBRequest)return FR(t);if(Kg.has(t))return Kg.get(t);const e=kR(t);return e!==t&&(Kg.set(t,e),Bw.set(e,t)),e}const Gg=t=>Bw.get(t);function RR(t,e,{blocked:r,upgrade:n,blocking:A,terminated:s}={}){const i=indexedDB.open(t,e),a=Qs(i);return n&&i.addEventListener("upgradeneeded",o=>{n(Qs(i.result),o.oldVersion,o.newVersion,Qs(i.transaction),o)}),r&&i.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{s&&o.addEventListener("close",()=>s()),A&&o.addEventListener("versionchange",c=>A(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const NR=["get","getKey","getAll","getAllKeys","count"],DR=["put","add","delete","clear"],zg=new Map;function Hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,A=DR.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(A||NR.includes(r)))return;const s=async function(i,...a){const o=this.transaction(i,A?"readwrite":"readonly");let c=o.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),A&&o.done]))[0]};return zg.set(e,s),s}UR(t=>({...t,get:(e,r,n)=>Hy(e,r)||t.get(e,r,n),has:(e,r)=>!!Hy(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(LR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function LR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Em="@firebase/app",Vy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=new ww("@firebase/app"),MR="@firebase/app-compat",jR="@firebase/analytics-compat",OR="@firebase/analytics",HR="@firebase/app-check-compat",VR="@firebase/app-check",KR="@firebase/auth",GR="@firebase/auth-compat",zR="@firebase/database",$R="@firebase/data-connect",WR="@firebase/database-compat",qR="@firebase/functions",JR="@firebase/functions-compat",XR="@firebase/installations",YR="@firebase/installations-compat",ZR="@firebase/messaging",eN="@firebase/messaging-compat",tN="@firebase/performance",rN="@firebase/performance-compat",nN="@firebase/remote-config",AN="@firebase/remote-config-compat",sN="@firebase/storage",iN="@firebase/storage-compat",oN="@firebase/firestore",aN="@firebase/vertexai-preview",lN="@firebase/firestore-compat",cN="firebase",uN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="[DEFAULT]",dN={[Em]:"fire-core",[MR]:"fire-core-compat",[OR]:"fire-analytics",[jR]:"fire-analytics-compat",[VR]:"fire-app-check",[HR]:"fire-app-check-compat",[KR]:"fire-auth",[GR]:"fire-auth-compat",[zR]:"fire-rtdb",[$R]:"fire-data-connect",[WR]:"fire-rtdb-compat",[qR]:"fire-fn",[JR]:"fire-fn-compat",[XR]:"fire-iid",[YR]:"fire-iid-compat",[ZR]:"fire-fcm",[eN]:"fire-fcm-compat",[tN]:"fire-perf",[rN]:"fire-perf-compat",[nN]:"fire-rc",[AN]:"fire-rc-compat",[sN]:"fire-gcs",[iN]:"fire-gcs-compat",[oN]:"fire-fst",[lN]:"fire-fst-compat",[aN]:"fire-vertex","fire-js":"fire-js",[cN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,hN=new Map,_m=new Map;function Ky(t,e){try{t.container.addComponent(e)}catch(r){SA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Aa(t){const e=t.name;if(_m.has(e))return SA.debug(`There were multiple attempts to register component ${e}.`),!1;_m.set(e,t);for(const r of yc.values())Ky(r,t);for(const r of hN.values())Ky(r,t);return!0}function zc(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function fN(t,e,r=Ih){zc(t,e).clearInstance(r)}function vA(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new Kc("app","Firebase",gN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=uN;function cb(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ih,automaticDataCollectionEnabled:!1},e),A=n.name;if(typeof A!="string"||!A)throw Us.create("bad-app-name",{appName:String(A)});if(r||(r=Ab()),!r)throw Us.create("no-options");const s=yc.get(A);if(s){if(Ls(r,s.options)&&Ls(n,s.config))return s;throw Us.create("duplicate-app",{appName:A})}const i=new yR(A);for(const o of _m.values())i.addComponent(o);const a=new pN(r,n,i);return yc.set(A,a),a}function vw(t=Ih){const e=yc.get(t);if(!e&&t===Ih&&Ab())return cb();if(!e)throw Us.create("no-app",{appName:t});return e}function mN(){return Array.from(yc.values())}function Ss(t,e,r){var n;let A=(n=dN[t])!==null&&n!==void 0?n:t;r&&(A+=`-${r}`);const s=A.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${A}" with version "${e}":`];s&&a.push(`library name "${A}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),SA.warn(a.join(" "));return}Aa(new Li(`${A}-version`,()=>({library:A,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firebase-heartbeat-database",BN=1,xc="firebase-heartbeat-store";let $g=null;function ub(){return $g||($g=RR(wN,BN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xc)}catch(r){console.warn(r)}}}}).catch(t=>{throw Us.create("idb-open",{originalErrorMessage:t.message})})),$g}async function vN(t){try{const r=(await ub()).transaction(xc),n=await r.objectStore(xc).get(db(t));return await r.done,n}catch(e){if(e instanceof jA)SA.warn(e.message);else{const r=Us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});SA.warn(r.message)}}}async function Gy(t,e){try{const n=(await ub()).transaction(xc,"readwrite");await n.objectStore(xc).put(e,db(t)),await n.done}catch(r){if(r instanceof jA)SA.warn(r.message);else{const n=Us.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});SA.warn(n.message)}}}function db(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=1024,xN=30*24*60*60*1e3;class CN{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new EN(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const A=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:A}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=xN}),this._storage.overwrite(this._heartbeatsCache))}catch(n){SA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=zy(),{heartbeatsToSend:n,unsentEntries:A}=IN(this._heartbeatsCache.heartbeats),s=Ch(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return SA.warn(r),""}}}function zy(){return new Date().toISOString().substring(0,10)}function IN(t,e=yN){const r=[];let n=t.slice();for(const A of t){const s=r.find(i=>i.agent===A.agent);if(s){if(s.dates.push(A.date),$y(r)>e){s.dates.pop();break}}else if(r.push({agent:A.agent,dates:[A.date]}),$y(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class EN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ob()?cR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vN(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const A=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const A=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}else return}}function $y(t){return Ch(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){Aa(new Li("platform-logger",e=>new PR(e),"PRIVATE")),Aa(new Li("heartbeat",e=>new CN(e),"PRIVATE")),Ss(Em,Vy,t),Ss(Em,Vy,"esm2017"),Ss("fire-js","")}_N("");var bN="firebase",TN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(bN,TN,"app");var Wy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,hb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,C){function E(){}E.prototype=C.prototype,y.D=C.prototype,y.prototype=new E,y.prototype.constructor=y,y.C=function(U,N,L){for(var T=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)T[Le-2]=arguments[Le];return C.prototype[N].apply(U,T)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(y,C,E){E||(E=0);var U=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)U[N]=C.charCodeAt(E++)|C.charCodeAt(E++)<<8|C.charCodeAt(E++)<<16|C.charCodeAt(E++)<<24;else for(N=0;16>N;++N)U[N]=C[E++]|C[E++]<<8|C[E++]<<16|C[E++]<<24;C=y.g[0],E=y.g[1],N=y.g[2];var L=y.g[3],T=C+(L^E&(N^L))+U[0]+3614090360&4294967295;C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+U[1]+3905402710&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+U[2]+606105819&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+U[3]+3250441966&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(L^E&(N^L))+U[4]+4118548399&4294967295,C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+U[5]+1200080426&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+U[6]+2821735955&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+U[7]+4249261313&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(L^E&(N^L))+U[8]+1770035416&4294967295,C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+U[9]+2336552879&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+U[10]+4294925233&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+U[11]+2304563134&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(L^E&(N^L))+U[12]+1804603682&4294967295,C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+U[13]+4254626195&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+U[14]+2792965006&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+U[15]+1236535329&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(N^L&(E^N))+U[1]+4129170786&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+U[6]+3225465664&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+U[11]+643717713&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+U[0]+3921069994&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(E^N))+U[5]+3593408605&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+U[10]+38016083&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+U[15]+3634488961&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+U[4]+3889429448&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(E^N))+U[9]+568446438&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+U[14]+3275163606&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+U[3]+4107603335&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+U[8]+1163531501&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(E^N))+U[13]+2850285829&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+U[2]+4243563512&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+U[7]+1735328473&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+U[12]+2368359562&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(E^N^L)+U[5]+4294588738&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+U[8]+2272392833&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+U[11]+1839030562&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+U[14]+4259657740&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^L)+U[1]+2763975236&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+U[4]+1272893353&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+U[7]+4139469664&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+U[10]+3200236656&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^L)+U[13]+681279174&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+U[0]+3936430074&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+U[3]+3572445317&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+U[6]+76029189&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^L)+U[9]+3654602809&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+U[12]+3873151461&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+U[15]+530742520&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+U[2]+3299628645&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(N^(E|~L))+U[0]+4096336452&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+U[7]+1126891415&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+U[14]+2878612391&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+U[5]+4237533241&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~L))+U[12]+1700485571&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+U[3]+2399980690&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+U[10]+4293915773&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+U[1]+2240044497&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~L))+U[8]+1873313359&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+U[15]+4264355552&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+U[6]+2734768916&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+U[13]+1309151649&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~L))+U[4]+4149444226&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+U[11]+3174756917&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+U[2]+718787259&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+U[9]+3951481745&4294967295,y.g[0]=y.g[0]+C&4294967295,y.g[1]=y.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,y.g[2]=y.g[2]+N&4294967295,y.g[3]=y.g[3]+L&4294967295}n.prototype.u=function(y,C){C===void 0&&(C=y.length);for(var E=C-this.blockSize,U=this.B,N=this.h,L=0;L<C;){if(N==0)for(;L<=E;)A(this,y,L),L+=this.blockSize;if(typeof y=="string"){for(;L<C;)if(U[N++]=y.charCodeAt(L++),N==this.blockSize){A(this,U),N=0;break}}else for(;L<C;)if(U[N++]=y[L++],N==this.blockSize){A(this,U),N=0;break}}this.h=N,this.o+=C},n.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var C=1;C<y.length-8;++C)y[C]=0;var E=8*this.o;for(C=y.length-8;C<y.length;++C)y[C]=E&255,E/=256;for(this.u(y),y=Array(16),C=E=0;4>C;++C)for(var U=0;32>U;U+=8)y[E++]=this.g[C]>>>U&255;return y};function s(y,C){var E=a;return Object.prototype.hasOwnProperty.call(E,y)?E[y]:E[y]=C(y)}function i(y,C){this.h=C;for(var E=[],U=!0,N=y.length-1;0<=N;N--){var L=y[N]|0;U&&L==C||(E[N]=L,U=!1)}this.g=E}var a={};function o(y){return-128<=y&&128>y?s(y,function(C){return new i([C|0],0>C?-1:0)}):new i([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return h;if(0>y)return _(c(-y));for(var C=[],E=1,U=0;y>=E;U++)C[U]=y/E|0,E*=4294967296;return new i(C,0)}function d(y,C){if(y.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y.charAt(0)=="-")return _(d(y.substring(1),C));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(C,8)),U=h,N=0;N<y.length;N+=8){var L=Math.min(8,y.length-N),T=parseInt(y.substring(N,N+L),C);8>L?(L=c(Math.pow(C,L)),U=U.j(L).add(c(T))):(U=U.j(E),U=U.add(c(T)))}return U}var h=o(0),f=o(1),w=o(16777216);t=i.prototype,t.m=function(){if(B(this))return-_(this).m();for(var y=0,C=1,E=0;E<this.g.length;E++){var U=this.i(E);y+=(0<=U?U:4294967296+U)*C,C*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v(this))return"0";if(B(this))return"-"+_(this).toString(y);for(var C=c(Math.pow(y,6)),E=this,U="";;){var N=F(E,C).g;E=x(E,N.j(C));var L=((0<E.g.length?E.g[0]:E.h)>>>0).toString(y);if(E=N,v(E))return L+U;for(;6>L.length;)L="0"+L;U=L+U}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function v(y){if(y.h!=0)return!1;for(var C=0;C<y.g.length;C++)if(y.g[C]!=0)return!1;return!0}function B(y){return y.h==-1}t.l=function(y){return y=x(this,y),B(y)?-1:v(y)?0:1};function _(y){for(var C=y.g.length,E=[],U=0;U<C;U++)E[U]=~y.g[U];return new i(E,~y.h).add(f)}t.abs=function(){return B(this)?_(this):this},t.add=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],U=0,N=0;N<=C;N++){var L=U+(this.i(N)&65535)+(y.i(N)&65535),T=(L>>>16)+(this.i(N)>>>16)+(y.i(N)>>>16);U=T>>>16,L&=65535,T&=65535,E[N]=T<<16|L}return new i(E,E[E.length-1]&-2147483648?-1:0)};function x(y,C){return y.add(_(C))}t.j=function(y){if(v(this)||v(y))return h;if(B(this))return B(y)?_(this).j(_(y)):_(_(this).j(y));if(B(y))return _(this.j(_(y)));if(0>this.l(w)&&0>y.l(w))return c(this.m()*y.m());for(var C=this.g.length+y.g.length,E=[],U=0;U<2*C;U++)E[U]=0;for(U=0;U<this.g.length;U++)for(var N=0;N<y.g.length;N++){var L=this.i(U)>>>16,T=this.i(U)&65535,Le=y.i(N)>>>16,je=y.i(N)&65535;E[2*U+2*N]+=T*je,m(E,2*U+2*N),E[2*U+2*N+1]+=L*je,m(E,2*U+2*N+1),E[2*U+2*N+1]+=T*Le,m(E,2*U+2*N+1),E[2*U+2*N+2]+=L*Le,m(E,2*U+2*N+2)}for(U=0;U<C;U++)E[U]=E[2*U+1]<<16|E[2*U];for(U=C;U<2*C;U++)E[U]=0;return new i(E,0)};function m(y,C){for(;(y[C]&65535)!=y[C];)y[C+1]+=y[C]>>>16,y[C]&=65535,C++}function I(y,C){this.g=y,this.h=C}function F(y,C){if(v(C))throw Error("division by zero");if(v(y))return new I(h,h);if(B(y))return C=F(_(y),C),new I(_(C.g),_(C.h));if(B(C))return C=F(y,_(C)),new I(_(C.g),C.h);if(30<y.g.length){if(B(y)||B(C))throw Error("slowDivide_ only works with positive integers.");for(var E=f,U=C;0>=U.l(y);)E=R(E),U=R(U);var N=Q(E,1),L=Q(U,1);for(U=Q(U,2),E=Q(E,2);!v(U);){var T=L.add(U);0>=T.l(y)&&(N=N.add(E),L=T),U=Q(U,1),E=Q(E,1)}return C=x(y,N.j(C)),new I(N,C)}for(N=h;0<=y.l(C);){for(E=Math.max(1,Math.floor(y.m()/C.m())),U=Math.ceil(Math.log(E)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),L=c(E),T=L.j(C);B(T)||0<T.l(y);)E-=U,L=c(E),T=L.j(C);v(L)&&(L=f),N=N.add(L),y=x(y,T)}return new I(N,y)}t.A=function(y){return F(this,y).h},t.and=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],U=0;U<C;U++)E[U]=this.i(U)&y.i(U);return new i(E,this.h&y.h)},t.or=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],U=0;U<C;U++)E[U]=this.i(U)|y.i(U);return new i(E,this.h|y.h)},t.xor=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],U=0;U<C;U++)E[U]=this.i(U)^y.i(U);return new i(E,this.h^y.h)};function R(y){for(var C=y.g.length+1,E=[],U=0;U<C;U++)E[U]=y.i(U)<<1|y.i(U-1)>>>31;return new i(E,y.h)}function Q(y,C){var E=C>>5;C%=32;for(var U=y.g.length-E,N=[],L=0;L<U;L++)N[L]=0<C?y.i(L+E)>>>C|y.i(L+E+1)<<32-C:y.i(L+E);return new i(N,y.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,hb=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Fi=i}).apply(typeof Wy<"u"?Wy:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fb,Cl,gb,Sd,bm,pb,mb,wb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function A(u,g){if(g)e:{var p=n;u=u.split(".");for(var b=0;b<u.length-1;b++){var j=u[b];if(!(j in p))break e;p=p[j]}u=u[u.length-1],b=p[u],g=g(b),g!=b&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var p=0,b=!1,j={next:function(){if(!b&&p<u.length){var K=p++;return{value:g(K,u[K]),done:!1}}return b=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}A("Array.prototype.values",function(u){return u||function(){return s(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,b),u.apply(g,j)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function w(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function v(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(b,j,K){for(var ue=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)ue[xt-2]=arguments[xt];return g.prototype[j].apply(b,ue)}}function B(u){const g=u.length;if(0<g){const p=Array(g);for(let b=0;b<g;b++)p[b]=u[b];return p}return[]}function _(u,g){for(let p=1;p<arguments.length;p++){const b=arguments[p];if(o(b)){const j=u.length||0,K=b.length||0;u.length=j+K;for(let ue=0;ue<K;ue++)u[j+ue]=b[ue]}else u.push(b)}}class x{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function m(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var R=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function Q(u,g,p){for(const b in u)g.call(p,u[b],b,u)}function y(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function C(u){const g={};for(const p in u)g[p]=u[p];return g}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(u,g){let p,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(p in b)u[p]=b[p];for(let K=0;K<E.length;K++)p=E[K],Object.prototype.hasOwnProperty.call(b,p)&&(u[p]=b[p])}}function N(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function L(u){a.setTimeout(()=>{throw u},0)}function T(){var u=S;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Le{constructor(){this.h=this.g=null}add(g,p){const b=je.get();b.set(g,p),this.h?this.h.next=b:this.g=b,this.h=b}}var je=new x(()=>new rt,u=>u.reset());class rt{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,ie=!1,S=new Le,H=()=>{const u=a.Promise.resolve(void 0);Re=()=>{u.then(z)}};var z=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){L(p)}var g=je;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ie=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,g),a.removeEventListener("test",p,g)}catch{}return u}();function xe(u,g){if(le.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(R){e:{try{F(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ge[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}v(xe,le);var Ge={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),mt=0;function pe(u,g,p,b,j){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!b,this.ha=j,this.key=++mt,this.da=this.fa=!1}function Y(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ne(u){this.src=u,this.g={},this.h=0}Ne.prototype.add=function(u,g,p,b,j){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ue=Z(u,g,b,j);return-1<ue?(g=u[ue],p||(g.fa=!1)):(g=new pe(g,this.src,K,!!b,j),g.fa=p,u.push(g)),g};function ke(u,g){var p=g.type;if(p in u.g){var b=u.g[p],j=Array.prototype.indexOf.call(b,g,void 0),K;(K=0<=j)&&Array.prototype.splice.call(b,j,1),K&&(Y(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Z(u,g,p,b){for(var j=0;j<u.length;++j){var K=u[j];if(!K.da&&K.listener==g&&K.capture==!!p&&K.ha==b)return j}return-1}var oe="closure_lm_"+(1e6*Math.random()|0),de={};function Ie(u,g,p,b,j){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Ie(u,g[K],p,b,j);return null}return p=We(p),u&&u[Be]?u.K(g,p,c(b)?!!b.capture:!1,j):Te(u,g,p,!1,b,j)}function Te(u,g,p,b,j,K){if(!g)throw Error("Invalid event type");var ue=c(j)?!!j.capture:!!j,xt=De(u);if(xt||(u[oe]=xt=new Ne(u)),p=xt.add(g,p,b,ue,K),p.proxy)return p;if(b=Ke(),p.proxy=b,b.src=u,b.listener=p,u.addEventListener)Pe||(j=ue),j===void 0&&(j=!1),u.addEventListener(g.toString(),b,j);else if(u.attachEvent)u.attachEvent($e(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ke(){function u(p){return g.call(u.src,u.listener,p)}const g=Me;return u}function ze(u,g,p,b,j){if(Array.isArray(g))for(var K=0;K<g.length;K++)ze(u,g[K],p,b,j);else b=c(b)?!!b.capture:!!b,p=We(p),u&&u[Be]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],p=Z(K,p,b,j),-1<p&&(Y(K[p]),Array.prototype.splice.call(K,p,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=De(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Z(g,p,b,j)),(p=-1<u?g[u]:null)&&He(p))}function He(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Be])ke(g.i,u);else{var p=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(p,b,u.capture):g.detachEvent?g.detachEvent($e(p),b):g.addListener&&g.removeListener&&g.removeListener(b),(p=De(g))?(ke(p,u),p.h==0&&(p.src=null,g[oe]=null)):Y(u)}}}function $e(u){return u in de?de[u]:de[u]="on"+u}function Me(u,g){if(u.da)u=!0;else{g=new xe(g,this);var p=u.listener,b=u.ha||u.src;u.fa&&He(u),u=p.call(b,g)}return u}function De(u){return u=u[oe],u instanceof Ne?u:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function We(u){return typeof u=="function"?u:(u[Xe]||(u[Xe]=function(g){return u.handleEvent(g)}),u[Xe])}function Ye(){re.call(this),this.i=new Ne(this),this.M=this,this.F=null}v(Ye,re),Ye.prototype[Be]=!0,Ye.prototype.removeEventListener=function(u,g,p,b){ze(this,u,g,p,b)};function Ze(u,g){var p,b=u.F;if(b)for(p=[];b;b=b.F)p.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new le(g,u);else if(g instanceof le)g.target=g.target||u;else{var j=g;g=new le(b,u),U(g,j)}if(j=!0,p)for(var K=p.length-1;0<=K;K--){var ue=g.g=p[K];j=st(ue,b,!0,g)&&j}if(ue=g.g=u,j=st(ue,b,!0,g)&&j,j=st(ue,b,!1,g)&&j,p)for(K=0;K<p.length;K++)ue=g.g=p[K],j=st(ue,b,!1,g)&&j}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],b=0;b<p.length;b++)Y(p[b]);delete u.g[g],u.h--}}this.F=null},Ye.prototype.K=function(u,g,p,b){return this.i.add(String(u),g,!1,p,b)},Ye.prototype.L=function(u,g,p,b){return this.i.add(String(u),g,!0,p,b)};function st(u,g,p,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,K=0;K<g.length;++K){var ue=g[K];if(ue&&!ue.da&&ue.capture==p){var xt=ue.listener,yr=ue.ha||ue.src;ue.fa&&ke(u.i,ue),j=xt.call(yr,b)!==!1&&j}}return j&&!b.defaultPrevented}function tr(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function wt(u){u.g=tr(()=>{u.g=null,u.i&&(u.i=!1,wt(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Wt extends re{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:wt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function it(u){re.call(this),this.h=u,this.g={}}v(it,re);var Jr=[];function un(u){Q(u.g,function(g,p){this.g.hasOwnProperty(p)&&He(g)},u),u.g={}}it.prototype.N=function(){it.aa.N.call(this),un(this)},it.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xr=a.JSON.stringify,Nn=a.JSON.parse,D=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function $(){}$.prototype.h=null;function q(u){return u.h||(u.h=u.i())}function V(){}var we={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){le.call(this,"d")}v(ge,le);function ae(){le.call(this,"c")}v(ae,le);var be={},Fe=null;function Ue(){return Fe=Fe||new Ye}be.La="serverreachability";function P(u){le.call(this,be.La,u)}v(P,le);function G(u){const g=Ue();Ze(g,new P(g))}be.STAT_EVENT="statevent";function W(u,g){le.call(this,be.STAT_EVENT,u),this.stat=g}v(W,le);function X(u){const g=Ue();Ze(g,new W(g,u))}be.Ma="timingevent";function Ae(u,g){le.call(this,be.Ma,u),this.size=g}v(Ae,le);function ne(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Se(u,g,p,b,j,K){u.info(function(){if(u.g)if(K)for(var ue="",xt=K.split("&"),yr=0;yr<xt.length;yr++){var ht=xt[yr].split("=");if(1<ht.length){var Qr=ht[0];ht=ht[1];var Ur=Qr.split("_");ue=2<=Ur.length&&Ur[1]=="type"?ue+(Qr+"="+ht+"&"):ue+(Qr+"=redacted&")}}else ue=null;else ue=K;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+g+`
`+p+`
`+ue})}function qe(u,g,p,b,j,K,ue){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+g+`
`+p+`
`+K+" "+ue})}function nt(u,g,p,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+rr(u,p)+(b?" "+b:"")})}function et(u,g){u.info(function(){return"TIMEOUT: "+g})}Ee.prototype.info=function(){};function rr(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var b=p[u];if(!(2>b.length)){var j=b[1];if(Array.isArray(j)&&!(1>j.length)){var K=j[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ue=1;ue<j.length;ue++)j[ue]=""}}}}return Xr(p)}catch{return g}}var Br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bt;function Yr(){}v(Yr,$),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},bt=new Yr;function Vr(u,g,p,b){this.j=u,this.i=g,this.l=p,this.R=b||1,this.U=new it(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var Zr={},uA={};function Tt(u,g,p){u.L=1,u.v=pu(dA(g)),u.m=p,u.P=!0,Ka(u,null)}function Ka(u,g){u.F=Date.now(),hu(u),u.A=dA(u.v);var p=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),XB(p.i,"t",b),u.C=0,p=u.j.J,u.h=new oi,u.g=gv(u.j,p?g:null,!u.m),0<u.O&&(u.M=new Wt(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,b=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(Jr[0]=j.toString()),j=Jr);for(var K=0;K<j.length;K++){var ue=Ie(p,j[K],b||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),G(),Se(u.i,u.u,u.A,u.l,u.R,u.m)}Vr.prototype.ca=function(u){u=u.target;const g=this.M;g&&hA(u)==3?g.j():this.Y(u)},Vr.prototype.Y=function(u){try{if(u==this.g)e:{const Ur=hA(this.g);var g=this.g.Ba();const so=this.g.Z();if(!(3>Ur)&&(Ur!=3||this.g&&(this.h.h||this.g.oa()||Av(this.g)))){this.J||Ur!=4||g==7||(g==8||0>=so?G(3):G(2)),og(this);var p=this.g.Z();this.X=p;t:if(ur(this)){var b=Av(this.g);u="";var j=b.length,K=hA(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),Ga(this);var ue="";break t}this.h.i=new a.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,u+=this.h.i.decode(b[g],{stream:!(K&&g==j-1)});b.length=0,this.h.g+=u,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=p==200,qe(this.i,this.u,this.A,this.l,this.R,Ur,p),this.o){if(this.T&&!this.K){t:{if(this.g){var xt,yr=this.g;if((xt=yr.g?yr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(xt)){var ht=xt;break t}}ht=null}if(p=ht)nt(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ag(this,p);else{this.o=!1,this.s=3,X(12),ai(this),Ga(this);break e}}if(this.P){p=!0;let Dn;for(;!this.J&&this.C<ue.length;)if(Dn=HQ(this,ue),Dn==uA){Ur==4&&(this.s=4,X(14),p=!1),nt(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Zr){this.s=4,X(15),nt(this.i,this.l,ue,"[Invalid Chunk]"),p=!1;break}else nt(this.i,this.l,Dn,null),ag(this,Dn);if(ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ur!=4||ue.length!=0||this.h.h||(this.s=1,X(16),p=!1),this.o=this.o&&p,!p)nt(this.i,this.l,ue,"[Invalid Chunked Response]"),ai(this),Ga(this);else if(0<ue.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),fg(Qr),Qr.M=!0,X(11))}}else nt(this.i,this.l,ue,null),ag(this,ue);Ur==4&&ai(this),this.o&&!this.J&&(Ur==4?uv(this.j,this):(this.o=!1,hu(this)))}else sU(this.g),p==400&&0<ue.indexOf("Unknown SID")?(this.s=3,X(12)):(this.s=0,X(13)),ai(this),Ga(this)}}}catch{}finally{}};function ur(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function HQ(u,g){var p=u.C,b=g.indexOf(`
`,p);return b==-1?uA:(p=Number(g.substring(p,b)),isNaN(p)?Zr:(b+=1,b+p>g.length?uA:(g=g.slice(b,b+p),u.C=b+p,g)))}Vr.prototype.cancel=function(){this.J=!0,ai(this)};function hu(u){u.S=Date.now()+u.I,MB(u,u.I)}function MB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ne(f(u.ba,u),g)}function og(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Vr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(et(this.i,this.A),this.L!=2&&(G(),X(17)),ai(this),this.s=2,Ga(this)):MB(this,this.S-u)};function Ga(u){u.j.G==0||u.J||uv(u.j,u)}function ai(u){og(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,un(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function ag(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||lg(p.h,u))){if(!u.K&&lg(p.h,u)&&p.G==3){try{var b=p.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)xu(p),vu(p);else break e;hg(p),X(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=ne(f(p.Za,p),6e3));if(1>=HB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ci(p,11)}else if((u.K||p.g==u)&&xu(p),!m(g))for(j=p.Da.g.parse(g),g=0;g<j.length;g++){let ht=j[g];if(p.T=ht[0],ht=ht[1],p.G==2)if(ht[0]=="c"){p.K=ht[1],p.ia=ht[2];const Qr=ht[3];Qr!=null&&(p.la=Qr,p.j.info("VER="+p.la));const Ur=ht[4];Ur!=null&&(p.Aa=Ur,p.j.info("SVER="+p.Aa));const so=ht[5];so!=null&&typeof so=="number"&&0<so&&(b=1.5*so,p.L=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const Dn=u.g;if(Dn){const Iu=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iu){var K=b.h;K.g||Iu.indexOf("spdy")==-1&&Iu.indexOf("quic")==-1&&Iu.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(cg(K,K.h),K.h=null))}if(b.D){const gg=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;gg&&(b.ya=gg,Ft(b.I,b.D,gg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),b=p;var ue=u;if(b.qa=fv(b,b.J?b.ia:null,b.W),ue.K){VB(b.h,ue);var xt=ue,yr=b.L;yr&&(xt.I=yr),xt.B&&(og(xt),hu(xt)),b.g=ue}else lv(b);0<p.i.length&&yu(p)}else ht[0]!="stop"&&ht[0]!="close"||ci(p,7);else p.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?ci(p,7):dg(p):ht[0]!="noop"&&p.l&&p.l.ta(ht),p.v=0)}}G(4)}catch{}}var VQ=class{constructor(u,g){this.g=u,this.map=g}};function jB(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function HB(u){return u.h?1:u.g?u.g.size:0}function lg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function cg(u,g){u.g?u.g.add(g):u.h=g}function VB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}jB.prototype.cancel=function(){if(this.i=KB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function KB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return B(u.i)}function KQ(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(o(u)){for(var g=[],p=u.length,b=0;b<p;b++)g.push(u[b]);return g}g=[],p=0;for(b in u)g[p++]=u[b];return g}function GQ(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(o(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const b in u)g[p++]=b;return g}}}function GB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(o(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=GQ(u),b=KQ(u),j=b.length,K=0;K<j;K++)g.call(void 0,b[K],p&&p[K],u)}var zB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zQ(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var b=u[p].indexOf("="),j=null;if(0<=b){var K=u[p].substring(0,b);j=u[p].substring(b+1)}else K=u[p];g(K,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function li(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof li){this.h=u.h,fu(this,u.j),this.o=u.o,this.g=u.g,gu(this,u.s),this.l=u.l;var g=u.i,p=new Wa;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),$B(this,p),this.m=u.m}else u&&(g=String(u).match(zB))?(this.h=!1,fu(this,g[1]||"",!0),this.o=za(g[2]||""),this.g=za(g[3]||"",!0),gu(this,g[4]),this.l=za(g[5]||"",!0),$B(this,g[6]||"",!0),this.m=za(g[7]||"")):(this.h=!1,this.i=new Wa(null,this.h))}li.prototype.toString=function(){var u=[],g=this.j;g&&u.push($a(g,WB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push($a(g,WB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push($a(p,p.charAt(0)=="/"?qQ:WQ,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",$a(p,XQ)),u.join("")};function dA(u){return new li(u)}function fu(u,g,p){u.j=p?za(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function gu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function $B(u,g,p){g instanceof Wa?(u.i=g,YQ(u.i,u.h)):(p||(g=$a(g,JQ)),u.i=new Wa(g,u.h))}function Ft(u,g,p){u.i.set(g,p)}function pu(u){return Ft(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function za(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $a(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,$Q),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function $Q(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var WB=/[#\/\?@]/g,WQ=/[#\?:]/g,qQ=/[#\?]/g,JQ=/[#\?@]/g,XQ=/#/g;function Wa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function zA(u){u.g||(u.g=new Map,u.h=0,u.i&&zQ(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=Wa.prototype,t.add=function(u,g){zA(this),this.i=null,u=no(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function qB(u,g){zA(u),g=no(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function JB(u,g){return zA(u),g=no(u,g),u.g.has(g)}t.forEach=function(u,g){zA(this),this.g.forEach(function(p,b){p.forEach(function(j){u.call(g,j,b,this)},this)},this)},t.na=function(){zA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let b=0;b<g.length;b++){const j=u[b];for(let K=0;K<j.length;K++)p.push(g[b])}return p},t.V=function(u){zA(this);let g=[];if(typeof u=="string")JB(this,u)&&(g=g.concat(this.g.get(no(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return zA(this),this.i=null,u=no(this,u),JB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function XB(u,g,p){qB(u,g),0<p.length&&(u.i=null,u.g.set(no(u,g),B(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var b=g[p];const K=encodeURIComponent(String(b)),ue=this.V(b);for(b=0;b<ue.length;b++){var j=K;ue[b]!==""&&(j+="="+encodeURIComponent(String(ue[b]))),u.push(j)}}return this.i=u.join("&")};function no(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function YQ(u,g){g&&!u.j&&(zA(u),u.i=null,u.g.forEach(function(p,b){var j=b.toLowerCase();b!=j&&(qB(this,b),XB(this,j,p))},u)),u.j=g}function ZQ(u,g){const p=new Ee;if(a.Image){const b=new Image;b.onload=w($A,p,"TestLoadImage: loaded",!0,g,b),b.onerror=w($A,p,"TestLoadImage: error",!1,g,b),b.onabort=w($A,p,"TestLoadImage: abort",!1,g,b),b.ontimeout=w($A,p,"TestLoadImage: timeout",!1,g,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function eU(u,g){const p=new Ee,b=new AbortController,j=setTimeout(()=>{b.abort(),$A(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(K=>{clearTimeout(j),K.ok?$A(p,"TestPingServer: ok",!0,g):$A(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),$A(p,"TestPingServer: error",!1,g)})}function $A(u,g,p,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(p)}catch{}}function tU(){this.g=new D}function rU(u,g,p){const b=p||"";try{GB(u,function(j,K){let ue=j;c(j)&&(ue=Xr(j)),g.push(b+K+"="+encodeURIComponent(ue))})}catch(j){throw g.push(b+"type="+encodeURIComponent("_badmap")),j}}function mu(u){this.l=u.Ub||null,this.j=u.eb||!1}v(mu,$),mu.prototype.g=function(){return new wu(this.l,this.j)},mu.prototype.i=function(u){return function(){return u}}({});function wu(u,g){Ye.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(wu,Ye),t=wu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Ja(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;YB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function YB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?qa(this):Ja(this),this.readyState==3&&YB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qa(this))},t.Qa=function(u){this.g&&(this.response=u,qa(this))},t.ga=function(){this.g&&qa(this)};function qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ja(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function Ja(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ZB(u){let g="";return Q(u,function(p,b){g+=b,g+=":",g+=p,g+=`\r
`}),g}function ug(u,g,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=ZB(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ft(u,g,p))}function Gt(u){Ye.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Gt,Ye);var nU=/^https?$/i,AU=["POST","PUT"];t=Gt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bt.g(),this.v=this.o?q(this.o):q(bt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){ev(this,K);return}if(u=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)p.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())p.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(K=>K.toLowerCase()=="content-type"),j=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(AU,g,void 0))||b||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of p)this.g.setRequestHeader(K,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nv(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){ev(this,K)}};function ev(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,tv(u),Bu(u)}function tv(u){u.A||(u.A=!0,Ze(u,"complete"),Ze(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ze(this,"complete"),Ze(this,"abort"),Bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bu(this,!0)),Gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rv(this):this.bb())},t.bb=function(){rv(this)};function rv(u){if(u.h&&typeof i<"u"&&(!u.v[1]||hA(u)!=4||u.Z()!=2)){if(u.u&&hA(u)==4)tr(u.Ea,0,u);else if(Ze(u,"readystatechange"),hA(u)==4){u.h=!1;try{const ue=u.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var b;if(b=ue===0){var j=String(u.D).match(zB)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),b=!nU.test(j?j.toLowerCase():"")}p=b}if(p)Ze(u,"complete"),Ze(u,"success");else{u.m=6;try{var K=2<hA(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",tv(u)}}finally{Bu(u)}}}}function Bu(u,g){if(u.g){nv(u);const p=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||Ze(u,"ready");try{p.onreadystatechange=b}catch{}}}function nv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function hA(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<hA(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Nn(g)}};function Av(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function sU(u){const g={};u=(u.g&&2<=hA(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(m(u[b]))continue;var p=N(u[b]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const K=g[j]||[];g[j]=K,K.push(p)}y(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function sv(u){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,u),this.cb=Xa("retryDelaySeedMs",1e4,u),this.Wa=Xa("forwardChannelMaxRetries",2,u),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new jB(u&&u.concurrentRequestLimit),this.Da=new tU,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sv.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,b){X(0),this.W=u,this.H=g||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.I=fv(this,null,this.W),yu(this)};function dg(u){if(iv(u),u.G==3){var g=u.U++,p=dA(u.I);if(Ft(p,"SID",u.K),Ft(p,"RID",g),Ft(p,"TYPE","terminate"),Ya(u,p),g=new Vr(u,u.j,g),g.L=2,g.v=pu(dA(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=g.v,p=!0),p||(g.g=gv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),hu(g)}hv(u)}function vu(u){u.g&&(fg(u),u.g.cancel(),u.g=null)}function iv(u){vu(u),u.u&&(a.clearTimeout(u.u),u.u=null),xu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function yu(u){if(!OB(u.h)&&!u.s){u.s=!0;var g=u.Ga;Re||H(),ie||(Re(),ie=!0),S.add(g,u),u.B=0}}function iU(u,g){return HB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ne(f(u.Ga,u,g),dv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Vr(this,this.j,u);let K=this.o;if(this.S&&(K?(K=C(K),U(K,this.S)):K=this.S),this.m!==null||this.O||(j.H=K,K=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=av(this,j,g),p=dA(this.I),Ft(p,"RID",u),Ft(p,"CVER",22),this.D&&Ft(p,"X-HTTP-Session-Id",this.D),Ya(this,p),K&&(this.O?g="headers="+encodeURIComponent(String(ZB(K)))+"&"+g:this.m&&ug(p,this.m,K)),cg(this.h,j),this.Ua&&Ft(p,"TYPE","init"),this.P?(Ft(p,"$req",g),Ft(p,"SID","null"),j.T=!0,Tt(j,p,null)):Tt(j,p,g),this.G=2}}else this.G==3&&(u?ov(this,u):this.i.length==0||OB(this.h)||ov(this))};function ov(u,g){var p;g?p=g.l:p=u.U++;const b=dA(u.I);Ft(b,"SID",u.K),Ft(b,"RID",p),Ft(b,"AID",u.T),Ya(u,b),u.m&&u.o&&ug(b,u.m,u.o),p=new Vr(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=av(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),cg(u.h,p),Tt(p,b,g)}function Ya(u,g){u.H&&Q(u.H,function(p,b){Ft(g,b,p)}),u.l&&GB({},function(p,b){Ft(g,b,p)})}function av(u,g,p){p=Math.min(u.i.length,p);var b=u.l?f(u.l.Na,u.l,u):null;e:{var j=u.i;let K=-1;for(;;){const ue=["count="+p];K==-1?0<p?(K=j[0].g,ue.push("ofs="+K)):K=0:ue.push("ofs="+K);let xt=!0;for(let yr=0;yr<p;yr++){let ht=j[yr].g;const Qr=j[yr].map;if(ht-=K,0>ht)K=Math.max(0,j[yr].g-100),xt=!1;else try{rU(Qr,ue,"req"+ht+"_")}catch{b&&b(Qr)}}if(xt){b=ue.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,b}function lv(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Re||H(),ie||(Re(),ie=!0),S.add(g,u),u.v=0}}function hg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ne(f(u.Fa,u),dv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,cv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ne(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,X(10),vu(this),cv(this))};function fg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function cv(u){u.g=new Vr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=dA(u.qa);Ft(g,"RID","rpc"),Ft(g,"SID",u.K),Ft(g,"AID",u.T),Ft(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ft(g,"TO",u.ja),Ft(g,"TYPE","xmlhttp"),Ya(u,g),u.m&&u.o&&ug(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=pu(dA(g)),p.m=null,p.P=!0,Ka(p,u)}t.Za=function(){this.C!=null&&(this.C=null,vu(this),hg(this),X(19))};function xu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function uv(u,g){var p=null;if(u.g==g){xu(u),fg(u),u.g=null;var b=2}else if(lg(u.h,g))p=g.D,VB(u.h,g),b=1;else return;if(u.G!=0){if(g.o)if(b==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var j=u.B;b=Ue(),Ze(b,new Ae(b,p)),yu(u)}else lv(u);else if(j=g.s,j==3||j==0&&0<g.X||!(b==1&&iU(u,g)||b==2&&hg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),j){case 1:ci(u,5);break;case 4:ci(u,10);break;case 3:ci(u,6);break;default:ci(u,2)}}}function dv(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function ci(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),b=u.Xa;const j=!b;b=new li(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fu(b,"https"),pu(b),j?ZQ(b.toString(),p):eU(b.toString(),p)}else X(2);u.G=0,u.l&&u.l.sa(g),hv(u),iv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),X(2)):(this.j.info("Failed to ping google.com"),X(1))};function hv(u){if(u.G=0,u.ka=[],u.l){const g=KB(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function fv(u,g,p){var b=p instanceof li?dA(p):new li(p);if(b.g!="")g&&(b.g=g+"."+b.g),gu(b,b.s);else{var j=a.location;b=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var K=new li(null);b&&fu(K,b),g&&(K.g=g),j&&gu(K,j),p&&(K.l=p),b=K}return p=u.D,g=u.ya,p&&g&&Ft(b,p,g),Ft(b,"VER",u.la),Ya(u,b),b}function gv(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Gt(new mu({eb:p})):new Gt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pv(){}t=pv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cu(){}Cu.prototype.g=function(u,g){return new dn(u,g)};function dn(u,g){Ye.call(this),this.g=new sv(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!m(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!m(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ao(this)}v(dn,Ye),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){dg(this.g)},dn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Xr(u),u=p);g.i.push(new VQ(g.Ya++,u)),g.G==3&&yu(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,dg(this.g),delete this.g,dn.aa.N.call(this)};function mv(u){ge.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}v(mv,ge);function wv(){ae.call(this),this.status=1}v(wv,ae);function Ao(u){this.g=u}v(Ao,pv),Ao.prototype.ua=function(){Ze(this.g,"a")},Ao.prototype.ta=function(u){Ze(this.g,new mv(u))},Ao.prototype.sa=function(u){Ze(this.g,new wv)},Ao.prototype.ra=function(){Ze(this.g,"b")},Cu.prototype.createWebChannel=Cu.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,wb=function(){return new Cu},mb=function(){return Ue()},pb=be,bm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,Sd=Br,vr.COMPLETE="complete",gb=vr,V.EventType=we,we.OPEN="a",we.CLOSE="b",we.ERROR="c",we.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Cl=V,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,fb=Gt}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const qy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new ww("@firebase/firestore");function wo(){return Ms.logLevel}function FN(t){Ms.setLogLevel(t)}function te(t,...e){if(Ms.logLevel<=at.DEBUG){const r=e.map(yw);Ms.debug(`Firestore (${ba}): ${t}`,...r)}}function Zt(t,...e){if(Ms.logLevel<=at.ERROR){const r=e.map(yw);Ms.error(`Firestore (${ba}): ${t}`,...r)}}function yn(t,...e){if(Ms.logLevel<=at.WARN){const r=e.map(yw);Ms.warn(`Firestore (${ba}): ${t}`,...r)}}function yw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw Zt(e),new Error(e)}function _e(t,e){t||ye()}function QN(t,e){t||ye()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends jA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(gr.UNAUTHENTICATED))}shutdown(){}}class UN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class SN{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){_e(this.o===void 0);let n=this.i;const A=o=>this.i!==n?(n=this.i,r(o)):Promise.resolve();let s=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mr,e.enqueueRetryable(()=>A(this.currentUser))};const i=()=>{const o=s;e.enqueueRetryable(async()=>{await o.promise,await A(this.currentUser)})},a=o=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_e(typeof n.accessToken=="string"),new Bb(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new gr(e)}}class kN{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RN{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new kN(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){_e(this.o===void 0);const n=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const A=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>A(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?A(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(_e(typeof r.token=="string"),this.R=r.token,new yb(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class DN{getToken(){return Promise.resolve(new yb(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const A=PN(40);for(let s=0;s<A.length;++s)n.length<20&&A[s]<r&&(n+=e.charAt(A[s]%e.length))}return n}}function Ve(t,e){return t<e?-1:t>e?1:0}function sa(t,e,r){return t.length===e.length&&t.every((n,A)=>r(n,e[A]))}function xb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ee(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ee(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new ee(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Lt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Lt(0,0))}static max(){return new Qe(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,r,n){r===void 0?r=0:r>e.length&&ye(),n===void 0?n=e.length-r:n>e.length-r&&ye(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Cc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Cc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let A=0;A<n;A++){const s=e.get(A),i=r.get(A);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class lt extends Cc{construct(e,r,n){return new lt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new ee(O.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(A=>A.length>0))}return new lt(r)}static emptyPath(){return new lt([])}}const LN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends Cc{construct(e,r,n){return new St(e,r,n)}static isValidIdentifier(e){return LN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const r=[];let n="",A=0;const s=()=>{if(n.length===0)throw new ee(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;A<e.length;){const a=e[A];if(a==="\\"){if(A+1===e.length)throw new ee(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[A+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new ee(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=o,A+=2}else a==="`"?(i=!i,A++):a!=="."||i?(n+=a,A++):(s(),A++)}if(s(),i)throw new ee(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(r)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(lt.fromString(e))}static fromName(e){return new fe(lt.fromString(e).popFirst(5))}static empty(){return new fe(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return lt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new lt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,r,n,A){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=A}}function Tm(t){return t.fields.find(e=>e.kind===2)}function mi(t){return t.fields.filter(e=>e.kind!==2)}function MN(t,e){let r=Ve(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=jN(t.fields[n],e.fields[n]),r!==0)return r;return Ve(t.fields.length,e.fields.length)}ia.UNKNOWN_ID=-1;class Qi{constructor(e,r){this.fieldPath=e,this.kind=r}}function jN(t,e){const r=St.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Ve(t.kind,e.kind)}class oa{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new oa(0,xn.min())}}function Cb(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,A=Qe.fromTimestamp(n===1e9?new Lt(r+1,0):new Lt(r,n));return new xn(A,fe.empty(),e)}function Ib(t){return new xn(t.readTime,t.key,-1)}class xn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new xn(Qe.min(),fe.empty(),-1)}static max(){return new xn(Qe.max(),fe.empty(),-1)}}function Cw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=fe.comparator(t.documentKey,e.documentKey),r!==0?r:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _b{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==Eb)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new M((n,A)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,A)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,A)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof M?r:M.resolve(r)}catch(r){return M.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):M.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):M.reject(r)}static resolve(e){return new M((r,n)=>{r(e)})}static reject(e){return new M((r,n)=>{n(e)})}static waitFor(e){return new M((r,n)=>{let A=0,s=0,i=!1;e.forEach(a=>{++A,a.next(()=>{++s,i&&s===A&&r()},o=>n(o))}),i=!0,s===A&&r()})}static or(e){let r=M.resolve(!1);for(const n of e)r=r.next(A=>A?M.resolve(A):n());return r}static forEach(e,r){const n=[];return e.forEach((A,s)=>{n.push(r.call(this,A,s))}),this.waitFor(n)}static mapArray(e,r){return new M((n,A)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const c=o;r(e[c]).next(d=>{i[c]=d,++a,a===s&&n(i)},d=>A(d))}})}static doWhile(e,r){return new M((n,A)=>{const s=()=>{e()===!0?r().next(()=>{s()},A):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Kl(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const A=Iw(n.target.error);this.V.reject(new Kl(e,A))}}static open(e,r,n,A){try{return new Cf(r,e.transaction(A,n))}catch(s){throw new Kl(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new HN(r)}}class AA{constructor(e,r,n){this.name=e,this.version=r,this.p=n,AA.S(lr())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ob())return!1;if(AA.v())return!0;const e=lr(),r=AA.S(e),n=0<r&&r<10,A=bb(e),s=0<A&&A<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const A=indexedDB.open(this.name,this.version);A.onsuccess=s=>{const i=s.target.result;r(i)},A.onblocked=()=>{n(new Kl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new ee(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new ee(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Kl(e,i))},A.onupgradeneeded=s=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,A.transaction,s.oldVersion,this.version).next(()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,A){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const a=Cf.open(this.db,e,s?"readonly":"readwrite",n),o=A(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return o.catch(()=>{}),await a.m,o}catch(a){const o=a,c=o.name!=="FirebaseError"&&i<3;if(te("SimpleDb","Transaction failed with error:",o.message,"Retrying:",c),this.close(),!c)return Promise.reject(o)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bb(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class ON{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wi(this.B.delete())}}class Kl extends ee{constructor(e,r){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ei(t){return t.name==="IndexedDbTransactionError"}class HN{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(te("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wi(n)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),wi(this.store.add(e))}get(e){return wi(this.store.get(e)).next(r=>(r===void 0&&(r=null),te("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),wi(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),wi(this.store.count())}U(e,r){const n=this.options(e,r),A=n.index?this.store.index(n.index):this.store;if(typeof A.getAll=="function"){const s=A.getAll(n.range);return new M((i,a)=>{s.onerror=o=>{a(o.target.error)},s.onsuccess=o=>{i(o.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(a,o)=>{i.push(o)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new M((A,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{A(i.target.result)}})}j(e,r){te("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const A=this.cursor(n);return this.W(A,(s,i,a)=>a.delete())}J(e,r){let n;r?n=e:(n={},r=e);const A=this.cursor(n);return this.W(A,r)}Y(e){const r=this.cursor({});return new M((n,A)=>{r.onerror=s=>{const i=Iw(s.target.error);A(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():n()}):n()}})}W(e,r){const n=[];return new M((A,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void A();const o=new ON(a),c=r(a.primaryKey,a.value,o);if(c instanceof M){const d=c.catch(h=>(o.done(),M.reject(h)));n.push(d)}o.isDone?A():o.K===null?a.continue():a.continue(o.K)}}).next(()=>M.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function wi(t){return new M((e,r)=>{t.onsuccess=n=>{const A=n.target.result;e(A)},t.onerror=n=>{const A=Iw(n.target.error);r(A)}})}let Jy=!1;function Iw(t){const e=AA.S(lr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jy||(Jy=!0,setTimeout(()=>{throw n},0)),n}}return t}class VN{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){te("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{te("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ei(r)?te("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Zs(r)}await this.X(6e4)})}}class KN{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let A=r,s=!0;return M.doWhile(()=>s===!0&&A>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return te("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,A).next(a=>{A-=a,n.add(i)});s=!1})).next(()=>r-A)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(A=>this.localStore.localDocuments.getNextDocuments(e,r,A,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(A,s)).next(a=>(te("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,r,a))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((A,s)=>{const i=Ib(s);Cw(i,n)>0&&(n=i)}),new xn(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}An.oe=-1;function $c(t){return t==null}function Ic(t){return t===0&&1/t==-1/0}function Tb(t){return typeof t=="number"&&Number.isInteger(t)&&!Ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Xy(e)),e=GN(t.get(r),e);return Xy(e)}function GN(t,e){let r=e;const n=t.length;for(let A=0;A<n;A++){const s=t.charAt(A);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function Xy(t){return t+""}function eA(t){const e=t.length;if(_e(e>=2),e===2)return _e(t.charAt(0)===""&&t.charAt(1)===""),lt.emptyPath();const r=e-2,n=[];let A="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&ye(),t.charAt(i+1)){case"":const a=t.substring(s,i);let o;A.length===0?o=a:(A+=a,o=A,A=""),n.push(o);break;case"":A+=t.substring(s,i),A+="\0";break;case"":A+=t.substring(s,i+1);break;default:ye()}s=i+2}return new lt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e){return[t,jr(e)]}function Fb(t,e,r){return[t,jr(e),r]}const zN={},$N=["prefixPath","collectionGroup","readTime","documentId"],WN=["prefixPath","collectionGroup","documentId"],qN=["collectionGroup","readTime","prefixPath","documentId"],JN=["canonicalId","targetId"],XN=["targetId","path"],YN=["path","targetId"],ZN=["collectionId","parent"],e4=["indexId","uid"],t4=["uid","sequenceNumber"],r4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n4=["indexId","uid","orderedDocumentKey"],A4=["userId","collectionPath","documentId"],s4=["userId","collectionPath","largestBatchId"],i4=["userId","collectionGroup","largestBatchId"],Qb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o4=[...Qb,"documentOverlays"],Ub=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sb=Ub,Ew=[...Sb,"indexConfiguration","indexState","indexEntries"],a4=Ew,l4=[...Ew,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends _b{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function cr(t,e){const r=ce(t);return AA.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ti(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function kb(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function Rb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,r){this.comparator=e,this.root=r||Er.EMPTY}insert(e,r){return new _t(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const A=this.comparator(e,n.key);if(A===0)return r+n.left.size;A<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vu(this.root,e,this.comparator,!0)}}class Vu{constructor(e,r,n,A){this.isReverse=A,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&A&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,r,n,A,s){this.key=e,this.value=r,this.color=n??Er.RED,this.left=A??Er.EMPTY,this.right=s??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,A,s){return new Er(e??this.key,r??this.value,n??this.color,A??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let A=this;const s=n(e,A.key);return A=s<0?A.copy(null,null,null,A.left.insert(e,r,n),null):s===0?A.copy(null,r,null,null,null):A.copy(null,null,null,null,A.right.insert(e,r,n)),A.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,A=this;if(r(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,r),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),r(e,A.key)===0){if(A.right.isEmpty())return Er.EMPTY;n=A.right.min(),A=A.copy(n.key,n.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,r))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1;Er.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,r,n,A,s){return this}insert(e,r,n){return new Er(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const A=n.getNext();if(this.comparator(A.key,e[1])>=0)return;r(A.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new ex(this.data.getIterator())}getIteratorFrom(e){return new ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const A=r.getNext().key,s=n.getNext().key;if(this.comparator(A,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new vt(this.comparator);return r.data=e,r}}class ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function oo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new sn([])}unionWith(e){let r=new vt(St.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new sn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(A){try{return atob(A)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nb("Invalid base64 string: "+s):s}}(e);return new Kt(r)}static fromUint8Array(e){const r=function(A){let s="";for(let i=0;i<A.length;++i)s+=String.fromCharCode(A[i]);return s}(e);return new Kt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let A=0;A<r.length;A++)n[A]=r.charCodeAt(A);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const u4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kA(t){if(_e(!!t),typeof t=="string"){let e=0;const r=u4.exec(t);if(_e(!!r),r[1]){let A=r[1];A=(A+"000000000").substr(0,9),e=Number(A)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function RA(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ef(t){const e=t.mapValue.fields.__previous_value__;return If(e)?Ef(e):e}function Ec(t){const e=kA(t.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,r,n,A,s,i,a,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=A,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class js{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new js("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof js&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rd={nullValue:"NULL_VALUE"};function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?If(t)?4:Db(t)?9007199254740991:_f(t)?10:11:ye()}function aA(t,e){if(t===e)return!0;const r=Os(t);if(r!==Os(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ec(t).isEqual(Ec(e));case 3:return function(A,s){if(typeof A.timestampValue=="string"&&typeof s.timestampValue=="string"&&A.timestampValue.length===s.timestampValue.length)return A.timestampValue===s.timestampValue;const i=kA(A.timestampValue),a=kA(s.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(A,s){return RA(A.bytesValue).isEqual(RA(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(A,s){return Nt(A.geoPointValue.latitude)===Nt(s.geoPointValue.latitude)&&Nt(A.geoPointValue.longitude)===Nt(s.geoPointValue.longitude)}(t,e);case 2:return function(A,s){if("integerValue"in A&&"integerValue"in s)return Nt(A.integerValue)===Nt(s.integerValue);if("doubleValue"in A&&"doubleValue"in s){const i=Nt(A.doubleValue),a=Nt(s.doubleValue);return i===a?Ic(i)===Ic(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return sa(t.arrayValue.values||[],e.arrayValue.values||[],aA);case 10:case 11:return function(A,s){const i=A.mapValue.fields||{},a=s.mapValue.fields||{};if(Zy(i)!==Zy(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!aA(i[o],a[o])))return!1;return!0}(t,e);default:return ye()}}function _c(t,e){return(t.values||[]).find(r=>aA(r,e))!==void 0}function Hs(t,e){if(t===e)return 0;const r=Os(t),n=Os(e);if(r!==n)return Ve(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(s,i){const a=Nt(s.integerValue||s.doubleValue),o=Nt(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return tx(t.timestampValue,e.timestampValue);case 4:return tx(Ec(t),Ec(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(s,i){const a=RA(s),o=RA(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const a=s.split("/"),o=i.split("/");for(let c=0;c<a.length&&c<o.length;c++){const d=Ve(a[c],o[c]);if(d!==0)return d}return Ve(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const a=Ve(Nt(s.latitude),Nt(i.latitude));return a!==0?a:Ve(Nt(s.longitude),Nt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rx(t.arrayValue,e.arrayValue);case 10:return function(s,i){var a,o,c,d;const h=s.fields||{},f=i.fields||{},w=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=(o=f.value)===null||o===void 0?void 0:o.arrayValue,B=Ve(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return B!==0?B:rx(w,v)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===ps.mapValue&&i===ps.mapValue)return 0;if(s===ps.mapValue)return 1;if(i===ps.mapValue)return-1;const a=s.fields||{},o=Object.keys(a),c=i.fields||{},d=Object.keys(c);o.sort(),d.sort();for(let h=0;h<o.length&&h<d.length;++h){const f=Ve(o[h],d[h]);if(f!==0)return f;const w=Hs(a[o[h]],c[d[h]]);if(w!==0)return w}return Ve(o.length,d.length)}(t.mapValue,e.mapValue);default:throw ye()}}function tx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const r=kA(t),n=kA(e),A=Ve(r.seconds,n.seconds);return A!==0?A:Ve(r.nanos,n.nanos)}function rx(t,e){const r=t.values||[],n=e.values||[];for(let A=0;A<r.length&&A<n.length;++A){const s=Hs(r[A],n[A]);if(s)return s}return Ve(r.length,n.length)}function aa(t){return Qm(t)}function Qm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=kA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return RA(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return fe.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",A=!0;for(const s of r.values||[])A?A=!1:n+=",",n+=Qm(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let A="{",s=!0;for(const i of n)s?s=!1:A+=",",A+=`${i}:${Qm(r.fields[i])}`;return A+"}"}(t.mapValue):ye()}function Nd(t){switch(Os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ef(t);return e?16+Nd(e):16;case 5:return 2*t.stringValue.length;case 6:return RA(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((A,s)=>A+Nd(s),0)}(t.arrayValue);case 10:case 11:return function(n){let A=0;return ti(n.fields,(s,i)=>{A+=s.length+Nd(i)}),A}(t.mapValue);default:throw ye()}}function Mi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Um(t){return!!t&&"integerValue"in t}function bc(t){return!!t&&"arrayValue"in t}function nx(t){return!!t&&"nullValue"in t}function Ax(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dd(t){return!!t&&"mapValue"in t}function _f(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Gl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ti(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Gl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Gl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Db(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Pb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function h4(t){return"nullValue"in t?Rd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Mi(js.empty(),fe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?_f(t)?Pb:{mapValue:{}}:ye()}function f4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Mi(js.empty(),fe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Pb:"mapValue"in t?_f(t)?{mapValue:{}}:ps:ye()}function sx(t,e){const r=Hs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ix(t,e){const r=Hs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Dd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(r)}setAll(e){let r=St.emptyPath(),n={},A=[];e.forEach((i,a)=>{if(!r.isImmediateParentOf(a)){const o=this.getFieldsMap(r);this.applyChanges(o,n,A),n={},A=[],r=a.popLast()}i?n[a.lastSegment()]=Gl(i):A.push(a.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,A)}delete(e){const r=this.field(e.popLast());Dd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return aA(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let A=r.mapValue.fields[e.get(n)];Dd(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=A),r=A}return r.mapValue.fields}applyChanges(e,r,n){ti(r,(A,s)=>e[A]=s);for(const A of n)delete e[A]}clone(){return new _r(Gl(this.value))}}function Lb(t){const e=[];return ti(t.fields,(r,n)=>{const A=new St([r]);if(Dd(n)){const s=Lb(n.mapValue).fields;if(s.length===0)e.push(A);else for(const i of s)e.push(A.child(i))}else e.push(A)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,r,n,A,s,i,a){this.key=e,this.documentType=r,this.version=n,this.readTime=A,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Ut(e,0,Qe.min(),Qe.min(),Qe.min(),_r.empty(),0)}static newFoundDocument(e,r,n,A){return new Ut(e,1,r,Qe.min(),n,A,0)}static newNoDocument(e,r){return new Ut(e,2,r,Qe.min(),Qe.min(),_r.empty(),0)}static newUnknownDocument(e,r){return new Ut(e,3,r,Qe.min(),Qe.min(),_r.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,r){this.position=e,this.inclusive=r}}function ox(t,e,r){let n=0;for(let A=0;A<t.position.length;A++){const s=e[A],i=t.position[A];if(s.field.isKeyField()?n=fe.comparator(fe.fromName(i.referenceValue),r.key):n=Hs(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function ax(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!aA(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r="asc"){this.field=e,this.dir=r}}function g4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{}class ct extends Mb{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new p4(e,r,n):r==="array-contains"?new B4(e,n):r==="in"?new Gb(e,n):r==="not-in"?new v4(e,n):r==="array-contains-any"?new y4(e,n):new ct(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new m4(e,n):new w4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Hs(r,this.value)):r!==null&&Os(this.value)===Os(r)&&this.matchesComparison(Hs(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gt extends Mb{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new gt(e,r)}matches(e){return la(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function la(t){return t.op==="and"}function Sm(t){return t.op==="or"}function _w(t){return jb(t)&&la(t)}function jb(t){for(const e of t.filters)if(e instanceof gt)return!1;return!0}function km(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+aa(t.value);if(_w(t))return t.filters.map(e=>km(e)).join(",");{const e=t.filters.map(r=>km(r)).join(",");return`${t.op}(${e})`}}function Ob(t,e){return t instanceof ct?function(n,A){return A instanceof ct&&n.op===A.op&&n.field.isEqual(A.field)&&aA(n.value,A.value)}(t,e):t instanceof gt?function(n,A){return A instanceof gt&&n.op===A.op&&n.filters.length===A.filters.length?n.filters.reduce((s,i,a)=>s&&Ob(i,A.filters[a]),!0):!1}(t,e):void ye()}function Hb(t,e){const r=t.filters.concat(e);return gt.create(r,t.op)}function Vb(t){return t instanceof ct?function(r){return`${r.field.canonicalString()} ${r.op} ${aa(r.value)}`}(t):t instanceof gt?function(r){return r.op.toString()+" {"+r.getFilters().map(Vb).join(" ,")+"}"}(t):"Filter"}class p4 extends ct{constructor(e,r,n){super(e,r,n),this.key=fe.fromName(n.referenceValue)}matches(e){const r=fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class m4 extends ct{constructor(e,r){super(e,"in",r),this.keys=Kb("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class w4 extends ct{constructor(e,r){super(e,"not-in",r),this.keys=Kb("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Kb(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>fe.fromName(n.referenceValue))}class B4 extends ct{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return bc(r)&&_c(r.arrayValue,this.value)}}class Gb extends ct{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&_c(this.value.arrayValue,r)}}class v4 extends ct{constructor(e,r){super(e,"not-in",r)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!_c(this.value.arrayValue,r)}}class y4 extends ct{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!bc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>_c(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,r=null,n=[],A=[],s=null,i=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=A,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Rm(t,e=null,r=[],n=[],A=null,s=null,i=null){return new x4(t,e,r,n,A,s,i)}function ji(t){const e=ce(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>km(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),$c(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>aa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>aa(n)).join(",")),e.ue=r}return e.ue}function Wc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!g4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Ob(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ax(t.startAt,e.startAt)&&ax(t.endAt,e.endAt)}function Eh(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function _h(t,e){return t.filters.filter(r=>r instanceof ct&&r.field.isEqual(e))}function lx(t,e,r){let n=Rd,A=!0;for(const s of _h(t,e)){let i=Rd,a=!0;switch(s.op){case"<":case"<=":i=h4(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,a=!1;break;case"!=":case"not-in":i=Rd}sx({value:n,inclusive:A},{value:i,inclusive:a})<0&&(n=i,A=a)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];sx({value:n,inclusive:A},{value:i,inclusive:r.inclusive})<0&&(n=i,A=r.inclusive);break}}return{value:n,inclusive:A}}function cx(t,e,r){let n=ps,A=!0;for(const s of _h(t,e)){let i=ps,a=!0;switch(s.op){case">=":case">":i=f4(s.value),a=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,a=!1;break;case"!=":case"not-in":i=ps}ix({value:n,inclusive:A},{value:i,inclusive:a})>0&&(n=i,A=a)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];ix({value:n,inclusive:A},{value:i,inclusive:r.inclusive})>0&&(n=i,A=r.inclusive);break}}return{value:n,inclusive:A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,r=null,n=[],A=[],s=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=A,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zb(t,e,r,n,A,s,i,a){return new OA(t,e,r,n,A,s,i,a)}function Ta(t){return new OA(t)}function ux(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bw(t){return t.collectionGroup!==null}function Ko(t){const e=ce(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new vt(St.comparator);return i.filters.forEach(o=>{o.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Tc(s,n))}),r.has(St.keyField().canonicalString())||e.ce.push(new Tc(St.keyField(),n))}return e.ce}function Or(t){const e=ce(t);return e.le||(e.le=Wb(e,Ko(t))),e.le}function $b(t){const e=ce(t);return e.he||(e.he=Wb(e,t.explicitOrderBy)),e.he}function Wb(t,e){if(t.limitType==="F")return Rm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(A=>{const s=A.dir==="desc"?"asc":"desc";return new Tc(A.field,s)});const r=t.endAt?new Vs(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Vs(t.startAt.position,t.startAt.inclusive):null;return Rm(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Nm(t,e){const r=t.filters.concat([e]);return new OA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function bh(t,e,r){return new OA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function qc(t,e){return Wc(Or(t),Or(e))&&t.limitType===e.limitType}function qb(t){return`${ji(Or(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(A=>Vb(A)).join(", ")}]`),$c(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(A=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(A)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(A=>aa(A)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(A=>aa(A)).join(",")),`Target(${n})`}(Or(t))}; limitType=${t.limitType})`}function Jc(t,e){return e.isFoundDocument()&&function(n,A){const s=A.key.path;return n.collectionGroup!==null?A.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):fe.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,A){for(const s of Ko(n))if(!s.field.isKeyField()&&A.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,A){for(const s of n.filters)if(!s.matches(A))return!1;return!0}(t,e)&&function(n,A){return!(n.startAt&&!function(i,a,o){const c=ox(i,a,o);return i.inclusive?c<=0:c<0}(n.startAt,Ko(n),A)||n.endAt&&!function(i,a,o){const c=ox(i,a,o);return i.inclusive?c>=0:c>0}(n.endAt,Ko(n),A))}(t,e)}function Jb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xb(t){return(e,r)=>{let n=!1;for(const A of Ko(t)){const s=C4(A,e,r);if(s!==0)return s;n=n||A.field.isKeyField()}return 0}}function C4(t,e,r){const n=t.field.isKeyField()?fe.comparator(e.key,r.key):function(s,i,a){const o=i.data.field(s),c=a.data.field(s);return o!==null&&c!==null?Hs(o,c):ye()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[A,s]of n)if(this.equalsFn(A,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),A=this.inner[n];if(A===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<A.length;s++)if(this.equalsFn(A[s][0],e))return void(A[s]=[e,r]);A.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let A=0;A<n.length;A++)if(this.equalsFn(n[A][0],e))return n.length===1?delete this.inner[r]:n.splice(A,1),this.innerSize--,!0;return!1}forEach(e){ti(this.inner,(r,n)=>{for(const[A,s]of n)e(A,s)})}isEmpty(){return Rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new _t(fe.comparator);function on(){return I4}const Yb=new _t(fe.comparator);function Il(...t){let e=Yb;for(const r of t)e=e.insert(r.key,r);return e}function Zb(t){let e=Yb;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function tA(){return zl()}function eT(){return zl()}function zl(){return new HA(t=>t.toString(),(t,e)=>t.isEqual(e))}const E4=new _t(fe.comparator),_4=new vt(fe.comparator);function Je(...t){let e=_4;for(const r of t)e=e.add(r);return e}const b4=new vt(Ve);function Tw(){return b4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function tT(t){return{integerValue:""+t}}function rT(t,e){return Tb(e)?tT(e):Fw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(){this._=void 0}}function T4(t,e,r){return t instanceof ca?function(A,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return s&&If(s)&&(s=Ef(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof Oi?AT(t,e):t instanceof Hi?sT(t,e):function(A,s){const i=nT(A,s),a=dx(i)+dx(A.Pe);return Um(i)&&Um(A.Pe)?tT(a):Fw(A.serializer,a)}(t,e)}function F4(t,e,r){return t instanceof Oi?AT(t,e):t instanceof Hi?sT(t,e):r}function nT(t,e){return t instanceof ua?function(n){return Um(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class ca extends bf{}class Oi extends bf{constructor(e){super(),this.elements=e}}function AT(t,e){const r=iT(e);for(const n of t.elements)r.some(A=>aA(A,n))||r.push(n);return{arrayValue:{values:r}}}class Hi extends bf{constructor(e){super(),this.elements=e}}function sT(t,e){let r=iT(e);for(const n of t.elements)r=r.filter(A=>!aA(A,n));return{arrayValue:{values:r}}}class ua extends bf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function dx(t){return Nt(t.integerValue||t.doubleValue)}function iT(t){return bc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,r){this.field=e,this.transform=r}}function Q4(t,e){return t.field.isEqual(e.field)&&function(n,A){return n instanceof Oi&&A instanceof Oi||n instanceof Hi&&A instanceof Hi?sa(n.elements,A.elements,aA):n instanceof ua&&A instanceof ua?aA(n.Pe,A.Pe):n instanceof ca&&A instanceof ca}(t.transform,e.transform)}class U4{constructor(e,r){this.version=e,this.transformResults=r}}class Pt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Pt}static exists(e){return new Pt(void 0,e)}static updateTime(e){return new Pt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tf{}function oT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qa(t.key,Pt.none()):new Fa(t.key,t.data,Pt.none());{const r=t.data,n=_r.empty();let A=new vt(St.comparator);for(let s of e.fields)if(!A.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),A=A.add(s)}return new VA(t.key,n,new sn(A.toArray()),Pt.none())}}function S4(t,e,r){t instanceof Fa?function(A,s,i){const a=A.value.clone(),o=fx(A.fieldTransforms,s,i.transformResults);a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):t instanceof VA?function(A,s,i){if(!Pd(A.precondition,s))return void s.convertToUnknownDocument(i.version);const a=fx(A.fieldTransforms,s,i.transformResults),o=s.data;o.setAll(aT(A)),o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):function(A,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function $l(t,e,r,n){return t instanceof Fa?function(s,i,a,o){if(!Pd(s.precondition,i))return a;const c=s.value.clone(),d=gx(s.fieldTransforms,o,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof VA?function(s,i,a,o){if(!Pd(s.precondition,i))return a;const c=gx(s.fieldTransforms,o,i),d=i.data;return d.setAll(aT(s)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,i,a){return Pd(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,r)}function k4(t,e){let r=null;for(const n of t.fieldTransforms){const A=e.data.field(n.field),s=nT(n.transform,A||null);s!=null&&(r===null&&(r=_r.empty()),r.set(n.field,s))}return r||null}function hx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,A){return n===void 0&&A===void 0||!(!n||!A)&&sa(n,A,(s,i)=>Q4(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fa extends Tf{constructor(e,r,n,A=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class VA extends Tf{constructor(e,r,n,A,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=A,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aT(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function fx(t,e,r){const n=new Map;_e(t.length===r.length);for(let A=0;A<r.length;A++){const s=t[A],i=s.transform,a=e.data.field(s.field);n.set(s.field,F4(i,a,r[A]))}return n}function gx(t,e,r){const n=new Map;for(const A of t){const s=A.transform,i=r.data.field(A.field);n.set(A.field,T4(s,i,e))}return n}class Qa extends Tf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qw extends Tf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,r,n,A){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=A}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let A=0;A<this.mutations.length;A++){const s=this.mutations[A];s.key.isEqual(e.key)&&S4(s,e,n[A])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=$l(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=$l(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=eT();return this.mutations.forEach(A=>{const s=e.get(A.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=r.has(A.key)?null:a;const o=oT(i,a);o!==null&&n.set(A.key,o),i.isValidDocument()||i.convertToNoDocument(Qe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Je())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(r,n)=>hx(r,n))&&sa(this.baseMutations,e.baseMutations,(r,n)=>hx(r,n))}}class Sw{constructor(e,r,n,A){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=A}static from(e,r,n){_e(e.mutations.length===n.length);let A=function(){return E4}();const s=e.mutations;for(let i=0;i<s.length;i++)A=A.insert(s[i].key,n[i].version);return new Sw(e,r,n,A)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr,ut;function cT(t){switch(t){default:return ye();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function uT(t){if(t===void 0)return Zt("GRPC error has no .code"),O.UNKNOWN;switch(t){case nr.OK:return O.OK;case nr.CANCELLED:return O.CANCELLED;case nr.UNKNOWN:return O.UNKNOWN;case nr.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case nr.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case nr.INTERNAL:return O.INTERNAL;case nr.UNAVAILABLE:return O.UNAVAILABLE;case nr.UNAUTHENTICATED:return O.UNAUTHENTICATED;case nr.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case nr.NOT_FOUND:return O.NOT_FOUND;case nr.ALREADY_EXISTS:return O.ALREADY_EXISTS;case nr.PERMISSION_DENIED:return O.PERMISSION_DENIED;case nr.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case nr.ABORTED:return O.ABORTED;case nr.OUT_OF_RANGE:return O.OUT_OF_RANGE;case nr.UNIMPLEMENTED:return O.UNIMPLEMENTED;case nr.DATA_LOSS:return O.DATA_LOSS;default:return ye()}}(ut=nr||(nr={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new Fi([4294967295,4294967295],0);function px(t){const e=dT().encode(t),r=new hb;return r.update(e),new Uint8Array(r.digest())}function mx(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),A=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fi([r,n],0),new Fi([A,s],0)]}class Rw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new El(`Invalid padding: ${r}`);if(n<0)throw new El(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new El(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Fi.fromNumber(this.Ie)}Ee(e,r,n){let A=e.add(r.multiply(Fi.fromNumber(n)));return A.compare(N4)===1&&(A=new Fi([A.getBits(0),A.getBits(1)],0)),A.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=px(e),[n,A]=mx(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,A,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const A=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Rw(s,A,r);return n.forEach(a=>i.insert(a)),i}insert(e){if(this.Ie===0)return;const r=px(e),[n,A]=mx(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,A,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,r,n,A,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=A,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const A=new Map;return A.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Yc(Qe.min(),A,new _t(Ve),on(),Je())}}class Zc{constructor(e,r,n,A,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=A,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Zc(n,r,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,r,n,A){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=A}}class hT{constructor(e,r){this.targetId=e,this.me=r}}class fT{constructor(e,r,n=Kt.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=A}}class wx{constructor(){this.fe=0,this.ge=vx(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),r=Je(),n=Je();return this.ge.forEach((A,s)=>{switch(s){case 0:e=e.add(A);break;case 2:r=r.add(A);break;case 1:n=n.add(A);break;default:ye()}}),new Zc(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=vx()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class D4{constructor(e){this.Le=e,this.Be=new Map,this.ke=on(),this.qe=Bx(),this.Qe=new _t(Ve)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,A)=>{this.ze(A)&&r(A)})}He(e){const r=e.targetId,n=e.me.count,A=this.Je(r);if(A){const s=A.target;if(Eh(s))if(n===0){const i=new fe(s.path);this.Ue(r,i,Ut.newNoDocument(i,Qe.min()))}else _e(n===1);else{const i=this.Ye(r);if(i!==n){const a=this.Ze(e),o=a?this.Xe(a,e,i):1;if(o!==0){this.je(r);const c=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Th==null||Th.et(function(d,h,f,w,v){var B,_,x,m,I,F;const R={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},Q=h.unchangedNames;return Q&&(R.bloomFilter={applied:v===0,hashCount:(B=Q==null?void 0:Q.hashCount)!==null&&B!==void 0?B:0,bitmapLength:(m=(x=(_=Q==null?void 0:Q.bits)===null||_===void 0?void 0:_.bitmap)===null||x===void 0?void 0:x.length)!==null&&m!==void 0?m:0,padding:(F=(I=Q==null?void 0:Q.bits)===null||I===void 0?void 0:I.padding)!==null&&F!==void 0?F:0,mightContain:y=>{var C;return(C=w==null?void 0:w.mightContain(y))!==null&&C!==void 0&&C}}),R}(i,e.me,this.Le.tt(),a,o))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:A=0},hashCount:s=0}=r;let i,a;try{i=RA(n).toUint8Array()}catch(o){if(o instanceof Nb)return yn("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Rw(i,A,s)}catch(o){return yn(o instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let A=0;return n.forEach(s=>{const i=this.Le.tt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,s,null),A++)}),A}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const a=this.Je(i);if(a){if(s.current&&Eh(a.target)){const o=new fe(a.target.path);this.ke.get(o)!==null||this.it(i,o)||this.Ue(i,o,Ut.newNoDocument(o,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=Je();this.qe.forEach((s,i)=>{let a=!0;i.forEachWhile(o=>{const c=this.Je(o);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const A=new Yc(e,r,this.Qe,this.ke,n);return this.ke=on(),this.qe=Bx(),this.Qe=new _t(Ve),A}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const A=this.Ge(e);this.it(e,r)?A.Fe(r,1):A.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new wx,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new vt(Ve),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||te("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wx),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Bx(){return new _t(fe.comparator)}function vx(){return new _t(fe.comparator)}const P4={asc:"ASCENDING",desc:"DESCENDING"},L4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M4={and:"AND",or:"OR"};class j4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Dm(t,e){return t.useProto3Json||$c(e)?e:{value:e}}function da(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O4(t,e){return da(t,e.toTimestamp())}function er(t){return _e(!!t),Qe.fromTimestamp(function(r){const n=kA(r);return new Lt(n.seconds,n.nanos)}(t))}function Nw(t,e){return Pm(t,e).canonicalString()}function Pm(t,e){const r=function(A){return new lt(["projects",A.projectId,"databases",A.database])}(t).child("documents");return e===void 0?r:r.child(e)}function pT(t){const e=lt.fromString(t);return _e(_T(e)),e}function Fc(t,e){return Nw(t.databaseId,e.path)}function sA(t,e){const r=pT(e);if(r.get(1)!==t.databaseId.projectId)throw new ee(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ee(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new fe(BT(r))}function mT(t,e){return Nw(t.databaseId,e)}function wT(t){const e=pT(t);return e.length===4?lt.emptyPath():BT(e)}function Lm(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BT(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function yx(t,e,r){return{name:Fc(t,e),fields:r.value.mapValue.fields}}function vT(t,e,r){const n=sA(t,e.name),A=er(e.updateTime),s=e.createTime?er(e.createTime):Qe.min(),i=new _r({mapValue:{fields:e.fields}}),a=Ut.newFoundDocument(n,A,s,i);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function H4(t,e){return"found"in e?function(n,A){_e(!!A.found),A.found.name,A.found.updateTime;const s=sA(n,A.found.name),i=er(A.found.updateTime),a=A.found.createTime?er(A.found.createTime):Qe.min(),o=new _r({mapValue:{fields:A.found.fields}});return Ut.newFoundDocument(s,i,a,o)}(t,e):"missing"in e?function(n,A){_e(!!A.missing),_e(!!A.readTime);const s=sA(n,A.missing),i=er(A.readTime);return Ut.newNoDocument(s,i)}(t,e):ye()}function V4(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(_e(d===void 0||typeof d=="string"),Kt.fromBase64String(d||"")):(_e(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Kt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const d=c.code===void 0?O.UNKNOWN:uT(c.code);return new ee(d,c.message||"")}(i);r=new fT(n,A,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const A=sA(t,n.document.name),s=er(n.document.updateTime),i=n.document.createTime?er(n.document.createTime):Qe.min(),a=new _r({mapValue:{fields:n.document.fields}}),o=Ut.newFoundDocument(A,s,i,a),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Ld(c,d,o.key,o)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const A=sA(t,n.document),s=n.readTime?er(n.readTime):Qe.min(),i=Ut.newNoDocument(A,s),a=n.removedTargetIds||[];r=new Ld([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const A=sA(t,n.document),s=n.removedTargetIds||[];r=new Ld([],s,A,null)}else{if(!("filter"in e))return ye();{e.filter;const n=e.filter;n.targetId;const{count:A=0,unchangedNames:s}=n,i=new R4(A,s),a=n.targetId;r=new hT(a,i)}}return r}function Qc(t,e){let r;if(e instanceof Fa)r={update:yx(t,e.key,e.value)};else if(e instanceof Qa)r={delete:Fc(t,e.key)};else if(e instanceof VA)r={update:yx(t,e.key,e.data),updateMask:q4(e.fieldMask)};else{if(!(e instanceof Qw))return ye();r={verify:Fc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const a=i.transform;if(a instanceof ca)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ua)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw ye()}(0,n))),e.precondition.isNone||(r.currentDocument=function(A,s){return s.updateTime!==void 0?{updateTime:O4(A,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ye()}(t,e.precondition)),r}function Mm(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?Pt.updateTime(er(s.updateTime)):s.exists!==void 0?Pt.exists(s.exists):Pt.none()}(e.currentDocument):Pt.none(),n=e.updateTransforms?e.updateTransforms.map(A=>function(i,a){let o=null;if("setToServerValue"in a)_e(a.setToServerValue==="REQUEST_TIME"),o=new ca;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];o=new Oi(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];o=new Hi(d)}else"increment"in a?o=new ua(i,a.increment):ye();const c=St.fromServerFormat(a.fieldPath);return new Xc(c,o)}(t,A)):[];if(e.update){e.update.name;const A=sA(t,e.update.name),s=new _r({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(o){const c=o.fieldPaths||[];return new sn(c.map(d=>St.fromServerFormat(d)))}(e.updateMask);return new VA(A,s,i,r,n)}return new Fa(A,s,r,n)}if(e.delete){const A=sA(t,e.delete);return new Qa(A,r)}if(e.verify){const A=sA(t,e.verify);return new Qw(A,r)}return ye()}function K4(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(r=>function(A,s){let i=A.updateTime?er(A.updateTime):er(s);return i.isEqual(Qe.min())&&(i=er(s)),new U4(i,A.transformResults||[])}(r,e))):[]}function yT(t,e){return{documents:[mT(t,e.path)]}}function Ff(t,e){const r={structuredQuery:{}},n=e.path;let A;e.collectionGroup!==null?(A=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=mT(t,A);const s=function(c){if(c.length!==0)return ET(gt.create(c,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:ss(f.field),direction:z4(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const a=Dm(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:A}}function xT(t,e,r,n){const{_t:A,parent:s}=Ff(t,e),i={},a=[];let o=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+o++;i[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:ss(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:ss(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:A.structuredQuery},parent:A.parent},ut:i,parent:s}}function CT(t){let e=wT(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let A=null;if(n>0){_e(n===1);const d=r.from[0];d.allDescendants?A=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const f=IT(h);return f instanceof gt&&_w(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(v){return new Tc(vo(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,$c(f)?null:f}(r.limit));let o=null;r.startAt&&(o=function(h){const f=!!h.before,w=h.values||[];return new Vs(w,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,w=h.values||[];return new Vs(w,f)}(r.endAt)),zb(e,A,i,s,a,"F",o,c)}function G4(t,e){const r=function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function IT(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=vo(r.unaryFilter.field);return ct.create(n,"==",{doubleValue:NaN});case"IS_NULL":const A=vo(r.unaryFilter.field);return ct.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vo(r.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=vo(r.unaryFilter.field);return ct.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):t.fieldFilter!==void 0?function(r){return ct.create(vo(r.fieldFilter.field),function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return gt.create(r.compositeFilter.filters.map(n=>IT(n)),function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return ye()}}(r.compositeFilter.op))}(t):ye()}function z4(t){return P4[t]}function $4(t){return L4[t]}function W4(t){return M4[t]}function ss(t){return{fieldPath:t.canonicalString()}}function vo(t){return St.fromServerFormat(t.fieldPath)}function ET(t){return t instanceof ct?function(r){if(r.op==="=="){if(Ax(r.value))return{unaryFilter:{field:ss(r.field),op:"IS_NAN"}};if(nx(r.value))return{unaryFilter:{field:ss(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ax(r.value))return{unaryFilter:{field:ss(r.field),op:"IS_NOT_NAN"}};if(nx(r.value))return{unaryFilter:{field:ss(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(r.field),op:$4(r.op),value:r.value}}}(t):t instanceof gt?function(r){const n=r.getFilters().map(A=>ET(A));return n.length===1?n[0]:{compositeFilter:{op:W4(r.op),filters:n}}}(t):ye()}function q4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function _T(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,r,n,A,s=Qe.min(),i=Qe.min(),a=Kt.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=A,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new yA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new yA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.ct=e}}function J4(t,e){let r;if(e.document)r=vT(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=fe.fromSegments(e.noDocument.path),A=Ki(e.noDocument.readTime);r=Ut.newNoDocument(n,A),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye();{const n=fe.fromSegments(e.unknownDocument.path),A=Ki(e.unknownDocument.version);r=Ut.newUnknownDocument(n,A)}}return e.readTime&&r.setReadTime(function(A){const s=new Lt(A[0],A[1]);return Qe.fromTimestamp(s)}(e.readTime)),r}function xx(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Fh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:Fc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:da(s,i.version.toTimestamp()),createTime:da(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Vi(e.version)};else{if(!e.isUnknownDocument())return ye();n.unknownDocument={path:r.path.toArray(),version:Vi(e.version)}}return n}function Fh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(t){const e=new Lt(t.seconds,t.nanoseconds);return Qe.fromTimestamp(e)}function Bi(t,e){const r=(e.baseMutations||[]).map(s=>Mm(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];i.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>Mm(t.ct,s)),A=Lt.fromMillis(e.localWriteTimeMs);return new Uw(e.batchId,A,r,n)}function _l(t){const e=Ki(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Ki(t.lastLimboFreeSnapshotVersion):Qe.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return _e(s.documents.length===1),Or(Ta(wT(s.documents[0])))}(t.query):function(s){return Or(CT(s))}(t.query),new yA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Kt.fromBase64String(t.resumeToken))}function TT(t,e){const r=Vi(e.snapshotVersion),n=Vi(e.lastLimboFreeSnapshotVersion);let A;A=Eh(e.target)?yT(t.ct,e.target):Ff(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ji(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:A}}function Dw(t){const e=CT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bh(e,e.limit,"L"):e}function Wg(t,e){return new kw(e.largestBatchId,Mm(t.ct,e.overlayMutation))}function Cx(t,e){const r=e.path.lastSegment();return[t,jr(e.path.popLast()),r]}function Ix(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Vi(n.readTime),documentKey:jr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{getBundleMetadata(e,r){return Ex(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:Ki(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return Ex(e).put(function(A){return{bundleId:A.id,createTime:Vi(er(A.createTime)),version:A.version}}(r))}getNamedQuery(e,r){return _x(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:Dw(s.bundledQuery),readTime:Ki(s.readTime)}}(n)})}saveNamedQuery(e,r){return _x(e).put(function(A){return{name:A.name,readTime:Vi(er(A.readTime)),bundledQuery:A.bundledQuery}}(r))}}function Ex(t){return cr(t,"bundles")}function _x(t){return cr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Qf(e,n)}getOverlay(e,r){return ol(e).get(Cx(this.userId,r)).next(n=>n?Wg(this.serializer,n):null)}getOverlays(e,r){const n=tA();return M.forEach(r,A=>this.getOverlay(e,A).next(s=>{s!==null&&n.set(A,s)})).next(()=>n)}saveOverlays(e,r,n){const A=[];return n.forEach((s,i)=>{const a=new kw(r,i);A.push(this.ht(e,a))}),M.waitFor(A)}removeOverlaysForBatchId(e,r,n){const A=new Set;r.forEach(i=>A.add(jr(i.getCollectionPath())));const s=[];return A.forEach(i=>{const a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(ol(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,r,n){const A=tA(),s=jr(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ol(e).U("collectionPathOverlayIndex",i).next(a=>{for(const o of a){const c=Wg(this.serializer,o);A.set(c.getKey(),c)}return A})}getOverlaysForCollectionGroup(e,r,n,A){const s=tA();let i;const a=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ol(e).J({index:"collectionGroupOverlayIndex",range:a},(o,c,d)=>{const h=Wg(this.serializer,c);s.size()<A||h.largestBatchId===i?(s.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return ol(e).put(function(A,s,i){const[a,o,c]=Cx(s,i.mutation.key);return{userId:s,collectionPath:o,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Qc(A.ct,i.mutation)}}(this.serializer,this.userId,r))}}function ol(t){return cr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{Pt(e){return cr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Kt.fromUint8Array(n):Kt.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Nt(e.integerValue));else if("doubleValue"in e){const n=Nt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Ic(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=kA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(RA(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?Db(e)?this.dt(r,Number.MAX_SAFE_INTEGER):_f(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):ye()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const A of Object.keys(n))this.Vt(A,r),this.Tt(n[A],r)}wt(e,r){var n,A;const s=e.fields||{};this.dt(r,53);const i="value",a=((A=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||A===void 0?void 0:A.length)||0;this.dt(r,15),r.At(Nt(a)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const A of n)this.Tt(A,r)}yt(e,r){this.dt(r,37),fe.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}vi.vt=new vi;function Z4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function bx(t){const e=64-function(n){let A=0;for(let s=0;s<8;++s){const i=Z4(255&n[s]);if(A+=i,i!==8)break}return A}(t);return Math.ceil(e/8)}class eD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const A=r.codePointAt(0);this.Ft(240|A>>>18),this.Ft(128|63&A>>>12),this.Ft(128|63&A>>>6),this.Ft(128|63&A)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const A=r.codePointAt(0);this.Ot(240|A>>>18),this.Ot(128|63&A>>>12),this.Ot(128|63&A>>>6),this.Ot(128|63&A)}}this.Nt()}kt(e){const r=this.qt(e),n=bx(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let A=r.length-n;A<r.length;++A)this.buffer[this.position++]=255&r[A]}Kt(e){const r=this.qt(e),n=bx(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let A=r.length-n;A<r.length;++A)this.buffer[this.position++]=~(255&r[A])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let A=1;A<r.length;++A)r[A]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const A=new Uint8Array(n);A.set(this.buffer),this.buffer=A}}class tD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class rD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class al{constructor(){this.jt=new eD,this.Ht=new tD(this.jt),this.Jt=new rD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,r,n,A){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=A}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new yi(this.indexId,this.documentKey,this.arrayValue,n)}}function qA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=Tx(t.arrayValue,e.arrayValue),r!==0?r:(r=Tx(t.directionalValue,e.directionalValue),r!==0?r:fe.comparator(t.documentKey,e.documentKey)))}function Tx(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.Xt=new vt((r,n)=>St.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(_e(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Tm(e);if(r!==void 0&&!this.sn(r))return!1;const n=mi(e);let A=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)A=A.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!A.has(a.field.canonicalString())){const o=n[s];if(!this.on(a,o)||!this._n(this.en[i++],o))return!1}++s}for(;s<n.length;++s){const a=n[s];if(i>=this.en.length||!this._n(this.en[i++],a))return!1}return!0}an(){if(this.nn)return null;let e=new vt(St.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Qi(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Qi(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Qi(n.field,n.dir==="asc"?0:1)));return new ia(ia.UNKNOWN_ID,this.collectionId,r,oa.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){var e,r;if(_e(t instanceof ct||t instanceof gt),t instanceof ct){if(t instanceof Gb){const A=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>ct.create(t.field,"==",s)))||[];return gt.create(A,"or")}return t}const n=t.filters.map(A=>FT(A));return gt.create(n,t.op)}function nD(t){if(t.getFilters().length===0)return[];const e=Hm(FT(t));return _e(QT(e)),jm(e)||Om(e)?[e]:e.getFilters()}function jm(t){return t instanceof ct}function Om(t){return t instanceof gt&&_w(t)}function QT(t){return jm(t)||Om(t)||function(r){if(r instanceof gt&&Sm(r)){for(const n of r.getFilters())if(!jm(n)&&!Om(n))return!1;return!0}return!1}(t)}function Hm(t){if(_e(t instanceof ct||t instanceof gt),t instanceof ct)return t;if(t.filters.length===1)return Hm(t.filters[0]);const e=t.filters.map(n=>Hm(n));let r=gt.create(e,t.op);return r=Qh(r),QT(r)?r:(_e(r instanceof gt),_e(la(r)),_e(r.filters.length>1),r.filters.reduce((n,A)=>Pw(n,A)))}function Pw(t,e){let r;return _e(t instanceof ct||t instanceof gt),_e(e instanceof ct||e instanceof gt),r=t instanceof ct?e instanceof ct?function(A,s){return gt.create([A,s],"and")}(t,e):Qx(t,e):e instanceof ct?Qx(e,t):function(A,s){if(_e(A.filters.length>0&&s.filters.length>0),la(A)&&la(s))return Hb(A,s.getFilters());const i=Sm(A)?A:s,a=Sm(A)?s:A,o=i.filters.map(c=>Pw(c,a));return gt.create(o,"or")}(t,e),Qh(r)}function Qx(t,e){if(la(e))return Hb(e,t.getFilters());{const r=e.filters.map(n=>Pw(t,n));return gt.create(r,"or")}}function Qh(t){if(_e(t instanceof ct||t instanceof gt),t instanceof ct)return t;const e=t.getFilters();if(e.length===1)return Qh(e[0]);if(jb(t))return t;const r=e.map(A=>Qh(A)),n=[];return r.forEach(A=>{A instanceof ct?n.push(A):A instanceof gt&&(A.op===t.op?n.push(...A.filters):n.push(A))}),n.length===1?n[0]:gt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.un=new Lw}addToCollectionParentIndex(e,r){return this.un.add(r),M.resolve()}getCollectionParents(e,r){return M.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return M.resolve()}deleteFieldIndex(e,r){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,r){return M.resolve()}getDocumentsMatchingTarget(e,r){return M.resolve(null)}getIndexType(e,r){return M.resolve(0)}getFieldIndexes(e,r){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,r){return M.resolve(xn.min())}getMinOffsetFromCollectionGroup(e,r){return M.resolve(xn.min())}updateCollectionGroup(e,r,n){return M.resolve()}updateIndexEntries(e,r){return M.resolve()}}class Lw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),A=this.index[r]||new vt(lt.comparator),s=!A.has(n);return this.index[r]=A.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),A=this.index[r];return A&&A.has(n)}getEntries(e){return(this.index[e]||new vt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Uint8Array(0);class sD{constructor(e,r){this.databaseId=r,this.cn=new Lw,this.ln=new HA(n=>ji(n),(n,A)=>Wc(n,A)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),A=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:jr(A)};return Ux(e).put(s)}return M.resolve()}getCollectionParents(e,r){const n=[],A=IDBKeyRange.bound([r,""],[xb(r),""],!1,!0);return Ux(e).U(A).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(eA(i.parent))}return n})}addFieldIndex(e,r){const n=ll(e),A=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(r);delete A.indexId;const s=n.add(A);if(r.indexState){const i=lo(e);return s.next(a=>{i.put(Ix(a,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=ll(e),A=lo(e),s=ao(e);return n.delete(r.indexId).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=ll(e),n=ao(e),A=lo(e);return r.j().next(()=>n.j()).next(()=>A.j())}createTargetIndexes(e,r){return M.forEach(this.hn(r),n=>this.getIndexType(e,n).next(A=>{if(A===0||A===1){const s=new Fx(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=ao(e);let A=!0;const s=new Map;return M.forEach(this.hn(r),i=>this.Pn(e,i).next(a=>{A&&(A=!!a),s.set(i,a)})).next(()=>{if(A){let i=Je();const a=[];return M.forEach(s,(o,c)=>{te("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(o)} to execute ${ji(r)}`);const d=function(I,F){const R=Tm(F);if(R===void 0)return null;for(const Q of _h(I,R.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(c,o),h=function(I,F){const R=new Map;for(const Q of mi(F))for(const y of _h(I,Q.fieldPath))switch(y.op){case"==":case"in":R.set(Q.fieldPath.canonicalString(),y.value);break;case"not-in":case"!=":return R.set(Q.fieldPath.canonicalString(),y.value),Array.from(R.values())}return null}(c,o),f=function(I,F){const R=[];let Q=!0;for(const y of mi(F)){const C=y.kind===0?lx(I,y.fieldPath,I.startAt):cx(I,y.fieldPath,I.startAt);R.push(C.value),Q&&(Q=C.inclusive)}return new Vs(R,Q)}(c,o),w=function(I,F){const R=[];let Q=!0;for(const y of mi(F)){const C=y.kind===0?cx(I,y.fieldPath,I.endAt):lx(I,y.fieldPath,I.endAt);R.push(C.value),Q&&(Q=C.inclusive)}return new Vs(R,Q)}(c,o),v=this.In(o,c,f),B=this.In(o,c,w),_=this.Tn(o,c,h),x=this.En(o.indexId,d,v,f.inclusive,B,w.inclusive,_);return M.forEach(x,m=>n.G(m,r.limit).next(I=>{I.forEach(F=>{const R=fe.fromSegments(F.documentKey);i.has(R)||(i=i.add(R),a.push(R))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=nD(gt.create(e.filters,"and")).map(n=>Rm(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,A,s,i,a){const o=(r!=null?r.length:1)*Math.max(n.length,s.length),c=o/(r!=null?r.length:1),d=[];for(let h=0;h<o;++h){const f=r?this.dn(r[h/c]):Ku,w=this.An(e,f,n[h%c],A),v=this.Rn(e,f,s[h%c],i),B=a.map(_=>this.An(e,f,_,!0));d.push(...this.createRange(w,v,B))}return d}An(e,r,n,A){const s=new yi(e,fe.empty(),r,n);return A?s:s.Zt()}Rn(e,r,n,A){const s=new yi(e,fe.empty(),r,n);return A?s.Zt():s}Pn(e,r){const n=new Fx(r),A=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,A).next(s=>{let i=null;for(const a of s)n.rn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a);return i})}getIndexType(e,r){let n=2;const A=this.hn(r);return M.forEach(A,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(o){let c=new vt(St.comparator),d=!1;for(const h of o.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of o.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&A.length>1&&n===2?1:n)}Vn(e,r){const n=new al;for(const A of mi(e)){const s=r.data.field(A.fieldPath);if(s==null)return null;const i=n.Yt(A.kind);vi.vt.It(s,i)}return n.zt()}dn(e){const r=new al;return vi.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new al;return vi.vt.It(Mi(this.databaseId,r),n.Yt(function(s){const i=mi(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let A=[];A.push(new al);let s=0;for(const i of mi(e)){const a=n[s++];for(const o of A)if(this.fn(r,i.fieldPath)&&bc(a))A=this.gn(A,i,a);else{const c=o.Yt(i.kind);vi.vt.It(a,c)}}return this.pn(A)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const A=[...e],s=[];for(const i of n.arrayValue.values||[])for(const a of A){const o=new al;o.seed(a.zt()),vi.vt.It(i,o.Yt(r.kind)),s.push(o)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof ct&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=ll(e),A=lo(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return M.forEach(s,a=>A.get([a.indexId,this.uid]).next(o=>{i.push(function(d,h){const f=h?new oa(h.sequenceNumber,new xn(Ki(h.readTime),new fe(eA(h.documentKey)),h.largestBatchId)):oa.empty(),w=d.fields.map(([v,B])=>new Qi(St.fromServerFormat(v),B));return new ia(d.indexId,d.collectionGroup,w,f)}(a,o))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,A)=>{const s=n.indexState.sequenceNumber-A.indexState.sequenceNumber;return s!==0?s:Ve(n.collectionGroup,A.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const A=ll(e),s=lo(e);return this.yn(e).next(i=>A.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(a=>M.forEach(a,o=>s.put(Ix(o.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return M.forEach(r,(A,s)=>{const i=n.get(A.collectionGroup);return(i?M.resolve(i):this.getFieldIndexes(e,A.collectionGroup)).next(a=>(n.set(A.collectionGroup,a),M.forEach(a,o=>this.wn(e,A,o).next(c=>{const d=this.Sn(s,o);return c.isEqual(d)?M.resolve():this.bn(e,s,o,c,d)}))))})}Dn(e,r,n,A){return ao(e).put({indexId:A.indexId,uid:this.uid,arrayValue:A.arrayValue,directionalValue:A.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,A){return ao(e).delete([A.indexId,this.uid,A.arrayValue,A.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const A=ao(e);let s=new vt(qA);return A.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,a)=>{s=s.add(new yi(n.indexId,r,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,r){let n=new vt(qA);const A=this.Vn(r,e);if(A==null)return n;const s=Tm(r);if(s!=null){const i=e.data.field(s.fieldPath);if(bc(i))for(const a of i.arrayValue.values||[])n=n.add(new yi(r.indexId,e.key,this.dn(a),A))}else n=n.add(new yi(r.indexId,e.key,Ku,A));return n}bn(e,r,n,A,s){te("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(o,c,d,h,f){const w=o.getIterator(),v=c.getIterator();let B=oo(w),_=oo(v);for(;B||_;){let x=!1,m=!1;if(B&&_){const I=d(B,_);I<0?m=!0:I>0&&(x=!0)}else B!=null?m=!0:x=!0;x?(h(_),_=oo(v)):m?(f(B),B=oo(w)):(B=oo(w),_=oo(v))}}(A,s,qA,a=>{i.push(this.Dn(e,r,n,a))},a=>{i.push(this.vn(e,r,n,a))}),M.waitFor(i)}yn(e){let r=1;return lo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,A,s)=>{s.done(),r=A.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,a)=>qA(i,a)).filter((i,a,o)=>!a||qA(i,o[a-1])!==0);const A=[];A.push(e);for(const i of n){const a=qA(i,e),o=qA(i,r);if(a===0)A[0]=e.Zt();else if(a>0&&o<0)A.push(i),A.push(i.Zt());else if(o>0)break}A.push(r);const s=[];for(let i=0;i<A.length;i+=2){if(this.Cn(A[i],A[i+1]))return[];const a=[A[i].indexId,this.uid,A[i].arrayValue,A[i].directionalValue,Ku,[]],o=[A[i+1].indexId,this.uid,A[i+1].arrayValue,A[i+1].directionalValue,Ku,[]];s.push(IDBKeyRange.bound(a,o))}return s}Cn(e,r){return qA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Sx)}getMinOffset(e,r){return M.mapArray(this.hn(r),n=>this.Pn(e,n).next(A=>A||ye())).next(Sx)}}function Ux(t){return cr(t,"collectionParents")}function ao(t){return cr(t,"indexEntries")}function ll(t){return cr(t,"indexConfiguration")}function lo(t){return cr(t,"indexState")}function Sx(t){_e(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const A=t[n].indexState.offset;Cw(A,e)<0&&(e=A),r<A.largestBatchId&&(r=A.largestBatchId)}return new xn(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Pr(e,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e,r){const n=t.store("mutations"),A=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let a=0;const o=n.J({range:i},(d,h,f)=>(a++,f.delete()));s.push(o.next(()=>{_e(a===1)}));const c=[];for(const d of r.mutations){const h=Fb(e,d.key.path,r.batchId);s.push(A.delete(h)),c.push(d.key)}return M.waitFor(s).next(()=>c)}function Uh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ye();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr.DEFAULT_COLLECTION_PERCENTILE=10,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pr.DEFAULT=new Pr(41943040,Pr.DEFAULT_COLLECTION_PERCENTILE,Pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pr.DISABLED=new Pr(-1,0,0);class Uf{constructor(e,r,n,A){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=A,this.Fn={}}static lt(e,r,n,A){_e(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Uf(s,r,n,A)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return JA(e).J({index:"userMutationsIndex",range:n},(A,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,A){const s=yo(e),i=JA(e);return i.add({}).next(a=>{_e(typeof a=="number");const o=new Uw(a,r,n,A),c=function(w,v,B){const _=B.baseMutations.map(m=>Qc(w.ct,m)),x=B.mutations.map(m=>Qc(w.ct,m));return{userId:v,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:_,mutations:x}}(this.serializer,this.userId,o),d=[];let h=new vt((f,w)=>Ve(f.canonicalString(),w.canonicalString()));for(const f of A){const w=Fb(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(s.put(w,zN))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),M.waitFor(d).next(()=>o)})}lookupMutationBatch(e,r){return JA(e).get(r).next(n=>n?(_e(n.userId===this.userId),Bi(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?M.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const A=n.keys();return this.Fn[r]=A,A}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,A=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return JA(e).J({index:"userMutationsIndex",range:A},(i,a,o)=>{a.userId===this.userId&&(_e(a.batchId>=n),s=Bi(this.serializer,a)),o.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return JA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(A,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return JA(e).U("userMutationsIndex",r).next(n=>n.map(A=>Bi(this.serializer,A)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=kd(this.userId,r.path),A=IDBKeyRange.lowerBound(n),s=[];return yo(e).J({range:A},(i,a,o)=>{const[c,d,h]=i,f=eA(d);if(c===this.userId&&r.path.isEqual(f))return JA(e).get(h).next(w=>{if(!w)throw ye();_e(w.userId===this.userId),s.push(Bi(this.serializer,w))});o.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new vt(Ve);const A=[];return r.forEach(s=>{const i=kd(this.userId,s.path),a=IDBKeyRange.lowerBound(i),o=yo(e).J({range:a},(c,d,h)=>{const[f,w,v]=c,B=eA(w);f===this.userId&&s.path.isEqual(B)?n=n.add(v):h.done()});A.push(o)}),M.waitFor(A).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,A=n.length+1,s=kd(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new vt(Ve);return yo(e).J({range:i},(o,c,d)=>{const[h,f,w]=o,v=eA(f);h===this.userId&&n.isPrefixOf(v)?v.length===A&&(a=a.add(w)):d.done()}).next(()=>this.xn(e,a))}xn(e,r){const n=[],A=[];return r.forEach(s=>{A.push(JA(e).get(s).next(i=>{if(i===null)throw ye();_e(i.userId===this.userId),n.push(Bi(this.serializer,i))}))}),M.waitFor(A).next(()=>n)}removeMutationBatch(e,r){return UT(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),M.forEach(n,A=>this.referenceDelegate.markPotentiallyOrphaned(e,A))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return M.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),A=[];return yo(e).J({range:n},(s,i,a)=>{if(s[0]===this.userId){const o=eA(s[1]);A.push(o)}else a.done()}).next(()=>{_e(A.length===0)})})}containsKey(e,r){return ST(e,this.userId,r)}Nn(e){return kT(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ST(t,e,r){const n=kd(e,r.path),A=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return yo(t).J({range:s,H:!0},(a,o,c)=>{const[d,h,f]=a;d===e&&h===A&&(i=!0),c.done()}).next(()=>i)}function JA(t){return cr(t,"mutations")}function yo(t){return cr(t,"documentMutations")}function kT(t){return cr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gi(0)}static kn(){return new Gi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Gi(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Qe.fromTimestamp(new Lt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(A=>(A.highestListenSequenceNumber=r,n&&(A.lastRemoteSnapshotVersion=n.toTimestamp()),r>A.highestListenSequenceNumber&&(A.highestListenSequenceNumber=r),this.Qn(e,A)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>co(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(_e(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let A=0;const s=[];return co(e).J((i,a)=>{const o=_l(a);o.sequenceNumber<=r&&n.get(o.targetId)===null&&(A++,s.push(this.removeTargetData(e,o)))}).next(()=>M.waitFor(s)).next(()=>A)}forEachTarget(e,r){return co(e).J((n,A)=>{const s=_l(A);r(s)})}qn(e){return Rx(e).get("targetGlobalKey").next(r=>(_e(r!==null),r))}Qn(e,r){return Rx(e).put("targetGlobalKey",r)}Kn(e,r){return co(e).put(TT(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=ji(r),A=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return co(e).J({range:A,index:"queryTargetsIndex"},(i,a,o)=>{const c=_l(a);Wc(r,c.target)&&(s=c,o.done())}).next(()=>s)}addMatchingKeys(e,r,n){const A=[],s=is(e);return r.forEach(i=>{const a=jr(i.path);A.push(s.put({targetId:n,path:a})),A.push(this.referenceDelegate.addReference(e,n,i))}),M.waitFor(A)}removeMatchingKeys(e,r,n){const A=is(e);return M.forEach(r,s=>{const i=jr(s.path);return M.waitFor([A.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=is(e),A=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(A)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),A=is(e);let s=Je();return A.J({range:n,H:!0},(i,a,o)=>{const c=eA(i[1]),d=new fe(c);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=jr(r.path),A=IDBKeyRange.bound([n],[xb(n)],!1,!0);let s=0;return is(e).J({index:"documentTargetsIndex",H:!0,range:A},([i,a],o,c)=>{i!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,r){return co(e).get(r).next(n=>n?_l(n):null)}}function co(t){return cr(t,"targets")}function Rx(t){return cr(t,"targetGlobal")}function is(t){return cr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx([t,e],[r,n]){const A=Ve(t,r);return A===0?Ve(e,n):A}class oD{constructor(e){this.Un=e,this.buffer=new vt(Nx),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Nx(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class RT{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ei(r)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Zs(r)}await this.Hn(3e5)})}}class aD{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return M.resolve(An.oe);const n=new oD(r);return this.Jn.forEachTarget(e,A=>n.zn(A.sequenceNumber)).next(()=>this.Jn.Zn(e,A=>n.zn(A))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(kx)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kx):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,A,s,i,a,o,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),A=this.params.maximumSequenceNumbersToCollect):A=h,i=Date.now(),this.nthSequenceNumber(e,A))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),wo()<=at.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${A} in `+(a-i)+`ms
	Removed ${s} targets in `+(o-a)+`ms
	Removed ${h} documents in `+(c-o)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:s,documentsRemoved:h})))}}function NT(t,e){return new aD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,r){this.db=e,this.garbageCollector=NT(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(A=>n+A))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,A)=>r(A))}addReference(e,r,n){return Gu(e,n)}removeReference(e,r,n){return Gu(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Gu(e,r)}nr(e,r){return function(A,s){let i=!1;return kT(A).Y(a=>ST(A,a,s).next(o=>(o&&(i=!0),M.resolve(!o)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),A=[];let s=0;return this.tr(e,(i,a)=>{if(a<=r){const o=this.nr(e,i).next(c=>{if(!c)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Qe.min()),is(e).delete(function(h){return[0,jr(h.path)]}(i))))});A.push(o)}}).next(()=>M.waitFor(A)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Gu(e,r)}tr(e,r){const n=is(e);let A,s=An.oe;return n.J({index:"documentTargetsIndex"},([i,a],{path:o,sequenceNumber:c})=>{i===0?(s!==An.oe&&r(new fe(eA(A)),s),s=c,A=o):s=An.oe}).next(()=>{s!==An.oe&&r(new fe(eA(A)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gu(t,e){return is(t).put(function(n,A){return{targetId:0,path:jr(n.path),sequenceNumber:A}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.changes=new HA(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?M.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return ui(e).put(n)}removeEntry(e,r,n){return ui(e).delete(function(s,i){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Fh(i),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Ut.newInvalidDocument(r);return ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cl(r))},(A,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:Ut.newInvalidDocument(r)};return ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cl(r))},(A,s)=>{n={document:this.ir(r,s),size:Uh(s)}}).next(()=>n)}getEntries(e,r){let n=on();return this._r(e,r,(A,s)=>{const i=this.ir(A,s);n=n.insert(A,i)}).next(()=>n)}ar(e,r){let n=on(),A=new _t(fe.comparator);return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a),A=A.insert(s,Uh(i))}).next(()=>({documents:n,ur:A}))}_r(e,r,n){if(r.isEmpty())return M.resolve();let A=new vt(Lx);r.forEach(o=>A=A.add(o));const s=IDBKeyRange.bound(cl(A.first()),cl(A.last())),i=A.getIterator();let a=i.getNext();return ui(e).J({index:"documentKeyIndex",range:s},(o,c,d)=>{const h=fe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Lx(a,h)<0;)n(a,null),a=i.getNext();a&&a.isEqual(h)&&(n(a,c),a=i.hasNext()?i.getNext():null),a?d.$(cl(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,A,s){const i=r.path,a=[i.popLast().toArray(),i.lastSegment(),Fh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ui(e).U(IDBKeyRange.bound(a,o,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=on();for(const h of c){const f=this.ir(fe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Jc(r,f)||A.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,A){let s=on();const i=Px(r,n),a=Px(r,xn.max());return ui(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(o,c,d)=>{const h=this.ir(fe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===A&&d.done()}).next(()=>s)}newChangeBuffer(e){return new uD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Dx(e).get("remoteDocumentGlobalKey").next(r=>(_e(!!r),r))}rr(e,r){return Dx(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=J4(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Qe.min())))return n}return Ut.newInvalidDocument(e)}}function PT(t){return new cD(t)}class uD extends DT{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new HA(n=>n.toString(),(n,A)=>n.isEqual(A))}applyChanges(e){const r=[];let n=0,A=new vt((s,i)=>Ve(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=xx(this.cr.serializer,i);A=A.add(s.path.popLast());const c=Uh(o);n+=c-a.size,r.push(this.cr.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const o=xx(this.cr.serializer,i.convertToNoDocument(Qe.min()));r.push(this.cr.addEntry(e,s,o))}}),A.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),M.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:A})=>(A.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function Dx(t){return cr(t,"remoteDocumentGlobal")}function ui(t){return cr(t,"remoteDocumentsV14")}function cl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Px(t,e){const r=e.documentKey.path.toArray();return[t,Fh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Lx(t,e){const r=t.path.toArray(),n=e.path.toArray();let A=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(A=Ve(r[s],n[s]),A)return A;return A=Ve(r.length,n.length),A||(A=Ve(r[r.length-2],n[n.length-2]),A||Ve(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,r,n,A){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=A}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(A=>(n=A,this.remoteDocumentCache.getEntry(e,r))).next(A=>(n!==null&&$l(n.mutation,A,sn.empty(),Lt.now()),A))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Je()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Je()){const A=tA();return this.populateOverlays(e,A,r).next(()=>this.computeViews(e,r,A,n).next(s=>{let i=Il();return s.forEach((a,o)=>{i=i.insert(a,o.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=tA();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Je()))}populateOverlays(e,r,n){const A=[];return n.forEach(s=>{r.has(s)||A.push(s)}),this.documentOverlayCache.getOverlays(e,A).next(s=>{s.forEach((i,a)=>{r.set(i,a)})})}computeViews(e,r,n,A){let s=on();const i=zl(),a=function(){return zl()}();return r.forEach((o,c)=>{const d=n.get(c.key);A.has(c.key)&&(d===void 0||d.mutation instanceof VA)?s=s.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),$l(d.mutation,c,d.mutation.getFieldMask(),Lt.now())):i.set(c.key,sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(o=>(o.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return a.set(c,new dD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=zl();let A=new _t((i,a)=>i-a),s=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const a of i)a.keys().forEach(o=>{const c=r.get(o);if(c===null)return;let d=n.get(o)||sn.empty();d=a.applyToLocalView(c,d),n.set(o,d);const h=(A.get(a.batchId)||Je()).add(o);A=A.insert(a.batchId,h)})}).next(()=>{const i=[],a=A.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),c=o.key,d=o.value,h=eT();d.forEach(f=>{if(!s.has(f)){const w=oT(r.get(f),n.get(f));w!==null&&h.set(f,w),s=s.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,A){return function(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):bw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,A):this.getDocumentsMatchingCollectionQuery(e,r,n,A)}getNextDocuments(e,r,n,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,A).next(s=>{const i=A-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,A-s.size):M.resolve(tA());let a=-1,o=s;return i.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{o=o.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,o,c,Je())).next(d=>({batchId:a,changes:Zb(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new fe(r)).next(n=>{let A=Il();return n.isFoundDocument()&&(A=A.insert(n.key,n)),A})}getDocumentsMatchingCollectionGroupQuery(e,r,n,A){const s=r.collectionGroup;let i=Il();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,o=>{const c=function(h,f){return new OA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,A).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,A){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,A))).next(i=>{s.forEach((o,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Ut.newInvalidDocument(d)))});let a=Il();return i.forEach((o,c)=>{const d=s.get(o);d!==void 0&&$l(d.mutation,c,sn.empty(),Lt.now()),Jc(r,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return M.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(A){return{id:A.id,version:A.version,createTime:er(A.createTime)}}(r)),M.resolve()}getNamedQuery(e,r){return M.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(A){return{name:A.name,query:Dw(A.bundledQuery),readTime:er(A.readTime)}}(r)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.overlays=new _t(fe.comparator),this.Ir=new Map}getOverlay(e,r){return M.resolve(this.overlays.get(r))}getOverlays(e,r){const n=tA();return M.forEach(r,A=>this.getOverlay(e,A).next(s=>{s!==null&&n.set(A,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((A,s)=>{this.ht(e,r,s)}),M.resolve()}removeOverlaysForBatchId(e,r,n){const A=this.Ir.get(n);return A!==void 0&&(A.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),M.resolve()}getOverlaysForCollection(e,r,n){const A=tA(),s=r.length+1,i=new fe(r.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const o=a.getNext().value,c=o.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&o.largestBatchId>n&&A.set(o.getKey(),o)}return M.resolve(A)}getOverlaysForCollectionGroup(e,r,n,A){let s=new _t((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=s.get(c.largestBatchId);d===null&&(d=tA(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=tA(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=A)););return M.resolve(a)}ht(e,r,n){const A=this.overlays.get(n.key);if(A!==null){const i=this.Ir.get(A.largestBatchId).delete(n.key);this.Ir.set(A.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new kw(r,n));let s=this.Ir.get(r);s===void 0&&(s=Je(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.Tr=new vt(hr.Er),this.dr=new vt(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new hr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new hr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new fe(new lt([])),n=new hr(r,e),A=new hr(r,e+1),s=[];return this.dr.forEachInRange([n,A],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new fe(new lt([])),n=new hr(r,e),A=new hr(r,e+1);let s=Je();return this.dr.forEachInRange([n,A],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new hr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class hr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return fe.comparator(e.key,r.key)||Ve(e.wr,r.wr)}static Ar(e,r){return Ve(e.wr,r.wr)||fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new vt(hr.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,A){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Uw(s,r,n,A);this.mutationQueue.push(i);for(const a of A)this.br=this.br.add(new hr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(i)}lookupMutationBatch(e,r){return M.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,A=this.vr(n),s=A<0?0:A;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new hr(r,0),A=new hr(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,A],i=>{const a=this.Dr(i.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new vt(Ve);return r.forEach(A=>{const s=new hr(A,0),i=new hr(A,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],a=>{n=n.add(a.wr)})}),M.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,A=n.length+1;let s=n;fe.isDocumentKey(s)||(s=s.child(""));const i=new hr(new fe(s),0);let a=new vt(Ve);return this.br.forEachWhile(o=>{const c=o.key.path;return!!n.isPrefixOf(c)&&(c.length===A&&(a=a.add(o.wr)),!0)},i),M.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const A=this.Dr(n);A!==null&&r.push(A)}),r}removeMutationBatch(e,r){_e(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return M.forEach(r.mutations,A=>{const s=new hr(A.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new hr(r,0),A=this.br.firstAfterOrEqual(n);return M.resolve(r.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.Mr=e,this.docs=function(){return new _t(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,A=this.docs.get(n),s=A?A.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return M.resolve(n?n.document.mutableCopy():Ut.newInvalidDocument(r))}getEntries(e,r){let n=on();return r.forEach(A=>{const s=this.docs.get(A);n=n.insert(A,s?s.document.mutableCopy():Ut.newInvalidDocument(A))}),M.resolve(n)}getDocumentsMatchingQuery(e,r,n,A){let s=on();const i=r.path,a=new fe(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:c,value:{document:d}}=o.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Cw(Ib(d),n)<=0||(A.has(d.key)||Jc(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,r,n,A){ye()}Or(e,r){return M.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new wD(this)}getSize(e){return M.resolve(this.size)}}class wD extends DT{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,A)=>{A.isValidDocument()?r.push(this.cr.addEntry(e,A)):this.cr.removeEntry(n)}),M.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.persistence=e,this.Nr=new HA(r=>ji(r),Wc),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mw,this.targetCount=0,this.kr=Gi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,A)=>r(A)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),M.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Gi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,M.resolve()}updateTargetData(e,r){return this.Kn(r),M.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,r,n){let A=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),A++)}),M.waitFor(s).next(()=>A)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return M.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),M.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const A=this.persistence.referenceDelegate,s=[];return A&&r.forEach(i=>{s.push(A.markPotentiallyOrphaned(e,i))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),M.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return M.resolve(n)}containsKey(e,r){return M.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new An(0),this.Kr=!1,this.Kr=!0,this.$r=new gD,this.referenceDelegate=e(this),this.Ur=new BD(this),this.indexManager=new AD,this.remoteDocumentCache=function(A){return new mD(A)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new bT(r),this.Gr=new hD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new fD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new pD(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){te("MemoryPersistence","Starting transaction:",e);const A=new vD(this.Qr.next());return this.referenceDelegate.zr(),n(A).next(s=>this.referenceDelegate.jr(A).next(()=>s)).toPromise().then(s=>(A.raiseOnCommittedEvent(),s))}Hr(e,r){return M.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class vD extends _b{constructor(e){super(),this.currentSequenceNumber=e}}class Sf{constructor(e){this.persistence=e,this.Jr=new Mw,this.Yr=null}static Zr(e){return new Sf(e)}get Xr(){if(this.Yr)return this.Yr;throw ye()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),M.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),M.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),M.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(A=>this.Xr.add(A.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(A=>{A.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,n=>{const A=fe.fromPath(n);return this.ei(e,A).next(s=>{s||r.removeEntry(A,Qe.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return M.or([()=>M.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Sh{constructor(e,r){this.persistence=e,this.ti=new HA(n=>jr(n.path),(n,A)=>n.isEqual(A)),this.garbageCollector=NT(this,r)}static Zr(e,r){return new Sh(e,r)}zr(){}jr(e){return M.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(A=>n+A))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return M.forEach(this.ti,(n,A)=>this.nr(e,n,A).next(s=>s?M.resolve():r(A)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const A=this.persistence.getRemoteDocumentCache(),s=A.newChangeBuffer();return A.Or(e,i=>this.nr(e,i,r).next(a=>{a||(n++,s.removeEntry(i,Qe.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),M.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),M.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),M.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Nd(e.data.value)),r}nr(e,r,n){return M.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const A=this.ti.get(r);return M.resolve(A!==void 0&&A>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.serializer=e}O(e,r,n,A){const s=new Cf("createOrUpgrade",r);n<1&&A>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yy,{unique:!0}),o.createObjectStore("documentMutations")}(e),Mx(e),function(o){o.createObjectStore("remoteDocuments")}(e));let i=M.resolve();return n<3&&A>=3&&(n!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),Mx(e)),i=i.next(()=>function(o){const c=o.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Qe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),n<4&&A>=4&&(n!==0&&(i=i.next(()=>function(o,c){return c.store("mutations").U().next(d=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yy,{unique:!0});const h=c.store("mutations"),f=d.map(w=>h.put(w));return M.waitFor(f)})}(e,s))),i=i.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&A>=5&&(i=i.next(()=>this.ni(s))),n<6&&A>=6&&(i=i.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&A>=7&&(i=i.next(()=>this.ii(s))),n<8&&A>=8&&(i=i.next(()=>this.si(e,s))),n<9&&A>=9&&(i=i.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&A>=10&&(i=i.next(()=>this.oi(s))),n<11&&A>=11&&(i=i.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&A>=12&&(i=i.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:A4});c.createIndex("collectionPathOverlayIndex",s4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",i4,{unique:!1})})(e)})),n<13&&A>=13&&(i=i.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:$N});c.createIndex("documentKeyIndex",WN),c.createIndex("collectionGroupIndex",qN)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&A>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&A>=15&&(i=i.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:e4}).createIndex("sequenceNumberIndex",t4,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:r4}).createIndex("documentKeyIndex",n4,{unique:!1})}(e))),n<16&&A>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&A>=17&&(i=i.next(()=>{(function(o){o.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,A)=>{r+=Uh(A)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(A=>M.forEach(A,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(a=>M.forEach(a,o=>{_e(o.userId===s.userId);const c=Bi(this.serializer,o);return UT(e,s.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(A=>{const s=[];return n.J((i,a)=>{const o=new lt(i),c=function(h){return[0,jr(h)]}(o);s.push(r.get(c).next(d=>d?M.resolve():(h=>r.put({targetId:0,path:jr(h),sequenceNumber:A.highestListenSequenceNumber}))(o)))}).next(()=>M.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:ZN});const n=r.store("collectionParents"),A=new Lw,s=i=>{if(A.add(i)){const a=i.lastSegment(),o=i.popLast();return n.put({collectionId:a,parent:jr(o)})}};return r.store("remoteDocuments").J({H:!0},(i,a)=>{const o=new lt(i);return s(o.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,a,o],c)=>{const d=eA(a);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,A)=>{const s=_l(A),i=TT(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),A=[];return n.J((s,i)=>{const a=r.store("remoteDocumentsV14"),o=function(h){return h.document?new fe(lt.fromString(h.document.name).popFirst(5)):h.noDocument?fe.fromSegments(h.noDocument.path):h.unknownDocument?fe.fromSegments(h.unknownDocument.path):ye()}(i).path.toArray(),c={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};A.push(a.put(c))}).next(()=>M.waitFor(A))}ai(e,r){const n=r.store("mutations"),A=PT(this.serializer),s=new jw(Sf.Zr,this.serializer.ct);return n.U().next(i=>{const a=new Map;return i.forEach(o=>{var c;let d=(c=a.get(o.userId))!==null&&c!==void 0?c:Je();Bi(this.serializer,o).keys().forEach(h=>d=d.add(h)),a.set(o.userId,d)}),M.forEach(a,(o,c)=>{const d=new gr(c),h=Qf.lt(this.serializer,d),f=s.getIndexManager(d),w=Uf.lt(d,this.serializer,f,s.referenceDelegate);return new LT(A,w,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Fm(r,An.oe),o).next()})})}}function Mx(t){t.createObjectStore("targetDocuments",{keyPath:XN}).createIndex("documentTargetsIndex",YN,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JN,{unique:!0}),t.createObjectStore("targetGlobal")}const qg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ow{constructor(e,r,n,A,s,i,a,o,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Ow.D())throw new ee(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lD(this,A),this.Ai=r+"main",this.serializer=new bT(o),this.Ri=new AA(this.Ai,this.hi,new yD(this.serializer)),this.$r=new Y4,this.Ur=new iD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PT(this.serializer),this.Gr=new X4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Zt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(O.FAILED_PRECONDITION,qg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new An(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ei(e))return te("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ul(e).get("owner").next(r=>M.resolve(this.vi(r)))}Ci(e){return zu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=cr(r,"clientMetadata");return n.U().next(A=>{const s=this.xi(A,18e5),i=A.filter(a=>s.indexOf(a)===-1);return M.forEach(i,a=>n.delete(a.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):ul(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new ee(O.FAILED_PRECONDITION,qg);return!1}}return!(!this.networkEnabled||!this.inForeground)||zu(e).U().next(n=>this.xi(n,5e3).find(A=>{if(this.clientId!==A.clientId){const s=!this.networkEnabled&&A.networkEnabled,i=!this.inForeground&&A.inForeground,a=this.networkEnabled===A.networkEnabled;if(s||i&&a)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&te("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Fm(e,An.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zu(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Uf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Qf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){te("IndexedDbPersistence","Starting transaction:",e);const A=r==="readonly"?"readonly":"readwrite",s=function(o){return o===17?l4:o===16?a4:o===15?Ew:o===14?Sb:o===13?Ub:o===12?o4:o===11?Qb:void ye()}(this.hi);let i;return this.Ri.runTransaction(e,A,s,a=>(i=new Fm(a,this.Qr?this.Qr.next():An.oe),r==="readwrite-primary"?this.wi(i).next(o=>!!o||this.Si(i)).next(o=>{if(!o)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ee(O.FAILED_PRECONDITION,Eb);return n(i)}).next(o=>this.Di(i).next(()=>o)):this.Ki(i).next(()=>n(i)))).then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e){return ul(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new ee(O.FAILED_PRECONDITION,qg)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ul(e).put("owner",r)}static D(){return AA.D()}bi(e){const r=ul(e);return r.get("owner").next(n=>this.vi(n)?(te("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):M.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Zt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;ib()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return te("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Zt("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ul(t){return cr(t,"owner")}function zu(t){return cr(t,"clientMetadata")}function Hw(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,r,n,A){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=A}static Wi(e,r){let n=Je(),A=Je();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:A=A.add(s.doc.key)}return new Vw(e,r.fromCache,n,A)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ib()?8:bb(lr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,A){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,A,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new xD;return this.Xi(e,r,i).next(a=>{if(s.result=a,this.zi)return this.es(e,r,i,a.size)})}).next(()=>s.result)}es(e,r,n,A){return n.documentReadCount<this.ji?(wo()<=at.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Bo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(wo()<=at.DEBUG&&te("QueryEngine","Query:",Bo(r),"scans",n.documentReadCount,"local documents and returns",A,"documents as results."),n.documentReadCount>this.Hi*A?(wo()<=at.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Bo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(r))):M.resolve())}Yi(e,r){if(ux(r))return M.resolve(null);let n=Or(r);return this.indexManager.getIndexType(e,n).next(A=>A===0?null:(r.limit!==null&&A===1&&(r=bh(r,null,"F"),n=Or(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=Je(...s);return this.Ji.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,n).next(o=>{const c=this.ts(r,a);return this.ns(r,c,i,o.readTime)?this.Yi(e,bh(r,null,"F")):this.rs(e,c,r,o)}))})))}Zi(e,r,n,A){return ux(r)||A.isEqual(Qe.min())?M.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,A)?M.resolve(null):(wo()<=at.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),Bo(r)),this.rs(e,i,r,Cb(A,-1)).next(a=>a))})}ts(e,r){let n=new vt(Xb(e));return r.forEach((A,s)=>{Jc(e,s)&&(n=n.add(s))}),n}ns(e,r,n,A){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(A)>0)}Xi(e,r,n){return wo()<=at.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Bo(r)),this.Ji.getDocumentsMatchingQuery(e,r,xn.min(),n)}rs(e,r,n,A){return this.Ji.getDocumentsMatchingQuery(e,n,A).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,r,n,A){this.persistence=e,this.ss=r,this.serializer=A,this.os=new _t(Ve),this._s=new HA(s=>ji(s),Wc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function jT(t,e,r,n){return new CD(t,e,r,n)}async function OT(t,e){const r=ce(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let A;return r.mutationQueue.getAllMutationBatches(n).next(s=>(A=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],a=[];let o=Je();for(const c of A){i.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}return r.localDocuments.getDocuments(n,o).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:a}))})})}function ID(t,e){const r=ce(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const A=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,o,c,d){const h=c.batch,f=h.keys();let w=M.resolve();return f.forEach(v=>{w=w.next(()=>d.getEntry(o,v)).next(B=>{const _=c.docVersions.get(v);_e(_!==null),B.version.compareTo(_)<0&&(h.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),d.addEntry(B)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(o,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,A,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let o=Je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,A))})}function HT(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function ED(t,e){const r=ce(t),n=e.snapshotVersion;let A=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});A=r.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=A.get(h);if(!f)return;a.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,h)));let w=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(Kt.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,n)),A=A.insert(h,w),function(B,_,x){return B.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,w,d)&&a.push(r.Ur.updateTargetData(s,w))});let o=on(),c=Je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(VT(s,i,e.documentUpdates).next(d=>{o=d.Ps,c=d.Is})),!n.isEqual(Qe.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(h=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(d)}return M.waitFor(a).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,o,c)).next(()=>o)}).then(s=>(r.os=A,s))}function VT(t,e,r){let n=Je(),A=Je();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=on();return r.forEach((a,o)=>{const c=s.get(a);o.isFoundDocument()!==c.isFoundDocument()&&(A=A.add(a)),o.isNoDocument()&&o.version.isEqual(Qe.min())?(e.removeEntry(a,o.readTime),i=i.insert(a,o)):!c.isValidDocument()||o.version.compareTo(c.version)>0||o.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(o),i=i.insert(a,o)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",o.version)}),{Ps:i,Is:A}})}function _D(t,e){const r=ce(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ha(t,e){const r=ce(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let A;return r.Ur.getTargetData(n,e).next(s=>s?(A=s,M.resolve(A)):r.Ur.allocateTargetId(n).next(i=>(A=new yA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,A).next(()=>A))))}).then(n=>{const A=r.os.get(n.targetId);return(A===null||n.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function fa(t,e,r){const n=ce(t),A=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,A))}catch(i){if(!ei(i))throw i;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(A.target)}function kh(t,e,r){const n=ce(t);let A=Qe.min(),s=Je();return n.persistence.runTransaction("Execute query","readwrite",i=>function(o,c,d){const h=ce(o),f=h._s.get(d);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,Or(e)).next(a=>{if(a)return A=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,a.targetId).next(o=>{s=o})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?A:Qe.min(),r?s:Je())).next(a=>(zT(n,Jb(e),a),{documents:a,Ts:s})))}function KT(t,e){const r=ce(t),n=ce(r.Ur),A=r.os.get(e);return A?Promise.resolve(A.target):r.persistence.runTransaction("Get target data","readonly",s=>n.ot(s,e).next(i=>i?i.target:null))}function GT(t,e){const r=ce(t),n=r.us.get(e)||Qe.min();return r.persistence.runTransaction("Get new document changes","readonly",A=>r.cs.getAllFromCollectionGroup(A,e,Cb(n,-1),Number.MAX_SAFE_INTEGER)).then(A=>(zT(r,e,A),A))}function zT(t,e,r){let n=t.us.get(e)||Qe.min();r.forEach((A,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}async function bD(t,e,r,n){const A=ce(t);let s=Je(),i=on();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const a=A.cs.newChangeBuffer({trackRemovals:!0}),o=await ha(A,function(d){return Or(Ta(lt.fromString(`__bundle__/docs/${d}`)))}(n));return A.persistence.runTransaction("Apply bundle documents","readwrite",c=>VT(c,a,i).next(d=>(a.apply(c),d)).next(d=>A.Ur.removeMatchingKeysForTargetId(c,o.targetId).next(()=>A.Ur.addMatchingKeys(c,s,o.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function TD(t,e,r=Je()){const n=await ha(t,Or(Dw(e.bundledQuery))),A=ce(t);return A.persistence.runTransaction("Save named query","readwrite",s=>{const i=er(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return A.Gr.saveNamedQuery(s,e);const a=n.withResumeToken(Kt.EMPTY_BYTE_STRING,i);return A.os=A.os.insert(a.targetId,a),A.Ur.updateTargetData(s,a).next(()=>A.Ur.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>A.Ur.addMatchingKeys(s,r,n.targetId)).next(()=>A.Gr.saveNamedQuery(s,e))})}function jx(t,e){return`firestore_clients_${t}_${e}`}function Ox(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Jg(t,e){return`firestore_targets_${t}_${e}`}class Rh{constructor(e,r,n,A){this.user=e,this.batchId=r,this.state=n,this.error=A}static Rs(e,r,n){const A=JSON.parse(n);let s,i=typeof A=="object"&&["pending","acknowledged","rejected"].indexOf(A.state)!==-1&&(A.error===void 0||typeof A.error=="object");return i&&A.error&&(i=typeof A.error.message=="string"&&typeof A.error.code=="string",i&&(s=new ee(A.error.code,A.error.message))),i?new Rh(e,r,A.state,s):(Zt("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wl{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let A,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(A=new ee(n.error.code,n.error.message))),s?new Wl(e,n.state,A):(Zt("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let A=typeof n=="object"&&n.activeTargetIds instanceof Array,s=Tw();for(let i=0;A&&i<n.activeTargetIds.length;++i)A=Tb(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return A?new Nh(e,s):(Zt("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Kw{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Kw(r.clientId,r.onlineState):(Zt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Vm{constructor(){this.activeTargetIds=Tw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xg{constructor(e,r,n,A,s){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=A,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new _t(Ve),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=jx(this.persistenceKey,this.ps),this.vs=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Vm),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Os=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const A=this.getItem(jx(this.persistenceKey,n));if(A){const s=Nh.Rs(n,A);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,A)=>{A.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(Jg(this.persistenceKey,e));if(A){const s=Wl.Rs(e,A);s&&(n=s.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jg(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(A=>{this.Qs(A)}),this.currentUser=e,n.forEach(A=>{this.addPendingMutation(A)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return te("SharedClientState","READ",e,r),r}setItem(e,r){te("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){te("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(te("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Zt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(s){let i=An.oe;if(s!=null)try{const a=JSON.parse(s);_e(typeof a=="number"),i=a}catch(a){Zt("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(r.newValue);n!==An.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(A=>this.syncEngine.eo(A)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const A=new Rh(this.currentUser,e,r,n),s=Ox(this.persistenceKey,this.currentUser,e);this.setItem(s,A.Vs())}Qs(e){const r=Ox(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const A=Jg(this.persistenceKey,e),s=new Wl(e,r,n);this.setItem(A,s.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Nh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),A=Number(n[1]),s=n[2]!==void 0?n[2]:null;return Rh.Rs(new gr(s),A,r)}Ys(e,r){const n=this.Ms.exec(e),A=Number(n[1]);return Wl.Rs(A,r)}Ls(e){return Kw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);te("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),A=this.ks(this.Ss),s=this.ks(n),i=[],a=[];return s.forEach(o=>{A.has(o)||i.push(o)}),A.forEach(o=>{s.has(o)||a.push(o)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Tw();return e.forEach((n,A)=>{r=r.unionWith(A.activeTargetIds)}),r}}class $T{constructor(){this.so=new Vm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vm,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function Yg(){return $u===null?$u=function(){return 268435456+Math.round(2147483648*Math.random())}():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="WebChannelConnection";class SD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${A}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${A}`:`project_id=${A}&database_id=${s}`}get Fo(){return!1}Mo(r,n,A,s,i){const a=Yg(),o=this.xo(r,n.toUriEncodedString());te("RestConnection",`Sending RPC '${r}' ${a}:`,o,A);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,i),this.No(r,o,c,A).then(d=>(te("RestConnection",`Received RPC '${r}' ${a}: `,d),d),d=>{throw yn("RestConnection",`RPC '${r}' ${a} failed with error: `,d,"url: ",o,"request:",A),d})}Lo(r,n,A,s,i,a){return this.Mo(r,n,A,s,i)}Oo(r,n,A){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),A&&A.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const A=QD[r];return`${this.Do}/v1/${n}:${A}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,A){const s=Yg();return new Promise((i,a)=>{const o=new fb;o.setWithCredentials(!0),o.listenOnce(gb.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Sd.NO_ERROR:const d=o.getResponseJson();te(Rr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case Sd.TIMEOUT:te(Rr,`RPC '${e}' ${s} timed out`),a(new ee(O.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:const h=o.getStatus();if(te(Rr,`RPC '${e}' ${s} failed with status:`,h,"response text:",o.getResponseText()),h>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const v=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(x)>=0?x:O.UNKNOWN}(w.status);a(new ee(v,w.message))}else a(new ee(O.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ee(O.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{te(Rr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(A);te(Rr,`RPC '${e}' ${s} sending request:`,A),o.send(r,"POST",c,n,15)})}Bo(e,r,n){const A=Yg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=wb(),a=mb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const d=s.join("");te(Rr,`Creating RPC '${e}' stream ${A}: ${d}`,o);const h=i.createWebChannel(d,o);let f=!1,w=!1;const v=new UD({Io:_=>{w?te(Rr,`Not sending because RPC '${e}' stream ${A} is closed:`,_):(f||(te(Rr,`Opening RPC '${e}' stream ${A} transport.`),h.open(),f=!0),te(Rr,`RPC '${e}' stream ${A} sending:`,_),h.send(_))},To:()=>h.close()}),B=(_,x,m)=>{_.listen(x,I=>{try{m(I)}catch(F){setTimeout(()=>{throw F},0)}})};return B(h,Cl.EventType.OPEN,()=>{w||(te(Rr,`RPC '${e}' stream ${A} transport opened.`),v.yo())}),B(h,Cl.EventType.CLOSE,()=>{w||(w=!0,te(Rr,`RPC '${e}' stream ${A} transport closed`),v.So())}),B(h,Cl.EventType.ERROR,_=>{w||(w=!0,yn(Rr,`RPC '${e}' stream ${A} transport errored:`,_),v.So(new ee(O.UNAVAILABLE,"The operation could not be completed")))}),B(h,Cl.EventType.MESSAGE,_=>{var x;if(!w){const m=_.data[0];_e(!!m);const I=m,F=I.error||((x=I[0])===null||x===void 0?void 0:x.error);if(F){te(Rr,`RPC '${e}' stream ${A} received error:`,F);const R=F.status;let Q=function(E){const U=nr[E];if(U!==void 0)return uT(U)}(R),y=F.message;Q===void 0&&(Q=O.INTERNAL,y="Unknown error status: "+R+" with message "+F.message),w=!0,v.So(new ee(Q,y)),h.close()}else te(Rr,`RPC '${e}' stream ${A} received:`,m),v.bo(m)}}),B(a,pb.STAT_EVENT,_=>{_.stat===bm.PROXY?te(Rr,`RPC '${e}' stream ${A} detected buffering proxy`):_.stat===bm.NOPROXY&&te(Rr,`RPC '${e}' stream ${A} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){return typeof window<"u"?window:null}function Md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){return new j4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,r,n=1e3,A=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=A,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),A=Math.max(0,r-n);A>0&&te("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,A,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,r,n,A,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=A,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===O.RESOURCE_EXHAUSTED?(Zt(r.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,A])=>{this.Yo===r&&this.P_(n,A)},n=>{e(()=>{const A=new ee(O.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(A)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(A=>{n(()=>this.I_(A))}),this.stream.onMessage(A=>{n(()=>++this.e_==1?this.E_(A):this.onNext(A))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kD extends qT{constructor(e,r,n,A,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,A,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=V4(this.serializer,e),n=function(s){if(!("targetChange"in s))return Qe.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Qe.min():i.readTime?er(i.readTime):Qe.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Lm(this.serializer),r.addTarget=function(s,i){let a;const o=i.target;if(a=Eh(o)?{documents:yT(s,o)}:{query:Ff(s,o)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=gT(s,i.resumeToken);const c=Dm(s,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(Qe.min())>0){a.readTime=da(s,i.snapshotVersion.toTimestamp());const c=Dm(s,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=G4(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Lm(this.serializer),r.removeTarget=e,this.a_(r)}}class RD extends qT{constructor(e,r,n,A,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,A,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=K4(e.writeResults,e.commitTime),n=er(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Lm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Qc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND extends class{}{constructor(e,r,n,A){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=A,this.y_=!1}w_(){if(this.y_)throw new ee(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,Pm(r,n),A,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(O.UNKNOWN,s.toString())})}Lo(e,r,n,A,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Lo(e,Pm(r,n),A,i,a,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(O.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class DD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zt(r),this.D_=!1):te("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,r,n,A,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{ri(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=ce(o);c.L_.add(4),await Ua(c),c.q_.set("Unknown"),c.L_.delete(4),await tu(c)}(this))})}),this.q_=new DD(n,A)}}async function tu(t){if(ri(t))for(const e of t.B_)await e(!0)}async function Ua(t){for(const e of t.B_)await e(!1)}function kf(t,e){const r=ce(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),Ww(r)?$w(r):ka(r).r_()&&zw(r,e))}function ga(t,e){const r=ce(t),n=ka(r);r.N_.delete(e),n.r_()&&JT(r,e),r.N_.size===0&&(n.r_()?n.o_():ri(r)&&r.q_.set("Unknown"))}function zw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ka(t).A_(e)}function JT(t,e){t.Q_.xe(e),ka(t).R_(e)}function $w(t){t.Q_=new D4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.q_.v_()}function Ww(t){return ri(t)&&!ka(t).n_()&&t.N_.size>0}function ri(t){return ce(t).L_.size===0}function XT(t){t.Q_=void 0}async function LD(t){t.q_.set("Online")}async function MD(t){t.N_.forEach((e,r)=>{zw(t,e)})}async function jD(t,e){XT(t),Ww(t)?(t.q_.M_(e),$w(t)):t.q_.set("Unknown")}async function OD(t,e,r){if(t.q_.set("Online"),e instanceof fT&&e.state===2&&e.cause)try{await async function(A,s){const i=s.cause;for(const a of s.targetIds)A.N_.has(a)&&(await A.remoteSyncer.rejectListen(a,i),A.N_.delete(a),A.Q_.removeTarget(a))}(t,e)}catch(n){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Dh(t,n)}else if(e instanceof Ld?t.Q_.Ke(e):e instanceof hT?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Qe.min()))try{const n=await HT(t.localStore);r.compareTo(n)>=0&&await function(s,i){const a=s.Q_.rt(i);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,c)=>{const d=s.N_.get(o);if(!d)return;s.N_.set(o,d.withResumeToken(Kt.EMPTY_BYTE_STRING,d.snapshotVersion)),JT(s,o);const h=new yA(d.target,o,c,d.sequenceNumber);zw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){te("RemoteStore","Failed to raise snapshot:",n),await Dh(t,n)}}async function Dh(t,e,r){if(!ei(e))throw e;t.L_.add(1),await Ua(t),t.q_.set("Offline"),r||(r=()=>HT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await tu(t)})}function YT(t,e){return e().catch(r=>Dh(t,r,e))}async function Sa(t){const e=ce(t),r=Ks(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HD(e);)try{const A=await _D(e.localStore,n);if(A===null){e.O_.length===0&&r.o_();break}n=A.batchId,VD(e,A)}catch(A){await Dh(e,A)}ZT(e)&&e1(e)}function HD(t){return ri(t)&&t.O_.length<10}function VD(t,e){t.O_.push(e);const r=Ks(t);r.r_()&&r.V_&&r.m_(e.mutations)}function ZT(t){return ri(t)&&!Ks(t).n_()&&t.O_.length>0}function e1(t){Ks(t).start()}async function KD(t){Ks(t).p_()}async function GD(t){const e=Ks(t);for(const r of t.O_)e.m_(r.mutations)}async function zD(t,e,r){const n=t.O_.shift(),A=Sw.from(n,e,r);await YT(t,()=>t.remoteSyncer.applySuccessfulWrite(A)),await Sa(t)}async function $D(t,e){e&&Ks(t).V_&&await async function(n,A){if(function(i){return cT(i)&&i!==O.ABORTED}(A.code)){const s=n.O_.shift();Ks(n).s_(),await YT(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,A)),await Sa(n)}}(t,e),ZT(t)&&e1(t)}async function Vx(t,e){const r=ce(t);r.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const n=ri(r);r.L_.add(3),await Ua(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await tu(r)}async function Km(t,e){const r=ce(t);e?(r.L_.delete(2),await tu(r)):e||(r.L_.add(2),await Ua(r),r.q_.set("Unknown"))}function ka(t){return t.K_||(t.K_=function(r,n,A){const s=ce(r);return s.w_(),new kD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:LD.bind(null,t),Ro:MD.bind(null,t),mo:jD.bind(null,t),d_:OD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ww(t)?$w(t):t.q_.set("Unknown")):(await t.K_.stop(),XT(t))})),t.K_}function Ks(t){return t.U_||(t.U_=function(r,n,A){const s=ce(r);return s.w_(),new RD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:KD.bind(null,t),mo:$D.bind(null,t),f_:GD.bind(null,t),g_:zD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sa(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,r,n,A,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=A,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,A,s){const i=Date.now()+n,a=new qw(e,r,i,A,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ra(t,e){if(Zt("AsyncQueue",`${e}: ${t}`),ei(t))return new ee(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.comparator=e?(r,n)=>e(r,n)||fe.comparator(r.key,n.key):(r,n)=>fe.comparator(r.key,n.key),this.keyedMap=Il(),this.sortedSet=new _t(this.comparator)}static emptySet(e){return new Go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const A=r.getNext().key,s=n.getNext().key;if(!A.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Go;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.W_=new _t(fe.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):ye():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class pa{constructor(e,r,n,A,s,i,a,o,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=A,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,A,s){const i=[];return r.forEach(a=>{i.push({type:0,doc:a})}),new pa(e,r,Go.emptySet(r),i,n,A,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let A=0;A<r.length;A++)if(r[A].type!==n[A].type||!r[A].doc.isEqual(n[A].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class qD{constructor(){this.queries=Gx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const A=ce(r),s=A.queries;A.queries=Gx(),s.forEach((i,a)=>{for(const o of a.j_)o.onError(n)})})(this,new ee(O.ABORTED,"Firestore shutting down"))}}function Gx(){return new HA(t=>qb(t),qc)}async function Jw(t,e){const r=ce(t);let n=3;const A=e.query;let s=r.queries.get(A);s?!s.H_()&&e.J_()&&(n=2):(s=new WD,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(A,!0);break;case 1:s.z_=await r.onListen(A,!1);break;case 2:await r.onFirstRemoteStoreListen(A)}}catch(i){const a=Ra(i,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(a)}r.queries.set(A,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&Yw(r)}async function Xw(t,e){const r=ce(t),n=e.query;let A=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?A=e.J_()?0:1:!s.H_()&&e.J_()&&(A=2))}switch(A){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function JD(t,e){const r=ce(t);let n=!1;for(const A of e){const s=A.query,i=r.queries.get(s);if(i){for(const a of i.j_)a.X_(A)&&(n=!0);i.z_=A}}n&&Yw(r)}function XD(t,e,r){const n=ce(t),A=n.queries.get(e);if(A)for(const s of A.j_)s.onError(r);n.queries.delete(e)}function Yw(t){t.Y_.forEach(e=>{e.next()})}var Gm,zx;(zx=Gm||(Gm={})).ea="default",zx.Cache="cache";class Zw{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const A of e.docChanges)A.type!==3&&n.push(A);e=new pa(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gm.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.serializer=e}Es(e){return sA(this.serializer,e)}ds(e){return e.metadata.exists?vT(this.serializer,e.document,!1):Ut.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return er(e)}}class ZD{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=t1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=lt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new $x(this.serializer);for(const A of e)if(A.metadata.queries){const s=n.Es(A.metadata.name);for(const i of A.metadata.queries){const a=(r.get(i)||Je()).add(s);r.set(i,a)}}return r}async complete(){const e=await bD(this.localStore,new $x(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await TD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function t1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.key=e}}class n1{constructor(e){this.key=e}}class A1{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=Xb(e),this.Ra=new Go(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Kx,A=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=A,a=!1;const o=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,c=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal((d,h)=>{const f=A.get(d),w=Jc(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),B=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let _=!1;f&&w?f.data.isEqual(w.data)?v!==B&&(n.track({type:3,doc:w}),_=!0):this.ga(f,w)||(n.track({type:2,doc:w}),_=!0,(o&&this.Aa(w,o)>0||c&&this.Aa(w,c)<0)&&(a=!0)):!f&&w?(n.track({type:0,doc:w}),_=!0):f&&!w&&(n.track({type:1,doc:f}),_=!0,(o||c)&&(a=!0)),_&&(w?(i=i.add(w),s=B?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,A){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(w,v){const B=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return B(w)-B(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),A=A!=null&&A;const a=r&&!A?this.ya():[],o=this.da.size===0&&this.current&&!A?1:0,c=o!==this.Ea;return this.Ea=o,i.length!==0||c?{snapshot:new pa(this.query,e.Ra,s,i,e.mutatedKeys,o===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Kx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new n1(n))}),this.da.forEach(n=>{e.has(n)||r.push(new r1(n))}),r}ba(e){this.Ta=e.Ts,this.da=Je();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class eP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class tP{constructor(e){this.key=e,this.va=!1}}class rP{constructor(e,r,n,A,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=A,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new HA(a=>qb(a),qc),this.Ma=new Map,this.xa=new Set,this.Oa=new _t(fe.comparator),this.Na=new Map,this.La=new Mw,this.Ba={},this.ka=new Map,this.qa=Gi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nP(t,e,r=!0){const n=Rf(t);let A;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),A=s.view.Da()):A=await s1(n,e,r,!0),A}async function AP(t,e){const r=Rf(t);await s1(r,e,!0,!1)}async function s1(t,e,r,n){const A=await ha(t.localStore,Or(e)),s=A.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let a;return n&&(a=await eB(t,e,s,i==="current",A.resumeToken)),t.isPrimaryClient&&r&&kf(t.remoteStore,A),a}async function eB(t,e,r,n,A){t.Ka=(h,f,w)=>async function(B,_,x,m){let I=_.view.ma(x);I.ns&&(I=await kh(B.localStore,_.query,!1).then(({documents:y})=>_.view.ma(y,I)));const F=m&&m.targetChanges.get(_.targetId),R=m&&m.targetMismatches.get(_.targetId)!=null,Q=_.view.applyChanges(I,B.isPrimaryClient,F,R);return zm(B,_.targetId,Q.wa),Q.snapshot}(t,h,f,w);const s=await kh(t.localStore,e,!0),i=new A1(e,s.Ts),a=i.ma(s.documents),o=Zc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",A),c=i.applyChanges(a,t.isPrimaryClient,o);zm(t,r,c.wa);const d=new eP(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function sP(t,e,r){const n=ce(t),A=n.Fa.get(e),s=n.Ma.get(A.targetId);if(s.length>1)return n.Ma.set(A.targetId,s.filter(i=>!qc(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(A.targetId),n.sharedClientState.isActiveQueryTarget(A.targetId)||await fa(n.localStore,A.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(A.targetId),r&&ga(n.remoteStore,A.targetId),ma(n,A.targetId)}).catch(Zs)):(ma(n,A.targetId),await fa(n.localStore,A.targetId,!0))}async function iP(t,e){const r=ce(t),n=r.Fa.get(e),A=r.Ma.get(n.targetId);r.isPrimaryClient&&A.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),ga(r.remoteStore,n.targetId))}async function oP(t,e,r){const n=AB(t);try{const A=await function(i,a){const o=ce(i),c=Lt.now(),d=a.reduce((w,v)=>w.add(v.key),Je());let h,f;return o.persistence.runTransaction("Locally write mutations","readwrite",w=>{let v=on(),B=Je();return o.cs.getEntries(w,d).next(_=>{v=_,v.forEach((x,m)=>{m.isValidDocument()||(B=B.add(x))})}).next(()=>o.localDocuments.getOverlayedDocuments(w,v)).next(_=>{h=_;const x=[];for(const m of a){const I=k4(m,h.get(m.key).overlayedDocument);I!=null&&x.push(new VA(m.key,I,Lb(I.value.mapValue),Pt.exists(!0)))}return o.mutationQueue.addMutationBatch(w,c,x,a)}).next(_=>{f=_;const x=_.applyToLocalDocumentSet(h,B);return o.documentOverlayCache.saveOverlays(w,_.batchId,x)})}).then(()=>({batchId:f.batchId,changes:Zb(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(A.batchId),function(i,a,o){let c=i.Ba[i.currentUser.toKey()];c||(c=new _t(Ve)),c=c.insert(a,o),i.Ba[i.currentUser.toKey()]=c}(n,A.batchId,r),await KA(n,A.changes),await Sa(n.remoteStore)}catch(A){const s=Ra(A,"Failed to persist write");r.reject(s)}}async function i1(t,e){const r=ce(t);try{const n=await ED(r.localStore,e);e.targetChanges.forEach((A,s)=>{const i=r.Na.get(s);i&&(_e(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1),A.addedDocuments.size>0?i.va=!0:A.modifiedDocuments.size>0?_e(i.va):A.removedDocuments.size>0&&(_e(i.va),i.va=!1))}),await KA(r,n,e)}catch(n){await Zs(n)}}function Wx(t,e,r){const n=ce(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const A=[];n.Fa.forEach((s,i)=>{const a=i.view.Z_(e);a.snapshot&&A.push(a.snapshot)}),function(i,a){const o=ce(i);o.onlineState=a;let c=!1;o.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&Yw(o)}(n.eventManager,e),A.length&&n.Ca.d_(A),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function aP(t,e,r){const n=ce(t);n.sharedClientState.updateQueryState(e,"rejected",r);const A=n.Na.get(e),s=A&&A.key;if(s){let i=new _t(fe.comparator);i=i.insert(s,Ut.newNoDocument(s,Qe.min()));const a=Je().add(s),o=new Yc(Qe.min(),new Map,new _t(Ve),i,a);await i1(n,o),n.Oa=n.Oa.remove(s),n.Na.delete(e),nB(n)}else await fa(n.localStore,e,!1).then(()=>ma(n,e,r)).catch(Zs)}async function lP(t,e){const r=ce(t),n=e.batch.batchId;try{const A=await ID(r.localStore,e);rB(r,n,null),tB(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await KA(r,A)}catch(A){await Zs(A)}}async function cP(t,e,r){const n=ce(t);try{const A=await function(i,a){const o=ce(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return o.mutationQueue.lookupMutationBatch(c,a).next(h=>(_e(h!==null),d=h.keys(),o.mutationQueue.removeMutationBatch(c,h))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>o.localDocuments.getDocuments(c,d))})}(n.localStore,e);rB(n,e,r),tB(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await KA(n,A)}catch(A){await Zs(A)}}async function uP(t,e){const r=ce(t);ri(r.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const a=ce(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(r.localStore);if(n===-1)return void e.resolve();const A=r.ka.get(n)||[];A.push(e),r.ka.set(n,A)}catch(n){const A=Ra(n,"Initialization of waitForPendingWrites() operation failed");e.reject(A)}}function tB(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function rB(t,e,r){const n=ce(t);let A=n.Ba[n.currentUser.toKey()];if(A){const s=A.get(e);s&&(r?s.reject(r):s.resolve(),A=A.remove(e)),n.Ba[n.currentUser.toKey()]=A}}function ma(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||o1(t,n)})}function o1(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(ga(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),nB(t))}function zm(t,e,r){for(const n of r)n instanceof r1?(t.La.addReference(n.key,e),dP(t,n)):n instanceof n1?(te("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||o1(t,n.key)):ye()}function dP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(te("SyncEngine","New document in limbo: "+r),t.xa.add(n),nB(t))}function nB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new fe(lt.fromString(e)),n=t.qa.next();t.Na.set(n,new tP(r)),t.Oa=t.Oa.insert(r,n),kf(t.remoteStore,new yA(Or(Ta(r.path)),n,"TargetPurposeLimboResolution",An.oe))}}async function KA(t,e,r){const n=ce(t),A=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((a,o)=>{i.push(n.Ka(o,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(o.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(o.targetId,h?"current":"not-current")}if(c){A.push(c);const h=Vw.Wi(o.targetId,c);s.push(h)}}))}),await Promise.all(i),n.Ca.d_(A),await async function(o,c){const d=ce(o);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.$i,w=>d.persistence.referenceDelegate.addReference(h,f.targetId,w)).next(()=>M.forEach(f.Ui,w=>d.persistence.referenceDelegate.removeReference(h,f.targetId,w)))))}catch(h){if(!ei(h))throw h;te("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const w=d.os.get(f),v=w.snapshotVersion,B=w.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(f,B)}}}(n.localStore,s))}async function hP(t,e){const r=ce(t);if(!r.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const n=await OT(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(a=>{a.forEach(o=>{o.reject(new ee(O.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await KA(r,n.hs)}}function fP(t,e){const r=ce(t),n=r.Na.get(e);if(n&&n.va)return Je().add(n.key);{let A=Je();const s=r.Ma.get(e);if(!s)return A;for(const i of s){const a=r.Fa.get(i);A=A.unionWith(a.view.Va)}return A}}async function gP(t,e){const r=ce(t),n=await kh(r.localStore,e.query,!0),A=e.view.ba(n);return r.isPrimaryClient&&zm(r,e.targetId,A.wa),A}async function pP(t,e){const r=ce(t);return GT(r.localStore,e).then(n=>KA(r,n))}async function mP(t,e,r,n){const A=ce(t),s=await function(a,o){const c=ce(a),d=ce(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,o).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(A.localStore,e);s!==null?(r==="pending"?await Sa(A.remoteStore):r==="acknowledged"||r==="rejected"?(rB(A,e,n||null),tB(A,e),function(a,o){ce(ce(a).mutationQueue).On(o)}(A.localStore,e)):ye(),await KA(A,s)):te("SyncEngine","Cannot apply mutation batch with id: "+e)}async function wP(t,e){const r=ce(t);if(Rf(r),AB(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),A=await qx(r,n.toArray());r.Qa=!0,await Km(r.remoteStore,!0);for(const s of A)kf(r.remoteStore,s)}else if(e===!1&&r.Qa!==!1){const n=[];let A=Promise.resolve();r.Ma.forEach((s,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):A=A.then(()=>(ma(r,i),fa(r.localStore,i,!0))),ga(r.remoteStore,i)}),await A,await qx(r,n),function(i){const a=ce(i);a.Na.forEach((o,c)=>{ga(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new _t(fe.comparator)}(r),r.Qa=!1,await Km(r.remoteStore,!1)}}async function qx(t,e,r){const n=ce(t),A=[],s=[];for(const i of e){let a;const o=n.Ma.get(i);if(o&&o.length!==0){a=await ha(n.localStore,Or(o[0]));for(const c of o){const d=n.Fa.get(c),h=await gP(n,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await KT(n.localStore,i);a=await ha(n.localStore,c),await eB(n,a1(c),i,!1,a.resumeToken)}A.push(a)}return n.Ca.d_(s),A}function a1(t){return zb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function BP(t){return function(r){return ce(ce(r).persistence).Qi()}(ce(t).localStore)}async function vP(t,e,r,n){const A=ce(t);if(A.Qa)return void te("SyncEngine","Ignoring unexpected query state notification.");const s=A.Ma.get(e);if(s&&s.length>0)switch(r){case"current":case"not-current":{const i=await GT(A.localStore,Jb(s[0])),a=Yc.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Kt.EMPTY_BYTE_STRING);await KA(A,i,a);break}case"rejected":await fa(A.localStore,e,!0),ma(A,e,n);break;default:ye()}}async function yP(t,e,r){const n=Rf(t);if(n.Qa){for(const A of e){if(n.Ma.has(A)&&n.sharedClientState.isActiveQueryTarget(A)){te("SyncEngine","Adding an already active target "+A);continue}const s=await KT(n.localStore,A),i=await ha(n.localStore,s);await eB(n,a1(s),i.targetId,!1,i.resumeToken),kf(n.remoteStore,i)}for(const A of r)n.Ma.has(A)&&await fa(n.localStore,A,!1).then(()=>{ga(n.remoteStore,A),ma(n,A)}).catch(Zs)}}function Rf(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aP.bind(null,e),e.Ca.d_=JD.bind(null,e.eventManager),e.Ca.$a=XD.bind(null,e.eventManager),e}function AB(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cP.bind(null,e),e}function xP(t,e,r){const n=ce(t);(async function(s,i,a){try{const o=await i.getMetadata();if(await function(w,v){const B=ce(w),_=er(v.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",x=>B.Gr.getBundleMetadata(x,v.id)).then(x=>!!x&&x.createTime.compareTo(_)>=0)}(s.localStore,o))return await i.close(),a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(t1(o));const c=new ZD(o,s.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&a._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await KA(s,h.Ia,void 0),await function(w,v){const B=ce(w);return B.persistence.runTransaction("Save bundle","readwrite",_=>B.Gr.saveBundleMetadata(_,v))}(s.localStore,o),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(o){return yn("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(n,e,r).then(A=>{n.sharedClientState.notifyBundleLoaded(A)})}class Gs{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return jT(this.persistence,new MT,e.initialUser,this.serializer)}Ga(e){return new jw(Sf.Zr,this.serializer)}Wa(e){return new $T}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gs.provider={build:()=>new Gs};class CP extends Gs{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){_e(this.persistence.referenceDelegate instanceof Sh);const n=this.persistence.referenceDelegate.garbageCollector;return new RT(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new jw(n=>Sh.Zr(n,r),this.serializer)}}class sB extends Gs{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await AB(this.Ja.syncEngine),await Sa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return jT(this.persistence,new MT,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new RT(n,e.asyncQueue,r)}Ha(e,r){const n=new KN(r,this.persistence);return new VN(e.asyncQueue,n)}Ga(e){const r=Hw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Pr.withCacheSize(this.cacheSizeBytes):Pr.DEFAULT;return new Ow(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,WT(),Md(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new $T}}class l1 extends sB{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Xg&&(this.sharedClientState.syncEngine={no:mP.bind(null,r),ro:vP.bind(null,r),io:yP.bind(null,r),Qi:BP.bind(null,r),eo:pP.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await wP(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=WT();if(!Xg.D(r))throw new ee(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Hw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xg(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class zs{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Wx(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=hP.bind(null,this.syncEngine),await Km(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qD}()}createDatastore(e){const r=eu(e.databaseInfo.databaseId),n=function(s){return new SD(s)}(e.databaseInfo);return function(s,i,a,o){return new ND(s,i,a,o)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,A,s,i,a){return new PD(n,A,s,i,a)}(this.localStore,this.datastore,e.asyncQueue,r=>Wx(this.syncEngine,r,0),function(){return Hx.D()?new Hx:new FD}())}createSyncEngine(e,r){return function(A,s,i,a,o,c,d){const h=new rP(A,s,i,a,o,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(A){const s=ce(A);te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ua(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}zs.provider={build:()=>new zs};function Jx(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new mr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const A=await this.iu(n);return new YD(JSON.parse(A),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ee(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(A,s){const i=ce(A),a={documents:s.map(h=>Fc(i.serializer,h))},o=await i.Lo("BatchGetDocuments",i.serializer.databaseId,lt.emptyPath(),a,s.length),c=new Map;o.forEach(h=>{const f=H4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());_e(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const A=fe.fromPath(n);this.mutations.push(new Qw(A,this.precondition(A)))}),await async function(n,A){const s=ce(n),i={writes:A.map(a=>Qc(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,lt.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw ye();r=Qe.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new ee(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Qe.min())?Pt.exists(!1):Pt.updateTime(r):Pt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Qe.min()))throw new ee(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pt.updateTime(r)}return Pt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,r,n,A,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=A,this.deferred=s,this._u=n.maxAttempts,this.t_=new Gw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new EP(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(A=>{this.lu(A)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!$c(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!cT(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,r,n,A,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=A,this.user=gr.UNAUTHENTICATED,this.clientId=xw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{te("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(te("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Ra(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Zg(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async A=>{n.isEqual(A)||(await OT(e.localStore,A),n=A)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Xx(t,e){t.asyncQueue.verifyOperationInProgress();const r=await iB(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Vx(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,A)=>Vx(e.remoteStore,A)),t._onlineComponents=e}async function iB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zg(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(A){return A.name==="FirebaseError"?A.code===O.FAILED_PRECONDITION||A.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11}(r))throw r;yn("Error using user provided cache. Falling back to memory cache: "+r),await Zg(t,new Gs)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await Zg(t,new Gs);return t._offlineComponents}async function Df(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Xx(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Xx(t,new zs))),t._onlineComponents}function c1(t){return iB(t).then(e=>e.persistence)}function Na(t){return iB(t).then(e=>e.localStore)}function u1(t){return Df(t).then(e=>e.remoteStore)}function oB(t){return Df(t).then(e=>e.syncEngine)}function d1(t){return Df(t).then(e=>e.datastore)}async function wa(t){const e=await Df(t),r=e.eventManager;return r.onListen=nP.bind(null,e.syncEngine),r.onUnlisten=sP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=AP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=iP.bind(null,e.syncEngine),r}function TP(t){return t.asyncQueue.enqueue(async()=>{const e=await c1(t),r=await u1(t);return e.setNetworkEnabled(!0),function(A){const s=ce(A);return s.L_.delete(0),tu(s)}(r)})}function FP(t){return t.asyncQueue.enqueue(async()=>{const e=await c1(t),r=await u1(t);return e.setNetworkEnabled(!1),async function(A){const s=ce(A);s.L_.add(0),await Ua(s),s.q_.set("Offline")}(r)})}function QP(t,e){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const a=await function(c,d){const h=ce(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(A,s);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new ee(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=Ra(a,`Failed to get document '${s} from cache`);i.reject(o)}}(await Na(t),e,r)),r.promise}function h1(t,e,r={}){const n=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,c){const d=new Nf({next:f=>{d.Za(),i.enqueueAndForget(()=>Xw(s,h));const w=f.docs.has(a);!w&&f.fromCache?c.reject(new ee(O.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&o&&o.source==="server"?c.reject(new ee(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Zw(Ta(a.path),d,{includeMetadataChanges:!0,_a:!0});return Jw(s,h)}(await wa(t),t.asyncQueue,e,r,n)),n.promise}function UP(t,e){const r=new mr;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const a=await kh(A,s,!0),o=new A1(s,a.Ts),c=o.ma(a.documents),d=o.applyChanges(c,!1);i.resolve(d.snapshot)}catch(a){const o=Ra(a,`Failed to execute query '${s} against cache`);i.reject(o)}}(await Na(t),e,r)),r.promise}function f1(t,e,r={}){const n=new mr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,c){const d=new Nf({next:f=>{d.Za(),i.enqueueAndForget(()=>Xw(s,h)),f.fromCache&&o.source==="server"?c.reject(new ee(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Zw(a,d,{includeMetadataChanges:!0,_a:!0});return Jw(s,h)}(await wa(t),t.asyncQueue,e,r,n)),n.promise}function SP(t,e,r){const n=new mr;return t.asyncQueue.enqueueAndForget(async()=>{try{const A=await d1(t);n.resolve(async function(i,a,o){var c;const d=ce(i),{request:h,ut:f,parent:w}=xT(d.serializer,$b(a),o);d.connection.Fo||delete h.parent;const v=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,w,h,1)).filter(_=>!!_.result);_e(v.length===1);const B=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(B).reduce((_,x)=>(_[f[x]]=B[x],_),{})}(A,e,r))}catch(A){n.reject(A)}}),n.promise}function kP(t,e){const r=new Nf(e);return t.asyncQueue.enqueueAndForget(async()=>function(A,s){ce(A).Y_.add(s),s.next()}(await wa(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(A,s){ce(A).Y_.delete(s)}(await wa(t),r))}}function RP(t,e,r,n){const A=function(i,a){let o;return o=typeof i=="string"?dT().encode(i):i,function(d,h){return new IP(d,h)}(function(d,h){if(d instanceof Uint8Array)return Jx(d,h);if(d instanceof ArrayBuffer)return Jx(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(r,eu(e));t.asyncQueue.enqueueAndForget(async()=>{xP(await oB(t),A,n)})}function NP(t,e){return t.asyncQueue.enqueue(async()=>function(n,A){const s=ce(n);return s.persistence.runTransaction("Get named query","readonly",i=>s.Gr.getNamedQuery(i,A))}(await Na(t),e))}function DP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,A){const s=ce(n),i=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",o=>i.getFieldIndexes(o).next(c=>function(h,f,w,v,B){h=[...h],f=[...f],h.sort(w),f.sort(w);const _=h.length,x=f.length;let m=0,I=0;for(;m<x&&I<_;){const F=w(h[I],f[m]);F<0?B(h[I++]):F>0?v(f[m++]):(m++,I++)}for(;m<x;)v(f[m++]);for(;I<_;)B(h[I++])}(c,A,MN,d=>{a.push(i.addFieldIndex(o,d))},d=>{a.push(i.deleteFieldIndex(o,d))})).next(()=>M.waitFor(a)))}(await Na(t),e))}function PP(t,e){return t.asyncQueue.enqueue(async()=>function(n,A){ce(n).ss.zi=A}(await Na(t),e))}function LP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=ce(r),A=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",s=>A.deleteAllFieldIndexes(s))}(await Na(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aB(t,e,r){if(!r)throw new ee(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function p1(t,e,r,n){if(e===!0&&n===!0)throw new ee(O.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Zx(t){if(!fe.isDocumentKey(t))throw new ee(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eC(t){if(fe.isDocumentKey(t))throw new ee(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye()}function tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Pf(t);throw new ee(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function m1(t,e){if(e<=0)throw new ee(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g1((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ee(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ee(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ee(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,A){return n.timeoutSeconds===A.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ru{constructor(e,r,n,A){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new vb;switch(n.type){case"firstParty":return new RN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ee(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Yx.get(r);n&&(te("ComponentProvider","Removing Datastore"),Yx.delete(r),n.terminate())}(this),Promise.resolve()}}function w1(t,e,r,n={}){var A;const s=(t=tt(t,ru))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&yn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let a,o;if(typeof n.mockUserToken=="string")a=n.mockUserToken,o=gr.MOCK_USER;else{a=nR(n.mockUserToken,(A=t._app)===null||A===void 0?void 0:A.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new ee(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new gr(c)}t._authCredentials=new UN(new Bb(a,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wr(this.firestore,e,this._query)}}class $t{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}}class Kn extends wr{constructor(e,r,n){super(e,r,Ta(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new fe(e))}withConverter(e){return new Kn(this.firestore,e,this._path)}}function $m(t,e,...r){if(t=Ct(t),aB("collection","path",e),t instanceof ru){const n=lt.fromString(e,...r);return eC(n),new Kn(t,null,n)}{if(!(t instanceof $t||t instanceof Kn))throw new ee(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(lt.fromString(e,...r));return eC(n),new Kn(t.firestore,null,n)}}function MP(t,e){if(t=tt(t,ru),aB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ee(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wr(t,null,function(n){return new OA(lt.emptyPath(),n)}(e))}function Xn(t,e,...r){if(t=Ct(t),arguments.length===1&&(e=xw.newId()),aB("doc","path",e),t instanceof ru){const n=lt.fromString(e,...r);return Zx(n),new $t(t,null,new fe(n))}{if(!(t instanceof $t||t instanceof Kn))throw new ee(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(lt.fromString(e,...r));return Zx(n),new $t(t.firestore,t instanceof Kn?t.converter:null,new fe(n))}}function jP(t,e){return t=Ct(t),e=Ct(e),(t instanceof $t||t instanceof Kn)&&(e instanceof $t||e instanceof Kn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function lB(t,e){return t=Ct(t),e=Ct(e),t instanceof wr&&e instanceof wr&&t.firestore===e.firestore&&qc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gw(this,"async_queue_retry"),this.Vu=()=>{const n=Md();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Md();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Md();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ei(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const A=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(n);throw Zt("INTERNAL UNHANDLED ERROR: ",A),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const A=qw.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(A),A}fu(){this.Eu&&ye()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function Wm(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const A=r;for(const s of n)if(s in A&&typeof A[s]=="function")return!0;return!1}(t,["next","error","complete"])}class B1{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=-1;class yt extends ru{constructor(e,r,n,A){super(e,r,n,A),this.type="firestore",this._queue=new rC,this._persistenceKey=(A==null?void 0:A.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rC(e),this._firestoreClient=void 0,await e}}}function HP(t,e,r){r||(r="(default)");const n=zc(t,"firestore");if(n.isInitialized(r)){const A=n.getImmediate({identifier:r}),s=n.getOptions(r);if(Ls(s,e))return A;throw new ee(O.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ee(O.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function v1(t,e){const r=typeof t=="object"?t:vw(),n=typeof t=="string"?t:e||"(default)",A=zc(r,"firestore").getImmediate({identifier:n});if(!A._initialized){const s=tR("firestore");s&&w1(A,...s)}return A}function Mt(t){if(t._terminated)throw new ee(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y1(t),t._firestoreClient}function y1(t){var e,r,n;const A=t._freezeSettings(),s=function(a,o,c,d){return new d4(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,g1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,A);t._componentsProvider||!((r=A.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=A.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:A.localCache._offlineComponentProvider,_online:A.localCache._onlineComponentProvider}),t._firestoreClient=new bP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}function VP(t,e){yn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return x1(t,zs.provider,{build:n=>new sB(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function KP(t){yn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();x1(t,zs.provider,{build:r=>new l1(r,e.cacheSizeBytes)})}function x1(t,e,r){if((t=tt(t,yt))._firestoreClient||t._terminated)throw new ee(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ee(O.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},y1(t)}function GP(t){if(t._initialized&&!t._terminated)throw new ee(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!AA.D())return Promise.resolve();const A=n+"main";await AA.delete(A)}(Hw(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function zP(t){return function(r){const n=new mr;return r.asyncQueue.enqueueAndForget(async()=>uP(await oB(r),n)),n.promise}(Mt(t=tt(t,yt)))}function $P(t){return TP(Mt(t=tt(t,yt)))}function WP(t){return FP(Mt(t=tt(t,yt)))}function qP(t){return fN(t.app,"firestore",t._databaseId.database),t._delete()}function JP(t,e){const r=Mt(t=tt(t,yt)),n=new B1;return RP(r,t._databaseId,e,n),n}function XP(t,e){return NP(Mt(t=tt(t,yt)),e).then(r=>r?new wr(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class C1{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(Kt.fromBase64String(e))}catch(r){throw new ee(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new $s(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ee(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function YP(){return new ni("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ee(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ee(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,A){if(n.length!==A.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==A[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=/^__.*__$/;class eL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new VA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Fa(e,this.data,r,this.fieldTransforms)}}class I1{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new VA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function E1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class Mf{constructor(e,r,n,A,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=A,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Mf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),A=this.Fu({path:n,xu:!1});return A.Ou(e),A}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),A=this.Fu({path:n,xu:!1});return A.vu(),A}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ph(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(E1(this.Cu)&&ZP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||eu(e)}Qu(e,r,n,A=!1){return new Mf({Cu:e,methodName:r,qu:n,path:St.emptyPath(),xu:!1,ku:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zi(t){const e=t._freezeSettings(),r=eu(t._databaseId);return new tL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function jf(t,e,r,n,A,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,A);pB("Data must be an object, but it was:",i,n);const a=T1(n,i);let o,c;if(s.merge)o=new sn(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Uc(e,h,r);if(!i.contains(f))throw new ee(O.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Q1(d,f)||d.push(f)}o=new sn(d),c=i.fieldTransforms.filter(h=>o.covers(h.field))}else o=null,c=i.fieldTransforms;return new eL(new _r(a),o,c)}class Au extends Ai{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Au}}function _1(t,e,r){return new Mf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cB extends Ai{_toFieldTransform(e){return new Xc(e.path,new ca)}isEqual(e){return e instanceof cB}}class uB extends Ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=_1(this,e,!0),n=this.Ku.map(s=>eo(s,r)),A=new Oi(n);return new Xc(e.path,A)}isEqual(e){return e instanceof uB&&Ls(this.Ku,e.Ku)}}class dB extends Ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=_1(this,e,!0),n=this.Ku.map(s=>eo(s,r)),A=new Hi(n);return new Xc(e.path,A)}isEqual(e){return e instanceof dB&&Ls(this.Ku,e.Ku)}}class hB extends Ai{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new ua(e.serializer,rT(e.serializer,this.$u));return new Xc(e.path,r)}isEqual(e){return e instanceof hB&&this.$u===e.$u}}function fB(t,e,r,n){const A=t.Qu(1,e,r);pB("Data must be an object, but it was:",A,n);const s=[],i=_r.empty();ti(n,(o,c)=>{const d=Of(e,o,r);c=Ct(c);const h=A.Nu(d);if(c instanceof Au)s.push(d);else{const f=eo(c,h);f!=null&&(s.push(d),i.set(d,f))}});const a=new sn(s);return new I1(i,a,A.fieldTransforms)}function gB(t,e,r,n,A,s){const i=t.Qu(1,e,r),a=[Uc(e,n,r)],o=[A];if(s.length%2!=0)throw new ee(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Uc(e,s[f])),o.push(s[f+1]);const c=[],d=_r.empty();for(let f=a.length-1;f>=0;--f)if(!Q1(c,a[f])){const w=a[f];let v=o[f];v=Ct(v);const B=i.Nu(w);if(v instanceof Au)c.push(w);else{const _=eo(v,B);_!=null&&(c.push(w),d.set(w,_))}}const h=new sn(c);return new I1(d,h,i.fieldTransforms)}function b1(t,e,r,n=!1){return eo(r,t.Qu(n?4:3,e))}function eo(t,e){if(F1(t=Ct(t)))return pB("Unsupported field value:",e,t),T1(t,e);if(t instanceof Ai)return function(n,A){if(!E1(A.Cu))throw A.Bu(`${n._methodName}() can only be used with update() and set()`);if(!A.path)throw A.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(A);s&&A.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,A){const s=[];let i=0;for(const a of n){let o=eo(a,A.Lu(i));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,A){if((n=Ct(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return rT(A.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Lt.fromDate(n);return{timestampValue:da(A.serializer,s)}}if(n instanceof Lt){const s=new Lt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:da(A.serializer,s)}}if(n instanceof Lf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof $s)return{bytesValue:gT(A.serializer,n._byteString)};if(n instanceof $t){const s=A.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw A.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Nw(n.firestore._databaseId||A.databaseId,n._key.path)}}if(n instanceof nu)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(o=>{if(typeof o!="number")throw a.Bu("VectorValues must only contain numeric values.");return Fw(a.serializer,o)})}}}}}}(n,A);throw A.Bu(`Unsupported field value: ${Pf(n)}`)}(t,e)}function T1(t,e){const r={};return Rb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(t,(n,A)=>{const s=eo(A,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function F1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof Lf||t instanceof $s||t instanceof $t||t instanceof Ai||t instanceof nu)}function pB(t,e,r){if(!F1(r)||!function(A){return typeof A=="object"&&A!==null&&(Object.getPrototypeOf(A)===Object.prototype||Object.getPrototypeOf(A)===null)}(r)){const n=Pf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Uc(t,e,r){if((e=Ct(e))instanceof ni)return e._internalPath;if(typeof e=="string")return Of(t,e);throw Ph("Field path arguments must be of type string or ",t,!1,void 0,r)}const rL=new RegExp("[~\\*/\\[\\]]");function Of(t,e,r){if(e.search(rL)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ni(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Ph(t,e,r,n,A){const s=n&&!n.isEmpty(),i=A!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(s||i)&&(o+=" (found",s&&(o+=` in field ${n}`),i&&(o+=` in document ${A}`),o+=")"),new ee(O.INVALID_ARGUMENT,a+t+o)}function Q1(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,r,n,A,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=A,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Hf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class nL extends Sc{data(){return super.data()}}function Hf(t,e){return typeof e=="string"?Of(t,e):e instanceof ni?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ee(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mB{}class Da extends mB{}function qm(t,e,...r){let n=[];e instanceof mB&&n.push(e),n=n.concat(r),function(s){const i=s.filter(o=>o instanceof to).length,a=s.filter(o=>o instanceof Pa).length;if(i>1||i>0&&a>0)throw new ee(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const A of n)t=A._apply(t);return t}class Pa extends Da{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Pa(e,r,n)}_apply(e){const r=this._parse(e);return k1(e._query,r),new wr(e.firestore,e.converter,Nm(e._query,r))}_parse(e){const r=Zi(e.firestore);return function(s,i,a,o,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ee(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){AC(h,d);const w=[];for(const v of h)w.push(nC(o,s,v));f={arrayValue:{values:w}}}else f=nC(o,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||AC(h,d),f=b1(a,i,h,d==="in"||d==="not-in");return ct.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function AL(t,e,r){const n=e,A=Hf("where",t);return Pa._create(A,n,r)}class to extends mB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new to(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:gt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(A,s){let i=A;const a=s.getFlattenedFilters();for(const o of a)k1(i,o),i=Nm(i,o)}(e._query,r),new wr(e.firestore,e.converter,Nm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function sL(...t){return t.forEach(e=>R1("or",e)),to._create("or",t)}function iL(...t){return t.forEach(e=>R1("and",e)),to._create("and",t)}class Vf extends Da{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Vf(e,r)}_apply(e){const r=function(A,s,i){if(A.startAt!==null)throw new ee(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(A.endAt!==null)throw new ee(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tc(s,i)}(e._query,this._field,this._direction);return new wr(e.firestore,e.converter,function(A,s){const i=A.explicitOrderBy.concat([s]);return new OA(A.path,A.collectionGroup,i,A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e._query,r))}}function oL(t,e="asc"){const r=e,n=Hf("orderBy",t);return Vf._create(n,r)}class su extends Da{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new su(e,r,n)}_apply(e){return new wr(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}}function aL(t){return m1("limit",t),su._create("limit",t,"F")}function lL(t){return m1("limitToLast",t),su._create("limitToLast",t,"L")}class iu extends Da{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new iu(e,r,n)}_apply(e){const r=S1(e,this.type,this._docOrFields,this._inclusive);return new wr(e.firestore,e.converter,function(A,s){return new OA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,s,A.endAt)}(e._query,r))}}function cL(...t){return iu._create("startAt",t,!0)}function uL(...t){return iu._create("startAfter",t,!1)}class ou extends Da{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new ou(e,r,n)}_apply(e){const r=S1(e,this.type,this._docOrFields,this._inclusive);return new wr(e.firestore,e.converter,function(A,s){return new OA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,s)}(e._query,r))}}function dL(...t){return ou._create("endBefore",t,!1)}function hL(...t){return ou._create("endAt",t,!0)}function S1(t,e,r,n){if(r[0]=Ct(r[0]),r[0]instanceof Sc)return function(s,i,a,o,c){if(!o)throw new ee(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Ko(s))if(h.field.isKeyField())d.push(Mi(i,o.key));else{const f=o.data.field(h.field);if(If(f))throw new ee(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const w=h.field.canonicalString();throw new ee(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(f)}return new Vs(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const A=Zi(t.firestore);return function(i,a,o,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new ee(O.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let v=0;v<d.length;v++){const B=d[v];if(f[v].field.isKeyField()){if(typeof B!="string")throw new ee(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof B}`);if(!bw(i)&&B.indexOf("/")!==-1)throw new ee(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${B}' contains a slash.`);const _=i.path.child(lt.fromString(B));if(!fe.isDocumentKey(_))throw new ee(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const x=new fe(_);w.push(Mi(a,x))}else{const _=b1(o,c,B);w.push(_)}}return new Vs(w,h)}(t._query,t.firestore._databaseId,A,e,r,n)}}function nC(t,e,r){if(typeof(r=Ct(r))=="string"){if(r==="")throw new ee(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bw(e)&&r.indexOf("/")!==-1)throw new ee(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(lt.fromString(r));if(!fe.isDocumentKey(n))throw new ee(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Mi(t,new fe(n))}if(r instanceof $t)return Mi(t,r._key);throw new ee(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(r)}.`)}function AC(t,e){if(!Array.isArray(t)||t.length===0)throw new ee(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k1(t,e){const r=function(A,s){for(const i of A)for(const a of i.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new ee(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function R1(t,e){if(!(e instanceof Pa||e instanceof to))throw new ee(O.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class wB{convertValue(e,r="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(RA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return ti(e,(A,s)=>{n[A]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,A;const s=(A=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||A===void 0?void 0:A.map(i=>Nt(i.doubleValue));return new nu(s)}convertGeoPoint(e){return new Lf(Nt(e.latitude),Nt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ef(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const r=kA(e);return new Lt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=lt.fromString(e);_e(_T(n));const A=new js(n.get(1),n.get(3)),s=new fe(n.popFirst(5));return A.isEqual(r)||Zt(`Document ${s} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class fL extends wB{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){return new Ba("sum",Uc("sum",t))}function pL(t){return new Ba("avg",Uc("average",t))}function N1(){return new Ba("count")}function mL(t,e){var r,n;return t instanceof Ba&&e instanceof Ba&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function wL(t,e){return lB(t.query,e.query)&&Ls(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zi extends Sc{constructor(e,r,n,A,s,i){super(e,r,n,A,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Hf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ql extends zi{data(e={}){return super.data(e)}}class $i{constructor(e,r,n,A){this._firestore=e,this._userDataWriter=r,this._snapshot=A,this.metadata=new ms(A.hasPendingWrites,A.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ql(this._firestore,this._userDataWriter,n.key,n,new ms(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ee(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(A,s){if(A._snapshot.oldDocs.isEmpty()){let i=0;return A._snapshot.docChanges.map(a=>{const o=new ql(A._firestore,A._userDataWriter,a.doc.key,a.doc,new ms(A._snapshot.mutatedKeys.has(a.doc.key),A._snapshot.fromCache),A.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=A._snapshot.oldDocs;return A._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const o=new ql(A._firestore,A._userDataWriter,a.doc.key,a.doc,new ms(A._snapshot.mutatedKeys.has(a.doc.key),A._snapshot.fromCache),A.query.converter);let c=-1,d=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:BL(a.type),doc:o,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function BL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function vL(t,e){return t instanceof zi&&e instanceof zi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $i&&e instanceof $i&&t._firestore===e._firestore&&lB(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t){t=tt(t,$t);const e=tt(t.firestore,yt);return h1(Mt(e),t._key).then(r=>BB(e,t,r))}class si extends wB{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,r)}}function xL(t){t=tt(t,$t);const e=tt(t.firestore,yt),r=Mt(e),n=new si(e);return QP(r,t._key).then(A=>new zi(e,n,t._key,A,new ms(A!==null&&A.hasLocalMutations,!0),t.converter))}function CL(t){t=tt(t,$t);const e=tt(t.firestore,yt);return h1(Mt(e),t._key,{source:"server"}).then(r=>BB(e,t,r))}function D1(t){t=tt(t,wr);const e=tt(t.firestore,yt),r=Mt(e),n=new si(e);return U1(t._query),f1(r,t._query).then(A=>new $i(e,n,t,A))}function IL(t){t=tt(t,wr);const e=tt(t.firestore,yt),r=Mt(e),n=new si(e);return UP(r,t._query).then(A=>new $i(e,n,t,A))}function EL(t){t=tt(t,wr);const e=tt(t.firestore,yt),r=Mt(e),n=new si(e);return f1(r,t._query,{source:"server"}).then(A=>new $i(e,n,t,A))}function jd(t,e,r){t=tt(t,$t);const n=tt(t.firestore,yt),A=Kf(t.converter,e,r);return La(n,[jf(Zi(n),"setDoc",t._key,A,t.converter!==null,r).toMutation(t._key,Pt.none())])}function _L(t,e,r,...n){t=tt(t,$t);const A=tt(t.firestore,yt),s=Zi(A);let i;return i=typeof(e=Ct(e))=="string"||e instanceof ni?gB(s,"updateDoc",t._key,e,r,n):fB(s,"updateDoc",t._key,e),La(A,[i.toMutation(t._key,Pt.exists(!0))])}function P1(t){return La(tt(t.firestore,yt),[new Qa(t._key,Pt.none())])}function bL(t,e){const r=tt(t.firestore,yt),n=Xn(t),A=Kf(t.converter,e);return La(r,[jf(Zi(t.firestore),"addDoc",n._key,A,t.converter!==null,{}).toMutation(n._key,Pt.exists(!1))]).then(()=>n)}function Od(t,...e){var r,n,A;t=Ct(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Wm(e[i])||(s=e[i],i++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wm(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(A=h.complete)===null||A===void 0?void 0:A.bind(h)}let o,c,d;if(t instanceof $t)c=tt(t.firestore,yt),d=Ta(t._key.path),o={next:h=>{e[i]&&e[i](BB(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=tt(t,wr);c=tt(h.firestore,yt),d=h._query;const f=new si(c);o={next:w=>{e[i]&&e[i](new $i(c,f,h,w))},error:e[i+1],complete:e[i+2]},U1(t._query)}return function(f,w,v,B){const _=new Nf(B),x=new Zw(w,_,v);return f.asyncQueue.enqueueAndForget(async()=>Jw(await wa(f),x)),()=>{_.Za(),f.asyncQueue.enqueueAndForget(async()=>Xw(await wa(f),x))}}(Mt(c),d,a,o)}function TL(t,e){return kP(Mt(t=tt(t,yt)),Wm(e)?e:{next:e})}function La(t,e){return function(n,A){const s=new mr;return n.asyncQueue.enqueueAndForget(async()=>oP(await oB(n),A,s)),s.promise}(Mt(t),e)}function BB(t,e,r){const n=r.docs.get(e._key),A=new si(t);return new zi(t,A,e._key,n,new ms(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){return L1(t,{count:N1()})}function L1(t,e){const r=tt(t.firestore,yt),n=Mt(r),A=kb(e,(s,i)=>new lT(i,s.aggregateType,s._internalFieldPath));return SP(n,t._query,A).then(s=>function(a,o,c){const d=new si(a);return new C1(o,d,c)}(r,t,s))}class QL{constructor(e){this.kind="memory",this._onlineComponentProvider=zs.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Gs.provider}toJSON(){return{kind:this.kind}}}class UL{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=M1(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class SL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Gs.provider}toJSON(){return{kind:this.kind}}}class kL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new CP(e)}}toJSON(){return{kind:this.kind}}}function RL(){return new SL}function NL(t){return new kL(t==null?void 0:t.cacheSizeBytes)}function DL(t){return new QL(t)}function PL(t){return new UL(t)}class LL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zs.provider,this._offlineComponentProvider={build:r=>new sB(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class ML{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zs.provider,this._offlineComponentProvider={build:r=>new l1(r,e==null?void 0:e.cacheSizeBytes)}}}function M1(t){return new LL(t==null?void 0:t.forceOwnership)}function jL(){return new ML}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Zi(e)}set(e,r,n){this._verifyNotCommitted();const A=os(e,this._firestore),s=Kf(A.converter,r,n),i=jf(this._dataReader,"WriteBatch.set",A._key,s,A.converter!==null,n);return this._mutations.push(i.toMutation(A._key,Pt.none())),this}update(e,r,n,...A){this._verifyNotCommitted();const s=os(e,this._firestore);let i;return i=typeof(r=Ct(r))=="string"||r instanceof ni?gB(this._dataReader,"WriteBatch.update",s._key,r,n,A):fB(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,Pt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=os(e,this._firestore);return this._mutations=this._mutations.concat(new Qa(r._key,Pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function os(t,e){if((t=Ct(t)).firestore!==e)throw new ee(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Zi(r)}get(r){const n=os(r,this._firestore),A=new fL(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return ye();const i=s[0];if(i.isFoundDocument())return new Sc(this._firestore,A,i.key,i,n.converter);if(i.isNoDocument())return new Sc(this._firestore,A,n._key,null,n.converter);throw ye()})}set(r,n,A){const s=os(r,this._firestore),i=Kf(s.converter,n,A),a=jf(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,A);return this._transaction.set(s._key,a),this}update(r,n,A,...s){const i=os(r,this._firestore);let a;return a=typeof(n=Ct(n))=="string"||n instanceof ni?gB(this._dataReader,"Transaction.update",i._key,n,A,s):fB(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(r){const n=os(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=os(e,this._firestore),n=new si(this._firestore);return super.get(e).then(A=>new zi(this._firestore,n,r._key,A._document,new ms(!1,!1),r.converter))}}function HL(t,e,r){t=tt(t,yt);const n=Object.assign(Object.assign({},OL),r);return function(s){if(s.maxAttempts<1)throw new ee(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,a){const o=new mr;return s.asyncQueue.enqueueAndForget(async()=>{const c=await d1(s);new _P(s.asyncQueue,c,a,i,o).au()}),o.promise}(Mt(t),A=>e(new O1(t,A)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(){return new Au("deleteField")}function KL(){return new cB("serverTimestamp")}function GL(...t){return new uB("arrayUnion",t)}function zL(...t){return new dB("arrayRemove",t)}function $L(t){return new hB("increment",t)}function WL(t){return new nu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){return Mt(t=tt(t,yt)),new j1(t,e=>La(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t,e){const r=Mt(t=tt(t,yt));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return yn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(s){const i=typeof s=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new ee(O.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,a=[];if(Array.isArray(i.indexes))for(const o of i.indexes){const c=sC(o,"collectionGroup"),d=[];if(Array.isArray(o.fields))for(const h of o.fields){const f=Of("setIndexConfiguration",sC(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Qi(f,2)):h.order==="ASCENDING"?d.push(new Qi(f,0)):h.order==="DESCENDING"&&d.push(new Qi(f,1))}a.push(new ia(ia.UNKNOWN_ID,c,d,oa.empty()))}return a}(e);return DP(r,n)}function sC(t,e){if(typeof t[e]!="string")throw new ee(O.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function JL(t){var e;t=tt(t,yt);const r=iC.get(t);if(r)return r;if(((e=Mt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new V1(t);return iC.set(t,n),n}function XL(t){K1(t,!0)}function YL(t){K1(t,!1)}function ZL(t){LP(Mt(t._firestore)).then(e=>te("deleting all persistent cache indexes succeeded")).catch(e=>yn("deleting all persistent cache indexes failed",e))}function K1(t,e){PP(Mt(t._firestore),e).then(r=>te(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>yn(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const iC=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t){var e;const r=(e=Mt(tt(t.firestore,yt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Ff(r,Or(t._query))._t}function tM(t,e){var r;const n=kb(e,(s,i)=>new lT(i,s.aggregateType,s._internalFieldPath)),A=(r=Mt(tt(t.firestore,yt))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return A===void 0?null:xT(A,$b(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return vB.instance.onExistenceFilterMismatch(e)}}class vB{constructor(){this.Uu=new Map}static get instance(){return Wu||(Wu=new vB,function(r){if(Th)throw new Error("a TestingHooksSpi instance is already set");Th=r}(Wu)),Wu}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Wu=null;(function(e,r=!0){(function(A){ba=A})(_a),Aa(new Li("firestore",(n,{instanceIdentifier:A,options:s})=>{const i=n.getProvider("app").getImmediate(),a=new yt(new SN(n.getProvider("auth-internal")),new NN(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new js(c.options.projectId,d)}(i,A),i);return s=Object.assign({useFetchStreams:r},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ss(qy,"4.7.3",e),Ss(qy,"4.7.3","esm2017")})();const nM=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:wB,AggregateField:Ba,AggregateQuerySnapshot:C1,Bytes:$s,CACHE_SIZE_UNLIMITED:OP,CollectionReference:Kn,DocumentReference:$t,DocumentSnapshot:zi,FieldPath:ni,FieldValue:Ai,Firestore:yt,FirestoreError:ee,GeoPoint:Lf,LoadBundleTask:B1,PersistentCacheIndexManager:V1,Query:wr,QueryCompositeFilterConstraint:to,QueryConstraint:Da,QueryDocumentSnapshot:ql,QueryEndAtConstraint:ou,QueryFieldFilterConstraint:Pa,QueryLimitConstraint:su,QueryOrderByConstraint:Vf,QuerySnapshot:$i,QueryStartAtConstraint:iu,SnapshotMetadata:ms,Timestamp:Lt,Transaction:O1,VectorValue:nu,WriteBatch:j1,_AutoId:xw,_ByteString:Kt,_DatabaseId:js,_DocumentKey:fe,_EmptyAppCheckTokenProvider:DN,_EmptyAuthCredentialsProvider:vb,_FieldPath:St,_TestingHooks:rM,_cast:tt,_debugAssert:QN,_internalAggregationQueryToProtoRunAggregationQueryRequest:tM,_internalQueryToProtoQueryTarget:eM,_isBase64Available:c4,_logWarn:yn,_validateIsNotUsedTogether:p1,addDoc:bL,aggregateFieldEqual:mL,aggregateQuerySnapshotEqual:wL,and:iL,arrayRemove:zL,arrayUnion:GL,average:pL,clearIndexedDbPersistence:GP,collection:$m,collectionGroup:MP,connectFirestoreEmulator:w1,count:N1,deleteAllPersistentCacheIndexes:ZL,deleteDoc:P1,deleteField:VL,disableNetwork:WP,disablePersistentCacheIndexAutoCreation:YL,doc:Xn,documentId:YP,enableIndexedDbPersistence:VP,enableMultiTabIndexedDbPersistence:KP,enableNetwork:$P,enablePersistentCacheIndexAutoCreation:XL,endAt:hL,endBefore:dL,ensureFirestoreConfigured:Mt,executeWrite:La,getAggregateFromServer:L1,getCountFromServer:FL,getDoc:yL,getDocFromCache:xL,getDocFromServer:CL,getDocs:D1,getDocsFromCache:IL,getDocsFromServer:EL,getFirestore:v1,getPersistentCacheIndexManager:JL,increment:$L,initializeFirestore:HP,limit:aL,limitToLast:lL,loadBundle:JP,memoryEagerGarbageCollector:RL,memoryLocalCache:DL,memoryLruGarbageCollector:NL,namedQuery:XP,onSnapshot:Od,onSnapshotsInSync:TL,or:sL,orderBy:oL,persistentLocalCache:PL,persistentMultipleTabManager:jL,persistentSingleTabManager:M1,query:qm,queryEqual:lB,refEqual:jP,runTransaction:HL,serverTimestamp:KL,setDoc:jd,setIndexConfiguration:qL,setLogLevel:FN,snapshotEqual:vL,startAfter:uL,startAt:cL,sum:gL,terminate:qP,updateDoc:_L,vector:WL,waitForPendingWrites:zP,where:AL,writeBatch:H1},Symbol.toStringTag,{value:"Module"}));function yB(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,n=Object.getOwnPropertySymbols(t);A<n.length;A++)e.indexOf(n[A])<0&&Object.prototype.propertyIsEnumerable.call(t,n[A])&&(r[n[A]]=t[n[A]]);return r}function G1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AM=G1,z1=new Kc("auth","Firebase",G1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new ww("@firebase/auth");function sM(t,...e){Lh.logLevel<=at.WARN&&Lh.warn(`Auth (${_a}): ${t}`,...e)}function Hd(t,...e){Lh.logLevel<=at.ERROR&&Lh.error(`Auth (${_a}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw xB(t,...e)}function iA(t,...e){return xB(t,...e)}function $1(t,e,r){const n=Object.assign(Object.assign({},AM()),{[e]:r});return new Kc("auth","Firebase",n).create(e,{appName:t.name})}function ks(t){return $1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xB(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return z1.create(t,...e)}function Oe(t,e,...r){if(!t)throw xB(e,...r)}function xA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hd(e),new Error(e)}function NA(t,e){t||xA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iM(){return oC()==="http:"||oC()==="https:"}function oC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iM()||oR()||"connection"in navigator)?navigator.onLine:!0}function aM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,r){this.shortDelay=e,this.longDelay=r,NA(r>e,"Short delay should be less than long delay!"),this.isMobile=AR()||aR()}get(){return oM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t,e){NA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=new au(3e4,6e4);function ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ii(t,e,r,n,A={}){return q1(t,A,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const a=Gc(Object.assign({key:t.config.apiKey},i)).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:o},s);return iR()||(c.referrerPolicy="no-referrer"),W1.fetch()(J1(t,t.config.apiHost,r,a),c)})}async function q1(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},lM),e);try{const A=new dM(t),s=await Promise.race([r(),A.promise]);A.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw qu(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const a=s.ok?i.errorMessage:i.error.message,[o,c]=a.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(t,"credential-already-in-use",i);if(o==="EMAIL_EXISTS")throw qu(t,"email-already-in-use",i);if(o==="USER_DISABLED")throw qu(t,"user-disabled",i);const d=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $1(t,d,c);zn(t,d)}}catch(A){if(A instanceof jA)throw A;zn(t,"network-request-failed",{message:String(A)})}}async function Gf(t,e,r,n,A={}){const s=await ii(t,e,r,n,A);return"mfaPendingCredential"in s&&zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function J1(t,e,r,n){const A=`${e}${r}?${n}`;return t.config.emulator?CB(t.config,A):`${t.config.apiScheme}://${A}`}function uM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(iA(this.auth,"network-request-failed")),cM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const A=iA(t,e,n);return A.customData._tokenResponse=r,A}function aC(t){return t!==void 0&&t.enterprise!==void 0}class hM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return uM(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function fM(t,e){return ii(t,"GET","/v2/recaptchaConfig",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e){return ii(t,"POST","/v1/accounts:delete",e)}async function X1(t,e){return ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pM(t,e=!1){const r=Ct(t),n=await r.getIdToken(e),A=IB(n);Oe(A&&A.exp&&A.auth_time&&A.iat,r.auth,"internal-error");const s=typeof A.firebase=="object"?A.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:A,token:n,authTime:Jl(ep(A.auth_time)),issuedAtTime:Jl(ep(A.iat)),expirationTime:Jl(ep(A.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ep(t){return Number(t)*1e3}function IB(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Hd("JWT malformed, contained fewer than 3 sections"),null;try{const A=rb(r);return A?JSON.parse(A):(Hd("Failed to decode base64 JWT payload"),null)}catch(A){return Hd("Caught error parsing JWT payload as JSON",A==null?void 0:A.toString()),null}}function lC(t){const e=IB(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof jA&&mM(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function mM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const A=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t){var e;const r=t.auth,n=await t.getIdToken(),A=await kc(t,X1(r,{idToken:n}));Oe(A==null?void 0:A.users.length,r,"internal-error");const s=A.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Y1(s.providerUserInfo):[],a=vM(t.providerData,i),o=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=o?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xm(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function BM(t){const e=Ct(t);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vM(t,e){return[...t.filter(n=>!e.some(A=>A.providerId===n.providerId)),...e]}function Y1(t){return t.map(e=>{var{providerId:r}=e,n=yB(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(t,e){const r=await q1(t,{},async()=>{const n=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:s}=t.config,i=J1(t,A,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",W1.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function xM(t,e){return ii(t,"POST","/v2/accounts:revokeToken",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const r=lC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:A,expiresIn:s}=await yM(e,r);this.updateTokensAndExpiration(n,A,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:A,expirationTime:s}=r,i=new zo;return n&&(Oe(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),A&&(Oe(typeof A=="string","internal-error",{appName:e}),i.accessToken=A),s&&(Oe(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return xA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class CA{constructor(e){var{uid:r,auth:n,stsTokenManager:A}=e,s=yB(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await kc(this,this.stsTokenManager.getToken(this.auth,e));return Oe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return pM(this,e)}reload(){return BM(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new CA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Mh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vA(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await kc(this,gM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,A,s,i,a,o,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(A=r.email)!==null&&A!==void 0?A:void 0,w=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,v=(i=r.photoURL)!==null&&i!==void 0?i:void 0,B=(a=r.tenantId)!==null&&a!==void 0?a:void 0,_=(o=r._redirectEventId)!==null&&o!==void 0?o:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,m=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:F,isAnonymous:R,providerData:Q,stsTokenManager:y}=r;Oe(I&&y,e,"internal-error");const C=zo.fromJSON(this.name,y);Oe(typeof I=="string",e,"internal-error"),XA(h,e.name),XA(f,e.name),Oe(typeof F=="boolean",e,"internal-error"),Oe(typeof R=="boolean",e,"internal-error"),XA(w,e.name),XA(v,e.name),XA(B,e.name),XA(_,e.name),XA(x,e.name),XA(m,e.name);const E=new CA({uid:I,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:R,photoURL:v,phoneNumber:w,tenantId:B,stsTokenManager:C,createdAt:x,lastLoginAt:m});return Q&&Array.isArray(Q)&&(E.providerData=Q.map(U=>Object.assign({},U))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,r,n=!1){const A=new zo;A.updateFromServerResponse(r);const s=new CA({uid:r.localId,auth:e,stsTokenManager:A,isAnonymous:n});return await Mh(s),s}static async _fromGetAccountInfoResponse(e,r,n){const A=r.users[0];Oe(A.localId!==void 0,"internal-error");const s=A.providerUserInfo!==void 0?Y1(A.providerUserInfo):[],i=!(A.email&&A.passwordHash)&&!(s!=null&&s.length),a=new zo;a.updateFromIdToken(n);const o=new CA({uid:A.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:s,metadata:new Xm(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!(s!=null&&s.length)};return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Map;function IA(t){NA(t instanceof Function,"Expected a class definition");let e=cC.get(t);return e?(NA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Z1.type="NONE";const uC=Z1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t,e,r){return`firebase:${t}:${e}:${r}`}class $o{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:A,name:s}=this.auth;this.fullUserKey=Vd(this.userKey,A.apiKey,s),this.fullPersistenceKey=Vd("persistence",A.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?CA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new $o(IA(uC),e,n);const A=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=A[0]||IA(uC);const i=Vd(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const d=await c._get(i);if(d){const h=CA._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const o=A.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new $o(s,e,n):(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new $o(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sF(e))return"Blackberry";if(iF(e))return"Webos";if(tF(e))return"Safari";if((e.includes("chrome/")||rF(e))&&!e.includes("edge/"))return"Chrome";if(AF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function eF(t=lr()){return/firefox\//i.test(t)}function tF(t=lr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rF(t=lr()){return/crios\//i.test(t)}function nF(t=lr()){return/iemobile/i.test(t)}function AF(t=lr()){return/android/i.test(t)}function sF(t=lr()){return/blackberry/i.test(t)}function iF(t=lr()){return/webos/i.test(t)}function EB(t=lr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CM(t=lr()){var e;return EB(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IM(){return lR()&&document.documentMode===10}function oF(t=lr()){return EB(t)||AF(t)||iF(t)||sF(t)||/windows phone/i.test(t)||nF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(t,e=[]){let r;switch(t){case"Browser":r=dC(lr());break;case"Worker":r=`${dC(lr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${_a}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,a)=>{try{const o=e(s);i(o)}catch(o){a(o)}});n.onAbort=r,this.queue.push(n);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const A of r)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e={}){return ii(t,"GET","/v2/passwordPolicy",ro(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=6;class TM{constructor(e){var r,n,A,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:bM,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(A=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&A!==void 0?A:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,A,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(r=o.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(n=o.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),o.isValid&&(o.isValid=(A=o.containsLowercaseLetter)!==null&&A!==void 0?A:!0),o.isValid&&(o.isValid=(s=o.containsUppercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(i=o.containsNumericCharacter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(a=o.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),o}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),A&&(r.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let A=0;A<e.length;A++)n=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,A,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,r,n,A){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hC(this),this.idTokenSubscription=new hC(this),this.beforeStateQueue=new EM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=IA(r)),this._initializationPromise=this.queue(async()=>{var n,A;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((A=this.currentUser)===null||A===void 0?void 0:A.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await X1(this,{idToken:e}),n=await CA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(vA(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let A=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=A==null?void 0:A._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&(o!=null&&o.user)&&(A=o.user,s=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(A)}catch(i){A=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vA(this.app))return Promise.reject(ks(this));const r=e?Ct(e):null;return r&&Oe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vA(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vA(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(IA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _M(this),r=new TM(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await xM(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&IA(e)||this._popupRedirectResolver;Oe(r,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[IA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,A){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const o=e.addObserver(r,n,A);return()=>{i=!0,o()}}else{const o=e.addObserver(r);return()=>{i=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const A=await this._getAppCheckToken();return A&&(r["X-Firebase-AppCheck"]=A),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&sM(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ma(t){return Ct(t)}class hC{constructor(e){this.auth=e,this.observer=null,this.addObserver=gR(r=>this.observer=r)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QM(t){zf=t}function lF(t){return zf.loadJS(t)}function UM(){return zf.recaptchaEnterpriseScript}function SM(){return zf.gapiScript}function kM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const RM="recaptcha-enterprise",NM="NO_RECAPTCHA";class DM{constructor(e){this.type=RM,this.auth=Ma(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,a)=>{fM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new hM(o);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(o=>{a(o)})})}function A(s,i,a){const o=window.grecaptcha;aC(o)?o.enterprise.ready(()=>{o.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(NM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(a=>{if(!r&&aC(window.grecaptcha))A(a,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let o=UM();o.length!==0&&(o+=a),lF(o).then(()=>{A(a,s,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function fC(t,e,r,n=!1){const A=new DM(t);let s;try{s=await A.verify(r)}catch{s=await A.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function gC(t,e,r,n){var A;if(!((A=t._getRecaptchaConfig())===null||A===void 0)&&A.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await fC(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await fC(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(t,e){const r=zc(t,"auth");if(r.isInitialized()){const A=r.getImmediate(),s=r.getOptions();if(Ls(s,e??{}))return A;zn(A,"already-initialized")}return r.initialize({options:e})}function LM(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(IA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function MM(t,e,r){const n=Ma(t);Oe(n._canInitEmulator,n,"emulator-config-failed"),Oe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const A=!1,s=cF(e),{host:i,port:a}=jM(e),o=a===null?"":`:${a}`;n.config.emulator={url:`${s}//${i}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:A})}),OM()}function cF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jM(t){const e=cF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(n);if(A){const s=A[1];return{host:s,port:pC(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:pC(i)}}}function pC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OM(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return xA("not implemented")}_getIdTokenResponse(e){return xA("not implemented")}_linkToIdToken(e,r){return xA("not implemented")}_getReauthenticationResolver(e){return xA("not implemented")}}async function HM(t,e){return ii(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,e){return Gf(t,"POST","/v1/accounts:signInWithPassword",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return Gf(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}async function GM(t,e){return Gf(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends _B{constructor(e,r,n,A=null){super("password",n),this._email=e,this._password=r,this._tenantId=A}static _fromEmailAndPassword(e,r){return new Rc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Rc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gC(e,r,"signInWithPassword",VM);case"emailLink":return KM(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gC(e,n,"signUpPassword",HM);case"emailLink":return GM(e,{idToken:r,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t,e){return Gf(t,"POST","/v1/accounts:signInWithIdp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="http://localhost";class Wi extends _B{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):zn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:A}=r,s=yB(r,["providerId","signInMethod"]);if(!n||!A)return null;const i=new Wi(n,A);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Wo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Wo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Wo(e,r)}buildRequest(){const e={requestUri:zM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Gc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WM(t){const e=yl(xl(t)).link,r=e?yl(xl(e)).deep_link_id:null,n=yl(xl(t)).deep_link_id;return(n?yl(xl(n)).link:null)||n||r||e||t}class bB{constructor(e){var r,n,A,s,i,a;const o=yl(xl(e)),c=(r=o.apiKey)!==null&&r!==void 0?r:null,d=(n=o.oobCode)!==null&&n!==void 0?n:null,h=$M((A=o.mode)!==null&&A!==void 0?A:null);Oe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=o.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=o.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=o.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=WM(e);try{return new bB(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.providerId=ja.PROVIDER_ID}static credential(e,r){return Rc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=bB.parseLink(r);return Oe(n,"argument-error"),Rc._fromEmailAndCode(e,n.code,n.tenantId)}}ja.PROVIDER_ID="password";ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends uF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends lu{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Wi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ls.credential(r,n)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends lu{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends lu{constructor(){super("twitter.com")}static credential(e,r){return Wi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return us.credential(r,n)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,A=!1){const s=await CA._fromIdTokenResponse(e,n,A),i=mC(n);return new va({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const A=mC(n);return new va({user:e,providerId:A,_tokenResponse:n,operationType:r})}}function mC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends jA{constructor(e,r,n,A){var s;super(r.code,r.message),this.operationType=n,this.user=A,Object.setPrototypeOf(this,jh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,A){return new jh(e,r,n,A)}}function dF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jh._fromErrorAndOperation(t,s,e,n):s})}async function qM(t,e,r=!1){const n=await kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return va._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e,r=!1){const{auth:n}=t;if(vA(n.app))return Promise.reject(ks(n));const A="reauthenticate";try{const s=await kc(t,dF(n,A,e,t),r);Oe(s.idToken,n,"internal-error");const i=IB(s.idToken);Oe(i,n,"internal-error");const{sub:a}=i;return Oe(t.uid===a,n,"user-mismatch"),va._forOperation(t,A,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zn(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e,r=!1){if(vA(t.app))return Promise.reject(ks(t));const n="signIn",A=await dF(t,n,e),s=await va._fromIdTokenResponse(t,n,A);return r||await t._updateCurrentUser(s.user),s}async function XM(t,e){return hF(Ma(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t){const e=Ma(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ZM(t,e,r){return vA(t.app)?Promise.reject(ks(t)):XM(Ct(t),ja.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&YM(t),n})}function ej(t,e,r,n){return Ct(t).onIdTokenChanged(e,r,n)}function tj(t,e,r){return Ct(t).beforeAuthStateChanged(e,r)}function rj(t,e,r,n){return Ct(t).onAuthStateChanged(e,r,n)}function wC(t){return Ct(t).signOut()}const Oh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=1e3,Aj=10;class gF extends fF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),A=this.localCache[r];n!==A&&e(r,A,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,o)=>{this.notifyListeners(i,o)});return}const n=e.key;r?this.detachListener():this.stopPolling();const A=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);IM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,Aj):A()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const A of Array.from(n))A(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},nj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}gF.type="LOCAL";const sj=gF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF extends fF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}pF.type="SESSION";const mF=pF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(A=>A.isListeningto(e));if(r)return r;const n=new $f(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:A,data:s}=r.data,i=this.handlersMap[A];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:A});const a=Array.from(i).map(async c=>c(r.origin,s)),o=await ij(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:A,response:o})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const c=TB("",20);A.port1.start();const d=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:A,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(i),A.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[A.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return window}function aj(t){oA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(){return typeof oA().WorkerGlobalScope<"u"&&typeof oA().importScripts=="function"}async function lj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function uj(){return wF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="firebaseLocalStorageDb",dj=1,Hh="firebaseLocalStorage",vF="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Wf(t,e){return t.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function hj(){const t=indexedDB.deleteDatabase(BF);return new cu(t).toPromise()}function Ym(){const t=indexedDB.open(BF,dj);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Hh,{keyPath:vF})}catch(A){r(A)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Hh)?e(n):(n.close(),await hj(),e(await Ym()))})})}async function BC(t,e,r){const n=Wf(t,!0).put({[vF]:e,value:r});return new cu(n).toPromise()}async function fj(t,e){const r=Wf(t,!1).get(e),n=await new cu(r).toPromise();return n===void 0?null:n.value}function vC(t,e){const r=Wf(t,!0).delete(e);return new cu(r).toPromise()}const gj=800,pj=3;class yF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>pj)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(uj()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await lj(),!this.activeServiceWorker)return;this.sender=new oj(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await BC(e,Oh,"1"),await vC(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>BC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>fj(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>vC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const s=Wf(A,!1).getAll();return new cu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:A,value:s}of e)n.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(s)&&(this.notifyListeners(A,s),r.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!n.has(A)&&(this.notifyListeners(A,null),r.push(A));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const A of Array.from(n))A(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yF.type="LOCAL";const mj=yF;new au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(t,e){return e?IA(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB extends _B{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Wo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Bj(t){return hF(t.auth,new FB(t),t.bypassAuthState)}function vj(t){const{auth:e,user:r}=t;return Oe(r,e,"internal-error"),JM(r,new FB(t),t.bypassAuthState)}async function yj(t){const{auth:e,user:r}=t;return Oe(r,e,"internal-error"),qM(r,new FB(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,r,n,A,s=!1){this.auth=e,this.resolver=n,this.user=A,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:A,tenantId:s,error:i,type:a}=e;if(i){this.reject(i);return}const o={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bj;case"linkViaPopup":case"linkViaRedirect":return yj;case"reauthViaPopup":case"reauthViaRedirect":return vj;default:zn(this.auth,"internal-error")}}resolve(e){NA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){NA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new au(2e3,1e4);class Do extends xF{constructor(e,r,n,A,s){super(e,r,A,s),this.provider=n,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){NA(this.filter.length===1,"Popup operations only handle one event");const e=TB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(iA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(iA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(iA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xj.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="pendingRedirect",Kd=new Map;class Ij extends xF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Kd.get(this.auth._key());if(!e){try{const n=await Ej(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Kd.set(this.auth._key(),e)}return this.bypassAuthState||Kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ej(t,e){const r=Tj(e),n=bj(t);if(!await n._isAvailable())return!1;const A=await n._get(r)==="true";return await n._remove(r),A}function _j(t,e){Kd.set(t._key(),e)}function bj(t){return IA(t._redirectPersistence)}function Tj(t){return Vd(Cj,t.config.apiKey,t.name)}async function Fj(t,e,r=!1){if(vA(t.app))return Promise.reject(ks(t));const n=Ma(t),A=wj(n,e),i=await new Ij(n,A,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=10*60*1e3;class Uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sj(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!CF(e)){const A=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(iA(this.auth,A))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qj&&this.cachedEventUids.clear(),this.cachedEventUids.has(yC(e))}saveEventToCache(e){this.cachedEventUids.add(yC(e)),this.lastProcessedEventTime=Date.now()}}function yC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(t,e={}){return ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nj=/^https?/;async function Dj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kj(t);for(const r of e)try{if(Pj(r))return}catch{}zn(t,"unauthorized-domain")}function Pj(t){const e=Jm(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Nj.test(r))return!1;if(Rj.test(t))return n===t;const A=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=new au(3e4,6e4);function xC(){const t=oA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Mj(t){return new Promise((e,r)=>{var n,A,s;function i(){xC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xC(),r(iA(t,"network-request-failed"))},timeout:Lj.get()})}if(!((A=(n=oA().gapi)===null||n===void 0?void 0:n.iframes)===null||A===void 0)&&A.Iframe)e(gapi.iframes.getContext());else if(!((s=oA().gapi)===null||s===void 0)&&s.load)i();else{const a=kM("iframefcb");return oA()[a]=()=>{gapi.load?i():r(iA(t,"network-request-failed"))},lF(`${SM()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function jj(t){return Gd=Gd||Mj(t),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new au(5e3,15e3),Hj="__/auth/iframe",Vj="emulator/auth/iframe",Kj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zj(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?CB(e,Vj):`https://${t.config.authDomain}/${Hj}`,n={apiKey:e.apiKey,appName:t.name,v:_a},A=Gj.get(t.config.apiHost);A&&(n.eid=A);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Gc(n).slice(1)}`}async function $j(t){const e=await jj(t),r=oA().gapi;return Oe(r,t,"internal-error"),e.open({where:document.body,url:zj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kj,dontclear:!0},n=>new Promise(async(A,s)=>{await n.restyle({setHideOnLeave:!1});const i=iA(t,"network-request-failed"),a=oA().setTimeout(()=>{s(i)},Oj.get());function o(){oA().clearTimeout(a),A(n)}n.ping(o).then(o,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qj=500,Jj=600,Xj="_blank",Yj="http://localhost";class CC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Zj(t,e,r,n=qj,A=Jj){const s=Math.max((window.screen.availHeight-A)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const o=Object.assign(Object.assign({},Wj),{width:n.toString(),height:A.toString(),top:s,left:i}),c=lr().toLowerCase();r&&(a=rF(c)?Xj:r),eF(c)&&(e=e||Yj,o.scrollbars="yes");const d=Object.entries(o).reduce((f,[w,v])=>`${f}${w}=${v},`,"");if(CM(c)&&a!=="_self")return eO(e||"",a),new CC(null);const h=window.open(e||"",a,d);Oe(h,t,"popup-blocked");try{h.focus()}catch{}return new CC(h)}function eO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="__/auth/handler",rO="emulator/auth/handler",nO=encodeURIComponent("fac");async function IC(t,e,r,n,A,s){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:_a,eventId:A};if(e instanceof uF){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",fR(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof lu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const o=await t._getAppCheckToken(),c=o?`#${nO}=${encodeURIComponent(o)}`:"";return`${AO(t)}?${Gc(a).slice(1)}${c}`}function AO({config:t}){return t.emulator?CB(t,rO):`https://${t.authDomain}/${tO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="webStorageSupport";class sO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mF,this._completeRedirectFn=Fj,this._overrideRedirectResult=_j}async _openPopup(e,r,n,A){var s;NA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await IC(e,r,n,Jm(),A);return Zj(e,i,TB())}async _openRedirect(e,r,n,A){await this._originValidation(e);const s=await IC(e,r,n,Jm(),A);return aj(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:A,promise:s}=this.eventManagers[r];return A?Promise.resolve(A):(NA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await $j(e),n=new Uj(e);return r.register("authEvent",A=>(Oe(A==null?void 0:A.authEvent,e,"invalid-auth-event"),{status:n.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(tp,{type:tp},A=>{var s;const i=(s=A==null?void 0:A[0])===null||s===void 0?void 0:s[tp];i!==void 0&&r(!!i),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Dj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return oF()||tF()||EB()}}const iO=sO;var EC="@firebase/auth",_C="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lO(t){Aa(new Li("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;Oe(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aF(t)},c=new FM(n,A,s,o);return LM(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Aa(new Li("auth-internal",e=>{const r=Ma(e.getProvider("auth").getImmediate());return(n=>new oO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(EC,_C,aO(t)),Ss(EC,_C,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=5*60,uO=sb("authIdTokenMaxAge")||cO;let bC=null;const dO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>uO)return;const A=r==null?void 0:r.token;bC!==A&&(bC=A,await fetch(t,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))};function hO(t=vw()){const e=zc(t,"auth");if(e.isInitialized())return e.getImmediate();const r=PM(t,{popupRedirectResolver:iO,persistence:[mj,sj,mF]}),n=sb("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=dO(s.toString());tj(r,i,()=>i(r.currentUser)),ej(r,a=>i(a))}}const A=nb("auth");return A&&MM(r,`http://${A}`),r}function fO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}QM({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=A=>{const s=iA("internal-error");s.customData=A,r(s)},n.type="text/javascript",n.charset="UTF-8",fO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lO("Browser");const gO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",pO="zameny-b6c3f.firebaseapp.com",mO="zameny-b6c3f",wO="zameny-b6c3f.firebasestorage.app",BO="323355347910",vO="1:323355347910:web:c81f2813dce5ee9373c0c7",IF={apiKey:gO,authDomain:pO,projectId:mO,storageBucket:wO,messagingSenderId:BO,appId:vO};let Vh;mN().length?Vh=vw():Vh=cb(IF);const xr=v1(Vh),pn=hO(Vh);IF.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const qt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules"},yO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},zr={syncCollection:async(t,e)=>{if(!xr)return;const r=qm($m(xr,t)),n=await xO(async()=>await D1(r)),A=new Map;n.docs.forEach(o=>{A.set(o.id,o.data())});const s=new Map;e.forEach(o=>s.set(o.id,o));const i=[];if(A.forEach((o,c)=>{s.has(c)||i.push({type:"delete",id:c})}),e.forEach(o=>{const c=A.get(o.id);(!c||JSON.stringify(c)!==JSON.stringify(o))&&i.push({type:"set",item:o})}),i.length===0)return;console.log(`Syncing ${t}: ${i.length} changes.`);const a=yO(i,450);for(const o of a){const c=H1(xr);o.forEach(d=>{const h=Xn(xr,t,d.id||d.item.id);d.type==="delete"?c.delete(h):c.set(h,d.item)}),await c.commit()}},save:async t=>{if(!xr){console.error("Database not initialized");return}const e=pn==null?void 0:pn.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :   .");return}const r=[];t.teachers&&r.push(zr.syncCollection(qt.TEACHERS,t.teachers)),t.subjects&&r.push(zr.syncCollection(qt.SUBJECTS,t.subjects)),t.classes&&r.push(zr.syncCollection(qt.CLASSES,t.classes)),t.rooms&&r.push(zr.syncCollection(qt.ROOMS,t.rooms)),t.schedule&&r.push(zr.syncCollection(qt.SCHEDULE_1,t.schedule)),t.schedule2ndHalf&&r.push(zr.syncCollection(qt.SCHEDULE_2,t.schedule2ndHalf)),t.substitutions&&r.push(zr.syncCollection(qt.SUBSTITUTIONS,t.substitutions)),t.settings&&r.push(jd(Xn(xr,qt.CONFIG,"settings"),t.settings)),t.bellSchedule&&r.push(jd(Xn(xr,qt.CONFIG,"bells"),{items:t.bellSchedule})),await Promise.all(r),console.log("Data saved successfully to collections")},subscribe:(t,e)=>{if(!xr)return()=>{};let r={...rn},n;const A=()=>{clearTimeout(n),n=setTimeout(()=>{t({...r})},50)},s=[],i=(a,o)=>{const c=qm($m(xr,a));return Od(c,d=>{const h=d.docs.map(f=>f.data());r[o]=h,A()},d=>{console.warn(`Error reading ${a}:`,d)})};return s.push(i(qt.TEACHERS,"teachers")),s.push(i(qt.SUBJECTS,"subjects")),s.push(i(qt.CLASSES,"classes")),s.push(i(qt.ROOMS,"rooms")),s.push(i(qt.SCHEDULE_1,"schedule")),s.push(i(qt.SCHEDULE_2,"schedule2ndHalf")),s.push(i(qt.SUBSTITUTIONS,"substitutions")),s.push(Od(Xn(xr,qt.CONFIG,"settings"),a=>{a.exists()&&(r.settings={...rn.settings,...a.data()},A())})),s.push(Od(Xn(xr,qt.CONFIG,"bells"),a=>{if(a.exists()){const o=a.data();r.bellSchedule=o.items||rn.bellSchedule,A()}})),()=>{s.forEach(a=>a()),clearTimeout(n)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!xr)throw new Error("Database not initialized");const r=pn==null?void 0:pn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects,teachers:e.teachers.map(s=>({id:s.id,name:s.name,subjectIds:s.subjectIds,shifts:s.shifts,unavailableDates:[],telegramChatId:""})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,schedule2ndHalf:e.schedule2ndHalf,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},A=JSON.parse(JSON.stringify(n));await jd(Xn(xr,qt.PUBLIC,t),A)},getPublicData:async t=>{if(!xr)return null;try{const e=await $2(()=>Promise.resolve().then(()=>nM),void 0).then(r=>r.getDoc(Xn(xr,qt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{xr&&await P1(Xn(xr,qt.PUBLIC,t))}};async function xO(t){try{return await t()}catch(e){return console.error("Firestore read error (likely quota):",e),{docs:[]}}}const EF=k.createContext(void 0),CO="admin@gymnasium22.com",IO="teacher@gymnasium22.com",EO=({children:t})=>{const[e,r]=k.useState(null),[n,A]=k.useState(null),[s,i]=k.useState(!0);k.useEffect(()=>{if(!pn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=rj(pn,d=>{r(d),d?d.email===CO?A("admin"):d.email===IO?A("teacher"):(A(null),wC(pn)):A(null),i(!1)});return()=>c()},[]);const a=async()=>{pn&&await wC(pn),A(null)},o=()=>{A("guest"),i(!1)};return l.jsx(EF.Provider,{value:{user:e,role:n,loading:s,logout:a,setGuestRole:o},children:t})},Oa=()=>{const t=k.useContext(EF);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},_F=k.createContext(void 0),dl="gym_data_local_backup_v2",bF=({children:t,initialData:e})=>{const[r,n]=k.useState(rn),[A,s]=k.useState(!0),[i,a]=k.useState([]),[o,c]=k.useState(-1),{user:d,role:h,loading:f}=Oa();k.useEffect(()=>{if(e){n(e),a([e]),c(0),s(!1);return}if(f)return;const m=localStorage.getItem(dl);if(m)try{const R=JSON.parse(m);R&&R.teachers&&(n(Q=>({...Q,...R})),console.log("Loaded from local storage backup"))}catch(R){console.error("Error parsing local backup",R)}if(!(d||h==="guest")){m||n(rn),s(!1);return}s(!0);const F=zr.subscribe(R=>{const Q={...rn,...R};Q.teachers||(Q.teachers=[]),Q.teachers=Q.teachers.map(y=>({shifts:[he.First,he.Second],telegramChatId:"",...y})),Q.schedule||(Q.schedule=[]),Q.schedule2ndHalf||(Q.schedule2ndHalf=[]),Q.substitutions||(Q.substitutions=[]),Q.bellSchedule||(Q.bellSchedule=Z_),Q.settings?Q.settings={...rn.settings,...Q.settings}:Q.settings=rn.settings,n(Q),localStorage.setItem(dl,JSON.stringify(Q)),a(y=>y.length===0?[Q]:y),c(y=>y===-1?0:y),s(!1)},R=>{console.error("Failed to subscribe to data:",R),s(!1)});return()=>{F&&F()}},[e,d,h,f]);const w=k.useCallback(async(m,I=!0)=>{const F=!d&&h==="guest",R={...r,...m};n(R);try{localStorage.setItem(dl,JSON.stringify(R))}catch(Q){console.error("Local storage quota exceeded",Q)}if(!e&&d&&!F)try{await zr.save(m)}catch(Q){console.error("Save failed:",Q),(Q==null?void 0:Q.code)==="resource-exhausted"?console.warn("Quota exceeded. Saved locally only."):(Q==null?void 0:Q.code)==="permission-denied"?alert("  .    ."):console.warn("Cloud save error. Saved locally.",Q.message)}else F&&console.warn("       .");if(I){const Q=i.slice(0,o+1);Q.push(R),Q.length>50&&Q.shift(),a(Q),c(Q.length-1)}},[r,i,o,d,h,e]),v=k.useCallback(async()=>{if(o>0){const m=i[o-1];if(c(o-1),n(m),localStorage.setItem(dl,JSON.stringify(m)),!e&&d)try{await zr.save(m)}catch(I){console.error(I)}}},[i,o,d,e]),B=k.useCallback(async()=>{if(o<i.length-1){const m=i[o+1];if(c(o+1),n(m),localStorage.setItem(dl,JSON.stringify(m)),!e&&d)try{await zr.save(m)}catch(I){console.error(I)}}},[i,o,d,e]),_=k.useCallback(async()=>{await w(rn)},[w]),x=k.useMemo(()=>({data:r,isLoading:A,saveData:w,resetData:_,undo:v,redo:B,canUndo:o>0,canRedo:o<i.length-1}),[r,A,w,_,v,B,o]);return l.jsx(_F.Provider,{value:x,children:t})},qf=()=>{const t=k.useContext(_F);if(!t)throw new Error("useFullData must be used within DataProvider");return t},TF=k.createContext(void 0),FF=k.createContext(void 0),QF=({children:t})=>{const{data:e,saveData:r}=qf(),n=k.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),A=k.useCallback(async(i,a)=>{await r(i,a)},[r]),s=k.useMemo(()=>({...n,saveStaticData:A}),[n,A]);return l.jsx(TF.Provider,{value:s,children:t})},UF=({children:t})=>{const{data:e,saveData:r}=qf(),n=new Date().getMonth(),s=n>=0&&n<=4?e.schedule2ndHalf||[]:e.schedule,i=k.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2ndHalf:h})},[r]),a=k.useCallback(async(d,h)=>{await r(d,h)},[r]),o=k.useMemo(()=>({schedule:s,schedule1:e.schedule,schedule2:e.schedule2ndHalf||[],substitutions:e.substitutions,saveSemesterSchedule:i,saveScheduleData:a}),[s,e.schedule,e.schedule2ndHalf,e.substitutions,i,a]),c=k.useMemo(()=>({...o,saveScheduleData:a}),[o,a]);return l.jsx(FF.Provider,{value:c,children:t})},GA=()=>{const t=k.useContext(TF);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=qf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Ha=()=>{const t=k.useContext(FF);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=qf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},_O={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},J=({name:t,size:e=24,className:r="",...n})=>{const A=_O[t];return A?l.jsx(A,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},_A=({isOpen:t,onClose:e,title:r,children:n,maxWidth:A="max-w-lg"})=>(k.useEffect(()=>{if(!t)return;const s=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",s),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:s=>s.target===s.currentTarget&&e(),children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${A} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx(J,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),bO=({x:t,y:e,onClose:r,actions:n})=>{const A=k.useRef(null);if(k.useEffect(()=>{if(t===null||e===null)return;const i=o=>{A.current&&!A.current.contains(o.target)&&r()},a=o=>{o.key==="Escape"&&r()};return window.addEventListener("click",i,!0),document.addEventListener("keydown",a),()=>{window.removeEventListener("click",i,!0),document.removeEventListener("keydown",a)}},[t,e,r]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{ref:A,className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:n.map(i=>l.jsxs("button",{onClick:a=>{a.stopPropagation(),i.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${i.color||"text-slate-700 dark:text-slate-200"}`,children:[i.icon&&l.jsx(J,{name:i.icon,size:16}),i.label]},i.id||i.label))})},TO=()=>{const{bellSchedule:t}=GA(),[e,r]=k.useState("..."),[n,A]=k.useState(""),[s,i]=k.useState(0),[a,o]=k.useState("bg-slate-500"),[c,d]=k.useState("");return k.useEffect(()=>{const h=()=>{const w=new Date,v=w.getDay(),_=[null,mn.Monday,mn.Tuesday,mn.Wednesday,mn.Thursday,mn.Friday,null][v];if(d(_||""),!_){r(" "),A(" "),o("bg-slate-400"),i(0);return}const x=Q=>{const[y,C]=Q.split(":").map(Number);return y*60+C},m=w.getHours()*60+w.getMinutes();let I=t.filter(Q=>Q.day===_);I.length===0&&(I=t.filter(Q=>Q.day==="default")),I.sort((Q,y)=>x(Q.start)-x(y.start));let F=null,R=null;for(let Q=0;Q<I.length;Q++){const y=I[Q],C=x(y.start),E=x(y.end);if(m>=C&&m<E){F={...y,duration:E-C,passed:m-C};break}if(Q<I.length-1){const U=I[Q+1],N=x(U.start);if(m>=E&&m<N){const L=N-E;if(L>0&&L<60){const T=m-E,Le=N-m;R={nextLesson:U,duration:L,passed:T,remaining:Le};break}}}}if(F){r(`${F.period} `);const Q=Math.max(0,F.duration-F.passed);A(`${F.shift===he.First?"1 ":"2 "}  . ${Q} `);const y=F.duration>0?F.passed/F.duration*100:0;i(Math.min(100,Math.max(0,y))),o("bg-indigo-600")}else if(R){r(""),A(` ${R.remaining}  ${R.nextLesson.period} `),o("bg-amber-500");const Q=R.duration>0?R.passed/R.duration*100:0;i(Math.min(100,Math.max(0,Q)))}else r(" "),A(" "),o("bg-slate-400"),i(0)};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${a}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:n})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${a} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center`,children:l.jsx(J,{name:"Clock",size:16,className:a==="bg-indigo-600"?"text-indigo-600":a==="bg-amber-500"?"text-amber-500":"text-slate-400"})})]}),s>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${a} transition-all duration-1000`,style:{width:`${s}%`}})})]})},rp=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:A})=>{var v;const[s,i]=k.useState(!1),[a,o]=k.useState(""),c=k.useRef(null);k.useEffect(()=>{const B=x=>{c.current&&!c.current.contains(x.target)&&i(!1)},_=x=>{x.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",B),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("keydown",_)}},[]);const h=((v=(A?t.flatMap(B=>B.options):t).find(B=>B.value===e))==null?void 0:v.label)||n,f=A?t.map(B=>({...B,options:B.options.filter(_=>_.label.toLowerCase().includes(a.toLowerCase()))})).filter(B=>B.options.length>0):null,w=A?null:t.filter(B=>B.label.toLowerCase().includes(a.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!s),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(J,{name:"Filter",size:14,className:"text-slate-400"})]}),s&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:a,onChange:B=>o(B.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),A&&f?f.map(B=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:B.label}),B.options.map(_=>l.jsx("div",{onClick:()=>{r(_.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===_.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:_.label},_.value))]},B.id||B.label)):w?w.map(B=>l.jsx("div",{onClick:()=>{r(B.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===B.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:B.label},B.value)):null]})]})},Ju=({children:t,className:e=""})=>{const r=ds.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,A)=>{const s=ds.isValidElement(n)&&n.key?n.key:A;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${A*.05}s`,opacity:0},children:n},s)})})},np=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(A=>{const s=A.id??A.label,i=Math.min(100,Math.max(0,A.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:A.label,children:A.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:A.value})]},s)})})},FO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:A,settings:s}=GA(),{schedule:i,substitutions:a}=Ha(),o=Vc(),[c,d]=k.useState(localStorage.getItem("gym_notes")||""),[h]=k.useState(new Date),[f,w]=k.useState(""),[v,B]=k.useState(null),[_,x]=k.useState(!1),[m,I]=k.useState(""),[F,R]=k.useState(!1),[Q,y]=k.useState(""),[C,E]=k.useState(!1);k.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){I("");const S=setTimeout(()=>I(""),2e3);return()=>clearTimeout(S)}},[c]);const U=S=>new Date(S.getTime()-S.getTimezoneOffset()*6e4).toISOString().split("T")[0],N=k.useMemo(()=>U(h),[h]),L=k.useMemo(()=>{const S=h.getDay();return S===0||S===6?null:Dr[S-1]},[h]),T=k.useMemo(()=>{const S=new Date;return S.setHours(0,0,0,0),e.filter(H=>H.birthDate).map(H=>{const z=new Date(H.birthDate);let re=new Date(S.getFullYear(),z.getMonth(),z.getDate());re<S&&re.setFullYear(S.getFullYear()+1);const le=Math.ceil((re.getTime()-S.getTime())/(1e3*60*60*24));return{...H,diff:le,age:S.getFullYear()-z.getFullYear()}}).filter(H=>H.diff<=30).sort((H,z)=>H.diff-z.diff)},[e]),Le=k.useMemo(()=>{const S=e.length,H=new Map;e.filter(Be=>Be.unavailableDates.includes(N)).forEach(Be=>{var Y;const pe=((Y=Be.absenceReasons)==null?void 0:Y[N])===" "?" ":"";H.set(Be.id,{id:Be.id,name:Be.name,displayReason:pe})});const z=a.filter(Be=>Be.date===N&&Be.replacementTeacherId!=="conducted"&&Be.replacementTeacherId!==Be.originalTeacherId),re=new Map;z.forEach(Be=>{if(H.has(Be.originalTeacherId))return;const mt=e.find(Ne=>Ne.id===Be.originalTeacherId);if(!mt)return;const pe=i.find(Ne=>Ne.id===Be.scheduleItemId);if(!pe)return;re.has(Be.originalTeacherId)||re.set(Be.originalTeacherId,{teacher:mt,lessons:[]}),re.get(Be.originalTeacherId).lessons.push({period:pe.period,reason:Be.lessonAbsenceReason})});const le=Array.from(H.values());re.forEach((Be,mt)=>{const pe=Be.lessons.sort((Z,oe)=>Z.period-oe.period),Y=pe.map(Z=>Z.period).join(", "),ke=pe.some(Z=>Z.reason===" ")?" ":"";le.push({id:mt,name:Be.teacher.name,displayReason:`${Y} : ${ke}`})}),le.sort((Be,mt)=>Be.name.localeCompare(mt.name));const Pe=le.length,xe=S-Pe;return{presentPercent:S>0?Math.round(xe/S*100):0,absentCount:Pe,totalTeachers:S,absentTeachersList:le}},[e,N,a,i]),je=k.useMemo(()=>{const S=new Date(h);for(S.setDate(h.getDate()+1);S.getDay()===0||S.getDay()===6;)S.setDate(S.getDate()+1);const z=[null,"","","","","",null][S.getDay()];if(!z)return[];const re=[];return r.forEach(le=>{const Pe=i.filter(xe=>xe.classId===le.id&&xe.day===z);Pe.length===0?re.push({class:le.name,issue:`   ${z}`}):Pe.length<4&&re.push({class:le.name,issue:`  (${Pe.length})`}),Pe.forEach(xe=>{if(i.some(Be=>Be.id!==xe.id&&Be.day===z&&Be.period===xe.period&&Be.shift===xe.shift&&Be.teacherId===xe.teacherId)&&re.push({class:le.name,issue:`  (${xe.period} )`}),xe.roomId){const Be=n.find(mt=>mt.id===xe.roomId);Be&&Be.capacity<le.studentsCount&&re.push({class:le.name,issue:`: ${Be.name} (${xe.period} )`})}})}),re.filter((le,Pe,xe)=>xe.findIndex(Ge=>Ge.class===le.class&&Ge.issue===le.issue)===Pe).slice(0,10)},[i,r,e,n,h]),rt=k.useMemo(()=>{if(!L)return 0;let S=0;const H=i.filter(z=>z.day===L);for(const z of H){const re=e.find(le=>le.id===z.teacherId);re&&re.unavailableDates.includes(N)&&(a.find(Pe=>Pe.scheduleItemId===z.id&&Pe.date===N)||S++)}return S},[i,e,a,N,L]),Re=()=>{var pe;if(!f){B(null);return}const S=new Date,z=[null,mn.Monday,mn.Tuesday,mn.Wednesday,mn.Thursday,mn.Friday,null][S.getDay()];if(!z){B({status:"",detail:"  ",color:"text-slate-500"});return}const re=Y=>{const[Ne,ke]=Y.split(":").map(Number);return Ne*60+ke},le=S.getHours()*60+S.getMinutes();let Pe=A.filter(Y=>Y.day===z);Pe.length===0&&(Pe=A.filter(Y=>Y.day==="default"));const xe=Pe.find(Y=>{const Ne=re(Y.start),ke=re(Y.end);return le>=Ne&&le<=ke}),Ge=f.toLowerCase(),Be=e.find(Y=>Y.name.toLowerCase().includes(Ge)),mt=r.find(Y=>Y.name.toLowerCase().includes(Ge));if(!Be&&!mt){B({status:" ",detail:" ",color:"text-red-500"});return}if(Be){if(Be.unavailableDates.includes(N)){const oe=((pe=Be.absenceReasons)==null?void 0:pe[N])===" "?" ":"";B({status:"",detail:oe,color:"text-red-500",icon:"UserX",items:[]});return}if(!xe){B({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Y=i.filter(Z=>Z.teacherId===Be.id&&Z.day===z&&Z.period===xe.period&&Z.shift===xe.shift),Ne=a.filter(Z=>Z.date===N&&Z.replacementTeacherId===Be.id).map(Z=>i.find(oe=>oe.id===Z.scheduleItemId)).filter(Z=>!!Z&&Z.day===z&&Z.period===xe.period&&Z.shift===xe.shift);let ke=[];Y.forEach(Z=>{var de,Ie,Te;const oe=a.find(Ke=>Ke.date===N&&Ke.scheduleItemId===Z.id);if(!oe||oe.replacementTeacherId===Be.id){const Ke=((de=n.find($e=>$e.id===((oe==null?void 0:oe.replacementRoomId)||Z.roomId)))==null?void 0:de.name)||(oe==null?void 0:oe.replacementRoomId)||Z.roomId||" .",ze=(Ie=t.find($e=>$e.id===Z.subjectId))==null?void 0:Ie.name,He=(Te=r.find($e=>$e.id===Z.classId))==null?void 0:Te.name;ke.push({room:Ke,subject:ze,entityName:He,direction:Z.direction,isSubstitution:!!(oe&&oe.replacementTeacherId===Be.id),originalTeacherName:null})}}),Ne.forEach(Z=>{var ze,He,$e;const oe=a.find(Me=>Me.date===N&&Me.scheduleItemId===Z.id&&Me.replacementTeacherId===Be.id);if(!oe)return;const de=((ze=n.find(Me=>Me.id===(oe.replacementRoomId||Z.roomId)))==null?void 0:ze.name)||oe.replacementRoomId||Z.roomId||" .",Ie=(He=t.find(Me=>Me.id===Z.subjectId))==null?void 0:He.name,Te=($e=r.find(Me=>Me.id===Z.classId))==null?void 0:$e.name,Ke=e.find(Me=>Me.id===oe.originalTeacherId);ke.push({room:de,subject:Ie,entityName:Te,direction:Z.direction,isSubstitution:!0,originalTeacherName:Ke==null?void 0:Ke.name})}),ke.length>0?B({status:` ${xe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ke}):B({status:"",detail:` ( ${xe.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(mt){if(!xe){B({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Y=i.filter(Ne=>Ne.classId===mt.id&&Ne.day===z&&Ne.period===xe.period&&Ne.shift===xe.shift);if(Y.length>0){const Ne=Y.map(oe=>{var De,Xe,We,Ye,Ze;const de=a.find(st=>st.scheduleItemId===oe.id&&st.date===N);if(de&&de.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(De=t.find(st=>st.id===oe.subjectId))==null?void 0:De.name};const Ie=!!(de&&de.replacementTeacherId!=="conducted"&&de.replacementTeacherId!=="cancelled"),Te=Ie?de.replacementTeacherId:oe.teacherId,Ke=(de==null?void 0:de.replacementRoomId)||oe.roomId,ze=(Xe=e.find(st=>st.id===Te))==null?void 0:Xe.name,He=((We=n.find(st=>st.id===Ke))==null?void 0:We.name)||Ke||" .",$e=(Ye=t.find(st=>st.id===oe.subjectId))==null?void 0:Ye.name,Me=Ie?(Ze=e.find(st=>st.id===de.originalTeacherId))==null?void 0:Ze.name:null;return{room:He,subject:$e,entityName:ze,direction:oe.direction,isSubstitution:Ie,originalTeacherName:Me}}),ke=Ne.filter(oe=>!oe.cancelled),Z=Ne.filter(oe=>!!oe.cancelled);ke.length>0?B({status:` ${xe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ke}):Z.length>0?B({status:" ",detail:Z.map(oe=>oe.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):B({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else B({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},ie=async()=>{if(!Q.trim()){alert(",   .");return}if(!(s!=null&&s.telegramToken)||!(s!=null&&s.feedbackChatId)){alert("     .");return}E(!0);const S=` *   :*

${Q}`;try{const z=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:S,parse_mode:"Markdown"})})).json();if(z.ok)alert("!   ."),R(!1),y("");else throw new Error(z.description)}catch(H){console.error("   Telegram:",H),alert(`   . : ${H}`)}finally{E(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx(J,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(J,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:S=>w(S.target.value),onKeyDown:S=>S.key==="Enter"&&Re(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:Re,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx(J,{name:"Search",size:20})})]}),v&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${v.color}`,children:[l.jsx(J,{name:v.icon||"Info",size:14})," ",v.status]}),v.items&&v.items.length>0?l.jsx("div",{className:"space-y-2",children:v.items.map((S,H)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[S.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:S.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:S.subject}),S.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:S.originalTeacherName?` ( ${S.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:S.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:S.room})]})]},`${S.room}-${S.subject}-${S.entityName}-${H}`))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:v.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx(J,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:rt>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:rt}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>o("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx(J,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>x(!_),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:_?" ":" ",children:l.jsx(J,{name:_?"PieChart":"List",size:20})})]}),_?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Le.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Le.absentTeachersList.map(S=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:S.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:S.displayReason})]},S.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx(J,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Le.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Le.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Le.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx(J,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(S=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:S.name}),l.jsx("span",{className:"font-bold text-slate-400",children:S.diff===0?"!":`${S.diff} .`})]},S.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx(J,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:je.length?je.map(S=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:S.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:S.issue})]},`${S.class}-${S.issue}`)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(J,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:S=>d(S.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),m&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx(J,{name:"Save",size:12})," ",m]})]})]})]}),l.jsx(_A,{isOpen:F,onClose:()=>R(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:Q,onChange:S=>y(S.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:ie,disabled:C,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[C?l.jsx(J,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(J,{name:"Send",size:16}),C?"...":""]})})]})})]})};var SF={},kF={},RF={},Jf={};Object.defineProperty(Jf,"__esModule",{value:!0});function QO(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Jf.default=QO;var QB={};Object.defineProperty(QB,"__esModule",{value:!0});var UO=Jf,SO=" and ";function kO(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],A=UO.default(r),s=n;return typeof s=="boolean"?s?A:"not "+A:(typeof s=="number"&&/[height|width]$/.test(A)&&(s=s+"px"),"("+A+": "+s+")")}).join(SO)}QB.default=kO;var UB={};Object.defineProperty(UB,"__esModule",{value:!0});function RO(){}UB.default=RO;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Jf;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=QB;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=UB;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(RF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=k,r=RF;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(A){return!0}};var n=function(A){return function(s,i){i===void 0&&(i=!1);var a=e.useState(i),o=a[0],c=a[1],d=r.queryObjectToString(s);return A(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),w=function(){h&&c(!!f.matches)};return f.addListener(w),c(f.matches),function(){h=!1,f.removeListener(w)}},[d]),o}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(kF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=kF;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(SF);const NO=QI(SF),NF=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:A,rooms:s}=GA(),{schedule1:i,schedule2:a,saveSemesterSchedule:o,canUndo:c,canRedo:d,undo:h,redo:f}=Ha(),w=e===2?a:i,v=async P=>{await o(e,P)},[B,_]=k.useState(he.First),[x,m]=k.useState(mn.Monday),[I,F]=k.useState(!1),[R,Q]=k.useState({}),[y,C]=k.useState("class"),[E,U]=k.useState(""),[N,L]=k.useState(""),[T,Le]=k.useState(""),[je,rt]=k.useState(!1),[Re,ie]=k.useState({visible:!1,x:0,y:0,item:null,cell:null}),[S,H]=k.useState(null),[z,re]=k.useState([]),[le,Pe]=k.useState(null),[xe,Ge]=k.useState(null),Be=NO({maxWidth:767}),[mt,pe]=k.useState(!0),[Y,Ne]=k.useState(!1),[ke,Z]=k.useState({isOpen:!1,type:"",day:"",classId:""}),[oe,de]=k.useState(mn.Monday),[Ie,Te]=k.useState(""),Ke=Zn[B],ze=()=>y==="week"?Zn[B].map(P=>({id:P.toString(),name:`${P} `})):y==="class"?E?A.filter(P=>P.id===E&&P.shift===B):A.filter(P=>P.shift===B):y==="teacher"?E?n.filter(P=>P.id===E):n:y==="subject"?E?r.filter(P=>P.id===E):r:[],He=(P,G)=>{let W=[];if(y==="week"){const X=parseInt(P),Ae=G;W=w.filter(ne=>ne.shift===B&&ne.period===X&&ne.day===Ae),E&&(W=W.filter(ne=>ne.classId===E))}else{const X=G;y==="class"&&(W=w.filter(Ae=>Ae.classId===P&&Ae.period===X&&Ae.day===x&&Ae.shift===B)),y==="teacher"&&(W=w.filter(Ae=>Ae.teacherId===P&&Ae.period===X&&Ae.day===x&&Ae.shift===B)),y==="subject"&&(W=w.filter(Ae=>Ae.subjectId===P&&Ae.period===X&&Ae.day===x&&Ae.shift===B))}return N&&(W=W.filter(X=>{if(!X.roomId)return!1;const Ae=s.find(Ee=>Ee.id===X.roomId);return(Ae?Ae.name:X.roomId).toLowerCase().includes(N.toLowerCase())})),T&&(W=W.filter(X=>{var Ae;return(Ae=X.direction)==null?void 0:Ae.toLowerCase().includes(T.toLowerCase())})),W},$e=P=>{const G=[],W=w.filter(ne=>ne.id!==P.id&&ne.day===P.day&&ne.period===P.period&&ne.shift===P.shift);return W.find(ne=>ne.teacherId===P.teacherId)&&G.push("teacher"),W.find(ne=>!(ne.classId!==P.classId||ne.direction&&P.direction&&ne.direction!==P.direction))&&G.push("class"),P.roomId&&W.find(Ee=>Ee.roomId===P.roomId)&&G.push("room"),G},Me=(P,G,W)=>{const X=[],Ae=A.find(Se=>Se.id===P),ne=r.find(Se=>Se.id===G),Ee=s.find(Se=>Se.id===W);return Ee&&(Ae&&Ee.capacity<Ae.studentsCount&&X.push(`  !   ${Ae.studentsCount} .,     ${Ee.capacity}.`),ne&&ne.requiredRoomType&&ne.requiredRoomType!==""&&Ee.type!==ne.requiredRoomType&&X.push(`   !   "${ne.requiredRoomType}",   "${Ee.type}".`)),X},De=P=>{if(!P.classId||!P.subjectId||!P.roomId){re([]);return}const G=Me(P.classId,P.subjectId,P.roomId);re(G)},Xe=P=>{t||(Q(P),De(P),F(!0))},We=(P,G,W=x)=>{if(t)return;const X={period:G,day:W,shift:B,id:Math.random().toString(36).substr(2,9)};y==="class"&&(X.classId=P),y==="teacher"&&(X.teacherId=P),y==="subject"&&(X.subjectId=P),y==="week"&&(X.period=parseInt(P),X.day=W,E&&A.find(Ae=>Ae.id===E)&&(X.classId=E)),Q(X),re([]),F(!0)},Ye=async()=>{if(!R.subjectId||!R.teacherId||!R.classId)return;let P=[...w];const G=P.findIndex(W=>W.id===R.id);G>=0?P[G]=R:P.push(R),await v(P),F(!1)},Ze=async P=>{const G=w.filter(W=>W.id!==(P||R.id));await v(G),F(!1)},st=(P,G,W)=>{t||(P.preventDefault(),P.stopPropagation(),ie({visible:!0,x:P.clientX,y:P.clientY,item:G,cell:W}))},tr=(P,G)=>{if(t)return;Pe(G),P.dataTransfer.effectAllowed="move";const W=P.currentTarget;setTimeout(()=>W.classList.add("dragging"),0)},wt=P=>{P.currentTarget.classList.remove("dragging"),Pe(null),Ge(null)},Wt=(P,G)=>{P.preventDefault(),!t&&Ge(`${G.rowId}-${G.colKey}`)},it=async(P,G)=>{if(P.preventDefault(),!le||t)return;const W={...le};y==="week"?(W.period=parseInt(G.rowId),W.day=G.colKey):(W.period=G.colKey,W.day=x,y==="class"&&(W.classId=G.rowId),y==="teacher"&&(W.teacherId=G.rowId),y==="subject"&&(W.subjectId=G.rowId));let X=w.map(Ae=>Ae.id===W.id?W:Ae);await v(X),Pe(null),Ge(null)},Jr=[];Re.item?Jr.push({label:"",icon:"Copy",onClick:()=>H(Re.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>Ze(Re.item.id)}):Re.cell&&(S&&Jr.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...S,id:Math.random().toString(36).substr(2,9),day:x,shift:B,period:Re.cell.colKey};y==="week"&&(P.day=Re.cell.colKey,P.period=parseInt(Re.cell.rowId)),y==="class"?P.classId=Re.cell.rowId:y==="teacher"?P.teacherId=Re.cell.rowId:y==="subject"&&(P.subjectId=Re.cell.rowId);let G=[...w,P];await v(G),H(null)}}),Jr.push({label:" ",icon:"Plus",onClick:()=>We(Re.cell.rowId,typeof Re.cell.colKey=="number"?Re.cell.colKey:parseInt(Re.cell.rowId),y==="week"?Re.cell.colKey:x)}));const un=R.subjectId?n.filter(P=>P.subjectIds.includes(R.subjectId)):[],Xr=R.subjectId?n.filter(P=>!P.subjectIds.includes(R.subjectId)):n,Nn=k.useMemo(()=>{var G,W,X,Ae;const P=e===2?" (2- )":"";if(E){if(y==="teacher")return((G=n.find(ne=>ne.id===E))==null?void 0:G.name)+P;if(y==="class")return((W=A.find(ne=>ne.id===E))==null?void 0:W.name)+P;if(y==="subject")return((X=r.find(ne=>ne.id===E))==null?void 0:X.name)+P;if(y==="week")return((Ae=A.find(ne=>ne.id===E))==null?void 0:Ae.name)+P}return`  ${x}`+P},[E,y,n,A,r,x,e]),D=!!E,$=k.useMemo(()=>D?Dr:Ke,[D,Ke]),q=k.useMemo(()=>D?Zn[B].map(P=>({id:P.toString(),name:`${P} `})):ze(),[D,B,ze]),V=(P,G)=>{if(D){const W=parseInt(P),X=G;let Ae=w.filter(ne=>ne.shift===B&&ne.period===W&&ne.day===X);return y==="class"||y==="week"?Ae=Ae.filter(ne=>ne.classId===E):y==="teacher"?Ae=Ae.filter(ne=>ne.teacherId===E):y==="subject"&&(Ae=Ae.filter(ne=>ne.subjectId===E)),Ae}else return He(P,G)},we=ze(),ge=y==="week"?Dr:Ke,ae=(P,G,W)=>{Z({isOpen:!0,type:P,day:G||"",classId:W||""})},be=async()=>{let P=[...w];ke.type==="clearAll"?P=[]:ke.type==="clearDay"&&ke.day?P=P.filter(G=>G.day!==ke.day):ke.type==="clearClass"&&ke.classId&&(P=P.filter(G=>G.classId!==ke.classId)),await v(P),Z({isOpen:!1,type:"",day:"",classId:""}),Ne(!1)},Fe=(P,G,W)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(X=>{const Ae=r.find(et=>et.id===X.subjectId),ne=n.find(et=>et.id===X.teacherId),Ee=A.find(et=>et.id===X.classId),Se=$e(X),qe=s.find(et=>et.id===X.roomId),nt=qe?qe.name:X.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:et=>tr(et,X),onDragEnd:t?void 0:wt,onClick:t?void 0:()=>Xe(X),onContextMenu:t?void 0:et=>st(et,X,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Se.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Se.length===0&&(Ae!=null&&Ae.color)?{backgroundColor:`${Ae.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:y==="subject"||y==="week"?Ee==null?void 0:Ee.name:Ae==null?void 0:Ae.name}),X.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:X.direction})]}),y==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:Ae==null?void 0:Ae.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:ne==null?void 0:ne.name,children:[l.jsx(J,{name:y==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:y==="teacher"?Ee==null?void 0:Ee.name:ne==null?void 0:ne.name})]}),nt&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:qe?`: ${qe.capacity}, : ${qe.type}`:"",children:nt})]}),Se.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${Se.join(", ")}`,children:"!"})]},X.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>We(W,typeof G=="number"?G:parseInt(W),y==="week"?G:x),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(J,{name:"Plus",size:16})})]}),Ue=()=>{if(!E)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=w.filter(G=>G.day===x&&G.shift===B&&(y==="class"&&G.classId===E||y==="teacher"&&G.teacherId===E||y==="subject"&&G.subjectId===E)).sort((G,W)=>G.period-W.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",x,"  ",B,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(G=>{const W=r.find(qe=>qe.id===G.subjectId),X=n.find(qe=>qe.id===G.teacherId),Ae=A.find(qe=>qe.id===G.classId),ne=s.find(qe=>qe.id===G.roomId),Ee=ne?ne.name:G.roomId,Se=$e(G);return l.jsxs("div",{onClick:t?void 0:()=>Xe(G),className:`rounded-xl p-4 shadow-sm border ${Se.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[G.period," "]}),Se.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${Se.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[W==null?void 0:W.name," ",G.direction&&`(${G.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[Ae==null?void 0:Ae.name,"  ",X==null?void 0:X.name]}),Ee&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Ee]})]},G.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Re.visible&&l.jsx(bO,{x:Re.x,y:Re.y,onClose:()=>ie({...Re,visible:!1}),actions:Jr}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>_(he.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===he.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>_(he.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===he.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),y!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Dr.map(P=>l.jsx("button",{onClick:()=>m(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${x===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(J,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(J,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{C("class"),U("")},className:`p-2 rounded-md ${y==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(J,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{C("teacher"),U("")},className:`p-2 rounded-md ${y==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(J,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{C("subject"),U("")},className:`p-2 rounded-md ${y==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(J,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;C("week"),U(((P=A[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${y==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(J,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(J,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:E,onChange:P=>U(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",y==="class"?"":y==="teacher"?"":y==="week"?" ()":""]}),(y==="class"||y==="week")&&A.filter(P=>P.shift===B).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),y==="teacher"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),y==="subject"&&r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:N,onChange:P=>L(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:T,onChange:P=>Le(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>Ne(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(J,{name:"List",size:16})," . ."]}),(E||y==="week")&&l.jsx("button",{onClick:()=>rt(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(J,{name:"Printer",size:16})})]})]}),Be&&!t&&E&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>pe(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${mt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(J,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>pe(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${mt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(J,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Be&&mt&&!t&&E?Ue():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:y==="week"?"":y==="class"?"":y==="teacher"?"":""}),ge.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:y==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:we.length>0?we.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),ge.map(G=>{const W=He(P.id,G),X=`${P.id}-${G}`,Ae={rowId:P.id,colKey:G};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${xe===X?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:ne=>st(ne,null,Ae),onDragOver:t?void 0:ne=>Wt(ne,Ae),onDrop:t?void 0:ne=>it(ne,Ae),children:Fe(W,G,P.id)},G)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(_A,{isOpen:I,onClose:()=>F(!1),title:R.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",R.day]}),l.jsxs("span",{children:[": ",R.period]}),l.jsxs("span",{children:[": ",R.shift===he.First?"1 ":"2 "]})]}),z.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:z.map(P=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(J,{name:"AlertTriangle",size:14}),P]},P))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(rp,{options:A.filter(P=>P.shift===B).map(P=>({value:P.id,label:P.name})),value:R.classId||null,onChange:P=>{Q({...R,classId:P}),De({...R,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(rp,{options:r.map(P=>({value:P.id,label:P.name})),value:R.subjectId||null,onChange:P=>{Q({...R,subjectId:P}),De({...R,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(rp,{options:[{label:"",options:un.map(P=>({value:P.id,label:P.name}))},{label:"",options:Xr.map(P=>({value:P.id,label:P.name}))}],value:R.teacherId||null,onChange:P=>Q({...R,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:R.direction||"",onChange:P=>Q({...R,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:R.roomId||"",onChange:P=>{Q({...R,roomId:P.target.value}),De({...R,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),s.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[R.id&&l.jsx("button",{onClick:()=>Ze(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:Ye,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(_A,{isOpen:Y,onClose:()=>Ne(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>ae("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:oe,onChange:P=>de(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Dr.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>ae("clearDay",oe),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",oe]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:Ie,onChange:P=>Te(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),A.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{Ie&&ae("clearClass",void 0,Ie)},disabled:!Ie,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(_A,{isOpen:ke.isOpen,onClose:()=>Z({...ke,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>Z({...ke,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:be,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),je&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(J,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>rt(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:Nn}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:D||y==="week"?"":y==="class"?"":y==="teacher"?"":""}),$.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:D||y==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:q.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),$.map(G=>{const W=V(P.id,G);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:W.map(X=>{const Ae=r.find(bt=>bt.id===X.subjectId),ne=n.find(bt=>bt.id===X.teacherId),Ee=A.find(bt=>bt.id===X.classId),Se=s.find(bt=>bt.id===X.roomId),qe=Se?Se.name:X.roomId,nt=y==="teacher",Br=y==="subject"||y==="week"||D&&nt?Ee==null?void 0:Ee.name:Ae==null?void 0:Ae.name,vr=nt?Ee==null?void 0:Ee.name:ne==null?void 0:ne.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Br,X.direction&&` (${X.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:vr}),qe&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:qe})]})]},X.id)})},G)})]},P.id))})]})]})})]})]})},DO=()=>{var Re,ie;const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:A,saveStaticData:s}=GA(),[i,a]=k.useState("teachers"),[o,c]=k.useState(!1),[d,h]=k.useState(null),[f,w]=k.useState({}),[v,B]=k.useState({}),[_,x]=k.useState({}),[m,I]=k.useState({}),[F,R]=k.useState("default"),[Q,y]=k.useState(null),C=S=>{h(S||null),i==="teachers"?w(S?e.find(H=>H.id===S)??{}:{subjectIds:[],unavailableDates:[],shifts:[he.First,he.Second],telegramChatId:""}):i==="subjects"?B(S?t.find(H=>H.id===S)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?x(S?r.find(H=>H.id===S)??{}:{shift:he.First,studentsCount:25}):i==="rooms"&&I(S?n.find(H=>H.id===S)??{}:{capacity:30,type:""}),c(!0)},E=async()=>{const S=()=>Math.random().toString(36).substr(2,9),H={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:v,key:"subjects"},classes:{list:r,form:_,key:"classes"},rooms:{list:n,form:m,key:"rooms"}};if(i==="bells"||!(i in H))return;const z=H[i],{list:re,form:le,key:Pe}=z;if(!le.name)return;let xe=[...re];d?xe=xe.map(Ge=>Ge.id===d?{...Ge,...le}:Ge):xe.push({...le,id:S()}),await s({[Pe]:xe}),c(!1)},U=async S=>{if(window.confirm(" ?"))switch(i){case"teachers":await s({teachers:e.filter(H=>H.id!==S)});break;case"subjects":await s({subjects:t.filter(H=>H.id!==S)});break;case"classes":await s({classes:r.filter(H=>H.id!==S)});break;case"rooms":await s({rooms:n.filter(H=>H.id!==S)});break}},N=(S,H)=>{y(H),S.dataTransfer.effectAllowed="move"},L=S=>{S.preventDefault()},T=async(S,H)=>{if(!(Q===null||Q===H)){switch(i){case"teachers":{const z=[...e],[re]=z.splice(Q,1);z.splice(H,0,re),await s({teachers:z});break}case"subjects":{const z=[...t],[re]=z.splice(Q,1);z.splice(H,0,re),await s({subjects:z});break}case"classes":{const z=[...r],[re]=z.splice(Q,1);z.splice(H,0,re),await s({classes:z});break}case"rooms":{const z=[...n],[re]=z.splice(Q,1);z.splice(H,0,re),await s({rooms:z});break}}y(null)}},Le=(S,H)=>{const z=F;let re=A.find(le=>le.shift===S&&le.period===H&&le.day===z);if(!re&&z!=="default"){const le=A.find(Pe=>Pe.shift===S&&Pe.period===H&&Pe.day==="default");return le?{...le,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return re?{...re,isInherited:!1}:{start:"",end:"",isInherited:!1}},je=async(S,H,z,re)=>{let le=[...A];const Pe=F,xe=le.findIndex(Ge=>Ge.shift===S&&Ge.period===H&&Ge.day===Pe);xe>=0?le[xe]={...le[xe],[z]:re}:le.push({shift:S,period:H,[z]:re,start:"00:00",end:"00:00",day:Pe}),await s({bellSchedule:le})},rt=S=>{const H=f.shifts||[];H.includes(S)?w({...f,shifts:H.filter(z=>z!==S)}):w({...f,shifts:[...H,S]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(S=>l.jsxs("button",{onClick:()=>a(S.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===S.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(J,{name:S.icon,size:18})," ",S.label]},S.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(J,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(Ju,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((S,H)=>l.jsxs("div",{draggable:!0,onDragStart:z=>N(z,H),onDragOver:L,onDrop:z=>T(z,H),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:S.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(J,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>U(S.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(J,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:S.birthDate?`: ${new Date(S.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[S.shifts.includes(he.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),S.shifts.includes(he.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:S.subjectIds.map(z=>{const re=t.find(le=>le.id===z);return re?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:re.color,color:"#334155"},children:re.name},z):null})})]},S.id))}),i==="subjects"&&l.jsx(Ju,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((S,H)=>l.jsxs("div",{draggable:!0,onDragStart:z=>N(z,H),onDragOver:L,onDrop:z=>T(z,H),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:S.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:S.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",S.difficulty,"  ",S.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(J,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>U(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(J,{name:"Trash2",size:16})})]})]},S.id))}),i==="classes"&&l.jsx(Ju,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((S,H)=>l.jsxs("div",{draggable:!0,onDragStart:z=>N(z,H),onDragOver:L,onDrop:z=>T(z,H),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(J,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:S.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[S.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${S.shift===he.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[S.shift===he.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(J,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>U(S.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(J,{name:"Trash2",size:14})})]})]},S.id))}),i==="rooms"&&l.jsx(Ju,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((S,H)=>l.jsxs("div",{draggable:!0,onDragStart:z=>N(z,H),onDragOver:L,onDrop:z=>T(z,H),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(J,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(J,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:S.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",S.capacity,"  ",S.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(J,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>U(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(J,{name:"Trash2",size:16})})]})]},S.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(S=>l.jsx("button",{onClick:()=>R(S),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${F===S?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:S==="default"?"":S===""?"":""},S))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[he.First,he.Second].map(S=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${S===he.First?"bg-indigo-600":"bg-purple-600"}`,children:S}),l.jsx("div",{className:"p-6 space-y-3",children:Zn[S].map(H=>{const z=Le(S,H);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${z.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:H}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:z.start,onChange:re=>je(S,H,"start",re.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:z.end,onChange:re=>je(S,H,"end",re.target.value)})]})]},H)})})]},S))})]})]}),l.jsx(_A,{isOpen:o,onClose:()=>c(!1),title:d?"":"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:S=>w({...f,name:S.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:S=>w({...f,birthDate:S.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:S=>w({...f,telegramChatId:S.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Re=f.shifts)==null?void 0:Re.includes(he.First),onChange:()=>rt(he.First)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(ie=f.shifts)==null?void 0:ie.includes(he.Second),onChange:()=>rt(he.Second)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(S=>{var H;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(H=f.subjectIds)==null?void 0:H.includes(S.id),onChange:z=>{const re=f.subjectIds||[];w({...f,subjectIds:z.target.checked?[...re,S.id]:re.filter(le=>le!==S.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:S.name})]},S.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:v.name||"",onChange:S=>B({...v,name:S.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:v.color||"#ffffff",onChange:S=>B({...v,color:S.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.difficulty||5,onChange:S=>B({...v,difficulty:parseInt(S.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.requiredRoomType,onChange:S=>B({...v,requiredRoomType:S.target.value}),children:Dy.map(S=>l.jsx("option",{value:S,children:S},S))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:_.name||"",onChange:S=>x({..._,name:S.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:_.studentsCount||25,onChange:S=>x({..._,studentsCount:parseInt(S.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>x({..._,shift:he.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===he.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>x({..._,shift:he.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===he.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:m.name||"",onChange:S=>I({...m,name:S.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.capacity||30,onChange:S=>I({...m,capacity:parseInt(S.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.type,onChange:S=>I({...m,type:S.target.value}),children:Dy.map(S=>l.jsx("option",{value:S,children:S},S))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:E,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},PO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:A,saveStaticData:s}=GA(),{schedule1:i,schedule2:a,substitutions:o,saveScheduleData:c}=Ha(),d=Ys(),[h,f]=k.useState(new Date().toISOString().split("T")[0]),[w,v]=k.useState(!1),[B,_]=k.useState(null),[x,m]=k.useState(!1),[I,F]=k.useState(!1),[R,Q]=k.useState(null),[y,C]=k.useState(""),[E,U]=k.useState(!1),[N,L]=k.useState(""),[T,Le]=k.useState(""),[je,rt]=k.useState("all"),[Re,ie]=k.useState(""),[S,H]=k.useState(""),[z,re]=k.useState(""),[le,Pe]=k.useState(""),[xe,Ge]=k.useState([]),[Be,mt]=k.useState(!1),[pe,Y]=k.useState(!1),[Ne,ke]=k.useState(!1),Z=k.useMemo(()=>{const D=new Date(h).getMonth();return D>=0&&D<=4?a:i},[h,i,a]);k.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(_(d.state.subParams),re(""),Pe(""),Ge([]),mt(!1),Y(!1),ke(!1),v(!0),window.history.replaceState({},document.title))},[d.state]),k.useEffect(()=>{if(w&&B){const D=o.find($=>$.scheduleItemId===B.scheduleItemId&&$.date===h);Ge(D?D.refusals||[]:[]),mt(!1),Y(!1),ke(!1)}},[w,B,o,h]);const oe=k.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:Dr[D-1]},[h]),de=k.useMemo(()=>e.filter(D=>{const $=D.name.toLowerCase().includes(T.toLowerCase()),q=je==="all"?!0:D.shifts.includes(je);return $&&q}),[e,T,je]),Ie=k.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),Te=k.useMemo(()=>{if(!oe)return[];const D=Ie.map(ae=>ae.id),$=Z.filter(ae=>ae.day===oe&&D.includes(ae.teacherId)),V=o.filter(ae=>ae.date===h).map(ae=>ae.scheduleItemId),we=Z.filter(ae=>V.includes(ae.id)),ge=[...$];return we.forEach(ae=>{ge.find(be=>be.id===ae.id)||ge.push(ae)}),ge.sort((ae,be)=>ae.period-be.period)},[Z,oe,Ie,o,h]),Ke=D=>{var q;const $=e.find(V=>V.id===D);Q(D),C(((q=$==null?void 0:$.absenceReasons)==null?void 0:q[h])||""),m(!0)},ze=k.useCallback(async()=>{let D=[...e];const $=D.findIndex(V=>V.id===R);if($===-1)return;const q={...D[$]};q.unavailableDates.includes(h)||(q.unavailableDates=[...q.unavailableDates,h]),q.absenceReasons||(q.absenceReasons={}),q.absenceReasons[h]=y,D[$]=q,await s({teachers:D}),m(!1)},[e,R,h,y,s]),He=k.useCallback(async D=>{let $=[...e];const q=$.findIndex(we=>we.id===D);if(q===-1)return;const V={...$[q]};V.unavailableDates=V.unavailableDates.filter(we=>we!==h),V.absenceReasons&&delete V.absenceReasons[h],$[q]=V,await s({teachers:$})},[e,h,s]),$e=k.useCallback(async(D,$=!1)=>{if(!B){alert(":   .    . ,   .");return}const q=[...o],V=Z.find(ae=>ae.id===B.scheduleItemId);if(!V){alert(":     . ,       .");return}const we=q.filter(ae=>!(ae.scheduleItemId===B.scheduleItemId&&ae.date===h)),ge={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:B.scheduleItemId,originalTeacherId:V.teacherId,replacementTeacherId:D,replacementRoomId:z||void 0,isMerger:$,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&le?le:void 0,refusals:xe};we.push(ge),await c({substitutions:we}),v(!1),ie(""),re(""),Pe(""),Ge([]),_(null)},[B,h,z,Z,o,e,le,xe,c]),Me=k.useCallback(async D=>{if(!B||!oe)return;const $=Z.filter(V=>V.classId===D&&V.day===oe&&V.period===B.period&&V.shift===B.shift);if($.length===0){alert("    .");return}const q=o.filter(V=>!(V.scheduleItemId===B.scheduleItemId&&V.date===h));$.forEach(V=>{const we={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:B.scheduleItemId,originalTeacherId:B.teacherId,replacementTeacherId:V.teacherId,replacementClassId:V.classId,replacementSubjectId:V.subjectId,isMerger:!0,replacementRoomId:V.roomId,lessonAbsenceReason:le||void 0};q.push(we)}),await c({substitutions:q}),v(!1),ie(""),re(""),Pe(""),_(null),Y(!1)},[B,h,oe,Z,o,le,c]),De=k.useCallback(async D=>{if(!B)return;const $=Z.find(P=>P.id===B.scheduleItemId),q=Z.find(P=>P.id===D);if(!$||!q){alert(":     .");return}const V=[...o];let we;z?we=z:we=Ne?$.roomId:q.roomId;const ge=Ne?q.roomId:$.roomId,ae=V.findIndex(P=>P.scheduleItemId===$.id&&P.date===h),be={id:ae>=0?V[ae].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:$.id,originalTeacherId:$.teacherId,replacementTeacherId:$.teacherId,replacementClassId:q.classId,replacementSubjectId:q.subjectId,replacementRoomId:we!==$.roomId?we:void 0};ae>=0?V[ae]=be:V.push(be);const Fe=V.findIndex(P=>P.scheduleItemId===q.id&&P.date===h),Ue={id:Fe>=0?V[Fe].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:q.id,originalTeacherId:q.teacherId,replacementTeacherId:q.teacherId,replacementClassId:$.classId,replacementSubjectId:$.subjectId,replacementRoomId:ge!==q.roomId?ge:void 0};Fe>=0?V[Fe]=Ue:V.push(Ue),await c({substitutions:V}),v(!1),_(null),re(""),mt(!1),ke(!1)},[B,Z,o,h,c,z,Ne]),Xe=k.useCallback(async D=>{const $=o.filter(q=>!(q.scheduleItemId===D&&q.date===h));await c({substitutions:$})},[o,h,c]),We=k.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const $=o.some(V=>V.date===h&&V.replacementTeacherId!=="conducted"),q=(V,we)=>{const ae=Te.filter(be=>be.shift===we).filter(be=>{const Fe=o.filter(Ue=>Ue.scheduleItemId===be.id&&Ue.date===h);return Fe.length>0&&Fe.some(Ue=>Ue.replacementTeacherId!=="conducted")});ae.length>0&&(D+=`
 *${V.toUpperCase()}*
`,ae.forEach(be=>{var P;const Fe=o.filter(G=>G.scheduleItemId===be.id&&G.date===h);if(Fe.some(G=>G.isMerger)){const G=r.find(et=>et.id===be.classId),W=t.find(et=>et.id===be.subjectId),X=e.find(et=>et.id===be.teacherId),Ae=(X==null?void 0:X.name)||"?",ne=Fe.map(et=>{var rr;return(rr=e.find(Br=>Br.id===et.replacementTeacherId))==null?void 0:rr.name}).filter(Boolean).join(", "),Ee=Fe[0],Se=Ee!=null&&Ee.replacementClassId?r.find(et=>et.id===Ee.replacementClassId):null;let qe=` ${G==null?void 0:G.name} (${be.period} ): ${W==null?void 0:W.name} -> ${ne} (${Se?`  ${Se.name}`:""}) ( ${Ae})`;const nt=Ee==null?void 0:Ee.replacementRoomId;if(nt){const et=((P=n.find(rr=>rr.id===nt))==null?void 0:P.name)||nt;qe+=`  . ${et}`}D+=qe+`
`}else Fe.forEach(G=>{var oi,Zr,uA;if(G.replacementTeacherId==="conducted")return;const W=r.find(Tt=>Tt.id===be.classId),X=t.find(Tt=>Tt.id===be.subjectId),Ae=e.find(Tt=>Tt.id===G.replacementTeacherId),ne=e.find(Tt=>Tt.id===be.teacherId),Ee=((oi=n.find(Tt=>Tt.id===be.roomId))==null?void 0:oi.name)||be.roomId||"?",Se=(Zr=ne==null?void 0:ne.absenceReasons)==null?void 0:Zr[h],qe=G==null?void 0:G.lessonAbsenceReason,rr=(qe===" "?qe:null)||(Se===" "?Se:null),Br=(ne==null?void 0:ne.name)+(rr?` (${rr})`:""),vr=G!=null&&G.replacementRoomId?((uA=n.find(Tt=>Tt.id===G.replacementRoomId))==null?void 0:uA.name)||G.replacementRoomId:null,bt=G!=null&&G.replacementClassId?r.find(Tt=>Tt.id===G.replacementClassId):null,Yr=G!=null&&G.replacementSubjectId?t.find(Tt=>Tt.id===G.replacementSubjectId):null,Vr=bt&&Yr&&!G.isMerger;if(G.replacementTeacherId==="cancelled")D+=` ${W==null?void 0:W.name} (${be.period} ): ${X==null?void 0:X.name} (${Br}) ->  
`;else if(G.replacementTeacherId===G.originalTeacherId&&vr&&!bt)D+=` ${W==null?void 0:W.name} (${be.period} ): ${X==null?void 0:X.name} (${ne==null?void 0:ne.name}) ->  ${Ee}  ${vr}
`;else if(Vr)D+=` ${W==null?void 0:W.name} (${be.period} ): ${X==null?void 0:X.name} ->  ${bt==null?void 0:bt.name} ${Yr==null?void 0:Yr.name} ( )${vr?`  . ${vr}`:""}
`;else{let Tt=` ${W==null?void 0:W.name} (${be.period} ): ${X==null?void 0:X.name} -> ${Ae==null?void 0:Ae.name} ( ${Br})`;vr&&(Tt+=`  . ${vr}`),D+=Tt+`
`}})}),D+=`
`)};$?(q(he.First,he.First),q(he.Second,he.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,o,Te,r,t,e,n]),Ye=k.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(ge=>ge.date===h).forEach(ge=>{var Se;const ae=Z.find(qe=>qe.id===ge.scheduleItemId);if(!ae)return;let be="Unknown";if(ge.replacementTeacherId==="cancelled")be=" ";else if(ge.replacementTeacherId==="conducted")be=" ";else{const qe=e.find(nt=>nt.id===ge.replacementTeacherId);qe&&(be=qe.name)}const Fe=t.find(qe=>qe.id===ae.subjectId),Ue=r.find(qe=>qe.id===ae.classId),P=ge.date.replace(/-/g,""),G=e.find(qe=>qe.id===ge.originalTeacherId),W=(Se=G==null?void 0:G.absenceReasons)==null?void 0:Se[h],X=ge.lessonAbsenceReason,Ee=(X===" "?X:null)||(W===" "?W:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${P}
SUMMARY:: ${Ue==null?void 0:Ue.name} - ${Fe==null?void 0:Fe.name}
DESCRIPTION:: ${be}${ge.isMerger?" ()":""}${Ee?` (: ${Ee})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const q=new Blob([D],{type:"text/calendar"}),V=URL.createObjectURL(q),we=document.createElement("a");we.href=V,we.download="substitutions.ics",document.body.appendChild(we),we.click(),document.body.removeChild(we)},[h,o,Z,e,t,r]),Ze=k.useCallback(async()=>{if(!(A!=null&&A.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,$=!1;const q=new Set,V=[he.First,he.Second];for(const ge of V){const be=Te.filter(Fe=>Fe.shift===ge).filter(Fe=>o.some(Ue=>Ue.scheduleItemId===Fe.id&&Ue.date===h&&Ue.replacementTeacherId!=="conducted"));be.length>0&&($=!0,D+=` *${ge.toUpperCase()}*
`,be.forEach(Fe=>{var G;const Ue=o.filter(W=>W.scheduleItemId===Fe.id&&W.date===h);if(Ue.some(W=>W.isMerger)){const W=r.find(nt=>nt.id===Fe.classId),X=t.find(nt=>nt.id===Fe.subjectId),Ae=e.find(nt=>nt.id===Fe.teacherId),ne=Ue.map(nt=>{var et;return(et=e.find(rr=>rr.id===nt.replacementTeacherId))==null?void 0:et.name}).filter(Boolean).join(", "),Ee=Ue[0],Se=Ee!=null&&Ee.replacementClassId?r.find(nt=>nt.id===Ee.replacementClassId):null;Ae!=null&&Ae.telegramChatId&&q.add(Ae.telegramChatId),Ue.forEach(nt=>{const et=e.find(rr=>rr.id===nt.replacementTeacherId);et!=null&&et.telegramChatId&&q.add(et.telegramChatId)});const qe=Ee.replacementRoomId?((G=n.find(nt=>nt.id===Ee.replacementRoomId))==null?void 0:G.name)||Ee.replacementRoomId:"";D+=`${Fe.period}  (${W==null?void 0:W.name} ${X==null?void 0:X.name}): *${ne}* (${Se?`  ${Se.name}`:""}). : ${qe}
`}else Ue.forEach(W=>{var uA,Tt,Ka;if(!W)return;const X=r.find(ur=>ur.id===Fe.classId),Ae=t.find(ur=>ur.id===Fe.subjectId),ne=e.find(ur=>ur.id===W.originalTeacherId),Ee=e.find(ur=>ur.id===W.replacementTeacherId),Se=(uA=ne==null?void 0:ne.absenceReasons)==null?void 0:uA[h],qe=W.lessonAbsenceReason,rr=(qe===" "?qe:null)||(Se===" "?Se:null),Br=(ne==null?void 0:ne.name)+(rr?` (${rr})`:""),vr=((Tt=n.find(ur=>ur.id===Fe.roomId))==null?void 0:Tt.name)||Fe.roomId||"",bt=W.replacementRoomId?((Ka=n.find(ur=>ur.id===W.replacementRoomId))==null?void 0:Ka.name)||W.replacementRoomId:vr,Yr=W.replacementClassId?r.find(ur=>ur.id===W.replacementClassId):null,Vr=W.replacementSubjectId?t.find(ur=>ur.id===W.replacementSubjectId):null,oi=Yr&&Vr&&!W.isMerger;let Zr=`${Fe.period}  (${X==null?void 0:X.name} ${Ae==null?void 0:Ae.name}${Fe.direction?` ${Fe.direction}`:""}): `;W.replacementTeacherId==="cancelled"?Zr+=`* * ( ${Br})`:oi?(Zr+=`  : ${Yr==null?void 0:Yr.name} ${Vr==null?void 0:Vr.name} ( ${X==null?void 0:X.name} ${Ae==null?void 0:Ae.name})`,bt!==vr&&(Zr+=`  . ${bt}`)):W.replacementTeacherId===W.originalTeacherId?Zr+=`: ${Br}.  : ${vr}  ${bt}`:(Zr+=`*${Ee==null?void 0:Ee.name}* ( *${Br}*)`,vr!==bt?Zr+=`. : ${vr}  ${bt}`:bt!==""&&(Zr+=`. : ${bt}`)),D+=`${Zr}
`,ne!=null&&ne.telegramChatId&&q.add(ne.telegramChatId),Ee!=null&&Ee.telegramChatId&&q.add(Ee.telegramChatId)})}),D+=`
`)}if($||(D+=` .
`),Ie.forEach(ge=>{var Ue;const ae=o.some(P=>P.date===h&&P.originalTeacherId===ge.id&&P.replacementTeacherId!=="cancelled"&&P.replacementTeacherId!=="conducted"),be=(Ue=ge.absenceReasons)==null?void 0:Ue[h],Fe=be===" "?be:"";ge.telegramChatId&&!ae&&ge.unavailableDates.includes(h)&&(q.add(ge.telegramChatId),$?D+=`_:  ${ge.name} ${Fe},        /._
`:D+=`_:  ${ge.name} ${Fe},      ._
`)}),q.size===0){alert("    Telegram Chat ID   .");return}const we=`https://api.telegram.org/bot${A.telegramToken}/sendMessage`;try{const ge=Array.from(q).map(ae=>fetch(we,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:ae,text:D,parse_mode:"Markdown"})}));await Promise.all(ge),alert(`   ${q.size} !`)}catch(ge){console.error("    Telegram:",ge),alert("     Telegram.     .")}},[h,Te,o,r,t,e,n,Ie,A==null?void 0:A.telegramToken]),st=k.useCallback(async(D,$,q,V,we,ge)=>{const be=new Date(ge).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),Fe=$.shift===he.First?"1 ":"2 ",Ue=` *  *
${D.name}

 : ${be}
 : ${Fe}
 : ${q==null?void 0:q.name}
1 : ${$.period}
 : ${V==null?void 0:V.name}
 : ${we||" "}`;if(A!=null&&A.telegramToken&&D.telegramChatId)try{const G=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:Ue,parse_mode:"Markdown"})})).json();G.ok?alert(`   Telegram  ${D.name}!`):G.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${G.description}`)}catch(P){alert("   Telegram (/)."),console.error(P)}else navigator.share?navigator.share({title:"",text:Ue}).catch(()=>{}):(navigator.clipboard.writeText(Ue),alert(" ! (Telegram     Chat ID)"))},[A==null?void 0:A.telegramToken]),tr=k.useMemo(()=>B?new Set(o.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const $=Z.find(q=>q.id===D.scheduleItemId);return $&&$.period===B.period&&$.shift===B.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[o,Z,h,B]),wt=k.useMemo(()=>{if(!B||!oe)return[];const D=h.substring(0,7);return e.filter($=>$.name.toLowerCase().includes(Re.toLowerCase())).map($=>{const q=$.unavailableDates.includes(h),V=Z.some(Ue=>Ue.teacherId===$.id&&Ue.day===oe&&Ue.period===B.period&&Ue.shift===B.shift),we=tr.has($.id),ge=V||we,ae=$.subjectIds.includes(B.subjectId),be=o.filter(Ue=>Ue.replacementTeacherId===$.id&&Ue.date.startsWith(D)).length;let Fe=0;return q&&(Fe-=1e3),ge&&(Fe-=100),ae&&(Fe+=50),{teacher:$,isAbsent:q,isBusy:ge,isSpecialist:ae,score:Fe,subsCount:be}}).sort(($,q)=>q.score-$.score)},[e,B,h,Re,oe,Z,o,tr]),Wt=k.useMemo(()=>{if(!B||!oe)return[];const D=Z.filter(q=>q.day===oe&&q.period===B.period&&q.shift===B.shift&&q.classId!==B.classId),$=new Map;return D.forEach(q=>{const V=r.find(ae=>ae.id===q.classId),we=e.find(ae=>ae.id===q.teacherId),ge=t.find(ae=>ae.id===q.subjectId);if(V&&we){$.has(V.id)||$.set(V.id,{classEntity:V,teachers:[],subjects:[]});const ae=$.get(V.id);ae.teachers.includes(we.name)||ae.teachers.push(we.name),ge&&!ae.subjects.includes(ge.name)&&ae.subjects.push(ge.name)}}),Array.from($.values())},[Z,B,oe,r,e,t]),it=k.useMemo(()=>{var ge;if(!B)return null;const D=Z.find(ae=>ae.id===B.scheduleItemId);if(!D)return null;const $=r.find(ae=>ae.id===D.classId),q=t.find(ae=>ae.id===D.subjectId),V=e.find(ae=>ae.id===D.teacherId),we=((ge=V==null?void 0:V.unavailableDates)==null?void 0:ge.includes(h))||!1;return{className:$==null?void 0:$.name,subjectName:q==null?void 0:q.name,teacherName:V==null?void 0:V.name,teacherId:V==null?void 0:V.id,period:D.period,roomId:D.roomId,isTeacherAbsent:we}},[B,Z,r,t,e,h]),Jr=k.useMemo(()=>!(it!=null&&it.teacherId)||!oe?[]:Z.filter(D=>D.teacherId===it.teacherId&&D.day===oe&&D.id!==(B==null?void 0:B.scheduleItemId)).sort((D,$)=>D.period-$.period),[Z,it,oe,B]),un=k.useMemo(()=>{if(!oe||S.length<2)return[];const D=S.toLowerCase(),$=e.filter(we=>we.name.toLowerCase().includes(D)),q=r.filter(we=>we.name.toLowerCase().includes(D)),V=[];return $.forEach(we=>{Z.filter(ae=>ae.teacherId===we.id&&ae.day===oe).forEach(ae=>{const be=r.find(Ue=>Ue.id===ae.classId),Fe=t.find(Ue=>Ue.id===ae.subjectId);V.push({...ae,entityName:we.name,subInfo:be==null?void 0:be.name,subjectName:Fe==null?void 0:Fe.name})})}),q.forEach(we=>{Z.filter(ae=>ae.classId===we.id&&ae.day===oe).forEach(ae=>{if(V.find(Ue=>Ue.id===ae.id))return;const be=e.find(Ue=>Ue.id===ae.teacherId),Fe=t.find(Ue=>Ue.id===ae.subjectId);V.push({...ae,entityName:we.name,subInfo:be==null?void 0:be.name,subjectName:Fe==null?void 0:Fe.name})})}),V.sort((we,ge)=>we.period-ge.period)},[S,oe,e,r,Z,t]),Xr=(D,$)=>{let q=!1;if($){if(!window.confirm("     .     ?"))return;q=!0}$e(D,q)},Nn=(D,$)=>{$.stopPropagation(),xe.includes(D)?Ge(xe.filter(q=>q!==D)):Ge([...xe,D])};return l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(J,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>U(!E),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${E?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx(J,{name:"History",size:16})," ",E?" ":" "]})]}),E?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:N,onChange:D=>L(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(D=>{var $;return D.date.includes(N)||(($=e.find(q=>q.id===D.replacementTeacherId))==null?void 0:$.name.toLowerCase().includes(N.toLowerCase()))}).map(D=>{const $=e.find(V=>V.id===D.replacementTeacherId),q=n.find(V=>V.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[($==null?void 0:$.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),q&&l.jsxs("div",{className:"text-indigo-500",children:[". ",q.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>rt("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${je==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>rt(he.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${je===he.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>rt(he.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${je===he.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:T,onChange:D=>Le(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[de.map(D=>{const $=D.unavailableDates.includes(h),q=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${$?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${$?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>$?He(D.id):Ke(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${$?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:$?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(V=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:V===he.First?"1":"2"},V))}),$&&l.jsxs("div",{className:"flex items-center gap-1",children:[q&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:q}),l.jsx("button",{onClick:()=>Ke(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(J,{name:"Edit2",size:14})})]})]})]},D.id)}),de.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",Te.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:Ye,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(J,{name:"Calendar",size:16})," iCal"]}),Te.length>0&&l.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(J,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Ze,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{H(""),F(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(J,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:Te.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(J,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):Te.map(D=>{var Ee;const $=o.filter(Se=>Se.scheduleItemId===D.id&&Se.date===h),q=$.length>0,V=q?$[0]:null,we=V&&V.replacementTeacherId!=="cancelled"&&V.replacementTeacherId!=="conducted"?e.find(Se=>Se.id===V.replacementTeacherId):null,ge=e.find(Se=>Se.id===D.teacherId),ae=t.find(Se=>Se.id===D.subjectId),be=r.find(Se=>Se.id===D.classId),Fe=n.find(Se=>Se.id===D.roomId),Ue=Fe?Fe.name:D.roomId,P=V==null?void 0:V.replacementRoomId,G=P?((Ee=n.find(Se=>Se.id===P))==null?void 0:Ee.name)||P:null,W=V!=null&&V.replacementClassId?r.find(Se=>Se.id===V.replacementClassId):null,X=V!=null&&V.replacementSubjectId?t.find(Se=>Se.id===V.replacementSubjectId):null;let Ae=null;if((V==null?void 0:V.replacementTeacherId)==="conducted")Ae=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Xe(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(J,{name:"X",size:16})})]});else if((V==null?void 0:V.replacementTeacherId)==="cancelled")Ae=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Xe(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(J,{name:"X",size:16})})]});else if(q){const Se=(V==null?void 0:V.replacementTeacherId)===(V==null?void 0:V.originalTeacherId)&&P&&!W,qe=W&&X&&!V.isMerger,nt=$.map(et=>{var rr;return(rr=e.find(Br=>Br.id===et.replacementTeacherId))==null?void 0:rr.name}).filter(Boolean).join(", ");Ae=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Se?" ":qe?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm max-w-[200px] truncate",title:nt,children:Se?"  ":qe?` ${W==null?void 0:W.name}`:nt}),V.isMerger&&l.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",W?`(  ${W.name})`:""]}),V.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",V.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>st(we||ge,D,be,ae,G||Ue,h),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(J,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>Xe(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(J,{name:"UserX",size:18})})]})]})}else Ae=l.jsxs("button",{onClick:()=>{_({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(J,{name:"ArrowRight",size:16})]});const ne=!Ie.find(Se=>Se.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:be==null?void 0:be.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===he.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:ae==null?void 0:ae.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:ne?"font-semibold":"line-through decoration-red-400 decoration-2",children:ge==null?void 0:ge.name}),Ue&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Ue," ",G&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",G]})]}),(V==null?void 0:V.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",V.lessonAbsenceReason,")"]}),W&&X&&!V.isMerger&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",W.name]})]})]})]}),Ae]},D.id)})})]}),l.jsxs(_A,{isOpen:w,onClose:()=>v(!1),title:" ",children:[it&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[it.className,"  ",it.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:it.subjectName}),l.jsx("span",{className:it.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:it.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:z,onChange:D=>re(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),n.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),it&&!it.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:le,onChange:D=>Pe(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>$e("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>$e("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>Y(!pe),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[l.jsx(J,{name:"Users",size:16})," :    (  )"]}),pe&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),Wt.length===0?l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):Wt.map(D=>l.jsxs("button",{onClick:()=>Me(D.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.classEntity.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D.subjects.join(", ")," ",l.jsx("span",{className:"text-slate-400",children:"|"})," ",D.teachers.join(", ")]})]},D.classEntity.id))]})]}),(it==null?void 0:it.teacherId)&&!it.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>$e(it.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),Jr.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>mt(!Be),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx(J,{name:"RotateCw",size:16}),"     "]}),Be&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:Ne,onChange:D=>ke(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),Jr.map(D=>{const $=r.find(V=>V.id===D.classId),q=t.find(V=>V.id===D.subjectId);return l.jsxs("button",{onClick:()=>De(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",$==null?void 0:$.name," - ",q==null?void 0:q.name]},D.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Re,onChange:D=>ie(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[wt.map(({teacher:D,isAbsent:$,isBusy:q,isSpecialist:V,subsCount:we})=>{const ge=xe.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${$?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":ge?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":q?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${V?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:V?l.jsx(J,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[V&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),q&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),$&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),ge&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${we>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",we]})]})]})]}),!$&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ae=>Nn(D.id,ae),className:`px-3 py-1 text-xs font-bold rounded border ${ge?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:ge?"":""}),!ge&&!q&&l.jsx("button",{onClick:()=>Xr(D.id,q),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!ge&&q&&l.jsx("button",{onClick:()=>Xr(D.id,q),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),wt.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(_A,{isOpen:I,onClose:()=>F(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(J,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:S,onChange:D=>H(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[un.map(D=>{var $;return l.jsxs("button",{onClick:()=>{F(!1),_({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",(($=n.find(q=>q.id===D.roomId))==null?void 0:$.name)||D.roomId]})]})]},D.id)}),S.length>1&&un.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(_A,{isOpen:x,onClose:()=>m(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:y,onChange:D=>C(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:ze,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},LO=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:A}=GA(),{schedule1:s,schedule2:i}=Ha(),[a,o]=k.useState("teachers"),[c,d]=k.useState(new Date().toISOString().split("T")[0]),[h,f]=k.useState(he.First),[w,v]=k.useState(1),[B,_]=k.useState(he.First),[x,m]=k.useState(1),[I,F]=k.useState(""),[R,Q]=k.useState(""),y=k.useMemo(()=>{const T=new Date(c).getMonth();return T>=0&&T<=4?i:s},[c,s,i]);k.useEffect(()=>{n&&(F(n.telegramToken||""),Q(n.feedbackChatId||""))},[n]),k.useEffect(()=>{v(h===he.First?1:0)},[h]),k.useEffect(()=>{m(B===he.First?1:0)},[B]);const C=k.useMemo(()=>{const T=new Date(c).getDay();return T===0||T===6?null:Dr[T-1]},[c]),E=Zn[h],U=k.useMemo(()=>C?e.filter(T=>T.shifts&&!T.shifts.includes(h)||T.unavailableDates.includes(c)?!1:!y.some(je=>je.teacherId===T.id&&je.day===C&&je.period>w&&je.shift===h)).sort((T,Le)=>T.name.localeCompare(Le.name)):[],[e,c,C,w,h,y]),N=k.useMemo(()=>{if(!C)return[];const T=new Set;return y.forEach(je=>{je.day===C&&je.period===x&&je.shift===B&&je.roomId&&T.add(je.roomId)}),r.filter(je=>!T.has(je.id)).map(je=>je.name)},[y,r,C,x,B]),L=async()=>{await A({settings:{...n,telegramToken:I,feedbackChatId:R}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(J,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),a!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:T=>d(T.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),a==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(he.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===he.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(he.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===he.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:E.map(T=>l.jsx("button",{onClick:()=>v(T),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${w===T?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:T},T))})]})]}),a==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>_(he.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===he.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>_(he.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===he.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:Zn[B].map(T=>l.jsx("button",{onClick:()=>m(T),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${x===T?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:T},T))})]})]}),a==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:I,onChange:T=>F(T.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:R,onChange:T=>Q(T.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:L,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Save",size:20}),"  "]})]})]}),a==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[U.map(T=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(J,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:T.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:T.subjectIds.slice(0,2).map(Le=>{const je=t.find(rt=>rt.id===Le);return je?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:je.name},Le):null})})]})]},T.id)),U.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",w,"   ",h]})]}),a==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[N.map(T=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(J,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:T}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},T)),N.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(J,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zm=function(t,e){return Zm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(r[A]=n[A])},Zm(t,e)};function $n(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zm(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var e0=function(){return e0=Object.assign||function(e){for(var r,n=1,A=arguments.length;n<A;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},e0.apply(this,arguments)};function Kr(t,e,r,n){function A(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function o(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):A(d.value).then(a,o)}c((n=n.apply(t,[])).next())})}function Nr(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,A,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return o([c,d])}}function o(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,A&&(s=c[0]&2?A.return:c[0]?A.throw||((s=A.return)&&s.call(A),0):A.next)&&!(s=s.call(A,c[1])).done)return s;switch(A=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,A=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],A=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Xu(t,e,r){if(arguments.length===2)for(var n=0,A=e.length,s;n<A;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var DA=function(){function t(e,r,n,A){this.left=e,this.top=r,this.width=n,this.height=A}return t.prototype.add=function(e,r,n,A){return new t(this.left+e,this.top+r,this.width+n,this.height+A)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(A){return A.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Xf=function(t,e){return DA.fromClientRect(t,e.getBoundingClientRect())},MO=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),A=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new DA(0,0,n,A)},Yf=function(t){for(var e=[],r=0,n=t.length;r<n;){var A=t.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),r--)}else e.push(A)}return e},Xt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],A=-1,s="";++A<r;){var i=t[A];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(A+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},TC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yu=0;Yu<TC.length;Yu++)jO[TC.charCodeAt(Yu)]=Yu;var FC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zu=0;Zu<FC.length;Zu++)bl[FC.charCodeAt(Zu)]=Zu;var OO=function(t){var e=t.length*.75,r=t.length,n,A=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)s=bl[t.charCodeAt(n)],i=bl[t.charCodeAt(n+1)],a=bl[t.charCodeAt(n+2)],o=bl[t.charCodeAt(n+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|a>>2,d[A++]=(a&3)<<6|o&63;return c},HO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},VO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Ui=5,SB=11,Ap=2,KO=SB-Ui,DF=65536>>Ui,GO=1<<Ui,sp=GO-1,zO=1024>>Ui,$O=DF+zO,WO=$O,qO=32,JO=WO+qO,XO=65536>>SB,YO=1<<KO,ZO=YO-1,QC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},eH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},tH=function(t,e){var r=OO(t),n=Array.isArray(r)?VO(r):new Uint32Array(r),A=Array.isArray(r)?HO(r):new Uint16Array(r),s=24,i=QC(A,s/2,n[4]/2),a=n[5]===2?QC(A,(s+n[4])/2):eH(n,Math.ceil((s+n[4])/4));return new rH(n[0],n[1],n[2],n[3],i,a)},rH=function(){function t(e,r,n,A,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Ui],r=(r<<Ap)+(e&sp),this.data[r];if(e<=65535)return r=this.index[DF+(e-55296>>Ui)],r=(r<<Ap)+(e&sp),this.data[r];if(e<this.highStart)return r=JO-XO+(e>>SB),r=this.index[r],r+=e>>Ui&ZO,r=this.index[r],r=(r<<Ap)+(e&sp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),UC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ed=0;ed<UC.length;ed++)nH[UC.charCodeAt(ed)]=ed;var AH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",SC=50,sH=1,PF=2,LF=3,iH=4,oH=5,kC=7,MF=8,RC=9,ws=10,t0=11,NC=12,r0=13,aH=14,Tl=15,n0=16,td=17,hl=18,lH=19,DC=20,A0=21,fl=22,ip=23,uo=24,fn=25,Fl=26,Ql=27,ho=28,cH=29,xi=30,uH=31,rd=32,nd=33,s0=34,i0=35,o0=36,Nc=37,a0=38,zd=39,$d=40,op=41,jF=42,dH=43,hH=[9001,65288],OF="!",ot="",Ad="",l0=tH(AH),fA=[xi,o0],c0=[sH,PF,LF,oH],HF=[ws,MF],PC=[Ql,Fl],fH=c0.concat(HF),LC=[a0,zd,$d,s0,i0],gH=[Tl,r0],pH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],A=[];return t.forEach(function(s,i){var a=l0.get(s);if(a>SC?(A.push(!0),a-=SC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(n0);if(a===iH||a===t0){if(i===0)return n.push(i),r.push(xi);var o=r[i-1];return fH.indexOf(o)===-1?(n.push(n[i-1]),r.push(o)):(n.push(i),r.push(xi))}if(n.push(i),a===uH)return r.push(e==="strict"?A0:Nc);if(a===jF||a===cH)return r.push(xi);if(a===dH)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Nc):r.push(xi);r.push(a)}),[n,r,A]},ap=function(t,e,r,n){var A=n[r];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==ws)break}if(A===ws)for(var s=r;s>0;){s--;var a=n[s];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var o=r;o<=n.length;){o++;var i=n[o];if(i===e)return!0;if(i!==ws)break}if(a!==ws)break}return!1},MC=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===ws)r--;else return n}return 0},mH=function(t,e,r,n,A){if(r[n]===0)return ot;var s=n-1;if(Array.isArray(A)&&A[s]===!0)return ot;var i=s-1,a=s+1,o=e[s],c=i>=0?e[i]:0,d=e[a];if(o===PF&&d===LF)return ot;if(c0.indexOf(o)!==-1)return OF;if(c0.indexOf(d)!==-1||HF.indexOf(d)!==-1)return ot;if(MC(s,e)===MF)return Ad;if(l0.get(t[s])===t0||(o===rd||o===nd)&&l0.get(t[a])===t0||o===kC||d===kC||o===RC||[ws,r0,Tl].indexOf(o)===-1&&d===RC||[td,hl,lH,uo,ho].indexOf(d)!==-1||MC(s,e)===fl||ap(ip,fl,s,e)||ap([td,hl],A0,s,e)||ap(NC,NC,s,e))return ot;if(o===ws)return Ad;if(o===ip||d===ip)return ot;if(d===n0||o===n0)return Ad;if([r0,Tl,A0].indexOf(d)!==-1||o===aH||c===o0&&gH.indexOf(o)!==-1||o===ho&&d===o0||d===DC||fA.indexOf(d)!==-1&&o===fn||fA.indexOf(o)!==-1&&d===fn||o===Ql&&[Nc,rd,nd].indexOf(d)!==-1||[Nc,rd,nd].indexOf(o)!==-1&&d===Fl||fA.indexOf(o)!==-1&&PC.indexOf(d)!==-1||PC.indexOf(o)!==-1&&fA.indexOf(d)!==-1||[Ql,Fl].indexOf(o)!==-1&&(d===fn||[fl,Tl].indexOf(d)!==-1&&e[a+1]===fn)||[fl,Tl].indexOf(o)!==-1&&d===fn||o===fn&&[fn,ho,uo].indexOf(d)!==-1)return ot;if([fn,ho,uo,td,hl].indexOf(d)!==-1)for(var h=s;h>=0;){var f=e[h];if(f===fn)return ot;if([ho,uo].indexOf(f)!==-1)h--;else break}if([Ql,Fl].indexOf(d)!==-1)for(var h=[td,hl].indexOf(o)!==-1?i:s;h>=0;){var f=e[h];if(f===fn)return ot;if([ho,uo].indexOf(f)!==-1)h--;else break}if(a0===o&&[a0,zd,s0,i0].indexOf(d)!==-1||[zd,s0].indexOf(o)!==-1&&[zd,$d].indexOf(d)!==-1||[$d,i0].indexOf(o)!==-1&&d===$d||LC.indexOf(o)!==-1&&[DC,Fl].indexOf(d)!==-1||LC.indexOf(d)!==-1&&o===Ql||fA.indexOf(o)!==-1&&fA.indexOf(d)!==-1||o===uo&&fA.indexOf(d)!==-1||fA.concat(fn).indexOf(o)!==-1&&d===fl&&hH.indexOf(t[a])===-1||fA.concat(fn).indexOf(d)!==-1&&o===hl)return ot;if(o===op&&d===op){for(var w=r[s],v=1;w>0&&(w--,e[w]===op);)v++;if(v%2!==0)return ot}return o===rd&&d===nd?ot:Ad},wH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=pH(t,e.lineBreak),n=r[0],A=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(a){return[fn,xi,jF].indexOf(a)!==-1?Nc:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,o){return a&&t[o]>=19968&&t[o]<=40959}):void 0;return[n,A,i]},BH=function(){function t(e,r,n,A){this.codePoints=e,this.required=r===OF,this.start=n,this.end=A}return t.prototype.slice=function(){return Xt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),vH=function(t,e){var r=Yf(t),n=wH(r,e),A=n[0],s=n[1],i=n[2],a=r.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var d=ot;c<a&&(d=mH(r,s,A,++c,i))===ot;);if(d!==ot||c===a){var h=new BH(r,d,o,c);return o=c,{value:h,done:!1}}return{done:!0,value:null}}}},yH=1,xH=2,uu=4,jC=8,Kh=10,OC=47,Xl=92,CH=9,IH=32,sd=34,gl=61,EH=35,_H=36,bH=37,id=39,od=40,pl=41,TH=95,en=45,FH=33,QH=60,UH=62,SH=64,kH=91,RH=93,NH=61,DH=123,ad=63,PH=125,HC=124,LH=126,MH=128,VC=65533,lp=42,_i=43,jH=44,OH=58,HH=59,Dc=46,VH=0,KH=8,GH=11,zH=14,$H=31,WH=127,qn=-1,VF=48,KF=97,GF=101,qH=102,JH=117,XH=122,zF=65,$F=69,WF=70,YH=85,ZH=90,Lr=function(t){return t>=VF&&t<=57},eV=function(t){return t>=55296&&t<=57343},fo=function(t){return Lr(t)||t>=zF&&t<=WF||t>=KF&&t<=qH},tV=function(t){return t>=KF&&t<=XH},rV=function(t){return t>=zF&&t<=ZH},nV=function(t){return tV(t)||rV(t)},AV=function(t){return t>=MH},ld=function(t){return t===Kh||t===CH||t===IH},Gh=function(t){return nV(t)||AV(t)||t===TH},KC=function(t){return Gh(t)||Lr(t)||t===en},sV=function(t){return t>=VH&&t<=KH||t===GH||t>=zH&&t<=$H||t===WH},rs=function(t,e){return t!==Xl?!1:e!==Kh},cd=function(t,e,r){return t===en?Gh(e)||rs(e,r):Gh(t)?!0:!!(t===Xl&&rs(t,e))},cp=function(t,e,r){return t===_i||t===en?Lr(e)?!0:e===Dc&&Lr(r):Lr(t===Dc?e:t)},iV=function(t){var e=0,r=1;(t[e]===_i||t[e]===en)&&(t[e]===en&&(r=-1),e++);for(var n=[];Lr(t[e]);)n.push(t[e++]);var A=n.length?parseInt(Xt.apply(void 0,n),10):0;t[e]===Dc&&e++;for(var s=[];Lr(t[e]);)s.push(t[e++]);var i=s.length,a=i?parseInt(Xt.apply(void 0,s),10):0;(t[e]===$F||t[e]===GF)&&e++;var o=1;(t[e]===_i||t[e]===en)&&(t[e]===en&&(o=-1),e++);for(var c=[];Lr(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Xt.apply(void 0,c),10):0;return r*(A+a*Math.pow(10,-i))*Math.pow(10,o*d)},oV={type:2},aV={type:3},lV={type:4},cV={type:13},uV={type:8},dV={type:21},hV={type:9},fV={type:10},gV={type:11},pV={type:12},mV={type:14},ud={type:23},wV={type:1},BV={type:25},vV={type:24},yV={type:26},xV={type:27},CV={type:28},IV={type:29},EV={type:31},u0={type:32},qF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Yf(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==u0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case sd:return this.consumeStringToken(sd);case EH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),A=this.peekCodePoint(2);if(KC(r)||rs(n,A)){var s=cd(r,n,A)?xH:yH,i=this.consumeName();return{type:5,value:i,flags:s}}break;case _H:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),cV;break;case id:return this.consumeStringToken(id);case od:return oV;case pl:return aV;case lp:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),mV;break;case _i:if(cp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jH:return lV;case en:var a=e,o=this.peekCodePoint(0),c=this.peekCodePoint(1);if(cp(a,o,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(cd(a,o,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===en&&c===UH)return this.consumeCodePoint(),this.consumeCodePoint(),vV;break;case Dc:if(cp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case OC:if(this.peekCodePoint(0)===lp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===lp&&(d=this.consumeCodePoint(),d===OC))return this.consumeToken();if(d===qn)return this.consumeToken()}break;case OH:return yV;case HH:return xV;case QH:if(this.peekCodePoint(0)===FH&&this.peekCodePoint(1)===en&&this.peekCodePoint(2)===en)return this.consumeCodePoint(),this.consumeCodePoint(),BV;break;case SH:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),w=this.peekCodePoint(2);if(cd(h,f,w)){var i=this.consumeName();return{type:7,value:i}}break;case kH:return CV;case Xl:if(rs(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case RH:return IV;case NH:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),uV;break;case DH:return gV;case PH:return pV;case JH:case YH:var v=this.peekCodePoint(0),B=this.peekCodePoint(1);return v===_i&&(fo(B)||B===ad)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case HC:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),hV;if(this.peekCodePoint(0)===HC)return this.consumeCodePoint(),dV;break;case LH:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),fV;break;case qn:return u0}return ld(e)?(this.consumeWhiteSpace(),EV):Lr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Gh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Xt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();fo(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===ad&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var A=parseInt(Xt.apply(void 0,e.map(function(o){return o===ad?VF:o})),16),s=parseInt(Xt.apply(void 0,e.map(function(o){return o===ad?WF:o})),16);return{type:30,start:A,end:s}}var i=parseInt(Xt.apply(void 0,e),16);if(this.peekCodePoint(0)===en&&fo(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var a=[];fo(r)&&a.length<6;)a.push(r),r=this.consumeCodePoint();var s=parseInt(Xt.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===od?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===od?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===qn)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===id||r===sd){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===qn||this.peekCodePoint(0)===pl)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),ud)}for(;;){var A=this.consumeCodePoint();if(A===qn||A===pl)return{type:22,value:Xt.apply(void 0,e)};if(ld(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===qn||this.peekCodePoint(0)===pl?(this.consumeCodePoint(),{type:22,value:Xt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),ud);if(A===sd||A===id||A===od||sV(A))return this.consumeBadUrlRemnants(),ud;if(A===Xl)if(rs(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ud;else e.push(A)}},t.prototype.consumeWhiteSpace=function(){for(;ld(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===pl||e===qn)return;rs(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var A=Math.min(r,e);n+=Xt.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var A=this._value[n];if(A===qn||A===void 0||A===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(A===Kh)return this._value.splice(0,n),wV;if(A===Xl){var s=this._value[n+1];s!==qn&&s!==void 0&&(s===Kh?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):rs(A,s)&&(r+=this.consumeStringSlice(n),r+=Xt(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=uu,n=this.peekCodePoint(0);for((n===_i||n===en)&&e.push(this.consumeCodePoint());Lr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(n===Dc&&Lr(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=jC;Lr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),A=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===$F||n===GF)&&((A===_i||A===en)&&Lr(s)||Lr(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=jC;Lr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[iV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],A=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(cd(A,s,i)){var a=this.consumeName();return{type:15,number:r,flags:n,unit:a}}return A===bH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(fo(e)){for(var r=Xt(e);fo(this.peekCodePoint(0))&&r.length<6;)r+=Xt(this.consumeCodePoint());ld(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||eV(n)||n>1114111?VC:n}return e===qn?VC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(KC(r))e+=Xt(r);else if(rs(r,this.peekCodePoint(0)))e+=Xt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),JF=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new qF;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||bV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?u0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),du=function(t){return t.type===15},Va=function(t){return t.type===17},Bt=function(t){return t.type===20},_V=function(t){return t.type===0},d0=function(t,e){return Bt(t)&&t.value===e},XF=function(t){return t.type!==31},ya=function(t){return t.type!==31&&t.type!==4},lA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},bV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ws=function(t){return t.type===17||t.type===15},Ar=function(t){return t.type===16||Ws(t)},YF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},br={type:17,number:0,flags:uu},kB={type:16,number:50,flags:uu},Bs={type:16,number:100,flags:uu},Ul=function(t,e,r){var n=t[0],A=t[1];return[It(n,e),It(typeof A<"u"?A:n,r)]},It=function(t,e){if(t.type===16)return t.number/100*e;if(du(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},ZF="deg",eQ="grad",tQ="rad",rQ="turn",Zf={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case ZF:return Math.PI*e.number/180;case eQ:return Math.PI/200*e.number;case tQ:return e.number;case rQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},nQ=function(t){return t.type===15&&(t.unit===ZF||t.unit===eQ||t.unit===tQ||t.unit===rQ)},AQ=function(t){var e=t.filter(Bt).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[br,br];case"to top":case"bottom":return Qn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[br,Bs];case"to right":case"left":return Qn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Bs,Bs];case"to bottom":case"top":return Qn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Bs,br];case"to left":case"right":return Qn(270)}return 0},Qn=function(t){return Math.PI*t/180},Rs={name:"color",parse:function(t,e){if(e.type===18){var r=TV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3);return vs(parseInt(n+n,16),parseInt(A+A,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return vs(parseInt(n+n,16),parseInt(A+A,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6);return vs(parseInt(n,16),parseInt(A,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return vs(parseInt(n,16),parseInt(A,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var a=bA[e.value.toUpperCase()];if(typeof a<"u")return a}return bA.TRANSPARENT}},Ns=function(t){return(255&t)===0},dr=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,A=255&t>>24;return e<255?"rgba("+A+","+n+","+r+","+e/255+")":"rgb("+A+","+n+","+r+")"},vs=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},GC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},zC=function(t,e){var r=e.filter(ya);if(r.length===3){var n=r.map(GC),A=n[0],s=n[1],i=n[2];return vs(A,s,i,1)}if(r.length===4){var a=r.map(GC),A=a[0],s=a[1],i=a[2],o=a[3];return vs(A,s,i,o)}return 0};function up(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var $C=function(t,e){var r=e.filter(ya),n=r[0],A=r[1],s=r[2],i=r[3],a=(n.type===17?Qn(n.number):Zf.parse(t,n))/(Math.PI*2),o=Ar(A)?A.number/100:0,c=Ar(s)?s.number/100:0,d=typeof i<"u"&&Ar(i)?It(i,1):1;if(o===0)return vs(c*255,c*255,c*255,1);var h=c<=.5?c*(o+1):c+o-c*o,f=c*2-h,w=up(f,h,a+1/3),v=up(f,h,a),B=up(f,h,a-1/3);return vs(w*255,v*255,B*255,d)},TV={hsl:$C,hsla:$C,rgb:zC,rgba:zC},Yl=function(t,e){return Rs.parse(t,JF.create(e).parseComponentValue())},bA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},FV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Bt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},QV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},eg=function(t,e){var r=Rs.parse(t,e[0]),n=e[1];return n&&Ar(n)?{color:r,stop:n}:{color:r,stop:null}},WC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=br),n.stop===null&&(n.stop=Bs);for(var A=[],s=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var o=It(a,e);o>s?A.push(o):A.push(s),s=o}else A.push(null)}for(var c=null,i=0;i<A.length;i++){var d=A[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=A[c-1],w=(d-f)/(h+1),v=1;v<=h;v++)A[c+v-1]=w*v;c=null}}return t.map(function(B,_){var x=B.color;return{color:x,stop:Math.max(Math.min(1,A[_]/e),0)}})},UV=function(t,e,r){var n=e/2,A=r/2,s=It(t[0],e)-n,i=A-It(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},SV=function(t,e,r){var n=typeof t=="number"?t:UV(t,e,r),A=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,a=A/2,o=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[A,s-c,s+c,i-o,i+o]},Ln=function(t,e){return Math.sqrt(t*t+e*e)},qC=function(t,e,r,n,A){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,a){var o=a[0],c=a[1],d=Ln(r-o,n-c);return(A?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:a,optimumDistance:d}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},kV=function(t,e,r,n,A){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-A)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-A)));break;case 2:if(t.shape===0)s=i=Math.min(Ln(e,r),Ln(e,r-A),Ln(e-n,r),Ln(e-n,r-A));else if(t.shape===1){var a=Math.min(Math.abs(r),Math.abs(r-A))/Math.min(Math.abs(e),Math.abs(e-n)),o=qC(n,A,e,r,!0),c=o[0],d=o[1];s=Ln(c-e,(d-r)/a),i=a*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-A)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-A)));break;case 3:if(t.shape===0)s=i=Math.max(Ln(e,r),Ln(e,r-A),Ln(e-n,r),Ln(e-n,r-A));else if(t.shape===1){var a=Math.max(Math.abs(r),Math.abs(r-A))/Math.max(Math.abs(e),Math.abs(e-n)),h=qC(n,A,e,r,!1),c=h[0],d=h[1];s=Ln(c-e,(d-r)/a),i=a*s}break}return Array.isArray(t.size)&&(s=It(t.size[0],n),i=t.size.length===2?It(t.size[1],A):s),[s,i]},RV=function(t,e){var r=Qn(180),n=[];return lA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&i.value==="to"){r=AQ(A);return}else if(nQ(i)){r=Zf.parse(t,i);return}}var a=eg(t,A);n.push(a)}),{angle:r,stops:n,type:1}},dd=function(t,e){var r=Qn(180),n=[];return lA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=AQ(A);return}else if(nQ(i)){r=(Zf.parse(t,i)+Qn(270))%Qn(360);return}}var a=eg(t,A);n.push(a)}),{angle:r,stops:n,type:1}},NV=function(t,e){var r=Qn(180),n=[],A=1,s=0,i=3,a=[];return lA(e).forEach(function(o,c){var d=o[0];if(c===0){if(Bt(d)&&d.value==="linear"){A=1;return}else if(Bt(d)&&d.value==="radial"){A=2;return}}if(d.type===18){if(d.name==="from"){var h=Rs.parse(t,d.values[0]);n.push({stop:br,color:h})}else if(d.name==="to"){var h=Rs.parse(t,d.values[0]);n.push({stop:Bs,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(ya);if(f.length===2){var h=Rs.parse(t,f[1]),w=f[0];Va(w)&&n.push({stop:{type:16,number:w.number*100,flags:w.flags},color:h})}}}}),A===1?{angle:(r+Qn(180))%Qn(360),stops:n,type:A}:{size:i,shape:s,stops:n,position:a,type:A}},sQ="closest-side",iQ="farthest-side",oQ="closest-corner",aQ="farthest-corner",lQ="circle",cQ="ellipse",uQ="cover",dQ="contain",DV=function(t,e){var r=0,n=3,A=[],s=[];return lA(e).forEach(function(i,a){var o=!0;if(a===0){var c=!1;o=i.reduce(function(h,f){if(c)if(Bt(f))switch(f.value){case"center":return s.push(kB),h;case"top":case"left":return s.push(br),h;case"right":case"bottom":return s.push(Bs),h}else(Ar(f)||Ws(f))&&s.push(f);else if(Bt(f))switch(f.value){case lQ:return r=0,!1;case cQ:return r=1,!1;case"at":return c=!0,!1;case sQ:return n=0,!1;case uQ:case iQ:return n=1,!1;case dQ:case oQ:return n=2,!1;case aQ:return n=3,!1}else if(Ws(f)||Ar(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},o)}if(o){var d=eg(t,i);A.push(d)}}),{size:n,shape:r,stops:A,position:s,type:2}},hd=function(t,e){var r=0,n=3,A=[],s=[];return lA(e).forEach(function(i,a){var o=!0;if(a===0?o=i.reduce(function(d,h){if(Bt(h))switch(h.value){case"center":return s.push(kB),!1;case"top":case"left":return s.push(br),!1;case"right":case"bottom":return s.push(Bs),!1}else if(Ar(h)||Ws(h))return s.push(h),!1;return d},o):a===1&&(o=i.reduce(function(d,h){if(Bt(h))switch(h.value){case lQ:return r=0,!1;case cQ:return r=1,!1;case dQ:case sQ:return n=0,!1;case iQ:return n=1,!1;case oQ:return n=2,!1;case uQ:case aQ:return n=3,!1}else if(Ws(h)||Ar(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},o)),o){var c=eg(t,i);A.push(c)}}),{size:n,shape:r,stops:A,position:s,type:2}},PV=function(t){return t.type===1},LV=function(t){return t.type===2},RB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=hQ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function MV(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!hQ[t.name])}var hQ={"linear-gradient":RV,"-moz-linear-gradient":dd,"-ms-linear-gradient":dd,"-o-linear-gradient":dd,"-webkit-linear-gradient":dd,"radial-gradient":DV,"-moz-radial-gradient":hd,"-ms-radial-gradient":hd,"-o-radial-gradient":hd,"-webkit-radial-gradient":hd,"-webkit-gradient":NV},jV={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return ya(n)&&MV(n)}).map(function(n){return RB.parse(t,n)})}},OV={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Bt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},HV={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return lA(e).map(function(r){return r.filter(Ar)}).map(YF)}},VV={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return lA(e).map(function(r){return r.filter(Bt).map(function(n){return n.value}).join(" ")}).map(KV)}},KV=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},qo;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(qo||(qo={}));var GV={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return lA(e).map(function(r){return r.filter(zV)})}},zV=function(t){return Bt(t)||Ar(t)},tg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$V=tg("top"),WV=tg("right"),qV=tg("bottom"),JV=tg("left"),rg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return YF(r.filter(Ar))}}},XV=rg("top-left"),YV=rg("top-right"),ZV=rg("bottom-right"),eK=rg("bottom-left"),ng=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},tK=ng("top"),rK=ng("right"),nK=ng("bottom"),AK=ng("left"),Ag=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return du(r)?r.number:0}}},sK=Ag("top"),iK=Ag("right"),oK=Ag("bottom"),aK=Ag("left"),lK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},cK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},uK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).reduce(function(r,n){return r|dK(n.value)},0)}},dK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},hK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},fK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},zh;(function(t){t.NORMAL="normal",t.STRICT="strict"})(zh||(zh={}));var gK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return zh.STRICT;case"normal":default:return zh.NORMAL}}},pK={name:"line-height",initialValue:"normal",prefix:!1,type:4},JC=function(t,e){return Bt(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ar(t)?It(t,e):e},mK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:RB.parse(t,e)}},wK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},h0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},sg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},BK=sg("top"),vK=sg("right"),yK=sg("bottom"),xK=sg("left"),CK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},IK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},ig=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},EK=ig("top"),_K=ig("right"),bK=ig("bottom"),TK=ig("left"),FK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},QK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},UK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&d0(e[0],"none")?[]:lA(e).map(function(r){for(var n={color:bA.TRANSPARENT,offsetX:br,offsetY:br,blur:br},A=0,s=0;s<r.length;s++){var i=r[s];Ws(i)?(A===0?n.offsetX=i:A===1?n.offsetY=i:n.blur=i,A++):n.color=Rs.parse(t,i)}return n})}},SK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},kK={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=DK[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},RK=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},NK=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=e[0],n=e[1];e[2],e[3];var A=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[r,n,A,s,i,a]:null},DK={matrix:RK,matrix3d:NK},XC={type:16,number:50,flags:uu},PK=[XC,XC],LK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ar);return r.length!==2?PK:[r[0],r[1]]}},MK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Zl;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Zl||(Zl={}));var jK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Zl.BREAK_ALL;case"keep-all":return Zl.KEEP_ALL;case"normal":default:return Zl.NORMAL}}},OK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Va(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},fQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},HK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Va(e)?e.number:1}},VK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},KK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},GK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(A){switch(A.type){case 20:case 0:r.push(A.value);break;case 17:r.push(A.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},zK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$K={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Va(e))return e.number;if(Bt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},WK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Bt).map(function(r){return r.value})}},qK={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},or=function(t,e){return(t&e)!==0},JK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},XK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],A=e.filter(XF),s=0;s<A.length;s++){var i=A[s],a=A[s+1];if(i.type===20){var o=a&&Va(a)?a.number:1;n.push({counter:i.value,increment:o})}}return n}},YK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(XF),A=0;A<n.length;A++){var s=n[A],i=n[A+1];if(Bt(s)&&s.value!=="none"){var a=i&&Va(i)?i.number:0;r.push({counter:s.value,reset:a})}}return r}},ZK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(du).map(function(r){return fQ.parse(t,r)})}},e3={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],A=e.filter(_V);if(A.length%2!==0)return null;for(var s=0;s<A.length;s+=2){var i=A[s].value,a=A[s+1].value;n.push({open:i,close:a})}return n}},YC=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},t3={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&d0(e[0],"none")?[]:lA(e).map(function(r){for(var n={color:255,offsetX:br,offsetY:br,blur:br,spread:br,inset:!1},A=0,s=0;s<r.length;s++){var i=r[s];d0(i,"inset")?n.inset=!0:Ws(i)?(A===0?n.offsetX=i:A===1?n.offsetY=i:A===2?n.blur=i:n.spread=i,A++):n.color=Rs.parse(t,i)}return n})}},r3={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Bt).forEach(function(A){switch(A.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(A){n.indexOf(A)===-1&&n.push(A)}),n}},n3={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},A3={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return du(e)?e.number:0}},s3=function(){function t(e,r){var n,A;this.animationDuration=ve(e,ZK,r.animationDuration),this.backgroundClip=ve(e,FV,r.backgroundClip),this.backgroundColor=ve(e,QV,r.backgroundColor),this.backgroundImage=ve(e,jV,r.backgroundImage),this.backgroundOrigin=ve(e,OV,r.backgroundOrigin),this.backgroundPosition=ve(e,HV,r.backgroundPosition),this.backgroundRepeat=ve(e,VV,r.backgroundRepeat),this.backgroundSize=ve(e,GV,r.backgroundSize),this.borderTopColor=ve(e,$V,r.borderTopColor),this.borderRightColor=ve(e,WV,r.borderRightColor),this.borderBottomColor=ve(e,qV,r.borderBottomColor),this.borderLeftColor=ve(e,JV,r.borderLeftColor),this.borderTopLeftRadius=ve(e,XV,r.borderTopLeftRadius),this.borderTopRightRadius=ve(e,YV,r.borderTopRightRadius),this.borderBottomRightRadius=ve(e,ZV,r.borderBottomRightRadius),this.borderBottomLeftRadius=ve(e,eK,r.borderBottomLeftRadius),this.borderTopStyle=ve(e,tK,r.borderTopStyle),this.borderRightStyle=ve(e,rK,r.borderRightStyle),this.borderBottomStyle=ve(e,nK,r.borderBottomStyle),this.borderLeftStyle=ve(e,AK,r.borderLeftStyle),this.borderTopWidth=ve(e,sK,r.borderTopWidth),this.borderRightWidth=ve(e,iK,r.borderRightWidth),this.borderBottomWidth=ve(e,oK,r.borderBottomWidth),this.borderLeftWidth=ve(e,aK,r.borderLeftWidth),this.boxShadow=ve(e,t3,r.boxShadow),this.color=ve(e,lK,r.color),this.direction=ve(e,cK,r.direction),this.display=ve(e,uK,r.display),this.float=ve(e,hK,r.cssFloat),this.fontFamily=ve(e,GK,r.fontFamily),this.fontSize=ve(e,zK,r.fontSize),this.fontStyle=ve(e,qK,r.fontStyle),this.fontVariant=ve(e,WK,r.fontVariant),this.fontWeight=ve(e,$K,r.fontWeight),this.letterSpacing=ve(e,fK,r.letterSpacing),this.lineBreak=ve(e,gK,r.lineBreak),this.lineHeight=ve(e,pK,r.lineHeight),this.listStyleImage=ve(e,mK,r.listStyleImage),this.listStylePosition=ve(e,wK,r.listStylePosition),this.listStyleType=ve(e,h0,r.listStyleType),this.marginTop=ve(e,BK,r.marginTop),this.marginRight=ve(e,vK,r.marginRight),this.marginBottom=ve(e,yK,r.marginBottom),this.marginLeft=ve(e,xK,r.marginLeft),this.opacity=ve(e,HK,r.opacity);var s=ve(e,CK,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=ve(e,IK,r.overflowWrap),this.paddingTop=ve(e,EK,r.paddingTop),this.paddingRight=ve(e,_K,r.paddingRight),this.paddingBottom=ve(e,bK,r.paddingBottom),this.paddingLeft=ve(e,TK,r.paddingLeft),this.paintOrder=ve(e,r3,r.paintOrder),this.position=ve(e,QK,r.position),this.textAlign=ve(e,FK,r.textAlign),this.textDecorationColor=ve(e,VK,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=ve(e,KK,(A=r.textDecorationLine)!==null&&A!==void 0?A:r.textDecoration),this.textShadow=ve(e,UK,r.textShadow),this.textTransform=ve(e,SK,r.textTransform),this.transform=ve(e,kK,r.transform),this.transformOrigin=ve(e,LK,r.transformOrigin),this.visibility=ve(e,MK,r.visibility),this.webkitTextStrokeColor=ve(e,n3,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=ve(e,A3,r.webkitTextStrokeWidth),this.wordBreak=ve(e,jK,r.wordBreak),this.zIndex=ve(e,OK,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ns(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return or(this.display,4)||or(this.display,33554432)||or(this.display,268435456)||or(this.display,536870912)||or(this.display,67108864)||or(this.display,134217728)},t}(),i3=function(){function t(e,r){this.content=ve(e,JK,r.content),this.quotes=ve(e,e3,r.quotes)}return t}(),ZC=function(){function t(e,r){this.counterIncrement=ve(e,XK,r.counterIncrement),this.counterReset=ve(e,YK,r.counterReset)}return t}(),ve=function(t,e,r){var n=new qF,A=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(A);var s=new JF(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Bt(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Zf.parse(t,s.parseComponentValue());case"color":return Rs.parse(t,s.parseComponentValue());case"image":return RB.parse(t,s.parseComponentValue());case"length":var a=s.parseComponentValue();return Ws(a)?a:br;case"length-percentage":var o=s.parseComponentValue();return Ar(o)?o:br;case"time":return fQ.parse(t,s.parseComponentValue())}break}},o3="data-html2canvas-debug",a3=function(t){var e=t.getAttribute(o3);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},f0=function(t,e){var r=a3(t);return r===1||e===r},cA=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,f0(r,3))debugger;this.styles=new s3(e,window.getComputedStyle(r,null)),m0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Xf(this.context,r),f0(r,4)&&(this.flags|=16)}return t}(),l3="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",eI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var fd=0;fd<eI.length;fd++)Sl[eI.charCodeAt(fd)]=fd;var c3=function(t){var e=t.length*.75,r=t.length,n,A=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)s=Sl[t.charCodeAt(n)],i=Sl[t.charCodeAt(n+1)],a=Sl[t.charCodeAt(n+2)],o=Sl[t.charCodeAt(n+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|a>>2,d[A++]=(a&3)<<6|o&63;return c},u3=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},d3=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Si=5,NB=11,dp=2,h3=NB-Si,gQ=65536>>Si,f3=1<<Si,hp=f3-1,g3=1024>>Si,p3=gQ+g3,m3=p3,w3=32,B3=m3+w3,v3=65536>>NB,y3=1<<h3,x3=y3-1,tI=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},C3=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},I3=function(t,e){var r=c3(t),n=Array.isArray(r)?d3(r):new Uint32Array(r),A=Array.isArray(r)?u3(r):new Uint16Array(r),s=24,i=tI(A,s/2,n[4]/2),a=n[5]===2?tI(A,(s+n[4])/2):C3(n,Math.ceil((s+n[4])/4));return new E3(n[0],n[1],n[2],n[3],i,a)},E3=function(){function t(e,r,n,A,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Si],r=(r<<dp)+(e&hp),this.data[r];if(e<=65535)return r=this.index[gQ+(e-55296>>Si)],r=(r<<dp)+(e&hp),this.data[r];if(e<this.highStart)return r=B3-v3+(e>>NB),r=this.index[r],r+=e>>Si&x3,r=this.index[r],r=(r<<dp)+(e&hp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),rI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gd=0;gd<rI.length;gd++)_3[rI.charCodeAt(gd)]=gd;var b3=1,fp=2,gp=3,nI=4,AI=5,T3=7,sI=8,pp=9,mp=10,iI=11,oI=12,aI=13,lI=14,wp=15,F3=function(t){for(var e=[],r=0,n=t.length;r<n;){var A=t.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),r--)}else e.push(A)}return e},Q3=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],A=-1,s="";++A<r;){var i=t[A];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(A+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},U3=I3(l3),En="",Bp="",S3=function(t){return U3.get(t)},k3=function(t,e,r){var n=r-2,A=e[n],s=e[r-1],i=e[r];if(s===fp&&i===gp)return En;if(s===fp||s===gp||s===nI||i===fp||i===gp||i===nI)return Bp;if(s===sI&&[sI,pp,iI,oI].indexOf(i)!==-1||(s===iI||s===pp)&&(i===pp||i===mp)||(s===oI||s===mp)&&i===mp||i===aI||i===AI||i===T3||s===b3)return En;if(s===aI&&i===lI){for(;A===AI;)A=e[--n];if(A===lI)return En}if(s===wp&&i===wp){for(var a=0;A===wp;)a++,A=e[--n];if(a%2===0)return En}return Bp},R3=function(t){var e=F3(t),r=e.length,n=0,A=0,s=e.map(S3);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=En;n<r&&(i=k3(e,s,++n))===En;);if(i!==En||n===r){var a=Q3.apply(null,e.slice(A,n));return A=n,{value:a,done:!1}}return{done:!0,value:null}}}},N3=function(t){for(var e=R3(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},D3=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var A=r.getBoundingClientRect(),s=Math.round(A.height);if(t.body.removeChild(n),s===e)return!0}}return!1},P3=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,A=Yf(n.data).map(function(o){return Xt(o)}),s=0,i={},a=A.every(function(o,c){r.setStart(n,s),r.setEnd(n,s+o.length);var d=r.getBoundingClientRect();s+=o.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),a},L3=function(){return typeof new Image().crossOrigin<"u"},M3=function(){return typeof new XMLHttpRequest().responseType=="string"},j3=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},cI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},O3=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var A=new Image,s=e.toDataURL();A.src=s;var i=g0(r,r,0,0,A);return n.fillStyle="red",n.fillRect(0,0,r,r),uI(i).then(function(a){n.drawImage(a,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=r+"px",cI(o)?uI(g0(r,r,0,0,c)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),cI(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},g0=function(t,e,r,n,A){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(A),i},uI=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Ir={get SUPPORT_RANGE_BOUNDS(){var t=D3(document);return Object.defineProperty(Ir,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Ir.SUPPORT_RANGE_BOUNDS&&P3(document);return Object.defineProperty(Ir,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=j3(document);return Object.defineProperty(Ir,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?O3(document):Promise.resolve(!1);return Object.defineProperty(Ir,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=L3();return Object.defineProperty(Ir,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=M3();return Object.defineProperty(Ir,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ir,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ir,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ec=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),H3=function(t,e,r,n){var A=G3(e,r),s=[],i=0;return A.forEach(function(a){if(r.textDecorationLine.length||a.trim().length>0)if(Ir.SUPPORT_RANGE_BOUNDS){var o=dI(n,i,a.length).getClientRects();if(o.length>1){var c=DB(a),d=0;c.forEach(function(f){s.push(new ec(f,DA.fromDOMRectList(t,dI(n,d+i,f.length).getClientRects()))),d+=f.length})}else s.push(new ec(a,DA.fromDOMRectList(t,o)))}else{var h=n.splitText(a.length);s.push(new ec(a,V3(t,n))),n=h}else Ir.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),s},V3=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(n,e);var s=Xf(t,n);return n.firstChild&&A.replaceChild(n.firstChild,n),s}}return DA.EMPTY},dI=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var A=n.createRange();return A.setStart(t,e),A.setEnd(t,e+r),A},DB=function(t){if(Ir.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return N3(t)},K3=function(t,e){if(Ir.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return $3(t,e)},G3=function(t,e){return e.letterSpacing!==0?DB(t):K3(t,e)},z3=[32,160,4961,65792,65793,4153,4241],$3=function(t,e){for(var r=vH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],A,s=function(){if(A.value){var i=A.value.slice(),a=Yf(i),o="";a.forEach(function(c){z3.indexOf(c)===-1?o+=Xt(c):(o.length&&n.push(o),n.push(Xt(c)),o="")}),o.length&&n.push(o)}};!(A=r.next()).done;)s();return n},W3=function(){function t(e,r,n){this.text=q3(r.data,n.textTransform),this.textBounds=H3(e,this.text,n,r)}return t}(),q3=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(J3,X3);case 2:return t.toUpperCase();default:return t}},J3=/(^|\s|:|-|\(|\))([a-z])/g,X3=function(t,e,r){return t.length>0?e+r.toUpperCase():t},pQ=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.src=n.currentSrc||n.src,A.intrinsicWidth=n.naturalWidth,A.intrinsicHeight=n.naturalHeight,A.context.cache.addImage(A.src),A}return e}(cA),mQ=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.canvas=n,A.intrinsicWidth=n.width,A.intrinsicHeight=n.height,A}return e}(cA),wQ=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this,s=new XMLSerializer,i=Xf(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),A.intrinsicWidth=n.width.baseVal.value,A.intrinsicHeight=n.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e}(cA),BQ=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.value=n.value,A}return e}(cA),p0=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.start=n.start,A.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,A}return e}(cA),Y3=[{type:15,flags:0,unit:"px",number:3}],Z3=[{type:16,flags:0,number:50}],e5=function(t){return t.width>t.height?new DA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new DA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},t5=function(t){var e=t.type===r5?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},$h="checkbox",Wh="radio",r5="password",hI=707406591,PB=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;switch(A.type=n.type.toLowerCase(),A.checked=n.checked,A.value=t5(n),(A.type===$h||A.type===Wh)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=e5(A.bounds)),A.type){case $h:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=Y3;break;case Wh:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=Z3;break}return A}return e}(cA),vQ=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return A.value=s&&s.text||"",A}return e}(cA),yQ=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.value=n.value,A}return e}(cA),xQ=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;A.src=n.src,A.width=parseInt(n.width,10)||0,A.height=parseInt(n.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){A.tree=IQ(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Yl(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):bA.TRANSPARENT,i=n.contentWindow.document.body?Yl(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):bA.TRANSPARENT;A.backgroundColor=Ns(s)?Ns(i)?A.styles.backgroundColor:i:s}}catch{}return A}return e}(cA),n5=["OL","UL","MENU"],Wd=function(t,e,r,n){for(var A=e.firstChild,s=void 0;A;A=s)if(s=A.nextSibling,EQ(A)&&A.data.trim().length>0)r.textNodes.push(new W3(t,A,r.styles));else if(Po(A))if(FQ(A)&&A.assignedNodes)A.assignedNodes().forEach(function(a){return Wd(t,a,r,n)});else{var i=CQ(t,A);i.styles.isVisible()&&(A5(A,i,n)?i.flags|=4:s5(i.styles)&&(i.flags|=2),n5.indexOf(A.tagName)!==-1&&(i.flags|=8),r.elements.push(i),A.slot,A.shadowRoot?Wd(t,A.shadowRoot,i,n):!qh(A)&&!_Q(A)&&!Jh(A)&&Wd(t,A,i,n))}},CQ=function(t,e){return w0(e)?new pQ(t,e):bQ(e)?new mQ(t,e):_Q(e)?new wQ(t,e):i5(e)?new BQ(t,e):o5(e)?new p0(t,e):a5(e)?new PB(t,e):Jh(e)?new vQ(t,e):qh(e)?new yQ(t,e):TQ(e)?new xQ(t,e):new cA(t,e)},IQ=function(t,e){var r=CQ(t,e);return r.flags|=4,Wd(t,e,r,r),r},A5=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||LB(t)&&r.styles.isTransparent()},s5=function(t){return t.isPositioned()||t.isFloating()},EQ=function(t){return t.nodeType===Node.TEXT_NODE},Po=function(t){return t.nodeType===Node.ELEMENT_NODE},m0=function(t){return Po(t)&&typeof t.style<"u"&&!qd(t)},qd=function(t){return typeof t.className=="object"},i5=function(t){return t.tagName==="LI"},o5=function(t){return t.tagName==="OL"},a5=function(t){return t.tagName==="INPUT"},l5=function(t){return t.tagName==="HTML"},_Q=function(t){return t.tagName==="svg"},LB=function(t){return t.tagName==="BODY"},bQ=function(t){return t.tagName==="CANVAS"},fI=function(t){return t.tagName==="VIDEO"},w0=function(t){return t.tagName==="IMG"},TQ=function(t){return t.tagName==="IFRAME"},gI=function(t){return t.tagName==="STYLE"},c5=function(t){return t.tagName==="SCRIPT"},qh=function(t){return t.tagName==="TEXTAREA"},Jh=function(t){return t.tagName==="SELECT"},FQ=function(t){return t.tagName==="SLOT"},pI=function(t){return t.tagName.indexOf("-")>0},u5=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,A=e.counterReset,s=!0;n!==null&&n.forEach(function(a){var o=r.counters[a.counter];o&&a.increment!==0&&(s=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=a.increment)});var i=[];return s&&A.forEach(function(a){var o=r.counters[a.counter];i.push(a.counter),o||(o=r.counters[a.counter]=[]),o.push(a.reset)}),i},t}(),mI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},wI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},d5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},h5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},go=function(t,e,r,n,A,s){return t<e||t>r?Pc(t,A,s.length>0):n.integers.reduce(function(i,a,o){for(;t>=a;)t-=a,i+=n.values[o];return i},"")+s},QQ=function(t,e,r,n){var A="";do r||t--,A=n(t)+A,t/=e;while(t*e>=e);return A},Jt=function(t,e,r,n,A){var s=r-e+1;return(t<0?"-":"")+(QQ(Math.abs(t),s,n,function(i){return Xt(Math.floor(i%s)+e)})+A)},di=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return QQ(Math.abs(t),n,!1,function(A){return e[Math.floor(A%n)]})+r},xo=1,YA=2,ZA=4,kl=8,gA=function(t,e,r,n,A,s){if(t<-9999||t>9999)return Pc(t,4,A.length>0);var i=Math.abs(t),a=A;if(i===0)return e[0]+a;for(var o=0;i>0&&o<=4;o++){var c=i%10;c===0&&or(s,xo)&&a!==""?a=e[c]+a:c>1||c===1&&o===0||c===1&&o===1&&or(s,YA)||c===1&&o===1&&or(s,ZA)&&t>100||c===1&&o>1&&or(s,kl)?a=e[c]+(o>0?r[o-1]:"")+a:c===1&&o>0&&(a=r[o-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},BI="",vI="",yI="",vp="",Pc=function(t,e,r){var n=r?". ":"",A=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=Jt(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return di(t,"",A);case 6:return go(t,1,3999,mI,3,n).toLowerCase();case 7:return go(t,1,3999,mI,3,n);case 8:return Jt(t,945,969,!1,n);case 9:return Jt(t,97,122,!1,n);case 10:return Jt(t,65,90,!1,n);case 11:return Jt(t,1632,1641,!0,n);case 12:case 49:return go(t,1,9999,wI,3,n);case 35:return go(t,1,9999,wI,3,n).toLowerCase();case 13:return Jt(t,2534,2543,!0,n);case 14:case 30:return Jt(t,6112,6121,!0,n);case 15:return di(t,"",A);case 16:return di(t,"",A);case 17:case 48:return gA(t,"",BI,"",A,YA|ZA|kl);case 47:return gA(t,"",vI,"",A,xo|YA|ZA|kl);case 42:return gA(t,"",BI,"",A,YA|ZA|kl);case 41:return gA(t,"",vI,"",A,xo|YA|ZA|kl);case 26:return gA(t,"","",yI,A,0);case 25:return gA(t,"","",yI,A,xo|YA|ZA);case 31:return gA(t,"","",vp,s,xo|YA|ZA);case 33:return gA(t,"","",vp,s,0);case 32:return gA(t,"","",vp,s,xo|YA|ZA);case 18:return Jt(t,2406,2415,!0,n);case 20:return go(t,1,19999,h5,3,n);case 21:return Jt(t,2790,2799,!0,n);case 22:return Jt(t,2662,2671,!0,n);case 22:return go(t,1,10999,d5,3,n);case 23:return di(t,"");case 24:return di(t,"");case 27:return Jt(t,3302,3311,!0,n);case 28:return di(t,"",A);case 29:return di(t,"",A);case 34:return Jt(t,3792,3801,!0,n);case 37:return Jt(t,6160,6169,!0,n);case 38:return Jt(t,4160,4169,!0,n);case 39:return Jt(t,2918,2927,!0,n);case 40:return Jt(t,1776,1785,!0,n);case 43:return Jt(t,3046,3055,!0,n);case 44:return Jt(t,3174,3183,!0,n);case 45:return Jt(t,3664,3673,!0,n);case 46:return Jt(t,3872,3881,!0,n);case 3:default:return Jt(t,48,57,!0,n)}},UQ="data-html2canvas-ignore",xI=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new u5,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,A=f5(e,r);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=A.contentWindow,o=a.document,c=m5(A).then(function(){return Kr(n,void 0,void 0,function(){var d,h;return Nr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(y5),a&&(a.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-r.left,a.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,p5(o)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(o,h)}).then(function(){return A})]:[2,A]}})})});return o.open(),o.write(B5(document.doctype)+"<html></html>"),v5(this.referenceElement.ownerDocument,s,i),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),c},t.prototype.createElementClone=function(e){if(f0(e,2))debugger;if(bQ(e))return this.createCanvasClone(e);if(fI(e))return this.createVideoClone(e);if(gI(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return w0(r)&&(w0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),pI(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return yp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),A=e.cloneNode(!1);return A.textContent=n,A}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var s=e.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(a){var o=a.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},t.prototype.appendChildNode=function(e,r,n){(!Po(r)||!c5(r)&&!r.hasAttribute(UQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Po(r)||!gI(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var A=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Po(s)&&FQ(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return A.appendChildNode(r,a,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(EQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Po(e)&&(m0(e)||qd(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&m0(A)&&(this.clonedReferenceElement=A),LB(A)&&I5(A);var o=this.counters.parse(new ZC(this.context,s)),c=this.resolvePseudoContent(e,A,i,tc.BEFORE);pI(e)&&(r=!0),fI(e)||this.cloneChildNodes(e,A,r),c&&A.insertBefore(c,A.firstChild);var d=this.resolvePseudoContent(e,A,a,tc.AFTER);return d&&A.appendChild(d),this.counters.pop(o),(s&&(this.options.copyStyles||qd(e))&&!TQ(e)||r)&&yp(s,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(qh(e)||Jh(e))&&(qh(A)||Jh(A))&&(A.value=e.value),A}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,A){var s=this;if(n){var i=n.content,a=r.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new ZC(this.context,n));var o=new i3(this.context,n),c=a.createElement("html2canvaspseudoelement");yp(n,c),o.content.forEach(function(h){if(h.type===0)c.appendChild(a.createTextNode(h.value));else if(h.type===22){var f=a.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var w=h.values.filter(Bt);w.length&&c.appendChild(a.createTextNode(e.getAttribute(w[0].value)||""))}else if(h.name==="counter"){var v=h.values.filter(ya),B=v[0],_=v[1];if(B&&Bt(B)){var x=s.counters.getCounterValue(B.value),m=_&&Bt(_)?h0.parse(s.context,_.value):3;c.appendChild(a.createTextNode(Pc(x,m,!1)))}}else if(h.name==="counters"){var I=h.values.filter(ya),B=I[0],F=I[1],_=I[2];if(B&&Bt(B)){var R=s.counters.getCounterValues(B.value),Q=_&&Bt(_)?h0.parse(s.context,_.value):3,y=F&&F.type===0?F.value:"",C=R.map(function(N){return Pc(N,Q,!1)}).join(y);c.appendChild(a.createTextNode(C))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(a.createTextNode(YC(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(YC(o.quotes,--s.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(h.value))}}),c.className=B0+" "+v0;var d=A===tc.BEFORE?" "+B0:" "+v0;return qd(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),tc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(tc||(tc={}));var f5=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(UQ,"true"),t.body.appendChild(r),r},g5=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},p5=function(t){return Promise.all([].slice.call(t.images,0).map(g5))},m5=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var A=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},w5=["all","d","content"],yp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);w5.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},B5=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},v5=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},y5=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},x5=":before",C5=":after",B0="___html2canvas___pseudoelement_before",v0="___html2canvas___pseudoelement_after",CI=`{
    content: "" !important;
    display: none !important;
}`,I5=function(t){E5(t,"."+B0+x5+CI+`
         .`+v0+C5+CI)},E5=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},SQ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),_5=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Cp(e)||Q5(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Kr(this,void 0,void 0,function(){var r,n,A,s,i=this;return Nr(this,function(a){switch(a.label){case 0:return r=SQ.isSameOrigin(e),n=!xp(e)&&this._options.useCORS===!0&&Ir.SUPPORT_CORS_IMAGES&&!r,A=!xp(e)&&!r&&!Cp(e)&&typeof this._options.proxy=="string"&&Ir.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!xp(e)&&!Cp(e)&&!A&&!n?[2]:(s=e,A?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,c){var d=new Image;d.onload=function(){return o(d)},d.onerror=c,(U5(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return o(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(s,i){var a=Ir.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(a==="text")s(o.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(o.response)}else i("Failed to proxy resource "+A+" with status code "+o.status)},o.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=a),r._options.imageTimeout){var d=r._options.imageTimeout;o.timeout=d,o.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+A)}}o.send()})},t}(),b5=/^data:image\/svg\+xml/i,T5=/^data:image\/.*;base64,/i,F5=/^data:image\/.*/i,Q5=function(t){return Ir.SUPPORT_SVG_DRAWING||!S5(t)},xp=function(t){return F5.test(t)},U5=function(t){return T5.test(t)},Cp=function(t){return t.substr(0,4)==="blob"},S5=function(t){return t.substr(-3).toLowerCase()==="svg"||b5.test(t)},me=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),po=function(t,e,r){return new me(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},pd=function(){function t(e,r,n,A){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=A}return t.prototype.subdivide=function(e,r){var n=po(this.start,this.startControl,e),A=po(this.startControl,this.endControl,e),s=po(this.endControl,this.end,e),i=po(n,A,e),a=po(A,s,e),o=po(i,a,e);return r?new t(this.start,n,i,o):new t(o,a,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Tn=function(t){return t.type===1},k5=function(){function t(e){var r=e.styles,n=e.bounds,A=Ul(r.borderTopLeftRadius,n.width,n.height),s=A[0],i=A[1],a=Ul(r.borderTopRightRadius,n.width,n.height),o=a[0],c=a[1],d=Ul(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],w=Ul(r.borderBottomLeftRadius,n.width,n.height),v=w[0],B=w[1],_=[];_.push((s+o)/n.width),_.push((v+h)/n.width),_.push((i+B)/n.height),_.push((c+f)/n.height);var x=Math.max.apply(Math,_);x>1&&(s/=x,i/=x,o/=x,c/=x,h/=x,f/=x,v/=x,B/=x);var m=n.width-o,I=n.height-f,F=n.width-h,R=n.height-B,Q=r.borderTopWidth,y=r.borderRightWidth,C=r.borderBottomWidth,E=r.borderLeftWidth,U=It(r.paddingTop,e.bounds.width),N=It(r.paddingRight,e.bounds.width),L=It(r.paddingBottom,e.bounds.width),T=It(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Rt(n.left+E/3,n.top+Q/3,s-E/3,i-Q/3,ft.TOP_LEFT):new me(n.left+E/3,n.top+Q/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Rt(n.left+m,n.top+Q/3,o-y/3,c-Q/3,ft.TOP_RIGHT):new me(n.left+n.width-y/3,n.top+Q/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Rt(n.left+F,n.top+I,h-y/3,f-C/3,ft.BOTTOM_RIGHT):new me(n.left+n.width-y/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=v>0||B>0?Rt(n.left+E/3,n.top+R,v-E/3,B-C/3,ft.BOTTOM_LEFT):new me(n.left+E/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Rt(n.left+E*2/3,n.top+Q*2/3,s-E*2/3,i-Q*2/3,ft.TOP_LEFT):new me(n.left+E*2/3,n.top+Q*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Rt(n.left+m,n.top+Q*2/3,o-y*2/3,c-Q*2/3,ft.TOP_RIGHT):new me(n.left+n.width-y*2/3,n.top+Q*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Rt(n.left+F,n.top+I,h-y*2/3,f-C*2/3,ft.BOTTOM_RIGHT):new me(n.left+n.width-y*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||B>0?Rt(n.left+E*2/3,n.top+R,v-E*2/3,B-C*2/3,ft.BOTTOM_LEFT):new me(n.left+E*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=s>0||i>0?Rt(n.left+E/2,n.top+Q/2,s-E/2,i-Q/2,ft.TOP_LEFT):new me(n.left+E/2,n.top+Q/2),this.topRightBorderStroke=s>0||i>0?Rt(n.left+m,n.top+Q/2,o-y/2,c-Q/2,ft.TOP_RIGHT):new me(n.left+n.width-y/2,n.top+Q/2),this.bottomRightBorderStroke=h>0||f>0?Rt(n.left+F,n.top+I,h-y/2,f-C/2,ft.BOTTOM_RIGHT):new me(n.left+n.width-y/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=v>0||B>0?Rt(n.left+E/2,n.top+R,v-E/2,B-C/2,ft.BOTTOM_LEFT):new me(n.left+E/2,n.top+n.height-C/2),this.topLeftBorderBox=s>0||i>0?Rt(n.left,n.top,s,i,ft.TOP_LEFT):new me(n.left,n.top),this.topRightBorderBox=o>0||c>0?Rt(n.left+m,n.top,o,c,ft.TOP_RIGHT):new me(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Rt(n.left+F,n.top+I,h,f,ft.BOTTOM_RIGHT):new me(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||B>0?Rt(n.left,n.top+R,v,B,ft.BOTTOM_LEFT):new me(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Rt(n.left+E,n.top+Q,Math.max(0,s-E),Math.max(0,i-Q),ft.TOP_LEFT):new me(n.left+E,n.top+Q),this.topRightPaddingBox=o>0||c>0?Rt(n.left+Math.min(m,n.width-y),n.top+Q,m>n.width+y?0:Math.max(0,o-y),Math.max(0,c-Q),ft.TOP_RIGHT):new me(n.left+n.width-y,n.top+Q),this.bottomRightPaddingBox=h>0||f>0?Rt(n.left+Math.min(F,n.width-E),n.top+Math.min(I,n.height-C),Math.max(0,h-y),Math.max(0,f-C),ft.BOTTOM_RIGHT):new me(n.left+n.width-y,n.top+n.height-C),this.bottomLeftPaddingBox=v>0||B>0?Rt(n.left+E,n.top+Math.min(R,n.height-C),Math.max(0,v-E),Math.max(0,B-C),ft.BOTTOM_LEFT):new me(n.left+E,n.top+n.height-C),this.topLeftContentBox=s>0||i>0?Rt(n.left+E+T,n.top+Q+U,Math.max(0,s-(E+T)),Math.max(0,i-(Q+U)),ft.TOP_LEFT):new me(n.left+E+T,n.top+Q+U),this.topRightContentBox=o>0||c>0?Rt(n.left+Math.min(m,n.width+E+T),n.top+Q+U,m>n.width+E+T?0:o-E+T,c-(Q+U),ft.TOP_RIGHT):new me(n.left+n.width-(y+N),n.top+Q+U),this.bottomRightContentBox=h>0||f>0?Rt(n.left+Math.min(F,n.width-(E+T)),n.top+Math.min(I,n.height+Q+U),Math.max(0,h-(y+N)),f-(C+L),ft.BOTTOM_RIGHT):new me(n.left+n.width-(y+N),n.top+n.height-(C+L)),this.bottomLeftContentBox=v>0||B>0?Rt(n.left+E+T,n.top+R,Math.max(0,v-(E+T)),B-(C+L),ft.BOTTOM_LEFT):new me(n.left+E+T,n.top+n.height-(C+L))}return t}(),ft;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ft||(ft={}));var Rt=function(t,e,r,n,A){var s=4*((Math.sqrt(2)-1)/3),i=r*s,a=n*s,o=t+r,c=e+n;switch(A){case ft.TOP_LEFT:return new pd(new me(t,c),new me(t,c-a),new me(o-i,e),new me(o,e));case ft.TOP_RIGHT:return new pd(new me(t,e),new me(t+i,e),new me(o,c-a),new me(o,c));case ft.BOTTOM_RIGHT:return new pd(new me(o,e),new me(o,e+a),new me(t+i,c),new me(t,c));case ft.BOTTOM_LEFT:default:return new pd(new me(o,c),new me(o-i,c),new me(t,e+a),new me(t,e))}},Xh=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},R5=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Yh=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},N5=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),md=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),D5=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),P5=function(t){return t.type===0},kQ=function(t){return t.type===1},L5=function(t){return t.type===2},II=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},M5=function(t,e,r,n,A){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+A);case 3:return s.add(e,r+A)}return s})},RQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),NQ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new k5(this.container),this.container.styles.opacity<1&&this.effects.push(new D5(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new N5(n,A,s))}if(this.container.styles.overflowX!==0){var i=Xh(this.curves),a=Yh(this.curves);II(i,a)?this.effects.push(new md(i,6)):(this.effects.push(new md(i,2)),this.effects.push(new md(a,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,A=this.effects.slice(0);n;){var s=n.effects.filter(function(o){return!kQ(o)});if(r||n.container.styles.position!==0||!n.parent){if(A.unshift.apply(A,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Xh(n.curves),a=Yh(n.curves);II(i,a)||A.unshift(new md(a,6))}}else A.unshift.apply(A,s);n=n.parent}return A.filter(function(o){return or(o.target,e)})},t}(),y0=function(t,e,r,n){t.container.elements.forEach(function(A){var s=or(A.flags,4),i=or(A.flags,2),a=new NQ(A,t);or(A.styles.display,2048)&&n.push(a);var o=or(A.flags,8)?[]:n;if(s||i){var c=s||A.styles.isPositioned()?r:e,d=new RQ(a);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var h=A.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(v,B){return h>v.element.container.styles.zIndex.order?(f=B,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var w=0;c.positiveZIndex.some(function(v,B){return h>=v.element.container.styles.zIndex.order?(w=B+1,!1):w>0}),c.positiveZIndex.splice(w,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else A.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);y0(a,d,s?d:r,o)}else A.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),y0(a,e,r,o);or(A.flags,8)&&DQ(A,o)})},DQ=function(t,e){for(var r=t instanceof p0?t.start:1,n=t instanceof p0?t.reversed:!1,A=0;A<e.length;A++){var s=e[A];s.container instanceof BQ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Pc(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},j5=function(t){var e=new NQ(t,null),r=new RQ(e),n=[];return y0(e,r,r,n),DQ(e.container,n),r},EI=function(t,e){switch(e){case 0:return Un(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Un(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Un(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Un(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},O5=function(t,e){switch(e){case 0:return Un(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Un(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Un(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Un(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},H5=function(t,e){switch(e){case 0:return Un(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Un(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Un(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Un(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},V5=function(t,e){switch(e){case 0:return wd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return wd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return wd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return wd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},wd=function(t,e){var r=[];return Tn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Tn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Un=function(t,e,r,n){var A=[];return Tn(t)?A.push(t.subdivide(.5,!1)):A.push(t),Tn(r)?A.push(r.subdivide(.5,!0)):A.push(r),Tn(n)?A.push(n.subdivide(.5,!0).reverse()):A.push(n),Tn(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},PQ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},Zh=function(t){var e=t.styles,r=t.bounds,n=It(e.paddingLeft,r.width),A=It(e.paddingRight,r.width),s=It(e.paddingTop,r.width),i=It(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+A),-(e.borderTopWidth+e.borderBottomWidth+s+i))},K5=function(t,e){return t===0?e.bounds:t===2?Zh(e):PQ(e)},G5=function(t,e){return t===0?e.bounds:t===2?Zh(e):PQ(e)},Ip=function(t,e,r){var n=K5(Co(t.styles.backgroundOrigin,e),t),A=G5(Co(t.styles.backgroundClip,e),t),s=z5(Co(t.styles.backgroundSize,e),r,n),i=s[0],a=s[1],o=Ul(Co(t.styles.backgroundPosition,e),n.width-i,n.height-a),c=$5(Co(t.styles.backgroundRepeat,e),o,s,n,A),d=Math.round(n.left+o[0]),h=Math.round(n.top+o[1]);return[c,d,h,i,a]},mo=function(t){return Bt(t)&&t.value===qo.AUTO},Bd=function(t){return typeof t=="number"},z5=function(t,e,r){var n=e[0],A=e[1],s=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(Ar(i)&&a&&Ar(a))return[It(i,r.width),It(a,r.height)];var o=Bd(s);if(Bt(i)&&(i.value===qo.CONTAIN||i.value===qo.COVER)){if(Bd(s)){var c=r.width/r.height;return c<s!=(i.value===qo.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=Bd(n),h=Bd(A),f=d||h;if(mo(i)&&(!a||mo(a))){if(d&&h)return[n,A];if(!o&&!f)return[r.width,r.height];if(f&&o){var w=d?n:A*s,v=h?A:n/s;return[w,v]}var B=d?n:r.width,_=h?A:r.height;return[B,_]}if(o){var x=0,m=0;return Ar(i)?x=It(i,r.width):Ar(a)&&(m=It(a,r.height)),mo(i)?x=m*s:(!a||mo(a))&&(m=x/s),[x,m]}var I=null,F=null;if(Ar(i)?I=It(i,r.width):a&&Ar(a)&&(F=It(a,r.height)),I!==null&&(!a||mo(a))&&(F=d&&h?I/n*A:r.height),F!==null&&mo(i)&&(I=d&&h?F/A*n:r.width),I!==null&&F!==null)return[I,F];throw new Error("Unable to calculate background-size for element")},Co=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},$5=function(t,e,r,n,A){var s=e[0],i=e[1],a=r[0],o=r[1];switch(t){case 2:return[new me(Math.round(n.left),Math.round(n.top+i)),new me(Math.round(n.left+n.width),Math.round(n.top+i)),new me(Math.round(n.left+n.width),Math.round(o+n.top+i)),new me(Math.round(n.left),Math.round(o+n.top+i))];case 3:return[new me(Math.round(n.left+s),Math.round(n.top)),new me(Math.round(n.left+s+a),Math.round(n.top)),new me(Math.round(n.left+s+a),Math.round(n.height+n.top)),new me(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new me(Math.round(n.left+s),Math.round(n.top+i)),new me(Math.round(n.left+s+a),Math.round(n.top+i)),new me(Math.round(n.left+s+a),Math.round(n.top+i+o)),new me(Math.round(n.left+s),Math.round(n.top+i+o))];default:return[new me(Math.round(A.left),Math.round(A.top)),new me(Math.round(A.left+A.width),Math.round(A.top)),new me(Math.round(A.left+A.width),Math.round(A.height+A.top)),new me(Math.round(A.left),Math.round(A.height+A.top))]}},W5="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",_I="Hidden Text",q5=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),A=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),A.src=W5,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(_I)),n.appendChild(s),n.appendChild(A);var a=A.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(_I)),n.style.lineHeight="normal",A.style.verticalAlign="super";var o=A.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),LQ=function(){function t(e,r){this.context=e,this.options=r}return t}(),J5=1e4,X5=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A._activeEffects=[],A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),n.canvas||(A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px"),A.fontMetrics=new q5(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),A}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(A){return n.applyEffect(A)})},e.prototype.applyEffect=function(r){this.ctx.save(),L5(r)&&(this.ctx.globalAlpha=r.opacity),P5(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),kQ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Kr(this,void 0,void 0,function(){var n;return Nr(this,function(A){switch(A.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Kr(this,void 0,void 0,function(){return Nr(this,function(n){switch(n.label){case 0:if(or(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,A){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+A);else{var i=DB(r.text);i.reduce(function(a,o){return s.ctx.fillText(o,a,r.bounds.top+A),a+s.ctx.measureText(o).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=r6(r.fontFamily).join(", "),s=du(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,A].join(" "),A,s]},e.prototype.renderTextNode=function(r,n){return Kr(this,void 0,void 0,function(){var A,s,i,a,o,c,d,h,f=this;return Nr(this,function(w){return A=this.createFontStyle(n),s=A[0],i=A[1],a=A[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),c=o.baseline,d=o.middle,h=n.paintOrder,r.textBounds.forEach(function(v){h.forEach(function(B){switch(B){case 0:f.ctx.fillStyle=dr(n.color),f.renderTextWithLetterSpacing(v,n.letterSpacing,c);var _=n.textShadow;_.length&&v.text.trim().length&&(_.slice(0).reverse().forEach(function(x){f.ctx.shadowColor=dr(x.color),f.ctx.shadowOffsetX=x.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=x.offsetY.number*f.options.scale,f.ctx.shadowBlur=x.blur.number,f.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=dr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:f.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+d),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(f.ctx.strokeStyle=dr(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,A){if(A&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=Zh(r),i=Yh(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Kr(this,void 0,void 0,function(){var n,A,s,i,a,o,m,m,c,d,h,f,F,w,v,R,B,_,x,m,I,F,R;return Nr(this,function(Q){switch(Q.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,A=r.curves,s=n.styles,i=0,a=n.textNodes,Q.label=1;case 1:return i<a.length?(o=a[i],[4,this.renderTextNode(o,s)]):[3,4];case 2:Q.sent(),Q.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof pQ))return[3,8];Q.label=5;case 5:return Q.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return m=Q.sent(),this.renderReplacedElement(n,A,m),[3,8];case 7:return Q.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof mQ&&this.renderReplacedElement(n,A,n.canvas),!(n instanceof wQ))return[3,12];Q.label=9;case 9:return Q.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return m=Q.sent(),this.renderReplacedElement(n,A,m),[3,12];case 11:return Q.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof xQ&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=Q.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),Q.label=14;case 14:if(n instanceof PB&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===$h?n.checked&&(this.ctx.save(),this.path([new me(n.bounds.left+h*.39363,n.bounds.top+h*.79),new me(n.bounds.left+h*.16,n.bounds.top+h*.5549),new me(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new me(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new me(n.bounds.left+h*.72983,n.bounds.top+h*.23),new me(n.bounds.left+h*.84,n.bounds.top+h*.34085),new me(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=dr(hI),this.ctx.fill(),this.ctx.restore()):n.type===Wh&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=dr(hI),this.ctx.fill(),this.ctx.restore())),Y5(n)&&n.value.length){switch(f=this.createFontStyle(s),F=f[0],w=f[1],v=this.fontMetrics.getMetrics(F,w).baseline,this.ctx.font=F,this.ctx.fillStyle=dr(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=e6(n.styles.textAlign),R=Zh(n),B=0,n.styles.textAlign){case 1:B+=R.width/2;break;case 2:B+=R.width;break}_=R.add(B,0,0,-R.height/2+1),this.ctx.save(),this.path([new me(R.left,R.top),new me(R.left+R.width,R.top),new me(R.left+R.width,R.top+R.height),new me(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ec(n.value,_),s.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!or(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];m=void 0,I=x.url,Q.label=15;case 15:return Q.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return m=Q.sent(),this.ctx.drawImage(m,n.bounds.left-(m.width+10),n.bounds.top),[3,18];case 17:return Q.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(s)[0],this.ctx.font=F,this.ctx.fillStyle=dr(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new DA(n.bounds.left,n.bounds.top+It(n.styles.paddingTop,n.bounds.width),n.bounds.width,JC(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ec(r.listValue,R),s.letterSpacing,JC(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Q.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Kr(this,void 0,void 0,function(){var n,A,x,s,i,x,a,o,x,c,d,x,h,f,x,w,v,x,B,_,x;return Nr(this,function(m){switch(m.label){case 0:if(or(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:m.sent(),n=0,A=r.negativeZIndex,m.label=2;case 2:return n<A.length?(x=A[n],[4,this.renderStack(x)]):[3,5];case 3:m.sent(),m.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:m.sent(),s=0,i=r.nonInlineLevel,m.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:m.sent(),m.label=9;case 9:return s++,[3,7];case 10:a=0,o=r.nonPositionedFloats,m.label=11;case 11:return a<o.length?(x=o[a],[4,this.renderStack(x)]):[3,14];case 12:m.sent(),m.label=13;case 13:return a++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,m.label=15;case 15:return c<d.length?(x=d[c],[4,this.renderStack(x)]):[3,18];case 16:m.sent(),m.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,m.label=19;case 19:return h<f.length?(x=f[h],[4,this.renderNode(x)]):[3,22];case 20:m.sent(),m.label=21;case 21:return h++,[3,19];case 22:w=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return w<v.length?(x=v[w],[4,this.renderStack(x)]):[3,26];case 24:m.sent(),m.label=25;case 25:return w++,[3,23];case 26:B=0,_=r.positiveZIndex,m.label=27;case 27:return B<_.length?(x=_[B],[4,this.renderStack(x)]):[3,30];case 28:m.sent(),m.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(A,s){var i=Tn(A)?A.start:A;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Tn(A)&&n.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(r,n,A,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(A,s),this.ctx.fill(),this.ctx.translate(-A,-s)},e.prototype.resizeImage=function(r,n,A){var s;if(r.width===n&&r.height===A)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,A);var o=a.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,A),a},e.prototype.renderBackgroundImage=function(r){return Kr(this,void 0,void 0,function(){var n,A,s,i,a,o;return Nr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,A=function(d){var h,f,w,U,rt,Re,T,Le,C,v,U,rt,Re,T,Le,B,_,x,m,I,F,R,Q,y,C,E,U,N,L,T,Le,je,rt,Re,ie,S,H,z,re,le,Pe,xe;return Nr(this,function(Ge){switch(Ge.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ge.label=1;case 1:return Ge.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return h=Ge.sent(),[3,4];case 3:return Ge.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(w=Ip(r,n,[h.width,h.height,h.width/h.height]),U=w[0],rt=w[1],Re=w[2],T=w[3],Le=w[4],C=s.ctx.createPattern(s.resizeImage(h,T,Le),"repeat"),s.renderRepeat(U,C,rt,Re)),[3,6];case 5:PV(d)?(v=Ip(r,n,[null,null,null]),U=v[0],rt=v[1],Re=v[2],T=v[3],Le=v[4],B=SV(d.angle,T,Le),_=B[0],x=B[1],m=B[2],I=B[3],F=B[4],R=document.createElement("canvas"),R.width=T,R.height=Le,Q=R.getContext("2d"),y=Q.createLinearGradient(x,I,m,F),WC(d.stops,_).forEach(function(Be){return y.addColorStop(Be.stop,dr(Be.color))}),Q.fillStyle=y,Q.fillRect(0,0,T,Le),T>0&&Le>0&&(C=s.ctx.createPattern(R,"repeat"),s.renderRepeat(U,C,rt,Re))):LV(d)&&(E=Ip(r,n,[null,null,null]),U=E[0],N=E[1],L=E[2],T=E[3],Le=E[4],je=d.position.length===0?[kB]:d.position,rt=It(je[0],T),Re=It(je[je.length-1],Le),ie=kV(d,rt,Re,T,Le),S=ie[0],H=ie[1],S>0&&H>0&&(z=s.ctx.createRadialGradient(N+rt,L+Re,0,N+rt,L+Re,S),WC(d.stops,S*2).forEach(function(Be){return z.addColorStop(Be.stop,dr(Be.color))}),s.path(U),s.ctx.fillStyle=z,S!==H?(re=r.bounds.left+.5*r.bounds.width,le=r.bounds.top+.5*r.bounds.height,Pe=H/S,xe=1/Pe,s.ctx.save(),s.ctx.translate(re,le),s.ctx.transform(1,0,0,Pe,0,0),s.ctx.translate(-re,-le),s.ctx.fillRect(N,xe*(L-le)+le,T,Le*xe),s.ctx.restore()):s.ctx.fill())),Ge.label=6;case 6:return n--,[2]}})},s=this,i=0,a=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<a.length?(o=a[i],[5,A(o)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,A){return Kr(this,void 0,void 0,function(){return Nr(this,function(s){return this.path(EI(A,n)),this.ctx.fillStyle=dr(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,A,s){return Kr(this,void 0,void 0,function(){var i,a;return Nr(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,A,s)]:[3,2];case 1:return o.sent(),[2];case 2:return i=O5(s,A),this.path(i),this.ctx.fillStyle=dr(r),this.ctx.fill(),a=H5(s,A),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Kr(this,void 0,void 0,function(){var n,A,s,i,a,o,c,d,h=this;return Nr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,A=!Ns(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=Z5(Co(n.backgroundClip,0),r.curves),A||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Ns(n.backgroundColor)||(this.ctx.fillStyle=dr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(w){h.ctx.save();var v=Xh(r.curves),B=w.inset?0:J5,_=M5(v,-B+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(h.path(v),h.ctx.clip(),h.mask(_)):(h.mask(v),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=w.offsetX.number+B,h.ctx.shadowOffsetY=w.offsetY.number,h.ctx.shadowColor=dr(w.color),h.ctx.shadowBlur=w.blur.number,h.ctx.fillStyle=w.inset?dr(w.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:a=0,o=0,c=s,f.label=3;case 3:return o<c.length?(d=c[o],d.style!==0&&!Ns(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,a,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,a,r.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,A,s,i){return Kr(this,void 0,void 0,function(){var a,o,c,d,h,f,w,v,B,_,x,m,I,F,R,Q,R,Q;return Nr(this,function(y){return this.ctx.save(),a=V5(s,A),o=EI(s,A),i===2&&(this.path(o),this.ctx.clip()),Tn(o[0])?(c=o[0].start.x,d=o[0].start.y):(c=o[0].x,d=o[0].y),Tn(o[1])?(h=o[1].end.x,f=o[1].end.y):(h=o[1].x,f=o[1].y),A===0||A===2?w=Math.abs(c-h):w=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(o.slice(0,2)),v=n<3?n*3:n*2,B=n<3?n*2:n,i===3&&(v=n,B=n),_=!0,w<=v*2?_=!1:w<=v*2+B?(x=w/(2*v+B),v*=x,B*=x):(m=Math.floor((w+B)/(v+B)),I=(w-m*v)/(m-1),F=(w-(m+1)*v)/m,B=F<=0||Math.abs(B-I)<Math.abs(B-F)?I:F),_&&(i===3?this.ctx.setLineDash([0,v+B]):this.ctx.setLineDash([v,B])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=dr(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Tn(o[0])&&(R=o[3],Q=o[0],this.ctx.beginPath(),this.formatPath([new me(R.end.x,R.end.y),new me(Q.start.x,Q.start.y)]),this.ctx.stroke()),Tn(o[1])&&(R=o[1],Q=o[2],this.ctx.beginPath(),this.formatPath([new me(R.end.x,R.end.y),new me(Q.start.x,Q.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Kr(this,void 0,void 0,function(){var n;return Nr(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=dr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=j5(r),[4,this.renderStack(n)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(LQ),Y5=function(t){return t instanceof yQ||t instanceof vQ?!0:t instanceof PB&&t.type!==Wh&&t.type!==$h},Z5=function(t,e){switch(t){case 0:return Xh(e);case 2:return R5(e);case 1:default:return Yh(e)}},e6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},t6=["-apple-system","system-ui"],r6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return t6.indexOf(e)===-1}):t},n6=function(t){$n(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=n,A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),A}return e.prototype.render=function(r){return Kr(this,void 0,void 0,function(){var n,A;return Nr(this,function(s){switch(s.label){case 0:return n=g0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,A6(n)];case 1:return A=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=dr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(LQ),A6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},s6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Xu([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Xu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),i6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new s6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new _5(this,e)}return t.instanceCount=1,t}(),bI=function(t,e){return e===void 0&&(e={}),o6(t,e)};typeof window<"u"&&SQ.setContext(window);var o6=function(t,e){return Kr(void 0,void 0,void 0,function(){var r,n,A,s,i,a,o,c,d,h,f,w,v,B,_,x,m,I,F,R,y,Q,y,C,E,U,N,L,T,Le,je,rt,Re,ie,S,H,z,re,le,Pe;return Nr(this,function(xe){switch(xe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return A={allowTaint:(C=e.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(U=e.useCORS)!==null&&U!==void 0?U:!1},s=e0({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},A),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:n.innerHeight,scrollX:(Le=e.scrollX)!==null&&Le!==void 0?Le:n.pageXOffset,scrollY:(je=e.scrollY)!==null&&je!==void 0?je:n.pageYOffset},a=new DA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),o=new i6(s,a),c=(rt=e.foreignObjectRendering)!==null&&rt!==void 0?rt:!1,d={allowTaint:(Re=e.allowTaint)!==null&&Re!==void 0?Re:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},o.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new xI(o,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=xe.sent(),v=LB(f)||l5(f)?MO(f.ownerDocument):Xf(o,f),B=v.width,_=v.height,x=v.left,m=v.top,I=a6(o,f,e.backgroundColor),F={canvas:e.canvas,backgroundColor:I,scale:(S=(ie=e.scale)!==null&&ie!==void 0?ie:n.devicePixelRatio)!==null&&S!==void 0?S:1,x:((H=e.x)!==null&&H!==void 0?H:0)+x,y:((z=e.y)!==null&&z!==void 0?z:0)+m,width:(re=e.width)!==null&&re!==void 0?re:Math.ceil(B),height:(le=e.height)!==null&&le!==void 0?le:Math.ceil(_)},c?(o.logger.debug("Document cloned, using foreign object rendering"),y=new n6(o,F),[4,y.render(f)]):[3,3];case 2:return R=xe.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+x+","+m+" with size "+B+"x"+_+" using computed rendering"),o.logger.debug("Starting DOM parsing"),Q=IQ(o,f),I===Q.styles.backgroundColor&&(Q.styles.backgroundColor=bA.TRANSPARENT),o.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),y=new X5(o,F),[4,y.render(Q)];case 4:R=xe.sent(),xe.label=5;case 5:return(!((Pe=e.removeContainer)!==null&&Pe!==void 0)||Pe)&&(xI.destroy(w)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,R]}})})},a6=function(t,e,r){var n=e.ownerDocument,A=n.documentElement?Yl(t,getComputedStyle(n.documentElement).backgroundColor):bA.TRANSPARENT,s=n.body?Yl(t,getComputedStyle(n.body).backgroundColor):bA.TRANSPARENT,i=typeof r=="string"?Yl(t,r):r===null?bA.TRANSPARENT:4294967295;return e===n.documentElement?Ns(A)?Ns(s)?i:s:A:i},l6=Object.defineProperty,ef=Object.getOwnPropertySymbols,MQ=Object.prototype.hasOwnProperty,jQ=Object.prototype.propertyIsEnumerable,TI=(t,e,r)=>e in t?l6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c6=(t,e)=>{for(var r in e||(e={}))MQ.call(e,r)&&TI(t,r,e[r]);if(ef)for(var r of ef(e))jQ.call(e,r)&&TI(t,r,e[r]);return t},u6=(t,e)=>{var r={};for(var n in t)MQ.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&ef)for(var n of ef(t))e.indexOf(n)<0&&jQ.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var qi;(t=>{const e=class{constructor(o,c,d,h){if(this.version=o,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(d);if(this.drawCodewords(w),h==-1){let v=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const _=this.getPenaltyScore();_<v&&(h=B,v=_),this.applyMask(B)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(o,c){const d=t.QrSegment.makeSegments(o);return e.encodeSegments(d,c)}static encodeBinary(o,c){const d=t.QrSegment.makeBytes(o);return e.encodeSegments([d],c)}static encodeSegments(o,c,d=1,h=40,f=-1,w=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,B;for(v=d;;v++){const I=e.getNumDataCodewords(v,c)*8,F=a.getTotalBits(o,v);if(F<=I){B=F;break}if(v>=h)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])w&&B<=e.getNumDataCodewords(v,I)*8&&(c=I);let _=[];for(const I of o){n(I.mode.modeBits,4,_),n(I.numChars,I.mode.numCharCountBits(v),_);for(const F of I.getData())_.push(F)}s(_.length==B);const x=e.getNumDataCodewords(v,c)*8;s(_.length<=x),n(0,Math.min(4,x-_.length),_),n(0,(8-_.length%8)%8,_),s(_.length%8==0);for(let I=236;_.length<x;I^=253)n(I,8,_);let m=[];for(;m.length*8<_.length;)m.push(0);return _.forEach((I,F)=>m[F>>>3]|=I<<7-(F&7)),new e(v,c,m,f)}getModule(o,c){return 0<=o&&o<this.size&&0<=c&&c<this.size&&this.modules[c][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),c=o.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(o[d],o[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const c=this.errorCorrectionLevel.formatBits<<3|o;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,A(h,f));this.setFunctionModule(8,7,A(h,6)),this.setFunctionModule(8,8,A(h,7)),this.setFunctionModule(7,8,A(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,A(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,A(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,A(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let d=0;d<12;d++)o=o<<1^(o>>>11)*7973;const c=this.version<<12|o;s(c>>>18==0);for(let d=0;d<18;d++){const h=A(c,d),f=this.size-11+d%3,w=Math.floor(d/3);this.setFunctionModule(f,w,h),this.setFunctionModule(w,f,h)}}drawFinderPattern(o,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),w=o+h,v=c+d;0<=w&&w<this.size&&0<=v&&v<this.size&&this.setFunctionModule(w,v,f!=2&&f!=4)}}drawAlignmentPattern(o,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(o+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(o,c,d){this.modules[c][o]=d,this.isFunction[c][o]=!0}addEccAndInterleave(o){const c=this.version,d=this.errorCorrectionLevel;if(o.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],w=Math.floor(e.getNumRawDataModules(c)/8),v=h-w%h,B=Math.floor(w/h);let _=[];const x=e.reedSolomonComputeDivisor(f);for(let I=0,F=0;I<h;I++){let R=o.slice(F,F+B-f+(I<v?0:1));F+=R.length;const Q=e.reedSolomonComputeRemainder(R,x);I<v&&R.push(0),_.push(R.concat(Q))}let m=[];for(let I=0;I<_[0].length;I++)_.forEach((F,R)=>{(I!=B-f||R>=v)&&m.push(F[I])});return s(m.length==w),m}drawCodewords(o){if(o.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const w=d-f,B=(d+1&2)==0?this.size-1-h:h;!this.isFunction[B][w]&&c<o.length*8&&(this.modules[B][w]=A(o[c>>>3],7-(c&7)),c++)}}s(c==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(o){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let o=0;for(let f=0;f<this.size;f++){let w=!1,v=0,B=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==w?(v++,v==5?o+=e.PENALTY_N1:v>5&&o++):(this.finderPenaltyAddHistory(v,B),w||(o+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),w=this.modules[f][_],v=1);o+=this.finderPenaltyTerminateAndCount(w,v,B)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let w=!1,v=0,B=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==w?(v++,v==5?o+=e.PENALTY_N1:v>5&&o++):(this.finderPenaltyAddHistory(v,B),w||(o+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),w=this.modules[_][f],v=1);o+=this.finderPenaltyTerminateAndCount(w,v,B)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let w=0;w<this.size-1;w++){const v=this.modules[f][w];v==this.modules[f][w+1]&&v==this.modules[f+1][w]&&v==this.modules[f+1][w+1]&&(o+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((w,v)=>w+(v?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),o+=h*e.PENALTY_N4,s(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let d=[6];for(let h=this.size-7;d.length<o;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(o){if(o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*o+128)*o+64;if(o>=2){const d=Math.floor(o/7)+2;c-=(25*d-10)*d-55,o>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(o,c){return Math.floor(e.getNumRawDataModules(o)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][o]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<o-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<o;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(o,c){let d=c.map(h=>0);for(const h of o){const f=h^d.shift();d.push(0),c.forEach((w,v)=>d[v]^=e.reedSolomonMultiply(w,f))}return d}static reedSolomonMultiply(o,c){if(o>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*o;return s(d>>>8==0),d}finderPenaltyCountPatterns(o){const c=o[1];s(c<=this.size*3);const d=c>0&&o[2]==c&&o[3]==c*3&&o[4]==c&&o[5]==c;return(d&&o[0]>=c*4&&o[6]>=c?1:0)+(d&&o[6]>=c*4&&o[0]>=c?1:0)}finderPenaltyTerminateAndCount(o,c,d){return o&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(o,c){c[0]==0&&(o+=this.size),c.pop(),c.unshift(o)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(o,c,d){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(o>>>h&1)}function A(o,c){return(o>>>c&1)!=0}function s(o){if(!o)throw new Error("Assertion error")}const i=class{constructor(o,c,d){if(this.mode=o,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(o){let c=[];for(const d of o)n(d,8,c);return new i(i.Mode.BYTE,o.length,c)}static makeNumeric(o){if(!i.isNumeric(o))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<o.length;){const h=Math.min(o.length-d,3);n(parseInt(o.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,o.length,c)}static makeAlphanumeric(o){if(!i.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=o.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d+1)),n(h,11,c)}return d<o.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,o.length,c)}static makeSegments(o){return o==""?[]:i.isNumeric(o)?[i.makeNumeric(o)]:i.isAlphanumeric(o)?[i.makeAlphanumeric(o)]:[i.makeBytes(i.toUtf8ByteArray(o))]}static makeEci(o){let c=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,c);else if(o<16384)n(2,2,c),n(o,14,c);else if(o<1e6)n(6,3,c),n(o,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(o){return i.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return i.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,c){let d=0;for(const h of o){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(o){o=encodeURI(o);let c=[];for(let d=0;d<o.length;d++)o.charAt(d)!="%"?c.push(o.charCodeAt(d)):(c.push(parseInt(o.substr(d+1,2),16)),d+=2);return c}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(qi||(qi={}));(t=>{(e=>{const r=class{constructor(A,s){this.ordinal=A,this.formatBits=s}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(qi||(qi={}));(t=>{(e=>{const r=class{constructor(A,s){this.modeBits=A,this.numBitsCharCount=s}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(qi||(qi={}));var Rl=qi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var d6={L:Rl.QrCode.Ecc.LOW,M:Rl.QrCode.Ecc.MEDIUM,Q:Rl.QrCode.Ecc.QUARTILE,H:Rl.QrCode.Ecc.HIGH},h6=128,f6="L",g6="#FFFFFF",p6="#000000",m6=!1,OQ=4,w6=.1;function B6(t,e=0){const r=[];return t.forEach(function(n,A){let s=null;n.forEach(function(i,a){if(!i&&s!==null){r.push(`M${s+e} ${A+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===n.length-1){if(!i)return;s===null?r.push(`M${a+e},${A+e} h1v1H${a+e}z`):r.push(`M${s+e},${A+e} h${a+1-s}v1H${s+e}z`);return}i&&s===null&&(s=a)})}),r.join("")}function v6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((A,s)=>s<e.x||s>=e.x+e.w?A:!1))}function y6(t,e,r,n){if(n==null)return null;const A=r?OQ:0,s=t.length+A*2,i=Math.floor(e*w6),a=s/e,o=(n.width||i)*a,c=(n.height||i)*a,d=n.x==null?t.length/2-o/2:n.x*a,h=n.y==null?t.length/2-c/2:n.y*a;let f=null;if(n.excavate){let w=Math.floor(d),v=Math.floor(h),B=Math.ceil(o+d-w),_=Math.ceil(c+h-v);f={x:w,y:v,w:B,h:_}}return{x:d,y:h,h:c,w:o,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function x6(t){const e=t,{value:r,size:n=h6,level:A=f6,bgColor:s=g6,fgColor:i=p6,includeMargin:a=m6,imageSettings:o}=e,c=u6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Rl.QrCode.encodeText(r,d6[A]).getModules();const h=a?OQ:0,f=d.length+h*2,w=y6(d,n,a,o);let v=null;o!=null&&w!=null&&(w.excavation!=null&&(d=v6(d,w.excavation)),v=ds.createElement("image",{xlinkHref:o.src,height:w.h,width:w.w,x:w.x+h,y:w.y+h,preserveAspectRatio:"none"}));const B=B6(d,h);return ds.createElement("svg",c6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),ds.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),ds.createElement("path",{fill:i,d:B,shapeRendering:"crispEdges"}),v)}const C6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:A,bellSchedule:s,saveStaticData:i}=GA(),{schedule1:a,schedule2:o,substitutions:c,saveScheduleData:d}=Ha(),h=k.useRef(null),f=k.useRef(null),w=k.useRef(null),[v,B]=k.useState(new Date().toISOString().split("T")[0]),[_,x]=k.useState(()=>{const pe=new Date().getMonth();return pe>=0&&pe<=4?2:1}),[m,I]=k.useState(!1),[F,R]=k.useState(!1),[Q,y]=k.useState(""),[C,E]=k.useState(""),U=k.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:A,bellSchedule:s,schedule:a,schedule2ndHalf:o,substitutions:c}),[t,e,r,n,A,s,a,o,c]),N=()=>_===2?o:a,L=pe=>{const Y=new Date(pe).getMonth();return Y>=0&&Y<=4?o:a},T=pe=>{var ke;const Y=(ke=pe.target.files)==null?void 0:ke[0];if(!Y)return;const Ne=new FileReader;Ne.onload=async Z=>{var oe;try{const de=JSON.parse((oe=Z.target)==null?void 0:oe.result);if(de.teachers&&(de.schedule||de.schedule2ndHalf)){if(window.confirm("    . ?")){const Ie={...rn,...de,rooms:de.rooms||rn.rooms,classes:de.classes||[],schedule:de.schedule||[],schedule2ndHalf:de.schedule2ndHalf||[],teachers:de.teachers||[],subjects:de.subjects||[],substitutions:de.substitutions||[],settings:{...rn.settings,...de.settings}};await i(Ie),await d(Ie),alert("  !")}}else alert("  .")}catch{alert("  .")}},Ne.readAsText(Y)},Le=()=>{const pe=N();let Y=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Dr.forEach(oe=>{Y+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${oe}</td></tr>`,[he.First,he.Second].forEach(de=>{const Ie=r.filter(Te=>Te.shift===de);Ie.length!==0&&(Y+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${de}</td></tr>`,Y+='<tr><th class="header"></th>',Zn[de].forEach(Te=>Y+=`<th class="header">${Te} </th>`),Y+="</tr>",Ie.forEach(Te=>{Y+=`<tr><td class="class-cell">${Te.name}</td>`,Zn[de].forEach(Ke=>{const ze=pe.filter(He=>He.classId===Te.id&&He.day===oe&&He.shift===de&&He.period===Ke);Y+='<td style="height: 60px;">',ze.forEach(He=>{const $e=t.find(We=>We.id===He.subjectId),Me=e.find(We=>We.id===He.teacherId),De=n.find(We=>We.id===He.roomId),Xe=De?De.name:He.roomId;Y+=`<div style="background-color: ${($e==null?void 0:$e.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${($e==null?void 0:$e.name)||""} ${He.direction||""}</div>
                                <div class="meta">${(Me==null?void 0:Me.name)||""} ${Xe?`(. ${Xe})`:""}</div>
                            </div>`}),Y+="</td>"}),Y+="</tr>"}))})}),Y+="</table></body></html>";const Ne=new Blob([Y],{type:"application/vnd.ms-excel"}),ke=URL.createObjectURL(Ne),Z=document.createElement("a");Z.href=ke,Z.download=`_22_${_}.xls`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},je=()=>{const pe=N();let Y=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12pt; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
            </style></head><body>
        `;[he.First,he.Second].forEach(oe=>{const de=Zn[oe];Y+="<table>",Y+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${Dr.length*de.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,Y+="<tr>",Dr.forEach(Ie=>{Y+=`<th colspan="${de.length}" class="header" style="border: 2px solid #000;">${Ie}</th>`}),Y+="</tr>",Y+="<tr>",Dr.forEach(()=>{de.forEach(Ie=>Y+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),Y+="</tr>",Y+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${oe}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,Dr.forEach(()=>{de.forEach(Ie=>Y+=`<th class="header" style="width: 40px;">${Ie}</th>`)}),Y+="</tr>",t.forEach(Ie=>{const Te=e.filter(ze=>ze.subjectIds.includes(Ie.id));if(Te.length===0)return;const Ke=Ie.color||"#ffffff";Te.forEach((ze,He)=>{Y+="<tr>",He===0&&(Y+=`<td rowspan="${Te.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${Ke};">${Ie.name}</td>`),Y+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${ze.name}</td>`,Dr.forEach($e=>{de.forEach(Me=>{const De=pe.find(Xe=>Xe.teacherId===ze.id&&Xe.subjectId===Ie.id&&Xe.day===$e&&Xe.period===Me&&Xe.shift===oe);if(De){const Xe=r.find(wt=>wt.id===De.classId),We=n.find(wt=>wt.id===De.roomId),Ye=We?We.name:De.roomId,Ze=Ye?`<sub>${Ye}</sub>`:"",st=De.direction?` <span style="font-size:10px">(${De.direction})</span>`:"",tr=Ie.color||"#ffffff";Y+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${tr};">${Xe?Xe.name:""}${st}${Ze}</td>`}else Y+='<td style="border: 1px solid #000;"></td>'})}),Y+="</tr>"}),Y+=`<tr><td colspan="${2+Dr.length*de.length}" style="height: 2px; background-color: #000;"></td></tr>`}),Y+="</table><br/><br/>"}),Y+="</body></html>";const Ne=new Blob([Y],{type:"application/vnd.ms-excel"}),ke=URL.createObjectURL(Ne),Z=document.createElement("a");Z.href=ke,Z.download=`__${_}.xls`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},rt=()=>{const pe=new Date(v),Y=pe.getMonth(),Ne=pe.getFullYear(),ke=c.filter(Me=>{const De=new Date(Me.date);return De.getMonth()===Y&&De.getFullYear()===Ne}).sort((Me,De)=>new Date(Me.date).getTime()-new Date(De.date).getTime());if(ke.length===0){alert("      .");return}const Z=new Map;ke.forEach(Me=>{const De=`${Me.scheduleItemId}_${Me.date}`,Xe=Z.get(De)||[];Xe.push(Me),Z.set(De,Xe)});const oe=[],de=[];Z.forEach(Me=>{var wt;const De=Me[0],Xe=a.find(Wt=>Wt.id===De.scheduleItemId)||o.find(Wt=>Wt.id===De.scheduleItemId);if(!Xe)return;const We=r.find(Wt=>Wt.id===Xe.classId),Ye=t.find(Wt=>Wt.id===Xe.subjectId),Ze=e.find(Wt=>Wt.id===De.originalTeacherId);let st=De.lessonAbsenceReason||((wt=Ze==null?void 0:Ze.absenceReasons)==null?void 0:wt[De.date])||"";De.replacementTeacherId===De.originalTeacherId&&De.replacementRoomId&&!De.replacementClassId&&(st=" "),De.replacementClassId&&De.replacementSubjectId&&!De.isMerger&&(st=" ");const tr={subs:Me,scheduleItem:Xe,cls:We,subj:Ye,origTeacher:Ze,reason:st};st===" "?de.push(tr):oe.push(tr)});let Ie=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${pe.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const Te=Me=>Me.map(De=>{const{subs:Xe,scheduleItem:We,cls:Ye,subj:Ze,origTeacher:st,reason:tr}=De,wt=Xe[0],Wt=new Date(wt.date).toLocaleDateString("ru-RU");let it="";if(wt.replacementTeacherId==="conducted")it=" ";else if(wt.replacementTeacherId==="cancelled")it=" ";else if(it=Xe.map(V=>{const we=e.find(ge=>ge.id===V.replacementTeacherId);return we?we.name:""}).join(", "),wt.isMerger){let V=" ()";if(wt.replacementClassId){const we=r.find(ge=>ge.id===wt.replacementClassId);we&&(V=` (  ${we.name})`)}it+=V}else if(wt.replacementClassId&&wt.replacementSubjectId){const V=r.find(ge=>ge.id===wt.replacementClassId),we=t.find(ge=>ge.id===wt.replacementSubjectId);it+=` ( ${(V==null?void 0:V.name)||"?"} ${(we==null?void 0:we.name)||"?"})`}const Jr=We.roomId,un=wt.replacementRoomId,Xr=un||Jr,Nn=n.find(q=>q.id===Xr),D=Nn?Nn.name:Xr||"-",$=un?`${D} ( .)`:D;return`
                    <tr>
                        <td>${Wt}</td>
                        <td>${We.period}</td>
                        <td>${We.shift}</td>
                        <td>${(Ye==null?void 0:Ye.name)||"?"}</td>
                        <td>${(Ze==null?void 0:Ze.name)||"?"}</td>
                        <td>${(st==null?void 0:st.name)||"?"}</td>
                        <td>${it}</td>
                        <td>${$}</td>
                        <td>${tr}</td>
                    </tr>
                `}).join(""),Ke=(Me,De=!1)=>`
            <table>
            <thead>
                <tr class="${De?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${Te(Me)}
            </tbody>
            </table>
        `;oe.length>0?Ie+=Ke(oe):Ie+="<p>     .</p>",de.length>0&&(Ie+="<br/><br/>",Ie+='<h3 style="color: #b91c1c;">   (  )</h3>',Ie+=Ke(de,!0)),Ie+="</body></html>";const ze=new Blob([Ie],{type:"application/vnd.ms-excel"}),He=URL.createObjectURL(ze),$e=document.createElement("a");$e.href=He,$e.download=`__${pe.getMonth()+1}_${pe.getFullYear()}.xls`,document.body.appendChild($e),$e.click(),document.body.removeChild($e)},Re=()=>{const pe=new Date(v),Y=pe.getMonth(),Ne=pe.getFullYear(),ke=c.filter(Te=>{const Ke=new Date(Te.date),ze=Ke.getMonth()===Y&&Ke.getFullYear()===Ne,He=Te.refusals&&Te.refusals.length>0;return ze&&He}).sort((Te,Ke)=>new Date(Te.date).getTime()-new Date(Ke.date).getTime());if(ke.length===0){alert("      .");return}let Z=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${pe.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;ke.forEach(Te=>{const Ke=a.find(We=>We.id===Te.scheduleItemId)||o.find(We=>We.id===Te.scheduleItemId);if(!Ke)return;const ze=new Date(Te.date).toLocaleDateString("ru-RU"),He=r.find(We=>We.id===Ke.classId),$e=t.find(We=>We.id===Ke.subjectId),Me=e.find(We=>We.id===Te.originalTeacherId);let De="";if(Te.replacementTeacherId==="conducted")De=" ";else if(Te.replacementTeacherId==="cancelled")De=" ";else{const We=e.find(Ye=>Ye.id===Te.replacementTeacherId);De=We?We.name:""}const Xe=(Te.refusals||[]).map(We=>{const Ye=e.find(Ze=>Ze.id===We);return Ye?Ye.name:""}).join(", ");Z+=`
                <tr>
                    <td>${ze}</td>
                    <td>${Ke.period}</td>
                    <td>${Ke.shift}</td>
                    <td>${(He==null?void 0:He.name)||"?"}</td>
                    <td>${($e==null?void 0:$e.name)||"?"}</td>
                    <td>${(Me==null?void 0:Me.name)||"?"}</td>
                    <td>${De}</td>
                    <td>${Xe}</td>
                </tr>
            `}),Z+="</tbody></table></body></html>";const oe=new Blob([Z],{type:"application/vnd.ms-excel"}),de=URL.createObjectURL(oe),Ie=document.createElement("a");Ie.href=de,Ie.download=`__${pe.getMonth()+1}_${pe.getFullYear()}.xls`,document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie)},ie=()=>{const pe=N();let Y=`							
`;Dr.forEach(Ne=>{[he.First,he.Second].forEach(ke=>{r.filter(oe=>oe.shift===ke).forEach(oe=>{Zn[ke].forEach(de=>{pe.filter(Te=>Te.classId===oe.id&&Te.day===Ne&&Te.shift===ke&&Te.period===de).forEach(Te=>{const Ke=t.find(Me=>Me.id===Te.subjectId),ze=e.find(Me=>Me.id===Te.teacherId),He=n.find(Me=>Me.id===Te.roomId),$e=He?He.name:Te.roomId||"";Y+=`${Ne}	${ke}	${oe.name}	${de}	${(Ke==null?void 0:Ke.name)||""}	${(ze==null?void 0:ze.name)||""}	${$e}	${Te.direction||""}
`})})})})}),navigator.clipboard.writeText(Y).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},S=async()=>{I(!0);try{if(!f.current){alert("   1- .");return}const pe=await bI(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),Y=document.createElement("a");Y.href=pe.toDataURL("image/png"),Y.download=`_${v}_1.png`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)}catch(pe){console.error(pe),alert("   ")}finally{I(!1)}},H=async()=>{I(!0);try{if(!w.current){alert("   2- .");return}const pe=await bI(w.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),Y=document.createElement("a");Y.href=pe.toDataURL("image/png"),Y.download=`_${v}_2.png`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)}catch(pe){console.error(pe),alert("   ")}finally{I(!1)}},z=k.useMemo(()=>c.filter(pe=>pe.date===v),[c,v]),re=k.useMemo(()=>{const pe=L(v);return z.filter(Y=>{const Ne=pe.find(ke=>ke.id===Y.scheduleItemId);return Ne&&Ne.shift===he.First}).filter(Y=>Y.replacementTeacherId!=="conducted").length>0},[z,L,v]),le=k.useMemo(()=>{const pe=L(v);return z.filter(Y=>{const Ne=pe.find(ke=>ke.id===Y.scheduleItemId);return Ne&&Ne.shift===he.Second}).filter(Y=>Y.replacementTeacherId!=="conducted").length>0},[z,L,v]),Pe=pe=>{const Y=L(v),Ne=z.filter(Z=>{const oe=Y.find(de=>de.id===Z.scheduleItemId);return oe&&oe.shift===pe}).filter(Z=>Z.replacementTeacherId!=="conducted");if(Ne.length===0)return null;const ke=Array.from(new Set(Ne.map(Z=>Z.scheduleItemId)));return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:pe}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:ke.map(Z=>{var un,Xr,Nn;const oe=Ne.filter(D=>D.scheduleItemId===Z),de=oe[0],Ie=Y.find(D=>D.id===Z);if(!Ie)return null;const Te=r.find(D=>D.id===Ie.classId),Ke=t.find(D=>D.id===Ie.subjectId),ze=e.find(D=>D.id===de.originalTeacherId),He=de.replacementRoomId,$e=Ie.roomId?n.find(D=>D.id===Ie.roomId):null,Me=$e?$e.name:Ie.roomId||"",De=He?n.find(D=>D.id===He):null,Xe=De?De.name:He||"",We=de.replacementTeacherId==="cancelled",Ye=(un=ze==null?void 0:ze.absenceReasons)==null?void 0:un[v],Ze=de.lessonAbsenceReason,st=Ze===" "?Ze:Ye===" "?Ye:"",tr=de.replacementClassId?r.find(D=>D.id===de.replacementClassId):null,wt=de.replacementSubjectId?t.find(D=>D.id===de.replacementSubjectId):null,Wt=de.replacementTeacherId===de.originalTeacherId&&He&&!tr,it=tr&&wt&&!de.isMerger,Jr=de.replacementTeacherId===de.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:Ie.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:Te==null?void 0:Te.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Ke==null?void 0:Ke.name}),Ie.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:Ie.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!Jr&&!Wt&&!it&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[ze==null?void 0:ze.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),st&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:st})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${We?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Wt?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:ze==null?void 0:ze.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):it?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:ze==null?void 0:ze.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",tr==null?void 0:tr.name]})]}):We?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:oe.length>1||de.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:oe.map(D=>{const $=e.find(q=>q.id===D.replacementTeacherId);return $?$.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",de.replacementClassId?`(${(Xr=r.find(D=>D.id===de.replacementClassId))==null?void 0:Xr.name})`:""]})]}):l.jsx("span",{children:(Nn=e.find(D=>D.id===de.replacementTeacherId))==null?void 0:Nn.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${He?"text-indigo-600":"text-slate-700"}`,children:He&&He!==Ie.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Me}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Xe})]}):l.jsx("span",{className:"text-xl",children:Me})})]},Z)})})]})]})},xe=async()=>{const pe=Math.random().toString(36).substr(2,9);await zr.setPublicData(pe,U),await i({settings:{...A,publicScheduleId:pe}});const Y=`${window.location.origin}${window.location.pathname}#/public?id=${pe}`;y(Y),E(pe),R(!0)},Ge=async()=>{!A.publicScheduleId||!window.confirm(" ,     ?      .")||(await zr.deletePublicData(A.publicScheduleId),await i({settings:{...A,publicScheduleId:null}}),alert("  ."),y(""),E(""))},Be=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(v).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),mt=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]});return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>zr.exportJson(U),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:T,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var pe;return(pe=h.current)==null?void 0:pe.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(J,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(J,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:v,onChange:pe=>B(pe.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:S,disabled:m||!re,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:m?l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:H,disabled:m||!le,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:m?l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:z.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Be,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(mt,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[re&&l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Be,{}),Pe(he.First),l.jsx(mt,{})]}),le&&l.jsxs("div",{ref:w,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Be,{}),Pe(he.Second),l.jsx(mt,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:_,onChange:pe=>x(Number(pe.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:Le,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:je,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:ie,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(J,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:rt,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:Re,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),A.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.publicScheduleId})]}),l.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(J,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Ge,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:xe,disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(J,{name:"Share2",size:20}),"  "]})]}),l.jsx(_A,{isOpen:F,onClose:()=>R(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),Q&&l.jsxs(l.Fragment,{children:[l.jsx(x6,{value:Q,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:Q,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:Q}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(Q),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(J,{name:"Copy",size:16}),"  "]})]})]})})]})},I6=()=>{var x;const{subjects:t,teachers:e,classes:r}=GA(),{schedule1:n,schedule2:A,substitutions:s}=Ha(),[i,a]=k.useState("load"),[o,c]=k.useState(((x=r[0])==null?void 0:x.id)||""),[d,h]=k.useState(()=>{const m=new Date().getMonth();return m>=0&&m<=4?2:1}),f=k.useMemo(()=>d===2?A:n,[d,n,A]),w=k.useMemo(()=>e.map(I=>{const F=f.filter(N=>N.teacherId===I.id),R=F.length,Q=R*4,y=s.filter(N=>N.replacementTeacherId===I.id).length,C=s.filter(N=>N.originalTeacherId===I.id).length,E=Q+y-C,U={};return F.forEach(N=>{const L=t.find(T=>T.id===N.subjectId);L&&(U[L.name]=(U[L.name]||0)+1)}),{id:I.id,name:I.name,weeklyHours:R,subsTaken:y,subsMissed:C,actualHours:E,subjectBreakdown:U}}).sort((I,F)=>F.actualHours-I.actualHours),[e,f,s,t]),v=k.useMemo(()=>o?Dr.map(m=>{const F=f.filter(R=>R.classId===o&&R.day===m).reduce((R,Q)=>{const y=t.find(C=>C.id===Q.subjectId);return R+((y==null?void 0:y.difficulty)||5)},0);return{label:m,value:F}}):[],[f,t,o]),B=k.useMemo(()=>{const m=e.map(F=>({name:F.name,count:s.filter(R=>R.replacementTeacherId===F.id).length})).sort((F,R)=>R.count-F.count).slice(0,5),I=e.map(F=>({name:F.name,count:F.unavailableDates.length})).sort((F,R)=>R.count-F.count).slice(0,5);return{heroes:m,absentees:I}},[e,s]),_=()=>{let m="";i==="load"?m=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+w.map(R=>`"${R.name}",${R.weeklyHours},${R.subsTaken},${R.subsMissed},${R.actualHours},"${Object.entries(R.subjectBreakdown).map(([Q,y])=>Q+": "+y).join(", ")}"`).join(`
`):i==="sanpin"&&(m=`Day,Score
`+v.map(R=>`${R.label},${R.value}`).join(`
`));const I=new Blob([`\uFEFF${m}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(I),F.download=`report_${i}_${d}sem.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(J,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:m=>h(Number(m.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:_,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(J,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>a("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:w.map(m=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:m.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:m.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",m.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",m.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:m.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(m.subjectBreakdown).map(([I,F])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[I,": ",F]},I))})})]},m.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:m=>c(m.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(m=>l.jsx("option",{value:m.id,children:m.name},m.id))})]}),l.jsx(np,{items:v,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(np,{items:B.heroes.map(m=>({label:m.name,value:m.count})),max:Math.max(...B.heroes.map(m=>m.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(J,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(np,{items:B.absentees.map(m=>({label:m.name,value:m.count})),max:Math.max(...B.absentees.map(m=>m.count),1),barClassName:"bg-red-500"})]})]})]})},E6=()=>{const{setGuestRole:t,role:e,loading:r}=Oa(),n=Vc(),[A,s]=k.useState("select"),[i,a]=k.useState(""),[o,c]=k.useState(""),[d,h]=k.useState(""),[f,w]=k.useState(!1);k.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher")&&n("/dashboard")},[e,r,n]);const v=async _=>{if(_.preventDefault(),h(""),w(!0),!pn){h("Firebase .  ."),w(!1);return}try{let x=i;A==="teacher"&&(x="teacher@gymnasium22.com"),await ZM(pn,x,o)}catch(x){console.error("Firebase Auth Error:",x);const m=x==null?void 0:x.code;let I="   .";switch(m){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":I="   .";break;case"auth/invalid-email":I="  email.";break;case"auth/too-many-requests":I="  . .";break;default:I=" .  ."}h(I)}finally{w(!1)}},B=()=>{t(),n("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx(J,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),A==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:B,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(J,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>s("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(J,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>s("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(J,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:" "})]})]})]}),A!=="select"&&l.jsxs("form",{onSubmit:v,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{s("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(J,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:A==="teacher"?"  ":"  "})]}),A==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:_=>a(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:o,onChange:_=>c(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||r)&&l.jsx(J,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},hi=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:A}=Oa();return A?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(yh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(yh,{to:"/login",replace:!0})},_6=()=>{const{role:t,loading:e}=Oa();return e?null:t==="guest"?l.jsx(yh,{to:"/schedule",replace:!0}):l.jsx(yh,{to:"/dashboard",replace:!0})},b6=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(localStorage.getItem("theme")||"light"),{isLoading:A}=GA(),{logout:s,role:i,user:a}=Oa();if(k.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",r)},[r]),A)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const c=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(d=>d.roles.includes(i||""));return l.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx(J,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0",children:c.map(d=>l.jsxs(j2,{to:d.to,onClick:()=>e(!1),className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${h?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(J,{name:d.icon,size:20}),d.label]},d.to))}),l.jsx(TO,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:a&&a.email||""}),l.jsx("button",{onClick:s,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(J,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors",children:r==="light"?l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx(J,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:l.jsx(E2,{})})]})]})},T6=()=>{const[t,e]=k.useState(null),[r,n]=k.useState(!0),[A]=V2(),s=A.get("id");return k.useEffect(()=>{s?(n(!0),zr.getPublicData(s).then(i=>{const a={...rn,...i,settings:{...rn.settings,...i==null?void 0:i.settings}};e(a),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[s]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(J,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(bF,{initialData:t,children:l.jsx(QF,{children:l.jsx(UF,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(J,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(NF,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(J,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function F6(){return l.jsx(EO,{children:l.jsx(bF,{children:l.jsx(QF,{children:l.jsx(UF,{children:l.jsx(D2,{children:l.jsxs(b2,{children:[l.jsx(hn,{path:"/login",element:l.jsx(E6,{})}),l.jsxs(hn,{path:"/",element:l.jsx(hi,{children:l.jsx(b6,{})}),children:[l.jsx(hn,{index:!0,element:l.jsx(_6,{})}),l.jsx(hn,{path:"dashboard",element:l.jsx(hi,{allowedRoles:["admin","teacher"],children:l.jsx(FO,{})})}),l.jsx(hn,{path:"schedule",element:l.jsx(FI,{semester:1})}),l.jsx(hn,{path:"schedule2",element:l.jsx(FI,{semester:2})}),l.jsx(hn,{path:"substitutions",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(PO,{})})}),l.jsx(hn,{path:"directory",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(DO,{})})}),l.jsx(hn,{path:"admin",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(LO,{})})}),l.jsx(hn,{path:"reports",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(I6,{})})}),l.jsx(hn,{path:"export",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(C6,{})})})]}),l.jsx(hn,{path:"/public",element:l.jsx(T6,{})})]})})})})})})}const FI=({semester:t=1})=>{const{role:e}=Oa();return l.jsx(NF,{readOnly:e!=="admin",semester:t})};Ep.createRoot(document.getElementById("root")).render(l.jsx(ds.StrictMode,{children:l.jsx(F6,{})}));
