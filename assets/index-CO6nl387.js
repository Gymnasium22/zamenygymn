function zQ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(r,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function r(s){if(s.ep)return;s.ep=!0;const A=n(s);fetch(s.href,A)}})();function J_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X_={exports:{}},Ff={},Y_={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=Symbol.for("react.element"),$Q=Symbol.for("react.portal"),WQ=Symbol.for("react.fragment"),qQ=Symbol.for("react.strict_mode"),JQ=Symbol.for("react.profiler"),XQ=Symbol.for("react.provider"),YQ=Symbol.for("react.context"),ZQ=Symbol.for("react.forward_ref"),ek=Symbol.for("react.suspense"),tk=Symbol.for("react.memo"),nk=Symbol.for("react.lazy"),PB=Symbol.iterator;function rk(t){return t===null||typeof t!="object"?null:(t=PB&&t[PB]||t["@@iterator"],typeof t=="function"?t:null)}var Z_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eE=Object.assign,tE={};function Ha(t,e,n){this.props=t,this.context=e,this.refs=tE,this.updater=n||Z_}Ha.prototype.isReactComponent={};Ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nE(){}nE.prototype=Ha.prototype;function pw(t,e,n){this.props=t,this.context=e,this.refs=tE,this.updater=n||Z_}var mw=pw.prototype=new nE;mw.constructor=pw;eE(mw,Ha.prototype);mw.isPureReactComponent=!0;var DB=Array.isArray,rE=Object.prototype.hasOwnProperty,ww={current:null},sE={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var r,s={},A=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)rE.call(e,r)&&!sE.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:fu,type:t,key:A,ref:i,props:s,_owner:ww.current}}function sk(t,e){return{$$typeof:fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vw(t){return typeof t=="object"&&t!==null&&t.$$typeof===fu}function Ak(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LB=/\/+/g;function Yg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ak(""+t.key):e.toString(36)}function qd(t,e,n,r,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case fu:case $Q:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+Yg(i,0):r,DB(s)?(n="",t!=null&&(n=t.replace(LB,"$&/")+"/"),qd(s,e,n,"",function(c){return c})):s!=null&&(vw(s)&&(s=sk(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(LB,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",DB(t))for(var o=0;o<t.length;o++){A=t[o];var a=r+Yg(A,o);i+=qd(A,e,n,a,s)}else if(a=rk(t),typeof a=="function")for(t=a.call(t),o=0;!(A=t.next()).done;)A=A.value,a=r+Yg(A,o++),i+=qd(A,e,n,a,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function td(t,e,n){if(t==null)return t;var r=[],s=0;return qd(t,r,"","",function(A){return e.call(n,A,s++)}),r}function ik(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nr={current:null},Jd={transition:null},ok={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:ww};function iE(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:td,forEach:function(t,e,n){td(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return td(t,function(){e++}),e},toArray:function(t){return td(t,function(e){return e})||[]},only:function(t){if(!vw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Ha;rt.Fragment=WQ;rt.Profiler=JQ;rt.PureComponent=pw;rt.StrictMode=qQ;rt.Suspense=ek;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ok;rt.act=iE;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=eE({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=ww.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)rE.call(e,a)&&!sE.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:fu,type:t.type,key:s,ref:A,props:r,_owner:i}};rt.createContext=function(t){return t={$$typeof:YQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XQ,_context:t},t.Consumer=t};rt.createElement=AE;rt.createFactory=function(t){var e=AE.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:ZQ,render:t}};rt.isValidElement=vw;rt.lazy=function(t){return{$$typeof:nk,_payload:{_status:-1,_result:t},_init:ik}};rt.memo=function(t,e){return{$$typeof:tk,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=Jd.transition;Jd.transition={};try{t()}finally{Jd.transition=e}};rt.unstable_act=iE;rt.useCallback=function(t,e){return nr.current.useCallback(t,e)};rt.useContext=function(t){return nr.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return nr.current.useDeferredValue(t)};rt.useEffect=function(t,e){return nr.current.useEffect(t,e)};rt.useId=function(){return nr.current.useId()};rt.useImperativeHandle=function(t,e,n){return nr.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return nr.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return nr.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return nr.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return nr.current.useReducer(t,e,n)};rt.useRef=function(t){return nr.current.useRef(t)};rt.useState=function(t){return nr.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return nr.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return nr.current.useTransition()};rt.version="18.3.1";Y_.exports=rt;var k=Y_.exports;const Qi=J_(k),ak=zQ({__proto__:null,default:Qi},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk=k,ck=Symbol.for("react.element"),uk=Symbol.for("react.fragment"),dk=Object.prototype.hasOwnProperty,hk=lk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fk={key:!0,ref:!0,__self:!0,__source:!0};function oE(t,e,n){var r,s={},A=null,i=null;n!==void 0&&(A=""+n),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)dk.call(e,r)&&!fk.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ck,type:t,key:A,ref:i,props:s,_owner:hk.current}}Ff.Fragment=uk;Ff.jsx=oE;Ff.jsxs=oE;X_.exports=Ff;var l=X_.exports,hm={},aE={exports:{}},br={},lE={exports:{}},cE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,Q){var V=te.length;te.push(Q);e:for(;0<V;){var z=V-1>>>1,Z=te[z];if(0<s(Z,Q))te[z]=Q,te[V]=Z,V=z;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var Q=te[0],V=te.pop();if(V!==Q){te[0]=V;e:for(var z=0,Z=te.length,ne=Z>>>1;z<ne;){var Re=2*(z+1)-1,Ce=te[Re],He=Re+1,xe=te[He];if(0>s(Ce,V))He<Z&&0>s(xe,Ce)?(te[z]=xe,te[He]=V,z=He):(te[z]=Ce,te[Re]=V,z=Re);else if(He<Z&&0>s(xe,V))te[z]=xe,te[He]=V,z=He;else break e}}return Q}function s(te,Q){var V=te.sortIndex-Q.sortIndex;return V!==0?V:te.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],c=[],d=1,h=null,f=3,m=!1,w=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(te){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=te)r(c),Q.sortIndex=Q.expirationTime,e(a,Q);else break;Q=n(c)}}function S(te){if(y=!1,I(te),!w)if(n(a)!==null)w=!0,et(U);else{var Q=n(c);Q!==null&&Le(S,Q.startTime-te)}}function U(te,Q){w=!1,y&&(y=!1,C(x),x=-1),m=!0;var V=f;try{for(I(Q),h=n(a);h!==null&&(!(h.expirationTime>Q)||te&&!R());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var Z=z(h.expirationTime<=Q);Q=t.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(a)&&r(a),I(Q)}else r(a);h=n(a)}if(h!==null)var ne=!0;else{var Re=n(c);Re!==null&&Le(S,Re.startTime-Q),ne=!1}return ne}finally{h=null,f=V,m=!1}}var N=!1,B=null,x=-1,_=5,F=-1;function R(){return!(t.unstable_now()-F<_)}function L(){if(B!==null){var te=t.unstable_now();F=te;var Q=!0;try{Q=B(!0,te)}finally{Q?b():(N=!1,B=null)}}else N=!1}var b;if(typeof v=="function")b=function(){v(L)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Ve=Oe.port2;Oe.port1.onmessage=L,b=function(){Ve.postMessage(null)}}else b=function(){T(L,0)};function et(te){B=te,N||(N=!0,b())}function Le(te,Q){x=T(function(){te(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,et(U))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(te){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var V=f;f=Q;try{return te()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,Q){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var V=f;f=te;try{return Q()}finally{f=V}},t.unstable_scheduleCallback=function(te,Q,V){var z=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?z+V:z):V=z,te){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=V+Z,te={id:d++,callback:Q,priorityLevel:te,startTime:V,expirationTime:Z,sortIndex:-1},V>z?(te.sortIndex=V,e(c,te),n(a)===null&&te===n(c)&&(y?(C(x),x=-1):y=!0,Le(S,V-z))):(te.sortIndex=Z,e(a,te),w||m||(w=!0,et(U))),te},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(te){var Q=f;return function(){var V=f;f=Q;try{return te.apply(this,arguments)}finally{f=V}}}})(cE);lE.exports=cE;var gk=lE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=k,_r=gk;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uE=new Set,Cc={};function uo(t,e){ma(t,e),ma(t+"Capture",e)}function ma(t,e){for(Cc[t]=e,t=0;t<e.length;t++)uE.add(e[t])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,mk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OB={},MB={};function wk(t){return fm.call(MB,t)?!0:fm.call(OB,t)?!1:mk.test(t)?MB[t]=!0:(OB[t]=!0,!1)}function vk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yk(t,e,n,r){if(e===null||typeof e>"u"||vk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rr(t,e,n,r,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var Qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qn[t]=new rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qn[e]=new rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qn[t]=new rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qn[t]=new rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qn[t]=new rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qn[t]=new rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qn[t]=new rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qn[t]=new rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qn[t]=new rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var yw=/[\-:]([a-z])/g;function Bw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yw,Bw);Qn[e]=new rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yw,Bw);Qn[e]=new rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yw,Bw);Qn[e]=new rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qn[t]=new rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Qn.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qn[t]=new rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function xw(t,e,n,r){var s=Qn.hasOwnProperty(e)?Qn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yk(e,n,s,r)&&(n=null),r||s===null?wk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Js=pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nd=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),Cw=Symbol.for("react.strict_mode"),gm=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Iw=Symbol.for("react.forward_ref"),pm=Symbol.for("react.suspense"),mm=Symbol.for("react.suspense_list"),_w=Symbol.for("react.memo"),pA=Symbol.for("react.lazy"),fE=Symbol.for("react.offscreen"),VB=Symbol.iterator;function pl(t){return t===null||typeof t!="object"?null:(t=VB&&t[VB]||t["@@iterator"],typeof t=="function"?t:null)}var Ht=Object.assign,Zg;function Pl(t){if(Zg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zg=e&&e[1]||""}return`
`+Zg+t}var ep=!1;function tp(t,e){if(!t||ep)return"";ep=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=r.stack.split(`
`),i=s.length-1,o=A.length-1;1<=i&&0<=o&&s[i]!==A[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==A[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==A[o]){var a=`
`+s[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{ep=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pl(t):""}function Bk(t){switch(t.tag){case 5:return Pl(t.type);case 16:return Pl("Lazy");case 13:return Pl("Suspense");case 19:return Pl("SuspenseList");case 0:case 2:case 15:return t=tp(t.type,!1),t;case 11:return t=tp(t.type.render,!1),t;case 1:return t=tp(t.type,!0),t;default:return""}}function wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case Ko:return"Portal";case gm:return"Profiler";case Cw:return"StrictMode";case pm:return"Suspense";case mm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hE:return(t.displayName||"Context")+".Consumer";case dE:return(t._context.displayName||"Context")+".Provider";case Iw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _w:return e=t.displayName||null,e!==null?e:wm(t.type)||"Memo";case pA:e=t._payload,t=t._init;try{return wm(t(e))}catch{}}return null}function xk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wm(e);case 8:return e===Cw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function GA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ck(t){var e=gE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,A=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rd(t){t._valueTracker||(t._valueTracker=Ck(t))}function pE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=gE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vm(t,e){var n=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=GA(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mE(t,e){e=e.checked,e!=null&&xw(t,"checked",e,!1)}function ym(t,e){mE(t,e);var n=GA(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bm(t,e.type,GA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bm(t,e,n){(e!=="number"||Ch(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Dl=Array.isArray;function sa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+GA(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Dl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:GA(n)}}function wE(t,e){var n=GA(e.value),r=GA(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function GB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sd,yE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sd=sd||document.createElement("div"),sd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ic(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ec={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ik=["Webkit","ms","Moz","O"];Object.keys(ec).forEach(function(t){Ik.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ec[e]=ec[t]})});function BE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ec.hasOwnProperty(t)&&ec[t]?(""+e).trim():e+"px"}function xE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=BE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _k=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Im(t,e){if(e){if(_k[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function _m(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Em=null;function Ew(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bm=null,Aa=null,ia=null;function zB(t){if(t=mu(t)){if(typeof bm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Rf(e),bm(t.stateNode,t.type,e))}}function CE(t){Aa?ia?ia.push(t):ia=[t]:Aa=t}function IE(){if(Aa){var t=Aa,e=ia;if(ia=Aa=null,zB(t),e)for(t=0;t<e.length;t++)zB(e[t])}}function _E(t,e){return t(e)}function EE(){}var np=!1;function bE(t,e,n){if(np)return t(e,n);np=!0;try{return _E(t,e,n)}finally{np=!1,(Aa!==null||ia!==null)&&(EE(),IE())}}function _c(t,e){var n=t.stateNode;if(n===null)return null;var r=Rf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Tm=!1;if(Vs)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Tm=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Tm=!1}function Ek(t,e,n,r,s,A,i,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var tc=!1,Ih=null,_h=!1,Fm=null,bk={onError:function(t){tc=!0,Ih=t}};function Tk(t,e,n,r,s,A,i,o,a){tc=!1,Ih=null,Ek.apply(bk,arguments)}function Fk(t,e,n,r,s,A,i,o,a){if(Tk.apply(this,arguments),tc){if(tc){var c=Ih;tc=!1,Ih=null}else throw Error(Y(198));_h||(_h=!0,Fm=c)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $B(t){if(ho(t)!==t)throw Error(Y(188))}function Uk(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var A=s.alternate;if(A===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===n)return $B(s),t;if(A===r)return $B(s),e;A=A.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=A;else{for(var i=!1,o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i){for(o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function FE(t){return t=Uk(t),t!==null?UE(t):null}function UE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UE(t);if(e!==null)return e;t=t.sibling}return null}var SE=_r.unstable_scheduleCallback,WB=_r.unstable_cancelCallback,Sk=_r.unstable_shouldYield,Qk=_r.unstable_requestPaint,tn=_r.unstable_now,kk=_r.unstable_getCurrentPriorityLevel,bw=_r.unstable_ImmediatePriority,QE=_r.unstable_UserBlockingPriority,Eh=_r.unstable_NormalPriority,Rk=_r.unstable_LowPriority,kE=_r.unstable_IdlePriority,Uf=null,fs=null;function Nk(t){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(Uf,t,void 0,(t.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:Lk,Pk=Math.log,Dk=Math.LN2;function Lk(t){return t>>>=0,t===0?32:31-(Pk(t)/Dk|0)|0}var Ad=64,id=4194304;function Ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,A=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~s;o!==0?r=Ll(o):(A&=i,A!==0&&(r=Ll(A)))}else i=n&~s,i!==0?r=Ll(i):A!==0&&(r=Ll(A));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qr(e),s=1<<n,r|=t[n],e&=~s;return r}function Ok(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-qr(A),o=1<<i,a=s[i];a===-1?(!(o&n)||o&r)&&(s[i]=Ok(o,e)):a<=e&&(t.expiredLanes|=o),A&=~o}}function Um(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RE(){var t=Ad;return Ad<<=1,!(Ad&4194240)&&(Ad=64),t}function rp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qr(e),t[e]=n}function Vk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qr(n),A=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~A}}function Tw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var yt=0;function NE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var PE,Fw,DE,LE,OE,Sm=!1,od=[],QA=null,kA=null,RA=null,Ec=new Map,bc=new Map,vA=[],jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qB(t,e){switch(t){case"focusin":case"focusout":QA=null;break;case"dragenter":case"dragleave":kA=null;break;case"mouseover":case"mouseout":RA=null;break;case"pointerover":case"pointerout":Ec.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(e.pointerId)}}function wl(t,e,n,r,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:A,targetContainers:[s]},e!==null&&(e=mu(e),e!==null&&Fw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Hk(t,e,n,r,s){switch(e){case"focusin":return QA=wl(QA,t,e,n,r,s),!0;case"dragenter":return kA=wl(kA,t,e,n,r,s),!0;case"mouseover":return RA=wl(RA,t,e,n,r,s),!0;case"pointerover":var A=s.pointerId;return Ec.set(A,wl(Ec.get(A)||null,t,e,n,r,s)),!0;case"gotpointercapture":return A=s.pointerId,bc.set(A,wl(bc.get(A)||null,t,e,n,r,s)),!0}return!1}function ME(t){var e=ki(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=TE(n),e!==null){t.blockedOn=e,OE(t.priority,function(){DE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Em=r,n.target.dispatchEvent(r),Em=null}else return e=mu(n),e!==null&&Fw(e),t.blockedOn=n,!1;e.shift()}return!0}function JB(t,e,n){Xd(t)&&n.delete(e)}function Kk(){Sm=!1,QA!==null&&Xd(QA)&&(QA=null),kA!==null&&Xd(kA)&&(kA=null),RA!==null&&Xd(RA)&&(RA=null),Ec.forEach(JB),bc.forEach(JB)}function vl(t,e){t.blockedOn===e&&(t.blockedOn=null,Sm||(Sm=!0,_r.unstable_scheduleCallback(_r.unstable_NormalPriority,Kk)))}function Tc(t){function e(s){return vl(s,t)}if(0<od.length){vl(od[0],t);for(var n=1;n<od.length;n++){var r=od[n];r.blockedOn===t&&(r.blockedOn=null)}}for(QA!==null&&vl(QA,t),kA!==null&&vl(kA,t),RA!==null&&vl(RA,t),Ec.forEach(e),bc.forEach(e),n=0;n<vA.length;n++)r=vA[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vA.length&&(n=vA[0],n.blockedOn===null);)ME(n),n.blockedOn===null&&vA.shift()}var oa=Js.ReactCurrentBatchConfig,Th=!0;function Gk(t,e,n,r){var s=yt,A=oa.transition;oa.transition=null;try{yt=1,Uw(t,e,n,r)}finally{yt=s,oa.transition=A}}function zk(t,e,n,r){var s=yt,A=oa.transition;oa.transition=null;try{yt=4,Uw(t,e,n,r)}finally{yt=s,oa.transition=A}}function Uw(t,e,n,r){if(Th){var s=Qm(t,e,n,r);if(s===null)hp(t,e,r,Fh,n),qB(t,r);else if(Hk(s,t,e,n,r))r.stopPropagation();else if(qB(t,r),e&4&&-1<jk.indexOf(t)){for(;s!==null;){var A=mu(s);if(A!==null&&PE(A),A=Qm(t,e,n,r),A===null&&hp(t,e,r,Fh,n),A===s)break;s=A}s!==null&&r.stopPropagation()}else hp(t,e,r,null,n)}}var Fh=null;function Qm(t,e,n,r){if(Fh=null,t=Ew(r),t=ki(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fh=t,null}function VE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kk()){case bw:return 1;case QE:return 4;case Eh:case Rk:return 16;case kE:return 536870912;default:return 16}default:return 16}}var CA=null,Sw=null,Yd=null;function jE(){if(Yd)return Yd;var t,e=Sw,n=e.length,r,s="value"in CA?CA.value:CA.textContent,A=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[A-r];r++);return Yd=s.slice(t,1<r?1-r:void 0)}function Zd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ad(){return!0}function XB(){return!1}function Tr(t){function e(n,r,s,A,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(A):A[o]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ad:XB,this.isPropagationStopped=XB,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qw=Tr(Ka),pu=Ht({},Ka,{view:0,detail:0}),$k=Tr(pu),sp,Ap,yl,Sf=Ht({},pu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(sp=t.screenX-yl.screenX,Ap=t.screenY-yl.screenY):Ap=sp=0,yl=t),sp)},movementY:function(t){return"movementY"in t?t.movementY:Ap}}),YB=Tr(Sf),Wk=Ht({},Sf,{dataTransfer:0}),qk=Tr(Wk),Jk=Ht({},pu,{relatedTarget:0}),ip=Tr(Jk),Xk=Ht({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Yk=Tr(Xk),Zk=Ht({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),e2=Tr(Zk),t2=Ht({},Ka,{data:0}),ZB=Tr(t2),n2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=s2[t])?!!e[t]:!1}function kw(){return A2}var i2=Ht({},pu,{key:function(t){if(t.key){var e=n2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?r2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kw,charCode:function(t){return t.type==="keypress"?Zd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o2=Tr(i2),a2=Ht({},Sf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=Tr(a2),l2=Ht({},pu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kw}),c2=Tr(l2),u2=Ht({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),d2=Tr(u2),h2=Ht({},Sf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f2=Tr(h2),g2=[9,13,27,32],Rw=Vs&&"CompositionEvent"in window,nc=null;Vs&&"documentMode"in document&&(nc=document.documentMode);var p2=Vs&&"TextEvent"in window&&!nc,HE=Vs&&(!Rw||nc&&8<nc&&11>=nc),tx=" ",nx=!1;function KE(t,e){switch(t){case"keyup":return g2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zo=!1;function m2(t,e){switch(t){case"compositionend":return GE(e);case"keypress":return e.which!==32?null:(nx=!0,tx);case"textInput":return t=e.data,t===tx&&nx?null:t;default:return null}}function w2(t,e){if(zo)return t==="compositionend"||!Rw&&KE(t,e)?(t=jE(),Yd=Sw=CA=null,zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HE&&e.locale!=="ko"?null:e.data;default:return null}}var v2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v2[t.type]:e==="textarea"}function zE(t,e,n,r){CE(r),e=Uh(e,"onChange"),0<e.length&&(n=new Qw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rc=null,Fc=null;function y2(t){rb(t,0)}function Qf(t){var e=qo(t);if(pE(e))return t}function B2(t,e){if(t==="change")return e}var $E=!1;if(Vs){var op;if(Vs){var ap="oninput"in document;if(!ap){var sx=document.createElement("div");sx.setAttribute("oninput","return;"),ap=typeof sx.oninput=="function"}op=ap}else op=!1;$E=op&&(!document.documentMode||9<document.documentMode)}function Ax(){rc&&(rc.detachEvent("onpropertychange",WE),Fc=rc=null)}function WE(t){if(t.propertyName==="value"&&Qf(Fc)){var e=[];zE(e,Fc,t,Ew(t)),bE(y2,e)}}function x2(t,e,n){t==="focusin"?(Ax(),rc=e,Fc=n,rc.attachEvent("onpropertychange",WE)):t==="focusout"&&Ax()}function C2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qf(Fc)}function I2(t,e){if(t==="click")return Qf(e)}function _2(t,e){if(t==="input"||t==="change")return Qf(e)}function E2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yr=typeof Object.is=="function"?Object.is:E2;function Uc(t,e){if(Yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fm.call(e,s)||!Yr(t[s],e[s]))return!1}return!0}function ix(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ox(t,e){var n=ix(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ix(n)}}function qE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JE(){for(var t=window,e=Ch();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ch(t.document)}return e}function Nw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b2(t){var e=JE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qE(n.ownerDocument.documentElement,n)){if(r!==null&&Nw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,A=Math.min(r.start,s);r=r.end===void 0?A:Math.min(r.end,s),!t.extend&&A>r&&(s=r,r=A,A=s),s=ox(n,A);var i=ox(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T2=Vs&&"documentMode"in document&&11>=document.documentMode,$o=null,km=null,sc=null,Rm=!1;function ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rm||$o==null||$o!==Ch(r)||(r=$o,"selectionStart"in r&&Nw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sc&&Uc(sc,r)||(sc=r,r=Uh(km,"onSelect"),0<r.length&&(e=new Qw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$o)))}function ld(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},lp={},XE={};Vs&&(XE=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function kf(t){if(lp[t])return lp[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XE)return lp[t]=e[n];return t}var YE=kf("animationend"),ZE=kf("animationiteration"),eb=kf("animationstart"),tb=kf("transitionend"),nb=new Map,lx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,e){nb.set(t,e),uo(e,[t])}for(var cp=0;cp<lx.length;cp++){var up=lx[cp],F2=up.toLowerCase(),U2=up[0].toUpperCase()+up.slice(1);Ai(F2,"on"+U2)}Ai(YE,"onAnimationEnd");Ai(ZE,"onAnimationIteration");Ai(eb,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(tb,"onTransitionEnd");ma("onMouseEnter",["mouseout","mouseover"]);ma("onMouseLeave",["mouseout","mouseover"]);ma("onPointerEnter",["pointerout","pointerover"]);ma("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function cx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Fk(r,e,void 0,t),t.currentTarget=null}function rb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var A=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==A&&s.isPropagationStopped())break e;cx(s,o,c),A=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,c=o.currentTarget,o=o.listener,a!==A&&s.isPropagationStopped())break e;cx(s,o,c),A=a}}}if(_h)throw t=Fm,_h=!1,Fm=null,t}function Ft(t,e){var n=e[Om];n===void 0&&(n=e[Om]=new Set);var r=t+"__bubble";n.has(r)||(sb(e,t,2,!1),n.add(r))}function dp(t,e,n){var r=0;e&&(r|=4),sb(n,t,r,e)}var cd="_reactListening"+Math.random().toString(36).slice(2);function Sc(t){if(!t[cd]){t[cd]=!0,uE.forEach(function(n){n!=="selectionchange"&&(S2.has(n)||dp(n,!1,t),dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cd]||(e[cd]=!0,dp("selectionchange",!1,e))}}function sb(t,e,n,r){switch(VE(e)){case 1:var s=Gk;break;case 4:s=zk;break;default:s=Uw}n=s.bind(null,e,n,t),s=void 0,!Tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hp(t,e,n,r,s){var A=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;i=i.return}for(;o!==null;){if(i=ki(o),i===null)return;if(a=i.tag,a===5||a===6){r=A=i;continue e}o=o.parentNode}}r=r.return}bE(function(){var c=A,d=Ew(n),h=[];e:{var f=nb.get(t);if(f!==void 0){var m=Qw,w=t;switch(t){case"keypress":if(Zd(n)===0)break e;case"keydown":case"keyup":m=o2;break;case"focusin":w="focus",m=ip;break;case"focusout":w="blur",m=ip;break;case"beforeblur":case"afterblur":m=ip;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=YB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=qk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=c2;break;case YE:case ZE:case eb:m=Yk;break;case tb:m=d2;break;case"scroll":m=$k;break;case"wheel":m=f2;break;case"copy":case"cut":case"paste":m=e2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ex}var y=(e&4)!==0,T=!y&&t==="scroll",C=y?f!==null?f+"Capture":null:f;y=[];for(var v=c,I;v!==null;){I=v;var S=I.stateNode;if(I.tag===5&&S!==null&&(I=S,C!==null&&(S=_c(v,C),S!=null&&y.push(Qc(v,S,I)))),T)break;v=v.return}0<y.length&&(f=new m(f,w,null,n,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Em&&(w=n.relatedTarget||n.fromElement)&&(ki(w)||w[js]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=c,w=w?ki(w):null,w!==null&&(T=ho(w),w!==T||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=c),m!==w)){if(y=YB,S="onMouseLeave",C="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=ex,S="onPointerLeave",C="onPointerEnter",v="pointer"),T=m==null?f:qo(m),I=w==null?f:qo(w),f=new y(S,v+"leave",m,n,d),f.target=T,f.relatedTarget=I,S=null,ki(d)===c&&(y=new y(C,v+"enter",w,n,d),y.target=I,y.relatedTarget=T,S=y),T=S,m&&w)t:{for(y=m,C=w,v=0,I=y;I;I=_o(I))v++;for(I=0,S=C;S;S=_o(S))I++;for(;0<v-I;)y=_o(y),v--;for(;0<I-v;)C=_o(C),I--;for(;v--;){if(y===C||C!==null&&y===C.alternate)break t;y=_o(y),C=_o(C)}y=null}else y=null;m!==null&&ux(h,f,m,y,!1),w!==null&&T!==null&&ux(h,T,w,y,!0)}}e:{if(f=c?qo(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var U=B2;else if(rx(f))if($E)U=_2;else{U=C2;var N=x2}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=I2);if(U&&(U=U(t,c))){zE(h,U,n,d);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Bm(f,"number",f.value)}switch(N=c?qo(c):window,t){case"focusin":(rx(N)||N.contentEditable==="true")&&($o=N,km=c,sc=null);break;case"focusout":sc=km=$o=null;break;case"mousedown":Rm=!0;break;case"contextmenu":case"mouseup":case"dragend":Rm=!1,ax(h,n,d);break;case"selectionchange":if(T2)break;case"keydown":case"keyup":ax(h,n,d)}var B;if(Rw)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else zo?KE(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(HE&&n.locale!=="ko"&&(zo||x!=="onCompositionStart"?x==="onCompositionEnd"&&zo&&(B=jE()):(CA=d,Sw="value"in CA?CA.value:CA.textContent,zo=!0)),N=Uh(c,x),0<N.length&&(x=new ZB(x,t,null,n,d),h.push({event:x,listeners:N}),B?x.data=B:(B=GE(n),B!==null&&(x.data=B)))),(B=p2?m2(t,n):w2(t,n))&&(c=Uh(c,"onBeforeInput"),0<c.length&&(d=new ZB("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=B))}rb(h,e)})}function Qc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Uh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=_c(t,n),A!=null&&r.unshift(Qc(t,A,s)),A=_c(t,e),A!=null&&r.push(Qc(t,A,s))),t=t.return}return r}function _o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ux(t,e,n,r,s){for(var A=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,c=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&c!==null&&(o=c,s?(a=_c(n,A),a!=null&&i.unshift(Qc(n,a,o))):s||(a=_c(n,A),a!=null&&i.push(Qc(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var Q2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function dx(t){return(typeof t=="string"?t:""+t).replace(Q2,`
`).replace(k2,"")}function ud(t,e,n){if(e=dx(e),dx(t)!==e&&n)throw Error(Y(425))}function Sh(){}var Nm=null,Pm=null;function Dm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lm=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,hx=typeof Promise=="function"?Promise:void 0,N2=typeof queueMicrotask=="function"?queueMicrotask:typeof hx<"u"?function(t){return hx.resolve(null).then(t).catch(P2)}:Lm;function P2(t){setTimeout(function(){throw t})}function fp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Tc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Tc(e)}function NA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),ss="__reactFiber$"+Ga,kc="__reactProps$"+Ga,js="__reactContainer$"+Ga,Om="__reactEvents$"+Ga,D2="__reactListeners$"+Ga,L2="__reactHandles$"+Ga;function ki(t){var e=t[ss];if(e)return e;for(var n=t.parentNode;n;){if(e=n[js]||n[ss]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fx(t);t!==null;){if(n=t[ss])return n;t=fx(t)}return e}t=n,n=t.parentNode}return null}function mu(t){return t=t[ss]||t[js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Rf(t){return t[kc]||null}var Mm=[],Jo=-1;function ii(t){return{current:t}}function St(t){0>Jo||(t.current=Mm[Jo],Mm[Jo]=null,Jo--)}function Et(t,e){Jo++,Mm[Jo]=t.current,t.current=e}var zA={},Kn=ii(zA),dr=ii(!1),$i=zA;function wa(t,e){var n=t.type.contextTypes;if(!n)return zA;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in n)s[A]=e[A];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hr(t){return t=t.childContextTypes,t!=null}function Qh(){St(dr),St(Kn)}function gx(t,e,n){if(Kn.current!==zA)throw Error(Y(168));Et(Kn,e),Et(dr,n)}function Ab(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,xk(t)||"Unknown",s));return Ht({},n,r)}function kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zA,$i=Kn.current,Et(Kn,t),Et(dr,dr.current),!0}function px(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=Ab(t,e,$i),r.__reactInternalMemoizedMergedChildContext=t,St(dr),St(Kn),Et(Kn,t)):St(dr),Et(dr,n)}var Us=null,Nf=!1,gp=!1;function ib(t){Us===null?Us=[t]:Us.push(t)}function O2(t){Nf=!0,ib(t)}function oi(){if(!gp&&Us!==null){gp=!0;var t=0,e=yt;try{var n=Us;for(yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Us=null,Nf=!1}catch(s){throw Us!==null&&(Us=Us.slice(t+1)),SE(bw,oi),s}finally{yt=e,gp=!1}}return null}var Xo=[],Yo=0,Rh=null,Nh=0,Ur=[],Sr=0,Wi=null,Ss=1,Qs="";function xi(t,e){Xo[Yo++]=Nh,Xo[Yo++]=Rh,Rh=t,Nh=e}function ob(t,e,n){Ur[Sr++]=Ss,Ur[Sr++]=Qs,Ur[Sr++]=Wi,Wi=t;var r=Ss;t=Qs;var s=32-qr(r)-1;r&=~(1<<s),n+=1;var A=32-qr(e)+s;if(30<A){var i=s-s%5;A=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ss=1<<32-qr(e)+s|n<<s|r,Qs=A+t}else Ss=1<<A|n<<s|r,Qs=t}function Pw(t){t.return!==null&&(xi(t,1),ob(t,1,0))}function Dw(t){for(;t===Rh;)Rh=Xo[--Yo],Xo[Yo]=null,Nh=Xo[--Yo],Xo[Yo]=null;for(;t===Wi;)Wi=Ur[--Sr],Ur[Sr]=null,Qs=Ur[--Sr],Ur[Sr]=null,Ss=Ur[--Sr],Ur[Sr]=null}var Ir=null,xr=null,Nt=!1,Wr=null;function ab(t,e){var n=kr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ir=t,xr=NA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ir=t,xr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wi!==null?{id:Ss,overflow:Qs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ir=t,xr=null,!0):!1;default:return!1}}function Vm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jm(t){if(Nt){var e=xr;if(e){var n=e;if(!mx(t,e)){if(Vm(t))throw Error(Y(418));e=NA(n.nextSibling);var r=Ir;e&&mx(t,e)?ab(r,n):(t.flags=t.flags&-4097|2,Nt=!1,Ir=t)}}else{if(Vm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Nt=!1,Ir=t}}}function wx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ir=t}function dd(t){if(t!==Ir)return!1;if(!Nt)return wx(t),Nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dm(t.type,t.memoizedProps)),e&&(e=xr)){if(Vm(t))throw lb(),Error(Y(418));for(;e;)ab(t,e),e=NA(e.nextSibling)}if(wx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xr=NA(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xr=null}}else xr=Ir?NA(t.stateNode.nextSibling):null;return!0}function lb(){for(var t=xr;t;)t=NA(t.nextSibling)}function va(){xr=Ir=null,Nt=!1}function Lw(t){Wr===null?Wr=[t]:Wr.push(t)}var M2=Js.ReactCurrentBatchConfig;function Bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var o=s.refs;i===null?delete o[A]:o[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function hd(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vx(t){var e=t._init;return e(t._payload)}function cb(t){function e(C,v){if(t){var I=C.deletions;I===null?(C.deletions=[v],C.flags|=16):I.push(v)}}function n(C,v){if(!t)return null;for(;v!==null;)e(C,v),v=v.sibling;return null}function r(C,v){for(C=new Map;v!==null;)v.key!==null?C.set(v.key,v):C.set(v.index,v),v=v.sibling;return C}function s(C,v){return C=OA(C,v),C.index=0,C.sibling=null,C}function A(C,v,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<v?(C.flags|=2,v):I):(C.flags|=2,v)):(C.flags|=1048576,v)}function i(C){return t&&C.alternate===null&&(C.flags|=2),C}function o(C,v,I,S){return v===null||v.tag!==6?(v=xp(I,C.mode,S),v.return=C,v):(v=s(v,I),v.return=C,v)}function a(C,v,I,S){var U=I.type;return U===Go?d(C,v,I.props.children,S,I.key):v!==null&&(v.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===pA&&vx(U)===v.type)?(S=s(v,I.props),S.ref=Bl(C,v,I),S.return=C,S):(S=ih(I.type,I.key,I.props,null,C.mode,S),S.ref=Bl(C,v,I),S.return=C,S)}function c(C,v,I,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==I.containerInfo||v.stateNode.implementation!==I.implementation?(v=Cp(I,C.mode,S),v.return=C,v):(v=s(v,I.children||[]),v.return=C,v)}function d(C,v,I,S,U){return v===null||v.tag!==7?(v=Vi(I,C.mode,S,U),v.return=C,v):(v=s(v,I),v.return=C,v)}function h(C,v,I){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xp(""+v,C.mode,I),v.return=C,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nd:return I=ih(v.type,v.key,v.props,null,C.mode,I),I.ref=Bl(C,null,v),I.return=C,I;case Ko:return v=Cp(v,C.mode,I),v.return=C,v;case pA:var S=v._init;return h(C,S(v._payload),I)}if(Dl(v)||pl(v))return v=Vi(v,C.mode,I,null),v.return=C,v;hd(C,v)}return null}function f(C,v,I,S){var U=v!==null?v.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return U!==null?null:o(C,v,""+I,S);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case nd:return I.key===U?a(C,v,I,S):null;case Ko:return I.key===U?c(C,v,I,S):null;case pA:return U=I._init,f(C,v,U(I._payload),S)}if(Dl(I)||pl(I))return U!==null?null:d(C,v,I,S,null);hd(C,I)}return null}function m(C,v,I,S,U){if(typeof S=="string"&&S!==""||typeof S=="number")return C=C.get(I)||null,o(v,C,""+S,U);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case nd:return C=C.get(S.key===null?I:S.key)||null,a(v,C,S,U);case Ko:return C=C.get(S.key===null?I:S.key)||null,c(v,C,S,U);case pA:var N=S._init;return m(C,v,I,N(S._payload),U)}if(Dl(S)||pl(S))return C=C.get(I)||null,d(v,C,S,U,null);hd(v,S)}return null}function w(C,v,I,S){for(var U=null,N=null,B=v,x=v=0,_=null;B!==null&&x<I.length;x++){B.index>x?(_=B,B=null):_=B.sibling;var F=f(C,B,I[x],S);if(F===null){B===null&&(B=_);break}t&&B&&F.alternate===null&&e(C,B),v=A(F,v,x),N===null?U=F:N.sibling=F,N=F,B=_}if(x===I.length)return n(C,B),Nt&&xi(C,x),U;if(B===null){for(;x<I.length;x++)B=h(C,I[x],S),B!==null&&(v=A(B,v,x),N===null?U=B:N.sibling=B,N=B);return Nt&&xi(C,x),U}for(B=r(C,B);x<I.length;x++)_=m(B,C,x,I[x],S),_!==null&&(t&&_.alternate!==null&&B.delete(_.key===null?x:_.key),v=A(_,v,x),N===null?U=_:N.sibling=_,N=_);return t&&B.forEach(function(R){return e(C,R)}),Nt&&xi(C,x),U}function y(C,v,I,S){var U=pl(I);if(typeof U!="function")throw Error(Y(150));if(I=U.call(I),I==null)throw Error(Y(151));for(var N=U=null,B=v,x=v=0,_=null,F=I.next();B!==null&&!F.done;x++,F=I.next()){B.index>x?(_=B,B=null):_=B.sibling;var R=f(C,B,F.value,S);if(R===null){B===null&&(B=_);break}t&&B&&R.alternate===null&&e(C,B),v=A(R,v,x),N===null?U=R:N.sibling=R,N=R,B=_}if(F.done)return n(C,B),Nt&&xi(C,x),U;if(B===null){for(;!F.done;x++,F=I.next())F=h(C,F.value,S),F!==null&&(v=A(F,v,x),N===null?U=F:N.sibling=F,N=F);return Nt&&xi(C,x),U}for(B=r(C,B);!F.done;x++,F=I.next())F=m(B,C,x,F.value,S),F!==null&&(t&&F.alternate!==null&&B.delete(F.key===null?x:F.key),v=A(F,v,x),N===null?U=F:N.sibling=F,N=F);return t&&B.forEach(function(L){return e(C,L)}),Nt&&xi(C,x),U}function T(C,v,I,S){if(typeof I=="object"&&I!==null&&I.type===Go&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case nd:e:{for(var U=I.key,N=v;N!==null;){if(N.key===U){if(U=I.type,U===Go){if(N.tag===7){n(C,N.sibling),v=s(N,I.props.children),v.return=C,C=v;break e}}else if(N.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===pA&&vx(U)===N.type){n(C,N.sibling),v=s(N,I.props),v.ref=Bl(C,N,I),v.return=C,C=v;break e}n(C,N);break}else e(C,N);N=N.sibling}I.type===Go?(v=Vi(I.props.children,C.mode,S,I.key),v.return=C,C=v):(S=ih(I.type,I.key,I.props,null,C.mode,S),S.ref=Bl(C,v,I),S.return=C,C=S)}return i(C);case Ko:e:{for(N=I.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===I.containerInfo&&v.stateNode.implementation===I.implementation){n(C,v.sibling),v=s(v,I.children||[]),v.return=C,C=v;break e}else{n(C,v);break}else e(C,v);v=v.sibling}v=Cp(I,C.mode,S),v.return=C,C=v}return i(C);case pA:return N=I._init,T(C,v,N(I._payload),S)}if(Dl(I))return w(C,v,I,S);if(pl(I))return y(C,v,I,S);hd(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,v!==null&&v.tag===6?(n(C,v.sibling),v=s(v,I),v.return=C,C=v):(n(C,v),v=xp(I,C.mode,S),v.return=C,C=v),i(C)):n(C,v)}return T}var ya=cb(!0),ub=cb(!1),Ph=ii(null),Dh=null,Zo=null,Ow=null;function Mw(){Ow=Zo=Dh=null}function Vw(t){var e=Ph.current;St(Ph),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function aa(t,e){Dh=t,Ow=Zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ar=!0),t.firstContext=null)}function Or(t){var e=t._currentValue;if(Ow!==t)if(t={context:t,memoizedValue:e,next:null},Zo===null){if(Dh===null)throw Error(Y(308));Zo=t,Dh.dependencies={lanes:0,firstContext:t}}else Zo=Zo.next=t;return e}var Ri=null;function jw(t){Ri===null?Ri=[t]:Ri.push(t)}function db(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,jw(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hs(t,r)}function Hs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mA=!1;function Hw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ds(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function PA(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hs(t,n)}return s=r.interleaved,s===null?(e.next=e,jw(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hs(t,n)}function eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tw(t,n)}}function yx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,A=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};A===null?s=A=i:A=A.next=i,n=n.next}while(n!==null);A===null?s=A=e:A=A.next=e}else s=A=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lh(t,e,n,r){var s=t.updateQueue;mA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var a=o,c=a.next;a.next=null,i===null?A=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(A!==null){var h=s.baseState;i=0,d=c=a=null,o=A;do{var f=o.lane,m=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var w=t,y=o;switch(f=e,m=n,y.tag){case 1:if(w=y.payload,typeof w=="function"){h=w.call(m,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,f=typeof w=="function"?w.call(m,h,f):w,f==null)break e;h=Ht({},h,f);break e;case 2:mA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,a=h):d=d.next=m,i|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Ji|=i,t.lanes=i,t.memoizedState=h}}function Bx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var wu={},gs=ii(wu),Rc=ii(wu),Nc=ii(wu);function Ni(t){if(t===wu)throw Error(Y(174));return t}function Kw(t,e){switch(Et(Nc,e),Et(Rc,t),Et(gs,wu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cm(e,t)}St(gs),Et(gs,e)}function Ba(){St(gs),St(Rc),St(Nc)}function fb(t){Ni(Nc.current);var e=Ni(gs.current),n=Cm(e,t.type);e!==n&&(Et(Rc,t),Et(gs,n))}function Gw(t){Rc.current===t&&(St(gs),St(Rc))}var Ot=ii(0);function Oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pp=[];function zw(){for(var t=0;t<pp.length;t++)pp[t]._workInProgressVersionPrimary=null;pp.length=0}var th=Js.ReactCurrentDispatcher,mp=Js.ReactCurrentBatchConfig,qi=0,Mt=null,dn=null,yn=null,Mh=!1,Ac=!1,Pc=0,V2=0;function Dn(){throw Error(Y(321))}function $w(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yr(t[n],e[n]))return!1;return!0}function Ww(t,e,n,r,s,A){if(qi=A,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,th.current=t===null||t.memoizedState===null?G2:z2,t=n(r,s),Ac){A=0;do{if(Ac=!1,Pc=0,25<=A)throw Error(Y(301));A+=1,yn=dn=null,e.updateQueue=null,th.current=$2,t=n(r,s)}while(Ac)}if(th.current=Vh,e=dn!==null&&dn.next!==null,qi=0,yn=dn=Mt=null,Mh=!1,e)throw Error(Y(300));return t}function qw(){var t=Pc!==0;return Pc=0,t}function rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Mt.memoizedState=yn=t:yn=yn.next=t,yn}function Mr(){if(dn===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=dn.next;var e=yn===null?Mt.memoizedState:yn.next;if(e!==null)yn=e,dn=t;else{if(t===null)throw Error(Y(310));dn=t,t={memoizedState:dn.memoizedState,baseState:dn.baseState,baseQueue:dn.baseQueue,queue:dn.queue,next:null},yn===null?Mt.memoizedState=yn=t:yn=yn.next=t}return yn}function Dc(t,e){return typeof e=="function"?e(t):e}function wp(t){var e=Mr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=dn,s=r.baseQueue,A=n.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}r.baseQueue=s=A,n.pending=null}if(s!==null){A=s.next,r=r.baseState;var o=i=null,a=null,c=A;do{var d=c.lane;if((qi&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,Mt.lanes|=d,Ji|=d}c=c.next}while(c!==null&&c!==A);a===null?i=r:a.next=o,Yr(r,e.memoizedState)||(ar=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do A=s.lane,Mt.lanes|=A,Ji|=A,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vp(t){var e=Mr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,A=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);Yr(A,e.memoizedState)||(ar=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),n.lastRenderedState=A}return[A,r]}function gb(){}function pb(t,e){var n=Mt,r=Mr(),s=e(),A=!Yr(r.memoizedState,s);if(A&&(r.memoizedState=s,ar=!0),r=r.queue,Jw(vb.bind(null,n,r,t),[t]),r.getSnapshot!==e||A||yn!==null&&yn.memoizedState.tag&1){if(n.flags|=2048,Lc(9,wb.bind(null,n,r,s,e),void 0,null),xn===null)throw Error(Y(349));qi&30||mb(n,e,s)}return s}function mb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wb(t,e,n,r){e.value=n,e.getSnapshot=r,yb(e)&&Bb(t)}function vb(t,e,n){return n(function(){yb(e)&&Bb(t)})}function yb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yr(t,n)}catch{return!0}}function Bb(t){var e=Hs(t,1);e!==null&&Jr(e,t,1,-1)}function xx(t){var e=rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dc,lastRenderedState:t},e.queue=t,t=t.dispatch=K2.bind(null,Mt,t),[e.memoizedState,t]}function Lc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xb(){return Mr().memoizedState}function nh(t,e,n,r){var s=rs();Mt.flags|=t,s.memoizedState=Lc(1|e,n,void 0,r===void 0?null:r)}function Pf(t,e,n,r){var s=Mr();r=r===void 0?null:r;var A=void 0;if(dn!==null){var i=dn.memoizedState;if(A=i.destroy,r!==null&&$w(r,i.deps)){s.memoizedState=Lc(e,n,A,r);return}}Mt.flags|=t,s.memoizedState=Lc(1|e,n,A,r)}function Cx(t,e){return nh(8390656,8,t,e)}function Jw(t,e){return Pf(2048,8,t,e)}function Cb(t,e){return Pf(4,2,t,e)}function Ib(t,e){return Pf(4,4,t,e)}function _b(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Eb(t,e,n){return n=n!=null?n.concat([t]):null,Pf(4,4,_b.bind(null,e,t),n)}function Xw(){}function bb(t,e){var n=Mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$w(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tb(t,e){var n=Mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$w(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Fb(t,e,n){return qi&21?(Yr(n,e)||(n=RE(),Mt.lanes|=n,Ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ar=!0),t.memoizedState=n)}function j2(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var r=mp.transition;mp.transition={};try{t(!1),e()}finally{yt=n,mp.transition=r}}function Ub(){return Mr().memoizedState}function H2(t,e,n){var r=LA(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sb(t))Qb(e,n);else if(n=db(t,e,n,r),n!==null){var s=Xn();Jr(n,t,r,s),kb(n,e,r)}}function K2(t,e,n){var r=LA(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sb(t))Qb(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,o=A(i,n);if(s.hasEagerState=!0,s.eagerState=o,Yr(o,i)){var a=e.interleaved;a===null?(s.next=s,jw(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=db(t,e,s,r),n!==null&&(s=Xn(),Jr(n,t,r,s),kb(n,e,r))}}function Sb(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function Qb(t,e){Ac=Mh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tw(t,n)}}var Vh={readContext:Or,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},G2={readContext:Or,useCallback:function(t,e){return rs().memoizedState=[t,e===void 0?null:e],t},useContext:Or,useEffect:Cx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nh(4194308,4,_b.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nh(4194308,4,t,e)},useInsertionEffect:function(t,e){return nh(4,2,t,e)},useMemo:function(t,e){var n=rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H2.bind(null,Mt,t),[r.memoizedState,t]},useRef:function(t){var e=rs();return t={current:t},e.memoizedState=t},useState:xx,useDebugValue:Xw,useDeferredValue:function(t){return rs().memoizedState=t},useTransition:function(){var t=xx(!1),e=t[0];return t=j2.bind(null,t[1]),rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Mt,s=rs();if(Nt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),xn===null)throw Error(Y(349));qi&30||mb(r,e,n)}s.memoizedState=n;var A={value:n,getSnapshot:e};return s.queue=A,Cx(vb.bind(null,r,A,t),[t]),r.flags|=2048,Lc(9,wb.bind(null,r,A,n,e),void 0,null),n},useId:function(){var t=rs(),e=xn.identifierPrefix;if(Nt){var n=Qs,r=Ss;n=(r&~(1<<32-qr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=V2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},z2={readContext:Or,useCallback:bb,useContext:Or,useEffect:Jw,useImperativeHandle:Eb,useInsertionEffect:Cb,useLayoutEffect:Ib,useMemo:Tb,useReducer:wp,useRef:xb,useState:function(){return wp(Dc)},useDebugValue:Xw,useDeferredValue:function(t){var e=Mr();return Fb(e,dn.memoizedState,t)},useTransition:function(){var t=wp(Dc)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:pb,useId:Ub,unstable_isNewReconciler:!1},$2={readContext:Or,useCallback:bb,useContext:Or,useEffect:Jw,useImperativeHandle:Eb,useInsertionEffect:Cb,useLayoutEffect:Ib,useMemo:Tb,useReducer:vp,useRef:xb,useState:function(){return vp(Dc)},useDebugValue:Xw,useDeferredValue:function(t){var e=Mr();return dn===null?e.memoizedState=t:Fb(e,dn.memoizedState,t)},useTransition:function(){var t=vp(Dc)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:gb,useSyncExternalStore:pb,useId:Ub,unstable_isNewReconciler:!1};function zr(t,e){if(t&&t.defaultProps){e=Ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Km(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Df={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xn(),s=LA(t),A=Ds(r,s);A.payload=e,n!=null&&(A.callback=n),e=PA(t,A,s),e!==null&&(Jr(e,t,s,r),eh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xn(),s=LA(t),A=Ds(r,s);A.tag=1,A.payload=e,n!=null&&(A.callback=n),e=PA(t,A,s),e!==null&&(Jr(e,t,s,r),eh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xn(),r=LA(t),s=Ds(n,r);s.tag=2,e!=null&&(s.callback=e),e=PA(t,s,r),e!==null&&(Jr(e,t,r,n),eh(e,t,r))}};function Ix(t,e,n,r,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,A,i):e.prototype&&e.prototype.isPureReactComponent?!Uc(n,r)||!Uc(s,A):!0}function Rb(t,e,n){var r=!1,s=zA,A=e.contextType;return typeof A=="object"&&A!==null?A=Or(A):(s=hr(e)?$i:Kn.current,r=e.contextTypes,A=(r=r!=null)?wa(t,s):zA),e=new e(n,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function _x(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Df.enqueueReplaceState(e,e.state,null)}function Gm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Or(A):(A=hr(e)?$i:Kn.current,s.context=wa(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(Km(t,e,A,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Df.enqueueReplaceState(s,s.state,null),Lh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xa(t,e){try{var n="",r=e;do n+=Bk(r),r=r.return;while(r);var s=n}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function yp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var W2=typeof WeakMap=="function"?WeakMap:Map;function Nb(t,e,n){n=Ds(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hh||(Hh=!0,n0=r),zm(t,e)},n}function Pb(t,e,n){n=Ds(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){zm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){zm(t,e),typeof r!="function"&&(DA===null?DA=new Set([this]):DA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Ex(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new W2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aR.bind(null,t,e,n),e.then(t,t))}function bx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ds(-1,1),e.tag=2,PA(n,e,1))),n.lanes|=1),t)}var q2=Js.ReactCurrentOwner,ar=!1;function Wn(t,e,n,r){e.child=t===null?ub(e,null,n,r):ya(e,t.child,n,r)}function Fx(t,e,n,r,s){n=n.render;var A=e.ref;return aa(e,s),r=Ww(t,e,n,r,A,s),n=qw(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ks(t,e,s)):(Nt&&n&&Pw(e),e.flags|=1,Wn(t,e,r,s),e.child)}function Ux(t,e,n,r,s){if(t===null){var A=n.type;return typeof A=="function"&&!Av(A)&&A.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=A,Db(t,e,A,r,s)):(t=ih(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(n=n.compare,n=n!==null?n:Uc,n(i,r)&&t.ref===e.ref)return Ks(t,e,s)}return e.flags|=1,t=OA(A,r),t.ref=e.ref,t.return=e,e.child=t}function Db(t,e,n,r,s){if(t!==null){var A=t.memoizedProps;if(Uc(A,r)&&t.ref===e.ref)if(ar=!1,e.pendingProps=r=A,(t.lanes&s)!==0)t.flags&131072&&(ar=!0);else return e.lanes=t.lanes,Ks(t,e,s)}return $m(t,e,n,r,s)}function Lb(t,e,n){var r=e.pendingProps,s=r.children,A=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ta,vr),vr|=n;else{if(!(n&1073741824))return t=A!==null?A.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(ta,vr),vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=A!==null?A.baseLanes:n,Et(ta,vr),vr|=r}else A!==null?(r=A.baseLanes|n,e.memoizedState=null):r=n,Et(ta,vr),vr|=r;return Wn(t,e,s,n),e.child}function Ob(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $m(t,e,n,r,s){var A=hr(n)?$i:Kn.current;return A=wa(e,A),aa(e,s),n=Ww(t,e,n,r,A,s),r=qw(),t!==null&&!ar?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ks(t,e,s)):(Nt&&r&&Pw(e),e.flags|=1,Wn(t,e,n,s),e.child)}function Sx(t,e,n,r,s){if(hr(n)){var A=!0;kh(e)}else A=!1;if(aa(e,s),e.stateNode===null)rh(t,e),Rb(e,n,r),Gm(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Or(c):(c=hr(n)?$i:Kn.current,c=wa(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==c)&&_x(e,i,r,c),mA=!1;var f=e.memoizedState;i.state=f,Lh(e,r,i,s),a=e.memoizedState,o!==r||f!==a||dr.current||mA?(typeof d=="function"&&(Km(e,n,d,r),a=e.memoizedState),(o=mA||Ix(e,n,o,r,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,hb(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:zr(e.type,o),i.props=c,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=Or(a):(a=hr(n)?$i:Kn.current,a=wa(e,a));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&_x(e,i,r,a),mA=!1,f=e.memoizedState,i.state=f,Lh(e,r,i,s);var w=e.memoizedState;o!==h||f!==w||dr.current||mA?(typeof m=="function"&&(Km(e,n,m,r),w=e.memoizedState),(c=mA||Ix(e,n,c,r,f,w,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),i.props=r,i.state=w,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wm(t,e,n,r,A,s)}function Wm(t,e,n,r,s,A){Ob(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&px(e,n,!1),Ks(t,e,A);r=e.stateNode,q2.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=ya(e,t.child,null,A),e.child=ya(e,null,o,A)):Wn(t,e,o,A),e.memoizedState=r.state,s&&px(e,n,!0),e.child}function Mb(t){var e=t.stateNode;e.pendingContext?gx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gx(t,e.context,!1),Kw(t,e.containerInfo)}function Qx(t,e,n,r,s){return va(),Lw(s),e.flags|=256,Wn(t,e,n,r),e.child}var qm={dehydrated:null,treeContext:null,retryLane:0};function Jm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vb(t,e,n){var r=e.pendingProps,s=Ot.current,A=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Et(Ot,s&1),t===null)return jm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,A?(r=e.mode,A=e.child,i={mode:"hidden",children:i},!(r&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=Mf(i,r,0,null),t=Vi(t,r,n,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=Jm(n),e.memoizedState=qm,t):Yw(e,i));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return J2(t,e,i,r,o,s,n);if(A){A=r.fallback,i=e.mode,s=t.child,o=s.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=OA(s,a),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?A=OA(o,A):(A=Vi(A,i,n,null),A.flags|=2),A.return=e,r.return=e,r.sibling=A,e.child=r,r=A,A=e.child,i=t.child.memoizedState,i=i===null?Jm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~n,e.memoizedState=qm,r}return A=t.child,t=A.sibling,r=OA(A,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yw(t,e){return e=Mf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fd(t,e,n,r){return r!==null&&Lw(r),ya(e,t.child,null,n),t=Yw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J2(t,e,n,r,s,A,i){if(n)return e.flags&256?(e.flags&=-257,r=yp(Error(Y(422))),fd(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=r.fallback,s=e.mode,r=Mf({mode:"visible",children:r.children},s,0,null),A=Vi(A,s,i,null),A.flags|=2,r.return=e,A.return=e,r.sibling=A,e.child=r,e.mode&1&&ya(e,t.child,null,i),e.child.memoizedState=Jm(i),e.memoizedState=qm,A);if(!(e.mode&1))return fd(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,A=Error(Y(419)),r=yp(A,r,void 0),fd(t,e,i,r)}if(o=(i&t.childLanes)!==0,ar||o){if(r=xn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Hs(t,s),Jr(r,t,s,-1))}return sv(),r=yp(Error(Y(421))),fd(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lR.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,xr=NA(s.nextSibling),Ir=e,Nt=!0,Wr=null,t!==null&&(Ur[Sr++]=Ss,Ur[Sr++]=Qs,Ur[Sr++]=Wi,Ss=t.id,Qs=t.overflow,Wi=e),e=Yw(e,r.children),e.flags|=4096,e)}function kx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hm(t.return,e,n)}function Bp(t,e,n,r,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=r,A.tail=n,A.tailMode=s)}function jb(t,e,n){var r=e.pendingProps,s=r.revealOrder,A=r.tail;if(Wn(t,e,r.children,n),r=Ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kx(t,n,e);else if(t.tag===19)kx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Et(Ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bp(e,!1,s,n,A);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bp(e,!0,n,null,A);break;case"together":Bp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ks(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=OA(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=OA(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function X2(t,e,n){switch(e.tag){case 3:Mb(e),va();break;case 5:fb(e);break;case 1:hr(e.type)&&kh(e);break;case 4:Kw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Et(Ph,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Et(Ot,Ot.current&1),e.flags|=128,null):n&e.child.childLanes?Vb(t,e,n):(Et(Ot,Ot.current&1),t=Ks(t,e,n),t!==null?t.sibling:null);Et(Ot,Ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Et(Ot,Ot.current),r)break;return null;case 22:case 23:return e.lanes=0,Lb(t,e,n)}return Ks(t,e,n)}var Hb,Xm,Kb,Gb;Hb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xm=function(){};Kb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ni(gs.current);var A=null;switch(n){case"input":s=vm(t,s),r=vm(t,r),A=[];break;case"select":s=Ht({},s,{value:void 0}),r=Ht({},r,{value:void 0}),A=[];break;case"textarea":s=xm(t,s),r=xm(t,r),A=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sh)}Im(n,r);var i;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in r){var a=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(A||(A=[]),A.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(A=A||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(A=A||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ft("scroll",t),A||o===a||(A=[])):(A=A||[]).push(c,a))}n&&(A=A||[]).push("style",n);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};Gb=function(t,e,n,r){n!==r&&(e.flags|=4)};function xl(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Y2(t,e,n){var r=e.pendingProps;switch(Dw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return hr(e.type)&&Qh(),Ln(e),null;case 3:return r=e.stateNode,Ba(),St(dr),St(Kn),zw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(dd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(A0(Wr),Wr=null))),Xm(t,e),Ln(e),null;case 5:Gw(e);var s=Ni(Nc.current);if(n=e.type,t!==null&&e.stateNode!=null)Kb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ln(e),null}if(t=Ni(gs.current),dd(e)){r=e.stateNode,n=e.type;var A=e.memoizedProps;switch(r[ss]=e,r[kc]=A,t=(e.mode&1)!==0,n){case"dialog":Ft("cancel",r),Ft("close",r);break;case"iframe":case"object":case"embed":Ft("load",r);break;case"video":case"audio":for(s=0;s<Ol.length;s++)Ft(Ol[s],r);break;case"source":Ft("error",r);break;case"img":case"image":case"link":Ft("error",r),Ft("load",r);break;case"details":Ft("toggle",r);break;case"input":jB(r,A),Ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!A.multiple},Ft("invalid",r);break;case"textarea":KB(r,A),Ft("invalid",r)}Im(n,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var o=A[i];i==="children"?typeof o=="string"?r.textContent!==o&&(A.suppressHydrationWarning!==!0&&ud(r.textContent,o,t),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(A.suppressHydrationWarning!==!0&&ud(r.textContent,o,t),s=["children",""+o]):Cc.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ft("scroll",r)}switch(n){case"input":rd(r),HB(r,A,!0);break;case"textarea":rd(r),GB(r);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(r.onclick=Sh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[ss]=e,t[kc]=r,Hb(t,e,!1,!1),e.stateNode=t;e:{switch(i=_m(n,r),n){case"dialog":Ft("cancel",t),Ft("close",t),s=r;break;case"iframe":case"object":case"embed":Ft("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ol.length;s++)Ft(Ol[s],t);s=r;break;case"source":Ft("error",t),s=r;break;case"img":case"image":case"link":Ft("error",t),Ft("load",t),s=r;break;case"details":Ft("toggle",t),s=r;break;case"input":jB(t,r),s=vm(t,r),Ft("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ht({},r,{value:void 0}),Ft("invalid",t);break;case"textarea":KB(t,r),s=xm(t,r),Ft("invalid",t);break;default:s=r}Im(n,s),o=s;for(A in o)if(o.hasOwnProperty(A)){var a=o[A];A==="style"?xE(t,a):A==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&yE(t,a)):A==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Ic(t,a):typeof a=="number"&&Ic(t,""+a):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(Cc.hasOwnProperty(A)?a!=null&&A==="onScroll"&&Ft("scroll",t):a!=null&&xw(t,A,a,i))}switch(n){case"input":rd(t),HB(t,r,!1);break;case"textarea":rd(t),GB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+GA(r.value));break;case"select":t.multiple=!!r.multiple,A=r.value,A!=null?sa(t,!!r.multiple,A,!1):r.defaultValue!=null&&sa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(t&&e.stateNode!=null)Gb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ni(Nc.current),Ni(gs.current),dd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ss]=e,(A=r.nodeValue!==n)&&(t=Ir,t!==null))switch(t.tag){case 3:ud(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ud(r.nodeValue,n,(t.mode&1)!==0)}A&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ss]=e,e.stateNode=r}return Ln(e),null;case 13:if(St(Ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Nt&&xr!==null&&e.mode&1&&!(e.flags&128))lb(),va(),e.flags|=98560,A=!1;else if(A=dd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!A)throw Error(Y(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(Y(317));A[ss]=e}else va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),A=!1}else Wr!==null&&(A0(Wr),Wr=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ot.current&1?fn===0&&(fn=3):sv())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return Ba(),Xm(t,e),t===null&&Sc(e.stateNode.containerInfo),Ln(e),null;case 10:return Vw(e.type._context),Ln(e),null;case 17:return hr(e.type)&&Qh(),Ln(e),null;case 19:if(St(Ot),A=e.memoizedState,A===null)return Ln(e),null;if(r=(e.flags&128)!==0,i=A.rendering,i===null)if(r)xl(A,!1);else{if(fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Oh(t),i!==null){for(e.flags|=128,xl(A,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)A=n,t=r,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et(Ot,Ot.current&1|2),e.child}t=t.sibling}A.tail!==null&&tn()>Ca&&(e.flags|=128,r=!0,xl(A,!1),e.lanes=4194304)}else{if(!r)if(t=Oh(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!Nt)return Ln(e),null}else 2*tn()-A.renderingStartTime>Ca&&n!==1073741824&&(e.flags|=128,r=!0,xl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(n=A.last,n!==null?n.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=tn(),e.sibling=null,n=Ot.current,Et(Ot,r?n&1|2:n&1),e):(Ln(e),null);case 22:case 23:return rv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vr&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Z2(t,e){switch(Dw(e),e.tag){case 1:return hr(e.type)&&Qh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),St(dr),St(Kn),zw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gw(e),null;case 13:if(St(Ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(Ot),null;case 4:return Ba(),null;case 10:return Vw(e.type._context),null;case 22:case 23:return rv(),null;case 24:return null;default:return null}}var gd=!1,Hn=!1,eR=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function ea(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zt(t,e,r)}else n.current=null}function Ym(t,e,n){try{n()}catch(r){zt(t,e,r)}}var Rx=!1;function tR(t,e){if(Nm=Th,t=JE(),Nw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,A=r.focusNode;r=r.focusOffset;try{n.nodeType,A.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(o=i+s),h!==A||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===s&&(o=i),f===A&&++d===r&&(a=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pm={focusedElem:t,selectionRange:n},Th=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,T=w.memoizedState,C=e.stateNode,v=C.getSnapshotBeforeUpdate(e.elementType===e.type?y:zr(e.type,y),T);C.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(S){zt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return w=Rx,Rx=!1,w}function ic(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&Ym(e,n,A)}s=s.next}while(s!==r)}}function Lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zb(t){var e=t.alternate;e!==null&&(t.alternate=null,zb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ss],delete e[kc],delete e[Om],delete e[D2],delete e[L2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $b(t){return t.tag===5||t.tag===3||t.tag===4}function Nx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$b(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function e0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sh));else if(r!==4&&(t=t.child,t!==null))for(e0(t,e,n),t=t.sibling;t!==null;)e0(t,e,n),t=t.sibling}function t0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(t0(t,e,n),t=t.sibling;t!==null;)t0(t,e,n),t=t.sibling}var _n=null,$r=!1;function lA(t,e,n){for(n=n.child;n!==null;)Wb(t,e,n),n=n.sibling}function Wb(t,e,n){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(Uf,n)}catch{}switch(n.tag){case 5:Hn||ea(n,e);case 6:var r=_n,s=$r;_n=null,lA(t,e,n),_n=r,$r=s,_n!==null&&($r?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&($r?(t=_n,n=n.stateNode,t.nodeType===8?fp(t.parentNode,n):t.nodeType===1&&fp(t,n),Tc(t)):fp(_n,n.stateNode));break;case 4:r=_n,s=$r,_n=n.stateNode.containerInfo,$r=!0,lA(t,e,n),_n=r,$r=s;break;case 0:case 11:case 14:case 15:if(!Hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&Ym(n,e,i),s=s.next}while(s!==r)}lA(t,e,n);break;case 1:if(!Hn&&(ea(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){zt(n,e,o)}lA(t,e,n);break;case 21:lA(t,e,n);break;case 22:n.mode&1?(Hn=(r=Hn)||n.memoizedState!==null,lA(t,e,n),Hn=r):lA(t,e,n);break;default:lA(t,e,n)}}function Px(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new eR),e.forEach(function(r){var s=cR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var A=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:_n=o.stateNode,$r=!1;break e;case 3:_n=o.stateNode.containerInfo,$r=!0;break e;case 4:_n=o.stateNode.containerInfo,$r=!0;break e}o=o.return}if(_n===null)throw Error(Y(160));Wb(A,i,s),_n=null,$r=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){zt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qb(e,t),e=e.sibling}function qb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kr(e,t),ts(t),r&4){try{ic(3,t,t.return),Lf(3,t)}catch(y){zt(t,t.return,y)}try{ic(5,t,t.return)}catch(y){zt(t,t.return,y)}}break;case 1:Kr(e,t),ts(t),r&512&&n!==null&&ea(n,n.return);break;case 5:if(Kr(e,t),ts(t),r&512&&n!==null&&ea(n,n.return),t.flags&32){var s=t.stateNode;try{Ic(s,"")}catch(y){zt(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=n!==null?n.memoizedProps:A,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&A.type==="radio"&&A.name!=null&&mE(s,A),_m(o,i);var c=_m(o,A);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?xE(s,h):d==="dangerouslySetInnerHTML"?yE(s,h):d==="children"?Ic(s,h):xw(s,d,h,c)}switch(o){case"input":ym(s,A);break;case"textarea":wE(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var m=A.value;m!=null?sa(s,!!A.multiple,m,!1):f!==!!A.multiple&&(A.defaultValue!=null?sa(s,!!A.multiple,A.defaultValue,!0):sa(s,!!A.multiple,A.multiple?[]:"",!1))}s[kc]=A}catch(y){zt(t,t.return,y)}}break;case 6:if(Kr(e,t),ts(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(y){zt(t,t.return,y)}}break;case 3:if(Kr(e,t),ts(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Tc(e.containerInfo)}catch(y){zt(t,t.return,y)}break;case 4:Kr(e,t),ts(t);break;case 13:Kr(e,t),ts(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(tv=tn())),r&4&&Px(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Hn=(c=Hn)||d,Kr(e,t),Hn=c):Kr(e,t),ts(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Fe=t,d=t.child;d!==null;){for(h=Fe=d;Fe!==null;){switch(f=Fe,m=f.child,f.tag){case 0:case 11:case 14:case 15:ic(4,f,f.return);break;case 1:ea(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(y){zt(r,n,y)}}break;case 5:ea(f,f.return);break;case 22:if(f.memoizedState!==null){Lx(h);continue}}m!==null?(m.return=f,Fe=m):Lx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=BE("display",i))}catch(y){zt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){zt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kr(e,t),ts(t),r&4&&Px(t);break;case 21:break;default:Kr(e,t),ts(t)}}function ts(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($b(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ic(s,""),r.flags&=-33);var A=Nx(t);t0(t,A,s);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Nx(t);e0(t,o,i);break;default:throw Error(Y(161))}}catch(a){zt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nR(t,e,n){Fe=t,Jb(t)}function Jb(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var s=Fe,A=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||gd;if(!i){var o=s.alternate,a=o!==null&&o.memoizedState!==null||Hn;o=gd;var c=Hn;if(gd=i,(Hn=a)&&!c)for(Fe=s;Fe!==null;)i=Fe,a=i.child,i.tag===22&&i.memoizedState!==null?Ox(s):a!==null?(a.return=i,Fe=a):Ox(s);for(;A!==null;)Fe=A,Jb(A),A=A.sibling;Fe=s,gd=o,Hn=c}Dx(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,Fe=A):Dx(t)}}function Dx(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||Lf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&Bx(e,A,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bx(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Tc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Hn||e.flags&512&&Zm(e)}catch(f){zt(e,e.return,f)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function Lx(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function Ox(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lf(4,e)}catch(a){zt(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){zt(e,s,a)}}var A=e.return;try{Zm(e)}catch(a){zt(e,A,a)}break;case 5:var i=e.return;try{Zm(e)}catch(a){zt(e,i,a)}}}catch(a){zt(e,e.return,a)}if(e===t){Fe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Fe=o;break}Fe=e.return}}var rR=Math.ceil,jh=Js.ReactCurrentDispatcher,Zw=Js.ReactCurrentOwner,Dr=Js.ReactCurrentBatchConfig,lt=0,xn=null,cn=null,Un=0,vr=0,ta=ii(0),fn=0,Oc=null,Ji=0,Of=0,ev=0,oc=null,or=null,tv=0,Ca=1/0,Fs=null,Hh=!1,n0=null,DA=null,pd=!1,IA=null,Kh=0,ac=0,r0=null,sh=-1,Ah=0;function Xn(){return lt&6?tn():sh!==-1?sh:sh=tn()}function LA(t){return t.mode&1?lt&2&&Un!==0?Un&-Un:M2.transition!==null?(Ah===0&&(Ah=RE()),Ah):(t=yt,t!==0||(t=window.event,t=t===void 0?16:VE(t.type)),t):1}function Jr(t,e,n,r){if(50<ac)throw ac=0,r0=null,Error(Y(185));gu(t,n,r),(!(lt&2)||t!==xn)&&(t===xn&&(!(lt&2)&&(Of|=n),fn===4&&yA(t,Un)),fr(t,r),n===1&&lt===0&&!(e.mode&1)&&(Ca=tn()+500,Nf&&oi()))}function fr(t,e){var n=t.callbackNode;Mk(t,e);var r=bh(t,t===xn?Un:0);if(r===0)n!==null&&WB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WB(n),e===1)t.tag===0?O2(Mx.bind(null,t)):ib(Mx.bind(null,t)),N2(function(){!(lt&6)&&oi()}),n=null;else{switch(NE(r)){case 1:n=bw;break;case 4:n=QE;break;case 16:n=Eh;break;case 536870912:n=kE;break;default:n=Eh}n=sT(n,Xb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xb(t,e){if(sh=-1,Ah=0,lt&6)throw Error(Y(327));var n=t.callbackNode;if(la()&&t.callbackNode!==n)return null;var r=bh(t,t===xn?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Gh(t,r);else{e=r;var s=lt;lt|=2;var A=Zb();(xn!==t||Un!==e)&&(Fs=null,Ca=tn()+500,Mi(t,e));do try{iR();break}catch(o){Yb(t,o)}while(!0);Mw(),jh.current=A,lt=s,cn!==null?e=0:(xn=null,Un=0,e=fn)}if(e!==0){if(e===2&&(s=Um(t),s!==0&&(r=s,e=s0(t,s))),e===1)throw n=Oc,Mi(t,0),yA(t,r),fr(t,tn()),n;if(e===6)yA(t,r);else{if(s=t.current.alternate,!(r&30)&&!sR(s)&&(e=Gh(t,r),e===2&&(A=Um(t),A!==0&&(r=A,e=s0(t,A))),e===1))throw n=Oc,Mi(t,0),yA(t,r),fr(t,tn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Ci(t,or,Fs);break;case 3:if(yA(t,r),(r&130023424)===r&&(e=tv+500-tn(),10<e)){if(bh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Lm(Ci.bind(null,t,or,Fs),e);break}Ci(t,or,Fs);break;case 4:if(yA(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-qr(r);A=1<<i,i=e[i],i>s&&(s=i),r&=~A}if(r=s,r=tn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rR(r/1960))-r,10<r){t.timeoutHandle=Lm(Ci.bind(null,t,or,Fs),r);break}Ci(t,or,Fs);break;case 5:Ci(t,or,Fs);break;default:throw Error(Y(329))}}}return fr(t,tn()),t.callbackNode===n?Xb.bind(null,t):null}function s0(t,e){var n=oc;return t.current.memoizedState.isDehydrated&&(Mi(t,e).flags|=256),t=Gh(t,e),t!==2&&(e=or,or=n,e!==null&&A0(e)),t}function A0(t){or===null?or=t:or.push.apply(or,t)}function sR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],A=s.getSnapshot;s=s.value;try{if(!Yr(A(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yA(t,e){for(e&=~ev,e&=~Of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qr(e),r=1<<n;t[n]=-1,e&=~r}}function Mx(t){if(lt&6)throw Error(Y(327));la();var e=bh(t,0);if(!(e&1))return fr(t,tn()),null;var n=Gh(t,e);if(t.tag!==0&&n===2){var r=Um(t);r!==0&&(e=r,n=s0(t,r))}if(n===1)throw n=Oc,Mi(t,0),yA(t,e),fr(t,tn()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,or,Fs),fr(t,tn()),null}function nv(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Ca=tn()+500,Nf&&oi())}}function Xi(t){IA!==null&&IA.tag===0&&!(lt&6)&&la();var e=lt;lt|=1;var n=Dr.transition,r=yt;try{if(Dr.transition=null,yt=1,t)return t()}finally{yt=r,Dr.transition=n,lt=e,!(lt&6)&&oi()}}function rv(){vr=ta.current,St(ta)}function Mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,R2(n)),cn!==null)for(n=cn.return;n!==null;){var r=n;switch(Dw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qh();break;case 3:Ba(),St(dr),St(Kn),zw();break;case 5:Gw(r);break;case 4:Ba();break;case 13:St(Ot);break;case 19:St(Ot);break;case 10:Vw(r.type._context);break;case 22:case 23:rv()}n=n.return}if(xn=t,cn=t=OA(t.current,null),Un=vr=e,fn=0,Oc=null,ev=Of=Ji=0,or=oc=null,Ri!==null){for(e=0;e<Ri.length;e++)if(n=Ri[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,A=n.pending;if(A!==null){var i=A.next;A.next=s,r.next=i}n.pending=r}Ri=null}return t}function Yb(t,e){do{var n=cn;try{if(Mw(),th.current=Vh,Mh){for(var r=Mt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mh=!1}if(qi=0,yn=dn=Mt=null,Ac=!1,Pc=0,Zw.current=null,n===null||n.return===null){fn=1,Oc=e,cn=null;break}e:{var A=t,i=n.return,o=n,a=e;if(e=Un,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=bx(i);if(m!==null){m.flags&=-257,Tx(m,i,o,A,e),m.mode&1&&Ex(A,c,e),e=m,a=c;var w=e.updateQueue;if(w===null){var y=new Set;y.add(a),e.updateQueue=y}else w.add(a);break e}else{if(!(e&1)){Ex(A,c,e),sv();break e}a=Error(Y(426))}}else if(Nt&&o.mode&1){var T=bx(i);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Tx(T,i,o,A,e),Lw(xa(a,o));break e}}A=a=xa(a,o),fn!==4&&(fn=2),oc===null?oc=[A]:oc.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var C=Nb(A,a,e);yx(A,C);break e;case 1:o=a;var v=A.type,I=A.stateNode;if(!(A.flags&128)&&(typeof v.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(DA===null||!DA.has(I)))){A.flags|=65536,e&=-e,A.lanes|=e;var S=Pb(A,o,e);yx(A,S);break e}}A=A.return}while(A!==null)}tT(n)}catch(U){e=U,cn===n&&n!==null&&(cn=n=n.return);continue}break}while(!0)}function Zb(){var t=jh.current;return jh.current=Vh,t===null?Vh:t}function sv(){(fn===0||fn===3||fn===2)&&(fn=4),xn===null||!(Ji&268435455)&&!(Of&268435455)||yA(xn,Un)}function Gh(t,e){var n=lt;lt|=2;var r=Zb();(xn!==t||Un!==e)&&(Fs=null,Mi(t,e));do try{AR();break}catch(s){Yb(t,s)}while(!0);if(Mw(),lt=n,jh.current=r,cn!==null)throw Error(Y(261));return xn=null,Un=0,fn}function AR(){for(;cn!==null;)eT(cn)}function iR(){for(;cn!==null&&!Sk();)eT(cn)}function eT(t){var e=rT(t.alternate,t,vr);t.memoizedProps=t.pendingProps,e===null?tT(t):cn=e,Zw.current=null}function tT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Z2(n,e),n!==null){n.flags&=32767,cn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fn=6,cn=null;return}}else if(n=Y2(n,e,vr),n!==null){cn=n;return}if(e=e.sibling,e!==null){cn=e;return}cn=e=t}while(e!==null);fn===0&&(fn=5)}function Ci(t,e,n){var r=yt,s=Dr.transition;try{Dr.transition=null,yt=1,oR(t,e,n,r)}finally{Dr.transition=s,yt=r}return null}function oR(t,e,n,r){do la();while(IA!==null);if(lt&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var A=n.lanes|n.childLanes;if(Vk(t,A),t===xn&&(cn=xn=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pd||(pd=!0,sT(Eh,function(){return la(),null})),A=(n.flags&15990)!==0,n.subtreeFlags&15990||A){A=Dr.transition,Dr.transition=null;var i=yt;yt=1;var o=lt;lt|=4,Zw.current=null,tR(t,n),qb(n,t),b2(Pm),Th=!!Nm,Pm=Nm=null,t.current=n,nR(n),Qk(),lt=o,yt=i,Dr.transition=A}else t.current=n;if(pd&&(pd=!1,IA=t,Kh=s),A=t.pendingLanes,A===0&&(DA=null),Nk(n.stateNode),fr(t,tn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hh)throw Hh=!1,t=n0,n0=null,t;return Kh&1&&t.tag!==0&&la(),A=t.pendingLanes,A&1?t===r0?ac++:(ac=0,r0=t):ac=0,oi(),null}function la(){if(IA!==null){var t=NE(Kh),e=Dr.transition,n=yt;try{if(Dr.transition=null,yt=16>t?16:t,IA===null)var r=!1;else{if(t=IA,IA=null,Kh=0,lt&6)throw Error(Y(331));var s=lt;for(lt|=4,Fe=t.current;Fe!==null;){var A=Fe,i=A.child;if(Fe.flags&16){var o=A.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(Fe=c;Fe!==null;){var d=Fe;switch(d.tag){case 0:case 11:case 15:ic(8,d,A)}var h=d.child;if(h!==null)h.return=d,Fe=h;else for(;Fe!==null;){d=Fe;var f=d.sibling,m=d.return;if(zb(d),d===c){Fe=null;break}if(f!==null){f.return=m,Fe=f;break}Fe=m}}}var w=A.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var T=y.sibling;y.sibling=null,y=T}while(y!==null)}}Fe=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,Fe=i;else e:for(;Fe!==null;){if(A=Fe,A.flags&2048)switch(A.tag){case 0:case 11:case 15:ic(9,A,A.return)}var C=A.sibling;if(C!==null){C.return=A.return,Fe=C;break e}Fe=A.return}}var v=t.current;for(Fe=v;Fe!==null;){i=Fe;var I=i.child;if(i.subtreeFlags&2064&&I!==null)I.return=i,Fe=I;else e:for(i=v;Fe!==null;){if(o=Fe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Lf(9,o)}}catch(U){zt(o,o.return,U)}if(o===i){Fe=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Fe=S;break e}Fe=o.return}}if(lt=s,oi(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(Uf,t)}catch{}r=!0}return r}finally{yt=n,Dr.transition=e}}return!1}function Vx(t,e,n){e=xa(n,e),e=Nb(t,e,1),t=PA(t,e,1),e=Xn(),t!==null&&(gu(t,1,e),fr(t,e))}function zt(t,e,n){if(t.tag===3)Vx(t,t,n);else for(;e!==null;){if(e.tag===3){Vx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(DA===null||!DA.has(r))){t=xa(n,t),t=Pb(e,t,1),e=PA(e,t,1),t=Xn(),e!==null&&(gu(e,1,t),fr(e,t));break}}e=e.return}}function aR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xn(),t.pingedLanes|=t.suspendedLanes&n,xn===t&&(Un&n)===n&&(fn===4||fn===3&&(Un&130023424)===Un&&500>tn()-tv?Mi(t,0):ev|=n),fr(t,e)}function nT(t,e){e===0&&(t.mode&1?(e=id,id<<=1,!(id&130023424)&&(id=4194304)):e=1);var n=Xn();t=Hs(t,e),t!==null&&(gu(t,e,n),fr(t,n))}function lR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nT(t,n)}function cR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),nT(t,n)}var rT;rT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dr.current)ar=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ar=!1,X2(t,e,n);ar=!!(t.flags&131072)}else ar=!1,Nt&&e.flags&1048576&&ob(e,Nh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rh(t,e),t=e.pendingProps;var s=wa(e,Kn.current);aa(e,n),s=Ww(null,e,r,t,s,n);var A=qw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hr(r)?(A=!0,kh(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hw(e),s.updater=Df,e.stateNode=s,s._reactInternals=e,Gm(e,r,t,n),e=Wm(null,e,r,!0,A,n)):(e.tag=0,Nt&&A&&Pw(e),Wn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dR(r),t=zr(r,t),s){case 0:e=$m(null,e,r,t,n);break e;case 1:e=Sx(null,e,r,t,n);break e;case 11:e=Fx(null,e,r,t,n);break e;case 14:e=Ux(null,e,r,zr(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zr(r,s),$m(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zr(r,s),Sx(t,e,r,s,n);case 3:e:{if(Mb(e),t===null)throw Error(Y(387));r=e.pendingProps,A=e.memoizedState,s=A.element,hb(t,e),Lh(e,r,null,n);var i=e.memoizedState;if(r=i.element,A.isDehydrated)if(A={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=xa(Error(Y(423)),e),e=Qx(t,e,r,n,s);break e}else if(r!==s){s=xa(Error(Y(424)),e),e=Qx(t,e,r,n,s);break e}else for(xr=NA(e.stateNode.containerInfo.firstChild),Ir=e,Nt=!0,Wr=null,n=ub(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(va(),r===s){e=Ks(t,e,n);break e}Wn(t,e,r,n)}e=e.child}return e;case 5:return fb(e),t===null&&jm(e),r=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,Dm(r,s)?i=null:A!==null&&Dm(r,A)&&(e.flags|=32),Ob(t,e),Wn(t,e,i,n),e.child;case 6:return t===null&&jm(e),null;case 13:return Vb(t,e,n);case 4:return Kw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ya(e,null,r,n):Wn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zr(r,s),Fx(t,e,r,s,n);case 7:return Wn(t,e,e.pendingProps,n),e.child;case 8:return Wn(t,e,e.pendingProps.children,n),e.child;case 12:return Wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,Et(Ph,r._currentValue),r._currentValue=i,A!==null)if(Yr(A.value,i)){if(A.children===s.children&&!dr.current){e=Ks(t,e,n);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var o=A.dependencies;if(o!==null){i=A.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(A.tag===1){a=Ds(-1,n&-n),a.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}A.lanes|=n,a=A.alternate,a!==null&&(a.lanes|=n),Hm(A.return,n,e),o.lanes|=n;break}a=a.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(Y(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Hm(i,n,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}Wn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,aa(e,n),s=Or(s),r=r(s),e.flags|=1,Wn(t,e,r,n),e.child;case 14:return r=e.type,s=zr(r,e.pendingProps),s=zr(r.type,s),Ux(t,e,r,s,n);case 15:return Db(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zr(r,s),rh(t,e),e.tag=1,hr(r)?(t=!0,kh(e)):t=!1,aa(e,n),Rb(e,r,s),Gm(e,r,s,n),Wm(null,e,r,!0,t,n);case 19:return jb(t,e,n);case 22:return Lb(t,e,n)}throw Error(Y(156,e.tag))};function sT(t,e){return SE(t,e)}function uR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(t,e,n,r){return new uR(t,e,n,r)}function Av(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dR(t){if(typeof t=="function")return Av(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Iw)return 11;if(t===_w)return 14}return 2}function OA(t,e){var n=t.alternate;return n===null?(n=kr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ih(t,e,n,r,s,A){var i=2;if(r=t,typeof t=="function")Av(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Go:return Vi(n.children,s,A,e);case Cw:i=8,s|=8;break;case gm:return t=kr(12,n,e,s|2),t.elementType=gm,t.lanes=A,t;case pm:return t=kr(13,n,e,s),t.elementType=pm,t.lanes=A,t;case mm:return t=kr(19,n,e,s),t.elementType=mm,t.lanes=A,t;case fE:return Mf(n,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dE:i=10;break e;case hE:i=9;break e;case Iw:i=11;break e;case _w:i=14;break e;case pA:i=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=kr(i,n,e,s),e.elementType=t,e.type=r,e.lanes=A,e}function Vi(t,e,n,r){return t=kr(7,t,r,e),t.lanes=n,t}function Mf(t,e,n,r){return t=kr(22,t,r,e),t.elementType=fE,t.lanes=n,t.stateNode={isHidden:!1},t}function xp(t,e,n){return t=kr(6,t,null,e),t.lanes=n,t}function Cp(t,e,n){return e=kr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rp(0),this.expirationTimes=rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function iv(t,e,n,r,s,A,i,o,a){return t=new hR(t,e,n,o,a),e===1?(e=1,A===!0&&(e|=8)):e=0,A=kr(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hw(A),t}function fR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AT(t){if(!t)return zA;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(hr(n))return Ab(t,n,e)}return e}function iT(t,e,n,r,s,A,i,o,a){return t=iv(n,r,!0,t,s,A,i,o,a),t.context=AT(null),n=t.current,r=Xn(),s=LA(n),A=Ds(r,s),A.callback=e??null,PA(n,A,s),t.current.lanes=s,gu(t,s,r),fr(t,r),t}function Vf(t,e,n,r){var s=e.current,A=Xn(),i=LA(s);return n=AT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ds(A,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=PA(s,e,i),t!==null&&(Jr(t,s,i,A),eh(t,s,i)),i}function zh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ov(t,e){jx(t,e),(t=t.alternate)&&jx(t,e)}function gR(){return null}var oT=typeof reportError=="function"?reportError:function(t){console.error(t)};function av(t){this._internalRoot=t}jf.prototype.render=av.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Vf(t,e,null,null)};jf.prototype.unmount=av.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xi(function(){Vf(null,t,null,null)}),e[js]=null}};function jf(t){this._internalRoot=t}jf.prototype.unstable_scheduleHydration=function(t){if(t){var e=LE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vA.length&&e!==0&&e<vA[n].priority;n++);vA.splice(n,0,t),n===0&&ME(t)}};function lv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hx(){}function pR(t,e,n,r,s){if(s){if(typeof r=="function"){var A=r;r=function(){var c=zh(i);A.call(c)}}var i=iT(e,r,t,0,null,!1,!1,"",Hx);return t._reactRootContainer=i,t[js]=i.current,Sc(t.nodeType===8?t.parentNode:t),Xi(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=zh(a);o.call(c)}}var a=iv(t,0,!1,null,null,!1,!1,"",Hx);return t._reactRootContainer=a,t[js]=a.current,Sc(t.nodeType===8?t.parentNode:t),Xi(function(){Vf(e,a,n,r)}),a}function Kf(t,e,n,r,s){var A=n._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var o=s;s=function(){var a=zh(i);o.call(a)}}Vf(e,i,t,s)}else i=pR(n,e,t,s,r);return zh(i)}PE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ll(e.pendingLanes);n!==0&&(Tw(e,n|1),fr(e,tn()),!(lt&6)&&(Ca=tn()+500,oi()))}break;case 13:Xi(function(){var r=Hs(t,1);if(r!==null){var s=Xn();Jr(r,t,1,s)}}),ov(t,1)}};Fw=function(t){if(t.tag===13){var e=Hs(t,134217728);if(e!==null){var n=Xn();Jr(e,t,134217728,n)}ov(t,134217728)}};DE=function(t){if(t.tag===13){var e=LA(t),n=Hs(t,e);if(n!==null){var r=Xn();Jr(n,t,e,r)}ov(t,e)}};LE=function(){return yt};OE=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};bm=function(t,e,n){switch(e){case"input":if(ym(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rf(r);if(!s)throw Error(Y(90));pE(r),ym(r,s)}}}break;case"textarea":wE(t,n);break;case"select":e=n.value,e!=null&&sa(t,!!n.multiple,e,!1)}};_E=nv;EE=Xi;var mR={usingClientEntryPoint:!1,Events:[mu,qo,Rf,CE,IE,nv]},Cl={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wR={bundleType:Cl.bundleType,version:Cl.version,rendererPackageName:Cl.rendererPackageName,rendererConfig:Cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Js.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FE(t),t===null?null:t.stateNode},findFiberByHostInstance:Cl.findFiberByHostInstance||gR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{Uf=md.inject(wR),fs=md}catch{}}br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mR;br.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lv(e))throw Error(Y(200));return fR(t,e,null,n)};br.createRoot=function(t,e){if(!lv(t))throw Error(Y(299));var n=!1,r="",s=oT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=iv(t,1,!1,null,null,n,!1,r,s),t[js]=e.current,Sc(t.nodeType===8?t.parentNode:t),new av(e)};br.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=FE(e),t=t===null?null:t.stateNode,t};br.flushSync=function(t){return Xi(t)};br.hydrate=function(t,e,n){if(!Hf(e))throw Error(Y(200));return Kf(null,t,e,!0,n)};br.hydrateRoot=function(t,e,n){if(!lv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,A="",i=oT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(A=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=iT(e,null,t,1,n??null,s,!1,A,i),t[js]=e.current,Sc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new jf(e)};br.render=function(t,e,n){if(!Hf(e))throw Error(Y(200));return Kf(null,t,e,!1,n)};br.unmountComponentAtNode=function(t){if(!Hf(t))throw Error(Y(40));return t._reactRootContainer?(Xi(function(){Kf(null,null,t,!1,function(){t._reactRootContainer=null,t[js]=null})}),!0):!1};br.unstable_batchedUpdates=nv;br.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Kf(t,e,n,!1,r)};br.version="18.3.1-next-f1338f8080-20240426";function aT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aT)}catch(t){console.error(t)}}aT(),aE.exports=br;var vR=aE.exports,Kx=vR;hm.createRoot=Kx.createRoot,hm.hydrateRoot=Kx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mc(){return Mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mc.apply(this,arguments)}var _A;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_A||(_A={}));const Gx="popstate";function yR(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:o="",hash:a=""}=fo(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),i0("",{pathname:i,search:o,hash:a},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function n(s,A){let i=s.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=s.location.href,c=a.indexOf("#");o=c===-1?a:a.slice(0,c)}return o+"#"+(typeof A=="string"?A:$h(A))}function r(s,A){Gf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return xR(e,n,r,t)}function Vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BR(){return Math.random().toString(36).substr(2,8)}function zx(t,e){return{usr:t.state,key:t.key,idx:e}}function i0(t,e,n,r){return n===void 0&&(n=null),Mc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fo(e):e,{state:n,key:e&&e.key||r||BR()})}function $h(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:A=!1}=r,i=s.history,o=_A.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Mc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=_A.Pop;let T=d(),C=T==null?null:T-c;c=T,a&&a({action:o,location:y.location,delta:C})}function f(T,C){o=_A.Push;let v=i0(y.location,T,C);n&&n(v,T),c=d()+1;let I=zx(v,c),S=y.createHref(v);try{i.pushState(I,"",S)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(S)}A&&a&&a({action:o,location:y.location,delta:1})}function m(T,C){o=_A.Replace;let v=i0(y.location,T,C);n&&n(v,T),c=d();let I=zx(v,c),S=y.createHref(v);i.replaceState(I,"",S),A&&a&&a({action:o,location:y.location,delta:0})}function w(T){let C=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof T=="string"?T:$h(T);return v=v.replace(/ $/,"%20"),Vt(C,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,C)}let y={get action(){return o},get location(){return t(s,i)},listen(T){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Gx,h),a=T,()=>{s.removeEventListener(Gx,h),a=null}},createHref(T){return e(s,T)},createURL:w,encodeLocation(T){let C=w(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:m,go(T){return i.go(T)}};return y}var $x;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($x||($x={}));function CR(t,e,n){return n===void 0&&(n="/"),IR(t,e,n)}function IR(t,e,n,r){let s=typeof e=="string"?fo(e):e,A=Ia(s.pathname||"/",n);if(A==null)return null;let i=lT(t);_R(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let c=PR(A);o=RR(i[a],c)}return o}function lT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(A,i,o)=>{let a={relativePath:o===void 0?A.path||"":o,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};a.relativePath.startsWith("/")&&(Vt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=MA([r,a.relativePath]),d=n.concat(a);A.children&&A.children.length>0&&(Vt(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lT(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:QR(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var o;if(A.path===""||!((o=A.path)!=null&&o.includes("?")))s(A,i);else for(let a of cT(A.path))s(A,i,a)}),e}function cT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),A=n.replace(/\?$/,"");if(r.length===0)return s?[A,""]:[A];let i=cT(r.join("/")),o=[];return o.push(...i.map(a=>a===""?A:[A,a].join("/"))),s&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function _R(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ER=/^:[\w-]+$/,bR=3,TR=2,FR=1,UR=10,SR=-2,Wx=t=>t==="*";function QR(t,e){let n=t.split("/"),r=n.length;return n.some(Wx)&&(r+=SR),e&&(r+=TR),n.filter(s=>!Wx(s)).reduce((s,A)=>s+(ER.test(A)?bR:A===""?FR:UR),r)}function kR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function RR(t,e,n){let{routesMeta:r}=t,s={},A="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=o0({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:MA([A,h.pathname]),pathnameBase:VR(MA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=MA([A,h.pathnameBase]))}return i}function o0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let y=o[h]||"";i=A.slice(0,A.length-y.length).replace(/(.)\/+$/,"$1")}const w=o[h];return m&&!w?c[f]=void 0:c[f]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function NR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ia(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const DR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LR=t=>DR.test(t);function OR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?fo(t):t,A;if(n)if(LR(n))A=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),Gf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?A=qx(n.substring(1),"/"):A=qx(n,e)}else A=e;return{pathname:A,search:jR(r),hash:HR(s)}}function qx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ip(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cv(t,e){let n=MR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function uv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=fo(t):(s=Mc({},t),Vt(!s.pathname||!s.pathname.includes("?"),Ip("?","pathname","search",s)),Vt(!s.pathname||!s.pathname.includes("#"),Ip("#","pathname","hash",s)),Vt(!s.search||!s.search.includes("#"),Ip("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=OR(s,o),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const MA=t=>t.join("/").replace(/\/\/+/g,"/"),VR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,HR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uT=["post","put","patch","delete"];new Set(uT);const GR=["get",...uT];new Set(GR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vc.apply(this,arguments)}const zf=k.createContext(null),dT=k.createContext(null),Xs=k.createContext(null),$f=k.createContext(null),Ys=k.createContext({outlet:null,matches:[],isDataRoute:!1}),hT=k.createContext(null);function zR(t,e){let{relative:n}=e===void 0?{}:e;za()||Vt(!1);let{basename:r,navigator:s}=k.useContext(Xs),{hash:A,pathname:i,search:o}=Wf(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:MA([r,i])),s.createHref({pathname:a,search:o,hash:A})}function za(){return k.useContext($f)!=null}function ai(){return za()||Vt(!1),k.useContext($f).location}function fT(t){k.useContext(Xs).static||k.useLayoutEffect(t)}function vu(){let{isDataRoute:t}=k.useContext(Ys);return t?oN():$R()}function $R(){za()||Vt(!1);let t=k.useContext(zf),{basename:e,future:n,navigator:r}=k.useContext(Xs),{matches:s}=k.useContext(Ys),{pathname:A}=ai(),i=JSON.stringify(cv(s,n.v7_relativeSplatPath)),o=k.useRef(!1);return fT(()=>{o.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=uv(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:MA([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,A,t])}const WR=k.createContext(null);function qR(t){let e=k.useContext(Ys).outlet;return e&&k.createElement(WR.Provider,{value:t},e)}function Wf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(Xs),{matches:s}=k.useContext(Ys),{pathname:A}=ai(),i=JSON.stringify(cv(s,r.v7_relativeSplatPath));return k.useMemo(()=>uv(t,JSON.parse(i),A,n==="path"),[t,i,A,n])}function JR(t,e){return XR(t,e)}function XR(t,e,n,r){za()||Vt(!1);let{navigator:s}=k.useContext(Xs),{matches:A}=k.useContext(Ys),i=A[A.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=ai(),d;if(e){var h;let T=typeof e=="string"?fo(e):e;a==="/"||(h=T.pathname)!=null&&h.startsWith(a)||Vt(!1),d=T}else d=c;let f=d.pathname||"/",m=f;if(a!=="/"){let T=a.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=CR(t,{pathname:m}),y=nN(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},o,T.params),pathname:MA([a,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?a:MA([a,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),A,n,r);return e&&y?k.createElement($f.Provider,{value:{location:Vc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:_A.Pop}},y):y}function YR(){let t=iN(),e=KR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const ZR=k.createElement(YR,null);class eN extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(Ys.Provider,{value:this.props.routeContext},k.createElement(hT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tN(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(zf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Ys.Provider,{value:e},r)}function nN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var A;if(!n)return null;if(n.errors)t=n.matches;else if((A=r)!=null&&A.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Vt(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||w){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,w=!1,y=null,T=null;n&&(m=o&&h.route.id?o[h.route.id]:void 0,y=h.route.errorElement||ZR,a&&(c<0&&f===0?(aN("route-fallback"),w=!0,T=null):c===f&&(w=!0,T=h.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,f+1)),v=()=>{let I;return m?I=y:w?I=T:h.route.Component?I=k.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,k.createElement(tN,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(eN,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:v(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):v()},null)}var gT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gT||{}),pT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pT||{});function rN(t){let e=k.useContext(zf);return e||Vt(!1),e}function sN(t){let e=k.useContext(dT);return e||Vt(!1),e}function AN(t){let e=k.useContext(Ys);return e||Vt(!1),e}function mT(t){let e=AN(),n=e.matches[e.matches.length-1];return n.route.id||Vt(!1),n.route.id}function iN(){var t;let e=k.useContext(hT),n=sN(),r=mT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oN(){let{router:t}=rN(gT.UseNavigateStable),e=mT(pT.UseNavigateStable),n=k.useRef(!1);return fT(()=>{n.current=!0}),k.useCallback(function(s,A){A===void 0&&(A={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Vc({fromRouteId:e},A)))},[t,e])}const Jx={};function aN(t,e,n){Jx[t]||(Jx[t]=!0)}function lN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wh(t){let{to:e,replace:n,state:r,relative:s}=t;za()||Vt(!1);let{future:A,static:i}=k.useContext(Xs),{matches:o}=k.useContext(Ys),{pathname:a}=ai(),c=vu(),d=uv(e,cv(o,A.v7_relativeSplatPath),a,s==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function cN(t){return qR(t.context)}function pr(t){Vt(!1)}function uN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=_A.Pop,navigator:A,static:i=!1,future:o}=t;za()&&Vt(!1);let a=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:a,navigator:A,static:i,future:Vc({v7_relativeSplatPath:!1},o)}),[a,o,A,i]);typeof r=="string"&&(r=fo(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:w="default"}=r,y=k.useMemo(()=>{let T=Ia(d,a);return T==null?null:{location:{pathname:T,search:h,hash:f,state:m,key:w},navigationType:s}},[a,d,h,f,m,w,s]);return y==null?null:k.createElement(Xs.Provider,{value:c},k.createElement($f.Provider,{children:n,value:y}))}function dN(t){let{children:e,location:n}=t;return JR(a0(e),n)}new Promise(()=>{});function a0(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let A=[...e,s];if(r.type===k.Fragment){n.push.apply(n,a0(r.props.children,A));return}r.type!==pr&&Vt(!1),!r.props.index||!r.props.children||Vt(!1);let i={id:r.props.id||A.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=a0(r.props.children,A)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qh.apply(this,arguments)}function wT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,A;for(A=0;A<r.length;A++)s=r[A],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function hN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fN(t,e){return t.button===0&&(!e||e==="_self")&&!hN(t)}function l0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function gN(t,e){let n=l0(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(A=>{n.append(s,A)})}),n}const pN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],wN="6";try{window.__reactRouterVersion=wN}catch{}const vN=k.createContext({isTransitioning:!1}),yN="startTransition",Xx=ak[yN];function BN(t){let{basename:e,children:n,future:r,window:s}=t,A=k.useRef();A.current==null&&(A.current=yR({window:s,v5Compat:!0}));let i=A.current,[o,a]=k.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=k.useCallback(h=>{c&&Xx?Xx(()=>a(h)):a(h)},[a,c]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.useEffect(()=>lN(r),[r]),k.createElement(uN,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const xN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IN=k.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:A,replace:i,state:o,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=wT(e,pN),{basename:m}=k.useContext(Xs),w,y=!1;if(typeof c=="string"&&CN.test(c)&&(w=c,xN))try{let I=new URL(window.location.href),S=c.startsWith("//")?new URL(I.protocol+c):new URL(c),U=Ia(S.pathname,m);S.origin===I.origin&&U!=null?c=U+S.search+S.hash:y=!0}catch{}let T=zR(c,{relative:s}),C=bN(c,{replace:i,state:o,target:a,preventScrollReset:d,relative:s,viewTransition:h});function v(I){r&&r(I),I.defaultPrevented||C(I)}return k.createElement("a",qh({},f,{href:w||T,onClick:y||A?r:v,ref:n,target:a}))}),_N=k.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:A="",end:i=!1,style:o,to:a,viewTransition:c,children:d}=e,h=wT(e,mN),f=Wf(a,{relative:h.relative}),m=ai(),w=k.useContext(dT),{navigator:y,basename:T}=k.useContext(Xs),C=w!=null&&FN(f)&&c===!0,v=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,I=m.pathname,S=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(I=I.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&T&&(S=Ia(S,T)||S);const U=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let N=I===v||!i&&I.startsWith(v)&&I.charAt(U)==="/",B=S!=null&&(S===v||!i&&S.startsWith(v)&&S.charAt(v.length)==="/"),x={isActive:N,isPending:B,isTransitioning:C},_=N?r:void 0,F;typeof A=="function"?F=A(x):F=[A,N?"active":null,B?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(x):o;return k.createElement(IN,qh({},h,{"aria-current":_,className:F,ref:n,style:R,to:a,viewTransition:c}),typeof d=="function"?d(x):d)});var c0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(c0||(c0={}));var Yx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yx||(Yx={}));function EN(t){let e=k.useContext(zf);return e||Vt(!1),e}function bN(t,e){let{target:n,replace:r,state:s,preventScrollReset:A,relative:i,viewTransition:o}=e===void 0?{}:e,a=vu(),c=ai(),d=Wf(t,{relative:i});return k.useCallback(h=>{if(fN(h,n)){h.preventDefault();let f=r!==void 0?r:$h(c)===$h(d);a(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:o})}},[c,a,d,r,s,n,t,A,i,o])}function TN(t){let e=k.useRef(l0(t)),n=k.useRef(!1),r=ai(),s=k.useMemo(()=>gN(r.search,n.current?null:e.current),[r.search]),A=vu(),i=k.useCallback((o,a)=>{const c=l0(typeof o=="function"?o(s):o);n.current=!0,A("?"+c,a)},[A,s]);return[s,i]}function FN(t,e){e===void 0&&(e={});let n=k.useContext(vN);n==null&&Vt(!1);let{basename:r}=EN(c0.useViewTransitionState),s=Wf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let A=Ia(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Ia(n.nextLocation.pathname,r)||n.nextLocation.pathname;return o0(s.pathname,i)!=null||o0(s.pathname,A)!=null}var ue=(t=>(t.First="1 ",t.Second="2 ",t))(ue||{}),Br=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(Br||{});const Vn=["","","","",""],cs={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Zx=["","","/","","","",""," "],vT=[{shift:ue.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ue.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ue.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ue.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ue.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ue.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ue.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ue.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ue.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ue.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ue.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ue.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ue.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ue.Second,period:6,start:"18:50",end:"19:35",day:"default"}],an={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ue.First,studentsCount:25},{id:"c2",name:"6",shift:ue.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2ndHalf:[],substitutions:[],bellSchedule:vT,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}};var eC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},UN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[n++];e[r++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[n++],i=t[n++],o=t[n++],a=((s&7)<<18|(A&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const A=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},BT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,o=i?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=A>>2,h=(A&3)<<4|o>>4;let f=(o&15)<<2|c>>6,m=c&63;a||(m=64,i||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const A=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,A==null||o==null||c==null||h==null)throw new SN;const f=A<<2|o>>4;if(r.push(f),c!==64){const m=o<<4&240|c>>2;if(r.push(m),h!==64){const w=c<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QN=function(t){const e=yT(t);return BT.encodeByteArray(e,!0)},Jh=function(t){return QN(t).replace(/\./g,"")},xT=function(t){try{return BT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Xh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!kN(n)||(t[n]=Xh(t[n],e[n]));return t}function kN(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=()=>CT().__FIREBASE_DEFAULTS__,NN=()=>{if(typeof process>"u"||typeof eC>"u")return;const t=eC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xT(t[1]);return e&&JSON.parse(e)},dv=()=>{try{return RN()||NN()||PN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IT=()=>{var t;return(t=dv())===null||t===void 0?void 0:t.config},DN=t=>{var e;return(e=dv())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Jh(JSON.stringify(n)),Jh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function hv(){var t;const e=(t=dv())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VN(){return typeof window<"u"||_T()}function _T(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function jN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ET(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bT(){const t=Kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TT(){return!hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jc(){try{return typeof indexedDB=="object"}catch{return!1}}function HN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="FirebaseError";class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=KN,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,go.prototype.create)}}class go{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?GN(A,r):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Yn(s,o,r)}}function GN(t,e){return t.replace(zN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $N(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const A=t[s],i=e[s];if(nC(A)&&nC(i)){if(!Hc(A,i))return!1}else if(A!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function nC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function na(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,A]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Ml(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FT(t,e){const n=new WN(t,e);return n.subscribe.bind(n)}class WN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=_p),s.error===void 0&&(s.error=_p),s.complete===void 0&&(s.complete=_p);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _p(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class ws{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YN(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const A=this.getOrInitializeService({instanceIdentifier:s});r.resolve(A)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[A,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(A);r===o&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),A=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XN(t){return t===Ii?void 0:t}function YN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=[];var nt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(nt||(nt={}));const ST={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},ZN=nt.INFO,eP={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},tP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=eP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let qf=class{constructor(e){this.name=e,this._logLevel=ZN,this._logHandler=tP,this._userLogHandler=null,gv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ST[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}};function nP(t){gv.forEach(e=>{e.setLogLevel(t)})}function rP(t,e){for(const n of gv){let r=null;e&&e.level&&(r=ST[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,A,...i)=>{const o=i.map(a=>{if(a==null)return null;if(typeof a=="string")return a;if(typeof a=="number"||typeof a=="boolean")return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch{return null}}).filter(a=>a).join(" ");A>=(r??s.logLevel)&&t({level:nt[A].toLowerCase(),message:o,args:i,type:s.name})}}}const sP=(t,e)=>e.some(n=>t instanceof n);let rC,sC;function AP(){return rC||(rC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iP(){return sC||(sC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QT=new WeakMap,u0=new WeakMap,kT=new WeakMap,Ep=new WeakMap,pv=new WeakMap;function oP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{n(VA(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&QT.set(n,t)}).catch(()=>{}),pv.set(e,t),e}function aP(t){if(u0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});u0.set(t,e)}let d0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return u0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return VA(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lP(t){d0=t(d0)}function cP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bp(this),e,...n);return kT.set(r,e.sort?e.sort():[e]),VA(r)}:iP().includes(t)?function(...e){return t.apply(bp(this),e),VA(QT.get(this))}:function(...e){return VA(t.apply(bp(this),e))}}function uP(t){return typeof t=="function"?cP(t):(t instanceof IDBTransaction&&aP(t),sP(t,AP())?new Proxy(t,d0):t)}function VA(t){if(t instanceof IDBRequest)return oP(t);if(Ep.has(t))return Ep.get(t);const e=uP(t);return e!==t&&(Ep.set(t,e),pv.set(e,t)),e}const bp=t=>pv.get(t);function dP(t,e,{blocked:n,upgrade:r,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),o=VA(i);return r&&i.addEventListener("upgradeneeded",a=>{r(VA(i.result),a.oldVersion,a.newVersion,VA(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{A&&a.addEventListener("close",()=>A()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const hP=["get","getKey","getAll","getAllKeys","count"],fP=["put","add","delete","clear"],Tp=new Map;function AC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hP.includes(n)))return;const A=async function(i,...o){const a=this.transaction(i,s?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&a.done]))[0]};return Tp.set(e,A),A}lP(t=>({...t,get:(e,n,r)=>AC(e,n)||t.get(e,n,r),has:(e,n)=>!!AC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",h0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new qf("@firebase/app"),mP="@firebase/app-compat",wP="@firebase/analytics-compat",vP="@firebase/analytics",yP="@firebase/app-check-compat",BP="@firebase/app-check",xP="@firebase/auth",CP="@firebase/auth-compat",IP="@firebase/database",_P="@firebase/data-connect",EP="@firebase/database-compat",bP="@firebase/functions",TP="@firebase/functions-compat",FP="@firebase/installations",UP="@firebase/installations-compat",SP="@firebase/messaging",QP="@firebase/messaging-compat",kP="@firebase/performance",RP="@firebase/performance-compat",NP="@firebase/remote-config",PP="@firebase/remote-config-compat",DP="@firebase/storage",LP="@firebase/storage-compat",OP="@firebase/firestore",MP="@firebase/vertexai-preview",VP="@firebase/firestore-compat",jP="firebase",HP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="[DEFAULT]",KP={[Yh]:"fire-core",[mP]:"fire-core-compat",[vP]:"fire-analytics",[wP]:"fire-analytics-compat",[BP]:"fire-app-check",[yP]:"fire-app-check-compat",[xP]:"fire-auth",[CP]:"fire-auth-compat",[IP]:"fire-rtdb",[_P]:"fire-data-connect",[EP]:"fire-rtdb-compat",[bP]:"fire-fn",[TP]:"fire-fn-compat",[FP]:"fire-iid",[UP]:"fire-iid-compat",[SP]:"fire-fcm",[QP]:"fire-fcm-compat",[kP]:"fire-perf",[RP]:"fire-perf-compat",[NP]:"fire-rc",[PP]:"fire-rc-compat",[DP]:"fire-gcs",[LP]:"fire-gcs-compat",[OP]:"fire-fst",[VP]:"fire-fst-compat",[MP]:"fire-vertex","fire-js":"fire-js",[jP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Map,_a=new Map,Ea=new Map;function Kc(t,e){try{t.container.addComponent(e)}catch(n){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function RT(t,e){t.container.addOrOverwriteComponent(e)}function qA(t){const e=t.name;if(Ea.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;Ea.set(e,t);for(const n of WA.values())Kc(n,t);for(const n of _a.values())Kc(n,t);return!0}function NT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function GP(t,e,n=$A){NT(t,e).clearInstance(n)}function PT(t){return t.options!==void 0}function $t(t){return t.settings!==void 0}function zP(){Ea.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new go("app","Firebase",$P);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DT=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ws("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP extends DT{constructor(e,n,r,s){const A=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,i={name:r,automaticDataCollectionEnabled:A};if(e.apiKey!==void 0)super(e,i,s);else{const o=e;super(o.options,i,s)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:A},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Xr(Yh,h0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){wv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Lr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=HP;function mv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$A,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Lr.create("bad-app-name",{appName:String(s)});if(n||(n=IT()),!n)throw Lr.create("no-options");const A=WA.get(s);if(A){if(Hc(n,A.options)&&Hc(r,A.config))return A;throw Lr.create("duplicate-app",{appName:s})}const i=new UT(s);for(const a of Ea.values())i.addComponent(a);const o=new DT(n,r,i);return WA.set(s,o),o}function qP(t,e){if(VN()&&!_T())throw Lr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;PT(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Lr.create("finalization-registry-not-supported",{});const A=""+s(JSON.stringify(r)),i=_a.get(A);if(i)return i.incRefCount(e.releaseOnDeref),i;const o=new UT(A);for(const c of Ea.values())o.addComponent(c);const a=new WP(n,e,A,o);return _a.set(A,a),a}function JP(t=$A){const e=WA.get(t);if(!e&&t===$A&&IT())return mv();if(!e)throw Lr.create("no-app",{appName:t});return e}function XP(){return Array.from(WA.values())}async function wv(t){let e=!1;const n=t.name;WA.has(n)?(e=!0,WA.delete(n)):_a.has(n)&&t.decRefCount()<=0&&(_a.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Xr(t,e,n){var r;let s=(r=KP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const o=[`Unable to register library "${s}" with version "${e}":`];A&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(o.join(" "));return}qA(new ws(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function LT(t,e){if(t!==null&&typeof t!="function")throw Lr.create("invalid-log-argument");rP(t,e)}function OT(t){nP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebase-heartbeat-database",ZP=1,Gc="firebase-heartbeat-store";let Fp=null;function MT(){return Fp||(Fp=dP(YP,ZP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),Fp}async function eD(t){try{const n=(await MT()).transaction(Gc),r=await n.objectStore(Gc).get(VT(t));return await n.done,r}catch(e){if(e instanceof Yn)Gs.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gs.warn(n.message)}}}async function iC(t,e){try{const r=(await MT()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,VT(t)),await r.done}catch(n){if(n instanceof Yn)Gs.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gs.warn(r.message)}}}function VT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1024,nD=30*24*60*60*1e3;class rD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=oC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=nD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=oC(),{heartbeatsToSend:r,unsentEntries:s}=sD(this._heartbeatsCache.heartbeats),A=Jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(n){return Gs.warn(n),""}}}function oC(){return new Date().toISOString().substring(0,10)}function sD(t,e=tD){const n=[];let r=t.slice();for(const s of t){const A=n.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),aC(n)>e){A.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),aC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jc()?HN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function aC(t){return Jh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){qA(new ws("platform-logger",e=>new gP(e),"PRIVATE")),qA(new ws("heartbeat",e=>new rD(e),"PRIVATE")),Xr(Yh,h0,t),Xr(Yh,h0,"esm2017"),Xr("fire-js","")}iD("");const oD=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Yn,SDK_VERSION:li,_DEFAULT_ENTRY_NAME:$A,_addComponent:Kc,_addOrOverwriteComponent:RT,_apps:WA,_clearComponents:zP,_components:Ea,_getProvider:NT,_isFirebaseApp:PT,_isFirebaseServerApp:$t,_registerComponent:qA,_removeServiceInstance:GP,_serverApps:_a,deleteApp:wv,getApp:JP,getApps:XP,initializeApp:mv,initializeServerApp:qP,onLog:LT,registerVersion:Xr,setLogLevel:OT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this._delegate=e,this.firebase=n,Kc(e,new ws("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),wv(this._delegate)))}_getService(e,n=$A){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=$A){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Kc(this._delegate,e)}_addOrOverwriteComponent(e){RT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},lC=new go("app-compat","Firebase",lD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){const e={},n={__esModule:!0,initializeApp:A,app:s,registerVersion:Xr,setLogLevel:OT,onLog:LT,apps:null,SDK_VERSION:li,INTERNAL:{registerComponent:o,removeApp:r,useAsService:a,modularAPIs:oD}};n.default=n,Object.defineProperty(n,"apps",{get:i});function r(c){delete e[c]}function s(c){if(c=c||$A,!tC(e,c))throw lC.create("no-app",{appName:c});return e[c]}s.App=t;function A(c,d={}){const h=mv(c,d);if(tC(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function i(){return Object.keys(e).map(c=>e[c])}function o(c){const d=c.name,h=d.replace("-compat","");if(qA(c)&&c.type==="PUBLIC"){const f=(m=s())=>{if(typeof m[h]!="function")throw lC.create("invalid-app-argument",{appName:d});return m[h]()};c.serviceProps!==void 0&&Xh(f,c.serviceProps),n[h]=f,t.prototype[h]=function(...m){return this._getService.bind(this,d).apply(this,c.multipleInstances?m:[])}}return c.type==="PUBLIC"?n[h]:null}function a(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){const t=cD(aD);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:jT,extendNamespace:e,createSubscribe:FT,ErrorFactory:go,deepExtend:Xh});function e(n){Xh(t,n)}return t}const uD=jT();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new qf("@firebase/app-compat"),dD="@firebase/app-compat",hD="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){Xr(dD,hD,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=CT();if(t.firebase!==void 0){cC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&cC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const As=uD;fD();var gD="firebase",pD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As.registerVersion(gD,pD,"app-compat");var uC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,HT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(B,x){function _(){}_.prototype=x.prototype,B.D=x.prototype,B.prototype=new _,B.prototype.constructor=B,B.C=function(F,R,L){for(var b=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)b[Oe-2]=arguments[Oe];return x.prototype[R].apply(F,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(B,x,_){_||(_=0);var F=Array(16);if(typeof x=="string")for(var R=0;16>R;++R)F[R]=x.charCodeAt(_++)|x.charCodeAt(_++)<<8|x.charCodeAt(_++)<<16|x.charCodeAt(_++)<<24;else for(R=0;16>R;++R)F[R]=x[_++]|x[_++]<<8|x[_++]<<16|x[_++]<<24;x=B.g[0],_=B.g[1],R=B.g[2];var L=B.g[3],b=x+(L^_&(R^L))+F[0]+3614090360&4294967295;x=_+(b<<7&4294967295|b>>>25),b=L+(R^x&(_^R))+F[1]+3905402710&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(_^L&(x^_))+F[2]+606105819&4294967295,R=L+(b<<17&4294967295|b>>>15),b=_+(x^R&(L^x))+F[3]+3250441966&4294967295,_=R+(b<<22&4294967295|b>>>10),b=x+(L^_&(R^L))+F[4]+4118548399&4294967295,x=_+(b<<7&4294967295|b>>>25),b=L+(R^x&(_^R))+F[5]+1200080426&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(_^L&(x^_))+F[6]+2821735955&4294967295,R=L+(b<<17&4294967295|b>>>15),b=_+(x^R&(L^x))+F[7]+4249261313&4294967295,_=R+(b<<22&4294967295|b>>>10),b=x+(L^_&(R^L))+F[8]+1770035416&4294967295,x=_+(b<<7&4294967295|b>>>25),b=L+(R^x&(_^R))+F[9]+2336552879&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(_^L&(x^_))+F[10]+4294925233&4294967295,R=L+(b<<17&4294967295|b>>>15),b=_+(x^R&(L^x))+F[11]+2304563134&4294967295,_=R+(b<<22&4294967295|b>>>10),b=x+(L^_&(R^L))+F[12]+1804603682&4294967295,x=_+(b<<7&4294967295|b>>>25),b=L+(R^x&(_^R))+F[13]+4254626195&4294967295,L=x+(b<<12&4294967295|b>>>20),b=R+(_^L&(x^_))+F[14]+2792965006&4294967295,R=L+(b<<17&4294967295|b>>>15),b=_+(x^R&(L^x))+F[15]+1236535329&4294967295,_=R+(b<<22&4294967295|b>>>10),b=x+(R^L&(_^R))+F[1]+4129170786&4294967295,x=_+(b<<5&4294967295|b>>>27),b=L+(_^R&(x^_))+F[6]+3225465664&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^_&(L^x))+F[11]+643717713&4294967295,R=L+(b<<14&4294967295|b>>>18),b=_+(L^x&(R^L))+F[0]+3921069994&4294967295,_=R+(b<<20&4294967295|b>>>12),b=x+(R^L&(_^R))+F[5]+3593408605&4294967295,x=_+(b<<5&4294967295|b>>>27),b=L+(_^R&(x^_))+F[10]+38016083&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^_&(L^x))+F[15]+3634488961&4294967295,R=L+(b<<14&4294967295|b>>>18),b=_+(L^x&(R^L))+F[4]+3889429448&4294967295,_=R+(b<<20&4294967295|b>>>12),b=x+(R^L&(_^R))+F[9]+568446438&4294967295,x=_+(b<<5&4294967295|b>>>27),b=L+(_^R&(x^_))+F[14]+3275163606&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^_&(L^x))+F[3]+4107603335&4294967295,R=L+(b<<14&4294967295|b>>>18),b=_+(L^x&(R^L))+F[8]+1163531501&4294967295,_=R+(b<<20&4294967295|b>>>12),b=x+(R^L&(_^R))+F[13]+2850285829&4294967295,x=_+(b<<5&4294967295|b>>>27),b=L+(_^R&(x^_))+F[2]+4243563512&4294967295,L=x+(b<<9&4294967295|b>>>23),b=R+(x^_&(L^x))+F[7]+1735328473&4294967295,R=L+(b<<14&4294967295|b>>>18),b=_+(L^x&(R^L))+F[12]+2368359562&4294967295,_=R+(b<<20&4294967295|b>>>12),b=x+(_^R^L)+F[5]+4294588738&4294967295,x=_+(b<<4&4294967295|b>>>28),b=L+(x^_^R)+F[8]+2272392833&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^_)+F[11]+1839030562&4294967295,R=L+(b<<16&4294967295|b>>>16),b=_+(R^L^x)+F[14]+4259657740&4294967295,_=R+(b<<23&4294967295|b>>>9),b=x+(_^R^L)+F[1]+2763975236&4294967295,x=_+(b<<4&4294967295|b>>>28),b=L+(x^_^R)+F[4]+1272893353&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^_)+F[7]+4139469664&4294967295,R=L+(b<<16&4294967295|b>>>16),b=_+(R^L^x)+F[10]+3200236656&4294967295,_=R+(b<<23&4294967295|b>>>9),b=x+(_^R^L)+F[13]+681279174&4294967295,x=_+(b<<4&4294967295|b>>>28),b=L+(x^_^R)+F[0]+3936430074&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^_)+F[3]+3572445317&4294967295,R=L+(b<<16&4294967295|b>>>16),b=_+(R^L^x)+F[6]+76029189&4294967295,_=R+(b<<23&4294967295|b>>>9),b=x+(_^R^L)+F[9]+3654602809&4294967295,x=_+(b<<4&4294967295|b>>>28),b=L+(x^_^R)+F[12]+3873151461&4294967295,L=x+(b<<11&4294967295|b>>>21),b=R+(L^x^_)+F[15]+530742520&4294967295,R=L+(b<<16&4294967295|b>>>16),b=_+(R^L^x)+F[2]+3299628645&4294967295,_=R+(b<<23&4294967295|b>>>9),b=x+(R^(_|~L))+F[0]+4096336452&4294967295,x=_+(b<<6&4294967295|b>>>26),b=L+(_^(x|~R))+F[7]+1126891415&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~_))+F[14]+2878612391&4294967295,R=L+(b<<15&4294967295|b>>>17),b=_+(L^(R|~x))+F[5]+4237533241&4294967295,_=R+(b<<21&4294967295|b>>>11),b=x+(R^(_|~L))+F[12]+1700485571&4294967295,x=_+(b<<6&4294967295|b>>>26),b=L+(_^(x|~R))+F[3]+2399980690&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~_))+F[10]+4293915773&4294967295,R=L+(b<<15&4294967295|b>>>17),b=_+(L^(R|~x))+F[1]+2240044497&4294967295,_=R+(b<<21&4294967295|b>>>11),b=x+(R^(_|~L))+F[8]+1873313359&4294967295,x=_+(b<<6&4294967295|b>>>26),b=L+(_^(x|~R))+F[15]+4264355552&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~_))+F[6]+2734768916&4294967295,R=L+(b<<15&4294967295|b>>>17),b=_+(L^(R|~x))+F[13]+1309151649&4294967295,_=R+(b<<21&4294967295|b>>>11),b=x+(R^(_|~L))+F[4]+4149444226&4294967295,x=_+(b<<6&4294967295|b>>>26),b=L+(_^(x|~R))+F[11]+3174756917&4294967295,L=x+(b<<10&4294967295|b>>>22),b=R+(x^(L|~_))+F[2]+718787259&4294967295,R=L+(b<<15&4294967295|b>>>17),b=_+(L^(R|~x))+F[9]+3951481745&4294967295,B.g[0]=B.g[0]+x&4294967295,B.g[1]=B.g[1]+(R+(b<<21&4294967295|b>>>11))&4294967295,B.g[2]=B.g[2]+R&4294967295,B.g[3]=B.g[3]+L&4294967295}r.prototype.u=function(B,x){x===void 0&&(x=B.length);for(var _=x-this.blockSize,F=this.B,R=this.h,L=0;L<x;){if(R==0)for(;L<=_;)s(this,B,L),L+=this.blockSize;if(typeof B=="string"){for(;L<x;)if(F[R++]=B.charCodeAt(L++),R==this.blockSize){s(this,F),R=0;break}}else for(;L<x;)if(F[R++]=B[L++],R==this.blockSize){s(this,F),R=0;break}}this.h=R,this.o+=x},r.prototype.v=function(){var B=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);B[0]=128;for(var x=1;x<B.length-8;++x)B[x]=0;var _=8*this.o;for(x=B.length-8;x<B.length;++x)B[x]=_&255,_/=256;for(this.u(B),B=Array(16),x=_=0;4>x;++x)for(var F=0;32>F;F+=8)B[_++]=this.g[x]>>>F&255;return B};function A(B,x){var _=o;return Object.prototype.hasOwnProperty.call(_,B)?_[B]:_[B]=x(B)}function i(B,x){this.h=x;for(var _=[],F=!0,R=B.length-1;0<=R;R--){var L=B[R]|0;F&&L==x||(_[R]=L,F=!1)}this.g=_}var o={};function a(B){return-128<=B&&128>B?A(B,function(x){return new i([x|0],0>x?-1:0)}):new i([B|0],0>B?-1:0)}function c(B){if(isNaN(B)||!isFinite(B))return h;if(0>B)return T(c(-B));for(var x=[],_=1,F=0;B>=_;F++)x[F]=B/_|0,_*=4294967296;return new i(x,0)}function d(B,x){if(B.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(B.charAt(0)=="-")return T(d(B.substring(1),x));if(0<=B.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(x,8)),F=h,R=0;R<B.length;R+=8){var L=Math.min(8,B.length-R),b=parseInt(B.substring(R,R+L),x);8>L?(L=c(Math.pow(x,L)),F=F.j(L).add(c(b))):(F=F.j(_),F=F.add(c(b)))}return F}var h=a(0),f=a(1),m=a(16777216);t=i.prototype,t.m=function(){if(y(this))return-T(this).m();for(var B=0,x=1,_=0;_<this.g.length;_++){var F=this.i(_);B+=(0<=F?F:4294967296+F)*x,x*=4294967296}return B},t.toString=function(B){if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(w(this))return"0";if(y(this))return"-"+T(this).toString(B);for(var x=c(Math.pow(B,6)),_=this,F="";;){var R=S(_,x).g;_=C(_,R.j(x));var L=((0<_.g.length?_.g[0]:_.h)>>>0).toString(B);if(_=R,w(_))return L+F;for(;6>L.length;)L="0"+L;F=L+F}},t.i=function(B){return 0>B?0:B<this.g.length?this.g[B]:this.h};function w(B){if(B.h!=0)return!1;for(var x=0;x<B.g.length;x++)if(B.g[x]!=0)return!1;return!0}function y(B){return B.h==-1}t.l=function(B){return B=C(this,B),y(B)?-1:w(B)?0:1};function T(B){for(var x=B.g.length,_=[],F=0;F<x;F++)_[F]=~B.g[F];return new i(_,~B.h).add(f)}t.abs=function(){return y(this)?T(this):this},t.add=function(B){for(var x=Math.max(this.g.length,B.g.length),_=[],F=0,R=0;R<=x;R++){var L=F+(this.i(R)&65535)+(B.i(R)&65535),b=(L>>>16)+(this.i(R)>>>16)+(B.i(R)>>>16);F=b>>>16,L&=65535,b&=65535,_[R]=b<<16|L}return new i(_,_[_.length-1]&-2147483648?-1:0)};function C(B,x){return B.add(T(x))}t.j=function(B){if(w(this)||w(B))return h;if(y(this))return y(B)?T(this).j(T(B)):T(T(this).j(B));if(y(B))return T(this.j(T(B)));if(0>this.l(m)&&0>B.l(m))return c(this.m()*B.m());for(var x=this.g.length+B.g.length,_=[],F=0;F<2*x;F++)_[F]=0;for(F=0;F<this.g.length;F++)for(var R=0;R<B.g.length;R++){var L=this.i(F)>>>16,b=this.i(F)&65535,Oe=B.i(R)>>>16,Ve=B.i(R)&65535;_[2*F+2*R]+=b*Ve,v(_,2*F+2*R),_[2*F+2*R+1]+=L*Ve,v(_,2*F+2*R+1),_[2*F+2*R+1]+=b*Oe,v(_,2*F+2*R+1),_[2*F+2*R+2]+=L*Oe,v(_,2*F+2*R+2)}for(F=0;F<x;F++)_[F]=_[2*F+1]<<16|_[2*F];for(F=x;F<2*x;F++)_[F]=0;return new i(_,0)};function v(B,x){for(;(B[x]&65535)!=B[x];)B[x+1]+=B[x]>>>16,B[x]&=65535,x++}function I(B,x){this.g=B,this.h=x}function S(B,x){if(w(x))throw Error("division by zero");if(w(B))return new I(h,h);if(y(B))return x=S(T(B),x),new I(T(x.g),T(x.h));if(y(x))return x=S(B,T(x)),new I(T(x.g),x.h);if(30<B.g.length){if(y(B)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var _=f,F=x;0>=F.l(B);)_=U(_),F=U(F);var R=N(_,1),L=N(F,1);for(F=N(F,2),_=N(_,2);!w(F);){var b=L.add(F);0>=b.l(B)&&(R=R.add(_),L=b),F=N(F,1),_=N(_,1)}return x=C(B,R.j(x)),new I(R,x)}for(R=h;0<=B.l(x);){for(_=Math.max(1,Math.floor(B.m()/x.m())),F=Math.ceil(Math.log(_)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),L=c(_),b=L.j(x);y(b)||0<b.l(B);)_-=F,L=c(_),b=L.j(x);w(L)&&(L=f),R=R.add(L),B=C(B,b)}return new I(R,B)}t.A=function(B){return S(this,B).h},t.and=function(B){for(var x=Math.max(this.g.length,B.g.length),_=[],F=0;F<x;F++)_[F]=this.i(F)&B.i(F);return new i(_,this.h&B.h)},t.or=function(B){for(var x=Math.max(this.g.length,B.g.length),_=[],F=0;F<x;F++)_[F]=this.i(F)|B.i(F);return new i(_,this.h|B.h)},t.xor=function(B){for(var x=Math.max(this.g.length,B.g.length),_=[],F=0;F<x;F++)_[F]=this.i(F)^B.i(F);return new i(_,this.h^B.h)};function U(B){for(var x=B.g.length+1,_=[],F=0;F<x;F++)_[F]=B.i(F)<<1|B.i(F-1)>>>31;return new i(_,B.h)}function N(B,x){var _=x>>5;x%=32;for(var F=B.g.length-_,R=[],L=0;L<F;L++)R[L]=0<x?B.i(L+_)>>>x|B.i(L+_+1)<<32-x:B.i(L+_);return new i(R,B.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HT=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,ji=i}).apply(typeof uC<"u"?uC:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KT,Vl,GT,oh,f0,zT,$T,WT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var p=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var O=u[E];if(!(O in p))break e;p=p[O]}u=u[u.length-1],E=p[u],g=g(E),g!=E&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var p=0,E=!1,O={next:function(){if(!E&&p<u.length){var K=p++;return{value:g(K,u[K]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),u.apply(g,O)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function w(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(E,O,K){for(var ae=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)ae[Ct-2]=arguments[Ct];return g.prototype[O].apply(E,ae)}}function y(u){const g=u.length;if(0<g){const p=Array(g);for(let E=0;E<g;E++)p[E]=u[E];return p}return[]}function T(u,g){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(a(E)){const O=u.length||0,K=E.length||0;u.length=O+K;for(let ae=0;ae<K;ae++)u[O+ae]=E[ae]}else u.push(E)}}class C{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function S(u){return S[" "](u),u}S[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function N(u,g,p){for(const E in u)g.call(p,u[E],E,u)}function B(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function x(u){const g={};for(const p in u)g[p]=u[p];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(u,g){let p,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(p in E)u[p]=E[p];for(let K=0;K<_.length;K++)p=_[K],Object.prototype.hasOwnProperty.call(E,p)&&(u[p]=E[p])}}function R(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function L(u){o.setTimeout(()=>{throw u},0)}function b(){var u=Q;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Oe{constructor(){this.h=this.g=null}add(g,p){const E=Ve.get();E.set(g,p),this.h?this.h.next=E:this.g=E,this.h=E}}var Ve=new C(()=>new et,u=>u.reset());class et{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,te=!1,Q=new Oe,V=()=>{const u=o.Promise.resolve(void 0);Le=()=>{u.then(z)}};var z=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(p){L(p)}var g=Ve;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}te=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};o.addEventListener("test",p,g),o.removeEventListener("test",p,g)}catch{}return u}();function Ce(u,g){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{S(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:He[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}w(Ce,ne);var He={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),ge=0;function Ae(u,g,p,E,O){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!E,this.ha=O,this.key=++ge,this.da=this.fa=!1}function Qe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function X(u){this.src=u,this.g={},this.h=0}X.prototype.add=function(u,g,p,E,O){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var ae=re(u,g,E,O);return-1<ae?(g=u[ae],p||(g.fa=!1)):(g=new Ae(g,this.src,K,!!E,O),g.fa=p,u.push(g)),g};function ce(u,g){var p=g.type;if(p in u.g){var E=u.g[p],O=Array.prototype.indexOf.call(E,g,void 0),K;(K=0<=O)&&Array.prototype.splice.call(E,O,1),K&&(Qe(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function re(u,g,p,E){for(var O=0;O<u.length;++O){var K=u[O];if(!K.da&&K.listener==g&&K.capture==!!p&&K.ha==E)return O}return-1}var me="closure_lm_"+(1e6*Math.random()|0),ve={};function Te(u,g,p,E,O){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Te(u,g[K],p,E,O);return null}return p=dt(p),u&&u[xe]?u.K(g,p,c(E)?!!E.capture:!1,O):tt(u,g,p,!1,E,O)}function tt(u,g,p,E,O,K){if(!g)throw Error("Invalid event type");var ae=c(O)?!!O.capture:!!O,Ct=We(u);if(Ct||(u[me]=Ct=new X(u)),p=Ct.add(g,p,E,ae,K),p.proxy)return p;if(E=Ye(),p.proxy=E,E.src=u,E.listener=p,u.addEventListener)Re||(O=ae),O===void 0&&(O=!1),u.addEventListener(g.toString(),E,O);else if(u.attachEvent)u.attachEvent(Ue(g.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ye(){function u(p){return g.call(u.src,u.listener,p)}const g=Ne;return u}function Ke(u,g,p,E,O){if(Array.isArray(g))for(var K=0;K<g.length;K++)Ke(u,g[K],p,E,O);else E=c(E)?!!E.capture:!!E,p=dt(p),u&&u[xe]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],p=re(K,p,E,O),-1<p&&(Qe(K[p]),Array.prototype.splice.call(K,p,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=We(u))&&(g=u.g[g.toString()],u=-1,g&&(u=re(g,p,E,O)),(p=-1<u?g[u]:null)&&Ze(p))}function Ze(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[xe])ce(g.i,u);else{var p=u.type,E=u.proxy;g.removeEventListener?g.removeEventListener(p,E,u.capture):g.detachEvent?g.detachEvent(Ue(p),E):g.addListener&&g.removeListener&&g.removeListener(E),(p=We(g))?(ce(p,u),p.h==0&&(p.src=null,g[me]=null)):Qe(u)}}}function Ue(u){return u in ve?ve[u]:ve[u]="on"+u}function Ne(u,g){if(u.da)u=!0;else{g=new Ce(g,this);var p=u.listener,E=u.ha||u.src;u.fa&&Ze(u),u=p.call(E,g)}return u}function We(u){return u=u[me],u instanceof X?u:null}var ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function dt(u){return typeof u=="function"?u:(u[ze]||(u[ze]=function(g){return u.handleEvent(g)}),u[ze])}function qe(){Z.call(this),this.i=new X(this),this.M=this,this.F=null}w(qe,Z),qe.prototype[xe]=!0,qe.prototype.removeEventListener=function(u,g,p,E){Ke(this,u,g,p,E)};function je(u,g){var p,E=u.F;if(E)for(p=[];E;E=E.F)p.push(E);if(u=u.M,E=g.type||g,typeof g=="string")g=new ne(g,u);else if(g instanceof ne)g.target=g.target||u;else{var O=g;g=new ne(E,u),F(g,O)}if(O=!0,p)for(var K=p.length-1;0<=K;K--){var ae=g.g=p[K];O=Xe(ae,E,!0,g)&&O}if(ae=g.g=u,O=Xe(ae,E,!0,g)&&O,O=Xe(ae,E,!1,g)&&O,p)for(K=0;K<p.length;K++)ae=g.g=p[K],O=Xe(ae,E,!1,g)&&O}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],E=0;E<p.length;E++)Qe(p[E]);delete u.g[g],u.h--}}this.F=null},qe.prototype.K=function(u,g,p,E){return this.i.add(String(u),g,!1,p,E)},qe.prototype.L=function(u,g,p,E){return this.i.add(String(u),g,!0,p,E)};function Xe(u,g,p,E){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,K=0;K<g.length;++K){var ae=g[K];if(ae&&!ae.da&&ae.capture==p){var Ct=ae.listener,In=ae.ha||ae.src;ae.fa&&ce(u.i,ae),O=Ct.call(In,E)!==!1&&O}}return O&&!E.defaultPrevented}function Rn(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function zn(u){u.g=Rn(()=>{u.g=null,u.i&&(u.i=!1,zn(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class jr extends Z{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:zn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pt(u){Z.call(this),this.h=u,this.g={}}w(pt,Z);var D=[];function j(u){N(u.g,function(g,p){this.g.hasOwnProperty(p)&&Ze(g)},u),u.g={}}pt.prototype.N=function(){pt.aa.N.call(this),j(this)},pt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var W=o.JSON.stringify,le=o.JSON.parse,be=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function we(){}we.prototype.h=null;function he(u){return u.h||(u.h=u.i())}function Pe(){}var ie={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fe(){ne.call(this,"d")}w(fe,ne);function De(){ne.call(this,"c")}w(De,ne);var ht={},ot=null;function Yt(){return ot=ot||new qe}ht.La="serverreachability";function P(u){ne.call(this,ht.La,u)}w(P,ne);function G(u){const g=Yt();je(g,new P(g))}ht.STAT_EVENT="statevent";function _e(u,g){ne.call(this,ht.STAT_EVENT,u),this.stat=g}w(_e,ne);function oe(u){const g=Yt();je(g,new _e(g,u))}ht.Ma="timingevent";function se(u,g){ne.call(this,ht.Ma,u),this.size=g}w(se,ne);function Be(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Ge(){this.g=!0}Ge.prototype.xa=function(){this.g=!1};function ft(u,g,p,E,O,K){u.info(function(){if(u.g)if(K)for(var ae="",Ct=K.split("&"),In=0;In<Ct.length;In++){var ct=Ct[In].split("=");if(1<ct.length){var Nn=ct[0];ct=ct[1];var Pn=Nn.split("_");ae=2<=Pn.length&&Pn[1]=="type"?ae+(Nn+"="+ct+"&"):ae+(Nn+"=redacted&")}}else ae=null;else ae=K;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+g+`
`+p+`
`+ae})}function Qt(u,g,p,E,O,K,ae){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+g+`
`+p+`
`+K+" "+ae})}function mn(u,g,p,E){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+AA(u,p)+(E?" "+E:"")})}function It(u,g){u.info(function(){return"TIMEOUT: "+g})}Ge.prototype.info=function(){};function AA(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var E=p[u];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var K=O[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ae=1;ae<O.length;ae++)O[ae]=""}}}}return W(p)}catch{return g}}var gt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mt;function ju(){}w(ju,we),ju.prototype.g=function(){return new XMLHttpRequest},ju.prototype.i=function(){return{}},mt=new ju;function iA(u,g,p,E){this.j=u,this.i=g,this.l=p,this.R=E||1,this.U=new pt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yy}function Yy(){this.i=null,this.g="",this.h=!1}var Zy={},Vg={};function jg(u,g,p){u.L=1,u.v=zu(_s(g)),u.m=p,u.P=!0,eB(u,null)}function eB(u,g){u.F=Date.now(),Hu(u),u.A=_s(u.v);var p=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),fB(p.i,"t",E),u.C=0,p=u.j.J,u.h=new Yy,u.g=QB(u.j,p?g:null,!u.m),0<u.O&&(u.M=new jr(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,E=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(D[0]=O.toString()),O=D);for(var K=0;K<O.length;K++){var ae=Te(p,O[K],E||g.handleEvent,!1,g.h||g);if(!ae)break;g.g[ae.key]=ae}g=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),G(),ft(u.i,u.u,u.A,u.l,u.R,u.m)}iA.prototype.ca=function(u){u=u.target;const g=this.M;g&&Es(u)==3?g.j():this.Y(u)},iA.prototype.Y=function(u){try{if(u==this.g)e:{const Pn=Es(this.g);var g=this.g.Ba();const Io=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||BB(this.g)))){this.J||Pn!=4||g==7||(g==8||0>=Io?G(3):G(2)),Hg(this);var p=this.g.Z();this.X=p;t:if(tB(this)){var E=BB(this.g);u="";var O=E.length,K=Es(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),al(this);var ae="";break t}this.h.i=new o.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,u+=this.h.i.decode(E[g],{stream:!(K&&g==O-1)});E.length=0,this.h.g+=u,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=p==200,Qt(this.i,this.u,this.A,this.l,this.R,Pn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ct,In=this.g;if((Ct=In.g?In.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ct)){var ct=Ct;break t}}ct=null}if(p=ct)mn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kg(this,p);else{this.o=!1,this.s=3,oe(12),pi(this),al(this);break e}}if(this.P){p=!0;let Hr;for(;!this.J&&this.C<ae.length;)if(Hr=bQ(this,ae),Hr==Vg){Pn==4&&(this.s=4,oe(14),p=!1),mn(this.i,this.l,null,"[Incomplete Response]");break}else if(Hr==Zy){this.s=4,oe(15),mn(this.i,this.l,ae,"[Invalid Chunk]"),p=!1;break}else mn(this.i,this.l,Hr,null),Kg(this,Hr);if(tB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||ae.length!=0||this.h.h||(this.s=1,oe(16),p=!1),this.o=this.o&&p,!p)mn(this.i,this.l,ae,"[Invalid Chunked Response]"),pi(this),al(this);else if(0<ae.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Jg(Nn),Nn.M=!0,oe(11))}}else mn(this.i,this.l,ae,null),Kg(this,ae);Pn==4&&pi(this),this.o&&!this.J&&(Pn==4?TB(this.j,this):(this.o=!1,Hu(this)))}else KQ(this.g),p==400&&0<ae.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),pi(this),al(this)}}}catch{}finally{}};function tB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function bQ(u,g){var p=u.C,E=g.indexOf(`
`,p);return E==-1?Vg:(p=Number(g.substring(p,E)),isNaN(p)?Zy:(E+=1,E+p>g.length?Vg:(g=g.slice(E,E+p),u.C=E+p,g)))}iA.prototype.cancel=function(){this.J=!0,pi(this)};function Hu(u){u.S=Date.now()+u.I,nB(u,u.I)}function nB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Be(f(u.ba,u),g)}function Hg(u){u.B&&(o.clearTimeout(u.B),u.B=null)}iA.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(It(this.i,this.A),this.L!=2&&(G(),oe(17)),pi(this),this.s=2,al(this)):nB(this,this.S-u)};function al(u){u.j.G==0||u.J||TB(u.j,u)}function pi(u){Hg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,j(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Kg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||Gg(p.h,u))){if(!u.K&&Gg(p.h,u)&&p.G==3){try{var E=p.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Yu(p),Ju(p);else break e;qg(p),oe(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Be(f(p.Za,p),6e3));if(1>=AB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else wi(p,11)}else if((u.K||p.g==u)&&Yu(p),!v(g))for(O=p.Da.g.parse(g),g=0;g<O.length;g++){let ct=O[g];if(p.T=ct[0],ct=ct[1],p.G==2)if(ct[0]=="c"){p.K=ct[1],p.ia=ct[2];const Nn=ct[3];Nn!=null&&(p.la=Nn,p.j.info("VER="+p.la));const Pn=ct[4];Pn!=null&&(p.Aa=Pn,p.j.info("SVER="+p.Aa));const Io=ct[5];Io!=null&&typeof Io=="number"&&0<Io&&(E=1.5*Io,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Hr=u.g;if(Hr){const ed=Hr.g?Hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ed){var K=E.h;K.g||ed.indexOf("spdy")==-1&&ed.indexOf("quic")==-1&&ed.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(zg(K,K.h),K.h=null))}if(E.D){const Xg=Hr.g?Hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Xg&&(E.ya=Xg,Tt(E.I,E.D,Xg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var ae=u;if(E.qa=SB(E,E.J?E.ia:null,E.W),ae.K){iB(E.h,ae);var Ct=ae,In=E.L;In&&(Ct.I=In),Ct.B&&(Hg(Ct),Hu(Ct)),E.g=ae}else EB(E);0<p.i.length&&Xu(p)}else ct[0]!="stop"&&ct[0]!="close"||wi(p,7);else p.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?wi(p,7):Wg(p):ct[0]!="noop"&&p.l&&p.l.ta(ct),p.v=0)}}G(4)}catch{}}var TQ=class{constructor(u,g){this.g=u,this.map=g}};function rB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function AB(u){return u.h?1:u.g?u.g.size:0}function Gg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function zg(u,g){u.g?u.g.add(g):u.h=g}function iB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}rB.prototype.cancel=function(){if(this.i=oB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function oB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return y(u.i)}function FQ(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],p=u.length,E=0;E<p;E++)g.push(u[E]);return g}g=[],p=0;for(E in u)g[p++]=u[E];return g}function UQ(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const E in u)g[p++]=E;return g}}}function aB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=UQ(u),E=FQ(u),O=E.length,K=0;K<O;K++)g.call(void 0,E[K],p&&p[K],u)}var lB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SQ(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var E=u[p].indexOf("="),O=null;if(0<=E){var K=u[p].substring(0,E);O=u[p].substring(E+1)}else K=u[p];g(K,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function mi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof mi){this.h=u.h,Ku(this,u.j),this.o=u.o,this.g=u.g,Gu(this,u.s),this.l=u.l;var g=u.i,p=new ul;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),cB(this,p),this.m=u.m}else u&&(g=String(u).match(lB))?(this.h=!1,Ku(this,g[1]||"",!0),this.o=ll(g[2]||""),this.g=ll(g[3]||"",!0),Gu(this,g[4]),this.l=ll(g[5]||"",!0),cB(this,g[6]||"",!0),this.m=ll(g[7]||"")):(this.h=!1,this.i=new ul(null,this.h))}mi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(cl(g,uB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(cl(g,uB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(cl(p,p.charAt(0)=="/"?RQ:kQ,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",cl(p,PQ)),u.join("")};function _s(u){return new mi(u)}function Ku(u,g,p){u.j=p?ll(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Gu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function cB(u,g,p){g instanceof ul?(u.i=g,DQ(u.i,u.h)):(p||(g=cl(g,NQ)),u.i=new ul(g,u.h))}function Tt(u,g,p){u.i.set(g,p)}function zu(u){return Tt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ll(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cl(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,QQ),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function QQ(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var uB=/[#\/\?@]/g,kQ=/[#\?:]/g,RQ=/[#\?]/g,NQ=/[#\?@]/g,PQ=/#/g;function ul(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function oA(u){u.g||(u.g=new Map,u.h=0,u.i&&SQ(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=ul.prototype,t.add=function(u,g){oA(this),this.i=null,u=xo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function dB(u,g){oA(u),g=xo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function hB(u,g){return oA(u),g=xo(u,g),u.g.has(g)}t.forEach=function(u,g){oA(this),this.g.forEach(function(p,E){p.forEach(function(O){u.call(g,O,E,this)},this)},this)},t.na=function(){oA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let E=0;E<g.length;E++){const O=u[E];for(let K=0;K<O.length;K++)p.push(g[E])}return p},t.V=function(u){oA(this);let g=[];if(typeof u=="string")hB(this,u)&&(g=g.concat(this.g.get(xo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return oA(this),this.i=null,u=xo(this,u),hB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function fB(u,g,p){dB(u,g),0<p.length&&(u.i=null,u.g.set(xo(u,g),y(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var E=g[p];const K=encodeURIComponent(String(E)),ae=this.V(E);for(E=0;E<ae.length;E++){var O=K;ae[E]!==""&&(O+="="+encodeURIComponent(String(ae[E]))),u.push(O)}}return this.i=u.join("&")};function xo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function DQ(u,g){g&&!u.j&&(oA(u),u.i=null,u.g.forEach(function(p,E){var O=E.toLowerCase();E!=O&&(dB(this,E),fB(this,O,p))},u)),u.j=g}function LQ(u,g){const p=new Ge;if(o.Image){const E=new Image;E.onload=m(aA,p,"TestLoadImage: loaded",!0,g,E),E.onerror=m(aA,p,"TestLoadImage: error",!1,g,E),E.onabort=m(aA,p,"TestLoadImage: abort",!1,g,E),E.ontimeout=m(aA,p,"TestLoadImage: timeout",!1,g,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else g(!1)}function OQ(u,g){const p=new Ge,E=new AbortController,O=setTimeout(()=>{E.abort(),aA(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:E.signal}).then(K=>{clearTimeout(O),K.ok?aA(p,"TestPingServer: ok",!0,g):aA(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),aA(p,"TestPingServer: error",!1,g)})}function aA(u,g,p,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(p)}catch{}}function MQ(){this.g=new be}function VQ(u,g,p){const E=p||"";try{aB(u,function(O,K){let ae=O;c(O)&&(ae=W(O)),g.push(E+K+"="+encodeURIComponent(ae))})}catch(O){throw g.push(E+"type="+encodeURIComponent("_badmap")),O}}function $u(u){this.l=u.Ub||null,this.j=u.eb||!1}w($u,we),$u.prototype.g=function(){return new Wu(this.l,this.j)},$u.prototype.i=function(u){return function(){return u}}({});function Wu(u,g){qe.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Wu,qe),t=Wu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,hl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hl(this)),this.g&&(this.readyState=3,hl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function gB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?dl(this):hl(this),this.readyState==3&&gB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,dl(this))},t.Qa=function(u){this.g&&(this.response=u,dl(this))},t.ga=function(){this.g&&dl(this)};function dl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,hl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function hl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function pB(u){let g="";return N(u,function(p,E){g+=E,g+=":",g+=p,g+=`\r
`}),g}function $g(u,g,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=pB(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Tt(u,g,p))}function Gt(u){qe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Gt,qe);var jQ=/^https?$/i,HQ=["POST","PUT"];t=Gt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mt.g(),this.v=this.o?he(this.o):he(mt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){mB(this,K);return}if(u=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)p.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const K of E.keys())p.set(K,E.get(K));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(K=>K.toLowerCase()=="content-type"),O=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(HQ,g,void 0))||E||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ae]of p)this.g.setRequestHeader(K,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yB(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){mB(this,K)}};function mB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,wB(u),qu(u)}function wB(u){u.A||(u.A=!0,je(u,"complete"),je(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,je(this,"complete"),je(this,"abort"),qu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qu(this,!0)),Gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vB(this):this.bb())},t.bb=function(){vB(this)};function vB(u){if(u.h&&typeof i<"u"&&(!u.v[1]||Es(u)!=4||u.Z()!=2)){if(u.u&&Es(u)==4)Rn(u.Ea,0,u);else if(je(u,"readystatechange"),Es(u)==4){u.h=!1;try{const ae=u.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var E;if(E=ae===0){var O=String(u.D).match(lB)[1]||null;!O&&o.self&&o.self.location&&(O=o.self.location.protocol.slice(0,-1)),E=!jQ.test(O?O.toLowerCase():"")}p=E}if(p)je(u,"complete"),je(u,"success");else{u.m=6;try{var K=2<Es(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",wB(u)}}finally{qu(u)}}}}function qu(u,g){if(u.g){yB(u);const p=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||je(u,"ready");try{p.onreadystatechange=E}catch{}}}function yB(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Es(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Es(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),le(g)}};function BB(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function KQ(u){const g={};u=(u.g&&2<=Es(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(v(u[E]))continue;var p=R(u[E]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const K=g[O]||[];g[O]=K,K.push(p)}B(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fl(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function xB(u){this.Aa=0,this.i=[],this.j=new Ge,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fl("baseRetryDelayMs",5e3,u),this.cb=fl("retryDelaySeedMs",1e4,u),this.Wa=fl("forwardChannelMaxRetries",2,u),this.wa=fl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rB(u&&u.concurrentRequestLimit),this.Da=new MQ,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xB.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,E){oe(0),this.W=u,this.H=g||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=SB(this,null,this.W),Xu(this)};function Wg(u){if(CB(u),u.G==3){var g=u.U++,p=_s(u.I);if(Tt(p,"SID",u.K),Tt(p,"RID",g),Tt(p,"TYPE","terminate"),gl(u,p),g=new iA(u,u.j,g),g.L=2,g.v=zu(_s(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&o.Image&&(new Image().src=g.v,p=!0),p||(g.g=QB(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Hu(g)}UB(u)}function Ju(u){u.g&&(Jg(u),u.g.cancel(),u.g=null)}function CB(u){Ju(u),u.u&&(o.clearTimeout(u.u),u.u=null),Yu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function Xu(u){if(!sB(u.h)&&!u.s){u.s=!0;var g=u.Ga;Le||V(),te||(Le(),te=!0),Q.add(g,u),u.B=0}}function GQ(u,g){return AB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Be(f(u.Ga,u,g),FB(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new iA(this,this.j,u);let K=this.o;if(this.S&&(K?(K=x(K),F(K,this.S)):K=this.S),this.m!==null||this.O||(O.H=K,K=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=_B(this,O,g),p=_s(this.I),Tt(p,"RID",u),Tt(p,"CVER",22),this.D&&Tt(p,"X-HTTP-Session-Id",this.D),gl(this,p),K&&(this.O?g="headers="+encodeURIComponent(String(pB(K)))+"&"+g:this.m&&$g(p,this.m,K)),zg(this.h,O),this.Ua&&Tt(p,"TYPE","init"),this.P?(Tt(p,"$req",g),Tt(p,"SID","null"),O.T=!0,jg(O,p,null)):jg(O,p,g),this.G=2}}else this.G==3&&(u?IB(this,u):this.i.length==0||sB(this.h)||IB(this))};function IB(u,g){var p;g?p=g.l:p=u.U++;const E=_s(u.I);Tt(E,"SID",u.K),Tt(E,"RID",p),Tt(E,"AID",u.T),gl(u,E),u.m&&u.o&&$g(E,u.m,u.o),p=new iA(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=_B(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),zg(u.h,p),jg(p,E,g)}function gl(u,g){u.H&&N(u.H,function(p,E){Tt(g,E,p)}),u.l&&aB({},function(p,E){Tt(g,E,p)})}function _B(u,g,p){p=Math.min(u.i.length,p);var E=u.l?f(u.l.Na,u.l,u):null;e:{var O=u.i;let K=-1;for(;;){const ae=["count="+p];K==-1?0<p?(K=O[0].g,ae.push("ofs="+K)):K=0:ae.push("ofs="+K);let Ct=!0;for(let In=0;In<p;In++){let ct=O[In].g;const Nn=O[In].map;if(ct-=K,0>ct)K=Math.max(0,O[In].g-100),Ct=!1;else try{VQ(Nn,ae,"req"+ct+"_")}catch{E&&E(Nn)}}if(Ct){E=ae.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,E}function EB(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Le||V(),te||(Le(),te=!0),Q.add(g,u),u.v=0}}function qg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Be(f(u.Fa,u),FB(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,bB(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Be(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),Ju(this),bB(this))};function Jg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function bB(u){u.g=new iA(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=_s(u.qa);Tt(g,"RID","rpc"),Tt(g,"SID",u.K),Tt(g,"AID",u.T),Tt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Tt(g,"TO",u.ja),Tt(g,"TYPE","xmlhttp"),gl(u,g),u.m&&u.o&&$g(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=zu(_s(g)),p.m=null,p.P=!0,eB(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Ju(this),qg(this),oe(19))};function Yu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function TB(u,g){var p=null;if(u.g==g){Yu(u),Jg(u),u.g=null;var E=2}else if(Gg(u.h,g))p=g.D,iB(u.h,g),E=1;else return;if(u.G!=0){if(g.o)if(E==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var O=u.B;E=Yt(),je(E,new se(E,p)),Xu(u)}else EB(u);else if(O=g.s,O==3||O==0&&0<g.X||!(E==1&&GQ(u,g)||E==2&&qg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),O){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function FB(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function wi(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),E=u.Xa;const O=!E;E=new mi(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ku(E,"https"),zu(E),O?LQ(E.toString(),p):OQ(E.toString(),p)}else oe(2);u.G=0,u.l&&u.l.sa(g),UB(u),CB(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function UB(u){if(u.G=0,u.ka=[],u.l){const g=oB(u.h);(g.length!=0||u.i.length!=0)&&(T(u.ka,g),T(u.ka,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.ra()}}function SB(u,g,p){var E=p instanceof mi?_s(p):new mi(p);if(E.g!="")g&&(E.g=g+"."+E.g),Gu(E,E.s);else{var O=o.location;E=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var K=new mi(null);E&&Ku(K,E),g&&(K.g=g),O&&Gu(K,O),p&&(K.l=p),E=K}return p=u.D,g=u.ya,p&&g&&Tt(E,p,g),Tt(E,"VER",u.la),gl(u,E),E}function QB(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Gt(new $u({eb:p})):new Gt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kB(){}t=kB.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Zu(){}Zu.prototype.g=function(u,g){return new gr(u,g)};function gr(u,g){qe.call(this),this.g=new xB(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!v(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Co(this)}w(gr,qe),gr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gr.prototype.close=function(){Wg(this.g)},gr.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=W(u),u=p);g.i.push(new TQ(g.Ya++,u)),g.G==3&&Xu(g)},gr.prototype.N=function(){this.g.l=null,delete this.j,Wg(this.g),delete this.g,gr.aa.N.call(this)};function RB(u){fe.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}w(RB,fe);function NB(){De.call(this),this.status=1}w(NB,De);function Co(u){this.g=u}w(Co,kB),Co.prototype.ua=function(){je(this.g,"a")},Co.prototype.ta=function(u){je(this.g,new RB(u))},Co.prototype.sa=function(u){je(this.g,new NB)},Co.prototype.ra=function(){je(this.g,"b")},Zu.prototype.createWebChannel=Zu.prototype.g,gr.prototype.send=gr.prototype.o,gr.prototype.open=gr.prototype.m,gr.prototype.close=gr.prototype.close,WT=function(){return new Zu},$T=function(){return Yt()},zT=ht,f0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,oh=gt,gi.COMPLETE="complete",GT=gi,Pe.EventType=ie,ie.OPEN="a",ie.CLOSE="b",ie.ERROR="c",ie.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Vl=Pe,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,KT=Gt}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const dC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new qf("@firebase/firestore");function Do(){return JA.logLevel}function mD(t){JA.setLogLevel(t)}function J(t,...e){if(JA.logLevel<=nt.DEBUG){const n=e.map(vv);JA.debug(`Firestore (${Wa}): ${t}`,...n)}}function nn(t,...e){if(JA.logLevel<=nt.ERROR){const n=e.map(vv);JA.error(`Firestore (${Wa}): ${t}`,...n)}}function vs(t,...e){if(JA.logLevel<=nt.WARN){const n=e.map(vv);JA.warn(`Firestore (${Wa}): ${t}`,...n)}}function vv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t="Unexpected state"){const e=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: `+t;throw nn(e),new Error(e)}function Se(t,e){t||Ee()}function wD(t,e){t||Ee()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bn.UNAUTHENTICATED))}shutdown(){}}class yD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BD{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i;const s=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let A=new Sn;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Sn,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const a=A;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},o=a=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Sn)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new qT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new Bn(e)}}class xD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ID{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _D{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);const r=A=>{A.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,J("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>r(A))};const s=A=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new ID(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ED(40);for(let A=0;A<s.length;++A)r.length<20&&s[A]<n&&(r+=e.charAt(s[A]%e.length))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function ba(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function XT(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Lt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Lt(0,0))}static max(){return new ke(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(),r===void 0?r=e.length-n:r>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const A=e.get(s),i=n.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class At extends zc{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new At(n)}static emptyPath(){return new At([])}}const bD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends zc{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return bD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const A=()=>{if(r.length===0)throw new q(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new q(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new q(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(r+=o,s++):(A(),s++)}if(A(),i)throw new q(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(At.fromString(e))}static fromName(e){return new de(At.fromString(e).popFirst(5))}static empty(){return new de(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new At(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function g0(t){return t.fields.find(e=>e.kind===2)}function _i(t){return t.fields.filter(e=>e.kind!==2)}Zh.UNKNOWN_ID=-1;class ah{constructor(e,n){this.fieldPath=e,this.kind=n}}class $c{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new $c(0,Er.min())}}function YT(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(r===1e9?new Lt(n+1,0):new Lt(n,r));return new Er(s,de.empty(),e)}function ZT(t){return new Er(t.readTime,t.key,-1)}class Er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Er(ke.min(),de.empty(),-1)}static max(){return new Er(ke.max(),de.empty(),-1)}}function yv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==eF)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(r,s)},this.catchCallback=A=>{this.wrapFailure(n,A).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,A=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++A,i&&A===s&&n()},a=>r(a))}),i=!0,A===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,A)=>{r.push(n.call(this,s,A))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const A=e.length,i=new Array(A);let o=0;for(let a=0;a<A;a++){const c=a;n(e[c]).next(d=>{i[c]=d,++o,o===A&&r(i)},d=>s(d))}})}static doWhile(e,n){return new M((r,s)=>{const A=()=>{e()===!0?n().next(()=>{A()},s):r()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Sn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new lc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Bv(r.target.error);this.V.reject(new lc(e,s))}}static open(e,n,r,s){try{return new Jf(n,e.transaction(s,r))}catch(A){throw new lc(n,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(J("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new FD(n)}}class ps{constructor(e,n,r){this.name=e,this.version=n,this.p=r,ps.S(Kt())===12.2&&nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return J("SimpleDb","Removing database:",e),Ei(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!jc())return!1;if(ps.v())return!0;const e=Kt(),n=ps.S(e),r=0<n&&n<10,s=nF(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(J("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;n(i)},s.onblocked=()=>{r(new lc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?r(new q(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new q(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new lc(e,i))},s.onupgradeneeded=A=>{J("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{J("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const A=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=Jf.open(this.db,e,A?"readonly":"readwrite",r),a=s(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,c=a.name!=="FirebaseError"&&i<3;if(J("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function nF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class TD{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ei(this.B.delete())}}class lc extends q{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ui(t){return t.name==="IndexedDbTransactionError"}class FD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(J("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(J("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ei(r)}add(e){return J("SimpleDb","ADD",this.store.name,e,e),Ei(this.store.add(e))}get(e){return Ei(this.store.get(e)).next(n=>(n===void 0&&(n=null),J("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return J("SimpleDb","DELETE",this.store.name,e),Ei(this.store.delete(e))}count(){return J("SimpleDb","COUNT",this.store.name),Ei(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(r.range);return new M((i,o)=>{A.onerror=a=>{o(a.target.error)},A.onsuccess=a=>{i(a.target.result)}})}{const A=this.cursor(r),i=[];return this.W(A,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((s,A)=>{r.onerror=i=>{A(i.target.error)},r.onsuccess=i=>{s(i.target.result)}})}j(e,n){J("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(A,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new M((r,s)=>{n.onerror=A=>{const i=Bv(A.target.error);s(i)},n.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new M((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void s();const a=new TD(o),c=n(o.primaryKey,o.value,a);if(c instanceof M){const d=c.catch(h=>(a.done(),M.reject(h)));r.push(d)}a.isDone?s():a.K===null?o.continue():o.continue(a.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ei(t){return new M((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Bv(r.target.error);n(s)}})}let hC=!1;function Bv(t){const e=ps.S(Kt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hC||(hC=!0,setTimeout(()=>{throw r},0)),r}}return t}class UD{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){J("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{J("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){ui(n)?J("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ci(n)}await this.X(6e4)})}}class SD{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,A=!0;return M.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return J("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(o=>{s-=o,r.add(i)});A=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(o=>(J("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((s,A)=>{const i=ZT(A);yv(i,r)>0&&(r=i)}),new Er(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lr.oe=-1;function yu(t){return t==null}function Wc(t){return t===0&&1/t==-1/0}function rF(t){return typeof t=="number"&&Number.isInteger(t)&&!Wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fC(e)),e=QD(t.get(n),e);return fC(e)}function QD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const A=t.charAt(s);switch(A){case"\0":n+="";break;case"":n+="";break;default:n+=A}}return n}function fC(t){return t+""}function us(t){const e=t.length;if(Se(e>=2),e===2)return Se(t.charAt(0)===""&&t.charAt(1)===""),At.emptyPath();const n=e-2,r=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>n)&&Ee(),t.charAt(i+1)){case"":const o=t.substring(A,i);let a;s.length===0?a=o:(s+=o,a=s,s=""),r.push(a);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:Ee()}A=i+2}return new At(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e){return[t,Zn(e)]}function sF(t,e,n){return[t,Zn(e),n]}const kD={},RD=["prefixPath","collectionGroup","readTime","documentId"],ND=["prefixPath","collectionGroup","documentId"],PD=["collectionGroup","readTime","prefixPath","documentId"],DD=["canonicalId","targetId"],LD=["targetId","path"],OD=["path","targetId"],MD=["collectionId","parent"],VD=["indexId","uid"],jD=["uid","sequenceNumber"],HD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],KD=["indexId","uid","orderedDocumentKey"],GD=["userId","collectionPath","documentId"],zD=["userId","collectionPath","largestBatchId"],$D=["userId","collectionGroup","largestBatchId"],AF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WD=[...AF,"documentOverlays"],iF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oF=iF,xv=[...oF,"indexConfiguration","indexState","indexEntries"],qD=xv,JD=[...xv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends tF{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function pn(t,e){const n=pe(t);return ps.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=n?r(e.key,n):1,n&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,n,r,s,A){this.key=e,this.value=n,this.color=r??bn.RED,this.left=s??bn.EMPTY,this.right=A??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,A){return new bn(e??this.key,n??this.value,r??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const A=r(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,n,r),null):A===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,r,s,A){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Eo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new cr([])}unionWith(e){let n=new xt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new lF("Invalid base64 string: "+A):A}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const YD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(t){if(Se(!!t),typeof t=="string"){let e=0;const n=YD.exec(t);if(Se(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function XA(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cv(t){const e=t.mapValue.fields.__previous_value__;return Xf(e)?Cv(e):e}function qc(t){const e=zs(t.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,s,A,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class YA{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new YA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof YA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ch={nullValue:"NULL_VALUE"};function Yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xf(t)?4:cF(t)?9007199254740991:Yf(t)?10:11:Ee()}function ys(t,e){if(t===e)return!0;const n=Yi(t);if(n!==Yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qc(t).isEqual(qc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=zs(s.timestampValue),o=zs(A.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return XA(s.bytesValue).isEqual(XA(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return Rt(s.geoPointValue.latitude)===Rt(A.geoPointValue.latitude)&&Rt(s.geoPointValue.longitude)===Rt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return Rt(s.integerValue)===Rt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=Rt(s.doubleValue),o=Rt(A.doubleValue);return i===o?Wc(i)===Wc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],ys);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},o=A.mapValue.fields||{};if(pC(i)!==pC(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!ys(i[a],o[a])))return!1;return!0}(t,e);default:return Ee()}}function Jc(t,e){return(t.values||[]).find(n=>ys(n,e))!==void 0}function ZA(t,e){if(t===e)return 0;const n=Yi(t),r=Yi(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(A,i){const o=Rt(A.integerValue||A.doubleValue),a=Rt(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return wC(t.timestampValue,e.timestampValue);case 4:return wC(qc(t),qc(e));case 5:return $e(t.stringValue,e.stringValue);case 6:return function(A,i){const o=XA(A),a=XA(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const o=A.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const d=$e(o[c],a[c]);if(d!==0)return d}return $e(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const o=$e(Rt(A.latitude),Rt(i.latitude));return o!==0?o:$e(Rt(A.longitude),Rt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vC(t.arrayValue,e.arrayValue);case 10:return function(A,i){var o,a,c,d;const h=A.fields||{},f=i.fields||{},m=(o=h.value)===null||o===void 0?void 0:o.arrayValue,w=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=$e(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:vC(m,w)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===EA.mapValue&&i===EA.mapValue)return 0;if(A===EA.mapValue)return 1;if(i===EA.mapValue)return-1;const o=A.fields||{},a=Object.keys(o),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=$e(a[h],d[h]);if(f!==0)return f;const m=ZA(o[a[h]],c[d[h]]);if(m!==0)return m}return $e(a.length,d.length)}(t.mapValue,e.mapValue);default:throw Ee()}}function wC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=zs(t),r=zs(e),s=$e(n.seconds,r.seconds);return s!==0?s:$e(n.nanos,r.nanos)}function vC(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const A=ZA(n[s],r[s]);if(A)return A}return $e(n.length,r.length)}function Ta(t){return m0(t)}function m0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return XA(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const A of n.values||[])s?s=!1:r+=",",r+=m0(A);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",A=!0;for(const i of r)A?A=!1:s+=",",s+=`${i}:${m0(n.fields[i])}`;return s+"}"}(t.mapValue):Ee()}function Zi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function w0(t){return!!t&&"integerValue"in t}function Xc(t){return!!t&&"arrayValue"in t}function yC(t){return!!t&&"nullValue"in t}function BC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uh(t){return!!t&&"mapValue"in t}function Yf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function cc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return po(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const uF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function e4(t){return"nullValue"in t?ch:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zi(YA.empty(),de.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Yf(t)?uF:{mapValue:{}}:Ee()}function t4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zi(YA.empty(),de.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?uF:"mapValue"in t?Yf(t)?{mapValue:{}}:EA:Ee()}function xC(t,e){const n=ZA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function CC(t,e){const n=ZA(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!uh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,s),r={},s=[],n=o.popLast()}i?r[o.lastSegment()]=cc(i):s.push(o.lastSegment())});const A=this.getFieldsMap(n);this.applyChanges(A,r,s)}delete(e){const n=this.field(e.popLast());uh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];uh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){po(n,(s,A)=>e[s]=A);for(const s of r)delete e[s]}clone(){return new Tn(cc(this.value))}}function dF(t){const e=[];return po(t.fields,(n,r)=>{const s=new Pt([n]);if(uh(r)){const A=dF(r.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,A,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=A,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ut(e,0,ke.min(),ke.min(),ke.min(),Tn.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,ke.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,ke.min(),ke.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ke.min(),ke.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.position=e,this.inclusive=n}}function IC(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?r=de.comparator(de.fromName(i.referenceValue),n.key):r=ZA(i,n.data.field(A.field)),A.dir==="desc"&&(r*=-1),r!==0)break}return r}function _C(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ys(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n="asc"){this.field=e,this.dir=n}}function n4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{}class it extends hF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new r4(e,n,r):n==="array-contains"?new i4(e,r):n==="in"?new vF(e,r):n==="not-in"?new o4(e,r):n==="array-contains-any"?new a4(e,r):new it(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new s4(e,r):new A4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ZA(n,this.value)):n!==null&&Yi(this.value)===Yi(n)&&this.matchesComparison(ZA(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends hF{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new vt(e,n)}matches(e){return Fa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fa(t){return t.op==="and"}function v0(t){return t.op==="or"}function Iv(t){return fF(t)&&Fa(t)}function fF(t){for(const e of t.filters)if(e instanceof vt)return!1;return!0}function y0(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+Ta(t.value);if(Iv(t))return t.filters.map(e=>y0(e)).join(",");{const e=t.filters.map(n=>y0(n)).join(",");return`${t.op}(${e})`}}function gF(t,e){return t instanceof it?function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&ys(r.value,s.value)}(t,e):t instanceof vt?function(r,s){return s instanceof vt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((A,i,o)=>A&&gF(i,s.filters[o]),!0):!1}(t,e):void Ee()}function pF(t,e){const n=t.filters.concat(e);return vt.create(n,t.op)}function mF(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${Ta(n.value)}`}(t):t instanceof vt?function(n){return n.op.toString()+" {"+n.getFilters().map(mF).join(" ,")+"}"}(t):"Filter"}class r4 extends it{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class s4 extends it{constructor(e,n){super(e,"in",n),this.keys=wF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A4 extends it{constructor(e,n){super(e,"not-in",n),this.keys=wF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class i4 extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xc(n)&&Jc(n.arrayValue,this.value)}}class vF extends it{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jc(this.value.arrayValue,n)}}class o4 extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jc(this.value.arrayValue,n)}}class a4 extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n=null,r=[],s=[],A=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=A,this.startAt=i,this.endAt=o,this.ue=null}}function B0(t,e=null,n=[],r=[],s=null,A=null,i=null){return new l4(t,e,n,r,s,A,i)}function eo(t){const e=pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>y0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(A){return A.field.canonicalString()+A.dir}(r)).join(","),yu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ta(r)).join(",")),e.ue=n}return e.ue}function Bu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_C(t.startAt,e.startAt)&&_C(t.endAt,e.endAt)}function ef(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function tf(t,e){return t.filters.filter(n=>n instanceof it&&n.field.isEqual(e))}function EC(t,e,n){let r=ch,s=!0;for(const A of tf(t,e)){let i=ch,o=!0;switch(A.op){case"<":case"<=":i=e4(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,o=!1;break;case"!=":case"not-in":i=ch}xC({value:r,inclusive:s},{value:i,inclusive:o})<0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];xC({value:r,inclusive:s},{value:i,inclusive:n.inclusive})<0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}function bC(t,e,n){let r=EA,s=!0;for(const A of tf(t,e)){let i=EA,o=!0;switch(A.op){case">=":case">":i=t4(A.value),o=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,o=!1;break;case"!=":case"not-in":i=EA}CC({value:r,inclusive:s},{value:i,inclusive:o})>0&&(r=i,s=o)}if(n!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=n.position[A];CC({value:r,inclusive:s},{value:i,inclusive:n.inclusive})>0&&(r=i,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n=null,r=[],s=[],A=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=A,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function yF(t,e,n,r,s,A,i,o){return new Zs(t,e,n,r,s,A,i,o)}function qa(t){return new Zs(t)}function TC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _v(t){return t.collectionGroup!==null}function ca(t){const e=pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),n.add(A.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new xt(Pt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(A=>{n.has(A.canonicalString())||A.isKeyField()||e.ce.push(new Yc(A,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new Yc(Pt.keyField(),r))}return e.ce}function er(t){const e=pe(t);return e.le||(e.le=c4(e,ca(t))),e.le}function c4(t,e){if(t.limitType==="F")return B0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new Yc(s.field,A)});const n=t.endAt?new ei(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ei(t.startAt.position,t.startAt.inclusive):null;return B0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function x0(t,e){const n=t.filters.concat([e]);return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nf(t,e,n){return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xu(t,e){return Bu(er(t),er(e))&&t.limitType===e.limitType}function BF(t){return`${eo(er(t))}|lt:${t.limitType}`}function Lo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mF(s)).join(", ")}]`),yu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ta(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ta(s)).join(",")),`Target(${r})`}(er(t))}; limitType=${t.limitType})`}function Cu(t,e){return e.isFoundDocument()&&function(r,s){const A=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(A):de.isDocumentKey(r.path)?r.path.isEqual(A):r.path.isImmediateParentOf(A)}(t,e)&&function(r,s){for(const A of ca(r))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const A of r.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,o,a){const c=IC(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,ca(r),s)||r.endAt&&!function(i,o,a){const c=IC(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,ca(r),s))}(t,e)}function xF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CF(t){return(e,n)=>{let r=!1;for(const s of ca(t)){const A=u4(s,e,n);if(A!==0)return A;r=r||s.field.isKeyField()}return 0}}function u4(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(A,i,o){const a=i.data.field(A),c=o.data.field(A);return a!==null&&c!==null?ZA(a,c):Ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,A]of r)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){po(this.inner,(n,r)=>{for(const[s,A]of r)e(s,A)})}isEmpty(){return aF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new bt(de.comparator);function ur(){return d4}const IF=new bt(de.comparator);function jl(...t){let e=IF;for(const n of t)e=e.insert(n.key,n);return e}function _F(t){let e=IF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ds(){return uc()}function EF(){return uc()}function uc(){return new di(t=>t.toString(),(t,e)=>t.isEqual(e))}const h4=new bt(de.comparator),f4=new xt(de.comparator);function Je(...t){let e=f4;for(const n of t)e=e.add(n);return e}const g4=new xt($e);function Ev(){return g4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function bF(t){return{integerValue:""+t}}function TF(t,e){return rF(e)?bF(e):bv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(){this._=void 0}}function p4(t,e,n){return t instanceof Ua?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&Xf(A)&&(A=Cv(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(n,e):t instanceof to?UF(t,e):t instanceof no?SF(t,e):function(s,A){const i=FF(s,A),o=FC(i)+FC(s.Pe);return w0(i)&&w0(s.Pe)?bF(o):bv(s.serializer,o)}(t,e)}function m4(t,e,n){return t instanceof to?UF(t,e):t instanceof no?SF(t,e):n}function FF(t,e){return t instanceof Sa?function(r){return w0(r)||function(A){return!!A&&"doubleValue"in A}(r)}(e)?e:{integerValue:0}:null}class Ua extends Zf{}class to extends Zf{constructor(e){super(),this.elements=e}}function UF(t,e){const n=QF(e);for(const r of t.elements)n.some(s=>ys(s,r))||n.push(r);return{arrayValue:{values:n}}}class no extends Zf{constructor(e){super(),this.elements=e}}function SF(t,e){let n=QF(e);for(const r of t.elements)n=n.filter(s=>!ys(s,r));return{arrayValue:{values:n}}}class Sa extends Zf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function FC(t){return Rt(t.integerValue||t.doubleValue)}function QF(t){return Xc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.field=e,this.transform=n}}function w4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof to&&s instanceof to||r instanceof no&&s instanceof no?ba(r.elements,s.elements,ys):r instanceof Sa&&s instanceof Sa?ys(r.Pe,s.Pe):r instanceof Ua&&s instanceof Ua}(t.transform,e.transform)}class v4{constructor(e,n){this.version=e,this.transformResults=n}}class Dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dt}static exists(e){return new Dt(void 0,e)}static updateTime(e){return new Dt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class eg{}function kF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xa(t.key,Dt.none()):new Ja(t.key,t.data,Dt.none());{const n=t.data,r=Tn.empty();let s=new xt(Pt.comparator);for(let A of e.fields)if(!s.has(A)){let i=n.field(A);i===null&&A.length>1&&(A=A.popLast(),i=n.field(A)),i===null?r.delete(A):r.set(A,i),s=s.add(A)}return new eA(t.key,r,new cr(s.toArray()),Dt.none())}}function y4(t,e,n){t instanceof Ja?function(s,A,i){const o=s.value.clone(),a=SC(s.fieldTransforms,A,i.transformResults);o.setAll(a),A.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof eA?function(s,A,i){if(!dh(s.precondition,A))return void A.convertToUnknownDocument(i.version);const o=SC(s.fieldTransforms,A,i.transformResults),a=A.data;a.setAll(RF(s)),a.setAll(o),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function dc(t,e,n,r){return t instanceof Ja?function(A,i,o,a){if(!dh(A.precondition,i))return o;const c=A.value.clone(),d=QC(A.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof eA?function(A,i,o,a){if(!dh(A.precondition,i))return o;const c=QC(A.fieldTransforms,a,i),d=i.data;return d.setAll(RF(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(A,i,o){return dh(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function B4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),A=FF(r.transform,s||null);A!=null&&(n===null&&(n=Tn.empty()),n.set(r.field,A))}return n||null}function UC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ba(r,s,(A,i)=>w4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ja extends eg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class eA extends eg{constructor(e,n,r,s,A=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function RF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function SC(t,e,n){const r=new Map;Se(t.length===n.length);for(let s=0;s<n.length;s++){const A=t[s],i=A.transform,o=e.data.field(A.field);r.set(A.field,m4(i,o,n[s]))}return r}function QC(t,e,n){const r=new Map;for(const s of t){const A=s.transform,i=n.data.field(s.field);r.set(s.field,p4(A,i,e))}return r}class Xa extends eg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tv extends eg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&y4(A,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=dc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=dc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EF();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let o=this.applyToLocalView(i,A.mutatedFields);o=n.has(s.key)?null:o;const a=kF(i,o);a!==null&&r.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(n,r)=>UC(n,r))&&ba(this.baseMutations,e.baseMutations,(n,r)=>UC(n,r))}}class Uv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length);let s=function(){return h4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,r[i].version);return new Uv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,at;function NF(t){switch(t){default:return Ee();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function PF(t){if(t===void 0)return nn("GRPC error has no .code"),H.UNKNOWN;switch(t){case An.OK:return H.OK;case An.CANCELLED:return H.CANCELLED;case An.UNKNOWN:return H.UNKNOWN;case An.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case An.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case An.INTERNAL:return H.INTERNAL;case An.UNAVAILABLE:return H.UNAVAILABLE;case An.UNAUTHENTICATED:return H.UNAUTHENTICATED;case An.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case An.NOT_FOUND:return H.NOT_FOUND;case An.ALREADY_EXISTS:return H.ALREADY_EXISTS;case An.PERMISSION_DENIED:return H.PERMISSION_DENIED;case An.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case An.ABORTED:return H.ABORTED;case An.OUT_OF_RANGE:return H.OUT_OF_RANGE;case An.UNIMPLEMENTED:return H.UNIMPLEMENTED;case An.DATA_LOSS:return H.DATA_LOSS;default:return Ee()}}(at=An||(An={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new ji([4294967295,4294967295],0);function kC(t){const e=DF().encode(t),n=new HT;return n.update(e),new Uint8Array(n.digest())}function RC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new ji([n,r],0),new ji([s,A],0)]}class Qv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hl(`Invalid padding: ${n}`);if(r<0)throw new Hl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ji.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ji.fromNumber(r)));return s.compare(C4)===1&&(s=new ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=kC(e),[r,s]=RC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);if(!this.de(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new Qv(A,s,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=kC(e),[r,s]=RC(n);for(let A=0;A<this.hashCount;A++){const i=this.Ee(r,s,A);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r,s,A){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _u(ke.min(),s,new bt($e),ur(),Je())}}class Eu{constructor(e,n,r,s,A){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Eu(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class LF{constructor(e,n){this.targetId=e,this.me=n}}class OF{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class NC{constructor(){this.fe=0,this.ge=DC(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),r=Je();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ee()}}),new Eu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=DC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class I4{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=PC(),this.Qe=new bt($e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const A=s.target;if(ef(A))if(r===0){const i=new de(A.path);this.Ue(n,i,Ut.newNoDocument(i,ke.min()))}else Se(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:A=0}=n;let i,o;try{i=XA(r).toUint8Array()}catch(a){if(a instanceof lF)return vs("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Qv(i,s,A)}catch(a){return vs(a instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(A=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,A,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((A,i)=>{const o=this.Je(i);if(o){if(A.current&&ef(o.target)){const a=new de(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,Ut.newNoDocument(a,e))}A.be&&(n.set(i,A.ve()),A.Ce())}});let r=Je();this.qe.forEach((A,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new _u(e,n,this.Qe,this.ke,r);return this.ke=ur(),this.qe=PC(),this.Qe=new bt($e),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new NC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xt($e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new NC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function PC(){return new bt(de.comparator)}function DC(){return new bt(de.comparator)}const _4={asc:"ASCENDING",desc:"DESCENDING"},E4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b4={and:"AND",or:"OR"};class T4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function C0(t,e){return t.useProto3Json||yu(e)?e:{value:e}}function Qa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F4(t,e){return Qa(t,e.toTimestamp())}function rn(t){return Se(!!t),ke.fromTimestamp(function(n){const r=zs(n);return new Lt(r.seconds,r.nanos)}(t))}function kv(t,e){return I0(t,e).canonicalString()}function I0(t,e){const n=function(s){return new At(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function VF(t){const e=At.fromString(t);return Se(XF(e)),e}function Zc(t,e){return kv(t.databaseId,e.path)}function ms(t,e){const n=VF(e);if(n.get(1)!==t.databaseId.projectId)throw new q(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(KF(n))}function jF(t,e){return kv(t.databaseId,e)}function HF(t){const e=VF(t);return e.length===4?At.emptyPath():KF(e)}function _0(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KF(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LC(t,e,n){return{name:Zc(t,e),fields:n.value.mapValue.fields}}function GF(t,e,n){const r=ms(t,e.name),s=rn(e.updateTime),A=e.createTime?rn(e.createTime):ke.min(),i=new Tn({mapValue:{fields:e.fields}}),o=Ut.newFoundDocument(r,s,A,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function U4(t,e){return"found"in e?function(r,s){Se(!!s.found),s.found.name,s.found.updateTime;const A=ms(r,s.found.name),i=rn(s.found.updateTime),o=s.found.createTime?rn(s.found.createTime):ke.min(),a=new Tn({mapValue:{fields:s.found.fields}});return Ut.newFoundDocument(A,i,o,a)}(t,e):"missing"in e?function(r,s){Se(!!s.missing),Se(!!s.readTime);const A=ms(r,s.missing),i=rn(s.readTime);return Ut.newNoDocument(A,i)}(t,e):Ee()}function S4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?(Se(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(Se(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?H.UNKNOWN:PF(c.code);return new q(d,c.message||"")}(i);n=new OF(r,s,A,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ms(t,r.document.name),A=rn(r.document.updateTime),i=r.document.createTime?rn(r.document.createTime):ke.min(),o=new Tn({mapValue:{fields:r.document.fields}}),a=Ut.newFoundDocument(s,A,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new hh(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ms(t,r.document),A=r.readTime?rn(r.readTime):ke.min(),i=Ut.newNoDocument(s,A),o=r.removedTargetIds||[];n=new hh([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ms(t,r.document),A=r.removedTargetIds||[];n=new hh([],A,s,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:A}=r,i=new x4(s,A),o=r.targetId;n=new LF(o,i)}}return n}function eu(t,e){let n;if(e instanceof Ja)n={update:LC(t,e.key,e.value)};else if(e instanceof Xa)n={delete:Zc(t,e.key)};else if(e instanceof eA)n={update:LC(t,e.key,e.data),updateMask:D4(e.fieldMask)};else{if(!(e instanceof Tv))return Ee();n={verify:Zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(A,i){const o=i.transform;if(o instanceof Ua)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof to)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof no)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Sa)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw Ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:F4(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:Ee()}(t,e.precondition)),n}function E0(t,e){const n=e.currentDocument?function(A){return A.updateTime!==void 0?Dt.updateTime(rn(A.updateTime)):A.exists!==void 0?Dt.exists(A.exists):Dt.none()}(e.currentDocument):Dt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)Se(o.setToServerValue==="REQUEST_TIME"),a=new Ua;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new to(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new no(d)}else"increment"in o?a=new Sa(i,o.increment):Ee();const c=Pt.fromServerFormat(o.fieldPath);return new Iu(c,a)}(t,s)):[];if(e.update){e.update.name;const s=ms(t,e.update.name),A=new Tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new cr(c.map(d=>Pt.fromServerFormat(d)))}(e.updateMask);return new eA(s,A,i,n,r)}return new Ja(s,A,n,r)}if(e.delete){const s=ms(t,e.delete);return new Xa(s,n)}if(e.verify){const s=ms(t,e.verify);return new Tv(s,n)}return Ee()}function Q4(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(s,A){let i=s.updateTime?rn(s.updateTime):rn(A);return i.isEqual(ke.min())&&(i=rn(A)),new v4(i,s.transformResults||[])}(n,e))):[]}function zF(t,e){return{documents:[jF(t,e.path)]}}function $F(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jF(t,s);const A=function(c){if(c.length!==0)return JF(vt.create(c,"and"))}(e.filters);A&&(n.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:Oo(f.field),direction:R4(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=C0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function WF(t){let e=HF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];n.where&&(A=function(h){const f=qF(h);return f instanceof vt&&Iv(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(w){return new Yc(Mo(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,yu(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,m=h.values||[];return new ei(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new ei(m,f)}(n.endAt)),yF(e,s,i,A,o,"F",a,c)}function k4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mo(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Mo(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=Mo(n.unaryFilter.field);return it.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Mo(n.unaryFilter.field);return it.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(t):t.fieldFilter!==void 0?function(n){return it.create(Mo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vt.create(n.compositeFilter.filters.map(r=>qF(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(t):Ee()}function R4(t){return _4[t]}function N4(t){return E4[t]}function P4(t){return b4[t]}function Oo(t){return{fieldPath:t.canonicalString()}}function Mo(t){return Pt.fromServerFormat(t.fieldPath)}function JF(t){return t instanceof it?function(n){if(n.op==="=="){if(BC(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NAN"}};if(yC(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BC(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NAN"}};if(yC(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(n.field),op:N4(n.op),value:n.value}}}(t):t instanceof vt?function(n){const r=n.getFilters().map(s=>JF(s));return r.length===1?r[0]:{compositeFilter:{op:P4(n.op),filters:r}}}(t):Ee()}function D4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r,s,A=ke.min(),i=ke.min(),o=Wt.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.ct=e}}function L4(t,e){let n;if(e.document)n=GF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=de.fromSegments(e.noDocument.path),s=so(e.noDocument.readTime);n=Ut.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{const r=de.fromSegments(e.unknownDocument.path),s=so(e.unknownDocument.version);n=Ut.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const A=new Lt(s[0],s[1]);return ke.fromTimestamp(A)}(e.readTime)),n}function OC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:rf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(A,i){return{name:Zc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:Qa(A,i.version.toTimestamp()),createTime:Qa(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ro(e.version)};else{if(!e.isUnknownDocument())return Ee();r.unknownDocument={path:n.path.toArray(),version:ro(e.version)}}return r}function rf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ro(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function so(t){const e=new Lt(t.seconds,t.nanoseconds);return ke.fromTimestamp(e)}function bi(t,e){const n=(e.baseMutations||[]).map(A=>E0(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const o=e.mutations[A+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const r=e.mutations.map(A=>E0(t.ct,A)),s=Lt.fromMillis(e.localWriteTimeMs);return new Fv(e.batchId,s,n,r)}function Kl(t){const e=so(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?so(t.lastLimboFreeSnapshotVersion):ke.min();let r;return r=function(A){return A.documents!==void 0}(t.query)?function(A){return Se(A.documents.length===1),er(qa(HF(A.documents[0])))}(t.query):function(A){return er(WF(A))}(t.query),new ks(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Wt.fromBase64String(t.resumeToken))}function ZF(t,e){const n=ro(e.snapshotVersion),r=ro(e.lastLimboFreeSnapshotVersion);let s;s=ef(e.target)?zF(t.ct,e.target):$F(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:n,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Rv(t){const e=WF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nf(e,e.limit,"L"):e}function Up(t,e){return new Sv(e.largestBatchId,E0(t.ct,e.overlayMutation))}function MC(t,e){const n=e.path.lastSegment();return[t,Zn(e.path.popLast()),n]}function VC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ro(r.readTime),documentKey:Zn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{getBundleMetadata(e,n){return jC(e).get(n).next(r=>{if(r)return function(A){return{id:A.bundleId,createTime:so(A.createTime),version:A.version}}(r)})}saveBundleMetadata(e,n){return jC(e).put(function(s){return{bundleId:s.id,createTime:ro(rn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return HC(e).get(n).next(r=>{if(r)return function(A){return{name:A.name,query:Rv(A.bundledQuery),readTime:so(A.readTime)}}(r)})}saveNamedQuery(e,n){return HC(e).put(function(s){return{name:s.name,readTime:ro(rn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function jC(t){return pn(t,"bundles")}function HC(t){return pn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new tg(e,r)}getOverlay(e,n){return Il(e).get(MC(this.userId,n)).next(r=>r?Up(this.serializer,r):null)}getOverlays(e,n){const r=ds();return M.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((A,i)=>{const o=new Sv(n,i);s.push(this.ht(e,o))}),M.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(i=>s.add(Zn(i.getCollectionPath())));const A=[];return s.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);A.push(Il(e).j("collectionPathOverlayIndex",o))}),M.waitFor(A)}getOverlaysForCollection(e,n,r){const s=ds(),A=Zn(n),i=IDBKeyRange.bound([this.userId,A,r],[this.userId,A,Number.POSITIVE_INFINITY],!0);return Il(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const c=Up(this.serializer,a);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const A=ds();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Il(e).J({index:"collectionGroupOverlayIndex",range:o},(a,c,d)=>{const h=Up(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,n){return Il(e).put(function(s,A,i){const[o,a,c]=MC(A,i.mutation.key);return{userId:A,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:eu(s.ct,i.mutation)}}(this.serializer,this.userId,n))}}function Il(t){return pn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{Pt(e){return pn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Wt.fromUint8Array(r):Wt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Rt(e.integerValue));else if("doubleValue"in e){const r=Rt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Wc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=zs(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(XA(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?cF(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Yf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Ee()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const A=e.fields||{};this.dt(n,53);const i="value",o=((s=(r=A[i].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Rt(o)),this.Vt(i,n),this.Tt(A[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),de.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Ti.vt=new Ti;function V4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function KC(t){const e=64-function(r){let s=0;for(let A=0;A<8;++A){const i=V4(255&r[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class j4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=KC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=KC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class H4{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class K4{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class _l{constructor(){this.jt=new j4,this.Ht=new H4(this.jt),this.Jt=new K4(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fi(this.indexId,this.documentKey,this.arrayValue,r)}}function cA(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=GC(t.arrayValue,e.arrayValue),n!==0?n:(n=GC(t.directionalValue,e.directionalValue),n!==0?n:de.comparator(t.documentKey,e.documentKey)))}function GC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.Xt=new xt((n,r)=>Pt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Se(e.collectionGroup===this.collectionId),this.nn)return!1;const n=g0(e);if(n!==void 0&&!this.sn(n))return!1;const r=_i(e);let s=new Set,A=0,i=0;for(;A<r.length&&this.sn(r[A]);++A)s=s.add(r[A].fieldPath.canonicalString());if(A===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!s.has(o.field.canonicalString())){const a=r[A];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++A}for(;A<r.length;++A){const o=r[A];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new xt(Pt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ah(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ah(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ah(r.field,r.dir==="asc"?0:1)));return new Zh(Zh.UNKNOWN_ID,this.collectionId,n,$c.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){var e,n;if(Se(t instanceof it||t instanceof vt),t instanceof it){if(t instanceof vF){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(A=>it.create(t.field,"==",A)))||[];return vt.create(s,"or")}return t}const r=t.filters.map(s=>e1(s));return vt.create(r,t.op)}function G4(t){if(t.getFilters().length===0)return[];const e=F0(e1(t));return Se(t1(e)),b0(e)||T0(e)?[e]:e.getFilters()}function b0(t){return t instanceof it}function T0(t){return t instanceof vt&&Iv(t)}function t1(t){return b0(t)||T0(t)||function(n){if(n instanceof vt&&v0(n)){for(const r of n.getFilters())if(!b0(r)&&!T0(r))return!1;return!0}return!1}(t)}function F0(t){if(Se(t instanceof it||t instanceof vt),t instanceof it)return t;if(t.filters.length===1)return F0(t.filters[0]);const e=t.filters.map(r=>F0(r));let n=vt.create(e,t.op);return n=sf(n),t1(n)?n:(Se(n instanceof vt),Se(Fa(n)),Se(n.filters.length>1),n.filters.reduce((r,s)=>Nv(r,s)))}function Nv(t,e){let n;return Se(t instanceof it||t instanceof vt),Se(e instanceof it||e instanceof vt),n=t instanceof it?e instanceof it?function(s,A){return vt.create([s,A],"and")}(t,e):$C(t,e):e instanceof it?$C(e,t):function(s,A){if(Se(s.filters.length>0&&A.filters.length>0),Fa(s)&&Fa(A))return pF(s,A.getFilters());const i=v0(s)?s:A,o=v0(s)?A:s,a=i.filters.map(c=>Nv(c,o));return vt.create(a,"or")}(t,e),sf(n)}function $C(t,e){if(Fa(e))return pF(e,t.getFilters());{const n=e.filters.map(r=>Nv(t,r));return vt.create(n,"or")}}function sf(t){if(Se(t instanceof it||t instanceof vt),t instanceof it)return t;const e=t.getFilters();if(e.length===1)return sf(e[0]);if(fF(t))return t;const n=e.map(s=>sf(s)),r=[];return n.forEach(s=>{s instanceof it?r.push(s):s instanceof vt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:vt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.un=new Pv}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Er.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Pv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(At.comparator),A=!s.has(r);return this.index[n]=s.add(r),A}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=new Uint8Array(0);class $4{constructor(e,n){this.databaseId=n,this.cn=new Pv,this.ln=new di(r=>eo(r),(r,s)=>Bu(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const A={collectionId:r,parent:Zn(s)};return WC(e).put(A)}return M.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[XT(n),""],!1,!0);return WC(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==n)break;r.push(us(i.parent))}return r})}addFieldIndex(e,n){const r=El(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const A=r.add(s);if(n.indexState){const i=To(e);return A.next(o=>{i.put(VC(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return A.next()}deleteFieldIndex(e,n){const r=El(e),s=To(e),A=bo(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=El(e),r=bo(e),s=To(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const A=new zC(r).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,n){const r=bo(e);let s=!0;const A=new Map;return M.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{s&&(s=!!o),A.set(i,o)})).next(()=>{if(s){let i=Je();const o=[];return M.forEach(A,(a,c)=>{J("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(a)} to execute ${eo(n)}`);const d=function(I,S){const U=g0(S);if(U===void 0)return null;for(const N of tf(I,U.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,a),h=function(I,S){const U=new Map;for(const N of _i(S))for(const B of tf(I,N.fieldPath))switch(B.op){case"==":case"in":U.set(N.fieldPath.canonicalString(),B.value);break;case"not-in":case"!=":return U.set(N.fieldPath.canonicalString(),B.value),Array.from(U.values())}return null}(c,a),f=function(I,S){const U=[];let N=!0;for(const B of _i(S)){const x=B.kind===0?EC(I,B.fieldPath,I.startAt):bC(I,B.fieldPath,I.startAt);U.push(x.value),N&&(N=x.inclusive)}return new ei(U,N)}(c,a),m=function(I,S){const U=[];let N=!0;for(const B of _i(S)){const x=B.kind===0?bC(I,B.fieldPath,I.endAt):EC(I,B.fieldPath,I.endAt);U.push(x.value),N&&(N=x.inclusive)}return new ei(U,N)}(c,a),w=this.In(a,c,f),y=this.In(a,c,m),T=this.Tn(a,c,h),C=this.En(a.indexId,d,w,f.inclusive,y,m.inclusive,T);return M.forEach(C,v=>r.G(v,n.limit).next(I=>{I.forEach(S=>{const U=de.fromSegments(S.documentKey);i.has(U)||(i=i.add(U),o.push(U))})}))}).next(()=>o)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=G4(vt.create(e.filters,"and")).map(r=>B0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,A,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,A.length),c=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/c]):yd,m=this.An(e,f,r[h%c],s),w=this.Rn(e,f,A[h%c],i),y=o.map(T=>this.An(e,f,T,!0));d.push(...this.createRange(m,w,y))}return d}An(e,n,r,s){const A=new Fi(e,de.empty(),n,r);return s?A:A.Zt()}Rn(e,n,r,s){const A=new Fi(e,de.empty(),n,r);return s?A.Zt():A}Pn(e,n){const r=new zC(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const o of A)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const s=this.hn(n);return M.forEach(s,A=>this.Pn(e,A).next(i=>{i?r!==0&&i.fields.length<function(a){let c=new xt(Pt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new _l;for(const s of _i(e)){const A=n.data.field(s.fieldPath);if(A==null)return null;const i=r.Yt(s.kind);Ti.vt.It(A,i)}return r.zt()}dn(e){const n=new _l;return Ti.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new _l;return Ti.vt.It(Zi(this.databaseId,n),r.Yt(function(A){const i=_i(A);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new _l);let A=0;for(const i of _i(e)){const o=r[A++];for(const a of s)if(this.fn(n,i.fieldPath)&&Xc(o))s=this.gn(s,i,o);else{const c=a.Yt(i.kind);Ti.vt.It(o,c)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],A=[];for(const i of r.arrayValue.values||[])for(const o of s){const a=new _l;a.seed(o.zt()),Ti.vt.It(i,a.Yt(n.kind)),A.push(a)}return A}fn(e,n){return!!e.filters.find(r=>r instanceof it&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=El(e),s=To(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(A=>{const i=[];return M.forEach(A,o=>s.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new $c(h.sequenceNumber,new Er(so(h.readTime),new de(us(h.documentKey)),h.largestBatchId)):$c.empty(),m=d.fields.map(([w,y])=>new ah(Pt.fromServerFormat(w),y));return new Zh(d.indexId,d.collectionGroup,m,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const A=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:$e(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=El(e),A=To(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,a=>A.put(VC(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(s,A)=>{const i=r.get(s.collectionGroup);return(i?M.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(o=>(r.set(s.collectionGroup,o),M.forEach(o,a=>this.wn(e,s,a).next(c=>{const d=this.Sn(A,a);return c.isEqual(d)?M.resolve():this.bn(e,A,a,c,d)}))))})}Dn(e,n,r,s){return bo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return bo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=bo(e);let A=new xt(cA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{A=A.add(new Fi(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>A)}Sn(e,n){let r=new xt(cA);const s=this.Vn(n,e);if(s==null)return r;const A=g0(n);if(A!=null){const i=e.data.field(A.fieldPath);if(Xc(i))for(const o of i.arrayValue.values||[])r=r.add(new Fi(n.indexId,e.key,this.dn(o),s))}else r=r.add(new Fi(n.indexId,e.key,yd,s));return r}bn(e,n,r,s,A){J("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,c,d,h,f){const m=a.getIterator(),w=c.getIterator();let y=Eo(m),T=Eo(w);for(;y||T;){let C=!1,v=!1;if(y&&T){const I=d(y,T);I<0?v=!0:I>0&&(C=!0)}else y!=null?v=!0:C=!0;C?(h(T),T=Eo(w)):v?(f(y),y=Eo(m)):(y=Eo(m),T=Eo(w))}}(s,A,cA,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),M.waitFor(i)}yn(e){let n=1;return To(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,A)=>{A.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>cA(i,o)).filter((i,o,a)=>!o||cA(i,a[o-1])!==0);const s=[];s.push(e);for(const i of r){const o=cA(i,e),a=cA(i,n);if(o===0)s[0]=e.Zt();else if(o>0&&a<0)s.push(i),s.push(i.Zt());else if(a>0)break}s.push(n);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const o=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,yd,[]],a=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,yd,[]];A.push(IDBKeyRange.bound(o,a))}return A}Cn(e,n){return cA(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qC)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||Ee())).next(qC)}}function WC(t){return pn(t,"collectionParents")}function bo(t){return pn(t,"indexEntries")}function El(t){return pn(t,"indexConfiguration")}function To(t){return pn(t,"indexState")}function qC(t){Se(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;yv(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Er(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));A.push(a.next(()=>{Se(o===1)}));const c=[];for(const d of n.mutations){const h=sF(e,d.key.path,n.batchId);A.push(s.delete(h)),c.push(d.key)}return M.waitFor(A).next(()=>c)}function Af(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ee();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(41943040,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);class ng{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){Se(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new ng(A,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uA(e).J({index:"userMutationsIndex",range:r},(s,A,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const A=Vo(e),i=uA(e);return i.add({}).next(o=>{Se(typeof o=="number");const a=new Fv(o,n,r,s),c=function(m,w,y){const T=y.baseMutations.map(v=>eu(m.ct,v)),C=y.mutations.map(v=>eu(m.ct,v));return{userId:w,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:T,mutations:C}}(this.serializer,this.userId,a),d=[];let h=new xt((f,m)=>$e(f.canonicalString(),m.canonicalString()));for(const f of s){const m=sF(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(m,kD))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),M.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return uA(e).get(n).next(r=>r?(Se(r.userId===this.userId),bi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let A=null;return uA(e).J({index:"userMutationsIndex",range:s},(i,o,a)=>{o.userId===this.userId&&(Se(o.batchId>=r),A=bi(this.serializer,o)),a.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return uA(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,A,i)=>{r=A.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uA(e).U("userMutationsIndex",n).next(r=>r.map(s=>bi(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=lh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),A=[];return Vo(e).J({range:s},(i,o,a)=>{const[c,d,h]=i,f=us(d);if(c===this.userId&&n.path.isEqual(f))return uA(e).get(h).next(m=>{if(!m)throw Ee();Se(m.userId===this.userId),A.push(bi(this.serializer,m))});a.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt($e);const s=[];return n.forEach(A=>{const i=lh(this.userId,A.path),o=IDBKeyRange.lowerBound(i),a=Vo(e).J({range:o},(c,d,h)=>{const[f,m,w]=c,y=us(m);f===this.userId&&A.path.isEqual(y)?r=r.add(w):h.done()});s.push(a)}),M.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,A=lh(this.userId,r),i=IDBKeyRange.lowerBound(A);let o=new xt($e);return Vo(e).J({range:i},(a,c,d)=>{const[h,f,m]=a,w=us(f);h===this.userId&&r.isPrefixOf(w)?w.length===s&&(o=o.add(m)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],s=[];return n.forEach(A=>{s.push(uA(e).get(A).next(i=>{if(i===null)throw Ee();Se(i.userId===this.userId),r.push(bi(this.serializer,i))}))}),M.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return n1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return Vo(e).J({range:r},(A,i,o)=>{if(A[0]===this.userId){const a=us(A[1]);s.push(a)}else o.done()}).next(()=>{Se(s.length===0)})})}containsKey(e,n){return r1(e,this.userId,n)}Nn(e){return s1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function r1(t,e,n){const r=lh(e,n.path),s=r[1],A=IDBKeyRange.lowerBound(r);let i=!1;return Vo(t).J({range:A,H:!0},(o,a,c)=>{const[d,h,f]=o;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function uA(t){return pn(t,"mutations")}function Vo(t){return pn(t,"documentMutations")}function s1(t){return pn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ao(0)}static kn(){return new Ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Ao(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ke.fromTimestamp(new Lt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Fo(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const A=[];return Fo(e).J((i,o)=>{const a=Kl(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(s++,A.push(this.removeTargetData(e,a)))}).next(()=>M.waitFor(A)).next(()=>s)}forEachTarget(e,n){return Fo(e).J((r,s)=>{const A=Kl(s);n(A)})}qn(e){return XC(e).get("targetGlobalKey").next(n=>(Se(n!==null),n))}Qn(e,n){return XC(e).put("targetGlobalKey",n)}Kn(e,n){return Fo(e).put(ZF(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=eo(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let A=null;return Fo(e).J({range:s,index:"queryTargetsIndex"},(i,o,a)=>{const c=Kl(o);Bu(n,c.target)&&(A=c,a.done())}).next(()=>A)}addMatchingKeys(e,n,r){const s=[],A=BA(e);return n.forEach(i=>{const o=Zn(i.path);s.push(A.put({targetId:r,path:o})),s.push(this.referenceDelegate.addReference(e,r,i))}),M.waitFor(s)}removeMatchingKeys(e,n,r){const s=BA(e);return M.forEach(n,A=>{const i=Zn(A.path);return M.waitFor([s.delete([r,i]),this.referenceDelegate.removeReference(e,r,A)])})}removeMatchingKeysForTargetId(e,n){const r=BA(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=BA(e);let A=Je();return s.J({range:r,H:!0},(i,o,a)=>{const c=us(i[1]),d=new de(c);A=A.add(d)}).next(()=>A)}containsKey(e,n){const r=Zn(n.path),s=IDBKeyRange.bound([r],[XT(r)],!1,!0);let A=0;return BA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,o],a,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,n){return Fo(e).get(n).next(r=>r?Kl(r):null)}}function Fo(t){return pn(t,"targets")}function XC(t){return pn(t,"targetGlobal")}function BA(t){return pn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC([t,e],[n,r]){const s=$e(t,n);return s===0?$e(e,r):s}class q4{constructor(e){this.Un=e,this.buffer=new xt(YC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();YC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class J4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){J("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ui(n)?J("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ci(n)}await this.Hn(3e5)})}}class X4{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(lr.oe);const r=new q4(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(JC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,A,i,o,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(A=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Do()<=nt.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${A} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function Y4(t,e){return new X4(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.db=e,this.garbageCollector=Y4(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return Bd(e,r)}removeReference(e,n,r){return Bd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Bd(e,n)}nr(e,n){return function(s,A){let i=!1;return s1(s).Y(o=>r1(s,o,A).next(a=>(a&&(i=!0),M.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(c=>{if(!c)return A++,r.getEntry(e,i).next(()=>(r.removeEntry(i,ke.min()),BA(e).delete(function(h){return[0,Zn(h.path)]}(i))))});s.push(a)}}).next(()=>M.waitFor(s)).next(()=>r.apply(e)).next(()=>A)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Bd(e,n)}tr(e,n){const r=BA(e);let s,A=lr.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:c})=>{i===0?(A!==lr.oe&&n(new de(us(s)),A),A=c,s=a):A=lr.oe}).next(()=>{A!==lr.oe&&n(new de(us(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bd(t,e){return BA(t).put(function(r,s){return{targetId:0,path:Zn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.changes=new di(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vi(e).put(r)}removeEntry(e,n,r){return vi(e).delete(function(A,i){const o=A.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],rf(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Ut.newInvalidDocument(n);return vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bl(n))},(s,A)=>{r=this.ir(n,A)}).next(()=>r)}sr(e,n){let r={size:0,document:Ut.newInvalidDocument(n)};return vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bl(n))},(s,A)=>{r={document:this.ir(n,A),size:Af(A)}}).next(()=>r)}getEntries(e,n){let r=ur();return this._r(e,n,(s,A)=>{const i=this.ir(s,A);r=r.insert(s,i)}).next(()=>r)}ar(e,n){let r=ur(),s=new bt(de.comparator);return this._r(e,n,(A,i)=>{const o=this.ir(A,i);r=r.insert(A,o),s=s.insert(A,Af(i))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let s=new xt(tI);n.forEach(a=>s=s.add(a));const A=IDBKeyRange.bound(bl(s.first()),bl(s.last())),i=s.getIterator();let o=i.getNext();return vi(e).J({index:"documentKeyIndex",range:A},(a,c,d)=>{const h=de.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&tI(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,c),o=i.hasNext()?i.getNext():null),o?d.$(bl(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,A){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),rf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vi(e).U(IDBKeyRange.bound(o,a,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=ur();for(const h of c){const f=this.ir(de.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Cu(n,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,s){let A=ur();const i=eI(n,r),o=eI(n,Er.max());return vi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,c,d)=>{const h=this.ir(de.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new tL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ZC(e).get("remoteDocumentGlobalKey").next(n=>(Se(!!n),n))}rr(e,n){return ZC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=L4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ke.min())))return r}return Ut.newInvalidDocument(e)}}function i1(t){return new eL(t)}class tL extends A1{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new di(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new xt((A,i)=>$e(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const o=this.lr.get(A);if(n.push(this.cr.removeEntry(e,A,o.readTime)),i.isValidDocument()){const a=OC(this.cr.serializer,i);s=s.add(A.path.popLast());const c=Af(a);r+=c-o.size,n.push(this.cr.addEntry(e,A,a))}else if(r-=o.size,this.trackRemovals){const a=OC(this.cr.serializer,i.convertToNoDocument(ke.min()));n.push(this.cr.addEntry(e,A,a))}}),s.forEach(A=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:r.get(A).readTime})}),r))}}function ZC(t){return pn(t,"remoteDocumentGlobal")}function vi(t){return pn(t,"remoteDocumentsV14")}function bl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eI(t,e){const n=e.documentKey.path.toArray();return[t,rf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tI(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let A=0;A<n.length-2&&A<r.length-2;++A)if(s=$e(n[A],r[A]),s)return s;return s=$e(n.length,r.length),s||(s=$e(n[n.length-2],r[r.length-2]),s||$e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&dc(r.mutation,s,cr.empty(),Lt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const s=ds();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(A=>{let i=jl();return A.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const s=[];return r.forEach(A=>{n.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,s){let A=ur();const i=uc(),o=function(){return uc()}();return n.forEach((a,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof eA)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),dc(d.mutation,c,d.mutation.getFieldMask(),Lt.now())):i.set(c.key,cr.empty())}),this.recalculateAndSaveOverlays(e,A).next(a=>(a.forEach((c,d)=>i.set(c,d)),n.forEach((c,d)=>{var h;return o.set(c,new nL(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=uc();let s=new bt((i,o)=>i-o),A=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let d=r.get(a)||cr.empty();d=o.applyToLocalView(c,d),r.set(a,d);const h=(s.get(o.batchId)||Je()).add(a);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,d=a.value,h=EF();d.forEach(f=>{if(!A.has(f)){const m=kF(n.get(f),r.get(f));m!==null&&h.set(f,m),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return de.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_v(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-A.size):M.resolve(ds());let o=-1,a=A;return i.next(c=>M.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),A.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,a,c,Je())).next(d=>({batchId:o,changes:_F(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let s=jl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const A=n.collectionGroup;let i=jl();return this.indexManager.getCollectionParents(e,A).next(o=>M.forEach(o,a=>{const c=function(h,f){return new Zs(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,A,s))).next(i=>{A.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Ut.newInvalidDocument(d)))});let o=jl();return i.forEach((a,c)=>{const d=A.get(a);d!==void 0&&dc(d.mutation,c,cr.empty(),Lt.now()),Cu(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:rn(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Rv(s.bundledQuery),readTime:rn(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.overlays=new bt(de.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ds();return M.forEach(n,s=>this.getOverlay(e,s).next(A=>{A!==null&&r.set(s,A)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,A)=>{this.ht(e,n,A)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=ds(),A=n.length+1,i=new de(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===A&&a.largestBatchId>r&&s.set(a.getKey(),a)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let A=new bt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=A.get(c.largestBatchId);d===null&&(d=ds(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=ds(),a=A.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=s)););return M.resolve(o)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Sv(n,r));let A=this.Ir.get(n);A===void 0&&(A=Je(),this.Ir.set(n,A)),this.Ir.set(n,A.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.Tr=new xt(vn.Er),this.dr=new xt(vn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new vn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new vn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new de(new At([])),r=new vn(n,e),s=new vn(n,e+1),A=[];return this.dr.forEachInRange([r,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new At([])),r=new vn(n,e),s=new vn(n,e+1);let A=Je();return this.dr.forEachInRange([r,s],i=>{A=A.add(i.key)}),A}containsKey(e){const n=new vn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||$e(e.wr,n.wr)}static Ar(e,n){return $e(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new xt(vn.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Fv(A,n,r,s);this.mutationQueue.push(i);for(const o of s)this.br=this.br.add(new vn(o.key,A)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(i)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),A=s<0?0:s;return M.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vn(n,0),s=new vn(n,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([r,s],i=>{const o=this.Dr(i.wr);A.push(o)}),M.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt($e);return n.forEach(s=>{const A=new vn(s,0),i=new vn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],o=>{r=r.add(o.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let A=r;de.isDocumentKey(A)||(A=A.child(""));const i=new vn(new de(A),0);let o=new xt($e);return this.br.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(a.wr)),!0)},i),M.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const A=new vn(s.key,n.batchId);return r=r.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new vn(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.Mr=e,this.docs=function(){return new bt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),A=s?s.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(s=>{const A=this.docs.get(s);r=r.insert(s,A?A.document.mutableCopy():Ut.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let A=ur();const i=n.path,o=new de(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||yv(ZT(d),r)<=0||(s.has(d.key)||Cu(n,d))&&(A=A.insert(d.key,d.mutableCopy()))}return M.resolve(A)}getAllFromCollectionGroup(e,n,r,s){Ee()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aL(this)}getSize(e){return M.resolve(this.size)}}class aL extends A1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.persistence=e,this.Nr=new di(n=>eo(n),Bu),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dv,this.targetCount=0,this.kr=Ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const A=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),M.waitFor(A).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,A=[];return s&&n.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),M.waitFor(A)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lr(0),this.Kr=!1,this.Kr=!0,this.$r=new AL,this.referenceDelegate=e(this),this.Ur=new lL(this),this.indexManager=new z4,this.remoteDocumentCache=function(s){return new oL(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YF(n),this.Gr=new rL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new iL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new cL(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class cL extends tF{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Jr=new Dv,this.Yr=null}static Zr(e){return new rg(e)}get Xr(){if(this.Yr)return this.Yr;throw Ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=de.fromPath(r);return this.ei(e,s).next(A=>{A||n.removeEntry(s,ke.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.serializer=e}O(e,n,r,s){const A=new Jf("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0}),a.createObjectStore("documentMutations")}(e),nI(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=M.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),nI(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ke.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),r<4&&s>=4&&(r!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gC,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return M.waitFor(f)})}(e,A))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(i=i.next(()=>this.ni(A))),r<6&&s>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),r<7&&s>=7&&(i=i.next(()=>this.ii(A))),r<8&&s>=8&&(i=i.next(()=>this.si(e,A))),r<9&&s>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(i=i.next(()=>this.oi(A))),r<11&&s>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:GD});c.createIndex("collectionPathOverlayIndex",zD,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",$D,{unique:!1})})(e)})),r<13&&s>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:RD});c.createIndex("documentKeyIndex",ND),c.createIndex("collectionGroupIndex",PD)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),r<15&&s>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:VD}).createIndex("sequenceNumberIndex",jD,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:HD}).createIndex("documentKeyIndex",KD,{unique:!1})}(e))),r<16&&s>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=Af(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>M.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>M.forEach(o,a=>{Se(a.userId===A.userId);const c=bi(this.serializer,a);return n1(e,A.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return r.J((i,o)=>{const a=new At(i),c=function(h){return[0,Zn(h)]}(a);A.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Zn(h),sequenceNumber:s.highestListenSequenceNumber}))(a)))}).next(()=>M.waitFor(A))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:MD});const r=n.store("collectionParents"),s=new Pv,A=i=>{if(s.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:Zn(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new At(i);return A(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],c)=>{const d=us(o);return A(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const A=Kl(s),i=ZF(this.serializer,A);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((A,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new de(At.fromString(h.document.name).popFirst(5)):h.noDocument?de.fromSegments(h.noDocument.path):h.unknownDocument?de.fromSegments(h.unknownDocument.path):Ee()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(o.put(c))}).next(()=>M.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=i1(this.serializer),A=new a1(rg.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var c;let d=(c=o.get(a.userId))!==null&&c!==void 0?c:Je();bi(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),M.forEach(o,(a,c)=>{const d=new Bn(c),h=tg.lt(this.serializer,d),f=A.getIndexManager(d),m=ng.lt(d,this.serializer,f,A.referenceDelegate);return new o1(s,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new p0(n,lr.oe),a).next()})})}}function nI(t){t.createObjectStore("targetDocuments",{keyPath:LD}).createIndex("documentTargetsIndex",OD,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DD,{unique:!0}),t.createObjectStore("targetGlobal")}const Sp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lv{constructor(e,n,r,s,A,i,o,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=A,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Lv.D())throw new q(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Z4(this,s),this.Ai=n+"main",this.serializer=new YF(a),this.Ri=new ps(this.Ai,this.hi,new uL(this.serializer)),this.$r=new M4,this.Ur=new W4(this.referenceDelegate,this.serializer),this.remoteDocumentCache=i1(this.serializer),this.Gr=new O4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&nn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new q(H.FAILED_PRECONDITION,Sp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new lr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ui(e))return J("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return J("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Tl(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return xd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=pn(n,"clientMetadata");return r.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(o=>A.indexOf(o)===-1);return M.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):Tl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new q(H.FAILED_PRECONDITION,Sp);return!1}}return!(!this.networkEnabled||!this.inForeground)||xd(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,o=this.networkEnabled===s.networkEnabled;if(A||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&J("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new p0(e,lr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>xd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return ng.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $4(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",A=function(a){return a===17?JD:a===16?qD:a===15?xv:a===14?oF:a===13?iF:a===12?WD:a===11?AF:void Ee()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,o=>(i=new p0(o,this.Qr?this.Qr.next():lr.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw nn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new q(H.FAILED_PRECONDITION,eF);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return Tl(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new q(H.FAILED_PRECONDITION,Sp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tl(e).put("owner",n)}static D(){return ps.D()}bi(e){const n=Tl(e);return n.get("owner").next(r=>this.vi(r)?(J("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(nn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;TT()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return J("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){nn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tl(t){return pn(t,"owner")}function xd(t){return pn(t,"clientMetadata")}function Ov(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Je(),s=Je();for(const A of n.docChanges)switch(A.type){case 0:r=r.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new Mv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return TT()?8:nF(Kt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const A={result:null};return this.Yi(e,n).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,n,s,r).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new dL;return this.Xi(e,n,i).next(o=>{if(A.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>A.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Do()<=nt.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Do()<=nt.DEBUG&&J("QueryEngine","Query:",Lo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Do()<=nt.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(n))):M.resolve())}Yi(e,n){if(TC(n))return M.resolve(null);let r=er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nf(n,null,"F"),r=er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(A=>{const i=Je(...A);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.ts(n,o);return this.ns(n,c,i,a.readTime)?this.Yi(e,nf(n,null,"F")):this.rs(e,c,n,a)}))})))}Zi(e,n,r,s){return TC(n)||s.isEqual(ke.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(A=>{const i=this.ts(n,A);return this.ns(n,i,r,s)?M.resolve(null):(Do()<=nt.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Lo(n)),this.rs(e,i,n,YT(s,-1)).next(o=>o))})}ts(e,n){let r=new xt(CF(e));return n.forEach((s,A)=>{Cu(e,A)&&(r=r.add(A))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const A=e.limitType==="F"?n.last():n.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,n,r){return Do()<=nt.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Lo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Er.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(A=>(n.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new bt($e),this._s=new di(A=>eo(A),Bu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function c1(t,e,n,r){return new hL(t,e,n,r)}async function u1(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(A=>(s=A,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(A=>{const i=[],o=[];let a=Je();for(const c of s){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of A){o.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function fL(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),A=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(w=>{m=m.next(()=>d.getEntry(a,w)).next(y=>{const T=c.docVersions.get(w);Se(T!==null),y.version.compareTo(T)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,A).next(()=>A.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Je();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function d1(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function gL(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(A,d.addedDocuments,h)));let m=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Wt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(y,T,C){return y.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(f,m,d)&&o.push(n.Ur.updateTargetData(A,m))});let a=ur(),c=Je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(A,d))}),o.push(h1(A,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!r.isEqual(ke.min())){const d=n.Ur.getLastRemoteSnapshotVersion(A).next(h=>n.Ur.setTargetsMetadata(A,A.currentSequenceNumber,r));o.push(d)}return M.waitFor(o).next(()=>i.apply(A)).next(()=>n.localDocuments.getLocalViewOfDocuments(A,a,c)).next(()=>a)}).then(A=>(n.os=s,A))}function h1(t,e,n){let r=Je(),s=Je();return n.forEach(A=>r=r.add(A)),e.getEntries(t,r).next(A=>{let i=ur();return n.forEach((o,a)=>{const c=A.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),a.isNoDocument()&&a.version.isEqual(ke.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):J("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:s}})}function pL(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ka(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(A=>A?(s=A,M.resolve(s)):n.Ur.allocateTargetId(r).next(i=>(s=new ks(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ra(t,e,n){const r=pe(t),s=r.os.get(e),A=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",A,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!ui(i))throw i;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function of(t,e,n){const r=pe(t);let s=ke.min(),A=Je();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=pe(a),f=h._s.get(d);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,i,er(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{A=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?s:ke.min(),n?A:Je())).next(o=>(p1(r,xF(e),o),{documents:o,Ts:A})))}function f1(t,e){const n=pe(t),r=pe(n.Ur),s=n.os.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",A=>r.ot(A,e).next(i=>i?i.target:null))}function g1(t,e){const n=pe(t),r=n.us.get(e)||ke.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.cs.getAllFromCollectionGroup(s,e,YT(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(p1(n,e,s),s))}function p1(t,e,n){let r=t.us.get(e)||ke.min();n.forEach((s,A)=>{A.readTime.compareTo(r)>0&&(r=A.readTime)}),t.us.set(e,r)}async function mL(t,e,n,r){const s=pe(t);let A=Je(),i=ur();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=s.cs.newChangeBuffer({trackRemovals:!0}),a=await ka(s,function(d){return er(qa(At.fromString(`__bundle__/docs/${d}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>h1(c,o,i).next(d=>(o.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>s.Ur.addMatchingKeys(c,A,a.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function wL(t,e,n=Je()){const r=await ka(t,er(Rv(e.bundledQuery))),s=pe(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=rn(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const o=r.withResumeToken(Wt.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(A,o).next(()=>s.Ur.removeMatchingKeysForTargetId(A,r.targetId)).next(()=>s.Ur.addMatchingKeys(A,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function rI(t,e){return`firestore_clients_${t}_${e}`}function sI(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Qp(t,e){return`firestore_targets_${t}_${e}`}class af{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Rs(e,n,r){const s=JSON.parse(r);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new q(s.error.code,s.error.message))),i?new af(e,n,s.state,A):(nn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let s,A=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return A&&r.error&&(A=typeof r.error.message=="string"&&typeof r.error.code=="string",A&&(s=new q(r.error.code,r.error.message))),A?new hc(e,r.state,s):(nn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,A=Ev();for(let i=0;s&&i<r.activeTargetIds.length;++i)s=rF(r.activeTargetIds[i]),A=A.add(r.activeTargetIds[i]);return s?new lf(e,A):(nn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Vv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Vv(n.clientId,n.onlineState):(nn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class U0{constructor(){this.activeTargetIds=Ev()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kp{constructor(e,n,r,s,A){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new bt($e),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=rI(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new U0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const s=this.getItem(rI(this.persistenceKey,r));if(s){const A=lf.Rs(r,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Qp(this.persistenceKey,e));if(s){const A=hc.Rs(e,s);A&&(r=A.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Qs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return J("SharedClientState","READ",e,n),n}setItem(e,n){J("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){J("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(J("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void nn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(A){let i=lr.oe;if(A!=null)try{const o=JSON.parse(A);Se(typeof o=="number"),i=o}catch(o){nn("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==lr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const s=new af(this.currentUser,e,n,r),A=sI(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const n=sI(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const s=Qp(this.persistenceKey,e),A=new hc(e,n,r);this.setItem(s,A.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return lf.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),s=Number(r[1]),A=r[2]!==void 0?r[2]:null;return af.Rs(new Bn(A),s,n)}Ys(e,n){const r=this.Ms.exec(e),s=Number(r[1]);return hc.Rs(s,n)}Ls(e){return Vv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);J("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(r),i=[],o=[];return A.forEach(a=>{s.has(a)||i.push(a)}),s.forEach(a=>{A.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Ev();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class m1{constructor(){this.so=new U0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new U0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd=null;function Rp(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class xL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(n,r,s,A,i){const o=Rp(),a=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${o}:`,a,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(n,a,c,s).then(d=>(J("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw vs("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",s),d})}Lo(n,r,s,A,i,o){return this.Mo(n,r,s,A,i)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((A,i)=>n[i]=A),s&&s.headers.forEach((A,i)=>n[i]=A)}xo(n,r){const s=yL[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const A=Rp();return new Promise((i,o)=>{const a=new KT;a.setWithCredentials(!0),a.listenOnce(GT.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case oh.NO_ERROR:const d=a.getResponseJson();J(On,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case oh.TIMEOUT:J(On,`RPC '${e}' ${A} timed out`),o(new q(H.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const h=a.getStatus();if(J(On,`RPC '${e}' ${A} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const w=function(T){const C=T.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(C)>=0?C:H.UNKNOWN}(m.status);o(new q(w,m.message))}else o(new q(H.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new q(H.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{J(On,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);J(On,`RPC '${e}' ${A} sending request:`,s),a.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Rp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=WT(),o=$T(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=A.join("");J(On,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,m=!1;const w=new BL({Io:T=>{m?J(On,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(f||(J(On,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),J(On,`RPC '${e}' stream ${s} sending:`,T),h.send(T))},To:()=>h.close()}),y=(T,C,v)=>{T.listen(C,I=>{try{v(I)}catch(S){setTimeout(()=>{throw S},0)}})};return y(h,Vl.EventType.OPEN,()=>{m||(J(On,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),y(h,Vl.EventType.CLOSE,()=>{m||(m=!0,J(On,`RPC '${e}' stream ${s} transport closed`),w.So())}),y(h,Vl.EventType.ERROR,T=>{m||(m=!0,vs(On,`RPC '${e}' stream ${s} transport errored:`,T),w.So(new q(H.UNAVAILABLE,"The operation could not be completed")))}),y(h,Vl.EventType.MESSAGE,T=>{var C;if(!m){const v=T.data[0];Se(!!v);const I=v,S=I.error||((C=I[0])===null||C===void 0?void 0:C.error);if(S){J(On,`RPC '${e}' stream ${s} received error:`,S);const U=S.status;let N=function(_){const F=An[_];if(F!==void 0)return PF(F)}(U),B=S.message;N===void 0&&(N=H.INTERNAL,B="Unknown error status: "+U+" with message "+S.message),m=!0,w.So(new q(N,B)),h.close()}else J(On,`RPC '${e}' stream ${s} received:`,v),w.bo(v)}}),y(o,zT.STAT_EVENT,T=>{T.stat===f0.PROXY?J(On,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===f0.NOPROXY&&J(On,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(){return typeof window<"u"?window:null}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){return new T4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,r=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,s,A,i,o,a){this.ui=e,this.Ho=r,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CL extends v1{constructor(e,n,r,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=S4(this.serializer,e),r=function(A){if(!("targetChange"in A))return ke.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?ke.min():i.readTime?rn(i.readTime):ke.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=_0(this.serializer),n.addTarget=function(A,i){let o;const a=i.target;if(o=ef(a)?{documents:zF(A,a)}:{query:$F(A,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=MF(A,i.resumeToken);const c=C0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(ke.min())>0){o.readTime=Qa(A,i.snapshotVersion.toTimestamp());const c=C0(A,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=k4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=_0(this.serializer),n.removeTarget=e,this.a_(n)}}class IL extends v1{constructor(e,n,r,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Q4(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=_0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eu(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,I0(n,r),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new q(H.UNKNOWN,A.toString())})}Lo(e,n,r,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,I0(n,r),s,i,o,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(H.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class EL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nn(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,n,r,s,A){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{r.enqueueAndForget(async()=>{hi(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=pe(a);c.L_.add(4),await Ya(c),c.q_.set("Unknown"),c.L_.delete(4),await Tu(c)}(this))})}),this.q_=new EL(r,s)}}async function Tu(t){if(hi(t))for(const e of t.B_)await e(!0)}async function Ya(t){for(const e of t.B_)await e(!1)}function sg(t,e){const n=pe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Gv(n)?Kv(n):el(n).r_()&&Hv(n,e))}function Na(t,e){const n=pe(t),r=el(n);n.N_.delete(e),r.r_()&&y1(n,e),n.N_.size===0&&(r.r_()?r.o_():hi(n)&&n.q_.set("Unknown"))}function Hv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}el(t).A_(e)}function y1(t,e){t.Q_.xe(e),el(t).R_(e)}function Kv(t){t.Q_=new I4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),el(t).start(),t.q_.v_()}function Gv(t){return hi(t)&&!el(t).n_()&&t.N_.size>0}function hi(t){return pe(t).L_.size===0}function B1(t){t.Q_=void 0}async function TL(t){t.q_.set("Online")}async function FL(t){t.N_.forEach((e,n)=>{Hv(t,e)})}async function UL(t,e){B1(t),Gv(t)?(t.q_.M_(e),Kv(t)):t.q_.set("Unknown")}async function SL(t,e,n){if(t.q_.set("Online"),e instanceof OF&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const o of A.targetIds)s.N_.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.N_.delete(o),s.Q_.removeTarget(o))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cf(t,r)}else if(e instanceof hh?t.Q_.Ke(e):e instanceof LF?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ke.min()))try{const r=await d1(t.localStore);n.compareTo(r)>=0&&await function(A,i){const o=A.Q_.rt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const d=A.N_.get(a);if(!d)return;A.N_.set(a,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),y1(A,a);const h=new ks(d.target,a,c,d.sequenceNumber);Hv(A,h)}),A.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await cf(t,r)}}async function cf(t,e,n){if(!ui(e))throw e;t.L_.add(1),await Ya(t),t.q_.set("Offline"),n||(n=()=>d1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Tu(t)})}function x1(t,e){return e().catch(n=>cf(t,n,e))}async function Za(t){const e=pe(t),n=ti(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;QL(e);)try{const s=await pL(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,kL(e,s)}catch(s){await cf(e,s)}C1(e)&&I1(e)}function QL(t){return hi(t)&&t.O_.length<10}function kL(t,e){t.O_.push(e);const n=ti(t);n.r_()&&n.V_&&n.m_(e.mutations)}function C1(t){return hi(t)&&!ti(t).n_()&&t.O_.length>0}function I1(t){ti(t).start()}async function RL(t){ti(t).p_()}async function NL(t){const e=ti(t);for(const n of t.O_)e.m_(n.mutations)}async function PL(t,e,n){const r=t.O_.shift(),s=Uv.from(r,e,n);await x1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Za(t)}async function DL(t,e){e&&ti(t).V_&&await async function(r,s){if(function(i){return NF(i)&&i!==H.ABORTED}(s.code)){const A=r.O_.shift();ti(r).s_(),await x1(r,()=>r.remoteSyncer.rejectFailedWrite(A.batchId,s)),await Za(r)}}(t,e),C1(t)&&I1(t)}async function iI(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=hi(n);n.L_.add(3),await Ya(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Tu(n)}async function S0(t,e){const n=pe(t);e?(n.L_.delete(2),await Tu(n)):e||(n.L_.add(2),await Ya(n),n.q_.set("Unknown"))}function el(t){return t.K_||(t.K_=function(n,r,s){const A=pe(n);return A.w_(),new CL(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:TL.bind(null,t),Ro:FL.bind(null,t),mo:UL.bind(null,t),d_:SL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Gv(t)?Kv(t):t.q_.set("Unknown")):(await t.K_.stop(),B1(t))})),t.K_}function ti(t){return t.U_||(t.U_=function(n,r,s){const A=pe(n);return A.w_(),new IL(r,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RL.bind(null,t),mo:DL.bind(null,t),f_:NL.bind(null,t),g_:PL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Za(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n,r,s,A){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=A,this.deferred=new Sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,A){const i=Date.now()+r,o=new zv(e,n,i,s,A);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tl(t,e){if(nn("AsyncQueue",`${e}: ${t}`),ui(t))return new q(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=jl(),this.sortedSet=new bt(this.comparator)}static emptySet(e){return new ua(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,A=r.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.W_=new bt(de.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pa{constructor(e,n,r,s,A,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,A){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new Pa(e,n,ua.emptySet(n),i,r,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OL{constructor(){this.queries=aI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=pe(n),A=s.queries;s.queries=aI(),A.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new q(H.ABORTED,"Firestore shutting down"))}}function aI(){return new di(t=>BF(t),xu)}async function $v(t,e){const n=pe(t);let r=3;const s=e.query;let A=n.queries.get(s);A?!A.H_()&&e.J_()&&(r=2):(A=new LL,r=e.J_()?0:1);try{switch(r){case 0:A.z_=await n.onListen(s,!0);break;case 1:A.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const o=tl(i,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,A),A.j_.push(e),e.Z_(n.onlineState),A.z_&&e.X_(A.z_)&&qv(n)}async function Wv(t,e){const n=pe(t),r=e.query;let s=3;const A=n.queries.get(r);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ML(t,e){const n=pe(t);let r=!1;for(const s of e){const A=s.query,i=n.queries.get(A);if(i){for(const o of i.j_)o.X_(s)&&(r=!0);i.z_=s}}r&&qv(n)}function VL(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const A of s.j_)A.onError(n);r.queries.delete(e)}function qv(t){t.Y_.forEach(e=>{e.next()})}var Q0,lI;(lI=Q0||(Q0={})).ea="default",lI.Cache="cache";class Jv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Q0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.serializer=e}Es(e){return ms(this.serializer,e)}ds(e){return e.metadata.exists?GF(this.serializer,e.document,!1):Ut.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return rn(e)}}class HL{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=At.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new cI(this.serializer);for(const s of e)if(s.metadata.queries){const A=r.Es(s.metadata.name);for(const i of s.metadata.queries){const o=(n.get(i)||Je()).add(A);n.set(i,o)}}return n}async complete(){const e=await mL(this.localStore,new cI(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await wL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function _1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.key=e}}class b1{constructor(e){this.key=e}}class T1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=CF(e),this.Ra=new ua(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new oI,s=n?n.Ra:this.Ra;let A=n?n.mutatedKeys:this.mutatedKeys,i=s,o=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Cu(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;f&&m?f.data.isEqual(m.data)?w!==y&&(r.track({type:3,doc:m}),T=!0):this.ga(f,m)||(r.track({type:2,doc:m}),T=!0,(a&&this.Aa(m,a)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),T=!0):f&&!m&&(r.track({type:1,doc:f}),T=!0,(a||c)&&(o=!0)),T&&(m?(i=i.add(m),A=y?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:A}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,w){const y=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return y(m)-y(w)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),s=s!=null&&s;const o=n&&!s?this.ya():[],a=this.da.size===0&&this.current&&!s?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new Pa(this.query,e.Ra,A,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new oI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new b1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new E1(r))}),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GL{constructor(e){this.key=e,this.va=!1}}class zL{constructor(e,n,r,s,A,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new di(o=>BF(o),xu),this.Ma=new Map,this.xa=new Set,this.Oa=new bt(de.comparator),this.Na=new Map,this.La=new Dv,this.Ba={},this.ka=new Map,this.qa=Ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $L(t,e,n=!0){const r=Ag(t);let s;const A=r.Fa.get(e);return A?(r.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await F1(r,e,n,!0),s}async function WL(t,e){const n=Ag(t);await F1(n,e,!0,!1)}async function F1(t,e,n,r){const s=await ka(t.localStore,er(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,n);let o;return r&&(o=await Xv(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&sg(t.remoteStore,s),o}async function Xv(t,e,n,r,s){t.Ka=(h,f,m)=>async function(y,T,C,v){let I=T.view.ma(C);I.ns&&(I=await of(y.localStore,T.query,!1).then(({documents:B})=>T.view.ma(B,I)));const S=v&&v.targetChanges.get(T.targetId),U=v&&v.targetMismatches.get(T.targetId)!=null,N=T.view.applyChanges(I,y.isPrimaryClient,S,U);return k0(y,T.targetId,N.wa),N.snapshot}(t,h,f,m);const A=await of(t.localStore,e,!0),i=new T1(e,A.Ts),o=i.ma(A.documents),a=Eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=i.applyChanges(o,t.isPrimaryClient,a);k0(t,n,c.wa);const d=new KL(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function qL(t,e,n){const r=pe(t),s=r.Fa.get(e),A=r.Ma.get(s.targetId);if(A.length>1)return r.Ma.set(s.targetId,A.filter(i=>!xu(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ra(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Na(r.remoteStore,s.targetId),Da(r,s.targetId)}).catch(ci)):(Da(r,s.targetId),await Ra(r.localStore,s.targetId,!0))}async function JL(t,e){const n=pe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Na(n.remoteStore,r.targetId))}async function XL(t,e,n){const r=ty(t);try{const s=await function(i,o){const a=pe(i),c=Lt.now(),d=o.reduce((m,w)=>m.add(w.key),Je());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=ur(),y=Je();return a.cs.getEntries(m,d).next(T=>{w=T,w.forEach((C,v)=>{v.isValidDocument()||(y=y.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,w)).next(T=>{h=T;const C=[];for(const v of o){const I=B4(v,h.get(v.key).overlayedDocument);I!=null&&C.push(new eA(v.key,I,dF(I.value.mapValue),Dt.exists(!0)))}return a.mutationQueue.addMutationBatch(m,c,C,o)}).next(T=>{f=T;const C=T.applyToLocalDocumentSet(h,y);return a.documentOverlayCache.saveOverlays(m,T.batchId,C)})}).then(()=>({batchId:f.batchId,changes:_F(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new bt($e)),c=c.insert(o,a),i.Ba[i.currentUser.toKey()]=c}(r,s.batchId,n),await tA(r,s.changes),await Za(r.remoteStore)}catch(s){const A=tl(s,"Failed to persist write");n.reject(A)}}async function U1(t,e){const n=pe(t);try{const r=await gL(n.localStore,e);e.targetChanges.forEach((s,A)=>{const i=n.Na.get(A);i&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?Se(i.va):s.removedDocuments.size>0&&(Se(i.va),i.va=!1))}),await tA(n,r,e)}catch(r){await ci(r)}}function uI(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((A,i)=>{const o=i.view.Z_(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const a=pe(i);a.onlineState=o;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&qv(a)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YL(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),A=s&&s.key;if(A){let i=new bt(de.comparator);i=i.insert(A,Ut.newNoDocument(A,ke.min()));const o=Je().add(A),a=new _u(ke.min(),new Map,new bt($e),i,o);await U1(r,a),r.Oa=r.Oa.remove(A),r.Na.delete(e),ey(r)}else await Ra(r.localStore,e,!1).then(()=>Da(r,e,n)).catch(ci)}async function ZL(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await fL(n.localStore,e);Zv(n,r,null),Yv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tA(n,s)}catch(s){await ci(s)}}async function eO(t,e,n){const r=pe(t);try{const s=await function(i,o){const a=pe(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(Se(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(r.localStore,e);Zv(r,e,n),Yv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tA(r,s)}catch(s){await ci(s)}}async function tO(t,e){const n=pe(t);hi(n.remoteStore)||J("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=pe(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const s=n.ka.get(r)||[];s.push(e),n.ka.set(r,s)}catch(r){const s=tl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Yv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Zv(t,e,n){const r=pe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const A=s.get(e);A&&(n?A.reject(n):A.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Da(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||S1(t,r)})}function S1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Na(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ey(t))}function k0(t,e,n){for(const r of n)r instanceof E1?(t.La.addReference(r.key,e),nO(t,r)):r instanceof b1?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||S1(t,r.key)):Ee()}function nO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),ey(t))}function ey(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(At.fromString(e)),r=t.qa.next();t.Na.set(r,new GL(n)),t.Oa=t.Oa.insert(n,r),sg(t.remoteStore,new ks(er(qa(n.path)),r,"TargetPurposeLimboResolution",lr.oe))}}async function tA(t,e,n){const r=pe(t),s=[],A=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){s.push(c);const h=Mv.Wi(a.targetId,c);A.push(h)}}))}),await Promise.all(i),r.Ca.d_(s),await async function(a,c){const d=pe(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!ui(h))throw h;J("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),w=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(f,y)}}}(r.localStore,A))}async function rO(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await u1(n.localStore,e);n.currentUser=e,function(A,i){A.ka.forEach(o=>{o.forEach(a=>{a.reject(new q(H.CANCELLED,i))})}),A.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tA(n,r.hs)}}function sO(t,e){const n=pe(t),r=n.Na.get(e);if(r&&r.va)return Je().add(r.key);{let s=Je();const A=n.Ma.get(e);if(!A)return s;for(const i of A){const o=n.Fa.get(i);s=s.unionWith(o.view.Va)}return s}}async function AO(t,e){const n=pe(t),r=await of(n.localStore,e.query,!0),s=e.view.ba(r);return n.isPrimaryClient&&k0(n,e.targetId,s.wa),s}async function iO(t,e){const n=pe(t);return g1(n.localStore,e).then(r=>tA(n,r))}async function oO(t,e,n,r){const s=pe(t),A=await function(o,a){const c=pe(o),d=pe(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(s.localStore,e);A!==null?(n==="pending"?await Za(s.remoteStore):n==="acknowledged"||n==="rejected"?(Zv(s,e,r||null),Yv(s,e),function(o,a){pe(pe(o).mutationQueue).On(a)}(s.localStore,e)):Ee(),await tA(s,A)):J("SyncEngine","Cannot apply mutation batch with id: "+e)}async function aO(t,e){const n=pe(t);if(Ag(n),ty(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await dI(n,r.toArray());n.Qa=!0,await S0(n.remoteStore,!0);for(const A of s)sg(n.remoteStore,A)}else if(e===!1&&n.Qa!==!1){const r=[];let s=Promise.resolve();n.Ma.forEach((A,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):s=s.then(()=>(Da(n,i),Ra(n.localStore,i,!0))),Na(n.remoteStore,i)}),await s,await dI(n,r),function(i){const o=pe(i);o.Na.forEach((a,c)=>{Na(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new bt(de.comparator)}(n),n.Qa=!1,await S0(n.remoteStore,!1)}}async function dI(t,e,n){const r=pe(t),s=[],A=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await ka(r.localStore,er(a[0]));for(const c of a){const d=r.Fa.get(c),h=await AO(r,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await f1(r.localStore,i);o=await ka(r.localStore,c),await Xv(r,Q1(c),i,!1,o.resumeToken)}s.push(o)}return r.Ca.d_(A),s}function Q1(t){return yF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lO(t){return function(n){return pe(pe(n).persistence).Qi()}(pe(t).localStore)}async function cO(t,e,n,r){const s=pe(t);if(s.Qa)return void J("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(n){case"current":case"not-current":{const i=await g1(s.localStore,xF(A[0])),o=_u.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Wt.EMPTY_BYTE_STRING);await tA(s,i,o);break}case"rejected":await Ra(s.localStore,e,!0),Da(s,e,r);break;default:Ee()}}async function uO(t,e,n){const r=Ag(t);if(r.Qa){for(const s of e){if(r.Ma.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){J("SyncEngine","Adding an already active target "+s);continue}const A=await f1(r.localStore,s),i=await ka(r.localStore,A);await Xv(r,Q1(A),i.targetId,!1,i.resumeToken),sg(r.remoteStore,i)}for(const s of n)r.Ma.has(s)&&await Ra(r.localStore,s,!1).then(()=>{Na(r.remoteStore,s),Da(r,s)}).catch(ci)}}function Ag(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=U1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YL.bind(null,e),e.Ca.d_=ML.bind(null,e.eventManager),e.Ca.$a=VL.bind(null,e.eventManager),e}function ty(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eO.bind(null,e),e}function dO(t,e,n){const r=pe(t);(async function(A,i,o){try{const a=await i.getMetadata();if(await function(m,w){const y=pe(m),T=rn(w.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",C=>y.Gr.getBundleMetadata(C,w.id)).then(C=>!!C&&C.createTime.compareTo(T)>=0)}(A.localStore,a))return await i.close(),o._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(_1(a));const c=new HL(a,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await tA(A,h.Ia,void 0),await function(m,w){const y=pe(m);return y.persistence.runTransaction("Save bundle","readwrite",T=>y.Gr.saveBundleMetadata(T,w))}(A.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return vs("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Ga(e){return new a1(rg.Zr,this.serializer)}Wa(e){return new m1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class k1 extends tu{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await ty(this.Ja.syncEngine),await Za(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new J4(r,e.asyncQueue,n)}Ha(e,n){const r=new SD(n,this.persistence);return new UD(e.asyncQueue,r)}Ga(e){const n=Ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new Lv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,w1(),fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new m1}}class hO extends k1{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof kp&&(this.sharedClientState.syncEngine={no:oO.bind(null,n),ro:cO.bind(null,n),io:uO.bind(null,n),Qi:lO.bind(null,n),eo:iO.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await aO(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=w1();if(!kp.D(n))throw new q(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class nu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rO.bind(null,this.syncEngine),await S0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OL}()}createDatastore(e){const n=bu(e.databaseInfo.databaseId),r=function(A){return new xL(A)}(e.databaseInfo);return function(A,i,o,a){return new _L(A,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,A,i,o){return new bL(r,s,A,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>uI(this.syncEngine,n,0),function(){return AI.D()?new AI:new vL}())}createSyncEngine(e,n){return function(s,A,i,o,a,c,d){const h=new zL(s,A,i,o,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const A=pe(s);J("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Ya(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}nu.provider={build:()=>new nu};function hI(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new Sn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const s=await this.iu(r);return new jL(JSON.parse(s),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new q(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,A){const i=pe(s),o={documents:A.map(h=>Zc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,At.emptyPath(),o,A.length),c=new Map;a.forEach(h=>{const f=U4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());Se(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=de.fromPath(r);this.mutations.push(new Tv(s,this.precondition(s)))}),await async function(r,s){const A=pe(r),i={writes:s.map(o=>eu(A.serializer,o))};await A.Mo("Commit",A.serializer.databaseId,At.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ee();n=ke.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new q(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ke.min())?Dt.exists(!1):Dt.updateTime(n):Dt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ke.min()))throw new q(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dt.updateTime(n)}return Dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,s,A){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=A,this._u=r.maxAttempts,this.t_=new jv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new gO(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!yu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!NF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,r,s,A){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Bn.UNAUTHENTICATED,this.clientId=JT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(r,async i=>{J("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(J("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Np(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await u1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ny(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>iI(e.remoteStore,s)),t._onlineComponents=e}async function ny(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await Np(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vs("Error using user provided cache. Falling back to memory cache: "+n),await Np(t,new tu)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await Np(t,new tu);return t._offlineComponents}async function og(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await fI(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await fI(t,new nu))),t._onlineComponents}function R1(t){return ny(t).then(e=>e.persistence)}function ry(t){return ny(t).then(e=>e.localStore)}function N1(t){return og(t).then(e=>e.remoteStore)}function sy(t){return og(t).then(e=>e.syncEngine)}function wO(t){return og(t).then(e=>e.datastore)}async function La(t){const e=await og(t),n=e.eventManager;return n.onListen=$L.bind(null,e.syncEngine),n.onUnlisten=qL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JL.bind(null,e.syncEngine),n}function vO(t){return t.asyncQueue.enqueue(async()=>{const e=await R1(t),n=await N1(t);return e.setNetworkEnabled(!0),function(s){const A=pe(s);return A.L_.delete(0),Tu(A)}(n)})}function yO(t){return t.asyncQueue.enqueue(async()=>{const e=await R1(t),n=await N1(t);return e.setNetworkEnabled(!1),async function(s){const A=pe(s);A.L_.add(0),await Ya(A),A.q_.set("Offline")}(n)})}function BO(t,e){const n=new Sn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await function(c,d){const h=pe(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new q(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=tl(o,`Failed to get document '${A} from cache`);i.reject(a)}}(await ry(t),e,n)),n.promise}function P1(t,e,n={}){const r=new Sn;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new ig({next:f=>{d.Za(),i.enqueueAndForget(()=>Wv(A,h));const m=f.docs.has(o);!m&&f.fromCache?c.reject(new q(H.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&a&&a.source==="server"?c.reject(new q(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Jv(qa(o.path),d,{includeMetadataChanges:!0,_a:!0});return $v(A,h)}(await La(t),t.asyncQueue,e,n,r)),r.promise}function xO(t,e){const n=new Sn;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const o=await of(s,A,!0),a=new T1(A,o.Ts),c=a.ma(o.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const a=tl(o,`Failed to execute query '${A} against cache`);i.reject(a)}}(await ry(t),e,n)),n.promise}function D1(t,e,n={}){const r=new Sn;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,o,a,c){const d=new ig({next:f=>{d.Za(),i.enqueueAndForget(()=>Wv(A,h)),f.fromCache&&a.source==="server"?c.reject(new q(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Jv(o,d,{includeMetadataChanges:!0,_a:!0});return $v(A,h)}(await La(t),t.asyncQueue,e,n,r)),r.promise}function CO(t,e){const n=new ig(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){pe(s).Y_.add(A),A.next()}(await La(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){pe(s).Y_.delete(A)}(await La(t),n))}}function IO(t,e,n,r){const s=function(i,o){let a;return a=typeof i=="string"?DF().encode(i):i,function(d,h){return new fO(d,h)}(function(d,h){if(d instanceof Uint8Array)return hI(d,h);if(d instanceof ArrayBuffer)return hI(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,bu(e));t.asyncQueue.enqueueAndForget(async()=>{dO(await sy(t),s,r)})}function _O(t,e){return t.asyncQueue.enqueue(async()=>function(r,s){const A=pe(r);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await ry(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t,e,n){if(!n)throw new q(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O1(t,e,n,r){if(e===!0&&r===!0)throw new q(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pI(t){if(!de.isDocumentKey(t))throw new q(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mI(t){if(de.isDocumentKey(t))throw new q(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ag(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee()}function ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ag(t);throw new q(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function M1(t,e){if(e<=0)throw new q(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new q(H.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vD;switch(r.type){case"firstParty":return new CD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gI.get(n);r&&(J("ComponentProvider","Removing Datastore"),gI.delete(n),r.terminate())}(this),Promise.resolve()}}function EO(t,e,n,r={}){var s;const A=(t=ut(t,Fu))._getSettings(),i=`${e}:${n}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=Bn.MOCK_USER;else{o=ON(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Bn(c)}t._authCredentials=new yD(new qT(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tr=class V1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new V1(this.firestore,e,this._query)}},jt=class j1{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new j1(this.firestore,e,this._key)}},jA=class H1 extends tr{constructor(e,n,r){super(e,n,qa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new de(e))}withConverter(e){return new H1(this.firestore,e,this._path)}};function K1(t,e,...n){if(t=Me(t),Ay("collection","path",e),t instanceof Fu){const r=At.fromString(e,...n);return mI(r),new jA(t,null,r)}{if(!(t instanceof jt||t instanceof jA))throw new q(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return mI(r),new jA(t.firestore,null,r)}}function bO(t,e){if(t=ut(t,Fu),Ay("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new q(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new tr(t,null,function(r){return new Zs(At.emptyPath(),r)}(e))}function uf(t,e,...n){if(t=Me(t),arguments.length===1&&(e=JT.newId()),Ay("doc","path",e),t instanceof Fu){const r=At.fromString(e,...n);return pI(r),new jt(t,null,new de(r))}{if(!(t instanceof jt||t instanceof jA))throw new q(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return pI(r),new jt(t.firestore,t instanceof jA?t.converter:null,new de(r))}}function G1(t,e){return t=Me(t),e=Me(e),(t instanceof jt||t instanceof jA)&&(e instanceof jt||e instanceof jA)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function z1(t,e){return t=Me(t),e=Me(e),t instanceof tr&&e instanceof tr&&t.firestore===e.firestore&&xu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jv(this,"async_queue_retry"),this.Vu=()=>{const r=fh();r&&J("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Sn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ui(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw nn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=zv.createAndSchedule(this,e,n,r,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&Ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function R0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const A of r)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class TO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=-1;let sn=class extends Fu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vI,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vI(e),this._firestoreClient=void 0,await e}}};function Gn(t){if(t._terminated)throw new q(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$1(t),t._firestoreClient}function $1(t){var e,n,r;const s=t._freezeSettings(),A=function(o,a,c,d){return new ZD(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,L1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new mO(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function UO(t,e){vs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return W1(t,nu.provider,{build:r=>new k1(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function SO(t){vs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();W1(t,nu.provider,{build:n=>new hO(n,e.cacheSizeBytes)})}function W1(t,e,n){if((t=ut(t,sn))._firestoreClient||t._terminated)throw new q(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new q(H.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},$1(t)}function QO(t){if(t._initialized&&!t._terminated)throw new q(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Sn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ps.D())return Promise.resolve();const s=r+"main";await ps.delete(s)}(Ov(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function kO(t){return function(n){const r=new Sn;return n.asyncQueue.enqueueAndForget(async()=>tO(await sy(n),r)),r.promise}(Gn(t=ut(t,sn)))}function RO(t){return vO(Gn(t=ut(t,sn)))}function NO(t){return yO(Gn(t=ut(t,sn)))}function PO(t,e){const n=Gn(t=ut(t,sn)),r=new TO;return IO(n,t._databaseId,e,r),r}function DO(t,e){return _O(Gn(t=ut(t,sn)),e).then(n=>n?new tr(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bs(Wt.fromBase64String(e))}catch(n){throw new q(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bs(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ni=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let A=0;A<r.length;++A)if(r[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=/^__.*__$/;class OO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new eA(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ja(e,this.data,n,this.fieldTransforms)}}class q1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new eA(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function J1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class cg{constructor(e,n,r,s,A,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return df(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(J1(this.Cu)&&LO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class MO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bu(e)}Qu(e,n,r,s=!1){return new cg({Cu:e,methodName:n,qu:r,path:Pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wo(t){const e=t._freezeSettings(),n=bu(t._databaseId);return new MO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ug(t,e,n,r,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,n,s);hy("Data must be an object, but it was:",i,r);const o=Z1(r,i);let a,c;if(A.merge)a=new cr(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=N0(e,h,n);if(!i.contains(f))throw new q(H.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);tU(d,f)||d.push(f)}a=new cr(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new OO(new Tn(o),a,c)}class Uu extends mo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uu}}function X1(t,e,n){return new cg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oy extends mo{_toFieldTransform(e){return new Iu(e.path,new Ua)}isEqual(e){return e instanceof oy}}class ay extends mo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=X1(this,e,!0),r=this.Ku.map(A=>vo(A,n)),s=new to(r);return new Iu(e.path,s)}isEqual(e){return e instanceof ay&&Hc(this.Ku,e.Ku)}}class ly extends mo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=X1(this,e,!0),r=this.Ku.map(A=>vo(A,n)),s=new no(r);return new Iu(e.path,s)}isEqual(e){return e instanceof ly&&Hc(this.Ku,e.Ku)}}class cy extends mo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Sa(e.serializer,TF(e.serializer,this.$u));return new Iu(e.path,n)}isEqual(e){return e instanceof cy&&this.$u===e.$u}}function uy(t,e,n,r){const s=t.Qu(1,e,n);hy("Data must be an object, but it was:",s,r);const A=[],i=Tn.empty();po(r,(a,c)=>{const d=fy(e,a,n);c=Me(c);const h=s.Nu(d);if(c instanceof Uu)A.push(d);else{const f=vo(c,h);f!=null&&(A.push(d),i.set(d,f))}});const o=new cr(A);return new q1(i,o,s.fieldTransforms)}function dy(t,e,n,r,s,A){const i=t.Qu(1,e,n),o=[N0(e,r,n)],a=[s];if(A.length%2!=0)throw new q(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)o.push(N0(e,A[f])),a.push(A[f+1]);const c=[],d=Tn.empty();for(let f=o.length-1;f>=0;--f)if(!tU(c,o[f])){const m=o[f];let w=a[f];w=Me(w);const y=i.Nu(m);if(w instanceof Uu)c.push(m);else{const T=vo(w,y);T!=null&&(c.push(m),d.set(m,T))}}const h=new cr(c);return new q1(d,h,i.fieldTransforms)}function Y1(t,e,n,r=!1){return vo(n,t.Qu(r?4:3,e))}function vo(t,e){if(eU(t=Me(t)))return hy("Unsupported field value:",e,t),Z1(t,e);if(t instanceof mo)return function(r,s){if(!J1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const A=r._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const A=[];let i=0;for(const o of r){let a=vo(o,s.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),A.push(a),i++}return{arrayValue:{values:A}}}(t,e)}return function(r,s){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TF(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const A=Lt.fromDate(r);return{timestampValue:Qa(s.serializer,A)}}if(r instanceof Lt){const A=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qa(s.serializer,A)}}if(r instanceof lg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bs)return{bytesValue:MF(s.serializer,r._byteString)};if(r instanceof jt){const A=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:kv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof iy)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return bv(o.serializer,a)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ag(r)}`)}(t,e)}function Z1(t,e){const n={};return aF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):po(t,(r,s)=>{const A=vo(s,e.Mu(r));A!=null&&(n[r]=A)}),{mapValue:{fields:n}}}function eU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof lg||t instanceof Bs||t instanceof jt||t instanceof mo||t instanceof iy)}function hy(t,e,n){if(!eU(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ag(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function N0(t,e,n){if((e=Me(e))instanceof ni)return e._internalPath;if(typeof e=="string")return fy(t,e);throw df("Field path arguments must be of type string or ",t,!1,void 0,n)}const VO=new RegExp("[~\\*/\\[\\]]");function fy(t,e,n){if(e.search(VO)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ni(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function df(t,e,n,r,s){const A=r&&!r.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(A||i)&&(a+=" (found",A&&(a+=` in field ${r}`),i&&(a+=` in document ${s}`),a+=")"),new q(H.INVALID_ARGUMENT,o+t+a)}function tU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,s,A){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jO extends ru{data(){return super.data()}}function dg(t,e){return typeof e=="string"?fy(t,e):e instanceof ni?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gy{}class Su extends gy{}function dA(t,e,...n){let r=[];e instanceof gy&&r.push(e),r=r.concat(n),function(A){const i=A.filter(a=>a instanceof py).length,o=A.filter(a=>a instanceof hg).length;if(i>1||i>0&&o>0)throw new q(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class hg extends Su{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hg(e,n,r)}_apply(e){const n=this._parse(e);return sU(e._query,n),new tr(e.firestore,e.converter,x0(e._query,n))}_parse(e){const n=wo(e.firestore);return function(A,i,o,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){BI(h,d);const m=[];for(const w of h)m.push(yI(a,A,w));f={arrayValue:{values:m}}}else f=yI(a,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||BI(h,d),f=Y1(o,i,h,d==="in"||d==="not-in");return it.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function HO(t,e,n){const r=e,s=dg("where",t);return hg._create(s,r,n)}class py extends gy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new py(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,A){let i=s;const o=A.getFlattenedFilters();for(const a of o)sU(i,a),i=x0(i,a)}(e._query,n),new tr(e.firestore,e.converter,x0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class my extends Su{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new my(e,n)}_apply(e){const n=function(s,A,i){if(s.startAt!==null)throw new q(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yc(A,i)}(e._query,this._field,this._direction);return new tr(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new Zs(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function KO(t,e="asc"){const n=e,r=dg("orderBy",t);return my._create(r,n)}class fg extends Su{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new fg(e,n,r)}_apply(e){return new tr(e.firestore,e.converter,nf(e._query,this._limit,this._limitType))}}function GO(t){return M1("limit",t),fg._create("limit",t,"F")}function zO(t){return M1("limitToLast",t),fg._create("limitToLast",t,"L")}class gg extends Su{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new gg(e,n,r)}_apply(e){const n=rU(e,this.type,this._docOrFields,this._inclusive);return new tr(e.firestore,e.converter,function(s,A){return new Zs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,n))}}function $O(...t){return gg._create("startAt",t,!0)}function WO(...t){return gg._create("startAfter",t,!1)}class pg extends Su{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new pg(e,n,r)}_apply(e){const n=rU(e,this.type,this._docOrFields,this._inclusive);return new tr(e.firestore,e.converter,function(s,A){return new Zs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,n))}}function qO(...t){return pg._create("endBefore",t,!1)}function JO(...t){return pg._create("endAt",t,!0)}function rU(t,e,n,r){if(n[0]=Me(n[0]),n[0]instanceof ru)return function(A,i,o,a,c){if(!a)throw new q(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of ca(A))if(h.field.isKeyField())d.push(Zi(i,a.key));else{const f=a.data.field(h.field);if(Xf(f))throw new q(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new q(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new ei(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=wo(t.firestore);return function(i,o,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new q(H.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let w=0;w<d.length;w++){const y=d[w];if(f[w].field.isKeyField()){if(typeof y!="string")throw new q(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!_v(i)&&y.indexOf("/")!==-1)throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const T=i.path.child(At.fromString(y));if(!de.isDocumentKey(T))throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const C=new de(T);m.push(Zi(o,C))}else{const T=Y1(a,c,y);m.push(T)}}return new ei(m,h)}(t._query,t.firestore._databaseId,s,e,n,r)}}function yI(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new q(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_v(e)&&n.indexOf("/")!==-1)throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(At.fromString(n));if(!de.isDocumentKey(r))throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zi(t,new de(r))}if(n instanceof jt)return Zi(t,n._key);throw new q(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ag(n)}.`)}function BI(t,e){if(!Array.isArray(t)||t.length===0)throw new q(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sU(t,e){const n=function(s,A){for(const i of s)for(const o of i.getFlattenedFilters())if(A.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wy{convertValue(e,n="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(XA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return po(e,(s,A)=>{r[s]=this.convertValue(A,n)}),r}convertVectorValue(e){var n,r,s;const A=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(i=>Rt(i.doubleValue));return new iy(A)}convertGeoPoint(e){return new lg(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const n=zs(e);return new Lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);Se(XF(r));const s=new YA(r.get(1),r.get(3)),A=new de(r.popFirst(5));return s.isEqual(n)||nn(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class XO extends wy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let $s=class extends ru{constructor(e,n,r,s,A,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},fc=class extends $s{data(e={}){return super.data(e)}},ri=class{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Pi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fc(this._firestore,this._userDataWriter,r.key,r,new Pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new fc(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Pi(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>A||o.type!==3).map(o=>{const a=new fc(s._firestore,s._userDataWriter,o.doc.key,o.doc,new Pi(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:YO(o.type),doc:a,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function YO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function AU(t,e){return t instanceof $s&&e instanceof $s?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ri&&e instanceof ri&&t._firestore===e._firestore&&z1(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){t=ut(t,jt);const e=ut(t.firestore,sn);return P1(Gn(e),t._key).then(n=>vy(e,t,n))}class yo extends wy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function eM(t){t=ut(t,jt);const e=ut(t.firestore,sn),n=Gn(e),r=new yo(e);return BO(n,t._key).then(s=>new $s(e,r,t._key,s,new Pi(s!==null&&s.hasLocalMutations,!0),t.converter))}function tM(t){t=ut(t,jt);const e=ut(t.firestore,sn);return P1(Gn(e),t._key,{source:"server"}).then(n=>vy(e,t,n))}function nM(t){t=ut(t,tr);const e=ut(t.firestore,sn),n=Gn(e),r=new yo(e);return nU(t._query),D1(n,t._query).then(s=>new ri(e,r,t,s))}function rM(t){t=ut(t,tr);const e=ut(t.firestore,sn),n=Gn(e),r=new yo(e);return xO(n,t._query).then(s=>new ri(e,r,t,s))}function sM(t){t=ut(t,tr);const e=ut(t.firestore,sn),n=Gn(e),r=new yo(e);return D1(n,t._query,{source:"server"}).then(s=>new ri(e,r,t,s))}function xI(t,e,n){t=ut(t,jt);const r=ut(t.firestore,sn),s=mg(t.converter,e,n);return Qu(r,[ug(wo(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dt.none())])}function CI(t,e,n,...r){t=ut(t,jt);const s=ut(t.firestore,sn),A=wo(s);let i;return i=typeof(e=Me(e))=="string"||e instanceof ni?dy(A,"updateDoc",t._key,e,n,r):uy(A,"updateDoc",t._key,e),Qu(s,[i.toMutation(t._key,Dt.exists(!0))])}function AM(t){return Qu(ut(t.firestore,sn),[new Xa(t._key,Dt.none())])}function iM(t,e){const n=ut(t.firestore,sn),r=uf(t),s=mg(t.converter,e);return Qu(n,[ug(wo(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dt.exists(!1))]).then(()=>r)}function iU(t,...e){var n,r,s;t=Me(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||R0(e[i])||(A=e[i],i++);const o={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(R0(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let a,c,d;if(t instanceof jt)c=ut(t.firestore,sn),d=qa(t._key.path),a={next:h=>{e[i]&&e[i](vy(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=ut(t,tr);c=ut(h.firestore,sn),d=h._query;const f=new yo(c);a={next:m=>{e[i]&&e[i](new ri(c,f,h,m))},error:e[i+1],complete:e[i+2]},nU(t._query)}return function(f,m,w,y){const T=new ig(y),C=new Jv(m,T,w);return f.asyncQueue.enqueueAndForget(async()=>$v(await La(f),C)),()=>{T.Za(),f.asyncQueue.enqueueAndForget(async()=>Wv(await La(f),C))}}(Gn(c),d,o,a)}function oM(t,e){return CO(Gn(t=ut(t,sn)),R0(e)?e:{next:e})}function Qu(t,e){return function(r,s){const A=new Sn;return r.asyncQueue.enqueueAndForget(async()=>XL(await sy(r),s,A)),A.promise}(Gn(t),e)}function vy(t,e,n){const r=n.docs.get(e._key),s=new yo(t);return new $s(t,s,e._key,r,new Pi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lM=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wo(e)}set(e,n,r){this._verifyNotCommitted();const s=xA(e,this._firestore),A=mg(s.converter,n,r),i=ug(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,Dt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const A=xA(e,this._firestore);let i;return i=typeof(n=Me(n))=="string"||n instanceof ni?dy(this._dataReader,"WriteBatch.update",A._key,n,r,s):uy(this._dataReader,"WriteBatch.update",A._key,n),this._mutations.push(i.toMutation(A._key,Dt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=xA(e,this._firestore);return this._mutations=this._mutations.concat(new Xa(n._key,Dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function xA(t,e){if((t=Me(t)).firestore!==e)throw new q(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cM=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=wo(n)}get(n){const r=xA(n,this._firestore),s=new XO(this._firestore);return this._transaction.lookup([r._key]).then(A=>{if(!A||A.length!==1)return Ee();const i=A[0];if(i.isFoundDocument())return new ru(this._firestore,s,i.key,i,r.converter);if(i.isNoDocument())return new ru(this._firestore,s,r._key,null,r.converter);throw Ee()})}set(n,r,s){const A=xA(n,this._firestore),i=mg(A.converter,r,s),o=ug(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,o),this}update(n,r,s,...A){const i=xA(n,this._firestore);let o;return o=typeof(r=Me(r))=="string"||r instanceof ni?dy(this._dataReader,"Transaction.update",i._key,r,s,A):uy(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=xA(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=xA(e,this._firestore),r=new yo(this._firestore);return super.get(e).then(s=>new $s(this._firestore,r,n._key,s._document,new Pi(!1,!1),n.converter))}};function uM(t,e,n){t=ut(t,sn);const r=Object.assign(Object.assign({},aM),n);return function(A){if(A.maxAttempts<1)throw new q(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(A,i,o){const a=new Sn;return A.asyncQueue.enqueueAndForget(async()=>{const c=await wO(A);new pO(A.asyncQueue,c,o,i,a).au()}),a.promise}(Gn(t),s=>e(new cM(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(){return new Uu("deleteField")}function hM(){return new oy("serverTimestamp")}function fM(...t){return new ay("arrayUnion",t)}function gM(...t){return new ly("arrayRemove",t)}function pM(t){return new cy("increment",t)}(function(e,n=!0){(function(s){Wa=s})(li),qA(new ws("firestore",(r,{instanceIdentifier:s,options:A})=>{const i=r.getProvider("app").getImmediate(),o=new sn(new BD(r.getProvider("auth-internal")),new _D(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new YA(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:n},A),o._setSettings(A),o},"PUBLIC").setMultipleInstances(!0)),Xr(dC,"4.7.3",e),Xr(dC,"4.7.3","esm2017")})();const mM="@firebase/firestore-compat",wM="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new q("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){if(typeof Uint8Array>"u")throw new q("unimplemented","Uint8Arrays are not available in this environment.")}function _I(){if(!XD())throw new q("unimplemented","Blobs are unavailable in Firestore in this environment.")}let oU=class P0{constructor(e){this._delegate=e}static fromBase64String(e){return _I(),new P0(Bs.fromBase64String(e))}static fromUint8Array(e){return II(),new P0(Bs.fromUint8Array(e))}toBase64(){return _I(),this._delegate.toBase64()}toUint8Array(){return II(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){return vM(t,["next","error","complete"])}function vM(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{enableIndexedDbPersistence(e,n){return UO(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return SO(e._delegate)}clearIndexedDbPersistence(e){return QO(e._delegate)}}class aU{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof YA||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&vs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){EO(this._delegate,e,n,r)}enableNetwork(){return RO(this._delegate)}disableNetwork(){return NO(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,O1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return kO(this._delegate)}onSnapshotsInSync(e){return oM(this._delegate,e)}get app(){if(!this._appCompat)throw new q("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Oa(this,K1(this._delegate,e))}catch(n){throw Jn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Rr(this,uf(this._delegate,e))}catch(n){throw Jn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qn(this,bO(this._delegate,e))}catch(n){throw Jn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return uM(this._delegate,n=>e(new lU(this,n)))}batch(){return Gn(this._delegate),new cU(new lM(this._delegate,e=>Qu(this._delegate,e)))}loadBundle(e){return PO(this._delegate,e)}namedQuery(e){return DO(this._delegate,e).then(n=>n?new qn(this,n):null)}}class wg extends wy{constructor(e){super(),this.firestore=e}convertBytes(e){return new oU(new Bs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Rr.forKey(n,this.firestore,null)}}function BM(t){mD(t)}class lU{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new wg(e)}get(e){const n=Di(e);return this._delegate.get(n).then(r=>new su(this._firestore,new $s(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Di(e);return r?(yy("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=Di(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=Di(e);return this._delegate.delete(n),this}}class cU{constructor(e){this._delegate=e}set(e,n,r){const s=Di(e);return r?(yy("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const A=Di(e);return arguments.length===2?this._delegate.update(A,n):this._delegate.update(A,n,r,...s),this}delete(e){const n=Di(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class io{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new fc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Au(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=io.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let A=s.get(n);return A||(A=new io(e,new wg(e),n),s.set(n,A)),A}}io.INSTANCES=new WeakMap;class Rr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new q("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rr(n,new jt(n._delegate,r,new de(e)))}static forKey(e,n,r){return new Rr(n,new jt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Oa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Oa(this.firestore,K1(this._delegate,e))}catch(n){throw Jn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Me(e),e instanceof jt?G1(this._delegate,e):!1}set(e,n){n=yy("DocumentReference.set",n);try{return n?xI(this._delegate,e,n):xI(this._delegate,e)}catch(r){throw Jn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?CI(this._delegate,e):CI(this._delegate,e,n,...r)}catch(s){throw Jn(s,"updateDoc()","DocumentReference.update()")}}delete(){return AM(this._delegate)}onSnapshot(...e){const n=uU(e),r=dU(e,s=>new su(this.firestore,new $s(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return iU(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=eM(this._delegate):(e==null?void 0:e.source)==="server"?n=tM(this._delegate):n=ZO(this._delegate),n.then(r=>new su(this.firestore,new $s(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Rr(this.firestore,e?this._delegate.withConverter(io.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Jn(t,e,n){return t.message=t.message.replace(e,n),t}function uU(t){for(const e of t)if(typeof e=="object"&&!D0(e))return e;return{}}function dU(t,e){var n,r;let s;return D0(t[0])?s=t[0]:D0(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:A=>{s.next&&s.next(e(A))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class su{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Rr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return AU(this._delegate,e._delegate)}}class Au extends su{data(e){const n=this._delegate.data(e);return this._delegate._converter||wD(n!==void 0),n}}class qn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new wg(e)}where(e,n,r){try{return new qn(this.firestore,dA(this._delegate,HO(e,n,r)))}catch(s){throw Jn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new qn(this.firestore,dA(this._delegate,KO(e,n)))}catch(r){throw Jn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qn(this.firestore,dA(this._delegate,GO(e)))}catch(n){throw Jn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new qn(this.firestore,dA(this._delegate,zO(e)))}catch(n){throw Jn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qn(this.firestore,dA(this._delegate,$O(...e)))}catch(n){throw Jn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qn(this.firestore,dA(this._delegate,WO(...e)))}catch(n){throw Jn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qn(this.firestore,dA(this._delegate,qO(...e)))}catch(n){throw Jn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qn(this.firestore,dA(this._delegate,JO(...e)))}catch(n){throw Jn(n,"endAt()","Query.endAt()")}}isEqual(e){return z1(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=rM(this._delegate):(e==null?void 0:e.source)==="server"?n=sM(this._delegate):n=nM(this._delegate),n.then(r=>new L0(this.firestore,new ri(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=uU(e),r=dU(e,s=>new L0(this.firestore,new ri(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return iU(this._delegate,n,r)}withConverter(e){return new qn(this.firestore,e?this._delegate.withConverter(io.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class xM{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Au(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class L0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new qn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Au(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new xM(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Au(this._firestore,r))})}isEqual(e){return AU(this._delegate,e._delegate)}}class Oa extends qn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rr(this.firestore,e):null}doc(e){try{return e===void 0?new Rr(this.firestore,uf(this._delegate)):new Rr(this.firestore,uf(this._delegate,e))}catch(n){throw Jn(n,"doc()","CollectionReference.doc()")}}add(e){return iM(this._delegate,e).then(n=>new Rr(this.firestore,n))}isEqual(e){return G1(this._delegate,e._delegate)}withConverter(e){return new Oa(this.firestore,e?this._delegate.withConverter(io.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Di(t){return ut(t,jt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(...e){this._delegate=new ni(...e)}static documentId(){return new By(Pt.keyField().canonicalString())}isEqual(e){return e=Me(e),e instanceof ni?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._delegate=e}static serverTimestamp(){const e=hM();return e._methodName="FieldValue.serverTimestamp",new Ui(e)}static delete(){const e=dM();return e._methodName="FieldValue.delete",new Ui(e)}static arrayUnion(...e){const n=fM(...e);return n._methodName="FieldValue.arrayUnion",new Ui(n)}static arrayRemove(...e){const n=gM(...e);return n._methodName="FieldValue.arrayRemove",new Ui(n)}static increment(e){const n=pM(e);return n._methodName="FieldValue.increment",new Ui(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM={Firestore:aU,GeoPoint:lg,Timestamp:Lt,Blob:oU,Transaction:lU,WriteBatch:cU,DocumentReference:Rr,DocumentSnapshot:su,Query:qn,QueryDocumentSnapshot:Au,QuerySnapshot:L0,CollectionReference:Oa,FieldPath:By,FieldValue:Ui,setLogLevel:BM,CACHE_SIZE_UNLIMITED:FO};function IM(t,e){t.INTERNAL.registerComponent(new ws("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},CM)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){IM(t,(e,n)=>new aU(e,n,new yM)),t.registerVersion(mM,wM)}_M(As);function xy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}const Fl={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Uo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function hU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bM=EM,TM=hU,fU=new go("auth","Firebase",hU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new qf("@firebase/auth");function FM(t,...e){hf.logLevel<=nt.WARN&&hf.warn(`Auth (${li}): ${t}`,...e)}function gh(t,...e){hf.logLevel<=nt.ERROR&&hf.error(`Auth (${li}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,...e){throw Iy(t,...e)}function gn(t,...e){return Iy(t,...e)}function Cy(t,e,n){const r=Object.assign(Object.assign({},TM()),{[e]:n});return new go("auth","Firebase",r).create(e,{appName:t.name})}function Cn(t){return Cy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nl(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&kn(t,"argument-error"),Cy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Iy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fU.create(t,...e)}function ee(t,e,...n){if(!t)throw Iy(e,...n)}function hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gh(e),new Error(e)}function Zr(t,e){t||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _y(){return EI()==="http:"||EI()==="https:"}function EI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_y()||ET()||"connection"in navigator)?navigator.onLine:!0}function SM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zr(n>e,"Short delay should be less than long delay!"),this.isMobile=MN()||fv()}get(){return UM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t,e){Zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=new ku(3e4,6e4);function Jt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xt(t,e,n,r,s={}){return pU(t,s,async()=>{let A={},i={};r&&(e==="GET"?i=r:A={body:JSON.stringify(r)});const o=$a(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},A);return jN()||(c.referrerPolicy="no-referrer"),gU.fetch()(mU(t,t.config.apiHost,n,o),c)})}async function pU(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},QM),e);try{const s=new NM(t),A=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw Gl(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const o=A.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Gl(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Cy(t,d,c);kn(t,d)}}catch(s){if(s instanceof Yn)throw s;kn(t,"network-request-failed",{message:String(s)})}}async function nA(t,e,n,r,s={}){const A=await Xt(t,e,n,r,s);return"mfaPendingCredential"in A&&kn(t,"multi-factor-auth-required",{_serverResponse:A}),A}function mU(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Ey(t.config,s):`${t.config.apiScheme}://${s}`}function RM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gn(this.auth,"network-request-failed")),kM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=gn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){return t!==void 0&&t.getResponse!==void 0}function TI(t){return t!==void 0&&t.enterprise!==void 0}class PM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM(t){return(await Xt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function LM(t,e){return Xt(t,"GET","/v2/recaptchaConfig",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e){return Xt(t,"POST","/v1/accounts:delete",e)}async function MM(t,e){return Xt(t,"POST","/v1/accounts:update",e)}async function wU(t,e){return Xt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VM(t,e=!1){const n=Me(t),r=await n.getIdToken(e),s=vg(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:r,authTime:gc(Pp(s.auth_time)),issuedAtTime:gc(Pp(s.iat)),expirationTime:gc(Pp(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function Pp(t){return Number(t)*1e3}function vg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const s=xT(n);return s?JSON.parse(s):(gh("Failed to decode base64 JWT payload"),null)}catch(s){return gh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function FI(t){const e=vg(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ws(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yn&&jM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ws(t,wU(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?vU(A.providerUserInfo):[],o=GM(t.providerData,i),a=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:o,metadata:new O0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function KM(t){const e=Me(t);await ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function vU(t){return t.map(e=>{var{providerId:n}=e,r=xy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(t,e){const n=await pU(t,{},async()=>{const r=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=mU(t,s,"/v1/token",`key=${A}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",gU.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $M(t,e){return Xt(t,"POST","/v2/accounts:revokeToken",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=FI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:A}=await zM(e,n);this.updateTokensAndExpiration(r,s,Number(A))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:A}=n,i=new da;return r&&(ee(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(ee(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new da,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,A=xy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new O0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const n=await Ws(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VM(this,e)}reload(){return KM(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Cn(this.auth));const e=await this.getIdToken();return await Ws(this,OM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,A,i,o,a,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,m=(A=n.phoneNumber)!==null&&A!==void 0?A:void 0,w=(i=n.photoURL)!==null&&i!==void 0?i:void 0,y=(o=n.tenantId)!==null&&o!==void 0?o:void 0,T=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:S,isAnonymous:U,providerData:N,stsTokenManager:B}=n;ee(I&&B,e,"internal-error");const x=da.fromJSON(this.name,B);ee(typeof I=="string",e,"internal-error"),hA(h,e.name),hA(f,e.name),ee(typeof S=="boolean",e,"internal-error"),ee(typeof U=="boolean",e,"internal-error"),hA(m,e.name),hA(w,e.name),hA(y,e.name),hA(T,e.name),hA(C,e.name),hA(v,e.name);const _=new Rs({uid:I,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:U,photoURL:w,phoneNumber:m,tenantId:y,stsTokenManager:x,createdAt:C,lastLoginAt:v});return N&&Array.isArray(N)&&(_.providerData=N.map(F=>Object.assign({},F))),T&&(_._redirectEventId=T),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new da;s.updateFromServerResponse(n);const A=new Rs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ou(A),A}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?vU(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),o=new da;o.updateFromIdToken(r);const a=new Rs({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new O0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new Map;function Cr(t){Zr(t instanceof Function,"Expected a class definition");let e=UI.get(t);return e?(Zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,UI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yU.type="NONE";const Ma=yU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t,e,n){return`firebase:${t}:${e}:${n}`}class ha{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:A}=this.auth;this.fullUserKey=Hi(this.userKey,s.apiKey,A),this.fullPersistenceKey=Hi("persistence",s.apiKey,A),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ha(Cr(Ma),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||Cr(Ma);const i=Hi(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(i);if(d){const h=Rs._fromJSON(e,d);c!==A&&(o=h),A=c;break}}catch{}const a=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!a.length?new ha(A,e,r):(A=a[0],o&&await A._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new ha(A,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_U(e))return"Blackberry";if(EU(e))return"Webos";if(xU(e))return"Safari";if((e.includes("chrome/")||CU(e))&&!e.includes("edge/"))return"Chrome";if(Ru(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BU(t=Kt()){return/firefox\//i.test(t)}function xU(t=Kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CU(t=Kt()){return/crios\//i.test(t)}function IU(t=Kt()){return/iemobile/i.test(t)}function Ru(t=Kt()){return/android/i.test(t)}function _U(t=Kt()){return/blackberry/i.test(t)}function EU(t=Kt()){return/webos/i.test(t)}function Nu(t=Kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WM(t=Kt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function qM(t=Kt()){var e;return Nu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JM(){return bT()&&document.documentMode===10}function bU(t=Kt()){return Nu(t)||Ru(t)||EU(t)||_U(t)||/windows phone/i.test(t)||IU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t,e=[]){let n;switch(t){case"Browser":n=SI(Kt());break;case"Worker":n=`${SI(Kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=A=>new Promise((i,o)=>{try{const a=e(A);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t,e={}){return Xt(t,"GET","/v2/passwordPolicy",Jt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=6;class eV{constructor(e){var n,r,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:ZM,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,A,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(s=a.containsLowercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(A=a.containsUppercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QI(this),this.idTokenSubscription=new QI(this),this.beforeStateQueue=new XM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wU(this,{idToken:e}),r=await Rs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($t(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(s=a.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ou(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(Cn(this));const n=e?Me(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(Cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YM(this),n=new eV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new go("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $M(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const A=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(o,this,"internal-error"),o.then(()=>{i||A(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qt(t){return Me(t)}class QI{constructor(e){this.auth=e,this.observer=null,this.addObserver=FT(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nV(t){Pu=t}function by(t){return Pu.loadJS(t)}function rV(){return Pu.recaptchaV2Script}function sV(){return Pu.recaptchaEnterpriseScript}function AV(){return Pu.gapiScript}function FU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const iV="recaptcha-enterprise",oV="NO_RECAPTCHA";class aV{constructor(e){this.type=iV,this.auth=qt(e)}async verify(e="verify",n=!1){async function r(A){if(!n){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,o)=>{LM(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new PM(a);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(a=>{o(a)})})}function s(A,i,o){const a=window.grecaptcha;TI(a)?a.enterprise.ready(()=>{a.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(oV)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{r(this.auth).then(o=>{if(!n&&TI(window.grecaptcha))s(o,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=sV();a.length!==0&&(a+=o),by(a).then(()=>{s(o,A,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function kI(t,e,n,r=!1){const s=new aV(t);let A;try{A=await s.verify(n)}catch{A=await s.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function au(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await kI(t,e,n,n==="getOobCode");return r(t,A)}else return r(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await kI(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(A)})}function lV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cV(t,e,n){const r=qt(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),A=UU(e),{host:i,port:o}=uV(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${A}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||dV()}function UU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uV(t){const e=UU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const A=s[1];return{host:A,port:RI(r.substr(A.length+1))}}else{const[A,i]=r.split(":");return{host:A,port:RI(i)}}}function RI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,n){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(t,e){return Xt(t,"POST","/v1/accounts:resetPassword",Jt(t,e))}async function hV(t,e){return Xt(t,"POST","/v1/accounts:update",e)}async function fV(t,e){return Xt(t,"POST","/v1/accounts:signUp",e)}async function gV(t,e){return Xt(t,"POST","/v1/accounts:update",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(t,e){return nA(t,"POST","/v1/accounts:signInWithPassword",Jt(t,e))}async function yg(t,e){return Xt(t,"POST","/v1/accounts:sendOobCode",Jt(t,e))}async function mV(t,e){return yg(t,e)}async function wV(t,e){return yg(t,e)}async function vV(t,e){return yg(t,e)}async function yV(t,e){return yg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(t,e){return nA(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}async function xV(t,e){return nA(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends rl{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new lu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new lu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return au(e,n,"signInWithPassword",pV);case"emailLink":return BV(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return au(e,r,"signUpPassword",fV);case"emailLink":return xV(e,{idToken:n,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(t,e){return nA(t,"POST","/v1/accounts:signInWithIdp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="http://localhost";class xs extends rl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,A=xy(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new xs(r,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Ls(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ls(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ls(e,n)}buildRequest(){const e={requestUri:CV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$a(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(t,e){return Xt(t,"POST","/v1/accounts:sendVerificationCode",Jt(t,e))}async function _V(t,e){return nA(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e))}async function EV(t,e){const n=await nA(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e));if(n.temporaryProof)throw Gl(t,"account-exists-with-different-credential",n);return n}const bV={USER_NOT_FOUND:"user-not-found"};async function TV(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return nA(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,n),bV)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends rl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ki({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ki({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return _V(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return EV(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return TV(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A}=e;return!r&&!n&&!s&&!A?null:new Ki({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:A})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UV(t){const e=na(Ml(t)).link,n=e?na(Ml(e)).deep_link_id:null,r=na(Ml(t)).deep_link_id;return(r?na(Ml(r)).link:null)||r||n||e||t}class Bg{constructor(e){var n,r,s,A,i,o;const a=na(Ml(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=FV((s=a.mode)!==null&&s!==void 0?s:null);ee(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=a.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=UV(e);try{return new Bg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.providerId=fi.PROVIDER_ID}static credential(e,n){return lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Bg.parseLink(n);return ee(r,"argument-error"),lu._fromEmailAndCode(e,r.code,r.tenantId)}}fi.PROVIDER_ID="password";fi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends rA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fa extends sl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ee("providerId"in n&&"signInMethod"in n,"argument-error"),xs._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ee(e.idToken||e.accessToken,"argument-error"),xs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return fa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:A,nonce:i,providerId:o}=e;if(!r&&!s&&!n&&!A||!o)return null;try{return new fa(o)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:A})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends sl{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xs._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return os.credential(n,r)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends sl{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="http://localhost";class Va extends rl{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ls(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ls(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ls(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:A}=n;return!r||!s||!A||r!==s?null:new Va(r,A)}static _create(e,n){return new Va(e,n)}buildRequest(){return{requestUri:SV,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="saml.";class ff extends rA{constructor(e){ee(e.startsWith(QV),"argument-error"),super(e)}static credentialFromResult(e){return ff.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ff.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Va.fromJSON(e);return ee(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Va._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends sl{constructor(){super("twitter.com")}static credential(e,n){return xs._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(t,e){return nA(t,"POST","/v1/accounts:signUp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const A=await Rs._fromIdTokenResponse(e,r,s),i=NI(r);return new Vr({user:A,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=NI(r);return new Vr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function NI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t){var e;if($t(t.app))return Promise.reject(Cn(t));const n=qt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Vr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await QU(n,{returnSecureToken:!0}),s=await Vr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends Yn{constructor(e,n,r,s){var A;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new gf(e,n,r,s)}}function kU(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(t,A,e,r):A})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e){const n=Me(t);await xg(!0,n,e);const{providerUserInfo:r}=await MM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=RU(r||[]);return n.providerData=n.providerData.filter(A=>s.has(A.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ty(t,e,n=!1){const r=await Ws(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vr._forOperation(t,"link",r)}async function xg(t,e,n){await ou(e);const r=RU(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";ee(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(Cn(r));const s="reauthenticate";try{const A=await Ws(t,kU(r,s,e,t),n);ee(A.idToken,r,"internal-error");const i=vg(A.idToken);ee(i,r,"internal-error");const{sub:o}=i;return ee(t.uid===o,r,"user-mismatch"),Vr._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&kn(r,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(t,e,n=!1){if($t(t.app))return Promise.reject(Cn(t));const r="signIn",s=await kU(t,r,e),A=await Vr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(A.user),A}async function Cg(t,e){return PU(qt(t),e)}async function DU(t,e){const n=Me(t);return await xg(!1,n,e.providerId),Ty(n,e)}async function LU(t,e){return NU(Me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){return nA(t,"POST","/v1/accounts:signInWithCustomToken",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t,e){if($t(t.app))return Promise.reject(Cn(t));const n=qt(t),r=await NV(n,{token:e,returnSecureToken:!0}),s=await Vr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Fy._fromServerResponse(e,n):"totpInfo"in n?Uy._fromServerResponse(e,n):kn(e,"internal-error")}}class Fy extends Du{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Fy(n)}}class Uy extends Du{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Uy(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t,e,n){var r;ee(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),ee(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ee(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ee(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(t){const e=qt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DV(t,e,n){const r=qt(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Ig(r,s,n),await au(r,s,"getOobCode",wV)}async function LV(t,e,n){await SU(Me(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Sy(t),r})}async function OV(t,e){await gV(Me(t),{oobCode:e})}async function OU(t,e){const n=Me(t),r=await SU(n,{oobCode:e}),s=r.requestType;switch(ee(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(r.mfaInfo,n,"internal-error");default:ee(r.email,n,"internal-error")}let A=null;return r.mfaInfo&&(A=Du._fromServerResponse(qt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:A},operation:s}}async function MV(t,e){const{data:n}=await OU(Me(t),e);return n.email}async function VV(t,e,n){if($t(t.app))return Promise.reject(Cn(t));const r=qt(t),i=await au(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QU).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Sy(t),a}),o=await Vr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function jV(t,e,n){return $t(t.app)?Promise.reject(Cn(t)):Cg(Me(t),fi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Sy(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HV(t,e,n){const r=qt(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function A(i,o){ee(o.handleCodeInApp,r,"argument-error"),o&&Ig(r,i,o)}A(s,n),await au(r,s,"getOobCode",vV)}function KV(t,e){const n=Bg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GV(t,e,n){if($t(t.app))return Promise.reject(Cn(t));const r=Me(t),s=fi.credentialWithLink(e,n||iu());return ee(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Cg(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){return Xt(t,"POST","/v1/accounts:createAuthUri",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $V(t,e){const n=_y()?iu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await zV(Me(t),r);return s||[]}async function WV(t,e){const n=Me(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Ig(n.auth,s,e);const{email:A}=await mV(n.auth,s);A!==t.email&&await t.reload()}async function qV(t,e,n){const r=Me(t),A={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Ig(r.auth,A,n);const{email:i}=await yV(r.auth,A);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(t,e){return Xt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Me(t),A={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await Ws(r,JV(r.auth,A));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:a})=>a==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function YV(t,e){const n=Me(t);return $t(n.auth.app)?Promise.reject(Cn(n.auth)):MU(n,e,null)}function ZV(t,e){return MU(Me(t),null,e)}async function MU(t,e,n){const{auth:r}=t,A={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(A.email=e),n&&(A.password=n);const i=await Ws(t,hV(r,A));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},A=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const i=(n=(e=vg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const o=i!=="anonymous"&&i!=="custom"?i:null;return new ga(A,o)}}if(!r)return null;switch(r){case"facebook.com":return new tj(A,s);case"github.com":return new nj(A,s);case"google.com":return new rj(A,s);case"twitter.com":return new sj(A,s,t.screenName||null);case"custom":case"anonymous":return new ga(A,null);default:return new ga(A,r,s)}}class ga{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class VU extends ga{constructor(e,n,r,s){super(e,n,r),this.username=s}}class tj extends ga{constructor(e,n){super(e,"facebook.com",n)}}class nj extends VU{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class rj extends ga{constructor(e,n){super(e,"google.com",n)}}class sj extends VU{constructor(e,n,r){super(e,"twitter.com",n,r)}}function Aj(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ej(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Li("enroll",e,n)}static _fromMfaPendingCredential(e){return new Li("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Li._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Li._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=qt(e),s=n.customData._serverResponse,A=(s.mfaInfo||[]).map(o=>Du._fromServerResponse(r,o));ee(s.mfaPendingCredential,r,"internal-error");const i=Li._fromMfaPendingCredential(s.mfaPendingCredential);return new Qy(i,A,async o=>{const a=await o._process(r,i);delete s.mfaInfo,delete s.mfaPendingCredential;const c=Object.assign(Object.assign({},s),{idToken:a.idToken,refreshToken:a.refreshToken});switch(n.operationType){case"signIn":const d=await Vr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return ee(n.user,r,"internal-error"),Vr._forOperation(n.user,n.operationType,c);default:kn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function ij(t,e){var n;const r=Me(t),s=e;return ee(e.customData.operationType,r,"argument-error"),ee((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Qy._fromError(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:start",Jt(t,e))}function aj(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(t,e))}function lj(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(t,e))}class ky{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Du._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new ky(e)}async getSession(){return Li._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,s=await this.getSession(),A=await Ws(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(A),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await Ws(this.user,lj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:A})=>A!==n),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Dp=new WeakMap;function cj(t){const e=Me(t);return Dp.has(e)||Dp.set(e,ky._fromUser(e)),Dp.get(e)}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=1e3,dj=10;class HU extends jU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},A=this.storage.getItem(r);JM()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}HU.type="LOCAL";const Ry=HU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU extends jU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KU.type="SESSION";const oo=KU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _g(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:A}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const o=Array.from(i).map(async c=>c(n.origin,A)),a=await hj(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_g.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((o,a)=>{const c=Lu("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),o(f.data.response);break;default:clearTimeout(d),clearTimeout(A),a(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return window}function gj(t){on().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(){return typeof on().WorkerGlobalScope<"u"&&typeof on().importScripts=="function"}async function pj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wj(){return Ny()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="firebaseLocalStorageDb",vj=1,mf="firebaseLocalStorage",zU="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eg(t,e){return t.transaction([mf],e?"readwrite":"readonly").objectStore(mf)}function yj(){const t=indexedDB.deleteDatabase(GU);return new Ou(t).toPromise()}function M0(){const t=indexedDB.open(GU,vj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mf,{keyPath:zU})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mf)?e(r):(r.close(),await yj(),e(await M0()))})})}async function PI(t,e,n){const r=Eg(t,!0).put({[zU]:e,value:n});return new Ou(r).toPromise()}async function Bj(t,e){const n=Eg(t,!1).get(e),r=await new Ou(n).toPromise();return r===void 0?null:r.value}function DI(t,e){const n=Eg(t,!0).delete(e);return new Ou(n).toPromise()}const xj=800,Cj=3;class $U{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await M0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Cj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ny()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_g._getInstance(wj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pj(),!this.activeServiceWorker)return;this.sender=new fj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await M0();return await PI(e,pf,"1"),await DI(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>PI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Bj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=Eg(s,!1).getAll();return new Ou(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$U.type="LOCAL";const cu=$U;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t,e){return Xt(t,"POST","/v2/accounts/mfaSignIn:start",Jt(t,e))}function _j(t,e){return Xt(t,"POST","/v2/accounts/mfaSignIn:finalize",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=500,bj=6e4,Id=1e12;class Tj{constructor(e){this.auth=e,this.counter=Id,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Fj(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Id;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Id;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Id;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class Fj{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ee(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Uj(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},bj)},Ej))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Uj(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=FU("rcb"),Sj=new ku(3e4,6e4);class Qj{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=on().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ee(kj(n),e,"argument-error"),this.shouldResolveImmediately(n)&&bI(on().grecaptcha)?Promise.resolve(on().grecaptcha):new Promise((r,s)=>{const A=on().setTimeout(()=>{s(gn(e,"network-request-failed"))},Sj.get());on()[Lp]=()=>{on().clearTimeout(A),delete on()[Lp];const o=on().grecaptcha;if(!o||!bI(o)){s(gn(e,"internal-error"));return}const a=o.render;o.render=(c,d)=>{const h=a(c,d);return this.counter++,h},this.hostLanguage=n,r(o)};const i=`${rV()}?${$a({onload:Lp,render:"explicit",hl:n})}`;by(i).catch(()=>{clearTimeout(A),s(gn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=on().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function kj(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Rj{async load(e){return new Tj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="recaptcha",Nj={theme:"light",type:"image"};let Pj=class{constructor(e,n,r=Object.assign({},Nj)){this.parameters=r,this.type=WU,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qt(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ee(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rj:new Qj,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const A=i=>{i&&(this.tokenChangeListeners.delete(A),s(i))};this.tokenChangeListeners.add(A),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=on()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ee(_y()&&!Ny(),this.auth,"internal-error"),await Dj(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await DM(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Dj(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ki._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Lj(t,e,n){if($t(t.app))return Promise.reject(Cn(t));const r=qt(t),s=await bg(r,e,Me(n));return new Py(s,A=>Cg(r,A))}async function Oj(t,e,n){const r=Me(t);await xg(!1,r,"phone");const s=await bg(r.auth,e,Me(n));return new Py(s,A=>DU(r,A))}async function Mj(t,e,n){const r=Me(t);if($t(r.auth.app))return Promise.reject(Cn(r.auth));const s=await bg(r.auth,e,Me(n));return new Py(s,A=>LU(r,A))}async function bg(t,e,n){var r;const s=await n.verify();try{ee(typeof s=="string",t,"argument-error"),ee(n.type===WU,t,"argument-error");let A;if(typeof e=="string"?A={phoneNumber:e}:A=e,"session"in A){const i=A.session;if("phoneNumber"in A)return ee(i.type==="enroll",t,"internal-error"),(await oj(t,{idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{ee(i.type==="signin",t,"internal-error");const o=((r=A.multiFactorHint)===null||r===void 0?void 0:r.uid)||A.multiFactorUid;return ee(o,t,"missing-multi-factor-info"),(await Ij(t,{mfaPendingCredential:i.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:i}=await IV(t,{phoneNumber:A.phoneNumber,recaptchaToken:s});return i}}finally{n._reset()}}async function Vj(t,e){const n=Me(t);if($t(n.auth.app))return Promise.reject(Cn(n.auth));await Ty(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao=class ph{constructor(e){this.providerId=ph.PROVIDER_ID,this.auth=qt(e)}verifyPhoneNumber(e,n){return bg(this.auth,e,Me(n))}static credential(e,n){return Ki._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ph.credentialFromTaggedObject(n)}static credentialFromError(e){return ph.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ki._fromTokenResponse(n,r):null}};ao.PROVIDER_ID="phone";ao.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t,e){return e?Cr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends rl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ls(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ls(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ls(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jj(t){return PU(t.auth,new Dy(t),t.bypassAuthState)}function Hj(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),NU(n,new Dy(t),t.bypassAuthState)}async function Kj(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),Ty(n,new Dy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,n,r,s,A=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:A,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jj;case"linkViaPopup":case"linkViaRedirect":return Kj;case"reauthViaPopup":case"reauthViaRedirect":return Hj;default:kn(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=new ku(2e3,1e4);async function zj(t,e,n){if($t(t.app))return Promise.reject(gn(t,"operation-not-supported-in-this-environment"));const r=qt(t);nl(t,e,rA);const s=Bo(r,n);return new Ns(r,"signInViaPopup",e,s).executeNotNull()}async function $j(t,e,n){const r=Me(t);if($t(r.auth.app))return Promise.reject(gn(r.auth,"operation-not-supported-in-this-environment"));nl(r.auth,e,rA);const s=Bo(r.auth,n);return new Ns(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function Wj(t,e,n){const r=Me(t);nl(r.auth,e,rA);const s=Bo(r.auth,n);return new Ns(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Ns extends qU{constructor(e,n,r,s,A){super(e,n,s,A),this.provider=r,this.authWindow=null,this.pollId=null,Ns.currentPopupAction&&Ns.currentPopupAction.cancel(),Ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Zr(this.filter.length===1,"Popup operations only handle one event");const e=Lu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gj.get())};e()}}Ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="pendingRedirect",pc=new Map;class Jj extends qU{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await Xj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xj(t,e){const n=XU(e),r=JU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Ly(t,e){return JU(t)._set(XU(e),"true")}function Yj(){pc.clear()}function Oy(t,e){pc.set(t._key(),e)}function JU(t){return Cr(t._redirectPersistence)}function XU(t){return Hi(qj,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t,e,n){return eH(t,e,n)}async function eH(t,e,n){if($t(t.app))return Promise.reject(Cn(t));const r=qt(t);nl(t,e,rA),await r._initializationPromise;const s=Bo(r,n);return await Ly(s,r),s._openRedirect(r,e,"signInViaRedirect")}function tH(t,e,n){return nH(t,e,n)}async function nH(t,e,n){const r=Me(t);if(nl(r.auth,e,rA),$t(r.auth.app))return Promise.reject(Cn(r.auth));await r.auth._initializationPromise;const s=Bo(r.auth,n);await Ly(s,r.auth);const A=await YU(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",A)}function rH(t,e,n){return sH(t,e,n)}async function sH(t,e,n){const r=Me(t);nl(r.auth,e,rA),await r.auth._initializationPromise;const s=Bo(r.auth,n);await xg(!1,r,e.providerId),await Ly(s,r.auth);const A=await YU(r);return s._openRedirect(r.auth,e,"linkViaRedirect",A)}async function AH(t,e){return await qt(t)._initializationPromise,Tg(t,e,!1)}async function Tg(t,e,n=!1){if($t(t.app))return Promise.reject(Cn(t));const r=qt(t),s=Bo(r,e),i=await new Jj(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function YU(t){const e=Lu(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=10*60*1e3;class ZU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!eS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iH&&this.cachedEventUids.clear(),this.cachedEventUids.has(LI(e))}saveEventToCache(e){this.cachedEventUids.add(LI(e)),this.lastProcessedEventTime=Date.now()}}function LI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function oH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e={}){return Xt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lH=/^https?/;async function cH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tS(t);for(const n of e)try{if(uH(n))return}catch{}kn(t,"unauthorized-domain")}function uH(t){const e=iu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!lH.test(n))return!1;if(aH.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH=new ku(3e4,6e4);function OI(){const t=on().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hH(t){return new Promise((e,n)=>{var r,s,A;function i(){OI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OI(),n(gn(t,"network-request-failed"))},timeout:dH.get()})}if(!((s=(r=on().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=on().gapi)===null||A===void 0)&&A.load)i();else{const o=FU("iframefcb");return on()[o]=()=>{gapi.load?i():n(gn(t,"network-request-failed"))},by(`${AV()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw mh=null,e})}let mh=null;function fH(t){return mh=mh||hH(t),mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH=new ku(5e3,15e3),pH="__/auth/iframe",mH="emulator/auth/iframe",wH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yH(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ey(e,mH):`https://${t.config.authDomain}/${pH}`,r={apiKey:e.apiKey,appName:t.name,v:li},s=vH.get(t.config.apiHost);s&&(r.eid=s);const A=t._getFrameworks();return A.length&&(r.fw=A.join(",")),`${n}?${$a(r).slice(1)}`}async function BH(t){const e=await fH(t),n=on().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:yH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wH,dontclear:!0},r=>new Promise(async(s,A)=>{await r.restyle({setHideOnLeave:!1});const i=gn(t,"network-request-failed"),o=on().setTimeout(()=>{A(i)},gH.get());function a(){on().clearTimeout(o),s(r)}r.ping(a).then(a,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CH=500,IH=600,_H="_blank",EH="http://localhost";class MI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bH(t,e,n,r=CH,s=IH){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},xH),{width:r.toString(),height:s.toString(),top:A,left:i}),c=Kt().toLowerCase();n&&(o=CU(c)?_H:n),BU(c)&&(e=e||EH,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[m,w])=>`${f}${m}=${w},`,"");if(qM(c)&&o!=="_self")return TH(e||"",o),new MI(null);const h=window.open(e||"",o,d);ee(h,t,"popup-blocked");try{h.focus()}catch{}return new MI(h)}function TH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH="__/auth/handler",UH="emulator/auth/handler",SH=encodeURIComponent("fac");async function V0(t,e,n,r,s,A){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:li,eventId:s};if(e instanceof rA){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",$N(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(A||{}))i[d]=h}if(e instanceof sl){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),c=a?`#${SH}=${encodeURIComponent(a)}`:"";return`${QH(t)}?${$a(o).slice(1)}${c}`}function QH({config:t}){return t.emulator?Ey(t,UH):`https://${t.authDomain}/${FH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="webStorageSupport";class kH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oo,this._completeRedirectFn=Tg,this._overrideRedirectResult=Oy}async _openPopup(e,n,r,s){var A;Zr((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await V0(e,n,r,iu(),s);return bH(e,i,Lu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const A=await V0(e,n,r,iu(),s);return gj(A),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:A}=this.eventManagers[n];return s?Promise.resolve(s):(Zr(A,"If manager is not set, promise should be"),A)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BH(e),r=new ZU(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Op,{type:Op},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[Op];i!==void 0&&n(!!i),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bU()||xU()||Nu()}}const RH=kH;class NH{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return hs("unexpected MultiFactorSessionType")}}}class My extends NH{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new My(e)}_finalizeEnroll(e,n,r){return aj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return _j(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nS{constructor(){}static assertion(e){return My._fromCredential(e)}}nS.FACTOR_ID="phone";var VI="@firebase/auth",jI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LH(t){qA(new ws("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;ee(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TU(t)},c=new tV(r,s,A,a);return lV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qA(new ws("auth-internal",e=>{const n=qt(e.getProvider("auth").getImmediate());return(r=>new PH(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(VI,jI,DH(t)),Xr(VI,jI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OH=5*60;DN("authIdTokenMaxAge");function MH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}nV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const A=gn("internal-error");A.customData=s,n(A)},r.type="text/javascript",r.charset="UTF-8",MH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LH("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH=2e3;async function jH(t,e,n){var r;const{BuildInfo:s}=lo();Zr(e.sessionId,"AuthEvent did not contain a session ID");const A=await $H(e.sessionId),i={};return Nu()?i.ibi=s.packageName:Ru()?i.apn=s.packageName:kn(t,"operation-not-supported-in-this-environment"),s.displayName&&(i.appDisplayName=s.displayName),i.sessionId=A,V0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,i)}async function HH(t){const{BuildInfo:e}=lo(),n={};Nu()?n.iosBundleId=e.packageName:Ru()?n.androidPackageName=e.packageName:kn(t,"operation-not-supported-in-this-environment"),await tS(t,n)}function KH(t){const{cordova:e}=lo();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,WM()?"_blank":"_system","location=yes"),n(s)})})}async function GH(t,e,n){const{cordova:r}=lo();let s=()=>{};try{await new Promise((A,i)=>{let o=null;function a(){var h;A();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{i(gn(t,"redirect-cancelled-by-user"))},VH))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(a),document.addEventListener("resume",c,!1),Ru()&&document.addEventListener("visibilitychange",d,!1),s=()=>{e.removePassiveListener(a),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),o&&window.clearTimeout(o)}})}finally{s()}}function zH(t){var e,n,r,s,A,i,o,a,c,d;const h=lo();ee(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee(typeof((A=(s=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||A===void 0?void 0:A.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof((a=(o=(i=h==null?void 0:h.cordova)===null||i===void 0?void 0:i.plugins)===null||o===void 0?void 0:o.browsertab)===null||a===void 0?void 0:a.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function $H(t){const e=WH(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function WH(t){if(Zr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qH=20;class JH extends ZU{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function XH(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:eK(),postBody:null,tenantId:t.tenantId,error:gn(t,"no-auth-event")}}function YH(t,e){return j0()._set(H0(t),e)}async function HI(t){const e=await j0()._get(H0(t));return e&&await j0()._remove(H0(t)),e}function ZH(t,e){var n,r;const s=nK(e);if(s.includes("/__/auth/callback")){const A=wh(s),i=A.firebaseError?tK(decodeURIComponent(A.firebaseError)):null,o=(r=(n=i==null?void 0:i.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],a=o?gn(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function eK(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<qH;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function j0(){return Cr(Ry)}function H0(t){return Hi("authEvent",t.config.apiKey,t.name)}function tK(t){try{return JSON.parse(t)}catch{return null}}function nK(t){const e=wh(t),n=e.link?decodeURIComponent(e.link):void 0,r=wh(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return wh(s).link||s||r||n||t}function wh(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return na(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK=500;class sK{constructor(){this._redirectPersistence=oo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Tg,this._overrideRedirectResult=Oy}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new JH(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){kn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,s){zH(e);const A=await this._initialize(e);await A.initialized(),A.resetRedirect(),Yj(),await this._originValidation(e);const i=XH(e,r,s);await YH(e,i);const o=await jH(e,i,n),a=await KH(o);return GH(e,A,a)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HH(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:s,BuildInfo:A}=lo(),i=setTimeout(async()=>{await HI(e),n.onEvent(KI())},rK),o=async d=>{clearTimeout(i);const h=await HI(e);let f=null;h&&(d!=null&&d.url)&&(f=ZH(h,d.url)),n.onEvent(f||KI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const a=s,c=`${A.packageName.toLowerCase()}://`;lo().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&o({url:d}),typeof a=="function")try{a(d)}catch(h){console.error(h)}}}}const AK=sK;function KI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(t,e){qt(t)._logFramework(e)}var oK="@firebase/auth-compat",aK="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK=1e3;function mc(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function cK(){return mc()==="http:"||mc()==="https:"}function rS(t=Kt()){return!!((mc()==="file:"||mc()==="ionic:"||mc()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function uK(){return fv()||hv()}function dK(){return bT()&&(document==null?void 0:document.documentMode)===11}function hK(t=Kt()){return/Edge\/\d+/.test(t)}function fK(t=Kt()){return dK()||hK(t)}function sS(){try{const t=self.localStorage,e=Lu();if(t)return t.setItem(e,"1"),t.removeItem(e),fK()?jc():!0}catch{return Vy()&&jc()}return!1}function Vy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Mp(){return(cK()||ET()||rS())&&!uK()&&sS()&&!Vy()}function AS(){return rS()&&typeof document<"u"}async function gK(){return AS()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},lK);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function pK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={LOCAL:"local",NONE:"none",SESSION:"session"},Ul=ee,iS="persistence";function mK(t,e){if(Ul(Object.values(yr).includes(e),t,"invalid-persistence-type"),fv()){Ul(e!==yr.SESSION,t,"unsupported-persistence-type");return}if(hv()){Ul(e===yr.NONE,t,"unsupported-persistence-type");return}if(Vy()){Ul(e===yr.NONE||e===yr.LOCAL&&jc(),t,"unsupported-persistence-type");return}Ul(e===yr.NONE||sS(),t,"unsupported-persistence-type")}async function K0(t){await t._initializationPromise;const e=oS(),n=Hi(iS,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function wK(t,e){const n=oS();if(!n)return[];const r=Hi(iS,t,e);switch(n.getItem(r)){case yr.NONE:return[Ma];case yr.LOCAL:return[cu,oo];case yr.SESSION:return[oo];default:return[]}}function oS(){var t;try{return((t=pK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK=ee;class bA{constructor(){this.browserResolver=Cr(RH),this.cordovaResolver=Cr(AK),this.underlyingResolver=null,this._redirectPersistence=oo,this._completeRedirectFn=Tg,this._overrideRedirectResult=Oy}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,s)}async _openRedirect(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return AS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await gK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){return t.unwrap()}function yK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BK(t){return lS(t)}function xK(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new CK(t,ij(t,e))}else if(r){const s=lS(e),A=e;s&&(A.credential=s,A.tenantId=r.tenantId||void 0,A.email=r.email||void 0,A.phoneNumber=r.phoneNumber||void 0)}}function lS(t){const{_tokenResponse:e}=t instanceof Yn?t.customData:t;if(!e)return null;if(!(t instanceof Yn)&&"temporaryProof"in e&&"phoneNumber"in e)return ao.credentialFromResult(t);const n=e.providerId;if(!n||n===Fl.PASSWORD)return null;let r;switch(n){case Fl.GOOGLE:r=os;break;case Fl.FACEBOOK:r=is;break;case Fl.GITHUB:r=as;break;case Fl.TWITTER:r=ls;break;default:const{oauthIdToken:s,oauthAccessToken:A,oauthTokenSecret:i,pendingToken:o,nonce:a}=e;return!A&&!i&&!s&&!o?null:o?n.startsWith("saml.")?Va._create(n,o):xs._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:s,accessToken:A}):new fa(n).credential({idToken:s,accessToken:A,rawNonce:a})}return t instanceof Yn?r.credentialFromError(t):r.credentialFromResult(t)}function Ar(t,e){return e.catch(n=>{throw n instanceof Yn&&xK(t,n),n}).then(n=>{const r=n.operationType,s=n.user;return{operationType:r,credential:BK(n),additionalUserInfo:Aj(n),user:Ps.getOrCreate(s)}})}async function G0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Ar(t,n.confirm(r))}}class CK{constructor(e,n){this.resolver=n,this.auth=yK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ar(aS(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._delegate=e,this.multiFactor=cj(e)}static getOrCreate(e){return Ps.USER_MAP.has(e)||Ps.USER_MAP.set(e,new Ps(e)),Ps.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ar(this.auth,DU(this._delegate,e))}async linkWithPhoneNumber(e,n){return G0(this.auth,Oj(this._delegate,e,n))}async linkWithPopup(e){return Ar(this.auth,Wj(this._delegate,e,bA))}async linkWithRedirect(e){return await K0(qt(this.auth)),rH(this._delegate,e,bA)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ar(this.auth,LU(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return G0(this.auth,Mj(this._delegate,e,n))}reauthenticateWithPopup(e){return Ar(this.auth,$j(this._delegate,e,bA))}async reauthenticateWithRedirect(e){return await K0(qt(this.auth)),tH(this._delegate,e,bA)}sendEmailVerification(e){return WV(this._delegate,e)}async unlink(e){return await RV(this._delegate,e),this}updateEmail(e){return YV(this._delegate,e)}updatePassword(e){return ZV(this._delegate,e)}updatePhoneNumber(e){return Vj(this._delegate,e)}updateProfile(e){return XV(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return qV(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ps.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=ee;class z0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Sl(r,"invalid-api-key",{appName:e.name}),Sl(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?bA:void 0;this._delegate=n.initialize({options:{persistence:IK(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(bM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){cV(this._delegate,e,n)}applyActionCode(e){return OV(this._delegate,e)}checkActionCode(e){return OU(this._delegate,e)}confirmPasswordReset(e,n){return LV(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Ar(this._delegate,VV(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return $V(this._delegate,e)}isSignInWithEmailLink(e){return KV(this._delegate,e)}async getRedirectResult(){Sl(Mp(),this._delegate,"operation-not-supported-in-this-environment");const e=await AH(this._delegate,bA);return e?Ar(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){iK(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:s,error:A,complete:i}=GI(e,n,r);return this._delegate.onAuthStateChanged(s,A,i)}onIdTokenChanged(e,n,r){const{next:s,error:A,complete:i}=GI(e,n,r);return this._delegate.onIdTokenChanged(s,A,i)}sendSignInLinkToEmail(e,n){return HV(this._delegate,e,n)}sendPasswordResetEmail(e,n){return DV(this._delegate,e,n||void 0)}async setPersistence(e){mK(this._delegate,e);let n;switch(e){case yr.SESSION:n=oo;break;case yr.LOCAL:n=await Cr(cu)._isAvailable()?cu:Ry;break;case yr.NONE:n=Ma;break;default:return kn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ar(this._delegate,kV(this._delegate))}signInWithCredential(e){return Ar(this._delegate,Cg(this._delegate,e))}signInWithCustomToken(e){return Ar(this._delegate,PV(this._delegate,e))}signInWithEmailAndPassword(e,n){return Ar(this._delegate,jV(this._delegate,e,n))}signInWithEmailLink(e,n){return Ar(this._delegate,GV(this._delegate,e,n))}signInWithPhoneNumber(e,n){return G0(this._delegate,Lj(this._delegate,e,n))}async signInWithPopup(e){return Sl(Mp(),this._delegate,"operation-not-supported-in-this-environment"),Ar(this._delegate,zj(this._delegate,e,bA))}async signInWithRedirect(e){return Sl(Mp(),this._delegate,"operation-not-supported-in-this-environment"),await K0(this._delegate),Zj(this._delegate,e,bA)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return MV(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}z0.Persistence=yr;function GI(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const s=r;return{next:i=>s(i&&Ps.getOrCreate(i)),error:e,complete:n}}function IK(t,e){const n=wK(t,e);if(typeof self<"u"&&!n.includes(cu)&&n.push(cu),typeof window<"u")for(const r of[Ry,oo])n.includes(r)||n.push(r);return n.includes(Ma)||n.push(Ma),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.providerId="phone",this._delegate=new ao(aS(As.auth()))}static credential(e,n){return ao.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}jy.PHONE_SIGN_IN_METHOD=ao.PHONE_SIGN_IN_METHOD;jy.PROVIDER_ID=ao.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K=ee;class EK{constructor(e,n,r=As.app()){var s;_K((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Pj(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK="auth-compat";function TK(t){t.INTERNAL.registerComponent(new ws(bK,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new z0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Uo.EMAIL_SIGNIN,PASSWORD_RESET:Uo.PASSWORD_RESET,RECOVER_EMAIL:Uo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Uo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Uo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Uo.VERIFY_EMAIL}},EmailAuthProvider:fi,FacebookAuthProvider:is,GithubAuthProvider:as,GoogleAuthProvider:os,OAuthProvider:fa,SAMLAuthProvider:ff,PhoneAuthProvider:jy,PhoneMultiFactorGenerator:nS,RecaptchaVerifier:EK,TwitterAuthProvider:ls,Auth:z0,AuthCredential:rl,Error:Yn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(oK,aK)}TK(As);const FK="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",UK="zameny-b6c3f.firebaseapp.com",SK="zameny-b6c3f",QK="zameny-b6c3f.firebasestorage.app",kK="323355347910",RK="1:323355347910:web:c81f2813dce5ee9373c0c7",zI={apiKey:FK,authDomain:UK,projectId:SK,storageBucket:QK,messagingSenderId:kK,appId:RK};let $I,mr,un;if(!zI.apiKey)console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");else try{As.apps.length?$I=As.app():$I=As.initializeApp(zI),mr=As.firestore(),un=As.auth(),console.log("Firebase initialized successfully")}catch(t){console.error("Firebase initialization failed:",t)}const Vp="schoolData",jp="main",Hp="publicSchedules",TA={open:async()=>(console.log("Firestore connected"),{}),save:async t=>{if(!mr){console.error("Database not initialized (missing API key)");return}const e=un==null?void 0:un.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :        ( admin@gymnasium22.com).");return}try{const n=JSON.parse(JSON.stringify(t));await mr.collection(Vp).doc(jp).set(n)}catch(n){throw console.error("   Firebase:",n),n.code==="permission-denied"&&alert(" :       ."),n}},load:async()=>{if(!mr)return console.warn("Database not initialized. Returning initial data."),an;try{const t=await mr.collection(Vp).doc(jp).get();if(t.exists){const e=t.data(),n={...an,...e};return e.settings&&(n.settings={...an.settings,...e.settings}),n}else return an}catch(t){return console.error("   Firebase:",t),t.code==="permission-denied"&&console.error("   .   (allow read: if true)."),an}},subscribe:(t,e)=>mr?mr.collection(Vp).doc(jp).onSnapshot(n=>{if(n.exists){const r=n.data(),s={...an,...r};r.settings&&(s.settings={...an.settings,...r.settings}),t(s)}else t(an)},n=>{console.error("Firestore subscription error:",n),n.code==="permission-denied"&&console.error("    (subscribe)."),e(n)}):(console.warn("Database not initialized. Cannot subscribe."),()=>{}),exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{if(!mr)throw new Error("Database not initialized");const n=un==null?void 0:un.currentUser;if(!n||n.email!=="admin@gymnasium22.com")throw new Error("    .");try{const r={subjects:e.subjects,teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",birthDate:void 0,absenceReasons:void 0})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},s=JSON.parse(JSON.stringify(r));await mr.collection(Hp).doc(t).set(s)}catch(r){throw console.error("  :",r),r}},getPublicData:async t=>{if(!mr)return null;try{const e=await mr.collection(Hp).doc(t).get();return e.exists?e.data():null}catch(e){return console.error("   :",e),null}},deletePublicData:async t=>{if(!mr)throw new Error("Database not initialized");const e=un==null?void 0:un.currentUser;if(!e||e.email!=="admin@gymnasium22.com")throw new Error("     .");try{await mr.collection(Hp).doc(t).delete()}catch(n){throw console.error("   :",n),n}}},cS=k.createContext(void 0),NK="admin@gymnasium22.com",PK="teacher@gymnasium22.com",DK=({children:t})=>{const[e,n]=k.useState(null),[r,s]=k.useState(null),[A,i]=k.useState(!0);k.useEffect(()=>{if(!un){console.warn("Firebase Auth is not initialized. Authentication is disabled."),i(!1);return}const c=un.onAuthStateChanged(d=>{n(d),d?d.email===NK?s("admin"):d.email===PK?s("teacher"):(s(null),un==null||un.signOut()):s(null),i(!1)});return()=>c()},[]);const o=async()=>{un&&await un.signOut(),s(null)},a=()=>{s("guest"),i(!1)};return l.jsx(cS.Provider,{value:{user:e,role:r,loading:A,logout:o,setGuestRole:a},children:t})},Al=()=>{const t=k.useContext(cS);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},uS=k.createContext(void 0),dS=({children:t,initialData:e})=>{const[n,r]=k.useState(an),[s,A]=k.useState(!0),[i,o]=k.useState([]),[a,c]=k.useState(-1),{user:d,role:h,loading:f}=Al();k.useEffect(()=>{if(e){r(e),o([e]),c(0),A(!1);return}if(f)return;if(!(d||h==="guest")){r(an),A(!1);return}A(!0);const I=TA.subscribe(S=>{const U={...an,...S};U.teachers||(U.teachers=[]),U.teachers=U.teachers.map(N=>({shifts:[ue.First,ue.Second],telegramChatId:"",...N})),U.schedule||(U.schedule=[]),U.schedule2ndHalf||(U.schedule2ndHalf=[]),U.substitutions||(U.substitutions=[]),U.bellSchedule||(U.bellSchedule=vT),U.settings?U.settings={...an.settings,...U.settings}:U.settings=an.settings,r(U),o(N=>N.length===0?[U]:N),c(N=>N===-1?0:N),A(!1)},S=>{console.error("Failed to subscribe to data:",S),r(an),A(!1)});return()=>{I&&I()}},[e,d,h,f]);const m=k.useCallback(async(v,I=!0)=>{const S=!d&&h==="guest",U={...n,...v};if(r(U),!e&&d&&!S)try{await TA.save(U)}catch(N){console.error("Save failed silently in background",N)}else S&&console.warn("       .");if(I){const N=i.slice(0,a+1);N.push(U),N.length>50&&N.shift(),o(N),c(N.length-1)}},[n,i,a,d,h,e]),w=k.useCallback(async()=>{if(a>0){const v=i[a-1];c(a-1),r(v),!e&&d&&await TA.save(v)}},[i,a,d,e]),y=k.useCallback(async()=>{if(a<i.length-1){const v=i[a+1];c(a+1),r(v),!e&&d&&await TA.save(v)}},[i,a,d,e]),T=k.useCallback(async()=>{await m(an)},[m]),C=k.useMemo(()=>({data:n,isLoading:s,saveData:m,resetData:T,undo:w,redo:y,canUndo:a>0,canRedo:a<i.length-1}),[n,s,m,T,w,y,a]);return l.jsx(uS.Provider,{value:C,children:t})},Fg=()=>{const t=k.useContext(uS);if(!t)throw new Error("useFullData must be used within DataProvider");return t},hS=k.createContext(void 0),fS=k.createContext(void 0),gS=({children:t})=>{const{data:e,saveData:n}=Fg(),r=k.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),s=k.useCallback(async(i,o)=>{await n(i,o)},[n]),A=k.useMemo(()=>({...r,saveStaticData:s}),[r,s]);return l.jsx(hS.Provider,{value:A,children:t})},pS=({children:t})=>{const{data:e,saveData:n}=Fg(),r=new Date().getMonth(),A=r>=0&&r<=4?e.schedule2ndHalf||[]:e.schedule,i=k.useCallback(async(d,h)=>{d===1?await n({schedule:h}):await n({schedule2ndHalf:h})},[n]),o=k.useCallback(async(d,h)=>{await n(d,h)},[n]),a=k.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2ndHalf||[],substitutions:e.substitutions,saveSemesterSchedule:i,saveScheduleData:o}),[A,e.schedule,e.schedule2ndHalf,e.substitutions,i,o]),c=k.useMemo(()=>({...a,saveScheduleData:o}),[a,o]);return l.jsx(fS.Provider,{value:c,children:t})},sA=()=>{const t=k.useContext(hS);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Fg();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},il=()=>{const t=k.useContext(fS);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Fg();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},LK={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},$=({name:t,size:e=24,className:n="",...r})=>{const s=LK[t];return s?l.jsx(s,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},Os=({isOpen:t,onClose:e,title:n,children:r,maxWidth:s="max-w-lg"})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx($,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null,OK=({x:t,y:e,onClose:n,actions:r})=>{if(k.useEffect(()=>{const A=()=>n();return window.addEventListener("click",A),()=>window.removeEventListener("click",A)},[n]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:r.map((A,i)=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),A.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${A.color||"text-slate-700 dark:text-slate-200"}`,children:[A.icon&&l.jsx($,{name:A.icon,size:16}),A.label]},i))})},MK=()=>{const{bellSchedule:t}=sA(),[e,n]=k.useState("..."),[r,s]=k.useState(""),[A,i]=k.useState(0),[o,a]=k.useState("bg-slate-500"),[c,d]=k.useState("");return k.useEffect(()=>{const h=()=>{const m=new Date,w=m.getDay(),T=[null,Br.Monday,Br.Tuesday,Br.Wednesday,Br.Thursday,Br.Friday,null][w];if(d(T||""),!T){n(" "),s(" "),a("bg-slate-400"),i(0);return}const C=m.getHours()*60+m.getMinutes();let v=t.filter(U=>U.day===T);v.length===0&&(v=t.filter(U=>U.day==="default"));let I=null;const S=U=>{const[N,B]=U.split(":").map(Number);return N*60+B};for(const U of v){const N=S(U.start),B=S(U.end);if(C>=N&&C<B){I={...U,duration:B-N,passed:C-N};break}}if(I)n(`${I.period} `),s(`${I.shift===ue.First?"1 ":"2 "}  . ${I.duration-I.passed} `),i(I.passed/I.duration*100),a("bg-indigo-600");else{let U=1/0,N=null;for(const B of v){const x=S(B.start);x>C&&x-C<U&&(U=x-C,N=B)}N&&U<30?(n(""),s(` ${U}  ${N.period} `),a("bg-amber-500"),i(100-U/20*100)):(n(" "),s(" "),a("bg-slate-400"),i(0))}};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center text-${o.replace("bg-","")}`,children:l.jsx($,{name:"Clock",size:16,className:o.replace("bg-","text-")})})]}),A>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${A}%`}})})]})},Kp=({options:t,value:e,onChange:n,placeholder:r,groupBy:s})=>{var m;const[A,i]=k.useState(!1),[o,a]=k.useState(""),c=k.useRef(null);k.useEffect(()=>{const w=y=>{c.current&&!c.current.contains(y.target)&&i(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const h=((m=(s?t.flatMap(w=>w.options):t).find(w=>w.value===e))==null?void 0:m.label)||r,f=s?t.map(w=>({...w,options:w.options.filter(y=>y.label.toLowerCase().includes(o.toLowerCase()))})).filter(w=>w.options.length>0):t.filter(w=>w.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx($,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:o,onChange:w=>a(w.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s?f.map((w,y)=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:w.label}),w.options.map(T=>l.jsx("div",{onClick:()=>{n(T.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===T.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:T.label},T.value))]},y)):f.map(w=>l.jsx("div",{onClick:()=>{n(w.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===w.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:w.label},w.value))]})]})},_d=({children:t,className:e=""})=>{const n=Qi.Children.toArray(t);return l.jsx("div",{className:e,children:n.map((r,s)=>l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:r},s))})},Gp=({items:t,max:e,barClassName:n="bg-indigo-500"})=>l.jsx("div",{className:"space-y-3",children:t.map((r,s)=>l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:r.label,children:r.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${r.value/e*100}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:r.value})]},s))}),VK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,settings:A}=sA(),{schedule:i,substitutions:o}=il(),a=vu(),[c,d]=k.useState(localStorage.getItem("gym_notes")||""),[h]=k.useState(new Date),[f,m]=k.useState(""),[w,y]=k.useState(null),[T,C]=k.useState(!1),[v,I]=k.useState(""),[S,U]=k.useState(!1),[N,B]=k.useState(""),[x,_]=k.useState(!1);k.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){I("");const Q=setTimeout(()=>I(""),2e3);return()=>clearTimeout(Q)}},[c]);const F=Q=>new Date(Q.getTime()-Q.getTimezoneOffset()*6e4).toISOString().split("T")[0],R=k.useMemo(()=>F(h),[h]),L=k.useMemo(()=>{const Q=h.getDay();return Q===0||Q===6?null:Vn[Q-1]},[h]),b=k.useMemo(()=>{const Q=new Date;return Q.setHours(0,0,0,0),e.filter(V=>V.birthDate).map(V=>{const z=new Date(V.birthDate);let Z=new Date(Q.getFullYear(),z.getMonth(),z.getDate());Z<Q&&Z.setFullYear(Q.getFullYear()+1);const ne=Math.ceil((Z.getTime()-Q.getTime())/(1e3*60*60*24));return{...V,diff:ne,age:Q.getFullYear()-z.getFullYear()}}).filter(V=>V.diff<=30).sort((V,z)=>V.diff-z.diff)},[e]),Oe=k.useMemo(()=>{const Q=e.length,V=new Map;e.filter(xe=>xe.unavailableDates.includes(R)).forEach(xe=>{var Qe;const Ae=((Qe=xe.absenceReasons)==null?void 0:Qe[R])===" "?" ":"";V.set(xe.id,{id:xe.id,name:xe.name,displayReason:Ae})});const z=o.filter(xe=>xe.date===R&&xe.replacementTeacherId!=="conducted"&&xe.replacementTeacherId!==xe.originalTeacherId),Z=new Map;z.forEach(xe=>{if(V.has(xe.originalTeacherId))return;const ge=e.find(X=>X.id===xe.originalTeacherId);if(!ge)return;const Ae=i.find(X=>X.id===xe.scheduleItemId);if(!Ae)return;Z.has(xe.originalTeacherId)||Z.set(xe.originalTeacherId,{teacher:ge,lessons:[]}),Z.get(xe.originalTeacherId).lessons.push({period:Ae.period,reason:xe.lessonAbsenceReason})});const ne=Array.from(V.values());Z.forEach((xe,ge)=>{const Ae=xe.lessons.sort((re,me)=>re.period-me.period),Qe=Ae.map(re=>re.period).join(", "),ce=Ae.some(re=>re.reason===" ")?" ":"";ne.push({id:ge,name:xe.teacher.name,displayReason:`${Qe} : ${ce}`})}),ne.sort((xe,ge)=>xe.name.localeCompare(ge.name));const Re=ne.length,Ce=Q-Re;return{presentPercent:Q>0?Math.round(Ce/Q*100):0,absentCount:Re,totalTeachers:Q,absentTeachersList:ne}},[e,R,o,i]),Ve=k.useMemo(()=>{const Q=new Date(h);for(Q.setDate(h.getDate()+1);Q.getDay()===0||Q.getDay()===6;)Q.setDate(Q.getDate()+1);const z=[null,"","","","","",null][Q.getDay()];if(!z)return[];const Z=[];return n.forEach(ne=>{const Re=i.filter(Ce=>Ce.classId===ne.id&&Ce.day===z);Re.length===0?Z.push({class:ne.name,issue:`   ${z}`}):Re.length<4&&Z.push({class:ne.name,issue:`  (${Re.length})`}),Re.forEach(Ce=>{if(i.some(xe=>xe.id!==Ce.id&&xe.day===z&&xe.period===Ce.period&&xe.shift===Ce.shift&&xe.teacherId===Ce.teacherId)&&Z.push({class:ne.name,issue:`  (${Ce.period} )`}),Ce.roomId){const xe=r.find(ge=>ge.id===Ce.roomId);xe&&xe.capacity<ne.studentsCount&&Z.push({class:ne.name,issue:`: ${xe.name} (${Ce.period} )`})}})}),Z.filter((ne,Re,Ce)=>Ce.findIndex(He=>He.class===ne.class&&He.issue===ne.issue)===Re).slice(0,10)},[i,n,e,r,h]),et=k.useMemo(()=>{if(!L)return 0;let Q=0;const V=i.filter(z=>z.day===L);for(const z of V){const Z=e.find(ne=>ne.id===z.teacherId);Z&&Z.unavailableDates.includes(R)&&(o.find(Re=>Re.scheduleItemId===z.id&&Re.date===R)||Q++)}return Q},[i,e,o,R,L]),Le=()=>{var Ae;if(!f){y(null);return}const Q=new Date,z=[null,Br.Monday,Br.Tuesday,Br.Wednesday,Br.Thursday,Br.Friday,null][Q.getDay()];if(!z){y({status:"",detail:"  ",color:"text-slate-500"});return}const Z=Qe=>{const[X,ce]=Qe.split(":").map(Number);return X*60+ce},ne=Q.getHours()*60+Q.getMinutes();let Re=s.filter(Qe=>Qe.day===z);Re.length===0&&(Re=s.filter(Qe=>Qe.day==="default"));const Ce=Re.find(Qe=>{const X=Z(Qe.start),ce=Z(Qe.end);return ne>=X&&ne<=ce}),He=f.toLowerCase(),xe=e.find(Qe=>Qe.name.toLowerCase().includes(He)),ge=n.find(Qe=>Qe.name.toLowerCase().includes(He));if(!xe&&!ge){y({status:" ",detail:" ",color:"text-red-500"});return}if(xe){if(xe.unavailableDates.includes(R)){const me=((Ae=xe.absenceReasons)==null?void 0:Ae[R])===" "?" ":"";y({status:"",detail:me,color:"text-red-500",icon:"UserX",items:[]});return}if(!Ce){y({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Qe=i.filter(re=>re.teacherId===xe.id&&re.day===z&&re.period===Ce.period&&re.shift===Ce.shift),X=o.filter(re=>re.date===R&&re.replacementTeacherId===xe.id).map(re=>i.find(me=>me.id===re.scheduleItemId)).filter(re=>!!re&&re.day===z&&re.period===Ce.period&&re.shift===Ce.shift);let ce=[];Qe.forEach(re=>{var ve,Te,tt;const me=o.find(Ye=>Ye.date===R&&Ye.scheduleItemId===re.id);if(!me||me.replacementTeacherId===xe.id){const Ye=((ve=r.find(Ue=>Ue.id===((me==null?void 0:me.replacementRoomId)||re.roomId)))==null?void 0:ve.name)||(me==null?void 0:me.replacementRoomId)||re.roomId||" .",Ke=(Te=t.find(Ue=>Ue.id===re.subjectId))==null?void 0:Te.name,Ze=(tt=n.find(Ue=>Ue.id===re.classId))==null?void 0:tt.name;ce.push({room:Ye,subject:Ke,entityName:Ze,direction:re.direction,isSubstitution:!!(me&&me.replacementTeacherId===xe.id),originalTeacherName:null})}}),X.forEach(re=>{var Ke,Ze,Ue;const me=o.find(Ne=>Ne.date===R&&Ne.scheduleItemId===re.id&&Ne.replacementTeacherId===xe.id);if(!me)return;const ve=((Ke=r.find(Ne=>Ne.id===(me.replacementRoomId||re.roomId)))==null?void 0:Ke.name)||me.replacementRoomId||re.roomId||" .",Te=(Ze=t.find(Ne=>Ne.id===re.subjectId))==null?void 0:Ze.name,tt=(Ue=n.find(Ne=>Ne.id===re.classId))==null?void 0:Ue.name,Ye=e.find(Ne=>Ne.id===me.originalTeacherId);ce.push({room:ve,subject:Te,entityName:tt,direction:re.direction,isSubstitution:!0,originalTeacherName:Ye==null?void 0:Ye.name})}),ce.length>0?y({status:` ${Ce.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ce}):y({status:"",detail:` ( ${Ce.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(ge){if(!Ce){y({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const Qe=i.filter(X=>X.classId===ge.id&&X.day===z&&X.period===Ce.period&&X.shift===Ce.shift);if(Qe.length>0){const X=Qe.map(me=>{var We,ze,dt,qe,je;const ve=o.find(Xe=>Xe.scheduleItemId===me.id&&Xe.date===R);if(ve&&ve.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(We=t.find(Xe=>Xe.id===me.subjectId))==null?void 0:We.name};const Te=!!(ve&&ve.replacementTeacherId!=="conducted"&&ve.replacementTeacherId!=="cancelled"),tt=Te?ve.replacementTeacherId:me.teacherId,Ye=(ve==null?void 0:ve.replacementRoomId)||me.roomId,Ke=(ze=e.find(Xe=>Xe.id===tt))==null?void 0:ze.name,Ze=((dt=r.find(Xe=>Xe.id===Ye))==null?void 0:dt.name)||Ye||" .",Ue=(qe=t.find(Xe=>Xe.id===me.subjectId))==null?void 0:qe.name,Ne=Te?(je=e.find(Xe=>Xe.id===ve.originalTeacherId))==null?void 0:je.name:null;return{room:Ze,subject:Ue,entityName:Ke,direction:me.direction,isSubstitution:Te,originalTeacherName:Ne}}),ce=X.filter(me=>!me.cancelled),re=X.filter(me=>!!me.cancelled);ce.length>0?y({status:` ${Ce.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ce}):re.length>0?y({status:" ",detail:re.map(me=>me.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):y({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else y({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},te=async()=>{if(!N.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}_(!0);const Q=` *   :*

${N}`;try{const z=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:Q,parse_mode:"Markdown"})})).json();if(z.ok)alert("!   ."),U(!1),B("");else throw new Error(z.description)}catch(V){console.error("   Telegram:",V),alert(`   . : ${V}`)}finally{_(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx($,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx($,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:Q=>m(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&Le(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:Le,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx($,{name:"Search",size:20})})]}),w&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${w.color}`,children:[l.jsx($,{name:w.icon||"Info",size:14})," ",w.status]}),w.items&&w.items.length>0?l.jsx("div",{className:"space-y-2",children:w.items.map((Q,V)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[Q.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:Q.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:Q.subject}),Q.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:Q.originalTeacherName?` ( ${Q.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:Q.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:Q.room})]})]},V))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:w.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx($,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:et>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:et}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx($,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>C(!T),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:T?" ":" ",children:l.jsx($,{name:T?"PieChart":"List",size:20})})]}),T?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Oe.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Oe.absentTeachersList.map(Q=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:Q.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:Q.displayReason})]},Q.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx($,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Oe.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Oe.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Oe.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx($,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:b.length?b.map(Q=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:Q.name}),l.jsx("span",{className:"font-bold text-slate-400",children:Q.diff===0?"!":`${Q.diff} .`})]},Q.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx($,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:Ve.length?Ve.map((Q,V)=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:Q.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:Q.issue})]},V)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx($,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:Q=>d(Q.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),v&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx($,{name:"Save",size:12})," ",v]})]})]})]}),l.jsx(Os,{isOpen:S,onClose:()=>U(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:N,onChange:Q=>B(Q.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:te,disabled:x,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[x?l.jsx($,{name:"Loader",size:16,className:"animate-spin"}):l.jsx($,{name:"Send",size:16}),x?"...":""]})})]})})]})};var mS={},wS={},vS={},Ug={};Object.defineProperty(Ug,"__esModule",{value:!0});function jK(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Ug.default=jK;var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});var HK=Ug,KK=" and ";function GK(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],s=HK.default(n),A=r;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(KK)}Hy.default=GK;var Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});function zK(){}Ky.default=zK;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Ug;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=Hy;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=Ky;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(vS);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=k,n=vS;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(s){return!0}};var r=function(s){return function(A,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],c=o[1],d=n.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(wS);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=wS;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(mS);const $K=J_(mS),yS=({readOnly:t=!1,semester:e=1})=>{const{subjects:n,teachers:r,classes:s,rooms:A}=sA(),{schedule1:i,schedule2:o,saveSemesterSchedule:a,canUndo:c,canRedo:d,undo:h,redo:f}=il(),m=e===2?o:i,w=async P=>{await a(e,P)},[y,T]=k.useState(ue.First),[C,v]=k.useState(Br.Monday),[I,S]=k.useState(!1),[U,N]=k.useState({}),[B,x]=k.useState("class"),[_,F]=k.useState(""),[R,L]=k.useState(""),[b,Oe]=k.useState(""),[Ve,et]=k.useState(!1),[Le,te]=k.useState({visible:!1,x:0,y:0,item:null,cell:null}),[Q,V]=k.useState(null),[z,Z]=k.useState([]),[ne,Re]=k.useState(null),[Ce,He]=k.useState(null),xe=$K({maxWidth:767}),[ge,Ae]=k.useState(!0),[Qe,X]=k.useState(!1),[ce,re]=k.useState({isOpen:!1,type:"",day:"",classId:""}),[me,ve]=k.useState(Br.Monday),[Te,tt]=k.useState(""),Ye=cs[y],Ke=()=>B==="week"?cs[y].map(P=>({id:P.toString(),name:`${P} `})):B==="class"?_?s.filter(P=>P.id===_&&P.shift===y):s.filter(P=>P.shift===y):B==="teacher"?_?r.filter(P=>P.id===_):r:B==="subject"?_?n.filter(P=>P.id===_):n:[],Ze=(P,G)=>{let _e=[];if(B==="week"){const oe=parseInt(P),se=G;_e=m.filter(Be=>Be.shift===y&&Be.period===oe&&Be.day===se),_&&(_e=_e.filter(Be=>Be.classId===_))}else{const oe=G;B==="class"&&(_e=m.filter(se=>se.classId===P&&se.period===oe&&se.day===C&&se.shift===y)),B==="teacher"&&(_e=m.filter(se=>se.teacherId===P&&se.period===oe&&se.day===C&&se.shift===y)),B==="subject"&&(_e=m.filter(se=>se.subjectId===P&&se.period===oe&&se.day===C&&se.shift===y))}return R&&(_e=_e.filter(oe=>{if(!oe.roomId)return!1;const se=A.find(Ge=>Ge.id===oe.roomId);return(se?se.name:oe.roomId).toLowerCase().includes(R.toLowerCase())})),b&&(_e=_e.filter(oe=>{var se;return(se=oe.direction)==null?void 0:se.toLowerCase().includes(b.toLowerCase())})),_e},Ue=P=>{const G=[],_e=m.filter(Be=>Be.id!==P.id&&Be.day===P.day&&Be.period===P.period&&Be.shift===P.shift);return _e.find(Be=>Be.teacherId===P.teacherId)&&G.push("teacher"),_e.find(Be=>!(Be.classId!==P.classId||Be.direction&&P.direction&&Be.direction!==P.direction))&&G.push("class"),P.roomId&&_e.find(Ge=>Ge.roomId===P.roomId)&&G.push("room"),G},Ne=(P,G,_e)=>{const oe=[],se=s.find(ft=>ft.id===P),Be=n.find(ft=>ft.id===G),Ge=A.find(ft=>ft.id===_e);return Ge&&(se&&Ge.capacity<se.studentsCount&&oe.push(`  !   ${se.studentsCount} .,     ${Ge.capacity}.`),Be&&Be.requiredRoomType&&Be.requiredRoomType!==""&&Ge.type!==Be.requiredRoomType&&oe.push(`   !   "${Be.requiredRoomType}",   "${Ge.type}".`)),oe},We=P=>{const G=Ne(P.classId,P.subjectId,P.roomId);Z(G)},ze=P=>{t||(N(P),We(P),S(!0))},dt=(P,G,_e=C)=>{if(t)return;const oe={period:G,day:_e,shift:y,id:Math.random().toString(36).substr(2,9)};B==="class"&&(oe.classId=P),B==="teacher"&&(oe.teacherId=P),B==="subject"&&(oe.subjectId=P),B==="week"&&(oe.period=parseInt(P),oe.day=_e,_&&s.find(se=>se.id===_)&&(oe.classId=_)),N(oe),Z([]),S(!0)},qe=async()=>{if(!U.subjectId||!U.teacherId||!U.classId)return;let P=[...m];const G=P.findIndex(_e=>_e.id===U.id);G>=0?P[G]=U:P.push(U),await w(P),S(!1)},je=async P=>{const G=m.filter(_e=>_e.id!==(P||U.id));await w(G),S(!1)},Xe=(P,G,_e)=>{t||(P.preventDefault(),P.stopPropagation(),te({visible:!0,x:P.clientX,y:P.clientY,item:G,cell:_e}))},Rn=(P,G)=>{if(t)return;Re(G),P.dataTransfer.effectAllowed="move";const _e=P.target;setTimeout(()=>_e.classList.add("dragging"),0)},zn=P=>{P.target.classList.remove("dragging"),Re(null),He(null)},jr=(P,G)=>{P.preventDefault(),!t&&He(`${G.rowId}-${G.colKey}`)},pt=async(P,G)=>{if(P.preventDefault(),!ne||t)return;const _e={...ne};B==="week"?(_e.period=parseInt(G.rowId),_e.day=G.colKey):(_e.period=G.colKey,_e.day=C,B==="class"&&(_e.classId=G.rowId),B==="teacher"&&(_e.teacherId=G.rowId),B==="subject"&&(_e.subjectId=G.rowId));let oe=m.map(se=>se.id===_e.id?_e:se);await w(oe),Re(null),He(null)},D=[];Le.item?D.push({label:"",icon:"Copy",onClick:()=>V(Le.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>je(Le.item.id)}):Le.cell&&(Q&&D.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...Q,id:Math.random().toString(36).substr(2,9),day:C,shift:y,period:Le.cell.colKey};B==="week"&&(P.day=Le.cell.colKey,P.period=parseInt(Le.cell.rowId)),B==="class"?P.classId=Le.cell.rowId:B==="teacher"?P.teacherId=Le.cell.rowId:B==="subject"&&(P.subjectId=Le.cell.rowId);let G=[...m,P];await w(G),V(null)}}),D.push({label:" ",icon:"Plus",onClick:()=>dt(Le.cell.rowId,Le.cell.colKey,B==="week"?Le.cell.colKey:C)}));const j=U.subjectId?r.filter(P=>P.subjectIds.includes(U.subjectId)):[],W=U.subjectId?r.filter(P=>!P.subjectIds.includes(U.subjectId)):r,le=k.useMemo(()=>{var G,_e,oe,se;const P=e===2?" (2- )":"";if(_){if(B==="teacher")return((G=r.find(Be=>Be.id===_))==null?void 0:G.name)+P;if(B==="class")return((_e=s.find(Be=>Be.id===_))==null?void 0:_e.name)+P;if(B==="subject")return((oe=n.find(Be=>Be.id===_))==null?void 0:oe.name)+P;if(B==="week")return((se=s.find(Be=>Be.id===_))==null?void 0:se.name)+P}return`  ${C}`+P},[_,B,r,s,n,C,e]),be=!!_,we=k.useMemo(()=>be?Vn:Ye,[be,Ye]),he=k.useMemo(()=>be?cs[y].map(P=>({id:P.toString(),name:`${P} `})):Ke(),[be,y,Ke]),Pe=(P,G)=>{if(be){const _e=parseInt(P),oe=G;let se=m.filter(Be=>Be.shift===y&&Be.period===_e&&Be.day===oe);return B==="class"||B==="week"?se=se.filter(Be=>Be.classId===_):B==="teacher"?se=se.filter(Be=>Be.teacherId===_):B==="subject"&&(se=se.filter(Be=>Be.subjectId===_)),se}else return Ze(P,G)},ie=Ke(),fe=B==="week"?Vn:Ye,De=(P,G,_e)=>{re({isOpen:!0,type:P,day:G||"",classId:_e||""})},ht=async()=>{let P=[...m];ce.type==="clearAll"?P=[]:ce.type==="clearDay"&&ce.day?P=P.filter(G=>G.day!==ce.day):ce.type==="clearClass"&&ce.classId&&(P=P.filter(G=>G.classId!==ce.classId)),await w(P),re({isOpen:!1,type:"",day:"",classId:""}),X(!1)},ot=(P,G,_e)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(oe=>{const se=n.find(It=>It.id===oe.subjectId),Be=r.find(It=>It.id===oe.teacherId),Ge=s.find(It=>It.id===oe.classId),ft=Ue(oe),Qt=A.find(It=>It.id===oe.roomId),mn=Qt?Qt.name:oe.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:It=>Rn(It,oe),onDragEnd:t?void 0:zn,onClick:t?void 0:()=>ze(oe),onContextMenu:t?void 0:It=>Xe(It,oe,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${ft.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:ft.length===0&&(se!=null&&se.color)?{backgroundColor:`${se.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:B==="subject"||B==="week"?Ge==null?void 0:Ge.name:se==null?void 0:se.name}),oe.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:oe.direction})]}),B==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:se==null?void 0:se.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:Be==null?void 0:Be.name,children:[l.jsx($,{name:B==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:B==="teacher"?Ge==null?void 0:Ge.name:Be==null?void 0:Be.name})]}),mn&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Qt?`: ${Qt.capacity}, : ${Qt.type}`:"",children:mn})]}),ft.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${ft.join(", ")}`,children:"!"})]},oe.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>dt(_e,G,B==="week"?G:C),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx($,{name:"Plus",size:16})})]}),Yt=()=>{if(!_)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=m.filter(G=>G.day===C&&G.shift===y&&(B==="class"&&G.classId===_||B==="teacher"&&G.teacherId===_||B==="subject"&&G.subjectId===_)).sort((G,_e)=>G.period-_e.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",C,"  ",y,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(G=>{const _e=n.find(Qt=>Qt.id===G.subjectId),oe=r.find(Qt=>Qt.id===G.teacherId),se=s.find(Qt=>Qt.id===G.classId),Be=A.find(Qt=>Qt.id===G.roomId),Ge=Be?Be.name:G.roomId,ft=Ue(G);return l.jsxs("div",{onClick:t?void 0:()=>ze(G),className:`rounded-xl p-4 shadow-sm border ${ft.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[G.period," "]}),ft.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${ft.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[_e==null?void 0:_e.name," ",G.direction&&`(${G.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[se==null?void 0:se.name,"  ",oe==null?void 0:oe.name]}),Ge&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Ge]})]},G.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Le.visible&&l.jsx(OK,{x:Le.x,y:Le.y,onClose:()=>te({...Le,visible:!1}),actions:D}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>T(ue.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>T(ue.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${y===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),B!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Vn.map(P=>l.jsx("button",{onClick:()=>v(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${C===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx($,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx($,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{x("class"),F("")},className:`p-2 rounded-md ${B==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{x("teacher"),F("")},className:`p-2 rounded-md ${B==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{x("subject"),F("")},className:`p-2 rounded-md ${B==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;x("week"),F(((P=s[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${B==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx($,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx($,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:_,onChange:P=>F(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",B==="class"?"":B==="teacher"?"":B==="week"?" ()":""]}),(B==="class"||B==="week")&&s.filter(P=>P.shift===y).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),B==="teacher"&&r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),B==="subject"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:R,onChange:P=>L(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:b,onChange:P=>Oe(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>X(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx($,{name:"List",size:16})," . ."]}),(_||B==="week")&&l.jsx("button",{onClick:()=>et(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx($,{name:"Printer",size:16})})]})]}),xe&&!t&&_&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>Ae(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${ge?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx($,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>Ae(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${ge?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx($,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:xe&&ge&&!t&&_?Yt():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:B==="week"?"":B==="class"?"":B==="teacher"?"":""}),fe.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:B==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:ie.length>0?ie.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),fe.map(G=>{const _e=Ze(P.id,G),oe=`${P.id}-${G}`;return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${Ce===oe?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:se=>Xe(se,null,{rowId:P.id,colKey:G}),onDragOver:t?void 0:se=>jr(se,{rowId:P.id,colKey:G}),onDrop:t?void 0:se=>pt(se,{rowId:P.id,colKey:G}),children:ot(_e,G,P.id)},G)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(Os,{isOpen:I,onClose:()=>S(!1),title:U.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",U.day]}),l.jsxs("span",{children:[": ",U.period]}),l.jsxs("span",{children:[": ",U.shift===ue.First?"1 ":"2 "]})]}),z.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:z.map((P,G)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($,{name:"AlertTriangle",size:14}),P]},G))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Kp,{options:s.filter(P=>P.shift===y).map(P=>({value:P.id,label:P.name})),value:U.classId,onChange:P=>{N({...U,classId:P}),We({...U,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Kp,{options:n.map(P=>({value:P.id,label:P.name})),value:U.subjectId,onChange:P=>{N({...U,subjectId:P}),We({...U,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Kp,{options:[{value:"recommend",label:"",options:j.map(P=>({value:P.id,label:P.name}))},{value:"others",label:"",options:W.map(P=>({value:P.id,label:P.name}))}],value:U.teacherId,onChange:P=>N({...U,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:U.direction||"",onChange:P=>N({...U,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:U.roomId||"",onChange:P=>{N({...U,roomId:P.target.value}),We({...U,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),A.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[U.id&&l.jsx("button",{onClick:()=>je(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:qe,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(Os,{isOpen:Qe,onClose:()=>X(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>De("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:me,onChange:P=>ve(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Vn.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>De("clearDay",me),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",me]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:Te,onChange:P=>tt(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),s.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{Te&&De("clearClass",void 0,Te)},disabled:!Te,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(Os,{isOpen:ce.isOpen,onClose:()=>re({...ce,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>re({...ce,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:ht,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),Ve&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx($,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>et(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:le}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:be||B==="week"?"":B==="class"?"":B==="teacher"?"":""}),we.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:be||B==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:he.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),we.map(G=>{const _e=Pe(P.id,G);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:_e.map(oe=>{const se=n.find(mt=>mt.id===oe.subjectId),Be=r.find(mt=>mt.id===oe.teacherId),Ge=s.find(mt=>mt.id===oe.classId),ft=A.find(mt=>mt.id===oe.roomId),Qt=ft?ft.name:oe.roomId,mn=B==="teacher",gt=B==="subject"||B==="week"||be&&mn?Ge==null?void 0:Ge.name:se==null?void 0:se.name,gi=mn?Ge==null?void 0:Ge.name:Be==null?void 0:Be.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[gt,oe.direction&&` (${oe.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:gi}),Qt&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Qt})]})]},oe.id)})},G)})]},P.id))})]})]})})]})]})},WK=()=>{var Le,te;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:s,saveStaticData:A}=sA(),[i,o]=k.useState("teachers"),[a,c]=k.useState(!1),[d,h]=k.useState(null),[f,m]=k.useState({}),[w,y]=k.useState({}),[T,C]=k.useState({}),[v,I]=k.useState({}),[S,U]=k.useState("default"),[N,B]=k.useState(null),x=Q=>{h(Q||null),i==="teachers"?m(Q?e.find(V=>V.id===Q)??{}:{subjectIds:[],unavailableDates:[],shifts:[ue.First,ue.Second],telegramChatId:""}):i==="subjects"?y(Q?t.find(V=>V.id===Q)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?C(Q?n.find(V=>V.id===Q)??{}:{shift:ue.First,studentsCount:25}):i==="rooms"&&I(Q?r.find(V=>V.id===Q)??{}:{capacity:30,type:""}),c(!0)},_=async()=>{const Q=()=>Math.random().toString(36).substr(2,9),V={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:w,key:"subjects"},classes:{list:n,form:T,key:"classes"},rooms:{list:r,form:v,key:"rooms"}};if(i==="bells"||!(i in V))return;const z=V[i],{list:Z,form:ne,key:Re}=z;if(!ne.name)return;let Ce=[...Z];d?Ce=Ce.map(He=>He.id===d?{...He,...ne}:He):Ce.push({...ne,id:Q()}),await A({[Re]:Ce}),c(!1)},F=async Q=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(V=>V.id!==Q)});break;case"subjects":await A({subjects:t.filter(V=>V.id!==Q)});break;case"classes":await A({classes:n.filter(V=>V.id!==Q)});break;case"rooms":await A({rooms:r.filter(V=>V.id!==Q)});break}},R=(Q,V)=>{B(V),Q.dataTransfer.effectAllowed="move"},L=Q=>{Q.preventDefault()},b=async(Q,V)=>{if(!(N===null||N===V)){switch(i){case"teachers":{const z=[...e],[Z]=z.splice(N,1);z.splice(V,0,Z),await A({teachers:z});break}case"subjects":{const z=[...t],[Z]=z.splice(N,1);z.splice(V,0,Z),await A({subjects:z});break}case"classes":{const z=[...n],[Z]=z.splice(N,1);z.splice(V,0,Z),await A({classes:z});break}case"rooms":{const z=[...r],[Z]=z.splice(N,1);z.splice(V,0,Z),await A({rooms:z});break}}B(null)}},Oe=(Q,V)=>{const z=S;let Z=s.find(ne=>ne.shift===Q&&ne.period===V&&ne.day===z);if(!Z&&z!=="default"){const ne=s.find(Re=>Re.shift===Q&&Re.period===V&&Re.day==="default");return ne?{...ne,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return Z||{start:"",end:""}},Ve=async(Q,V,z,Z)=>{let ne=[...s];const Re=S,Ce=ne.findIndex(He=>He.shift===Q&&He.period===V&&He.day===Re);Ce>=0?ne[Ce]={...ne[Ce],[z]:Z}:ne.push({shift:Q,period:V,[z]:Z,start:"00:00",end:"00:00",day:Re}),await A({bellSchedule:ne})},et=Q=>{const V=f.shifts||[];V.includes(Q)?m({...f,shifts:V.filter(z=>z!==Q)}):m({...f,shifts:[...V,Q]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(Q=>l.jsxs("button",{onClick:()=>o(Q.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===Q.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx($,{name:Q.icon,size:18})," ",Q.label]},Q.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>x(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx($,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(_d,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((Q,V)=>{var z,Z;return l.jsxs("div",{draggable:!0,onDragStart:ne=>R(ne,V),onDragOver:L,onDrop:ne=>b(ne,V),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:Q.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx($,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:Q.birthDate?`: ${new Date(Q.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[((z=Q.shifts)==null?void 0:z.includes(ue.First))&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),((Z=Q.shifts)==null?void 0:Z.includes(ue.Second))&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:Q.subjectIds.map(ne=>{const Re=t.find(Ce=>Ce.id===ne);return Re?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:Re.color,color:"#334155"},children:Re.name},ne):null})})]},Q.id)})}),i==="subjects"&&l.jsx(_d,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((Q,V)=>l.jsxs("div",{draggable:!0,onDragStart:z=>R(z,V),onDragOver:L,onDrop:z=>b(z,V),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:Q.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:Q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",Q.difficulty,"  ",Q.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:16})})]})]},Q.id))}),i==="classes"&&l.jsx(_d,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((Q,V)=>l.jsxs("div",{draggable:!0,onDragStart:z=>R(z,V),onDragOver:L,onDrop:z=>b(z,V),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx($,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:Q.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[Q.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${Q.shift===ue.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[Q.shift===ue.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:14})})]})]},Q.id))}),i==="rooms"&&l.jsx(_d,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((Q,V)=>l.jsxs("div",{draggable:!0,onDragStart:z=>R(z,V),onDragOver:L,onDrop:z=>b(z,V),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx($,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:Q.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",Q.capacity,"  ",Q.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>x(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>F(Q.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:16})})]})]},Q.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(Q=>l.jsx("button",{onClick:()=>U(Q),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${S===Q?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:Q==="default"?"":Q===""?"":""},Q))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ue.First,ue.Second].map(Q=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${Q===ue.First?"bg-indigo-600":"bg-purple-600"}`,children:Q}),l.jsx("div",{className:"p-6 space-y-3",children:cs[Q].map(V=>{const z=Oe(Q,V);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${z.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:V}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:z.start,onChange:Z=>Ve(Q,V,"start",Z.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:z.end,onChange:Z=>Ve(Q,V,"end",Z.target.value)})]})]},V)})})]},Q))})]})]}),l.jsx(Os,{isOpen:a,onClose:()=>c(!1),title:"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:Q=>m({...f,name:Q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:Q=>m({...f,birthDate:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:Q=>m({...f,telegramChatId:Q.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Le=f.shifts)==null?void 0:Le.includes(ue.First),onChange:()=>et(ue.First)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(te=f.shifts)==null?void 0:te.includes(ue.Second),onChange:()=>et(ue.Second)}),l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(Q=>{var V;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(V=f.subjectIds)==null?void 0:V.includes(Q.id),onChange:z=>{const Z=f.subjectIds||[];m({...f,subjectIds:z.target.checked?[...Z,Q.id]:Z.filter(ne=>ne!==Q.id)})}}),l.jsx("span",{className:"text-sm dark:text-slate-300",children:Q.name})]},Q.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:w.name||"",onChange:Q=>y({...w,name:Q.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:":"}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:w.color||"#ffffff",onChange:Q=>y({...w,color:Q.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.difficulty||5,onChange:Q=>y({...w,difficulty:parseInt(Q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.requiredRoomType,onChange:Q=>y({...w,requiredRoomType:Q.target.value}),children:Zx.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:T.name||"",onChange:Q=>C({...T,name:Q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:T.studentsCount||25,onChange:Q=>C({...T,studentsCount:parseInt(Q.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>C({...T,shift:ue.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${T.shift===ue.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>C({...T,shift:ue.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${T.shift===ue.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:v.name||"",onChange:Q=>I({...v,name:Q.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.capacity||30,onChange:Q=>I({...v,capacity:parseInt(Q.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.type,onChange:Q=>I({...v,type:Q.target.value}),children:Zx.map(Q=>l.jsx("option",{value:Q,children:Q},Q))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},qK=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,saveStaticData:A}=sA(),{schedule1:i,schedule2:o,substitutions:a,saveScheduleData:c}=il(),d=ai(),[h,f]=k.useState(new Date().toISOString().split("T")[0]),[m,w]=k.useState(!1),[y,T]=k.useState(null),[C,v]=k.useState(!1),[I,S]=k.useState(!1),[U,N]=k.useState(null),[B,x]=k.useState(""),[_,F]=k.useState(!1),[R,L]=k.useState(""),[b,Oe]=k.useState(""),[Ve,et]=k.useState("all"),[Le,te]=k.useState(""),[Q,V]=k.useState(""),[z,Z]=k.useState(""),[ne,Re]=k.useState(""),[Ce,He]=k.useState([]),[xe,ge]=k.useState(!1),[Ae,Qe]=k.useState(!1),X=k.useMemo(()=>{const D=new Date(h).getMonth();return D>=0&&D<=4?o:i},[h,i,o]);k.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(T(d.state.subParams),Z(""),Re(""),He([]),ge(!1),Qe(!1),w(!0),window.history.replaceState({},document.title))},[d.state]),k.useEffect(()=>{if(m&&y){const D=a.find(j=>j.scheduleItemId===y.scheduleItemId&&j.date===h);He(D?D.refusals||[]:[]),ge(!1),Qe(!1)}},[m,y,a,h]);const ce=k.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:Vn[D-1]},[h]),re=k.useMemo(()=>e.filter(D=>{const j=D.name.toLowerCase().includes(b.toLowerCase()),W=Ve==="all"?!0:D.shifts.includes(Ve);return j&&W}),[e,b,Ve]),me=k.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),ve=k.useMemo(()=>{if(!ce)return[];const D=me.map(he=>he.id),j=X.filter(he=>he.day===ce&&D.includes(he.teacherId)),le=a.filter(he=>he.date===h).map(he=>he.scheduleItemId),be=X.filter(he=>le.includes(he.id)),we=[...j];return be.forEach(he=>{we.find(Pe=>Pe.id===he.id)||we.push(he)}),we.sort((he,Pe)=>he.period-Pe.period)},[X,ce,me,a,h]),Te=D=>{var W;const j=e.find(le=>le.id===D);N(D),x(((W=j==null?void 0:j.absenceReasons)==null?void 0:W[h])||""),v(!0)},tt=k.useCallback(async()=>{let D=[...e];const j=D.findIndex(le=>le.id===U);if(j===-1)return;const W={...D[j]};W.unavailableDates.includes(h)||(W.unavailableDates=[...W.unavailableDates,h]),W.absenceReasons||(W.absenceReasons={}),W.absenceReasons[h]=B,D[j]=W,await A({teachers:D}),v(!1)},[e,U,h,B,A]),Ye=k.useCallback(async D=>{let j=[...e];const W=j.findIndex(be=>be.id===D);if(W===-1)return;const le={...j[W]};le.unavailableDates=le.unavailableDates.filter(be=>be!==h),le.absenceReasons&&delete le.absenceReasons[h],j[W]=le,await A({teachers:j})},[e,h,A]),Ke=k.useCallback(async(D,j=!1)=>{if(!y){alert(":   .    . ,   .");return}const W=[...a],le=X.find(he=>he.id===y.scheduleItemId);if(!le){alert(":     . ,       .");return}const be=W.findIndex(he=>he.scheduleItemId===y.scheduleItemId&&he.date===h),we={id:be>=0?W[be].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:y.scheduleItemId,originalTeacherId:le.teacherId,replacementTeacherId:D,replacementRoomId:z||void 0,isMerger:j,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&ne?ne:void 0,refusals:Ce};be>=0?W[be]=we:W.push(we),await c({substitutions:W}),w(!1),te(""),Z(""),Re(""),He([]),T(null)},[y,h,z,X,a,e,ne,Ce,c]),Ze=k.useCallback(async D=>{if(!y)return;const j=X.find(De=>De.id===y.scheduleItemId),W=X.find(De=>De.id===D);if(!j||!W){alert(":     .");return}const le=[...a];let be;z?be=z:be=Ae?j.roomId:W.roomId;const we=Ae?W.roomId:j.roomId,he=le.findIndex(De=>De.scheduleItemId===j.id&&De.date===h),Pe={id:he>=0?le[he].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:j.id,originalTeacherId:j.teacherId,replacementTeacherId:j.teacherId,replacementClassId:W.classId,replacementSubjectId:W.subjectId,replacementRoomId:be!==j.roomId?be:void 0};he>=0?le[he]=Pe:le.push(Pe);const ie=le.findIndex(De=>De.scheduleItemId===W.id&&De.date===h),fe={id:ie>=0?le[ie].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:W.id,originalTeacherId:W.teacherId,replacementTeacherId:W.teacherId,replacementClassId:j.classId,replacementSubjectId:j.subjectId,replacementRoomId:we!==W.roomId?we:void 0};ie>=0?le[ie]=fe:le.push(fe),await c({substitutions:le}),w(!1),T(null),Z(""),ge(!1),Qe(!1)},[y,X,a,h,c,z,Ae]),Ue=k.useCallback(async D=>{const j=a.filter(W=>!(W.scheduleItemId===D&&W.date===h));await c({substitutions:j})},[a,h,c]),Ne=k.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const j=a.some(le=>le.date===h&&le.replacementTeacherId!=="conducted"),W=(le,be)=>{const he=ve.filter(Pe=>Pe.shift===be).filter(Pe=>{const ie=a.find(fe=>fe.scheduleItemId===Pe.id&&fe.date===h);return ie&&ie.replacementTeacherId!=="conducted"});he.length>0&&(D+=`
 *${le.toUpperCase()}*
`,he.forEach(Pe=>{var mn,It,AA;const ie=a.find(gt=>gt.scheduleItemId===Pe.id&&gt.date===h),fe=n.find(gt=>gt.id===Pe.classId),De=t.find(gt=>gt.id===Pe.subjectId),ht=ie?e.find(gt=>gt.id===ie.replacementTeacherId):null,ot=e.find(gt=>gt.id===Pe.teacherId),Yt=((mn=r.find(gt=>gt.id===Pe.roomId))==null?void 0:mn.name)||Pe.roomId||"?",P=(It=ot==null?void 0:ot.absenceReasons)==null?void 0:It[h],G=ie==null?void 0:ie.lessonAbsenceReason,se=(G===" "?G:null)||(P===" "?P:null),Be=(ot==null?void 0:ot.name)+(se?` (${se})`:""),Ge=ie!=null&&ie.replacementRoomId?((AA=r.find(gt=>gt.id===ie.replacementRoomId))==null?void 0:AA.name)||ie.replacementRoomId:null,ft=ie!=null&&ie.replacementClassId?n.find(gt=>gt.id===ie.replacementClassId):null,Qt=ie!=null&&ie.replacementSubjectId?t.find(gt=>gt.id===ie.replacementSubjectId):null;if(ie)if(ie.replacementTeacherId==="cancelled")D+=` ${fe==null?void 0:fe.name} (${Pe.period} ): ${De==null?void 0:De.name} (${Be}) ->  
`;else if(ie.replacementTeacherId===ie.originalTeacherId&&Ge&&!ft)D+=` ${fe==null?void 0:fe.name} (${Pe.period} ): ${De==null?void 0:De.name} (${ot==null?void 0:ot.name}) ->  ${Yt}  ${Ge}
`;else if(ft&&Qt)D+=` ${fe==null?void 0:fe.name} (${Pe.period} ): ${De==null?void 0:De.name} ->  ${ft.name} ${Qt.name} ( )${Ge?`  . ${Ge}`:""}
`;else{let gt=` ${fe==null?void 0:fe.name} (${Pe.period} ): ${De==null?void 0:De.name} -> ${ht==null?void 0:ht.name} ${ie.isMerger?"() ":""}( ${Be})`;Ge&&(gt+=`  . ${Ge}`),D+=gt+`
`}}))};j?(W(ue.First,ue.First),W(ue.Second,ue.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,a,ve,n,t,e,r]),We=k.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;a.filter(we=>we.date===h).forEach(we=>{var oe;const he=X.find(se=>se.id===we.scheduleItemId);if(!he)return;let Pe="Unknown";if(we.replacementTeacherId==="cancelled")Pe=" ";else if(we.replacementTeacherId==="conducted")Pe=" ";else{const se=e.find(Be=>Be.id===we.replacementTeacherId);se&&(Pe=se.name)}const ie=t.find(se=>se.id===he.subjectId),fe=n.find(se=>se.id===he.classId),De=we.date.replace(/-/g,""),ht=e.find(se=>se.id===we.originalTeacherId),ot=(oe=ht==null?void 0:ht.absenceReasons)==null?void 0:oe[h],Yt=we.lessonAbsenceReason,_e=(Yt===" "?Yt:null)||(ot===" "?ot:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${De}
SUMMARY:: ${fe==null?void 0:fe.name} - ${ie==null?void 0:ie.name}
DESCRIPTION:: ${Pe}${we.isMerger?" ()":""}${_e?` (: ${_e})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const W=new Blob([D],{type:"text/calendar"}),le=URL.createObjectURL(W),be=document.createElement("a");be.href=le,be.download="substitutions.ics",document.body.appendChild(be),be.click(),document.body.removeChild(be)},[h,a,X,e,t,n]),ze=k.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,j=!1;const W=new Set,le=[ue.First,ue.Second];for(const we of le){const Pe=ve.filter(ie=>ie.shift===we).filter(ie=>a.some(fe=>fe.scheduleItemId===ie.id&&fe.date===h&&fe.replacementTeacherId!=="conducted"));Pe.length>0&&(j=!0,D+=` *${we.toUpperCase()}*
`,Pe.forEach(ie=>{var AA,gt,gi;const fe=a.find(mt=>mt.scheduleItemId===ie.id&&mt.date===h);if(!fe)return;const De=n.find(mt=>mt.id===ie.classId),ht=t.find(mt=>mt.id===ie.subjectId),ot=e.find(mt=>mt.id===fe.originalTeacherId),Yt=e.find(mt=>mt.id===fe.replacementTeacherId),P=(AA=ot==null?void 0:ot.absenceReasons)==null?void 0:AA[h],G=fe.lessonAbsenceReason,se=(G===" "?G:null)||(P===" "?P:null),Be=(ot==null?void 0:ot.name)+(se?` (${se})`:""),Ge=((gt=r.find(mt=>mt.id===ie.roomId))==null?void 0:gt.name)||ie.roomId||"",ft=fe.replacementRoomId?((gi=r.find(mt=>mt.id===fe.replacementRoomId))==null?void 0:gi.name)||fe.replacementRoomId:Ge,Qt=fe.replacementClassId?n.find(mt=>mt.id===fe.replacementClassId):null,mn=fe.replacementSubjectId?t.find(mt=>mt.id===fe.replacementSubjectId):null;let It=`${ie.period}  (${De==null?void 0:De.name} ${ht==null?void 0:ht.name}${ie.direction?` ${ie.direction}`:""}): `;fe.replacementTeacherId==="cancelled"?It+=`* * ( ${Be})`:Qt&&mn?(It+=`  : ${Qt.name} ${mn.name} ( ${De==null?void 0:De.name} ${ht==null?void 0:ht.name})`,ft!==Ge&&(It+=`  . ${ft}`)):fe.replacementTeacherId===fe.originalTeacherId?It+=`: ${Be}.  : ${Ge}  ${ft}`:(It+=`*${Yt==null?void 0:Yt.name}* ${fe.isMerger?"() ":""}( *${Be}*)`,Ge!==ft?It+=`. : ${Ge}  ${ft}`:ft!==""&&(It+=`. : ${ft}`)),D+=`${It}
`,ot!=null&&ot.telegramChatId&&W.add(ot.telegramChatId),Yt!=null&&Yt.telegramChatId&&W.add(Yt.telegramChatId)}),D+=`
`)}if(j||(D+=` .
`),me.forEach(we=>{var fe;const he=a.some(De=>De.date===h&&De.originalTeacherId===we.id&&De.replacementTeacherId!=="cancelled"&&De.replacementTeacherId!=="conducted"),Pe=(fe=we.absenceReasons)==null?void 0:fe[h],ie=Pe===" "?Pe:"";we.telegramChatId&&!he&&we.unavailableDates.includes(h)&&(W.add(we.telegramChatId),j?D+=`_:  ${we.name} ${ie},        /._
`:D+=`_:  ${we.name} ${ie},      ._
`)}),W.size===0){alert("    Telegram Chat ID   .");return}const be=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const we=Array.from(W).map(he=>fetch(be,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:he,text:D,parse_mode:"Markdown"})}));await Promise.all(we),alert(`   ${W.size} !`)}catch(we){console.error("    Telegram:",we),alert("     Telegram.     .")}},[h,ve,a,n,t,e,r,me,s==null?void 0:s.telegramToken]),dt=k.useMemo(()=>y?new Set(a.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const j=X.find(W=>W.id===D.scheduleItemId);return j&&j.period===y.period&&j.shift===y.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[a,X,h,y]),qe=k.useMemo(()=>{if(!y||!ce)return[];const D=h.substring(0,7);return e.filter(j=>j.name.toLowerCase().includes(Le.toLowerCase())).map(j=>{const W=j.unavailableDates.includes(h),le=X.some(fe=>fe.teacherId===j.id&&fe.day===ce&&fe.period===y.period&&fe.shift===y.shift),be=dt.has(j.id),we=le||be,he=j.subjectIds.includes(y.subjectId),Pe=a.filter(fe=>fe.replacementTeacherId===j.id&&fe.date.startsWith(D)).length;let ie=0;return W&&(ie-=1e3),we&&(ie-=100),he&&(ie+=50),{teacher:j,isAbsent:W,isBusy:we,isSpecialist:he,score:ie,subsCount:Pe}}).sort((j,W)=>W.score-j.score)},[e,y,h,Le,ce,X,a,dt]),je=k.useMemo(()=>{var we;if(!y)return null;const D=X.find(he=>he.id===y.scheduleItemId);if(!D)return null;const j=n.find(he=>he.id===D.classId),W=t.find(he=>he.id===D.subjectId),le=e.find(he=>he.id===D.teacherId),be=((we=le==null?void 0:le.unavailableDates)==null?void 0:we.includes(h))||!1;return{className:j==null?void 0:j.name,subjectName:W==null?void 0:W.name,teacherName:le==null?void 0:le.name,teacherId:le==null?void 0:le.id,period:D.period,roomId:D.roomId,isTeacherAbsent:be}},[y,X,n,t,e,h]),Xe=k.useMemo(()=>!(je!=null&&je.teacherId)||!ce?[]:X.filter(D=>D.teacherId===je.teacherId&&D.day===ce&&D.id!==(y==null?void 0:y.scheduleItemId)).sort((D,j)=>D.period-j.period),[X,je,ce,y]),Rn=k.useMemo(()=>{if(!ce||Q.length<2)return[];const D=Q.toLowerCase(),j=e.filter(be=>be.name.toLowerCase().includes(D)),W=n.filter(be=>be.name.toLowerCase().includes(D)),le=[];return j.forEach(be=>{X.filter(he=>he.teacherId===be.id&&he.day===ce).forEach(he=>{const Pe=n.find(fe=>fe.id===he.classId),ie=t.find(fe=>fe.id===he.subjectId);le.push({...he,entityName:be.name,subInfo:Pe==null?void 0:Pe.name,subjectName:ie==null?void 0:ie.name})})}),W.forEach(be=>{X.filter(he=>he.classId===be.id&&he.day===ce).forEach(he=>{if(le.find(fe=>fe.id===he.id))return;const Pe=e.find(fe=>fe.id===he.teacherId),ie=t.find(fe=>fe.id===he.subjectId);le.push({...he,entityName:be.name,subInfo:Pe==null?void 0:Pe.name,subjectName:ie==null?void 0:ie.name})})}),le.sort((be,we)=>be.period-we.period)},[Q,ce,e,n,X,t]),zn=k.useCallback(async(D,j,W,le,be,we)=>{const Pe=new Date(we).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),ie=j.shift===ue.First?"1 ":"2 ",fe=` *  *
${D.name}

 : ${Pe}
 : ${ie}
 : ${W==null?void 0:W.name}
1 : ${j.period}
 : ${le==null?void 0:le.name}
 : ${be||" "}`;if(s!=null&&s.telegramToken&&D.telegramChatId)try{const ht=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:fe,parse_mode:"Markdown"})})).json();ht.ok?alert(`   Telegram  ${D.name}!`):ht.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${ht.description}`)}catch(De){alert("   Telegram (/)."),console.error(De)}else navigator.share?navigator.share({title:"",text:fe}).catch(()=>{}):(navigator.clipboard.writeText(fe),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),jr=(D,j)=>{let W=!1;if(j){if(!window.confirm("     .     ?"))return;W=!0}Ke(D,W)},pt=(D,j)=>{j.stopPropagation(),Ce.includes(D)?He(Ce.filter(W=>W!==D)):He([...Ce,D])};return l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>F(!_),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${_?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx($,{name:"History",size:16})," ",_?" ":" "]})]}),_?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:R,onChange:D=>L(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:a.filter(D=>{var j;return D.date.includes(R)||((j=e.find(W=>W.id===D.replacementTeacherId))==null?void 0:j.name.toLowerCase().includes(R.toLowerCase()))}).map(D=>{const j=e.find(le=>le.id===D.replacementTeacherId),W=r.find(le=>le.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[(j==null?void 0:j.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),W&&l.jsxs("div",{className:"text-indigo-500",children:[". ",W.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>et("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ve==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>et(ue.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ve===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>et(ue.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Ve===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:b,onChange:D=>Oe(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[re.map(D=>{const j=D.unavailableDates.includes(h),W=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${j?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${j?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>j?Ye(D.id):Te(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${j?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:j?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(le=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:le===ue.First?"1":"2"},le))}),j&&l.jsxs("div",{className:"flex items-center gap-1",children:[W&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:W}),l.jsx("button",{onClick:()=>Te(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx($,{name:"Edit2",size:14})})]})]})]},D.id)}),re.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",ve.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx($,{name:"Calendar",size:16})," iCal"]}),ve.length>0&&l.jsxs("button",{onClick:Ne,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx($,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:ze,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{V(""),S(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx($,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:ve.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx($,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):ve.map(D=>{var P;const j=a.find(G=>G.scheduleItemId===D.id&&G.date===h),W=j&&j.replacementTeacherId!=="cancelled"&&j.replacementTeacherId!=="conducted"?e.find(G=>G.id===j.replacementTeacherId):null,le=e.find(G=>G.id===D.teacherId),be=t.find(G=>G.id===D.subjectId),we=n.find(G=>G.id===D.classId),he=r.find(G=>G.id===D.roomId),Pe=he?he.name:D.roomId,ie=j==null?void 0:j.replacementRoomId,fe=ie?((P=r.find(G=>G.id===ie))==null?void 0:P.name)||ie:null,De=j!=null&&j.replacementClassId?n.find(G=>G.id===j.replacementClassId):null,ht=j!=null&&j.replacementSubjectId?t.find(G=>G.id===j.replacementSubjectId):null;let ot=null;if((j==null?void 0:j.replacementTeacherId)==="conducted")ot=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Ue(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx($,{name:"X",size:16})})]});else if((j==null?void 0:j.replacementTeacherId)==="cancelled")ot=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>Ue(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx($,{name:"X",size:16})})]});else if(W||ie){const G=(j==null?void 0:j.replacementTeacherId)===(j==null?void 0:j.originalTeacherId)&&ie&&!De,_e=De&&ht;ot=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:G?" ":_e?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:G?"  ":_e?` ${De==null?void 0:De.name}`:W==null?void 0:W.name}),j.isMerger&&l.jsx("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:""}),j.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",j.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>zn(W||le,D,we,be,fe||Pe,h),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx($,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>Ue(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx($,{name:"UserX",size:18})})]})]})}else ot=l.jsxs("button",{onClick:()=>{T({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),w(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx($,{name:"ArrowRight",size:16})]});const Yt=!me.find(G=>G.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:we==null?void 0:we.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===ue.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:be==null?void 0:be.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:Yt?"font-semibold":"line-through decoration-red-400 decoration-2",children:le==null?void 0:le.name}),Pe&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Pe," ",fe&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",fe]})]}),(j==null?void 0:j.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",j.lessonAbsenceReason,")"]}),De&&ht&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",De.name]})]})]})]}),ot]},D.id)})})]}),l.jsxs(Os,{isOpen:m,onClose:()=>w(!1),title:" ",children:[je&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[je.className,"  ",je.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:je.subjectName}),l.jsx("span",{className:je.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:je.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:z,onChange:D=>Z(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),r.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),je&&!je.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:ne,onChange:D=>Re(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Ke("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Ke("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(je==null?void 0:je.teacherId)&&!je.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Ke(je.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),Xe.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>ge(!xe),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx($,{name:"RotateCw",size:16}),"     "]}),xe&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:Ae,onChange:D=>Qe(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),Xe.map(D=>{const j=n.find(le=>le.id===D.classId),W=t.find(le=>le.id===D.subjectId);return l.jsxs("button",{onClick:()=>Ze(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",j==null?void 0:j.name," - ",W==null?void 0:W.name]},D.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Le,onChange:D=>te(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[qe.map(({teacher:D,isAbsent:j,isBusy:W,isSpecialist:le,subsCount:be})=>{const we=Ce.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${j?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":we?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":W?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${le?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:le?l.jsx($,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[le&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),W&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),j&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),we&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${be>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",be]})]})]})]}),!j&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:he=>pt(D.id,he),className:`px-3 py-1 text-xs font-bold rounded border ${we?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:we?"":""}),!we&&!W&&l.jsx("button",{onClick:()=>jr(D.id,W),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!we&&W&&l.jsx("button",{onClick:()=>jr(D.id,W),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),qe.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(Os,{isOpen:I,onClose:()=>S(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:Q,onChange:D=>V(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[Rn.map(D=>{var j;return l.jsxs("button",{onClick:()=>{S(!1),T({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),w(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((j=r.find(W=>W.id===D.roomId))==null?void 0:j.name)||D.roomId]})]})]},D.id)}),Q.length>1&&Rn.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(Os,{isOpen:C,onClose:()=>v(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:B,onChange:D=>x(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:tt,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},JK=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:s}=sA(),{schedule1:A,schedule2:i}=il(),[o,a]=k.useState("teachers"),[c,d]=k.useState(new Date().toISOString().split("T")[0]),[h,f]=k.useState(ue.First),[m,w]=k.useState(1),[y,T]=k.useState(ue.First),[C,v]=k.useState(1),[I,S]=k.useState(""),[U,N]=k.useState(""),B=k.useMemo(()=>{const b=new Date(c).getMonth();return b>=0&&b<=4?i:A},[c,A,i]);k.useEffect(()=>{r&&(S(r.telegramToken||""),N(r.feedbackChatId||""))},[r]),k.useEffect(()=>{w(h===ue.First?1:0)},[h]),k.useEffect(()=>{v(y===ue.First?1:0)},[y]);const x=k.useMemo(()=>{const b=new Date(c).getDay();return b===0||b===6?null:Vn[b-1]},[c]),_=cs[h],F=k.useMemo(()=>x?e.filter(b=>b.shifts&&!b.shifts.includes(h)||b.unavailableDates.includes(c)?!1:!B.some(Ve=>Ve.teacherId===b.id&&Ve.day===x&&Ve.period>m&&Ve.shift===h)).sort((b,Oe)=>b.name.localeCompare(Oe.name)):[],[e,c,x,m,h,B]),R=k.useMemo(()=>{if(!x)return[];const b=new Set;return B.forEach(Ve=>{Ve.day===x&&Ve.period===C&&Ve.shift===y&&Ve.roomId&&b.add(Ve.roomId)}),n.filter(Ve=>!b.has(Ve.id)).map(Ve=>Ve.name)},[B,n,x,C,y]),L=async()=>{await s({settings:{...r,telegramToken:I,feedbackChatId:U}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx($,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>a("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>a("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>a("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),o!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:b=>d(b.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),o==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ue.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ue.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:_.map(b=>l.jsx("button",{onClick:()=>w(b),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${m===b?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:b},b))})]})]}),o==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>T(ue.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>T(ue.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${y===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:cs[y].map(b=>l.jsx("button",{onClick:()=>v(b),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${C===b?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:b},b))})]})]}),o==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:I,onChange:b=>S(b.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:U,onChange:b=>N(b.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:L,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Save",size:20}),"  "]})]})]}),o==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[F.map(b=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx($,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:b.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:b.subjectIds.slice(0,2).map(Oe=>{const Ve=t.find(et=>et.id===Oe);return Ve?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:Ve.name},Oe):null})})]})]},b.id)),F.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",m,"   ",h]})]}),o==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[R.map(b=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx($,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:b}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},b)),R.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx($,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $0=function(t,e){return $0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},$0(t,e)};function es(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var W0=function(){return W0=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(e[A]=n[A])}return e},W0.apply(this,arguments)};function $n(t,e,n,r){function s(A){return A instanceof n?A:new n(function(i){i(A)})}return new(n||(n=Promise))(function(A,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(o,a)}c((r=r.apply(t,[])).next())})}function Mn(t,e){var n={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},r,s,A,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(A=n.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){n.label=c[1];break}if(c[0]===6&&n.label<A[1]){n.label=A[1],A=c;break}if(A&&n.label<A[2]){n.label=A[2],n.ops.push(c);break}A[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ed(t,e,n){if(arguments.length===2)for(var r=0,s=e.length,A;r<s;r++)(A||!(r in e))&&(A||(A=Array.prototype.slice.call(e,0,r)),A[r]=e[r]);return t.concat(A||e)}var qs=function(){function t(e,n,r,s){this.left=e,this.top=n,this.width=r,this.height=s}return t.prototype.add=function(e,n,r,s){return new t(this.left+e,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Sg=function(t,e){return qs.fromClientRect(t,e.getBoundingClientRect())},XK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),s=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new qs(0,0,r,s)},Qg=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},en=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},WI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",YK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bd=0;bd<WI.length;bd++)YK[WI.charCodeAt(bd)]=bd;var qI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Td=0;Td<qI.length;Td++)zl[qI.charCodeAt(Td)]=Td;var ZK=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=zl[t.charCodeAt(r)],i=zl[t.charCodeAt(r+1)],o=zl[t.charCodeAt(r+2)],a=zl[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},e3=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},t3=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Gi=5,Gy=11,zp=2,n3=Gy-Gi,BS=65536>>Gi,r3=1<<Gi,$p=r3-1,s3=1024>>Gi,A3=BS+s3,i3=A3,o3=32,a3=i3+o3,l3=65536>>Gy,c3=1<<n3,u3=c3-1,JI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},d3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},h3=function(t,e){var n=ZK(t),r=Array.isArray(n)?t3(n):new Uint32Array(n),s=Array.isArray(n)?e3(n):new Uint16Array(n),A=24,i=JI(s,A/2,r[4]/2),o=r[5]===2?JI(s,(A+r[4])/2):d3(r,Math.ceil((A+r[4])/4));return new f3(r[0],r[1],r[2],r[3],i,o)},f3=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Gi],n=(n<<zp)+(e&$p),this.data[n];if(e<=65535)return n=this.index[BS+(e-55296>>Gi)],n=(n<<zp)+(e&$p),this.data[n];if(e<this.highStart)return n=a3-l3+(e>>Gy),n=this.index[n],n+=e>>Gi&u3,n=this.index[n],n=(n<<zp)+(e&$p),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),XI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fd=0;Fd<XI.length;Fd++)g3[XI.charCodeAt(Fd)]=Fd;var p3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",YI=50,m3=1,xS=2,CS=3,w3=4,v3=5,ZI=7,IS=8,e_=9,FA=10,q0=11,t_=12,J0=13,y3=14,$l=15,X0=16,Ud=17,Ql=18,B3=19,n_=20,Y0=21,kl=22,Wp=23,So=24,wr=25,Wl=26,ql=27,Qo=28,x3=29,Si=30,C3=31,Sd=32,Qd=33,Z0=34,ew=35,tw=36,uu=37,nw=38,vh=39,yh=40,qp=41,_S=42,I3=43,_3=[9001,65288],ES="!",st="",kd="",rw=h3(p3),bs=[Si,tw],sw=[m3,xS,CS,v3],bS=[FA,IS],r_=[ql,Wl],E3=sw.concat(bS),s_=[nw,vh,yh,Z0,ew],b3=[$l,J0],T3=function(t,e){e===void 0&&(e="strict");var n=[],r=[],s=[];return t.forEach(function(A,i){var o=rw.get(A);if(o>YI?(s.push(!0),o-=YI):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return r.push(i),n.push(X0);if(o===w3||o===q0){if(i===0)return r.push(i),n.push(Si);var a=n[i-1];return E3.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(Si))}if(r.push(i),o===C3)return n.push(e==="strict"?Y0:uu);if(o===_S||o===x3)return n.push(Si);if(o===I3)return A>=131072&&A<=196605||A>=196608&&A<=262141?n.push(uu):n.push(Si);n.push(o)}),[r,n,s]},Jp=function(t,e,n,r){var s=r[n];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=n;A<=r.length;){A++;var i=r[A];if(i===e)return!0;if(i!==FA)break}if(s===FA)for(var A=n;A>0;){A--;var o=r[A];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==FA)break}if(o!==FA)break}return!1},A_=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===FA)n--;else return r}return 0},F3=function(t,e,n,r,s){if(n[r]===0)return st;var A=r-1;if(Array.isArray(s)&&s[A]===!0)return st;var i=A-1,o=A+1,a=e[A],c=i>=0?e[i]:0,d=e[o];if(a===xS&&d===CS)return st;if(sw.indexOf(a)!==-1)return ES;if(sw.indexOf(d)!==-1||bS.indexOf(d)!==-1)return st;if(A_(A,e)===IS)return kd;if(rw.get(t[A])===q0||(a===Sd||a===Qd)&&rw.get(t[o])===q0||a===ZI||d===ZI||a===e_||[FA,J0,$l].indexOf(a)===-1&&d===e_||[Ud,Ql,B3,So,Qo].indexOf(d)!==-1||A_(A,e)===kl||Jp(Wp,kl,A,e)||Jp([Ud,Ql],Y0,A,e)||Jp(t_,t_,A,e))return st;if(a===FA)return kd;if(a===Wp||d===Wp)return st;if(d===X0||a===X0)return kd;if([J0,$l,Y0].indexOf(d)!==-1||a===y3||c===tw&&b3.indexOf(a)!==-1||a===Qo&&d===tw||d===n_||bs.indexOf(d)!==-1&&a===wr||bs.indexOf(a)!==-1&&d===wr||a===ql&&[uu,Sd,Qd].indexOf(d)!==-1||[uu,Sd,Qd].indexOf(a)!==-1&&d===Wl||bs.indexOf(a)!==-1&&r_.indexOf(d)!==-1||r_.indexOf(a)!==-1&&bs.indexOf(d)!==-1||[ql,Wl].indexOf(a)!==-1&&(d===wr||[kl,$l].indexOf(d)!==-1&&e[o+1]===wr)||[kl,$l].indexOf(a)!==-1&&d===wr||a===wr&&[wr,Qo,So].indexOf(d)!==-1)return st;if([wr,Qo,So,Ud,Ql].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===wr)return st;if([Qo,So].indexOf(f)!==-1)h--;else break}if([ql,Wl].indexOf(d)!==-1)for(var h=[Ud,Ql].indexOf(a)!==-1?i:A;h>=0;){var f=e[h];if(f===wr)return st;if([Qo,So].indexOf(f)!==-1)h--;else break}if(nw===a&&[nw,vh,Z0,ew].indexOf(d)!==-1||[vh,Z0].indexOf(a)!==-1&&[vh,yh].indexOf(d)!==-1||[yh,ew].indexOf(a)!==-1&&d===yh||s_.indexOf(a)!==-1&&[n_,Wl].indexOf(d)!==-1||s_.indexOf(d)!==-1&&a===ql||bs.indexOf(a)!==-1&&bs.indexOf(d)!==-1||a===So&&bs.indexOf(d)!==-1||bs.concat(wr).indexOf(a)!==-1&&d===kl&&_3.indexOf(t[o])===-1||bs.concat(wr).indexOf(d)!==-1&&a===Ql)return st;if(a===qp&&d===qp){for(var m=n[A],w=1;m>0&&(m--,e[m]===qp);)w++;if(w%2!==0)return st}return a===Sd&&d===Qd?st:kd},U3=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=T3(t,e.lineBreak),r=n[0],s=n[1],A=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[wr,Si,_S].indexOf(o)!==-1?uu:o}));var i=e.wordBreak==="keep-all"?A.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,s,i]},S3=function(){function t(e,n,r,s){this.codePoints=e,this.required=n===ES,this.start=r,this.end=s}return t.prototype.slice=function(){return en.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Q3=function(t,e){var n=Qg(t),r=U3(n,e),s=r[0],A=r[1],i=r[2],o=n.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=st;c<o&&(d=F3(n,A,s,++c,i))===st;);if(d!==st||c===o){var h=new S3(n,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},k3=1,R3=2,Mu=4,i_=8,wf=10,o_=47,wc=92,N3=9,P3=32,Rd=34,Rl=61,D3=35,L3=36,O3=37,Nd=39,Pd=40,Nl=41,M3=95,ir=45,V3=33,j3=60,H3=62,K3=64,G3=91,z3=93,$3=61,W3=123,Dd=63,q3=125,a_=124,J3=126,X3=128,l_=65533,Xp=42,Oi=43,Y3=44,Z3=58,e5=59,du=46,t5=0,n5=8,r5=11,s5=14,A5=31,i5=127,ns=-1,TS=48,FS=97,US=101,o5=102,a5=117,l5=122,SS=65,QS=69,kS=70,c5=85,u5=90,jn=function(t){return t>=TS&&t<=57},d5=function(t){return t>=55296&&t<=57343},ko=function(t){return jn(t)||t>=SS&&t<=kS||t>=FS&&t<=o5},h5=function(t){return t>=FS&&t<=l5},f5=function(t){return t>=SS&&t<=u5},g5=function(t){return h5(t)||f5(t)},p5=function(t){return t>=X3},Ld=function(t){return t===wf||t===N3||t===P3},vf=function(t){return g5(t)||p5(t)||t===M3},c_=function(t){return vf(t)||jn(t)||t===ir},m5=function(t){return t>=t5&&t<=n5||t===r5||t>=s5&&t<=A5||t===i5},wA=function(t,e){return t!==wc?!1:e!==wf},Od=function(t,e,n){return t===ir?vf(e)||wA(e,n):vf(t)?!0:!!(t===wc&&wA(t,e))},Yp=function(t,e,n){return t===Oi||t===ir?jn(e)?!0:e===du&&jn(n):jn(t===du?e:t)},w5=function(t){var e=0,n=1;(t[e]===Oi||t[e]===ir)&&(t[e]===ir&&(n=-1),e++);for(var r=[];jn(t[e]);)r.push(t[e++]);var s=r.length?parseInt(en.apply(void 0,r),10):0;t[e]===du&&e++;for(var A=[];jn(t[e]);)A.push(t[e++]);var i=A.length,o=i?parseInt(en.apply(void 0,A),10):0;(t[e]===QS||t[e]===US)&&e++;var a=1;(t[e]===Oi||t[e]===ir)&&(t[e]===ir&&(a=-1),e++);for(var c=[];jn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(en.apply(void 0,c),10):0;return n*(s+o*Math.pow(10,-i))*Math.pow(10,a*d)},v5={type:2},y5={type:3},B5={type:4},x5={type:13},C5={type:8},I5={type:21},_5={type:9},E5={type:10},b5={type:11},T5={type:12},F5={type:14},Md={type:23},U5={type:1},S5={type:25},Q5={type:24},k5={type:26},R5={type:27},N5={type:28},P5={type:29},D5={type:31},Aw={type:32},RS=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Qg(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==Aw;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Rd:return this.consumeStringToken(Rd);case D3:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(c_(n)||wA(r,s)){var A=Od(n,r,s)?R3:k3,i=this.consumeName();return{type:5,value:i,flags:A}}break;case L3:if(this.peekCodePoint(0)===Rl)return this.consumeCodePoint(),x5;break;case Nd:return this.consumeStringToken(Nd);case Pd:return v5;case Nl:return y5;case Xp:if(this.peekCodePoint(0)===Rl)return this.consumeCodePoint(),F5;break;case Oi:if(Yp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Y3:return B5;case ir:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(Yp(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Od(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===ir&&c===H3)return this.consumeCodePoint(),this.consumeCodePoint(),Q5;break;case du:if(Yp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case o_:if(this.peekCodePoint(0)===Xp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Xp&&(d=this.consumeCodePoint(),d===o_))return this.consumeToken();if(d===ns)return this.consumeToken()}break;case Z3:return k5;case e5:return R5;case j3:if(this.peekCodePoint(0)===V3&&this.peekCodePoint(1)===ir&&this.peekCodePoint(2)===ir)return this.consumeCodePoint(),this.consumeCodePoint(),S5;break;case K3:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(Od(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case G3:return N5;case wc:if(wA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case z3:return P5;case $3:if(this.peekCodePoint(0)===Rl)return this.consumeCodePoint(),C5;break;case W3:return b5;case q3:return T5;case a5:case c5:var w=this.peekCodePoint(0),y=this.peekCodePoint(1);return w===Oi&&(ko(y)||y===Dd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case a_:if(this.peekCodePoint(0)===Rl)return this.consumeCodePoint(),_5;if(this.peekCodePoint(0)===a_)return this.consumeCodePoint(),I5;break;case J3:if(this.peekCodePoint(0)===Rl)return this.consumeCodePoint(),E5;break;case ns:return Aw}return Ld(e)?(this.consumeWhiteSpace(),D5):jn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):vf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:en(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();ko(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===Dd&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(en.apply(void 0,e.map(function(a){return a===Dd?TS:a})),16),A=parseInt(en.apply(void 0,e.map(function(a){return a===Dd?kS:a})),16);return{type:30,start:s,end:A}}var i=parseInt(en.apply(void 0,e),16);if(this.peekCodePoint(0)===ir&&ko(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];ko(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var A=parseInt(en.apply(void 0,o),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Pd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Pd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ns)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Nd||n===Rd){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ns||this.peekCodePoint(0)===Nl)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Md)}for(;;){var s=this.consumeCodePoint();if(s===ns||s===Nl)return{type:22,value:en.apply(void 0,e)};if(Ld(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ns||this.peekCodePoint(0)===Nl?(this.consumeCodePoint(),{type:22,value:en.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Md);if(s===Rd||s===Nd||s===Pd||m5(s))return this.consumeBadUrlRemnants(),Md;if(s===wc)if(wA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Md;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Ld(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Nl||e===ns)return;wA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var s=Math.min(n,e);r+=en.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var s=this._value[r];if(s===ns||s===void 0||s===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===wf)return this._value.splice(0,r),U5;if(s===wc){var A=this._value[r+1];A!==ns&&A!==void 0&&(A===wf?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):wA(s,A)&&(n+=this.consumeStringSlice(r),n+=en(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=Mu,r=this.peekCodePoint(0);for((r===Oi||r===ir)&&e.push(this.consumeCodePoint());jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===du&&jn(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=i_;jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((r===QS||r===US)&&((s===Oi||s===ir)&&jn(A)||jn(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=i_;jn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[w5(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Od(s,A,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return s===O3?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ko(e)){for(var n=en(e);ko(this.peekCodePoint(0))&&n.length<6;)n+=en(this.consumeCodePoint());Ld(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||d5(r)||r>1114111?l_:r}return e===ns?l_:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(c_(n))e+=en(n);else if(wA(n,this.peekCodePoint(0)))e+=en(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),NS=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new RS;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||O5(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Aw:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Vu=function(t){return t.type===15},ol=function(t){return t.type===17},Bt=function(t){return t.type===20},L5=function(t){return t.type===0},iw=function(t,e){return Bt(t)&&t.value===e},PS=function(t){return t.type!==31},ja=function(t){return t.type!==31&&t.type!==4},Cs=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},O5=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},si=function(t){return t.type===17||t.type===15},ln=function(t){return t.type===16||si(t)},DS=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Fn={type:17,number:0,flags:Mu},zy={type:16,number:50,flags:Mu},UA={type:16,number:100,flags:Mu},Jl=function(t,e,n){var r=t[0],s=t[1];return[_t(r,e),_t(typeof s<"u"?s:r,n)]},_t=function(t,e){if(t.type===16)return t.number/100*e;if(Vu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},LS="deg",OS="grad",MS="rad",VS="turn",kg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case LS:return Math.PI*e.number/180;case OS:return Math.PI/200*e.number;case MS:return e.number;case VS:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},jS=function(t){return t.type===15&&(t.unit===LS||t.unit===OS||t.unit===MS||t.unit===VS)},HS=function(t){var e=t.filter(Bt).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Fn,Fn];case"to top":case"bottom":return Nr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Fn,UA];case"to right":case"left":return Nr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[UA,UA];case"to bottom":case"top":return Nr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[UA,Fn];case"to left":case"right":return Nr(270)}return 0},Nr=function(t){return Math.PI*t/180},HA={name:"color",parse:function(t,e){if(e.type===18){var n=M5[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return SA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return SA(parseInt(r+r,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return SA(parseInt(r,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return SA(parseInt(r,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var o=Ms[e.value.toUpperCase()];if(typeof o<"u")return o}return Ms.TRANSPARENT}},KA=function(t){return(255&t)===0},wn=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+r+","+n+","+e/255+")":"rgb("+s+","+r+","+n+")"},SA=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},u_=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},d_=function(t,e){var n=e.filter(ja);if(n.length===3){var r=n.map(u_),s=r[0],A=r[1],i=r[2];return SA(s,A,i,1)}if(n.length===4){var o=n.map(u_),s=o[0],A=o[1],i=o[2],a=o[3];return SA(s,A,i,a)}return 0};function Zp(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var h_=function(t,e){var n=e.filter(ja),r=n[0],s=n[1],A=n[2],i=n[3],o=(r.type===17?Nr(r.number):kg.parse(t,r))/(Math.PI*2),a=ln(s)?s.number/100:0,c=ln(A)?A.number/100:0,d=typeof i<"u"&&ln(i)?_t(i,1):1;if(a===0)return SA(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,m=Zp(f,h,o+1/3),w=Zp(f,h,o),y=Zp(f,h,o-1/3);return SA(m*255,w*255,y*255,d)},M5={hsl:h_,hsla:h_,rgb:d_,rgba:d_},vc=function(t,e){return HA.parse(t,NS.create(e).parseComponentValue())},Ms={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},V5={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Bt(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},j5={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Rg=function(t,e){var n=HA.parse(t,e[0]),r=e[1];return r&&ln(r)?{color:n,stop:r}:{color:n,stop:null}},f_=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=Fn),r.stop===null&&(r.stop=UA);for(var s=[],A=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=_t(o,e);a>A?s.push(a):s.push(A),A=a}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],m=(d-f)/(h+1),w=1;w<=h;w++)s[c+w-1]=m*w;c=null}}return t.map(function(y,T){var C=y.color;return{color:C,stop:Math.max(Math.min(1,s[T]/e),0)}})},H5=function(t,e,n){var r=e/2,s=n/2,A=_t(t[0],e)-r,i=s-_t(t[1],n);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},K5=function(t,e,n){var r=typeof t=="number"?t:H5(t,e,n),s=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),A=e/2,i=n/2,o=s/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[s,A-c,A+c,i-a,i+a]},Gr=function(t,e){return Math.sqrt(t*t+e*e)},g_=function(t,e,n,r,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,o){var a=o[0],c=o[1],d=Gr(n-a,r-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},G5=function(t,e,n,r,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(t.shape===0)A=i=Math.min(Gr(e,n),Gr(e,n-s),Gr(e-r,n),Gr(e-r,n-s));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(e),Math.abs(e-r)),a=g_(r,s,e,n,!0),c=a[0],d=a[1];A=Gr(c-e,(d-n)/o),i=o*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(t.shape===0)A=i=Math.max(Gr(e,n),Gr(e,n-s),Gr(e-r,n),Gr(e-r,n-s));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(e),Math.abs(e-r)),h=g_(r,s,e,n,!1),c=h[0],d=h[1];A=Gr(c-e,(d-n)/o),i=o*A}break}return Array.isArray(t.size)&&(A=_t(t.size[0],r),i=t.size.length===2?_t(t.size[1],s):A),[A,i]},z5=function(t,e){var n=Nr(180),r=[];return Cs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){n=HS(s);return}else if(jS(i)){n=kg.parse(t,i);return}}var o=Rg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},Vd=function(t,e){var n=Nr(180),r=[];return Cs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=HS(s);return}else if(jS(i)){n=(kg.parse(t,i)+Nr(270))%Nr(360);return}}var o=Rg(t,s);r.push(o)}),{angle:n,stops:r,type:1}},$5=function(t,e){var n=Nr(180),r=[],s=1,A=0,i=3,o=[];return Cs(e).forEach(function(a,c){var d=a[0];if(c===0){if(Bt(d)&&d.value==="linear"){s=1;return}else if(Bt(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=HA.parse(t,d.values[0]);r.push({stop:Fn,color:h})}else if(d.name==="to"){var h=HA.parse(t,d.values[0]);r.push({stop:UA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(ja);if(f.length===2){var h=HA.parse(t,f[1]),m=f[0];ol(m)&&r.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),s===1?{angle:(n+Nr(180))%Nr(360),stops:r,type:s}:{size:i,shape:A,stops:r,position:o,type:s}},KS="closest-side",GS="farthest-side",zS="closest-corner",$S="farthest-corner",WS="circle",qS="ellipse",JS="cover",XS="contain",W5=function(t,e){var n=0,r=3,s=[],A=[];return Cs(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,f){if(c)if(Bt(f))switch(f.value){case"center":return A.push(zy),h;case"top":case"left":return A.push(Fn),h;case"right":case"bottom":return A.push(UA),h}else(ln(f)||si(f))&&A.push(f);else if(Bt(f))switch(f.value){case WS:return n=0,!1;case qS:return n=1,!1;case"at":return c=!0,!1;case KS:return r=0,!1;case JS:case GS:return r=1,!1;case XS:case zS:return r=2,!1;case $S:return r=3,!1}else if(si(f)||ln(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=Rg(t,i);s.push(d)}}),{size:r,shape:n,stops:s,position:A,type:2}},jd=function(t,e){var n=0,r=3,s=[],A=[];return Cs(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(Bt(h))switch(h.value){case"center":return A.push(zy),!1;case"top":case"left":return A.push(Fn),!1;case"right":case"bottom":return A.push(UA),!1}else if(ln(h)||si(h))return A.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(Bt(h))switch(h.value){case WS:return n=0,!1;case qS:return n=1,!1;case XS:case KS:return r=0,!1;case GS:return r=1,!1;case zS:return r=2,!1;case JS:case $S:return r=3,!1}else if(si(h)||ln(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var c=Rg(t,i);s.push(c)}}),{size:r,shape:n,stops:s,position:A,type:2}},q5=function(t){return t.type===1},J5=function(t){return t.type===2},$y={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=YS[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function X5(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!YS[t.name])}var YS={"linear-gradient":z5,"-moz-linear-gradient":Vd,"-ms-linear-gradient":Vd,"-o-linear-gradient":Vd,"-webkit-linear-gradient":Vd,"radial-gradient":W5,"-moz-radial-gradient":jd,"-ms-radial-gradient":jd,"-o-radial-gradient":jd,"-webkit-radial-gradient":jd,"-webkit-gradient":$5},Y5={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return ja(r)&&X5(r)}).map(function(r){return $y.parse(t,r)})}},Z5={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Bt(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},e6={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Cs(e).map(function(n){return n.filter(ln)}).map(DS)}},t6={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Cs(e).map(function(n){return n.filter(Bt).map(function(r){return r.value}).join(" ")}).map(n6)}},n6=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},pa;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(pa||(pa={}));var r6={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Cs(e).map(function(n){return n.filter(s6)})}},s6=function(t){return Bt(t)||ln(t)},Ng=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},A6=Ng("top"),i6=Ng("right"),o6=Ng("bottom"),a6=Ng("left"),Pg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return DS(n.filter(ln))}}},l6=Pg("top-left"),c6=Pg("top-right"),u6=Pg("bottom-right"),d6=Pg("bottom-left"),Dg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},h6=Dg("top"),f6=Dg("right"),g6=Dg("bottom"),p6=Dg("left"),Lg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Vu(n)?n.number:0}}},m6=Lg("top"),w6=Lg("right"),v6=Lg("bottom"),y6=Lg("left"),B6={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},x6={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},C6={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).reduce(function(n,r){return n|I6(r.value)},0)}},I6=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},_6={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},E6={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},yf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(yf||(yf={}));var b6={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return yf.STRICT;case"normal":default:return yf.NORMAL}}},T6={name:"line-height",initialValue:"normal",prefix:!1,type:4},p_=function(t,e){return Bt(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:ln(t)?_t(t,e):e},F6={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:$y.parse(t,e)}},U6={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},ow={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Og=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},S6=Og("top"),Q6=Og("right"),k6=Og("bottom"),R6=Og("left"),N6={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},P6={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Mg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},D6=Mg("top"),L6=Mg("right"),O6=Mg("bottom"),M6=Mg("left"),V6={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},j6={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},H6={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&iw(e[0],"none")?[]:Cs(e).map(function(n){for(var r={color:Ms.TRANSPARENT,offsetX:Fn,offsetY:Fn,blur:Fn},s=0,A=0;A<n.length;A++){var i=n[A];si(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:r.blur=i,s++):r.color=HA.parse(t,i)}return r})}},K6={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},G6={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=W6[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},z6=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},$6=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,s,A,i,o]:null},W6={matrix:z6,matrix3d:$6},m_={type:16,number:50,flags:Mu},q6=[m_,m_],J6={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(ln);return n.length!==2?q6:[n[0],n[1]]}},X6={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},yc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(yc||(yc={}));var Y6={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return yc.BREAK_ALL;case"keep-all":return yc.KEEP_ALL;case"normal":default:return yc.NORMAL}}},Z6={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(ol(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ZS={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},eG={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return ol(e)?e.number:1}},tG={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nG={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},rG={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},sG={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},AG={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(ol(e))return e.number;if(Bt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},iG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Bt).map(function(n){return n.value})}},oG={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},hn=function(t,e){return(t&e)!==0},aG={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},lG={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=e.filter(PS),A=0;A<s.length;A++){var i=s[A],o=s[A+1];if(i.type===20){var a=o&&ol(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},cG={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(PS),s=0;s<r.length;s++){var A=r[s],i=r[s+1];if(Bt(A)&&A.value!=="none"){var o=i&&ol(i)?i.number:0;n.push({counter:A.value,reset:o})}}return n}},uG={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Vu).map(function(n){return ZS.parse(t,n)})}},dG={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],s=e.filter(L5);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,o=s[A+1].value;r.push({open:i,close:o})}return r}},w_=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},hG={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&iw(e[0],"none")?[]:Cs(e).map(function(n){for(var r={color:255,offsetX:Fn,offsetY:Fn,blur:Fn,spread:Fn,inset:!1},s=0,A=0;A<n.length;A++){var i=n[A];iw(i,"inset")?r.inset=!0:si(i)?(s===0?r.offsetX=i:s===1?r.offsetY=i:s===2?r.blur=i:r.spread=i,s++):r.color=HA.parse(t,i)}return r})}},fG={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(Bt).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},gG={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},pG={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Vu(e)?e.number:0}},mG=function(){function t(e,n){var r,s;this.animationDuration=Ie(e,uG,n.animationDuration),this.backgroundClip=Ie(e,V5,n.backgroundClip),this.backgroundColor=Ie(e,j5,n.backgroundColor),this.backgroundImage=Ie(e,Y5,n.backgroundImage),this.backgroundOrigin=Ie(e,Z5,n.backgroundOrigin),this.backgroundPosition=Ie(e,e6,n.backgroundPosition),this.backgroundRepeat=Ie(e,t6,n.backgroundRepeat),this.backgroundSize=Ie(e,r6,n.backgroundSize),this.borderTopColor=Ie(e,A6,n.borderTopColor),this.borderRightColor=Ie(e,i6,n.borderRightColor),this.borderBottomColor=Ie(e,o6,n.borderBottomColor),this.borderLeftColor=Ie(e,a6,n.borderLeftColor),this.borderTopLeftRadius=Ie(e,l6,n.borderTopLeftRadius),this.borderTopRightRadius=Ie(e,c6,n.borderTopRightRadius),this.borderBottomRightRadius=Ie(e,u6,n.borderBottomRightRadius),this.borderBottomLeftRadius=Ie(e,d6,n.borderBottomLeftRadius),this.borderTopStyle=Ie(e,h6,n.borderTopStyle),this.borderRightStyle=Ie(e,f6,n.borderRightStyle),this.borderBottomStyle=Ie(e,g6,n.borderBottomStyle),this.borderLeftStyle=Ie(e,p6,n.borderLeftStyle),this.borderTopWidth=Ie(e,m6,n.borderTopWidth),this.borderRightWidth=Ie(e,w6,n.borderRightWidth),this.borderBottomWidth=Ie(e,v6,n.borderBottomWidth),this.borderLeftWidth=Ie(e,y6,n.borderLeftWidth),this.boxShadow=Ie(e,hG,n.boxShadow),this.color=Ie(e,B6,n.color),this.direction=Ie(e,x6,n.direction),this.display=Ie(e,C6,n.display),this.float=Ie(e,_6,n.cssFloat),this.fontFamily=Ie(e,rG,n.fontFamily),this.fontSize=Ie(e,sG,n.fontSize),this.fontStyle=Ie(e,oG,n.fontStyle),this.fontVariant=Ie(e,iG,n.fontVariant),this.fontWeight=Ie(e,AG,n.fontWeight),this.letterSpacing=Ie(e,E6,n.letterSpacing),this.lineBreak=Ie(e,b6,n.lineBreak),this.lineHeight=Ie(e,T6,n.lineHeight),this.listStyleImage=Ie(e,F6,n.listStyleImage),this.listStylePosition=Ie(e,U6,n.listStylePosition),this.listStyleType=Ie(e,ow,n.listStyleType),this.marginTop=Ie(e,S6,n.marginTop),this.marginRight=Ie(e,Q6,n.marginRight),this.marginBottom=Ie(e,k6,n.marginBottom),this.marginLeft=Ie(e,R6,n.marginLeft),this.opacity=Ie(e,eG,n.opacity);var A=Ie(e,N6,n.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=Ie(e,P6,n.overflowWrap),this.paddingTop=Ie(e,D6,n.paddingTop),this.paddingRight=Ie(e,L6,n.paddingRight),this.paddingBottom=Ie(e,O6,n.paddingBottom),this.paddingLeft=Ie(e,M6,n.paddingLeft),this.paintOrder=Ie(e,fG,n.paintOrder),this.position=Ie(e,j6,n.position),this.textAlign=Ie(e,V6,n.textAlign),this.textDecorationColor=Ie(e,tG,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=Ie(e,nG,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=Ie(e,H6,n.textShadow),this.textTransform=Ie(e,K6,n.textTransform),this.transform=Ie(e,G6,n.transform),this.transformOrigin=Ie(e,J6,n.transformOrigin),this.visibility=Ie(e,X6,n.visibility),this.webkitTextStrokeColor=Ie(e,gG,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ie(e,pG,n.webkitTextStrokeWidth),this.wordBreak=Ie(e,Y6,n.wordBreak),this.zIndex=Ie(e,Z6,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return KA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return hn(this.display,4)||hn(this.display,33554432)||hn(this.display,268435456)||hn(this.display,536870912)||hn(this.display,67108864)||hn(this.display,134217728)},t}(),wG=function(){function t(e,n){this.content=Ie(e,aG,n.content),this.quotes=Ie(e,dG,n.quotes)}return t}(),v_=function(){function t(e,n){this.counterIncrement=Ie(e,lG,n.counterIncrement),this.counterReset=Ie(e,cG,n.counterReset)}return t}(),Ie=function(t,e,n){var r=new RS,s=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(s);var A=new NS(r.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,Bt(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return kg.parse(t,A.parseComponentValue());case"color":return HA.parse(t,A.parseComponentValue());case"image":return $y.parse(t,A.parseComponentValue());case"length":var o=A.parseComponentValue();return si(o)?o:Fn;case"length-percentage":var a=A.parseComponentValue();return ln(a)?a:Fn;case"time":return ZS.parse(t,A.parseComponentValue())}break}},vG="data-html2canvas-debug",yG=function(t){var e=t.getAttribute(vG);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},aw=function(t,e){var n=yG(t);return n===1||e===n},Is=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,aw(n,3))debugger;this.styles=new mG(e,window.getComputedStyle(n,null)),uw(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Sg(this.context,n),aw(n,4)&&(this.flags|=16)}return t}(),BG="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",y_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hd=0;Hd<y_.length;Hd++)Xl[y_.charCodeAt(Hd)]=Hd;var xG=function(t){var e=t.length*.75,n=t.length,r,s=0,A,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)A=Xl[t.charCodeAt(r)],i=Xl[t.charCodeAt(r+1)],o=Xl[t.charCodeAt(r+2)],a=Xl[t.charCodeAt(r+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|a&63;return c},CG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},IG=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},zi=5,Wy=11,em=2,_G=Wy-zi,eQ=65536>>zi,EG=1<<zi,tm=EG-1,bG=1024>>zi,TG=eQ+bG,FG=TG,UG=32,SG=FG+UG,QG=65536>>Wy,kG=1<<_G,RG=kG-1,B_=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},NG=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},PG=function(t,e){var n=xG(t),r=Array.isArray(n)?IG(n):new Uint32Array(n),s=Array.isArray(n)?CG(n):new Uint16Array(n),A=24,i=B_(s,A/2,r[4]/2),o=r[5]===2?B_(s,(A+r[4])/2):NG(r,Math.ceil((A+r[4])/4));return new DG(r[0],r[1],r[2],r[3],i,o)},DG=function(){function t(e,n,r,s,A,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>zi],n=(n<<em)+(e&tm),this.data[n];if(e<=65535)return n=this.index[eQ+(e-55296>>zi)],n=(n<<em)+(e&tm),this.data[n];if(e<this.highStart)return n=SG-QG+(e>>Wy),n=this.index[n],n+=e>>zi&RG,n=this.index[n],n=(n<<em)+(e&tm),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),x_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kd=0;Kd<x_.length;Kd++)LG[x_.charCodeAt(Kd)]=Kd;var OG=1,nm=2,rm=3,C_=4,I_=5,MG=7,__=8,sm=9,Am=10,E_=11,b_=12,T_=13,F_=14,im=15,VG=function(t){for(var e=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var A=t.charCodeAt(n++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),n--)}else e.push(s)}return e},jG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,A="";++s<n;){var i=t[s];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(s+1===n||r.length>16384)&&(A+=String.fromCharCode.apply(String,r),r.length=0)}return A},HG=PG(BG),Fr="",om="",KG=function(t){return HG.get(t)},GG=function(t,e,n){var r=n-2,s=e[r],A=e[n-1],i=e[n];if(A===nm&&i===rm)return Fr;if(A===nm||A===rm||A===C_||i===nm||i===rm||i===C_)return om;if(A===__&&[__,sm,E_,b_].indexOf(i)!==-1||(A===E_||A===sm)&&(i===sm||i===Am)||(A===b_||A===Am)&&i===Am||i===T_||i===I_||i===MG||A===OG)return Fr;if(A===T_&&i===F_){for(;s===I_;)s=e[--r];if(s===F_)return Fr}if(A===im&&i===im){for(var o=0;s===im;)o++,s=e[--r];if(o%2===0)return Fr}return om},zG=function(t){var e=VG(t),n=e.length,r=0,s=0,A=e.map(KG);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=Fr;r<n&&(i=GG(e,A,++r))===Fr;);if(i!==Fr||r===n){var o=jG.apply(null,e.slice(s,r));return s=r,{value:o,done:!1}}return{done:!0,value:null}}}},$G=function(t){for(var e=zG(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},WG=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(r),A===e)return!0}}return!1},qG=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,s=Qg(r.data).map(function(a){return en(a)}),A=0,i={},o=s.every(function(a,c){n.setStart(r,A),n.setEnd(r,A+a.length);var d=n.getBoundingClientRect();A+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},JG=function(){return typeof new Image().crossOrigin<"u"},XG=function(){return typeof new XMLHttpRequest().responseType=="string"},YG=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},U_=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},ZG=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,A=e.toDataURL();s.src=A;var i=lw(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),S_(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=n+"px",U_(a)?S_(lw(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),U_(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},lw=function(t,e,n,r,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),o=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},S_=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},En={get SUPPORT_RANGE_BOUNDS(){var t=WG(document);return Object.defineProperty(En,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=En.SUPPORT_RANGE_BOUNDS&&qG(document);return Object.defineProperty(En,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=YG(document);return Object.defineProperty(En,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?ZG(document):Promise.resolve(!1);return Object.defineProperty(En,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=JG();return Object.defineProperty(En,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=XG();return Object.defineProperty(En,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(En,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(En,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Bc=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),e8=function(t,e,n,r){var s=r8(e,n),A=[],i=0;return s.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(En.SUPPORT_RANGE_BOUNDS){var a=Q_(r,i,o.length).getClientRects();if(a.length>1){var c=qy(o),d=0;c.forEach(function(f){A.push(new Bc(f,qs.fromDOMRectList(t,Q_(r,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new Bc(o,qs.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);A.push(new Bc(o,t8(t,r))),r=h}else En.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),A},t8=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(r,e);var A=Sg(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),A}}return qs.EMPTY},Q_=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(t,e),s.setEnd(t,e+n),s},qy=function(t){if(En.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return $G(t)},n8=function(t,e){if(En.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return A8(t,e)},r8=function(t,e){return e.letterSpacing!==0?qy(t):n8(t,e)},s8=[32,160,4961,65792,65793,4153,4241],A8=function(t,e){for(var n=Q3(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],s,A=function(){if(s.value){var i=s.value.slice(),o=Qg(i),a="";o.forEach(function(c){s8.indexOf(c)===-1?a+=en(c):(a.length&&r.push(a),r.push(en(c)),a="")}),a.length&&r.push(a)}};!(s=n.next()).done;)A();return r},i8=function(){function t(e,n,r){this.text=o8(n.data,r.textTransform),this.textBounds=e8(e,this.text,r,n)}return t}(),o8=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(a8,l8);case 2:return t.toUpperCase();default:return t}},a8=/(^|\s|:|-|\(|\))([a-z])/g,l8=function(t,e,n){return t.length>0?e+n.toUpperCase():t},tQ=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Is),nQ=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return e}(Is),rQ=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=new XMLSerializer,i=Sg(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Is),sQ=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Is),cw=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return e}(Is),c8=[{type:15,flags:0,unit:"px",number:3}],u8=[{type:16,flags:0,number:50}],d8=function(t){return t.width>t.height?new qs(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new qs(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},h8=function(t){var e=t.type===f8?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Bf="checkbox",xf="radio",f8="password",k_=707406591,Jy=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=h8(r),(s.type===Bf||s.type===xf)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=d8(s.bounds)),s.type){case Bf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=c8;break;case xf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=u8;break}return s}return e}(Is),AQ=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this,A=r.options[r.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(Is),iQ=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.value=r.value,s}return e}(Is),oQ=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=lQ(n,r.contentWindow.document.documentElement);var A=r.contentWindow.document.documentElement?vc(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Ms.TRANSPARENT,i=r.contentWindow.document.body?vc(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Ms.TRANSPARENT;s.backgroundColor=KA(A)?KA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(Is),g8=["OL","UL","MENU"],Bh=function(t,e,n,r){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,cQ(s)&&s.data.trim().length>0)n.textNodes.push(new i8(t,s,n.styles));else if(ra(s))if(fQ(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return Bh(t,o,n,r)});else{var i=aQ(t,s);i.styles.isVisible()&&(p8(s,i,r)?i.flags|=4:m8(i.styles)&&(i.flags|=2),g8.indexOf(s.tagName)!==-1&&(i.flags|=8),n.elements.push(i),s.slot,s.shadowRoot?Bh(t,s.shadowRoot,i,r):!Cf(s)&&!uQ(s)&&!If(s)&&Bh(t,s,i,r))}},aQ=function(t,e){return dw(e)?new tQ(t,e):dQ(e)?new nQ(t,e):uQ(e)?new rQ(t,e):w8(e)?new sQ(t,e):v8(e)?new cw(t,e):y8(e)?new Jy(t,e):If(e)?new AQ(t,e):Cf(e)?new iQ(t,e):hQ(e)?new oQ(t,e):new Is(t,e)},lQ=function(t,e){var n=aQ(t,e);return n.flags|=4,Bh(t,e,n,n),n},p8=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Xy(t)&&n.styles.isTransparent()},m8=function(t){return t.isPositioned()||t.isFloating()},cQ=function(t){return t.nodeType===Node.TEXT_NODE},ra=function(t){return t.nodeType===Node.ELEMENT_NODE},uw=function(t){return ra(t)&&typeof t.style<"u"&&!xh(t)},xh=function(t){return typeof t.className=="object"},w8=function(t){return t.tagName==="LI"},v8=function(t){return t.tagName==="OL"},y8=function(t){return t.tagName==="INPUT"},B8=function(t){return t.tagName==="HTML"},uQ=function(t){return t.tagName==="svg"},Xy=function(t){return t.tagName==="BODY"},dQ=function(t){return t.tagName==="CANVAS"},R_=function(t){return t.tagName==="VIDEO"},dw=function(t){return t.tagName==="IMG"},hQ=function(t){return t.tagName==="IFRAME"},N_=function(t){return t.tagName==="STYLE"},x8=function(t){return t.tagName==="SCRIPT"},Cf=function(t){return t.tagName==="TEXTAREA"},If=function(t){return t.tagName==="SELECT"},fQ=function(t){return t.tagName==="SLOT"},P_=function(t){return t.tagName.indexOf("-")>0},C8=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,s=e.counterReset,A=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(A=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return A&&s.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),D_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},L_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},I8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},_8={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ro=function(t,e,n,r,s,A){return t<e||t>n?hu(t,s,A.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+A},gQ=function(t,e,n,r){var s="";do n||t--,s=r(t)+s,t/=e;while(t*e>=e);return s},Zt=function(t,e,n,r,s){var A=n-e+1;return(t<0?"-":"")+(gQ(Math.abs(t),A,r,function(i){return en(Math.floor(i%A)+e)})+s)},yi=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return gQ(Math.abs(t),r,!1,function(s){return e[Math.floor(s%r)]})+n},jo=1,fA=2,gA=4,Yl=8,Ts=function(t,e,n,r,s,A){if(t<-9999||t>9999)return hu(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&hn(A,jo)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&hn(A,fA)||c===1&&a===1&&hn(A,gA)&&t>100||c===1&&a>1&&hn(A,Yl)?o=e[c]+(a>0?n[a-1]:"")+o:c===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},O_="",M_="",V_="",am="",hu=function(t,e,n){var r=n?". ":"",s=n?"":"",A=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Zt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return yi(t,"",s);case 6:return Ro(t,1,3999,D_,3,r).toLowerCase();case 7:return Ro(t,1,3999,D_,3,r);case 8:return Zt(t,945,969,!1,r);case 9:return Zt(t,97,122,!1,r);case 10:return Zt(t,65,90,!1,r);case 11:return Zt(t,1632,1641,!0,r);case 12:case 49:return Ro(t,1,9999,L_,3,r);case 35:return Ro(t,1,9999,L_,3,r).toLowerCase();case 13:return Zt(t,2534,2543,!0,r);case 14:case 30:return Zt(t,6112,6121,!0,r);case 15:return yi(t,"",s);case 16:return yi(t,"",s);case 17:case 48:return Ts(t,"",O_,"",s,fA|gA|Yl);case 47:return Ts(t,"",M_,"",s,jo|fA|gA|Yl);case 42:return Ts(t,"",O_,"",s,fA|gA|Yl);case 41:return Ts(t,"",M_,"",s,jo|fA|gA|Yl);case 26:return Ts(t,"","",V_,s,0);case 25:return Ts(t,"","",V_,s,jo|fA|gA);case 31:return Ts(t,"","",am,A,jo|fA|gA);case 33:return Ts(t,"","",am,A,0);case 32:return Ts(t,"","",am,A,jo|fA|gA);case 18:return Zt(t,2406,2415,!0,r);case 20:return Ro(t,1,19999,_8,3,r);case 21:return Zt(t,2790,2799,!0,r);case 22:return Zt(t,2662,2671,!0,r);case 22:return Ro(t,1,10999,I8,3,r);case 23:return yi(t,"");case 24:return yi(t,"");case 27:return Zt(t,3302,3311,!0,r);case 28:return yi(t,"",s);case 29:return yi(t,"",s);case 34:return Zt(t,3792,3801,!0,r);case 37:return Zt(t,6160,6169,!0,r);case 38:return Zt(t,4160,4169,!0,r);case 39:return Zt(t,2918,2927,!0,r);case 40:return Zt(t,1776,1785,!0,r);case 43:return Zt(t,3046,3055,!0,r);case 44:return Zt(t,3174,3183,!0,r);case 45:return Zt(t,3664,3673,!0,r);case 46:return Zt(t,3872,3881,!0,r);case 3:default:return Zt(t,48,57,!0,r)}},pQ="data-html2canvas-ignore",j_=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new C8,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,s=E8(e,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,a=o.document,c=F8(s).then(function(){return $n(r,void 0,void 0,function(){var d,h;return Mn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(k8),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,T8(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return s})]:[2,s]}})})});return a.open(),a.write(S8(document.doctype)+"<html></html>"),Q8(this.referenceElement.ownerDocument,A,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(aw(e,2))debugger;if(dQ(e))return this.createCanvasClone(e);if(R_(e))return this.createVideoClone(e);if(N_(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return dw(n)&&(dw(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),P_(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return lm(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=r,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,n,r){(!ra(n)||!x8(n)&&!n.hasAttribute(pQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!ra(n)||!N_(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if(ra(A)&&fQ(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(n,o,r)})}else this.appendChildNode(n,A,r)},t.prototype.cloneNode=function(e,n){if(cQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&ra(e)&&(uw(e)||xh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&uw(s)&&(this.clonedReferenceElement=s),Xy(s)&&P8(s);var a=this.counters.parse(new v_(this.context,A)),c=this.resolvePseudoContent(e,s,i,xc.BEFORE);P_(e)&&(n=!0),R_(e)||this.cloneChildNodes(e,s,n),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,o,xc.AFTER);return d&&s.appendChild(d),this.counters.pop(a),(A&&(this.options.copyStyles||xh(e))&&!hQ(e)||n)&&lm(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Cf(e)||If(e))&&(Cf(s)||If(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,s){var A=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new v_(this.context,r));var a=new wG(this.context,r),c=o.createElement("html2canvaspseudoelement");lm(r,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(Bt);m.length&&c.appendChild(o.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var w=h.values.filter(ja),y=w[0],T=w[1];if(y&&Bt(y)){var C=A.counters.getCounterValue(y.value),v=T&&Bt(T)?ow.parse(A.context,T.value):3;c.appendChild(o.createTextNode(hu(C,v,!1)))}}else if(h.name==="counters"){var I=h.values.filter(ja),y=I[0],S=I[1],T=I[2];if(y&&Bt(y)){var U=A.counters.getCounterValues(y.value),N=T&&Bt(T)?ow.parse(A.context,T.value):3,B=S&&S.type===0?S.value:"",x=U.map(function(R){return hu(R,N,!1)}).join(B);c.appendChild(o.createTextNode(x))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(w_(a.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(w_(a.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=hw+" "+fw;var d=s===xc.BEFORE?" "+hw:" "+fw;return xh(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),xc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(xc||(xc={}));var E8=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(pQ,"true"),t.body.appendChild(n),n},b8=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},T8=function(t){return Promise.all([].slice.call(t.images,0).map(b8))},F8=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},U8=["all","d","content"],lm=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);U8.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},S8=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},Q8=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},k8=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},R8=":before",N8=":after",hw="___html2canvas___pseudoelement_before",fw="___html2canvas___pseudoelement_after",H_=`{
    content: "" !important;
    display: none !important;
}`,P8=function(t){D8(t,"."+hw+R8+H_+`
         .`+fw+N8+H_)},D8=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},mQ=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),L8=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(um(e)||j8(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return $n(this,void 0,void 0,function(){var n,r,s,A,i=this;return Mn(this,function(o){switch(o.label){case 0:return n=mQ.isSameOrigin(e),r=!cm(e)&&this._options.useCORS===!0&&En.SUPPORT_CORS_IMAGES&&!n,s=!cm(e)&&!n&&!um(e)&&typeof this._options.proxy=="string"&&En.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!cm(e)&&!um(e)&&!s&&!r?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(H8(A)||r)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var o=En.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")A(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+s+" with status code "+a.status)},a.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}a.send()})},t}(),O8=/^data:image\/svg\+xml/i,M8=/^data:image\/.*;base64,/i,V8=/^data:image\/.*/i,j8=function(t){return En.SUPPORT_SVG_DRAWING||!K8(t)},cm=function(t){return V8.test(t)},H8=function(t){return M8.test(t)},um=function(t){return t.substr(0,4)==="blob"},K8=function(t){return t.substr(-3).toLowerCase()==="svg"||O8.test(t)},ye=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),No=function(t,e,n){return new ye(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Gd=function(){function t(e,n,r,s){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=s}return t.prototype.subdivide=function(e,n){var r=No(this.start,this.startControl,e),s=No(this.startControl,this.endControl,e),A=No(this.endControl,this.end,e),i=No(r,s,e),o=No(s,A,e),a=No(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,A,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Qr=function(t){return t.type===1},G8=function(){function t(e){var n=e.styles,r=e.bounds,s=Jl(n.borderTopLeftRadius,r.width,r.height),A=s[0],i=s[1],o=Jl(n.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],d=Jl(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],m=Jl(n.borderBottomLeftRadius,r.width,r.height),w=m[0],y=m[1],T=[];T.push((A+a)/r.width),T.push((w+h)/r.width),T.push((i+y)/r.height),T.push((c+f)/r.height);var C=Math.max.apply(Math,T);C>1&&(A/=C,i/=C,a/=C,c/=C,h/=C,f/=C,w/=C,y/=C);var v=r.width-a,I=r.height-f,S=r.width-h,U=r.height-y,N=n.borderTopWidth,B=n.borderRightWidth,x=n.borderBottomWidth,_=n.borderLeftWidth,F=_t(n.paddingTop,e.bounds.width),R=_t(n.paddingRight,e.bounds.width),L=_t(n.paddingBottom,e.bounds.width),b=_t(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?kt(r.left+_/3,r.top+N/3,A-_/3,i-N/3,wt.TOP_LEFT):new ye(r.left+_/3,r.top+N/3),this.topRightBorderDoubleOuterBox=A>0||i>0?kt(r.left+v,r.top+N/3,a-B/3,c-N/3,wt.TOP_RIGHT):new ye(r.left+r.width-B/3,r.top+N/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?kt(r.left+S,r.top+I,h-B/3,f-x/3,wt.BOTTOM_RIGHT):new ye(r.left+r.width-B/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=w>0||y>0?kt(r.left+_/3,r.top+U,w-_/3,y-x/3,wt.BOTTOM_LEFT):new ye(r.left+_/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?kt(r.left+_*2/3,r.top+N*2/3,A-_*2/3,i-N*2/3,wt.TOP_LEFT):new ye(r.left+_*2/3,r.top+N*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?kt(r.left+v,r.top+N*2/3,a-B*2/3,c-N*2/3,wt.TOP_RIGHT):new ye(r.left+r.width-B*2/3,r.top+N*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?kt(r.left+S,r.top+I,h-B*2/3,f-x*2/3,wt.BOTTOM_RIGHT):new ye(r.left+r.width-B*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=w>0||y>0?kt(r.left+_*2/3,r.top+U,w-_*2/3,y-x*2/3,wt.BOTTOM_LEFT):new ye(r.left+_*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=A>0||i>0?kt(r.left+_/2,r.top+N/2,A-_/2,i-N/2,wt.TOP_LEFT):new ye(r.left+_/2,r.top+N/2),this.topRightBorderStroke=A>0||i>0?kt(r.left+v,r.top+N/2,a-B/2,c-N/2,wt.TOP_RIGHT):new ye(r.left+r.width-B/2,r.top+N/2),this.bottomRightBorderStroke=h>0||f>0?kt(r.left+S,r.top+I,h-B/2,f-x/2,wt.BOTTOM_RIGHT):new ye(r.left+r.width-B/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=w>0||y>0?kt(r.left+_/2,r.top+U,w-_/2,y-x/2,wt.BOTTOM_LEFT):new ye(r.left+_/2,r.top+r.height-x/2),this.topLeftBorderBox=A>0||i>0?kt(r.left,r.top,A,i,wt.TOP_LEFT):new ye(r.left,r.top),this.topRightBorderBox=a>0||c>0?kt(r.left+v,r.top,a,c,wt.TOP_RIGHT):new ye(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?kt(r.left+S,r.top+I,h,f,wt.BOTTOM_RIGHT):new ye(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=w>0||y>0?kt(r.left,r.top+U,w,y,wt.BOTTOM_LEFT):new ye(r.left,r.top+r.height),this.topLeftPaddingBox=A>0||i>0?kt(r.left+_,r.top+N,Math.max(0,A-_),Math.max(0,i-N),wt.TOP_LEFT):new ye(r.left+_,r.top+N),this.topRightPaddingBox=a>0||c>0?kt(r.left+Math.min(v,r.width-B),r.top+N,v>r.width+B?0:Math.max(0,a-B),Math.max(0,c-N),wt.TOP_RIGHT):new ye(r.left+r.width-B,r.top+N),this.bottomRightPaddingBox=h>0||f>0?kt(r.left+Math.min(S,r.width-_),r.top+Math.min(I,r.height-x),Math.max(0,h-B),Math.max(0,f-x),wt.BOTTOM_RIGHT):new ye(r.left+r.width-B,r.top+r.height-x),this.bottomLeftPaddingBox=w>0||y>0?kt(r.left+_,r.top+Math.min(U,r.height-x),Math.max(0,w-_),Math.max(0,y-x),wt.BOTTOM_LEFT):new ye(r.left+_,r.top+r.height-x),this.topLeftContentBox=A>0||i>0?kt(r.left+_+b,r.top+N+F,Math.max(0,A-(_+b)),Math.max(0,i-(N+F)),wt.TOP_LEFT):new ye(r.left+_+b,r.top+N+F),this.topRightContentBox=a>0||c>0?kt(r.left+Math.min(v,r.width+_+b),r.top+N+F,v>r.width+_+b?0:a-_+b,c-(N+F),wt.TOP_RIGHT):new ye(r.left+r.width-(B+R),r.top+N+F),this.bottomRightContentBox=h>0||f>0?kt(r.left+Math.min(S,r.width-(_+b)),r.top+Math.min(I,r.height+N+F),Math.max(0,h-(B+R)),f-(x+L),wt.BOTTOM_RIGHT):new ye(r.left+r.width-(B+R),r.top+r.height-(x+L)),this.bottomLeftContentBox=w>0||y>0?kt(r.left+_+b,r.top+U,Math.max(0,w-(_+b)),y-(x+L),wt.BOTTOM_LEFT):new ye(r.left+_+b,r.top+r.height-(x+L))}return t}(),wt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(wt||(wt={}));var kt=function(t,e,n,r,s){var A=4*((Math.sqrt(2)-1)/3),i=n*A,o=r*A,a=t+n,c=e+r;switch(s){case wt.TOP_LEFT:return new Gd(new ye(t,c),new ye(t,c-o),new ye(a-i,e),new ye(a,e));case wt.TOP_RIGHT:return new Gd(new ye(t,e),new ye(t+i,e),new ye(a,c-o),new ye(a,c));case wt.BOTTOM_RIGHT:return new Gd(new ye(a,e),new ye(a,e+o),new ye(t+i,c),new ye(t,c));case wt.BOTTOM_LEFT:default:return new Gd(new ye(a,c),new ye(a-i,c),new ye(t,e+o),new ye(t,e))}},_f=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},z8=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Ef=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},$8=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),zd=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),W8=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),q8=function(t){return t.type===0},wQ=function(t){return t.type===1},J8=function(t){return t.type===2},K_=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},X8=function(t,e,n,r,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,n);case 1:return A.add(e+r,n);case 2:return A.add(e+r,n+s);case 3:return A.add(e,n+s)}return A})},vQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),yQ=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new G8(this.container),this.container.styles.opacity<1&&this.effects.push(new W8(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new $8(r,s,A))}if(this.container.styles.overflowX!==0){var i=_f(this.curves),o=Ef(this.curves);K_(i,o)?this.effects.push(new zd(i,6)):(this.effects.push(new zd(i,2)),this.effects.push(new zd(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var A=r.effects.filter(function(a){return!wQ(a)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,A),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=_f(r.curves),o=Ef(r.curves);K_(i,o)||s.unshift(new zd(o,6))}}else s.unshift.apply(s,A);r=r.parent}return s.filter(function(a){return hn(a.target,e)})},t}(),gw=function(t,e,n,r){t.container.elements.forEach(function(s){var A=hn(s.flags,4),i=hn(s.flags,2),o=new yQ(s,t);hn(s.styles.display,2048)&&r.push(o);var a=hn(s.flags,8)?[]:r;if(A||i){var c=A||s.styles.isPositioned()?n:e,d=new vQ(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(w,y){return h>w.element.container.styles.zIndex.order?(f=y,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(w,y){return h>=w.element.container.styles.zIndex.order?(m=y+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);gw(o,d,A?d:n,a)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),gw(o,e,n,a);hn(s.flags,8)&&BQ(s,a)})},BQ=function(t,e){for(var n=t instanceof cw?t.start:1,r=t instanceof cw?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof sQ&&typeof A.container.value=="number"&&A.container.value!==0&&(n=A.container.value),A.listValue=hu(n,A.container.styles.listStyleType,!0),n+=r?-1:1}},Y8=function(t){var e=new yQ(t,null),n=new vQ(e),r=[];return gw(e,n,n,r),BQ(e.container,r),n},G_=function(t,e){switch(e){case 0:return Pr(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Pr(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Pr(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Pr(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Z8=function(t,e){switch(e){case 0:return Pr(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Pr(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Pr(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Pr(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},e9=function(t,e){switch(e){case 0:return Pr(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Pr(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Pr(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Pr(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},t9=function(t,e){switch(e){case 0:return $d(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return $d(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return $d(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return $d(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},$d=function(t,e){var n=[];return Qr(t)?n.push(t.subdivide(.5,!1)):n.push(t),Qr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Pr=function(t,e,n,r){var s=[];return Qr(t)?s.push(t.subdivide(.5,!1)):s.push(t),Qr(n)?s.push(n.subdivide(.5,!0)):s.push(n),Qr(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Qr(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},xQ=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},bf=function(t){var e=t.styles,n=t.bounds,r=_t(e.paddingLeft,n.width),s=_t(e.paddingRight,n.width),A=_t(e.paddingTop,n.width),i=_t(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},n9=function(t,e){return t===0?e.bounds:t===2?bf(e):xQ(e)},r9=function(t,e){return t===0?e.bounds:t===2?bf(e):xQ(e)},dm=function(t,e,n){var r=n9(Ho(t.styles.backgroundOrigin,e),t),s=r9(Ho(t.styles.backgroundClip,e),t),A=s9(Ho(t.styles.backgroundSize,e),n,r),i=A[0],o=A[1],a=Jl(Ho(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=A9(Ho(t.styles.backgroundRepeat,e),a,A,r,s),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,d,h,i,o]},Po=function(t){return Bt(t)&&t.value===pa.AUTO},Wd=function(t){return typeof t=="number"},s9=function(t,e,n){var r=e[0],s=e[1],A=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(ln(i)&&o&&ln(o))return[_t(i,n.width),_t(o,n.height)];var a=Wd(A);if(Bt(i)&&(i.value===pa.CONTAIN||i.value===pa.COVER)){if(Wd(A)){var c=n.width/n.height;return c<A!=(i.value===pa.COVER)?[n.width,n.width/A]:[n.height*A,n.height]}return[n.width,n.height]}var d=Wd(r),h=Wd(s),f=d||h;if(Po(i)&&(!o||Po(o))){if(d&&h)return[r,s];if(!a&&!f)return[n.width,n.height];if(f&&a){var m=d?r:s*A,w=h?s:r/A;return[m,w]}var y=d?r:n.width,T=h?s:n.height;return[y,T]}if(a){var C=0,v=0;return ln(i)?C=_t(i,n.width):ln(o)&&(v=_t(o,n.height)),Po(i)?C=v*A:(!o||Po(o))&&(v=C/A),[C,v]}var I=null,S=null;if(ln(i)?I=_t(i,n.width):o&&ln(o)&&(S=_t(o,n.height)),I!==null&&(!o||Po(o))&&(S=d&&h?I/r*s:n.height),S!==null&&Po(i)&&(I=d&&h?S/s*r:n.width),I!==null&&S!==null)return[I,S];throw new Error("Unable to calculate background-size for element")},Ho=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},A9=function(t,e,n,r,s){var A=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new ye(Math.round(r.left),Math.round(r.top+i)),new ye(Math.round(r.left+r.width),Math.round(r.top+i)),new ye(Math.round(r.left+r.width),Math.round(a+r.top+i)),new ye(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new ye(Math.round(r.left+A),Math.round(r.top)),new ye(Math.round(r.left+A+o),Math.round(r.top)),new ye(Math.round(r.left+A+o),Math.round(r.height+r.top)),new ye(Math.round(r.left+A),Math.round(r.height+r.top))];case 1:return[new ye(Math.round(r.left+A),Math.round(r.top+i)),new ye(Math.round(r.left+A+o),Math.round(r.top+i)),new ye(Math.round(r.left+A+o),Math.round(r.top+i+a)),new ye(Math.round(r.left+A),Math.round(r.top+i+a))];default:return[new ye(Math.round(s.left),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.top)),new ye(Math.round(s.left+s.width),Math.round(s.height+s.top)),new ye(Math.round(s.left),Math.round(s.height+s.top))]}},i9="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",z_="Hidden Text",o9=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),s.src=i9,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=n,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(z_)),r.appendChild(A),r.appendChild(s);var o=s.offsetTop-A.offsetTop+2;r.removeChild(A),r.appendChild(this._document.createTextNode(z_)),r.style.lineHeight="normal",s.style.verticalAlign="super";var a=s.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),CQ=function(){function t(e,n){this.context=e,this.options=n}return t}(),a9=1e4,l9=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new o9(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},e.prototype.applyEffect=function(n){this.ctx.save(),J8(n)&&(this.ctx.globalAlpha=n.opacity),q8(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),wQ(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return $n(this,void 0,void 0,function(){var r;return Mn(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return $n(this,void 0,void 0,function(){return Mn(this,function(r){switch(r.label){case 0:if(hn(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,s){var A=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var i=qy(n.text);i.reduce(function(o,a){return A.ctx.fillText(a,o,n.bounds.top+s),o+A.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=f9(n.fontFamily).join(", "),A=Vu(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(n,r){return $n(this,void 0,void 0,function(){var s,A,i,o,a,c,d,h,f=this;return Mn(this,function(m){return s=this.createFontStyle(r),A=s[0],i=s[1],o=s[2],this.ctx.font=A,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(w){h.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=wn(r.color),f.renderTextWithLetterSpacing(w,r.letterSpacing,c);var T=r.textShadow;T.length&&w.text.trim().length&&(T.slice(0).reverse().forEach(function(C){f.ctx.shadowColor=wn(C.color),f.ctx.shadowOffsetX=C.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=C.offsetY.number*f.options.scale,f.ctx.shadowBlur=C.blur.number,f.renderTextWithLetterSpacing(w,r.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=wn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(C){switch(C){case 1:f.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top+c),w.bounds.width,1);break;case 2:f.ctx.fillRect(w.bounds.left,Math.round(w.bounds.top),w.bounds.width,1);break;case 3:f.ctx.fillRect(w.bounds.left,Math.ceil(w.bounds.top+d),w.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&w.text.trim().length&&(f.ctx.strokeStyle=wn(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(w.text,w.bounds.left,w.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var A=bf(n),i=Ef(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return $n(this,void 0,void 0,function(){var r,s,A,i,o,a,v,v,c,d,h,f,S,m,w,U,y,T,C,v,I,S,U;return Mn(this,function(N){switch(N.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,A=r.styles,i=0,o=r.textNodes,N.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,A)]):[3,4];case 2:N.sent(),N.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof tQ))return[3,8];N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return v=N.sent(),this.renderReplacedElement(r,s,v),[3,8];case 7:return N.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof nQ&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof rQ))return[3,12];N.label=9;case 9:return N.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return v=N.sent(),this.renderReplacedElement(r,s,v),[3,12];case 11:return N.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof oQ&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=N.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),N.label=14;case 14:if(r instanceof Jy&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===Bf?r.checked&&(this.ctx.save(),this.path([new ye(r.bounds.left+h*.39363,r.bounds.top+h*.79),new ye(r.bounds.left+h*.16,r.bounds.top+h*.5549),new ye(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new ye(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new ye(r.bounds.left+h*.72983,r.bounds.top+h*.23),new ye(r.bounds.left+h*.84,r.bounds.top+h*.34085),new ye(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=wn(k_),this.ctx.fill(),this.ctx.restore()):r.type===xf&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=wn(k_),this.ctx.fill(),this.ctx.restore())),c9(r)&&r.value.length){switch(f=this.createFontStyle(A),S=f[0],m=f[1],w=this.fontMetrics.getMetrics(S,m).baseline,this.ctx.font=S,this.ctx.fillStyle=wn(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=d9(r.styles.textAlign),U=bf(r),y=0,r.styles.textAlign){case 1:y+=U.width/2;break;case 2:y+=U.width;break}T=U.add(y,0,0,-U.height/2+1),this.ctx.save(),this.path([new ye(U.left,U.top),new ye(U.left+U.width,U.top),new ye(U.left+U.width,U.top+U.height),new ye(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Bc(r.value,T),A.letterSpacing,w),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!hn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(C=r.styles.listStyleImage,C.type!==0)return[3,18];v=void 0,I=C.url,N.label=15;case 15:return N.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return v=N.sent(),this.ctx.drawImage(v,r.bounds.left-(v.width+10),r.bounds.top),[3,18];case 17:return N.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(S=this.createFontStyle(A)[0],this.ctx.font=S,this.ctx.fillStyle=wn(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new qs(r.bounds.left,r.bounds.top+_t(r.styles.paddingTop,r.bounds.width),r.bounds.width,p_(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Bc(n.listValue,U),A.letterSpacing,p_(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),N.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return $n(this,void 0,void 0,function(){var r,s,C,A,i,C,o,a,C,c,d,C,h,f,C,m,w,C,y,T,C;return Mn(this,function(v){switch(v.label){case 0:if(hn(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:v.sent(),r=0,s=n.negativeZIndex,v.label=2;case 2:return r<s.length?(C=s[r],[4,this.renderStack(C)]):[3,5];case 3:v.sent(),v.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:v.sent(),A=0,i=n.nonInlineLevel,v.label=7;case 7:return A<i.length?(C=i[A],[4,this.renderNode(C)]):[3,10];case 8:v.sent(),v.label=9;case 9:return A++,[3,7];case 10:o=0,a=n.nonPositionedFloats,v.label=11;case 11:return o<a.length?(C=a[o],[4,this.renderStack(C)]):[3,14];case 12:v.sent(),v.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,v.label=15;case 15:return c<d.length?(C=d[c],[4,this.renderStack(C)]):[3,18];case 16:v.sent(),v.label=17;case 17:return c++,[3,15];case 18:h=0,f=n.inlineLevel,v.label=19;case 19:return h<f.length?(C=f[h],[4,this.renderNode(C)]):[3,22];case 20:v.sent(),v.label=21;case 21:return h++,[3,19];case 22:m=0,w=n.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return m<w.length?(C=w[m],[4,this.renderStack(C)]):[3,26];case 24:v.sent(),v.label=25;case 25:return m++,[3,23];case 26:y=0,T=n.positiveZIndex,v.label=27;case 27:return y<T.length?(C=T[y],[4,this.renderStack(C)]):[3,30];case 28:v.sent(),v.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(s,A){var i=Qr(s)?s.start:s;A===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),Qr(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(n,r,s,A){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(n,r,s){var A;if(n.width===r&&n.height===s)return n;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,s);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,s),o},e.prototype.renderBackgroundImage=function(n){return $n(this,void 0,void 0,function(){var r,s,A,i,o,a;return Mn(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,s=function(d){var h,f,m,F,et,Le,b,Oe,x,w,F,et,Le,b,Oe,y,T,C,v,I,S,U,N,B,x,_,F,R,L,b,Oe,Ve,et,Le,te,Q,V,z,Z,ne,Re,Ce;return Mn(this,function(He){switch(He.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,He.label=1;case 1:return He.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=He.sent(),[3,4];case 3:return He.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=dm(n,r,[h.width,h.height,h.width/h.height]),F=m[0],et=m[1],Le=m[2],b=m[3],Oe=m[4],x=A.ctx.createPattern(A.resizeImage(h,b,Oe),"repeat"),A.renderRepeat(F,x,et,Le)),[3,6];case 5:q5(d)?(w=dm(n,r,[null,null,null]),F=w[0],et=w[1],Le=w[2],b=w[3],Oe=w[4],y=K5(d.angle,b,Oe),T=y[0],C=y[1],v=y[2],I=y[3],S=y[4],U=document.createElement("canvas"),U.width=b,U.height=Oe,N=U.getContext("2d"),B=N.createLinearGradient(C,I,v,S),f_(d.stops,T).forEach(function(xe){return B.addColorStop(xe.stop,wn(xe.color))}),N.fillStyle=B,N.fillRect(0,0,b,Oe),b>0&&Oe>0&&(x=A.ctx.createPattern(U,"repeat"),A.renderRepeat(F,x,et,Le))):J5(d)&&(_=dm(n,r,[null,null,null]),F=_[0],R=_[1],L=_[2],b=_[3],Oe=_[4],Ve=d.position.length===0?[zy]:d.position,et=_t(Ve[0],b),Le=_t(Ve[Ve.length-1],Oe),te=G5(d,et,Le,b,Oe),Q=te[0],V=te[1],Q>0&&V>0&&(z=A.ctx.createRadialGradient(R+et,L+Le,0,R+et,L+Le,Q),f_(d.stops,Q*2).forEach(function(xe){return z.addColorStop(xe.stop,wn(xe.color))}),A.path(F),A.ctx.fillStyle=z,Q!==V?(Z=n.bounds.left+.5*n.bounds.width,ne=n.bounds.top+.5*n.bounds.height,Re=V/Q,Ce=1/Re,A.ctx.save(),A.ctx.translate(Z,ne),A.ctx.transform(1,0,0,Re,0,0),A.ctx.translate(-Z,-ne),A.ctx.fillRect(R,Ce*(L-ne)+ne,b,Oe*Ce),A.ctx.restore()):A.ctx.fill())),He.label=6;case 6:return r--,[2]}})},A=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,s(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,s){return $n(this,void 0,void 0,function(){return Mn(this,function(A){return this.path(G_(s,r)),this.ctx.fillStyle=wn(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,s,A){return $n(this,void 0,void 0,function(){var i,o;return Mn(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,A)]:[3,2];case 1:return a.sent(),[2];case 2:return i=Z8(A,s),this.path(i),this.ctx.fillStyle=wn(n),this.ctx.fill(),o=e9(A,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return $n(this,void 0,void 0,function(){var r,s,A,i,o,a,c,d,h=this;return Mn(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!KA(r.backgroundColor)||r.backgroundImage.length,A=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=u9(Ho(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),KA(r.backgroundColor)||(this.ctx.fillStyle=wn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var w=_f(n.curves),y=m.inset?0:a9,T=X8(w,-y+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(w),h.ctx.clip(),h.mask(T)):(h.mask(w),h.ctx.clip(),h.path(T)),h.ctx.shadowOffsetX=m.offsetX.number+y,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=wn(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?wn(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,c=A,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!KA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,s,A,i){return $n(this,void 0,void 0,function(){var o,a,c,d,h,f,m,w,y,T,C,v,I,S,U,N,U,N;return Mn(this,function(B){return this.ctx.save(),o=t9(A,s),a=G_(A,s),i===2&&(this.path(a),this.ctx.clip()),Qr(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),Qr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),s===0||s===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),w=r<3?r*3:r*2,y=r<3?r*2:r,i===3&&(w=r,y=r),T=!0,m<=w*2?T=!1:m<=w*2+y?(C=m/(2*w+y),w*=C,y*=C):(v=Math.floor((m+y)/(w+y)),I=(m-v*w)/(v-1),S=(m-(v+1)*w)/v,y=S<=0||Math.abs(y-I)<Math.abs(y-S)?I:S),T&&(i===3?this.ctx.setLineDash([0,w+y]):this.ctx.setLineDash([w,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=wn(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Qr(a[0])&&(U=a[3],N=a[0],this.ctx.beginPath(),this.formatPath([new ye(U.end.x,U.end.y),new ye(N.start.x,N.start.y)]),this.ctx.stroke()),Qr(a[1])&&(U=a[1],N=a[2],this.ctx.beginPath(),this.formatPath([new ye(U.end.x,U.end.y),new ye(N.start.x,N.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return $n(this,void 0,void 0,function(){var r;return Mn(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=wn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Y8(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(CQ),c9=function(t){return t instanceof iQ||t instanceof AQ?!0:t instanceof Jy&&t.type!==xf&&t.type!==Bf},u9=function(t,e){switch(t){case 0:return _f(e);case 2:return z8(e);case 1:default:return Ef(e)}},d9=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},h9=["-apple-system","system-ui"],f9=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return h9.indexOf(e)===-1}):t},g9=function(t){es(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return e.prototype.render=function(n){return $n(this,void 0,void 0,function(){var r,s;return Mn(this,function(A){switch(A.label){case 0:return r=lw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,p9(r)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=wn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(CQ),p9=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},m9=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ed([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ed([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),w9=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new m9({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new L8(this,e)}return t.instanceCount=1,t}(),$_=function(t,e){return e===void 0&&(e={}),v9(t,e)};typeof window<"u"&&mQ.setContext(window);var v9=function(t,e){return $n(void 0,void 0,void 0,function(){var n,r,s,A,i,o,a,c,d,h,f,m,w,y,T,C,v,I,S,U,B,N,B,x,_,F,R,L,b,Oe,Ve,et,Le,te,Q,V,z,Z,ne,Re;return Mn(this,function(Ce){switch(Ce.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(x=e.allowTaint)!==null&&x!==void 0?x:!1,imageTimeout:(_=e.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:e.proxy,useCORS:(F=e.useCORS)!==null&&F!==void 0?F:!1},A=W0({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(b=e.windowHeight)!==null&&b!==void 0?b:r.innerHeight,scrollX:(Oe=e.scrollX)!==null&&Oe!==void 0?Oe:r.pageXOffset,scrollY:(Ve=e.scrollY)!==null&&Ve!==void 0?Ve:r.pageYOffset},o=new qs(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new w9(A,o),c=(et=e.foreignObjectRendering)!==null&&et!==void 0?et:!1,d={allowTaint:(Le=e.allowTaint)!==null&&Le!==void 0?Le:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new j_(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=Ce.sent(),w=Xy(f)||B8(f)?XK(f.ownerDocument):Sg(a,f),y=w.width,T=w.height,C=w.left,v=w.top,I=y9(a,f,e.backgroundColor),S={canvas:e.canvas,backgroundColor:I,scale:(Q=(te=e.scale)!==null&&te!==void 0?te:r.devicePixelRatio)!==null&&Q!==void 0?Q:1,x:((V=e.x)!==null&&V!==void 0?V:0)+C,y:((z=e.y)!==null&&z!==void 0?z:0)+v,width:(Z=e.width)!==null&&Z!==void 0?Z:Math.ceil(y),height:(ne=e.height)!==null&&ne!==void 0?ne:Math.ceil(T)},c?(a.logger.debug("Document cloned, using foreign object rendering"),B=new g9(a,S),[4,B.render(f)]):[3,3];case 2:return U=Ce.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+C+","+v+" with size "+y+"x"+T+" using computed rendering"),a.logger.debug("Starting DOM parsing"),N=lQ(a,f),I===N.styles.backgroundColor&&(N.styles.backgroundColor=Ms.TRANSPARENT),a.logger.debug("Starting renderer for element at "+S.x+","+S.y+" with size "+S.width+"x"+S.height),B=new l9(a,S),[4,B.render(N)];case 4:U=Ce.sent(),Ce.label=5;case 5:return(!((Re=e.removeContainer)!==null&&Re!==void 0)||Re)&&(j_.destroy(m)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,U]}})})},y9=function(t,e,n){var r=e.ownerDocument,s=r.documentElement?vc(t,getComputedStyle(r.documentElement).backgroundColor):Ms.TRANSPARENT,A=r.body?vc(t,getComputedStyle(r.body).backgroundColor):Ms.TRANSPARENT,i=typeof n=="string"?vc(t,n):n===null?Ms.TRANSPARENT:4294967295;return e===r.documentElement?KA(s)?KA(A)?i:A:s:i},B9=Object.defineProperty,Tf=Object.getOwnPropertySymbols,IQ=Object.prototype.hasOwnProperty,_Q=Object.prototype.propertyIsEnumerable,W_=(t,e,n)=>e in t?B9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x9=(t,e)=>{for(var n in e||(e={}))IQ.call(e,n)&&W_(t,n,e[n]);if(Tf)for(var n of Tf(e))_Q.call(e,n)&&W_(t,n,e[n]);return t},C9=(t,e)=>{var n={};for(var r in t)IQ.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Tf)for(var r of Tf(t))e.indexOf(r)<0&&_Q.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var co;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let w=0;w<this.size;w++)f.push(!1);for(let w=0;w<this.size;w++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let w=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const T=this.getPenaltyScore();T<w&&(h=y,w=T),this.applyMask(y)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let w,y;for(w=d;;w++){const I=e.getNumDataCodewords(w,c)*8,S=o.getTotalBits(a,w);if(S<=I){y=S;break}if(w>=h)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&y<=e.getNumDataCodewords(w,I)*8&&(c=I);let T=[];for(const I of a){r(I.mode.modeBits,4,T),r(I.numChars,I.mode.numCharCountBits(w),T);for(const S of I.getData())T.push(S)}A(T.length==y);const C=e.getNumDataCodewords(w,c)*8;A(T.length<=C),r(0,Math.min(4,C-T.length),T),r(0,(8-T.length%8)%8,T),A(T.length%8==0);for(let I=236;T.length<C;I^=253)r(I,8,T);let v=[];for(;v.length*8<T.length;)v.push(0);return T.forEach((I,S)=>v[S>>>3]|=I<<7-(S&7)),new e(w,c,v,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=a+h,w=c+d;0<=m&&m<this.size&&0<=w&&w<this.size&&this.setFunctionModule(m,w,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),w=h-m%h,y=Math.floor(m/h);let T=[];const C=e.reedSolomonComputeDivisor(f);for(let I=0,S=0;I<h;I++){let U=a.slice(S,S+y-f+(I<w?0:1));S+=U.length;const N=e.reedSolomonComputeRemainder(U,C);I<w&&U.push(0),T.push(U.concat(N))}let v=[];for(let I=0;I<T[0].length;I++)T.forEach((S,U)=>{(I!=y-f||U>=w)&&v.push(S[I])});return A(v.length==m),v}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,y=(d+1&2)==0?this.size-1-h:h;!this.isFunction[y][m]&&c<a.length*8&&(this.modules[y][m]=s(a[c>>>3],7-(c&7)),c++)}}A(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let m=!1,w=0,y=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[f][T]==m?(w++,w==5?a+=e.PENALTY_N1:w>5&&a++):(this.finderPenaltyAddHistory(w,y),m||(a+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[f][T],w=1);a+=this.finderPenaltyTerminateAndCount(m,w,y)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,w=0,y=[0,0,0,0,0,0,0];for(let T=0;T<this.size;T++)this.modules[T][f]==m?(w++,w==5?a+=e.PENALTY_N1:w>5&&a++):(this.finderPenaltyAddHistory(w,y),m||(a+=this.finderPenaltyCountPatterns(y)*e.PENALTY_N3),m=this.modules[T][f],w=1);a+=this.finderPenaltyTerminateAndCount(m,w,y)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const w=this.modules[f][m];w==this.modules[f][m+1]&&w==this.modules[f+1][m]&&w==this.modules[f+1][m+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,w)=>m+(w?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),a+=h*e.PENALTY_N4,A(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((m,w)=>d[w]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return A(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];A(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function s(a,c){return(a>>>c&1)!=0}function A(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)r(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,c)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,c);else if(a<16384)r(2,2,c),r(a,14,c);else if(a<1e6)r(6,3,c),r(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(co||(co={}));(t=>{(e=>{const n=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(co||(co={}));(t=>{(e=>{const n=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(co||(co={}));var Zl=co;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var I9={L:Zl.QrCode.Ecc.LOW,M:Zl.QrCode.Ecc.MEDIUM,Q:Zl.QrCode.Ecc.QUARTILE,H:Zl.QrCode.Ecc.HIGH},_9=128,E9="L",b9="#FFFFFF",T9="#000000",F9=!1,EQ=4,U9=.1;function S9(t,e=0){const n=[];return t.forEach(function(r,s){let A=null;r.forEach(function(i,o){if(!i&&A!==null){n.push(`M${A+e} ${s+e}h${o-A}v1H${A+e}z`),A=null;return}if(o===r.length-1){if(!i)return;A===null?n.push(`M${o+e},${s+e} h1v1H${o+e}z`):n.push(`M${A+e},${s+e} h${o+1-A}v1H${A+e}z`);return}i&&A===null&&(A=o)})}),n.join("")}function Q9(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function k9(t,e,n,r){if(r==null)return null;const s=n?EQ:0,A=t.length+s*2,i=Math.floor(e*U9),o=A/e,a=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let m=Math.floor(d),w=Math.floor(h),y=Math.ceil(a+d-m),T=Math.ceil(c+h-w);f={x:m,y:w,w:y,h:T}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function R9(t){const e=t,{value:n,size:r=_9,level:s=E9,bgColor:A=b9,fgColor:i=T9,includeMargin:o=F9,imageSettings:a}=e,c=C9(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Zl.QrCode.encodeText(n,I9[s]).getModules();const h=o?EQ:0,f=d.length+h*2,m=k9(d,r,o,a);let w=null;a!=null&&m!=null&&(m.excavation!=null&&(d=Q9(d,m.excavation)),w=Qi.createElement("image",{xlinkHref:a.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const y=S9(d,h);return Qi.createElement("svg",x9({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),Qi.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Qi.createElement("path",{fill:i,d:y,shapeRendering:"crispEdges"}),w)}const N9=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,saveStaticData:i}=sA(),{schedule1:o,schedule2:a,substitutions:c,saveScheduleData:d}=il(),h=k.useRef(null),f=k.useRef(null),m=k.useRef(null),[w,y]=k.useState(new Date().toISOString().split("T")[0]),[T,C]=k.useState(()=>{const ge=new Date().getMonth();return ge>=0&&ge<=4?2:1}),[v,I]=k.useState(!1),[S,U]=k.useState(!1),[N,B]=k.useState(""),[x,_]=k.useState(""),F=k.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:s,bellSchedule:A,schedule:o,schedule2ndHalf:a,substitutions:c}),[t,e,n,r,s,A,o,a,c]),R=()=>T===2?a:o,L=ge=>{const Ae=new Date(ge).getMonth();return Ae>=0&&Ae<=4?a:o},b=ge=>{var X;const Ae=(X=ge.target.files)==null?void 0:X[0];if(!Ae)return;const Qe=new FileReader;Qe.onload=async ce=>{try{const re=JSON.parse(ce.target.result);if(re.teachers&&(re.schedule||re.schedule2ndHalf)){if(window.confirm("    . ?")){const me={...an,...re,rooms:re.rooms||an.rooms,classes:re.classes||[],schedule:re.schedule||[],schedule2ndHalf:re.schedule2ndHalf||[],teachers:re.teachers||[],subjects:re.subjects||[],substitutions:re.substitutions||[],settings:{...an.settings,...re.settings}};await i(me),await d(me),alert("  !")}}else alert("  .")}catch{alert("  .")}},Qe.readAsText(Ae)},Oe=()=>{const ge=R();let Ae=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Vn.forEach(re=>{Ae+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${re}</td></tr>`,[ue.First,ue.Second].forEach(me=>{const ve=n.filter(Te=>Te.shift===me);ve.length!==0&&(Ae+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${me}</td></tr>`,Ae+='<tr><th class="header"></th>',cs[me].forEach(Te=>Ae+=`<th class="header">${Te} </th>`),Ae+="</tr>",ve.forEach(Te=>{Ae+=`<tr><td class="class-cell">${Te.name}</td>`,cs[me].forEach(tt=>{const Ye=ge.filter(Ke=>Ke.classId===Te.id&&Ke.day===re&&Ke.shift===me&&Ke.period===tt);Ae+='<td style="height: 60px;">',Ye.forEach(Ke=>{const Ze=t.find(ze=>ze.id===Ke.subjectId),Ue=e.find(ze=>ze.id===Ke.teacherId),Ne=r.find(ze=>ze.id===Ke.roomId),We=Ne?Ne.name:Ke.roomId;Ae+=`<div style="background-color: ${(Ze==null?void 0:Ze.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(Ze==null?void 0:Ze.name)||""} ${Ke.direction||""}</div>
                                <div class="meta">${(Ue==null?void 0:Ue.name)||""} ${We?`(. ${We})`:""}</div>
                            </div>`}),Ae+="</td>"}),Ae+="</tr>"}))})}),Ae+="</table></body></html>";const Qe=new Blob([Ae],{type:"application/vnd.ms-excel"}),X=URL.createObjectURL(Qe),ce=document.createElement("a");ce.href=X,ce.download=`_22_${T}.xls`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},Ve=()=>{const ge=R();let Ae=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12px; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 9px; vertical-align: sub; }
            </style></head><body>
        `;[ue.First,ue.Second].forEach(re=>{const me=cs[re];Ae+="<table>",Ae+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${Vn.length*me.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,Ae+="<tr>",Vn.forEach(ve=>{Ae+=`<th colspan="${me.length}" class="header" style="border: 2px solid #000;">${ve}</th>`}),Ae+="</tr>",Ae+="<tr>",Vn.forEach(()=>{me.forEach(ve=>Ae+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),Ae+="</tr>",Ae+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${re}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,Vn.forEach(()=>{me.forEach(ve=>Ae+=`<th class="header" style="width: 40px;">${ve}</th>`)}),Ae+="</tr>",t.forEach(ve=>{const Te=e.filter(Ye=>Ye.subjectIds.includes(ve.id));if(Te.length===0)return;const tt=ve.color||"#ffffff";Te.forEach((Ye,Ke)=>{Ae+="<tr>",Ke===0&&(Ae+=`<td rowspan="${Te.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${tt};">${ve.name}</td>`),Ae+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${Ye.name}</td>`,Vn.forEach(Ze=>{me.forEach(Ue=>{const Ne=ge.find(We=>We.teacherId===Ye.id&&We.subjectId===ve.id&&We.day===Ze&&We.period===Ue&&We.shift===re);if(Ne){const We=n.find(Rn=>Rn.id===Ne.classId),ze=r.find(Rn=>Rn.id===Ne.roomId),dt=ze?ze.name:Ne.roomId,qe=dt?`<sub>${dt}</sub>`:"",je=Ne.direction?` <span style="font-size:9px">(${Ne.direction})</span>`:"",Xe=ve.color||"#ffffff";Ae+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${Xe};">${We?We.name:""}${je}${qe}</td>`}else Ae+='<td style="border: 1px solid #000;"></td>'})}),Ae+="</tr>"}),Ae+=`<tr><td colspan="${2+Vn.length*me.length}" style="height: 2px; background-color: #000;"></td></tr>`}),Ae+="</table><br/><br/>"}),Ae+="</body></html>";const Qe=new Blob([Ae],{type:"application/vnd.ms-excel"}),X=URL.createObjectURL(Qe),ce=document.createElement("a");ce.href=X,ce.download=`__${T}.xls`,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},et=()=>{const ge=new Date(w),Ae=ge.getMonth(),Qe=ge.getFullYear(),X=c.filter(Ue=>{const Ne=new Date(Ue.date);return Ne.getMonth()===Ae&&Ne.getFullYear()===Qe}).sort((Ue,Ne)=>new Date(Ue.date).getTime()-new Date(Ne.date).getTime());if(X.length===0){alert("      .");return}const ce=[],re=[],me=Ue=>{var je;const Ne=o.find(Xe=>Xe.id===Ue.scheduleItemId)||a.find(Xe=>Xe.id===Ue.scheduleItemId);if(!Ne)return null;const We=n.find(Xe=>Xe.id===Ne.classId),ze=t.find(Xe=>Xe.id===Ne.subjectId),dt=e.find(Xe=>Xe.id===Ue.originalTeacherId);let qe=Ue.lessonAbsenceReason||((je=dt==null?void 0:dt.absenceReasons)==null?void 0:je[Ue.date])||"";return Ue.replacementTeacherId===Ue.originalTeacherId&&Ue.replacementRoomId&&!Ue.replacementClassId&&(qe=" "),Ue.replacementClassId&&Ue.replacementSubjectId&&(qe=" "),{scheduleItem:Ne,cls:We,subj:ze,origTeacher:dt,reason:qe}};X.forEach(Ue=>{const Ne=me(Ue);Ne&&(Ne.reason===" "?re.push({sub:Ue,...Ne}):ce.push({sub:Ue,...Ne}))});let ve=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${ge.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const Te=Ue=>Ue.map(Ne=>{const{sub:We,scheduleItem:ze,cls:dt,subj:qe,origTeacher:je,reason:Xe}=Ne,Rn=new Date(We.date).toLocaleDateString("ru-RU");let zn="";if(We.replacementTeacherId==="conducted")zn=" ";else if(We.replacementTeacherId==="cancelled")zn=" ";else{const be=e.find(we=>we.id===We.replacementTeacherId);if(zn=be?be.name:"",We.isMerger&&(zn+=" ()"),We.replacementClassId&&We.replacementSubjectId){const we=n.find(Pe=>Pe.id===We.replacementClassId),he=t.find(Pe=>Pe.id===We.replacementSubjectId);zn+=` ( ${(we==null?void 0:we.name)||"?"} ${(he==null?void 0:he.name)||"?"})`}}const jr=ze.roomId,pt=We.replacementRoomId,D=pt||jr,j=r.find(be=>be.id===D),W=j?j.name:D||"-",le=pt?`${W} ( .)`:W;return`
                    <tr>
                        <td>${Rn}</td>
                        <td>${ze.period}</td>
                        <td>${ze.shift}</td>
                        <td>${(dt==null?void 0:dt.name)||"?"}</td>
                        <td>${(qe==null?void 0:qe.name)||"?"}</td>
                        <td>${(je==null?void 0:je.name)||"?"}</td>
                        <td>${zn}</td>
                        <td>${le}</td>
                        <td>${Xe}</td>
                    </tr>
                `}).join(""),tt=(Ue,Ne=!1)=>`
            <table>
            <thead>
                <tr class="${Ne?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${Te(Ue)}
            </tbody>
            </table>
        `;ce.length>0?ve+=tt(ce):ve+="<p>     .</p>",re.length>0&&(ve+="<br/><br/>",ve+='<h3 style="color: #b91c1c;">   (  )</h3>',ve+=tt(re,!0)),ve+="</body></html>";const Ye=new Blob([ve],{type:"application/vnd.ms-excel"}),Ke=URL.createObjectURL(Ye),Ze=document.createElement("a");Ze.href=Ke,Ze.download=`__${ge.getMonth()+1}_${ge.getFullYear()}.xls`,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze)},Le=()=>{const ge=new Date(w),Ae=ge.getMonth(),Qe=ge.getFullYear(),X=c.filter(Te=>{const tt=new Date(Te.date),Ye=tt.getMonth()===Ae&&tt.getFullYear()===Qe,Ke=Te.refusals&&Te.refusals.length>0;return Ye&&Ke}).sort((Te,tt)=>new Date(Te.date).getTime()-new Date(tt.date).getTime());if(X.length===0){alert("      .");return}let ce=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${ge.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;X.forEach(Te=>{const tt=o.find(ze=>ze.id===Te.scheduleItemId)||a.find(ze=>ze.id===Te.scheduleItemId);if(!tt)return;const Ye=new Date(Te.date).toLocaleDateString("ru-RU"),Ke=n.find(ze=>ze.id===tt.classId),Ze=t.find(ze=>ze.id===tt.subjectId),Ue=e.find(ze=>ze.id===Te.originalTeacherId);let Ne="";if(Te.replacementTeacherId==="conducted")Ne=" ";else if(Te.replacementTeacherId==="cancelled")Ne=" ";else{const ze=e.find(dt=>dt.id===Te.replacementTeacherId);Ne=ze?ze.name:""}const We=(Te.refusals||[]).map(ze=>{const dt=e.find(qe=>qe.id===ze);return dt?dt.name:""}).join(", ");ce+=`
                <tr>
                    <td>${Ye}</td>
                    <td>${tt.period}</td>
                    <td>${tt.shift}</td>
                    <td>${(Ke==null?void 0:Ke.name)||"?"}</td>
                    <td>${(Ze==null?void 0:Ze.name)||"?"}</td>
                    <td>${(Ue==null?void 0:Ue.name)||"?"}</td>
                    <td>${Ne}</td>
                    <td>${We}</td>
                </tr>
            `}),ce+="</tbody></table></body></html>";const re=new Blob([ce],{type:"application/vnd.ms-excel"}),me=URL.createObjectURL(re),ve=document.createElement("a");ve.href=me,ve.download=`__${ge.getMonth()+1}_${ge.getFullYear()}.xls`,document.body.appendChild(ve),ve.click(),document.body.removeChild(ve)},te=()=>{const ge=R();let Ae=`							
`;Vn.forEach(Qe=>{[ue.First,ue.Second].forEach(X=>{n.filter(re=>re.shift===X).forEach(re=>{cs[X].forEach(me=>{ge.filter(Te=>Te.classId===re.id&&Te.day===Qe&&Te.shift===X&&Te.period===me).forEach(Te=>{const tt=t.find(Ue=>Ue.id===Te.subjectId),Ye=e.find(Ue=>Ue.id===Te.teacherId),Ke=r.find(Ue=>Ue.id===Te.roomId),Ze=Ke?Ke.name:Te.roomId||"";Ae+=`${Qe}	${X}	${re.name}	${me}	${(tt==null?void 0:tt.name)||""}	${(Ye==null?void 0:Ye.name)||""}	${Ze}	${Te.direction||""}
`})})})})}),navigator.clipboard.writeText(Ae).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},Q=async()=>{I(!0);try{const ge=[];if(f.current){const Ae=await $_(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1});ge.push({href:Ae.toDataURL("image/png"),download:`_${w}_1.png`})}if(m.current){const Ae=await $_(m.current,{scale:2,backgroundColor:"#ffffff",logging:!1});ge.push({href:Ae.toDataURL("image/png"),download:`_${w}_2.png`})}ge.length===0?alert("   ."):ge.forEach(({href:Ae,download:Qe})=>{const X=document.createElement("a");X.href=Ae,X.download=Qe,document.body.appendChild(X),X.click(),document.body.removeChild(X)})}catch(ge){console.error(ge),alert("   ")}finally{I(!1)}},V=k.useMemo(()=>c.filter(ge=>ge.date===w),[c,w]),z=k.useMemo(()=>{const ge=L(w);return V.filter(Ae=>{const Qe=ge.find(X=>X.id===Ae.scheduleItemId);return Qe&&Qe.shift===ue.First}).filter(Ae=>Ae.replacementTeacherId!=="conducted").length>0},[V,L,w]),Z=k.useMemo(()=>{const ge=L(w);return V.filter(Ae=>{const Qe=ge.find(X=>X.id===Ae.scheduleItemId);return Qe&&Qe.shift===ue.Second}).filter(Ae=>Ae.replacementTeacherId!=="conducted").length>0},[V,L,w]),ne=ge=>{const Ae=L(w),Qe=V.filter(X=>{const ce=Ae.find(re=>re.id===X.scheduleItemId);return ce&&ce.shift===ge}).filter(X=>X.replacementTeacherId!=="conducted");return Qe.length===0?null:l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:ge}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Qe.map(X=>{var jr;const ce=Ae.find(pt=>pt.id===X.scheduleItemId);if(!ce)return null;const re=n.find(pt=>pt.id===ce.classId),me=t.find(pt=>pt.id===ce.subjectId),ve=e.find(pt=>pt.id===X.originalTeacherId),Te=X.replacementRoomId,tt=ce.roomId?r.find(pt=>pt.id===ce.roomId):null,Ye=tt?tt.name:ce.roomId||"",Ke=Te?r.find(pt=>pt.id===Te):null,Ze=Ke?Ke.name:Te||"",Ue=X.replacementTeacherId==="cancelled",Ne=Ue?{name:" "}:e.find(pt=>pt.id===X.replacementTeacherId),We=(jr=ve==null?void 0:ve.absenceReasons)==null?void 0:jr[w],ze=X.lessonAbsenceReason,dt=ze===" "?ze:We===" "?We:"",qe=X.replacementClassId?n.find(pt=>pt.id===X.replacementClassId):null,je=X.replacementSubjectId?t.find(pt=>pt.id===X.replacementSubjectId):null,Xe=X.replacementTeacherId===X.originalTeacherId&&Te&&!qe,Rn=qe&&je,zn=X.replacementTeacherId===X.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:ce.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:re==null?void 0:re.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:me==null?void 0:me.name}),ce.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:ce.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!zn&&!Xe&&!Rn&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[ve==null?void 0:ve.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),dt&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:dt})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${Ue?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:Xe?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:ve==null?void 0:ve.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):Rn?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:ve==null?void 0:ve.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",qe==null?void 0:qe.name]})]}):l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:Ne==null?void 0:Ne.name}),X.isMerger&&l.jsx("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:""})]})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Te?"text-indigo-600":"text-slate-700"}`,children:Te&&Te!==ce.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Ye}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Ze})]}):l.jsx("span",{className:"text-xl",children:Ye})})]},X.id)})})]})]})},Re=async()=>{const ge=Math.random().toString(36).substr(2,9);await TA.setPublicData(ge,F),await i({settings:{...s,publicScheduleId:ge}});const Ae=`${window.location.origin}${window.location.pathname}#/public?id=${ge}`;B(Ae),_(ge),U(!0)},Ce=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await TA.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),B(""),_(""))},He=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(w).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),xe=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]});return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>TA.exportJson(F),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:b,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var ge;return(ge=h.current)==null?void 0:ge.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx($,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx($,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:w,onChange:ge=>y(ge.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:Q,disabled:v,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:v?l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Download",size:20}),"  PNG"]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:V.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(He,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(xe,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[z&&l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(He,{}),ne(ue.First),l.jsx(xe,{})]}),Z&&l.jsxs("div",{ref:m,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(He,{}),ne(ue.Second),l.jsx(xe,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:T,onChange:ge=>C(Number(ge.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:Oe,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:Ve,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:te,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:et,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:Le,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),l.jsxs("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx($,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Ce,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:Re,disabled:v,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx($,{name:"Share2",size:20}),"  "]})]}),l.jsx(Os,{isOpen:S,onClose:()=>U(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),N&&l.jsxs(l.Fragment,{children:[l.jsx(R9,{value:N,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:N}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(N),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Copy",size:16}),"  "]})]})]})})]})},P9=()=>{var C;const{subjects:t,teachers:e,classes:n}=sA(),{schedule1:r,schedule2:s,substitutions:A}=il(),[i,o]=k.useState("load"),[a,c]=k.useState(((C=n[0])==null?void 0:C.id)||""),[d,h]=k.useState(()=>{const v=new Date().getMonth();return v>=0&&v<=4?2:1}),f=k.useMemo(()=>d===2?s:r,[d,r,s]),m=k.useMemo(()=>e.map(I=>{const S=f.filter(R=>R.teacherId===I.id),U=S.length,N=U*4,B=A.filter(R=>R.replacementTeacherId===I.id).length,x=A.filter(R=>R.originalTeacherId===I.id).length,_=N+B-x,F={};return S.forEach(R=>{const L=t.find(b=>b.id===R.subjectId);L&&(F[L.name]=(F[L.name]||0)+1)}),{id:I.id,name:I.name,weeklyHours:U,subsTaken:B,subsMissed:x,actualHours:_,subjectBreakdown:F}}).sort((I,S)=>S.actualHours-I.actualHours),[e,f,A,t]),w=k.useMemo(()=>a?Vn.map(v=>{const S=f.filter(U=>U.classId===a&&U.day===v).reduce((U,N)=>{const B=t.find(x=>x.id===N.subjectId);return U+((B==null?void 0:B.difficulty)||5)},0);return{label:v,value:S}}):[],[f,t,a]),y=k.useMemo(()=>{const v=e.map(S=>({name:S.name,count:A.filter(U=>U.replacementTeacherId===S.id).length})).sort((S,U)=>U.count-S.count).slice(0,5),I=e.map(S=>({name:S.name,count:S.unavailableDates.length})).sort((S,U)=>U.count-S.count).slice(0,5);return{heroes:v,absentees:I}},[e,A]),T=()=>{let v="";i==="load"?v=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(U=>`"${U.name}",${U.weeklyHours},${U.subsTaken},${U.subsMissed},${U.actualHours},"${Object.entries(U.subjectBreakdown).map(([N,B])=>N+": "+B).join(", ")}"`).join(`
`):i==="sanpin"&&(v=`Day,Score
`+w.map(U=>`${U.label},${U.value}`).join(`
`));const I=new Blob([`\uFEFF${v}`],{type:"text/csv;charset=utf-8;"}),S=document.createElement("a");S.href=URL.createObjectURL(I),S.download=`report_${i}_${d}sem.csv`,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx($,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:v=>h(Number(v.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:T,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx($,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>o("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>o("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>o("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(v=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:v.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:v.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",v.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",v.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:v.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(v.subjectBreakdown).map(([I,S])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[I,": ",S]},I))})})]},v.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:a,onChange:v=>c(v.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(v=>l.jsx("option",{value:v.id,children:v.name},v.id))})]}),l.jsx(Gp,{items:w,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Gp,{items:y.heroes.map(v=>({label:v.name,value:v.count})),max:Math.max(...y.heroes.map(v=>v.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Gp,{items:y.absentees.map(v=>({label:v.name,value:v.count})),max:Math.max(...y.absentees.map(v=>v.count),1),barClassName:"bg-red-500"})]})]})]})},D9=()=>{const{setGuestRole:t,role:e,loading:n}=Al(),r=vu(),[s,A]=k.useState("select"),[i,o]=k.useState(""),[a,c]=k.useState(""),[d,h]=k.useState(""),[f,m]=k.useState(!1);k.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const w=async T=>{if(T.preventDefault(),h(""),m(!0),!un){h("Firebase .  ."),m(!1);return}try{let C=i;s==="teacher"&&(C="teacher@gymnasium22.com"),await un.signInWithEmailAndPassword(C,a)}catch(C){console.error("Firebase Auth Error:",C);const v=C.code;let I="   .";switch(v){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":I="   .     .";break;case"auth/invalid-email":I="  email .";break;case"auth/too-many-requests":I="   .  .";break;default:I=" .       Firebase."}h(I)}finally{m(!1)}},y=()=>{t(),r("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx($,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"Gymnasium Manager"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),s==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:y,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  (/)"})]})]})]}),s!=="select"&&l.jsxs("form",{onSubmit:w,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx($,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:s==="teacher"?"  ":"  "})]}),s==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:T=>o(T.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:a,onChange:T=>c(T.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&l.jsx($,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},Bi=({children:t,allowedRoles:e})=>{const{user:n,role:r,loading:s}=Al();return s?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):r?e&&!e.includes(r)?l.jsx(Wh,{to:r==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(Wh,{to:"/login",replace:!0})},L9=()=>{const{role:t,loading:e}=Al();return e?null:t==="guest"?l.jsx(Wh,{to:"/schedule",replace:!0}):l.jsx(Wh,{to:"/dashboard",replace:!0})},O9=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(localStorage.getItem("theme")||"light"),{isLoading:s}=sA(),{logout:A,role:i,user:o}=Al();if(k.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),s)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const c=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(d=>d.roles.includes(i||""));return l.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx($,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0",children:c.map(d=>l.jsxs(_N,{to:d.to,onClick:()=>e(!1),className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${h?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx($,{name:d.icon,size:20}),d.label]},d.to))}),l.jsx(MK,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:o&&o.email||""}),l.jsx("button",{onClick:A,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx($,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors",children:n==="light"?l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx($,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:l.jsx(cN,{})})]})]})},M9=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!0),[s]=TN(),A=s.get("id");return k.useEffect(()=>{A?(r(!0),TA.getPublicData(A).then(i=>{const o={...an,...i,settings:{...an.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),r(!1)})):(r(!1),e(null))},[A]),n?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(dS,{initialData:t,children:l.jsx(gS,{children:l.jsx(pS,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx($,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(yS,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx($,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function V9(){return l.jsx(DK,{children:l.jsx(dS,{children:l.jsx(gS,{children:l.jsx(pS,{children:l.jsx(BN,{children:l.jsxs(dN,{children:[l.jsx(pr,{path:"/login",element:l.jsx(D9,{})}),l.jsxs(pr,{path:"/",element:l.jsx(Bi,{children:l.jsx(O9,{})}),children:[l.jsx(pr,{index:!0,element:l.jsx(L9,{})}),l.jsx(pr,{path:"dashboard",element:l.jsx(Bi,{allowedRoles:["admin","teacher"],children:l.jsx(VK,{})})}),l.jsx(pr,{path:"schedule",element:l.jsx(q_,{semester:1})}),l.jsx(pr,{path:"schedule2",element:l.jsx(q_,{semester:2})}),l.jsx(pr,{path:"substitutions",element:l.jsx(Bi,{allowedRoles:["admin"],children:l.jsx(qK,{})})}),l.jsx(pr,{path:"directory",element:l.jsx(Bi,{allowedRoles:["admin"],children:l.jsx(WK,{})})}),l.jsx(pr,{path:"admin",element:l.jsx(Bi,{allowedRoles:["admin"],children:l.jsx(JK,{})})}),l.jsx(pr,{path:"reports",element:l.jsx(Bi,{allowedRoles:["admin"],children:l.jsx(P9,{})})}),l.jsx(pr,{path:"export",element:l.jsx(Bi,{allowedRoles:["admin"],children:l.jsx(N9,{})})})]}),l.jsx(pr,{path:"/public",element:l.jsx(M9,{})})]})})})})})})}const q_=({semester:t=1})=>{const{role:e}=Al();return l.jsx(yS,{readOnly:e!=="admin",semester:t})};hm.createRoot(document.getElementById("root")).render(l.jsx(Qi.StrictMode,{children:l.jsx(V9,{})}));
