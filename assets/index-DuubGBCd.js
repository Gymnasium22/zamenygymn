function aU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const A in n)if(A!=="default"&&!(A in t)){const s=Object.getOwnPropertyDescriptor(n,A);s&&Object.defineProperty(t,A,s.get?s:{enumerable:!0,get:()=>n[A]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))n(A);new MutationObserver(A=>{for(const s of A)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(A){const s={};return A.integrity&&(s.integrity=A.integrity),A.referrerPolicy&&(s.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?s.credentials="include":A.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(A){if(A.ep)return;A.ep=!0;const s=r(A);fetch(A.href,s)}})();function UI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SI={exports:{}},rf={},kI={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),lU=Symbol.for("react.portal"),cU=Symbol.for("react.fragment"),uU=Symbol.for("react.strict_mode"),dU=Symbol.for("react.profiler"),hU=Symbol.for("react.provider"),fU=Symbol.for("react.context"),gU=Symbol.for("react.forward_ref"),pU=Symbol.for("react.suspense"),mU=Symbol.for("react.memo"),wU=Symbol.for("react.lazy"),yy=Symbol.iterator;function BU(t){return t===null||typeof t!="object"?null:(t=yy&&t[yy]||t["@@iterator"],typeof t=="function"?t:null)}var RI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},NI=Object.assign,DI={};function xa(t,e,r){this.props=t,this.context=e,this.refs=DI,this.updater=r||RI}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PI(){}PI.prototype=xa.prototype;function C0(t,e,r){this.props=t,this.context=e,this.refs=DI,this.updater=r||RI}var I0=C0.prototype=new PI;I0.constructor=C0;NI(I0,xa.prototype);I0.isPureReactComponent=!0;var vy=Array.isArray,LI=Object.prototype.hasOwnProperty,_0={current:null},jI={key:!0,ref:!0,__self:!0,__source:!0};function MI(t,e,r){var n,A={},s=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)LI.call(e,n)&&!jI.hasOwnProperty(n)&&(A[n]=e[n]);var a=arguments.length-2;if(a===1)A.children=r;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];A.children=o}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)A[n]===void 0&&(A[n]=a[n]);return{$$typeof:Lc,type:t,key:s,ref:i,props:A,_owner:_0.current}}function yU(t,e){return{$$typeof:Lc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lc}function vU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var xy=/\/+/g;function mg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vU(""+t.key):e.toString(36)}function vd(t,e,r,n,A){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Lc:case lU:i=!0}}if(i)return i=t,A=A(i),t=n===""?"."+mg(i,0):n,vy(A)?(r="",t!=null&&(r=t.replace(xy,"$&/")+"/"),vd(A,e,r,"",function(c){return c})):A!=null&&(E0(A)&&(A=yU(A,r+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(xy,"$&/")+"/")+t)),e.push(A)),1;if(i=0,n=n===""?".":n+":",vy(t))for(var a=0;a<t.length;a++){s=t[a];var o=n+mg(s,a);i+=vd(s,e,r,o,A)}else if(o=BU(t),typeof o=="function")for(t=o.call(t),a=0;!(s=t.next()).done;)s=s.value,o=n+mg(s,a++),i+=vd(s,e,r,o,A);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function _u(t,e,r){if(t==null)return t;var n=[],A=0;return vd(t,n,"","",function(s){return e.call(r,s,A++)}),n}function xU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zr={current:null},xd={transition:null},CU={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:xd,ReactCurrentOwner:_0};function OI(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:_u,forEach:function(t,e,r){_u(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return _u(t,function(){e++}),e},toArray:function(t){return _u(t,function(e){return e})||[]},only:function(t){if(!E0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ot.Component=xa;ot.Fragment=cU;ot.Profiler=dU;ot.PureComponent=C0;ot.StrictMode=uU;ot.Suspense=pU;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CU;ot.act=OI;ot.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=NI({},t.props),A=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=_0.current),e.key!==void 0&&(A=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(o in e)LI.call(e,o)&&!jI.hasOwnProperty(o)&&(n[o]=e[o]===void 0&&a!==void 0?a[o]:e[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){a=Array(o);for(var c=0;c<o;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Lc,type:t.type,key:A,ref:s,props:n,_owner:i}};ot.createContext=function(t){return t={$$typeof:fU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hU,_context:t},t.Consumer=t};ot.createElement=MI;ot.createFactory=function(t){var e=MI.bind(null,t);return e.type=t,e};ot.createRef=function(){return{current:null}};ot.forwardRef=function(t){return{$$typeof:gU,render:t}};ot.isValidElement=E0;ot.lazy=function(t){return{$$typeof:wU,_payload:{_status:-1,_result:t},_init:xU}};ot.memo=function(t,e){return{$$typeof:mU,type:t,compare:e===void 0?null:e}};ot.startTransition=function(t){var e=xd.transition;xd.transition={};try{t()}finally{xd.transition=e}};ot.unstable_act=OI;ot.useCallback=function(t,e){return Zr.current.useCallback(t,e)};ot.useContext=function(t){return Zr.current.useContext(t)};ot.useDebugValue=function(){};ot.useDeferredValue=function(t){return Zr.current.useDeferredValue(t)};ot.useEffect=function(t,e){return Zr.current.useEffect(t,e)};ot.useId=function(){return Zr.current.useId()};ot.useImperativeHandle=function(t,e,r){return Zr.current.useImperativeHandle(t,e,r)};ot.useInsertionEffect=function(t,e){return Zr.current.useInsertionEffect(t,e)};ot.useLayoutEffect=function(t,e){return Zr.current.useLayoutEffect(t,e)};ot.useMemo=function(t,e){return Zr.current.useMemo(t,e)};ot.useReducer=function(t,e,r){return Zr.current.useReducer(t,e,r)};ot.useRef=function(t){return Zr.current.useRef(t)};ot.useState=function(t){return Zr.current.useState(t)};ot.useSyncExternalStore=function(t,e,r){return Zr.current.useSyncExternalStore(t,e,r)};ot.useTransition=function(){return Zr.current.useTransition()};ot.version="18.3.1";kI.exports=ot;var S=kI.exports;const wA=UI(S),IU=aU({__proto__:null,default:wA},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _U=S,EU=Symbol.for("react.element"),bU=Symbol.for("react.fragment"),TU=Object.prototype.hasOwnProperty,FU=_U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QU={key:!0,ref:!0,__self:!0,__source:!0};function HI(t,e,r){var n,A={},s=null,i=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)TU.call(e,n)&&!QU.hasOwnProperty(n)&&(A[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)A[n]===void 0&&(A[n]=e[n]);return{$$typeof:EU,type:t,key:s,ref:i,props:A,_owner:FU.current}}rf.Fragment=bU;rf.jsx=HI;rf.jsxs=HI;SI.exports=rf;var l=SI.exports,Ep={},VI={exports:{}},_n={},KI={exports:{}},GI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(se,k){var G=se.length;se.push(k);e:for(;0<G;){var X=G-1>>>1,oe=se[X];if(0<A(oe,k))se[X]=k,se[G]=oe,G=X;else break e}}function r(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var k=se[0],G=se.pop();if(G!==k){se[0]=G;e:for(var X=0,oe=se.length,ae=oe>>>1;X<ae;){var Ve=2*(X+1)-1,Fe=se[Ve],We=Ve+1,Te=se[We];if(0>A(Fe,G))We<oe&&0>A(Te,Fe)?(se[X]=Te,se[We]=G,X=We):(se[X]=Fe,se[Ve]=G,X=Ve);else if(We<oe&&0>A(Te,G))se[X]=Te,se[We]=G,X=We;else break e}}return k}function A(se,k){var G=se.sortIndex-k.sortIndex;return G!==0?G:se.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var o=[],c=[],d=1,h=null,f=3,w=!1,y=!1,B=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(se){for(var k=r(c);k!==null;){if(k.callback===null)n(c);else if(k.startTime<=se)n(c),k.sortIndex=k.expirationTime,e(o,k);else break;k=r(c)}}function F(se){if(B=!1,I(se),!y)if(r(o)!==null)y=!0,et(R);else{var k=r(c);k!==null&&$e(F,k.startTime-se)}}function R(se,k){y=!1,B&&(B=!1,x(C),C=-1),w=!0;var G=f;try{for(I(k),h=r(o);h!==null&&(!(h.expirationTime>k)||se&&!N());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var oe=X(h.expirationTime<=k);k=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===r(o)&&n(o),I(k)}else n(o);h=r(o)}if(h!==null)var ae=!0;else{var Ve=r(c);Ve!==null&&$e(F,Ve.startTime-k),ae=!1}return ae}finally{h=null,f=G,w=!1}}var U=!1,v=null,C=-1,_=5,Q=-1;function N(){return!(t.unstable_now()-Q<_)}function L(){if(v!==null){var se=t.unstable_now();Q=se;var k=!0;try{k=v(!0,se)}finally{k?T():(U=!1,v=null)}}else U=!1}var T;if(typeof m=="function")T=function(){m(L)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,He=Ke.port2;Ke.port1.onmessage=L,T=function(){He.postMessage(null)}}else T=function(){E(L,0)};function et(se){v=se,U||(U=!0,T())}function $e(se,k){C=E(function(){se(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(se){se.callback=null},t.unstable_continueExecution=function(){y||w||(y=!0,et(R))},t.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<se?Math.floor(1e3/se):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(o)},t.unstable_next=function(se){switch(f){case 1:case 2:case 3:var k=3;break;default:k=f}var G=f;f=k;try{return se()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(se,k){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var G=f;f=se;try{return k()}finally{f=G}},t.unstable_scheduleCallback=function(se,k,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,se){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,se={id:d++,callback:k,priorityLevel:se,startTime:G,expirationTime:oe,sortIndex:-1},G>X?(se.sortIndex=G,e(c,se),r(o)===null&&se===r(c)&&(B?(x(C),C=-1):B=!0,$e(F,G-X))):(se.sortIndex=oe,e(o,se),y||w||(y=!0,et(R))),se},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(se){var k=f;return function(){var G=f;f=k;try{return se.apply(this,arguments)}finally{f=G}}}})(GI);KI.exports=GI;var UU=KI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SU=S,xn=UU;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zI=new Set,rc={};function Ji(t,e){Jo(t,e),Jo(t+"Capture",e)}function Jo(t,e){for(rc[t]=e,t=0;t<e.length;t++)zI.add(e[t])}var FA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bp=Object.prototype.hasOwnProperty,kU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cy={},Iy={};function RU(t){return bp.call(Iy,t)?!0:bp.call(Cy,t)?!1:kU.test(t)?Iy[t]=!0:(Cy[t]=!0,!1)}function NU(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DU(t,e,r,n){if(e===null||typeof e>"u"||NU(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,r,n,A,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=A,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nr[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nr[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nr[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nr[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nr[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nr[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nr[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nr[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nr[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var b0=/[\-:]([a-z])/g;function T0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(b0,T0);Nr[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(b0,T0);Nr[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(b0,T0);Nr[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nr[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Nr.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nr[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function F0(t,e,r,n){var A=Nr.hasOwnProperty(e)?Nr[e]:null;(A!==null?A.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DU(e,r,A,n)&&(r=null),n||A===null?RU(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):A.mustUseProperty?t[A.propertyName]=r===null?A.type===3?!1:"":r:(e=A.attributeName,n=A.attributeNamespace,r===null?t.removeAttribute(e):(A=A.type,r=A===3||A===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var LA=SU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eu=Symbol.for("react.element"),Io=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),Q0=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),$I=Symbol.for("react.provider"),WI=Symbol.for("react.context"),U0=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),Qp=Symbol.for("react.suspense_list"),S0=Symbol.for("react.memo"),ts=Symbol.for("react.lazy"),qI=Symbol.for("react.offscreen"),_y=Symbol.iterator;function Za(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,wg;function ml(t){if(wg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);wg=e&&e[1]||""}return`
`+wg+t}var Bg=!1;function yg(t,e){if(!t||Bg)return"";Bg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var A=c.stack.split(`
`),s=n.stack.split(`
`),i=A.length-1,a=s.length-1;1<=i&&0<=a&&A[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(A[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||A[i]!==s[a]){var o=`
`+A[i].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=i&&0<=a);break}}}finally{Bg=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ml(t):""}function PU(t){switch(t.tag){case 5:return ml(t.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 2:case 15:return t=yg(t.type,!1),t;case 11:return t=yg(t.type.render,!1),t;case 1:return t=yg(t.type,!0),t;default:return""}}function Up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _o:return"Fragment";case Io:return"Portal";case Tp:return"Profiler";case Q0:return"StrictMode";case Fp:return"Suspense";case Qp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WI:return(t.displayName||"Context")+".Consumer";case $I:return(t._context.displayName||"Context")+".Provider";case U0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case S0:return e=t.displayName||null,e!==null?e:Up(t.type)||"Memo";case ts:e=t._payload,t=t._init;try{return Up(t(e))}catch{}}return null}function LU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Up(e);case 8:return e===Q0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jU(t){var e=JI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var A=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return A.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bu(t){t._valueTracker||(t._valueTracker=jU(t))}function XI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=JI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Xd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sp(t,e){var r=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ey(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ds(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YI(t,e){e=e.checked,e!=null&&F0(t,"checked",e,!1)}function kp(t,e){YI(t,e);var r=Ds(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rp(t,e.type,r):e.hasOwnProperty("defaultValue")&&Rp(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function by(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Rp(t,e,r){(e!=="number"||Xd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var wl=Array.isArray;function Lo(t,e,r,n){if(t=t.options,e){e={};for(var A=0;A<r.length;A++)e["$"+r[A]]=!0;for(r=0;r<t.length;r++)A=e.hasOwnProperty("$"+t[r].value),t[r].selected!==A&&(t[r].selected=A),A&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ds(r),e=null,A=0;A<t.length;A++){if(t[A].value===r){t[A].selected=!0,n&&(t[A].defaultSelected=!0);return}e!==null||t[A].disabled||(e=t[A])}e!==null&&(e.selected=!0)}}function Np(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ty(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ae(92));if(wl(r)){if(1<r.length)throw Error(Ae(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ds(r)}}function ZI(t,e){var r=Ds(e.value),n=Ds(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Fy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tu,t_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,A){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,A)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tu=Tu||document.createElement("div"),Tu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MU=["Webkit","ms","Moz","O"];Object.keys(Nl).forEach(function(t){MU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nl[e]=Nl[t]})});function r_(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Nl.hasOwnProperty(t)&&Nl[t]?(""+e).trim():e+"px"}function n_(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,A=r_(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,A):t[r]=A}}var OU=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pp(t,e){if(e){if(OU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function Lp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jp=null;function k0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mp=null,jo=null,Mo=null;function Qy(t){if(t=Oc(t)){if(typeof Mp!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=af(e),Mp(t.stateNode,t.type,e))}}function A_(t){jo?Mo?Mo.push(t):Mo=[t]:jo=t}function s_(){if(jo){var t=jo,e=Mo;if(Mo=jo=null,Qy(t),e)for(t=0;t<e.length;t++)Qy(e[t])}}function i_(t,e){return t(e)}function o_(){}var vg=!1;function a_(t,e,r){if(vg)return t(e,r);vg=!0;try{return i_(t,e,r)}finally{vg=!1,(jo!==null||Mo!==null)&&(o_(),s_())}}function Ac(t,e){var r=t.stateNode;if(r===null)return null;var n=af(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ae(231,e,typeof r));return r}var Op=!1;if(FA)try{var el={};Object.defineProperty(el,"passive",{get:function(){Op=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{Op=!1}function HU(t,e,r,n,A,s,i,a,o){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Dl=!1,Yd=null,Zd=!1,Hp=null,VU={onError:function(t){Dl=!0,Yd=t}};function KU(t,e,r,n,A,s,i,a,o){Dl=!1,Yd=null,HU.apply(VU,arguments)}function GU(t,e,r,n,A,s,i,a,o){if(KU.apply(this,arguments),Dl){if(Dl){var c=Yd;Dl=!1,Yd=null}else throw Error(Ae(198));Zd||(Zd=!0,Hp=c)}}function Xi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function l_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uy(t){if(Xi(t)!==t)throw Error(Ae(188))}function zU(t){var e=t.alternate;if(!e){if(e=Xi(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var r=t,n=e;;){var A=r.return;if(A===null)break;var s=A.alternate;if(s===null){if(n=A.return,n!==null){r=n;continue}break}if(A.child===s.child){for(s=A.child;s;){if(s===r)return Uy(A),t;if(s===n)return Uy(A),e;s=s.sibling}throw Error(Ae(188))}if(r.return!==n.return)r=A,n=s;else{for(var i=!1,a=A.child;a;){if(a===r){i=!0,r=A,n=s;break}if(a===n){i=!0,n=A,r=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===r){i=!0,r=s,n=A;break}if(a===n){i=!0,n=s,r=A;break}a=a.sibling}if(!i)throw Error(Ae(189))}}if(r.alternate!==n)throw Error(Ae(190))}if(r.tag!==3)throw Error(Ae(188));return r.stateNode.current===r?t:e}function c_(t){return t=zU(t),t!==null?u_(t):null}function u_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u_(t);if(e!==null)return e;t=t.sibling}return null}var d_=xn.unstable_scheduleCallback,Sy=xn.unstable_cancelCallback,$U=xn.unstable_shouldYield,WU=xn.unstable_requestPaint,sr=xn.unstable_now,qU=xn.unstable_getCurrentPriorityLevel,R0=xn.unstable_ImmediatePriority,h_=xn.unstable_UserBlockingPriority,eh=xn.unstable_NormalPriority,JU=xn.unstable_LowPriority,f_=xn.unstable_IdlePriority,nf=null,rA=null;function XU(t){if(rA&&typeof rA.onCommitFiberRoot=="function")try{rA.onCommitFiberRoot(nf,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:eS,YU=Math.log,ZU=Math.LN2;function eS(t){return t>>>=0,t===0?32:31-(YU(t)/ZU|0)|0}var Fu=64,Qu=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function th(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,A=t.suspendedLanes,s=t.pingedLanes,i=r&268435455;if(i!==0){var a=i&~A;a!==0?n=Bl(a):(s&=i,s!==0&&(n=Bl(s)))}else i=r&~A,i!==0?n=Bl(i):s!==0&&(n=Bl(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&A)&&(A=n&-n,s=e&-e,A>=s||A===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Vn(e),A=1<<r,n|=t[r],e&=~A;return n}function tS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,A=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Vn(s),a=1<<i,o=A[i];o===-1?(!(a&r)||a&n)&&(A[i]=tS(a,e)):o<=e&&(t.expiredLanes|=a),s&=~a}}function Vp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g_(){var t=Fu;return Fu<<=1,!(Fu&4194240)&&(Fu=64),t}function xg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function jc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=r}function nS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var A=31-Vn(r),s=1<<A;e[A]=0,n[A]=-1,t[A]=-1,r&=~s}}function N0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Vn(r),A=1<<n;A&e|t[n]&e&&(t[n]|=e),r&=~A}}var xt=0;function p_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var m_,D0,w_,B_,y_,Kp=!1,Uu=[],vs=null,xs=null,Cs=null,sc=new Map,ic=new Map,As=[],AS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ky(t,e){switch(t){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(e.pointerId)}}function tl(t,e,r,n,A,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[A]},e!==null&&(e=Oc(e),e!==null&&D0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,A!==null&&e.indexOf(A)===-1&&e.push(A),t)}function sS(t,e,r,n,A){switch(e){case"focusin":return vs=tl(vs,t,e,r,n,A),!0;case"dragenter":return xs=tl(xs,t,e,r,n,A),!0;case"mouseover":return Cs=tl(Cs,t,e,r,n,A),!0;case"pointerover":var s=A.pointerId;return sc.set(s,tl(sc.get(s)||null,t,e,r,n,A)),!0;case"gotpointercapture":return s=A.pointerId,ic.set(s,tl(ic.get(s)||null,t,e,r,n,A)),!0}return!1}function v_(t){var e=Ci(t.target);if(e!==null){var r=Xi(e);if(r!==null){if(e=r.tag,e===13){if(e=l_(r),e!==null){t.blockedOn=e,y_(t.priority,function(){w_(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);jp=n,r.target.dispatchEvent(n),jp=null}else return e=Oc(r),e!==null&&D0(e),t.blockedOn=r,!1;e.shift()}return!0}function Ry(t,e,r){Cd(t)&&r.delete(e)}function iS(){Kp=!1,vs!==null&&Cd(vs)&&(vs=null),xs!==null&&Cd(xs)&&(xs=null),Cs!==null&&Cd(Cs)&&(Cs=null),sc.forEach(Ry),ic.forEach(Ry)}function rl(t,e){t.blockedOn===e&&(t.blockedOn=null,Kp||(Kp=!0,xn.unstable_scheduleCallback(xn.unstable_NormalPriority,iS)))}function oc(t){function e(A){return rl(A,t)}if(0<Uu.length){rl(Uu[0],t);for(var r=1;r<Uu.length;r++){var n=Uu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(vs!==null&&rl(vs,t),xs!==null&&rl(xs,t),Cs!==null&&rl(Cs,t),sc.forEach(e),ic.forEach(e),r=0;r<As.length;r++)n=As[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<As.length&&(r=As[0],r.blockedOn===null);)v_(r),r.blockedOn===null&&As.shift()}var Oo=LA.ReactCurrentBatchConfig,rh=!0;function oS(t,e,r,n){var A=xt,s=Oo.transition;Oo.transition=null;try{xt=1,P0(t,e,r,n)}finally{xt=A,Oo.transition=s}}function aS(t,e,r,n){var A=xt,s=Oo.transition;Oo.transition=null;try{xt=4,P0(t,e,r,n)}finally{xt=A,Oo.transition=s}}function P0(t,e,r,n){if(rh){var A=Gp(t,e,r,n);if(A===null)Sg(t,e,n,nh,r),ky(t,n);else if(sS(A,t,e,r,n))n.stopPropagation();else if(ky(t,n),e&4&&-1<AS.indexOf(t)){for(;A!==null;){var s=Oc(A);if(s!==null&&m_(s),s=Gp(t,e,r,n),s===null&&Sg(t,e,n,nh,r),s===A)break;A=s}A!==null&&n.stopPropagation()}else Sg(t,e,n,null,r)}}var nh=null;function Gp(t,e,r,n){if(nh=null,t=k0(n),t=Ci(t),t!==null)if(e=Xi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=l_(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nh=t,null}function x_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qU()){case R0:return 1;case h_:return 4;case eh:case JU:return 16;case f_:return 536870912;default:return 16}default:return 16}}var hs=null,L0=null,Id=null;function C_(){if(Id)return Id;var t,e=L0,r=e.length,n,A="value"in hs?hs.value:hs.textContent,s=A.length;for(t=0;t<r&&e[t]===A[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===A[s-n];n++);return Id=A.slice(t,1<n?1-n:void 0)}function _d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Su(){return!0}function Ny(){return!1}function En(t){function e(r,n,A,s,i){this._reactName=r,this._targetInst=A,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Su:Ny,this.isPropagationStopped=Ny,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Su)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Su)},persist:function(){},isPersistent:Su}),e}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j0=En(Ca),Mc=Jt({},Ca,{view:0,detail:0}),lS=En(Mc),Cg,Ig,nl,Af=Jt({},Mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:M0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nl&&(nl&&t.type==="mousemove"?(Cg=t.screenX-nl.screenX,Ig=t.screenY-nl.screenY):Ig=Cg=0,nl=t),Cg)},movementY:function(t){return"movementY"in t?t.movementY:Ig}}),Dy=En(Af),cS=Jt({},Af,{dataTransfer:0}),uS=En(cS),dS=Jt({},Mc,{relatedTarget:0}),_g=En(dS),hS=Jt({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),fS=En(hS),gS=Jt({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pS=En(gS),mS=Jt({},Ca,{data:0}),Py=En(mS),wS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yS[t])?!!e[t]:!1}function M0(){return vS}var xS=Jt({},Mc,{key:function(t){if(t.key){var e=wS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:M0,charCode:function(t){return t.type==="keypress"?_d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CS=En(xS),IS=Jt({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=En(IS),_S=Jt({},Mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:M0}),ES=En(_S),bS=Jt({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),TS=En(bS),FS=Jt({},Af,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QS=En(FS),US=[9,13,27,32],O0=FA&&"CompositionEvent"in window,Pl=null;FA&&"documentMode"in document&&(Pl=document.documentMode);var SS=FA&&"TextEvent"in window&&!Pl,I_=FA&&(!O0||Pl&&8<Pl&&11>=Pl),jy=" ",My=!1;function __(t,e){switch(t){case"keyup":return US.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eo=!1;function kS(t,e){switch(t){case"compositionend":return E_(e);case"keypress":return e.which!==32?null:(My=!0,jy);case"textInput":return t=e.data,t===jy&&My?null:t;default:return null}}function RS(t,e){if(Eo)return t==="compositionend"||!O0&&__(t,e)?(t=C_(),Id=L0=hs=null,Eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return I_&&e.locale!=="ko"?null:e.data;default:return null}}var NS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NS[t.type]:e==="textarea"}function b_(t,e,r,n){A_(n),e=Ah(e,"onChange"),0<e.length&&(r=new j0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ll=null,ac=null;function DS(t){L_(t,0)}function sf(t){var e=Fo(t);if(XI(e))return t}function PS(t,e){if(t==="change")return e}var T_=!1;if(FA){var Eg;if(FA){var bg="oninput"in document;if(!bg){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),bg=typeof Hy.oninput=="function"}Eg=bg}else Eg=!1;T_=Eg&&(!document.documentMode||9<document.documentMode)}function Vy(){Ll&&(Ll.detachEvent("onpropertychange",F_),ac=Ll=null)}function F_(t){if(t.propertyName==="value"&&sf(ac)){var e=[];b_(e,ac,t,k0(t)),a_(DS,e)}}function LS(t,e,r){t==="focusin"?(Vy(),Ll=e,ac=r,Ll.attachEvent("onpropertychange",F_)):t==="focusout"&&Vy()}function jS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sf(ac)}function MS(t,e){if(t==="click")return sf(e)}function OS(t,e){if(t==="input"||t==="change")return sf(e)}function HS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:HS;function lc(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var A=r[n];if(!bp.call(e,A)||!zn(t[A],e[A]))return!1}return!0}function Ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gy(t,e){var r=Ky(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ky(r)}}function Q_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Q_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U_(){for(var t=window,e=Xd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Xd(t.document)}return e}function H0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VS(t){var e=U_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Q_(r.ownerDocument.documentElement,r)){if(n!==null&&H0(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var A=r.textContent.length,s=Math.min(n.start,A);n=n.end===void 0?s:Math.min(n.end,A),!t.extend&&s>n&&(A=n,n=s,s=A),A=Gy(r,s);var i=Gy(r,n);A&&i&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(A.node,A.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KS=FA&&"documentMode"in document&&11>=document.documentMode,bo=null,zp=null,jl=null,$p=!1;function zy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$p||bo==null||bo!==Xd(n)||(n=bo,"selectionStart"in n&&H0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),jl&&lc(jl,n)||(jl=n,n=Ah(zp,"onSelect"),0<n.length&&(e=new j0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=bo)))}function ku(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var To={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},Tg={},S_={};FA&&(S_=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function of(t){if(Tg[t])return Tg[t];if(!To[t])return t;var e=To[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in S_)return Tg[t]=e[r];return t}var k_=of("animationend"),R_=of("animationiteration"),N_=of("animationstart"),D_=of("transitionend"),P_=new Map,$y="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){P_.set(t,e),Ji(e,[t])}for(var Fg=0;Fg<$y.length;Fg++){var Qg=$y[Fg],GS=Qg.toLowerCase(),zS=Qg[0].toUpperCase()+Qg.slice(1);qs(GS,"on"+zS)}qs(k_,"onAnimationEnd");qs(R_,"onAnimationIteration");qs(N_,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(D_,"onTransitionEnd");Jo("onMouseEnter",["mouseout","mouseover"]);Jo("onMouseLeave",["mouseout","mouseover"]);Jo("onPointerEnter",["pointerout","pointerover"]);Jo("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$S=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function Wy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,GU(n,e,void 0,t),t.currentTarget=null}function L_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],A=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var i=n.length-1;0<=i;i--){var a=n[i],o=a.instance,c=a.currentTarget;if(a=a.listener,o!==s&&A.isPropagationStopped())break e;Wy(A,a,c),s=o}else for(i=0;i<n.length;i++){if(a=n[i],o=a.instance,c=a.currentTarget,a=a.listener,o!==s&&A.isPropagationStopped())break e;Wy(A,a,c),s=o}}}if(Zd)throw t=Hp,Zd=!1,Hp=null,t}function Nt(t,e){var r=e[Yp];r===void 0&&(r=e[Yp]=new Set);var n=t+"__bubble";r.has(n)||(j_(e,t,2,!1),r.add(n))}function Ug(t,e,r){var n=0;e&&(n|=4),j_(r,t,n,e)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function cc(t){if(!t[Ru]){t[Ru]=!0,zI.forEach(function(r){r!=="selectionchange"&&($S.has(r)||Ug(r,!1,t),Ug(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ru]||(e[Ru]=!0,Ug("selectionchange",!1,e))}}function j_(t,e,r,n){switch(x_(e)){case 1:var A=oS;break;case 4:A=aS;break;default:A=P0}r=A.bind(null,e,r,t),A=void 0,!Op||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(A=!0),n?A!==void 0?t.addEventListener(e,r,{capture:!0,passive:A}):t.addEventListener(e,r,!0):A!==void 0?t.addEventListener(e,r,{passive:A}):t.addEventListener(e,r,!1)}function Sg(t,e,r,n,A){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var a=n.stateNode.containerInfo;if(a===A||a.nodeType===8&&a.parentNode===A)break;if(i===4)for(i=n.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===A||o.nodeType===8&&o.parentNode===A))return;i=i.return}for(;a!==null;){if(i=Ci(a),i===null)return;if(o=i.tag,o===5||o===6){n=s=i;continue e}a=a.parentNode}}n=n.return}a_(function(){var c=s,d=k0(r),h=[];e:{var f=P_.get(t);if(f!==void 0){var w=j0,y=t;switch(t){case"keypress":if(_d(r)===0)break e;case"keydown":case"keyup":w=CS;break;case"focusin":y="focus",w=_g;break;case"focusout":y="blur",w=_g;break;case"beforeblur":case"afterblur":w=_g;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Dy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=uS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=ES;break;case k_:case R_:case N_:w=fS;break;case D_:w=TS;break;case"scroll":w=lS;break;case"wheel":w=QS;break;case"copy":case"cut":case"paste":w=pS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ly}var B=(e&4)!==0,E=!B&&t==="scroll",x=B?f!==null?f+"Capture":null:f;B=[];for(var m=c,I;m!==null;){I=m;var F=I.stateNode;if(I.tag===5&&F!==null&&(I=F,x!==null&&(F=Ac(m,x),F!=null&&B.push(uc(m,F,I)))),E)break;m=m.return}0<B.length&&(f=new w(f,y,null,r,d),h.push({event:f,listeners:B}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",f&&r!==jp&&(y=r.relatedTarget||r.fromElement)&&(Ci(y)||y[QA]))break e;if((w||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,w?(y=r.relatedTarget||r.toElement,w=c,y=y?Ci(y):null,y!==null&&(E=Xi(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(w=null,y=c),w!==y)){if(B=Dy,F="onMouseLeave",x="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(B=Ly,F="onPointerLeave",x="onPointerEnter",m="pointer"),E=w==null?f:Fo(w),I=y==null?f:Fo(y),f=new B(F,m+"leave",w,r,d),f.target=E,f.relatedTarget=I,F=null,Ci(d)===c&&(B=new B(x,m+"enter",y,r,d),B.target=I,B.relatedTarget=E,F=B),E=F,w&&y)t:{for(B=w,x=y,m=0,I=B;I;I=io(I))m++;for(I=0,F=x;F;F=io(F))I++;for(;0<m-I;)B=io(B),m--;for(;0<I-m;)x=io(x),I--;for(;m--;){if(B===x||x!==null&&B===x.alternate)break t;B=io(B),x=io(x)}B=null}else B=null;w!==null&&qy(h,f,w,B,!1),y!==null&&E!==null&&qy(h,E,y,B,!0)}}e:{if(f=c?Fo(c):window,w=f.nodeName&&f.nodeName.toLowerCase(),w==="select"||w==="input"&&f.type==="file")var R=PS;else if(Oy(f))if(T_)R=OS;else{R=jS;var U=LS}else(w=f.nodeName)&&w.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(R=MS);if(R&&(R=R(t,c))){b_(h,R,r,d);break e}U&&U(t,f,c),t==="focusout"&&(U=f._wrapperState)&&U.controlled&&f.type==="number"&&Rp(f,"number",f.value)}switch(U=c?Fo(c):window,t){case"focusin":(Oy(U)||U.contentEditable==="true")&&(bo=U,zp=c,jl=null);break;case"focusout":jl=zp=bo=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,zy(h,r,d);break;case"selectionchange":if(KS)break;case"keydown":case"keyup":zy(h,r,d)}var v;if(O0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Eo?__(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(I_&&r.locale!=="ko"&&(Eo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Eo&&(v=C_()):(hs=d,L0="value"in hs?hs.value:hs.textContent,Eo=!0)),U=Ah(c,C),0<U.length&&(C=new Py(C,t,null,r,d),h.push({event:C,listeners:U}),v?C.data=v:(v=E_(r),v!==null&&(C.data=v)))),(v=SS?kS(t,r):RS(t,r))&&(c=Ah(c,"onBeforeInput"),0<c.length&&(d=new Py("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=v))}L_(h,e)})}function uc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ah(t,e){for(var r=e+"Capture",n=[];t!==null;){var A=t,s=A.stateNode;A.tag===5&&s!==null&&(A=s,s=Ac(t,r),s!=null&&n.unshift(uc(t,s,A)),s=Ac(t,e),s!=null&&n.push(uc(t,s,A))),t=t.return}return n}function io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qy(t,e,r,n,A){for(var s=e._reactName,i=[];r!==null&&r!==n;){var a=r,o=a.alternate,c=a.stateNode;if(o!==null&&o===n)break;a.tag===5&&c!==null&&(a=c,A?(o=Ac(r,s),o!=null&&i.unshift(uc(r,o,a))):A||(o=Ac(r,s),o!=null&&i.push(uc(r,o,a)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var WS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function Jy(t){return(typeof t=="string"?t:""+t).replace(WS,`
`).replace(qS,"")}function Nu(t,e,r){if(e=Jy(e),Jy(t)!==e&&r)throw Error(Ae(425))}function sh(){}var Wp=null,qp=null;function Jp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xp=typeof setTimeout=="function"?setTimeout:void 0,JS=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,XS=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(t){return Xy.resolve(null).then(t).catch(YS)}:Xp;function YS(t){setTimeout(function(){throw t})}function kg(t,e){var r=e,n=0;do{var A=r.nextSibling;if(t.removeChild(r),A&&A.nodeType===8)if(r=A.data,r==="/$"){if(n===0){t.removeChild(A),oc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=A}while(r);oc(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ia=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Ia,dc="__reactProps$"+Ia,QA="__reactContainer$"+Ia,Yp="__reactEvents$"+Ia,ZS="__reactListeners$"+Ia,ek="__reactHandles$"+Ia;function Ci(t){var e=t[Zn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[QA]||r[Zn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Yy(t);t!==null;){if(r=t[Zn])return r;t=Yy(t)}return e}t=r,r=t.parentNode}return null}function Oc(t){return t=t[Zn]||t[QA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function af(t){return t[dc]||null}var Zp=[],Qo=-1;function Js(t){return{current:t}}function Lt(t){0>Qo||(t.current=Zp[Qo],Zp[Qo]=null,Qo--)}function Qt(t,e){Qo++,Zp[Qo]=t.current,t.current=e}var Ps={},$r=Js(Ps),un=Js(!1),ki=Ps;function Xo(t,e){var r=t.type.contextTypes;if(!r)return Ps;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var A={},s;for(s in r)A[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=A),A}function dn(t){return t=t.childContextTypes,t!=null}function ih(){Lt(un),Lt($r)}function Zy(t,e,r){if($r.current!==Ps)throw Error(Ae(168));Qt($r,e),Qt(un,r)}function M_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var A in n)if(!(A in e))throw Error(Ae(108,LU(t)||"Unknown",A));return Jt({},r,n)}function oh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ps,ki=$r.current,Qt($r,t),Qt(un,un.current),!0}function ev(t,e,r){var n=t.stateNode;if(!n)throw Error(Ae(169));r?(t=M_(t,e,ki),n.__reactInternalMemoizedMergedChildContext=t,Lt(un),Lt($r),Qt($r,t)):Lt(un),Qt(un,r)}var mA=null,lf=!1,Rg=!1;function O_(t){mA===null?mA=[t]:mA.push(t)}function tk(t){lf=!0,O_(t)}function Xs(){if(!Rg&&mA!==null){Rg=!0;var t=0,e=xt;try{var r=mA;for(xt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}mA=null,lf=!1}catch(A){throw mA!==null&&(mA=mA.slice(t+1)),d_(R0,Xs),A}finally{xt=e,Rg=!1}}return null}var Uo=[],So=0,ah=null,lh=0,Tn=[],Fn=0,Ri=null,BA=1,yA="";function fi(t,e){Uo[So++]=lh,Uo[So++]=ah,ah=t,lh=e}function H_(t,e,r){Tn[Fn++]=BA,Tn[Fn++]=yA,Tn[Fn++]=Ri,Ri=t;var n=BA;t=yA;var A=32-Vn(n)-1;n&=~(1<<A),r+=1;var s=32-Vn(e)+A;if(30<s){var i=A-A%5;s=(n&(1<<i)-1).toString(32),n>>=i,A-=i,BA=1<<32-Vn(e)+A|r<<A|n,yA=s+t}else BA=1<<s|r<<A|n,yA=t}function V0(t){t.return!==null&&(fi(t,1),H_(t,1,0))}function K0(t){for(;t===ah;)ah=Uo[--So],Uo[So]=null,lh=Uo[--So],Uo[So]=null;for(;t===Ri;)Ri=Tn[--Fn],Tn[Fn]=null,yA=Tn[--Fn],Tn[Fn]=null,BA=Tn[--Fn],Tn[Fn]=null}var vn=null,yn=null,Vt=!1,Hn=null;function V_(t,e){var r=Un(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function tv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,yn=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ri!==null?{id:BA,overflow:yA}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Un(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,vn=t,yn=null,!0):!1;default:return!1}}function em(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tm(t){if(Vt){var e=yn;if(e){var r=e;if(!tv(t,e)){if(em(t))throw Error(Ae(418));e=Is(r.nextSibling);var n=vn;e&&tv(t,e)?V_(n,r):(t.flags=t.flags&-4097|2,Vt=!1,vn=t)}}else{if(em(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Vt=!1,vn=t}}}function rv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function Du(t){if(t!==vn)return!1;if(!Vt)return rv(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jp(t.type,t.memoizedProps)),e&&(e=yn)){if(em(t))throw K_(),Error(Ae(418));for(;e;)V_(t,e),e=Is(e.nextSibling)}if(rv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){yn=Is(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=vn?Is(t.stateNode.nextSibling):null;return!0}function K_(){for(var t=yn;t;)t=Is(t.nextSibling)}function Yo(){yn=vn=null,Vt=!1}function G0(t){Hn===null?Hn=[t]:Hn.push(t)}var rk=LA.ReactCurrentBatchConfig;function Al(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ae(309));var n=r.stateNode}if(!n)throw Error(Ae(147,t));var A=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=A.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ae(284));if(!r._owner)throw Error(Ae(290,t))}return t}function Pu(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nv(t){var e=t._init;return e(t._payload)}function G_(t){function e(x,m){if(t){var I=x.deletions;I===null?(x.deletions=[m],x.flags|=16):I.push(m)}}function r(x,m){if(!t)return null;for(;m!==null;)e(x,m),m=m.sibling;return null}function n(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function A(x,m){return x=Ts(x,m),x.index=0,x.sibling=null,x}function s(x,m,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<m?(x.flags|=2,m):I):(x.flags|=2,m)):(x.flags|=1048576,m)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,m,I,F){return m===null||m.tag!==6?(m=Og(I,x.mode,F),m.return=x,m):(m=A(m,I),m.return=x,m)}function o(x,m,I,F){var R=I.type;return R===_o?d(x,m,I.props.children,F,I.key):m!==null&&(m.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ts&&nv(R)===m.type)?(F=A(m,I.props),F.ref=Al(x,m,I),F.return=x,F):(F=Sd(I.type,I.key,I.props,null,x.mode,F),F.ref=Al(x,m,I),F.return=x,F)}function c(x,m,I,F){return m===null||m.tag!==4||m.stateNode.containerInfo!==I.containerInfo||m.stateNode.implementation!==I.implementation?(m=Hg(I,x.mode,F),m.return=x,m):(m=A(m,I.children||[]),m.return=x,m)}function d(x,m,I,F,R){return m===null||m.tag!==7?(m=Ti(I,x.mode,F,R),m.return=x,m):(m=A(m,I),m.return=x,m)}function h(x,m,I){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Og(""+m,x.mode,I),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Eu:return I=Sd(m.type,m.key,m.props,null,x.mode,I),I.ref=Al(x,null,m),I.return=x,I;case Io:return m=Hg(m,x.mode,I),m.return=x,m;case ts:var F=m._init;return h(x,F(m._payload),I)}if(wl(m)||Za(m))return m=Ti(m,x.mode,I,null),m.return=x,m;Pu(x,m)}return null}function f(x,m,I,F){var R=m!==null?m.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return R!==null?null:a(x,m,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Eu:return I.key===R?o(x,m,I,F):null;case Io:return I.key===R?c(x,m,I,F):null;case ts:return R=I._init,f(x,m,R(I._payload),F)}if(wl(I)||Za(I))return R!==null?null:d(x,m,I,F,null);Pu(x,I)}return null}function w(x,m,I,F,R){if(typeof F=="string"&&F!==""||typeof F=="number")return x=x.get(I)||null,a(m,x,""+F,R);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Eu:return x=x.get(F.key===null?I:F.key)||null,o(m,x,F,R);case Io:return x=x.get(F.key===null?I:F.key)||null,c(m,x,F,R);case ts:var U=F._init;return w(x,m,I,U(F._payload),R)}if(wl(F)||Za(F))return x=x.get(I)||null,d(m,x,F,R,null);Pu(m,F)}return null}function y(x,m,I,F){for(var R=null,U=null,v=m,C=m=0,_=null;v!==null&&C<I.length;C++){v.index>C?(_=v,v=null):_=v.sibling;var Q=f(x,v,I[C],F);if(Q===null){v===null&&(v=_);break}t&&v&&Q.alternate===null&&e(x,v),m=s(Q,m,C),U===null?R=Q:U.sibling=Q,U=Q,v=_}if(C===I.length)return r(x,v),Vt&&fi(x,C),R;if(v===null){for(;C<I.length;C++)v=h(x,I[C],F),v!==null&&(m=s(v,m,C),U===null?R=v:U.sibling=v,U=v);return Vt&&fi(x,C),R}for(v=n(x,v);C<I.length;C++)_=w(v,x,C,I[C],F),_!==null&&(t&&_.alternate!==null&&v.delete(_.key===null?C:_.key),m=s(_,m,C),U===null?R=_:U.sibling=_,U=_);return t&&v.forEach(function(N){return e(x,N)}),Vt&&fi(x,C),R}function B(x,m,I,F){var R=Za(I);if(typeof R!="function")throw Error(Ae(150));if(I=R.call(I),I==null)throw Error(Ae(151));for(var U=R=null,v=m,C=m=0,_=null,Q=I.next();v!==null&&!Q.done;C++,Q=I.next()){v.index>C?(_=v,v=null):_=v.sibling;var N=f(x,v,Q.value,F);if(N===null){v===null&&(v=_);break}t&&v&&N.alternate===null&&e(x,v),m=s(N,m,C),U===null?R=N:U.sibling=N,U=N,v=_}if(Q.done)return r(x,v),Vt&&fi(x,C),R;if(v===null){for(;!Q.done;C++,Q=I.next())Q=h(x,Q.value,F),Q!==null&&(m=s(Q,m,C),U===null?R=Q:U.sibling=Q,U=Q);return Vt&&fi(x,C),R}for(v=n(x,v);!Q.done;C++,Q=I.next())Q=w(v,x,C,Q.value,F),Q!==null&&(t&&Q.alternate!==null&&v.delete(Q.key===null?C:Q.key),m=s(Q,m,C),U===null?R=Q:U.sibling=Q,U=Q);return t&&v.forEach(function(L){return e(x,L)}),Vt&&fi(x,C),R}function E(x,m,I,F){if(typeof I=="object"&&I!==null&&I.type===_o&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Eu:e:{for(var R=I.key,U=m;U!==null;){if(U.key===R){if(R=I.type,R===_o){if(U.tag===7){r(x,U.sibling),m=A(U,I.props.children),m.return=x,x=m;break e}}else if(U.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ts&&nv(R)===U.type){r(x,U.sibling),m=A(U,I.props),m.ref=Al(x,U,I),m.return=x,x=m;break e}r(x,U);break}else e(x,U);U=U.sibling}I.type===_o?(m=Ti(I.props.children,x.mode,F,I.key),m.return=x,x=m):(F=Sd(I.type,I.key,I.props,null,x.mode,F),F.ref=Al(x,m,I),F.return=x,x=F)}return i(x);case Io:e:{for(U=I.key;m!==null;){if(m.key===U)if(m.tag===4&&m.stateNode.containerInfo===I.containerInfo&&m.stateNode.implementation===I.implementation){r(x,m.sibling),m=A(m,I.children||[]),m.return=x,x=m;break e}else{r(x,m);break}else e(x,m);m=m.sibling}m=Hg(I,x.mode,F),m.return=x,x=m}return i(x);case ts:return U=I._init,E(x,m,U(I._payload),F)}if(wl(I))return y(x,m,I,F);if(Za(I))return B(x,m,I,F);Pu(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,m!==null&&m.tag===6?(r(x,m.sibling),m=A(m,I),m.return=x,x=m):(r(x,m),m=Og(I,x.mode,F),m.return=x,x=m),i(x)):r(x,m)}return E}var Zo=G_(!0),z_=G_(!1),ch=Js(null),uh=null,ko=null,z0=null;function $0(){z0=ko=uh=null}function W0(t){var e=ch.current;Lt(ch),t._currentValue=e}function rm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ho(t,e){uh=t,z0=ko=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(z0!==t)if(t={context:t,memoizedValue:e,next:null},ko===null){if(uh===null)throw Error(Ae(308));ko=t,uh.dependencies={lanes:0,firstContext:t}}else ko=ko.next=t;return e}var Ii=null;function q0(t){Ii===null?Ii=[t]:Ii.push(t)}function $_(t,e,r,n){var A=e.interleaved;return A===null?(r.next=r,q0(e)):(r.next=A.next,A.next=r),e.interleaved=r,UA(t,n)}function UA(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var rs=!1;function J0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function EA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function _s(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,wt&2){var A=n.pending;return A===null?e.next=e:(e.next=A.next,A.next=e),n.pending=e,UA(t,r)}return A=n.interleaved,A===null?(e.next=e,q0(n)):(e.next=A.next,A.next=e),n.interleaved=e,UA(t,r)}function Ed(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,N0(t,r)}}function Av(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var A=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?A=s=i:s=s.next=i,r=r.next}while(r!==null);s===null?A=s=e:s=s.next=e}else A=s=e;r={baseState:n.baseState,firstBaseUpdate:A,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function dh(t,e,r,n){var A=t.updateQueue;rs=!1;var s=A.firstBaseUpdate,i=A.lastBaseUpdate,a=A.shared.pending;if(a!==null){A.shared.pending=null;var o=a,c=o.next;o.next=null,i===null?s=c:i.next=c,i=o;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=o))}if(s!==null){var h=A.baseState;i=0,d=c=o=null,a=s;do{var f=a.lane,w=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,B=a;switch(f=e,w=r,B.tag){case 1:if(y=B.payload,typeof y=="function"){h=y.call(w,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=B.payload,f=typeof y=="function"?y.call(w,h,f):y,f==null)break e;h=Jt({},h,f);break e;case 2:rs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=A.effects,f===null?A.effects=[a]:f.push(a))}else w={eventTime:w,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=w,o=h):d=d.next=w,i|=f;if(a=a.next,a===null){if(a=A.shared.pending,a===null)break;f=a,a=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(d===null&&(o=h),A.baseState=o,A.firstBaseUpdate=c,A.lastBaseUpdate=d,e=A.shared.interleaved,e!==null){A=e;do i|=A.lane,A=A.next;while(A!==e)}else s===null&&(A.shared.lanes=0);Di|=i,t.lanes=i,t.memoizedState=h}}function sv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],A=n.callback;if(A!==null){if(n.callback=null,n=r,typeof A!="function")throw Error(Ae(191,A));A.call(n)}}}var Hc={},nA=Js(Hc),hc=Js(Hc),fc=Js(Hc);function _i(t){if(t===Hc)throw Error(Ae(174));return t}function X0(t,e){switch(Qt(fc,e),Qt(hc,t),Qt(nA,Hc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dp(e,t)}Lt(nA),Qt(nA,e)}function ea(){Lt(nA),Lt(hc),Lt(fc)}function q_(t){_i(fc.current);var e=_i(nA.current),r=Dp(e,t.type);e!==r&&(Qt(hc,t),Qt(nA,r))}function Y0(t){hc.current===t&&(Lt(nA),Lt(hc))}var $t=Js(0);function hh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ng=[];function Z0(){for(var t=0;t<Ng.length;t++)Ng[t]._workInProgressVersionPrimary=null;Ng.length=0}var bd=LA.ReactCurrentDispatcher,Dg=LA.ReactCurrentBatchConfig,Ni=0,Wt=null,dr=null,yr=null,fh=!1,Ml=!1,gc=0,nk=0;function Lr(){throw Error(Ae(321))}function ew(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!zn(t[r],e[r]))return!1;return!0}function tw(t,e,r,n,A,s){if(Ni=s,Wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bd.current=t===null||t.memoizedState===null?ok:ak,t=r(n,A),Ml){s=0;do{if(Ml=!1,gc=0,25<=s)throw Error(Ae(301));s+=1,yr=dr=null,e.updateQueue=null,bd.current=lk,t=r(n,A)}while(Ml)}if(bd.current=gh,e=dr!==null&&dr.next!==null,Ni=0,yr=dr=Wt=null,fh=!1,e)throw Error(Ae(300));return t}function rw(){var t=gc!==0;return gc=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?Wt.memoizedState=yr=t:yr=yr.next=t,yr}function Dn(){if(dr===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=dr.next;var e=yr===null?Wt.memoizedState:yr.next;if(e!==null)yr=e,dr=t;else{if(t===null)throw Error(Ae(310));dr=t,t={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},yr===null?Wt.memoizedState=yr=t:yr=yr.next=t}return yr}function pc(t,e){return typeof e=="function"?e(t):e}function Pg(t){var e=Dn(),r=e.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=t;var n=dr,A=n.baseQueue,s=r.pending;if(s!==null){if(A!==null){var i=A.next;A.next=s.next,s.next=i}n.baseQueue=A=s,r.pending=null}if(A!==null){s=A.next,n=n.baseState;var a=i=null,o=null,c=s;do{var d=c.lane;if((Ni&d)===d)o!==null&&(o=o.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};o===null?(a=o=h,i=n):o=o.next=h,Wt.lanes|=d,Di|=d}c=c.next}while(c!==null&&c!==s);o===null?i=n:o.next=a,zn(n,e.memoizedState)||(on=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=o,r.lastRenderedState=n}if(t=r.interleaved,t!==null){A=t;do s=A.lane,Wt.lanes|=s,Di|=s,A=A.next;while(A!==t)}else A===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Lg(t){var e=Dn(),r=e.queue;if(r===null)throw Error(Ae(311));r.lastRenderedReducer=t;var n=r.dispatch,A=r.pending,s=e.memoizedState;if(A!==null){r.pending=null;var i=A=A.next;do s=t(s,i.action),i=i.next;while(i!==A);zn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function J_(){}function X_(t,e){var r=Wt,n=Dn(),A=e(),s=!zn(n.memoizedState,A);if(s&&(n.memoizedState=A,on=!0),n=n.queue,nw(eE.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||yr!==null&&yr.memoizedState.tag&1){if(r.flags|=2048,mc(9,Z_.bind(null,r,n,A,e),void 0,null),xr===null)throw Error(Ae(349));Ni&30||Y_(r,e,A)}return A}function Y_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Z_(t,e,r,n){e.value=r,e.getSnapshot=n,tE(e)&&rE(t)}function eE(t,e,r){return r(function(){tE(e)&&rE(t)})}function tE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!zn(t,r)}catch{return!0}}function rE(t){var e=UA(t,1);e!==null&&Kn(e,t,1,-1)}function iv(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:t},e.queue=t,t=t.dispatch=ik.bind(null,Wt,t),[e.memoizedState,t]}function mc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function nE(){return Dn().memoizedState}function Td(t,e,r,n){var A=Xn();Wt.flags|=t,A.memoizedState=mc(1|e,r,void 0,n===void 0?null:n)}function cf(t,e,r,n){var A=Dn();n=n===void 0?null:n;var s=void 0;if(dr!==null){var i=dr.memoizedState;if(s=i.destroy,n!==null&&ew(n,i.deps)){A.memoizedState=mc(e,r,s,n);return}}Wt.flags|=t,A.memoizedState=mc(1|e,r,s,n)}function ov(t,e){return Td(8390656,8,t,e)}function nw(t,e){return cf(2048,8,t,e)}function AE(t,e){return cf(4,2,t,e)}function sE(t,e){return cf(4,4,t,e)}function iE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oE(t,e,r){return r=r!=null?r.concat([t]):null,cf(4,4,iE.bind(null,e,t),r)}function Aw(){}function aE(t,e){var r=Dn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ew(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function lE(t,e){var r=Dn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&ew(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function cE(t,e,r){return Ni&21?(zn(r,e)||(r=g_(),Wt.lanes|=r,Di|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=r)}function Ak(t,e){var r=xt;xt=r!==0&&4>r?r:4,t(!0);var n=Dg.transition;Dg.transition={};try{t(!1),e()}finally{xt=r,Dg.transition=n}}function uE(){return Dn().memoizedState}function sk(t,e,r){var n=bs(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},dE(t))hE(e,r);else if(r=$_(t,e,r,n),r!==null){var A=Yr();Kn(r,t,n,A),fE(r,e,n)}}function ik(t,e,r){var n=bs(t),A={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(dE(t))hE(e,A);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,r);if(A.hasEagerState=!0,A.eagerState=a,zn(a,i)){var o=e.interleaved;o===null?(A.next=A,q0(e)):(A.next=o.next,o.next=A),e.interleaved=A;return}}catch{}finally{}r=$_(t,e,A,n),r!==null&&(A=Yr(),Kn(r,t,n,A),fE(r,e,n))}}function dE(t){var e=t.alternate;return t===Wt||e!==null&&e===Wt}function hE(t,e){Ml=fh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function fE(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,N0(t,r)}}var gh={readContext:Nn,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},ok={readContext:Nn,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:ov,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Td(4194308,4,iE.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Td(4194308,4,t,e)},useInsertionEffect:function(t,e){return Td(4,2,t,e)},useMemo:function(t,e){var r=Xn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Xn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=sk.bind(null,Wt,t),[n.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:iv,useDebugValue:Aw,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=iv(!1),e=t[0];return t=Ak.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Wt,A=Xn();if(Vt){if(r===void 0)throw Error(Ae(407));r=r()}else{if(r=e(),xr===null)throw Error(Ae(349));Ni&30||Y_(n,e,r)}A.memoizedState=r;var s={value:r,getSnapshot:e};return A.queue=s,ov(eE.bind(null,n,s,t),[t]),n.flags|=2048,mc(9,Z_.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Xn(),e=xr.identifierPrefix;if(Vt){var r=yA,n=BA;r=(n&~(1<<32-Vn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=gc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=nk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ak={readContext:Nn,useCallback:aE,useContext:Nn,useEffect:nw,useImperativeHandle:oE,useInsertionEffect:AE,useLayoutEffect:sE,useMemo:lE,useReducer:Pg,useRef:nE,useState:function(){return Pg(pc)},useDebugValue:Aw,useDeferredValue:function(t){var e=Dn();return cE(e,dr.memoizedState,t)},useTransition:function(){var t=Pg(pc)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:J_,useSyncExternalStore:X_,useId:uE,unstable_isNewReconciler:!1},lk={readContext:Nn,useCallback:aE,useContext:Nn,useEffect:nw,useImperativeHandle:oE,useInsertionEffect:AE,useLayoutEffect:sE,useMemo:lE,useReducer:Lg,useRef:nE,useState:function(){return Lg(pc)},useDebugValue:Aw,useDeferredValue:function(t){var e=Dn();return dr===null?e.memoizedState=t:cE(e,dr.memoizedState,t)},useTransition:function(){var t=Lg(pc)[0],e=Dn().memoizedState;return[t,e]},useMutableSource:J_,useSyncExternalStore:X_,useId:uE,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function nm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Jt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var uf={isMounted:function(t){return(t=t._reactInternals)?Xi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Yr(),A=bs(t),s=EA(n,A);s.payload=e,r!=null&&(s.callback=r),e=_s(t,s,A),e!==null&&(Kn(e,t,A,n),Ed(e,t,A))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Yr(),A=bs(t),s=EA(n,A);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=_s(t,s,A),e!==null&&(Kn(e,t,A,n),Ed(e,t,A))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Yr(),n=bs(t),A=EA(r,n);A.tag=2,e!=null&&(A.callback=e),e=_s(t,A,n),e!==null&&(Kn(e,t,n,r),Ed(e,t,n))}};function av(t,e,r,n,A,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,i):e.prototype&&e.prototype.isPureReactComponent?!lc(r,n)||!lc(A,s):!0}function gE(t,e,r){var n=!1,A=Ps,s=e.contextType;return typeof s=="object"&&s!==null?s=Nn(s):(A=dn(e)?ki:$r.current,n=e.contextTypes,s=(n=n!=null)?Xo(t,A):Ps),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=s),e}function lv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&uf.enqueueReplaceState(e,e.state,null)}function Am(t,e,r,n){var A=t.stateNode;A.props=r,A.state=t.memoizedState,A.refs={},J0(t);var s=e.contextType;typeof s=="object"&&s!==null?A.context=Nn(s):(s=dn(e)?ki:$r.current,A.context=Xo(t,s)),A.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nm(t,e,s,r),A.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(e=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),e!==A.state&&uf.enqueueReplaceState(A,A.state,null),dh(t,r,A,n),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function ta(t,e){try{var r="",n=e;do r+=PU(n),n=n.return;while(n);var A=r}catch(s){A=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:A,digest:null}}function jg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function sm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ck=typeof WeakMap=="function"?WeakMap:Map;function pE(t,e,r){r=EA(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){mh||(mh=!0,gm=n),sm(t,e)},r}function mE(t,e,r){r=EA(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var A=e.value;r.payload=function(){return n(A)},r.callback=function(){sm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){sm(t,e),typeof n!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function cv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new ck;var A=new Set;n.set(e,A)}else A=n.get(e),A===void 0&&(A=new Set,n.set(e,A));A.has(r)||(A.add(r),t=Ik.bind(null,t,e,r),e.then(t,t))}function uv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dv(t,e,r,n,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=EA(-1,1),e.tag=2,_s(r,e,1))),r.lanes|=1),t)}var uk=LA.ReactCurrentOwner,on=!1;function Jr(t,e,r,n){e.child=t===null?z_(e,null,r,n):Zo(e,t.child,r,n)}function hv(t,e,r,n,A){r=r.render;var s=e.ref;return Ho(e,A),n=tw(t,e,r,n,s,A),r=rw(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,SA(t,e,A)):(Vt&&r&&V0(e),e.flags|=1,Jr(t,e,n,A),e.child)}function fv(t,e,r,n,A){if(t===null){var s=r.type;return typeof s=="function"&&!dw(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,wE(t,e,s,n,A)):(t=Sd(r.type,null,n,e,e.mode,A),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&A)){var i=s.memoizedProps;if(r=r.compare,r=r!==null?r:lc,r(i,n)&&t.ref===e.ref)return SA(t,e,A)}return e.flags|=1,t=Ts(s,n),t.ref=e.ref,t.return=e,e.child=t}function wE(t,e,r,n,A){if(t!==null){var s=t.memoizedProps;if(lc(s,n)&&t.ref===e.ref)if(on=!1,e.pendingProps=n=s,(t.lanes&A)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,SA(t,e,A)}return im(t,e,r,n,A)}function BE(t,e,r){var n=e.pendingProps,A=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(No,mn),mn|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qt(No,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Qt(No,mn),mn|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Qt(No,mn),mn|=n;return Jr(t,e,A,r),e.child}function yE(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function im(t,e,r,n,A){var s=dn(r)?ki:$r.current;return s=Xo(e,s),Ho(e,A),r=tw(t,e,r,n,s,A),n=rw(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,SA(t,e,A)):(Vt&&n&&V0(e),e.flags|=1,Jr(t,e,r,A),e.child)}function gv(t,e,r,n,A){if(dn(r)){var s=!0;oh(e)}else s=!1;if(Ho(e,A),e.stateNode===null)Fd(t,e),gE(e,r,n),Am(e,r,n,A),n=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Nn(c):(c=dn(r)?ki:$r.current,c=Xo(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==n||o!==c)&&lv(e,i,n,c),rs=!1;var f=e.memoizedState;i.state=f,dh(e,n,i,A),o=e.memoizedState,a!==n||f!==o||un.current||rs?(typeof d=="function"&&(nm(e,r,d,n),o=e.memoizedState),(a=rs||av(e,r,a,n,f,o,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=o),i.props=n,i.state=o,i.context=c,n=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,W_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Mn(e.type,a),i.props=c,h=e.pendingProps,f=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=Nn(o):(o=dn(r)?ki:$r.current,o=Xo(e,o));var w=r.getDerivedStateFromProps;(d=typeof w=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||f!==o)&&lv(e,i,n,o),rs=!1,f=e.memoizedState,i.state=f,dh(e,n,i,A);var y=e.memoizedState;a!==h||f!==y||un.current||rs?(typeof w=="function"&&(nm(e,r,w,n),y=e.memoizedState),(c=rs||av(e,r,c,n,f,y,o)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,o)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),i.props=n,i.state=y,i.context=o,n=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return om(t,e,r,n,s,A)}function om(t,e,r,n,A,s){yE(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return A&&ev(e,r,!1),SA(t,e,s);n=e.stateNode,uk.current=e;var a=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=Zo(e,t.child,null,s),e.child=Zo(e,null,a,s)):Jr(t,e,a,s),e.memoizedState=n.state,A&&ev(e,r,!0),e.child}function vE(t){var e=t.stateNode;e.pendingContext?Zy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zy(t,e.context,!1),X0(t,e.containerInfo)}function pv(t,e,r,n,A){return Yo(),G0(A),e.flags|=256,Jr(t,e,r,n),e.child}var am={dehydrated:null,treeContext:null,retryLane:0};function lm(t){return{baseLanes:t,cachePool:null,transitions:null}}function xE(t,e,r){var n=e.pendingProps,A=$t.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(A&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),Qt($t,A&1),t===null)return tm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,s?(n=e.mode,s=e.child,i={mode:"hidden",children:i},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ff(i,n,0,null),t=Ti(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lm(r),e.memoizedState=am,t):sw(e,i));if(A=t.memoizedState,A!==null&&(a=A.dehydrated,a!==null))return dk(t,e,i,n,a,A,r);if(s){s=n.fallback,i=e.mode,A=t.child,a=A.sibling;var o={mode:"hidden",children:n.children};return!(i&1)&&e.child!==A?(n=e.child,n.childLanes=0,n.pendingProps=o,e.deletions=null):(n=Ts(A,o),n.subtreeFlags=A.subtreeFlags&14680064),a!==null?s=Ts(a,s):(s=Ti(s,i,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,i=t.child.memoizedState,i=i===null?lm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~r,e.memoizedState=am,n}return s=t.child,t=s.sibling,n=Ts(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function sw(t,e){return e=ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lu(t,e,r,n){return n!==null&&G0(n),Zo(e,t.child,null,r),t=sw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dk(t,e,r,n,A,s,i){if(r)return e.flags&256?(e.flags&=-257,n=jg(Error(Ae(422))),Lu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,A=e.mode,n=ff({mode:"visible",children:n.children},A,0,null),s=Ti(s,A,i,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Zo(e,t.child,null,i),e.child.memoizedState=lm(i),e.memoizedState=am,s);if(!(e.mode&1))return Lu(t,e,i,null);if(A.data==="$!"){if(n=A.nextSibling&&A.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Ae(419)),n=jg(s,n,void 0),Lu(t,e,i,n)}if(a=(i&t.childLanes)!==0,on||a){if(n=xr,n!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(n.suspendedLanes|i)?0:A,A!==0&&A!==s.retryLane&&(s.retryLane=A,UA(t,A),Kn(n,t,A,-1))}return uw(),n=jg(Error(Ae(421))),Lu(t,e,i,n)}return A.data==="$?"?(e.flags|=128,e.child=t.child,e=_k.bind(null,t),A._reactRetry=e,null):(t=s.treeContext,yn=Is(A.nextSibling),vn=e,Vt=!0,Hn=null,t!==null&&(Tn[Fn++]=BA,Tn[Fn++]=yA,Tn[Fn++]=Ri,BA=t.id,yA=t.overflow,Ri=e),e=sw(e,n.children),e.flags|=4096,e)}function mv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),rm(t.return,e,r)}function Mg(t,e,r,n,A){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:A}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=A)}function CE(t,e,r){var n=e.pendingProps,A=n.revealOrder,s=n.tail;if(Jr(t,e,n.children,r),n=$t.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mv(t,r,e);else if(t.tag===19)mv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Qt($t,n),!(e.mode&1))e.memoizedState=null;else switch(A){case"forwards":for(r=e.child,A=null;r!==null;)t=r.alternate,t!==null&&hh(t)===null&&(A=r),r=r.sibling;r=A,r===null?(A=e.child,e.child=null):(A=r.sibling,r.sibling=null),Mg(e,!1,A,r,s);break;case"backwards":for(r=null,A=e.child,e.child=null;A!==null;){if(t=A.alternate,t!==null&&hh(t)===null){e.child=A;break}t=A.sibling,A.sibling=r,r=A,A=t}Mg(e,!0,r,null,s);break;case"together":Mg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function SA(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,r=Ts(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ts(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function hk(t,e,r){switch(e.tag){case 3:vE(e),Yo();break;case 5:q_(e);break;case 1:dn(e.type)&&oh(e);break;case 4:X0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,A=e.memoizedProps.value;Qt(ch,n._currentValue),n._currentValue=A;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Qt($t,$t.current&1),e.flags|=128,null):r&e.child.childLanes?xE(t,e,r):(Qt($t,$t.current&1),t=SA(t,e,r),t!==null?t.sibling:null);Qt($t,$t.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return CE(t,e,r);e.flags|=128}if(A=e.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Qt($t,$t.current),n)break;return null;case 22:case 23:return e.lanes=0,BE(t,e,r)}return SA(t,e,r)}var IE,cm,_E,EE;IE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cm=function(){};_E=function(t,e,r,n){var A=t.memoizedProps;if(A!==n){t=e.stateNode,_i(nA.current);var s=null;switch(r){case"input":A=Sp(t,A),n=Sp(t,n),s=[];break;case"select":A=Jt({},A,{value:void 0}),n=Jt({},n,{value:void 0}),s=[];break;case"textarea":A=Np(t,A),n=Np(t,n),s=[];break;default:typeof A.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=sh)}Pp(r,n);var i;r=null;for(c in A)if(!n.hasOwnProperty(c)&&A.hasOwnProperty(c)&&A[c]!=null)if(c==="style"){var a=A[c];for(i in a)a.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var o=n[c];if(a=A!=null?A[c]:void 0,n.hasOwnProperty(c)&&o!==a&&(o!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&a[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(s||(s=[]),s.push(c,r)),r=o;else c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(s=s||[]).push(c,o)):c==="children"?typeof o!="string"&&typeof o!="number"||(s=s||[]).push(c,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rc.hasOwnProperty(c)?(o!=null&&c==="onScroll"&&Nt("scroll",t),s||a===o||(s=[])):(s=s||[]).push(c,o))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};EE=function(t,e,r,n){r!==n&&(e.flags|=4)};function sl(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function jr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var A=t.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags&14680064,n|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)r|=A.lanes|A.childLanes,n|=A.subtreeFlags,n|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function fk(t,e,r){var n=e.pendingProps;switch(K0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(e),null;case 1:return dn(e.type)&&ih(),jr(e),null;case 3:return n=e.stateNode,ea(),Lt(un),Lt($r),Z0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(wm(Hn),Hn=null))),cm(t,e),jr(e),null;case 5:Y0(e);var A=_i(fc.current);if(r=e.type,t!==null&&e.stateNode!=null)_E(t,e,r,n,A),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ae(166));return jr(e),null}if(t=_i(nA.current),Du(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Zn]=e,n[dc]=s,t=(e.mode&1)!==0,r){case"dialog":Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":case"embed":Nt("load",n);break;case"video":case"audio":for(A=0;A<yl.length;A++)Nt(yl[A],n);break;case"source":Nt("error",n);break;case"img":case"image":case"link":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"input":Ey(n,s),Nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Nt("invalid",n);break;case"textarea":Ty(n,s),Nt("invalid",n)}Pp(r,s),A=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nu(n.textContent,a,t),A=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nu(n.textContent,a,t),A=["children",""+a]):rc.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Nt("scroll",n)}switch(r){case"input":bu(n),by(n,s,!0);break;case"textarea":bu(n),Fy(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=sh)}n=A,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e_(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[Zn]=e,t[dc]=n,IE(t,e,!1,!1),e.stateNode=t;e:{switch(i=Lp(r,n),r){case"dialog":Nt("cancel",t),Nt("close",t),A=n;break;case"iframe":case"object":case"embed":Nt("load",t),A=n;break;case"video":case"audio":for(A=0;A<yl.length;A++)Nt(yl[A],t);A=n;break;case"source":Nt("error",t),A=n;break;case"img":case"image":case"link":Nt("error",t),Nt("load",t),A=n;break;case"details":Nt("toggle",t),A=n;break;case"input":Ey(t,n),A=Sp(t,n),Nt("invalid",t);break;case"option":A=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},A=Jt({},n,{value:void 0}),Nt("invalid",t);break;case"textarea":Ty(t,n),A=Np(t,n),Nt("invalid",t);break;default:A=n}Pp(r,A),a=A;for(s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="style"?n_(t,o):s==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&t_(t,o)):s==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&nc(t,o):typeof o=="number"&&nc(t,""+o):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rc.hasOwnProperty(s)?o!=null&&s==="onScroll"&&Nt("scroll",t):o!=null&&F0(t,s,o,i))}switch(r){case"input":bu(t),by(t,n,!1);break;case"textarea":bu(t),Fy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ds(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Lo(t,!!n.multiple,s,!1):n.defaultValue!=null&&Lo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=sh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jr(e),null;case 6:if(t&&e.stateNode!=null)EE(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ae(166));if(r=_i(fc.current),_i(nA.current),Du(e)){if(n=e.stateNode,r=e.memoizedProps,n[Zn]=e,(s=n.nodeValue!==r)&&(t=vn,t!==null))switch(t.tag){case 3:Nu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nu(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Zn]=e,e.stateNode=n}return jr(e),null;case 13:if(Lt($t),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&yn!==null&&e.mode&1&&!(e.flags&128))K_(),Yo(),e.flags|=98560,s=!1;else if(s=Du(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[Zn]=e}else Yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jr(e),s=!1}else Hn!==null&&(wm(Hn),Hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||$t.current&1?fr===0&&(fr=3):uw())),e.updateQueue!==null&&(e.flags|=4),jr(e),null);case 4:return ea(),cm(t,e),t===null&&cc(e.stateNode.containerInfo),jr(e),null;case 10:return W0(e.type._context),jr(e),null;case 17:return dn(e.type)&&ih(),jr(e),null;case 19:if(Lt($t),s=e.memoizedState,s===null)return jr(e),null;if(n=(e.flags&128)!==0,i=s.rendering,i===null)if(n)sl(s,!1);else{if(fr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=hh(t),i!==null){for(e.flags|=128,sl(s,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Qt($t,$t.current&1|2),e.child}t=t.sibling}s.tail!==null&&sr()>ra&&(e.flags|=128,n=!0,sl(s,!1),e.lanes=4194304)}else{if(!n)if(t=hh(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),sl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Vt)return jr(e),null}else 2*sr()-s.renderingStartTime>ra&&r!==1073741824&&(e.flags|=128,n=!0,sl(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(r=s.last,r!==null?r.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=sr(),e.sibling=null,r=$t.current,Qt($t,n?r&1|2:r&1),e):(jr(e),null);case 22:case 23:return cw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?mn&1073741824&&(jr(e),e.subtreeFlags&6&&(e.flags|=8192)):jr(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function gk(t,e){switch(K0(e),e.tag){case 1:return dn(e.type)&&ih(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ea(),Lt(un),Lt($r),Z0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Y0(e),null;case 13:if(Lt($t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt($t),null;case 4:return ea(),null;case 10:return W0(e.type._context),null;case 22:case 23:return cw(),null;case 24:return null;default:return null}}var ju=!1,Kr=!1,pk=typeof WeakSet=="function"?WeakSet:Set,De=null;function Ro(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Zt(t,e,n)}else r.current=null}function um(t,e,r){try{r()}catch(n){Zt(t,e,n)}}var wv=!1;function mk(t,e){if(Wp=rh,t=U_(),H0(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var A=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var i=0,a=-1,o=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var w;h!==r||A!==0&&h.nodeType!==3||(a=i+A),h!==s||n!==0&&h.nodeType!==3||(o=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(w=h.firstChild)!==null;)f=h,h=w;for(;;){if(h===t)break t;if(f===r&&++c===A&&(a=i),f===s&&++d===n&&(o=i),(w=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=w}r=a===-1||o===-1?null:{start:a,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(qp={focusedElem:t,selectionRange:r},rh=!1,De=e;De!==null;)if(e=De,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,De=t;else for(;De!==null;){e=De;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var B=y.memoizedProps,E=y.memoizedState,x=e.stateNode,m=x.getSnapshotBeforeUpdate(e.elementType===e.type?B:Mn(e.type,B),E);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(F){Zt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}return y=wv,wv=!1,y}function Ol(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var A=n=n.next;do{if((A.tag&t)===t){var s=A.destroy;A.destroy=void 0,s!==void 0&&um(e,r,s)}A=A.next}while(A!==n)}}function df(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function dm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function bE(t){var e=t.alternate;e!==null&&(t.alternate=null,bE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[dc],delete e[Yp],delete e[ZS],delete e[ek])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TE(t){return t.tag===5||t.tag===3||t.tag===4}function Bv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=sh));else if(n!==4&&(t=t.child,t!==null))for(hm(t,e,r),t=t.sibling;t!==null;)hm(t,e,r),t=t.sibling}function fm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(fm(t,e,r),t=t.sibling;t!==null;)fm(t,e,r),t=t.sibling}var Fr=null,On=!1;function qA(t,e,r){for(r=r.child;r!==null;)FE(t,e,r),r=r.sibling}function FE(t,e,r){if(rA&&typeof rA.onCommitFiberUnmount=="function")try{rA.onCommitFiberUnmount(nf,r)}catch{}switch(r.tag){case 5:Kr||Ro(r,e);case 6:var n=Fr,A=On;Fr=null,qA(t,e,r),Fr=n,On=A,Fr!==null&&(On?(t=Fr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Fr.removeChild(r.stateNode));break;case 18:Fr!==null&&(On?(t=Fr,r=r.stateNode,t.nodeType===8?kg(t.parentNode,r):t.nodeType===1&&kg(t,r),oc(t)):kg(Fr,r.stateNode));break;case 4:n=Fr,A=On,Fr=r.stateNode.containerInfo,On=!0,qA(t,e,r),Fr=n,On=A;break;case 0:case 11:case 14:case 15:if(!Kr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){A=n=n.next;do{var s=A,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&um(r,e,i),A=A.next}while(A!==n)}qA(t,e,r);break;case 1:if(!Kr&&(Ro(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Zt(r,e,a)}qA(t,e,r);break;case 21:qA(t,e,r);break;case 22:r.mode&1?(Kr=(n=Kr)||r.memoizedState!==null,qA(t,e,r),Kr=n):qA(t,e,r);break;default:qA(t,e,r)}}function yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new pk),e.forEach(function(n){var A=Ek.bind(null,t,n);r.has(n)||(r.add(n),n.then(A,A))})}}function Ln(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var A=r[n];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Fr=a.stateNode,On=!1;break e;case 3:Fr=a.stateNode.containerInfo,On=!0;break e;case 4:Fr=a.stateNode.containerInfo,On=!0;break e}a=a.return}if(Fr===null)throw Error(Ae(160));FE(s,i,A),Fr=null,On=!1;var o=A.alternate;o!==null&&(o.return=null),A.return=null}catch(c){Zt(A,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QE(e,t),e=e.sibling}function QE(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),qn(t),n&4){try{Ol(3,t,t.return),df(3,t)}catch(B){Zt(t,t.return,B)}try{Ol(5,t,t.return)}catch(B){Zt(t,t.return,B)}}break;case 1:Ln(e,t),qn(t),n&512&&r!==null&&Ro(r,r.return);break;case 5:if(Ln(e,t),qn(t),n&512&&r!==null&&Ro(r,r.return),t.flags&32){var A=t.stateNode;try{nc(A,"")}catch(B){Zt(t,t.return,B)}}if(n&4&&(A=t.stateNode,A!=null)){var s=t.memoizedProps,i=r!==null?r.memoizedProps:s,a=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&YI(A,s),Lp(a,i);var c=Lp(a,s);for(i=0;i<o.length;i+=2){var d=o[i],h=o[i+1];d==="style"?n_(A,h):d==="dangerouslySetInnerHTML"?t_(A,h):d==="children"?nc(A,h):F0(A,d,h,c)}switch(a){case"input":kp(A,s);break;case"textarea":ZI(A,s);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Lo(A,!!s.multiple,w,!1):f!==!!s.multiple&&(s.defaultValue!=null?Lo(A,!!s.multiple,s.defaultValue,!0):Lo(A,!!s.multiple,s.multiple?[]:"",!1))}A[dc]=s}catch(B){Zt(t,t.return,B)}}break;case 6:if(Ln(e,t),qn(t),n&4){if(t.stateNode===null)throw Error(Ae(162));A=t.stateNode,s=t.memoizedProps;try{A.nodeValue=s}catch(B){Zt(t,t.return,B)}}break;case 3:if(Ln(e,t),qn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{oc(e.containerInfo)}catch(B){Zt(t,t.return,B)}break;case 4:Ln(e,t),qn(t);break;case 13:Ln(e,t),qn(t),A=t.child,A.flags&8192&&(s=A.memoizedState!==null,A.stateNode.isHidden=s,!s||A.alternate!==null&&A.alternate.memoizedState!==null||(aw=sr())),n&4&&yv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Kr=(c=Kr)||d,Ln(e,t),Kr=c):Ln(e,t),qn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(De=t,d=t.child;d!==null;){for(h=De=d;De!==null;){switch(f=De,w=f.child,f.tag){case 0:case 11:case 14:case 15:Ol(4,f,f.return);break;case 1:Ro(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(B){Zt(n,r,B)}}break;case 5:Ro(f,f.return);break;case 22:if(f.memoizedState!==null){xv(h);continue}}w!==null?(w.return=f,De=w):xv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{A=h.stateNode,c?(s=A.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=r_("display",i))}catch(B){Zt(t,t.return,B)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(B){Zt(t,t.return,B)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ln(e,t),qn(t),n&4&&yv(t);break;case 21:break;default:Ln(e,t),qn(t)}}function qn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(TE(r)){var n=r;break e}r=r.return}throw Error(Ae(160))}switch(n.tag){case 5:var A=n.stateNode;n.flags&32&&(nc(A,""),n.flags&=-33);var s=Bv(t);fm(t,s,A);break;case 3:case 4:var i=n.stateNode.containerInfo,a=Bv(t);hm(t,a,i);break;default:throw Error(Ae(161))}}catch(o){Zt(t,t.return,o)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wk(t,e,r){De=t,UE(t)}function UE(t,e,r){for(var n=(t.mode&1)!==0;De!==null;){var A=De,s=A.child;if(A.tag===22&&n){var i=A.memoizedState!==null||ju;if(!i){var a=A.alternate,o=a!==null&&a.memoizedState!==null||Kr;a=ju;var c=Kr;if(ju=i,(Kr=o)&&!c)for(De=A;De!==null;)i=De,o=i.child,i.tag===22&&i.memoizedState!==null?Cv(A):o!==null?(o.return=i,De=o):Cv(A);for(;s!==null;)De=s,UE(s),s=s.sibling;De=A,ju=a,Kr=c}vv(t)}else A.subtreeFlags&8772&&s!==null?(s.return=A,De=s):vv(t)}}function vv(t){for(;De!==null;){var e=De;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kr||df(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Kr)if(r===null)n.componentDidMount();else{var A=e.elementType===e.type?r.memoizedProps:Mn(e.type,r.memoizedProps);n.componentDidUpdate(A,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sv(e,s,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}sv(e,i,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var o=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&oc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Kr||e.flags&512&&dm(e)}catch(f){Zt(e,e.return,f)}}if(e===t){De=null;break}if(r=e.sibling,r!==null){r.return=e.return,De=r;break}De=e.return}}function xv(t){for(;De!==null;){var e=De;if(e===t){De=null;break}var r=e.sibling;if(r!==null){r.return=e.return,De=r;break}De=e.return}}function Cv(t){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{df(4,e)}catch(o){Zt(e,r,o)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var A=e.return;try{n.componentDidMount()}catch(o){Zt(e,A,o)}}var s=e.return;try{dm(e)}catch(o){Zt(e,s,o)}break;case 5:var i=e.return;try{dm(e)}catch(o){Zt(e,i,o)}}}catch(o){Zt(e,e.return,o)}if(e===t){De=null;break}var a=e.sibling;if(a!==null){a.return=e.return,De=a;break}De=e.return}}var Bk=Math.ceil,ph=LA.ReactCurrentDispatcher,iw=LA.ReactCurrentOwner,Rn=LA.ReactCurrentBatchConfig,wt=0,xr=null,ur=null,Rr=0,mn=0,No=Js(0),fr=0,wc=null,Di=0,hf=0,ow=0,Hl=null,An=null,aw=0,ra=1/0,pA=null,mh=!1,gm=null,Es=null,Mu=!1,fs=null,wh=0,Vl=0,pm=null,Qd=-1,Ud=0;function Yr(){return wt&6?sr():Qd!==-1?Qd:Qd=sr()}function bs(t){return t.mode&1?wt&2&&Rr!==0?Rr&-Rr:rk.transition!==null?(Ud===0&&(Ud=g_()),Ud):(t=xt,t!==0||(t=window.event,t=t===void 0?16:x_(t.type)),t):1}function Kn(t,e,r,n){if(50<Vl)throw Vl=0,pm=null,Error(Ae(185));jc(t,r,n),(!(wt&2)||t!==xr)&&(t===xr&&(!(wt&2)&&(hf|=r),fr===4&&ss(t,Rr)),hn(t,n),r===1&&wt===0&&!(e.mode&1)&&(ra=sr()+500,lf&&Xs()))}function hn(t,e){var r=t.callbackNode;rS(t,e);var n=th(t,t===xr?Rr:0);if(n===0)r!==null&&Sy(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Sy(r),e===1)t.tag===0?tk(Iv.bind(null,t)):O_(Iv.bind(null,t)),XS(function(){!(wt&6)&&Xs()}),r=null;else{switch(p_(n)){case 1:r=R0;break;case 4:r=h_;break;case 16:r=eh;break;case 536870912:r=f_;break;default:r=eh}r=jE(r,SE.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function SE(t,e){if(Qd=-1,Ud=0,wt&6)throw Error(Ae(327));var r=t.callbackNode;if(Vo()&&t.callbackNode!==r)return null;var n=th(t,t===xr?Rr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Bh(t,n);else{e=n;var A=wt;wt|=2;var s=RE();(xr!==t||Rr!==e)&&(pA=null,ra=sr()+500,bi(t,e));do try{xk();break}catch(a){kE(t,a)}while(!0);$0(),ph.current=s,wt=A,ur!==null?e=0:(xr=null,Rr=0,e=fr)}if(e!==0){if(e===2&&(A=Vp(t),A!==0&&(n=A,e=mm(t,A))),e===1)throw r=wc,bi(t,0),ss(t,n),hn(t,sr()),r;if(e===6)ss(t,n);else{if(A=t.current.alternate,!(n&30)&&!yk(A)&&(e=Bh(t,n),e===2&&(s=Vp(t),s!==0&&(n=s,e=mm(t,s))),e===1))throw r=wc,bi(t,0),ss(t,n),hn(t,sr()),r;switch(t.finishedWork=A,t.finishedLanes=n,e){case 0:case 1:throw Error(Ae(345));case 2:gi(t,An,pA);break;case 3:if(ss(t,n),(n&130023424)===n&&(e=aw+500-sr(),10<e)){if(th(t,0)!==0)break;if(A=t.suspendedLanes,(A&n)!==n){Yr(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=Xp(gi.bind(null,t,An,pA),e);break}gi(t,An,pA);break;case 4:if(ss(t,n),(n&4194240)===n)break;for(e=t.eventTimes,A=-1;0<n;){var i=31-Vn(n);s=1<<i,i=e[i],i>A&&(A=i),n&=~s}if(n=A,n=sr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Bk(n/1960))-n,10<n){t.timeoutHandle=Xp(gi.bind(null,t,An,pA),n);break}gi(t,An,pA);break;case 5:gi(t,An,pA);break;default:throw Error(Ae(329))}}}return hn(t,sr()),t.callbackNode===r?SE.bind(null,t):null}function mm(t,e){var r=Hl;return t.current.memoizedState.isDehydrated&&(bi(t,e).flags|=256),t=Bh(t,e),t!==2&&(e=An,An=r,e!==null&&wm(e)),t}function wm(t){An===null?An=t:An.push.apply(An,t)}function yk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var A=r[n],s=A.getSnapshot;A=A.value;try{if(!zn(s(),A))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ss(t,e){for(e&=~ow,e&=~hf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Vn(e),n=1<<r;t[r]=-1,e&=~n}}function Iv(t){if(wt&6)throw Error(Ae(327));Vo();var e=th(t,0);if(!(e&1))return hn(t,sr()),null;var r=Bh(t,e);if(t.tag!==0&&r===2){var n=Vp(t);n!==0&&(e=n,r=mm(t,n))}if(r===1)throw r=wc,bi(t,0),ss(t,e),hn(t,sr()),r;if(r===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,An,pA),hn(t,sr()),null}function lw(t,e){var r=wt;wt|=1;try{return t(e)}finally{wt=r,wt===0&&(ra=sr()+500,lf&&Xs())}}function Pi(t){fs!==null&&fs.tag===0&&!(wt&6)&&Vo();var e=wt;wt|=1;var r=Rn.transition,n=xt;try{if(Rn.transition=null,xt=1,t)return t()}finally{xt=n,Rn.transition=r,wt=e,!(wt&6)&&Xs()}}function cw(){mn=No.current,Lt(No)}function bi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,JS(r)),ur!==null)for(r=ur.return;r!==null;){var n=r;switch(K0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ih();break;case 3:ea(),Lt(un),Lt($r),Z0();break;case 5:Y0(n);break;case 4:ea();break;case 13:Lt($t);break;case 19:Lt($t);break;case 10:W0(n.type._context);break;case 22:case 23:cw()}r=r.return}if(xr=t,ur=t=Ts(t.current,null),Rr=mn=e,fr=0,wc=null,ow=hf=Di=0,An=Hl=null,Ii!==null){for(e=0;e<Ii.length;e++)if(r=Ii[e],n=r.interleaved,n!==null){r.interleaved=null;var A=n.next,s=r.pending;if(s!==null){var i=s.next;s.next=A,n.next=i}r.pending=n}Ii=null}return t}function kE(t,e){do{var r=ur;try{if($0(),bd.current=gh,fh){for(var n=Wt.memoizedState;n!==null;){var A=n.queue;A!==null&&(A.pending=null),n=n.next}fh=!1}if(Ni=0,yr=dr=Wt=null,Ml=!1,gc=0,iw.current=null,r===null||r.return===null){fr=1,wc=e,ur=null;break}e:{var s=t,i=r.return,a=r,o=e;if(e=Rr,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var c=o,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=uv(i);if(w!==null){w.flags&=-257,dv(w,i,a,s,e),w.mode&1&&cv(s,c,e),e=w,o=c;var y=e.updateQueue;if(y===null){var B=new Set;B.add(o),e.updateQueue=B}else y.add(o);break e}else{if(!(e&1)){cv(s,c,e),uw();break e}o=Error(Ae(426))}}else if(Vt&&a.mode&1){var E=uv(i);if(E!==null){!(E.flags&65536)&&(E.flags|=256),dv(E,i,a,s,e),G0(ta(o,a));break e}}s=o=ta(o,a),fr!==4&&(fr=2),Hl===null?Hl=[s]:Hl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=pE(s,o,e);Av(s,x);break e;case 1:a=o;var m=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Es===null||!Es.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var F=mE(s,a,e);Av(s,F);break e}}s=s.return}while(s!==null)}DE(r)}catch(R){e=R,ur===r&&r!==null&&(ur=r=r.return);continue}break}while(!0)}function RE(){var t=ph.current;return ph.current=gh,t===null?gh:t}function uw(){(fr===0||fr===3||fr===2)&&(fr=4),xr===null||!(Di&268435455)&&!(hf&268435455)||ss(xr,Rr)}function Bh(t,e){var r=wt;wt|=2;var n=RE();(xr!==t||Rr!==e)&&(pA=null,bi(t,e));do try{vk();break}catch(A){kE(t,A)}while(!0);if($0(),wt=r,ph.current=n,ur!==null)throw Error(Ae(261));return xr=null,Rr=0,fr}function vk(){for(;ur!==null;)NE(ur)}function xk(){for(;ur!==null&&!$U();)NE(ur)}function NE(t){var e=LE(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?DE(t):ur=e,iw.current=null}function DE(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=gk(r,e),r!==null){r.flags&=32767,ur=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fr=6,ur=null;return}}else if(r=fk(r,e,mn),r!==null){ur=r;return}if(e=e.sibling,e!==null){ur=e;return}ur=e=t}while(e!==null);fr===0&&(fr=5)}function gi(t,e,r){var n=xt,A=Rn.transition;try{Rn.transition=null,xt=1,Ck(t,e,r,n)}finally{Rn.transition=A,xt=n}return null}function Ck(t,e,r,n){do Vo();while(fs!==null);if(wt&6)throw Error(Ae(327));r=t.finishedWork;var A=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(nS(t,s),t===xr&&(ur=xr=null,Rr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mu||(Mu=!0,jE(eh,function(){return Vo(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Rn.transition,Rn.transition=null;var i=xt;xt=1;var a=wt;wt|=4,iw.current=null,mk(t,r),QE(r,t),VS(qp),rh=!!Wp,qp=Wp=null,t.current=r,wk(r),WU(),wt=a,xt=i,Rn.transition=s}else t.current=r;if(Mu&&(Mu=!1,fs=t,wh=A),s=t.pendingLanes,s===0&&(Es=null),XU(r.stateNode),hn(t,sr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)A=e[r],n(A.value,{componentStack:A.stack,digest:A.digest});if(mh)throw mh=!1,t=gm,gm=null,t;return wh&1&&t.tag!==0&&Vo(),s=t.pendingLanes,s&1?t===pm?Vl++:(Vl=0,pm=t):Vl=0,Xs(),null}function Vo(){if(fs!==null){var t=p_(wh),e=Rn.transition,r=xt;try{if(Rn.transition=null,xt=16>t?16:t,fs===null)var n=!1;else{if(t=fs,fs=null,wh=0,wt&6)throw Error(Ae(331));var A=wt;for(wt|=4,De=t.current;De!==null;){var s=De,i=s.child;if(De.flags&16){var a=s.deletions;if(a!==null){for(var o=0;o<a.length;o++){var c=a[o];for(De=c;De!==null;){var d=De;switch(d.tag){case 0:case 11:case 15:Ol(8,d,s)}var h=d.child;if(h!==null)h.return=d,De=h;else for(;De!==null;){d=De;var f=d.sibling,w=d.return;if(bE(d),d===c){De=null;break}if(f!==null){f.return=w,De=f;break}De=w}}}var y=s.alternate;if(y!==null){var B=y.child;if(B!==null){y.child=null;do{var E=B.sibling;B.sibling=null,B=E}while(B!==null)}}De=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,De=i;else e:for(;De!==null;){if(s=De,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ol(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,De=x;break e}De=s.return}}var m=t.current;for(De=m;De!==null;){i=De;var I=i.child;if(i.subtreeFlags&2064&&I!==null)I.return=i,De=I;else e:for(i=m;De!==null;){if(a=De,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:df(9,a)}}catch(R){Zt(a,a.return,R)}if(a===i){De=null;break e}var F=a.sibling;if(F!==null){F.return=a.return,De=F;break e}De=a.return}}if(wt=A,Xs(),rA&&typeof rA.onPostCommitFiberRoot=="function")try{rA.onPostCommitFiberRoot(nf,t)}catch{}n=!0}return n}finally{xt=r,Rn.transition=e}}return!1}function _v(t,e,r){e=ta(r,e),e=pE(t,e,1),t=_s(t,e,1),e=Yr(),t!==null&&(jc(t,1,e),hn(t,e))}function Zt(t,e,r){if(t.tag===3)_v(t,t,r);else for(;e!==null;){if(e.tag===3){_v(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Es===null||!Es.has(n))){t=ta(r,t),t=mE(e,t,1),e=_s(e,t,1),t=Yr(),e!==null&&(jc(e,1,t),hn(e,t));break}}e=e.return}}function Ik(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Yr(),t.pingedLanes|=t.suspendedLanes&r,xr===t&&(Rr&r)===r&&(fr===4||fr===3&&(Rr&130023424)===Rr&&500>sr()-aw?bi(t,0):ow|=r),hn(t,e)}function PE(t,e){e===0&&(t.mode&1?(e=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):e=1);var r=Yr();t=UA(t,e),t!==null&&(jc(t,e,r),hn(t,r))}function _k(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),PE(t,r)}function Ek(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,A=t.memoizedState;A!==null&&(r=A.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ae(314))}n!==null&&n.delete(e),PE(t,r)}var LE;LE=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)on=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return on=!1,hk(t,e,r);on=!!(t.flags&131072)}else on=!1,Vt&&e.flags&1048576&&H_(e,lh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Fd(t,e),t=e.pendingProps;var A=Xo(e,$r.current);Ho(e,r),A=tw(null,e,n,t,A,r);var s=rw();return e.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(n)?(s=!0,oh(e)):s=!1,e.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,J0(e),A.updater=uf,e.stateNode=A,A._reactInternals=e,Am(e,n,t,r),e=om(null,e,n,!0,s,r)):(e.tag=0,Vt&&s&&V0(e),Jr(null,e,A,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Fd(t,e),t=e.pendingProps,A=n._init,n=A(n._payload),e.type=n,A=e.tag=Tk(n),t=Mn(n,t),A){case 0:e=im(null,e,n,t,r);break e;case 1:e=gv(null,e,n,t,r);break e;case 11:e=hv(null,e,n,t,r);break e;case 14:e=fv(null,e,n,Mn(n.type,t),r);break e}throw Error(Ae(306,n,""))}return e;case 0:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),im(t,e,n,A,r);case 1:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),gv(t,e,n,A,r);case 3:e:{if(vE(e),t===null)throw Error(Ae(387));n=e.pendingProps,s=e.memoizedState,A=s.element,W_(t,e),dh(e,n,null,r);var i=e.memoizedState;if(n=i.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){A=ta(Error(Ae(423)),e),e=pv(t,e,n,r,A);break e}else if(n!==A){A=ta(Error(Ae(424)),e),e=pv(t,e,n,r,A);break e}else for(yn=Is(e.stateNode.containerInfo.firstChild),vn=e,Vt=!0,Hn=null,r=z_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yo(),n===A){e=SA(t,e,r);break e}Jr(t,e,n,r)}e=e.child}return e;case 5:return q_(e),t===null&&tm(e),n=e.type,A=e.pendingProps,s=t!==null?t.memoizedProps:null,i=A.children,Jp(n,A)?i=null:s!==null&&Jp(n,s)&&(e.flags|=32),yE(t,e),Jr(t,e,i,r),e.child;case 6:return t===null&&tm(e),null;case 13:return xE(t,e,r);case 4:return X0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Zo(e,null,n,r):Jr(t,e,n,r),e.child;case 11:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),hv(t,e,n,A,r);case 7:return Jr(t,e,e.pendingProps,r),e.child;case 8:return Jr(t,e,e.pendingProps.children,r),e.child;case 12:return Jr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,A=e.pendingProps,s=e.memoizedProps,i=A.value,Qt(ch,n._currentValue),n._currentValue=i,s!==null)if(zn(s.value,i)){if(s.children===A.children&&!un.current){e=SA(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var o=a.firstContext;o!==null;){if(o.context===n){if(s.tag===1){o=EA(-1,r&-r),o.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?o.next=o:(o.next=d.next,d.next=o),c.pending=o}}s.lanes|=r,o=s.alternate,o!==null&&(o.lanes|=r),rm(s.return,r,e),a.lanes|=r;break}o=o.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Ae(341));i.lanes|=r,a=i.alternate,a!==null&&(a.lanes|=r),rm(i,r,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Jr(t,e,A.children,r),e=e.child}return e;case 9:return A=e.type,n=e.pendingProps.children,Ho(e,r),A=Nn(A),n=n(A),e.flags|=1,Jr(t,e,n,r),e.child;case 14:return n=e.type,A=Mn(n,e.pendingProps),A=Mn(n.type,A),fv(t,e,n,A,r);case 15:return wE(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,A=e.pendingProps,A=e.elementType===n?A:Mn(n,A),Fd(t,e),e.tag=1,dn(n)?(t=!0,oh(e)):t=!1,Ho(e,r),gE(e,n,A),Am(e,n,A,r),om(null,e,n,!0,t,r);case 19:return CE(t,e,r);case 22:return BE(t,e,r)}throw Error(Ae(156,e.tag))};function jE(t,e){return d_(t,e)}function bk(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,e,r,n){return new bk(t,e,r,n)}function dw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tk(t){if(typeof t=="function")return dw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===U0)return 11;if(t===S0)return 14}return 2}function Ts(t,e){var r=t.alternate;return r===null?(r=Un(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Sd(t,e,r,n,A,s){var i=2;if(n=t,typeof t=="function")dw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case _o:return Ti(r.children,A,s,e);case Q0:i=8,A|=8;break;case Tp:return t=Un(12,r,e,A|2),t.elementType=Tp,t.lanes=s,t;case Fp:return t=Un(13,r,e,A),t.elementType=Fp,t.lanes=s,t;case Qp:return t=Un(19,r,e,A),t.elementType=Qp,t.lanes=s,t;case qI:return ff(r,A,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $I:i=10;break e;case WI:i=9;break e;case U0:i=11;break e;case S0:i=14;break e;case ts:i=16,n=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=Un(i,r,e,A),e.elementType=t,e.type=n,e.lanes=s,e}function Ti(t,e,r,n){return t=Un(7,t,n,e),t.lanes=r,t}function ff(t,e,r,n){return t=Un(22,t,n,e),t.elementType=qI,t.lanes=r,t.stateNode={isHidden:!1},t}function Og(t,e,r){return t=Un(6,t,null,e),t.lanes=r,t}function Hg(t,e,r){return e=Un(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fk(t,e,r,n,A){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xg(0),this.expirationTimes=xg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xg(0),this.identifierPrefix=n,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function hw(t,e,r,n,A,s,i,a,o){return t=new Fk(t,e,r,a,o),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},J0(s),t}function Qk(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ME(t){if(!t)return Ps;t=t._reactInternals;e:{if(Xi(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var r=t.type;if(dn(r))return M_(t,r,e)}return e}function OE(t,e,r,n,A,s,i,a,o){return t=hw(r,n,!0,t,A,s,i,a,o),t.context=ME(null),r=t.current,n=Yr(),A=bs(r),s=EA(n,A),s.callback=e??null,_s(r,s,A),t.current.lanes=A,jc(t,A,n),hn(t,n),t}function gf(t,e,r,n){var A=e.current,s=Yr(),i=bs(A);return r=ME(r),e.context===null?e.context=r:e.pendingContext=r,e=EA(s,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=_s(A,e,i),t!==null&&(Kn(t,A,i,s),Ed(t,A,i)),i}function yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ev(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function fw(t,e){Ev(t,e),(t=t.alternate)&&Ev(t,e)}function Uk(){return null}var HE=typeof reportError=="function"?reportError:function(t){console.error(t)};function gw(t){this._internalRoot=t}pf.prototype.render=gw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));gf(t,e,null,null)};pf.prototype.unmount=gw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){gf(null,t,null,null)}),e[QA]=null}};function pf(t){this._internalRoot=t}pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=B_();t={blockedOn:null,target:t,priority:e};for(var r=0;r<As.length&&e!==0&&e<As[r].priority;r++);As.splice(r,0,t),r===0&&v_(t)}};function pw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bv(){}function Sk(t,e,r,n,A){if(A){if(typeof n=="function"){var s=n;n=function(){var c=yh(i);s.call(c)}}var i=OE(e,n,t,0,null,!1,!1,"",bv);return t._reactRootContainer=i,t[QA]=i.current,cc(t.nodeType===8?t.parentNode:t),Pi(),i}for(;A=t.lastChild;)t.removeChild(A);if(typeof n=="function"){var a=n;n=function(){var c=yh(o);a.call(c)}}var o=hw(t,0,!1,null,null,!1,!1,"",bv);return t._reactRootContainer=o,t[QA]=o.current,cc(t.nodeType===8?t.parentNode:t),Pi(function(){gf(e,o,r,n)}),o}function wf(t,e,r,n,A){var s=r._reactRootContainer;if(s){var i=s;if(typeof A=="function"){var a=A;A=function(){var o=yh(i);a.call(o)}}gf(e,i,t,A)}else i=Sk(r,e,t,A,n);return yh(i)}m_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Bl(e.pendingLanes);r!==0&&(N0(e,r|1),hn(e,sr()),!(wt&6)&&(ra=sr()+500,Xs()))}break;case 13:Pi(function(){var n=UA(t,1);if(n!==null){var A=Yr();Kn(n,t,1,A)}}),fw(t,1)}};D0=function(t){if(t.tag===13){var e=UA(t,134217728);if(e!==null){var r=Yr();Kn(e,t,134217728,r)}fw(t,134217728)}};w_=function(t){if(t.tag===13){var e=bs(t),r=UA(t,e);if(r!==null){var n=Yr();Kn(r,t,e,n)}fw(t,e)}};B_=function(){return xt};y_=function(t,e){var r=xt;try{return xt=t,e()}finally{xt=r}};Mp=function(t,e,r){switch(e){case"input":if(kp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var A=af(n);if(!A)throw Error(Ae(90));XI(n),kp(n,A)}}}break;case"textarea":ZI(t,r);break;case"select":e=r.value,e!=null&&Lo(t,!!r.multiple,e,!1)}};i_=lw;o_=Pi;var kk={usingClientEntryPoint:!1,Events:[Oc,Fo,af,A_,s_,lw]},il={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rk={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:LA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c_(t),t===null?null:t.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||Uk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{nf=Ou.inject(Rk),rA=Ou}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kk;_n.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pw(e))throw Error(Ae(200));return Qk(t,e,null,r)};_n.createRoot=function(t,e){if(!pw(t))throw Error(Ae(299));var r=!1,n="",A=HE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=hw(t,1,!1,null,null,r,!1,n,A),t[QA]=e.current,cc(t.nodeType===8?t.parentNode:t),new gw(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=c_(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return Pi(t)};_n.hydrate=function(t,e,r){if(!mf(e))throw Error(Ae(200));return wf(null,t,e,!0,r)};_n.hydrateRoot=function(t,e,r){if(!pw(t))throw Error(Ae(405));var n=r!=null&&r.hydratedSources||null,A=!1,s="",i=HE;if(r!=null&&(r.unstable_strictMode===!0&&(A=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=OE(e,null,t,1,r??null,A,!1,s,i),t[QA]=e.current,cc(t),n)for(t=0;t<n.length;t++)r=n[t],A=r._getVersion,A=A(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,A]:e.mutableSourceEagerHydrationData.push(r,A);return new pf(e)};_n.render=function(t,e,r){if(!mf(e))throw Error(Ae(200));return wf(null,t,e,!1,r)};_n.unmountComponentAtNode=function(t){if(!mf(t))throw Error(Ae(40));return t._reactRootContainer?(Pi(function(){wf(null,null,t,!1,function(){t._reactRootContainer=null,t[QA]=null})}),!0):!1};_n.unstable_batchedUpdates=lw;_n.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!mf(r))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return wf(t,e,r,!1,n)};_n.version="18.3.1-next-f1338f8080-20240426";function VE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VE)}catch(t){console.error(t)}}VE(),VI.exports=_n;var Nk=VI.exports,Tv=Nk;Ep.createRoot=Tv.createRoot,Ep.hydrateRoot=Tv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bc.apply(this,arguments)}var gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gs||(gs={}));const Fv="popstate";function Dk(t){t===void 0&&(t={});function e(A,s){let{pathname:i="/",search:a="",hash:o=""}=Yi(A.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Bm("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(A,s){let i=A.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let o=A.location.href,c=o.indexOf("#");a=c===-1?o:o.slice(0,c)}return a+"#"+(typeof s=="string"?s:vh(s))}function n(A,s){Bf(A.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Lk(e,r,n,t)}function qt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pk(){return Math.random().toString(36).substr(2,8)}function Qv(t,e){return{usr:t.state,key:t.key,idx:e}}function Bm(t,e,r,n){return r===void 0&&(r=null),Bc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yi(e):e,{state:r,key:e&&e.key||n||Pk()})}function vh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Lk(t,e,r,n){n===void 0&&(n={});let{window:A=document.defaultView,v5Compat:s=!1}=n,i=A.history,a=gs.Pop,o=null,c=d();c==null&&(c=0,i.replaceState(Bc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){a=gs.Pop;let E=d(),x=E==null?null:E-c;c=E,o&&o({action:a,location:B.location,delta:x})}function f(E,x){a=gs.Push;let m=Bm(B.location,E,x);r&&r(m,E),c=d()+1;let I=Qv(m,c),F=B.createHref(m);try{i.pushState(I,"",F)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;A.location.assign(F)}s&&o&&o({action:a,location:B.location,delta:1})}function w(E,x){a=gs.Replace;let m=Bm(B.location,E,x);r&&r(m,E),c=d();let I=Qv(m,c),F=B.createHref(m);i.replaceState(I,"",F),s&&o&&o({action:a,location:B.location,delta:0})}function y(E){let x=A.location.origin!=="null"?A.location.origin:A.location.href,m=typeof E=="string"?E:vh(E);return m=m.replace(/ $/,"%20"),qt(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let B={get action(){return a},get location(){return t(A,i)},listen(E){if(o)throw new Error("A history only accepts one active listener");return A.addEventListener(Fv,h),o=E,()=>{A.removeEventListener(Fv,h),o=null}},createHref(E){return e(A,E)},createURL:y,encodeLocation(E){let x=y(E);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:w,go(E){return i.go(E)}};return B}var Uv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Uv||(Uv={}));function jk(t,e,r){return r===void 0&&(r="/"),Mk(t,e,r)}function Mk(t,e,r,n){let A=typeof e=="string"?Yi(e):e,s=na(A.pathname||"/",r);if(s==null)return null;let i=KE(t);Ok(i);let a=null;for(let o=0;a==null&&o<i.length;++o){let c=Yk(s);a=Jk(i[o],c)}return a}function KE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let A=(s,i,a)=>{let o={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};o.relativePath.startsWith("/")&&(qt(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(n.length));let c=Fs([n,o.relativePath]),d=r.concat(o);s.children&&s.children.length>0&&(qt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),KE(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Wk(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))A(s,i);else for(let o of GE(s.path))A(s,i,o)}),e}function GE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,A=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return A?[s,""]:[s];let i=GE(n.join("/")),a=[];return a.push(...i.map(o=>o===""?s:[s,o].join("/"))),A&&a.push(...i),a.map(o=>t.startsWith("/")&&o===""?"/":o)}function Ok(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:qk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Hk=/^:[\w-]+$/,Vk=3,Kk=2,Gk=1,zk=10,$k=-2,Sv=t=>t==="*";function Wk(t,e){let r=t.split("/"),n=r.length;return r.some(Sv)&&(n+=$k),e&&(n+=Kk),r.filter(A=>!Sv(A)).reduce((A,s)=>A+(Hk.test(s)?Vk:s===""?Gk:zk),n)}function qk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,A)=>n===e[A])?t[t.length-1]-e[e.length-1]:0}function Jk(t,e,r){let{routesMeta:n}=t,A={},s="/",i=[];for(let a=0;a<n.length;++a){let o=n[a],c=a===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=ym({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},d),f=o.route;if(!h)return null;Object.assign(A,h.params),i.push({params:A,pathname:Fs([s,h.pathname]),pathnameBase:n2(Fs([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Fs([s,h.pathnameBase]))}return i}function ym(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Xk(t.path,t.caseSensitive,t.end),A=e.match(r);if(!A)return null;let s=A[0],i=s.replace(/(.)\/+$/,"$1"),a=A.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:w}=d;if(f==="*"){let B=a[h]||"";i=s.slice(0,s.length-B.length).replace(/(.)\/+$/,"$1")}const y=a[h];return w&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function Xk(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Bf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],A="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,o)=>(n.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),A+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?A+="\\/*$":t!==""&&t!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,e?void 0:"i"),n]}function Yk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function na(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e2=t=>Zk.test(t);function t2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:A=""}=typeof t=="string"?Yi(t):t,s;if(r)if(e2(r))s=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Bf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?s=kv(r.substring(1),"/"):s=kv(r,e)}else s=e;return{pathname:s,search:A2(n),hash:s2(A)}}function kv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(A=>{A===".."?r.length>1&&r.pop():A!=="."&&r.push(A)}),r.length>1?r.join("/"):"/"}function Vg(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function r2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function mw(t,e){let r=r2(t);return e?r.map((n,A)=>A===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ww(t,e,r,n){n===void 0&&(n=!1);let A;typeof t=="string"?A=Yi(t):(A=Bc({},t),qt(!A.pathname||!A.pathname.includes("?"),Vg("?","pathname","search",A)),qt(!A.pathname||!A.pathname.includes("#"),Vg("#","pathname","hash",A)),qt(!A.search||!A.search.includes("#"),Vg("#","search","hash",A)));let s=t===""||A.pathname==="",i=s?"/":A.pathname,a;if(i==null)a=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;A.pathname=f.join("/")}a=h>=0?e[h]:"/"}let o=t2(A,a),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(c||d)&&(o.pathname+="/"),o}const Fs=t=>t.join("/").replace(/\/\/+/g,"/"),n2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,s2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function i2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zE=["post","put","patch","delete"];new Set(zE);const o2=["get",...zE];new Set(o2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yc(){return yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yc.apply(this,arguments)}const yf=S.createContext(null),$E=S.createContext(null),jA=S.createContext(null),vf=S.createContext(null),MA=S.createContext({outlet:null,matches:[],isDataRoute:!1}),WE=S.createContext(null);function a2(t,e){let{relative:r}=e===void 0?{}:e;_a()||qt(!1);let{basename:n,navigator:A}=S.useContext(jA),{hash:s,pathname:i,search:a}=xf(t,{relative:r}),o=i;return n!=="/"&&(o=i==="/"?n:Fs([n,i])),A.createHref({pathname:o,search:a,hash:s})}function _a(){return S.useContext(vf)!=null}function Ys(){return _a()||qt(!1),S.useContext(vf).location}function qE(t){S.useContext(jA).static||S.useLayoutEffect(t)}function Vc(){let{isDataRoute:t}=S.useContext(MA);return t?C2():l2()}function l2(){_a()||qt(!1);let t=S.useContext(yf),{basename:e,future:r,navigator:n}=S.useContext(jA),{matches:A}=S.useContext(MA),{pathname:s}=Ys(),i=JSON.stringify(mw(A,r.v7_relativeSplatPath)),a=S.useRef(!1);return qE(()=>{a.current=!0}),S.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=ww(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fs([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}const c2=S.createContext(null);function u2(t){let e=S.useContext(MA).outlet;return e&&S.createElement(c2.Provider,{value:t},e)}function xf(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=S.useContext(jA),{matches:A}=S.useContext(MA),{pathname:s}=Ys(),i=JSON.stringify(mw(A,n.v7_relativeSplatPath));return S.useMemo(()=>ww(t,JSON.parse(i),s,r==="path"),[t,i,s,r])}function d2(t,e){return h2(t,e)}function h2(t,e,r,n){_a()||qt(!1);let{navigator:A}=S.useContext(jA),{matches:s}=S.useContext(MA),i=s[s.length-1],a=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let c=Ys(),d;if(e){var h;let E=typeof e=="string"?Yi(e):e;o==="/"||(h=E.pathname)!=null&&h.startsWith(o)||qt(!1),d=E}else d=c;let f=d.pathname||"/",w=f;if(o!=="/"){let E=o.replace(/^\//,"").split("/");w="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let y=jk(t,{pathname:w}),B=w2(y&&y.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Fs([o,A.encodeLocation?A.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?o:Fs([o,A.encodeLocation?A.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,r,n);return e&&B?S.createElement(vf.Provider,{value:{location:yc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gs.Pop}},B):B}function f2(){let t=x2(),e=i2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:A},r):null,null)}const g2=S.createElement(f2,null);class p2 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?S.createElement(MA.Provider,{value:this.props.routeContext},S.createElement(WE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m2(t){let{routeContext:e,match:r,children:n}=t,A=S.useContext(yf);return A&&A.static&&A.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(MA.Provider,{value:e},n)}function w2(t,e,r,n){var A;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,a=(A=r)==null?void 0:A.errors;if(a!=null){let d=i.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||qt(!1),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:w}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!w||w[h.route.id]===void 0);if(h.route.lazy||y){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let w,y=!1,B=null,E=null;r&&(w=a&&h.route.id?a[h.route.id]:void 0,B=h.route.errorElement||g2,o&&(c<0&&f===0?(I2("route-fallback"),y=!0,E=null):c===f&&(y=!0,E=h.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,f+1)),m=()=>{let I;return w?I=B:y?I=E:h.route.Component?I=S.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,S.createElement(m2,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:I})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?S.createElement(p2,{location:r.location,revalidation:r.revalidation,component:B,error:w,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var JE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(JE||{}),XE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XE||{});function B2(t){let e=S.useContext(yf);return e||qt(!1),e}function y2(t){let e=S.useContext($E);return e||qt(!1),e}function v2(t){let e=S.useContext(MA);return e||qt(!1),e}function YE(t){let e=v2(),r=e.matches[e.matches.length-1];return r.route.id||qt(!1),r.route.id}function x2(){var t;let e=S.useContext(WE),r=y2(),n=YE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function C2(){let{router:t}=B2(JE.UseNavigateStable),e=YE(XE.UseNavigateStable),r=S.useRef(!1);return qE(()=>{r.current=!0}),S.useCallback(function(A,s){s===void 0&&(s={}),r.current&&(typeof A=="number"?t.navigate(A):t.navigate(A,yc({fromRouteId:e},s)))},[t,e])}const Rv={};function I2(t,e,r){Rv[t]||(Rv[t]=!0)}function _2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xh(t){let{to:e,replace:r,state:n,relative:A}=t;_a()||qt(!1);let{future:s,static:i}=S.useContext(jA),{matches:a}=S.useContext(MA),{pathname:o}=Ys(),c=Vc(),d=ww(e,mw(a,s.v7_relativeSplatPath),o,A==="path"),h=JSON.stringify(d);return S.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:A}),[c,h,A,r,n]),null}function E2(t){return u2(t.context)}function gn(t){qt(!1)}function b2(t){let{basename:e="/",children:r=null,location:n,navigationType:A=gs.Pop,navigator:s,static:i=!1,future:a}=t;_a()&&qt(!1);let o=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:o,navigator:s,static:i,future:yc({v7_relativeSplatPath:!1},a)}),[o,a,s,i]);typeof n=="string"&&(n=Yi(n));let{pathname:d="/",search:h="",hash:f="",state:w=null,key:y="default"}=n,B=S.useMemo(()=>{let E=na(d,o);return E==null?null:{location:{pathname:E,search:h,hash:f,state:w,key:y},navigationType:A}},[o,d,h,f,w,y,A]);return B==null?null:S.createElement(jA.Provider,{value:c},S.createElement(vf.Provider,{children:r,value:B}))}function T2(t){let{children:e,location:r}=t;return d2(vm(e),r)}new Promise(()=>{});function vm(t,e){e===void 0&&(e=[]);let r=[];return S.Children.forEach(t,(n,A)=>{if(!S.isValidElement(n))return;let s=[...e,A];if(n.type===S.Fragment){r.push.apply(r,vm(n.props.children,s));return}n.type!==gn&&qt(!1),!n.props.index||!n.props.children||qt(!1);let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=vm(n.props.children,s)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ch.apply(this,arguments)}function ZE(t,e){if(t==null)return{};var r={},n=Object.keys(t),A,s;for(s=0;s<n.length;s++)A=n[s],!(e.indexOf(A)>=0)&&(r[A]=t[A]);return r}function F2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Q2(t,e){return t.button===0&&(!e||e==="_self")&&!F2(t)}function xm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(A=>[r,A]):[[r,n]])},[]))}function U2(t,e){let r=xm(t);return e&&e.forEach((n,A)=>{r.has(A)||e.getAll(A).forEach(s=>{r.append(A,s)})}),r}const S2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],k2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],R2="6";try{window.__reactRouterVersion=R2}catch{}const N2=S.createContext({isTransitioning:!1}),D2="startTransition",Nv=IU[D2];function P2(t){let{basename:e,children:r,future:n,window:A}=t,s=S.useRef();s.current==null&&(s.current=Dk({window:A,v5Compat:!0}));let i=s.current,[a,o]=S.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=S.useCallback(h=>{c&&Nv?Nv(()=>o(h)):o(h)},[o,c]);return S.useLayoutEffect(()=>i.listen(d),[i,d]),S.useEffect(()=>_2(n),[n]),S.createElement(b2,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:i,future:n})}const L2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M2=S.forwardRef(function(e,r){let{onClick:n,relative:A,reloadDocument:s,replace:i,state:a,target:o,to:c,preventScrollReset:d,viewTransition:h}=e,f=ZE(e,S2),{basename:w}=S.useContext(jA),y,B=!1;if(typeof c=="string"&&j2.test(c)&&(y=c,L2))try{let I=new URL(window.location.href),F=c.startsWith("//")?new URL(I.protocol+c):new URL(c),R=na(F.pathname,w);F.origin===I.origin&&R!=null?c=R+F.search+F.hash:B=!0}catch{}let E=a2(c,{relative:A}),x=V2(c,{replace:i,state:a,target:o,preventScrollReset:d,relative:A,viewTransition:h});function m(I){n&&n(I),I.defaultPrevented||x(I)}return S.createElement("a",Ch({},f,{href:y||E,onClick:B||s?n:m,ref:r,target:o}))}),O2=S.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:A=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:c,children:d}=e,h=ZE(e,k2),f=xf(o,{relative:h.relative}),w=Ys(),y=S.useContext($E),{navigator:B,basename:E}=S.useContext(jA),x=y!=null&&G2(f)&&c===!0,m=B.encodeLocation?B.encodeLocation(f).pathname:f.pathname,I=w.pathname,F=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;A||(I=I.toLowerCase(),F=F?F.toLowerCase():null,m=m.toLowerCase()),F&&E&&(F=na(F,E)||F);const R=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let U=I===m||!i&&I.startsWith(m)&&I.charAt(R)==="/",v=F!=null&&(F===m||!i&&F.startsWith(m)&&F.charAt(m.length)==="/"),C={isActive:U,isPending:v,isTransitioning:x},_=U?n:void 0,Q;typeof s=="function"?Q=s(C):Q=[s,U?"active":null,v?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(C):a;return S.createElement(M2,Ch({},h,{"aria-current":_,className:Q,ref:r,style:N,to:o,viewTransition:c}),typeof d=="function"?d(C):d)});var Cm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Cm||(Cm={}));var Dv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Dv||(Dv={}));function H2(t){let e=S.useContext(yf);return e||qt(!1),e}function V2(t,e){let{target:r,replace:n,state:A,preventScrollReset:s,relative:i,viewTransition:a}=e===void 0?{}:e,o=Vc(),c=Ys(),d=xf(t,{relative:i});return S.useCallback(h=>{if(Q2(h,r)){h.preventDefault();let f=n!==void 0?n:vh(c)===vh(d);o(t,{replace:f,state:A,preventScrollReset:s,relative:i,viewTransition:a})}},[c,o,d,n,A,r,t,s,i,a])}function K2(t){let e=S.useRef(xm(t)),r=S.useRef(!1),n=Ys(),A=S.useMemo(()=>U2(n.search,r.current?null:e.current),[n.search]),s=Vc(),i=S.useCallback((a,o)=>{const c=xm(typeof a=="function"?a(A):a);r.current=!0,s("?"+c,o)},[s,A]);return[A,i]}function G2(t,e){e===void 0&&(e={});let r=S.useContext(N2);r==null&&qt(!1);let{basename:n}=H2(Cm.useViewTransitionState),A=xf(t,{relative:e.relative});if(!r.isTransitioning)return!1;let s=na(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=na(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ym(A.pathname,i)!=null||ym(A.pathname,s)!=null}var Be=(t=>(t.First="1 ",t.Second="2 ",t))(Be||{}),At=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(At||{});const Ot=["","","","",""],wn={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Pv=["","","/","","","",""," "],eb=[{shift:Be.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:Be.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:Be.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:Be.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:Be.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:Be.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:Be.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:Be.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:Be.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:Be.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:Be.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:Be.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:Be.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:Be.Second,period:6,start:"18:50",end:"19:35",day:"default"}],sn={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:Be.First,studentsCount:25},{id:"c2",name:"6",shift:Be.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2ndHalf:[],substitutions:[],bellSchedule:eb,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}},z2="modulepreload",$2=function(t){return"/zamenygymn/"+t},Lv={},W2=function(e,r,n){let A=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));A=Promise.allSettled(r.map(o=>{if(o=$2(o),o in Lv)return;Lv[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":z2,c||(h.as="script"),h.crossOrigin="",h.href=o,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,w)=>{h.addEventListener("load",f),h.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return A.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let A=t.charCodeAt(n);A<128?e[r++]=A:A<2048?(e[r++]=A>>6|192,e[r++]=A&63|128):(A&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(A=65536+((A&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=A>>18|240,e[r++]=A>>12&63|128,e[r++]=A>>6&63|128,e[r++]=A&63|128):(e[r++]=A>>12|224,e[r++]=A>>6&63|128,e[r++]=A&63|128)}return e},q2=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const A=t[r++];if(A<128)e[n++]=String.fromCharCode(A);else if(A>191&&A<224){const s=t[r++];e[n++]=String.fromCharCode((A&31)<<6|s&63)}else if(A>239&&A<365){const s=t[r++],i=t[r++],a=t[r++],o=((A&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const s=t[r++],i=t[r++];e[n++]=String.fromCharCode((A&15)<<12|(s&63)<<6|i&63)}}return e.join("")},rb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let A=0;A<t.length;A+=3){const s=t[A],i=A+1<t.length,a=i?t[A+1]:0,o=A+2<t.length,c=o?t[A+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,w=c&63;o||(w=64,i||(f=64)),n.push(r[d],r[h],r[f],r[w])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):q2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let A=0;A<t.length;){const s=r[t.charAt(A++)],a=A<t.length?r[t.charAt(A)]:0;++A;const c=A<t.length?r[t.charAt(A)]:64;++A;const h=A<t.length?r[t.charAt(A)]:64;if(++A,s==null||a==null||c==null||h==null)throw new J2;const f=s<<2|a>>4;if(n.push(f),c!==64){const w=a<<4&240|c>>2;if(n.push(w),h!==64){const y=c<<6&192|h;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class J2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X2=function(t){const e=tb(t);return rb.encodeByteArray(e,!0)},Ih=function(t){return X2(t).replace(/\./g,"")},nb=function(t){try{return rb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=()=>Y2().__FIREBASE_DEFAULTS__,eR=()=>{if(typeof process>"u"||typeof jv>"u")return;const t=jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nb(t[1]);return e&&JSON.parse(e)},Cf=()=>{try{return Z2()||eR()||tR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ab=t=>{var e,r;return(r=(e=Cf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},rR=t=>{const e=Ab(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},sb=()=>{var t;return(t=Cf())===null||t===void 0?void 0:t.config},ib=t=>{var e;return(e=Cf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",A=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:A,exp:A+3600,auth_time:A,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ih(JSON.stringify(r)),Ih(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function iR(){var t;const e=(t=Cf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cR(){const t=gr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ob(){return!iR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ab(){try{return typeof indexedDB=="object"}catch{return!1}}function uR(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(n);A.onsuccess=()=>{A.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},A.onupgradeneeded=()=>{r=!1},A.onerror=()=>{var s;e(((s=A.error)===null||s===void 0?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="FirebaseError";class OA extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=dR,Object.setPrototypeOf(this,OA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kc.prototype.create)}}class Kc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},A=`${this.service}/${e}`,s=this.errors[e],i=s?hR(s,n):"Error",a=`${this.serviceName}: ${i} (${A}).`;return new OA(A,a,n)}}function hR(t,e){return t.replace(fR,(r,n)=>{const A=e[n];return A!=null?String(A):`<${n}?>`})}const fR=/\{\$([^}]+)}/g;function gR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ls(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const A of r){if(!n.includes(A))return!1;const s=t[A],i=e[A];if(Mv(s)&&Mv(i)){if(!Ls(s,i))return!1}else if(s!==i)return!1}for(const A of n)if(!r.includes(A))return!1;return!0}function Mv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(A=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function vl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[A,s]=n.split("=");e[decodeURIComponent(A)]=decodeURIComponent(s)}}),e}function xl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function pR(t,e){const r=new mR(t,e);return r.subscribe.bind(r)}class mR{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let A;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");wR(e,["next","error","complete"])?A=e:A={next:e,error:r,complete:n},A.next===void 0&&(A.next=Kg),A.error===void 0&&(A.error=Kg),A.complete===void 0&&(A.complete=Kg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wR(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Kg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Li{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new nR;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:r});A&&n.resolve(A)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),A=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(A)return null;throw s}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vR(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:A});n.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);n===a&&i.resolve(A)}return A}onInit(e,r){var n;const A=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(A))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(A,s);const i=this.instances.get(A);return i&&e(i,A),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const A of n)try{A(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:yR(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yR(t){return t===pi?void 0:t}function vR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new BR(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const CR={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},IR=lt.INFO,_R={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},ER=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),A=_R[e];if(A)console[A](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Bw=class{constructor(e){this.name=e,this._logLevel=IR,this._logHandler=ER,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}};const bR=(t,e)=>e.some(r=>t instanceof r);let Ov,Hv;function TR(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FR(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,Im=new WeakMap,cb=new WeakMap,Gg=new WeakMap,yw=new WeakMap;function QR(t){const e=new Promise((r,n)=>{const A=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{r(Qs(t.result)),A()},i=()=>{n(t.error),A()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&lb.set(r,t)}).catch(()=>{}),yw.set(e,t),e}function UR(t){if(Im.has(t))return;const e=new Promise((r,n)=>{const A=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{r(),A()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),A()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});Im.set(t,e)}let _m={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Im.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cb.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Qs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SR(t){_m=t(_m)}function kR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(zg(this),e,...r);return cb.set(n,e.sort?e.sort():[e]),Qs(n)}:FR().includes(t)?function(...e){return t.apply(zg(this),e),Qs(lb.get(this))}:function(...e){return Qs(t.apply(zg(this),e))}}function RR(t){return typeof t=="function"?kR(t):(t instanceof IDBTransaction&&UR(t),bR(t,TR())?new Proxy(t,_m):t)}function Qs(t){if(t instanceof IDBRequest)return QR(t);if(Gg.has(t))return Gg.get(t);const e=RR(t);return e!==t&&(Gg.set(t,e),yw.set(e,t)),e}const zg=t=>yw.get(t);function NR(t,e,{blocked:r,upgrade:n,blocking:A,terminated:s}={}){const i=indexedDB.open(t,e),a=Qs(i);return n&&i.addEventListener("upgradeneeded",o=>{n(Qs(i.result),o.oldVersion,o.newVersion,Qs(i.transaction),o)}),r&&i.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),a.then(o=>{s&&o.addEventListener("close",()=>s()),A&&o.addEventListener("versionchange",c=>A(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const DR=["get","getKey","getAll","getAllKeys","count"],PR=["put","add","delete","clear"],$g=new Map;function Vv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($g.get(e))return $g.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,A=PR.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(A||DR.includes(r)))return;const s=async function(i,...a){const o=this.transaction(i,A?"readwrite":"readonly");let c=o.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[r](...a),A&&o.done]))[0]};return $g.set(e,s),s}SR(t=>({...t,get:(e,r,n)=>Vv(e,r)||t.get(e,r,n),has:(e,r)=>!!Vv(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(jR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function jR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Em="@firebase/app",Kv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Bw("@firebase/app"),MR="@firebase/app-compat",OR="@firebase/analytics-compat",HR="@firebase/analytics",VR="@firebase/app-check-compat",KR="@firebase/app-check",GR="@firebase/auth",zR="@firebase/auth-compat",$R="@firebase/database",WR="@firebase/data-connect",qR="@firebase/database-compat",JR="@firebase/functions",XR="@firebase/functions-compat",YR="@firebase/installations",ZR="@firebase/installations-compat",eN="@firebase/messaging",tN="@firebase/messaging-compat",rN="@firebase/performance",nN="@firebase/performance-compat",AN="@firebase/remote-config",sN="@firebase/remote-config-compat",iN="@firebase/storage",oN="@firebase/storage-compat",aN="@firebase/firestore",lN="@firebase/vertexai-preview",cN="@firebase/firestore-compat",uN="firebase",dN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="[DEFAULT]",hN={[Em]:"fire-core",[MR]:"fire-core-compat",[HR]:"fire-analytics",[OR]:"fire-analytics-compat",[KR]:"fire-app-check",[VR]:"fire-app-check-compat",[GR]:"fire-auth",[zR]:"fire-auth-compat",[$R]:"fire-rtdb",[WR]:"fire-data-connect",[qR]:"fire-rtdb-compat",[JR]:"fire-fn",[XR]:"fire-fn-compat",[YR]:"fire-iid",[ZR]:"fire-iid-compat",[eN]:"fire-fcm",[tN]:"fire-fcm-compat",[rN]:"fire-perf",[nN]:"fire-perf-compat",[AN]:"fire-rc",[sN]:"fire-rc-compat",[iN]:"fire-gcs",[oN]:"fire-gcs-compat",[aN]:"fire-fst",[cN]:"fire-fst-compat",[lN]:"fire-vertex","fire-js":"fire-js",[uN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new Map,fN=new Map,bm=new Map;function Gv(t,e){try{t.container.addComponent(e)}catch(r){kA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Aa(t){const e=t.name;if(bm.has(e))return kA.debug(`There were multiple attempts to register component ${e}.`),!1;bm.set(e,t);for(const r of vc.values())Gv(r,t);for(const r of fN.values())Gv(r,t);return!0}function zc(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function gN(t,e,r=_h){zc(t,e).clearInstance(r)}function vA(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new Kc("app","Firebase",pN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=dN;function ub(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:_h,automaticDataCollectionEnabled:!1},e),A=n.name;if(typeof A!="string"||!A)throw Us.create("bad-app-name",{appName:String(A)});if(r||(r=sb()),!r)throw Us.create("no-options");const s=vc.get(A);if(s){if(Ls(r,s.options)&&Ls(n,s.config))return s;throw Us.create("duplicate-app",{appName:A})}const i=new xR(A);for(const o of bm.values())i.addComponent(o);const a=new mN(r,n,i);return vc.set(A,a),a}function vw(t=_h){const e=vc.get(t);if(!e&&t===_h&&sb())return ub();if(!e)throw Us.create("no-app",{appName:t});return e}function wN(){return Array.from(vc.values())}function Ss(t,e,r){var n;let A=(n=hN[t])!==null&&n!==void 0?n:t;r&&(A+=`-${r}`);const s=A.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${A}" with version "${e}":`];s&&a.push(`library name "${A}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kA.warn(a.join(" "));return}Aa(new Li(`${A}-version`,()=>({library:A,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="firebase-heartbeat-database",yN=1,xc="firebase-heartbeat-store";let Wg=null;function db(){return Wg||(Wg=NR(BN,yN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xc)}catch(r){console.warn(r)}}}}).catch(t=>{throw Us.create("idb-open",{originalErrorMessage:t.message})})),Wg}async function vN(t){try{const r=(await db()).transaction(xc),n=await r.objectStore(xc).get(hb(t));return await r.done,n}catch(e){if(e instanceof OA)kA.warn(e.message);else{const r=Us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kA.warn(r.message)}}}async function zv(t,e){try{const n=(await db()).transaction(xc,"readwrite");await n.objectStore(xc).put(e,hb(t)),await n.done}catch(r){if(r instanceof OA)kA.warn(r.message);else{const n=Us.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});kA.warn(n.message)}}}function hb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=1024,CN=30*24*60*60*1e3;class IN{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new EN(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const A=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$v();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:A}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=CN}),this._storage.overwrite(this._heartbeatsCache))}catch(n){kA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=$v(),{heartbeatsToSend:n,unsentEntries:A}=_N(this._heartbeatsCache.heartbeats),s=Ih(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return kA.warn(r),""}}}function $v(){return new Date().toISOString().substring(0,10)}function _N(t,e=xN){const r=[];let n=t.slice();for(const A of t){const s=r.find(i=>i.agent===A.agent);if(s){if(s.dates.push(A.date),Wv(r)>e){s.dates.pop();break}}else if(r.push({agent:A.agent,dates:[A.date]}),Wv(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class EN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ab()?uR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vN(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const A=await this.read();return zv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const A=await this.read();return zv(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}else return}}function Wv(t){return Ih(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){Aa(new Li("platform-logger",e=>new LR(e),"PRIVATE")),Aa(new Li("heartbeat",e=>new IN(e),"PRIVATE")),Ss(Em,Kv,t),Ss(Em,Kv,"esm2017"),Ss("fire-js","")}bN("");var TN="firebase",FN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss(TN,FN,"app");var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,fb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,C){function _(){}_.prototype=C.prototype,v.D=C.prototype,v.prototype=new _,v.prototype.constructor=v,v.C=function(Q,N,L){for(var T=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)T[Ke-2]=arguments[Ke];return C.prototype[N].apply(Q,T)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(v,C,_){_||(_=0);var Q=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)Q[N]=C.charCodeAt(_++)|C.charCodeAt(_++)<<8|C.charCodeAt(_++)<<16|C.charCodeAt(_++)<<24;else for(N=0;16>N;++N)Q[N]=C[_++]|C[_++]<<8|C[_++]<<16|C[_++]<<24;C=v.g[0],_=v.g[1],N=v.g[2];var L=v.g[3],T=C+(L^_&(N^L))+Q[0]+3614090360&4294967295;C=_+(T<<7&4294967295|T>>>25),T=L+(N^C&(_^N))+Q[1]+3905402710&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(_^L&(C^_))+Q[2]+606105819&4294967295,N=L+(T<<17&4294967295|T>>>15),T=_+(C^N&(L^C))+Q[3]+3250441966&4294967295,_=N+(T<<22&4294967295|T>>>10),T=C+(L^_&(N^L))+Q[4]+4118548399&4294967295,C=_+(T<<7&4294967295|T>>>25),T=L+(N^C&(_^N))+Q[5]+1200080426&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(_^L&(C^_))+Q[6]+2821735955&4294967295,N=L+(T<<17&4294967295|T>>>15),T=_+(C^N&(L^C))+Q[7]+4249261313&4294967295,_=N+(T<<22&4294967295|T>>>10),T=C+(L^_&(N^L))+Q[8]+1770035416&4294967295,C=_+(T<<7&4294967295|T>>>25),T=L+(N^C&(_^N))+Q[9]+2336552879&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(_^L&(C^_))+Q[10]+4294925233&4294967295,N=L+(T<<17&4294967295|T>>>15),T=_+(C^N&(L^C))+Q[11]+2304563134&4294967295,_=N+(T<<22&4294967295|T>>>10),T=C+(L^_&(N^L))+Q[12]+1804603682&4294967295,C=_+(T<<7&4294967295|T>>>25),T=L+(N^C&(_^N))+Q[13]+4254626195&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(_^L&(C^_))+Q[14]+2792965006&4294967295,N=L+(T<<17&4294967295|T>>>15),T=_+(C^N&(L^C))+Q[15]+1236535329&4294967295,_=N+(T<<22&4294967295|T>>>10),T=C+(N^L&(_^N))+Q[1]+4129170786&4294967295,C=_+(T<<5&4294967295|T>>>27),T=L+(_^N&(C^_))+Q[6]+3225465664&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^_&(L^C))+Q[11]+643717713&4294967295,N=L+(T<<14&4294967295|T>>>18),T=_+(L^C&(N^L))+Q[0]+3921069994&4294967295,_=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(_^N))+Q[5]+3593408605&4294967295,C=_+(T<<5&4294967295|T>>>27),T=L+(_^N&(C^_))+Q[10]+38016083&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^_&(L^C))+Q[15]+3634488961&4294967295,N=L+(T<<14&4294967295|T>>>18),T=_+(L^C&(N^L))+Q[4]+3889429448&4294967295,_=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(_^N))+Q[9]+568446438&4294967295,C=_+(T<<5&4294967295|T>>>27),T=L+(_^N&(C^_))+Q[14]+3275163606&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^_&(L^C))+Q[3]+4107603335&4294967295,N=L+(T<<14&4294967295|T>>>18),T=_+(L^C&(N^L))+Q[8]+1163531501&4294967295,_=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(_^N))+Q[13]+2850285829&4294967295,C=_+(T<<5&4294967295|T>>>27),T=L+(_^N&(C^_))+Q[2]+4243563512&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^_&(L^C))+Q[7]+1735328473&4294967295,N=L+(T<<14&4294967295|T>>>18),T=_+(L^C&(N^L))+Q[12]+2368359562&4294967295,_=N+(T<<20&4294967295|T>>>12),T=C+(_^N^L)+Q[5]+4294588738&4294967295,C=_+(T<<4&4294967295|T>>>28),T=L+(C^_^N)+Q[8]+2272392833&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^_)+Q[11]+1839030562&4294967295,N=L+(T<<16&4294967295|T>>>16),T=_+(N^L^C)+Q[14]+4259657740&4294967295,_=N+(T<<23&4294967295|T>>>9),T=C+(_^N^L)+Q[1]+2763975236&4294967295,C=_+(T<<4&4294967295|T>>>28),T=L+(C^_^N)+Q[4]+1272893353&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^_)+Q[7]+4139469664&4294967295,N=L+(T<<16&4294967295|T>>>16),T=_+(N^L^C)+Q[10]+3200236656&4294967295,_=N+(T<<23&4294967295|T>>>9),T=C+(_^N^L)+Q[13]+681279174&4294967295,C=_+(T<<4&4294967295|T>>>28),T=L+(C^_^N)+Q[0]+3936430074&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^_)+Q[3]+3572445317&4294967295,N=L+(T<<16&4294967295|T>>>16),T=_+(N^L^C)+Q[6]+76029189&4294967295,_=N+(T<<23&4294967295|T>>>9),T=C+(_^N^L)+Q[9]+3654602809&4294967295,C=_+(T<<4&4294967295|T>>>28),T=L+(C^_^N)+Q[12]+3873151461&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^_)+Q[15]+530742520&4294967295,N=L+(T<<16&4294967295|T>>>16),T=_+(N^L^C)+Q[2]+3299628645&4294967295,_=N+(T<<23&4294967295|T>>>9),T=C+(N^(_|~L))+Q[0]+4096336452&4294967295,C=_+(T<<6&4294967295|T>>>26),T=L+(_^(C|~N))+Q[7]+1126891415&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~_))+Q[14]+2878612391&4294967295,N=L+(T<<15&4294967295|T>>>17),T=_+(L^(N|~C))+Q[5]+4237533241&4294967295,_=N+(T<<21&4294967295|T>>>11),T=C+(N^(_|~L))+Q[12]+1700485571&4294967295,C=_+(T<<6&4294967295|T>>>26),T=L+(_^(C|~N))+Q[3]+2399980690&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~_))+Q[10]+4293915773&4294967295,N=L+(T<<15&4294967295|T>>>17),T=_+(L^(N|~C))+Q[1]+2240044497&4294967295,_=N+(T<<21&4294967295|T>>>11),T=C+(N^(_|~L))+Q[8]+1873313359&4294967295,C=_+(T<<6&4294967295|T>>>26),T=L+(_^(C|~N))+Q[15]+4264355552&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~_))+Q[6]+2734768916&4294967295,N=L+(T<<15&4294967295|T>>>17),T=_+(L^(N|~C))+Q[13]+1309151649&4294967295,_=N+(T<<21&4294967295|T>>>11),T=C+(N^(_|~L))+Q[4]+4149444226&4294967295,C=_+(T<<6&4294967295|T>>>26),T=L+(_^(C|~N))+Q[11]+3174756917&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~_))+Q[2]+718787259&4294967295,N=L+(T<<15&4294967295|T>>>17),T=_+(L^(N|~C))+Q[9]+3951481745&4294967295,v.g[0]=v.g[0]+C&4294967295,v.g[1]=v.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,v.g[2]=v.g[2]+N&4294967295,v.g[3]=v.g[3]+L&4294967295}n.prototype.u=function(v,C){C===void 0&&(C=v.length);for(var _=C-this.blockSize,Q=this.B,N=this.h,L=0;L<C;){if(N==0)for(;L<=_;)A(this,v,L),L+=this.blockSize;if(typeof v=="string"){for(;L<C;)if(Q[N++]=v.charCodeAt(L++),N==this.blockSize){A(this,Q),N=0;break}}else for(;L<C;)if(Q[N++]=v[L++],N==this.blockSize){A(this,Q),N=0;break}}this.h=N,this.o+=C},n.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var C=1;C<v.length-8;++C)v[C]=0;var _=8*this.o;for(C=v.length-8;C<v.length;++C)v[C]=_&255,_/=256;for(this.u(v),v=Array(16),C=_=0;4>C;++C)for(var Q=0;32>Q;Q+=8)v[_++]=this.g[C]>>>Q&255;return v};function s(v,C){var _=a;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=C(v)}function i(v,C){this.h=C;for(var _=[],Q=!0,N=v.length-1;0<=N;N--){var L=v[N]|0;Q&&L==C||(_[N]=L,Q=!1)}this.g=_}var a={};function o(v){return-128<=v&&128>v?s(v,function(C){return new i([C|0],0>C?-1:0)}):new i([v|0],0>v?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return h;if(0>v)return E(c(-v));for(var C=[],_=1,Q=0;v>=_;Q++)C[Q]=v/_|0,_*=4294967296;return new i(C,0)}function d(v,C){if(v.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v.charAt(0)=="-")return E(d(v.substring(1),C));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(C,8)),Q=h,N=0;N<v.length;N+=8){var L=Math.min(8,v.length-N),T=parseInt(v.substring(N,N+L),C);8>L?(L=c(Math.pow(C,L)),Q=Q.j(L).add(c(T))):(Q=Q.j(_),Q=Q.add(c(T)))}return Q}var h=o(0),f=o(1),w=o(16777216);t=i.prototype,t.m=function(){if(B(this))return-E(this).m();for(var v=0,C=1,_=0;_<this.g.length;_++){var Q=this.i(_);v+=(0<=Q?Q:4294967296+Q)*C,C*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y(this))return"0";if(B(this))return"-"+E(this).toString(v);for(var C=c(Math.pow(v,6)),_=this,Q="";;){var N=F(_,C).g;_=x(_,N.j(C));var L=((0<_.g.length?_.g[0]:_.h)>>>0).toString(v);if(_=N,y(_))return L+Q;for(;6>L.length;)L="0"+L;Q=L+Q}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function y(v){if(v.h!=0)return!1;for(var C=0;C<v.g.length;C++)if(v.g[C]!=0)return!1;return!0}function B(v){return v.h==-1}t.l=function(v){return v=x(this,v),B(v)?-1:y(v)?0:1};function E(v){for(var C=v.g.length,_=[],Q=0;Q<C;Q++)_[Q]=~v.g[Q];return new i(_,~v.h).add(f)}t.abs=function(){return B(this)?E(this):this},t.add=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0,N=0;N<=C;N++){var L=Q+(this.i(N)&65535)+(v.i(N)&65535),T=(L>>>16)+(this.i(N)>>>16)+(v.i(N)>>>16);Q=T>>>16,L&=65535,T&=65535,_[N]=T<<16|L}return new i(_,_[_.length-1]&-2147483648?-1:0)};function x(v,C){return v.add(E(C))}t.j=function(v){if(y(this)||y(v))return h;if(B(this))return B(v)?E(this).j(E(v)):E(E(this).j(v));if(B(v))return E(this.j(E(v)));if(0>this.l(w)&&0>v.l(w))return c(this.m()*v.m());for(var C=this.g.length+v.g.length,_=[],Q=0;Q<2*C;Q++)_[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var N=0;N<v.g.length;N++){var L=this.i(Q)>>>16,T=this.i(Q)&65535,Ke=v.i(N)>>>16,He=v.i(N)&65535;_[2*Q+2*N]+=T*He,m(_,2*Q+2*N),_[2*Q+2*N+1]+=L*He,m(_,2*Q+2*N+1),_[2*Q+2*N+1]+=T*Ke,m(_,2*Q+2*N+1),_[2*Q+2*N+2]+=L*Ke,m(_,2*Q+2*N+2)}for(Q=0;Q<C;Q++)_[Q]=_[2*Q+1]<<16|_[2*Q];for(Q=C;Q<2*C;Q++)_[Q]=0;return new i(_,0)};function m(v,C){for(;(v[C]&65535)!=v[C];)v[C+1]+=v[C]>>>16,v[C]&=65535,C++}function I(v,C){this.g=v,this.h=C}function F(v,C){if(y(C))throw Error("division by zero");if(y(v))return new I(h,h);if(B(v))return C=F(E(v),C),new I(E(C.g),E(C.h));if(B(C))return C=F(v,E(C)),new I(E(C.g),C.h);if(30<v.g.length){if(B(v)||B(C))throw Error("slowDivide_ only works with positive integers.");for(var _=f,Q=C;0>=Q.l(v);)_=R(_),Q=R(Q);var N=U(_,1),L=U(Q,1);for(Q=U(Q,2),_=U(_,2);!y(Q);){var T=L.add(Q);0>=T.l(v)&&(N=N.add(_),L=T),Q=U(Q,1),_=U(_,1)}return C=x(v,N.j(C)),new I(N,C)}for(N=h;0<=v.l(C);){for(_=Math.max(1,Math.floor(v.m()/C.m())),Q=Math.ceil(Math.log(_)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),L=c(_),T=L.j(C);B(T)||0<T.l(v);)_-=Q,L=c(_),T=L.j(C);y(L)&&(L=f),N=N.add(L),v=x(v,T)}return new I(N,v)}t.A=function(v){return F(this,v).h},t.and=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0;Q<C;Q++)_[Q]=this.i(Q)&v.i(Q);return new i(_,this.h&v.h)},t.or=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0;Q<C;Q++)_[Q]=this.i(Q)|v.i(Q);return new i(_,this.h|v.h)},t.xor=function(v){for(var C=Math.max(this.g.length,v.g.length),_=[],Q=0;Q<C;Q++)_[Q]=this.i(Q)^v.i(Q);return new i(_,this.h^v.h)};function R(v){for(var C=v.g.length+1,_=[],Q=0;Q<C;Q++)_[Q]=v.i(Q)<<1|v.i(Q-1)>>>31;return new i(_,v.h)}function U(v,C){var _=C>>5;C%=32;for(var Q=v.g.length-_,N=[],L=0;L<Q;L++)N[L]=0<C?v.i(L+_)>>>C|v.i(L+_+1)<<32-C:v.i(L+_);return new i(N,v.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,fb=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Fi=i}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gb,Cl,pb,kd,Tm,mb,wb,Bb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function A(u,g){if(g)e:{var p=n;u=u.split(".");for(var b=0;b<u.length-1;b++){var M=u[b];if(!(M in p))break e;p=p[M]}u=u[u.length-1],b=p[u],g=g(b),g!=b&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var p=0,b=!1,M={next:function(){if(!b&&p<u.length){var z=p++;return{value:g(z,u[z]),done:!1}}return b=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}A("Array.prototype.values",function(u){return u||function(){return s(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,b),u.apply(g,M)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function w(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function y(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(b,M,z){for(var we=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)we[bt-2]=arguments[bt];return g.prototype[M].apply(b,we)}}function B(u){const g=u.length;if(0<g){const p=Array(g);for(let b=0;b<g;b++)p[b]=u[b];return p}return[]}function E(u,g){for(let p=1;p<arguments.length;p++){const b=arguments[p];if(o(b)){const M=u.length||0,z=b.length||0;u.length=M+z;for(let we=0;we<z;we++)u[M+we]=b[we]}else u.push(b)}}class x{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function m(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var R=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function U(u,g,p){for(const b in u)g.call(p,u[b],b,u)}function v(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function C(u){const g={};for(const p in u)g[p]=u[p];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,g){let p,b;for(let M=1;M<arguments.length;M++){b=arguments[M];for(p in b)u[p]=b[p];for(let z=0;z<_.length;z++)p=_[z],Object.prototype.hasOwnProperty.call(b,p)&&(u[p]=b[p])}}function N(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function L(u){a.setTimeout(()=>{throw u},0)}function T(){var u=k;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ke{constructor(){this.h=this.g=null}add(g,p){const b=He.get();b.set(g,p),this.h?this.h.next=b:this.g=b,this.h=b}}var He=new x(()=>new et,u=>u.reset());class et{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,se=!1,k=new Ke,G=()=>{const u=a.Promise.resolve(void 0);$e=()=>{u.then(X)}};var X=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){L(p)}var g=He;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}se=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,g),a.removeEventListener("test",p,g)}catch{}return u}();function Fe(u,g){if(ae.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(R){e:{try{F(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:We[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Fe.aa.h.call(this)}}y(Fe,ae);var We={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(1e6*Math.random()|0),pt=0;function tr(u,g,p,b,M){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!b,this.ha=M,this.key=++pt,this.da=this.fa=!1}function rt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dt(u){this.src=u,this.g={},this.h=0}dt.prototype.add=function(u,g,p,b,M){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var we=Ie(u,g,b,M);return-1<we?(g=u[we],p||(g.fa=!1)):(g=new tr(g,this.src,z,!!b,M),g.fa=p,u.push(g)),g};function ht(u,g){var p=g.type;if(p in u.g){var b=u.g[p],M=Array.prototype.indexOf.call(b,g,void 0),z;(z=0<=M)&&Array.prototype.splice.call(b,M,1),z&&(rt(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Ie(u,g,p,b){for(var M=0;M<u.length;++M){var z=u[M];if(!z.da&&z.listener==g&&z.capture==!!p&&z.ha==b)return M}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Ct={};function jt(u,g,p,b,M){if(Array.isArray(g)){for(var z=0;z<g.length;z++)jt(u,g[z],p,b,M);return null}return p=ge(p),u&&u[Te]?u.K(g,p,c(b)?!!b.capture:!1,M):ue(u,g,p,!1,b,M)}function ue(u,g,p,b,M,z){if(!g)throw Error("Invalid event type");var we=c(M)?!!M.capture:!!M,bt=fe(u);if(bt||(u[Re]=bt=new dt(u)),p=bt.add(g,p,b,we,z),p.proxy)return p;if(b=ne(),p.proxy=b,b.src=u,b.listener=p,u.addEventListener)Ve||(M=we),M===void 0&&(M=!1),u.addEventListener(g.toString(),b,M);else if(u.attachEvent)u.attachEvent(le(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function ne(){function u(p){return g.call(u.src,u.listener,p)}const g=je;return u}function Ee(u,g,p,b,M){if(Array.isArray(g))for(var z=0;z<g.length;z++)Ee(u,g[z],p,b,M);else b=c(b)?!!b.capture:!!b,p=ge(p),u&&u[Te]?(u=u.i,g=String(g).toString(),g in u.g&&(z=u.g[g],p=Ie(z,p,b,M),-1<p&&(rt(z[p]),Array.prototype.splice.call(z,p,1),z.length==0&&(delete u.g[g],u.h--)))):u&&(u=fe(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ie(g,p,b,M)),(p=-1<u?g[u]:null)&&ke(p))}function ke(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Te])ht(g.i,u);else{var p=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(p,b,u.capture):g.detachEvent?g.detachEvent(le(p),b):g.addListener&&g.removeListener&&g.removeListener(b),(p=fe(g))?(ht(p,u),p.h==0&&(p.src=null,g[Re]=null)):rt(u)}}}function le(u){return u in Ct?Ct[u]:Ct[u]="on"+u}function je(u,g){if(u.da)u=!0;else{g=new Fe(g,this);var p=u.listener,b=u.ha||u.src;u.fa&&ke(u),u=p.call(b,g)}return u}function fe(u){return u=u[Re],u instanceof dt?u:null}var ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function ge(u){return typeof u=="function"?u:(u[ie]||(u[ie]=function(g){return u.handleEvent(g)}),u[ie])}function _e(){oe.call(this),this.i=new dt(this),this.M=this,this.F=null}y(_e,oe),_e.prototype[Te]=!0,_e.prototype.removeEventListener=function(u,g,p,b){Ee(this,u,g,p,b)};function xe(u,g){var p,b=u.F;if(b)for(p=[];b;b=b.F)p.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new ae(g,u);else if(g instanceof ae)g.target=g.target||u;else{var M=g;g=new ae(b,u),Q(g,M)}if(M=!0,p)for(var z=p.length-1;0<=z;z--){var we=g.g=p[z];M=ce(we,b,!0,g)&&M}if(we=g.g=u,M=ce(we,b,!0,g)&&M,M=ce(we,b,!1,g)&&M,p)for(z=0;z<p.length;z++)we=g.g=p[z],M=ce(we,b,!1,g)&&M}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],b=0;b<p.length;b++)rt(p[b]);delete u.g[g],u.h--}}this.F=null},_e.prototype.K=function(u,g,p,b){return this.i.add(String(u),g,!1,p,b)},_e.prototype.L=function(u,g,p,b){return this.i.add(String(u),g,!0,p,b)};function ce(u,g,p,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,z=0;z<g.length;++z){var we=g[z];if(we&&!we.da&&we.capture==p){var bt=we.listener,br=we.ha||we.src;we.fa&&ht(u.i,we),M=bt.call(br,b)!==!1&&M}}return M&&!b.defaultPrevented}function ze(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Xe(u){u.g=ze(()=>{u.g=null,u.i&&(u.i=!1,Xe(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ft extends oe{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Xe(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(u){oe.call(this),this.h=u,this.g={}}y(ye,oe);var Ce=[];function Ge(u){U(u.g,function(g,p){this.g.hasOwnProperty(p)&&ke(g)},u),u.g={}}ye.prototype.N=function(){ye.aa.N.call(this),Ge(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tt=a.JSON.stringify,mt=a.JSON.parse,D=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function K(){}K.prototype.h=null;function $(u){return u.h||(u.h=u.i())}function O(){}var pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function he(){ae.call(this,"d")}y(he,ae);function re(){ae.call(this,"c")}y(re,ae);var Qe={},de=null;function Pe(){return de=de||new _e}Qe.La="serverreachability";function P(u){ae.call(this,Qe.La,u)}y(P,ae);function V(u){const g=Pe();xe(g,new P(g))}Qe.STAT_EVENT="statevent";function W(u,g){ae.call(this,Qe.STAT_EVENT,u),this.stat=g}y(W,ae);function J(u){const g=Pe();xe(g,new W(g,u))}Qe.Ma="timingevent";function ee(u,g){ae.call(this,Qe.Ma,u),this.size=g}y(ee,ae);function te(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function Ne(){this.g=!0}Ne.prototype.xa=function(){this.g=!1};function Oe(u,g,p,b,M,z){u.info(function(){if(u.g)if(z)for(var we="",bt=z.split("&"),br=0;br<bt.length;br++){var Bt=bt[br].split("=");if(1<Bt.length){var Dr=Bt[0];Bt=Bt[1];var Pr=Dr.split("_");we=2<=Pr.length&&Pr[1]=="type"?we+(Dr+"="+Bt+"&"):we+(Dr+"=redacted&")}}else we=null;else we=z;return"XMLHTTP REQ ("+b+") [attempt "+M+"]: "+g+`
`+p+`
`+we})}function Ye(u,g,p,b,M,z,we){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+M+"]: "+g+`
`+p+`
`+z+" "+we})}function it(u,g,p,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ar(u,p)+(b?" "+b:"")})}function nt(u,g){u.info(function(){return"TIMEOUT: "+g})}Ne.prototype.info=function(){};function ar(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var b=p[u];if(!(2>b.length)){var M=b[1];if(Array.isArray(M)&&!(1>M.length)){var z=M[0];if(z!="noop"&&z!="stop"&&z!="close")for(var we=1;we<M.length;we++)M[we]=""}}}}return tt(p)}catch{return g}}var _r={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Er={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},St;function tn(){}y(tn,K),tn.prototype.g=function(){return new XMLHttpRequest},tn.prototype.i=function(){return{}},St=new tn;function Wr(u,g,p,b){this.j=u,this.i=g,this.l=p,this.R=b||1,this.U=new ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var rn={},uA={};function kt(u,g,p){u.L=1,u.v=pu(dA(g)),u.m=p,u.P=!0,Ka(u,null)}function Ka(u,g){u.F=Date.now(),hu(u),u.A=dA(u.v);var p=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),YB(p.i,"t",b),u.C=0,p=u.j.J,u.h=new oi,u.g=py(u.j,p?g:null,!u.m),0<u.O&&(u.M=new ft(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,b=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Ce[0]=M.toString()),M=Ce);for(var z=0;z<M.length;z++){var we=jt(p,M[z],b||g.handleEvent,!1,g.h||g);if(!we)break;g.g[we.key]=we}g=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),V(),Oe(u.i,u.u,u.A,u.l,u.R,u.m)}Wr.prototype.ca=function(u){u=u.target;const g=this.M;g&&hA(u)==3?g.j():this.Y(u)},Wr.prototype.Y=function(u){try{if(u==this.g)e:{const Pr=hA(this.g);var g=this.g.Ba();const so=this.g.Z();if(!(3>Pr)&&(Pr!=3||this.g&&(this.h.h||this.g.oa()||sy(this.g)))){this.J||Pr!=4||g==7||(g==8||0>=so?V(3):V(2)),ag(this);var p=this.g.Z();this.X=p;t:if(mr(this)){var b=sy(this.g);u="";var M=b.length,z=hA(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),Ga(this);var we="";break t}this.h.i=new a.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,u+=this.h.i.decode(b[g],{stream:!(z&&g==M-1)});b.length=0,this.h.g+=u,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=p==200,Ye(this.i,this.u,this.A,this.l,this.R,Pr,p),this.o){if(this.T&&!this.K){t:{if(this.g){var bt,br=this.g;if((bt=br.g?br.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(bt)){var Bt=bt;break t}}Bt=null}if(p=Bt)it(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lg(this,p);else{this.o=!1,this.s=3,J(12),ai(this),Ga(this);break e}}if(this.P){p=!0;let Pn;for(;!this.J&&this.C<we.length;)if(Pn=VQ(this,we),Pn==uA){Pr==4&&(this.s=4,J(14),p=!1),it(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==rn){this.s=4,J(15),it(this.i,this.l,we,"[Invalid Chunk]"),p=!1;break}else it(this.i,this.l,Pn,null),lg(this,Pn);if(mr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pr!=4||we.length!=0||this.h.h||(this.s=1,J(16),p=!1),this.o=this.o&&p,!p)it(this.i,this.l,we,"[Invalid Chunked Response]"),ai(this),Ga(this);else if(0<we.length&&!this.W){this.W=!0;var Dr=this.j;Dr.g==this&&Dr.ba&&!Dr.M&&(Dr.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),gg(Dr),Dr.M=!0,J(11))}}else it(this.i,this.l,we,null),lg(this,we);Pr==4&&ai(this),this.o&&!this.J&&(Pr==4?dy(this.j,this):(this.o=!1,hu(this)))}else iU(this.g),p==400&&0<we.indexOf("Unknown SID")?(this.s=3,J(12)):(this.s=0,J(13)),ai(this),Ga(this)}}}catch{}finally{}};function mr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function VQ(u,g){var p=u.C,b=g.indexOf(`
`,p);return b==-1?uA:(p=Number(g.substring(p,b)),isNaN(p)?rn:(b+=1,b+p>g.length?uA:(g=g.slice(b,b+p),u.C=b+p,g)))}Wr.prototype.cancel=function(){this.J=!0,ai(this)};function hu(u){u.S=Date.now()+u.I,MB(u,u.I)}function MB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=te(f(u.ba,u),g)}function ag(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Wr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(nt(this.i,this.A),this.L!=2&&(V(),J(17)),ai(this),this.s=2,Ga(this)):MB(this,this.S-u)};function Ga(u){u.j.G==0||u.J||dy(u.j,u)}function ai(u){ag(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Ge(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function lg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||cg(p.h,u))){if(!u.K&&cg(p.h,u)&&p.G==3){try{var b=p.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var M=b;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)xu(p),yu(p);else break e;fg(p),J(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=te(f(p.Za,p),6e3));if(1>=VB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ci(p,11)}else if((u.K||p.g==u)&&xu(p),!m(g))for(M=p.Da.g.parse(g),g=0;g<M.length;g++){let Bt=M[g];if(p.T=Bt[0],Bt=Bt[1],p.G==2)if(Bt[0]=="c"){p.K=Bt[1],p.ia=Bt[2];const Dr=Bt[3];Dr!=null&&(p.la=Dr,p.j.info("VER="+p.la));const Pr=Bt[4];Pr!=null&&(p.Aa=Pr,p.j.info("SVER="+p.Aa));const so=Bt[5];so!=null&&typeof so=="number"&&0<so&&(b=1.5*so,p.L=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const Pn=u.g;if(Pn){const Iu=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iu){var z=b.h;z.g||Iu.indexOf("spdy")==-1&&Iu.indexOf("quic")==-1&&Iu.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ug(z,z.h),z.h=null))}if(b.D){const pg=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;pg&&(b.ya=pg,Rt(b.I,b.D,pg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),b=p;var we=u;if(b.qa=gy(b,b.J?b.ia:null,b.W),we.K){KB(b.h,we);var bt=we,br=b.L;br&&(bt.I=br),bt.B&&(ag(bt),hu(bt)),b.g=we}else cy(b);0<p.i.length&&vu(p)}else Bt[0]!="stop"&&Bt[0]!="close"||ci(p,7);else p.G==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?ci(p,7):hg(p):Bt[0]!="noop"&&p.l&&p.l.ta(Bt),p.v=0)}}V(4)}catch{}}var KQ=class{constructor(u,g){this.g=u,this.map=g}};function OB(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function HB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function VB(u){return u.h?1:u.g?u.g.size:0}function cg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ug(u,g){u.g?u.g.add(g):u.h=g}function KB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}OB.prototype.cancel=function(){if(this.i=GB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function GB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return B(u.i)}function GQ(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(o(u)){for(var g=[],p=u.length,b=0;b<p;b++)g.push(u[b]);return g}g=[],p=0;for(b in u)g[p++]=u[b];return g}function zQ(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(o(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const b in u)g[p++]=b;return g}}}function zB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(o(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=zQ(u),b=GQ(u),M=b.length,z=0;z<M;z++)g.call(void 0,b[z],p&&p[z],u)}var $B=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $Q(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var b=u[p].indexOf("="),M=null;if(0<=b){var z=u[p].substring(0,b);M=u[p].substring(b+1)}else z=u[p];g(z,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function li(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof li){this.h=u.h,fu(this,u.j),this.o=u.o,this.g=u.g,gu(this,u.s),this.l=u.l;var g=u.i,p=new Wa;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),WB(this,p),this.m=u.m}else u&&(g=String(u).match($B))?(this.h=!1,fu(this,g[1]||"",!0),this.o=za(g[2]||""),this.g=za(g[3]||"",!0),gu(this,g[4]),this.l=za(g[5]||"",!0),WB(this,g[6]||"",!0),this.m=za(g[7]||"")):(this.h=!1,this.i=new Wa(null,this.h))}li.prototype.toString=function(){var u=[],g=this.j;g&&u.push($a(g,qB,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push($a(g,qB,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push($a(p,p.charAt(0)=="/"?JQ:qQ,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",$a(p,YQ)),u.join("")};function dA(u){return new li(u)}function fu(u,g,p){u.j=p?za(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function gu(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function WB(u,g,p){g instanceof Wa?(u.i=g,ZQ(u.i,u.h)):(p||(g=$a(g,XQ)),u.i=new Wa(g,u.h))}function Rt(u,g,p){u.i.set(g,p)}function pu(u){return Rt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function za(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $a(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,WQ),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function WQ(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qB=/[#\/\?@]/g,qQ=/[#\?:]/g,JQ=/[#\?]/g,XQ=/[#\?@]/g,YQ=/#/g;function Wa(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function $A(u){u.g||(u.g=new Map,u.h=0,u.i&&$Q(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=Wa.prototype,t.add=function(u,g){$A(this),this.i=null,u=no(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function JB(u,g){$A(u),g=no(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function XB(u,g){return $A(u),g=no(u,g),u.g.has(g)}t.forEach=function(u,g){$A(this),this.g.forEach(function(p,b){p.forEach(function(M){u.call(g,M,b,this)},this)},this)},t.na=function(){$A(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let b=0;b<g.length;b++){const M=u[b];for(let z=0;z<M.length;z++)p.push(g[b])}return p},t.V=function(u){$A(this);let g=[];if(typeof u=="string")XB(this,u)&&(g=g.concat(this.g.get(no(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return $A(this),this.i=null,u=no(this,u),XB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function YB(u,g,p){JB(u,g),0<p.length&&(u.i=null,u.g.set(no(u,g),B(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var b=g[p];const z=encodeURIComponent(String(b)),we=this.V(b);for(b=0;b<we.length;b++){var M=z;we[b]!==""&&(M+="="+encodeURIComponent(String(we[b]))),u.push(M)}}return this.i=u.join("&")};function no(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ZQ(u,g){g&&!u.j&&($A(u),u.i=null,u.g.forEach(function(p,b){var M=b.toLowerCase();b!=M&&(JB(this,b),YB(this,M,p))},u)),u.j=g}function eU(u,g){const p=new Ne;if(a.Image){const b=new Image;b.onload=w(WA,p,"TestLoadImage: loaded",!0,g,b),b.onerror=w(WA,p,"TestLoadImage: error",!1,g,b),b.onabort=w(WA,p,"TestLoadImage: abort",!1,g,b),b.ontimeout=w(WA,p,"TestLoadImage: timeout",!1,g,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function tU(u,g){const p=new Ne,b=new AbortController,M=setTimeout(()=>{b.abort(),WA(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(z=>{clearTimeout(M),z.ok?WA(p,"TestPingServer: ok",!0,g):WA(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),WA(p,"TestPingServer: error",!1,g)})}function WA(u,g,p,b,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),b(p)}catch{}}function rU(){this.g=new D}function nU(u,g,p){const b=p||"";try{zB(u,function(M,z){let we=M;c(M)&&(we=tt(M)),g.push(b+z+"="+encodeURIComponent(we))})}catch(M){throw g.push(b+"type="+encodeURIComponent("_badmap")),M}}function mu(u){this.l=u.Ub||null,this.j=u.eb||!1}y(mu,K),mu.prototype.g=function(){return new wu(this.l,this.j)},mu.prototype.i=function(u){return function(){return u}}({});function wu(u,g){_e.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(wu,_e),t=wu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Ja(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ZB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ZB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?qa(this):Ja(this),this.readyState==3&&ZB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qa(this))},t.Qa=function(u){this.g&&(this.response=u,qa(this))},t.ga=function(){this.g&&qa(this)};function qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ja(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function Ja(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ey(u){let g="";return U(u,function(p,b){g+=b,g+=":",g+=p,g+=`\r
`}),g}function dg(u,g,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=ey(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Rt(u,g,p))}function Yt(u){_e.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Yt,_e);var AU=/^https?$/i,sU=["POST","PUT"];t=Yt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():St.g(),this.v=this.o?$(this.o):$(St),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(z){ty(this,z);return}if(u=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var M in b)p.set(M,b[M]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const z of b.keys())p.set(z,b.get(z));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(z=>z.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sU,g,void 0))||b||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,we]of p)this.g.setRequestHeader(z,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ay(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){ty(this,z)}};function ty(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,ry(u),Bu(u)}function ry(u){u.A||(u.A=!0,xe(u,"complete"),xe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,xe(this,"complete"),xe(this,"abort"),Bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bu(this,!0)),Yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ny(this):this.bb())},t.bb=function(){ny(this)};function ny(u){if(u.h&&typeof i<"u"&&(!u.v[1]||hA(u)!=4||u.Z()!=2)){if(u.u&&hA(u)==4)ze(u.Ea,0,u);else if(xe(u,"readystatechange"),hA(u)==4){u.h=!1;try{const we=u.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var b;if(b=we===0){var M=String(u.D).match($B)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),b=!AU.test(M?M.toLowerCase():"")}p=b}if(p)xe(u,"complete"),xe(u,"success");else{u.m=6;try{var z=2<hA(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",ry(u)}}finally{Bu(u)}}}}function Bu(u,g){if(u.g){Ay(u);const p=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||xe(u,"ready");try{p.onreadystatechange=b}catch{}}}function Ay(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function hA(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<hA(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),mt(g)}};function sy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function iU(u){const g={};u=(u.g&&2<=hA(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(m(u[b]))continue;var p=N(u[b]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const z=g[M]||[];g[M]=z,z.push(p)}v(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function iy(u){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,u),this.cb=Xa("retryDelaySeedMs",1e4,u),this.Wa=Xa("forwardChannelMaxRetries",2,u),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new OB(u&&u.concurrentRequestLimit),this.Da=new rU,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=iy.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,b){J(0),this.W=u,this.H=g||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.I=gy(this,null,this.W),vu(this)};function hg(u){if(oy(u),u.G==3){var g=u.U++,p=dA(u.I);if(Rt(p,"SID",u.K),Rt(p,"RID",g),Rt(p,"TYPE","terminate"),Ya(u,p),g=new Wr(u,u.j,g),g.L=2,g.v=pu(dA(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=g.v,p=!0),p||(g.g=py(g.j,null),g.g.ea(g.v)),g.F=Date.now(),hu(g)}fy(u)}function yu(u){u.g&&(gg(u),u.g.cancel(),u.g=null)}function oy(u){yu(u),u.u&&(a.clearTimeout(u.u),u.u=null),xu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function vu(u){if(!HB(u.h)&&!u.s){u.s=!0;var g=u.Ga;$e||G(),se||($e(),se=!0),k.add(g,u),u.B=0}}function oU(u,g){return VB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=te(f(u.Ga,u,g),hy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Wr(this,this.j,u);let z=this.o;if(this.S&&(z?(z=C(z),Q(z,this.S)):z=this.S),this.m!==null||this.O||(M.H=z,z=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=ly(this,M,g),p=dA(this.I),Rt(p,"RID",u),Rt(p,"CVER",22),this.D&&Rt(p,"X-HTTP-Session-Id",this.D),Ya(this,p),z&&(this.O?g="headers="+encodeURIComponent(String(ey(z)))+"&"+g:this.m&&dg(p,this.m,z)),ug(this.h,M),this.Ua&&Rt(p,"TYPE","init"),this.P?(Rt(p,"$req",g),Rt(p,"SID","null"),M.T=!0,kt(M,p,null)):kt(M,p,g),this.G=2}}else this.G==3&&(u?ay(this,u):this.i.length==0||HB(this.h)||ay(this))};function ay(u,g){var p;g?p=g.l:p=u.U++;const b=dA(u.I);Rt(b,"SID",u.K),Rt(b,"RID",p),Rt(b,"AID",u.T),Ya(u,b),u.m&&u.o&&dg(b,u.m,u.o),p=new Wr(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=ly(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ug(u.h,p),kt(p,b,g)}function Ya(u,g){u.H&&U(u.H,function(p,b){Rt(g,b,p)}),u.l&&zB({},function(p,b){Rt(g,b,p)})}function ly(u,g,p){p=Math.min(u.i.length,p);var b=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let z=-1;for(;;){const we=["count="+p];z==-1?0<p?(z=M[0].g,we.push("ofs="+z)):z=0:we.push("ofs="+z);let bt=!0;for(let br=0;br<p;br++){let Bt=M[br].g;const Dr=M[br].map;if(Bt-=z,0>Bt)z=Math.max(0,M[br].g-100),bt=!1;else try{nU(Dr,we,"req"+Bt+"_")}catch{b&&b(Dr)}}if(bt){b=we.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,b}function cy(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;$e||G(),se||($e(),se=!0),k.add(g,u),u.v=0}}function fg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=te(f(u.Fa,u),hy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,uy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=te(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,J(10),yu(this),uy(this))};function gg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function uy(u){u.g=new Wr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=dA(u.qa);Rt(g,"RID","rpc"),Rt(g,"SID",u.K),Rt(g,"AID",u.T),Rt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Rt(g,"TO",u.ja),Rt(g,"TYPE","xmlhttp"),Ya(u,g),u.m&&u.o&&dg(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=pu(dA(g)),p.m=null,p.P=!0,Ka(p,u)}t.Za=function(){this.C!=null&&(this.C=null,yu(this),fg(this),J(19))};function xu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function dy(u,g){var p=null;if(u.g==g){xu(u),gg(u),u.g=null;var b=2}else if(cg(u.h,g))p=g.D,KB(u.h,g),b=1;else return;if(u.G!=0){if(g.o)if(b==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var M=u.B;b=Pe(),xe(b,new ee(b,p)),vu(u)}else cy(u);else if(M=g.s,M==3||M==0&&0<g.X||!(b==1&&oU(u,g)||b==2&&fg(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),M){case 1:ci(u,5);break;case 4:ci(u,10);break;case 3:ci(u,6);break;default:ci(u,2)}}}function hy(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function ci(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),b=u.Xa;const M=!b;b=new li(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fu(b,"https"),pu(b),M?eU(b.toString(),p):tU(b.toString(),p)}else J(2);u.G=0,u.l&&u.l.sa(g),fy(u),oy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),J(2)):(this.j.info("Failed to ping google.com"),J(1))};function fy(u){if(u.G=0,u.ka=[],u.l){const g=GB(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ka,g),E(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function gy(u,g,p){var b=p instanceof li?dA(p):new li(p);if(b.g!="")g&&(b.g=g+"."+b.g),gu(b,b.s);else{var M=a.location;b=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var z=new li(null);b&&fu(z,b),g&&(z.g=g),M&&gu(z,M),p&&(z.l=p),b=z}return p=u.D,g=u.ya,p&&g&&Rt(b,p,g),Rt(b,"VER",u.la),Ya(u,b),b}function py(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Yt(new mu({eb:p})):new Yt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function my(){}t=my.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cu(){}Cu.prototype.g=function(u,g){return new fn(u,g)};function fn(u,g){_e.call(this),this.g=new iy(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!m(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!m(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ao(this)}y(fn,_e),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){hg(this.g)},fn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=tt(u),u=p);g.i.push(new KQ(g.Ya++,u)),g.G==3&&vu(g)},fn.prototype.N=function(){this.g.l=null,delete this.j,hg(this.g),delete this.g,fn.aa.N.call(this)};function wy(u){he.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}y(wy,he);function By(){re.call(this),this.status=1}y(By,re);function Ao(u){this.g=u}y(Ao,my),Ao.prototype.ua=function(){xe(this.g,"a")},Ao.prototype.ta=function(u){xe(this.g,new wy(u))},Ao.prototype.sa=function(u){xe(this.g,new By)},Ao.prototype.ra=function(){xe(this.g,"b")},Cu.prototype.createWebChannel=Cu.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Bb=function(){return new Cu},wb=function(){return Pe()},mb=Qe,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,kd=_r,Er.COMPLETE="complete",pb=Er,O.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",_e.prototype.listen=_e.prototype.K,Cl=O,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,gb=Yt}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Jv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Bw("@firebase/firestore");function wo(){return js.logLevel}function QN(t){js.setLogLevel(t)}function Z(t,...e){if(js.logLevel<=lt.DEBUG){const r=e.map(xw);js.debug(`Firestore (${ba}): ${t}`,...r)}}function ir(t,...e){if(js.logLevel<=lt.ERROR){const r=e.map(xw);js.error(`Firestore (${ba}): ${t}`,...r)}}function Cn(t,...e){if(js.logLevel<=lt.WARN){const r=e.map(xw);js.warn(`Firestore (${ba}): ${t}`,...r)}}function xw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function Le(t,e){t||Se()}function UN(t,e){t||Se()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends OA{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(vr.UNAUTHENTICATED))}shutdown(){}}class SN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kN{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Le(this.o===void 0);let n=this.i;const A=o=>this.i!==n?(n=this.i,r(o)):Promise.resolve();let s=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Cr,e.enqueueRetryable(()=>A(this.currentUser))};const i=()=>{const o=s;e.enqueueRetryable(async()=>{await o.promise,await A(this.currentUser)})},a=o=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(o=>a(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?a(o):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Cr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Le(typeof n.accessToken=="string"),new yb(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new vr(e)}}class RN{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class NN{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new RN(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Le(this.o===void 0);const n=s=>{s.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,Z("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const A=s=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>A(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?A(s):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Le(typeof r.token=="string"),this.R=r.token,new xb(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class PN{getToken(){return Promise.resolve(new xb(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const A=LN(40);for(let s=0;s<A.length;++s)n.length<20&&A[s]<r&&(n+=e.charAt(A[s]%e.length))}return n}}function Je(t,e){return t<e?-1:t>e?1:0}function sa(t,e,r){return t.length===e.length&&t.every((n,A)=>r(n,e[A]))}function Cb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Y(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Y(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Y(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Gt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new Gt(0,0))}static max(){return new Me(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,r,n){r===void 0?r=0:r>e.length&&Se(),n===void 0?n=e.length-r:n>e.length-r&&Se(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Cc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Cc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let A=0;A<n;A++){const s=e.get(A),i=r.get(A);if(s<i)return-1;if(s>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class ct extends Cc{construct(e,r,n){return new ct(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Y(H.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(A=>A.length>0))}return new ct(r)}static emptyPath(){return new ct([])}}const jN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Cc{construct(e,r,n){return new Pt(e,r,n)}static isValidIdentifier(e){return jN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const r=[];let n="",A=0;const s=()=>{if(n.length===0)throw new Y(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;A<e.length;){const a=e[A];if(a==="\\"){if(A+1===e.length)throw new Y(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[A+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new Y(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=o,A+=2}else a==="`"?(i=!i,A++):a!=="."||i?(n+=a,A++):(s(),A++)}if(s(),i)throw new Y(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(r)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(ct.fromString(e))}static fromName(e){return new ve(ct.fromString(e).popFirst(5))}static empty(){return new ve(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ct.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new ct(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,r,n,A){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=A}}function Fm(t){return t.fields.find(e=>e.kind===2)}function mi(t){return t.fields.filter(e=>e.kind!==2)}function MN(t,e){let r=Je(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=ON(t.fields[n],e.fields[n]),r!==0)return r;return Je(t.fields.length,e.fields.length)}ia.UNKNOWN_ID=-1;class Qi{constructor(e,r){this.fieldPath=e,this.kind=r}}function ON(t,e){const r=Pt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:Je(t.kind,e.kind)}class oa{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new oa(0,In.min())}}function Ib(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,A=Me.fromTimestamp(n===1e9?new Gt(r+1,0):new Gt(r,n));return new In(A,ve.empty(),e)}function _b(t){return new In(t.readTime,t.key,-1)}class In{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new In(Me.min(),ve.empty(),-1)}static max(){return new In(Me.max(),ve.empty(),-1)}}function Iw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ve.comparator(t.documentKey,e.documentKey),r!==0?r:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==Eb)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new j((n,A)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,A)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,A)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof j?r:j.resolve(r)}catch(r){return j.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):j.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):j.reject(r)}static resolve(e){return new j((r,n)=>{r(e)})}static reject(e){return new j((r,n)=>{n(e)})}static waitFor(e){return new j((r,n)=>{let A=0,s=0,i=!1;e.forEach(a=>{++A,a.next(()=>{++s,i&&s===A&&r()},o=>n(o))}),i=!0,s===A&&r()})}static or(e){let r=j.resolve(!1);for(const n of e)r=r.next(A=>A?j.resolve(A):n());return r}static forEach(e,r){const n=[];return e.forEach((A,s)=>{n.push(r.call(this,A,s))}),this.waitFor(n)}static mapArray(e,r){return new j((n,A)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const c=o;r(e[c]).next(d=>{i[c]=d,++a,a===s&&n(i)},d=>A(d))}})}static doWhile(e,r){return new j((n,A)=>{const s=()=>{e()===!0?r().next(()=>{s()},A):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Cr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Kl(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const A=_w(n.target.error);this.V.reject(new Kl(e,A))}}static open(e,r,n,A){try{return new If(r,e.transaction(A,n))}catch(s){throw new Kl(r,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new VN(r)}}class AA{constructor(e,r,n){this.name=e,this.version=r,this.p=n,AA.S(gr())===12.2&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Z("SimpleDb","Removing database:",e),wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ab())return!1;if(AA.v())return!0;const e=gr(),r=AA.S(e),n=0<r&&r<10,A=Tb(e),s=0<A&&A<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Z("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const A=indexedDB.open(this.name,this.version);A.onsuccess=s=>{const i=s.target.result;r(i)},A.onblocked=()=>{n(new Kl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=s=>{const i=s.target.error;i.name==="VersionError"?n(new Y(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new Y(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Kl(e,i))},A.onupgradeneeded=s=>{Z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,A.transaction,s.oldVersion,this.version).next(()=>{Z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,A){const s=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const a=If.open(this.db,e,s?"readonly":"readwrite",n),o=A(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),j.reject(c))).toPromise();return o.catch(()=>{}),await a.m,o}catch(a){const o=a,c=o.name!=="FirebaseError"&&i<3;if(Z("SimpleDb","Transaction failed with error:",o.message,"Retrying:",c),this.close(),!c)return Promise.reject(o)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Tb(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class HN{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wi(this.B.delete())}}class Kl extends Y{constructor(e,r){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ei(t){return t.name==="IndexedDbTransactionError"}class VN{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Z("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wi(n)}add(e){return Z("SimpleDb","ADD",this.store.name,e,e),wi(this.store.add(e))}get(e){return wi(this.store.get(e)).next(r=>(r===void 0&&(r=null),Z("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Z("SimpleDb","DELETE",this.store.name,e),wi(this.store.delete(e))}count(){return Z("SimpleDb","COUNT",this.store.name),wi(this.store.count())}U(e,r){const n=this.options(e,r),A=n.index?this.store.index(n.index):this.store;if(typeof A.getAll=="function"){const s=A.getAll(n.range);return new j((i,a)=>{s.onerror=o=>{a(o.target.error)},s.onsuccess=o=>{i(o.target.result)}})}{const s=this.cursor(n),i=[];return this.W(s,(a,o)=>{i.push(o)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new j((A,s)=>{n.onerror=i=>{s(i.target.error)},n.onsuccess=i=>{A(i.target.result)}})}j(e,r){Z("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const A=this.cursor(n);return this.W(A,(s,i,a)=>a.delete())}J(e,r){let n;r?n=e:(n={},r=e);const A=this.cursor(n);return this.W(A,r)}Y(e){const r=this.cursor({});return new j((n,A)=>{r.onerror=s=>{const i=_w(s.target.error);A(i)},r.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(a=>{a?i.continue():n()}):n()}})}W(e,r){const n=[];return new j((A,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void A();const o=new HN(a),c=r(a.primaryKey,a.value,o);if(c instanceof j){const d=c.catch(h=>(o.done(),j.reject(h)));n.push(d)}o.isDone?A():o.K===null?a.continue():a.continue(o.K)}}).next(()=>j.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function wi(t){return new j((e,r)=>{t.onsuccess=n=>{const A=n.target.result;e(A)},t.onerror=n=>{const A=_w(n.target.error);r(A)}})}let Xv=!1;function _w(t){const e=AA.S(gr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xv||(Xv=!0,setTimeout(()=>{throw n},0)),n}}return t}class KN{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Z("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ei(r)?Z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Zs(r)}await this.X(6e4)})}}class GN{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let A=r,s=!0;return j.doWhile(()=>s===!0&&A>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return Z("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,A).next(a=>{A-=a,n.add(i)});s=!1})).next(()=>r-A)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(A=>this.localStore.localDocuments.getNextDocuments(e,r,A,n).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(A,s)).next(a=>(Z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,r,a))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((A,s)=>{const i=_b(s);Iw(i,n)>0&&(n=i)}),new In(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}an.oe=-1;function $c(t){return t==null}function Ic(t){return t===0&&1/t==-1/0}function Fb(t){return typeof t=="number"&&Number.isInteger(t)&&!Ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Yv(e)),e=zN(t.get(r),e);return Yv(e)}function zN(t,e){let r=e;const n=t.length;for(let A=0;A<n;A++){const s=t.charAt(A);switch(s){case"\0":r+="";break;case"":r+="";break;default:r+=s}}return r}function Yv(t){return t+""}function eA(t){const e=t.length;if(Le(e>=2),e===2)return Le(t.charAt(0)===""&&t.charAt(1)===""),ct.emptyPath();const r=e-2,n=[];let A="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>r)&&Se(),t.charAt(i+1)){case"":const a=t.substring(s,i);let o;A.length===0?o=a:(A+=a,o=A,A=""),n.push(o);break;case"":A+=t.substring(s,i),A+="\0";break;case"":A+=t.substring(s,i+1);break;default:Se()}s=i+2}return new ct(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t,e){return[t,Gr(e)]}function Qb(t,e,r){return[t,Gr(e),r]}const $N={},WN=["prefixPath","collectionGroup","readTime","documentId"],qN=["prefixPath","collectionGroup","documentId"],JN=["collectionGroup","readTime","prefixPath","documentId"],XN=["canonicalId","targetId"],YN=["targetId","path"],ZN=["path","targetId"],e4=["collectionId","parent"],t4=["indexId","uid"],r4=["uid","sequenceNumber"],n4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A4=["indexId","uid","orderedDocumentKey"],s4=["userId","collectionPath","documentId"],i4=["userId","collectionPath","largestBatchId"],o4=["userId","collectionGroup","largestBatchId"],Ub=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],a4=[...Ub,"documentOverlays"],Sb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kb=Sb,Ew=[...kb,"indexConfiguration","indexState","indexEntries"],l4=Ew,c4=[...Ew,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm extends bb{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function pr(t,e){const r=me(t);return AA.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ti(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Rb(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function Nb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,r){this.comparator=e,this.root=r||Ur.EMPTY}insert(e,r){return new Ut(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const A=this.comparator(e,n.key);if(A===0)return r+n.left.size;A<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vu(this.root,e,this.comparator,!0)}}class Vu{constructor(e,r,n,A){this.isReverse=A,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&A&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,r,n,A,s){this.key=e,this.value=r,this.color=n??Ur.RED,this.left=A??Ur.EMPTY,this.right=s??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,A,s){return new Ur(e??this.key,r??this.value,n??this.color,A??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let A=this;const s=n(e,A.key);return A=s<0?A.copy(null,null,null,A.left.insert(e,r,n),null):s===0?A.copy(null,r,null,null,null):A.copy(null,null,null,null,A.right.insert(e,r,n)),A.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,A=this;if(r(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,r),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),r(e,A.key)===0){if(A.right.isEmpty())return Ur.EMPTY;n=A.right.min(),A=A.copy(n.key,n.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,r))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1;Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,r,n,A,s){return this}insert(e,r,n){return new Ur(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const A=n.getNext();if(this.comparator(A.key,e[1])>=0)return;r(A.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new tx(this.data.getIterator())}getIteratorFrom(e){return new tx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const A=r.getNext().key,s=n.getNext().key;if(this.comparator(A,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new _t(this.comparator);return r.data=e,r}}class tx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function oo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new ln([])}unionWith(e){let r=new _t(Pt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ln(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(A){try{return atob(A)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Db("Invalid base64 string: "+s):s}}(e);return new Xt(r)}static fromUint8Array(e){const r=function(A){let s="";for(let i=0;i<A.length;++i)s+=String.fromCharCode(A[i]);return s}(e);return new Xt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let A=0;A<r.length;A++)n[A]=r.charCodeAt(A);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const d4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function RA(t){if(Le(!!t),typeof t=="string"){let e=0;const r=d4.exec(t);if(Le(!!r),r[1]){let A=r[1];A=(A+"000000000").substr(0,9),e=Number(A)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function NA(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Ef(t){const e=t.mapValue.fields.__previous_value__;return _f(e)?Ef(e):e}function _c(t){const e=RA(t.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,r,n,A,s,i,a,o,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=A,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class Ms{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ms("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ms&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nd={nullValue:"NULL_VALUE"};function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_f(t)?4:Pb(t)?9007199254740991:bf(t)?10:11:Se()}function aA(t,e){if(t===e)return!0;const r=Os(t);if(r!==Os(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _c(t).isEqual(_c(e));case 3:return function(A,s){if(typeof A.timestampValue=="string"&&typeof s.timestampValue=="string"&&A.timestampValue.length===s.timestampValue.length)return A.timestampValue===s.timestampValue;const i=RA(A.timestampValue),a=RA(s.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(A,s){return NA(A.bytesValue).isEqual(NA(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(A,s){return Ht(A.geoPointValue.latitude)===Ht(s.geoPointValue.latitude)&&Ht(A.geoPointValue.longitude)===Ht(s.geoPointValue.longitude)}(t,e);case 2:return function(A,s){if("integerValue"in A&&"integerValue"in s)return Ht(A.integerValue)===Ht(s.integerValue);if("doubleValue"in A&&"doubleValue"in s){const i=Ht(A.doubleValue),a=Ht(s.doubleValue);return i===a?Ic(i)===Ic(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return sa(t.arrayValue.values||[],e.arrayValue.values||[],aA);case 10:case 11:return function(A,s){const i=A.mapValue.fields||{},a=s.mapValue.fields||{};if(ex(i)!==ex(a))return!1;for(const o in i)if(i.hasOwnProperty(o)&&(a[o]===void 0||!aA(i[o],a[o])))return!1;return!0}(t,e);default:return Se()}}function Ec(t,e){return(t.values||[]).find(r=>aA(r,e))!==void 0}function Hs(t,e){if(t===e)return 0;const r=Os(t),n=Os(e);if(r!==n)return Je(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return function(s,i){const a=Ht(s.integerValue||s.doubleValue),o=Ht(i.integerValue||i.doubleValue);return a<o?-1:a>o?1:a===o?0:isNaN(a)?isNaN(o)?0:-1:1}(t,e);case 3:return rx(t.timestampValue,e.timestampValue);case 4:return rx(_c(t),_c(e));case 5:return Je(t.stringValue,e.stringValue);case 6:return function(s,i){const a=NA(s),o=NA(i);return a.compareTo(o)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const a=s.split("/"),o=i.split("/");for(let c=0;c<a.length&&c<o.length;c++){const d=Je(a[c],o[c]);if(d!==0)return d}return Je(a.length,o.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const a=Je(Ht(s.latitude),Ht(i.latitude));return a!==0?a:Je(Ht(s.longitude),Ht(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nx(t.arrayValue,e.arrayValue);case 10:return function(s,i){var a,o,c,d;const h=s.fields||{},f=i.fields||{},w=(a=h.value)===null||a===void 0?void 0:a.arrayValue,y=(o=f.value)===null||o===void 0?void 0:o.arrayValue,B=Je(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return B!==0?B:nx(w,y)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===ps.mapValue&&i===ps.mapValue)return 0;if(s===ps.mapValue)return 1;if(i===ps.mapValue)return-1;const a=s.fields||{},o=Object.keys(a),c=i.fields||{},d=Object.keys(c);o.sort(),d.sort();for(let h=0;h<o.length&&h<d.length;++h){const f=Je(o[h],d[h]);if(f!==0)return f;const w=Hs(a[o[h]],c[d[h]]);if(w!==0)return w}return Je(o.length,d.length)}(t.mapValue,e.mapValue);default:throw Se()}}function rx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const r=RA(t),n=RA(e),A=Je(r.seconds,n.seconds);return A!==0?A:Je(r.nanos,n.nanos)}function nx(t,e){const r=t.values||[],n=e.values||[];for(let A=0;A<r.length&&A<n.length;++A){const s=Hs(r[A],n[A]);if(s)return s}return Je(r.length,n.length)}function aa(t){return Um(t)}function Um(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=RA(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return NA(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ve.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",A=!0;for(const s of r.values||[])A?A=!1:n+=",",n+=Um(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let A="{",s=!0;for(const i of n)s?s=!1:A+=",",A+=`${i}:${Um(r.fields[i])}`;return A+"}"}(t.mapValue):Se()}function Dd(t){switch(Os(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ef(t);return e?16+Dd(e):16;case 5:return 2*t.stringValue.length;case 6:return NA(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((A,s)=>A+Dd(s),0)}(t.arrayValue);case 10:case 11:return function(n){let A=0;return ti(n.fields,(s,i)=>{A+=s.length+Dd(i)}),A}(t.mapValue);default:throw Se()}}function ji(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sm(t){return!!t&&"integerValue"in t}function bc(t){return!!t&&"arrayValue"in t}function Ax(t){return!!t&&"nullValue"in t}function sx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pd(t){return!!t&&"mapValue"in t}function bf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Gl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ti(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Gl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Gl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function Pb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Lb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function f4(t){return"nullValue"in t?Nd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ji(Ms.empty(),ve.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?bf(t)?Lb:{mapValue:{}}:Se()}function g4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ji(Ms.empty(),ve.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Lb:"mapValue"in t?bf(t)?{mapValue:{}}:ps:Se()}function ix(t,e){const r=Hs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ox(t,e){const r=Hs(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.value=e}static empty(){return new Sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Pd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(r)}setAll(e){let r=Pt.emptyPath(),n={},A=[];e.forEach((i,a)=>{if(!r.isImmediateParentOf(a)){const o=this.getFieldsMap(r);this.applyChanges(o,n,A),n={},A=[],r=a.popLast()}i?n[a.lastSegment()]=Gl(i):A.push(a.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,A)}delete(e){const r=this.field(e.popLast());Pd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return aA(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let A=r.mapValue.fields[e.get(n)];Pd(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=A),r=A}return r.mapValue.fields}applyChanges(e,r,n){ti(r,(A,s)=>e[A]=s);for(const A of n)delete e[A]}clone(){return new Sr(Gl(this.value))}}function jb(t){const e=[];return ti(t.fields,(r,n)=>{const A=new Pt([r]);if(Pd(n)){const s=jb(n.mapValue).fields;if(s.length===0)e.push(A);else for(const i of s)e.push(A.child(i))}else e.push(A)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,r,n,A,s,i,a){this.key=e,this.documentType=r,this.version=n,this.readTime=A,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Dt(e,0,Me.min(),Me.min(),Me.min(),Sr.empty(),0)}static newFoundDocument(e,r,n,A){return new Dt(e,1,r,Me.min(),n,A,0)}static newNoDocument(e,r){return new Dt(e,2,r,Me.min(),Me.min(),Sr.empty(),0)}static newUnknownDocument(e,r){return new Dt(e,3,r,Me.min(),Me.min(),Sr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,r){this.position=e,this.inclusive=r}}function ax(t,e,r){let n=0;for(let A=0;A<t.position.length;A++){const s=e[A],i=t.position[A];if(s.field.isKeyField()?n=ve.comparator(ve.fromName(i.referenceValue),r.key):n=Hs(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function lx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!aA(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r="asc"){this.field=e,this.dir=r}}function p4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{}class ut extends Mb{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new m4(e,r,n):r==="array-contains"?new y4(e,n):r==="in"?new zb(e,n):r==="not-in"?new v4(e,n):r==="array-contains-any"?new x4(e,n):new ut(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new w4(e,n):new B4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Hs(r,this.value)):r!==null&&Os(this.value)===Os(r)&&this.matchesComparison(Hs(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends Mb{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new vt(e,r)}matches(e){return la(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function la(t){return t.op==="and"}function km(t){return t.op==="or"}function bw(t){return Ob(t)&&la(t)}function Ob(t){for(const e of t.filters)if(e instanceof vt)return!1;return!0}function Rm(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+aa(t.value);if(bw(t))return t.filters.map(e=>Rm(e)).join(",");{const e=t.filters.map(r=>Rm(r)).join(",");return`${t.op}(${e})`}}function Hb(t,e){return t instanceof ut?function(n,A){return A instanceof ut&&n.op===A.op&&n.field.isEqual(A.field)&&aA(n.value,A.value)}(t,e):t instanceof vt?function(n,A){return A instanceof vt&&n.op===A.op&&n.filters.length===A.filters.length?n.filters.reduce((s,i,a)=>s&&Hb(i,A.filters[a]),!0):!1}(t,e):void Se()}function Vb(t,e){const r=t.filters.concat(e);return vt.create(r,t.op)}function Kb(t){return t instanceof ut?function(r){return`${r.field.canonicalString()} ${r.op} ${aa(r.value)}`}(t):t instanceof vt?function(r){return r.op.toString()+" {"+r.getFilters().map(Kb).join(" ,")+"}"}(t):"Filter"}class m4 extends ut{constructor(e,r,n){super(e,r,n),this.key=ve.fromName(n.referenceValue)}matches(e){const r=ve.comparator(e.key,this.key);return this.matchesComparison(r)}}class w4 extends ut{constructor(e,r){super(e,"in",r),this.keys=Gb("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class B4 extends ut{constructor(e,r){super(e,"not-in",r),this.keys=Gb("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Gb(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>ve.fromName(n.referenceValue))}class y4 extends ut{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return bc(r)&&Ec(r.arrayValue,this.value)}}class zb extends ut{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ec(this.value.arrayValue,r)}}class v4 extends ut{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ec(this.value.arrayValue,r)}}class x4 extends ut{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!bc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ec(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,r=null,n=[],A=[],s=null,i=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=A,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Nm(t,e=null,r=[],n=[],A=null,s=null,i=null){return new C4(t,e,r,n,A,s,i)}function Mi(t){const e=me(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Rm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),$c(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>aa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>aa(n)).join(",")),e.ue=r}return e.ue}function Wc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!p4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Hb(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lx(t.startAt,e.startAt)&&lx(t.endAt,e.endAt)}function Eh(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function bh(t,e){return t.filters.filter(r=>r instanceof ut&&r.field.isEqual(e))}function cx(t,e,r){let n=Nd,A=!0;for(const s of bh(t,e)){let i=Nd,a=!0;switch(s.op){case"<":case"<=":i=f4(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,a=!1;break;case"!=":case"not-in":i=Nd}ix({value:n,inclusive:A},{value:i,inclusive:a})<0&&(n=i,A=a)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];ix({value:n,inclusive:A},{value:i,inclusive:r.inclusive})<0&&(n=i,A=r.inclusive);break}}return{value:n,inclusive:A}}function ux(t,e,r){let n=ps,A=!0;for(const s of bh(t,e)){let i=ps,a=!0;switch(s.op){case">=":case">":i=g4(s.value),a=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,a=!1;break;case"!=":case"not-in":i=ps}ox({value:n,inclusive:A},{value:i,inclusive:a})>0&&(n=i,A=a)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=r.position[s];ox({value:n,inclusive:A},{value:i,inclusive:r.inclusive})>0&&(n=i,A=r.inclusive);break}}return{value:n,inclusive:A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,r=null,n=[],A=[],s=null,i="F",a=null,o=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=A,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $b(t,e,r,n,A,s,i,a){return new HA(t,e,r,n,A,s,i,a)}function Ta(t){return new HA(t)}function dx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tw(t){return t.collectionGroup!==null}function Ko(t){const e=me(t);if(e.ce===null){e.ce=[];const r=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new _t(Pt.comparator);return i.filters.forEach(o=>{o.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Tc(s,n))}),r.has(Pt.keyField().canonicalString())||e.ce.push(new Tc(Pt.keyField(),n))}return e.ce}function zr(t){const e=me(t);return e.le||(e.le=qb(e,Ko(t))),e.le}function Wb(t){const e=me(t);return e.he||(e.he=qb(e,t.explicitOrderBy)),e.he}function qb(t,e){if(t.limitType==="F")return Nm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(A=>{const s=A.dir==="desc"?"asc":"desc";return new Tc(A.field,s)});const r=t.endAt?new Vs(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Vs(t.startAt.position,t.startAt.inclusive):null;return Nm(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Dm(t,e){const r=t.filters.concat([e]);return new HA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Th(t,e,r){return new HA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function qc(t,e){return Wc(zr(t),zr(e))&&t.limitType===e.limitType}function Jb(t){return`${Mi(zr(t))}|lt:${t.limitType}`}function Bo(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(A=>Kb(A)).join(", ")}]`),$c(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(A=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(A)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(A=>aa(A)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(A=>aa(A)).join(",")),`Target(${n})`}(zr(t))}; limitType=${t.limitType})`}function Jc(t,e){return e.isFoundDocument()&&function(n,A){const s=A.key.path;return n.collectionGroup!==null?A.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ve.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,A){for(const s of Ko(n))if(!s.field.isKeyField()&&A.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,A){for(const s of n.filters)if(!s.matches(A))return!1;return!0}(t,e)&&function(n,A){return!(n.startAt&&!function(i,a,o){const c=ax(i,a,o);return i.inclusive?c<=0:c<0}(n.startAt,Ko(n),A)||n.endAt&&!function(i,a,o){const c=ax(i,a,o);return i.inclusive?c>=0:c>0}(n.endAt,Ko(n),A))}(t,e)}function Xb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Yb(t){return(e,r)=>{let n=!1;for(const A of Ko(t)){const s=I4(A,e,r);if(s!==0)return s;n=n||A.field.isKeyField()}return 0}}function I4(t,e,r){const n=t.field.isKeyField()?ve.comparator(e.key,r.key):function(s,i,a){const o=i.data.field(s),c=a.data.field(s);return o!==null&&c!==null?Hs(o,c):Se()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[A,s]of n)if(this.equalsFn(A,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),A=this.inner[n];if(A===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<A.length;s++)if(this.equalsFn(A[s][0],e))return void(A[s]=[e,r]);A.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let A=0;A<n.length;A++)if(this.equalsFn(n[A][0],e))return n.length===1?delete this.inner[r]:n.splice(A,1),this.innerSize--,!0;return!1}forEach(e){ti(this.inner,(r,n)=>{for(const[A,s]of n)e(A,s)})}isEmpty(){return Nb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new Ut(ve.comparator);function cn(){return _4}const Zb=new Ut(ve.comparator);function Il(...t){let e=Zb;for(const r of t)e=e.insert(r.key,r);return e}function e1(t){let e=Zb;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function tA(){return zl()}function t1(){return zl()}function zl(){return new VA(t=>t.toString(),(t,e)=>t.isEqual(e))}const E4=new Ut(ve.comparator),b4=new _t(ve.comparator);function Ze(...t){let e=b4;for(const r of t)e=e.add(r);return e}const T4=new _t(Je);function Fw(){return T4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function r1(t){return{integerValue:""+t}}function n1(t,e){return Fb(e)?r1(e):Qw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function F4(t,e,r){return t instanceof ca?function(A,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return s&&_f(s)&&(s=Ef(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(r,e):t instanceof Oi?s1(t,e):t instanceof Hi?i1(t,e):function(A,s){const i=A1(A,s),a=hx(i)+hx(A.Pe);return Sm(i)&&Sm(A.Pe)?r1(a):Qw(A.serializer,a)}(t,e)}function Q4(t,e,r){return t instanceof Oi?s1(t,e):t instanceof Hi?i1(t,e):r}function A1(t,e){return t instanceof ua?function(n){return Sm(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class ca extends Tf{}class Oi extends Tf{constructor(e){super(),this.elements=e}}function s1(t,e){const r=o1(e);for(const n of t.elements)r.some(A=>aA(A,n))||r.push(n);return{arrayValue:{values:r}}}class Hi extends Tf{constructor(e){super(),this.elements=e}}function i1(t,e){let r=o1(e);for(const n of t.elements)r=r.filter(A=>!aA(A,n));return{arrayValue:{values:r}}}class ua extends Tf{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function hx(t){return Ht(t.integerValue||t.doubleValue)}function o1(t){return bc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,r){this.field=e,this.transform=r}}function U4(t,e){return t.field.isEqual(e.field)&&function(n,A){return n instanceof Oi&&A instanceof Oi||n instanceof Hi&&A instanceof Hi?sa(n.elements,A.elements,aA):n instanceof ua&&A instanceof ua?aA(n.Pe,A.Pe):n instanceof ca&&A instanceof ca}(t.transform,e.transform)}class S4{constructor(e,r){this.version=e,this.transformResults=r}}class Kt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ff{}function a1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qa(t.key,Kt.none()):new Fa(t.key,t.data,Kt.none());{const r=t.data,n=Sr.empty();let A=new _t(Pt.comparator);for(let s of e.fields)if(!A.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),A=A.add(s)}return new KA(t.key,n,new ln(A.toArray()),Kt.none())}}function k4(t,e,r){t instanceof Fa?function(A,s,i){const a=A.value.clone(),o=gx(A.fieldTransforms,s,i.transformResults);a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):t instanceof KA?function(A,s,i){if(!Ld(A.precondition,s))return void s.convertToUnknownDocument(i.version);const a=gx(A.fieldTransforms,s,i.transformResults),o=s.data;o.setAll(l1(A)),o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):function(A,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function $l(t,e,r,n){return t instanceof Fa?function(s,i,a,o){if(!Ld(s.precondition,i))return a;const c=s.value.clone(),d=px(s.fieldTransforms,o,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof KA?function(s,i,a,o){if(!Ld(s.precondition,i))return a;const c=px(s.fieldTransforms,o,i),d=i.data;return d.setAll(l1(s)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,i,a){return Ld(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,r)}function R4(t,e){let r=null;for(const n of t.fieldTransforms){const A=e.data.field(n.field),s=A1(n.transform,A||null);s!=null&&(r===null&&(r=Sr.empty()),r.set(n.field,s))}return r||null}function fx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,A){return n===void 0&&A===void 0||!(!n||!A)&&sa(n,A,(s,i)=>U4(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fa extends Ff{constructor(e,r,n,A=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class KA extends Ff{constructor(e,r,n,A,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=A,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function l1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function gx(t,e,r){const n=new Map;Le(t.length===r.length);for(let A=0;A<r.length;A++){const s=t[A],i=s.transform,a=e.data.field(s.field);n.set(s.field,Q4(i,a,r[A]))}return n}function px(t,e,r){const n=new Map;for(const A of t){const s=A.transform,i=r.data.field(A.field);n.set(A.field,F4(s,i,e))}return n}class Qa extends Ff{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uw extends Ff{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,r,n,A){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=A}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let A=0;A<this.mutations.length;A++){const s=this.mutations[A];s.key.isEqual(e.key)&&k4(s,e,n[A])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=$l(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=$l(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=t1();return this.mutations.forEach(A=>{const s=e.get(A.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=r.has(A.key)?null:a;const o=a1(i,a);o!==null&&n.set(A.key,o),i.isValidDocument()||i.convertToNoDocument(Me.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ze())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(r,n)=>fx(r,n))&&sa(this.baseMutations,e.baseMutations,(r,n)=>fx(r,n))}}class kw{constructor(e,r,n,A){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=A}static from(e,r,n){Le(e.mutations.length===n.length);let A=function(){return E4}();const s=e.mutations;for(let i=0;i<s.length;i++)A=A.insert(s[i].key,n[i].version);return new kw(e,r,n,A)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr,gt;function u1(t){switch(t){default:return Se();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function d1(t){if(t===void 0)return ir("GRPC error has no .code"),H.UNKNOWN;switch(t){case lr.OK:return H.OK;case lr.CANCELLED:return H.CANCELLED;case lr.UNKNOWN:return H.UNKNOWN;case lr.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case lr.INTERNAL:return H.INTERNAL;case lr.UNAVAILABLE:return H.UNAVAILABLE;case lr.UNAUTHENTICATED:return H.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case lr.NOT_FOUND:return H.NOT_FOUND;case lr.ALREADY_EXISTS:return H.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return H.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case lr.ABORTED:return H.ABORTED;case lr.OUT_OF_RANGE:return H.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return H.UNIMPLEMENTED;case lr.DATA_LOSS:return H.DATA_LOSS;default:return Se()}}(gt=lr||(lr={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new Fi([4294967295,4294967295],0);function mx(t){const e=h1().encode(t),r=new fb;return r.update(e),new Uint8Array(r.digest())}function wx(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),A=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fi([r,n],0),new Fi([A,s],0)]}class Nw{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new _l(`Invalid padding: ${r}`);if(n<0)throw new _l(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new _l(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Fi.fromNumber(this.Ie)}Ee(e,r,n){let A=e.add(r.multiply(Fi.fromNumber(n)));return A.compare(D4)===1&&(A=new Fi([A.getBits(0),A.getBits(1)],0)),A.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=mx(e),[n,A]=wx(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,A,s);if(!this.de(i))return!1}return!0}static create(e,r,n){const A=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Nw(s,A,r);return n.forEach(a=>i.insert(a)),i}insert(e){if(this.Ie===0)return;const r=mx(e),[n,A]=wx(r);for(let s=0;s<this.hashCount;s++){const i=this.Ee(n,A,s);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,r,n,A,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=A,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const A=new Map;return A.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Yc(Me.min(),A,new Ut(Je),cn(),Ze())}}class Zc{constructor(e,r,n,A,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=A,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Zc(n,r,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,r,n,A){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=A}}class f1{constructor(e,r){this.targetId=e,this.me=r}}class g1{constructor(e,r,n=Xt.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=A}}class Bx{constructor(){this.fe=0,this.ge=vx(),this.pe=Xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ze(),r=Ze(),n=Ze();return this.ge.forEach((A,s)=>{switch(s){case 0:e=e.add(A);break;case 2:r=r.add(A);break;case 1:n=n.add(A);break;default:Se()}}),new Zc(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=vx()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class P4{constructor(e){this.Le=e,this.Be=new Map,this.ke=cn(),this.qe=yx(),this.Qe=new Ut(Je)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Se()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,A)=>{this.ze(A)&&r(A)})}He(e){const r=e.targetId,n=e.me.count,A=this.Je(r);if(A){const s=A.target;if(Eh(s))if(n===0){const i=new ve(s.path);this.Ue(r,i,Dt.newNoDocument(i,Me.min()))}else Le(n===1);else{const i=this.Ye(r);if(i!==n){const a=this.Ze(e),o=a?this.Xe(a,e,i):1;if(o!==0){this.je(r);const c=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Fh==null||Fh.et(function(d,h,f,w,y){var B,E,x,m,I,F;const R={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},U=h.unchangedNames;return U&&(R.bloomFilter={applied:y===0,hashCount:(B=U==null?void 0:U.hashCount)!==null&&B!==void 0?B:0,bitmapLength:(m=(x=(E=U==null?void 0:U.bits)===null||E===void 0?void 0:E.bitmap)===null||x===void 0?void 0:x.length)!==null&&m!==void 0?m:0,padding:(F=(I=U==null?void 0:U.bits)===null||I===void 0?void 0:I.padding)!==null&&F!==void 0?F:0,mightContain:v=>{var C;return(C=w==null?void 0:w.mightContain(v))!==null&&C!==void 0&&C}}),R}(i,e.me,this.Le.tt(),a,o))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:A=0},hashCount:s=0}=r;let i,a;try{i=NA(n).toUint8Array()}catch(o){if(o instanceof Db)return Cn("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Nw(i,A,s)}catch(o){return Cn(o instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let A=0;return n.forEach(s=>{const i=this.Le.tt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,s,null),A++)}),A}rt(e){const r=new Map;this.Be.forEach((s,i)=>{const a=this.Je(i);if(a){if(s.current&&Eh(a.target)){const o=new ve(a.target.path);this.ke.get(o)!==null||this.it(i,o)||this.Ue(i,o,Dt.newNoDocument(o,e))}s.be&&(r.set(i,s.ve()),s.Ce())}});let n=Ze();this.qe.forEach((s,i)=>{let a=!0;i.forEachWhile(o=>{const c=this.Je(o);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const A=new Yc(e,r,this.Qe,this.ke,n);return this.ke=cn(),this.qe=yx(),this.Qe=new Ut(Je),A}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const A=this.Ge(e);this.it(e,r)?A.Fe(r,1):A.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Bx,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new _t(Je),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Z("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bx),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function yx(){return new Ut(ve.comparator)}function vx(){return new Ut(ve.comparator)}const L4={asc:"ASCENDING",desc:"DESCENDING"},j4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M4={and:"AND",or:"OR"};class O4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Pm(t,e){return t.useProto3Json||$c(e)?e:{value:e}}function da(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function H4(t,e){return da(t,e.toTimestamp())}function or(t){return Le(!!t),Me.fromTimestamp(function(r){const n=RA(r);return new Gt(n.seconds,n.nanos)}(t))}function Dw(t,e){return Lm(t,e).canonicalString()}function Lm(t,e){const r=function(A){return new ct(["projects",A.projectId,"databases",A.database])}(t).child("documents");return e===void 0?r:r.child(e)}function m1(t){const e=ct.fromString(t);return Le(b1(e)),e}function Fc(t,e){return Dw(t.databaseId,e.path)}function sA(t,e){const r=m1(e);if(r.get(1)!==t.databaseId.projectId)throw new Y(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Y(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ve(y1(r))}function w1(t,e){return Dw(t.databaseId,e)}function B1(t){const e=m1(t);return e.length===4?ct.emptyPath():y1(e)}function jm(t){return new ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function y1(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function xx(t,e,r){return{name:Fc(t,e),fields:r.value.mapValue.fields}}function v1(t,e,r){const n=sA(t,e.name),A=or(e.updateTime),s=e.createTime?or(e.createTime):Me.min(),i=new Sr({mapValue:{fields:e.fields}}),a=Dt.newFoundDocument(n,A,s,i);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function V4(t,e){return"found"in e?function(n,A){Le(!!A.found),A.found.name,A.found.updateTime;const s=sA(n,A.found.name),i=or(A.found.updateTime),a=A.found.createTime?or(A.found.createTime):Me.min(),o=new Sr({mapValue:{fields:A.found.fields}});return Dt.newFoundDocument(s,i,a,o)}(t,e):"missing"in e?function(n,A){Le(!!A.missing),Le(!!A.readTime);const s=sA(n,A.missing),i=or(A.readTime);return Dt.newNoDocument(s,i)}(t,e):Se()}function K4(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Le(d===void 0||typeof d=="string"),Xt.fromBase64String(d||"")):(Le(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const d=c.code===void 0?H.UNKNOWN:d1(c.code);return new Y(d,c.message||"")}(i);r=new g1(n,A,s,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const A=sA(t,n.document.name),s=or(n.document.updateTime),i=n.document.createTime?or(n.document.createTime):Me.min(),a=new Sr({mapValue:{fields:n.document.fields}}),o=Dt.newFoundDocument(A,s,i,a),c=n.targetIds||[],d=n.removedTargetIds||[];r=new jd(c,d,o.key,o)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const A=sA(t,n.document),s=n.readTime?or(n.readTime):Me.min(),i=Dt.newNoDocument(A,s),a=n.removedTargetIds||[];r=new jd([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const A=sA(t,n.document),s=n.removedTargetIds||[];r=new jd([],s,A,null)}else{if(!("filter"in e))return Se();{e.filter;const n=e.filter;n.targetId;const{count:A=0,unchangedNames:s}=n,i=new N4(A,s),a=n.targetId;r=new f1(a,i)}}return r}function Qc(t,e){let r;if(e instanceof Fa)r={update:xx(t,e.key,e.value)};else if(e instanceof Qa)r={delete:Fc(t,e.key)};else if(e instanceof KA)r={update:xx(t,e.key,e.data),updateMask:J4(e.fieldMask)};else{if(!(e instanceof Uw))return Se();r={verify:Fc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,i){const a=i.transform;if(a instanceof ca)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ua)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw Se()}(0,n))),e.precondition.isNone||(r.currentDocument=function(A,s){return s.updateTime!==void 0?{updateTime:H4(A,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Se()}(t,e.precondition)),r}function Mm(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?Kt.updateTime(or(s.updateTime)):s.exists!==void 0?Kt.exists(s.exists):Kt.none()}(e.currentDocument):Kt.none(),n=e.updateTransforms?e.updateTransforms.map(A=>function(i,a){let o=null;if("setToServerValue"in a)Le(a.setToServerValue==="REQUEST_TIME"),o=new ca;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];o=new Oi(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];o=new Hi(d)}else"increment"in a?o=new ua(i,a.increment):Se();const c=Pt.fromServerFormat(a.fieldPath);return new Xc(c,o)}(t,A)):[];if(e.update){e.update.name;const A=sA(t,e.update.name),s=new Sr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(o){const c=o.fieldPaths||[];return new ln(c.map(d=>Pt.fromServerFormat(d)))}(e.updateMask);return new KA(A,s,i,r,n)}return new Fa(A,s,r,n)}if(e.delete){const A=sA(t,e.delete);return new Qa(A,r)}if(e.verify){const A=sA(t,e.verify);return new Uw(A,r)}return Se()}function G4(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(r=>function(A,s){let i=A.updateTime?or(A.updateTime):or(s);return i.isEqual(Me.min())&&(i=or(s)),new S4(i,A.transformResults||[])}(r,e))):[]}function x1(t,e){return{documents:[w1(t,e.path)]}}function Qf(t,e){const r={structuredQuery:{}},n=e.path;let A;e.collectionGroup!==null?(A=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=w1(t,A);const s=function(c){if(c.length!==0)return E1(vt.create(c,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:is(f.field),direction:$4(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const a=Pm(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:A}}function C1(t,e,r,n){const{_t:A,parent:s}=Qf(t,e),i={},a=[];let o=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+o++;i[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:is(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:is(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:A.structuredQuery},parent:A.parent},ut:i,parent:s}}function I1(t){let e=B1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let A=null;if(n>0){Le(n===1);const d=r.from[0];d.allDescendants?A=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const f=_1(h);return f instanceof vt&&bw(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(y){return new Tc(yo(y.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,$c(f)?null:f}(r.limit));let o=null;r.startAt&&(o=function(h){const f=!!h.before,w=h.values||[];return new Vs(w,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,w=h.values||[];return new Vs(w,f)}(r.endAt)),$b(e,A,i,s,a,"F",o,c)}function z4(t,e){const r=function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function _1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=yo(r.unaryFilter.field);return ut.create(n,"==",{doubleValue:NaN});case"IS_NULL":const A=yo(r.unaryFilter.field);return ut.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yo(r.unaryFilter.field);return ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=yo(r.unaryFilter.field);return ut.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(t):t.fieldFilter!==void 0?function(r){return ut.create(yo(r.fieldFilter.field),function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return vt.create(r.compositeFilter.filters.map(n=>_1(n)),function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return Se()}}(r.compositeFilter.op))}(t):Se()}function $4(t){return L4[t]}function W4(t){return j4[t]}function q4(t){return M4[t]}function is(t){return{fieldPath:t.canonicalString()}}function yo(t){return Pt.fromServerFormat(t.fieldPath)}function E1(t){return t instanceof ut?function(r){if(r.op==="=="){if(sx(r.value))return{unaryFilter:{field:is(r.field),op:"IS_NAN"}};if(Ax(r.value))return{unaryFilter:{field:is(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(sx(r.value))return{unaryFilter:{field:is(r.field),op:"IS_NOT_NAN"}};if(Ax(r.value))return{unaryFilter:{field:is(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(r.field),op:W4(r.op),value:r.value}}}(t):t instanceof vt?function(r){const n=r.getFilters().map(A=>E1(A));return n.length===1?n[0]:{compositeFilter:{op:q4(r.op),filters:n}}}(t):Se()}function J4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function b1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,r,n,A,s=Me.min(),i=Me.min(),a=Xt.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=A,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new xA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new xA(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.ct=e}}function X4(t,e){let r;if(e.document)r=v1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ve.fromSegments(e.noDocument.path),A=Ki(e.noDocument.readTime);r=Dt.newNoDocument(n,A),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se();{const n=ve.fromSegments(e.unknownDocument.path),A=Ki(e.unknownDocument.version);r=Dt.newUnknownDocument(n,A)}}return e.readTime&&r.setReadTime(function(A){const s=new Gt(A[0],A[1]);return Me.fromTimestamp(s)}(e.readTime)),r}function Cx(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Qh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,i){return{name:Fc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:da(s,i.version.toTimestamp()),createTime:da(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Vi(e.version)};else{if(!e.isUnknownDocument())return Se();n.unknownDocument={path:r.path.toArray(),version:Vi(e.version)}}return n}function Qh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Vi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ki(t){const e=new Gt(t.seconds,t.nanoseconds);return Me.fromTimestamp(e)}function Bi(t,e){const r=(e.baseMutations||[]).map(s=>Mm(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];i.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>Mm(t.ct,s)),A=Gt.fromMillis(e.localWriteTimeMs);return new Sw(e.batchId,A,r,n)}function El(t){const e=Ki(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Ki(t.lastLimboFreeSnapshotVersion):Me.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){return Le(s.documents.length===1),zr(Ta(B1(s.documents[0])))}(t.query):function(s){return zr(I1(s))}(t.query),new xA(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Xt.fromBase64String(t.resumeToken))}function F1(t,e){const r=Vi(e.snapshotVersion),n=Vi(e.lastLimboFreeSnapshotVersion);let A;A=Eh(e.target)?x1(t.ct,e.target):Qf(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mi(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:A}}function Pw(t){const e=I1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Th(e,e.limit,"L"):e}function qg(t,e){return new Rw(e.largestBatchId,Mm(t.ct,e.overlayMutation))}function Ix(t,e){const r=e.path.lastSegment();return[t,Gr(e.path.popLast()),r]}function _x(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Vi(n.readTime),documentKey:Gr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{getBundleMetadata(e,r){return Ex(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:Ki(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return Ex(e).put(function(A){return{bundleId:A.id,createTime:Vi(or(A.createTime)),version:A.version}}(r))}getNamedQuery(e,r){return bx(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:Pw(s.bundledQuery),readTime:Ki(s.readTime)}}(n)})}saveNamedQuery(e,r){return bx(e).put(function(A){return{name:A.name,readTime:Vi(or(A.readTime)),bundledQuery:A.bundledQuery}}(r))}}function Ex(t){return pr(t,"bundles")}function bx(t){return pr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Uf(e,n)}getOverlay(e,r){return ol(e).get(Ix(this.userId,r)).next(n=>n?qg(this.serializer,n):null)}getOverlays(e,r){const n=tA();return j.forEach(r,A=>this.getOverlay(e,A).next(s=>{s!==null&&n.set(A,s)})).next(()=>n)}saveOverlays(e,r,n){const A=[];return n.forEach((s,i)=>{const a=new Rw(r,i);A.push(this.ht(e,a))}),j.waitFor(A)}removeOverlaysForBatchId(e,r,n){const A=new Set;r.forEach(i=>A.add(Gr(i.getCollectionPath())));const s=[];return A.forEach(i=>{const a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);s.push(ol(e).j("collectionPathOverlayIndex",a))}),j.waitFor(s)}getOverlaysForCollection(e,r,n){const A=tA(),s=Gr(r),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ol(e).U("collectionPathOverlayIndex",i).next(a=>{for(const o of a){const c=qg(this.serializer,o);A.set(c.getKey(),c)}return A})}getOverlaysForCollectionGroup(e,r,n,A){const s=tA();let i;const a=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ol(e).J({index:"collectionGroupOverlayIndex",range:a},(o,c,d)=>{const h=qg(this.serializer,c);s.size()<A||h.largestBatchId===i?(s.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>s)}ht(e,r){return ol(e).put(function(A,s,i){const[a,o,c]=Ix(s,i.mutation.key);return{userId:s,collectionPath:o,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Qc(A.ct,i.mutation)}}(this.serializer,this.userId,r))}}function ol(t){return pr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{Pt(e){return pr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Xt.fromUint8Array(n):Xt.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Ht(e.integerValue));else if("doubleValue"in e){const n=Ht(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Ic(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=RA(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(NA(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?Pb(e)?this.dt(r,Number.MAX_SAFE_INTEGER):bf(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Se()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const A of Object.keys(n))this.Vt(A,r),this.Tt(n[A],r)}wt(e,r){var n,A;const s=e.fields||{};this.dt(r,53);const i="value",a=((A=(n=s[i].arrayValue)===null||n===void 0?void 0:n.values)===null||A===void 0?void 0:A.length)||0;this.dt(r,15),r.At(Ht(a)),this.Vt(i,r),this.Tt(s[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const A of n)this.Tt(A,r)}yt(e,r){this.dt(r,37),ve.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}yi.vt=new yi;function eD(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Tx(t){const e=64-function(n){let A=0;for(let s=0;s<8;++s){const i=eD(255&n[s]);if(A+=i,i!==8)break}return A}(t);return Math.ceil(e/8)}class tD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const A=r.codePointAt(0);this.Ft(240|A>>>18),this.Ft(128|63&A>>>12),this.Ft(128|63&A>>>6),this.Ft(128|63&A)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const A=r.codePointAt(0);this.Ot(240|A>>>18),this.Ot(128|63&A>>>12),this.Ot(128|63&A>>>6),this.Ot(128|63&A)}}this.Nt()}kt(e){const r=this.qt(e),n=Tx(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let A=r.length-n;A<r.length;++A)this.buffer[this.position++]=255&r[A]}Kt(e){const r=this.qt(e),n=Tx(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let A=r.length-n;A<r.length;++A)this.buffer[this.position++]=~(255&r[A])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let A=1;A<r.length;++A)r[A]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const A=new Uint8Array(n);A.set(this.buffer),this.buffer=A}}class rD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class nD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class al{constructor(){this.jt=new tD,this.Ht=new rD(this.jt),this.Jt=new nD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,r,n,A){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=A}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new vi(this.indexId,this.documentKey,this.arrayValue,n)}}function JA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=Fx(t.arrayValue,e.arrayValue),r!==0?r:(r=Fx(t.directionalValue,e.directionalValue),r!==0?r:ve.comparator(t.documentKey,e.documentKey)))}function Fx(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.Xt=new _t((r,n)=>Pt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Le(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Fm(e);if(r!==void 0&&!this.sn(r))return!1;const n=mi(e);let A=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)A=A.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!A.has(a.field.canonicalString())){const o=n[s];if(!this.on(a,o)||!this._n(this.en[i++],o))return!1}++s}for(;s<n.length;++s){const a=n[s];if(i>=this.en.length||!this._n(this.en[i++],a))return!1}return!0}an(){if(this.nn)return null;let e=new _t(Pt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Qi(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Qi(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Qi(n.field,n.dir==="asc"?0:1)));return new ia(ia.UNKNOWN_ID,this.collectionId,r,oa.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t){var e,r;if(Le(t instanceof ut||t instanceof vt),t instanceof ut){if(t instanceof zb){const A=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(s=>ut.create(t.field,"==",s)))||[];return vt.create(A,"or")}return t}const n=t.filters.map(A=>Q1(A));return vt.create(n,t.op)}function AD(t){if(t.getFilters().length===0)return[];const e=Vm(Q1(t));return Le(U1(e)),Om(e)||Hm(e)?[e]:e.getFilters()}function Om(t){return t instanceof ut}function Hm(t){return t instanceof vt&&bw(t)}function U1(t){return Om(t)||Hm(t)||function(r){if(r instanceof vt&&km(r)){for(const n of r.getFilters())if(!Om(n)&&!Hm(n))return!1;return!0}return!1}(t)}function Vm(t){if(Le(t instanceof ut||t instanceof vt),t instanceof ut)return t;if(t.filters.length===1)return Vm(t.filters[0]);const e=t.filters.map(n=>Vm(n));let r=vt.create(e,t.op);return r=Uh(r),U1(r)?r:(Le(r instanceof vt),Le(la(r)),Le(r.filters.length>1),r.filters.reduce((n,A)=>Lw(n,A)))}function Lw(t,e){let r;return Le(t instanceof ut||t instanceof vt),Le(e instanceof ut||e instanceof vt),r=t instanceof ut?e instanceof ut?function(A,s){return vt.create([A,s],"and")}(t,e):Ux(t,e):e instanceof ut?Ux(e,t):function(A,s){if(Le(A.filters.length>0&&s.filters.length>0),la(A)&&la(s))return Vb(A,s.getFilters());const i=km(A)?A:s,a=km(A)?s:A,o=i.filters.map(c=>Lw(c,a));return vt.create(o,"or")}(t,e),Uh(r)}function Ux(t,e){if(la(e))return Vb(e,t.getFilters());{const r=e.filters.map(n=>Lw(t,n));return vt.create(r,"or")}}function Uh(t){if(Le(t instanceof ut||t instanceof vt),t instanceof ut)return t;const e=t.getFilters();if(e.length===1)return Uh(e[0]);if(Ob(t))return t;const r=e.map(A=>Uh(A)),n=[];return r.forEach(A=>{A instanceof ut?n.push(A):A instanceof vt&&(A.op===t.op?n.push(...A.filters):n.push(A))}),n.length===1?n[0]:vt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.un=new jw}addToCollectionParentIndex(e,r){return this.un.add(r),j.resolve()}getCollectionParents(e,r){return j.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return j.resolve()}deleteFieldIndex(e,r){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,r){return j.resolve()}getDocumentsMatchingTarget(e,r){return j.resolve(null)}getIndexType(e,r){return j.resolve(0)}getFieldIndexes(e,r){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,r){return j.resolve(In.min())}getMinOffsetFromCollectionGroup(e,r){return j.resolve(In.min())}updateCollectionGroup(e,r,n){return j.resolve()}updateIndexEntries(e,r){return j.resolve()}}class jw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),A=this.index[r]||new _t(ct.comparator),s=!A.has(n);return this.index[r]=A.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),A=this.index[r];return A&&A.has(n)}getEntries(e){return(this.index[e]||new _t(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Uint8Array(0);class iD{constructor(e,r){this.databaseId=r,this.cn=new jw,this.ln=new VA(n=>Mi(n),(n,A)=>Wc(n,A)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),A=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const s={collectionId:n,parent:Gr(A)};return Sx(e).put(s)}return j.resolve()}getCollectionParents(e,r){const n=[],A=IDBKeyRange.bound([r,""],[Cb(r),""],!1,!0);return Sx(e).U(A).next(s=>{for(const i of s){if(i.collectionId!==r)break;n.push(eA(i.parent))}return n})}addFieldIndex(e,r){const n=ll(e),A=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(o=>[o.fieldPath.canonicalString(),o.kind])}}(r);delete A.indexId;const s=n.add(A);if(r.indexState){const i=lo(e);return s.next(a=>{i.put(_x(a,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=ll(e),A=lo(e),s=ao(e);return n.delete(r.indexId).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=ll(e),n=ao(e),A=lo(e);return r.j().next(()=>n.j()).next(()=>A.j())}createTargetIndexes(e,r){return j.forEach(this.hn(r),n=>this.getIndexType(e,n).next(A=>{if(A===0||A===1){const s=new Qx(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=ao(e);let A=!0;const s=new Map;return j.forEach(this.hn(r),i=>this.Pn(e,i).next(a=>{A&&(A=!!a),s.set(i,a)})).next(()=>{if(A){let i=Ze();const a=[];return j.forEach(s,(o,c)=>{Z("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(o)} to execute ${Mi(r)}`);const d=function(I,F){const R=Fm(F);if(R===void 0)return null;for(const U of bh(I,R.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(c,o),h=function(I,F){const R=new Map;for(const U of mi(F))for(const v of bh(I,U.fieldPath))switch(v.op){case"==":case"in":R.set(U.fieldPath.canonicalString(),v.value);break;case"not-in":case"!=":return R.set(U.fieldPath.canonicalString(),v.value),Array.from(R.values())}return null}(c,o),f=function(I,F){const R=[];let U=!0;for(const v of mi(F)){const C=v.kind===0?cx(I,v.fieldPath,I.startAt):ux(I,v.fieldPath,I.startAt);R.push(C.value),U&&(U=C.inclusive)}return new Vs(R,U)}(c,o),w=function(I,F){const R=[];let U=!0;for(const v of mi(F)){const C=v.kind===0?ux(I,v.fieldPath,I.endAt):cx(I,v.fieldPath,I.endAt);R.push(C.value),U&&(U=C.inclusive)}return new Vs(R,U)}(c,o),y=this.In(o,c,f),B=this.In(o,c,w),E=this.Tn(o,c,h),x=this.En(o.indexId,d,y,f.inclusive,B,w.inclusive,E);return j.forEach(x,m=>n.G(m,r.limit).next(I=>{I.forEach(F=>{const R=ve.fromSegments(F.documentKey);i.has(R)||(i=i.add(R),a.push(R))})}))}).next(()=>a)}return j.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=AD(vt.create(e.filters,"and")).map(n=>Nm(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,A,s,i,a){const o=(r!=null?r.length:1)*Math.max(n.length,s.length),c=o/(r!=null?r.length:1),d=[];for(let h=0;h<o;++h){const f=r?this.dn(r[h/c]):Ku,w=this.An(e,f,n[h%c],A),y=this.Rn(e,f,s[h%c],i),B=a.map(E=>this.An(e,f,E,!0));d.push(...this.createRange(w,y,B))}return d}An(e,r,n,A){const s=new vi(e,ve.empty(),r,n);return A?s:s.Zt()}Rn(e,r,n,A){const s=new vi(e,ve.empty(),r,n);return A?s.Zt():s}Pn(e,r){const n=new Qx(r),A=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,A).next(s=>{let i=null;for(const a of s)n.rn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a);return i})}getIndexType(e,r){let n=2;const A=this.hn(r);return j.forEach(A,s=>this.Pn(e,s).next(i=>{i?n!==0&&i.fields.length<function(o){let c=new _t(Pt.comparator),d=!1;for(const h of o.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of o.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&A.length>1&&n===2?1:n)}Vn(e,r){const n=new al;for(const A of mi(e)){const s=r.data.field(A.fieldPath);if(s==null)return null;const i=n.Yt(A.kind);yi.vt.It(s,i)}return n.zt()}dn(e){const r=new al;return yi.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new al;return yi.vt.It(ji(this.databaseId,r),n.Yt(function(s){const i=mi(s);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let A=[];A.push(new al);let s=0;for(const i of mi(e)){const a=n[s++];for(const o of A)if(this.fn(r,i.fieldPath)&&bc(a))A=this.gn(A,i,a);else{const c=o.Yt(i.kind);yi.vt.It(a,c)}}return this.pn(A)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const A=[...e],s=[];for(const i of n.arrayValue.values||[])for(const a of A){const o=new al;o.seed(a.zt()),yi.vt.It(i,o.Yt(r.kind)),s.push(o)}return s}fn(e,r){return!!e.filters.find(n=>n instanceof ut&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=ll(e),A=lo(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(s=>{const i=[];return j.forEach(s,a=>A.get([a.indexId,this.uid]).next(o=>{i.push(function(d,h){const f=h?new oa(h.sequenceNumber,new In(Ki(h.readTime),new ve(eA(h.documentKey)),h.largestBatchId)):oa.empty(),w=d.fields.map(([y,B])=>new Qi(Pt.fromServerFormat(y),B));return new ia(d.indexId,d.collectionGroup,w,f)}(a,o))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,A)=>{const s=n.indexState.sequenceNumber-A.indexState.sequenceNumber;return s!==0?s:Je(n.collectionGroup,A.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const A=ll(e),s=lo(e);return this.yn(e).next(i=>A.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(a=>j.forEach(a,o=>s.put(_x(o.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return j.forEach(r,(A,s)=>{const i=n.get(A.collectionGroup);return(i?j.resolve(i):this.getFieldIndexes(e,A.collectionGroup)).next(a=>(n.set(A.collectionGroup,a),j.forEach(a,o=>this.wn(e,A,o).next(c=>{const d=this.Sn(s,o);return c.isEqual(d)?j.resolve():this.bn(e,s,o,c,d)}))))})}Dn(e,r,n,A){return ao(e).put({indexId:A.indexId,uid:this.uid,arrayValue:A.arrayValue,directionalValue:A.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,A){return ao(e).delete([A.indexId,this.uid,A.arrayValue,A.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const A=ao(e);let s=new _t(JA);return A.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,a)=>{s=s.add(new vi(n.indexId,r,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,r){let n=new _t(JA);const A=this.Vn(r,e);if(A==null)return n;const s=Fm(r);if(s!=null){const i=e.data.field(s.fieldPath);if(bc(i))for(const a of i.arrayValue.values||[])n=n.add(new vi(r.indexId,e.key,this.dn(a),A))}else n=n.add(new vi(r.indexId,e.key,Ku,A));return n}bn(e,r,n,A,s){Z("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(o,c,d,h,f){const w=o.getIterator(),y=c.getIterator();let B=oo(w),E=oo(y);for(;B||E;){let x=!1,m=!1;if(B&&E){const I=d(B,E);I<0?m=!0:I>0&&(x=!0)}else B!=null?m=!0:x=!0;x?(h(E),E=oo(y)):m?(f(B),B=oo(w)):(B=oo(w),E=oo(y))}}(A,s,JA,a=>{i.push(this.Dn(e,r,n,a))},a=>{i.push(this.vn(e,r,n,a))}),j.waitFor(i)}yn(e){let r=1;return lo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,A,s)=>{s.done(),r=A.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,a)=>JA(i,a)).filter((i,a,o)=>!a||JA(i,o[a-1])!==0);const A=[];A.push(e);for(const i of n){const a=JA(i,e),o=JA(i,r);if(a===0)A[0]=e.Zt();else if(a>0&&o<0)A.push(i),A.push(i.Zt());else if(o>0)break}A.push(r);const s=[];for(let i=0;i<A.length;i+=2){if(this.Cn(A[i],A[i+1]))return[];const a=[A[i].indexId,this.uid,A[i].arrayValue,A[i].directionalValue,Ku,[]],o=[A[i+1].indexId,this.uid,A[i+1].arrayValue,A[i+1].directionalValue,Ku,[]];s.push(IDBKeyRange.bound(a,o))}return s}Cn(e,r){return JA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(kx)}getMinOffset(e,r){return j.mapArray(this.hn(r),n=>this.Pn(e,n).next(A=>A||Se())).next(kx)}}function Sx(t){return pr(t,"collectionParents")}function ao(t){return pr(t,"indexEntries")}function ll(t){return pr(t,"indexConfiguration")}function lo(t){return pr(t,"indexState")}function kx(t){Le(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const A=t[n].indexState.offset;Iw(A,e)<0&&(e=A),r<A.largestBatchId&&(r=A.largestBatchId)}return new In(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Hr(e,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e,r){const n=t.store("mutations"),A=t.store("documentMutations"),s=[],i=IDBKeyRange.only(r.batchId);let a=0;const o=n.J({range:i},(d,h,f)=>(a++,f.delete()));s.push(o.next(()=>{Le(a===1)}));const c=[];for(const d of r.mutations){const h=Qb(e,d.key.path,r.batchId);s.push(A.delete(h)),c.push(d.key)}return j.waitFor(s).next(()=>c)}function Sh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Se();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(41943040,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);class Sf{constructor(e,r,n,A){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=A,this.Fn={}}static lt(e,r,n,A){Le(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Sf(s,r,n,A)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return XA(e).J({index:"userMutationsIndex",range:n},(A,s,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,A){const s=vo(e),i=XA(e);return i.add({}).next(a=>{Le(typeof a=="number");const o=new Sw(a,r,n,A),c=function(w,y,B){const E=B.baseMutations.map(m=>Qc(w.ct,m)),x=B.mutations.map(m=>Qc(w.ct,m));return{userId:y,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:E,mutations:x}}(this.serializer,this.userId,o),d=[];let h=new _t((f,w)=>Je(f.canonicalString(),w.canonicalString()));for(const f of A){const w=Qb(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(s.put(w,$N))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[a]=o.keys()}),j.waitFor(d).next(()=>o)})}lookupMutationBatch(e,r){return XA(e).get(r).next(n=>n?(Le(n.userId===this.userId),Bi(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?j.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const A=n.keys();return this.Fn[r]=A,A}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,A=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return XA(e).J({index:"userMutationsIndex",range:A},(i,a,o)=>{a.userId===this.userId&&(Le(a.batchId>=n),s=Bi(this.serializer,a)),o.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return XA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(A,s,i)=>{n=s.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return XA(e).U("userMutationsIndex",r).next(n=>n.map(A=>Bi(this.serializer,A)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Rd(this.userId,r.path),A=IDBKeyRange.lowerBound(n),s=[];return vo(e).J({range:A},(i,a,o)=>{const[c,d,h]=i,f=eA(d);if(c===this.userId&&r.path.isEqual(f))return XA(e).get(h).next(w=>{if(!w)throw Se();Le(w.userId===this.userId),s.push(Bi(this.serializer,w))});o.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new _t(Je);const A=[];return r.forEach(s=>{const i=Rd(this.userId,s.path),a=IDBKeyRange.lowerBound(i),o=vo(e).J({range:a},(c,d,h)=>{const[f,w,y]=c,B=eA(w);f===this.userId&&s.path.isEqual(B)?n=n.add(y):h.done()});A.push(o)}),j.waitFor(A).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,A=n.length+1,s=Rd(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new _t(Je);return vo(e).J({range:i},(o,c,d)=>{const[h,f,w]=o,y=eA(f);h===this.userId&&n.isPrefixOf(y)?y.length===A&&(a=a.add(w)):d.done()}).next(()=>this.xn(e,a))}xn(e,r){const n=[],A=[];return r.forEach(s=>{A.push(XA(e).get(s).next(i=>{if(i===null)throw Se();Le(i.userId===this.userId),n.push(Bi(this.serializer,i))}))}),j.waitFor(A).next(()=>n)}removeMutationBatch(e,r){return S1(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),j.forEach(n,A=>this.referenceDelegate.markPotentiallyOrphaned(e,A))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return j.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),A=[];return vo(e).J({range:n},(s,i,a)=>{if(s[0]===this.userId){const o=eA(s[1]);A.push(o)}else a.done()}).next(()=>{Le(A.length===0)})})}containsKey(e,r){return k1(e,this.userId,r)}Nn(e){return R1(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function k1(t,e,r){const n=Rd(e,r.path),A=n[1],s=IDBKeyRange.lowerBound(n);let i=!1;return vo(t).J({range:s,H:!0},(a,o,c)=>{const[d,h,f]=a;d===e&&h===A&&(i=!0),c.done()}).next(()=>i)}function XA(t){return pr(t,"mutations")}function vo(t){return pr(t,"documentMutations")}function R1(t){return pr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gi(0)}static kn(){return new Gi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new Gi(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Me.fromTimestamp(new Gt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(A=>(A.highestListenSequenceNumber=r,n&&(A.lastRemoteSnapshotVersion=n.toTimestamp()),r>A.highestListenSequenceNumber&&(A.highestListenSequenceNumber=r),this.Qn(e,A)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>co(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>(Le(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let A=0;const s=[];return co(e).J((i,a)=>{const o=El(a);o.sequenceNumber<=r&&n.get(o.targetId)===null&&(A++,s.push(this.removeTargetData(e,o)))}).next(()=>j.waitFor(s)).next(()=>A)}forEachTarget(e,r){return co(e).J((n,A)=>{const s=El(A);r(s)})}qn(e){return Nx(e).get("targetGlobalKey").next(r=>(Le(r!==null),r))}Qn(e,r){return Nx(e).put("targetGlobalKey",r)}Kn(e,r){return co(e).put(F1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Mi(r),A=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return co(e).J({range:A,index:"queryTargetsIndex"},(i,a,o)=>{const c=El(a);Wc(r,c.target)&&(s=c,o.done())}).next(()=>s)}addMatchingKeys(e,r,n){const A=[],s=os(e);return r.forEach(i=>{const a=Gr(i.path);A.push(s.put({targetId:n,path:a})),A.push(this.referenceDelegate.addReference(e,n,i))}),j.waitFor(A)}removeMatchingKeys(e,r,n){const A=os(e);return j.forEach(r,s=>{const i=Gr(s.path);return j.waitFor([A.delete([n,i]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=os(e),A=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(A)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),A=os(e);let s=Ze();return A.J({range:n,H:!0},(i,a,o)=>{const c=eA(i[1]),d=new ve(c);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=Gr(r.path),A=IDBKeyRange.bound([n],[Cb(n)],!1,!0);let s=0;return os(e).J({index:"documentTargetsIndex",H:!0,range:A},([i,a],o,c)=>{i!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,r){return co(e).get(r).next(n=>n?El(n):null)}}function co(t){return pr(t,"targets")}function Nx(t){return pr(t,"targetGlobal")}function os(t){return pr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx([t,e],[r,n]){const A=Je(t,r);return A===0?Je(e,n):A}class aD{constructor(e){this.Un=e,this.buffer=new _t(Dx),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Dx(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class N1{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ei(r)?Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Zs(r)}await this.Hn(3e5)})}}class lD{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return j.resolve(an.oe);const n=new aD(r);return this.Jn.forEachTarget(e,A=>n.zn(A.sequenceNumber)).next(()=>this.Jn.Zn(e,A=>n.zn(A))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Rx)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rx):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,A,s,i,a,o,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),A=this.params.maximumSequenceNumbersToCollect):A=h,i=Date.now(),this.nthSequenceNumber(e,A))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),wo()<=lt.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${A} in `+(a-i)+`ms
	Removed ${s} targets in `+(o-a)+`ms
	Removed ${h} documents in `+(c-o)+`ms
Total Duration: ${c-d}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:s,documentsRemoved:h})))}}function D1(t,e){return new lD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,r){this.db=e,this.garbageCollector=D1(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(A=>n+A))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,A)=>r(A))}addReference(e,r,n){return Gu(e,n)}removeReference(e,r,n){return Gu(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Gu(e,r)}nr(e,r){return function(A,s){let i=!1;return R1(A).Y(a=>k1(A,a,s).next(o=>(o&&(i=!0),j.resolve(!o)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),A=[];let s=0;return this.tr(e,(i,a)=>{if(a<=r){const o=this.nr(e,i).next(c=>{if(!c)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Me.min()),os(e).delete(function(h){return[0,Gr(h.path)]}(i))))});A.push(o)}}).next(()=>j.waitFor(A)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Gu(e,r)}tr(e,r){const n=os(e);let A,s=an.oe;return n.J({index:"documentTargetsIndex"},([i,a],{path:o,sequenceNumber:c})=>{i===0?(s!==an.oe&&r(new ve(eA(A)),s),s=c,A=o):s=an.oe}).next(()=>{s!==an.oe&&r(new ve(eA(A)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gu(t,e){return os(t).put(function(n,A){return{targetId:0,path:Gr(n.path),sequenceNumber:A}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.changes=new VA(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?j.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return ui(e).put(n)}removeEntry(e,r,n){return ui(e).delete(function(s,i){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Qh(i),a[a.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Dt.newInvalidDocument(r);return ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cl(r))},(A,s)=>{n=this.ir(r,s)}).next(()=>n)}sr(e,r){let n={size:0,document:Dt.newInvalidDocument(r)};return ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cl(r))},(A,s)=>{n={document:this.ir(r,s),size:Sh(s)}}).next(()=>n)}getEntries(e,r){let n=cn();return this._r(e,r,(A,s)=>{const i=this.ir(A,s);n=n.insert(A,i)}).next(()=>n)}ar(e,r){let n=cn(),A=new Ut(ve.comparator);return this._r(e,r,(s,i)=>{const a=this.ir(s,i);n=n.insert(s,a),A=A.insert(s,Sh(i))}).next(()=>({documents:n,ur:A}))}_r(e,r,n){if(r.isEmpty())return j.resolve();let A=new _t(jx);r.forEach(o=>A=A.add(o));const s=IDBKeyRange.bound(cl(A.first()),cl(A.last())),i=A.getIterator();let a=i.getNext();return ui(e).J({index:"documentKeyIndex",range:s},(o,c,d)=>{const h=ve.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&jx(a,h)<0;)n(a,null),a=i.getNext();a&&a.isEqual(h)&&(n(a,c),a=i.hasNext()?i.getNext():null),a?d.$(cl(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,A,s){const i=r.path,a=[i.popLast().toArray(),i.lastSegment(),Qh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ui(e).U(IDBKeyRange.bound(a,o,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=cn();for(const h of c){const f=this.ir(ve.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Jc(r,f)||A.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,A){let s=cn();const i=Lx(r,n),a=Lx(r,In.max());return ui(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,a,!0)},(o,c,d)=>{const h=this.ir(ve.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===A&&d.done()}).next(()=>s)}newChangeBuffer(e){return new dD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Px(e).get("remoteDocumentGlobalKey").next(r=>(Le(!!r),r))}rr(e,r){return Px(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=X4(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Me.min())))return n}return Dt.newInvalidDocument(e)}}function L1(t){return new uD(t)}class dD extends P1{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new VA(n=>n.toString(),(n,A)=>n.isEqual(A))}applyChanges(e){const r=[];let n=0,A=new _t((s,i)=>Je(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.lr.get(s);if(r.push(this.cr.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=Cx(this.cr.serializer,i);A=A.add(s.path.popLast());const c=Sh(o);n+=c-a.size,r.push(this.cr.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const o=Cx(this.cr.serializer,i.convertToNoDocument(Me.min()));r.push(this.cr.addEntry(e,s,o))}}),A.forEach(s=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.cr.updateMetadata(e,n)),j.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:A})=>(A.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:n.get(s).readTime})}),n))}}function Px(t){return pr(t,"remoteDocumentGlobal")}function ui(t){return pr(t,"remoteDocumentsV14")}function cl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Lx(t,e){const r=e.documentKey.path.toArray();return[t,Qh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function jx(t,e){const r=t.path.toArray(),n=e.path.toArray();let A=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(A=Je(r[s],n[s]),A)return A;return A=Je(r.length,n.length),A||(A=Je(r[r.length-2],n[n.length-2]),A||Je(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,r,n,A){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=A}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(A=>(n=A,this.remoteDocumentCache.getEntry(e,r))).next(A=>(n!==null&&$l(n.mutation,A,ln.empty(),Gt.now()),A))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Ze()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Ze()){const A=tA();return this.populateOverlays(e,A,r).next(()=>this.computeViews(e,r,A,n).next(s=>{let i=Il();return s.forEach((a,o)=>{i=i.insert(a,o.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=tA();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Ze()))}populateOverlays(e,r,n){const A=[];return n.forEach(s=>{r.has(s)||A.push(s)}),this.documentOverlayCache.getOverlays(e,A).next(s=>{s.forEach((i,a)=>{r.set(i,a)})})}computeViews(e,r,n,A){let s=cn();const i=zl(),a=function(){return zl()}();return r.forEach((o,c)=>{const d=n.get(c.key);A.has(c.key)&&(d===void 0||d.mutation instanceof KA)?s=s.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),$l(d.mutation,c,d.mutation.getFieldMask(),Gt.now())):i.set(c.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(o=>(o.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return a.set(c,new hD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,r){const n=zl();let A=new Ut((i,a)=>i-a),s=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const a of i)a.keys().forEach(o=>{const c=r.get(o);if(c===null)return;let d=n.get(o)||ln.empty();d=a.applyToLocalView(c,d),n.set(o,d);const h=(A.get(a.batchId)||Ze()).add(o);A=A.insert(a.batchId,h)})}).next(()=>{const i=[],a=A.getReverseIterator();for(;a.hasNext();){const o=a.getNext(),c=o.key,d=o.value,h=t1();d.forEach(f=>{if(!s.has(f)){const w=a1(r.get(f),n.get(f));w!==null&&h.set(f,w),s=s.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return j.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,A){return function(i){return ve.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Tw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,A):this.getDocumentsMatchingCollectionQuery(e,r,n,A)}getNextDocuments(e,r,n,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,A).next(s=>{const i=A-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,A-s.size):j.resolve(tA());let a=-1,o=s;return i.next(c=>j.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?j.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{o=o.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,o,c,Ze())).next(d=>({batchId:a,changes:e1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ve(r)).next(n=>{let A=Il();return n.isFoundDocument()&&(A=A.insert(n.key,n)),A})}getDocumentsMatchingCollectionGroupQuery(e,r,n,A){const s=r.collectionGroup;let i=Il();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,o=>{const c=function(h,f){return new HA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,n,A).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,A){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,A))).next(i=>{s.forEach((o,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Dt.newInvalidDocument(d)))});let a=Il();return i.forEach((o,c)=>{const d=s.get(o);d!==void 0&&$l(d.mutation,c,ln.empty(),Gt.now()),Jc(r,c)&&(a=a.insert(o,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return j.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(A){return{id:A.id,version:A.version,createTime:or(A.createTime)}}(r)),j.resolve()}getNamedQuery(e,r){return j.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(A){return{name:A.name,query:Pw(A.bundledQuery),readTime:or(A.readTime)}}(r)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.overlays=new Ut(ve.comparator),this.Ir=new Map}getOverlay(e,r){return j.resolve(this.overlays.get(r))}getOverlays(e,r){const n=tA();return j.forEach(r,A=>this.getOverlay(e,A).next(s=>{s!==null&&n.set(A,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((A,s)=>{this.ht(e,r,s)}),j.resolve()}removeOverlaysForBatchId(e,r,n){const A=this.Ir.get(n);return A!==void 0&&(A.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),j.resolve()}getOverlaysForCollection(e,r,n){const A=tA(),s=r.length+1,i=new ve(r.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const o=a.getNext().value,c=o.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===s&&o.largestBatchId>n&&A.set(o.getKey(),o)}return j.resolve(A)}getOverlaysForCollectionGroup(e,r,n,A){let s=new Ut((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=s.get(c.largestBatchId);d===null&&(d=tA(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=tA(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=A)););return j.resolve(a)}ht(e,r,n){const A=this.overlays.get(n.key);if(A!==null){const i=this.Ir.get(A.largestBatchId).delete(n.key);this.Ir.set(A.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Rw(r,n));let s=this.Ir.get(r);s===void 0&&(s=Ze(),this.Ir.set(r,s)),this.Ir.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.Tr=new _t(Br.Er),this.dr=new _t(Br.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Br(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Br(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new ve(new ct([])),n=new Br(r,e),A=new Br(r,e+1),s=[];return this.dr.forEachInRange([n,A],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ve(new ct([])),n=new Br(r,e),A=new Br(r,e+1);let s=Ze();return this.dr.forEachInRange([n,A],i=>{s=s.add(i.key)}),s}containsKey(e){const r=new Br(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Br{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ve.comparator(e.key,r.key)||Je(e.wr,r.wr)}static Ar(e,r){return Je(e.wr,r.wr)||ve.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new _t(Br.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,A){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Sw(s,r,n,A);this.mutationQueue.push(i);for(const a of A)this.br=this.br.add(new Br(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(i)}lookupMutationBatch(e,r){return j.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,A=this.vr(n),s=A<0?0:A;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Br(r,0),A=new Br(r,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,A],i=>{const a=this.Dr(i.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new _t(Je);return r.forEach(A=>{const s=new Br(A,0),i=new Br(A,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],a=>{n=n.add(a.wr)})}),j.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,A=n.length+1;let s=n;ve.isDocumentKey(s)||(s=s.child(""));const i=new Br(new ve(s),0);let a=new _t(Je);return this.br.forEachWhile(o=>{const c=o.key.path;return!!n.isPrefixOf(c)&&(c.length===A&&(a=a.add(o.wr)),!0)},i),j.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const A=this.Dr(n);A!==null&&r.push(A)}),r}removeMutationBatch(e,r){Le(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return j.forEach(r.mutations,A=>{const s=new Br(A.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Br(r,0),A=this.br.firstAfterOrEqual(n);return j.resolve(r.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.Mr=e,this.docs=function(){return new Ut(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,A=this.docs.get(n),s=A?A.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return j.resolve(n?n.document.mutableCopy():Dt.newInvalidDocument(r))}getEntries(e,r){let n=cn();return r.forEach(A=>{const s=this.docs.get(A);n=n.insert(A,s?s.document.mutableCopy():Dt.newInvalidDocument(A))}),j.resolve(n)}getDocumentsMatchingQuery(e,r,n,A){let s=cn();const i=r.path,a=new ve(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:c,value:{document:d}}=o.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Iw(_b(d),n)<=0||(A.has(d.key)||Jc(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,r,n,A){Se()}Or(e,r){return j.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new BD(this)}getSize(e){return j.resolve(this.size)}}class BD extends P1{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,A)=>{A.isValidDocument()?r.push(this.cr.addEntry(e,A)):this.cr.removeEntry(n)}),j.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.persistence=e,this.Nr=new VA(r=>Mi(r),Wc),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mw,this.targetCount=0,this.kr=Gi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,A)=>r(A)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),j.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Gi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,j.resolve()}updateTargetData(e,r){return this.Kn(r),j.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,r,n){let A=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),A++)}),j.waitFor(s).next(()=>A)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return j.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),j.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const A=this.persistence.referenceDelegate,s=[];return A&&r.forEach(i=>{s.push(A.markPotentiallyOrphaned(e,i))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),j.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return j.resolve(n)}containsKey(e,r){return j.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,r){this.qr={},this.overlays={},this.Qr=new an(0),this.Kr=!1,this.Kr=!0,this.$r=new pD,this.referenceDelegate=e(this),this.Ur=new yD(this),this.indexManager=new sD,this.remoteDocumentCache=function(A){return new wD(A)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new T1(r),this.Gr=new fD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new gD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new mD(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Z("MemoryPersistence","Starting transaction:",e);const A=new vD(this.Qr.next());return this.referenceDelegate.zr(),n(A).next(s=>this.referenceDelegate.jr(A).next(()=>s)).toPromise().then(s=>(A.raiseOnCommittedEvent(),s))}Hr(e,r){return j.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class vD extends bb{constructor(e){super(),this.currentSequenceNumber=e}}class kf{constructor(e){this.persistence=e,this.Jr=new Mw,this.Yr=null}static Zr(e){return new kf(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),j.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),j.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),j.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(A=>this.Xr.add(A.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(A=>{A.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,n=>{const A=ve.fromPath(n);return this.ei(e,A).next(s=>{s||r.removeEntry(A,Me.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return j.or([()=>j.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class kh{constructor(e,r){this.persistence=e,this.ti=new VA(n=>Gr(n.path),(n,A)=>n.isEqual(A)),this.garbageCollector=D1(this,r)}static Zr(e,r){return new kh(e,r)}zr(){}jr(e){return j.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(A=>n+A))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return j.forEach(this.ti,(n,A)=>this.nr(e,n,A).next(s=>s?j.resolve():r(A)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const A=this.persistence.getRemoteDocumentCache(),s=A.newChangeBuffer();return A.Or(e,i=>this.nr(e,i,r).next(a=>{a||(n++,s.removeEntry(i,Me.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),j.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Dd(e.data.value)),r}nr(e,r,n){return j.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const A=this.ti.get(r);return j.resolve(A!==void 0&&A>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.serializer=e}O(e,r,n,A){const s=new If("createOrUpgrade",r);n<1&&A>=1&&(function(o){o.createObjectStore("owner")}(e),function(o){o.createObjectStore("mutationQueues",{keyPath:"userId"}),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zv,{unique:!0}),o.createObjectStore("documentMutations")}(e),Mx(e),function(o){o.createObjectStore("remoteDocuments")}(e));let i=j.resolve();return n<3&&A>=3&&(n!==0&&(function(o){o.deleteObjectStore("targetDocuments"),o.deleteObjectStore("targets"),o.deleteObjectStore("targetGlobal")}(e),Mx(e)),i=i.next(()=>function(o){const c=o.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),n<4&&A>=4&&(n!==0&&(i=i.next(()=>function(o,c){return c.store("mutations").U().next(d=>{o.deleteObjectStore("mutations"),o.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zv,{unique:!0});const h=c.store("mutations"),f=d.map(w=>h.put(w));return j.waitFor(f)})}(e,s))),i=i.next(()=>{(function(o){o.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&A>=5&&(i=i.next(()=>this.ni(s))),n<6&&A>=6&&(i=i.next(()=>(function(o){o.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&A>=7&&(i=i.next(()=>this.ii(s))),n<8&&A>=8&&(i=i.next(()=>this.si(e,s))),n<9&&A>=9&&(i=i.next(()=>{(function(o){o.objectStoreNames.contains("remoteDocumentChanges")&&o.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&A>=10&&(i=i.next(()=>this.oi(s))),n<11&&A>=11&&(i=i.next(()=>{(function(o){o.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(o){o.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&A>=12&&(i=i.next(()=>{(function(o){const c=o.createObjectStore("documentOverlays",{keyPath:s4});c.createIndex("collectionPathOverlayIndex",i4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",o4,{unique:!1})})(e)})),n<13&&A>=13&&(i=i.next(()=>function(o){const c=o.createObjectStore("remoteDocumentsV14",{keyPath:WN});c.createIndex("documentKeyIndex",qN),c.createIndex("collectionGroupIndex",JN)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&A>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&A>=15&&(i=i.next(()=>function(o){o.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),o.createObjectStore("indexState",{keyPath:t4}).createIndex("sequenceNumberIndex",r4,{unique:!1}),o.createObjectStore("indexEntries",{keyPath:n4}).createIndex("documentKeyIndex",A4,{unique:!1})}(e))),n<16&&A>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&A>=17&&(i=i.next(()=>{(function(o){o.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,A)=>{r+=Sh(A)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(A=>j.forEach(A,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(a=>j.forEach(a,o=>{Le(o.userId===s.userId);const c=Bi(this.serializer,o);return S1(e,s.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(A=>{const s=[];return n.J((i,a)=>{const o=new ct(i),c=function(h){return[0,Gr(h)]}(o);s.push(r.get(c).next(d=>d?j.resolve():(h=>r.put({targetId:0,path:Gr(h),sequenceNumber:A.highestListenSequenceNumber}))(o)))}).next(()=>j.waitFor(s))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:e4});const n=r.store("collectionParents"),A=new jw,s=i=>{if(A.add(i)){const a=i.lastSegment(),o=i.popLast();return n.put({collectionId:a,parent:Gr(o)})}};return r.store("remoteDocuments").J({H:!0},(i,a)=>{const o=new ct(i);return s(o.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,a,o],c)=>{const d=eA(a);return s(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,A)=>{const s=El(A),i=F1(this.serializer,s);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),A=[];return n.J((s,i)=>{const a=r.store("remoteDocumentsV14"),o=function(h){return h.document?new ve(ct.fromString(h.document.name).popFirst(5)):h.noDocument?ve.fromSegments(h.noDocument.path):h.unknownDocument?ve.fromSegments(h.unknownDocument.path):Se()}(i).path.toArray(),c={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};A.push(a.put(c))}).next(()=>j.waitFor(A))}ai(e,r){const n=r.store("mutations"),A=L1(this.serializer),s=new Ow(kf.Zr,this.serializer.ct);return n.U().next(i=>{const a=new Map;return i.forEach(o=>{var c;let d=(c=a.get(o.userId))!==null&&c!==void 0?c:Ze();Bi(this.serializer,o).keys().forEach(h=>d=d.add(h)),a.set(o.userId,d)}),j.forEach(a,(o,c)=>{const d=new vr(c),h=Uf.lt(this.serializer,d),f=s.getIndexManager(d),w=Sf.lt(d,this.serializer,f,s.referenceDelegate);return new j1(A,w,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Qm(r,an.oe),o).next()})})}}function Mx(t){t.createObjectStore("targetDocuments",{keyPath:YN}).createIndex("documentTargetsIndex",ZN,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",XN,{unique:!0}),t.createObjectStore("targetGlobal")}const Jg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hw{constructor(e,r,n,A,s,i,a,o,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=s,this.window=i,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Hw.D())throw new Y(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cD(this,A),this.Ai=r+"main",this.serializer=new T1(o),this.Ri=new AA(this.Ai,this.hi,new xD(this.serializer)),this.$r=new Z4,this.Ur=new oD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=L1(this.serializer),this.Gr=new Y4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(H.FAILED_PRECONDITION,Jg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new an(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ei(e))return Z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ul(e).get("owner").next(r=>j.resolve(this.vi(r)))}Ci(e){return zu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=pr(r,"clientMetadata");return n.U().next(A=>{const s=this.xi(A,18e5),i=A.filter(a=>s.indexOf(a)===-1);return j.forEach(i,a=>n.delete(a.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?j.resolve(!0):ul(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Y(H.FAILED_PRECONDITION,Jg);return!1}}return!(!this.networkEnabled||!this.inForeground)||zu(e).U().next(n=>this.xi(n,5e3).find(A=>{if(this.clientId!==A.clientId){const s=!this.networkEnabled&&A.networkEnabled,i=!this.inForeground&&A.inForeground,a=this.networkEnabled===A.networkEnabled;if(s||i&&a)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&Z("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Qm(e,an.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zu(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Sf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Uf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Z("IndexedDbPersistence","Starting transaction:",e);const A=r==="readonly"?"readonly":"readwrite",s=function(o){return o===17?c4:o===16?l4:o===15?Ew:o===14?kb:o===13?Sb:o===12?a4:o===11?Ub:void Se()}(this.hi);let i;return this.Ri.runTransaction(e,A,s,a=>(i=new Qm(a,this.Qr?this.Qr.next():an.oe),r==="readwrite-primary"?this.wi(i).next(o=>!!o||this.Si(i)).next(o=>{if(!o)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Y(H.FAILED_PRECONDITION,Eb);return n(i)}).next(o=>this.Di(i).next(()=>o)):this.Ki(i).next(()=>n(i)))).then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e){return ul(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Y(H.FAILED_PRECONDITION,Jg)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ul(e).put("owner",r)}static D(){return AA.D()}bi(e){const r=ul(e);return r.get("owner").next(n=>this.vi(n)?(Z("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):j.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ir(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;ob()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Z("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ir("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ul(t){return pr(t,"owner")}function zu(t){return pr(t,"clientMetadata")}function Vw(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,r,n,A){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=A}static Wi(e,r){let n=Ze(),A=Ze();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:A=A.add(s.doc.key)}return new Kw(e,r.fromCache,n,A)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ob()?8:Tb(gr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,A){const s={result:null};return this.Yi(e,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,r,A,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new CD;return this.Xi(e,r,i).next(a=>{if(s.result=a,this.zi)return this.es(e,r,i,a.size)})}).next(()=>s.result)}es(e,r,n,A){return n.documentReadCount<this.ji?(wo()<=lt.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Bo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(wo()<=lt.DEBUG&&Z("QueryEngine","Query:",Bo(r),"scans",n.documentReadCount,"local documents and returns",A,"documents as results."),n.documentReadCount>this.Hi*A?(wo()<=lt.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Bo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(r))):j.resolve())}Yi(e,r){if(dx(r))return j.resolve(null);let n=zr(r);return this.indexManager.getIndexType(e,n).next(A=>A===0?null:(r.limit!==null&&A===1&&(r=Th(r,null,"F"),n=zr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const i=Ze(...s);return this.Ji.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,n).next(o=>{const c=this.ts(r,a);return this.ns(r,c,i,o.readTime)?this.Yi(e,Th(r,null,"F")):this.rs(e,c,r,o)}))})))}Zi(e,r,n,A){return dx(r)||A.isEqual(Me.min())?j.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(r,s);return this.ns(r,i,n,A)?j.resolve(null):(wo()<=lt.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),Bo(r)),this.rs(e,i,r,Ib(A,-1)).next(a=>a))})}ts(e,r){let n=new _t(Yb(e));return r.forEach((A,s)=>{Jc(e,s)&&(n=n.add(s))}),n}ns(e,r,n,A){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(A)>0)}Xi(e,r,n){return wo()<=lt.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Bo(r)),this.Ji.getDocumentsMatchingQuery(e,r,In.min(),n)}rs(e,r,n,A){return this.Ji.getDocumentsMatchingQuery(e,n,A).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,r,n,A){this.persistence=e,this.ss=r,this.serializer=A,this.os=new Ut(Je),this._s=new VA(s=>Mi(s),Wc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function O1(t,e,r,n){return new ID(t,e,r,n)}async function H1(t,e){const r=me(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let A;return r.mutationQueue.getAllMutationBatches(n).next(s=>(A=s,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],a=[];let o=Ze();for(const c of A){i.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)o=o.add(d.key)}return r.localDocuments.getDocuments(n,o).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:a}))})})}function _D(t,e){const r=me(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const A=e.batch.keys(),s=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,o,c,d){const h=c.batch,f=h.keys();let w=j.resolve();return f.forEach(y=>{w=w.next(()=>d.getEntry(o,y)).next(B=>{const E=c.docVersions.get(y);Le(E!==null),B.version.compareTo(E)<0&&(h.applyToRemoteDocument(B,c),B.isValidDocument()&&(B.setReadTime(c.commitVersion),d.addEntry(B)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(o,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,A,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let o=Ze();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(o=o.add(a.batch.mutations[c].key));return o}(e))).next(()=>r.localDocuments.getDocuments(n,A))})}function V1(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function ED(t,e){const r=me(t),n=e.snapshotVersion;let A=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});A=r.os;const a=[];e.targetChanges.forEach((d,h)=>{const f=A.get(h);if(!f)return;a.push(r.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(s,d.addedDocuments,h)));let w=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?w=w.withResumeToken(Xt.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,n)),A=A.insert(h,w),function(B,E,x){return B.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,w,d)&&a.push(r.Ur.updateTargetData(s,w))});let o=cn(),c=Ze();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(K1(s,i,e.documentUpdates).next(d=>{o=d.Ps,c=d.Is})),!n.isEqual(Me.min())){const d=r.Ur.getLastRemoteSnapshotVersion(s).next(h=>r.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(d)}return j.waitFor(a).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,o,c)).next(()=>o)}).then(s=>(r.os=A,s))}function K1(t,e,r){let n=Ze(),A=Ze();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let i=cn();return r.forEach((a,o)=>{const c=s.get(a);o.isFoundDocument()!==c.isFoundDocument()&&(A=A.add(a)),o.isNoDocument()&&o.version.isEqual(Me.min())?(e.removeEntry(a,o.readTime),i=i.insert(a,o)):!c.isValidDocument()||o.version.compareTo(c.version)>0||o.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(o),i=i.insert(a,o)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",o.version)}),{Ps:i,Is:A}})}function bD(t,e){const r=me(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ha(t,e){const r=me(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let A;return r.Ur.getTargetData(n,e).next(s=>s?(A=s,j.resolve(A)):r.Ur.allocateTargetId(n).next(i=>(A=new xA(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,A).next(()=>A))))}).then(n=>{const A=r.os.get(n.targetId);return(A===null||n.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function fa(t,e,r){const n=me(t),A=n.os.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,A))}catch(i){if(!ei(i))throw i;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(A.target)}function Rh(t,e,r){const n=me(t);let A=Me.min(),s=Ze();return n.persistence.runTransaction("Execute query","readwrite",i=>function(o,c,d){const h=me(o),f=h._s.get(d);return f!==void 0?j.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,zr(e)).next(a=>{if(a)return A=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,a.targetId).next(o=>{s=o})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?A:Me.min(),r?s:Ze())).next(a=>($1(n,Xb(e),a),{documents:a,Ts:s})))}function G1(t,e){const r=me(t),n=me(r.Ur),A=r.os.get(e);return A?Promise.resolve(A.target):r.persistence.runTransaction("Get target data","readonly",s=>n.ot(s,e).next(i=>i?i.target:null))}function z1(t,e){const r=me(t),n=r.us.get(e)||Me.min();return r.persistence.runTransaction("Get new document changes","readonly",A=>r.cs.getAllFromCollectionGroup(A,e,Ib(n,-1),Number.MAX_SAFE_INTEGER)).then(A=>($1(r,e,A),A))}function $1(t,e,r){let n=t.us.get(e)||Me.min();r.forEach((A,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.us.set(e,n)}async function TD(t,e,r,n){const A=me(t);let s=Ze(),i=cn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const a=A.cs.newChangeBuffer({trackRemovals:!0}),o=await ha(A,function(d){return zr(Ta(ct.fromString(`__bundle__/docs/${d}`)))}(n));return A.persistence.runTransaction("Apply bundle documents","readwrite",c=>K1(c,a,i).next(d=>(a.apply(c),d)).next(d=>A.Ur.removeMatchingKeysForTargetId(c,o.targetId).next(()=>A.Ur.addMatchingKeys(c,s,o.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function FD(t,e,r=Ze()){const n=await ha(t,zr(Pw(e.bundledQuery))),A=me(t);return A.persistence.runTransaction("Save named query","readwrite",s=>{const i=or(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return A.Gr.saveNamedQuery(s,e);const a=n.withResumeToken(Xt.EMPTY_BYTE_STRING,i);return A.os=A.os.insert(a.targetId,a),A.Ur.updateTargetData(s,a).next(()=>A.Ur.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>A.Ur.addMatchingKeys(s,r,n.targetId)).next(()=>A.Gr.saveNamedQuery(s,e))})}function Ox(t,e){return`firestore_clients_${t}_${e}`}function Hx(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Xg(t,e){return`firestore_targets_${t}_${e}`}class Nh{constructor(e,r,n,A){this.user=e,this.batchId=r,this.state=n,this.error=A}static Rs(e,r,n){const A=JSON.parse(n);let s,i=typeof A=="object"&&["pending","acknowledged","rejected"].indexOf(A.state)!==-1&&(A.error===void 0||typeof A.error=="object");return i&&A.error&&(i=typeof A.error.message=="string"&&typeof A.error.code=="string",i&&(s=new Y(A.error.code,A.error.message))),i?new Nh(e,r,A.state,s):(ir("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wl{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let A,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(A=new Y(n.error.code,n.error.message))),s?new Wl(e,n.state,A):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let A=typeof n=="object"&&n.activeTargetIds instanceof Array,s=Fw();for(let i=0;A&&i<n.activeTargetIds.length;++i)A=Fb(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return A?new Dh(e,s):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Gw{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Gw(r.clientId,r.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Km{constructor(){this.activeTargetIds=Fw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yg{constructor(e,r,n,A,s){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=A,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ut(Je),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Ox(this.persistenceKey,this.ps),this.vs=function(o){return`firestore_sequence_number_${o}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Km),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(o){return`firestore_online_state_${o}`}(this.persistenceKey),this.Os=function(o){return`firestore_bundle_loaded_v2_${o}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const A=this.getItem(Ox(this.persistenceKey,n));if(A){const s=Dh.Rs(n,A);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,A)=>{A.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(Xg(this.persistenceKey,e));if(A){const s=Wl.Rs(e,A);s&&(n=s.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xg(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(A=>{this.Qs(A)}),this.currentUser=e,n.forEach(A=>{this.addPendingMutation(A)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Z("SharedClientState","READ",e,r),r}setItem(e,r){Z("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Z("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(s){let i=an.oe;if(s!=null)try{const a=JSON.parse(s);Le(typeof a=="number"),i=a}catch(a){ir("SharedClientState","Failed to read sequence number from WebStorage",a)}return i}(r.newValue);n!==an.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(A=>this.syncEngine.eo(A)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const A=new Nh(this.currentUser,e,r,n),s=Hx(this.persistenceKey,this.currentUser,e);this.setItem(s,A.Vs())}Qs(e){const r=Hx(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const A=Xg(this.persistenceKey,e),s=new Wl(e,r,n);this.setItem(A,s.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Dh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),A=Number(n[1]),s=n[2]!==void 0?n[2]:null;return Nh.Rs(new vr(s),A,r)}Ys(e,r){const n=this.Ms.exec(e),A=Number(n[1]);return Wl.Rs(A,r)}Ls(e){return Gw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),A=this.ks(this.Ss),s=this.ks(n),i=[],a=[];return s.forEach(o=>{A.has(o)||i.push(o)}),A.forEach(o=>{s.has(o)||a.push(o)}),this.syncEngine.io(i,a).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Fw();return e.forEach((n,A)=>{r=r.unionWith(A.activeTargetIds)}),r}}class W1{constructor(){this.so=new Km,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Km,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function Zg(){return $u===null?$u=function(){return 268435456+Math.round(2147483648*Math.random())}():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="WebChannelConnection";class kD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${A}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${A}`:`project_id=${A}&database_id=${s}`}get Fo(){return!1}Mo(r,n,A,s,i){const a=Zg(),o=this.xo(r,n.toUriEncodedString());Z("RestConnection",`Sending RPC '${r}' ${a}:`,o,A);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,i),this.No(r,o,c,A).then(d=>(Z("RestConnection",`Received RPC '${r}' ${a}: `,d),d),d=>{throw Cn("RestConnection",`RPC '${r}' ${a} failed with error: `,d,"url: ",o,"request:",A),d})}Lo(r,n,A,s,i,a){return this.Mo(r,n,A,s,i)}Oo(r,n,A){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>r[i]=s),A&&A.headers.forEach((s,i)=>r[i]=s)}xo(r,n){const A=UD[r];return`${this.Do}/v1/${n}:${A}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,A){const s=Zg();return new Promise((i,a)=>{const o=new gb;o.setWithCredentials(!0),o.listenOnce(pb.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case kd.NO_ERROR:const d=o.getResponseJson();Z(Mr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case kd.TIMEOUT:Z(Mr,`RPC '${e}' ${s} timed out`),a(new Y(H.DEADLINE_EXCEEDED,"Request time out"));break;case kd.HTTP_ERROR:const h=o.getStatus();if(Z(Mr,`RPC '${e}' ${s} failed with status:`,h,"response text:",o.getResponseText()),h>0){let f=o.getResponseJson();Array.isArray(f)&&(f=f[0]);const w=f==null?void 0:f.error;if(w&&w.status&&w.message){const y=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(x)>=0?x:H.UNKNOWN}(w.status);a(new Y(y,w.message))}else a(new Y(H.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Y(H.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{Z(Mr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(A);Z(Mr,`RPC '${e}' ${s} sending request:`,A),o.send(r,"POST",c,n,15)})}Bo(e,r,n){const A=Zg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Bb(),a=wb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const d=s.join("");Z(Mr,`Creating RPC '${e}' stream ${A}: ${d}`,o);const h=i.createWebChannel(d,o);let f=!1,w=!1;const y=new SD({Io:E=>{w?Z(Mr,`Not sending because RPC '${e}' stream ${A} is closed:`,E):(f||(Z(Mr,`Opening RPC '${e}' stream ${A} transport.`),h.open(),f=!0),Z(Mr,`RPC '${e}' stream ${A} sending:`,E),h.send(E))},To:()=>h.close()}),B=(E,x,m)=>{E.listen(x,I=>{try{m(I)}catch(F){setTimeout(()=>{throw F},0)}})};return B(h,Cl.EventType.OPEN,()=>{w||(Z(Mr,`RPC '${e}' stream ${A} transport opened.`),y.yo())}),B(h,Cl.EventType.CLOSE,()=>{w||(w=!0,Z(Mr,`RPC '${e}' stream ${A} transport closed`),y.So())}),B(h,Cl.EventType.ERROR,E=>{w||(w=!0,Cn(Mr,`RPC '${e}' stream ${A} transport errored:`,E),y.So(new Y(H.UNAVAILABLE,"The operation could not be completed")))}),B(h,Cl.EventType.MESSAGE,E=>{var x;if(!w){const m=E.data[0];Le(!!m);const I=m,F=I.error||((x=I[0])===null||x===void 0?void 0:x.error);if(F){Z(Mr,`RPC '${e}' stream ${A} received error:`,F);const R=F.status;let U=function(_){const Q=lr[_];if(Q!==void 0)return d1(Q)}(R),v=F.message;U===void 0&&(U=H.INTERNAL,v="Unknown error status: "+R+" with message "+F.message),w=!0,y.So(new Y(U,v)),h.close()}else Z(Mr,`RPC '${e}' stream ${A} received:`,m),y.bo(m)}}),B(a,mb.STAT_EVENT,E=>{E.stat===Tm.PROXY?Z(Mr,`RPC '${e}' stream ${A} detected buffering proxy`):E.stat===Tm.NOPROXY&&Z(Mr,`RPC '${e}' stream ${A} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){return typeof window<"u"?window:null}function Md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){return new O4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r,n=1e3,A=1.5,s=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=A,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),A=Math.max(0,r-n);A>0&&Z("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,A,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,r,n,A,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=A,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zw(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===H.RESOURCE_EXHAUSTED?(ir(r.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,A])=>{this.Yo===r&&this.P_(n,A)},n=>{e(()=>{const A=new Y(H.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(A)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(A=>{n(()=>this.I_(A))}),this.stream.onMessage(A=>{n(()=>++this.e_==1?this.E_(A):this.onNext(A))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RD extends J1{constructor(e,r,n,A,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,A,i),this.serializer=s}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=K4(this.serializer,e),n=function(s){if(!("targetChange"in s))return Me.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Me.min():i.readTime?or(i.readTime):Me.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=jm(this.serializer),r.addTarget=function(s,i){let a;const o=i.target;if(a=Eh(o)?{documents:x1(s,o)}:{query:Qf(s,o)._t},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=p1(s,i.resumeToken);const c=Pm(s,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(Me.min())>0){a.readTime=da(s,i.snapshotVersion.toTimestamp());const c=Pm(s,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=z4(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=jm(this.serializer),r.removeTarget=e,this.a_(r)}}class ND extends J1{constructor(e,r,n,A,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,A,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=G4(e.writeResults,e.commitTime),n=or(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=jm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Qc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends class{}{constructor(e,r,n,A){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=A,this.y_=!1}w_(){if(this.y_)throw new Y(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,Lm(r,n),A,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(H.UNKNOWN,s.toString())})}Lo(e,r,n,A,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Lo(e,Lm(r,n),A,i,a,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(H.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class PD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(r),this.D_=!1):Z("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,r,n,A,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{n.enqueueAndForget(async()=>{ri(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(o){const c=me(o);c.L_.add(4),await Ua(c),c.q_.set("Unknown"),c.L_.delete(4),await tu(c)}(this))})}),this.q_=new PD(n,A)}}async function tu(t){if(ri(t))for(const e of t.B_)await e(!0)}async function Ua(t){for(const e of t.B_)await e(!1)}function Rf(t,e){const r=me(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),qw(r)?Ww(r):ka(r).r_()&&$w(r,e))}function ga(t,e){const r=me(t),n=ka(r);r.N_.delete(e),n.r_()&&X1(r,e),r.N_.size===0&&(n.r_()?n.o_():ri(r)&&r.q_.set("Unknown"))}function $w(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ka(t).A_(e)}function X1(t,e){t.Q_.xe(e),ka(t).R_(e)}function Ww(t){t.Q_=new P4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.q_.v_()}function qw(t){return ri(t)&&!ka(t).n_()&&t.N_.size>0}function ri(t){return me(t).L_.size===0}function Y1(t){t.Q_=void 0}async function jD(t){t.q_.set("Online")}async function MD(t){t.N_.forEach((e,r)=>{$w(t,e)})}async function OD(t,e){Y1(t),qw(t)?(t.q_.M_(e),Ww(t)):t.q_.set("Unknown")}async function HD(t,e,r){if(t.q_.set("Online"),e instanceof g1&&e.state===2&&e.cause)try{await async function(A,s){const i=s.cause;for(const a of s.targetIds)A.N_.has(a)&&(await A.remoteSyncer.rejectListen(a,i),A.N_.delete(a),A.Q_.removeTarget(a))}(t,e)}catch(n){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ph(t,n)}else if(e instanceof jd?t.Q_.Ke(e):e instanceof f1?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Me.min()))try{const n=await V1(t.localStore);r.compareTo(n)>=0&&await function(s,i){const a=s.Q_.rt(i);return a.targetChanges.forEach((o,c)=>{if(o.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(o.resumeToken,i))}}),a.targetMismatches.forEach((o,c)=>{const d=s.N_.get(o);if(!d)return;s.N_.set(o,d.withResumeToken(Xt.EMPTY_BYTE_STRING,d.snapshotVersion)),X1(s,o);const h=new xA(d.target,o,c,d.sequenceNumber);$w(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){Z("RemoteStore","Failed to raise snapshot:",n),await Ph(t,n)}}async function Ph(t,e,r){if(!ei(e))throw e;t.L_.add(1),await Ua(t),t.q_.set("Offline"),r||(r=()=>V1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await tu(t)})}function Z1(t,e){return e().catch(r=>Ph(t,r,e))}async function Sa(t){const e=me(t),r=Ks(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;VD(e);)try{const A=await bD(e.localStore,n);if(A===null){e.O_.length===0&&r.o_();break}n=A.batchId,KD(e,A)}catch(A){await Ph(e,A)}eT(e)&&tT(e)}function VD(t){return ri(t)&&t.O_.length<10}function KD(t,e){t.O_.push(e);const r=Ks(t);r.r_()&&r.V_&&r.m_(e.mutations)}function eT(t){return ri(t)&&!Ks(t).n_()&&t.O_.length>0}function tT(t){Ks(t).start()}async function GD(t){Ks(t).p_()}async function zD(t){const e=Ks(t);for(const r of t.O_)e.m_(r.mutations)}async function $D(t,e,r){const n=t.O_.shift(),A=kw.from(n,e,r);await Z1(t,()=>t.remoteSyncer.applySuccessfulWrite(A)),await Sa(t)}async function WD(t,e){e&&Ks(t).V_&&await async function(n,A){if(function(i){return u1(i)&&i!==H.ABORTED}(A.code)){const s=n.O_.shift();Ks(n).s_(),await Z1(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,A)),await Sa(n)}}(t,e),eT(t)&&tT(t)}async function Kx(t,e){const r=me(t);r.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const n=ri(r);r.L_.add(3),await Ua(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await tu(r)}async function Gm(t,e){const r=me(t);e?(r.L_.delete(2),await tu(r)):e||(r.L_.add(2),await Ua(r),r.q_.set("Unknown"))}function ka(t){return t.K_||(t.K_=function(r,n,A){const s=me(r);return s.w_(),new RD(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:jD.bind(null,t),Ro:MD.bind(null,t),mo:OD.bind(null,t),d_:HD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),qw(t)?Ww(t):t.q_.set("Unknown")):(await t.K_.stop(),Y1(t))})),t.K_}function Ks(t){return t.U_||(t.U_=function(r,n,A){const s=me(r);return s.w_(),new ND(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GD.bind(null,t),mo:WD.bind(null,t),f_:zD.bind(null,t),g_:$D.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Sa(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,r,n,A,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=A,this.removalCallback=s,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,A,s){const i=Date.now()+n,a=new Jw(e,r,i,A,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ra(t,e){if(ir("AsyncQueue",`${e}: ${t}`),ei(t))return new Y(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ve.comparator(r.key,n.key):(r,n)=>ve.comparator(r.key,n.key),this.keyedMap=Il(),this.sortedSet=new Ut(this.comparator)}static emptySet(e){return new Go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const A=r.getNext().key,s=n.getNext().key;if(!A.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Go;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.W_=new Ut(ve.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class pa{constructor(e,r,n,A,s,i,a,o,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=A,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,A,s){const i=[];return r.forEach(a=>{i.push({type:0,doc:a})}),new pa(e,r,Go.emptySet(r),i,n,A,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let A=0;A<r.length;A++)if(r[A].type!==n[A].type||!r[A].doc.isEqual(n[A].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class JD{constructor(){this.queries=zx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const A=me(r),s=A.queries;A.queries=zx(),s.forEach((i,a)=>{for(const o of a.j_)o.onError(n)})})(this,new Y(H.ABORTED,"Firestore shutting down"))}}function zx(){return new VA(t=>Jb(t),qc)}async function Xw(t,e){const r=me(t);let n=3;const A=e.query;let s=r.queries.get(A);s?!s.H_()&&e.J_()&&(n=2):(s=new qD,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await r.onListen(A,!0);break;case 1:s.z_=await r.onListen(A,!1);break;case 2:await r.onFirstRemoteStoreListen(A)}}catch(i){const a=Ra(i,`Initialization of query '${Bo(e.query)}' failed`);return void e.onError(a)}r.queries.set(A,s),s.j_.push(e),e.Z_(r.onlineState),s.z_&&e.X_(s.z_)&&Zw(r)}async function Yw(t,e){const r=me(t),n=e.query;let A=3;const s=r.queries.get(n);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?A=e.J_()?0:1:!s.H_()&&e.J_()&&(A=2))}switch(A){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function XD(t,e){const r=me(t);let n=!1;for(const A of e){const s=A.query,i=r.queries.get(s);if(i){for(const a of i.j_)a.X_(A)&&(n=!0);i.z_=A}}n&&Zw(r)}function YD(t,e,r){const n=me(t),A=n.queries.get(e);if(A)for(const s of A.j_)s.onError(r);n.queries.delete(e)}function Zw(t){t.Y_.forEach(e=>{e.next()})}var zm,$x;($x=zm||(zm={})).ea="default",$x.Cache="cache";class eB{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const A of e.docChanges)A.type!==3&&n.push(A);e=new pa(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this.serializer=e}Es(e){return sA(this.serializer,e)}ds(e){return e.metadata.exists?v1(this.serializer,e.document,!1):Dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return or(e)}}class eP{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=ct.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new Wx(this.serializer);for(const A of e)if(A.metadata.queries){const s=n.Es(A.metadata.name);for(const i of A.metadata.queries){const a=(r.get(i)||Ze()).add(s);r.set(i,a)}}return r}async complete(){const e=await TD(this.localStore,new Wx(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await FD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function rT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.key=e}}class AT{constructor(e){this.key=e}}class sT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ze(),this.mutatedKeys=Ze(),this.Aa=Yb(e),this.Ra=new Go(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new Gx,A=r?r.Ra:this.Ra;let s=r?r.mutatedKeys:this.mutatedKeys,i=A,a=!1;const o=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,c=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal((d,h)=>{const f=A.get(d),w=Jc(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),B=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let E=!1;f&&w?f.data.isEqual(w.data)?y!==B&&(n.track({type:3,doc:w}),E=!0):this.ga(f,w)||(n.track({type:2,doc:w}),E=!0,(o&&this.Aa(w,o)>0||c&&this.Aa(w,c)<0)&&(a=!0)):!f&&w?(n.track({type:0,doc:w}),E=!0):f&&!w&&(n.track({type:1,doc:f}),E=!0,(o||c)&&(a=!0)),E&&(w?(i=i.add(w),s=B?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,A){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(w,y){const B=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return B(w)-B(y)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),A=A!=null&&A;const a=r&&!A?this.ya():[],o=this.da.size===0&&this.current&&!A?1:0,c=o!==this.Ea;return this.Ea=o,i.length!==0||c?{snapshot:new pa(this.query,e.Ra,s,i,e.mutatedKeys,o===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ze(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new AT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new nT(n))}),r}ba(e){this.Ta=e.Ts,this.da=Ze();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class tP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class rP{constructor(e){this.key=e,this.va=!1}}class nP{constructor(e,r,n,A,s,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=A,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new VA(a=>Jb(a),qc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ut(ve.comparator),this.Na=new Map,this.La=new Mw,this.Ba={},this.ka=new Map,this.qa=Gi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AP(t,e,r=!0){const n=Nf(t);let A;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),A=s.view.Da()):A=await iT(n,e,r,!0),A}async function sP(t,e){const r=Nf(t);await iT(r,e,!0,!1)}async function iT(t,e,r,n){const A=await ha(t.localStore,zr(e)),s=A.targetId,i=t.sharedClientState.addLocalQueryTarget(s,r);let a;return n&&(a=await tB(t,e,s,i==="current",A.resumeToken)),t.isPrimaryClient&&r&&Rf(t.remoteStore,A),a}async function tB(t,e,r,n,A){t.Ka=(h,f,w)=>async function(B,E,x,m){let I=E.view.ma(x);I.ns&&(I=await Rh(B.localStore,E.query,!1).then(({documents:v})=>E.view.ma(v,I)));const F=m&&m.targetChanges.get(E.targetId),R=m&&m.targetMismatches.get(E.targetId)!=null,U=E.view.applyChanges(I,B.isPrimaryClient,F,R);return $m(B,E.targetId,U.wa),U.snapshot}(t,h,f,w);const s=await Rh(t.localStore,e,!0),i=new sT(e,s.Ts),a=i.ma(s.documents),o=Zc.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",A),c=i.applyChanges(a,t.isPrimaryClient,o);$m(t,r,c.wa);const d=new tP(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function iP(t,e,r){const n=me(t),A=n.Fa.get(e),s=n.Ma.get(A.targetId);if(s.length>1)return n.Ma.set(A.targetId,s.filter(i=>!qc(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(A.targetId),n.sharedClientState.isActiveQueryTarget(A.targetId)||await fa(n.localStore,A.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(A.targetId),r&&ga(n.remoteStore,A.targetId),ma(n,A.targetId)}).catch(Zs)):(ma(n,A.targetId),await fa(n.localStore,A.targetId,!0))}async function oP(t,e){const r=me(t),n=r.Fa.get(e),A=r.Ma.get(n.targetId);r.isPrimaryClient&&A.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),ga(r.remoteStore,n.targetId))}async function aP(t,e,r){const n=sB(t);try{const A=await function(i,a){const o=me(i),c=Gt.now(),d=a.reduce((w,y)=>w.add(y.key),Ze());let h,f;return o.persistence.runTransaction("Locally write mutations","readwrite",w=>{let y=cn(),B=Ze();return o.cs.getEntries(w,d).next(E=>{y=E,y.forEach((x,m)=>{m.isValidDocument()||(B=B.add(x))})}).next(()=>o.localDocuments.getOverlayedDocuments(w,y)).next(E=>{h=E;const x=[];for(const m of a){const I=R4(m,h.get(m.key).overlayedDocument);I!=null&&x.push(new KA(m.key,I,jb(I.value.mapValue),Kt.exists(!0)))}return o.mutationQueue.addMutationBatch(w,c,x,a)}).next(E=>{f=E;const x=E.applyToLocalDocumentSet(h,B);return o.documentOverlayCache.saveOverlays(w,E.batchId,x)})}).then(()=>({batchId:f.batchId,changes:e1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(A.batchId),function(i,a,o){let c=i.Ba[i.currentUser.toKey()];c||(c=new Ut(Je)),c=c.insert(a,o),i.Ba[i.currentUser.toKey()]=c}(n,A.batchId,r),await GA(n,A.changes),await Sa(n.remoteStore)}catch(A){const s=Ra(A,"Failed to persist write");r.reject(s)}}async function oT(t,e){const r=me(t);try{const n=await ED(r.localStore,e);e.targetChanges.forEach((A,s)=>{const i=r.Na.get(s);i&&(Le(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1),A.addedDocuments.size>0?i.va=!0:A.modifiedDocuments.size>0?Le(i.va):A.removedDocuments.size>0&&(Le(i.va),i.va=!1))}),await GA(r,n,e)}catch(n){await Zs(n)}}function qx(t,e,r){const n=me(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const A=[];n.Fa.forEach((s,i)=>{const a=i.view.Z_(e);a.snapshot&&A.push(a.snapshot)}),function(i,a){const o=me(i);o.onlineState=a;let c=!1;o.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(a)&&(c=!0)}),c&&Zw(o)}(n.eventManager,e),A.length&&n.Ca.d_(A),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function lP(t,e,r){const n=me(t);n.sharedClientState.updateQueryState(e,"rejected",r);const A=n.Na.get(e),s=A&&A.key;if(s){let i=new Ut(ve.comparator);i=i.insert(s,Dt.newNoDocument(s,Me.min()));const a=Ze().add(s),o=new Yc(Me.min(),new Map,new Ut(Je),i,a);await oT(n,o),n.Oa=n.Oa.remove(s),n.Na.delete(e),AB(n)}else await fa(n.localStore,e,!1).then(()=>ma(n,e,r)).catch(Zs)}async function cP(t,e){const r=me(t),n=e.batch.batchId;try{const A=await _D(r.localStore,e);nB(r,n,null),rB(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await GA(r,A)}catch(A){await Zs(A)}}async function uP(t,e,r){const n=me(t);try{const A=await function(i,a){const o=me(i);return o.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return o.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),d=h.keys(),o.mutationQueue.removeMutationBatch(c,h))).next(()=>o.mutationQueue.performConsistencyCheck(c)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>o.localDocuments.getDocuments(c,d))})}(n.localStore,e);nB(n,e,r),rB(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await GA(n,A)}catch(A){await Zs(A)}}async function dP(t,e){const r=me(t);ri(r.remoteStore)||Z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const a=me(i);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",o=>a.mutationQueue.getHighestUnacknowledgedBatchId(o))}(r.localStore);if(n===-1)return void e.resolve();const A=r.ka.get(n)||[];A.push(e),r.ka.set(n,A)}catch(n){const A=Ra(n,"Initialization of waitForPendingWrites() operation failed");e.reject(A)}}function rB(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function nB(t,e,r){const n=me(t);let A=n.Ba[n.currentUser.toKey()];if(A){const s=A.get(e);s&&(r?s.reject(r):s.resolve(),A=A.remove(e)),n.Ba[n.currentUser.toKey()]=A}}function ma(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||aT(t,n)})}function aT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(ga(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),AB(t))}function $m(t,e,r){for(const n of r)n instanceof nT?(t.La.addReference(n.key,e),hP(t,n)):n instanceof AT?(Z("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||aT(t,n.key)):Se()}function hP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Z("SyncEngine","New document in limbo: "+r),t.xa.add(n),AB(t))}function AB(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ve(ct.fromString(e)),n=t.qa.next();t.Na.set(n,new rP(r)),t.Oa=t.Oa.insert(r,n),Rf(t.remoteStore,new xA(zr(Ta(r.path)),n,"TargetPurposeLimboResolution",an.oe))}}async function GA(t,e,r){const n=me(t),A=[],s=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((a,o)=>{i.push(n.Ka(o,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(o.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(o.targetId,h?"current":"not-current")}if(c){A.push(c);const h=Kw.Wi(o.targetId,c);s.push(h)}}))}),await Promise.all(i),n.Ca.d_(A),await async function(o,c){const d=me(o);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>j.forEach(c,f=>j.forEach(f.$i,w=>d.persistence.referenceDelegate.addReference(h,f.targetId,w)).next(()=>j.forEach(f.Ui,w=>d.persistence.referenceDelegate.removeReference(h,f.targetId,w)))))}catch(h){if(!ei(h))throw h;Z("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const w=d.os.get(f),y=w.snapshotVersion,B=w.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(f,B)}}}(n.localStore,s))}async function fP(t,e){const r=me(t);if(!r.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const n=await H1(r.localStore,e);r.currentUser=e,function(s,i){s.ka.forEach(a=>{a.forEach(o=>{o.reject(new Y(H.CANCELLED,i))})}),s.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await GA(r,n.hs)}}function gP(t,e){const r=me(t),n=r.Na.get(e);if(n&&n.va)return Ze().add(n.key);{let A=Ze();const s=r.Ma.get(e);if(!s)return A;for(const i of s){const a=r.Fa.get(i);A=A.unionWith(a.view.Va)}return A}}async function pP(t,e){const r=me(t),n=await Rh(r.localStore,e.query,!0),A=e.view.ba(n);return r.isPrimaryClient&&$m(r,e.targetId,A.wa),A}async function mP(t,e){const r=me(t);return z1(r.localStore,e).then(n=>GA(r,n))}async function wP(t,e,r,n){const A=me(t),s=await function(a,o){const c=me(a),d=me(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,o).next(f=>f?c.localDocuments.getDocuments(h,f):j.resolve(null)))}(A.localStore,e);s!==null?(r==="pending"?await Sa(A.remoteStore):r==="acknowledged"||r==="rejected"?(nB(A,e,n||null),rB(A,e),function(a,o){me(me(a).mutationQueue).On(o)}(A.localStore,e)):Se(),await GA(A,s)):Z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function BP(t,e){const r=me(t);if(Nf(r),sB(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),A=await Jx(r,n.toArray());r.Qa=!0,await Gm(r.remoteStore,!0);for(const s of A)Rf(r.remoteStore,s)}else if(e===!1&&r.Qa!==!1){const n=[];let A=Promise.resolve();r.Ma.forEach((s,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):A=A.then(()=>(ma(r,i),fa(r.localStore,i,!0))),ga(r.remoteStore,i)}),await A,await Jx(r,n),function(i){const a=me(i);a.Na.forEach((o,c)=>{ga(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Ut(ve.comparator)}(r),r.Qa=!1,await Gm(r.remoteStore,!1)}}async function Jx(t,e,r){const n=me(t),A=[],s=[];for(const i of e){let a;const o=n.Ma.get(i);if(o&&o.length!==0){a=await ha(n.localStore,zr(o[0]));for(const c of o){const d=n.Fa.get(c),h=await pP(n,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await G1(n.localStore,i);a=await ha(n.localStore,c),await tB(n,lT(c),i,!1,a.resumeToken)}A.push(a)}return n.Ca.d_(s),A}function lT(t){return $b(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yP(t){return function(r){return me(me(r).persistence).Qi()}(me(t).localStore)}async function vP(t,e,r,n){const A=me(t);if(A.Qa)return void Z("SyncEngine","Ignoring unexpected query state notification.");const s=A.Ma.get(e);if(s&&s.length>0)switch(r){case"current":case"not-current":{const i=await z1(A.localStore,Xb(s[0])),a=Yc.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Xt.EMPTY_BYTE_STRING);await GA(A,i,a);break}case"rejected":await fa(A.localStore,e,!0),ma(A,e,n);break;default:Se()}}async function xP(t,e,r){const n=Nf(t);if(n.Qa){for(const A of e){if(n.Ma.has(A)&&n.sharedClientState.isActiveQueryTarget(A)){Z("SyncEngine","Adding an already active target "+A);continue}const s=await G1(n.localStore,A),i=await ha(n.localStore,s);await tB(n,lT(s),i.targetId,!1,i.resumeToken),Rf(n.remoteStore,i)}for(const A of r)n.Ma.has(A)&&await fa(n.localStore,A,!1).then(()=>{ga(n.remoteStore,A),ma(n,A)}).catch(Zs)}}function Nf(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lP.bind(null,e),e.Ca.d_=XD.bind(null,e.eventManager),e.Ca.$a=YD.bind(null,e.eventManager),e}function sB(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uP.bind(null,e),e}function CP(t,e,r){const n=me(t);(async function(s,i,a){try{const o=await i.getMetadata();if(await function(w,y){const B=me(w),E=or(y.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",x=>B.Gr.getBundleMetadata(x,y.id)).then(x=>!!x&&x.createTime.compareTo(E)>=0)}(s.localStore,o))return await i.close(),a._completeWith(function(w){return{taskState:"Success",documentsLoaded:w.totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}}(o)),Promise.resolve(new Set);a._updateProgress(rT(o));const c=new eP(o,s.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&a._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await GA(s,h.Ia,void 0),await function(w,y){const B=me(w);return B.persistence.runTransaction("Save bundle","readwrite",E=>B.Gr.saveBundleMetadata(E,y))}(s.localStore,o),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(o){return Cn("SyncEngine",`Loading bundle failed with ${o}`),a._failWith(o),Promise.resolve(new Set)}})(n,e,r).then(A=>{n.sharedClientState.notifyBundleLoaded(A)})}class Gs{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return O1(this.persistence,new M1,e.initialUser,this.serializer)}Ga(e){return new Ow(kf.Zr,this.serializer)}Wa(e){return new W1}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gs.provider={build:()=>new Gs};class IP extends Gs{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){Le(this.persistence.referenceDelegate instanceof kh);const n=this.persistence.referenceDelegate.garbageCollector;return new N1(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new Ow(n=>kh.Zr(n,r),this.serializer)}}class iB extends Gs{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await sB(this.Ja.syncEngine),await Sa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return O1(this.persistence,new M1,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new N1(n,e.asyncQueue,r)}Ha(e,r){const n=new GN(r,this.persistence);return new KN(e.asyncQueue,n)}Ga(e){const r=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new Hw(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,q1(),Md(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new W1}}class cT extends iB{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof Yg&&(this.sharedClientState.syncEngine={no:wP.bind(null,r),ro:vP.bind(null,r),io:xP.bind(null,r),Qi:yP.bind(null,r),eo:mP.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await BP(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=q1();if(!Yg.D(r))throw new Y(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yg(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class zs{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>qx(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=fP.bind(null,this.syncEngine),await Gm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JD}()}createDatastore(e){const r=eu(e.databaseInfo.databaseId),n=function(s){return new kD(s)}(e.databaseInfo);return function(s,i,a,o){return new DD(s,i,a,o)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,A,s,i,a){return new LD(n,A,s,i,a)}(this.localStore,this.datastore,e.asyncQueue,r=>qx(this.syncEngine,r,0),function(){return Vx.D()?new Vx:new QD}())}createSyncEngine(e,r){return function(A,s,i,a,o,c,d){const h=new nP(A,s,i,a,o,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(A){const s=me(A);Z("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ua(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}zs.provider={build:()=>new zs};function Xx(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Cr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const A=await this.iu(n);return new ZD(JSON.parse(A),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(A,s){const i=me(A),a={documents:s.map(h=>Fc(i.serializer,h))},o=await i.Lo("BatchGetDocuments",i.serializer.databaseId,ct.emptyPath(),a,s.length),c=new Map;o.forEach(h=>{const f=V4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());Le(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const A=ve.fromPath(n);this.mutations.push(new Uw(A,this.precondition(A)))}),await async function(n,A){const s=me(n),i={writes:A.map(a=>Qc(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,ct.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Se();r=Me.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new Y(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Me.min())?Kt.exists(!1):Kt.updateTime(r):Kt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Me.min()))throw new Y(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kt.updateTime(r)}return Kt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,r,n,A,s){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=A,this.deferred=s,this._u=n.maxAttempts,this.t_=new zw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new EP(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(A=>{this.lu(A)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!$c(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!u1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,r,n,A,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=A,this.user=vr.UNAUTHENTICATED,this.clientId=Cw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{Z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(Z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Ra(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ep(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async A=>{n.isEqual(A)||(await H1(e.localStore,A),n=A)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yx(t,e){t.asyncQueue.verifyOperationInProgress();const r=await oB(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>Kx(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,A)=>Kx(e.remoteStore,A)),t._onlineComponents=e}async function oB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await ep(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(A){return A.name==="FirebaseError"?A.code===H.FAILED_PRECONDITION||A.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11}(r))throw r;Cn("Error using user provided cache. Falling back to memory cache: "+r),await ep(t,new Gs)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await ep(t,new Gs);return t._offlineComponents}async function Pf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Yx(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Yx(t,new zs))),t._onlineComponents}function uT(t){return oB(t).then(e=>e.persistence)}function Na(t){return oB(t).then(e=>e.localStore)}function dT(t){return Pf(t).then(e=>e.remoteStore)}function aB(t){return Pf(t).then(e=>e.syncEngine)}function hT(t){return Pf(t).then(e=>e.datastore)}async function wa(t){const e=await Pf(t),r=e.eventManager;return r.onListen=AP.bind(null,e.syncEngine),r.onUnlisten=iP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=sP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),r}function FP(t){return t.asyncQueue.enqueue(async()=>{const e=await uT(t),r=await dT(t);return e.setNetworkEnabled(!0),function(A){const s=me(A);return s.L_.delete(0),tu(s)}(r)})}function QP(t){return t.asyncQueue.enqueue(async()=>{const e=await uT(t),r=await dT(t);return e.setNetworkEnabled(!1),async function(A){const s=me(A);s.L_.add(0),await Ua(s),s.q_.set("Offline")}(r)})}function UP(t,e){const r=new Cr;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const a=await function(c,d){const h=me(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(A,s);a.isFoundDocument()?i.resolve(a):a.isNoDocument()?i.resolve(null):i.reject(new Y(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const o=Ra(a,`Failed to get document '${s} from cache`);i.reject(o)}}(await Na(t),e,r)),r.promise}function fT(t,e,r={}){const n=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,c){const d=new Df({next:f=>{d.Za(),i.enqueueAndForget(()=>Yw(s,h));const w=f.docs.has(a);!w&&f.fromCache?c.reject(new Y(H.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&f.fromCache&&o&&o.source==="server"?c.reject(new Y(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new eB(Ta(a.path),d,{includeMetadataChanges:!0,_a:!0});return Xw(s,h)}(await wa(t),t.asyncQueue,e,r,n)),n.promise}function SP(t,e){const r=new Cr;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const a=await Rh(A,s,!0),o=new sT(s,a.Ts),c=o.ma(a.documents),d=o.applyChanges(c,!1);i.resolve(d.snapshot)}catch(a){const o=Ra(a,`Failed to execute query '${s} against cache`);i.reject(o)}}(await Na(t),e,r)),r.promise}function gT(t,e,r={}){const n=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,o,c){const d=new Df({next:f=>{d.Za(),i.enqueueAndForget(()=>Yw(s,h)),f.fromCache&&o.source==="server"?c.reject(new Y(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new eB(a,d,{includeMetadataChanges:!0,_a:!0});return Xw(s,h)}(await wa(t),t.asyncQueue,e,r,n)),n.promise}function kP(t,e,r){const n=new Cr;return t.asyncQueue.enqueueAndForget(async()=>{try{const A=await hT(t);n.resolve(async function(i,a,o){var c;const d=me(i),{request:h,ut:f,parent:w}=C1(d.serializer,Wb(a),o);d.connection.Fo||delete h.parent;const y=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,w,h,1)).filter(E=>!!E.result);Le(y.length===1);const B=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(B).reduce((E,x)=>(E[f[x]]=B[x],E),{})}(A,e,r))}catch(A){n.reject(A)}}),n.promise}function RP(t,e){const r=new Df(e);return t.asyncQueue.enqueueAndForget(async()=>function(A,s){me(A).Y_.add(s),s.next()}(await wa(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(A,s){me(A).Y_.delete(s)}(await wa(t),r))}}function NP(t,e,r,n){const A=function(i,a){let o;return o=typeof i=="string"?h1().encode(i):i,function(d,h){return new _P(d,h)}(function(d,h){if(d instanceof Uint8Array)return Xx(d,h);if(d instanceof ArrayBuffer)return Xx(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(o),a)}(r,eu(e));t.asyncQueue.enqueueAndForget(async()=>{CP(await aB(t),A,n)})}function DP(t,e){return t.asyncQueue.enqueue(async()=>function(n,A){const s=me(n);return s.persistence.runTransaction("Get named query","readonly",i=>s.Gr.getNamedQuery(i,A))}(await Na(t),e))}function PP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,A){const s=me(n),i=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",o=>i.getFieldIndexes(o).next(c=>function(h,f,w,y,B){h=[...h],f=[...f],h.sort(w),f.sort(w);const E=h.length,x=f.length;let m=0,I=0;for(;m<x&&I<E;){const F=w(h[I],f[m]);F<0?B(h[I++]):F>0?y(f[m++]):(m++,I++)}for(;m<x;)y(f[m++]);for(;I<E;)B(h[I++])}(c,A,MN,d=>{a.push(i.addFieldIndex(o,d))},d=>{a.push(i.deleteFieldIndex(o,d))})).next(()=>j.waitFor(a)))}(await Na(t),e))}function LP(t,e){return t.asyncQueue.enqueue(async()=>function(n,A){me(n).ss.zi=A}(await Na(t),e))}function jP(t){return t.asyncQueue.enqueue(async()=>function(r){const n=me(r),A=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",s=>A.deleteAllFieldIndexes(s))}(await Na(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t,e,r){if(!r)throw new Y(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mT(t,e,r,n){if(e===!0&&n===!0)throw new Y(H.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function eC(t){if(!ve.isDocumentKey(t))throw new Y(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tC(t){if(ve.isDocumentKey(t))throw new Y(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Se()}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Lf(t);throw new Y(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function wT(t,e){if(e<=0)throw new Y(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,A){return n.timeoutSeconds===A.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ru{constructor(e,r,n,A){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new vb;switch(n.type){case"firstParty":return new NN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Y(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=Zx.get(r);n&&(Z("ComponentProvider","Removing Datastore"),Zx.delete(r),n.terminate())}(this),Promise.resolve()}}function BT(t,e,r,n={}){var A;const s=(t=st(t,ru))._getSettings(),i=`${e}:${r}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&Cn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),n.mockUserToken){let a,o;if(typeof n.mockUserToken=="string")a=n.mockUserToken,o=vr.MOCK_USER;else{a=AR(n.mockUserToken,(A=t._app)===null||A===void 0?void 0:A.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Y(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new vr(c)}t._authCredentials=new SN(new yb(a,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ir(this.firestore,e,this._query)}}class er{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}}class Gn extends Ir{constructor(e,r,n){super(e,r,Ta(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new ve(e))}withConverter(e){return new Gn(this.firestore,e,this._path)}}function Wm(t,e,...r){if(t=Tt(t),lB("collection","path",e),t instanceof ru){const n=ct.fromString(e,...r);return tC(n),new Gn(t,null,n)}{if(!(t instanceof er||t instanceof Gn))throw new Y(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ct.fromString(e,...r));return tC(n),new Gn(t.firestore,null,n)}}function MP(t,e){if(t=st(t,ru),lB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ir(t,null,function(n){return new HA(ct.emptyPath(),n)}(e))}function Yn(t,e,...r){if(t=Tt(t),arguments.length===1&&(e=Cw.newId()),lB("doc","path",e),t instanceof ru){const n=ct.fromString(e,...r);return eC(n),new er(t,null,new ve(n))}{if(!(t instanceof er||t instanceof Gn))throw new Y(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ct.fromString(e,...r));return eC(n),new er(t.firestore,t instanceof Gn?t.converter:null,new ve(n))}}function OP(t,e){return t=Tt(t),e=Tt(e),(t instanceof er||t instanceof Gn)&&(e instanceof er||e instanceof Gn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function cB(t,e){return t=Tt(t),e=Tt(e),t instanceof Ir&&e instanceof Ir&&t.firestore===e.firestore&&qc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zw(this,"async_queue_retry"),this.Vu=()=>{const n=Md();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Md();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Md();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ei(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const A=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(n);throw ir("INTERNAL UNHANDLED ERROR: ",A),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const A=Jw.createAndSchedule(this,e,r,n,s=>this.yu(s));return this.Tu.push(A),A}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function qm(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const A=r;for(const s of n)if(s in A&&typeof A[s]=="function")return!0;return!1}(t,["next","error","complete"])}class yT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=-1;class Et extends ru{constructor(e,r,n,A){super(e,r,n,A),this.type="firestore",this._queue=new nC,this._persistenceKey=(A==null?void 0:A.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nC(e),this._firestoreClient=void 0,await e}}}function VP(t,e,r){r||(r="(default)");const n=zc(t,"firestore");if(n.isInitialized(r)){const A=n.getImmediate({identifier:r}),s=n.getOptions(r);if(Ls(s,e))return A;throw new Y(H.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y(H.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function vT(t,e){const r=typeof t=="object"?t:vw(),n=typeof t=="string"?t:e||"(default)",A=zc(r,"firestore").getImmediate({identifier:n});if(!A._initialized){const s=rR("firestore");s&&BT(A,...s)}return A}function zt(t){if(t._terminated)throw new Y(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xT(t),t._firestoreClient}function xT(t){var e,r,n;const A=t._freezeSettings(),s=function(a,o,c,d){return new h4(a,o,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,pT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,A);t._componentsProvider||!((r=A.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=A.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:A.localCache._offlineComponentProvider,_online:A.localCache._onlineComponentProvider}),t._firestoreClient=new TP(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const o=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(o),_online:o}}(t._componentsProvider))}function KP(t,e){Cn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return CT(t,zs.provider,{build:n=>new iB(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function GP(t){Cn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();CT(t,zs.provider,{build:r=>new cT(r,e.cacheSizeBytes)})}function CT(t,e,r){if((t=st(t,Et))._firestoreClient||t._terminated)throw new Y(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y(H.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},xT(t)}function zP(t){if(t._initialized&&!t._terminated)throw new Y(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!AA.D())return Promise.resolve();const A=n+"main";await AA.delete(A)}(Vw(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function $P(t){return function(r){const n=new Cr;return r.asyncQueue.enqueueAndForget(async()=>dP(await aB(r),n)),n.promise}(zt(t=st(t,Et)))}function WP(t){return FP(zt(t=st(t,Et)))}function qP(t){return QP(zt(t=st(t,Et)))}function JP(t){return gN(t.app,"firestore",t._databaseId.database),t._delete()}function XP(t,e){const r=zt(t=st(t,Et)),n=new yT;return NP(r,t._databaseId,e,n),n}function YP(t,e){return DP(zt(t=st(t,Et)),e).then(r=>r?new Ir(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class IT{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(Xt.fromBase64String(e))}catch(r){throw new Y(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new $s(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Y(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function ZP(){return new ni("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Y(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Y(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,A){if(n.length!==A.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==A[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=/^__.*__$/;class tL{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new KA(e,this.data,this.fieldMask,r,this.fieldTransforms):new Fa(e,this.data,r,this.fieldTransforms)}}class _T{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new KA(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function ET(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class Mf{constructor(e,r,n,A,s,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=A,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Mf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),A=this.Fu({path:n,xu:!1});return A.Ou(e),A}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),A=this.Fu({path:n,xu:!1});return A.vu(),A}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ET(this.Cu)&&eL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rL{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||eu(e)}Qu(e,r,n,A=!1){return new Mf({Cu:e,methodName:r,qu:n,path:Pt.emptyPath(),xu:!1,ku:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zi(t){const e=t._freezeSettings(),r=eu(t._databaseId);return new rL(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Of(t,e,r,n,A,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,r,A);mB("Data must be an object, but it was:",i,n);const a=FT(n,i);let o,c;if(s.merge)o=new ln(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Uc(e,h,r);if(!i.contains(f))throw new Y(H.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);UT(d,f)||d.push(f)}o=new ln(d),c=i.fieldTransforms.filter(h=>o.covers(h.field))}else o=null,c=i.fieldTransforms;return new tL(new Sr(a),o,c)}class Au extends Ai{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Au}}function bT(t,e,r){return new Mf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uB extends Ai{_toFieldTransform(e){return new Xc(e.path,new ca)}isEqual(e){return e instanceof uB}}class dB extends Ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=bT(this,e,!0),n=this.Ku.map(s=>eo(s,r)),A=new Oi(n);return new Xc(e.path,A)}isEqual(e){return e instanceof dB&&Ls(this.Ku,e.Ku)}}class hB extends Ai{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=bT(this,e,!0),n=this.Ku.map(s=>eo(s,r)),A=new Hi(n);return new Xc(e.path,A)}isEqual(e){return e instanceof hB&&Ls(this.Ku,e.Ku)}}class fB extends Ai{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new ua(e.serializer,n1(e.serializer,this.$u));return new Xc(e.path,r)}isEqual(e){return e instanceof fB&&this.$u===e.$u}}function gB(t,e,r,n){const A=t.Qu(1,e,r);mB("Data must be an object, but it was:",A,n);const s=[],i=Sr.empty();ti(n,(o,c)=>{const d=Hf(e,o,r);c=Tt(c);const h=A.Nu(d);if(c instanceof Au)s.push(d);else{const f=eo(c,h);f!=null&&(s.push(d),i.set(d,f))}});const a=new ln(s);return new _T(i,a,A.fieldTransforms)}function pB(t,e,r,n,A,s){const i=t.Qu(1,e,r),a=[Uc(e,n,r)],o=[A];if(s.length%2!=0)throw new Y(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Uc(e,s[f])),o.push(s[f+1]);const c=[],d=Sr.empty();for(let f=a.length-1;f>=0;--f)if(!UT(c,a[f])){const w=a[f];let y=o[f];y=Tt(y);const B=i.Nu(w);if(y instanceof Au)c.push(w);else{const E=eo(y,B);E!=null&&(c.push(w),d.set(w,E))}}const h=new ln(c);return new _T(d,h,i.fieldTransforms)}function TT(t,e,r,n=!1){return eo(r,t.Qu(n?4:3,e))}function eo(t,e){if(QT(t=Tt(t)))return mB("Unsupported field value:",e,t),FT(t,e);if(t instanceof Ai)return function(n,A){if(!ET(A.Cu))throw A.Bu(`${n._methodName}() can only be used with update() and set()`);if(!A.path)throw A.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(A);s&&A.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,A){const s=[];let i=0;for(const a of n){let o=eo(a,A.Lu(i));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,A){if((n=Tt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return n1(A.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Gt.fromDate(n);return{timestampValue:da(A.serializer,s)}}if(n instanceof Gt){const s=new Gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:da(A.serializer,s)}}if(n instanceof jf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof $s)return{bytesValue:p1(A.serializer,n._byteString)};if(n instanceof er){const s=A.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw A.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Dw(n.firestore._databaseId||A.databaseId,n._key.path)}}if(n instanceof nu)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(o=>{if(typeof o!="number")throw a.Bu("VectorValues must only contain numeric values.");return Qw(a.serializer,o)})}}}}}}(n,A);throw A.Bu(`Unsupported field value: ${Lf(n)}`)}(t,e)}function FT(t,e){const r={};return Nb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(t,(n,A)=>{const s=eo(A,e.Mu(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function QT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof jf||t instanceof $s||t instanceof er||t instanceof Ai||t instanceof nu)}function mB(t,e,r){if(!QT(r)||!function(A){return typeof A=="object"&&A!==null&&(Object.getPrototypeOf(A)===Object.prototype||Object.getPrototypeOf(A)===null)}(r)){const n=Lf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Uc(t,e,r){if((e=Tt(e))instanceof ni)return e._internalPath;if(typeof e=="string")return Hf(t,e);throw Lh("Field path arguments must be of type string or ",t,!1,void 0,r)}const nL=new RegExp("[~\\*/\\[\\]]");function Hf(t,e,r){if(e.search(nL)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ni(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Lh(t,e,r,n,A){const s=n&&!n.isEmpty(),i=A!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let o="";return(s||i)&&(o+=" (found",s&&(o+=` in field ${n}`),i&&(o+=` in document ${A}`),o+=")"),new Y(H.INVALID_ARGUMENT,a+t+o)}function UT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,r,n,A,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=A,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Vf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class AL extends Sc{data(){return super.data()}}function Vf(t,e){return typeof e=="string"?Hf(t,e):e instanceof ni?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wB{}class Da extends wB{}function Jm(t,e,...r){let n=[];e instanceof wB&&n.push(e),n=n.concat(r),function(s){const i=s.filter(o=>o instanceof to).length,a=s.filter(o=>o instanceof Pa).length;if(i>1||i>0&&a>0)throw new Y(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const A of n)t=A._apply(t);return t}class Pa extends Da{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Pa(e,r,n)}_apply(e){const r=this._parse(e);return RT(e._query,r),new Ir(e.firestore,e.converter,Dm(e._query,r))}_parse(e){const r=Zi(e.firestore);return function(s,i,a,o,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){sC(h,d);const w=[];for(const y of h)w.push(AC(o,s,y));f={arrayValue:{values:w}}}else f=AC(o,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||sC(h,d),f=TT(a,i,h,d==="in"||d==="not-in");return ut.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function sL(t,e,r){const n=e,A=Vf("where",t);return Pa._create(A,n,r)}class to extends wB{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new to(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:vt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(A,s){let i=A;const a=s.getFlattenedFilters();for(const o of a)RT(i,o),i=Dm(i,o)}(e._query,r),new Ir(e.firestore,e.converter,Dm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function iL(...t){return t.forEach(e=>NT("or",e)),to._create("or",t)}function oL(...t){return t.forEach(e=>NT("and",e)),to._create("and",t)}class Kf extends Da{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Kf(e,r)}_apply(e){const r=function(A,s,i){if(A.startAt!==null)throw new Y(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(A.endAt!==null)throw new Y(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tc(s,i)}(e._query,this._field,this._direction);return new Ir(e.firestore,e.converter,function(A,s){const i=A.explicitOrderBy.concat([s]);return new HA(A.path,A.collectionGroup,i,A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e._query,r))}}function aL(t,e="asc"){const r=e,n=Vf("orderBy",t);return Kf._create(n,r)}class su extends Da{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new su(e,r,n)}_apply(e){return new Ir(e.firestore,e.converter,Th(e._query,this._limit,this._limitType))}}function lL(t){return wT("limit",t),su._create("limit",t,"F")}function cL(t){return wT("limitToLast",t),su._create("limitToLast",t,"L")}class iu extends Da{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new iu(e,r,n)}_apply(e){const r=kT(e,this.type,this._docOrFields,this._inclusive);return new Ir(e.firestore,e.converter,function(A,s){return new HA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,s,A.endAt)}(e._query,r))}}function uL(...t){return iu._create("startAt",t,!0)}function dL(...t){return iu._create("startAfter",t,!1)}class ou extends Da{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new ou(e,r,n)}_apply(e){const r=kT(e,this.type,this._docOrFields,this._inclusive);return new Ir(e.firestore,e.converter,function(A,s){return new HA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,s)}(e._query,r))}}function hL(...t){return ou._create("endBefore",t,!1)}function fL(...t){return ou._create("endAt",t,!0)}function kT(t,e,r,n){if(r[0]=Tt(r[0]),r[0]instanceof Sc)return function(s,i,a,o,c){if(!o)throw new Y(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Ko(s))if(h.field.isKeyField())d.push(ji(i,o.key));else{const f=o.data.field(h.field);if(_f(f))throw new Y(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const w=h.field.canonicalString();throw new Y(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}d.push(f)}return new Vs(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const A=Zi(t.firestore);return function(i,a,o,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new Y(H.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let y=0;y<d.length;y++){const B=d[y];if(f[y].field.isKeyField()){if(typeof B!="string")throw new Y(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof B}`);if(!Tw(i)&&B.indexOf("/")!==-1)throw new Y(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${B}' contains a slash.`);const E=i.path.child(ct.fromString(B));if(!ve.isDocumentKey(E))throw new Y(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const x=new ve(E);w.push(ji(a,x))}else{const E=TT(o,c,B);w.push(E)}}return new Vs(w,h)}(t._query,t.firestore._databaseId,A,e,r,n)}}function AC(t,e,r){if(typeof(r=Tt(r))=="string"){if(r==="")throw new Y(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tw(e)&&r.indexOf("/")!==-1)throw new Y(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ct.fromString(r));if(!ve.isDocumentKey(n))throw new Y(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ji(t,new ve(n))}if(r instanceof er)return ji(t,r._key);throw new Y(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lf(r)}.`)}function sC(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RT(t,e){const r=function(A,s){for(const i of A)for(const a of i.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Y(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function NT(t,e){if(!(e instanceof Pa||e instanceof to))throw new Y(H.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class BB{convertValue(e,r="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(NA(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return ti(e,(A,s)=>{n[A]=this.convertValue(s,r)}),n}convertVectorValue(e){var r,n,A;const s=(A=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||A===void 0?void 0:A.map(i=>Ht(i.doubleValue));return new nu(s)}convertGeoPoint(e){return new jf(Ht(e.latitude),Ht(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Ef(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const r=RA(e);return new Gt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ct.fromString(e);Le(b1(n));const A=new Ms(n.get(1),n.get(3)),s=new ve(n.popFirst(5));return A.isEqual(r)||ir(`Document ${s} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class gL extends BB{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){return new Ba("sum",Uc("sum",t))}function mL(t){return new Ba("avg",Uc("average",t))}function DT(){return new Ba("count")}function wL(t,e){var r,n;return t instanceof Ba&&e instanceof Ba&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function BL(t,e){return cB(t.query,e.query)&&Ls(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zi extends Sc{constructor(e,r,n,A,s,i){super(e,r,n,A,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Vf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ql extends zi{data(e={}){return super.data(e)}}class $i{constructor(e,r,n,A){this._firestore=e,this._userDataWriter=r,this._snapshot=A,this.metadata=new ms(A.hasPendingWrites,A.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ql(this._firestore,this._userDataWriter,n.key,n,new ms(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Y(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(A,s){if(A._snapshot.oldDocs.isEmpty()){let i=0;return A._snapshot.docChanges.map(a=>{const o=new ql(A._firestore,A._userDataWriter,a.doc.key,a.doc,new ms(A._snapshot.mutatedKeys.has(a.doc.key),A._snapshot.fromCache),A.query.converter);return a.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}{let i=A._snapshot.oldDocs;return A._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const o=new ql(A._firestore,A._userDataWriter,a.doc.key,a.doc,new ms(A._snapshot.mutatedKeys.has(a.doc.key),A._snapshot.fromCache),A.query.converter);let c=-1,d=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),d=i.indexOf(a.doc.key)),{type:yL(a.type),doc:o,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}function vL(t,e){return t instanceof zi&&e instanceof zi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $i&&e instanceof $i&&t._firestore===e._firestore&&cB(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){t=st(t,er);const e=st(t.firestore,Et);return fT(zt(e),t._key).then(r=>yB(e,t,r))}class si extends BB{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,r)}}function CL(t){t=st(t,er);const e=st(t.firestore,Et),r=zt(e),n=new si(e);return UP(r,t._key).then(A=>new zi(e,n,t._key,A,new ms(A!==null&&A.hasLocalMutations,!0),t.converter))}function IL(t){t=st(t,er);const e=st(t.firestore,Et);return fT(zt(e),t._key,{source:"server"}).then(r=>yB(e,t,r))}function PT(t){t=st(t,Ir);const e=st(t.firestore,Et),r=zt(e),n=new si(e);return ST(t._query),gT(r,t._query).then(A=>new $i(e,n,t,A))}function _L(t){t=st(t,Ir);const e=st(t.firestore,Et),r=zt(e),n=new si(e);return SP(r,t._query).then(A=>new $i(e,n,t,A))}function EL(t){t=st(t,Ir);const e=st(t.firestore,Et),r=zt(e),n=new si(e);return gT(r,t._query,{source:"server"}).then(A=>new $i(e,n,t,A))}function Od(t,e,r){t=st(t,er);const n=st(t.firestore,Et),A=Gf(t.converter,e,r);return La(n,[Of(Zi(n),"setDoc",t._key,A,t.converter!==null,r).toMutation(t._key,Kt.none())])}function bL(t,e,r,...n){t=st(t,er);const A=st(t.firestore,Et),s=Zi(A);let i;return i=typeof(e=Tt(e))=="string"||e instanceof ni?pB(s,"updateDoc",t._key,e,r,n):gB(s,"updateDoc",t._key,e),La(A,[i.toMutation(t._key,Kt.exists(!0))])}function LT(t){return La(st(t.firestore,Et),[new Qa(t._key,Kt.none())])}function TL(t,e){const r=st(t.firestore,Et),n=Yn(t),A=Gf(t.converter,e);return La(r,[Of(Zi(t.firestore),"addDoc",n._key,A,t.converter!==null,{}).toMutation(n._key,Kt.exists(!1))]).then(()=>n)}function Hd(t,...e){var r,n,A;t=Tt(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||qm(e[i])||(s=e[i],i++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(qm(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(A=h.complete)===null||A===void 0?void 0:A.bind(h)}let o,c,d;if(t instanceof er)c=st(t.firestore,Et),d=Ta(t._key.path),o={next:h=>{e[i]&&e[i](yB(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=st(t,Ir);c=st(h.firestore,Et),d=h._query;const f=new si(c);o={next:w=>{e[i]&&e[i](new $i(c,f,h,w))},error:e[i+1],complete:e[i+2]},ST(t._query)}return function(f,w,y,B){const E=new Df(B),x=new eB(w,E,y);return f.asyncQueue.enqueueAndForget(async()=>Xw(await wa(f),x)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>Yw(await wa(f),x))}}(zt(c),d,a,o)}function FL(t,e){return RP(zt(t=st(t,Et)),qm(e)?e:{next:e})}function La(t,e){return function(n,A){const s=new Cr;return n.asyncQueue.enqueueAndForget(async()=>aP(await aB(n),A,s)),s.promise}(zt(t),e)}function yB(t,e,r){const n=r.docs.get(e._key),A=new si(t);return new zi(t,A,e._key,n,new ms(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t){return jT(t,{count:DT()})}function jT(t,e){const r=st(t.firestore,Et),n=zt(r),A=Rb(e,(s,i)=>new c1(i,s.aggregateType,s._internalFieldPath));return kP(n,t._query,A).then(s=>function(a,o,c){const d=new si(a);return new IT(o,d,c)}(r,t,s))}class UL{constructor(e){this.kind="memory",this._onlineComponentProvider=zs.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Gs.provider}toJSON(){return{kind:this.kind}}}class SL{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=MT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class kL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Gs.provider}toJSON(){return{kind:this.kind}}}class RL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new IP(e)}}toJSON(){return{kind:this.kind}}}function NL(){return new kL}function DL(t){return new RL(t==null?void 0:t.cacheSizeBytes)}function PL(t){return new UL(t)}function LL(t){return new SL(t)}class jL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zs.provider,this._offlineComponentProvider={build:r=>new iB(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class ML{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=zs.provider,this._offlineComponentProvider={build:r=>new cT(r,e==null?void 0:e.cacheSizeBytes)}}}function MT(t){return new jL(t==null?void 0:t.forceOwnership)}function OL(){return new ML}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Zi(e)}set(e,r,n){this._verifyNotCommitted();const A=as(e,this._firestore),s=Gf(A.converter,r,n),i=Of(this._dataReader,"WriteBatch.set",A._key,s,A.converter!==null,n);return this._mutations.push(i.toMutation(A._key,Kt.none())),this}update(e,r,n,...A){this._verifyNotCommitted();const s=as(e,this._firestore);let i;return i=typeof(r=Tt(r))=="string"||r instanceof ni?pB(this._dataReader,"WriteBatch.update",s._key,r,n,A):gB(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,Kt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=as(e,this._firestore);return this._mutations=this._mutations.concat(new Qa(r._key,Kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function as(t,e){if((t=Tt(t)).firestore!==e)throw new Y(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Zi(r)}get(r){const n=as(r,this._firestore),A=new gL(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Se();const i=s[0];if(i.isFoundDocument())return new Sc(this._firestore,A,i.key,i,n.converter);if(i.isNoDocument())return new Sc(this._firestore,A,n._key,null,n.converter);throw Se()})}set(r,n,A){const s=as(r,this._firestore),i=Gf(s.converter,n,A),a=Of(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,A);return this._transaction.set(s._key,a),this}update(r,n,A,...s){const i=as(r,this._firestore);let a;return a=typeof(n=Tt(n))=="string"||n instanceof ni?pB(this._dataReader,"Transaction.update",i._key,n,A,s):gB(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(r){const n=as(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=as(e,this._firestore),n=new si(this._firestore);return super.get(e).then(A=>new zi(this._firestore,n,r._key,A._document,new ms(!1,!1),r.converter))}}function VL(t,e,r){t=st(t,Et);const n=Object.assign(Object.assign({},HL),r);return function(s){if(s.maxAttempts<1)throw new Y(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,i,a){const o=new Cr;return s.asyncQueue.enqueueAndForget(async()=>{const c=await hT(s);new bP(s.asyncQueue,c,a,i,o).au()}),o.promise}(zt(t),A=>e(new HT(t,A)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(){return new Au("deleteField")}function GL(){return new uB("serverTimestamp")}function zL(...t){return new dB("arrayUnion",t)}function $L(...t){return new hB("arrayRemove",t)}function WL(t){return new fB("increment",t)}function qL(t){return new nu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t){return zt(t=st(t,Et)),new OT(t,e=>La(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(t,e){const r=zt(t=st(t,Et));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return Cn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(s){const i=typeof s=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new Y(H.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,a=[];if(Array.isArray(i.indexes))for(const o of i.indexes){const c=iC(o,"collectionGroup"),d=[];if(Array.isArray(o.fields))for(const h of o.fields){const f=Hf("setIndexConfiguration",iC(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Qi(f,2)):h.order==="ASCENDING"?d.push(new Qi(f,0)):h.order==="DESCENDING"&&d.push(new Qi(f,1))}a.push(new ia(ia.UNKNOWN_ID,c,d,oa.empty()))}return a}(e);return PP(r,n)}function iC(t,e){if(typeof t[e]!="string")throw new Y(H.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function XL(t){var e;t=st(t,Et);const r=oC.get(t);if(r)return r;if(((e=zt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new KT(t);return oC.set(t,n),n}function YL(t){GT(t,!0)}function ZL(t){GT(t,!1)}function ej(t){jP(zt(t._firestore)).then(e=>Z("deleting all persistent cache indexes succeeded")).catch(e=>Cn("deleting all persistent cache indexes failed",e))}function GT(t,e){LP(zt(t._firestore),e).then(r=>Z(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>Cn(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const oC=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(t){var e;const r=(e=zt(st(t.firestore,Et))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Qf(r,zr(t._query))._t}function rj(t,e){var r;const n=Rb(e,(s,i)=>new c1(i,s.aggregateType,s._internalFieldPath)),A=(r=zt(st(t.firestore,Et))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return A===void 0?null:C1(A,Wb(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return vB.instance.onExistenceFilterMismatch(e)}}class vB{constructor(){this.Uu=new Map}static get instance(){return Wu||(Wu=new vB,function(r){if(Fh)throw new Error("a TestingHooksSpi instance is already set");Fh=r}(Wu)),Wu}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Wu=null;(function(e,r=!0){(function(A){ba=A})(Ea),Aa(new Li("firestore",(n,{instanceIdentifier:A,options:s})=>{const i=n.getProvider("app").getImmediate(),a=new Et(new kN(n.getProvider("auth-internal")),new DN(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ms(c.options.projectId,d)}(i,A),i);return s=Object.assign({useFetchStreams:r},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ss(Jv,"4.7.3",e),Ss(Jv,"4.7.3","esm2017")})();const Aj=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:BB,AggregateField:Ba,AggregateQuerySnapshot:IT,Bytes:$s,CACHE_SIZE_UNLIMITED:HP,CollectionReference:Gn,DocumentReference:er,DocumentSnapshot:zi,FieldPath:ni,FieldValue:Ai,Firestore:Et,FirestoreError:Y,GeoPoint:jf,LoadBundleTask:yT,PersistentCacheIndexManager:KT,Query:Ir,QueryCompositeFilterConstraint:to,QueryConstraint:Da,QueryDocumentSnapshot:ql,QueryEndAtConstraint:ou,QueryFieldFilterConstraint:Pa,QueryLimitConstraint:su,QueryOrderByConstraint:Kf,QuerySnapshot:$i,QueryStartAtConstraint:iu,SnapshotMetadata:ms,Timestamp:Gt,Transaction:HT,VectorValue:nu,WriteBatch:OT,_AutoId:Cw,_ByteString:Xt,_DatabaseId:Ms,_DocumentKey:ve,_EmptyAppCheckTokenProvider:PN,_EmptyAuthCredentialsProvider:vb,_FieldPath:Pt,_TestingHooks:nj,_cast:st,_debugAssert:UN,_internalAggregationQueryToProtoRunAggregationQueryRequest:rj,_internalQueryToProtoQueryTarget:tj,_isBase64Available:u4,_logWarn:Cn,_validateIsNotUsedTogether:mT,addDoc:TL,aggregateFieldEqual:wL,aggregateQuerySnapshotEqual:BL,and:oL,arrayRemove:$L,arrayUnion:zL,average:mL,clearIndexedDbPersistence:zP,collection:Wm,collectionGroup:MP,connectFirestoreEmulator:BT,count:DT,deleteAllPersistentCacheIndexes:ej,deleteDoc:LT,deleteField:KL,disableNetwork:qP,disablePersistentCacheIndexAutoCreation:ZL,doc:Yn,documentId:ZP,enableIndexedDbPersistence:KP,enableMultiTabIndexedDbPersistence:GP,enableNetwork:WP,enablePersistentCacheIndexAutoCreation:YL,endAt:fL,endBefore:hL,ensureFirestoreConfigured:zt,executeWrite:La,getAggregateFromServer:jT,getCountFromServer:QL,getDoc:xL,getDocFromCache:CL,getDocFromServer:IL,getDocs:PT,getDocsFromCache:_L,getDocsFromServer:EL,getFirestore:vT,getPersistentCacheIndexManager:XL,increment:WL,initializeFirestore:VP,limit:lL,limitToLast:cL,loadBundle:XP,memoryEagerGarbageCollector:NL,memoryLocalCache:PL,memoryLruGarbageCollector:DL,namedQuery:YP,onSnapshot:Hd,onSnapshotsInSync:FL,or:iL,orderBy:aL,persistentLocalCache:LL,persistentMultipleTabManager:OL,persistentSingleTabManager:MT,query:Jm,queryEqual:cB,refEqual:OP,runTransaction:VL,serverTimestamp:GL,setDoc:Od,setIndexConfiguration:JL,setLogLevel:QN,snapshotEqual:vL,startAfter:dL,startAt:uL,sum:pL,terminate:JP,updateDoc:bL,vector:qL,waitForPendingWrites:$P,where:sL,writeBatch:VT},Symbol.toStringTag,{value:"Module"}));function xB(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,n=Object.getOwnPropertySymbols(t);A<n.length;A++)e.indexOf(n[A])<0&&Object.prototype.propertyIsEnumerable.call(t,n[A])&&(r[n[A]]=t[n[A]]);return r}function zT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sj=zT,$T=new Kc("auth","Firebase",zT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=new Bw("@firebase/auth");function ij(t,...e){jh.logLevel<=lt.WARN&&jh.warn(`Auth (${Ea}): ${t}`,...e)}function Vd(t,...e){jh.logLevel<=lt.ERROR&&jh.error(`Auth (${Ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw CB(t,...e)}function iA(t,...e){return CB(t,...e)}function WT(t,e,r){const n=Object.assign(Object.assign({},sj()),{[e]:r});return new Kc("auth","Firebase",n).create(e,{appName:t.name})}function ks(t){return WT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CB(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return $T.create(t,...e)}function qe(t,e,...r){if(!t)throw CB(e,...r)}function CA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vd(e),new Error(e)}function DA(t,e){t||CA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oj(){return aC()==="http:"||aC()==="https:"}function aC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oj()||aR()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,r){this.shortDelay=e,this.longDelay=r,DA(r>e,"Short delay should be less than long delay!"),this.isMobile=sR()||lR()}get(){return aj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(t,e){DA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;CA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;CA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;CA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new au(3e4,6e4);function ro(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ii(t,e,r,n,A={}){return JT(t,A,async()=>{let s={},i={};n&&(e==="GET"?i=n:s={body:JSON.stringify(n)});const a=Gc(Object.assign({key:t.config.apiKey},i)).slice(1),o=await t._getAdditionalHeaders();o["Content-Type"]="application/json",t.languageCode&&(o["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:o},s);return oR()||(c.referrerPolicy="no-referrer"),qT.fetch()(XT(t,t.config.apiHost,r,a),c)})}async function JT(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},cj),e);try{const A=new hj(t),s=await Promise.race([r(),A.promise]);A.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw qu(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const a=s.ok?i.errorMessage:i.error.message,[o,c]=a.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(t,"credential-already-in-use",i);if(o==="EMAIL_EXISTS")throw qu(t,"email-already-in-use",i);if(o==="USER_DISABLED")throw qu(t,"user-disabled",i);const d=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw WT(t,d,c);$n(t,d)}}catch(A){if(A instanceof OA)throw A;$n(t,"network-request-failed",{message:String(A)})}}async function zf(t,e,r,n,A={}){const s=await ii(t,e,r,n,A);return"mfaPendingCredential"in s&&$n(t,"multi-factor-auth-required",{_serverResponse:s}),s}function XT(t,e,r,n){const A=`${e}${r}?${n}`;return t.config.emulator?IB(t.config,A):`${t.config.apiScheme}://${A}`}function dj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(iA(this.auth,"network-request-failed")),uj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qu(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const A=iA(t,e,n);return A.customData._tokenResponse=r,A}function lC(t){return t!==void 0&&t.enterprise!==void 0}class fj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return dj(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function gj(t,e){return ii(t,"GET","/v2/recaptchaConfig",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){return ii(t,"POST","/v1/accounts:delete",e)}async function YT(t,e){return ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mj(t,e=!1){const r=Tt(t),n=await r.getIdToken(e),A=_B(n);qe(A&&A.exp&&A.auth_time&&A.iat,r.auth,"internal-error");const s=typeof A.firebase=="object"?A.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:A,token:n,authTime:Jl(tp(A.auth_time)),issuedAtTime:Jl(tp(A.iat)),expirationTime:Jl(tp(A.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tp(t){return Number(t)*1e3}function _B(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{const A=nb(r);return A?JSON.parse(A):(Vd("Failed to decode base64 JWT payload"),null)}catch(A){return Vd("Caught error parsing JWT payload as JSON",A==null?void 0:A.toString()),null}}function cC(t){const e=_B(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof OA&&wj(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function wj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const A=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t){var e;const r=t.auth,n=await t.getIdToken(),A=await kc(t,YT(r,{idToken:n}));qe(A==null?void 0:A.users.length,r,"internal-error");const s=A.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ZT(s.providerUserInfo):[],a=vj(t.providerData,i),o=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=o?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ym(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function yj(t){const e=Tt(t);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vj(t,e){return[...t.filter(n=>!e.some(A=>A.providerId===n.providerId)),...e]}function ZT(t){return t.map(e=>{var{providerId:r}=e,n=xB(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e){const r=await JT(t,{},async()=>{const n=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:s}=t.config,i=XT(t,A,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qT.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Cj(t,e){return ii(t,"POST","/v2/accounts:revokeToken",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const r=cC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:A,expiresIn:s}=await xj(e,r);this.updateTokensAndExpiration(n,A,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:A,expirationTime:s}=r,i=new zo;return n&&(qe(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),A&&(qe(typeof A=="string","internal-error",{appName:e}),i.accessToken=A),s&&(qe(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return CA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class IA{constructor(e){var{uid:r,auth:n,stsTokenManager:A}=e,s=xB(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ym(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await kc(this,this.stsTokenManager.getToken(this.auth,e));return qe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return mj(this,e)}reload(){return yj(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new IA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Mh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vA(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await kc(this,pj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,A,s,i,a,o,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(A=r.email)!==null&&A!==void 0?A:void 0,w=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,y=(i=r.photoURL)!==null&&i!==void 0?i:void 0,B=(a=r.tenantId)!==null&&a!==void 0?a:void 0,E=(o=r._redirectEventId)!==null&&o!==void 0?o:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,m=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:F,isAnonymous:R,providerData:U,stsTokenManager:v}=r;qe(I&&v,e,"internal-error");const C=zo.fromJSON(this.name,v);qe(typeof I=="string",e,"internal-error"),YA(h,e.name),YA(f,e.name),qe(typeof F=="boolean",e,"internal-error"),qe(typeof R=="boolean",e,"internal-error"),YA(w,e.name),YA(y,e.name),YA(B,e.name),YA(E,e.name),YA(x,e.name),YA(m,e.name);const _=new IA({uid:I,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:R,photoURL:y,phoneNumber:w,tenantId:B,stsTokenManager:C,createdAt:x,lastLoginAt:m});return U&&Array.isArray(U)&&(_.providerData=U.map(Q=>Object.assign({},Q))),E&&(_._redirectEventId=E),_}static async _fromIdTokenResponse(e,r,n=!1){const A=new zo;A.updateFromServerResponse(r);const s=new IA({uid:r.localId,auth:e,stsTokenManager:A,isAnonymous:n});return await Mh(s),s}static async _fromGetAccountInfoResponse(e,r,n){const A=r.users[0];qe(A.localId!==void 0,"internal-error");const s=A.providerUserInfo!==void 0?ZT(A.providerUserInfo):[],i=!(A.email&&A.passwordHash)&&!(s!=null&&s.length),a=new zo;a.updateFromIdToken(n);const o=new IA({uid:A.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:s,metadata:new Ym(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!(s!=null&&s.length)};return Object.assign(o,c),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Map;function _A(t){DA(t instanceof Function,"Expected a class definition");let e=uC.get(t);return e?(DA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}eF.type="NONE";const dC=eF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t,e,r){return`firebase:${t}:${e}:${r}`}class $o{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:A,name:s}=this.auth;this.fullUserKey=Kd(this.userKey,A.apiKey,s),this.fullPersistenceKey=Kd("persistence",A.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?IA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new $o(_A(dC),e,n);const A=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=A[0]||_A(dC);const i=Kd(n,e.config.apiKey,e.name);let a=null;for(const c of r)try{const d=await c._get(i);if(d){const h=IA._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const o=A.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new $o(s,e,n):(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(r.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new $o(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iF(e))return"Blackberry";if(oF(e))return"Webos";if(rF(e))return"Safari";if((e.includes("chrome/")||nF(e))&&!e.includes("edge/"))return"Chrome";if(sF(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function tF(t=gr()){return/firefox\//i.test(t)}function rF(t=gr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nF(t=gr()){return/crios\//i.test(t)}function AF(t=gr()){return/iemobile/i.test(t)}function sF(t=gr()){return/android/i.test(t)}function iF(t=gr()){return/blackberry/i.test(t)}function oF(t=gr()){return/webos/i.test(t)}function EB(t=gr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ij(t=gr()){var e;return EB(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _j(){return cR()&&document.documentMode===10}function aF(t=gr()){return EB(t)||sF(t)||oF(t)||iF(t)||/windows phone/i.test(t)||AF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t,e=[]){let r;switch(t){case"Browser":r=hC(gr());break;case"Worker":r=`${hC(gr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ea}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((i,a)=>{try{const o=e(s);i(o)}catch(o){a(o)}});n.onAbort=r,this.queue.push(n);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const A of r)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bj(t,e={}){return ii(t,"GET","/v2/passwordPolicy",ro(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=6;class Fj{constructor(e){var r,n,A,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:Tj,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(A=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&A!==void 0?A:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,A,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=(r=o.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),o.isValid&&(o.isValid=(n=o.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),o.isValid&&(o.isValid=(A=o.containsLowercaseLetter)!==null&&A!==void 0?A:!0),o.isValid&&(o.isValid=(s=o.containsUppercaseLetter)!==null&&s!==void 0?s:!0),o.isValid&&(o.isValid=(i=o.containsNumericCharacter)!==null&&i!==void 0?i:!0),o.isValid&&(o.isValid=(a=o.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),o}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),A&&(r.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let A=0;A<e.length;A++)n=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,A,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,r,n,A){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fC(this),this.idTokenSubscription=new fC(this),this.beforeStateQueue=new Ej(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$T,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=_A(r)),this._initializationPromise=this.queue(async()=>{var n,A;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((A=this.currentUser)===null||A===void 0?void 0:A.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await YT(this,{idToken:e}),n=await IA._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(vA(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let A=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=A==null?void 0:A._redirectEventId,o=await this.tryRedirectSignIn(e);(!i||i===a)&&(o!=null&&o.user)&&(A=o.user,s=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(A)}catch(i){A=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vA(this.app))return Promise.reject(ks(this));const r=e?Tt(e):null;return r&&qe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vA(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vA(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_A(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bj(this),r=new Fj(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await Cj(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&_A(e)||this._popupRedirectResolver;qe(r,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[_A(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,A){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const o=e.addObserver(r,n,A);return()=>{i=!0,o()}}else{const o=e.addObserver(r);return()=>{i=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const A=await this._getAppCheckToken();return A&&(r["X-Firebase-AppCheck"]=A),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&ij(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function ja(t){return Tt(t)}class fC{constructor(e){this.auth=e,this.observer=null,this.addObserver=pR(r=>this.observer=r)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uj(t){$f=t}function cF(t){return $f.loadJS(t)}function Sj(){return $f.recaptchaEnterpriseScript}function kj(){return $f.gapiScript}function Rj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Nj="recaptcha-enterprise",Dj="NO_RECAPTCHA";class Pj{constructor(e){this.type=Nj,this.auth=ja(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,a)=>{gj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new fj(o);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(o=>{a(o)})})}function A(s,i,a){const o=window.grecaptcha;lC(o)?o.enterprise.ready(()=>{o.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(Dj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{n(this.auth).then(a=>{if(!r&&lC(window.grecaptcha))A(a,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let o=Sj();o.length!==0&&(o+=a),cF(o).then(()=>{A(a,s,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function gC(t,e,r,n=!1){const A=new Pj(t);let s;try{s=await A.verify(r)}catch{s=await A.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function pC(t,e,r,n){var A;if(!((A=t._getRecaptchaConfig())===null||A===void 0)&&A.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await gC(t,e,r,r==="getOobCode");return n(t,s)}else return n(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await gC(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lj(t,e){const r=zc(t,"auth");if(r.isInitialized()){const A=r.getImmediate(),s=r.getOptions();if(Ls(s,e??{}))return A;$n(A,"already-initialized")}return r.initialize({options:e})}function jj(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(_A);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Mj(t,e,r){const n=ja(t);qe(n._canInitEmulator,n,"emulator-config-failed"),qe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const A=!1,s=uF(e),{host:i,port:a}=Oj(e),o=a===null?"":`:${a}`;n.config.emulator={url:`${s}//${i}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:A})}),Hj()}function uF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Oj(t){const e=uF(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(n);if(A){const s=A[1];return{host:s,port:mC(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:mC(i)}}}function mC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Hj(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return CA("not implemented")}_getIdTokenResponse(e){return CA("not implemented")}_linkToIdToken(e,r){return CA("not implemented")}_getReauthenticationResolver(e){return CA("not implemented")}}async function Vj(t,e){return ii(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,e){return zf(t,"POST","/v1/accounts:signInWithPassword",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e){return zf(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}async function zj(t,e){return zf(t,"POST","/v1/accounts:signInWithEmailLink",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends bB{constructor(e,r,n,A=null){super("password",n),this._email=e,this._password=r,this._tenantId=A}static _fromEmailAndPassword(e,r){return new Rc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Rc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pC(e,r,"signInWithPassword",Kj);case"emailLink":return Gj(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pC(e,n,"signUpPassword",Vj);case"emailLink":return zj(e,{idToken:r,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t,e){return zf(t,"POST","/v1/accounts:signInWithIdp",ro(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j="http://localhost";class Wi extends bB{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):$n("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:A}=r,s=xB(r,["providerId","signInMethod"]);if(!n||!A)return null;const i=new Wi(n,A);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return Wo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Wo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Wo(e,r)}buildRequest(){const e={requestUri:$j,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Gc(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qj(t){const e=vl(xl(t)).link,r=e?vl(xl(e)).deep_link_id:null,n=vl(xl(t)).deep_link_id;return(n?vl(xl(n)).link:null)||n||r||e||t}class TB{constructor(e){var r,n,A,s,i,a;const o=vl(xl(e)),c=(r=o.apiKey)!==null&&r!==void 0?r:null,d=(n=o.oobCode)!==null&&n!==void 0?n:null,h=Wj((A=o.mode)!==null&&A!==void 0?A:null);qe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=o.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=o.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=o.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=qj(e);try{return new TB(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.providerId=Ma.PROVIDER_ID}static credential(e,r){return Rc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=TB.parseLink(r);return qe(n,"argument-error"),Rc._fromEmailAndCode(e,n.code,n.tenantId)}}Ma.PROVIDER_ID="password";Ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu extends dF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends lu{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Wi._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return cs.credential(r,n)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends lu{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends lu{constructor(){super("twitter.com")}static credential(e,r){return Wi._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ds.credential(r,n)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,A=!1){const s=await IA._fromIdTokenResponse(e,n,A),i=wC(n);return new ya({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const A=wC(n);return new ya({user:e,providerId:A,_tokenResponse:n,operationType:r})}}function wC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends OA{constructor(e,r,n,A){var s;super(r.code,r.message),this.operationType=n,this.user=A,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,A){return new Oh(e,r,n,A)}}function hF(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(t,s,e,n):s})}async function Jj(t,e,r=!1){const n=await kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ya._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xj(t,e,r=!1){const{auth:n}=t;if(vA(n.app))return Promise.reject(ks(n));const A="reauthenticate";try{const s=await kc(t,hF(n,A,e,t),r);qe(s.idToken,n,"internal-error");const i=_B(s.idToken);qe(i,n,"internal-error");const{sub:a}=i;return qe(t.uid===a,n,"user-mismatch"),ya._forOperation(t,A,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&$n(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t,e,r=!1){if(vA(t.app))return Promise.reject(ks(t));const n="signIn",A=await hF(t,n,e),s=await ya._fromIdTokenResponse(t,n,A);return r||await t._updateCurrentUser(s.user),s}async function Yj(t,e){return fF(ja(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zj(t){const e=ja(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function eM(t,e,r){return vA(t.app)?Promise.reject(ks(t)):Yj(Tt(t),Ma.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Zj(t),n})}function tM(t,e,r,n){return Tt(t).onIdTokenChanged(e,r,n)}function rM(t,e,r){return Tt(t).beforeAuthStateChanged(e,r)}function nM(t,e,r,n){return Tt(t).onAuthStateChanged(e,r,n)}function BC(t){return Tt(t).signOut()}const Hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Hh,"1"),this.storage.removeItem(Hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=1e3,sM=10;class pF extends gF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),A=this.localCache[r];n!==A&&e(r,A,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,a,o)=>{this.notifyListeners(i,o)});return}const n=e.key;r?this.detachListener():this.stopPolling();const A=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);_j()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,sM):A()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const A of Array.from(n))A(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},AM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}pF.type="LOCAL";const iM=pF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF extends gF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}mF.type="SESSION";const wF=mF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(A=>A.isListeningto(e));if(r)return r;const n=new Wf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:A,data:s}=r.data,i=this.handlersMap[A];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:A});const a=Array.from(i).map(async c=>c(r.origin,s)),o=await oM(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:A,response:o})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const c=FB("",20);A.port1.start();const d=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:A,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(i),A.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[A.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return window}function lM(t){oA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(){return typeof oA().WorkerGlobalScope<"u"&&typeof oA().importScripts=="function"}async function cM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dM(){return BF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF="firebaseLocalStorageDb",hM=1,Vh="firebaseLocalStorage",vF="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function qf(t,e){return t.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function fM(){const t=indexedDB.deleteDatabase(yF);return new cu(t).toPromise()}function Zm(){const t=indexedDB.open(yF,hM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Vh,{keyPath:vF})}catch(A){r(A)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Vh)?e(n):(n.close(),await fM(),e(await Zm()))})})}async function yC(t,e,r){const n=qf(t,!0).put({[vF]:e,value:r});return new cu(n).toPromise()}async function gM(t,e){const r=qf(t,!1).get(e),n=await new cu(r).toPromise();return n===void 0?null:n.value}function vC(t,e){const r=qf(t,!0).delete(e);return new cu(r).toPromise()}const pM=800,mM=3;class xF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>mM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(dM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await cM(),!this.activeServiceWorker)return;this.sender=new aM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await yC(e,Hh,"1"),await vC(e,Hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>yC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>gM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>vC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const s=qf(A,!1).getAll();return new cu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:A,value:s}of e)n.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(s)&&(this.notifyListeners(A,s),r.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!n.has(A)&&(this.notifyListeners(A,null),r.push(A));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const A of Array.from(n))A(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xF.type="LOCAL";const wM=xF;new au(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(t,e){return e?_A(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB extends bB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Wo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function yM(t){return fF(t.auth,new QB(t),t.bypassAuthState)}function vM(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),Xj(r,new QB(t),t.bypassAuthState)}async function xM(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),Jj(r,new QB(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,r,n,A,s=!1){this.auth=e,this.resolver=n,this.user=A,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:A,tenantId:s,error:i,type:a}=e;if(i){this.reject(i);return}const o={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yM;case"linkViaPopup":case"linkViaRedirect":return xM;case"reauthViaPopup":case"reauthViaRedirect":return vM;default:$n(this.auth,"internal-error")}}resolve(e){DA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){DA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=new au(2e3,1e4);class Do extends CF{constructor(e,r,n,A,s){super(e,r,A,s),this.provider=n,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){DA(this.filter.length===1,"Popup operations only handle one event");const e=FB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(iA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(iA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(iA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CM.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="pendingRedirect",Gd=new Map;class _M extends CF{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Gd.get(this.auth._key());if(!e){try{const n=await EM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Gd.set(this.auth._key(),e)}return this.bypassAuthState||Gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EM(t,e){const r=FM(e),n=TM(t);if(!await n._isAvailable())return!1;const A=await n._get(r)==="true";return await n._remove(r),A}function bM(t,e){Gd.set(t._key(),e)}function TM(t){return _A(t._redirectPersistence)}function FM(t){return Kd(IM,t.config.apiKey,t.name)}async function QM(t,e,r=!1){if(vA(t.app))return Promise.reject(ks(t));const n=ja(t),A=BM(n,e),i=await new _M(n,A,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=10*60*1e3;class SM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!IF(e)){const A=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(iA(this.auth,A))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UM&&this.cachedEventUids.clear(),this.cachedEventUids.has(xC(e))}saveEventToCache(e){this.cachedEventUids.add(xC(e)),this.lastProcessedEventTime=Date.now()}}function xC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e={}){return ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DM=/^https?/;async function PM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RM(t);for(const r of e)try{if(LM(r))return}catch{}$n(t,"unauthorized-domain")}function LM(t){const e=Xm(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!DM.test(r))return!1;if(NM.test(t))return n===t;const A=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new au(3e4,6e4);function CC(){const t=oA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function MM(t){return new Promise((e,r)=>{var n,A,s;function i(){CC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CC(),r(iA(t,"network-request-failed"))},timeout:jM.get()})}if(!((A=(n=oA().gapi)===null||n===void 0?void 0:n.iframes)===null||A===void 0)&&A.Iframe)e(gapi.iframes.getContext());else if(!((s=oA().gapi)===null||s===void 0)&&s.load)i();else{const a=Rj("iframefcb");return oA()[a]=()=>{gapi.load?i():r(iA(t,"network-request-failed"))},cF(`${kj()}?onload=${a}`).catch(o=>r(o))}}).catch(e=>{throw zd=null,e})}let zd=null;function OM(t){return zd=zd||MM(t),zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=new au(5e3,15e3),VM="__/auth/iframe",KM="emulator/auth/iframe",GM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $M(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?IB(e,KM):`https://${t.config.authDomain}/${VM}`,n={apiKey:e.apiKey,appName:t.name,v:Ea},A=zM.get(t.config.apiHost);A&&(n.eid=A);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Gc(n).slice(1)}`}async function WM(t){const e=await OM(t),r=oA().gapi;return qe(r,t,"internal-error"),e.open({where:document.body,url:$M(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GM,dontclear:!0},n=>new Promise(async(A,s)=>{await n.restyle({setHideOnLeave:!1});const i=iA(t,"network-request-failed"),a=oA().setTimeout(()=>{s(i)},HM.get());function o(){oA().clearTimeout(a),A(n)}n.ping(o).then(o,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JM=500,XM=600,YM="_blank",ZM="http://localhost";class IC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eO(t,e,r,n=JM,A=XM){const s=Math.max((window.screen.availHeight-A)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const o=Object.assign(Object.assign({},qM),{width:n.toString(),height:A.toString(),top:s,left:i}),c=gr().toLowerCase();r&&(a=nF(c)?YM:r),tF(c)&&(e=e||ZM,o.scrollbars="yes");const d=Object.entries(o).reduce((f,[w,y])=>`${f}${w}=${y},`,"");if(Ij(c)&&a!=="_self")return tO(e||"",a),new IC(null);const h=window.open(e||"",a,d);qe(h,t,"popup-blocked");try{h.focus()}catch{}return new IC(h)}function tO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="__/auth/handler",nO="emulator/auth/handler",AO=encodeURIComponent("fac");async function _C(t,e,r,n,A,s){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Ea,eventId:A};if(e instanceof dF){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",gR(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof lu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const o=await t._getAppCheckToken(),c=o?`#${AO}=${encodeURIComponent(o)}`:"";return`${sO(t)}?${Gc(a).slice(1)}${c}`}function sO({config:t}){return t.emulator?IB(t,nO):`https://${t.authDomain}/${rO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="webStorageSupport";class iO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wF,this._completeRedirectFn=QM,this._overrideRedirectResult=bM}async _openPopup(e,r,n,A){var s;DA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await _C(e,r,n,Xm(),A);return eO(e,i,FB())}async _openRedirect(e,r,n,A){await this._originValidation(e);const s=await _C(e,r,n,Xm(),A);return lM(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:A,promise:s}=this.eventManagers[r];return A?Promise.resolve(A):(DA(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await WM(e),n=new SM(e);return r.register("authEvent",A=>(qe(A==null?void 0:A.authEvent,e,"invalid-auth-event"),{status:n.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(rp,{type:rp},A=>{var s;const i=(s=A==null?void 0:A[0])===null||s===void 0?void 0:s[rp];i!==void 0&&r(!!i),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=PM(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return aF()||rF()||EB()}}const oO=iO;var EC="@firebase/auth",bC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cO(t){Aa(new Li("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=n.options;qe(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lF(t)},c=new Qj(n,A,s,o);return jj(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Aa(new Li("auth-internal",e=>{const r=ja(e.getProvider("auth").getImmediate());return(n=>new aO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(EC,bC,lO(t)),Ss(EC,bC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=5*60,dO=ib("authIdTokenMaxAge")||uO;let TC=null;const hO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>dO)return;const A=r==null?void 0:r.token;TC!==A&&(TC=A,await fetch(t,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))};function fO(t=vw()){const e=zc(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Lj(t,{popupRedirectResolver:oO,persistence:[wM,iM,wF]}),n=ib("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=hO(s.toString());rM(r,i,()=>i(r.currentUser)),tM(r,a=>i(a))}}const A=Ab("auth");return A&&Mj(r,`http://${A}`),r}function gO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Uj({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=A=>{const s=iA("internal-error");s.customData=A,r(s)},n.type="text/javascript",n.charset="UTF-8",gO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cO("Browser");const pO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",mO="zameny-b6c3f.firebaseapp.com",wO="zameny-b6c3f",BO="zameny-b6c3f.firebasestorage.app",yO="323355347910",vO="1:323355347910:web:c81f2813dce5ee9373c0c7",_F={apiKey:pO,authDomain:mO,projectId:wO,storageBucket:BO,messagingSenderId:yO,appId:vO};let Kh;wN().length?Kh=vw():Kh=ub(_F);const Tr=vT(Kh),Bn=fO(Kh);_F.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const rr={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules"},xO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},Ju=t=>JSON.parse(JSON.stringify(t)),Xr={syncCollection:async(t,e)=>{if(!Tr)return;const r=Jm(Wm(Tr,t)),n=await CO(async()=>await PT(r)),A=new Map;n.docs.forEach(o=>{A.set(o.id,o.data())});const s=new Map;e.forEach(o=>s.set(o.id,o));const i=[];if(A.forEach((o,c)=>{s.has(c)||i.push({type:"delete",id:c})}),e.forEach(o=>{const c=A.get(o.id),d=Ju(o);(!c||JSON.stringify(c)!==JSON.stringify(d))&&i.push({type:"set",item:d})}),i.length===0)return;console.log(`Syncing ${t}: ${i.length} changes.`);const a=xO(i,450);for(const o of a){const c=VT(Tr);o.forEach(d=>{const h=Yn(Tr,t,d.id||d.item.id);d.type==="delete"?c.delete(h):c.set(h,d.item)}),await c.commit()}},save:async t=>{if(!Tr){console.error("Database not initialized");return}const e=Bn==null?void 0:Bn.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :   .");return}const r=[];t.teachers&&r.push(Xr.syncCollection(rr.TEACHERS,t.teachers)),t.subjects&&r.push(Xr.syncCollection(rr.SUBJECTS,t.subjects)),t.classes&&r.push(Xr.syncCollection(rr.CLASSES,t.classes)),t.rooms&&r.push(Xr.syncCollection(rr.ROOMS,t.rooms)),t.schedule&&r.push(Xr.syncCollection(rr.SCHEDULE_1,t.schedule)),t.schedule2ndHalf&&r.push(Xr.syncCollection(rr.SCHEDULE_2,t.schedule2ndHalf)),t.substitutions&&r.push(Xr.syncCollection(rr.SUBSTITUTIONS,t.substitutions)),t.settings&&r.push(Od(Yn(Tr,rr.CONFIG,"settings"),Ju(t.settings))),t.bellSchedule&&r.push(Od(Yn(Tr,rr.CONFIG,"bells"),Ju({items:t.bellSchedule}))),await Promise.all(r),console.log("Data saved successfully to collections")},subscribe:(t,e)=>{if(!Tr)return()=>{};let r={...sn},n;const A=()=>{clearTimeout(n),n=setTimeout(()=>{t({...r})},50)},s=[],i=(a,o)=>{const c=Jm(Wm(Tr,a));return Hd(c,d=>{const h=d.docs.map(f=>f.data());h.sort((f,w)=>{const y=typeof f.order=="number"?f.order:999999,B=typeof w.order=="number"?w.order:999999;return y-B}),r[o]=h,A()},d=>{console.warn(`Error reading ${a}:`,d)})};return s.push(i(rr.TEACHERS,"teachers")),s.push(i(rr.SUBJECTS,"subjects")),s.push(i(rr.CLASSES,"classes")),s.push(i(rr.ROOMS,"rooms")),s.push(i(rr.SCHEDULE_1,"schedule")),s.push(i(rr.SCHEDULE_2,"schedule2ndHalf")),s.push(i(rr.SUBSTITUTIONS,"substitutions")),s.push(Hd(Yn(Tr,rr.CONFIG,"settings"),a=>{a.exists()&&(r.settings={...sn.settings,...a.data()},A())})),s.push(Hd(Yn(Tr,rr.CONFIG,"bells"),a=>{if(a.exists()){const o=a.data();r.bellSchedule=o.items||sn.bellSchedule,A()}})),()=>{s.forEach(a=>a()),clearTimeout(n)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!Tr)throw new Error("Database not initialized");const r=Bn==null?void 0:Bn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects,teachers:e.teachers.map(s=>({id:s.id,name:s.name,subjectIds:s.subjectIds,shifts:s.shifts,unavailableDates:[],telegramChatId:""})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,schedule2ndHalf:e.schedule2ndHalf,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},A=Ju(n);await Od(Yn(Tr,rr.PUBLIC,t),A)},getPublicData:async t=>{if(!Tr)return null;try{const e=await W2(()=>Promise.resolve().then(()=>Aj),void 0).then(r=>r.getDoc(Yn(Tr,rr.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{Tr&&await LT(Yn(Tr,rr.PUBLIC,t))}};async function CO(t){try{return await t()}catch(e){return console.error("Firestore read error (likely quota):",e),{docs:[]}}}const EF=S.createContext(void 0),IO="admin@gymnasium22.com",_O="teacher@gymnasium22.com",EO=({children:t})=>{const[e,r]=S.useState(null),[n,A]=S.useState(null),[s,i]=S.useState(!0);S.useEffect(()=>{if(!Bn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=nM(Bn,d=>{r(d),d?d.email===IO?A("admin"):d.email===_O?A("teacher"):(A(null),BC(Bn)):A(null),i(!1)});return()=>c()},[]);const a=async()=>{Bn&&await BC(Bn),A(null)},o=()=>{A("guest"),i(!1)};return l.jsx(EF.Provider,{value:{user:e,role:n,loading:s,logout:a,setGuestRole:o},children:t})},Oa=()=>{const t=S.useContext(EF);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},bF=S.createContext(void 0),dl="gym_data_local_backup_v2",TF=({children:t,initialData:e})=>{const[r,n]=S.useState(sn),[A,s]=S.useState(!0),[i,a]=S.useState([]),[o,c]=S.useState(-1),{user:d,role:h,loading:f}=Oa();S.useEffect(()=>{if(e){n(e),a([e]),c(0),s(!1);return}if(f)return;const m=localStorage.getItem(dl);if(m)try{const R=JSON.parse(m);R&&R.teachers&&(n(U=>({...U,...R})),console.log("Loaded from local storage backup"))}catch(R){console.error("Error parsing local backup",R)}if(!(d||h==="guest")){m||n(sn),s(!1);return}s(!0);const F=Xr.subscribe(R=>{const U={...sn,...R};U.teachers||(U.teachers=[]),U.teachers=U.teachers.map(v=>({telegramChatId:"",...v,shifts:v.shifts||[Be.First,Be.Second]})),U.schedule||(U.schedule=[]),U.schedule2ndHalf||(U.schedule2ndHalf=[]),U.substitutions||(U.substitutions=[]),U.bellSchedule||(U.bellSchedule=eb),U.settings?U.settings={...sn.settings,...U.settings}:U.settings=sn.settings,n(U),localStorage.setItem(dl,JSON.stringify(U)),a(v=>v.length===0?[U]:v),c(v=>v===-1?0:v),s(!1)},R=>{console.error("Failed to subscribe to data:",R),s(!1)});return()=>{F&&F()}},[e,d,h,f]);const w=S.useCallback(async(m,I=!0)=>{const F=!d&&h==="guest",R={...r,...m};n(R);try{localStorage.setItem(dl,JSON.stringify(R))}catch(U){console.error("Local storage quota exceeded",U)}if(!e&&d&&!F)try{await Xr.save(m)}catch(U){console.error("Save failed:",U),(U==null?void 0:U.code)==="resource-exhausted"?console.warn("Quota exceeded. Saved locally only."):(U==null?void 0:U.code)==="permission-denied"?alert("  .    ."):console.warn("Cloud save error. Saved locally.",U.message)}else F&&console.warn("       .");if(I){const U=i.slice(0,o+1);U.push(R),U.length>50&&U.shift(),a(U),c(U.length-1)}},[r,i,o,d,h,e]),y=S.useCallback(async()=>{if(o>0){const m=i[o-1];if(c(o-1),n(m),localStorage.setItem(dl,JSON.stringify(m)),!e&&d)try{await Xr.save(m)}catch(I){console.error(I)}}},[i,o,d,e]),B=S.useCallback(async()=>{if(o<i.length-1){const m=i[o+1];if(c(o+1),n(m),localStorage.setItem(dl,JSON.stringify(m)),!e&&d)try{await Xr.save(m)}catch(I){console.error(I)}}},[i,o,d,e]),E=S.useCallback(async()=>{await w(sn)},[w]),x=S.useMemo(()=>({data:r,isLoading:A,saveData:w,resetData:E,undo:y,redo:B,canUndo:o>0,canRedo:o<i.length-1}),[r,A,w,E,y,B,o]);return l.jsx(bF.Provider,{value:x,children:t})},Jf=()=>{const t=S.useContext(bF);if(!t)throw new Error("useFullData must be used within DataProvider");return t},FF=S.createContext(void 0),QF=S.createContext(void 0),UF=({children:t})=>{const{data:e,saveData:r}=Jf(),n=S.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),A=S.useCallback(async(i,a)=>{await r(i,a)},[r]),s=S.useMemo(()=>({...n,saveStaticData:A}),[n,A]);return l.jsx(FF.Provider,{value:s,children:t})},SF=({children:t})=>{const{data:e,saveData:r}=Jf(),n=new Date().getMonth(),s=n>=0&&n<=4?e.schedule2ndHalf||[]:e.schedule,i=S.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2ndHalf:h})},[r]),a=S.useCallback(async(d,h)=>{await r(d,h)},[r]),o=S.useMemo(()=>({schedule:s,schedule1:e.schedule,schedule2:e.schedule2ndHalf||[],substitutions:e.substitutions,saveSemesterSchedule:i,saveScheduleData:a}),[s,e.schedule,e.schedule2ndHalf,e.substitutions,i,a]),c=S.useMemo(()=>({...o,saveScheduleData:a}),[o,a]);return l.jsx(QF.Provider,{value:c,children:t})},zA=()=>{const t=S.useContext(FF);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Jf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Ha=()=>{const t=S.useContext(QF);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Jf();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},bO={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),l.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),l.jsx("path",{d:"m20 16-4-4 4-4"}),l.jsx("path",{d:"m4 8 4 4-4 4"}),l.jsx("path",{d:"m16 4-4 4-4-4"}),l.jsx("path",{d:"m8 20 4-4 4 4"})]})},q=({name:t,size:e=24,className:r="",...n})=>{const A=bO[t];return A?l.jsx(A,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},bA=({isOpen:t,onClose:e,title:r,children:n,maxWidth:A="max-w-lg"})=>(S.useEffect(()=>{if(!t)return;const s=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",s),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:s=>s.target===s.currentTarget&&e(),children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${A} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx(q,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),TO=({x:t,y:e,onClose:r,actions:n})=>{const A=S.useRef(null);if(S.useEffect(()=>{if(t===null||e===null)return;const i=o=>{A.current&&!A.current.contains(o.target)&&r()},a=o=>{o.key==="Escape"&&r()};return window.addEventListener("click",i,!0),document.addEventListener("keydown",a),()=>{window.removeEventListener("click",i,!0),document.removeEventListener("keydown",a)}},[t,e,r]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{ref:A,className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:n.map(i=>l.jsxs("button",{onClick:a=>{a.stopPropagation(),i.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${i.color||"text-slate-700 dark:text-slate-200"}`,children:[i.icon&&l.jsx(q,{name:i.icon,size:16}),i.label]},i.id||i.label))})},FO=()=>{const{bellSchedule:t}=zA(),[e,r]=S.useState("..."),[n,A]=S.useState(""),[s,i]=S.useState(0),[a,o]=S.useState("bg-slate-500"),[c,d]=S.useState("");return S.useEffect(()=>{const h=()=>{const w=new Date,y=w.getDay(),E=[null,At.Monday,At.Tuesday,At.Wednesday,At.Thursday,At.Friday,null][y];if(d(E||""),!E){r(" "),A(" "),o("bg-slate-400"),i(0);return}const x=U=>{const[v,C]=U.split(":").map(Number);return v*60+C},m=w.getHours()*60+w.getMinutes();let I=t.filter(U=>U.day===E);I.length===0&&(I=t.filter(U=>U.day==="default")),I.sort((U,v)=>x(U.start)-x(v.start));let F=null,R=null;for(let U=0;U<I.length;U++){const v=I[U],C=x(v.start),_=x(v.end);if(m>=C&&m<_){F={...v,duration:_-C,passed:m-C};break}if(U<I.length-1){const Q=I[U+1],N=x(Q.start);if(m>=_&&m<N){const L=N-_;if(L>0&&L<60){const T=m-_,Ke=N-m;R={nextLesson:Q,duration:L,passed:T,remaining:Ke};break}}}}if(F){r(`${F.period} `);const U=Math.max(0,F.duration-F.passed);A(`${F.shift===Be.First?"1 ":"2 "}  . ${U} `);const v=F.duration>0?F.passed/F.duration*100:0;i(Math.min(100,Math.max(0,v))),o("bg-indigo-600")}else if(R){r(""),A(` ${R.remaining}  ${R.nextLesson.period} `),o("bg-amber-500");const U=R.duration>0?R.passed/R.duration*100:0;i(Math.min(100,Math.max(0,U)))}else r(" "),A(" "),o("bg-slate-400"),i(0)};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${a}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:n})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${a} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center`,children:l.jsx(q,{name:"Clock",size:16,className:a==="bg-indigo-600"?"text-indigo-600":a==="bg-amber-500"?"text-amber-500":"text-slate-400"})})]}),s>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${a} transition-all duration-1000`,style:{width:`${s}%`}})})]})},np=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:A})=>{var y;const[s,i]=S.useState(!1),[a,o]=S.useState(""),c=S.useRef(null);S.useEffect(()=>{const B=x=>{c.current&&!c.current.contains(x.target)&&i(!1)},E=x=>{x.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",B),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("keydown",E)}},[]);const h=((y=(A?t.flatMap(B=>B.options):t).find(B=>B.value===e))==null?void 0:y.label)||n,f=A?t.map(B=>({...B,options:B.options.filter(E=>E.label.toLowerCase().includes(a.toLowerCase()))})).filter(B=>B.options.length>0):null,w=A?null:t.filter(B=>B.label.toLowerCase().includes(a.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!s),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx(q,{name:"Filter",size:14,className:"text-slate-400"})]}),s&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:a,onChange:B=>o(B.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),A&&f?f.map(B=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:B.label}),B.options.map(E=>l.jsx("div",{onClick:()=>{r(E.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===E.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:E.label},E.value))]},B.id||B.label)):w?w.map(B=>l.jsx("div",{onClick:()=>{r(B.value),i(!1),o("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===B.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:B.label},B.value)):null]})]})},Xu=({children:t,className:e=""})=>{const r=wA.Children.toArray(t);return l.jsx("div",{className:e,children:r.map((n,A)=>{const s=wA.isValidElement(n)&&n.key?n.key:A;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${A*.05}s`,opacity:0},children:n},s)})})},Ap=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(A=>{const s=A.id??A.label,i=Math.min(100,Math.max(0,A.value/n*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:A.label,children:A.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:A.value})]},s)})})},QO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:A,settings:s}=zA(),{schedule:i,substitutions:a}=Ha(),o=Vc(),[c,d]=S.useState(localStorage.getItem("gym_notes")||""),[h]=S.useState(new Date),[f,w]=S.useState(""),[y,B]=S.useState(null),[E,x]=S.useState(!1),[m,I]=S.useState(""),[F,R]=S.useState(!1),[U,v]=S.useState(""),[C,_]=S.useState(!1);S.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){I("");const k=setTimeout(()=>I(""),2e3);return()=>clearTimeout(k)}},[c]);const Q=k=>new Date(k.getTime()-k.getTimezoneOffset()*6e4).toISOString().split("T")[0],N=S.useMemo(()=>Q(h),[h]),L=S.useMemo(()=>{const k=h.getDay();return k===0||k===6?null:Ot[k-1]},[h]),T=S.useMemo(()=>{const k=new Date;return k.setHours(0,0,0,0),e.filter(G=>G.birthDate).map(G=>{const X=new Date(G.birthDate);let oe=new Date(k.getFullYear(),X.getMonth(),X.getDate());oe<k&&oe.setFullYear(k.getFullYear()+1);const ae=Math.ceil((oe.getTime()-k.getTime())/(1e3*60*60*24));return{...G,diff:ae,age:k.getFullYear()-X.getFullYear()}}).filter(G=>G.diff<=30).sort((G,X)=>G.diff-X.diff)},[e]),Ke=S.useMemo(()=>{const k=e.length,G=new Map;e.filter(Te=>Te.unavailableDates.includes(N)).forEach(Te=>{var rt;const tr=((rt=Te.absenceReasons)==null?void 0:rt[N])===" "?" ":"";G.set(Te.id,{id:Te.id,name:Te.name,displayReason:tr})});const X=a.filter(Te=>Te.date===N&&Te.replacementTeacherId!=="conducted"&&Te.replacementTeacherId!==Te.originalTeacherId),oe=new Map;X.forEach(Te=>{if(G.has(Te.originalTeacherId))return;const pt=e.find(dt=>dt.id===Te.originalTeacherId);if(!pt)return;const tr=i.find(dt=>dt.id===Te.scheduleItemId);if(!tr)return;oe.has(Te.originalTeacherId)||oe.set(Te.originalTeacherId,{teacher:pt,lessons:[]}),oe.get(Te.originalTeacherId).lessons.push({period:tr.period,reason:Te.lessonAbsenceReason})});const ae=Array.from(G.values());oe.forEach((Te,pt)=>{const tr=Te.lessons.sort((Ie,Re)=>Ie.period-Re.period),rt=tr.map(Ie=>Ie.period).join(", "),ht=tr.some(Ie=>Ie.reason===" ")?" ":"";ae.push({id:pt,name:Te.teacher.name,displayReason:`${rt} : ${ht}`})}),ae.sort((Te,pt)=>Te.name.localeCompare(pt.name));const Ve=ae.length,Fe=k-Ve;return{presentPercent:k>0?Math.round(Fe/k*100):0,absentCount:Ve,totalTeachers:k,absentTeachersList:ae}},[e,N,a,i]),He=S.useMemo(()=>{const k=new Date(h);for(k.setDate(h.getDate()+1);k.getDay()===0||k.getDay()===6;)k.setDate(k.getDate()+1);const X=[null,"","","","","",null][k.getDay()];if(!X)return[];const oe=[];return r.forEach(ae=>{const Ve=i.filter(Fe=>Fe.classId===ae.id&&Fe.day===X);Ve.length===0?oe.push({class:ae.name,issue:`   ${X}`}):Ve.length<4&&oe.push({class:ae.name,issue:`  (${Ve.length})`}),Ve.forEach(Fe=>{if(i.some(Te=>Te.id!==Fe.id&&Te.day===X&&Te.period===Fe.period&&Te.shift===Fe.shift&&Te.teacherId===Fe.teacherId)&&oe.push({class:ae.name,issue:`  (${Fe.period} )`}),Fe.roomId){const Te=n.find(pt=>pt.id===Fe.roomId);Te&&Te.capacity<ae.studentsCount&&oe.push({class:ae.name,issue:`: ${Te.name} (${Fe.period} )`})}})}),oe.filter((ae,Ve,Fe)=>Fe.findIndex(We=>We.class===ae.class&&We.issue===ae.issue)===Ve).slice(0,10)},[i,r,e,n,h]),et=S.useMemo(()=>{if(!L)return 0;let k=0;const G=i.filter(X=>X.day===L);for(const X of G){const oe=e.find(ae=>ae.id===X.teacherId);oe&&oe.unavailableDates.includes(N)&&(a.find(Ve=>Ve.scheduleItemId===X.id&&Ve.date===N)||k++)}return k},[i,e,a,N,L]),$e=()=>{var tr;if(!f){B(null);return}const k=new Date,X=[null,At.Monday,At.Tuesday,At.Wednesday,At.Thursday,At.Friday,null][k.getDay()];if(!X){B({status:"",detail:"  ",color:"text-slate-500"});return}const oe=rt=>{const[dt,ht]=rt.split(":").map(Number);return dt*60+ht},ae=k.getHours()*60+k.getMinutes();let Ve=A.filter(rt=>rt.day===X);Ve.length===0&&(Ve=A.filter(rt=>rt.day==="default"));const Fe=Ve.find(rt=>{const dt=oe(rt.start),ht=oe(rt.end);return ae>=dt&&ae<=ht}),We=f.toLowerCase(),Te=e.find(rt=>rt.name.toLowerCase().includes(We)),pt=r.find(rt=>rt.name.toLowerCase().includes(We));if(!Te&&!pt){B({status:" ",detail:" ",color:"text-red-500"});return}if(Te){if(Te.unavailableDates.includes(N)){const Re=((tr=Te.absenceReasons)==null?void 0:tr[N])===" "?" ":"";B({status:"",detail:Re,color:"text-red-500",icon:"UserX",items:[]});return}if(!Fe){B({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const rt=i.filter(Ie=>Ie.teacherId===Te.id&&Ie.day===X&&Ie.period===Fe.period&&Ie.shift===Fe.shift),dt=a.filter(Ie=>Ie.date===N&&Ie.replacementTeacherId===Te.id).map(Ie=>i.find(Re=>Re.id===Ie.scheduleItemId)).filter(Ie=>!!Ie&&Ie.day===X&&Ie.period===Fe.period&&Ie.shift===Fe.shift);let ht=[];rt.forEach(Ie=>{var Ct,jt,ue;const Re=a.find(ne=>ne.date===N&&ne.scheduleItemId===Ie.id);if(!Re||Re.replacementTeacherId===Te.id){const ne=((Ct=n.find(le=>le.id===((Re==null?void 0:Re.replacementRoomId)||Ie.roomId)))==null?void 0:Ct.name)||(Re==null?void 0:Re.replacementRoomId)||Ie.roomId||" .",Ee=(jt=t.find(le=>le.id===Ie.subjectId))==null?void 0:jt.name,ke=(ue=r.find(le=>le.id===Ie.classId))==null?void 0:ue.name;ht.push({room:ne,subject:Ee,entityName:ke,direction:Ie.direction,isSubstitution:!!(Re&&Re.replacementTeacherId===Te.id),originalTeacherName:null})}}),dt.forEach(Ie=>{var Ee,ke,le;const Re=a.find(je=>je.date===N&&je.scheduleItemId===Ie.id&&je.replacementTeacherId===Te.id);if(!Re)return;const Ct=((Ee=n.find(je=>je.id===(Re.replacementRoomId||Ie.roomId)))==null?void 0:Ee.name)||Re.replacementRoomId||Ie.roomId||" .",jt=(ke=t.find(je=>je.id===Ie.subjectId))==null?void 0:ke.name,ue=(le=r.find(je=>je.id===Ie.classId))==null?void 0:le.name,ne=e.find(je=>je.id===Re.originalTeacherId);ht.push({room:Ct,subject:jt,entityName:ue,direction:Ie.direction,isSubstitution:!0,originalTeacherName:ne==null?void 0:ne.name})}),ht.length>0?B({status:` ${Fe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ht}):B({status:"",detail:` ( ${Fe.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(pt){if(!Fe){B({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const rt=i.filter(dt=>dt.classId===pt.id&&dt.day===X&&dt.period===Fe.period&&dt.shift===Fe.shift);if(rt.length>0){const dt=rt.map(Re=>{var fe,ie,ge,_e,xe;const Ct=a.find(ce=>ce.scheduleItemId===Re.id&&ce.date===N);if(Ct&&Ct.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(fe=t.find(ce=>ce.id===Re.subjectId))==null?void 0:fe.name};const jt=!!(Ct&&Ct.replacementTeacherId!=="conducted"&&Ct.replacementTeacherId!=="cancelled"),ue=jt?Ct.replacementTeacherId:Re.teacherId,ne=(Ct==null?void 0:Ct.replacementRoomId)||Re.roomId,Ee=(ie=e.find(ce=>ce.id===ue))==null?void 0:ie.name,ke=((ge=n.find(ce=>ce.id===ne))==null?void 0:ge.name)||ne||" .",le=(_e=t.find(ce=>ce.id===Re.subjectId))==null?void 0:_e.name,je=jt?(xe=e.find(ce=>ce.id===Ct.originalTeacherId))==null?void 0:xe.name:null;return{room:ke,subject:le,entityName:Ee,direction:Re.direction,isSubstitution:jt,originalTeacherName:je}}),ht=dt.filter(Re=>!Re.cancelled),Ie=dt.filter(Re=>!!Re.cancelled);ht.length>0?B({status:` ${Fe.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:ht}):Ie.length>0?B({status:" ",detail:Ie.map(Re=>Re.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):B({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else B({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},se=async()=>{if(!U.trim()){alert(",   .");return}if(!(s!=null&&s.telegramToken)||!(s!=null&&s.feedbackChatId)){alert("     .");return}_(!0);const k=` *   :*

${U}`;try{const X=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:k,parse_mode:"Markdown"})})).json();if(X.ok)alert("!   ."),R(!1),v("");else throw new Error(X.description)}catch(G){console.error("   Telegram:",G),alert(`   . : ${G}`)}finally{_(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx(q,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(q,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:k=>w(k.target.value),onKeyDown:k=>k.key==="Enter"&&$e(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:$e,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx(q,{name:"Search",size:20})})]}),y&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${y.color}`,children:[l.jsx(q,{name:y.icon||"Info",size:14})," ",y.status]}),y.items&&y.items.length>0?l.jsx("div",{className:"space-y-2",children:y.items.map((k,G)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[k.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:k.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:k.subject}),k.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:k.originalTeacherName?` ( ${k.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:k.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:k.room})]})]},`${k.room}-${k.subject}-${k.entityName}-${G}`))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:y.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx(q,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:et>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:et}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>o("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx(q,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>x(!E),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:E?" ":" ",children:l.jsx(q,{name:E?"PieChart":"List",size:20})})]}),E?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Ke.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Ke.absentTeachersList.map(k=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:k.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:k.displayReason})]},k.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx(q,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Ke.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Ke.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Ke.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx(q,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(k=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:k.name}),l.jsx("span",{className:"font-bold text-slate-400",children:k.diff===0?"!":`${k.diff} .`})]},k.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx(q,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:He.length?He.map(k=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:k.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:k.issue})]},`${k.class}-${k.issue}`)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx(q,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:k=>d(k.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),m&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx(q,{name:"Save",size:12})," ",m]})]})]})]}),l.jsx(bA,{isOpen:F,onClose:()=>R(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:U,onChange:k=>v(k.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:se,disabled:C,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[C?l.jsx(q,{name:"Loader",size:16,className:"animate-spin"}):l.jsx(q,{name:"Send",size:16}),C?"...":""]})})]})})]})};var kF={},RF={},NF={},Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});function UO(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Xf.default=UO;var UB={};Object.defineProperty(UB,"__esModule",{value:!0});var SO=Xf,kO=" and ";function RO(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],A=SO.default(r),s=n;return typeof s=="boolean"?s?A:"not "+A:(typeof s=="number"&&/[height|width]$/.test(A)&&(s=s+"px"),"("+A+": "+s+")")}).join(kO)}UB.default=RO;var SB={};Object.defineProperty(SB,"__esModule",{value:!0});function NO(){}SB.default=NO;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Xf;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=UB;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=SB;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(NF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=S,r=NF;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(A){return!0}};var n=function(A){return function(s,i){i===void 0&&(i=!1);var a=e.useState(i),o=a[0],c=a[1],d=r.queryObjectToString(s);return A(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),w=function(){h&&c(!!f.matches)};return f.addListener(w),c(f.matches),function(){h=!1,f.removeListener(w)}},[d]),o}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(RF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=RF;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(kF);const DO=UI(kF),DF=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:A,rooms:s}=zA(),{schedule1:i,schedule2:a,saveSemesterSchedule:o,canUndo:c,canRedo:d,undo:h,redo:f}=Ha(),w=e===2?a:i,y=async P=>{await o(e,P)},[B,E]=S.useState(Be.First),[x,m]=S.useState(At.Monday),[I,F]=S.useState(!1),[R,U]=S.useState({}),[v,C]=S.useState("class"),[_,Q]=S.useState(""),[N,L]=S.useState(""),[T,Ke]=S.useState(""),[He,et]=S.useState(!1),[$e,se]=S.useState({visible:!1,x:0,y:0,item:null,cell:null}),[k,G]=S.useState(null),[X,oe]=S.useState([]),[ae,Ve]=S.useState(null),[Fe,We]=S.useState(null),Te=DO({maxWidth:767}),[pt,tr]=S.useState(!0),[rt,dt]=S.useState(!1),[ht,Ie]=S.useState({isOpen:!1,type:"",day:"",classId:""}),[Re,Ct]=S.useState(At.Monday),[jt,ue]=S.useState(""),ne=wn[B],Ee=()=>v==="week"?wn[B].map(P=>({id:P.toString(),name:`${P} `})):v==="class"?_?A.filter(P=>P.id===_&&P.shift===B):A.filter(P=>P.shift===B):v==="teacher"?_?n.filter(P=>P.id===_):n:v==="subject"?_?r.filter(P=>P.id===_):r:[],ke=(P,V)=>{let W=[];if(v==="week"){const J=parseInt(P),ee=V;W=w.filter(te=>te.shift===B&&te.period===J&&te.day===ee),_&&(W=W.filter(te=>te.classId===_))}else{const J=V;v==="class"&&(W=w.filter(ee=>ee.classId===P&&ee.period===J&&ee.day===x&&ee.shift===B)),v==="teacher"&&(W=w.filter(ee=>ee.teacherId===P&&ee.period===J&&ee.day===x&&ee.shift===B)),v==="subject"&&(W=w.filter(ee=>ee.subjectId===P&&ee.period===J&&ee.day===x&&ee.shift===B))}return N&&(W=W.filter(J=>{if(!J.roomId)return!1;const ee=s.find(Ne=>Ne.id===J.roomId);return((ee?ee.name:J.roomId)||"").toLowerCase().includes(N.toLowerCase())})),T&&(W=W.filter(J=>{var ee;return(ee=J.direction)==null?void 0:ee.toLowerCase().includes(T.toLowerCase())})),W},le=P=>{const V=[],W=w.filter(te=>te.id!==P.id&&te.day===P.day&&te.period===P.period&&te.shift===P.shift);return W.find(te=>te.teacherId===P.teacherId)&&V.push("teacher"),W.find(te=>!(te.classId!==P.classId||te.direction&&P.direction&&te.direction!==P.direction))&&V.push("class"),P.roomId&&W.find(Ne=>Ne.roomId===P.roomId)&&V.push("room"),V},je=(P,V,W)=>{const J=[],ee=A.find(Oe=>Oe.id===P),te=r.find(Oe=>Oe.id===V),Ne=s.find(Oe=>Oe.id===W);return Ne&&(ee&&Ne.capacity<ee.studentsCount&&J.push(`  !   ${ee.studentsCount} .,     ${Ne.capacity}.`),te&&te.requiredRoomType&&te.requiredRoomType!==""&&Ne.type!==te.requiredRoomType&&J.push(`   !   "${te.requiredRoomType}",   "${Ne.type}".`)),J},fe=P=>{if(!P.classId||!P.subjectId||!P.roomId){oe([]);return}const V=je(P.classId,P.subjectId,P.roomId);oe(V)},ie=P=>{t||(U(P),fe(P),F(!0))},ge=(P,V,W=x)=>{if(t)return;const J={period:V,day:W,shift:B,id:Math.random().toString(36).substr(2,9)};v==="class"&&(J.classId=P),v==="teacher"&&(J.teacherId=P),v==="subject"&&(J.subjectId=P),v==="week"&&(J.period=parseInt(P),J.day=W,_&&A.find(ee=>ee.id===_)&&(J.classId=_)),U(J),oe([]),F(!0)},_e=async()=>{if(!R.subjectId||!R.teacherId||!R.classId)return;let P=[...w];const V=P.findIndex(W=>W.id===R.id);V>=0?P[V]=R:P.push(R),await y(P),F(!1)},xe=async P=>{const V=w.filter(W=>W.id!==(P||R.id));await y(V),F(!1)},ce=(P,V,W)=>{t||(P.preventDefault(),P.stopPropagation(),se({visible:!0,x:P.clientX,y:P.clientY,item:V,cell:W}))},ze=(P,V)=>{if(t)return;Ve(V),P.dataTransfer.effectAllowed="move";const W=P.currentTarget;setTimeout(()=>W.classList.add("dragging"),0)},Xe=P=>{P.currentTarget.classList.remove("dragging"),Ve(null),We(null)},ft=(P,V)=>{P.preventDefault(),!t&&We(`${V.rowId}-${V.colKey}`)},ye=async(P,V)=>{if(P.preventDefault(),!ae||t)return;const W={...ae};v==="week"?(W.period=parseInt(V.rowId),W.day=V.colKey):(W.period=V.colKey,W.day=x,v==="class"&&(W.classId=V.rowId),v==="teacher"&&(W.teacherId=V.rowId),v==="subject"&&(W.subjectId=V.rowId));let J=w.map(ee=>ee.id===W.id?W:ee);await y(J),Ve(null),We(null)},Ce=[];if($e.item)Ce.push({label:"",icon:"Copy",onClick:()=>G($e.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>xe($e.item.id)});else if($e.cell){const P=$e.cell;k&&Ce.push({label:"",icon:"Clipboard",onClick:async()=>{const V={...k,id:Math.random().toString(36).substr(2,9),day:x,shift:B,period:P.colKey};v==="week"&&(V.day=P.colKey,V.period=parseInt(P.rowId)),v==="class"?V.classId=P.rowId:v==="teacher"?V.teacherId=P.rowId:v==="subject"&&(V.subjectId=P.rowId);let W=[...w,V];await y(W),G(null)}}),Ce.push({label:" ",icon:"Plus",onClick:()=>ge(P.rowId||"",typeof P.colKey=="number"?P.colKey:parseInt(P.rowId||"0"),v==="week"?P.colKey:x)})}const Ge=R.subjectId?n.filter(P=>P.subjectIds.includes(R.subjectId)):[],tt=R.subjectId?n.filter(P=>!P.subjectIds.includes(R.subjectId)):n,mt=S.useMemo(()=>{var V,W,J,ee;const P=e===2?" (2- )":"";if(_){if(v==="teacher")return((V=n.find(te=>te.id===_))==null?void 0:V.name)+P;if(v==="class")return((W=A.find(te=>te.id===_))==null?void 0:W.name)+P;if(v==="subject")return((J=r.find(te=>te.id===_))==null?void 0:J.name)+P;if(v==="week")return((ee=A.find(te=>te.id===_))==null?void 0:ee.name)+P}return`  ${x}`+P},[_,v,n,A,r,x,e]),D=!!_,K=S.useMemo(()=>D?Ot:ne,[D,ne]),$=S.useMemo(()=>D?wn[B].map(P=>({id:P.toString(),name:`${P} `})):Ee(),[D,B,Ee]),O=(P,V)=>{if(D){const W=parseInt(P),J=V;let ee=w.filter(te=>te.shift===B&&te.period===W&&te.day===J);return v==="class"||v==="week"?ee=ee.filter(te=>te.classId===_):v==="teacher"?ee=ee.filter(te=>te.teacherId===_):v==="subject"&&(ee=ee.filter(te=>te.subjectId===_)),ee}else return ke(P,V)},pe=Ee(),he=v==="week"?Ot:ne,re=(P,V,W)=>{Ie({isOpen:!0,type:P,day:V||"",classId:W||""})},Qe=async()=>{let P=[...w];ht.type==="clearAll"?P=[]:ht.type==="clearDay"&&ht.day?P=P.filter(V=>V.day!==ht.day):ht.type==="clearClass"&&ht.classId&&(P=P.filter(V=>V.classId!==ht.classId)),await y(P),Ie({isOpen:!1,type:"",day:"",classId:""}),dt(!1)},de=(P,V,W)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(J=>{const ee=r.find(nt=>nt.id===J.subjectId),te=n.find(nt=>nt.id===J.teacherId),Ne=A.find(nt=>nt.id===J.classId),Oe=le(J),Ye=s.find(nt=>nt.id===J.roomId),it=Ye?Ye.name:J.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:nt=>ze(nt,J),onDragEnd:t?void 0:Xe,onClick:t?void 0:()=>ie(J),onContextMenu:t?void 0:nt=>ce(nt,J,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Oe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Oe.length===0&&(ee!=null&&ee.color)?{backgroundColor:`${ee.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:v==="subject"||v==="week"?Ne==null?void 0:Ne.name:ee==null?void 0:ee.name}),J.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:J.direction})]}),v==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:ee==null?void 0:ee.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:te==null?void 0:te.name,children:[l.jsx(q,{name:v==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:v==="teacher"?Ne==null?void 0:Ne.name:te==null?void 0:te.name})]}),it&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Ye?`: ${Ye.capacity}, : ${Ye.type}`:"",children:it})]}),Oe.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${Oe.join(", ")}`,children:"!"})]},J.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>ge(W,typeof V=="number"?V:parseInt(W),v==="week"?V:x),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx(q,{name:"Plus",size:16})})]}),Pe=()=>{if(!_)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=w.filter(V=>V.day===x&&V.shift===B&&(v==="class"&&V.classId===_||v==="teacher"&&V.teacherId===_||v==="subject"&&V.subjectId===_)).sort((V,W)=>V.period-W.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",x,"  ",B,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(V=>{const W=r.find(Ye=>Ye.id===V.subjectId),J=n.find(Ye=>Ye.id===V.teacherId),ee=A.find(Ye=>Ye.id===V.classId),te=s.find(Ye=>Ye.id===V.roomId),Ne=te?te.name:V.roomId,Oe=le(V);return l.jsxs("div",{onClick:t?void 0:()=>ie(V),className:`rounded-xl p-4 shadow-sm border ${Oe.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[V.period," "]}),Oe.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${Oe.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[W==null?void 0:W.name," ",V.direction&&`(${V.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[ee==null?void 0:ee.name,"  ",J==null?void 0:J.name]}),Ne&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Ne]})]},V.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),$e.visible&&l.jsx(TO,{x:$e.x,y:$e.y,onClose:()=>se({...$e,visible:!1}),actions:Ce}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>E(Be.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===Be.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>E(Be.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${B===Be.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),v!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Ot.map(P=>l.jsx("button",{onClick:()=>m(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${x===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(q,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx(q,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{C("class"),Q("")},className:`p-2 rounded-md ${v==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{C("teacher"),Q("")},className:`p-2 rounded-md ${v==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{C("subject"),Q("")},className:`p-2 rounded-md ${v==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx(q,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;C("week"),Q(((P=A[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${v==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx(q,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx(q,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:_,onChange:P=>Q(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",v==="class"?"":v==="teacher"?"":v==="week"?" ()":""]}),(v==="class"||v==="week")&&A.filter(P=>P.shift===B).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="teacher"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),v==="subject"&&r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:N,onChange:P=>L(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:T,onChange:P=>Ke(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>dt(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx(q,{name:"List",size:16})," . ."]}),(_||v==="week")&&l.jsx("button",{onClick:()=>et(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx(q,{name:"Printer",size:16})})]})]}),Te&&!t&&_&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>tr(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${pt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx(q,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>tr(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${pt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx(q,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Te&&pt&&!t&&_?Pe():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:v==="week"?"":v==="class"?"":v==="teacher"?"":""}),he.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:pe.length>0?pe.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),he.map(V=>{const W=ke(P.id,V),J=`${P.id}-${V}`,ee={rowId:P.id,colKey:V};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${Fe===J?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:te=>ce(te,null,ee),onDragOver:t?void 0:te=>ft(te,ee),onDrop:t?void 0:te=>ye(te,ee),children:de(W,V,P.id)},V)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(bA,{isOpen:I,onClose:()=>F(!1),title:R.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",R.day]}),l.jsxs("span",{children:[": ",R.period]}),l.jsxs("span",{children:[": ",R.shift===Be.First?"1 ":"2 "]})]}),X.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:X.map(P=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(q,{name:"AlertTriangle",size:14}),P]},P))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(np,{options:A.filter(P=>P.shift===B).map(P=>({value:P.id,label:P.name})),value:R.classId||null,onChange:P=>{U({...R,classId:P}),fe({...R,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(np,{options:r.map(P=>({value:P.id,label:P.name})),value:R.subjectId||null,onChange:P=>{U({...R,subjectId:P}),fe({...R,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(np,{options:[{label:"",options:Ge.map(P=>({value:P.id,label:P.name}))},{label:"",options:tt.map(P=>({value:P.id,label:P.name}))}],value:R.teacherId||null,onChange:P=>U({...R,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:R.direction||"",onChange:P=>U({...R,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:R.roomId||"",onChange:P=>{U({...R,roomId:P.target.value}),fe({...R,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),s.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[R.id&&l.jsx("button",{onClick:()=>xe(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:_e,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(bA,{isOpen:rt,onClose:()=>dt(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>re("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:Re,onChange:P=>Ct(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Ot.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>re("clearDay",Re),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",Re]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:jt,onChange:P=>ue(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),A.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{jt&&re("clearClass",void 0,jt)},disabled:!jt,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(bA,{isOpen:ht.isOpen,onClose:()=>Ie({...ht,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>Ie({...ht,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:Qe,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),He&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(q,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>et(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:mt}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:D||v==="week"?"":v==="class"?"":v==="teacher"?"":""}),K.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:D||v==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:$.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),K.map(V=>{const W=O(P.id,V);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:W.map(J=>{const ee=r.find(St=>St.id===J.subjectId),te=n.find(St=>St.id===J.teacherId),Ne=A.find(St=>St.id===J.classId),Oe=s.find(St=>St.id===J.roomId),Ye=Oe?Oe.name:J.roomId,it=v==="teacher",_r=v==="subject"||v==="week"||D&&it?Ne==null?void 0:Ne.name:ee==null?void 0:ee.name,Er=it?Ne==null?void 0:Ne.name:te==null?void 0:te.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[_r,J.direction&&` (${J.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:Er}),Ye&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Ye})]})]},J.id)})},V)})]},P.id))})]})]})})]})]})},PO=()=>{var $e,se;const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:A,saveStaticData:s}=zA(),[i,a]=S.useState("teachers"),[o,c]=S.useState(!1),[d,h]=S.useState(null),[f,w]=S.useState({}),[y,B]=S.useState({}),[E,x]=S.useState({}),[m,I]=S.useState({}),[F,R]=S.useState("default"),[U,v]=S.useState(null),C=k=>{h(k||null),i==="teachers"?w(k?e.find(G=>G.id===k)??{}:{subjectIds:[],unavailableDates:[],shifts:[Be.First,Be.Second],telegramChatId:""}):i==="subjects"?B(k?t.find(G=>G.id===k)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?x(k?r.find(G=>G.id===k)??{}:{shift:Be.First,studentsCount:25}):i==="rooms"&&I(k?n.find(G=>G.id===k)??{}:{capacity:30,type:""}),c(!0)},_=async()=>{const k=()=>Math.random().toString(36).substr(2,9),G={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:y,key:"subjects"},classes:{list:r,form:E,key:"classes"},rooms:{list:n,form:m,key:"rooms"}};if(i==="bells"||!(i in G))return;const X=G[i],{list:oe,form:ae,key:Ve}=X;if(!ae.name)return;let Fe=[...oe];if(d)Fe=Fe.map(We=>We.id===d?{...We,...ae}:We);else{const We=oe.reduce((Te,pt)=>Math.max(Te,pt.order||0),0);Fe.push({...ae,id:k(),order:We+1})}await s({[Ve]:Fe}),c(!1)},Q=async k=>{if(window.confirm(" ?"))switch(i){case"teachers":await s({teachers:e.filter(G=>G.id!==k)});break;case"subjects":await s({subjects:t.filter(G=>G.id!==k)});break;case"classes":await s({classes:r.filter(G=>G.id!==k)});break;case"rooms":await s({rooms:n.filter(G=>G.id!==k)});break}},N=(k,G)=>{v(G),k.dataTransfer.effectAllowed="move"},L=k=>{k.preventDefault()},T=async(k,G)=>{if(U===null||U===G)return;const X=oe=>{const ae=[...oe],[Ve]=ae.splice(U,1);return ae.splice(G,0,Ve),ae.map((Fe,We)=>({...Fe,order:We}))};switch(i){case"teachers":{await s({teachers:X(e)});break}case"subjects":{await s({subjects:X(t)});break}case"classes":{await s({classes:X(r)});break}case"rooms":{await s({rooms:X(n)});break}}v(null)},Ke=(k,G)=>{const X=F;let oe=A.find(ae=>ae.shift===k&&ae.period===G&&ae.day===X);if(!oe&&X!=="default"){const ae=A.find(Ve=>Ve.shift===k&&Ve.period===G&&Ve.day==="default");return ae?{...ae,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return oe?{...oe,isInherited:!1}:{start:"",end:"",isInherited:!1}},He=async(k,G,X,oe)=>{let ae=[...A];const Ve=F,Fe=ae.findIndex(We=>We.shift===k&&We.period===G&&We.day===Ve);Fe>=0?ae[Fe]={...ae[Fe],[X]:oe}:ae.push({shift:k,period:G,[X]:oe,start:"00:00",end:"00:00",day:Ve}),await s({bellSchedule:ae})},et=k=>{const G=f.shifts||[];G.includes(k)?w({...f,shifts:G.filter(X=>X!==k)}):w({...f,shifts:[...G,k]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(k=>l.jsxs("button",{onClick:()=>a(k.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===k.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(q,{name:k.icon,size:18})," ",k.label]},k.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx(q,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(Xu,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((k,G)=>l.jsxs("div",{draggable:!0,onDragStart:X=>N(X,G),onDragOver:L,onDrop:X=>T(X,G),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:k.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(k.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(k.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx(q,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:k.birthDate?`: ${new Date(k.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[k.shifts.includes(Be.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),k.shifts.includes(Be.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:k.subjectIds.map(X=>{const oe=t.find(ae=>ae.id===X);return oe?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:oe.color,color:"#334155"},children:oe.name},X):null})})]},k.id))}),i==="subjects"&&l.jsx(Xu,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((k,G)=>l.jsxs("div",{draggable:!0,onDragStart:X=>N(X,G),onDragOver:L,onDrop:X=>T(X,G),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:k.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:k.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",k.difficulty,"  ",k.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(k.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(k.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:16})})]})]},k.id))}),i==="classes"&&l.jsx(Xu,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((k,G)=>l.jsxs("div",{draggable:!0,onDragStart:X=>N(X,G),onDragOver:L,onDrop:X=>T(X,G),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx(q,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:k.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[k.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${k.shift===Be.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[k.shift===Be.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(k.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>Q(k.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:14})})]})]},k.id))}),i==="rooms"&&l.jsx(Xu,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((k,G)=>l.jsxs("div",{draggable:!0,onDragStart:X=>N(X,G),onDragOver:L,onDrop:X=>T(X,G),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(q,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx(q,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:k.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",k.capacity,"  ",k.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(k.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx(q,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(k.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx(q,{name:"Trash2",size:16})})]})]},k.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(k=>l.jsx("button",{onClick:()=>R(k),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${F===k?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:k==="default"?"":k===""?"":""},k))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[Be.First,Be.Second].map(k=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${k===Be.First?"bg-indigo-600":"bg-purple-600"}`,children:k}),l.jsx("div",{className:"p-6 space-y-3",children:wn[k].map(G=>{const X=Ke(k,G);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${X.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:G}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:X.start,onChange:oe=>He(k,G,"start",oe.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:X.end,onChange:oe=>He(k,G,"end",oe.target.value)})]})]},G)})})]},k))})]})]}),l.jsx(bA,{isOpen:o,onClose:()=>c(!1),title:d?"":"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:k=>w({...f,name:k.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:k=>w({...f,birthDate:k.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:k=>w({...f,telegramChatId:k.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:($e=f.shifts)==null?void 0:$e.includes(Be.First),onChange:()=>et(Be.First)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(se=f.shifts)==null?void 0:se.includes(Be.Second),onChange:()=>et(Be.Second)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(k=>{var G;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(G=f.subjectIds)==null?void 0:G.includes(k.id),onChange:X=>{const oe=f.subjectIds||[];w({...f,subjectIds:X.target.checked?[...oe,k.id]:oe.filter(ae=>ae!==k.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:k.name})]},k.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:y.name||"",onChange:k=>B({...y,name:k.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:y.color||"#ffffff",onChange:k=>B({...y,color:k.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.difficulty||5,onChange:k=>B({...y,difficulty:parseInt(k.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:y.requiredRoomType,onChange:k=>B({...y,requiredRoomType:k.target.value}),children:Pv.map(k=>l.jsx("option",{value:k,children:k},k))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:E.name||"",onChange:k=>x({...E,name:k.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:E.studentsCount||25,onChange:k=>x({...E,studentsCount:parseInt(k.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>x({...E,shift:Be.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===Be.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>x({...E,shift:Be.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${E.shift===Be.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:m.name||"",onChange:k=>I({...m,name:k.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.capacity||30,onChange:k=>I({...m,capacity:parseInt(k.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:m.type,onChange:k=>I({...m,type:k.target.value}),children:Pv.map(k=>l.jsx("option",{value:k,children:k},k))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:_,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},LO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:A,saveStaticData:s}=zA(),{schedule1:i,schedule2:a,substitutions:o,saveScheduleData:c}=Ha(),d=Ys(),[h,f]=S.useState(new Date().toISOString().split("T")[0]),[w,y]=S.useState(!1),[B,E]=S.useState(null),[x,m]=S.useState(!1),[I,F]=S.useState(!1),[R,U]=S.useState(null),[v,C]=S.useState(""),[_,Q]=S.useState(!1),[N,L]=S.useState(""),[T,Ke]=S.useState(""),[He,et]=S.useState("all"),[$e,se]=S.useState(""),[k,G]=S.useState(""),[X,oe]=S.useState(""),[ae,Ve]=S.useState(""),[Fe,We]=S.useState([]),[Te,pt]=S.useState(!1),[tr,rt]=S.useState(!1),[dt,ht]=S.useState(!1),Ie=S.useMemo(()=>{const D=new Date(h).getMonth();return D>=0&&D<=4?a:i},[h,i,a]);S.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(E(d.state.subParams),oe(""),Ve(""),We([]),pt(!1),rt(!1),ht(!1),y(!0),window.history.replaceState({},document.title))},[d.state]),S.useEffect(()=>{if(w&&B){const D=o.find(K=>K.scheduleItemId===B.scheduleItemId&&K.date===h);We(D?D.refusals||[]:[]),pt(!1),rt(!1),ht(!1)}},[w,B,o,h]);const Re=S.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:Ot[D-1]},[h]),Ct=S.useMemo(()=>e.filter(D=>{const K=D.name.toLowerCase().includes(T.toLowerCase()),$=He==="all"?!0:D.shifts.includes(He);return K&&$}),[e,T,He]),jt=S.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),ue=S.useMemo(()=>{if(!Re)return[];const D=jt.map(re=>re.id),K=Ie.filter(re=>re.day===Re&&D.includes(re.teacherId)),O=o.filter(re=>re.date===h).map(re=>re.scheduleItemId),pe=Ie.filter(re=>O.includes(re.id)),he=[...K];return pe.forEach(re=>{he.find(Qe=>Qe.id===re.id)||he.push(re)}),he.sort((re,Qe)=>re.period-Qe.period)},[Ie,Re,jt,o,h]),ne=D=>{var $;const K=e.find(O=>O.id===D);U(D),C((($=K==null?void 0:K.absenceReasons)==null?void 0:$[h])||""),m(!0)},Ee=S.useCallback(async()=>{let D=[...e];const K=D.findIndex(O=>O.id===R);if(K===-1)return;const $={...D[K]};$.unavailableDates.includes(h)||($.unavailableDates=[...$.unavailableDates,h]),$.absenceReasons||($.absenceReasons={}),$.absenceReasons[h]=v,D[K]=$,await s({teachers:D}),m(!1)},[e,R,h,v,s]),ke=S.useCallback(async D=>{let K=[...e];const $=K.findIndex(pe=>pe.id===D);if($===-1)return;const O={...K[$]};O.unavailableDates=O.unavailableDates.filter(pe=>pe!==h),O.absenceReasons&&delete O.absenceReasons[h],K[$]=O,await s({teachers:K})},[e,h,s]),le=S.useCallback(async(D,K=!1)=>{if(!B){alert(":   .    . ,   .");return}const $=[...o],O=Ie.find(re=>re.id===B.scheduleItemId);if(!O){alert(":     . ,       .");return}const pe=$.filter(re=>!(re.scheduleItemId===B.scheduleItemId&&re.date===h)),he={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:B.scheduleItemId,originalTeacherId:O.teacherId,replacementTeacherId:D,replacementRoomId:X||void 0,isMerger:K,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&ae?ae:void 0,refusals:Fe};pe.push(he),await c({substitutions:pe}),y(!1),se(""),oe(""),Ve(""),We([]),E(null)},[B,h,X,Ie,o,e,ae,Fe,c]),je=S.useCallback(async D=>{if(!B||!Re)return;const K=Ie.filter(O=>O.classId===D&&O.day===Re&&O.period===B.period&&O.shift===B.shift);if(K.length===0){alert("    .");return}const $=o.filter(O=>!(O.scheduleItemId===B.scheduleItemId&&O.date===h));K.forEach(O=>{const pe={id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:B.scheduleItemId,originalTeacherId:B.teacherId,replacementTeacherId:O.teacherId,replacementClassId:O.classId,replacementSubjectId:O.subjectId,isMerger:!0,replacementRoomId:O.roomId,lessonAbsenceReason:ae||void 0};$.push(pe)}),await c({substitutions:$}),y(!1),se(""),oe(""),Ve(""),E(null),rt(!1)},[B,h,Re,Ie,o,ae,c]),fe=S.useCallback(async D=>{if(!B)return;const K=Ie.find(P=>P.id===B.scheduleItemId),$=Ie.find(P=>P.id===D);if(!K||!$){alert(":     .");return}const O=[...o];let pe;X?pe=X:pe=dt?K.roomId:$.roomId;const he=dt?$.roomId:K.roomId,re=O.findIndex(P=>P.scheduleItemId===K.id&&P.date===h),Qe={id:re>=0?O[re].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:K.id,originalTeacherId:K.teacherId,replacementTeacherId:K.teacherId,replacementClassId:$.classId,replacementSubjectId:$.subjectId,replacementRoomId:pe!==K.roomId?pe:void 0};re>=0?O[re]=Qe:O.push(Qe);const de=O.findIndex(P=>P.scheduleItemId===$.id&&P.date===h),Pe={id:de>=0?O[de].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:$.id,originalTeacherId:$.teacherId,replacementTeacherId:$.teacherId,replacementClassId:K.classId,replacementSubjectId:K.subjectId,replacementRoomId:he!==$.roomId?he:void 0};de>=0?O[de]=Pe:O.push(Pe),await c({substitutions:O}),y(!1),E(null),oe(""),pt(!1),ht(!1)},[B,Ie,o,h,c,X,dt]),ie=S.useCallback(async D=>{const K=o.filter($=>!($.scheduleItemId===D&&$.date===h));await c({substitutions:K})},[o,h,c]),ge=S.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const K=o.some(O=>O.date===h&&O.replacementTeacherId!=="conducted"),$=(O,pe)=>{const re=ue.filter(Qe=>Qe.shift===pe).filter(Qe=>{const de=o.filter(Pe=>Pe.scheduleItemId===Qe.id&&Pe.date===h);return de.length>0&&de.some(Pe=>Pe.replacementTeacherId!=="conducted")});re.length>0&&(D+=`
 *${O.toUpperCase()}*
`,re.forEach(Qe=>{var P;const de=o.filter(V=>V.scheduleItemId===Qe.id&&V.date===h);if(de.some(V=>V.isMerger)){const V=r.find(nt=>nt.id===Qe.classId),W=t.find(nt=>nt.id===Qe.subjectId),J=e.find(nt=>nt.id===Qe.teacherId),ee=(J==null?void 0:J.name)||"?",te=de.map(nt=>{var ar;return(ar=e.find(_r=>_r.id===nt.replacementTeacherId))==null?void 0:ar.name}).filter(Boolean).join(", "),Ne=de[0],Oe=Ne!=null&&Ne.replacementClassId?r.find(nt=>nt.id===Ne.replacementClassId):null;let Ye=` ${V==null?void 0:V.name} (${Qe.period} ): ${W==null?void 0:W.name} -> ${te} (${Oe?`  ${Oe.name}`:""}) ( ${ee})`;const it=Ne==null?void 0:Ne.replacementRoomId;if(it){const nt=((P=n.find(ar=>ar.id===it))==null?void 0:P.name)||it;Ye+=`  . ${nt}`}D+=Ye+`
`}else de.forEach(V=>{var oi,rn,uA;if(V.replacementTeacherId==="conducted")return;const W=r.find(kt=>kt.id===Qe.classId),J=t.find(kt=>kt.id===Qe.subjectId),ee=e.find(kt=>kt.id===V.replacementTeacherId),te=e.find(kt=>kt.id===Qe.teacherId),Ne=((oi=n.find(kt=>kt.id===Qe.roomId))==null?void 0:oi.name)||Qe.roomId||"?",Oe=(rn=te==null?void 0:te.absenceReasons)==null?void 0:rn[h],Ye=V==null?void 0:V.lessonAbsenceReason,ar=(Ye===" "?Ye:null)||(Oe===" "?Oe:null),_r=(te==null?void 0:te.name)+(ar?` (${ar})`:""),Er=V!=null&&V.replacementRoomId?((uA=n.find(kt=>kt.id===V.replacementRoomId))==null?void 0:uA.name)||V.replacementRoomId:null,St=V!=null&&V.replacementClassId?r.find(kt=>kt.id===V.replacementClassId):null,tn=V!=null&&V.replacementSubjectId?t.find(kt=>kt.id===V.replacementSubjectId):null,Wr=St&&tn&&!V.isMerger;if(V.replacementTeacherId==="cancelled")D+=` ${W==null?void 0:W.name} (${Qe.period} ): ${J==null?void 0:J.name} (${_r}) ->  
`;else if(V.replacementTeacherId===V.originalTeacherId&&Er&&!St)D+=` ${W==null?void 0:W.name} (${Qe.period} ): ${J==null?void 0:J.name} (${te==null?void 0:te.name}) ->  ${Ne}  ${Er}
`;else if(Wr)D+=` ${W==null?void 0:W.name} (${Qe.period} ): ${J==null?void 0:J.name} ->  ${St==null?void 0:St.name} ${tn==null?void 0:tn.name} ( )${Er?`  . ${Er}`:""}
`;else{let kt=` ${W==null?void 0:W.name} (${Qe.period} ): ${J==null?void 0:J.name} -> ${ee==null?void 0:ee.name} ( ${_r})`;Er&&(kt+=`  . ${Er}`),D+=kt+`
`}})}),D+=`
`)};K?($(Be.First,Be.First),$(Be.Second,Be.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,o,ue,r,t,e,n]),_e=S.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;o.filter(he=>he.date===h).forEach(he=>{var Oe;const re=Ie.find(Ye=>Ye.id===he.scheduleItemId);if(!re)return;let Qe="Unknown";if(he.replacementTeacherId==="cancelled")Qe=" ";else if(he.replacementTeacherId==="conducted")Qe=" ";else{const Ye=e.find(it=>it.id===he.replacementTeacherId);Ye&&(Qe=Ye.name)}const de=t.find(Ye=>Ye.id===re.subjectId),Pe=r.find(Ye=>Ye.id===re.classId),P=he.date.replace(/-/g,""),V=e.find(Ye=>Ye.id===he.originalTeacherId),W=(Oe=V==null?void 0:V.absenceReasons)==null?void 0:Oe[h],J=he.lessonAbsenceReason,Ne=(J===" "?J:null)||(W===" "?W:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${P}
SUMMARY:: ${Pe==null?void 0:Pe.name} - ${de==null?void 0:de.name}
DESCRIPTION:: ${Qe}${he.isMerger?" ()":""}${Ne?` (: ${Ne})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const $=new Blob([D],{type:"text/calendar"}),O=URL.createObjectURL($),pe=document.createElement("a");pe.href=O,pe.download="substitutions.ics",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)},[h,o,Ie,e,t,r]),xe=S.useCallback(async()=>{if(!(A!=null&&A.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,K=!1;const $=new Set,O=[Be.First,Be.Second];for(const he of O){const Qe=ue.filter(de=>de.shift===he).filter(de=>o.some(Pe=>Pe.scheduleItemId===de.id&&Pe.date===h&&Pe.replacementTeacherId!=="conducted"));Qe.length>0&&(K=!0,D+=` *${he.toUpperCase()}*
`,Qe.forEach(de=>{var V;const Pe=o.filter(W=>W.scheduleItemId===de.id&&W.date===h);if(Pe.some(W=>W.isMerger)){const W=r.find(it=>it.id===de.classId),J=t.find(it=>it.id===de.subjectId),ee=e.find(it=>it.id===de.teacherId),te=Pe.map(it=>{var nt;return(nt=e.find(ar=>ar.id===it.replacementTeacherId))==null?void 0:nt.name}).filter(Boolean).join(", "),Ne=Pe[0],Oe=Ne!=null&&Ne.replacementClassId?r.find(it=>it.id===Ne.replacementClassId):null;ee!=null&&ee.telegramChatId&&$.add(ee.telegramChatId),Pe.forEach(it=>{const nt=e.find(ar=>ar.id===it.replacementTeacherId);nt!=null&&nt.telegramChatId&&$.add(nt.telegramChatId)});const Ye=Ne!=null&&Ne.replacementRoomId?((V=n.find(it=>it.id===Ne.replacementRoomId))==null?void 0:V.name)||Ne.replacementRoomId:"";D+=`${de.period}  (${W==null?void 0:W.name} ${J==null?void 0:J.name}): *${te}* (${Oe?`  ${Oe.name}`:""}). : ${Ye}
`}else Pe.forEach(W=>{var uA,kt,Ka;if(!W)return;const J=r.find(mr=>mr.id===de.classId),ee=t.find(mr=>mr.id===de.subjectId),te=e.find(mr=>mr.id===W.originalTeacherId),Ne=e.find(mr=>mr.id===W.replacementTeacherId),Oe=(uA=te==null?void 0:te.absenceReasons)==null?void 0:uA[h],Ye=W.lessonAbsenceReason,ar=(Ye===" "?Ye:null)||(Oe===" "?Oe:null),_r=(te==null?void 0:te.name)+(ar?` (${ar})`:""),Er=((kt=n.find(mr=>mr.id===de.roomId))==null?void 0:kt.name)||de.roomId||"",St=W.replacementRoomId?((Ka=n.find(mr=>mr.id===W.replacementRoomId))==null?void 0:Ka.name)||W.replacementRoomId:Er,tn=W.replacementClassId?r.find(mr=>mr.id===W.replacementClassId):null,Wr=W.replacementSubjectId?t.find(mr=>mr.id===W.replacementSubjectId):null,oi=tn&&Wr&&!W.isMerger;let rn=`${de.period}  (${J==null?void 0:J.name} ${ee==null?void 0:ee.name}${de.direction?` ${de.direction}`:""}): `;W.replacementTeacherId==="cancelled"?rn+=`* * ( ${_r})`:oi?(rn+=`  : ${tn==null?void 0:tn.name} ${Wr==null?void 0:Wr.name} ( ${J==null?void 0:J.name} ${ee==null?void 0:ee.name})`,St!==Er&&(rn+=`  . ${St}`)):W.replacementTeacherId===W.originalTeacherId?rn+=`: ${_r}.  : ${Er}  ${St}`:(rn+=`*${Ne==null?void 0:Ne.name}* ( *${_r}*)`,Er!==St?rn+=`. : ${Er}  ${St}`:St!==""&&(rn+=`. : ${St}`)),D+=`${rn}
`,te!=null&&te.telegramChatId&&$.add(te.telegramChatId),Ne!=null&&Ne.telegramChatId&&$.add(Ne.telegramChatId)})}),D+=`
`)}if(K||(D+=` .
`),jt.forEach(he=>{var Pe;const re=o.some(P=>P.date===h&&P.originalTeacherId===he.id&&P.replacementTeacherId!=="cancelled"&&P.replacementTeacherId!=="conducted"),Qe=(Pe=he.absenceReasons)==null?void 0:Pe[h],de=Qe===" "?Qe:"";he.telegramChatId&&!re&&he.unavailableDates.includes(h)&&($.add(he.telegramChatId),K?D+=`_:  ${he.name} ${de},        /._
`:D+=`_:  ${he.name} ${de},      ._
`)}),$.size===0){alert("    Telegram Chat ID   .");return}const pe=`https://api.telegram.org/bot${A.telegramToken}/sendMessage`;try{const he=Array.from($).map(re=>fetch(pe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:re,text:D,parse_mode:"Markdown"})}));await Promise.all(he),alert(`   ${$.size} !`)}catch(he){console.error("    Telegram:",he),alert("     Telegram.     .")}},[h,ue,o,r,t,e,n,jt,A==null?void 0:A.telegramToken]),ce=S.useCallback(async(D,K,$,O,pe,he)=>{const Qe=new Date(he).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),de=K.shift===Be.First?"1 ":"2 ",Pe=` *  *
${D.name}

 : ${Qe}
 : ${de}
 : ${$==null?void 0:$.name}
1 : ${K.period}
 : ${O==null?void 0:O.name}
 : ${pe||" "}`;if(A!=null&&A.telegramToken&&D.telegramChatId)try{const V=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:Pe,parse_mode:"Markdown"})})).json();V.ok?alert(`   Telegram  ${D.name}!`):V.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${V.description}`)}catch(P){alert("   Telegram (/)."),console.error(P)}else navigator.share?navigator.share({title:"",text:Pe}).catch(()=>{}):(navigator.clipboard.writeText(Pe),alert(" ! (Telegram     Chat ID)"))},[A==null?void 0:A.telegramToken]),ze=S.useMemo(()=>B?new Set(o.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const K=Ie.find($=>$.id===D.scheduleItemId);return K&&K.period===B.period&&K.shift===B.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[o,Ie,h,B]),Xe=S.useMemo(()=>{if(!B||!Re)return[];const D=h.substring(0,7);return e.filter(K=>K.name.toLowerCase().includes($e.toLowerCase())).map(K=>{const $=K.unavailableDates.includes(h),O=Ie.some(Pe=>Pe.teacherId===K.id&&Pe.day===Re&&Pe.period===B.period&&Pe.shift===B.shift),pe=ze.has(K.id),he=O||pe,re=K.subjectIds.includes(B.subjectId),Qe=o.filter(Pe=>Pe.replacementTeacherId===K.id&&Pe.date.startsWith(D)).length;let de=0;return $&&(de-=1e3),he&&(de-=100),re&&(de+=50),{teacher:K,isAbsent:$,isBusy:he,isSpecialist:re,score:de,subsCount:Qe}}).sort((K,$)=>$.score-K.score)},[e,B,h,$e,Re,Ie,o,ze]),ft=S.useMemo(()=>{if(!B||!Re)return[];const D=Ie.filter($=>$.day===Re&&$.period===B.period&&$.shift===B.shift&&$.classId!==B.classId),K=new Map;return D.forEach($=>{const O=r.find(re=>re.id===$.classId),pe=e.find(re=>re.id===$.teacherId),he=t.find(re=>re.id===$.subjectId);if(O&&pe){K.has(O.id)||K.set(O.id,{classEntity:O,teachers:[],subjects:[]});const re=K.get(O.id);re.teachers.includes(pe.name)||re.teachers.push(pe.name),he&&!re.subjects.includes(he.name)&&re.subjects.push(he.name)}}),Array.from(K.values())},[Ie,B,Re,r,e,t]),ye=S.useMemo(()=>{var he;if(!B)return null;const D=Ie.find(re=>re.id===B.scheduleItemId);if(!D)return null;const K=r.find(re=>re.id===D.classId),$=t.find(re=>re.id===D.subjectId),O=e.find(re=>re.id===D.teacherId),pe=((he=O==null?void 0:O.unavailableDates)==null?void 0:he.includes(h))||!1;return{className:K==null?void 0:K.name,subjectName:$==null?void 0:$.name,teacherName:O==null?void 0:O.name,teacherId:O==null?void 0:O.id,period:D.period,roomId:D.roomId,isTeacherAbsent:pe}},[B,Ie,r,t,e,h]),Ce=S.useMemo(()=>!(ye!=null&&ye.teacherId)||!Re?[]:Ie.filter(D=>D.teacherId===ye.teacherId&&D.day===Re&&D.id!==(B==null?void 0:B.scheduleItemId)).sort((D,K)=>D.period-K.period),[Ie,ye,Re,B]),Ge=S.useMemo(()=>{if(!Re||k.length<2)return[];const D=k.toLowerCase(),K=e.filter(pe=>pe.name.toLowerCase().includes(D)),$=r.filter(pe=>pe.name.toLowerCase().includes(D)),O=[];return K.forEach(pe=>{Ie.filter(re=>re.teacherId===pe.id&&re.day===Re).forEach(re=>{const Qe=r.find(Pe=>Pe.id===re.classId),de=t.find(Pe=>Pe.id===re.subjectId);O.push({...re,entityName:pe.name,subInfo:Qe==null?void 0:Qe.name,subjectName:de==null?void 0:de.name})})}),$.forEach(pe=>{Ie.filter(re=>re.classId===pe.id&&re.day===Re).forEach(re=>{if(O.find(Pe=>Pe.id===re.id))return;const Qe=e.find(Pe=>Pe.id===re.teacherId),de=t.find(Pe=>Pe.id===re.subjectId);O.push({...re,entityName:pe.name,subInfo:Qe==null?void 0:Qe.name,subjectName:de==null?void 0:de.name})})}),O.sort((pe,he)=>pe.period-he.period)},[k,Re,e,r,Ie,t]),tt=(D,K)=>{let $=!1;if(K){if(!window.confirm("     .     ?"))return;$=!0}le(D,$)},mt=(D,K)=>{K.stopPropagation(),Fe.includes(D)?We(Fe.filter($=>$!==D)):We([...Fe,D])};return l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>Q(!_),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${_?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx(q,{name:"History",size:16})," ",_?" ":" "]})]}),_?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:N,onChange:D=>L(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:o.filter(D=>{var K;return D.date.includes(N)||((K=e.find($=>$.id===D.replacementTeacherId))==null?void 0:K.name.toLowerCase().includes(N.toLowerCase()))}).map(D=>{const K=e.find(O=>O.id===D.replacementTeacherId),$=n.find(O=>O.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[(K==null?void 0:K.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),$&&l.jsxs("div",{className:"text-indigo-500",children:[". ",$.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>et("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${He==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>et(Be.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${He===Be.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>et(Be.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${He===Be.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:T,onChange:D=>Ke(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[Ct.map(D=>{const K=D.unavailableDates.includes(h),$=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${K?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${K?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>K?ke(D.id):ne(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${K?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:K?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(O=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:O===Be.First?"1":"2"},O))}),K&&l.jsxs("div",{className:"flex items-center gap-1",children:[$&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:$}),l.jsx("button",{onClick:()=>ne(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx(q,{name:"Edit2",size:14})})]})]})]},D.id)}),Ct.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",ue.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:_e,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx(q,{name:"Calendar",size:16})," iCal"]}),ue.length>0&&l.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx(q,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:xe,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{G(""),F(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx(q,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:ue.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx(q,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):ue.map(D=>{var Ne;const K=o.filter(Oe=>Oe.scheduleItemId===D.id&&Oe.date===h),$=K.length>0,O=$?K[0]:null,pe=O&&O.replacementTeacherId!=="cancelled"&&O.replacementTeacherId!=="conducted"?e.find(Oe=>Oe.id===O.replacementTeacherId):null,he=e.find(Oe=>Oe.id===D.teacherId),re=t.find(Oe=>Oe.id===D.subjectId),Qe=r.find(Oe=>Oe.id===D.classId),de=n.find(Oe=>Oe.id===D.roomId),Pe=de?de.name:D.roomId,P=O==null?void 0:O.replacementRoomId,V=P?((Ne=n.find(Oe=>Oe.id===P))==null?void 0:Ne.name)||P:void 0,W=O!=null&&O.replacementClassId?r.find(Oe=>Oe.id===O.replacementClassId):null,J=O!=null&&O.replacementSubjectId?t.find(Oe=>Oe.id===O.replacementSubjectId):null;let ee=null;if((O==null?void 0:O.replacementTeacherId)==="conducted")ee=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ie(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(q,{name:"X",size:16})})]});else if((O==null?void 0:O.replacementTeacherId)==="cancelled")ee=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>ie(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx(q,{name:"X",size:16})})]});else if($){const Oe=(O==null?void 0:O.replacementTeacherId)===(O==null?void 0:O.originalTeacherId)&&P&&!W,Ye=W&&J&&!(O!=null&&O.isMerger),it=K.map(nt=>{var ar;return(ar=e.find(_r=>_r.id===nt.replacementTeacherId))==null?void 0:ar.name}).filter(Boolean).join(", ");ee=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:Oe?" ":Ye?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm max-w-[200px] truncate",title:it,children:Oe?"  ":Ye?` ${W==null?void 0:W.name}`:it}),(O==null?void 0:O.isMerger)&&l.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",W?`(  ${W.name})`:""]}),(O==null?void 0:O.lessonAbsenceReason)&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",O.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>{(pe||he)&&ce(pe||he,D,Qe,re,V||Pe||void 0,h)},className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx(q,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>ie(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx(q,{name:"UserX",size:18})})]})]})}else ee=l.jsxs("button",{onClick:()=>{E({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),y(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx(q,{name:"ArrowRight",size:16})]});const te=!jt.find(Oe=>Oe.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:Qe==null?void 0:Qe.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===Be.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:re==null?void 0:re.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:te?"font-semibold":"line-through decoration-red-400 decoration-2",children:he==null?void 0:he.name}),Pe&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Pe," ",V&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",V]})]}),(O==null?void 0:O.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",O.lessonAbsenceReason,")"]}),W&&J&&!(O!=null&&O.isMerger)&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",W.name]})]})]})]}),ee]},D.id)})})]}),l.jsxs(bA,{isOpen:w,onClose:()=>y(!1),title:" ",children:[ye&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[ye.className,"  ",ye.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:ye.subjectName}),l.jsx("span",{className:ye.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:ye.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:X,onChange:D=>oe(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),n.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),ye&&!ye.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:ae,onChange:D=>Ve(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>le("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>le("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>rt(!tr),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[l.jsx(q,{name:"Users",size:16})," :    (  )"]}),tr&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),ft.length===0?l.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):ft.map(D=>l.jsxs("button",{onClick:()=>je(D.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.classEntity.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D.subjects.join(", ")," ",l.jsx("span",{className:"text-slate-400",children:"|"})," ",D.teachers.join(", ")]})]},D.classEntity.id))]})]}),(ye==null?void 0:ye.teacherId)&&!ye.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>le(ye.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),Ce.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>pt(!Te),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx(q,{name:"RotateCw",size:16}),"     "]}),Te&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:dt,onChange:D=>ht(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),Ce.map(D=>{const K=r.find(O=>O.id===D.classId),$=t.find(O=>O.id===D.subjectId);return l.jsxs("button",{onClick:()=>fe(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",K==null?void 0:K.name," - ",$==null?void 0:$.name]},D.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:$e,onChange:D=>se(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[Xe.map(({teacher:D,isAbsent:K,isBusy:$,isSpecialist:O,subsCount:pe})=>{const he=Fe.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${K?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":he?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":$?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${O?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:O?l.jsx(q,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[O&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),$&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),K&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),he&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${pe>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",pe]})]})]})]}),!K&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:re=>mt(D.id,re),className:`px-3 py-1 text-xs font-bold rounded border ${he?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:he?"":""}),!he&&!$&&l.jsx("button",{onClick:()=>tt(D.id,$),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!he&&$&&l.jsx("button",{onClick:()=>tt(D.id,$),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),Xe.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(bA,{isOpen:I,onClose:()=>F(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx(q,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:k,onChange:D=>G(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[Ge.map(D=>{var K;return l.jsxs("button",{onClick:()=>{F(!1),E({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),y(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((K=n.find($=>$.id===D.roomId))==null?void 0:K.name)||D.roomId]})]})]},D.id)}),k.length>1&&Ge.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(bA,{isOpen:x,onClose:()=>m(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:v,onChange:D=>C(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:Ee,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},jO=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:A}=zA(),{schedule1:s,schedule2:i}=Ha(),[a,o]=S.useState("teachers"),[c,d]=S.useState(new Date().toISOString().split("T")[0]),[h,f]=S.useState(Be.First),[w,y]=S.useState(1),[B,E]=S.useState(Be.First),[x,m]=S.useState(1),[I,F]=S.useState(""),[R,U]=S.useState(""),v=S.useMemo(()=>{const T=new Date(c).getMonth();return T>=0&&T<=4?i:s},[c,s,i]);S.useEffect(()=>{n&&(F(n.telegramToken||""),U(n.feedbackChatId||""))},[n]),S.useEffect(()=>{y(h===Be.First?1:0)},[h]),S.useEffect(()=>{m(B===Be.First?1:0)},[B]);const C=S.useMemo(()=>{const T=new Date(c).getDay();return T===0||T===6?null:Ot[T-1]},[c]),_=wn[h],Q=S.useMemo(()=>C?e.filter(T=>T.shifts&&!T.shifts.includes(h)||T.unavailableDates.includes(c)?!1:!v.some(He=>He.teacherId===T.id&&He.day===C&&He.period>w&&He.shift===h)).sort((T,Ke)=>T.name.localeCompare(Ke.name)):[],[e,c,C,w,h,v]),N=S.useMemo(()=>{if(!C)return[];const T=new Set;return v.forEach(He=>{He.day===C&&He.period===x&&He.shift===B&&He.roomId&&T.add(He.roomId)}),r.filter(He=>!T.has(He.id)).map(He=>He.name)},[v,r,C,x,B]),L=async()=>{await A({settings:{...n,telegramToken:I,feedbackChatId:R}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(q,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>o("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>o("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${a==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),a!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:T=>d(T.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),a==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(Be.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===Be.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(Be.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===Be.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:_.map(T=>l.jsx("button",{onClick:()=>y(T),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${w===T?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:T},T))})]})]}),a==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>E(Be.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===Be.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>E(Be.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${B===Be.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:wn[B].map(T=>l.jsx("button",{onClick:()=>m(T),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${x===T?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:T},T))})]})]}),a==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:I,onChange:T=>F(T.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:R,onChange:T=>U(T.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:L,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Save",size:20}),"  "]})]})]}),a==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[Q.map(T=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx(q,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:T.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:T.subjectIds.slice(0,2).map(Ke=>{const He=t.find(et=>et.id===Ke);return He?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:He.name},Ke):null})})]})]},T.id)),Q.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",w,"   ",h]})]}),a==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[N.map(T=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx(q,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:T}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},T)),N.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx(q,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var e0=function(t,e){return e0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(r[A]=n[A])},e0(t,e)};function Wn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");e0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var t0=function(){return t0=Object.assign||function(e){for(var r,n=1,A=arguments.length;n<A;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},t0.apply(this,arguments)};function qr(t,e,r,n){function A(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(d){try{c(n.next(d))}catch(h){i(h)}}function o(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):A(d.value).then(a,o)}c((n=n.apply(t,[])).next())})}function Or(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,A,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(c){return function(d){return o([c,d])}}function o(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,A&&(s=c[0]&2?A.return:c[0]?A.throw||((s=A.return)&&s.call(A),0):A.next)&&!(s=s.call(A,c[1])).done)return s;switch(A=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,A=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],A=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Yu(t,e,r){if(arguments.length===2)for(var n=0,A=e.length,s;n<A;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||e)}var PA=function(){function t(e,r,n,A){this.left=e,this.top=r,this.width=n,this.height=A}return t.prototype.add=function(e,r,n,A){return new t(this.left+e,this.top+r,this.width+n,this.height+A)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(A){return A.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Yf=function(t,e){return PA.fromClientRect(t,e.getBoundingClientRect())},MO=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),A=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new PA(0,0,n,A)},Zf=function(t){for(var e=[],r=0,n=t.length;r<n;){var A=t.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),r--)}else e.push(A)}return e},Ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],A=-1,s="";++A<r;){var i=t[A];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(A+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},FC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zu=0;Zu<FC.length;Zu++)OO[FC.charCodeAt(Zu)]=Zu;var QC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ed=0;ed<QC.length;ed++)bl[QC.charCodeAt(ed)]=ed;var HO=function(t){var e=t.length*.75,r=t.length,n,A=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)s=bl[t.charCodeAt(n)],i=bl[t.charCodeAt(n+1)],a=bl[t.charCodeAt(n+2)],o=bl[t.charCodeAt(n+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|a>>2,d[A++]=(a&3)<<6|o&63;return c},VO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},KO=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Ui=5,kB=11,sp=2,GO=kB-Ui,PF=65536>>Ui,zO=1<<Ui,ip=zO-1,$O=1024>>Ui,WO=PF+$O,qO=WO,JO=32,XO=qO+JO,YO=65536>>kB,ZO=1<<GO,eH=ZO-1,UC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},tH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},rH=function(t,e){var r=HO(t),n=Array.isArray(r)?KO(r):new Uint32Array(r),A=Array.isArray(r)?VO(r):new Uint16Array(r),s=24,i=UC(A,s/2,n[4]/2),a=n[5]===2?UC(A,(s+n[4])/2):tH(n,Math.ceil((s+n[4])/4));return new nH(n[0],n[1],n[2],n[3],i,a)},nH=function(){function t(e,r,n,A,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Ui],r=(r<<sp)+(e&ip),this.data[r];if(e<=65535)return r=this.index[PF+(e-55296>>Ui)],r=(r<<sp)+(e&ip),this.data[r];if(e<this.highStart)return r=XO-YO+(e>>kB),r=this.index[r],r+=e>>Ui&eH,r=this.index[r],r=(r<<sp)+(e&ip),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),SC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var td=0;td<SC.length;td++)AH[SC.charCodeAt(td)]=td;var sH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",kC=50,iH=1,LF=2,jF=3,oH=4,aH=5,RC=7,MF=8,NC=9,ws=10,r0=11,DC=12,n0=13,lH=14,Tl=15,A0=16,rd=17,hl=18,cH=19,PC=20,s0=21,fl=22,op=23,uo=24,pn=25,Fl=26,Ql=27,ho=28,uH=29,xi=30,dH=31,nd=32,Ad=33,i0=34,o0=35,a0=36,Nc=37,l0=38,$d=39,Wd=40,ap=41,OF=42,hH=43,fH=[9001,65288],HF="!",at="",sd="",c0=rH(sH),fA=[xi,a0],u0=[iH,LF,jF,aH],VF=[ws,MF],LC=[Ql,Fl],gH=u0.concat(VF),jC=[l0,$d,Wd,i0,o0],pH=[Tl,n0],mH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],A=[];return t.forEach(function(s,i){var a=c0.get(s);if(a>kC?(A.push(!0),a-=kC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(A0);if(a===oH||a===r0){if(i===0)return n.push(i),r.push(xi);var o=r[i-1];return gH.indexOf(o)===-1?(n.push(n[i-1]),r.push(o)):(n.push(i),r.push(xi))}if(n.push(i),a===dH)return r.push(e==="strict"?s0:Nc);if(a===OF||a===uH)return r.push(xi);if(a===hH)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Nc):r.push(xi);r.push(a)}),[n,r,A]},lp=function(t,e,r,n){var A=n[r];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===e)return!0;if(i!==ws)break}if(A===ws)for(var s=r;s>0;){s--;var a=n[s];if(Array.isArray(t)?t.indexOf(a)!==-1:t===a)for(var o=r;o<=n.length;){o++;var i=n[o];if(i===e)return!0;if(i!==ws)break}if(a!==ws)break}return!1},MC=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===ws)r--;else return n}return 0},wH=function(t,e,r,n,A){if(r[n]===0)return at;var s=n-1;if(Array.isArray(A)&&A[s]===!0)return at;var i=s-1,a=s+1,o=e[s],c=i>=0?e[i]:0,d=e[a];if(o===LF&&d===jF)return at;if(u0.indexOf(o)!==-1)return HF;if(u0.indexOf(d)!==-1||VF.indexOf(d)!==-1)return at;if(MC(s,e)===MF)return sd;if(c0.get(t[s])===r0||(o===nd||o===Ad)&&c0.get(t[a])===r0||o===RC||d===RC||o===NC||[ws,n0,Tl].indexOf(o)===-1&&d===NC||[rd,hl,cH,uo,ho].indexOf(d)!==-1||MC(s,e)===fl||lp(op,fl,s,e)||lp([rd,hl],s0,s,e)||lp(DC,DC,s,e))return at;if(o===ws)return sd;if(o===op||d===op)return at;if(d===A0||o===A0)return sd;if([n0,Tl,s0].indexOf(d)!==-1||o===lH||c===a0&&pH.indexOf(o)!==-1||o===ho&&d===a0||d===PC||fA.indexOf(d)!==-1&&o===pn||fA.indexOf(o)!==-1&&d===pn||o===Ql&&[Nc,nd,Ad].indexOf(d)!==-1||[Nc,nd,Ad].indexOf(o)!==-1&&d===Fl||fA.indexOf(o)!==-1&&LC.indexOf(d)!==-1||LC.indexOf(o)!==-1&&fA.indexOf(d)!==-1||[Ql,Fl].indexOf(o)!==-1&&(d===pn||[fl,Tl].indexOf(d)!==-1&&e[a+1]===pn)||[fl,Tl].indexOf(o)!==-1&&d===pn||o===pn&&[pn,ho,uo].indexOf(d)!==-1)return at;if([pn,ho,uo,rd,hl].indexOf(d)!==-1)for(var h=s;h>=0;){var f=e[h];if(f===pn)return at;if([ho,uo].indexOf(f)!==-1)h--;else break}if([Ql,Fl].indexOf(d)!==-1)for(var h=[rd,hl].indexOf(o)!==-1?i:s;h>=0;){var f=e[h];if(f===pn)return at;if([ho,uo].indexOf(f)!==-1)h--;else break}if(l0===o&&[l0,$d,i0,o0].indexOf(d)!==-1||[$d,i0].indexOf(o)!==-1&&[$d,Wd].indexOf(d)!==-1||[Wd,o0].indexOf(o)!==-1&&d===Wd||jC.indexOf(o)!==-1&&[PC,Fl].indexOf(d)!==-1||jC.indexOf(d)!==-1&&o===Ql||fA.indexOf(o)!==-1&&fA.indexOf(d)!==-1||o===uo&&fA.indexOf(d)!==-1||fA.concat(pn).indexOf(o)!==-1&&d===fl&&fH.indexOf(t[a])===-1||fA.concat(pn).indexOf(d)!==-1&&o===hl)return at;if(o===ap&&d===ap){for(var w=r[s],y=1;w>0&&(w--,e[w]===ap);)y++;if(y%2!==0)return at}return o===nd&&d===Ad?at:sd},BH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=mH(t,e.lineBreak),n=r[0],A=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(a){return[pn,xi,OF].indexOf(a)!==-1?Nc:a}));var i=e.wordBreak==="keep-all"?s.map(function(a,o){return a&&t[o]>=19968&&t[o]<=40959}):void 0;return[n,A,i]},yH=function(){function t(e,r,n,A){this.codePoints=e,this.required=r===HF,this.start=n,this.end=A}return t.prototype.slice=function(){return Ar.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),vH=function(t,e){var r=Zf(t),n=BH(r,e),A=n[0],s=n[1],i=n[2],a=r.length,o=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var d=at;c<a&&(d=wH(r,s,A,++c,i))===at;);if(d!==at||c===a){var h=new yH(r,d,o,c);return o=c,{value:h,done:!1}}return{done:!0,value:null}}}},xH=1,CH=2,uu=4,OC=8,Gh=10,HC=47,Xl=92,IH=9,_H=32,id=34,gl=61,EH=35,bH=36,TH=37,od=39,ad=40,pl=41,FH=95,nn=45,QH=33,UH=60,SH=62,kH=64,RH=91,NH=93,DH=61,PH=123,ld=63,LH=125,VC=124,jH=126,MH=128,KC=65533,cp=42,Ei=43,OH=44,HH=58,VH=59,Dc=46,KH=0,GH=8,zH=11,$H=14,WH=31,qH=127,Jn=-1,KF=48,GF=97,zF=101,JH=102,XH=117,YH=122,$F=65,WF=69,qF=70,ZH=85,eV=90,Vr=function(t){return t>=KF&&t<=57},tV=function(t){return t>=55296&&t<=57343},fo=function(t){return Vr(t)||t>=$F&&t<=qF||t>=GF&&t<=JH},rV=function(t){return t>=GF&&t<=YH},nV=function(t){return t>=$F&&t<=eV},AV=function(t){return rV(t)||nV(t)},sV=function(t){return t>=MH},cd=function(t){return t===Gh||t===IH||t===_H},zh=function(t){return AV(t)||sV(t)||t===FH},GC=function(t){return zh(t)||Vr(t)||t===nn},iV=function(t){return t>=KH&&t<=GH||t===zH||t>=$H&&t<=WH||t===qH},ns=function(t,e){return t!==Xl?!1:e!==Gh},ud=function(t,e,r){return t===nn?zh(e)||ns(e,r):zh(t)?!0:!!(t===Xl&&ns(t,e))},up=function(t,e,r){return t===Ei||t===nn?Vr(e)?!0:e===Dc&&Vr(r):Vr(t===Dc?e:t)},oV=function(t){var e=0,r=1;(t[e]===Ei||t[e]===nn)&&(t[e]===nn&&(r=-1),e++);for(var n=[];Vr(t[e]);)n.push(t[e++]);var A=n.length?parseInt(Ar.apply(void 0,n),10):0;t[e]===Dc&&e++;for(var s=[];Vr(t[e]);)s.push(t[e++]);var i=s.length,a=i?parseInt(Ar.apply(void 0,s),10):0;(t[e]===WF||t[e]===zF)&&e++;var o=1;(t[e]===Ei||t[e]===nn)&&(t[e]===nn&&(o=-1),e++);for(var c=[];Vr(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Ar.apply(void 0,c),10):0;return r*(A+a*Math.pow(10,-i))*Math.pow(10,o*d)},aV={type:2},lV={type:3},cV={type:4},uV={type:13},dV={type:8},hV={type:21},fV={type:9},gV={type:10},pV={type:11},mV={type:12},wV={type:14},dd={type:23},BV={type:1},yV={type:25},vV={type:24},xV={type:26},CV={type:27},IV={type:28},_V={type:29},EV={type:31},d0={type:32},JF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Zf(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==d0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case id:return this.consumeStringToken(id);case EH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),A=this.peekCodePoint(2);if(GC(r)||ns(n,A)){var s=ud(r,n,A)?CH:xH,i=this.consumeName();return{type:5,value:i,flags:s}}break;case bH:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),uV;break;case od:return this.consumeStringToken(od);case ad:return aV;case pl:return lV;case cp:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),wV;break;case Ei:if(up(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case OH:return cV;case nn:var a=e,o=this.peekCodePoint(0),c=this.peekCodePoint(1);if(up(a,o,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ud(a,o,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===nn&&c===SH)return this.consumeCodePoint(),this.consumeCodePoint(),vV;break;case Dc:if(up(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case HC:if(this.peekCodePoint(0)===cp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===cp&&(d=this.consumeCodePoint(),d===HC))return this.consumeToken();if(d===Jn)return this.consumeToken()}break;case HH:return xV;case VH:return CV;case UH:if(this.peekCodePoint(0)===QH&&this.peekCodePoint(1)===nn&&this.peekCodePoint(2)===nn)return this.consumeCodePoint(),this.consumeCodePoint(),yV;break;case kH:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),w=this.peekCodePoint(2);if(ud(h,f,w)){var i=this.consumeName();return{type:7,value:i}}break;case RH:return IV;case Xl:if(ns(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case NH:return _V;case DH:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),dV;break;case PH:return pV;case LH:return mV;case XH:case ZH:var y=this.peekCodePoint(0),B=this.peekCodePoint(1);return y===Ei&&(fo(B)||B===ld)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case VC:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),fV;if(this.peekCodePoint(0)===VC)return this.consumeCodePoint(),hV;break;case jH:if(this.peekCodePoint(0)===gl)return this.consumeCodePoint(),gV;break;case Jn:return d0}return cd(e)?(this.consumeWhiteSpace(),EV):Vr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):zh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ar(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();fo(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===ld&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var A=parseInt(Ar.apply(void 0,e.map(function(o){return o===ld?KF:o})),16),s=parseInt(Ar.apply(void 0,e.map(function(o){return o===ld?qF:o})),16);return{type:30,start:A,end:s}}var i=parseInt(Ar.apply(void 0,e),16);if(this.peekCodePoint(0)===nn&&fo(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var a=[];fo(r)&&a.length<6;)a.push(r),r=this.consumeCodePoint();var s=parseInt(Ar.apply(void 0,a),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ad?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ad?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jn)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===od||r===id){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jn||this.peekCodePoint(0)===pl)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),dd)}for(;;){var A=this.consumeCodePoint();if(A===Jn||A===pl)return{type:22,value:Ar.apply(void 0,e)};if(cd(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Jn||this.peekCodePoint(0)===pl?(this.consumeCodePoint(),{type:22,value:Ar.apply(void 0,e)}):(this.consumeBadUrlRemnants(),dd);if(A===id||A===od||A===ad||iV(A))return this.consumeBadUrlRemnants(),dd;if(A===Xl)if(ns(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),dd;else e.push(A)}},t.prototype.consumeWhiteSpace=function(){for(;cd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===pl||e===Jn)return;ns(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var A=Math.min(r,e);n+=Ar.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var A=this._value[n];if(A===Jn||A===void 0||A===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(A===Gh)return this._value.splice(0,n),BV;if(A===Xl){var s=this._value[n+1];s!==Jn&&s!==void 0&&(s===Gh?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):ns(A,s)&&(r+=this.consumeStringSlice(n),r+=Ar(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=uu,n=this.peekCodePoint(0);for((n===Ei||n===nn)&&e.push(this.consumeCodePoint());Vr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(n===Dc&&Vr(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=OC;Vr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),A=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===WF||n===zF)&&((A===Ei||A===nn)&&Vr(s)||Vr(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=OC;Vr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[oV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],A=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(ud(A,s,i)){var a=this.consumeName();return{type:15,number:r,flags:n,unit:a}}return A===TH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(fo(e)){for(var r=Ar(e);fo(this.peekCodePoint(0))&&r.length<6;)r+=Ar(this.consumeCodePoint());cd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||tV(n)||n>1114111?KC:n}return e===Jn?KC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(GC(r))e+=Ar(r);else if(ns(r,this.peekCodePoint(0)))e+=Ar(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),XF=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new JF;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||TV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?d0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),du=function(t){return t.type===15},Va=function(t){return t.type===17},It=function(t){return t.type===20},bV=function(t){return t.type===0},h0=function(t,e){return It(t)&&t.value===e},YF=function(t){return t.type!==31},va=function(t){return t.type!==31&&t.type!==4},lA=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},TV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Ws=function(t){return t.type===17||t.type===15},cr=function(t){return t.type===16||Ws(t)},ZF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},kr={type:17,number:0,flags:uu},RB={type:16,number:50,flags:uu},Bs={type:16,number:100,flags:uu},Ul=function(t,e,r){var n=t[0],A=t[1];return[Ft(n,e),Ft(typeof A<"u"?A:n,r)]},Ft=function(t,e){if(t.type===16)return t.number/100*e;if(du(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},eQ="deg",tQ="grad",rQ="rad",nQ="turn",eg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case eQ:return Math.PI*e.number/180;case tQ:return Math.PI/200*e.number;case rQ:return e.number;case nQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},AQ=function(t){return t.type===15&&(t.unit===eQ||t.unit===tQ||t.unit===rQ||t.unit===nQ)},sQ=function(t){var e=t.filter(It).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[kr,kr];case"to top":case"bottom":return Sn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[kr,Bs];case"to right":case"left":return Sn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Bs,Bs];case"to bottom":case"top":return Sn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Bs,kr];case"to left":case"right":return Sn(270)}return 0},Sn=function(t){return Math.PI*t/180},Rs={name:"color",parse:function(t,e){if(e.type===18){var r=FV[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3);return ys(parseInt(n+n,16),parseInt(A+A,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return ys(parseInt(n+n,16),parseInt(A+A,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6);return ys(parseInt(n,16),parseInt(A,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return ys(parseInt(n,16),parseInt(A,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var a=TA[e.value.toUpperCase()];if(typeof a<"u")return a}return TA.TRANSPARENT}},Ns=function(t){return(255&t)===0},wr=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,A=255&t>>24;return e<255?"rgba("+A+","+n+","+r+","+e/255+")":"rgb("+A+","+n+","+r+")"},ys=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},zC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},$C=function(t,e){var r=e.filter(va);if(r.length===3){var n=r.map(zC),A=n[0],s=n[1],i=n[2];return ys(A,s,i,1)}if(r.length===4){var a=r.map(zC),A=a[0],s=a[1],i=a[2],o=a[3];return ys(A,s,i,o)}return 0};function dp(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var WC=function(t,e){var r=e.filter(va),n=r[0],A=r[1],s=r[2],i=r[3],a=(n.type===17?Sn(n.number):eg.parse(t,n))/(Math.PI*2),o=cr(A)?A.number/100:0,c=cr(s)?s.number/100:0,d=typeof i<"u"&&cr(i)?Ft(i,1):1;if(o===0)return ys(c*255,c*255,c*255,1);var h=c<=.5?c*(o+1):c+o-c*o,f=c*2-h,w=dp(f,h,a+1/3),y=dp(f,h,a),B=dp(f,h,a-1/3);return ys(w*255,y*255,B*255,d)},FV={hsl:WC,hsla:WC,rgb:$C,rgba:$C},Yl=function(t,e){return Rs.parse(t,XF.create(e).parseComponentValue())},TA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},QV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(It(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},UV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tg=function(t,e){var r=Rs.parse(t,e[0]),n=e[1];return n&&cr(n)?{color:r,stop:n}:{color:r,stop:null}},qC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=kr),n.stop===null&&(n.stop=Bs);for(var A=[],s=0,i=0;i<t.length;i++){var a=t[i].stop;if(a!==null){var o=Ft(a,e);o>s?A.push(o):A.push(s),s=o}else A.push(null)}for(var c=null,i=0;i<A.length;i++){var d=A[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=A[c-1],w=(d-f)/(h+1),y=1;y<=h;y++)A[c+y-1]=w*y;c=null}}return t.map(function(B,E){var x=B.color;return{color:x,stop:Math.max(Math.min(1,A[E]/e),0)}})},SV=function(t,e,r){var n=e/2,A=r/2,s=Ft(t[0],e)-n,i=A-Ft(t[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},kV=function(t,e,r){var n=typeof t=="number"?t:SV(t,e,r),A=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,i=r/2,a=A/2,o=Math.sin(n-Math.PI/2)*a,c=Math.cos(n-Math.PI/2)*a;return[A,s-c,s+c,i-o,i+o]},jn=function(t,e){return Math.sqrt(t*t+e*e)},JC=function(t,e,r,n,A){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,a){var o=a[0],c=a[1],d=jn(r-o,n-c);return(A?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:a,optimumDistance:d}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},RV=function(t,e,r,n,A){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-A)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-A)));break;case 2:if(t.shape===0)s=i=Math.min(jn(e,r),jn(e,r-A),jn(e-n,r),jn(e-n,r-A));else if(t.shape===1){var a=Math.min(Math.abs(r),Math.abs(r-A))/Math.min(Math.abs(e),Math.abs(e-n)),o=JC(n,A,e,r,!0),c=o[0],d=o[1];s=jn(c-e,(d-r)/a),i=a*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-A)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-A)));break;case 3:if(t.shape===0)s=i=Math.max(jn(e,r),jn(e,r-A),jn(e-n,r),jn(e-n,r-A));else if(t.shape===1){var a=Math.max(Math.abs(r),Math.abs(r-A))/Math.max(Math.abs(e),Math.abs(e-n)),h=JC(n,A,e,r,!1),c=h[0],d=h[1];s=jn(c-e,(d-r)/a),i=a*s}break}return Array.isArray(t.size)&&(s=Ft(t.size[0],n),i=t.size.length===2?Ft(t.size[1],A):s),[s,i]},NV=function(t,e){var r=Sn(180),n=[];return lA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&i.value==="to"){r=sQ(A);return}else if(AQ(i)){r=eg.parse(t,i);return}}var a=tg(t,A);n.push(a)}),{angle:r,stops:n,type:1}},hd=function(t,e){var r=Sn(180),n=[];return lA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=sQ(A);return}else if(AQ(i)){r=(eg.parse(t,i)+Sn(270))%Sn(360);return}}var a=tg(t,A);n.push(a)}),{angle:r,stops:n,type:1}},DV=function(t,e){var r=Sn(180),n=[],A=1,s=0,i=3,a=[];return lA(e).forEach(function(o,c){var d=o[0];if(c===0){if(It(d)&&d.value==="linear"){A=1;return}else if(It(d)&&d.value==="radial"){A=2;return}}if(d.type===18){if(d.name==="from"){var h=Rs.parse(t,d.values[0]);n.push({stop:kr,color:h})}else if(d.name==="to"){var h=Rs.parse(t,d.values[0]);n.push({stop:Bs,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(va);if(f.length===2){var h=Rs.parse(t,f[1]),w=f[0];Va(w)&&n.push({stop:{type:16,number:w.number*100,flags:w.flags},color:h})}}}}),A===1?{angle:(r+Sn(180))%Sn(360),stops:n,type:A}:{size:i,shape:s,stops:n,position:a,type:A}},iQ="closest-side",oQ="farthest-side",aQ="closest-corner",lQ="farthest-corner",cQ="circle",uQ="ellipse",dQ="cover",hQ="contain",PV=function(t,e){var r=0,n=3,A=[],s=[];return lA(e).forEach(function(i,a){var o=!0;if(a===0){var c=!1;o=i.reduce(function(h,f){if(c)if(It(f))switch(f.value){case"center":return s.push(RB),h;case"top":case"left":return s.push(kr),h;case"right":case"bottom":return s.push(Bs),h}else(cr(f)||Ws(f))&&s.push(f);else if(It(f))switch(f.value){case cQ:return r=0,!1;case uQ:return r=1,!1;case"at":return c=!0,!1;case iQ:return n=0,!1;case dQ:case oQ:return n=1,!1;case hQ:case aQ:return n=2,!1;case lQ:return n=3,!1}else if(Ws(f)||cr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},o)}if(o){var d=tg(t,i);A.push(d)}}),{size:n,shape:r,stops:A,position:s,type:2}},fd=function(t,e){var r=0,n=3,A=[],s=[];return lA(e).forEach(function(i,a){var o=!0;if(a===0?o=i.reduce(function(d,h){if(It(h))switch(h.value){case"center":return s.push(RB),!1;case"top":case"left":return s.push(kr),!1;case"right":case"bottom":return s.push(Bs),!1}else if(cr(h)||Ws(h))return s.push(h),!1;return d},o):a===1&&(o=i.reduce(function(d,h){if(It(h))switch(h.value){case cQ:return r=0,!1;case uQ:return r=1,!1;case hQ:case iQ:return n=0,!1;case oQ:return n=1,!1;case aQ:return n=2,!1;case dQ:case lQ:return n=3,!1}else if(Ws(h)||cr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},o)),o){var c=tg(t,i);A.push(c)}}),{size:n,shape:r,stops:A,position:s,type:2}},LV=function(t){return t.type===1},jV=function(t){return t.type===2},NB={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=fQ[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function MV(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!fQ[t.name])}var fQ={"linear-gradient":NV,"-moz-linear-gradient":hd,"-ms-linear-gradient":hd,"-o-linear-gradient":hd,"-webkit-linear-gradient":hd,"radial-gradient":PV,"-moz-radial-gradient":fd,"-ms-radial-gradient":fd,"-o-radial-gradient":fd,"-webkit-radial-gradient":fd,"-webkit-gradient":DV},OV={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return va(n)&&MV(n)}).map(function(n){return NB.parse(t,n)})}},HV={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(It(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},VV={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return lA(e).map(function(r){return r.filter(cr)}).map(ZF)}},KV={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return lA(e).map(function(r){return r.filter(It).map(function(n){return n.value}).join(" ")}).map(GV)}},GV=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},qo;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(qo||(qo={}));var zV={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return lA(e).map(function(r){return r.filter($V)})}},$V=function(t){return It(t)||cr(t)},rg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},WV=rg("top"),qV=rg("right"),JV=rg("bottom"),XV=rg("left"),ng=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return ZF(r.filter(cr))}}},YV=ng("top-left"),ZV=ng("top-right"),e3=ng("bottom-right"),t3=ng("bottom-left"),Ag=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},r3=Ag("top"),n3=Ag("right"),A3=Ag("bottom"),s3=Ag("left"),sg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return du(r)?r.number:0}}},i3=sg("top"),o3=sg("right"),a3=sg("bottom"),l3=sg("left"),c3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},u3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},d3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(It).reduce(function(r,n){return r|h3(n.value)},0)}},h3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},f3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},g3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},$h;(function(t){t.NORMAL="normal",t.STRICT="strict"})($h||($h={}));var p3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return $h.STRICT;case"normal":default:return $h.NORMAL}}},m3={name:"line-height",initialValue:"normal",prefix:!1,type:4},XC=function(t,e){return It(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:cr(t)?Ft(t,e):e},w3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:NB.parse(t,e)}},B3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},f0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},ig=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},y3=ig("top"),v3=ig("right"),x3=ig("bottom"),C3=ig("left"),I3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(It).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},_3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},og=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},E3=og("top"),b3=og("right"),T3=og("bottom"),F3=og("left"),Q3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},U3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},S3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&h0(e[0],"none")?[]:lA(e).map(function(r){for(var n={color:TA.TRANSPARENT,offsetX:kr,offsetY:kr,blur:kr},A=0,s=0;s<r.length;s++){var i=r[s];Ws(i)?(A===0?n.offsetX=i:A===1?n.offsetY=i:n.blur=i,A++):n.color=Rs.parse(t,i)}return n})}},k3={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},R3={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=P3[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},N3=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},D3=function(t){var e=t.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=e[0],n=e[1];e[2],e[3];var A=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],a=e[13];return e[14],e[15],e.length===16?[r,n,A,s,i,a]:null},P3={matrix:N3,matrix3d:D3},YC={type:16,number:50,flags:uu},L3=[YC,YC],j3={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(cr);return r.length!==2?L3:[r[0],r[1]]}},M3={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Zl;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Zl||(Zl={}));var O3={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Zl.BREAK_ALL;case"keep-all":return Zl.KEEP_ALL;case"normal":default:return Zl.NORMAL}}},H3={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Va(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},gQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},V3={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Va(e)?e.number:1}},K3={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},G3={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(It).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},z3={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(A){switch(A.type){case 20:case 0:r.push(A.value);break;case 17:r.push(A.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},$3={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},W3={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Va(e))return e.number;if(It(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},q3={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(It).map(function(r){return r.value})}},J3={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},hr=function(t,e){return(t&e)!==0},X3={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},Y3={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],A=e.filter(YF),s=0;s<A.length;s++){var i=A[s],a=A[s+1];if(i.type===20){var o=a&&Va(a)?a.number:1;n.push({counter:i.value,increment:o})}}return n}},Z3={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(YF),A=0;A<n.length;A++){var s=n[A],i=n[A+1];if(It(s)&&s.value!=="none"){var a=i&&Va(i)?i.number:0;r.push({counter:s.value,reset:a})}}return r}},eK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(du).map(function(r){return gQ.parse(t,r)})}},tK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],A=e.filter(bV);if(A.length%2!==0)return null;for(var s=0;s<A.length;s+=2){var i=A[s].value,a=A[s+1].value;n.push({open:i,close:a})}return n}},ZC=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},rK={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&h0(e[0],"none")?[]:lA(e).map(function(r){for(var n={color:255,offsetX:kr,offsetY:kr,blur:kr,spread:kr,inset:!1},A=0,s=0;s<r.length;s++){var i=r[s];h0(i,"inset")?n.inset=!0:Ws(i)?(A===0?n.offsetX=i:A===1?n.offsetY=i:A===2?n.blur=i:n.spread=i,A++):n.color=Rs.parse(t,i)}return n})}},nK={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(It).forEach(function(A){switch(A.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(A){n.indexOf(A)===-1&&n.push(A)}),n}},AK={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},sK={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return du(e)?e.number:0}},iK=function(){function t(e,r){var n,A;this.animationDuration=Ue(e,eK,r.animationDuration),this.backgroundClip=Ue(e,QV,r.backgroundClip),this.backgroundColor=Ue(e,UV,r.backgroundColor),this.backgroundImage=Ue(e,OV,r.backgroundImage),this.backgroundOrigin=Ue(e,HV,r.backgroundOrigin),this.backgroundPosition=Ue(e,VV,r.backgroundPosition),this.backgroundRepeat=Ue(e,KV,r.backgroundRepeat),this.backgroundSize=Ue(e,zV,r.backgroundSize),this.borderTopColor=Ue(e,WV,r.borderTopColor),this.borderRightColor=Ue(e,qV,r.borderRightColor),this.borderBottomColor=Ue(e,JV,r.borderBottomColor),this.borderLeftColor=Ue(e,XV,r.borderLeftColor),this.borderTopLeftRadius=Ue(e,YV,r.borderTopLeftRadius),this.borderTopRightRadius=Ue(e,ZV,r.borderTopRightRadius),this.borderBottomRightRadius=Ue(e,e3,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ue(e,t3,r.borderBottomLeftRadius),this.borderTopStyle=Ue(e,r3,r.borderTopStyle),this.borderRightStyle=Ue(e,n3,r.borderRightStyle),this.borderBottomStyle=Ue(e,A3,r.borderBottomStyle),this.borderLeftStyle=Ue(e,s3,r.borderLeftStyle),this.borderTopWidth=Ue(e,i3,r.borderTopWidth),this.borderRightWidth=Ue(e,o3,r.borderRightWidth),this.borderBottomWidth=Ue(e,a3,r.borderBottomWidth),this.borderLeftWidth=Ue(e,l3,r.borderLeftWidth),this.boxShadow=Ue(e,rK,r.boxShadow),this.color=Ue(e,c3,r.color),this.direction=Ue(e,u3,r.direction),this.display=Ue(e,d3,r.display),this.float=Ue(e,f3,r.cssFloat),this.fontFamily=Ue(e,z3,r.fontFamily),this.fontSize=Ue(e,$3,r.fontSize),this.fontStyle=Ue(e,J3,r.fontStyle),this.fontVariant=Ue(e,q3,r.fontVariant),this.fontWeight=Ue(e,W3,r.fontWeight),this.letterSpacing=Ue(e,g3,r.letterSpacing),this.lineBreak=Ue(e,p3,r.lineBreak),this.lineHeight=Ue(e,m3,r.lineHeight),this.listStyleImage=Ue(e,w3,r.listStyleImage),this.listStylePosition=Ue(e,B3,r.listStylePosition),this.listStyleType=Ue(e,f0,r.listStyleType),this.marginTop=Ue(e,y3,r.marginTop),this.marginRight=Ue(e,v3,r.marginRight),this.marginBottom=Ue(e,x3,r.marginBottom),this.marginLeft=Ue(e,C3,r.marginLeft),this.opacity=Ue(e,V3,r.opacity);var s=Ue(e,I3,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=Ue(e,_3,r.overflowWrap),this.paddingTop=Ue(e,E3,r.paddingTop),this.paddingRight=Ue(e,b3,r.paddingRight),this.paddingBottom=Ue(e,T3,r.paddingBottom),this.paddingLeft=Ue(e,F3,r.paddingLeft),this.paintOrder=Ue(e,nK,r.paintOrder),this.position=Ue(e,U3,r.position),this.textAlign=Ue(e,Q3,r.textAlign),this.textDecorationColor=Ue(e,K3,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Ue(e,G3,(A=r.textDecorationLine)!==null&&A!==void 0?A:r.textDecoration),this.textShadow=Ue(e,S3,r.textShadow),this.textTransform=Ue(e,k3,r.textTransform),this.transform=Ue(e,R3,r.transform),this.transformOrigin=Ue(e,j3,r.transformOrigin),this.visibility=Ue(e,M3,r.visibility),this.webkitTextStrokeColor=Ue(e,AK,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ue(e,sK,r.webkitTextStrokeWidth),this.wordBreak=Ue(e,O3,r.wordBreak),this.zIndex=Ue(e,H3,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Ns(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return hr(this.display,4)||hr(this.display,33554432)||hr(this.display,268435456)||hr(this.display,536870912)||hr(this.display,67108864)||hr(this.display,134217728)},t}(),oK=function(){function t(e,r){this.content=Ue(e,X3,r.content),this.quotes=Ue(e,tK,r.quotes)}return t}(),eI=function(){function t(e,r){this.counterIncrement=Ue(e,Y3,r.counterIncrement),this.counterReset=Ue(e,Z3,r.counterReset)}return t}(),Ue=function(t,e,r){var n=new JF,A=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(A);var s=new XF(n.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,It(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return eg.parse(t,s.parseComponentValue());case"color":return Rs.parse(t,s.parseComponentValue());case"image":return NB.parse(t,s.parseComponentValue());case"length":var a=s.parseComponentValue();return Ws(a)?a:kr;case"length-percentage":var o=s.parseComponentValue();return cr(o)?o:kr;case"time":return gQ.parse(t,s.parseComponentValue())}break}},aK="data-html2canvas-debug",lK=function(t){var e=t.getAttribute(aK);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},g0=function(t,e){var r=lK(t);return r===1||e===r},cA=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,g0(r,3))debugger;this.styles=new iK(e,window.getComputedStyle(r,null)),w0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=Yf(this.context,r),g0(r,4)&&(this.flags|=16)}return t}(),cK="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",tI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gd=0;gd<tI.length;gd++)Sl[tI.charCodeAt(gd)]=gd;var uK=function(t){var e=t.length*.75,r=t.length,n,A=0,s,i,a,o;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)s=Sl[t.charCodeAt(n)],i=Sl[t.charCodeAt(n+1)],a=Sl[t.charCodeAt(n+2)],o=Sl[t.charCodeAt(n+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|a>>2,d[A++]=(a&3)<<6|o&63;return c},dK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},hK=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Si=5,DB=11,hp=2,fK=DB-Si,pQ=65536>>Si,gK=1<<Si,fp=gK-1,pK=1024>>Si,mK=pQ+pK,wK=mK,BK=32,yK=wK+BK,vK=65536>>DB,xK=1<<fK,CK=xK-1,rI=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},IK=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},_K=function(t,e){var r=uK(t),n=Array.isArray(r)?hK(r):new Uint32Array(r),A=Array.isArray(r)?dK(r):new Uint16Array(r),s=24,i=rI(A,s/2,n[4]/2),a=n[5]===2?rI(A,(s+n[4])/2):IK(n,Math.ceil((s+n[4])/4));return new EK(n[0],n[1],n[2],n[3],i,a)},EK=function(){function t(e,r,n,A,s,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Si],r=(r<<hp)+(e&fp),this.data[r];if(e<=65535)return r=this.index[pQ+(e-55296>>Si)],r=(r<<hp)+(e&fp),this.data[r];if(e<this.highStart)return r=yK-vK+(e>>DB),r=this.index[r],r+=e>>Si&CK,r=this.index[r],r=(r<<hp)+(e&fp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),nI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var pd=0;pd<nI.length;pd++)bK[nI.charCodeAt(pd)]=pd;var TK=1,gp=2,pp=3,AI=4,sI=5,FK=7,iI=8,mp=9,wp=10,oI=11,aI=12,lI=13,cI=14,Bp=15,QK=function(t){for(var e=[],r=0,n=t.length;r<n;){var A=t.charCodeAt(r++);if(A>=55296&&A<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),r--)}else e.push(A)}return e},UK=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],A=-1,s="";++A<r;){var i=t[A];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(A+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},SK=_K(cK),bn="",yp="",kK=function(t){return SK.get(t)},RK=function(t,e,r){var n=r-2,A=e[n],s=e[r-1],i=e[r];if(s===gp&&i===pp)return bn;if(s===gp||s===pp||s===AI||i===gp||i===pp||i===AI)return yp;if(s===iI&&[iI,mp,oI,aI].indexOf(i)!==-1||(s===oI||s===mp)&&(i===mp||i===wp)||(s===aI||s===wp)&&i===wp||i===lI||i===sI||i===FK||s===TK)return bn;if(s===lI&&i===cI){for(;A===sI;)A=e[--n];if(A===cI)return bn}if(s===Bp&&i===Bp){for(var a=0;A===Bp;)a++,A=e[--n];if(a%2===0)return bn}return yp},NK=function(t){var e=QK(t),r=e.length,n=0,A=0,s=e.map(kK);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=bn;n<r&&(i=RK(e,s,++n))===bn;);if(i!==bn||n===r){var a=UK.apply(null,e.slice(A,n));return A=n,{value:a,done:!1}}return{done:!0,value:null}}}},DK=function(t){for(var e=NK(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},PK=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var A=r.getBoundingClientRect(),s=Math.round(A.height);if(t.body.removeChild(n),s===e)return!0}}return!1},LK=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,A=Zf(n.data).map(function(o){return Ar(o)}),s=0,i={},a=A.every(function(o,c){r.setStart(n,s),r.setEnd(n,s+o.length);var d=r.getBoundingClientRect();s+=o.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),a},jK=function(){return typeof new Image().crossOrigin<"u"},MK=function(){return typeof new XMLHttpRequest().responseType=="string"},OK=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},uI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},HK=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var A=new Image,s=e.toDataURL();A.src=s;var i=p0(r,r,0,0,A);return n.fillStyle="red",n.fillRect(0,0,r,r),dI(i).then(function(a){n.drawImage(a,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=r+"px",uI(o)?dI(p0(r,r,0,0,c)):Promise.reject(!1)}).then(function(a){return n.drawImage(a,0,0),uI(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},p0=function(t,e,r,n,A){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",r.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(a),a.appendChild(A),i},dI=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Qr={get SUPPORT_RANGE_BOUNDS(){var t=PK(document);return Object.defineProperty(Qr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Qr.SUPPORT_RANGE_BOUNDS&&LK(document);return Object.defineProperty(Qr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=OK(document);return Object.defineProperty(Qr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?HK(document):Promise.resolve(!1);return Object.defineProperty(Qr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=jK();return Object.defineProperty(Qr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=MK();return Object.defineProperty(Qr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ec=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),VK=function(t,e,r,n){var A=zK(e,r),s=[],i=0;return A.forEach(function(a){if(r.textDecorationLine.length||a.trim().length>0)if(Qr.SUPPORT_RANGE_BOUNDS){var o=hI(n,i,a.length).getClientRects();if(o.length>1){var c=PB(a),d=0;c.forEach(function(f){s.push(new ec(f,PA.fromDOMRectList(t,hI(n,d+i,f.length).getClientRects()))),d+=f.length})}else s.push(new ec(a,PA.fromDOMRectList(t,o)))}else{var h=n.splitText(a.length);s.push(new ec(a,KK(t,n))),n=h}else Qr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(a.length));i+=a.length}),s},KK=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(n,e);var s=Yf(t,n);return n.firstChild&&A.replaceChild(n.firstChild,n),s}}return PA.EMPTY},hI=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var A=n.createRange();return A.setStart(t,e),A.setEnd(t,e+r),A},PB=function(t){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return DK(t)},GK=function(t,e){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return WK(t,e)},zK=function(t,e){return e.letterSpacing!==0?PB(t):GK(t,e)},$K=[32,160,4961,65792,65793,4153,4241],WK=function(t,e){for(var r=vH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],A,s=function(){if(A.value){var i=A.value.slice(),a=Zf(i),o="";a.forEach(function(c){$K.indexOf(c)===-1?o+=Ar(c):(o.length&&n.push(o),n.push(Ar(c)),o="")}),o.length&&n.push(o)}};!(A=r.next()).done;)s();return n},qK=function(){function t(e,r,n){this.text=JK(r.data,n.textTransform),this.textBounds=VK(e,this.text,n,r)}return t}(),JK=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(XK,YK);case 2:return t.toUpperCase();default:return t}},XK=/(^|\s|:|-|\(|\))([a-z])/g,YK=function(t,e,r){return t.length>0?e+r.toUpperCase():t},mQ=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.src=n.currentSrc||n.src,A.intrinsicWidth=n.naturalWidth,A.intrinsicHeight=n.naturalHeight,A.context.cache.addImage(A.src),A}return e}(cA),wQ=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.canvas=n,A.intrinsicWidth=n.width,A.intrinsicHeight=n.height,A}return e}(cA),BQ=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this,s=new XMLSerializer,i=Yf(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),A.intrinsicWidth=n.width.baseVal.value,A.intrinsicHeight=n.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e}(cA),yQ=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.value=n.value,A}return e}(cA),m0=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.start=n.start,A.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,A}return e}(cA),ZK=[{type:15,flags:0,unit:"px",number:3}],e5=[{type:16,flags:0,number:50}],t5=function(t){return t.width>t.height?new PA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new PA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},r5=function(t){var e=t.type===n5?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Wh="checkbox",qh="radio",n5="password",fI=707406591,LB=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;switch(A.type=n.type.toLowerCase(),A.checked=n.checked,A.value=r5(n),(A.type===Wh||A.type===qh)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=t5(A.bounds)),A.type){case Wh:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=ZK;break;case qh:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=e5;break}return A}return e}(cA),vQ=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return A.value=s&&s.text||"",A}return e}(cA),xQ=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.value=n.value,A}return e}(cA),CQ=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;A.src=n.src,A.width=parseInt(n.width,10)||0,A.height=parseInt(n.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){A.tree=_Q(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Yl(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):TA.TRANSPARENT,i=n.contentWindow.document.body?Yl(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):TA.TRANSPARENT;A.backgroundColor=Ns(s)?Ns(i)?A.styles.backgroundColor:i:s}}catch{}return A}return e}(cA),A5=["OL","UL","MENU"],qd=function(t,e,r,n){for(var A=e.firstChild,s=void 0;A;A=s)if(s=A.nextSibling,EQ(A)&&A.data.trim().length>0)r.textNodes.push(new qK(t,A,r.styles));else if(Po(A))if(QQ(A)&&A.assignedNodes)A.assignedNodes().forEach(function(a){return qd(t,a,r,n)});else{var i=IQ(t,A);i.styles.isVisible()&&(s5(A,i,n)?i.flags|=4:i5(i.styles)&&(i.flags|=2),A5.indexOf(A.tagName)!==-1&&(i.flags|=8),r.elements.push(i),A.slot,A.shadowRoot?qd(t,A.shadowRoot,i,n):!Jh(A)&&!bQ(A)&&!Xh(A)&&qd(t,A,i,n))}},IQ=function(t,e){return B0(e)?new mQ(t,e):TQ(e)?new wQ(t,e):bQ(e)?new BQ(t,e):o5(e)?new yQ(t,e):a5(e)?new m0(t,e):l5(e)?new LB(t,e):Xh(e)?new vQ(t,e):Jh(e)?new xQ(t,e):FQ(e)?new CQ(t,e):new cA(t,e)},_Q=function(t,e){var r=IQ(t,e);return r.flags|=4,qd(t,e,r,r),r},s5=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||jB(t)&&r.styles.isTransparent()},i5=function(t){return t.isPositioned()||t.isFloating()},EQ=function(t){return t.nodeType===Node.TEXT_NODE},Po=function(t){return t.nodeType===Node.ELEMENT_NODE},w0=function(t){return Po(t)&&typeof t.style<"u"&&!Jd(t)},Jd=function(t){return typeof t.className=="object"},o5=function(t){return t.tagName==="LI"},a5=function(t){return t.tagName==="OL"},l5=function(t){return t.tagName==="INPUT"},c5=function(t){return t.tagName==="HTML"},bQ=function(t){return t.tagName==="svg"},jB=function(t){return t.tagName==="BODY"},TQ=function(t){return t.tagName==="CANVAS"},gI=function(t){return t.tagName==="VIDEO"},B0=function(t){return t.tagName==="IMG"},FQ=function(t){return t.tagName==="IFRAME"},pI=function(t){return t.tagName==="STYLE"},u5=function(t){return t.tagName==="SCRIPT"},Jh=function(t){return t.tagName==="TEXTAREA"},Xh=function(t){return t.tagName==="SELECT"},QQ=function(t){return t.tagName==="SLOT"},mI=function(t){return t.tagName.indexOf("-")>0},d5=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,A=e.counterReset,s=!0;n!==null&&n.forEach(function(a){var o=r.counters[a.counter];o&&a.increment!==0&&(s=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=a.increment)});var i=[];return s&&A.forEach(function(a){var o=r.counters[a.counter];i.push(a.counter),o||(o=r.counters[a.counter]=[]),o.push(a.reset)}),i},t}(),wI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},BI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},h5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},f5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},go=function(t,e,r,n,A,s){return t<e||t>r?Pc(t,A,s.length>0):n.integers.reduce(function(i,a,o){for(;t>=a;)t-=a,i+=n.values[o];return i},"")+s},UQ=function(t,e,r,n){var A="";do r||t--,A=n(t)+A,t/=e;while(t*e>=e);return A},nr=function(t,e,r,n,A){var s=r-e+1;return(t<0?"-":"")+(UQ(Math.abs(t),s,n,function(i){return Ar(Math.floor(i%s)+e)})+A)},di=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return UQ(Math.abs(t),n,!1,function(A){return e[Math.floor(A%n)]})+r},xo=1,ZA=2,es=4,kl=8,gA=function(t,e,r,n,A,s){if(t<-9999||t>9999)return Pc(t,4,A.length>0);var i=Math.abs(t),a=A;if(i===0)return e[0]+a;for(var o=0;i>0&&o<=4;o++){var c=i%10;c===0&&hr(s,xo)&&a!==""?a=e[c]+a:c>1||c===1&&o===0||c===1&&o===1&&hr(s,ZA)||c===1&&o===1&&hr(s,es)&&t>100||c===1&&o>1&&hr(s,kl)?a=e[c]+(o>0?r[o-1]:"")+a:c===1&&o>0&&(a=r[o-1]+a),i=Math.floor(i/10)}return(t<0?n:"")+a},yI="",vI="",xI="",vp="",Pc=function(t,e,r){var n=r?". ":"",A=r?"":"",s=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var a=nr(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return di(t,"",A);case 6:return go(t,1,3999,wI,3,n).toLowerCase();case 7:return go(t,1,3999,wI,3,n);case 8:return nr(t,945,969,!1,n);case 9:return nr(t,97,122,!1,n);case 10:return nr(t,65,90,!1,n);case 11:return nr(t,1632,1641,!0,n);case 12:case 49:return go(t,1,9999,BI,3,n);case 35:return go(t,1,9999,BI,3,n).toLowerCase();case 13:return nr(t,2534,2543,!0,n);case 14:case 30:return nr(t,6112,6121,!0,n);case 15:return di(t,"",A);case 16:return di(t,"",A);case 17:case 48:return gA(t,"",yI,"",A,ZA|es|kl);case 47:return gA(t,"",vI,"",A,xo|ZA|es|kl);case 42:return gA(t,"",yI,"",A,ZA|es|kl);case 41:return gA(t,"",vI,"",A,xo|ZA|es|kl);case 26:return gA(t,"","",xI,A,0);case 25:return gA(t,"","",xI,A,xo|ZA|es);case 31:return gA(t,"","",vp,s,xo|ZA|es);case 33:return gA(t,"","",vp,s,0);case 32:return gA(t,"","",vp,s,xo|ZA|es);case 18:return nr(t,2406,2415,!0,n);case 20:return go(t,1,19999,f5,3,n);case 21:return nr(t,2790,2799,!0,n);case 22:return nr(t,2662,2671,!0,n);case 22:return go(t,1,10999,h5,3,n);case 23:return di(t,"");case 24:return di(t,"");case 27:return nr(t,3302,3311,!0,n);case 28:return di(t,"",A);case 29:return di(t,"",A);case 34:return nr(t,3792,3801,!0,n);case 37:return nr(t,6160,6169,!0,n);case 38:return nr(t,4160,4169,!0,n);case 39:return nr(t,2918,2927,!0,n);case 40:return nr(t,1776,1785,!0,n);case 43:return nr(t,3046,3055,!0,n);case 44:return nr(t,3174,3183,!0,n);case 45:return nr(t,3664,3673,!0,n);case 46:return nr(t,3872,3881,!0,n);case 3:default:return nr(t,48,57,!0,n)}},SQ="data-html2canvas-ignore",CI=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new d5,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,A=g5(e,r);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=A.contentWindow,o=a.document,c=w5(A).then(function(){return qr(n,void 0,void 0,function(){var d,h;return Or(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(x5),a&&(a.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==r.top||a.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-r.left,a.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,m5(o)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(o,h)}).then(function(){return A})]:[2,A]}})})});return o.open(),o.write(y5(document.doctype)+"<html></html>"),v5(this.referenceElement.ownerDocument,s,i),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),c},t.prototype.createElementClone=function(e){if(g0(e,2))debugger;if(TQ(e))return this.createCanvasClone(e);if(gI(e))return this.createVideoClone(e);if(pI(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return B0(r)&&(B0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),mI(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return xp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),A=e.cloneNode(!1);return A.textContent=n,A}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var s=e.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var a=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(a){var o=a.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},t.prototype.appendChildNode=function(e,r,n){(!Po(r)||!u5(r)&&!r.hasAttribute(SQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Po(r)||!pI(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var A=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Po(s)&&QQ(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(a){return A.appendChildNode(r,a,n)})}else this.appendChildNode(r,s,n)},t.prototype.cloneNode=function(e,r){if(EQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Po(e)&&(w0(e)||Jd(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var s=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&w0(A)&&(this.clonedReferenceElement=A),jB(A)&&_5(A);var o=this.counters.parse(new eI(this.context,s)),c=this.resolvePseudoContent(e,A,i,tc.BEFORE);mI(e)&&(r=!0),gI(e)||this.cloneChildNodes(e,A,r),c&&A.insertBefore(c,A.firstChild);var d=this.resolvePseudoContent(e,A,a,tc.AFTER);return d&&A.appendChild(d),this.counters.pop(o),(s&&(this.options.copyStyles||Jd(e))&&!FQ(e)||r)&&xp(s,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(Jh(e)||Xh(e))&&(Jh(A)||Xh(A))&&(A.value=e.value),A}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,A){var s=this;if(n){var i=n.content,a=r.ownerDocument;if(!(!a||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new eI(this.context,n));var o=new oK(this.context,n),c=a.createElement("html2canvaspseudoelement");xp(n,c),o.content.forEach(function(h){if(h.type===0)c.appendChild(a.createTextNode(h.value));else if(h.type===22){var f=a.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var w=h.values.filter(It);w.length&&c.appendChild(a.createTextNode(e.getAttribute(w[0].value)||""))}else if(h.name==="counter"){var y=h.values.filter(va),B=y[0],E=y[1];if(B&&It(B)){var x=s.counters.getCounterValue(B.value),m=E&&It(E)?f0.parse(s.context,E.value):3;c.appendChild(a.createTextNode(Pc(x,m,!1)))}}else if(h.name==="counters"){var I=h.values.filter(va),B=I[0],F=I[1],E=I[2];if(B&&It(B)){var R=s.counters.getCounterValues(B.value),U=E&&It(E)?f0.parse(s.context,E.value):3,v=F&&F.type===0?F.value:"",C=R.map(function(N){return Pc(N,U,!1)}).join(v);c.appendChild(a.createTextNode(C))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(a.createTextNode(ZC(o.quotes,s.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(ZC(o.quotes,--s.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(h.value))}}),c.className=y0+" "+v0;var d=A===tc.BEFORE?" "+y0:" "+v0;return Jd(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),tc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(tc||(tc={}));var g5=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(SQ,"true"),t.body.appendChild(r),r},p5=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},m5=function(t){return Promise.all([].slice.call(t.images,0).map(p5))},w5=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var A=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var s=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},B5=["all","d","content"],xp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);B5.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},y5=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},v5=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},x5=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},C5=":before",I5=":after",y0="___html2canvas___pseudoelement_before",v0="___html2canvas___pseudoelement_after",II=`{
    content: "" !important;
    display: none !important;
}`,_5=function(t){E5(t,"."+y0+C5+II+`
         .`+v0+I5+II)},E5=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},kQ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),b5=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Ip(e)||U5(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return qr(this,void 0,void 0,function(){var r,n,A,s,i=this;return Or(this,function(a){switch(a.label){case 0:return r=kQ.isSameOrigin(e),n=!Cp(e)&&this._options.useCORS===!0&&Qr.SUPPORT_CORS_IMAGES&&!r,A=!Cp(e)&&!r&&!Ip(e)&&typeof this._options.proxy=="string"&&Qr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Cp(e)&&!Ip(e)&&!A&&!n?[2]:(s=e,A?[4,this.proxy(s)]:[3,2]);case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(o,c){var d=new Image;d.onload=function(){return o(d)},d.onerror=c,(S5(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return o(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(s,i){var a=Qr.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(a==="text")s(o.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(o.response)}else i("Failed to proxy resource "+A+" with status code "+o.status)},o.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),a!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=a),r._options.imageTimeout){var d=r._options.imageTimeout;o.timeout=d,o.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+A)}}o.send()})},t}(),T5=/^data:image\/svg\+xml/i,F5=/^data:image\/.*;base64,/i,Q5=/^data:image\/.*/i,U5=function(t){return Qr.SUPPORT_SVG_DRAWING||!k5(t)},Cp=function(t){return Q5.test(t)},S5=function(t){return F5.test(t)},Ip=function(t){return t.substr(0,4)==="blob"},k5=function(t){return t.substr(-3).toLowerCase()==="svg"||T5.test(t)},be=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),po=function(t,e,r){return new be(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},md=function(){function t(e,r,n,A){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=A}return t.prototype.subdivide=function(e,r){var n=po(this.start,this.startControl,e),A=po(this.startControl,this.endControl,e),s=po(this.endControl,this.end,e),i=po(n,A,e),a=po(A,s,e),o=po(i,a,e);return r?new t(this.start,n,i,o):new t(o,a,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Qn=function(t){return t.type===1},R5=function(){function t(e){var r=e.styles,n=e.bounds,A=Ul(r.borderTopLeftRadius,n.width,n.height),s=A[0],i=A[1],a=Ul(r.borderTopRightRadius,n.width,n.height),o=a[0],c=a[1],d=Ul(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],w=Ul(r.borderBottomLeftRadius,n.width,n.height),y=w[0],B=w[1],E=[];E.push((s+o)/n.width),E.push((y+h)/n.width),E.push((i+B)/n.height),E.push((c+f)/n.height);var x=Math.max.apply(Math,E);x>1&&(s/=x,i/=x,o/=x,c/=x,h/=x,f/=x,y/=x,B/=x);var m=n.width-o,I=n.height-f,F=n.width-h,R=n.height-B,U=r.borderTopWidth,v=r.borderRightWidth,C=r.borderBottomWidth,_=r.borderLeftWidth,Q=Ft(r.paddingTop,e.bounds.width),N=Ft(r.paddingRight,e.bounds.width),L=Ft(r.paddingBottom,e.bounds.width),T=Ft(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Mt(n.left+_/3,n.top+U/3,s-_/3,i-U/3,yt.TOP_LEFT):new be(n.left+_/3,n.top+U/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Mt(n.left+m,n.top+U/3,o-v/3,c-U/3,yt.TOP_RIGHT):new be(n.left+n.width-v/3,n.top+U/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Mt(n.left+F,n.top+I,h-v/3,f-C/3,yt.BOTTOM_RIGHT):new be(n.left+n.width-v/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=y>0||B>0?Mt(n.left+_/3,n.top+R,y-_/3,B-C/3,yt.BOTTOM_LEFT):new be(n.left+_/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Mt(n.left+_*2/3,n.top+U*2/3,s-_*2/3,i-U*2/3,yt.TOP_LEFT):new be(n.left+_*2/3,n.top+U*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Mt(n.left+m,n.top+U*2/3,o-v*2/3,c-U*2/3,yt.TOP_RIGHT):new be(n.left+n.width-v*2/3,n.top+U*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Mt(n.left+F,n.top+I,h-v*2/3,f-C*2/3,yt.BOTTOM_RIGHT):new be(n.left+n.width-v*2/3,n.top+n.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||B>0?Mt(n.left+_*2/3,n.top+R,y-_*2/3,B-C*2/3,yt.BOTTOM_LEFT):new be(n.left+_*2/3,n.top+n.height-C*2/3),this.topLeftBorderStroke=s>0||i>0?Mt(n.left+_/2,n.top+U/2,s-_/2,i-U/2,yt.TOP_LEFT):new be(n.left+_/2,n.top+U/2),this.topRightBorderStroke=s>0||i>0?Mt(n.left+m,n.top+U/2,o-v/2,c-U/2,yt.TOP_RIGHT):new be(n.left+n.width-v/2,n.top+U/2),this.bottomRightBorderStroke=h>0||f>0?Mt(n.left+F,n.top+I,h-v/2,f-C/2,yt.BOTTOM_RIGHT):new be(n.left+n.width-v/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=y>0||B>0?Mt(n.left+_/2,n.top+R,y-_/2,B-C/2,yt.BOTTOM_LEFT):new be(n.left+_/2,n.top+n.height-C/2),this.topLeftBorderBox=s>0||i>0?Mt(n.left,n.top,s,i,yt.TOP_LEFT):new be(n.left,n.top),this.topRightBorderBox=o>0||c>0?Mt(n.left+m,n.top,o,c,yt.TOP_RIGHT):new be(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Mt(n.left+F,n.top+I,h,f,yt.BOTTOM_RIGHT):new be(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=y>0||B>0?Mt(n.left,n.top+R,y,B,yt.BOTTOM_LEFT):new be(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Mt(n.left+_,n.top+U,Math.max(0,s-_),Math.max(0,i-U),yt.TOP_LEFT):new be(n.left+_,n.top+U),this.topRightPaddingBox=o>0||c>0?Mt(n.left+Math.min(m,n.width-v),n.top+U,m>n.width+v?0:Math.max(0,o-v),Math.max(0,c-U),yt.TOP_RIGHT):new be(n.left+n.width-v,n.top+U),this.bottomRightPaddingBox=h>0||f>0?Mt(n.left+Math.min(F,n.width-_),n.top+Math.min(I,n.height-C),Math.max(0,h-v),Math.max(0,f-C),yt.BOTTOM_RIGHT):new be(n.left+n.width-v,n.top+n.height-C),this.bottomLeftPaddingBox=y>0||B>0?Mt(n.left+_,n.top+Math.min(R,n.height-C),Math.max(0,y-_),Math.max(0,B-C),yt.BOTTOM_LEFT):new be(n.left+_,n.top+n.height-C),this.topLeftContentBox=s>0||i>0?Mt(n.left+_+T,n.top+U+Q,Math.max(0,s-(_+T)),Math.max(0,i-(U+Q)),yt.TOP_LEFT):new be(n.left+_+T,n.top+U+Q),this.topRightContentBox=o>0||c>0?Mt(n.left+Math.min(m,n.width+_+T),n.top+U+Q,m>n.width+_+T?0:o-_+T,c-(U+Q),yt.TOP_RIGHT):new be(n.left+n.width-(v+N),n.top+U+Q),this.bottomRightContentBox=h>0||f>0?Mt(n.left+Math.min(F,n.width-(_+T)),n.top+Math.min(I,n.height+U+Q),Math.max(0,h-(v+N)),f-(C+L),yt.BOTTOM_RIGHT):new be(n.left+n.width-(v+N),n.top+n.height-(C+L)),this.bottomLeftContentBox=y>0||B>0?Mt(n.left+_+T,n.top+R,Math.max(0,y-(_+T)),B-(C+L),yt.BOTTOM_LEFT):new be(n.left+_+T,n.top+n.height-(C+L))}return t}(),yt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(yt||(yt={}));var Mt=function(t,e,r,n,A){var s=4*((Math.sqrt(2)-1)/3),i=r*s,a=n*s,o=t+r,c=e+n;switch(A){case yt.TOP_LEFT:return new md(new be(t,c),new be(t,c-a),new be(o-i,e),new be(o,e));case yt.TOP_RIGHT:return new md(new be(t,e),new be(t+i,e),new be(o,c-a),new be(o,c));case yt.BOTTOM_RIGHT:return new md(new be(o,e),new be(o,e+a),new be(t+i,c),new be(t,c));case yt.BOTTOM_LEFT:default:return new md(new be(o,c),new be(o-i,c),new be(t,e+a),new be(t,e))}},Yh=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},N5=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Zh=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},D5=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),wd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),P5=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),L5=function(t){return t.type===0},RQ=function(t){return t.type===1},j5=function(t){return t.type===2},_I=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},M5=function(t,e,r,n,A){return t.map(function(s,i){switch(i){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+A);case 3:return s.add(e,r+A)}return s})},NQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),DQ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new R5(this.container),this.container.styles.opacity<1&&this.effects.push(new P5(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new D5(n,A,s))}if(this.container.styles.overflowX!==0){var i=Yh(this.curves),a=Zh(this.curves);_I(i,a)?this.effects.push(new wd(i,6)):(this.effects.push(new wd(i,2)),this.effects.push(new wd(a,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,A=this.effects.slice(0);n;){var s=n.effects.filter(function(o){return!RQ(o)});if(r||n.container.styles.position!==0||!n.parent){if(A.unshift.apply(A,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=Yh(n.curves),a=Zh(n.curves);_I(i,a)||A.unshift(new wd(a,6))}}else A.unshift.apply(A,s);n=n.parent}return A.filter(function(o){return hr(o.target,e)})},t}(),x0=function(t,e,r,n){t.container.elements.forEach(function(A){var s=hr(A.flags,4),i=hr(A.flags,2),a=new DQ(A,t);hr(A.styles.display,2048)&&n.push(a);var o=hr(A.flags,8)?[]:n;if(s||i){var c=s||A.styles.isPositioned()?r:e,d=new NQ(a);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var h=A.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(y,B){return h>y.element.container.styles.zIndex.order?(f=B,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var w=0;c.positiveZIndex.some(function(y,B){return h>=y.element.container.styles.zIndex.order?(w=B+1,!1):w>0}),c.positiveZIndex.splice(w,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else A.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);x0(a,d,s?d:r,o)}else A.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),x0(a,e,r,o);hr(A.flags,8)&&PQ(A,o)})},PQ=function(t,e){for(var r=t instanceof m0?t.start:1,n=t instanceof m0?t.reversed:!1,A=0;A<e.length;A++){var s=e[A];s.container instanceof yQ&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Pc(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},O5=function(t){var e=new DQ(t,null),r=new NQ(e),n=[];return x0(e,r,r,n),PQ(e.container,n),r},EI=function(t,e){switch(e){case 0:return kn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return kn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return kn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return kn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},H5=function(t,e){switch(e){case 0:return kn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return kn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return kn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return kn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},V5=function(t,e){switch(e){case 0:return kn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return kn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return kn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return kn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},K5=function(t,e){switch(e){case 0:return Bd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Bd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Bd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Bd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Bd=function(t,e){var r=[];return Qn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Qn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},kn=function(t,e,r,n){var A=[];return Qn(t)?A.push(t.subdivide(.5,!1)):A.push(t),Qn(r)?A.push(r.subdivide(.5,!0)):A.push(r),Qn(n)?A.push(n.subdivide(.5,!0).reverse()):A.push(n),Qn(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},LQ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ef=function(t){var e=t.styles,r=t.bounds,n=Ft(e.paddingLeft,r.width),A=Ft(e.paddingRight,r.width),s=Ft(e.paddingTop,r.width),i=Ft(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+A),-(e.borderTopWidth+e.borderBottomWidth+s+i))},G5=function(t,e){return t===0?e.bounds:t===2?ef(e):LQ(e)},z5=function(t,e){return t===0?e.bounds:t===2?ef(e):LQ(e)},_p=function(t,e,r){var n=G5(Co(t.styles.backgroundOrigin,e),t),A=z5(Co(t.styles.backgroundClip,e),t),s=$5(Co(t.styles.backgroundSize,e),r,n),i=s[0],a=s[1],o=Ul(Co(t.styles.backgroundPosition,e),n.width-i,n.height-a),c=W5(Co(t.styles.backgroundRepeat,e),o,s,n,A),d=Math.round(n.left+o[0]),h=Math.round(n.top+o[1]);return[c,d,h,i,a]},mo=function(t){return It(t)&&t.value===qo.AUTO},yd=function(t){return typeof t=="number"},$5=function(t,e,r){var n=e[0],A=e[1],s=e[2],i=t[0],a=t[1];if(!i)return[0,0];if(cr(i)&&a&&cr(a))return[Ft(i,r.width),Ft(a,r.height)];var o=yd(s);if(It(i)&&(i.value===qo.CONTAIN||i.value===qo.COVER)){if(yd(s)){var c=r.width/r.height;return c<s!=(i.value===qo.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=yd(n),h=yd(A),f=d||h;if(mo(i)&&(!a||mo(a))){if(d&&h)return[n,A];if(!o&&!f)return[r.width,r.height];if(f&&o){var w=d?n:A*s,y=h?A:n/s;return[w,y]}var B=d?n:r.width,E=h?A:r.height;return[B,E]}if(o){var x=0,m=0;return cr(i)?x=Ft(i,r.width):cr(a)&&(m=Ft(a,r.height)),mo(i)?x=m*s:(!a||mo(a))&&(m=x/s),[x,m]}var I=null,F=null;if(cr(i)?I=Ft(i,r.width):a&&cr(a)&&(F=Ft(a,r.height)),I!==null&&(!a||mo(a))&&(F=d&&h?I/n*A:r.height),F!==null&&mo(i)&&(I=d&&h?F/A*n:r.width),I!==null&&F!==null)return[I,F];throw new Error("Unable to calculate background-size for element")},Co=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},W5=function(t,e,r,n,A){var s=e[0],i=e[1],a=r[0],o=r[1];switch(t){case 2:return[new be(Math.round(n.left),Math.round(n.top+i)),new be(Math.round(n.left+n.width),Math.round(n.top+i)),new be(Math.round(n.left+n.width),Math.round(o+n.top+i)),new be(Math.round(n.left),Math.round(o+n.top+i))];case 3:return[new be(Math.round(n.left+s),Math.round(n.top)),new be(Math.round(n.left+s+a),Math.round(n.top)),new be(Math.round(n.left+s+a),Math.round(n.height+n.top)),new be(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new be(Math.round(n.left+s),Math.round(n.top+i)),new be(Math.round(n.left+s+a),Math.round(n.top+i)),new be(Math.round(n.left+s+a),Math.round(n.top+i+o)),new be(Math.round(n.left+s),Math.round(n.top+i+o))];default:return[new be(Math.round(A.left),Math.round(A.top)),new be(Math.round(A.left+A.width),Math.round(A.top)),new be(Math.round(A.left+A.width),Math.round(A.height+A.top)),new be(Math.round(A.left),Math.round(A.height+A.top))]}},q5="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bI="Hidden Text",J5=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),A=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),A.src=q5,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(bI)),n.appendChild(s),n.appendChild(A);var a=A.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(bI)),n.style.lineHeight="normal",A.style.verticalAlign="super";var o=A.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:o}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),jQ=function(){function t(e,r){this.context=e,this.options=r}return t}(),X5=1e4,Y5=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A._activeEffects=[],A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),n.canvas||(A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px"),A.fontMetrics=new J5(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),A}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(A){return n.applyEffect(A)})},e.prototype.applyEffect=function(r){this.ctx.save(),j5(r)&&(this.ctx.globalAlpha=r.opacity),L5(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),RQ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return qr(this,void 0,void 0,function(){var n;return Or(this,function(A){switch(A.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return qr(this,void 0,void 0,function(){return Or(this,function(n){switch(n.label){case 0:if(hr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,A){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+A);else{var i=PB(r.text);i.reduce(function(a,o){return s.ctx.fillText(o,a,r.bounds.top+A),a+s.ctx.measureText(o).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=n6(r.fontFamily).join(", "),s=du(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,A].join(" "),A,s]},e.prototype.renderTextNode=function(r,n){return qr(this,void 0,void 0,function(){var A,s,i,a,o,c,d,h,f=this;return Or(this,function(w){return A=this.createFontStyle(n),s=A[0],i=A[1],a=A[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,a),c=o.baseline,d=o.middle,h=n.paintOrder,r.textBounds.forEach(function(y){h.forEach(function(B){switch(B){case 0:f.ctx.fillStyle=wr(n.color),f.renderTextWithLetterSpacing(y,n.letterSpacing,c);var E=n.textShadow;E.length&&y.text.trim().length&&(E.slice(0).reverse().forEach(function(x){f.ctx.shadowColor=wr(x.color),f.ctx.shadowOffsetX=x.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=x.offsetY.number*f.options.scale,f.ctx.shadowBlur=x.blur.number,f.renderTextWithLetterSpacing(y,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=wr(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(x){switch(x){case 1:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+c),y.bounds.width,1);break;case 2:f.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:f.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+d),y.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&y.text.trim().length&&(f.ctx.strokeStyle=wr(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,A){if(A&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=ef(r),i=Zh(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return qr(this,void 0,void 0,function(){var n,A,s,i,a,o,m,m,c,d,h,f,F,w,y,R,B,E,x,m,I,F,R;return Or(this,function(U){switch(U.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,A=r.curves,s=n.styles,i=0,a=n.textNodes,U.label=1;case 1:return i<a.length?(o=a[i],[4,this.renderTextNode(o,s)]):[3,4];case 2:U.sent(),U.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof mQ))return[3,8];U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return m=U.sent(),this.renderReplacedElement(n,A,m),[3,8];case 7:return U.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof wQ&&this.renderReplacedElement(n,A,n.canvas),!(n instanceof BQ))return[3,12];U.label=9;case 9:return U.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return m=U.sent(),this.renderReplacedElement(n,A,m),[3,12];case 11:return U.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof CQ&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=U.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),U.label=14;case 14:if(n instanceof LB&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===Wh?n.checked&&(this.ctx.save(),this.path([new be(n.bounds.left+h*.39363,n.bounds.top+h*.79),new be(n.bounds.left+h*.16,n.bounds.top+h*.5549),new be(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new be(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new be(n.bounds.left+h*.72983,n.bounds.top+h*.23),new be(n.bounds.left+h*.84,n.bounds.top+h*.34085),new be(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=wr(fI),this.ctx.fill(),this.ctx.restore()):n.type===qh&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=wr(fI),this.ctx.fill(),this.ctx.restore())),Z5(n)&&n.value.length){switch(f=this.createFontStyle(s),F=f[0],w=f[1],y=this.fontMetrics.getMetrics(F,w).baseline,this.ctx.font=F,this.ctx.fillStyle=wr(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=t6(n.styles.textAlign),R=ef(n),B=0,n.styles.textAlign){case 1:B+=R.width/2;break;case 2:B+=R.width;break}E=R.add(B,0,0,-R.height/2+1),this.ctx.save(),this.path([new be(R.left,R.top),new be(R.left+R.width,R.top),new be(R.left+R.width,R.top+R.height),new be(R.left,R.top+R.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ec(n.value,E),s.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!hr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(x=n.styles.listStyleImage,x.type!==0)return[3,18];m=void 0,I=x.url,U.label=15;case 15:return U.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return m=U.sent(),this.ctx.drawImage(m,n.bounds.left-(m.width+10),n.bounds.top),[3,18];case 17:return U.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(s)[0],this.ctx.font=F,this.ctx.fillStyle=wr(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",R=new PA(n.bounds.left,n.bounds.top+Ft(n.styles.paddingTop,n.bounds.width),n.bounds.width,XC(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ec(r.listValue,R),s.letterSpacing,XC(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),U.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return qr(this,void 0,void 0,function(){var n,A,x,s,i,x,a,o,x,c,d,x,h,f,x,w,y,x,B,E,x;return Or(this,function(m){switch(m.label){case 0:if(hr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:m.sent(),n=0,A=r.negativeZIndex,m.label=2;case 2:return n<A.length?(x=A[n],[4,this.renderStack(x)]):[3,5];case 3:m.sent(),m.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:m.sent(),s=0,i=r.nonInlineLevel,m.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:m.sent(),m.label=9;case 9:return s++,[3,7];case 10:a=0,o=r.nonPositionedFloats,m.label=11;case 11:return a<o.length?(x=o[a],[4,this.renderStack(x)]):[3,14];case 12:m.sent(),m.label=13;case 13:return a++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,m.label=15;case 15:return c<d.length?(x=d[c],[4,this.renderStack(x)]):[3,18];case 16:m.sent(),m.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,m.label=19;case 19:return h<f.length?(x=f[h],[4,this.renderNode(x)]):[3,22];case 20:m.sent(),m.label=21;case 21:return h++,[3,19];case 22:w=0,y=r.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return w<y.length?(x=y[w],[4,this.renderStack(x)]):[3,26];case 24:m.sent(),m.label=25;case 25:return w++,[3,23];case 26:B=0,E=r.positiveZIndex,m.label=27;case 27:return B<E.length?(x=E[B],[4,this.renderStack(x)]):[3,30];case 28:m.sent(),m.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(A,s){var i=Qn(A)?A.start:A;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Qn(A)&&n.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(r,n,A,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(A,s),this.ctx.fill(),this.ctx.translate(-A,-s)},e.prototype.resizeImage=function(r,n,A){var s;if(r.width===n&&r.height===A)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=i.createElement("canvas");a.width=Math.max(1,n),a.height=Math.max(1,A);var o=a.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,A),a},e.prototype.renderBackgroundImage=function(r){return qr(this,void 0,void 0,function(){var n,A,s,i,a,o;return Or(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,A=function(d){var h,f,w,Q,et,$e,T,Ke,C,y,Q,et,$e,T,Ke,B,E,x,m,I,F,R,U,v,C,_,Q,N,L,T,Ke,He,et,$e,se,k,G,X,oe,ae,Ve,Fe;return Or(this,function(We){switch(We.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,We.label=1;case 1:return We.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return h=We.sent(),[3,4];case 3:return We.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(w=_p(r,n,[h.width,h.height,h.width/h.height]),Q=w[0],et=w[1],$e=w[2],T=w[3],Ke=w[4],C=s.ctx.createPattern(s.resizeImage(h,T,Ke),"repeat"),s.renderRepeat(Q,C,et,$e)),[3,6];case 5:LV(d)?(y=_p(r,n,[null,null,null]),Q=y[0],et=y[1],$e=y[2],T=y[3],Ke=y[4],B=kV(d.angle,T,Ke),E=B[0],x=B[1],m=B[2],I=B[3],F=B[4],R=document.createElement("canvas"),R.width=T,R.height=Ke,U=R.getContext("2d"),v=U.createLinearGradient(x,I,m,F),qC(d.stops,E).forEach(function(Te){return v.addColorStop(Te.stop,wr(Te.color))}),U.fillStyle=v,U.fillRect(0,0,T,Ke),T>0&&Ke>0&&(C=s.ctx.createPattern(R,"repeat"),s.renderRepeat(Q,C,et,$e))):jV(d)&&(_=_p(r,n,[null,null,null]),Q=_[0],N=_[1],L=_[2],T=_[3],Ke=_[4],He=d.position.length===0?[RB]:d.position,et=Ft(He[0],T),$e=Ft(He[He.length-1],Ke),se=RV(d,et,$e,T,Ke),k=se[0],G=se[1],k>0&&G>0&&(X=s.ctx.createRadialGradient(N+et,L+$e,0,N+et,L+$e,k),qC(d.stops,k*2).forEach(function(Te){return X.addColorStop(Te.stop,wr(Te.color))}),s.path(Q),s.ctx.fillStyle=X,k!==G?(oe=r.bounds.left+.5*r.bounds.width,ae=r.bounds.top+.5*r.bounds.height,Ve=G/k,Fe=1/Ve,s.ctx.save(),s.ctx.translate(oe,ae),s.ctx.transform(1,0,0,Ve,0,0),s.ctx.translate(-oe,-ae),s.ctx.fillRect(N,Fe*(L-ae)+ae,T,Ke*Fe),s.ctx.restore()):s.ctx.fill())),We.label=6;case 6:return n--,[2]}})},s=this,i=0,a=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<a.length?(o=a[i],[5,A(o)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,A){return qr(this,void 0,void 0,function(){return Or(this,function(s){return this.path(EI(A,n)),this.ctx.fillStyle=wr(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,A,s){return qr(this,void 0,void 0,function(){var i,a;return Or(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,A,s)]:[3,2];case 1:return o.sent(),[2];case 2:return i=H5(s,A),this.path(i),this.ctx.fillStyle=wr(r),this.ctx.fill(),a=V5(s,A),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return qr(this,void 0,void 0,function(){var n,A,s,i,a,o,c,d,h=this;return Or(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,A=!Ns(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=e6(Co(n.backgroundClip,0),r.curves),A||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Ns(n.backgroundColor)||(this.ctx.fillStyle=wr(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(w){h.ctx.save();var y=Yh(r.curves),B=w.inset?0:X5,E=M5(y,-B+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(h.path(y),h.ctx.clip(),h.mask(E)):(h.mask(y),h.ctx.clip(),h.path(E)),h.ctx.shadowOffsetX=w.offsetX.number+B,h.ctx.shadowOffsetY=w.offsetY.number,h.ctx.shadowColor=wr(w.color),h.ctx.shadowBlur=w.blur.number,h.ctx.fillStyle=w.inset?wr(w.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:a=0,o=0,c=s,f.label=3;case 3:return o<c.length?(d=c[o],d.style!==0&&!Ns(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,a,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,a,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,a,r.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,A,s,i){return qr(this,void 0,void 0,function(){var a,o,c,d,h,f,w,y,B,E,x,m,I,F,R,U,R,U;return Or(this,function(v){return this.ctx.save(),a=K5(s,A),o=EI(s,A),i===2&&(this.path(o),this.ctx.clip()),Qn(o[0])?(c=o[0].start.x,d=o[0].start.y):(c=o[0].x,d=o[0].y),Qn(o[1])?(h=o[1].end.x,f=o[1].end.y):(h=o[1].x,f=o[1].y),A===0||A===2?w=Math.abs(c-h):w=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(a):this.formatPath(o.slice(0,2)),y=n<3?n*3:n*2,B=n<3?n*2:n,i===3&&(y=n,B=n),E=!0,w<=y*2?E=!1:w<=y*2+B?(x=w/(2*y+B),y*=x,B*=x):(m=Math.floor((w+B)/(y+B)),I=(w-m*y)/(m-1),F=(w-(m+1)*y)/m,B=F<=0||Math.abs(B-I)<Math.abs(B-F)?I:F),E&&(i===3?this.ctx.setLineDash([0,y+B]):this.ctx.setLineDash([y,B])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=wr(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Qn(o[0])&&(R=o[3],U=o[0],this.ctx.beginPath(),this.formatPath([new be(R.end.x,R.end.y),new be(U.start.x,U.start.y)]),this.ctx.stroke()),Qn(o[1])&&(R=o[1],U=o[2],this.ctx.beginPath(),this.formatPath([new be(R.end.x,R.end.y),new be(U.start.x,U.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return qr(this,void 0,void 0,function(){var n;return Or(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=wr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=O5(r),[4,this.renderStack(n)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(jQ),Z5=function(t){return t instanceof xQ||t instanceof vQ?!0:t instanceof LB&&t.type!==qh&&t.type!==Wh},e6=function(t,e){switch(t){case 0:return Yh(e);case 2:return N5(e);case 1:default:return Zh(e)}},t6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},r6=["-apple-system","system-ui"],n6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return r6.indexOf(e)===-1}):t},A6=function(t){Wn(e,t);function e(r,n){var A=t.call(this,r,n)||this;return A.canvas=n.canvas?n.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=n,A.canvas.width=Math.floor(n.width*n.scale),A.canvas.height=Math.floor(n.height*n.scale),A.canvas.style.width=n.width+"px",A.canvas.style.height=n.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-n.x,-n.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),A}return e.prototype.render=function(r){return qr(this,void 0,void 0,function(){var n,A;return Or(this,function(s){switch(s.label){case 0:return n=p0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,s6(n)];case 1:return A=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=wr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(jQ),s6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},i6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Yu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Yu([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Yu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Yu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),o6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new i6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new b5(this,e)}return t.instanceCount=1,t}(),TI=function(t,e){return e===void 0&&(e={}),a6(t,e)};typeof window<"u"&&kQ.setContext(window);var a6=function(t,e){return qr(void 0,void 0,void 0,function(){var r,n,A,s,i,a,o,c,d,h,f,w,y,B,E,x,m,I,F,R,v,U,v,C,_,Q,N,L,T,Ke,He,et,$e,se,k,G,X,oe,ae,Ve;return Or(this,function(Fe){switch(Fe.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return A={allowTaint:(C=e.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(_=e.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=t0({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},A),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:n.innerHeight,scrollX:(Ke=e.scrollX)!==null&&Ke!==void 0?Ke:n.pageXOffset,scrollY:(He=e.scrollY)!==null&&He!==void 0?He:n.pageYOffset},a=new PA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),o=new o6(s,a),c=(et=e.foreignObjectRendering)!==null&&et!==void 0?et:!1,d={allowTaint:($e=e.allowTaint)!==null&&$e!==void 0?$e:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},o.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new CI(o,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=Fe.sent(),y=jB(f)||c5(f)?MO(f.ownerDocument):Yf(o,f),B=y.width,E=y.height,x=y.left,m=y.top,I=l6(o,f,e.backgroundColor),F={canvas:e.canvas,backgroundColor:I,scale:(k=(se=e.scale)!==null&&se!==void 0?se:n.devicePixelRatio)!==null&&k!==void 0?k:1,x:((G=e.x)!==null&&G!==void 0?G:0)+x,y:((X=e.y)!==null&&X!==void 0?X:0)+m,width:(oe=e.width)!==null&&oe!==void 0?oe:Math.ceil(B),height:(ae=e.height)!==null&&ae!==void 0?ae:Math.ceil(E)},c?(o.logger.debug("Document cloned, using foreign object rendering"),v=new A6(o,F),[4,v.render(f)]):[3,3];case 2:return R=Fe.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+x+","+m+" with size "+B+"x"+E+" using computed rendering"),o.logger.debug("Starting DOM parsing"),U=_Q(o,f),I===U.styles.backgroundColor&&(U.styles.backgroundColor=TA.TRANSPARENT),o.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),v=new Y5(o,F),[4,v.render(U)];case 4:R=Fe.sent(),Fe.label=5;case 5:return(!((Ve=e.removeContainer)!==null&&Ve!==void 0)||Ve)&&(CI.destroy(w)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,R]}})})},l6=function(t,e,r){var n=e.ownerDocument,A=n.documentElement?Yl(t,getComputedStyle(n.documentElement).backgroundColor):TA.TRANSPARENT,s=n.body?Yl(t,getComputedStyle(n.body).backgroundColor):TA.TRANSPARENT,i=typeof r=="string"?Yl(t,r):r===null?TA.TRANSPARENT:4294967295;return e===n.documentElement?Ns(A)?Ns(s)?i:s:A:i},c6=Object.defineProperty,tf=Object.getOwnPropertySymbols,MQ=Object.prototype.hasOwnProperty,OQ=Object.prototype.propertyIsEnumerable,FI=(t,e,r)=>e in t?c6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u6=(t,e)=>{for(var r in e||(e={}))MQ.call(e,r)&&FI(t,r,e[r]);if(tf)for(var r of tf(e))OQ.call(e,r)&&FI(t,r,e[r]);return t},d6=(t,e)=>{var r={};for(var n in t)MQ.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&tf)for(var n of tf(t))e.indexOf(n)<0&&OQ.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var qi;(t=>{const e=class{constructor(o,c,d,h){if(this.version=o,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=o*4+17;let f=[];for(let y=0;y<this.size;y++)f.push(!1);for(let y=0;y<this.size;y++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const w=this.addEccAndInterleave(d);if(this.drawCodewords(w),h==-1){let y=1e9;for(let B=0;B<8;B++){this.applyMask(B),this.drawFormatBits(B);const E=this.getPenaltyScore();E<y&&(h=B,y=E),this.applyMask(B)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(o,c){const d=t.QrSegment.makeSegments(o);return e.encodeSegments(d,c)}static encodeBinary(o,c){const d=t.QrSegment.makeBytes(o);return e.encodeSegments([d],c)}static encodeSegments(o,c,d=1,h=40,f=-1,w=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let y,B;for(y=d;;y++){const I=e.getNumDataCodewords(y,c)*8,F=a.getTotalBits(o,y);if(F<=I){B=F;break}if(y>=h)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])w&&B<=e.getNumDataCodewords(y,I)*8&&(c=I);let E=[];for(const I of o){n(I.mode.modeBits,4,E),n(I.numChars,I.mode.numCharCountBits(y),E);for(const F of I.getData())E.push(F)}s(E.length==B);const x=e.getNumDataCodewords(y,c)*8;s(E.length<=x),n(0,Math.min(4,x-E.length),E),n(0,(8-E.length%8)%8,E),s(E.length%8==0);for(let I=236;E.length<x;I^=253)n(I,8,E);let m=[];for(;m.length*8<E.length;)m.push(0);return E.forEach((I,F)=>m[F>>>3]|=I<<7-(F&7)),new e(y,c,m,f)}getModule(o,c){return 0<=o&&o<this.size&&0<=c&&c<this.size&&this.modules[c][o]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const o=this.getAlignmentPatternPositions(),c=o.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(o[d],o[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(o){const c=this.errorCorrectionLevel.formatBits<<3|o;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,A(h,f));this.setFunctionModule(8,7,A(h,6)),this.setFunctionModule(8,8,A(h,7)),this.setFunctionModule(7,8,A(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,A(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,A(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,A(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let o=this.version;for(let d=0;d<12;d++)o=o<<1^(o>>>11)*7973;const c=this.version<<12|o;s(c>>>18==0);for(let d=0;d<18;d++){const h=A(c,d),f=this.size-11+d%3,w=Math.floor(d/3);this.setFunctionModule(f,w,h),this.setFunctionModule(w,f,h)}}drawFinderPattern(o,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),w=o+h,y=c+d;0<=w&&w<this.size&&0<=y&&y<this.size&&this.setFunctionModule(w,y,f!=2&&f!=4)}}drawAlignmentPattern(o,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(o+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(o,c,d){this.modules[c][o]=d,this.isFunction[c][o]=!0}addEccAndInterleave(o){const c=this.version,d=this.errorCorrectionLevel;if(o.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],w=Math.floor(e.getNumRawDataModules(c)/8),y=h-w%h,B=Math.floor(w/h);let E=[];const x=e.reedSolomonComputeDivisor(f);for(let I=0,F=0;I<h;I++){let R=o.slice(F,F+B-f+(I<y?0:1));F+=R.length;const U=e.reedSolomonComputeRemainder(R,x);I<y&&R.push(0),E.push(R.concat(U))}let m=[];for(let I=0;I<E[0].length;I++)E.forEach((F,R)=>{(I!=B-f||R>=y)&&m.push(F[I])});return s(m.length==w),m}drawCodewords(o){if(o.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const w=d-f,B=(d+1&2)==0?this.size-1-h:h;!this.isFunction[B][w]&&c<o.length*8&&(this.modules[B][w]=A(o[c>>>3],7-(c&7)),c++)}}s(c==o.length*8)}applyMask(o){if(o<0||o>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(o){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let o=0;for(let f=0;f<this.size;f++){let w=!1,y=0,B=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[f][E]==w?(y++,y==5?o+=e.PENALTY_N1:y>5&&o++):(this.finderPenaltyAddHistory(y,B),w||(o+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),w=this.modules[f][E],y=1);o+=this.finderPenaltyTerminateAndCount(w,y,B)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let w=!1,y=0,B=[0,0,0,0,0,0,0];for(let E=0;E<this.size;E++)this.modules[E][f]==w?(y++,y==5?o+=e.PENALTY_N1:y>5&&o++):(this.finderPenaltyAddHistory(y,B),w||(o+=this.finderPenaltyCountPatterns(B)*e.PENALTY_N3),w=this.modules[E][f],y=1);o+=this.finderPenaltyTerminateAndCount(w,y,B)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let w=0;w<this.size-1;w++){const y=this.modules[f][w];y==this.modules[f][w+1]&&y==this.modules[f+1][w]&&y==this.modules[f+1][w+1]&&(o+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((w,y)=>w+(y?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),o+=h*e.PENALTY_N4,s(0<=o&&o<=2568888),o}getAlignmentPatternPositions(){if(this.version==1)return[];{const o=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(o*2-2))*2;let d=[6];for(let h=this.size-7;d.length<o;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(o){if(o<e.MIN_VERSION||o>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*o+128)*o+64;if(o>=2){const d=Math.floor(o/7)+2;c-=(25*d-10)*d-55,o>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(o,c){return Math.floor(e.getNumRawDataModules(o)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][o]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][o]}static reedSolomonComputeDivisor(o){if(o<1||o>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<o-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<o;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(o,c){let d=c.map(h=>0);for(const h of o){const f=h^d.shift();d.push(0),c.forEach((w,y)=>d[y]^=e.reedSolomonMultiply(w,f))}return d}static reedSolomonMultiply(o,c){if(o>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*o;return s(d>>>8==0),d}finderPenaltyCountPatterns(o){const c=o[1];s(c<=this.size*3);const d=c>0&&o[2]==c&&o[3]==c*3&&o[4]==c&&o[5]==c;return(d&&o[0]>=c*4&&o[6]>=c?1:0)+(d&&o[6]>=c*4&&o[0]>=c?1:0)}finderPenaltyTerminateAndCount(o,c,d){return o&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(o,c){c[0]==0&&(o+=this.size),c.pop(),c.unshift(o)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(o,c,d){if(c<0||c>31||o>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(o>>>h&1)}function A(o,c){return(o>>>c&1)!=0}function s(o){if(!o)throw new Error("Assertion error")}const i=class{constructor(o,c,d){if(this.mode=o,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(o){let c=[];for(const d of o)n(d,8,c);return new i(i.Mode.BYTE,o.length,c)}static makeNumeric(o){if(!i.isNumeric(o))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<o.length;){const h=Math.min(o.length-d,3);n(parseInt(o.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,o.length,c)}static makeAlphanumeric(o){if(!i.isAlphanumeric(o))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=o.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d+1)),n(h,11,c)}return d<o.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(o.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,o.length,c)}static makeSegments(o){return o==""?[]:i.isNumeric(o)?[i.makeNumeric(o)]:i.isAlphanumeric(o)?[i.makeAlphanumeric(o)]:[i.makeBytes(i.toUtf8ByteArray(o))]}static makeEci(o){let c=[];if(o<0)throw new RangeError("ECI assignment value out of range");if(o<128)n(o,8,c);else if(o<16384)n(2,2,c),n(o,14,c);else if(o<1e6)n(6,3,c),n(o,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(o){return i.NUMERIC_REGEX.test(o)}static isAlphanumeric(o){return i.ALPHANUMERIC_REGEX.test(o)}getData(){return this.bitData.slice()}static getTotalBits(o,c){let d=0;for(const h of o){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(o){o=encodeURI(o);let c=[];for(let d=0;d<o.length;d++)o.charAt(d)!="%"?c.push(o.charCodeAt(d)):(c.push(parseInt(o.substr(d+1,2),16)),d+=2);return c}};let a=i;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=a})(qi||(qi={}));(t=>{(e=>{const r=class{constructor(A,s){this.ordinal=A,this.formatBits=s}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(qi||(qi={}));(t=>{(e=>{const r=class{constructor(A,s){this.modeBits=A,this.numBitsCharCount=s}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(qi||(qi={}));var Rl=qi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var h6={L:Rl.QrCode.Ecc.LOW,M:Rl.QrCode.Ecc.MEDIUM,Q:Rl.QrCode.Ecc.QUARTILE,H:Rl.QrCode.Ecc.HIGH},f6=128,g6="L",p6="#FFFFFF",m6="#000000",w6=!1,HQ=4,B6=.1;function y6(t,e=0){const r=[];return t.forEach(function(n,A){let s=null;n.forEach(function(i,a){if(!i&&s!==null){r.push(`M${s+e} ${A+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===n.length-1){if(!i)return;s===null?r.push(`M${a+e},${A+e} h1v1H${a+e}z`):r.push(`M${s+e},${A+e} h${a+1-s}v1H${s+e}z`);return}i&&s===null&&(s=a)})}),r.join("")}function v6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((A,s)=>s<e.x||s>=e.x+e.w?A:!1))}function x6(t,e,r,n){if(n==null)return null;const A=r?HQ:0,s=t.length+A*2,i=Math.floor(e*B6),a=s/e,o=(n.width||i)*a,c=(n.height||i)*a,d=n.x==null?t.length/2-o/2:n.x*a,h=n.y==null?t.length/2-c/2:n.y*a;let f=null;if(n.excavate){let w=Math.floor(d),y=Math.floor(h),B=Math.ceil(o+d-w),E=Math.ceil(c+h-y);f={x:w,y,w:B,h:E}}return{x:d,y:h,h:c,w:o,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function C6(t){const e=t,{value:r,size:n=f6,level:A=g6,bgColor:s=p6,fgColor:i=m6,includeMargin:a=w6,imageSettings:o}=e,c=d6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Rl.QrCode.encodeText(r,h6[A]).getModules();const h=a?HQ:0,f=d.length+h*2,w=x6(d,n,a,o);let y=null;o!=null&&w!=null&&(w.excavation!=null&&(d=v6(d,w.excavation)),y=wA.createElement("image",{xlinkHref:o.src,height:w.h,width:w.w,x:w.x+h,y:w.y+h,preserveAspectRatio:"none"}));const B=y6(d,h);return wA.createElement("svg",u6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),wA.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),wA.createElement("path",{fill:i,d:B,shapeRendering:"crispEdges"}),y)}const I6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:A,bellSchedule:s,saveStaticData:i}=zA(),{schedule1:a,schedule2:o,substitutions:c,saveScheduleData:d}=Ha(),h=S.useRef(null),f=S.useRef(null),w=S.useRef(null),[y,B]=S.useState(new Date().toISOString().split("T")[0]),[E,x]=S.useState(()=>{const ue=new Date().getMonth();return ue>=0&&ue<=4?2:1}),[m,I]=S.useState(!1),[F,R]=S.useState(!1),[U,v]=S.useState(""),[C,_]=S.useState(""),[Q,N]=S.useState(!1),[L,T]=S.useState(""),Ke=S.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:A,bellSchedule:s,schedule:a,schedule2ndHalf:o,substitutions:c}),[t,e,r,n,A,s,a,o,c]),He=()=>E===2?o:a,et=ue=>{const ne=new Date(ue).getMonth();return ne>=0&&ne<=4?o:a},$e=S.useMemo(()=>{const ue=new Set;return r.forEach(ne=>{const Ee=ne.name.match(/^(\d+)/);Ee&&ue.add(Ee[1])}),Array.from(ue).sort((ne,Ee)=>parseInt(ne)-parseInt(Ee))},[r]);S.useEffect(()=>{$e.length>0&&!L&&T($e[0])},[$e]);const se=ue=>{var ke;const ne=(ke=ue.target.files)==null?void 0:ke[0];if(!ne)return;const Ee=new FileReader;Ee.onload=async le=>{var je;try{const fe=JSON.parse((je=le.target)==null?void 0:je.result);if(fe.teachers&&(fe.schedule||fe.schedule2ndHalf)){if(window.confirm("    . ?")){const ie={...sn,...fe,rooms:fe.rooms||sn.rooms,classes:fe.classes||[],schedule:fe.schedule||[],schedule2ndHalf:fe.schedule2ndHalf||[],teachers:fe.teachers||[],subjects:fe.subjects||[],substitutions:fe.substitutions||[],settings:{...sn.settings,...fe.settings}};await i(ie),await d(ie),alert("  !")}}else alert("  .")}catch{alert("  .")}},Ee.readAsText(ne)},k=()=>{const ue=He();let ne=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Ot.forEach(je=>{ne+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${je}</td></tr>`,[Be.First,Be.Second].forEach(fe=>{const ie=r.filter(ge=>ge.shift===fe);ie.length!==0&&(ne+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${fe}</td></tr>`,ne+='<tr><th class="header"></th>',wn[fe].forEach(ge=>ne+=`<th class="header">${ge} </th>`),ne+="</tr>",ie.forEach(ge=>{ne+=`<tr><td class="class-cell">${ge.name}</td>`,wn[fe].forEach(_e=>{const xe=ue.filter(ce=>ce.classId===ge.id&&ce.day===je&&ce.shift===fe&&ce.period===_e);ne+='<td style="height: 60px;">',xe.forEach(ce=>{const ze=t.find(Ce=>Ce.id===ce.subjectId),Xe=e.find(Ce=>Ce.id===ce.teacherId),ft=n.find(Ce=>Ce.id===ce.roomId),ye=ft?ft.name:ce.roomId;ne+=`<div style="background-color: ${(ze==null?void 0:ze.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(ze==null?void 0:ze.name)||""} ${ce.direction||""}</div>
                                <div class="meta">${(Xe==null?void 0:Xe.name)||""} ${ye?`(. ${ye})`:""}</div>
                            </div>`}),ne+="</td>"}),ne+="</tr>"}))})}),ne+="</table></body></html>";const Ee=new Blob([ne],{type:"application/vnd.ms-excel"}),ke=URL.createObjectURL(Ee),le=document.createElement("a");le.href=ke,le.download=`_22_${E}.xls`,document.body.appendChild(le),le.click(),document.body.removeChild(le)},G=()=>{const ue=He(),ne={[At.Monday]:{header:"#fecaca",cell:"#fee2e2"},[At.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[At.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[At.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[At.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let Ee=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;Ee+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[Be.First,Be.Second].forEach(fe=>{const ie=wn[fe];Ee+="<table>",Ee+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${Ot.length*ie.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,Ee+="<tr>",Ot.forEach(_e=>{var ce;const xe=((ce=ne[_e])==null?void 0:ce.header)||"#f3f4f6";Ee+=`<th colspan="${ie.length}" class="header" style="border: 2px solid #000; background-color: ${xe};">${_e}</th>`}),Ee+="</tr>",Ee+="<tr>",Ot.forEach(_e=>{var ce;const xe=((ce=ne[_e])==null?void 0:ce.header)||"#f3f4f6";ie.forEach(ze=>Ee+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${xe};"></th>`)}),Ee+="</tr>";const ge="#e5e7eb";Ee+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${ge};">${fe}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${ge};"></th>
            `,Ot.forEach(_e=>{var ce;const xe=((ce=ne[_e])==null?void 0:ce.header)||"#f3f4f6";ie.forEach(ze=>Ee+=`<th class="header" style="width: 40px; background-color: ${xe};">${ze}</th>`)}),Ee+="</tr>",t.forEach(_e=>{const xe=e.filter(ce=>ce.subjectIds.includes(_e.id)&&ce.shifts.includes(fe));xe.length!==0&&(xe.forEach((ce,ze)=>{Ee+="<tr>",ze===0&&(Ee+=`<td rowspan="${xe.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${_e.name}</td>`),Ee+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${ce.name}</td>`,Ot.forEach(Xe=>{var ye;const ft=((ye=ne[Xe])==null?void 0:ye.cell)||"#fff";ie.forEach(Ce=>{const Ge=ue.find(tt=>tt.teacherId===ce.id&&tt.subjectId===_e.id&&tt.day===Xe&&tt.period===Ce&&tt.shift===fe);if(Ge){const tt=r.find(pe=>pe.id===Ge.classId),mt=n.find(pe=>pe.id===Ge.roomId),D=mt?mt.name:Ge.roomId,K=D?`<sub>${D}</sub>`:"",$=Ge.direction?` <span style="font-size:10px">(${Ge.direction})</span>`:"";Ee+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ft};">${tt?tt.name:""}${$}${K}</td>`}else Ee+=`<td style="border: 1px solid #000; background-color: ${ft};"></td>`})}),Ee+="</tr>"}),Ee+=`<tr><td colspan="${2+Ot.length*ie.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),Ee+="</table><br/><br/>"}),Ee+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,Ee+="</body></html>";const ke=new Blob([Ee],{type:"application/vnd.ms-excel"}),le=URL.createObjectURL(ke),je=document.createElement("a");je.href=le,je.download=`__${E}.xls`,document.body.appendChild(je),je.click(),document.body.removeChild(je)},X=()=>{const ue=He(),ne={[At.Monday]:{header:"#fecaca",cell:"#fee2e2"},[At.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[At.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[At.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[At.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}},Ee=ie=>{if(!ie)return"";const ge=ie.toLowerCase();return ge.includes("")?"/":ge.includes("")?"":ge.includes("")?"":ie};let ke=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 10pt; vertical-align: sub; display: block; line-height: 1; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;ke+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[Be.First,Be.Second].forEach(ie=>{const ge=wn[ie];ke+="<table>",ke+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${Ot.length*ge.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,ke+="<tr>",Ot.forEach(xe=>{var ze;const ce=((ze=ne[xe])==null?void 0:ze.header)||"#f3f4f6";ke+=`<th colspan="${ge.length}" class="header" style="border: 3px solid #000; background-color: ${ce}; font-size: 20pt;">${xe}</th>`}),ke+="</tr>",ke+="<tr>",Ot.forEach(xe=>{var ze;const ce=((ze=ne[xe])==null?void 0:ze.header)||"#f3f4f6";ke+=`<th colspan="${ge.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${ce}; font-size: 16pt;"></th>`}),ke+="</tr>";const _e="#e5e7eb";ke+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${_e}; font-size: 24pt;">${ie}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${_e};"></th>
            `,Ot.forEach(xe=>{var ze;const ce=((ze=ne[xe])==null?void 0:ze.header)||"#f3f4f6";ge.forEach(Xe=>ke+=`<th class="header" style="width: 25px; background-color: ${ce}; font-size: 16pt;">${Xe}</th>`)}),ke+="</tr>",t.forEach(xe=>{const ce=e.filter(ze=>ze.subjectIds.includes(xe.id)&&ze.shifts.includes(ie));ce.length!==0&&(ce.forEach((ze,Xe)=>{ke+="<tr>",Xe===0&&(ke+=`<td rowspan="${ce.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${xe.name}</td>`),ke+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${ze.name}</td>`,Ot.forEach(ft=>{var Ce;const ye=((Ce=ne[ft])==null?void 0:Ce.cell)||"#fff";ge.forEach(Ge=>{const tt=ue.find(mt=>mt.teacherId===ze.id&&mt.subjectId===xe.id&&mt.day===ft&&mt.period===Ge&&mt.shift===ie);if(tt){const mt=r.find(he=>he.id===tt.classId),D=n.find(he=>he.id===tt.roomId),K=D?D.name:tt.roomId,$=Ee(K||""),O=$?`<sub>${$}</sub>`:"",pe=tt.direction?` <span style="font-size:10pt">(${tt.direction})</span>`:"";ke+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ye}; height: 60px; font-size: 18pt; line-height: 1.1;">${mt?mt.name:""}${pe}${O}</td>`}else ke+=`<td style="border: 1px solid #000; background-color: ${ye};"></td>`})}),ke+="</tr>"}),ke+=`<tr><td colspan="${2+Ot.length*ge.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),ke+="</table><br/><br/>"}),ke+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,ke+="</body></html>";const le=new Blob([ke],{type:"application/vnd.ms-excel"}),je=URL.createObjectURL(le),fe=document.createElement("a");fe.href=je,fe.download=`__${E}.xls`,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)},oe=()=>{const ue=He(),ne=r.filter(ge=>ge.name.startsWith(L)).sort((ge,_e)=>ge.name.localeCompare(_e.name)),Ee=Array.from(new Set(ne.map(ge=>ge.shift))).sort(),ke={[At.Monday]:{label:"#fecaca",cell:"#fee2e2"},[At.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[At.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[At.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[At.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let le=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;Ee.forEach(ge=>{const _e=ne.filter(ce=>ce.shift===ge),xe=wn[ge];_e.length!==0&&(le+="<table>",le+="<tr>",le+='<td style="border:none"></td>',le+='<td style="border:none"></td>',le+=`<td colspan="${_e.length}" class="shift-header">${ge}</td>`,le+="</tr>",le+="<tr>",le+='<td style="border:none"></td>',le+='<td style="border:none"></td>',_e.forEach(ce=>{le+=`<td class="class-header">${ce.name}</td>`}),le+="</tr>",Ot.forEach(ce=>{const ze=ke[ce]||{label:"#e5e7eb",cell:"#f3f4f6"};xe.forEach((Xe,ft)=>{le+="<tr>",ft===0&&(le+=`<td rowspan="${xe.length}" class="day-cell" style="background-color: ${ze.label};">${ce.toUpperCase()}</td>`),le+=`<td class="period-cell" style="background-color: ${ze.label};">${Xe}</td>`,_e.forEach(ye=>{const Ce=ue.filter(Ge=>Ge.classId===ye.id&&Ge.day===ce&&Ge.shift===ge&&Ge.period===Xe);le+=`<td class="content-cell" style="background-color: ${ze.cell};">`,Ce.forEach((Ge,tt)=>{tt>0&&(le+='<br style="mso-data-placement:same-cell;">');const mt=t.find($=>$.id===Ge.subjectId),D=n.find($=>$.id===Ge.roomId),K=D?D.name:Ge.roomId||"";le+=`<span class="subject">${(mt==null?void 0:mt.name)||""}</span>`,K&&(le+=` <span class="room">${K}</span>`)}),le+="</td>"}),le+="</tr>"}),le+=`<tr><td colspan="${2+_e.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),le+="</table><br><br>")}),le+="</body></html>";const je=new Blob([le],{type:"application/vnd.ms-excel"}),fe=URL.createObjectURL(je),ie=document.createElement("a");ie.href=fe,ie.download=`__${L}_.xls`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},ae=()=>{const ue=new Date(y),ne=ue.getMonth(),Ee=ue.getFullYear(),ke=c.filter(ye=>{const Ce=new Date(ye.date);return Ce.getMonth()===ne&&Ce.getFullYear()===Ee}).sort((ye,Ce)=>new Date(ye.date).getTime()-new Date(Ce.date).getTime());if(ke.length===0){alert("      .");return}const le=new Map;ke.forEach(ye=>{const Ce=`${ye.scheduleItemId}_${ye.date}`,Ge=le.get(Ce)||[];Ge.push(ye),le.set(Ce,Ge)});const je=[],fe=[];le.forEach(ye=>{var O;const Ce=ye[0],Ge=a.find(pe=>pe.id===Ce.scheduleItemId)||o.find(pe=>pe.id===Ce.scheduleItemId);if(!Ge)return;const tt=r.find(pe=>pe.id===Ge.classId),mt=t.find(pe=>pe.id===Ge.subjectId),D=e.find(pe=>pe.id===Ce.originalTeacherId);let K=Ce.lessonAbsenceReason||((O=D==null?void 0:D.absenceReasons)==null?void 0:O[Ce.date])||"";Ce.replacementTeacherId===Ce.originalTeacherId&&Ce.replacementRoomId&&!Ce.replacementClassId&&(K=" "),Ce.replacementClassId&&Ce.replacementSubjectId&&!Ce.isMerger&&(K=" ");const $={subs:ye,scheduleItem:Ge,cls:tt,subj:mt,origTeacher:D,reason:K};K===" "?fe.push($):je.push($)});let ie=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${ue.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const ge=ye=>ye.map(Ce=>{const{subs:Ge,scheduleItem:tt,cls:mt,subj:D,origTeacher:K,reason:$}=Ce,O=Ge[0],pe=new Date(O.date).toLocaleDateString("ru-RU");let he="";if(O.replacementTeacherId==="conducted")he=" ";else if(O.replacementTeacherId==="cancelled")he=" ";else if(he=Ge.map(J=>{const ee=e.find(te=>te.id===J.replacementTeacherId);return ee?ee.name:""}).join(", "),O.isMerger){let J=" ()";if(O.replacementClassId){const ee=r.find(te=>te.id===O.replacementClassId);ee&&(J=` (  ${ee.name})`)}he+=J}else if(O.replacementClassId&&O.replacementSubjectId){const J=r.find(te=>te.id===O.replacementClassId),ee=t.find(te=>te.id===O.replacementSubjectId);he+=` ( ${(J==null?void 0:J.name)||"?"} ${(ee==null?void 0:ee.name)||"?"})`}const re=tt.roomId,Qe=O.replacementRoomId,de=Qe||re,Pe=n.find(W=>W.id===de),P=Pe?Pe.name:de||"-",V=Qe?`${P} ( .)`:P;return`
                    <tr>
                        <td>${pe}</td>
                        <td>${tt.period}</td>
                        <td>${tt.shift}</td>
                        <td>${(mt==null?void 0:mt.name)||"?"}</td>
                        <td>${(D==null?void 0:D.name)||"?"}</td>
                        <td>${(K==null?void 0:K.name)||"?"}</td>
                        <td>${he}</td>
                        <td>${V}</td>
                        <td>${$}</td>
                    </tr>
                `}).join(""),_e=(ye,Ce=!1)=>`
            <table>
            <thead>
                <tr class="${Ce?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${ge(ye)}
            </tbody>
            </table>
        `;je.length>0?ie+=_e(je):ie+="<p>     .</p>",fe.length>0&&(ie+="<br/><br/>",ie+='<h3 style="color: #b91c1c;">   (  )</h3>',ie+=_e(fe,!0));const xe=new Map;ke.forEach(ye=>{var D;if(ye.replacementTeacherId==="conducted"||ye.replacementTeacherId==="cancelled"||ye.replacementTeacherId===ye.originalTeacherId)return;const Ce=e.find(K=>K.id===ye.replacementTeacherId);if(!Ce)return;const Ge=xe.get(Ce.id)||{name:Ce.name,total:0,withoutRecord:0,merger:0,other:0},tt=e.find(K=>K.id===ye.originalTeacherId);let mt=ye.lessonAbsenceReason||((D=tt==null?void 0:tt.absenceReasons)==null?void 0:D[ye.date])||"";ye.replacementClassId&&ye.replacementSubjectId&&!ye.isMerger&&(mt=" "),Ge.total++,ye.isMerger?Ge.merger++:mt===" "?Ge.withoutRecord++:Ge.other++,xe.set(Ce.id,Ge)});const ce=Array.from(xe.values()).sort((ye,Ce)=>ye.name.localeCompare(Ce.name));ce.length>0&&(ie+="<br/><br/>",ie+="<h3>   </h3>",ie+=`
             <table style="border-collapse: collapse; width: 50%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,ce.forEach(ye=>{ie+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${ye.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ye.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ye.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ye.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${ye.other}</td>
                     </tr>
                 `}),ie+="</tbody></table>"),ie+="</body></html>";const ze=new Blob([ie],{type:"application/vnd.ms-excel"}),Xe=URL.createObjectURL(ze),ft=document.createElement("a");ft.href=Xe,ft.download=`__${ue.getMonth()+1}_${ue.getFullYear()}.xls`,document.body.appendChild(ft),ft.click(),document.body.removeChild(ft)},Ve=()=>{const ue=new Date(y),ne=ue.getMonth(),Ee=ue.getFullYear(),ke=c.filter(ge=>{const _e=new Date(ge.date),xe=_e.getMonth()===ne&&_e.getFullYear()===Ee,ce=ge.refusals&&ge.refusals.length>0;return xe&&ce}).sort((ge,_e)=>new Date(ge.date).getTime()-new Date(_e.date).getTime());if(ke.length===0){alert("      .");return}let le=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${ue.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;ke.forEach(ge=>{const _e=a.find(Ce=>Ce.id===ge.scheduleItemId)||o.find(Ce=>Ce.id===ge.scheduleItemId);if(!_e)return;const xe=new Date(ge.date).toLocaleDateString("ru-RU"),ce=r.find(Ce=>Ce.id===_e.classId),ze=t.find(Ce=>Ce.id===_e.subjectId),Xe=e.find(Ce=>Ce.id===ge.originalTeacherId);let ft="";if(ge.replacementTeacherId==="conducted")ft=" ";else if(ge.replacementTeacherId==="cancelled")ft=" ";else{const Ce=e.find(Ge=>Ge.id===ge.replacementTeacherId);ft=Ce?Ce.name:""}const ye=(ge.refusals||[]).map(Ce=>{const Ge=e.find(tt=>tt.id===Ce);return Ge?Ge.name:""}).join(", ");le+=`
                <tr>
                    <td>${xe}</td>
                    <td>${_e.period}</td>
                    <td>${_e.shift}</td>
                    <td>${(ce==null?void 0:ce.name)||"?"}</td>
                    <td>${(ze==null?void 0:ze.name)||"?"}</td>
                    <td>${(Xe==null?void 0:Xe.name)||"?"}</td>
                    <td>${ft}</td>
                    <td>${ye}</td>
                </tr>
            `}),le+="</tbody></table></body></html>";const je=new Blob([le],{type:"application/vnd.ms-excel"}),fe=URL.createObjectURL(je),ie=document.createElement("a");ie.href=fe,ie.download=`__${ue.getMonth()+1}_${ue.getFullYear()}.xls`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},Fe=()=>{const ue=He();let ne=`							
`;Ot.forEach(Ee=>{[Be.First,Be.Second].forEach(ke=>{r.filter(je=>je.shift===ke).forEach(je=>{wn[ke].forEach(fe=>{ue.filter(ge=>ge.classId===je.id&&ge.day===Ee&&ge.shift===ke&&ge.period===fe).forEach(ge=>{const _e=t.find(Xe=>Xe.id===ge.subjectId),xe=e.find(Xe=>Xe.id===ge.teacherId),ce=n.find(Xe=>Xe.id===ge.roomId),ze=ce?ce.name:ge.roomId||"";ne+=`${Ee}	${ke}	${je.name}	${fe}	${(_e==null?void 0:_e.name)||""}	${(xe==null?void 0:xe.name)||""}	${ze}	${ge.direction||""}
`})})})})}),navigator.clipboard.writeText(ne).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},We=async()=>{I(!0);try{if(!f.current){alert("   1- .");return}const ue=await TI(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),ne=document.createElement("a");ne.href=ue.toDataURL("image/png"),ne.download=`_${y}_1.png`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)}catch(ue){console.error(ue),alert("   ")}finally{I(!1)}},Te=async()=>{I(!0);try{if(!w.current){alert("   2- .");return}const ue=await TI(w.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),ne=document.createElement("a");ne.href=ue.toDataURL("image/png"),ne.download=`_${y}_2.png`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne)}catch(ue){console.error(ue),alert("   ")}finally{I(!1)}},pt=S.useMemo(()=>c.filter(ue=>ue.date===y),[c,y]),tr=S.useMemo(()=>{const ue=et(y);return pt.filter(ne=>{const Ee=ue.find(ke=>ke.id===ne.scheduleItemId);return Ee&&Ee.shift===Be.First}).filter(ne=>ne.replacementTeacherId!=="conducted").length>0},[pt,et,y]),rt=S.useMemo(()=>{const ue=et(y);return pt.filter(ne=>{const Ee=ue.find(ke=>ke.id===ne.scheduleItemId);return Ee&&Ee.shift===Be.Second}).filter(ne=>ne.replacementTeacherId!=="conducted").length>0},[pt,et,y]),dt=ue=>{const ne=et(y),Ee=pt.filter(le=>{const je=ne.find(fe=>fe.id===le.scheduleItemId);return je&&je.shift===ue}).filter(le=>le.replacementTeacherId!=="conducted");if(Ee.length===0)return null;const ke=Array.from(new Set(Ee.map(le=>le.scheduleItemId))).sort((le,je)=>{const fe=ne.find(ge=>ge.id===le),ie=ne.find(ge=>ge.id===je);return((fe==null?void 0:fe.period)??0)-((ie==null?void 0:ie.period)??0)});return l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:ue}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:ke.map(le=>{var he,re,Qe;const je=Ee.filter(de=>de.scheduleItemId===le),fe=je[0],ie=ne.find(de=>de.id===le);if(!ie)return null;const ge=r.find(de=>de.id===ie.classId),_e=t.find(de=>de.id===ie.subjectId),xe=e.find(de=>de.id===fe.originalTeacherId),ce=fe.replacementRoomId,ze=ie.roomId?n.find(de=>de.id===ie.roomId):null,Xe=ze?ze.name:ie.roomId||"",ft=ce?n.find(de=>de.id===ce):null,ye=ft?ft.name:ce||"",Ce=fe.replacementTeacherId==="cancelled",Ge=(he=xe==null?void 0:xe.absenceReasons)==null?void 0:he[y],tt=fe.lessonAbsenceReason,mt=tt===" "?tt:Ge===" "?Ge:"",D=fe.replacementClassId?r.find(de=>de.id===fe.replacementClassId):null,K=fe.replacementSubjectId?t.find(de=>de.id===fe.replacementSubjectId):null,$=fe.replacementTeacherId===fe.originalTeacherId&&ce&&!D,O=D&&K&&!fe.isMerger,pe=fe.replacementTeacherId===fe.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:ie.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:ge==null?void 0:ge.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:_e==null?void 0:_e.name}),ie.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:ie.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!pe&&!$&&!O&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[xe==null?void 0:xe.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),mt&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:mt})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${Ce?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:$?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:xe==null?void 0:xe.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):O?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:xe==null?void 0:xe.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",D==null?void 0:D.name]})]}):Ce?l.jsx("div",{className:"flex flex-col",children:l.jsx("span",{children:" "})}):l.jsx("div",{className:"flex flex-col",children:je.length>1||fe.isMerger?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-800 text-xs",children:je.map(de=>{const Pe=e.find(P=>P.id===de.replacementTeacherId);return Pe?Pe.name:""}).join(", ")}),l.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",fe.replacementClassId?`(${(re=r.find(de=>de.id===fe.replacementClassId))==null?void 0:re.name})`:""]})]}):l.jsx("span",{children:(Qe=e.find(de=>de.id===fe.replacementTeacherId))==null?void 0:Qe.name})})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${ce?"text-indigo-600":"text-slate-700"}`,children:ce&&ce!==ie.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Xe}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:ye})]}):l.jsx("span",{className:"text-xl",children:Xe})})]},String(le))})})]})]})},ht=async()=>{const ue=Math.random().toString(36).substr(2,9);await Xr.setPublicData(ue,Ke),await i({settings:{...A,publicScheduleId:ue}});const ne=`${window.location.origin}${window.location.pathname}#/public?id=${ue}`;v(ne),_(ue),R(!0)},Ie=async()=>{!A.publicScheduleId||!window.confirm(" ,     ?      .")||(await Xr.deletePublicData(A.publicScheduleId),await i({settings:{...A,publicScheduleId:null}}),alert("  ."),v(""),_(""))},Re=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(y).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),Ct=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]}),jt=()=>{const ue=He(),ne=r.filter(le=>le.name.startsWith(L)).sort((le,je)=>le.name.localeCompare(je.name)),Ee=Array.from(new Set(ne.map(le=>le.shift))).sort(),ke={[At.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[At.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[At.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[At.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[At.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return ne.length===0?l.jsx("div",{className:"text-center p-10",children:"    "}):l.jsx("div",{className:"font-sans text-black",children:Ee.map(le=>{const je=ne.filter(ie=>ie.shift===le),fe=wn[le];return je.length===0?null:l.jsx("div",{className:"mb-10 page-break-inside-avoid",children:l.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[l.jsxs("thead",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{colSpan:je.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:le})]}),l.jsxs("tr",{children:[l.jsx("th",{className:"border-2 border-black w-8"}),l.jsx("th",{className:"border-2 border-black w-8"}),je.map(ie=>l.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:ie.name},String(ie.id)))]})]}),l.jsx("tbody",{children:Ot.map(ie=>{const ge=ke[ie]||{label:"bg-gray-200",cell:"bg-gray-100"};return l.jsxs(wA.Fragment,{children:[fe.map((_e,xe)=>l.jsxs("tr",{children:[xe===0&&l.jsx("td",{rowSpan:fe.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${ge.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:ie===At.Monday?"":ie===At.Tuesday?"":ie===At.Wednesday?"":ie===At.Thursday?"":ie===At.Friday?"":ie}),l.jsx("td",{className:`border-2 border-black font-bold text-base ${ge.label}`,children:_e}),je.map(ce=>{const ze=ue.filter(Xe=>Xe.classId===ce.id&&Xe.day===ie&&Xe.shift===le&&Xe.period===_e);return l.jsx("td",{className:`border-2 border-black p-1 h-12 ${ge.cell}`,children:ze.map(Xe=>{const ft=t.find(Ge=>Ge.id===Xe.subjectId),ye=n.find(Ge=>Ge.id===Xe.roomId),Ce=ye?ye.name:Xe.roomId||"";return l.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[l.jsx("span",{children:ft==null?void 0:ft.name}),Ce&&l.jsx("span",{className:"font-black",children:Ce})]},String(Xe.id))})},String(ce.id))})]},`${String(ie)}-${_e}`)),l.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:l.jsx("td",{colSpan:2+je.length})})]},String(ie))})})]})},String(le))})})};return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>Xr.exportJson(Ke),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:se,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var ue;return(ue=h.current)==null?void 0:ue.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx(q,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx(q,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:y,onChange:ue=>B(ue.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:We,disabled:m||!tr,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:m?l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:Te,disabled:m||!rt,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:m?l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx(q,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:pt.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Re,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(Ct,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[tr&&l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Re,{}),dt(Be.First),l.jsx(Ct,{})]}),rt&&l.jsxs("div",{ref:w,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(Re,{}),dt(Be.Second),l.jsx(Ct,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsx("select",{value:L,onChange:ue=>T(ue.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:$e.map(ue=>l.jsxs("option",{value:ue,children:[ue,"- "]},ue))})]}),l.jsxs("button",{onClick:()=>N(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Printer",size:20}),"  "]}),l.jsxs("button",{onClick:oe,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:E,onChange:ue=>x(Number(ue.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:k,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:G,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:X,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:Fe,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx(q,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:ae,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:Ve,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),A.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.publicScheduleId})]}),l.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx(q,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Ie,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:ht,disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx(q,{name:"Share2",size:20}),"  "]})]}),l.jsx(bA,{isOpen:F,onClose:()=>R(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),U&&l.jsxs(l.Fragment,{children:[l.jsx(C6,{value:U,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:U,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:U}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(U),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx(q,{name:"Copy",size:16}),"  "]})]})]})}),Q&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",L,"- )"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx(q,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:l.jsx(jt,{})})]})]})},_6=()=>{var x;const{subjects:t,teachers:e,classes:r}=zA(),{schedule1:n,schedule2:A,substitutions:s}=Ha(),[i,a]=S.useState("load"),[o,c]=S.useState(((x=r[0])==null?void 0:x.id)||""),[d,h]=S.useState(()=>{const m=new Date().getMonth();return m>=0&&m<=4?2:1}),f=S.useMemo(()=>d===2?A:n,[d,n,A]),w=S.useMemo(()=>e.map(I=>{const F=f.filter(N=>N.teacherId===I.id),R=F.length,U=R*4,v=s.filter(N=>N.replacementTeacherId===I.id).length,C=s.filter(N=>N.originalTeacherId===I.id).length,_=U+v-C,Q={};return F.forEach(N=>{const L=t.find(T=>T.id===N.subjectId);L&&(Q[L.name]=(Q[L.name]||0)+1)}),{id:I.id,name:I.name,weeklyHours:R,subsTaken:v,subsMissed:C,actualHours:_,subjectBreakdown:Q}}).sort((I,F)=>F.actualHours-I.actualHours),[e,f,s,t]),y=S.useMemo(()=>o?Ot.map(m=>{const F=f.filter(R=>R.classId===o&&R.day===m).reduce((R,U)=>{const v=t.find(C=>C.id===U.subjectId);return R+((v==null?void 0:v.difficulty)||5)},0);return{label:m,value:F}}):[],[f,t,o]),B=S.useMemo(()=>{const m=e.map(F=>({name:F.name,count:s.filter(R=>R.replacementTeacherId===F.id).length})).sort((F,R)=>R.count-F.count).slice(0,5),I=e.map(F=>({name:F.name,count:F.unavailableDates.length})).sort((F,R)=>R.count-F.count).slice(0,5);return{heroes:m,absentees:I}},[e,s]),E=()=>{let m="";i==="load"?m=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+w.map(R=>`"${R.name}",${R.weeklyHours},${R.subsTaken},${R.subsMissed},${R.actualHours},"${Object.entries(R.subjectBreakdown).map(([U,v])=>U+": "+v).join(", ")}"`).join(`
`):i==="sanpin"&&(m=`Day,Score
`+y.map(R=>`${R.label},${R.value}`).join(`
`));const I=new Blob([`\uFEFF${m}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(I),F.download=`report_${i}_${d}sem.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx(q,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:m=>h(Number(m.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:E,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx(q,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>a("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>a("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:w.map(m=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:m.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:m.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",m.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",m.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:m.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(m.subjectBreakdown).map(([I,F])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[I,": ",F]},I))})})]},m.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:o,onChange:m=>c(m.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(m=>l.jsx("option",{value:m.id,children:m.name},m.id))})]}),l.jsx(Ap,{items:y,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Ap,{items:B.heroes.map(m=>({label:m.name,value:m.count})),max:Math.max(...B.heroes.map(m=>m.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx(q,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Ap,{items:B.absentees.map(m=>({label:m.name,value:m.count})),max:Math.max(...B.absentees.map(m=>m.count),1),barClassName:"bg-red-500"})]})]})]})},E6=()=>{const{setGuestRole:t,role:e,loading:r}=Oa(),n=Vc(),[A,s]=S.useState("select"),[i,a]=S.useState(""),[o,c]=S.useState(""),[d,h]=S.useState(""),[f,w]=S.useState(!1);S.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher")&&n("/dashboard")},[e,r,n]);const y=async E=>{if(E.preventDefault(),h(""),w(!0),!Bn){h("Firebase .  ."),w(!1);return}try{let x=i;A==="teacher"&&(x="teacher@gymnasium22.com"),await eM(Bn,x,o)}catch(x){console.error("Firebase Auth Error:",x);const m=x==null?void 0:x.code;let I="   .";switch(m){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":I="   .";break;case"auth/invalid-email":I="  email.";break;case"auth/too-many-requests":I="  . .";break;default:I=" .  ."}h(I)}finally{w(!1)}},B=()=>{t(),n("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx(q,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),A==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:B,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>s("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>s("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx(q,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:" "})]})]})]}),A!=="select"&&l.jsxs("form",{onSubmit:y,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{s("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(q,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:A==="teacher"?"  ":"  "})]}),A==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:E=>a(E.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:o,onChange:E=>c(E.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||r)&&l.jsx(q,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},hi=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:A}=Oa();return A?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?l.jsx(xh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(xh,{to:"/login",replace:!0})},b6=()=>{const{role:t,loading:e}=Oa();return e?null:t==="guest"?l.jsx(xh,{to:"/schedule",replace:!0}):l.jsx(xh,{to:"/dashboard",replace:!0})},T6=()=>{const[t,e]=S.useState(!1),[r,n]=S.useState(localStorage.getItem("theme")||"light"),[A,s]=S.useState(localStorage.getItem("new_year_mode")==="true"),{isLoading:i}=zA(),{logout:a,role:o,user:c}=Oa();if(S.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",r)},[r]),S.useEffect(()=>{A?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),localStorage.setItem("new_year_mode",String(A))},[A]),i)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(o||""));return l.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${A?"festive-bg":""}`,children:[A&&l.jsx("div",{className:"snow-overlay no-print"}),t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col relative",children:[A&&l.jsx("div",{className:"bg-garland"}),l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[l.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[l.jsx(q,{name:"GraduationCap",size:24}),A&&l.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:[l.jsx("div",{className:"px-2 mb-2",children:l.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""})}),h.map(f=>l.jsxs(O2,{to:f.to,onClick:()=>e(!1),className:({isActive:w})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${w?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx(q,{name:f.icon,size:20}),f.label]},f.to))]}),l.jsx(FO,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between px-2",children:[l.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),l.jsx("button",{onClick:a,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx(q,{name:"LogOut",size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?l.jsx(q,{name:"Moon",size:18}):l.jsx(q,{name:"Sun",size:18})}),l.jsx("button",{onClick:()=>s(!A),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${A?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:l.jsx(q,{name:"Snowflake",size:18,className:A?"animate-spin-slow":""})})]})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),className:"p-2 text-slate-600 dark:text-slate-300",children:l.jsx(q,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:" Pro22"}),A&&l.jsx("div",{className:"ml-auto text-xl",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 custom-scrollbar relative",children:l.jsx(E2,{})})]})]})},F6=()=>{const[t,e]=S.useState(null),[r,n]=S.useState(!0),[A]=K2(),s=A.get("id");return S.useEffect(()=>{s?(n(!0),Xr.getPublicData(s).then(i=>{const a={...sn,...i,settings:{...sn.settings,...i==null?void 0:i.settings}};e(a),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[s]),r?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx(q,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(TF,{initialData:t,children:l.jsx(UF,{children:l.jsx(SF,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx(q,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(DF,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx(q,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function Q6(){return l.jsx(EO,{children:l.jsx(TF,{children:l.jsx(UF,{children:l.jsx(SF,{children:l.jsx(P2,{children:l.jsxs(T2,{children:[l.jsx(gn,{path:"/login",element:l.jsx(E6,{})}),l.jsxs(gn,{path:"/",element:l.jsx(hi,{children:l.jsx(T6,{})}),children:[l.jsx(gn,{index:!0,element:l.jsx(b6,{})}),l.jsx(gn,{path:"dashboard",element:l.jsx(hi,{allowedRoles:["admin","teacher"],children:l.jsx(QO,{})})}),l.jsx(gn,{path:"schedule",element:l.jsx(QI,{semester:1})}),l.jsx(gn,{path:"schedule2",element:l.jsx(QI,{semester:2})}),l.jsx(gn,{path:"substitutions",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(LO,{})})}),l.jsx(gn,{path:"directory",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(PO,{})})}),l.jsx(gn,{path:"admin",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(jO,{})})}),l.jsx(gn,{path:"reports",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(_6,{})})}),l.jsx(gn,{path:"export",element:l.jsx(hi,{allowedRoles:["admin"],children:l.jsx(I6,{})})})]}),l.jsx(gn,{path:"/public",element:l.jsx(F6,{})})]})})})})})})}const QI=({semester:t=1})=>{const{role:e}=Oa();return l.jsx(DF,{readOnly:e!=="admin",semester:t})};Ep.createRoot(document.getElementById("root")).render(l.jsx(wA.StrictMode,{children:l.jsx(Q6,{})}));
