function iU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const A in r)if(A!=="default"&&!(A in t)){const s=Object.getOwnPropertyDescriptor(r,A);s&&Object.defineProperty(t,A,s.get?s:{enumerable:!0,get:()=>r[A]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))r(A);new MutationObserver(A=>{for(const s of A)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(A){const s={};return A.integrity&&(s.integrity=A.integrity),A.referrerPolicy&&(s.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?s.credentials="include":A.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(A){if(A.ep)return;A.ep=!0;const s=n(A);fetch(A.href,s)}})();function FI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var QI={exports:{}},Wh={},UI={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=Symbol.for("react.element"),oU=Symbol.for("react.portal"),aU=Symbol.for("react.fragment"),lU=Symbol.for("react.strict_mode"),cU=Symbol.for("react.profiler"),uU=Symbol.for("react.provider"),dU=Symbol.for("react.context"),hU=Symbol.for("react.forward_ref"),fU=Symbol.for("react.suspense"),gU=Symbol.for("react.memo"),pU=Symbol.for("react.lazy"),wv=Symbol.iterator;function mU(t){return t===null||typeof t!="object"?null:(t=wv&&t[wv]||t["@@iterator"],typeof t=="function"?t:null)}var SI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kI=Object.assign,RI={};function pa(t,e,n){this.props=t,this.context=e,this.refs=RI,this.updater=n||SI}pa.prototype.isReactComponent={};pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function NI(){}NI.prototype=pa.prototype;function m0(t,e,n){this.props=t,this.context=e,this.refs=RI,this.updater=n||SI}var w0=m0.prototype=new NI;w0.constructor=m0;kI(w0,pa.prototype);w0.isPureReactComponent=!0;var Bv=Array.isArray,DI=Object.prototype.hasOwnProperty,B0={current:null},PI={key:!0,ref:!0,__self:!0,__source:!0};function LI(t,e,n){var r,A={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)DI.call(e,r)&&!PI.hasOwnProperty(r)&&(A[r]=e[r]);var o=arguments.length-2;if(o===1)A.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];A.children=a}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)A[r]===void 0&&(A[r]=o[r]);return{$$typeof:Qc,type:t,key:s,ref:i,props:A,_owner:B0.current}}function wU(t,e){return{$$typeof:Qc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function v0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qc}function BU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vv=/\/+/g;function ug(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BU(""+t.key):e.toString(36)}function hd(t,e,n,r,A){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Qc:case oU:i=!0}}if(i)return i=t,A=A(i),t=r===""?"."+ug(i,0):r,Bv(A)?(n="",t!=null&&(n=t.replace(vv,"$&/")+"/"),hd(A,e,n,"",function(c){return c})):A!=null&&(v0(A)&&(A=wU(A,n+(!A.key||i&&i.key===A.key?"":(""+A.key).replace(vv,"$&/")+"/")+t)),e.push(A)),1;if(i=0,r=r===""?".":r+":",Bv(t))for(var o=0;o<t.length;o++){s=t[o];var a=r+ug(s,o);i+=hd(s,e,n,a,A)}else if(a=mU(t),typeof a=="function")for(t=a.call(t),o=0;!(s=t.next()).done;)s=s.value,a=r+ug(s,o++),i+=hd(s,e,n,a,A);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function wu(t,e,n){if(t==null)return t;var r=[],A=0;return hd(t,r,"","",function(s){return e.call(n,s,A++)}),r}function vU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wn={current:null},fd={transition:null},yU={ReactCurrentDispatcher:Wn,ReactCurrentBatchConfig:fd,ReactCurrentOwner:B0};function MI(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:wu,forEach:function(t,e,n){wu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wu(t,function(){e++}),e},toArray:function(t){return wu(t,function(e){return e})||[]},only:function(t){if(!v0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=pa;tt.Fragment=aU;tt.Profiler=cU;tt.PureComponent=m0;tt.StrictMode=lU;tt.Suspense=fU;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yU;tt.act=MI;tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kI({},t.props),A=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=B0.current),e.key!==void 0&&(A=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(a in e)DI.call(e,a)&&!PI.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&o!==void 0?o[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){o=Array(a);for(var c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Qc,type:t.type,key:A,ref:s,props:r,_owner:i}};tt.createContext=function(t){return t={$$typeof:dU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uU,_context:t},t.Consumer=t};tt.createElement=LI;tt.createFactory=function(t){var e=LI.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:hU,render:t}};tt.isValidElement=v0;tt.lazy=function(t){return{$$typeof:pU,_payload:{_status:-1,_result:t},_init:vU}};tt.memo=function(t,e){return{$$typeof:gU,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=fd.transition;fd.transition={};try{t()}finally{fd.transition=e}};tt.unstable_act=MI;tt.useCallback=function(t,e){return Wn.current.useCallback(t,e)};tt.useContext=function(t){return Wn.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return Wn.current.useDeferredValue(t)};tt.useEffect=function(t,e){return Wn.current.useEffect(t,e)};tt.useId=function(){return Wn.current.useId()};tt.useImperativeHandle=function(t,e,n){return Wn.current.useImperativeHandle(t,e,n)};tt.useInsertionEffect=function(t,e){return Wn.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return Wn.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return Wn.current.useMemo(t,e)};tt.useReducer=function(t,e,n){return Wn.current.useReducer(t,e,n)};tt.useRef=function(t){return Wn.current.useRef(t)};tt.useState=function(t){return Wn.current.useState(t)};tt.useSyncExternalStore=function(t,e,n){return Wn.current.useSyncExternalStore(t,e,n)};tt.useTransition=function(){return Wn.current.useTransition()};tt.version="18.3.1";UI.exports=tt;var k=UI.exports;const is=FI(k),xU=iU({__proto__:null,default:is},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CU=k,IU=Symbol.for("react.element"),EU=Symbol.for("react.fragment"),_U=Object.prototype.hasOwnProperty,bU=CU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TU={key:!0,ref:!0,__self:!0,__source:!0};function jI(t,e,n){var r,A={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)_U.call(e,r)&&!TU.hasOwnProperty(r)&&(A[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)A[r]===void 0&&(A[r]=e[r]);return{$$typeof:IU,type:t,key:s,ref:i,props:A,_owner:bU.current}}Wh.Fragment=EU;Wh.jsx=jI;Wh.jsxs=jI;QI.exports=Wh;var l=QI.exports,vp={},HI={exports:{}},mr={},OI={exports:{}},VI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,S){var O=ee.length;ee.push(S);e:for(;0<O;){var G=O-1>>>1,Y=ee[G];if(0<A(Y,S))ee[G]=S,ee[O]=Y,O=G;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var S=ee[0],O=ee.pop();if(O!==S){ee[0]=O;e:for(var G=0,Y=ee.length,ne=Y>>>1;G<ne;){var Le=2*(G+1)-1,Ee=ee[Le],Ve=Le+1,ve=ee[Ve];if(0>A(Ee,O))Ve<Y&&0>A(ve,Ee)?(ee[G]=ve,ee[Ve]=O,G=Ve):(ee[G]=Ee,ee[Le]=O,G=Le);else if(Ve<Y&&0>A(ve,O))ee[G]=ve,ee[Ve]=O,G=Ve;else break e}}return S}function A(ee,S){var O=ee.sortIndex-S.sortIndex;return O!==0?O:ee.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var a=[],c=[],d=1,h=null,f=3,m=!1,B=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ee){for(var S=n(c);S!==null;){if(S.callback===null)r(c);else if(S.startTime<=ee)r(c),S.sortIndex=S.expirationTime,e(a,S);else break;S=n(c)}}function F(ee){if(v=!1,I(ee),!B)if(n(a)!==null)B=!0,et(U);else{var S=n(c);S!==null&&Ne(F,S.startTime-ee)}}function U(ee,S){B=!1,v&&(v=!1,x(C),C=-1),m=!0;var O=f;try{for(I(S),h=n(a);h!==null&&(!(h.expirationTime>S)||ee&&!N());){var G=h.callback;if(typeof G=="function"){h.callback=null,f=h.priorityLevel;var Y=G(h.expirationTime<=S);S=t.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(a)&&r(a),I(S)}else r(a);h=n(a)}if(h!==null)var ne=!0;else{var Le=n(c);Le!==null&&Ne(F,Le.startTime-S),ne=!1}return ne}finally{h=null,f=O,m=!1}}var R=!1,y=null,C=-1,E=5,Q=-1;function N(){return!(t.unstable_now()-Q<E)}function L(){if(y!==null){var ee=t.unstable_now();Q=ee;var S=!0;try{S=y(!0,ee)}finally{S?T():(R=!1,y=null)}}else R=!1}var T;if(typeof w=="function")T=function(){w(L)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Me=Pe.port2;Pe.port1.onmessage=L,T=function(){Me.postMessage(null)}}else T=function(){_(L,0)};function et(ee){y=ee,R||(R=!0,T())}function Ne(ee,S){C=_(function(){ee(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){B||m||(B=!0,et(U))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(ee){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var O=f;f=S;try{return ee()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,S){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var O=f;f=ee;try{return S()}finally{f=O}},t.unstable_scheduleCallback=function(ee,S,O){var G=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?G+O:G):O=G,ee){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,ee={id:d++,callback:S,priorityLevel:ee,startTime:O,expirationTime:Y,sortIndex:-1},O>G?(ee.sortIndex=O,e(c,ee),n(a)===null&&ee===n(c)&&(v?(x(C),C=-1):v=!0,Ne(F,O-G))):(ee.sortIndex=Y,e(a,ee),B||m||(B=!0,et(U))),ee},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(ee){var S=f;return function(){var O=f;f=S;try{return ee.apply(this,arguments)}finally{f=O}}}})(VI);OI.exports=VI;var FU=OI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QU=k,fr=FU;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KI=new Set,Wl={};function Ki(t,e){Ko(t,e),Ko(t+"Capture",e)}function Ko(t,e){for(Wl[t]=e,t=0;t<e.length;t++)KI.add(e[t])}var vA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yp=Object.prototype.hasOwnProperty,UU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yv={},xv={};function SU(t){return yp.call(xv,t)?!0:yp.call(yv,t)?!1:UU.test(t)?xv[t]=!0:(yv[t]=!0,!1)}function kU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RU(t,e,n,r){if(e===null||typeof e>"u"||kU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qn(t,e,n,r,A,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=A,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bn[t]=new qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bn[e]=new qn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bn[t]=new qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bn[t]=new qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bn[t]=new qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bn[t]=new qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bn[t]=new qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bn[t]=new qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bn[t]=new qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var y0=/[\-:]([a-z])/g;function x0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(y0,x0);bn[e]=new qn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(y0,x0);bn[e]=new qn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(y0,x0);bn[e]=new qn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bn[t]=new qn(t,1,!1,t.toLowerCase(),null,!1,!1)});bn.xlinkHref=new qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bn[t]=new qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function C0(t,e,n,r){var A=bn.hasOwnProperty(e)?bn[e]:null;(A!==null?A.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RU(e,n,A,r)&&(n=null),r||A===null?SU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):A.mustUseProperty?t[A.propertyName]=n===null?A.type===3?!1:"":n:(e=A.attributeName,r=A.attributeNamespace,n===null?t.removeAttribute(e):(A=A.type,n=A===3||A===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var FA=QU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bu=Symbol.for("react.element"),wo=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),I0=Symbol.for("react.strict_mode"),xp=Symbol.for("react.profiler"),GI=Symbol.for("react.provider"),zI=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),Cp=Symbol.for("react.suspense"),Ip=Symbol.for("react.suspense_list"),_0=Symbol.for("react.memo"),WA=Symbol.for("react.lazy"),$I=Symbol.for("react.offscreen"),Cv=Symbol.iterator;function za(t){return t===null||typeof t!="object"?null:(t=Cv&&t[Cv]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,dg;function ll(t){if(dg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dg=e&&e[1]||""}return`
`+dg+t}var hg=!1;function fg(t,e){if(!t||hg)return"";hg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var A=c.stack.split(`
`),s=r.stack.split(`
`),i=A.length-1,o=s.length-1;1<=i&&0<=o&&A[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(A[i]!==s[o]){if(i!==1||o!==1)do if(i--,o--,0>o||A[i]!==s[o]){var a=`
`+A[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=o);break}}}finally{hg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ll(t):""}function NU(t){switch(t.tag){case 5:return ll(t.type);case 16:return ll("Lazy");case 13:return ll("Suspense");case 19:return ll("SuspenseList");case 0:case 2:case 15:return t=fg(t.type,!1),t;case 11:return t=fg(t.type.render,!1),t;case 1:return t=fg(t.type,!0),t;default:return""}}function Ep(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bo:return"Fragment";case wo:return"Portal";case xp:return"Profiler";case I0:return"StrictMode";case Cp:return"Suspense";case Ip:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zI:return(t.displayName||"Context")+".Consumer";case GI:return(t._context.displayName||"Context")+".Provider";case E0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _0:return e=t.displayName||null,e!==null?e:Ep(t.type)||"Memo";case WA:e=t._payload,t=t._init;try{return Ep(t(e))}catch{}}return null}function DU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ep(e);case 8:return e===I0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PU(t){var e=WI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var A=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return A.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vu(t){t._valueTracker||(t._valueTracker=PU(t))}function qI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=WI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _p(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Iv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JI(t,e){e=e.checked,e!=null&&C0(t,"checked",e,!1)}function bp(t,e){JI(t,e);var n=Qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Tp(t,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ev(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Tp(t,e,n){(e!=="number"||Vd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cl=Array.isArray;function So(t,e,n,r){if(t=t.options,e){e={};for(var A=0;A<n.length;A++)e["$"+n[A]]=!0;for(n=0;n<t.length;n++)A=e.hasOwnProperty("$"+t[n].value),t[n].selected!==A&&(t[n].selected=A),A&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qs(n),e=null,A=0;A<t.length;A++){if(t[A].value===n){t[A].selected=!0,r&&(t[A].defaultSelected=!0);return}e!==null||t[A].disabled||(e=t[A])}e!==null&&(e.selected=!0)}}function Fp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _v(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(cl(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qs(n)}}function XI(t,e){var n=Qs(e.value),r=Qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yu,ZI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,A){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,A)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yu=yu||document.createElement("div"),yu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ql(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LU=["Webkit","ms","Moz","O"];Object.keys(bl).forEach(function(t){LU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bl[e]=bl[t]})});function eE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bl.hasOwnProperty(t)&&bl[t]?(""+e).trim():e+"px"}function tE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,A=eE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,A):t[n]=A}}var MU=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Up(t,e){if(e){if(MU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Sp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kp=null;function b0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rp=null,ko=null,Ro=null;function Tv(t){if(t=kc(t)){if(typeof Rp!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Zh(e),Rp(t.stateNode,t.type,e))}}function nE(t){ko?Ro?Ro.push(t):Ro=[t]:ko=t}function rE(){if(ko){var t=ko,e=Ro;if(Ro=ko=null,Tv(t),e)for(t=0;t<e.length;t++)Tv(e[t])}}function AE(t,e){return t(e)}function sE(){}var gg=!1;function iE(t,e,n){if(gg)return t(e,n);gg=!0;try{return AE(t,e,n)}finally{gg=!1,(ko!==null||Ro!==null)&&(sE(),rE())}}function Jl(t,e){var n=t.stateNode;if(n===null)return null;var r=Zh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Np=!1;if(vA)try{var $a={};Object.defineProperty($a,"passive",{get:function(){Np=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{Np=!1}function jU(t,e,n,r,A,s,i,o,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Tl=!1,Kd=null,Gd=!1,Dp=null,HU={onError:function(t){Tl=!0,Kd=t}};function OU(t,e,n,r,A,s,i,o,a){Tl=!1,Kd=null,jU.apply(HU,arguments)}function VU(t,e,n,r,A,s,i,o,a){if(OU.apply(this,arguments),Tl){if(Tl){var c=Kd;Tl=!1,Kd=null}else throw Error(Z(198));Gd||(Gd=!0,Dp=c)}}function Gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fv(t){if(Gi(t)!==t)throw Error(Z(188))}function KU(t){var e=t.alternate;if(!e){if(e=Gi(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var A=n.return;if(A===null)break;var s=A.alternate;if(s===null){if(r=A.return,r!==null){n=r;continue}break}if(A.child===s.child){for(s=A.child;s;){if(s===n)return Fv(A),t;if(s===r)return Fv(A),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=A,r=s;else{for(var i=!1,o=A.child;o;){if(o===n){i=!0,n=A,r=s;break}if(o===r){i=!0,r=A,n=s;break}o=o.sibling}if(!i){for(o=s.child;o;){if(o===n){i=!0,n=s,r=A;break}if(o===r){i=!0,r=s,n=A;break}o=o.sibling}if(!i)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function aE(t){return t=KU(t),t!==null?lE(t):null}function lE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lE(t);if(e!==null)return e;t=t.sibling}return null}var cE=fr.unstable_scheduleCallback,Qv=fr.unstable_cancelCallback,GU=fr.unstable_shouldYield,zU=fr.unstable_requestPaint,Zt=fr.unstable_now,$U=fr.unstable_getCurrentPriorityLevel,T0=fr.unstable_ImmediatePriority,uE=fr.unstable_UserBlockingPriority,zd=fr.unstable_NormalPriority,WU=fr.unstable_LowPriority,dE=fr.unstable_IdlePriority,qh=null,qr=null;function qU(t){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(qh,t,void 0,(t.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:YU,JU=Math.log,XU=Math.LN2;function YU(t){return t>>>=0,t===0?32:31-(JU(t)/XU|0)|0}var xu=64,Cu=4194304;function ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $d(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,A=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~A;o!==0?r=ul(o):(s&=i,s!==0&&(r=ul(s)))}else i=n&~A,i!==0?r=ul(i):s!==0&&(r=ul(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&A)&&(A=r&-r,s=e&-e,A>=s||A===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nr(e),A=1<<n,r|=t[n],e&=~A;return r}function ZU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,A=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Nr(s),o=1<<i,a=A[i];a===-1?(!(o&n)||o&r)&&(A[i]=ZU(o,e)):a<=e&&(t.expiredLanes|=o),s&=~o}}function Pp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hE(){var t=xu;return xu<<=1,!(xu&4194240)&&(xu=64),t}function pg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nr(e),t[e]=n}function tS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var A=31-Nr(n),s=1<<A;e[A]=0,r[A]=-1,t[A]=-1,n&=~s}}function F0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nr(n),A=1<<r;A&e|t[r]&e&&(t[r]|=e),n&=~A}}var mt=0;function fE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gE,Q0,pE,mE,wE,Lp=!1,Iu=[],gs=null,ps=null,ms=null,Xl=new Map,Yl=new Map,XA=[],nS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uv(t,e){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(e.pointerId)}}function Wa(t,e,n,r,A,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[A]},e!==null&&(e=kc(e),e!==null&&Q0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,A!==null&&e.indexOf(A)===-1&&e.push(A),t)}function rS(t,e,n,r,A){switch(e){case"focusin":return gs=Wa(gs,t,e,n,r,A),!0;case"dragenter":return ps=Wa(ps,t,e,n,r,A),!0;case"mouseover":return ms=Wa(ms,t,e,n,r,A),!0;case"pointerover":var s=A.pointerId;return Xl.set(s,Wa(Xl.get(s)||null,t,e,n,r,A)),!0;case"gotpointercapture":return s=A.pointerId,Yl.set(s,Wa(Yl.get(s)||null,t,e,n,r,A)),!0}return!1}function BE(t){var e=mi(t.target);if(e!==null){var n=Gi(e);if(n!==null){if(e=n.tag,e===13){if(e=oE(n),e!==null){t.blockedOn=e,wE(t.priority,function(){pE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);kp=r,n.target.dispatchEvent(r),kp=null}else return e=kc(n),e!==null&&Q0(e),t.blockedOn=n,!1;e.shift()}return!0}function Sv(t,e,n){gd(t)&&n.delete(e)}function AS(){Lp=!1,gs!==null&&gd(gs)&&(gs=null),ps!==null&&gd(ps)&&(ps=null),ms!==null&&gd(ms)&&(ms=null),Xl.forEach(Sv),Yl.forEach(Sv)}function qa(t,e){t.blockedOn===e&&(t.blockedOn=null,Lp||(Lp=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,AS)))}function Zl(t){function e(A){return qa(A,t)}if(0<Iu.length){qa(Iu[0],t);for(var n=1;n<Iu.length;n++){var r=Iu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gs!==null&&qa(gs,t),ps!==null&&qa(ps,t),ms!==null&&qa(ms,t),Xl.forEach(e),Yl.forEach(e),n=0;n<XA.length;n++)r=XA[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<XA.length&&(n=XA[0],n.blockedOn===null);)BE(n),n.blockedOn===null&&XA.shift()}var No=FA.ReactCurrentBatchConfig,Wd=!0;function sS(t,e,n,r){var A=mt,s=No.transition;No.transition=null;try{mt=1,U0(t,e,n,r)}finally{mt=A,No.transition=s}}function iS(t,e,n,r){var A=mt,s=No.transition;No.transition=null;try{mt=4,U0(t,e,n,r)}finally{mt=A,No.transition=s}}function U0(t,e,n,r){if(Wd){var A=Mp(t,e,n,r);if(A===null)_g(t,e,r,qd,n),Uv(t,r);else if(rS(A,t,e,n,r))r.stopPropagation();else if(Uv(t,r),e&4&&-1<nS.indexOf(t)){for(;A!==null;){var s=kc(A);if(s!==null&&gE(s),s=Mp(t,e,n,r),s===null&&_g(t,e,r,qd,n),s===A)break;A=s}A!==null&&r.stopPropagation()}else _g(t,e,r,null,n)}}var qd=null;function Mp(t,e,n,r){if(qd=null,t=b0(r),t=mi(t),t!==null)if(e=Gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qd=t,null}function vE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($U()){case T0:return 1;case uE:return 4;case zd:case WU:return 16;case dE:return 536870912;default:return 16}default:return 16}}var os=null,S0=null,pd=null;function yE(){if(pd)return pd;var t,e=S0,n=e.length,r,A="value"in os?os.value:os.textContent,s=A.length;for(t=0;t<n&&e[t]===A[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===A[s-r];r++);return pd=A.slice(t,1<r?1-r:void 0)}function md(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eu(){return!0}function kv(){return!1}function wr(t){function e(n,r,A,s,i){this._reactName=n,this._targetInst=A,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Eu:kv,this.isPropagationStopped=kv,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),e}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},k0=wr(ma),Sc=Kt({},ma,{view:0,detail:0}),oS=wr(Sc),mg,wg,Ja,Jh=Kt({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(mg=t.screenX-Ja.screenX,wg=t.screenY-Ja.screenY):wg=mg=0,Ja=t),mg)},movementY:function(t){return"movementY"in t?t.movementY:wg}}),Rv=wr(Jh),aS=Kt({},Jh,{dataTransfer:0}),lS=wr(aS),cS=Kt({},Sc,{relatedTarget:0}),Bg=wr(cS),uS=Kt({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),dS=wr(uS),hS=Kt({},ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fS=wr(hS),gS=Kt({},ma,{data:0}),Nv=wr(gS),pS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wS[t])?!!e[t]:!1}function R0(){return BS}var vS=Kt({},Sc,{key:function(t){if(t.key){var e=pS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=md(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R0,charCode:function(t){return t.type==="keypress"?md(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?md(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yS=wr(vS),xS=Kt({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dv=wr(xS),CS=Kt({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R0}),IS=wr(CS),ES=Kt({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),_S=wr(ES),bS=Kt({},Jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TS=wr(bS),FS=[9,13,27,32],N0=vA&&"CompositionEvent"in window,Fl=null;vA&&"documentMode"in document&&(Fl=document.documentMode);var QS=vA&&"TextEvent"in window&&!Fl,xE=vA&&(!N0||Fl&&8<Fl&&11>=Fl),Pv=" ",Lv=!1;function CE(t,e){switch(t){case"keyup":return FS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vo=!1;function US(t,e){switch(t){case"compositionend":return IE(e);case"keypress":return e.which!==32?null:(Lv=!0,Pv);case"textInput":return t=e.data,t===Pv&&Lv?null:t;default:return null}}function SS(t,e){if(vo)return t==="compositionend"||!N0&&CE(t,e)?(t=yE(),pd=S0=os=null,vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xE&&e.locale!=="ko"?null:e.data;default:return null}}var kS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kS[t.type]:e==="textarea"}function EE(t,e,n,r){nE(r),e=Jd(e,"onChange"),0<e.length&&(n=new k0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ql=null,ec=null;function RS(t){DE(t,0)}function Xh(t){var e=Co(t);if(qI(e))return t}function NS(t,e){if(t==="change")return e}var _E=!1;if(vA){var vg;if(vA){var yg="oninput"in document;if(!yg){var jv=document.createElement("div");jv.setAttribute("oninput","return;"),yg=typeof jv.oninput=="function"}vg=yg}else vg=!1;_E=vg&&(!document.documentMode||9<document.documentMode)}function Hv(){Ql&&(Ql.detachEvent("onpropertychange",bE),ec=Ql=null)}function bE(t){if(t.propertyName==="value"&&Xh(ec)){var e=[];EE(e,ec,t,b0(t)),iE(RS,e)}}function DS(t,e,n){t==="focusin"?(Hv(),Ql=e,ec=n,Ql.attachEvent("onpropertychange",bE)):t==="focusout"&&Hv()}function PS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xh(ec)}function LS(t,e){if(t==="click")return Xh(e)}function MS(t,e){if(t==="input"||t==="change")return Xh(e)}function jS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lr=typeof Object.is=="function"?Object.is:jS;function tc(t,e){if(Lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var A=n[r];if(!yp.call(e,A)||!Lr(t[A],e[A]))return!1}return!0}function Ov(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vv(t,e){var n=Ov(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ov(n)}}function TE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FE(){for(var t=window,e=Vd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vd(t.document)}return e}function D0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HS(t){var e=FE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TE(n.ownerDocument.documentElement,n)){if(r!==null&&D0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var A=n.textContent.length,s=Math.min(r.start,A);r=r.end===void 0?s:Math.min(r.end,A),!t.extend&&s>r&&(A=r,r=s,s=A),A=Vv(n,s);var i=Vv(n,r);A&&i&&(t.rangeCount!==1||t.anchorNode!==A.node||t.anchorOffset!==A.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(A.node,A.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OS=vA&&"documentMode"in document&&11>=document.documentMode,yo=null,jp=null,Ul=null,Hp=!1;function Kv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hp||yo==null||yo!==Vd(r)||(r=yo,"selectionStart"in r&&D0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ul&&tc(Ul,r)||(Ul=r,r=Jd(jp,"onSelect"),0<r.length&&(e=new k0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yo)))}function _u(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xo={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionend:_u("Transition","TransitionEnd")},xg={},QE={};vA&&(QE=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Yh(t){if(xg[t])return xg[t];if(!xo[t])return t;var e=xo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in QE)return xg[t]=e[n];return t}var UE=Yh("animationend"),SE=Yh("animationiteration"),kE=Yh("animationstart"),RE=Yh("transitionend"),NE=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(t,e){NE.set(t,e),Ki(e,[t])}for(var Cg=0;Cg<Gv.length;Cg++){var Ig=Gv[Cg],VS=Ig.toLowerCase(),KS=Ig[0].toUpperCase()+Ig.slice(1);Vs(VS,"on"+KS)}Vs(UE,"onAnimationEnd");Vs(SE,"onAnimationIteration");Vs(kE,"onAnimationStart");Vs("dblclick","onDoubleClick");Vs("focusin","onFocus");Vs("focusout","onBlur");Vs(RE,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GS=new Set("cancel close invalid load scroll toggle".split(" ").concat(dl));function zv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,VU(r,e,void 0,t),t.currentTarget=null}function DE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],A=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var o=r[i],a=o.instance,c=o.currentTarget;if(o=o.listener,a!==s&&A.isPropagationStopped())break e;zv(A,o,c),s=a}else for(i=0;i<r.length;i++){if(o=r[i],a=o.instance,c=o.currentTarget,o=o.listener,a!==s&&A.isPropagationStopped())break e;zv(A,o,c),s=a}}}if(Gd)throw t=Dp,Gd=!1,Dp=null,t}function Ft(t,e){var n=e[zp];n===void 0&&(n=e[zp]=new Set);var r=t+"__bubble";n.has(r)||(PE(e,t,2,!1),n.add(r))}function Eg(t,e,n){var r=0;e&&(r|=4),PE(n,t,r,e)}var bu="_reactListening"+Math.random().toString(36).slice(2);function nc(t){if(!t[bu]){t[bu]=!0,KI.forEach(function(n){n!=="selectionchange"&&(GS.has(n)||Eg(n,!1,t),Eg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bu]||(e[bu]=!0,Eg("selectionchange",!1,e))}}function PE(t,e,n,r){switch(vE(e)){case 1:var A=sS;break;case 4:A=iS;break;default:A=U0}n=A.bind(null,e,n,t),A=void 0,!Np||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(A=!0),r?A!==void 0?t.addEventListener(e,n,{capture:!0,passive:A}):t.addEventListener(e,n,!0):A!==void 0?t.addEventListener(e,n,{passive:A}):t.addEventListener(e,n,!1)}function _g(t,e,n,r,A){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===A||o.nodeType===8&&o.parentNode===A)break;if(i===4)for(i=r.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===A||a.nodeType===8&&a.parentNode===A))return;i=i.return}for(;o!==null;){if(i=mi(o),i===null)return;if(a=i.tag,a===5||a===6){r=s=i;continue e}o=o.parentNode}}r=r.return}iE(function(){var c=s,d=b0(n),h=[];e:{var f=NE.get(t);if(f!==void 0){var m=k0,B=t;switch(t){case"keypress":if(md(n)===0)break e;case"keydown":case"keyup":m=yS;break;case"focusin":B="focus",m=Bg;break;case"focusout":B="blur",m=Bg;break;case"beforeblur":case"afterblur":m=Bg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=IS;break;case UE:case SE:case kE:m=dS;break;case RE:m=_S;break;case"scroll":m=oS;break;case"wheel":m=TS;break;case"copy":case"cut":case"paste":m=fS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Dv}var v=(e&4)!==0,_=!v&&t==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var w=c,I;w!==null;){I=w;var F=I.stateNode;if(I.tag===5&&F!==null&&(I=F,x!==null&&(F=Jl(w,x),F!=null&&v.push(rc(w,F,I)))),_)break;w=w.return}0<v.length&&(f=new m(f,B,null,n,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==kp&&(B=n.relatedTarget||n.fromElement)&&(mi(B)||B[yA]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(B=n.relatedTarget||n.toElement,m=c,B=B?mi(B):null,B!==null&&(_=Gi(B),B!==_||B.tag!==5&&B.tag!==6)&&(B=null)):(m=null,B=c),m!==B)){if(v=Rv,F="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=Dv,F="onPointerLeave",x="onPointerEnter",w="pointer"),_=m==null?f:Co(m),I=B==null?f:Co(B),f=new v(F,w+"leave",m,n,d),f.target=_,f.relatedTarget=I,F=null,mi(d)===c&&(v=new v(x,w+"enter",B,n,d),v.target=I,v.relatedTarget=_,F=v),_=F,m&&B)t:{for(v=m,x=B,w=0,I=v;I;I=eo(I))w++;for(I=0,F=x;F;F=eo(F))I++;for(;0<w-I;)v=eo(v),w--;for(;0<I-w;)x=eo(x),I--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=eo(v),x=eo(x)}v=null}else v=null;m!==null&&$v(h,f,m,v,!1),B!==null&&_!==null&&$v(h,_,B,v,!0)}}e:{if(f=c?Co(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var U=NS;else if(Mv(f))if(_E)U=MS;else{U=PS;var R=DS}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=LS);if(U&&(U=U(t,c))){EE(h,U,n,d);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&Tp(f,"number",f.value)}switch(R=c?Co(c):window,t){case"focusin":(Mv(R)||R.contentEditable==="true")&&(yo=R,jp=c,Ul=null);break;case"focusout":Ul=jp=yo=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,Kv(h,n,d);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":Kv(h,n,d)}var y;if(N0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else vo?CE(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(xE&&n.locale!=="ko"&&(vo||C!=="onCompositionStart"?C==="onCompositionEnd"&&vo&&(y=yE()):(os=d,S0="value"in os?os.value:os.textContent,vo=!0)),R=Jd(c,C),0<R.length&&(C=new Nv(C,t,null,n,d),h.push({event:C,listeners:R}),y?C.data=y:(y=IE(n),y!==null&&(C.data=y)))),(y=QS?US(t,n):SS(t,n))&&(c=Jd(c,"onBeforeInput"),0<c.length&&(d=new Nv("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=y))}DE(h,e)})}function rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jd(t,e){for(var n=e+"Capture",r=[];t!==null;){var A=t,s=A.stateNode;A.tag===5&&s!==null&&(A=s,s=Jl(t,n),s!=null&&r.unshift(rc(t,s,A)),s=Jl(t,e),s!=null&&r.push(rc(t,s,A))),t=t.return}return r}function eo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $v(t,e,n,r,A){for(var s=e._reactName,i=[];n!==null&&n!==r;){var o=n,a=o.alternate,c=o.stateNode;if(a!==null&&a===r)break;o.tag===5&&c!==null&&(o=c,A?(a=Jl(n,s),a!=null&&i.unshift(rc(n,a,o))):A||(a=Jl(n,s),a!=null&&i.push(rc(n,a,o)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var zS=/\r\n?/g,$S=/\u0000|\uFFFD/g;function Wv(t){return(typeof t=="string"?t:""+t).replace(zS,`
`).replace($S,"")}function Tu(t,e,n){if(e=Wv(e),Wv(t)!==e&&n)throw Error(Z(425))}function Xd(){}var Op=null,Vp=null;function Kp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gp=typeof setTimeout=="function"?setTimeout:void 0,WS=typeof clearTimeout=="function"?clearTimeout:void 0,qv=typeof Promise=="function"?Promise:void 0,qS=typeof queueMicrotask=="function"?queueMicrotask:typeof qv<"u"?function(t){return qv.resolve(null).then(t).catch(JS)}:Gp;function JS(t){setTimeout(function(){throw t})}function bg(t,e){var n=e,r=0;do{var A=n.nextSibling;if(t.removeChild(n),A&&A.nodeType===8)if(n=A.data,n==="/$"){if(r===0){t.removeChild(A),Zl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=A}while(n);Zl(e)}function ws(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wa=Math.random().toString(36).slice(2),Gr="__reactFiber$"+wa,Ac="__reactProps$"+wa,yA="__reactContainer$"+wa,zp="__reactEvents$"+wa,XS="__reactListeners$"+wa,YS="__reactHandles$"+wa;function mi(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yA]||n[Gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jv(t);t!==null;){if(n=t[Gr])return n;t=Jv(t)}return e}t=n,n=t.parentNode}return null}function kc(t){return t=t[Gr]||t[yA],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Co(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Zh(t){return t[Ac]||null}var $p=[],Io=-1;function Ks(t){return{current:t}}function St(t){0>Io||(t.current=$p[Io],$p[Io]=null,Io--)}function _t(t,e){Io++,$p[Io]=t.current,t.current=e}var Us={},jn=Ks(Us),rr=Ks(!1),bi=Us;function Go(t,e){var n=t.type.contextTypes;if(!n)return Us;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var A={},s;for(s in n)A[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=A),A}function Ar(t){return t=t.childContextTypes,t!=null}function Yd(){St(rr),St(jn)}function Xv(t,e,n){if(jn.current!==Us)throw Error(Z(168));_t(jn,e),_t(rr,n)}function LE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var A in r)if(!(A in e))throw Error(Z(108,DU(t)||"Unknown",A));return Kt({},n,r)}function Zd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Us,bi=jn.current,_t(jn,t),_t(rr,rr.current),!0}function Yv(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=LE(t,e,bi),r.__reactInternalMemoizedMergedChildContext=t,St(rr),St(jn),_t(jn,t)):St(rr),_t(rr,n)}var lA=null,ef=!1,Tg=!1;function ME(t){lA===null?lA=[t]:lA.push(t)}function ZS(t){ef=!0,ME(t)}function Gs(){if(!Tg&&lA!==null){Tg=!0;var t=0,e=mt;try{var n=lA;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}lA=null,ef=!1}catch(A){throw lA!==null&&(lA=lA.slice(t+1)),cE(T0,Gs),A}finally{mt=e,Tg=!1}}return null}var Eo=[],_o=0,eh=null,th=0,vr=[],yr=0,Ti=null,cA=1,uA="";function ai(t,e){Eo[_o++]=th,Eo[_o++]=eh,eh=t,th=e}function jE(t,e,n){vr[yr++]=cA,vr[yr++]=uA,vr[yr++]=Ti,Ti=t;var r=cA;t=uA;var A=32-Nr(r)-1;r&=~(1<<A),n+=1;var s=32-Nr(e)+A;if(30<s){var i=A-A%5;s=(r&(1<<i)-1).toString(32),r>>=i,A-=i,cA=1<<32-Nr(e)+A|n<<A|r,uA=s+t}else cA=1<<s|n<<A|r,uA=t}function P0(t){t.return!==null&&(ai(t,1),jE(t,1,0))}function L0(t){for(;t===eh;)eh=Eo[--_o],Eo[_o]=null,th=Eo[--_o],Eo[_o]=null;for(;t===Ti;)Ti=vr[--yr],vr[yr]=null,uA=vr[--yr],vr[yr]=null,cA=vr[--yr],vr[yr]=null}var hr=null,dr=null,Pt=!1,Rr=null;function HE(t,e){var n=Cr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,dr=ws(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ti!==null?{id:cA,overflow:uA}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,dr=null,!0):!1;default:return!1}}function Wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qp(t){if(Pt){var e=dr;if(e){var n=e;if(!Zv(t,e)){if(Wp(t))throw Error(Z(418));e=ws(n.nextSibling);var r=hr;e&&Zv(t,e)?HE(r,n):(t.flags=t.flags&-4097|2,Pt=!1,hr=t)}}else{if(Wp(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Pt=!1,hr=t}}}function ey(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function Fu(t){if(t!==hr)return!1;if(!Pt)return ey(t),Pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kp(t.type,t.memoizedProps)),e&&(e=dr)){if(Wp(t))throw OE(),Error(Z(418));for(;e;)HE(t,e),e=ws(e.nextSibling)}if(ey(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dr=ws(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dr=null}}else dr=hr?ws(t.stateNode.nextSibling):null;return!0}function OE(){for(var t=dr;t;)t=ws(t.nextSibling)}function zo(){dr=hr=null,Pt=!1}function M0(t){Rr===null?Rr=[t]:Rr.push(t)}var ek=FA.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var A=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var o=A.refs;i===null?delete o[s]:o[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Qu(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ty(t){var e=t._init;return e(t._payload)}function VE(t){function e(x,w){if(t){var I=x.deletions;I===null?(x.deletions=[w],x.flags|=16):I.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function A(x,w){return x=xs(x,w),x.index=0,x.sibling=null,x}function s(x,w,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<w?(x.flags|=2,w):I):(x.flags|=2,w)):(x.flags|=1048576,w)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,w,I,F){return w===null||w.tag!==6?(w=Ng(I,x.mode,F),w.return=x,w):(w=A(w,I),w.return=x,w)}function a(x,w,I,F){var U=I.type;return U===Bo?d(x,w,I.props.children,F,I.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===WA&&ty(U)===w.type)?(F=A(w,I.props),F.ref=Xa(x,w,I),F.return=x,F):(F=Id(I.type,I.key,I.props,null,x.mode,F),F.ref=Xa(x,w,I),F.return=x,F)}function c(x,w,I,F){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=Dg(I,x.mode,F),w.return=x,w):(w=A(w,I.children||[]),w.return=x,w)}function d(x,w,I,F,U){return w===null||w.tag!==7?(w=xi(I,x.mode,F,U),w.return=x,w):(w=A(w,I),w.return=x,w)}function h(x,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ng(""+w,x.mode,I),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bu:return I=Id(w.type,w.key,w.props,null,x.mode,I),I.ref=Xa(x,null,w),I.return=x,I;case wo:return w=Dg(w,x.mode,I),w.return=x,w;case WA:var F=w._init;return h(x,F(w._payload),I)}if(cl(w)||za(w))return w=xi(w,x.mode,I,null),w.return=x,w;Qu(x,w)}return null}function f(x,w,I,F){var U=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return U!==null?null:o(x,w,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Bu:return I.key===U?a(x,w,I,F):null;case wo:return I.key===U?c(x,w,I,F):null;case WA:return U=I._init,f(x,w,U(I._payload),F)}if(cl(I)||za(I))return U!==null?null:d(x,w,I,F,null);Qu(x,I)}return null}function m(x,w,I,F,U){if(typeof F=="string"&&F!==""||typeof F=="number")return x=x.get(I)||null,o(w,x,""+F,U);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Bu:return x=x.get(F.key===null?I:F.key)||null,a(w,x,F,U);case wo:return x=x.get(F.key===null?I:F.key)||null,c(w,x,F,U);case WA:var R=F._init;return m(x,w,I,R(F._payload),U)}if(cl(F)||za(F))return x=x.get(I)||null,d(w,x,F,U,null);Qu(w,F)}return null}function B(x,w,I,F){for(var U=null,R=null,y=w,C=w=0,E=null;y!==null&&C<I.length;C++){y.index>C?(E=y,y=null):E=y.sibling;var Q=f(x,y,I[C],F);if(Q===null){y===null&&(y=E);break}t&&y&&Q.alternate===null&&e(x,y),w=s(Q,w,C),R===null?U=Q:R.sibling=Q,R=Q,y=E}if(C===I.length)return n(x,y),Pt&&ai(x,C),U;if(y===null){for(;C<I.length;C++)y=h(x,I[C],F),y!==null&&(w=s(y,w,C),R===null?U=y:R.sibling=y,R=y);return Pt&&ai(x,C),U}for(y=r(x,y);C<I.length;C++)E=m(y,x,C,I[C],F),E!==null&&(t&&E.alternate!==null&&y.delete(E.key===null?C:E.key),w=s(E,w,C),R===null?U=E:R.sibling=E,R=E);return t&&y.forEach(function(N){return e(x,N)}),Pt&&ai(x,C),U}function v(x,w,I,F){var U=za(I);if(typeof U!="function")throw Error(Z(150));if(I=U.call(I),I==null)throw Error(Z(151));for(var R=U=null,y=w,C=w=0,E=null,Q=I.next();y!==null&&!Q.done;C++,Q=I.next()){y.index>C?(E=y,y=null):E=y.sibling;var N=f(x,y,Q.value,F);if(N===null){y===null&&(y=E);break}t&&y&&N.alternate===null&&e(x,y),w=s(N,w,C),R===null?U=N:R.sibling=N,R=N,y=E}if(Q.done)return n(x,y),Pt&&ai(x,C),U;if(y===null){for(;!Q.done;C++,Q=I.next())Q=h(x,Q.value,F),Q!==null&&(w=s(Q,w,C),R===null?U=Q:R.sibling=Q,R=Q);return Pt&&ai(x,C),U}for(y=r(x,y);!Q.done;C++,Q=I.next())Q=m(y,x,C,Q.value,F),Q!==null&&(t&&Q.alternate!==null&&y.delete(Q.key===null?C:Q.key),w=s(Q,w,C),R===null?U=Q:R.sibling=Q,R=Q);return t&&y.forEach(function(L){return e(x,L)}),Pt&&ai(x,C),U}function _(x,w,I,F){if(typeof I=="object"&&I!==null&&I.type===Bo&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Bu:e:{for(var U=I.key,R=w;R!==null;){if(R.key===U){if(U=I.type,U===Bo){if(R.tag===7){n(x,R.sibling),w=A(R,I.props.children),w.return=x,x=w;break e}}else if(R.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===WA&&ty(U)===R.type){n(x,R.sibling),w=A(R,I.props),w.ref=Xa(x,R,I),w.return=x,x=w;break e}n(x,R);break}else e(x,R);R=R.sibling}I.type===Bo?(w=xi(I.props.children,x.mode,F,I.key),w.return=x,x=w):(F=Id(I.type,I.key,I.props,null,x.mode,F),F.ref=Xa(x,w,I),F.return=x,x=F)}return i(x);case wo:e:{for(R=I.key;w!==null;){if(w.key===R)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(x,w.sibling),w=A(w,I.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Dg(I,x.mode,F),w.return=x,x=w}return i(x);case WA:return R=I._init,_(x,w,R(I._payload),F)}if(cl(I))return B(x,w,I,F);if(za(I))return v(x,w,I,F);Qu(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(x,w.sibling),w=A(w,I),w.return=x,x=w):(n(x,w),w=Ng(I,x.mode,F),w.return=x,x=w),i(x)):n(x,w)}return _}var $o=VE(!0),KE=VE(!1),nh=Ks(null),rh=null,bo=null,j0=null;function H0(){j0=bo=rh=null}function O0(t){var e=nh.current;St(nh),t._currentValue=e}function Jp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){rh=t,j0=bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zn=!0),t.firstContext=null)}function br(t){var e=t._currentValue;if(j0!==t)if(t={context:t,memoizedValue:e,next:null},bo===null){if(rh===null)throw Error(Z(308));bo=t,rh.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var wi=null;function V0(t){wi===null?wi=[t]:wi.push(t)}function GE(t,e,n,r){var A=e.interleaved;return A===null?(n.next=n,V0(e)):(n.next=A.next,A.next=n),e.interleaved=n,xA(t,r)}function xA(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qA=!1;function K0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mA(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var A=r.pending;return A===null?e.next=e:(e.next=A.next,A.next=e),r.pending=e,xA(t,n)}return A=r.interleaved,A===null?(e.next=e,V0(r)):(e.next=A.next,A.next=e),r.interleaved=e,xA(t,n)}function wd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F0(t,n)}}function ny(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var A=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?A=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?A=s=e:s=s.next=e}else A=s=e;n={baseState:r.baseState,firstBaseUpdate:A,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ah(t,e,n,r){var A=t.updateQueue;qA=!1;var s=A.firstBaseUpdate,i=A.lastBaseUpdate,o=A.shared.pending;if(o!==null){A.shared.pending=null;var a=o,c=a.next;a.next=null,i===null?s=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=a))}if(s!==null){var h=A.baseState;i=0,d=c=a=null,o=s;do{var f=o.lane,m=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var B=t,v=o;switch(f=e,m=n,v.tag){case 1:if(B=v.payload,typeof B=="function"){h=B.call(m,h,f);break e}h=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=v.payload,f=typeof B=="function"?B.call(m,h,f):B,f==null)break e;h=Kt({},h,f);break e;case 2:qA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=A.effects,f===null?A.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,a=h):d=d.next=m,i|=f;if(o=o.next,o===null){if(o=A.shared.pending,o===null)break;f=o,o=f.next,f.next=null,A.lastBaseUpdate=f,A.shared.pending=null}}while(!0);if(d===null&&(a=h),A.baseState=a,A.firstBaseUpdate=c,A.lastBaseUpdate=d,e=A.shared.interleaved,e!==null){A=e;do i|=A.lane,A=A.next;while(A!==e)}else s===null&&(A.shared.lanes=0);Qi|=i,t.lanes=i,t.memoizedState=h}}function ry(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],A=r.callback;if(A!==null){if(r.callback=null,r=n,typeof A!="function")throw Error(Z(191,A));A.call(r)}}}var Rc={},Jr=Ks(Rc),sc=Ks(Rc),ic=Ks(Rc);function Bi(t){if(t===Rc)throw Error(Z(174));return t}function G0(t,e){switch(_t(ic,e),_t(sc,t),_t(Jr,Rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qp(e,t)}St(Jr),_t(Jr,e)}function Wo(){St(Jr),St(sc),St(ic)}function $E(t){Bi(ic.current);var e=Bi(Jr.current),n=Qp(e,t.type);e!==n&&(_t(sc,t),_t(Jr,n))}function z0(t){sc.current===t&&(St(Jr),St(sc))}var Ht=Ks(0);function sh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fg=[];function $0(){for(var t=0;t<Fg.length;t++)Fg[t]._workInProgressVersionPrimary=null;Fg.length=0}var Bd=FA.ReactCurrentDispatcher,Qg=FA.ReactCurrentBatchConfig,Fi=0,Ot=null,sn=null,fn=null,ih=!1,Sl=!1,oc=0,tk=0;function Qn(){throw Error(Z(321))}function W0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lr(t[n],e[n]))return!1;return!0}function q0(t,e,n,r,A,s){if(Fi=s,Ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bd.current=t===null||t.memoizedState===null?sk:ik,t=n(r,A),Sl){s=0;do{if(Sl=!1,oc=0,25<=s)throw Error(Z(301));s+=1,fn=sn=null,e.updateQueue=null,Bd.current=ok,t=n(r,A)}while(Sl)}if(Bd.current=oh,e=sn!==null&&sn.next!==null,Fi=0,fn=sn=Ot=null,ih=!1,e)throw Error(Z(300));return t}function J0(){var t=oc!==0;return oc=0,t}function Vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ot.memoizedState=fn=t:fn=fn.next=t,fn}function Tr(){if(sn===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=fn===null?Ot.memoizedState:fn.next;if(e!==null)fn=e,sn=t;else{if(t===null)throw Error(Z(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},fn===null?Ot.memoizedState=fn=t:fn=fn.next=t}return fn}function ac(t,e){return typeof e=="function"?e(t):e}function Ug(t){var e=Tr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=sn,A=r.baseQueue,s=n.pending;if(s!==null){if(A!==null){var i=A.next;A.next=s.next,s.next=i}r.baseQueue=A=s,n.pending=null}if(A!==null){s=A.next,r=r.baseState;var o=i=null,a=null,c=s;do{var d=c.lane;if((Fi&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(o=a=h,i=r):a=a.next=h,Ot.lanes|=d,Qi|=d}c=c.next}while(c!==null&&c!==s);a===null?i=r:a.next=o,Lr(r,e.memoizedState)||(Zn=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){A=t;do s=A.lane,Ot.lanes|=s,Qi|=s,A=A.next;while(A!==t)}else A===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sg(t){var e=Tr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,A=n.pending,s=e.memoizedState;if(A!==null){n.pending=null;var i=A=A.next;do s=t(s,i.action),i=i.next;while(i!==A);Lr(s,e.memoizedState)||(Zn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function WE(){}function qE(t,e){var n=Ot,r=Tr(),A=e(),s=!Lr(r.memoizedState,A);if(s&&(r.memoizedState=A,Zn=!0),r=r.queue,X0(YE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,lc(9,XE.bind(null,n,r,A,e),void 0,null),pn===null)throw Error(Z(349));Fi&30||JE(n,e,A)}return A}function JE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XE(t,e,n,r){e.value=n,e.getSnapshot=r,ZE(e)&&e_(t)}function YE(t,e,n){return n(function(){ZE(e)&&e_(t)})}function ZE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lr(t,n)}catch{return!0}}function e_(t){var e=xA(t,1);e!==null&&Dr(e,t,1,-1)}function Ay(t){var e=Vr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:t},e.queue=t,t=t.dispatch=Ak.bind(null,Ot,t),[e.memoizedState,t]}function lc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ot.updateQueue,e===null?(e={lastEffect:null,stores:null},Ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function t_(){return Tr().memoizedState}function vd(t,e,n,r){var A=Vr();Ot.flags|=t,A.memoizedState=lc(1|e,n,void 0,r===void 0?null:r)}function tf(t,e,n,r){var A=Tr();r=r===void 0?null:r;var s=void 0;if(sn!==null){var i=sn.memoizedState;if(s=i.destroy,r!==null&&W0(r,i.deps)){A.memoizedState=lc(e,n,s,r);return}}Ot.flags|=t,A.memoizedState=lc(1|e,n,s,r)}function sy(t,e){return vd(8390656,8,t,e)}function X0(t,e){return tf(2048,8,t,e)}function n_(t,e){return tf(4,2,t,e)}function r_(t,e){return tf(4,4,t,e)}function A_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s_(t,e,n){return n=n!=null?n.concat([t]):null,tf(4,4,A_.bind(null,e,t),n)}function Y0(){}function i_(t,e){var n=Tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function o_(t,e){var n=Tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&W0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function a_(t,e,n){return Fi&21?(Lr(n,e)||(n=hE(),Ot.lanes|=n,Qi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zn=!0),t.memoizedState=n)}function nk(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=Qg.transition;Qg.transition={};try{t(!1),e()}finally{mt=n,Qg.transition=r}}function l_(){return Tr().memoizedState}function rk(t,e,n){var r=ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},c_(t))u_(e,n);else if(n=GE(t,e,n,r),n!==null){var A=$n();Dr(n,t,r,A),d_(n,e,r)}}function Ak(t,e,n){var r=ys(t),A={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(c_(t))u_(e,A);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,o=s(i,n);if(A.hasEagerState=!0,A.eagerState=o,Lr(o,i)){var a=e.interleaved;a===null?(A.next=A,V0(e)):(A.next=a.next,a.next=A),e.interleaved=A;return}}catch{}finally{}n=GE(t,e,A,r),n!==null&&(A=$n(),Dr(n,t,r,A),d_(n,e,r))}}function c_(t){var e=t.alternate;return t===Ot||e!==null&&e===Ot}function u_(t,e){Sl=ih=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function d_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,F0(t,n)}}var oh={readContext:br,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useInsertionEffect:Qn,useLayoutEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useMutableSource:Qn,useSyncExternalStore:Qn,useId:Qn,unstable_isNewReconciler:!1},sk={readContext:br,useCallback:function(t,e){return Vr().memoizedState=[t,e===void 0?null:e],t},useContext:br,useEffect:sy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vd(4194308,4,A_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vd(4194308,4,t,e)},useInsertionEffect:function(t,e){return vd(4,2,t,e)},useMemo:function(t,e){var n=Vr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rk.bind(null,Ot,t),[r.memoizedState,t]},useRef:function(t){var e=Vr();return t={current:t},e.memoizedState=t},useState:Ay,useDebugValue:Y0,useDeferredValue:function(t){return Vr().memoizedState=t},useTransition:function(){var t=Ay(!1),e=t[0];return t=nk.bind(null,t[1]),Vr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ot,A=Vr();if(Pt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),pn===null)throw Error(Z(349));Fi&30||JE(r,e,n)}A.memoizedState=n;var s={value:n,getSnapshot:e};return A.queue=s,sy(YE.bind(null,r,s,t),[t]),r.flags|=2048,lc(9,XE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Vr(),e=pn.identifierPrefix;if(Pt){var n=uA,r=cA;n=(r&~(1<<32-Nr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ik={readContext:br,useCallback:i_,useContext:br,useEffect:X0,useImperativeHandle:s_,useInsertionEffect:n_,useLayoutEffect:r_,useMemo:o_,useReducer:Ug,useRef:t_,useState:function(){return Ug(ac)},useDebugValue:Y0,useDeferredValue:function(t){var e=Tr();return a_(e,sn.memoizedState,t)},useTransition:function(){var t=Ug(ac)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:WE,useSyncExternalStore:qE,useId:l_,unstable_isNewReconciler:!1},ok={readContext:br,useCallback:i_,useContext:br,useEffect:X0,useImperativeHandle:s_,useInsertionEffect:n_,useLayoutEffect:r_,useMemo:o_,useReducer:Sg,useRef:t_,useState:function(){return Sg(ac)},useDebugValue:Y0,useDeferredValue:function(t){var e=Tr();return sn===null?e.memoizedState=t:a_(e,sn.memoizedState,t)},useTransition:function(){var t=Sg(ac)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:WE,useSyncExternalStore:qE,useId:l_,unstable_isNewReconciler:!1};function Sr(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nf={isMounted:function(t){return(t=t._reactInternals)?Gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$n(),A=ys(t),s=mA(r,A);s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,A),e!==null&&(Dr(e,t,A,r),wd(e,t,A))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$n(),A=ys(t),s=mA(r,A);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,A),e!==null&&(Dr(e,t,A,r),wd(e,t,A))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$n(),r=ys(t),A=mA(n,r);A.tag=2,e!=null&&(A.callback=e),e=Bs(t,A,r),e!==null&&(Dr(e,t,r,n),wd(e,t,r))}};function iy(t,e,n,r,A,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!tc(n,r)||!tc(A,s):!0}function h_(t,e,n){var r=!1,A=Us,s=e.contextType;return typeof s=="object"&&s!==null?s=br(s):(A=Ar(e)?bi:jn.current,r=e.contextTypes,s=(r=r!=null)?Go(t,A):Us),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=A,t.__reactInternalMemoizedMaskedChildContext=s),e}function oy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nf.enqueueReplaceState(e,e.state,null)}function Yp(t,e,n,r){var A=t.stateNode;A.props=n,A.state=t.memoizedState,A.refs={},K0(t);var s=e.contextType;typeof s=="object"&&s!==null?A.context=br(s):(s=Ar(e)?bi:jn.current,A.context=Go(t,s)),A.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xp(t,e,s,n),A.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(e=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),e!==A.state&&nf.enqueueReplaceState(A,A.state,null),Ah(t,n,A,r),A.state=t.memoizedState),typeof A.componentDidMount=="function"&&(t.flags|=4194308)}function qo(t,e){try{var n="",r=e;do n+=NU(r),r=r.return;while(r);var A=n}catch(s){A=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:A,digest:null}}function kg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ak=typeof WeakMap=="function"?WeakMap:Map;function f_(t,e,n){n=mA(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lh||(lh=!0,lm=r),Zp(t,e)},n}function g_(t,e,n){n=mA(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var A=e.value;n.payload=function(){return r(A)},n.callback=function(){Zp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zp(t,e),typeof r!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function ay(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ak;var A=new Set;r.set(e,A)}else A=r.get(e),A===void 0&&(A=new Set,r.set(e,A));A.has(n)||(A.add(n),t=xk.bind(null,t,e,n),e.then(t,t))}function ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cy(t,e,n,r,A){return t.mode&1?(t.flags|=65536,t.lanes=A,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mA(-1,1),e.tag=2,Bs(n,e,1))),n.lanes|=1),t)}var lk=FA.ReactCurrentOwner,Zn=!1;function Kn(t,e,n,r){e.child=t===null?KE(e,null,n,r):$o(e,t.child,n,r)}function uy(t,e,n,r,A){n=n.render;var s=e.ref;return Do(e,A),r=q0(t,e,n,r,s,A),n=J0(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,CA(t,e,A)):(Pt&&n&&P0(e),e.flags|=1,Kn(t,e,r,A),e.child)}function dy(t,e,n,r,A){if(t===null){var s=n.type;return typeof s=="function"&&!iw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,p_(t,e,s,r,A)):(t=Id(n.type,null,r,e,e.mode,A),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&A)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:tc,n(i,r)&&t.ref===e.ref)return CA(t,e,A)}return e.flags|=1,t=xs(s,r),t.ref=e.ref,t.return=e,e.child=t}function p_(t,e,n,r,A){if(t!==null){var s=t.memoizedProps;if(tc(s,r)&&t.ref===e.ref)if(Zn=!1,e.pendingProps=r=s,(t.lanes&A)!==0)t.flags&131072&&(Zn=!0);else return e.lanes=t.lanes,CA(t,e,A)}return em(t,e,n,r,A)}function m_(t,e,n){var r=e.pendingProps,A=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Fo,lr),lr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(Fo,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_t(Fo,lr),lr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_t(Fo,lr),lr|=r;return Kn(t,e,A,n),e.child}function w_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function em(t,e,n,r,A){var s=Ar(n)?bi:jn.current;return s=Go(e,s),Do(e,A),n=q0(t,e,n,r,s,A),r=J0(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~A,CA(t,e,A)):(Pt&&r&&P0(e),e.flags|=1,Kn(t,e,n,A),e.child)}function hy(t,e,n,r,A){if(Ar(n)){var s=!0;Zd(e)}else s=!1;if(Do(e,A),e.stateNode===null)yd(t,e),h_(e,n,r),Yp(e,n,r,A),r=!0;else if(t===null){var i=e.stateNode,o=e.memoizedProps;i.props=o;var a=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=br(c):(c=Ar(n)?bi:jn.current,c=Go(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||a!==c)&&oy(e,i,r,c),qA=!1;var f=e.memoizedState;i.state=f,Ah(e,r,i,A),a=e.memoizedState,o!==r||f!==a||rr.current||qA?(typeof d=="function"&&(Xp(e,n,d,r),a=e.memoizedState),(o=qA||iy(e,n,o,r,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),i.props=r,i.state=a,i.context=c,r=o):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,zE(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Sr(e.type,o),i.props=c,h=e.pendingProps,f=i.context,a=n.contextType,typeof a=="object"&&a!==null?a=br(a):(a=Ar(n)?bi:jn.current,a=Go(e,a));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==a)&&oy(e,i,r,a),qA=!1,f=e.memoizedState,i.state=f,Ah(e,r,i,A);var B=e.memoizedState;o!==h||f!==B||rr.current||qA?(typeof m=="function"&&(Xp(e,n,m,r),B=e.memoizedState),(c=qA||iy(e,n,c,r,f,B,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,B,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,B,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=B),i.props=r,i.state=B,i.context=a,r=c):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return tm(t,e,n,r,s,A)}function tm(t,e,n,r,A,s){w_(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return A&&Yv(e,n,!1),CA(t,e,s);r=e.stateNode,lk.current=e;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=$o(e,t.child,null,s),e.child=$o(e,null,o,s)):Kn(t,e,o,s),e.memoizedState=r.state,A&&Yv(e,n,!0),e.child}function B_(t){var e=t.stateNode;e.pendingContext?Xv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xv(t,e.context,!1),G0(t,e.containerInfo)}function fy(t,e,n,r,A){return zo(),M0(A),e.flags|=256,Kn(t,e,n,r),e.child}var nm={dehydrated:null,treeContext:null,retryLane:0};function rm(t){return{baseLanes:t,cachePool:null,transitions:null}}function v_(t,e,n){var r=e.pendingProps,A=Ht.current,s=!1,i=(e.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(A&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(A|=1),_t(Ht,A&1),t===null)return qp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=sf(i,r,0,null),t=xi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rm(n),e.memoizedState=nm,t):Z0(e,i));if(A=t.memoizedState,A!==null&&(o=A.dehydrated,o!==null))return ck(t,e,i,r,o,A,n);if(s){s=r.fallback,i=e.mode,A=t.child,o=A.sibling;var a={mode:"hidden",children:r.children};return!(i&1)&&e.child!==A?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=xs(A,a),r.subtreeFlags=A.subtreeFlags&14680064),o!==null?s=xs(o,s):(s=xi(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?rm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=nm,r}return s=t.child,t=s.sibling,r=xs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Z0(t,e){return e=sf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uu(t,e,n,r){return r!==null&&M0(r),$o(e,t.child,null,n),t=Z0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ck(t,e,n,r,A,s,i){if(n)return e.flags&256?(e.flags&=-257,r=kg(Error(Z(422))),Uu(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,A=e.mode,r=sf({mode:"visible",children:r.children},A,0,null),s=xi(s,A,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$o(e,t.child,null,i),e.child.memoizedState=rm(i),e.memoizedState=nm,s);if(!(e.mode&1))return Uu(t,e,i,null);if(A.data==="$!"){if(r=A.nextSibling&&A.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Z(419)),r=kg(s,r,void 0),Uu(t,e,i,r)}if(o=(i&t.childLanes)!==0,Zn||o){if(r=pn,r!==null){switch(i&-i){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=A&(r.suspendedLanes|i)?0:A,A!==0&&A!==s.retryLane&&(s.retryLane=A,xA(t,A),Dr(r,t,A,-1))}return sw(),r=kg(Error(Z(421))),Uu(t,e,i,r)}return A.data==="$?"?(e.flags|=128,e.child=t.child,e=Ck.bind(null,t),A._reactRetry=e,null):(t=s.treeContext,dr=ws(A.nextSibling),hr=e,Pt=!0,Rr=null,t!==null&&(vr[yr++]=cA,vr[yr++]=uA,vr[yr++]=Ti,cA=t.id,uA=t.overflow,Ti=e),e=Z0(e,r.children),e.flags|=4096,e)}function gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jp(t.return,e,n)}function Rg(t,e,n,r,A){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:A}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=A)}function y_(t,e,n){var r=e.pendingProps,A=r.revealOrder,s=r.tail;if(Kn(t,e,r.children,n),r=Ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,n,e);else if(t.tag===19)gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_t(Ht,r),!(e.mode&1))e.memoizedState=null;else switch(A){case"forwards":for(n=e.child,A=null;n!==null;)t=n.alternate,t!==null&&sh(t)===null&&(A=n),n=n.sibling;n=A,n===null?(A=e.child,e.child=null):(A=n.sibling,n.sibling=null),Rg(e,!1,A,n,s);break;case"backwards":for(n=null,A=e.child,e.child=null;A!==null;){if(t=A.alternate,t!==null&&sh(t)===null){e.child=A;break}t=A.sibling,A.sibling=n,n=A,A=t}Rg(e,!0,n,null,s);break;case"together":Rg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function CA(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uk(t,e,n){switch(e.tag){case 3:B_(e),zo();break;case 5:$E(e);break;case 1:Ar(e.type)&&Zd(e);break;case 4:G0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,A=e.memoizedProps.value;_t(nh,r._currentValue),r._currentValue=A;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_t(Ht,Ht.current&1),e.flags|=128,null):n&e.child.childLanes?v_(t,e,n):(_t(Ht,Ht.current&1),t=CA(t,e,n),t!==null?t.sibling:null);_t(Ht,Ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return y_(t,e,n);e.flags|=128}if(A=e.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),_t(Ht,Ht.current),r)break;return null;case 22:case 23:return e.lanes=0,m_(t,e,n)}return CA(t,e,n)}var x_,Am,C_,I_;x_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Am=function(){};C_=function(t,e,n,r){var A=t.memoizedProps;if(A!==r){t=e.stateNode,Bi(Jr.current);var s=null;switch(n){case"input":A=_p(t,A),r=_p(t,r),s=[];break;case"select":A=Kt({},A,{value:void 0}),r=Kt({},r,{value:void 0}),s=[];break;case"textarea":A=Fp(t,A),r=Fp(t,r),s=[];break;default:typeof A.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xd)}Up(n,r);var i;n=null;for(c in A)if(!r.hasOwnProperty(c)&&A.hasOwnProperty(c)&&A[c]!=null)if(c==="style"){var o=A[c];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(o=A!=null?A[c]:void 0,r.hasOwnProperty(c)&&a!==o&&(a!=null||o!=null))if(c==="style")if(o){for(i in o)!o.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in a)a.hasOwnProperty(i)&&o[i]!==a[i]&&(n||(n={}),n[i]=a[i])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,o=o?o.__html:void 0,a!=null&&o!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wl.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ft("scroll",t),s||o===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};I_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ya(t,e){if(!Pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags&14680064,r|=A.flags&14680064,A.return=t,A=A.sibling;else for(A=t.child;A!==null;)n|=A.lanes|A.childLanes,r|=A.subtreeFlags,r|=A.flags,A.return=t,A=A.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dk(t,e,n){var r=e.pendingProps;switch(L0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return Ar(e.type)&&Yd(),Un(e),null;case 3:return r=e.stateNode,Wo(),St(rr),St(jn),$0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rr!==null&&(dm(Rr),Rr=null))),Am(t,e),Un(e),null;case 5:z0(e);var A=Bi(ic.current);if(n=e.type,t!==null&&e.stateNode!=null)C_(t,e,n,r,A),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Un(e),null}if(t=Bi(Jr.current),Fu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gr]=e,r[Ac]=s,t=(e.mode&1)!==0,n){case"dialog":Ft("cancel",r),Ft("close",r);break;case"iframe":case"object":case"embed":Ft("load",r);break;case"video":case"audio":for(A=0;A<dl.length;A++)Ft(dl[A],r);break;case"source":Ft("error",r);break;case"img":case"image":case"link":Ft("error",r),Ft("load",r);break;case"details":Ft("toggle",r);break;case"input":Iv(r,s),Ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ft("invalid",r);break;case"textarea":_v(r,s),Ft("invalid",r)}Up(n,s),A=null;for(var i in s)if(s.hasOwnProperty(i)){var o=s[i];i==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Tu(r.textContent,o,t),A=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Tu(r.textContent,o,t),A=["children",""+o]):Wl.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ft("scroll",r)}switch(n){case"input":vu(r),Ev(r,s,!0);break;case"textarea":vu(r),bv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xd)}r=A,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=A.nodeType===9?A:A.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Gr]=e,t[Ac]=r,x_(t,e,!1,!1),e.stateNode=t;e:{switch(i=Sp(n,r),n){case"dialog":Ft("cancel",t),Ft("close",t),A=r;break;case"iframe":case"object":case"embed":Ft("load",t),A=r;break;case"video":case"audio":for(A=0;A<dl.length;A++)Ft(dl[A],t);A=r;break;case"source":Ft("error",t),A=r;break;case"img":case"image":case"link":Ft("error",t),Ft("load",t),A=r;break;case"details":Ft("toggle",t),A=r;break;case"input":Iv(t,r),A=_p(t,r),Ft("invalid",t);break;case"option":A=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},A=Kt({},r,{value:void 0}),Ft("invalid",t);break;case"textarea":_v(t,r),A=Fp(t,r),Ft("invalid",t);break;default:A=r}Up(n,A),o=A;for(s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="style"?tE(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ZI(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ql(t,a):typeof a=="number"&&ql(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wl.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Ft("scroll",t):a!=null&&C0(t,s,a,i))}switch(n){case"input":vu(t),Ev(t,r,!1);break;case"textarea":vu(t),bv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?So(t,!!r.multiple,s,!1):r.defaultValue!=null&&So(t,!!r.multiple,r.defaultValue,!0);break;default:typeof A.onClick=="function"&&(t.onclick=Xd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)I_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Bi(ic.current),Bi(Jr.current),Fu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gr]=e,(s=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:Tu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gr]=e,e.stateNode=r}return Un(e),null;case 13:if(St(Ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pt&&dr!==null&&e.mode&1&&!(e.flags&128))OE(),zo(),e.flags|=98560,s=!1;else if(s=Fu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Gr]=e}else zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Un(e),s=!1}else Rr!==null&&(dm(Rr),Rr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ht.current&1?an===0&&(an=3):sw())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return Wo(),Am(t,e),t===null&&nc(e.stateNode.containerInfo),Un(e),null;case 10:return O0(e.type._context),Un(e),null;case 17:return Ar(e.type)&&Yd(),Un(e),null;case 19:if(St(Ht),s=e.memoizedState,s===null)return Un(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)Ya(s,!1);else{if(an!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=sh(t),i!==null){for(e.flags|=128,Ya(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(Ht,Ht.current&1|2),e.child}t=t.sibling}s.tail!==null&&Zt()>Jo&&(e.flags|=128,r=!0,Ya(s,!1),e.lanes=4194304)}else{if(!r)if(t=sh(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ya(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Pt)return Un(e),null}else 2*Zt()-s.renderingStartTime>Jo&&n!==1073741824&&(e.flags|=128,r=!0,Ya(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zt(),e.sibling=null,n=Ht.current,_t(Ht,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return Aw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lr&1073741824&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function hk(t,e){switch(L0(e),e.tag){case 1:return Ar(e.type)&&Yd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wo(),St(rr),St(jn),$0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return z0(e),null;case 13:if(St(Ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(Ht),null;case 4:return Wo(),null;case 10:return O0(e.type._context),null;case 22:case 23:return Aw(),null;case 24:return null;default:return null}}var Su=!1,Pn=!1,fk=typeof WeakSet=="function"?WeakSet:Set,_e=null;function To(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$t(t,e,r)}else n.current=null}function sm(t,e,n){try{n()}catch(r){$t(t,e,r)}}var py=!1;function gk(t,e){if(Op=Wd,t=FE(),D0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var A=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,o=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||A!==0&&h.nodeType!==3||(o=i+A),h!==s||r!==0&&h.nodeType!==3||(a=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++c===A&&(o=i),f===s&&++d===r&&(a=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||a===-1?null:{start:o,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vp={focusedElem:t,selectionRange:n},Wd=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var B=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var v=B.memoizedProps,_=B.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Sr(e.type,v),_);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(F){$t(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return B=py,py=!1,B}function kl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var A=r=r.next;do{if((A.tag&t)===t){var s=A.destroy;A.destroy=void 0,s!==void 0&&sm(e,n,s)}A=A.next}while(A!==r)}}function rf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function im(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function E_(t){var e=t.alternate;e!==null&&(t.alternate=null,E_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[Ac],delete e[zp],delete e[XS],delete e[YS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function __(t){return t.tag===5||t.tag===3||t.tag===4}function my(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||__(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xd));else if(r!==4&&(t=t.child,t!==null))for(om(t,e,n),t=t.sibling;t!==null;)om(t,e,n),t=t.sibling}function am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(am(t,e,n),t=t.sibling;t!==null;)am(t,e,n),t=t.sibling}var yn=null,kr=!1;function OA(t,e,n){for(n=n.child;n!==null;)b_(t,e,n),n=n.sibling}function b_(t,e,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(qh,n)}catch{}switch(n.tag){case 5:Pn||To(n,e);case 6:var r=yn,A=kr;yn=null,OA(t,e,n),yn=r,kr=A,yn!==null&&(kr?(t=yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yn.removeChild(n.stateNode));break;case 18:yn!==null&&(kr?(t=yn,n=n.stateNode,t.nodeType===8?bg(t.parentNode,n):t.nodeType===1&&bg(t,n),Zl(t)):bg(yn,n.stateNode));break;case 4:r=yn,A=kr,yn=n.stateNode.containerInfo,kr=!0,OA(t,e,n),yn=r,kr=A;break;case 0:case 11:case 14:case 15:if(!Pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){A=r=r.next;do{var s=A,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&sm(n,e,i),A=A.next}while(A!==r)}OA(t,e,n);break;case 1:if(!Pn&&(To(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){$t(n,e,o)}OA(t,e,n);break;case 21:OA(t,e,n);break;case 22:n.mode&1?(Pn=(r=Pn)||n.memoizedState!==null,OA(t,e,n),Pn=r):OA(t,e,n);break;default:OA(t,e,n)}}function wy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fk),e.forEach(function(r){var A=Ik.bind(null,t,r);n.has(r)||(n.add(r),r.then(A,A))})}}function Qr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var A=n[r];try{var s=t,i=e,o=i;e:for(;o!==null;){switch(o.tag){case 5:yn=o.stateNode,kr=!1;break e;case 3:yn=o.stateNode.containerInfo,kr=!0;break e;case 4:yn=o.stateNode.containerInfo,kr=!0;break e}o=o.return}if(yn===null)throw Error(Z(160));b_(s,i,A),yn=null,kr=!1;var a=A.alternate;a!==null&&(a.return=null),A.return=null}catch(c){$t(A,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)T_(e,t),e=e.sibling}function T_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qr(e,t),Hr(t),r&4){try{kl(3,t,t.return),rf(3,t)}catch(v){$t(t,t.return,v)}try{kl(5,t,t.return)}catch(v){$t(t,t.return,v)}}break;case 1:Qr(e,t),Hr(t),r&512&&n!==null&&To(n,n.return);break;case 5:if(Qr(e,t),Hr(t),r&512&&n!==null&&To(n,n.return),t.flags&32){var A=t.stateNode;try{ql(A,"")}catch(v){$t(t,t.return,v)}}if(r&4&&(A=t.stateNode,A!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,o=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&JI(A,s),Sp(o,i);var c=Sp(o,s);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?tE(A,h):d==="dangerouslySetInnerHTML"?ZI(A,h):d==="children"?ql(A,h):C0(A,d,h,c)}switch(o){case"input":bp(A,s);break;case"textarea":XI(A,s);break;case"select":var f=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?So(A,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?So(A,!!s.multiple,s.defaultValue,!0):So(A,!!s.multiple,s.multiple?[]:"",!1))}A[Ac]=s}catch(v){$t(t,t.return,v)}}break;case 6:if(Qr(e,t),Hr(t),r&4){if(t.stateNode===null)throw Error(Z(162));A=t.stateNode,s=t.memoizedProps;try{A.nodeValue=s}catch(v){$t(t,t.return,v)}}break;case 3:if(Qr(e,t),Hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zl(e.containerInfo)}catch(v){$t(t,t.return,v)}break;case 4:Qr(e,t),Hr(t);break;case 13:Qr(e,t),Hr(t),A=t.child,A.flags&8192&&(s=A.memoizedState!==null,A.stateNode.isHidden=s,!s||A.alternate!==null&&A.alternate.memoizedState!==null||(nw=Zt())),r&4&&wy(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Pn=(c=Pn)||d,Qr(e,t),Pn=c):Qr(e,t),Hr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(_e=t,d=t.child;d!==null;){for(h=_e=d;_e!==null;){switch(f=_e,m=f.child,f.tag){case 0:case 11:case 14:case 15:kl(4,f,f.return);break;case 1:To(f,f.return);var B=f.stateNode;if(typeof B.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,B.props=e.memoizedProps,B.state=e.memoizedState,B.componentWillUnmount()}catch(v){$t(r,n,v)}}break;case 5:To(f,f.return);break;case 22:if(f.memoizedState!==null){vy(h);continue}}m!==null?(m.return=f,_e=m):vy(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{A=h.stateNode,c?(s=A.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,o.style.display=eE("display",i))}catch(v){$t(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){$t(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Qr(e,t),Hr(t),r&4&&wy(t);break;case 21:break;default:Qr(e,t),Hr(t)}}function Hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(__(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var A=r.stateNode;r.flags&32&&(ql(A,""),r.flags&=-33);var s=my(t);am(t,s,A);break;case 3:case 4:var i=r.stateNode.containerInfo,o=my(t);om(t,o,i);break;default:throw Error(Z(161))}}catch(a){$t(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pk(t,e,n){_e=t,F_(t)}function F_(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var A=_e,s=A.child;if(A.tag===22&&r){var i=A.memoizedState!==null||Su;if(!i){var o=A.alternate,a=o!==null&&o.memoizedState!==null||Pn;o=Su;var c=Pn;if(Su=i,(Pn=a)&&!c)for(_e=A;_e!==null;)i=_e,a=i.child,i.tag===22&&i.memoizedState!==null?yy(A):a!==null?(a.return=i,_e=a):yy(A);for(;s!==null;)_e=s,F_(s),s=s.sibling;_e=A,Su=o,Pn=c}By(t)}else A.subtreeFlags&8772&&s!==null?(s.return=A,_e=s):By(t)}}function By(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pn||rf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pn)if(n===null)r.componentDidMount();else{var A=e.elementType===e.type?n.memoizedProps:Sr(e.type,n.memoizedProps);r.componentDidUpdate(A,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ry(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ry(e,i,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Zl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Pn||e.flags&512&&im(e)}catch(f){$t(e,e.return,f)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function vy(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function yy(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rf(4,e)}catch(a){$t(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var A=e.return;try{r.componentDidMount()}catch(a){$t(e,A,a)}}var s=e.return;try{im(e)}catch(a){$t(e,s,a)}break;case 5:var i=e.return;try{im(e)}catch(a){$t(e,i,a)}}}catch(a){$t(e,e.return,a)}if(e===t){_e=null;break}var o=e.sibling;if(o!==null){o.return=e.return,_e=o;break}_e=e.return}}var mk=Math.ceil,ah=FA.ReactCurrentDispatcher,ew=FA.ReactCurrentOwner,_r=FA.ReactCurrentBatchConfig,lt=0,pn=null,An=null,_n=0,lr=0,Fo=Ks(0),an=0,cc=null,Qi=0,Af=0,tw=0,Rl=null,Yn=null,nw=0,Jo=1/0,aA=null,lh=!1,lm=null,vs=null,ku=!1,as=null,ch=0,Nl=0,cm=null,xd=-1,Cd=0;function $n(){return lt&6?Zt():xd!==-1?xd:xd=Zt()}function ys(t){return t.mode&1?lt&2&&_n!==0?_n&-_n:ek.transition!==null?(Cd===0&&(Cd=hE()),Cd):(t=mt,t!==0||(t=window.event,t=t===void 0?16:vE(t.type)),t):1}function Dr(t,e,n,r){if(50<Nl)throw Nl=0,cm=null,Error(Z(185));Uc(t,n,r),(!(lt&2)||t!==pn)&&(t===pn&&(!(lt&2)&&(Af|=n),an===4&&YA(t,_n)),sr(t,r),n===1&&lt===0&&!(e.mode&1)&&(Jo=Zt()+500,ef&&Gs()))}function sr(t,e){var n=t.callbackNode;eS(t,e);var r=$d(t,t===pn?_n:0);if(r===0)n!==null&&Qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Qv(n),e===1)t.tag===0?ZS(xy.bind(null,t)):ME(xy.bind(null,t)),qS(function(){!(lt&6)&&Gs()}),n=null;else{switch(fE(r)){case 1:n=T0;break;case 4:n=uE;break;case 16:n=zd;break;case 536870912:n=dE;break;default:n=zd}n=P_(n,Q_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Q_(t,e){if(xd=-1,Cd=0,lt&6)throw Error(Z(327));var n=t.callbackNode;if(Po()&&t.callbackNode!==n)return null;var r=$d(t,t===pn?_n:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uh(t,r);else{e=r;var A=lt;lt|=2;var s=S_();(pn!==t||_n!==e)&&(aA=null,Jo=Zt()+500,yi(t,e));do try{vk();break}catch(o){U_(t,o)}while(!0);H0(),ah.current=s,lt=A,An!==null?e=0:(pn=null,_n=0,e=an)}if(e!==0){if(e===2&&(A=Pp(t),A!==0&&(r=A,e=um(t,A))),e===1)throw n=cc,yi(t,0),YA(t,r),sr(t,Zt()),n;if(e===6)YA(t,r);else{if(A=t.current.alternate,!(r&30)&&!wk(A)&&(e=uh(t,r),e===2&&(s=Pp(t),s!==0&&(r=s,e=um(t,s))),e===1))throw n=cc,yi(t,0),YA(t,r),sr(t,Zt()),n;switch(t.finishedWork=A,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:li(t,Yn,aA);break;case 3:if(YA(t,r),(r&130023424)===r&&(e=nw+500-Zt(),10<e)){if($d(t,0)!==0)break;if(A=t.suspendedLanes,(A&r)!==r){$n(),t.pingedLanes|=t.suspendedLanes&A;break}t.timeoutHandle=Gp(li.bind(null,t,Yn,aA),e);break}li(t,Yn,aA);break;case 4:if(YA(t,r),(r&4194240)===r)break;for(e=t.eventTimes,A=-1;0<r;){var i=31-Nr(r);s=1<<i,i=e[i],i>A&&(A=i),r&=~s}if(r=A,r=Zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mk(r/1960))-r,10<r){t.timeoutHandle=Gp(li.bind(null,t,Yn,aA),r);break}li(t,Yn,aA);break;case 5:li(t,Yn,aA);break;default:throw Error(Z(329))}}}return sr(t,Zt()),t.callbackNode===n?Q_.bind(null,t):null}function um(t,e){var n=Rl;return t.current.memoizedState.isDehydrated&&(yi(t,e).flags|=256),t=uh(t,e),t!==2&&(e=Yn,Yn=n,e!==null&&dm(e)),t}function dm(t){Yn===null?Yn=t:Yn.push.apply(Yn,t)}function wk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var A=n[r],s=A.getSnapshot;A=A.value;try{if(!Lr(s(),A))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function YA(t,e){for(e&=~tw,e&=~Af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nr(e),r=1<<n;t[n]=-1,e&=~r}}function xy(t){if(lt&6)throw Error(Z(327));Po();var e=$d(t,0);if(!(e&1))return sr(t,Zt()),null;var n=uh(t,e);if(t.tag!==0&&n===2){var r=Pp(t);r!==0&&(e=r,n=um(t,r))}if(n===1)throw n=cc,yi(t,0),YA(t,e),sr(t,Zt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,Yn,aA),sr(t,Zt()),null}function rw(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Jo=Zt()+500,ef&&Gs())}}function Ui(t){as!==null&&as.tag===0&&!(lt&6)&&Po();var e=lt;lt|=1;var n=_r.transition,r=mt;try{if(_r.transition=null,mt=1,t)return t()}finally{mt=r,_r.transition=n,lt=e,!(lt&6)&&Gs()}}function Aw(){lr=Fo.current,St(Fo)}function yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,WS(n)),An!==null)for(n=An.return;n!==null;){var r=n;switch(L0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yd();break;case 3:Wo(),St(rr),St(jn),$0();break;case 5:z0(r);break;case 4:Wo();break;case 13:St(Ht);break;case 19:St(Ht);break;case 10:O0(r.type._context);break;case 22:case 23:Aw()}n=n.return}if(pn=t,An=t=xs(t.current,null),_n=lr=e,an=0,cc=null,tw=Af=Qi=0,Yn=Rl=null,wi!==null){for(e=0;e<wi.length;e++)if(n=wi[e],r=n.interleaved,r!==null){n.interleaved=null;var A=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=A,r.next=i}n.pending=r}wi=null}return t}function U_(t,e){do{var n=An;try{if(H0(),Bd.current=oh,ih){for(var r=Ot.memoizedState;r!==null;){var A=r.queue;A!==null&&(A.pending=null),r=r.next}ih=!1}if(Fi=0,fn=sn=Ot=null,Sl=!1,oc=0,ew.current=null,n===null||n.return===null){an=1,cc=e,An=null;break}e:{var s=t,i=n.return,o=n,a=e;if(e=_n,o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=ly(i);if(m!==null){m.flags&=-257,cy(m,i,o,s,e),m.mode&1&&ay(s,c,e),e=m,a=c;var B=e.updateQueue;if(B===null){var v=new Set;v.add(a),e.updateQueue=v}else B.add(a);break e}else{if(!(e&1)){ay(s,c,e),sw();break e}a=Error(Z(426))}}else if(Pt&&o.mode&1){var _=ly(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),cy(_,i,o,s,e),M0(qo(a,o));break e}}s=a=qo(a,o),an!==4&&(an=2),Rl===null?Rl=[s]:Rl.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=f_(s,a,e);ny(s,x);break e;case 1:o=a;var w=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(vs===null||!vs.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var F=g_(s,o,e);ny(s,F);break e}}s=s.return}while(s!==null)}R_(n)}catch(U){e=U,An===n&&n!==null&&(An=n=n.return);continue}break}while(!0)}function S_(){var t=ah.current;return ah.current=oh,t===null?oh:t}function sw(){(an===0||an===3||an===2)&&(an=4),pn===null||!(Qi&268435455)&&!(Af&268435455)||YA(pn,_n)}function uh(t,e){var n=lt;lt|=2;var r=S_();(pn!==t||_n!==e)&&(aA=null,yi(t,e));do try{Bk();break}catch(A){U_(t,A)}while(!0);if(H0(),lt=n,ah.current=r,An!==null)throw Error(Z(261));return pn=null,_n=0,an}function Bk(){for(;An!==null;)k_(An)}function vk(){for(;An!==null&&!GU();)k_(An)}function k_(t){var e=D_(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?R_(t):An=e,ew.current=null}function R_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hk(n,e),n!==null){n.flags&=32767,An=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{an=6,An=null;return}}else if(n=dk(n,e,lr),n!==null){An=n;return}if(e=e.sibling,e!==null){An=e;return}An=e=t}while(e!==null);an===0&&(an=5)}function li(t,e,n){var r=mt,A=_r.transition;try{_r.transition=null,mt=1,yk(t,e,n,r)}finally{_r.transition=A,mt=r}return null}function yk(t,e,n,r){do Po();while(as!==null);if(lt&6)throw Error(Z(327));n=t.finishedWork;var A=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(tS(t,s),t===pn&&(An=pn=null,_n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ku||(ku=!0,P_(zd,function(){return Po(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_r.transition,_r.transition=null;var i=mt;mt=1;var o=lt;lt|=4,ew.current=null,gk(t,n),T_(n,t),HS(Vp),Wd=!!Op,Vp=Op=null,t.current=n,pk(n),zU(),lt=o,mt=i,_r.transition=s}else t.current=n;if(ku&&(ku=!1,as=t,ch=A),s=t.pendingLanes,s===0&&(vs=null),qU(n.stateNode),sr(t,Zt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)A=e[n],r(A.value,{componentStack:A.stack,digest:A.digest});if(lh)throw lh=!1,t=lm,lm=null,t;return ch&1&&t.tag!==0&&Po(),s=t.pendingLanes,s&1?t===cm?Nl++:(Nl=0,cm=t):Nl=0,Gs(),null}function Po(){if(as!==null){var t=fE(ch),e=_r.transition,n=mt;try{if(_r.transition=null,mt=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,ch=0,lt&6)throw Error(Z(331));var A=lt;for(lt|=4,_e=t.current;_e!==null;){var s=_e,i=s.child;if(_e.flags&16){var o=s.deletions;if(o!==null){for(var a=0;a<o.length;a++){var c=o[a];for(_e=c;_e!==null;){var d=_e;switch(d.tag){case 0:case 11:case 15:kl(8,d,s)}var h=d.child;if(h!==null)h.return=d,_e=h;else for(;_e!==null;){d=_e;var f=d.sibling,m=d.return;if(E_(d),d===c){_e=null;break}if(f!==null){f.return=m,_e=f;break}_e=m}}}var B=s.alternate;if(B!==null){var v=B.child;if(v!==null){B.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}_e=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,_e=i;else e:for(;_e!==null;){if(s=_e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kl(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,_e=x;break e}_e=s.return}}var w=t.current;for(_e=w;_e!==null;){i=_e;var I=i.child;if(i.subtreeFlags&2064&&I!==null)I.return=i,_e=I;else e:for(i=w;_e!==null;){if(o=_e,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:rf(9,o)}}catch(U){$t(o,o.return,U)}if(o===i){_e=null;break e}var F=o.sibling;if(F!==null){F.return=o.return,_e=F;break e}_e=o.return}}if(lt=A,Gs(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(qh,t)}catch{}r=!0}return r}finally{mt=n,_r.transition=e}}return!1}function Cy(t,e,n){e=qo(n,e),e=f_(t,e,1),t=Bs(t,e,1),e=$n(),t!==null&&(Uc(t,1,e),sr(t,e))}function $t(t,e,n){if(t.tag===3)Cy(t,t,n);else for(;e!==null;){if(e.tag===3){Cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vs===null||!vs.has(r))){t=qo(n,t),t=g_(e,t,1),e=Bs(e,t,1),t=$n(),e!==null&&(Uc(e,1,t),sr(e,t));break}}e=e.return}}function xk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$n(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(_n&n)===n&&(an===4||an===3&&(_n&130023424)===_n&&500>Zt()-nw?yi(t,0):tw|=n),sr(t,e)}function N_(t,e){e===0&&(t.mode&1?(e=Cu,Cu<<=1,!(Cu&130023424)&&(Cu=4194304)):e=1);var n=$n();t=xA(t,e),t!==null&&(Uc(t,e,n),sr(t,n))}function Ck(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),N_(t,n)}function Ik(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,A=t.memoizedState;A!==null&&(n=A.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),N_(t,n)}var D_;D_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rr.current)Zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zn=!1,uk(t,e,n);Zn=!!(t.flags&131072)}else Zn=!1,Pt&&e.flags&1048576&&jE(e,th,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yd(t,e),t=e.pendingProps;var A=Go(e,jn.current);Do(e,n),A=q0(null,e,r,t,A,n);var s=J0();return e.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ar(r)?(s=!0,Zd(e)):s=!1,e.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,K0(e),A.updater=nf,e.stateNode=A,A._reactInternals=e,Yp(e,r,t,n),e=tm(null,e,r,!0,s,n)):(e.tag=0,Pt&&s&&P0(e),Kn(null,e,A,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yd(t,e),t=e.pendingProps,A=r._init,r=A(r._payload),e.type=r,A=e.tag=_k(r),t=Sr(r,t),A){case 0:e=em(null,e,r,t,n);break e;case 1:e=hy(null,e,r,t,n);break e;case 11:e=uy(null,e,r,t,n);break e;case 14:e=dy(null,e,r,Sr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Sr(r,A),em(t,e,r,A,n);case 1:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Sr(r,A),hy(t,e,r,A,n);case 3:e:{if(B_(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,A=s.element,zE(t,e),Ah(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){A=qo(Error(Z(423)),e),e=fy(t,e,r,n,A);break e}else if(r!==A){A=qo(Error(Z(424)),e),e=fy(t,e,r,n,A);break e}else for(dr=ws(e.stateNode.containerInfo.firstChild),hr=e,Pt=!0,Rr=null,n=KE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zo(),r===A){e=CA(t,e,n);break e}Kn(t,e,r,n)}e=e.child}return e;case 5:return $E(e),t===null&&qp(e),r=e.type,A=e.pendingProps,s=t!==null?t.memoizedProps:null,i=A.children,Kp(r,A)?i=null:s!==null&&Kp(r,s)&&(e.flags|=32),w_(t,e),Kn(t,e,i,n),e.child;case 6:return t===null&&qp(e),null;case 13:return v_(t,e,n);case 4:return G0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$o(e,null,r,n):Kn(t,e,r,n),e.child;case 11:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Sr(r,A),uy(t,e,r,A,n);case 7:return Kn(t,e,e.pendingProps,n),e.child;case 8:return Kn(t,e,e.pendingProps.children,n),e.child;case 12:return Kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,A=e.pendingProps,s=e.memoizedProps,i=A.value,_t(nh,r._currentValue),r._currentValue=i,s!==null)if(Lr(s.value,i)){if(s.children===A.children&&!rr.current){e=CA(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){i=s.child;for(var a=o.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=mA(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Jp(s.return,n,e),o.lanes|=n;break}a=a.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Z(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Jp(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Kn(t,e,A.children,n),e=e.child}return e;case 9:return A=e.type,r=e.pendingProps.children,Do(e,n),A=br(A),r=r(A),e.flags|=1,Kn(t,e,r,n),e.child;case 14:return r=e.type,A=Sr(r,e.pendingProps),A=Sr(r.type,A),dy(t,e,r,A,n);case 15:return p_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,A=e.pendingProps,A=e.elementType===r?A:Sr(r,A),yd(t,e),e.tag=1,Ar(r)?(t=!0,Zd(e)):t=!1,Do(e,n),h_(e,r,A),Yp(e,r,A,n),tm(null,e,r,!0,t,n);case 19:return y_(t,e,n);case 22:return m_(t,e,n)}throw Error(Z(156,e.tag))};function P_(t,e){return cE(t,e)}function Ek(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(t,e,n,r){return new Ek(t,e,n,r)}function iw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _k(t){if(typeof t=="function")return iw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===E0)return 11;if(t===_0)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=Cr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Id(t,e,n,r,A,s){var i=2;if(r=t,typeof t=="function")iw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Bo:return xi(n.children,A,s,e);case I0:i=8,A|=8;break;case xp:return t=Cr(12,n,e,A|2),t.elementType=xp,t.lanes=s,t;case Cp:return t=Cr(13,n,e,A),t.elementType=Cp,t.lanes=s,t;case Ip:return t=Cr(19,n,e,A),t.elementType=Ip,t.lanes=s,t;case $I:return sf(n,A,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case GI:i=10;break e;case zI:i=9;break e;case E0:i=11;break e;case _0:i=14;break e;case WA:i=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Cr(i,n,e,A),e.elementType=t,e.type=r,e.lanes=s,e}function xi(t,e,n,r){return t=Cr(7,t,r,e),t.lanes=n,t}function sf(t,e,n,r){return t=Cr(22,t,r,e),t.elementType=$I,t.lanes=n,t.stateNode={isHidden:!1},t}function Ng(t,e,n){return t=Cr(6,t,null,e),t.lanes=n,t}function Dg(t,e,n){return e=Cr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bk(t,e,n,r,A){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pg(0),this.expirationTimes=pg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pg(0),this.identifierPrefix=r,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function ow(t,e,n,r,A,s,i,o,a){return t=new bk(t,e,n,o,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},K0(s),t}function Tk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function L_(t){if(!t)return Us;t=t._reactInternals;e:{if(Gi(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ar(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Ar(n))return LE(t,n,e)}return e}function M_(t,e,n,r,A,s,i,o,a){return t=ow(n,r,!0,t,A,s,i,o,a),t.context=L_(null),n=t.current,r=$n(),A=ys(n),s=mA(r,A),s.callback=e??null,Bs(n,s,A),t.current.lanes=A,Uc(t,A,r),sr(t,r),t}function of(t,e,n,r){var A=e.current,s=$n(),i=ys(A);return n=L_(n),e.context===null?e.context=n:e.pendingContext=n,e=mA(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bs(A,e,i),t!==null&&(Dr(t,A,i,s),wd(t,A,i)),i}function dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Iy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function aw(t,e){Iy(t,e),(t=t.alternate)&&Iy(t,e)}function Fk(){return null}var j_=typeof reportError=="function"?reportError:function(t){console.error(t)};function lw(t){this._internalRoot=t}af.prototype.render=lw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));of(t,e,null,null)};af.prototype.unmount=lw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ui(function(){of(null,t,null,null)}),e[yA]=null}};function af(t){this._internalRoot=t}af.prototype.unstable_scheduleHydration=function(t){if(t){var e=mE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<XA.length&&e!==0&&e<XA[n].priority;n++);XA.splice(n,0,t),n===0&&BE(t)}};function cw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ey(){}function Qk(t,e,n,r,A){if(A){if(typeof r=="function"){var s=r;r=function(){var c=dh(i);s.call(c)}}var i=M_(e,r,t,0,null,!1,!1,"",Ey);return t._reactRootContainer=i,t[yA]=i.current,nc(t.nodeType===8?t.parentNode:t),Ui(),i}for(;A=t.lastChild;)t.removeChild(A);if(typeof r=="function"){var o=r;r=function(){var c=dh(a);o.call(c)}}var a=ow(t,0,!1,null,null,!1,!1,"",Ey);return t._reactRootContainer=a,t[yA]=a.current,nc(t.nodeType===8?t.parentNode:t),Ui(function(){of(e,a,n,r)}),a}function cf(t,e,n,r,A){var s=n._reactRootContainer;if(s){var i=s;if(typeof A=="function"){var o=A;A=function(){var a=dh(i);o.call(a)}}of(e,i,t,A)}else i=Qk(n,e,t,A,r);return dh(i)}gE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ul(e.pendingLanes);n!==0&&(F0(e,n|1),sr(e,Zt()),!(lt&6)&&(Jo=Zt()+500,Gs()))}break;case 13:Ui(function(){var r=xA(t,1);if(r!==null){var A=$n();Dr(r,t,1,A)}}),aw(t,1)}};Q0=function(t){if(t.tag===13){var e=xA(t,134217728);if(e!==null){var n=$n();Dr(e,t,134217728,n)}aw(t,134217728)}};pE=function(t){if(t.tag===13){var e=ys(t),n=xA(t,e);if(n!==null){var r=$n();Dr(n,t,e,r)}aw(t,e)}};mE=function(){return mt};wE=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};Rp=function(t,e,n){switch(e){case"input":if(bp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var A=Zh(r);if(!A)throw Error(Z(90));qI(r),bp(r,A)}}}break;case"textarea":XI(t,n);break;case"select":e=n.value,e!=null&&So(t,!!n.multiple,e,!1)}};AE=rw;sE=Ui;var Uk={usingClientEntryPoint:!1,Events:[kc,Co,Zh,nE,rE,rw]},Za={findFiberByHostInstance:mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sk={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:FA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aE(t),t===null?null:t.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||Fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{qh=Ru.inject(Sk),qr=Ru}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uk;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cw(e))throw Error(Z(200));return Tk(t,e,null,n)};mr.createRoot=function(t,e){if(!cw(t))throw Error(Z(299));var n=!1,r="",A=j_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(A=e.onRecoverableError)),e=ow(t,1,!1,null,null,n,!1,r,A),t[yA]=e.current,nc(t.nodeType===8?t.parentNode:t),new lw(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=aE(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return Ui(t)};mr.hydrate=function(t,e,n){if(!lf(e))throw Error(Z(200));return cf(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!cw(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,A=!1,s="",i=j_;if(n!=null&&(n.unstable_strictMode===!0&&(A=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=M_(e,null,t,1,n??null,A,!1,s,i),t[yA]=e.current,nc(t),r)for(t=0;t<r.length;t++)n=r[t],A=n._getVersion,A=A(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,A]:e.mutableSourceEagerHydrationData.push(n,A);return new af(e)};mr.render=function(t,e,n){if(!lf(e))throw Error(Z(200));return cf(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!lf(t))throw Error(Z(40));return t._reactRootContainer?(Ui(function(){cf(null,null,t,!1,function(){t._reactRootContainer=null,t[yA]=null})}),!0):!1};mr.unstable_batchedUpdates=rw;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lf(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return cf(t,e,n,!1,r)};mr.version="18.3.1-next-f1338f8080-20240426";function H_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H_)}catch(t){console.error(t)}}H_(),HI.exports=mr;var kk=HI.exports,_y=kk;vp.createRoot=_y.createRoot,vp.hydrateRoot=_y.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const by="popstate";function Rk(t){t===void 0&&(t={});function e(A,s){let{pathname:i="/",search:o="",hash:a=""}=zi(A.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),hm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(A,s){let i=A.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let a=A.location.href,c=a.indexOf("#");o=c===-1?a:a.slice(0,c)}return o+"#"+(typeof s=="string"?s:hh(s))}function r(A,s){uf(A.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Dk(e,n,r,t)}function Vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nk(){return Math.random().toString(36).substr(2,8)}function Ty(t,e){return{usr:t.state,key:t.key,idx:e}}function hm(t,e,n,r){return n===void 0&&(n=null),uc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zi(e):e,{state:n,key:e&&e.key||r||Nk()})}function hh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Dk(t,e,n,r){r===void 0&&(r={});let{window:A=document.defaultView,v5Compat:s=!1}=r,i=A.history,o=ls.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(uc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=ls.Pop;let _=d(),x=_==null?null:_-c;c=_,a&&a({action:o,location:v.location,delta:x})}function f(_,x){o=ls.Push;let w=hm(v.location,_,x);n&&n(w,_),c=d()+1;let I=Ty(w,c),F=v.createHref(w);try{i.pushState(I,"",F)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;A.location.assign(F)}s&&a&&a({action:o,location:v.location,delta:1})}function m(_,x){o=ls.Replace;let w=hm(v.location,_,x);n&&n(w,_),c=d();let I=Ty(w,c),F=v.createHref(w);i.replaceState(I,"",F),s&&a&&a({action:o,location:v.location,delta:0})}function B(_){let x=A.location.origin!=="null"?A.location.origin:A.location.href,w=typeof _=="string"?_:hh(_);return w=w.replace(/ $/,"%20"),Vt(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let v={get action(){return o},get location(){return t(A,i)},listen(_){if(a)throw new Error("A history only accepts one active listener");return A.addEventListener(by,h),a=_,()=>{A.removeEventListener(by,h),a=null}},createHref(_){return e(A,_)},createURL:B,encodeLocation(_){let x=B(_);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(_){return i.go(_)}};return v}var Fy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Fy||(Fy={}));function Pk(t,e,n){return n===void 0&&(n="/"),Lk(t,e,n)}function Lk(t,e,n,r){let A=typeof e=="string"?zi(e):e,s=Xo(A.pathname||"/",n);if(s==null)return null;let i=O_(t);Mk(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let c=Jk(s);o=Wk(i[a],c)}return o}function O_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let A=(s,i,o)=>{let a={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};a.relativePath.startsWith("/")&&(Vt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=Cs([r,a.relativePath]),d=n.concat(a);s.children&&s.children.length>0&&(Vt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),O_(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:zk(c,s.index),routesMeta:d})};return t.forEach((s,i)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))A(s,i);else for(let a of V_(s.path))A(s,i,a)}),e}function V_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,A=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return A?[s,""]:[s];let i=V_(r.join("/")),o=[];return o.push(...i.map(a=>a===""?s:[s,a].join("/"))),A&&o.push(...i),o.map(a=>t.startsWith("/")&&a===""?"/":a)}function Mk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$k(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jk=/^:[\w-]+$/,Hk=3,Ok=2,Vk=1,Kk=10,Gk=-2,Qy=t=>t==="*";function zk(t,e){let n=t.split("/"),r=n.length;return n.some(Qy)&&(r+=Gk),e&&(r+=Ok),n.filter(A=>!Qy(A)).reduce((A,s)=>A+(jk.test(s)?Hk:s===""?Vk:Kk),r)}function $k(t,e){return t.length===e.length&&t.slice(0,-1).every((r,A)=>r===e[A])?t[t.length-1]-e[e.length-1]:0}function Wk(t,e,n){let{routesMeta:r}=t,A={},s="/",i=[];for(let o=0;o<r.length;++o){let a=r[o],c=o===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=fm({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(A,h.params),i.push({params:A,pathname:Cs([s,h.pathname]),pathnameBase:t2(Cs([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Cs([s,h.pathnameBase]))}return i}function fm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qk(t.path,t.caseSensitive,t.end),A=e.match(n);if(!A)return null;let s=A[0],i=s.replace(/(.)\/+$/,"$1"),o=A.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let v=o[h]||"";i=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const B=o[h];return m&&!B?c[f]=void 0:c[f]=(B||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function qk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),uf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],A="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,a)=>(r.push({paramName:o,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),A+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?A+="\\/*$":t!==""&&t!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,e?void 0:"i"),r]}function Jk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Xk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yk=t=>Xk.test(t);function Zk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:A=""}=typeof t=="string"?zi(t):t,s;if(n)if(Yk(n))s=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),uf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?s=Uy(n.substring(1),"/"):s=Uy(n,e)}else s=e;return{pathname:s,search:n2(r),hash:r2(A)}}function Uy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(A=>{A===".."?n.length>1&&n.pop():A!=="."&&n.push(A)}),n.length>1?n.join("/"):"/"}function Pg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function uw(t,e){let n=e2(t);return e?n.map((r,A)=>A===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function dw(t,e,n,r){r===void 0&&(r=!1);let A;typeof t=="string"?A=zi(t):(A=uc({},t),Vt(!A.pathname||!A.pathname.includes("?"),Pg("?","pathname","search",A)),Vt(!A.pathname||!A.pathname.includes("#"),Pg("#","pathname","hash",A)),Vt(!A.search||!A.search.includes("#"),Pg("#","search","hash",A)));let s=t===""||A.pathname==="",i=s?"/":A.pathname,o;if(i==null)o=n;else{let h=e.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;A.pathname=f.join("/")}o=h>=0?e[h]:"/"}let a=Zk(A,o),c=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const Cs=t=>t.join("/").replace(/\/\/+/g,"/"),t2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),n2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,r2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function A2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const K_=["post","put","patch","delete"];new Set(K_);const s2=["get",...K_];new Set(s2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dc(){return dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dc.apply(this,arguments)}const df=k.createContext(null),G_=k.createContext(null),QA=k.createContext(null),hf=k.createContext(null),UA=k.createContext({outlet:null,matches:[],isDataRoute:!1}),z_=k.createContext(null);function i2(t,e){let{relative:n}=e===void 0?{}:e;Ba()||Vt(!1);let{basename:r,navigator:A}=k.useContext(QA),{hash:s,pathname:i,search:o}=ff(t,{relative:n}),a=i;return r!=="/"&&(a=i==="/"?r:Cs([r,i])),A.createHref({pathname:a,search:o,hash:s})}function Ba(){return k.useContext(hf)!=null}function zs(){return Ba()||Vt(!1),k.useContext(hf).location}function $_(t){k.useContext(QA).static||k.useLayoutEffect(t)}function Nc(){let{isDataRoute:t}=k.useContext(UA);return t?y2():o2()}function o2(){Ba()||Vt(!1);let t=k.useContext(df),{basename:e,future:n,navigator:r}=k.useContext(QA),{matches:A}=k.useContext(UA),{pathname:s}=zs(),i=JSON.stringify(uw(A,n.v7_relativeSplatPath)),o=k.useRef(!1);return $_(()=>{o.current=!0}),k.useCallback(function(c,d){if(d===void 0&&(d={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let h=dw(c,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Cs([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,i,s,t])}const a2=k.createContext(null);function l2(t){let e=k.useContext(UA).outlet;return e&&k.createElement(a2.Provider,{value:t},e)}function ff(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=k.useContext(QA),{matches:A}=k.useContext(UA),{pathname:s}=zs(),i=JSON.stringify(uw(A,r.v7_relativeSplatPath));return k.useMemo(()=>dw(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function c2(t,e){return u2(t,e)}function u2(t,e,n,r){Ba()||Vt(!1);let{navigator:A}=k.useContext(QA),{matches:s}=k.useContext(UA),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=zs(),d;if(e){var h;let _=typeof e=="string"?zi(e):e;a==="/"||(h=_.pathname)!=null&&h.startsWith(a)||Vt(!1),d=_}else d=c;let f=d.pathname||"/",m=f;if(a!=="/"){let _=a.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let B=Pk(t,{pathname:m}),v=p2(B&&B.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Cs([a,A.encodeLocation?A.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:Cs([a,A.encodeLocation?A.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&v?k.createElement(hf.Provider,{value:{location:dc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ls.Pop}},v):v}function d2(){let t=v2(),e=A2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,A={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:A},n):null,null)}const h2=k.createElement(d2,null);class f2 extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(UA.Provider,{value:this.props.routeContext},k.createElement(z_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function g2(t){let{routeContext:e,match:n,children:r}=t,A=k.useContext(df);return A&&A.static&&A.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(UA.Provider,{value:e},r)}function p2(t,e,n,r){var A;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(A=n)==null?void 0:A.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||Vt(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:m}=n,B=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||B){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,B=!1,v=null,_=null;n&&(m=o&&h.route.id?o[h.route.id]:void 0,v=h.route.errorElement||h2,a&&(c<0&&f===0?(x2("route-fallback"),B=!0,_=null):c===f&&(B=!0,_=h.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,f+1)),w=()=>{let I;return m?I=v:B?I=_:h.route.Component?I=k.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,k.createElement(g2,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:I})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?k.createElement(f2,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var W_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(W_||{}),q_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(q_||{});function m2(t){let e=k.useContext(df);return e||Vt(!1),e}function w2(t){let e=k.useContext(G_);return e||Vt(!1),e}function B2(t){let e=k.useContext(UA);return e||Vt(!1),e}function J_(t){let e=B2(),n=e.matches[e.matches.length-1];return n.route.id||Vt(!1),n.route.id}function v2(){var t;let e=k.useContext(z_),n=w2(),r=J_();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function y2(){let{router:t}=m2(W_.UseNavigateStable),e=J_(q_.UseNavigateStable),n=k.useRef(!1);return $_(()=>{n.current=!0}),k.useCallback(function(A,s){s===void 0&&(s={}),n.current&&(typeof A=="number"?t.navigate(A):t.navigate(A,dc({fromRouteId:e},s)))},[t,e])}const Sy={};function x2(t,e,n){Sy[t]||(Sy[t]=!0)}function C2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function fh(t){let{to:e,replace:n,state:r,relative:A}=t;Ba()||Vt(!1);let{future:s,static:i}=k.useContext(QA),{matches:o}=k.useContext(UA),{pathname:a}=zs(),c=Nc(),d=dw(e,uw(o,s.v7_relativeSplatPath),a,A==="path"),h=JSON.stringify(d);return k.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:A}),[c,h,A,n,r]),null}function I2(t){return l2(t.context)}function or(t){Vt(!1)}function E2(t){let{basename:e="/",children:n=null,location:r,navigationType:A=ls.Pop,navigator:s,static:i=!1,future:o}=t;Ba()&&Vt(!1);let a=e.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:a,navigator:s,static:i,future:dc({v7_relativeSplatPath:!1},o)}),[a,o,s,i]);typeof r=="string"&&(r=zi(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:B="default"}=r,v=k.useMemo(()=>{let _=Xo(d,a);return _==null?null:{location:{pathname:_,search:h,hash:f,state:m,key:B},navigationType:A}},[a,d,h,f,m,B,A]);return v==null?null:k.createElement(QA.Provider,{value:c},k.createElement(hf.Provider,{children:n,value:v}))}function _2(t){let{children:e,location:n}=t;return c2(gm(e),n)}new Promise(()=>{});function gm(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,A)=>{if(!k.isValidElement(r))return;let s=[...e,A];if(r.type===k.Fragment){n.push.apply(n,gm(r.props.children,s));return}r.type!==or&&Vt(!1),!r.props.index||!r.props.children||Vt(!1);let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=gm(r.props.children,s)),n.push(i)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gh.apply(this,arguments)}function X_(t,e){if(t==null)return{};var n={},r=Object.keys(t),A,s;for(s=0;s<r.length;s++)A=r[s],!(e.indexOf(A)>=0)&&(n[A]=t[A]);return n}function b2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T2(t,e){return t.button===0&&(!e||e==="_self")&&!b2(t)}function pm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(A=>[n,A]):[[n,r]])},[]))}function F2(t,e){let n=pm(t);return e&&e.forEach((r,A)=>{n.has(A)||e.getAll(A).forEach(s=>{n.append(A,s)})}),n}const Q2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],U2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],S2="6";try{window.__reactRouterVersion=S2}catch{}const k2=k.createContext({isTransitioning:!1}),R2="startTransition",ky=xU[R2];function N2(t){let{basename:e,children:n,future:r,window:A}=t,s=k.useRef();s.current==null&&(s.current=Rk({window:A,v5Compat:!0}));let i=s.current,[o,a]=k.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=k.useCallback(h=>{c&&ky?ky(()=>a(h)):a(h)},[a,c]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.useEffect(()=>C2(r),[r]),k.createElement(E2,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const D2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L2=k.forwardRef(function(e,n){let{onClick:r,relative:A,reloadDocument:s,replace:i,state:o,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=X_(e,Q2),{basename:m}=k.useContext(QA),B,v=!1;if(typeof c=="string"&&P2.test(c)&&(B=c,D2))try{let I=new URL(window.location.href),F=c.startsWith("//")?new URL(I.protocol+c):new URL(c),U=Xo(F.pathname,m);F.origin===I.origin&&U!=null?c=U+F.search+F.hash:v=!0}catch{}let _=i2(c,{relative:A}),x=H2(c,{replace:i,state:o,target:a,preventScrollReset:d,relative:A,viewTransition:h});function w(I){r&&r(I),I.defaultPrevented||x(I)}return k.createElement("a",gh({},f,{href:B||_,onClick:v||s?r:w,ref:n,target:a}))}),M2=k.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:A=!1,className:s="",end:i=!1,style:o,to:a,viewTransition:c,children:d}=e,h=X_(e,U2),f=ff(a,{relative:h.relative}),m=zs(),B=k.useContext(G_),{navigator:v,basename:_}=k.useContext(QA),x=B!=null&&V2(f)&&c===!0,w=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,I=m.pathname,F=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;A||(I=I.toLowerCase(),F=F?F.toLowerCase():null,w=w.toLowerCase()),F&&_&&(F=Xo(F,_)||F);const U=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let R=I===w||!i&&I.startsWith(w)&&I.charAt(U)==="/",y=F!=null&&(F===w||!i&&F.startsWith(w)&&F.charAt(w.length)==="/"),C={isActive:R,isPending:y,isTransitioning:x},E=R?r:void 0,Q;typeof s=="function"?Q=s(C):Q=[s,R?"active":null,y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(C):o;return k.createElement(L2,gh({},h,{"aria-current":E,className:Q,ref:n,style:N,to:a,viewTransition:c}),typeof d=="function"?d(C):d)});var mm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mm||(mm={}));var Ry;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ry||(Ry={}));function j2(t){let e=k.useContext(df);return e||Vt(!1),e}function H2(t,e){let{target:n,replace:r,state:A,preventScrollReset:s,relative:i,viewTransition:o}=e===void 0?{}:e,a=Nc(),c=zs(),d=ff(t,{relative:i});return k.useCallback(h=>{if(T2(h,n)){h.preventDefault();let f=r!==void 0?r:hh(c)===hh(d);a(t,{replace:f,state:A,preventScrollReset:s,relative:i,viewTransition:o})}},[c,a,d,r,A,n,t,s,i,o])}function O2(t){let e=k.useRef(pm(t)),n=k.useRef(!1),r=zs(),A=k.useMemo(()=>F2(r.search,n.current?null:e.current),[r.search]),s=Nc(),i=k.useCallback((o,a)=>{const c=pm(typeof o=="function"?o(A):o);n.current=!0,s("?"+c,a)},[s,A]);return[A,i]}function V2(t,e){e===void 0&&(e={});let n=k.useContext(k2);n==null&&Vt(!1);let{basename:r}=j2(mm.useViewTransitionState),A=ff(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Xo(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Xo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fm(A.pathname,i)!=null||fm(A.pathname,s)!=null}var ue=(t=>(t.First="1 ",t.Second="2 ",t))(ue||{}),ur=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(ur||{});const Rn=["","","","",""],zr={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},Ny=["","","/","","","",""," "],Y_=[{shift:ue.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ue.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ue.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ue.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ue.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ue.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ue.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ue.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ue.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ue.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ue.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ue.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ue.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ue.Second,period:6,start:"18:50",end:"19:35",day:"default"}],Gn={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ue.First,studentsCount:25},{id:"c2",name:"6",shift:ue.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2ndHalf:[],substitutions:[],bellSchedule:Y_,settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:""}},K2="modulepreload",G2=function(t){return"/zamenygymn/"+t},Dy={},z2=function(e,n,r){let A=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));A=Promise.allSettled(n.map(a=>{if(a=G2(a),a in Dy)return;Dy[a]=!0;const c=a.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":K2,c||(h.as="script"),h.crossOrigin="",h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return A.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var Py={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let A=t.charCodeAt(r);A<128?e[n++]=A:A<2048?(e[n++]=A>>6|192,e[n++]=A&63|128):(A&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(A=65536+((A&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=A>>18|240,e[n++]=A>>12&63|128,e[n++]=A>>6&63|128,e[n++]=A&63|128):(e[n++]=A>>12|224,e[n++]=A>>6&63|128,e[n++]=A&63|128)}return e},$2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const A=t[n++];if(A<128)e[r++]=String.fromCharCode(A);else if(A>191&&A<224){const s=t[n++];e[r++]=String.fromCharCode((A&31)<<6|s&63)}else if(A>239&&A<365){const s=t[n++],i=t[n++],o=t[n++],a=((A&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],i=t[n++];e[r++]=String.fromCharCode((A&15)<<12|(s&63)<<6|i&63)}}return e.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let A=0;A<t.length;A+=3){const s=t[A],i=A+1<t.length,o=i?t[A+1]:0,a=A+2<t.length,c=a?t[A+2]:0,d=s>>2,h=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,m=c&63;a||(m=64,i||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Z_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let A=0;A<t.length;){const s=n[t.charAt(A++)],o=A<t.length?n[t.charAt(A)]:0;++A;const c=A<t.length?n[t.charAt(A)]:64;++A;const h=A<t.length?n[t.charAt(A)]:64;if(++A,s==null||o==null||c==null||h==null)throw new W2;const f=s<<2|o>>4;if(r.push(f),c!==64){const m=o<<4&240|c>>2;if(r.push(m),h!==64){const B=c<<6&192|h;r.push(B)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class W2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q2=function(t){const e=Z_(t);return eb.encodeByteArray(e,!0)},ph=function(t){return q2(t).replace(/\./g,"")},tb=function(t){try{return eb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=()=>J2().__FIREBASE_DEFAULTS__,Y2=()=>{if(typeof process>"u"||typeof Py>"u")return;const t=Py.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Z2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tb(t[1]);return e&&JSON.parse(e)},gf=()=>{try{return X2()||Y2()||Z2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nb=t=>{var e,n;return(n=(e=gf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eR=t=>{const e=nb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rb=()=>{var t;return(t=gf())===null||t===void 0?void 0:t.config},Ab=t=>{var e;return(e=gf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",A=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:A,exp:A+3600,auth_time:A,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ph(JSON.stringify(n)),ph(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function AR(){var t;const e=(t=gf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aR(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sb(){return!AR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ib(){try{return typeof indexedDB=="object"}catch{return!1}}function lR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",A=self.indexedDB.open(r);A.onsuccess=()=>{A.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},A.onupgradeneeded=()=>{n=!1},A.onerror=()=>{var s;e(((s=A.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="FirebaseError";class SA extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cR,Object.setPrototypeOf(this,SA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},A=`${this.service}/${e}`,s=this.errors[e],i=s?uR(s,r):"Error",o=`${this.serviceName}: ${i} (${A}).`;return new SA(A,o,r)}}function uR(t,e){return t.replace(dR,(n,r)=>{const A=e[r];return A!=null?String(A):`<${r}?>`})}const dR=/\{\$([^}]+)}/g;function hR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ss(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const A of n){if(!r.includes(A))return!1;const s=t[A],i=e[A];if(Ly(s)&&Ly(i)){if(!Ss(s,i))return!1}else if(s!==i)return!1}for(const A of r)if(!n.includes(A))return!1;return!0}function Ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(A=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(A))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[A,s]=r.split("=");e[decodeURIComponent(A)]=decodeURIComponent(s)}}),e}function fl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fR(t,e){const n=new gR(t,e);return n.subscribe.bind(n)}class gR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let A;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pR(e,["next","error","complete"])?A=e:A={next:e,error:n,complete:r},A.next===void 0&&(A.next=Lg),A.error===void 0&&(A.error=Lg),A.complete===void 0&&(A.complete=Lg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?A.error(this.finalError):A.complete()}catch{}}),this.observers.push(A),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class Si{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:n});A&&r.resolve(A)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),A=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(A)return null;throw s}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BR(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const A=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:A});r.resolve(s)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const A=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&i.resolve(A)}return A}onInit(e,n){var r;const A=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(A))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(A,s);const i=this.instances.get(A);return i&&e(i,A),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const A of r)try{A(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wR(t){return t===ci?void 0:t}function BR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const yR={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},xR=rt.INFO,CR={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},IR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),A=CR[e];if(A)console[A](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let hw=class{constructor(e){this.name=e,this._logLevel=xR,this._logHandler=IR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}};const ER=(t,e)=>e.some(n=>t instanceof n);let My,jy;function _R(){return My||(My=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bR(){return jy||(jy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ob=new WeakMap,wm=new WeakMap,ab=new WeakMap,Mg=new WeakMap,fw=new WeakMap;function TR(t){const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(Is(t.result)),A()},i=()=>{r(t.error),A()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&ob.set(n,t)}).catch(()=>{}),fw.set(e,t),e}function FR(t){if(wm.has(t))return;const e=new Promise((n,r)=>{const A=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),A()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),A()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});wm.set(t,e)}let Bm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ab.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QR(t){Bm=t(Bm)}function UR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jg(this),e,...n);return ab.set(r,e.sort?e.sort():[e]),Is(r)}:bR().includes(t)?function(...e){return t.apply(jg(this),e),Is(ob.get(this))}:function(...e){return Is(t.apply(jg(this),e))}}function SR(t){return typeof t=="function"?UR(t):(t instanceof IDBTransaction&&FR(t),ER(t,_R())?new Proxy(t,Bm):t)}function Is(t){if(t instanceof IDBRequest)return TR(t);if(Mg.has(t))return Mg.get(t);const e=SR(t);return e!==t&&(Mg.set(t,e),fw.set(e,t)),e}const jg=t=>fw.get(t);function kR(t,e,{blocked:n,upgrade:r,blocking:A,terminated:s}={}){const i=indexedDB.open(t,e),o=Is(i);return r&&i.addEventListener("upgradeneeded",a=>{r(Is(i.result),a.oldVersion,a.newVersion,Is(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),o.then(a=>{s&&a.addEventListener("close",()=>s()),A&&a.addEventListener("versionchange",c=>A(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const RR=["get","getKey","getAll","getAllKeys","count"],NR=["put","add","delete","clear"],Hg=new Map;function Hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hg.get(e))return Hg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,A=NR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(A||RR.includes(n)))return;const s=async function(i,...o){const a=this.transaction(i,A?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),A&&a.done]))[0]};return Hg.set(e,s),s}QR(t=>({...t,get:(e,n,r)=>Hy(e,n)||t.get(e,n,r),has:(e,n)=>!!Hy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vm="@firebase/app",Oy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new hw("@firebase/app"),LR="@firebase/app-compat",MR="@firebase/analytics-compat",jR="@firebase/analytics",HR="@firebase/app-check-compat",OR="@firebase/app-check",VR="@firebase/auth",KR="@firebase/auth-compat",GR="@firebase/database",zR="@firebase/data-connect",$R="@firebase/database-compat",WR="@firebase/functions",qR="@firebase/functions-compat",JR="@firebase/installations",XR="@firebase/installations-compat",YR="@firebase/messaging",ZR="@firebase/messaging-compat",eN="@firebase/performance",tN="@firebase/performance-compat",nN="@firebase/remote-config",rN="@firebase/remote-config-compat",AN="@firebase/storage",sN="@firebase/storage-compat",iN="@firebase/firestore",oN="@firebase/vertexai-preview",aN="@firebase/firestore-compat",lN="firebase",cN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="[DEFAULT]",uN={[vm]:"fire-core",[LR]:"fire-core-compat",[jR]:"fire-analytics",[MR]:"fire-analytics-compat",[OR]:"fire-app-check",[HR]:"fire-app-check-compat",[VR]:"fire-auth",[KR]:"fire-auth-compat",[GR]:"fire-rtdb",[zR]:"fire-data-connect",[$R]:"fire-rtdb-compat",[WR]:"fire-fn",[qR]:"fire-fn-compat",[JR]:"fire-iid",[XR]:"fire-iid-compat",[YR]:"fire-fcm",[ZR]:"fire-fcm-compat",[eN]:"fire-perf",[tN]:"fire-perf-compat",[nN]:"fire-rc",[rN]:"fire-rc-compat",[AN]:"fire-gcs",[sN]:"fire-gcs-compat",[iN]:"fire-fst",[aN]:"fire-fst-compat",[oN]:"fire-vertex","fire-js":"fire-js",[lN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,dN=new Map,ym=new Map;function Vy(t,e){try{t.container.addComponent(e)}catch(n){IA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yo(t){const e=t.name;if(ym.has(e))return IA.debug(`There were multiple attempts to register component ${e}.`),!1;ym.set(e,t);for(const n of hc.values())Vy(n,t);for(const n of dN.values())Vy(n,t);return!0}function Lc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hN(t,e,n=mh){Lc(t,e).clearInstance(n)}function dA(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Dc("app","Firebase",fN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=cN;function lb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mh,automaticDataCollectionEnabled:!1},e),A=r.name;if(typeof A!="string"||!A)throw Es.create("bad-app-name",{appName:String(A)});if(n||(n=rb()),!n)throw Es.create("no-options");const s=hc.get(A);if(s){if(Ss(n,s.options)&&Ss(r,s.config))return s;throw Es.create("duplicate-app",{appName:A})}const i=new vR(A);for(const a of ym.values())i.addComponent(a);const o=new gN(n,r,i);return hc.set(A,o),o}function gw(t=mh){const e=hc.get(t);if(!e&&t===mh&&rb())return lb();if(!e)throw Es.create("no-app",{appName:t});return e}function pN(){return Array.from(hc.values())}function _s(t,e,n){var r;let A=(r=uN[t])!==null&&r!==void 0?r:t;n&&(A+=`-${n}`);const s=A.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${A}" with version "${e}":`];s&&o.push(`library name "${A}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),IA.warn(o.join(" "));return}Yo(new Si(`${A}-version`,()=>({library:A,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="firebase-heartbeat-database",wN=1,fc="firebase-heartbeat-store";let Og=null;function cb(){return Og||(Og=kR(mN,wN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),Og}async function BN(t){try{const n=(await cb()).transaction(fc),r=await n.objectStore(fc).get(ub(t));return await n.done,r}catch(e){if(e instanceof SA)IA.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});IA.warn(n.message)}}}async function Ky(t,e){try{const r=(await cb()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,ub(t)),await r.done}catch(n){if(n instanceof SA)IA.warn(n.message);else{const r=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});IA.warn(r.message)}}}function ub(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1024,yN=30*24*60*60*1e3;class xN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const A=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:A}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=yN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){IA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Gy(),{heartbeatsToSend:r,unsentEntries:A}=CN(this._heartbeatsCache.heartbeats),s=ph(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return IA.warn(n),""}}}function Gy(){return new Date().toISOString().substring(0,10)}function CN(t,e=vN){const n=[];let r=t.slice();for(const A of t){const s=n.find(i=>i.agent===A.agent);if(s){if(s.dates.push(A.date),zy(n)>e){s.dates.pop();break}}else if(n.push({agent:A.agent,dates:[A.date]}),zy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ib()?lR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const A=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...e.heartbeats]})}else return}}function zy(t){return ph(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){Yo(new Si("platform-logger",e=>new DR(e),"PRIVATE")),Yo(new Si("heartbeat",e=>new xN(e),"PRIVATE")),_s(vm,Oy,t),_s(vm,Oy,"esm2017"),_s("fire-js","")}EN("");var _N="firebase",bN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(_N,bN,"app");var $y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ci,db;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,C){function E(){}E.prototype=C.prototype,y.D=C.prototype,y.prototype=new E,y.prototype.constructor=y,y.C=function(Q,N,L){for(var T=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)T[Pe-2]=arguments[Pe];return C.prototype[N].apply(Q,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function A(y,C,E){E||(E=0);var Q=Array(16);if(typeof C=="string")for(var N=0;16>N;++N)Q[N]=C.charCodeAt(E++)|C.charCodeAt(E++)<<8|C.charCodeAt(E++)<<16|C.charCodeAt(E++)<<24;else for(N=0;16>N;++N)Q[N]=C[E++]|C[E++]<<8|C[E++]<<16|C[E++]<<24;C=y.g[0],E=y.g[1],N=y.g[2];var L=y.g[3],T=C+(L^E&(N^L))+Q[0]+3614090360&4294967295;C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+Q[1]+3905402710&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+Q[2]+606105819&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+Q[3]+3250441966&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(L^E&(N^L))+Q[4]+4118548399&4294967295,C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+Q[5]+1200080426&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+Q[6]+2821735955&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+Q[7]+4249261313&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(L^E&(N^L))+Q[8]+1770035416&4294967295,C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+Q[9]+2336552879&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+Q[10]+4294925233&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+Q[11]+2304563134&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(L^E&(N^L))+Q[12]+1804603682&4294967295,C=E+(T<<7&4294967295|T>>>25),T=L+(N^C&(E^N))+Q[13]+4254626195&4294967295,L=C+(T<<12&4294967295|T>>>20),T=N+(E^L&(C^E))+Q[14]+2792965006&4294967295,N=L+(T<<17&4294967295|T>>>15),T=E+(C^N&(L^C))+Q[15]+1236535329&4294967295,E=N+(T<<22&4294967295|T>>>10),T=C+(N^L&(E^N))+Q[1]+4129170786&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+Q[6]+3225465664&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+Q[11]+643717713&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+Q[0]+3921069994&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(E^N))+Q[5]+3593408605&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+Q[10]+38016083&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+Q[15]+3634488961&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+Q[4]+3889429448&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(E^N))+Q[9]+568446438&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+Q[14]+3275163606&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+Q[3]+4107603335&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+Q[8]+1163531501&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(N^L&(E^N))+Q[13]+2850285829&4294967295,C=E+(T<<5&4294967295|T>>>27),T=L+(E^N&(C^E))+Q[2]+4243563512&4294967295,L=C+(T<<9&4294967295|T>>>23),T=N+(C^E&(L^C))+Q[7]+1735328473&4294967295,N=L+(T<<14&4294967295|T>>>18),T=E+(L^C&(N^L))+Q[12]+2368359562&4294967295,E=N+(T<<20&4294967295|T>>>12),T=C+(E^N^L)+Q[5]+4294588738&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+Q[8]+2272392833&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+Q[11]+1839030562&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+Q[14]+4259657740&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^L)+Q[1]+2763975236&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+Q[4]+1272893353&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+Q[7]+4139469664&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+Q[10]+3200236656&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^L)+Q[13]+681279174&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+Q[0]+3936430074&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+Q[3]+3572445317&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+Q[6]+76029189&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(E^N^L)+Q[9]+3654602809&4294967295,C=E+(T<<4&4294967295|T>>>28),T=L+(C^E^N)+Q[12]+3873151461&4294967295,L=C+(T<<11&4294967295|T>>>21),T=N+(L^C^E)+Q[15]+530742520&4294967295,N=L+(T<<16&4294967295|T>>>16),T=E+(N^L^C)+Q[2]+3299628645&4294967295,E=N+(T<<23&4294967295|T>>>9),T=C+(N^(E|~L))+Q[0]+4096336452&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+Q[7]+1126891415&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+Q[14]+2878612391&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+Q[5]+4237533241&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~L))+Q[12]+1700485571&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+Q[3]+2399980690&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+Q[10]+4293915773&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+Q[1]+2240044497&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~L))+Q[8]+1873313359&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+Q[15]+4264355552&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+Q[6]+2734768916&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+Q[13]+1309151649&4294967295,E=N+(T<<21&4294967295|T>>>11),T=C+(N^(E|~L))+Q[4]+4149444226&4294967295,C=E+(T<<6&4294967295|T>>>26),T=L+(E^(C|~N))+Q[11]+3174756917&4294967295,L=C+(T<<10&4294967295|T>>>22),T=N+(C^(L|~E))+Q[2]+718787259&4294967295,N=L+(T<<15&4294967295|T>>>17),T=E+(L^(N|~C))+Q[9]+3951481745&4294967295,y.g[0]=y.g[0]+C&4294967295,y.g[1]=y.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,y.g[2]=y.g[2]+N&4294967295,y.g[3]=y.g[3]+L&4294967295}r.prototype.u=function(y,C){C===void 0&&(C=y.length);for(var E=C-this.blockSize,Q=this.B,N=this.h,L=0;L<C;){if(N==0)for(;L<=E;)A(this,y,L),L+=this.blockSize;if(typeof y=="string"){for(;L<C;)if(Q[N++]=y.charCodeAt(L++),N==this.blockSize){A(this,Q),N=0;break}}else for(;L<C;)if(Q[N++]=y[L++],N==this.blockSize){A(this,Q),N=0;break}}this.h=N,this.o+=C},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var C=1;C<y.length-8;++C)y[C]=0;var E=8*this.o;for(C=y.length-8;C<y.length;++C)y[C]=E&255,E/=256;for(this.u(y),y=Array(16),C=E=0;4>C;++C)for(var Q=0;32>Q;Q+=8)y[E++]=this.g[C]>>>Q&255;return y};function s(y,C){var E=o;return Object.prototype.hasOwnProperty.call(E,y)?E[y]:E[y]=C(y)}function i(y,C){this.h=C;for(var E=[],Q=!0,N=y.length-1;0<=N;N--){var L=y[N]|0;Q&&L==C||(E[N]=L,Q=!1)}this.g=E}var o={};function a(y){return-128<=y&&128>y?s(y,function(C){return new i([C|0],0>C?-1:0)}):new i([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return h;if(0>y)return _(c(-y));for(var C=[],E=1,Q=0;y>=E;Q++)C[Q]=y/E|0,E*=4294967296;return new i(C,0)}function d(y,C){if(y.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y.charAt(0)=="-")return _(d(y.substring(1),C));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(C,8)),Q=h,N=0;N<y.length;N+=8){var L=Math.min(8,y.length-N),T=parseInt(y.substring(N,N+L),C);8>L?(L=c(Math.pow(C,L)),Q=Q.j(L).add(c(T))):(Q=Q.j(E),Q=Q.add(c(T)))}return Q}var h=a(0),f=a(1),m=a(16777216);t=i.prototype,t.m=function(){if(v(this))return-_(this).m();for(var y=0,C=1,E=0;E<this.g.length;E++){var Q=this.i(E);y+=(0<=Q?Q:4294967296+Q)*C,C*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(B(this))return"0";if(v(this))return"-"+_(this).toString(y);for(var C=c(Math.pow(y,6)),E=this,Q="";;){var N=F(E,C).g;E=x(E,N.j(C));var L=((0<E.g.length?E.g[0]:E.h)>>>0).toString(y);if(E=N,B(E))return L+Q;for(;6>L.length;)L="0"+L;Q=L+Q}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function B(y){if(y.h!=0)return!1;for(var C=0;C<y.g.length;C++)if(y.g[C]!=0)return!1;return!0}function v(y){return y.h==-1}t.l=function(y){return y=x(this,y),v(y)?-1:B(y)?0:1};function _(y){for(var C=y.g.length,E=[],Q=0;Q<C;Q++)E[Q]=~y.g[Q];return new i(E,~y.h).add(f)}t.abs=function(){return v(this)?_(this):this},t.add=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],Q=0,N=0;N<=C;N++){var L=Q+(this.i(N)&65535)+(y.i(N)&65535),T=(L>>>16)+(this.i(N)>>>16)+(y.i(N)>>>16);Q=T>>>16,L&=65535,T&=65535,E[N]=T<<16|L}return new i(E,E[E.length-1]&-2147483648?-1:0)};function x(y,C){return y.add(_(C))}t.j=function(y){if(B(this)||B(y))return h;if(v(this))return v(y)?_(this).j(_(y)):_(_(this).j(y));if(v(y))return _(this.j(_(y)));if(0>this.l(m)&&0>y.l(m))return c(this.m()*y.m());for(var C=this.g.length+y.g.length,E=[],Q=0;Q<2*C;Q++)E[Q]=0;for(Q=0;Q<this.g.length;Q++)for(var N=0;N<y.g.length;N++){var L=this.i(Q)>>>16,T=this.i(Q)&65535,Pe=y.i(N)>>>16,Me=y.i(N)&65535;E[2*Q+2*N]+=T*Me,w(E,2*Q+2*N),E[2*Q+2*N+1]+=L*Me,w(E,2*Q+2*N+1),E[2*Q+2*N+1]+=T*Pe,w(E,2*Q+2*N+1),E[2*Q+2*N+2]+=L*Pe,w(E,2*Q+2*N+2)}for(Q=0;Q<C;Q++)E[Q]=E[2*Q+1]<<16|E[2*Q];for(Q=C;Q<2*C;Q++)E[Q]=0;return new i(E,0)};function w(y,C){for(;(y[C]&65535)!=y[C];)y[C+1]+=y[C]>>>16,y[C]&=65535,C++}function I(y,C){this.g=y,this.h=C}function F(y,C){if(B(C))throw Error("division by zero");if(B(y))return new I(h,h);if(v(y))return C=F(_(y),C),new I(_(C.g),_(C.h));if(v(C))return C=F(y,_(C)),new I(_(C.g),C.h);if(30<y.g.length){if(v(y)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var E=f,Q=C;0>=Q.l(y);)E=U(E),Q=U(Q);var N=R(E,1),L=R(Q,1);for(Q=R(Q,2),E=R(E,2);!B(Q);){var T=L.add(Q);0>=T.l(y)&&(N=N.add(E),L=T),Q=R(Q,1),E=R(E,1)}return C=x(y,N.j(C)),new I(N,C)}for(N=h;0<=y.l(C);){for(E=Math.max(1,Math.floor(y.m()/C.m())),Q=Math.ceil(Math.log(E)/Math.LN2),Q=48>=Q?1:Math.pow(2,Q-48),L=c(E),T=L.j(C);v(T)||0<T.l(y);)E-=Q,L=c(E),T=L.j(C);B(L)&&(L=f),N=N.add(L),y=x(y,T)}return new I(N,y)}t.A=function(y){return F(this,y).h},t.and=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],Q=0;Q<C;Q++)E[Q]=this.i(Q)&y.i(Q);return new i(E,this.h&y.h)},t.or=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],Q=0;Q<C;Q++)E[Q]=this.i(Q)|y.i(Q);return new i(E,this.h|y.h)},t.xor=function(y){for(var C=Math.max(this.g.length,y.g.length),E=[],Q=0;Q<C;Q++)E[Q]=this.i(Q)^y.i(Q);return new i(E,this.h^y.h)};function U(y){for(var C=y.g.length+1,E=[],Q=0;Q<C;Q++)E[Q]=y.i(Q)<<1|y.i(Q-1)>>>31;return new i(E,y.h)}function R(y,C){var E=C>>5;C%=32;for(var Q=y.g.length-E,N=[],L=0;L<Q;L++)N[L]=0<C?y.i(L+E)>>>C|y.i(L+E+1)<<32-C:y.i(L+E);return new i(N,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,db=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,Ci=i}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hb,gl,fb,Ed,xm,gb,pb,mb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,p){return u==Array.prototype||u==Object.prototype||(u[g]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var g=0;g<u.length;++g){var p=u[g];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function A(u,g){if(g)e:{var p=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var j=u[b];if(!(j in p))break e;p=p[j]}u=u[u.length-1],b=p[u],g=g(b),g!=b&&g!=null&&e(p,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var p=0,b=!1,j={next:function(){if(!b&&p<u.length){var K=p++;return{value:g(K,u[K]),done:!1}}return b=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}A("Array.prototype.values",function(u){return u||function(){return s(this,function(g,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,p){return u.call.apply(u.bind,arguments)}function h(u,g,p){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,b),u.apply(g,j)}}return function(){return u.apply(g,arguments)}}function f(u,g,p){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(u,g){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function B(u,g){function p(){}p.prototype=g.prototype,u.aa=g.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(b,j,K){for(var le=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)le[xt-2]=arguments[xt];return g.prototype[j].apply(b,le)}}function v(u){const g=u.length;if(0<g){const p=Array(g);for(let b=0;b<g;b++)p[b]=u[b];return p}return[]}function _(u,g){for(let p=1;p<arguments.length;p++){const b=arguments[p];if(a(b)){const j=u.length||0,K=b.length||0;u.length=j+K;for(let le=0;le<K;le++)u[j+le]=b[le]}else u.push(b)}}class x{constructor(g,p){this.i=g,this.j=p,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=o.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function R(u,g,p){for(const b in u)g.call(p,u[b],b,u)}function y(u,g){for(const p in u)g.call(void 0,u[p],p,u)}function C(u){const g={};for(const p in u)g[p]=u[p];return g}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(u,g){let p,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(p in b)u[p]=b[p];for(let K=0;K<E.length;K++)p=E[K],Object.prototype.hasOwnProperty.call(b,p)&&(u[p]=b[p])}}function N(u){var g=1;u=u.split(":");const p=[];for(;0<g&&u.length;)p.push(u.shift()),g--;return u.length&&p.push(u.join(":")),p}function L(u){o.setTimeout(()=>{throw u},0)}function T(){var u=S;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Pe{constructor(){this.h=this.g=null}add(g,p){const b=Me.get();b.set(g,p),this.h?this.h.next=b:this.g=b,this.h=b}}var Me=new x(()=>new et,u=>u.reset());class et{constructor(){this.next=this.g=this.h=null}set(g,p){this.h=g,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,ee=!1,S=new Pe,O=()=>{const u=o.Promise.resolve(void 0);Ne=()=>{u.then(G)}};var G=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){L(p)}var g=Me;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ee=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};o.addEventListener("test",p,g),o.removeEventListener("test",p,g)}catch{}return u}();function Ee(u,g){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{F(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else p=="mouseover"?g=u.fromElement:p=="mouseout"&&(g=u.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ee.aa.h.call(this)}}B(Ee,ne);var Ve={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),wt=0;function pe(u,g,p,b,j){this.listener=u,this.proxy=null,this.src=g,this.type=p,this.capture=!!b,this.ha=j,this.key=++wt,this.da=this.fa=!1}function W(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u){this.src=u,this.g={},this.h=0}me.prototype.add=function(u,g,p,b,j){var K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);var le=te(u,g,b,j);return-1<le?(g=u[le],p||(g.fa=!1)):(g=new pe(g,this.src,K,!!b,j),g.fa=p,u.push(g)),g};function Ae(u,g){var p=g.type;if(p in u.g){var b=u.g[p],j=Array.prototype.indexOf.call(b,g,void 0),K;(K=0<=j)&&Array.prototype.splice.call(b,j,1),K&&(W(g),u.g[p].length==0&&(delete u.g[p],u.h--))}}function te(u,g,p,b){for(var j=0;j<u.length;++j){var K=u[j];if(!K.da&&K.listener==g&&K.capture==!!p&&K.ha==b)return j}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),Ie={};function be(u,g,p,b,j){if(Array.isArray(g)){for(var K=0;K<g.length;K++)be(u,g[K],p,b,j);return null}return p=ze(p),u&&u[ve]?u.K(g,p,c(b)?!!b.capture:!1,j):Ue(u,g,p,!1,b,j)}function Ue(u,g,p,b,j,K){if(!g)throw Error("Invalid event type");var le=c(j)?!!j.capture:!!j,xt=je(u);if(xt||(u[ge]=xt=new me(u)),p=xt.add(g,p,b,le,K),p.proxy)return p;if(b=Ge(),p.proxy=b,b.src=u,b.listener=p,u.addEventListener)Le||(j=le),j===void 0&&(j=!1),u.addEventListener(g.toString(),b,j);else if(u.attachEvent)u.attachEvent(We(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ge(){function u(p){return g.call(u.src,u.listener,p)}const g=Qe;return u}function Ye(u,g,p,b,j){if(Array.isArray(g))for(var K=0;K<g.length;K++)Ye(u,g[K],p,b,j);else b=c(b)?!!b.capture:!!b,p=ze(p),u&&u[ve]?(u=u.i,g=String(g).toString(),g in u.g&&(K=u.g[g],p=te(K,p,b,j),-1<p&&(W(K[p]),Array.prototype.splice.call(K,p,1),K.length==0&&(delete u.g[g],u.h--)))):u&&(u=je(u))&&(g=u.g[g.toString()],u=-1,g&&(u=te(g,p,b,j)),(p=-1<u?g[u]:null)&&qe(p))}function qe(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ve])Ae(g.i,u);else{var p=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(p,b,u.capture):g.detachEvent?g.detachEvent(We(p),b):g.addListener&&g.removeListener&&g.removeListener(b),(p=je(g))?(Ae(p,u),p.h==0&&(p.src=null,g[ge]=null)):W(u)}}}function We(u){return u in Ie?Ie[u]:Ie[u]="on"+u}function Qe(u,g){if(u.da)u=!0;else{g=new Ee(g,this);var p=u.listener,b=u.ha||u.src;u.fa&&qe(u),u=p.call(b,g)}return u}function je(u){return u=u[ge],u instanceof me?u:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ze(u){return typeof u=="function"?u:(u[Xe]||(u[Xe]=function(g){return u.handleEvent(g)}),u[Xe])}function $e(){Y.call(this),this.i=new me(this),this.M=this,this.F=null}B($e,Y),$e.prototype[ve]=!0,$e.prototype.removeEventListener=function(u,g,p,b){Ye(this,u,g,p,b)};function ke(u,g){var p,b=u.F;if(b)for(p=[];b;b=b.F)p.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new ne(g,u);else if(g instanceof ne)g.target=g.target||u;else{var j=g;g=new ne(b,u),Q(g,j)}if(j=!0,p)for(var K=p.length-1;0<=K;K--){var le=g.g=p[K];j=it(le,b,!0,g)&&j}if(le=g.g=u,j=it(le,b,!0,g)&&j,j=it(le,b,!1,g)&&j,p)for(K=0;K<p.length;K++)le=g.g=p[K],j=it(le,b,!1,g)&&j}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var p=u.g[g],b=0;b<p.length;b++)W(p[b]);delete u.g[g],u.h--}}this.F=null},$e.prototype.K=function(u,g,p,b){return this.i.add(String(u),g,!1,p,b)},$e.prototype.L=function(u,g,p,b){return this.i.add(String(u),g,!0,p,b)};function it(u,g,p,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,K=0;K<g.length;++K){var le=g[K];if(le&&!le.da&&le.capture==p){var xt=le.listener,Bn=le.ha||le.src;le.fa&&Ae(u.i,le),j=xt.call(Bn,b)!==!1&&j}}return j&&!b.defaultPrevented}function kt(u,g,p){if(typeof u=="function")p&&(u=f(u,p));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:o.setTimeout(u,g||0)}function Hn(u){u.g=kt(()=>{u.g=null,u.i&&(u.i=!1,Hn(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class On extends Y{constructor(g,p){super(),this.m=g,this.l=p,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Hn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jn(u){Y.call(this),this.h=u,this.g={}}B(Jn,Y);var D=[];function V(u){R(u.g,function(g,p){this.g.hasOwnProperty(p)&&qe(g)},u),u.g={}}Jn.prototype.N=function(){Jn.aa.N.call(this),V(this)},Jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var q=o.JSON.stringify,oe=o.JSON.parse,Te=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function we(){}we.prototype.h=null;function ce(u){return u.h||(u.h=u.i())}function Re(){}var se={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function he(){ne.call(this,"d")}B(he,ne);function De(){ne.call(this,"c")}B(De,ne);var ut={},ot=null;function qt(){return ot=ot||new $e}ut.La="serverreachability";function P(u){ne.call(this,ut.La,u)}B(P,ne);function z(u){const g=qt();ke(g,new P(g))}ut.STAT_EVENT="statevent";function ye(u,g){ne.call(this,ut.STAT_EVENT,u),this.stat=g}B(ye,ne);function ae(u){const g=qt();ke(g,new ye(g,u))}ut.Ma="timingevent";function re(u,g){ne.call(this,ut.Ma,u),this.size=g}B(re,ne);function fe(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function Ke(){this.g=!0}Ke.prototype.xa=function(){this.g=!1};function dt(u,g,p,b,j,K){u.info(function(){if(u.g)if(K)for(var le="",xt=K.split("&"),Bn=0;Bn<xt.length;Bn++){var ct=xt[Bn].split("=");if(1<ct.length){var Tn=ct[0];ct=ct[1];var Fn=Tn.split("_");le=2<=Fn.length&&Fn[1]=="type"?le+(Tn+"="+ct+"&"):le+(Tn+"=redacted&")}}else le=null;else le=K;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+g+`
`+p+`
`+le})}function Rt(u,g,p,b,j,K,le){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+g+`
`+p+`
`+K+" "+le})}function un(u,g,p,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+LA(u,p)+(b?" "+b:"")})}function It(u,g){u.info(function(){return"TIMEOUT: "+g})}Ke.prototype.info=function(){};function LA(u,g){if(!u.g)return g;if(!g)return null;try{var p=JSON.parse(g);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var b=p[u];if(!(2>b.length)){var j=b[1];if(Array.isArray(j)&&!(1>j.length)){var K=j[0];if(K!="noop"&&K!="stop"&&K!="close")for(var le=1;le<j.length;le++)j[le]=""}}}}return q(p)}catch{return g}}var ht={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ft;function su(){}B(su,we),su.prototype.g=function(){return new XMLHttpRequest},su.prototype.i=function(){return{}},ft=new su;function MA(u,g,p,b){this.j=u,this.i=g,this.l=p,this.R=b||1,this.U=new Jn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new RB}function RB(){this.i=null,this.g="",this.h=!1}var NB={},eg={};function tg(u,g,p){u.L=1,u.v=lu(AA(g)),u.m=p,u.P=!0,DB(u,null)}function DB(u,g){u.F=Date.now(),iu(u),u.A=AA(u.v);var p=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),JB(p.i,"t",b),u.C=0,p=u.j.J,u.h=new RB,u.g=fv(u.j,p?g:null,!u.m),0<u.O&&(u.M=new On(f(u.Y,u,u.g),u.O)),g=u.U,p=u.g,b=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(D[0]=j.toString()),j=D);for(var K=0;K<j.length;K++){var le=be(p,j[K],b||g.handleEvent,!1,g.h||g);if(!le)break;g.g[le.key]=le}g=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),z(),dt(u.i,u.u,u.A,u.l,u.R,u.m)}MA.prototype.ca=function(u){u=u.target;const g=this.M;g&&sA(u)==3?g.j():this.Y(u)},MA.prototype.Y=function(u){try{if(u==this.g)e:{const Fn=sA(this.g);var g=this.g.Ba();const Zi=this.g.Z();if(!(3>Fn)&&(Fn!=3||this.g&&(this.h.h||this.g.oa()||rv(this.g)))){this.J||Fn!=4||g==7||(g==8||0>=Zi?z(3):z(2)),ng(this);var p=this.g.Z();this.X=p;t:if(PB(this)){var b=rv(this.g);u="";var j=b.length,K=sA(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),La(this);var le="";break t}this.h.i=new o.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,u+=this.h.i.decode(b[g],{stream:!(K&&g==j-1)});b.length=0,this.h.g+=u,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=p==200,Rt(this.i,this.u,this.A,this.l,this.R,Fn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var xt,Bn=this.g;if((xt=Bn.g?Bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(xt)){var ct=xt;break t}}ct=null}if(p=ct)un(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rg(this,p);else{this.o=!1,this.s=3,ae(12),ni(this),La(this);break e}}if(this.P){p=!0;let Fr;for(;!this.J&&this.C<le.length;)if(Fr=HQ(this,le),Fr==eg){Fn==4&&(this.s=4,ae(14),p=!1),un(this.i,this.l,null,"[Incomplete Response]");break}else if(Fr==NB){this.s=4,ae(15),un(this.i,this.l,le,"[Invalid Chunk]"),p=!1;break}else un(this.i,this.l,Fr,null),rg(this,Fr);if(PB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fn!=4||le.length!=0||this.h.h||(this.s=1,ae(16),p=!1),this.o=this.o&&p,!p)un(this.i,this.l,le,"[Invalid Chunked Response]"),ni(this),La(this);else if(0<le.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),lg(Tn),Tn.M=!0,ae(11))}}else un(this.i,this.l,le,null),rg(this,le);Fn==4&&ni(this),this.o&&!this.J&&(Fn==4?cv(this.j,this):(this.o=!1,iu(this)))}else AU(this.g),p==400&&0<le.indexOf("Unknown SID")?(this.s=3,ae(12)):(this.s=0,ae(13)),ni(this),La(this)}}}catch{}finally{}};function PB(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function HQ(u,g){var p=u.C,b=g.indexOf(`
`,p);return b==-1?eg:(p=Number(g.substring(p,b)),isNaN(p)?NB:(b+=1,b+p>g.length?eg:(g=g.slice(b,b+p),u.C=b+p,g)))}MA.prototype.cancel=function(){this.J=!0,ni(this)};function iu(u){u.S=Date.now()+u.I,LB(u,u.I)}function LB(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=fe(f(u.ba,u),g)}function ng(u){u.B&&(o.clearTimeout(u.B),u.B=null)}MA.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(It(this.i,this.A),this.L!=2&&(z(),ae(17)),ni(this),this.s=2,La(this)):LB(this,this.S-u)};function La(u){u.j.G==0||u.J||cv(u.j,u)}function ni(u){ng(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,V(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function rg(u,g){try{var p=u.j;if(p.G!=0&&(p.g==u||Ag(p.h,u))){if(!u.K&&Ag(p.h,u)&&p.G==3){try{var b=p.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)gu(p),hu(p);else break e;ag(p),ae(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=fe(f(p.Za,p),6e3));if(1>=HB(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ai(p,11)}else if((u.K||p.g==u)&&gu(p),!w(g))for(j=p.Da.g.parse(g),g=0;g<j.length;g++){let ct=j[g];if(p.T=ct[0],ct=ct[1],p.G==2)if(ct[0]=="c"){p.K=ct[1],p.ia=ct[2];const Tn=ct[3];Tn!=null&&(p.la=Tn,p.j.info("VER="+p.la));const Fn=ct[4];Fn!=null&&(p.Aa=Fn,p.j.info("SVER="+p.Aa));const Zi=ct[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(b=1.5*Zi,p.L=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const Fr=u.g;if(Fr){const mu=Fr.g?Fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mu){var K=b.h;K.g||mu.indexOf("spdy")==-1&&mu.indexOf("quic")==-1&&mu.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(sg(K,K.h),K.h=null))}if(b.D){const cg=Fr.g?Fr.g.getResponseHeader("X-HTTP-Session-Id"):null;cg&&(b.ya=cg,Tt(b.I,b.D,cg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),b=p;var le=u;if(b.qa=hv(b,b.J?b.ia:null,b.W),le.K){OB(b.h,le);var xt=le,Bn=b.L;Bn&&(xt.I=Bn),xt.B&&(ng(xt),iu(xt)),b.g=le}else av(b);0<p.i.length&&fu(p)}else ct[0]!="stop"&&ct[0]!="close"||Ai(p,7);else p.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Ai(p,7):og(p):ct[0]!="noop"&&p.l&&p.l.ta(ct),p.v=0)}}z(4)}catch{}}var OQ=class{constructor(u,g){this.g=u,this.map=g}};function MB(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jB(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function HB(u){return u.h?1:u.g?u.g.size:0}function Ag(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function sg(u,g){u.g?u.g.add(g):u.h=g}function OB(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}MB.prototype.cancel=function(){if(this.i=VB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function VB(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const p of u.g.values())g=g.concat(p.D);return g}return v(u.i)}function VQ(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],p=u.length,b=0;b<p;b++)g.push(u[b]);return g}g=[],p=0;for(b in u)g[p++]=u[b];return g}function KQ(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var p=0;p<u;p++)g.push(p);return g}g=[],p=0;for(const b in u)g[p++]=b;return g}}}function KB(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var p=KQ(u),b=VQ(u),j=b.length,K=0;K<j;K++)g.call(void 0,b[K],p&&p[K],u)}var GB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GQ(u,g){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var b=u[p].indexOf("="),j=null;if(0<=b){var K=u[p].substring(0,b);j=u[p].substring(b+1)}else K=u[p];g(K,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ri(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ri){this.h=u.h,ou(this,u.j),this.o=u.o,this.g=u.g,au(this,u.s),this.l=u.l;var g=u.i,p=new Ha;p.i=g.i,g.g&&(p.g=new Map(g.g),p.h=g.h),zB(this,p),this.m=u.m}else u&&(g=String(u).match(GB))?(this.h=!1,ou(this,g[1]||"",!0),this.o=Ma(g[2]||""),this.g=Ma(g[3]||"",!0),au(this,g[4]),this.l=Ma(g[5]||"",!0),zB(this,g[6]||"",!0),this.m=Ma(g[7]||"")):(this.h=!1,this.i=new Ha(null,this.h))}ri.prototype.toString=function(){var u=[],g=this.j;g&&u.push(ja(g,$B,!0),":");var p=this.g;return(p||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ja(g,$B,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(ja(p,p.charAt(0)=="/"?WQ:$Q,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",ja(p,JQ)),u.join("")};function AA(u){return new ri(u)}function ou(u,g,p){u.j=p?Ma(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function au(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function zB(u,g,p){g instanceof Ha?(u.i=g,XQ(u.i,u.h)):(p||(g=ja(g,qQ)),u.i=new Ha(g,u.h))}function Tt(u,g,p){u.i.set(g,p)}function lu(u){return Tt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ma(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ja(u,g,p){return typeof u=="string"?(u=encodeURI(u).replace(g,zQ),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function zQ(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var $B=/[#\/\?@]/g,$Q=/[#\?:]/g,WQ=/[#\?]/g,qQ=/[#\?@]/g,JQ=/#/g;function Ha(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function jA(u){u.g||(u.g=new Map,u.h=0,u.i&&GQ(u.i,function(g,p){u.add(decodeURIComponent(g.replace(/\+/g," ")),p)}))}t=Ha.prototype,t.add=function(u,g){jA(this),this.i=null,u=Xi(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(g),this.h+=1,this};function WB(u,g){jA(u),g=Xi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function qB(u,g){return jA(u),g=Xi(u,g),u.g.has(g)}t.forEach=function(u,g){jA(this),this.g.forEach(function(p,b){p.forEach(function(j){u.call(g,j,b,this)},this)},this)},t.na=function(){jA(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),p=[];for(let b=0;b<g.length;b++){const j=u[b];for(let K=0;K<j.length;K++)p.push(g[b])}return p},t.V=function(u){jA(this);let g=[];if(typeof u=="string")qB(this,u)&&(g=g.concat(this.g.get(Xi(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)g=g.concat(u[p])}return g},t.set=function(u,g){return jA(this),this.i=null,u=Xi(this,u),qB(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function JB(u,g,p){WB(u,g),0<p.length&&(u.i=null,u.g.set(Xi(u,g),v(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var p=0;p<g.length;p++){var b=g[p];const K=encodeURIComponent(String(b)),le=this.V(b);for(b=0;b<le.length;b++){var j=K;le[b]!==""&&(j+="="+encodeURIComponent(String(le[b]))),u.push(j)}}return this.i=u.join("&")};function Xi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function XQ(u,g){g&&!u.j&&(jA(u),u.i=null,u.g.forEach(function(p,b){var j=b.toLowerCase();b!=j&&(WB(this,b),JB(this,j,p))},u)),u.j=g}function YQ(u,g){const p=new Ke;if(o.Image){const b=new Image;b.onload=m(HA,p,"TestLoadImage: loaded",!0,g,b),b.onerror=m(HA,p,"TestLoadImage: error",!1,g,b),b.onabort=m(HA,p,"TestLoadImage: abort",!1,g,b),b.ontimeout=m(HA,p,"TestLoadImage: timeout",!1,g,b),o.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function ZQ(u,g){const p=new Ke,b=new AbortController,j=setTimeout(()=>{b.abort(),HA(p,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(K=>{clearTimeout(j),K.ok?HA(p,"TestPingServer: ok",!0,g):HA(p,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),HA(p,"TestPingServer: error",!1,g)})}function HA(u,g,p,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(p)}catch{}}function eU(){this.g=new Te}function tU(u,g,p){const b=p||"";try{KB(u,function(j,K){let le=j;c(j)&&(le=q(j)),g.push(b+K+"="+encodeURIComponent(le))})}catch(j){throw g.push(b+"type="+encodeURIComponent("_badmap")),j}}function cu(u){this.l=u.Ub||null,this.j=u.eb||!1}B(cu,we),cu.prototype.g=function(){return new uu(this.l,this.j)},cu.prototype.i=function(u){return function(){return u}}({});function uu(u,g){$e.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(uu,$e),t=uu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,Va(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||o).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;XB(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function XB(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Oa(this):Va(this),this.readyState==3&&XB(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Oa(this))},t.Qa=function(u){this.g&&(this.response=u,Oa(this))},t.ga=function(){this.g&&Oa(this)};function Oa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Va(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var p=g.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=g.next();return u.join(`\r
`)};function Va(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(uu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function YB(u){let g="";return R(u,function(p,b){g+=b,g+=":",g+=p,g+=`\r
`}),g}function ig(u,g,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=YB(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Tt(u,g,p))}function zt(u){$e.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(zt,$e);var nU=/^https?$/i,rU=["POST","PUT"];t=zt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ft.g(),this.v=this.o?ce(this.o):ce(ft),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){ZB(this,K);return}if(u=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)p.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())p.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(K=>K.toLowerCase()=="content-type"),j=o.FormData&&u instanceof o.FormData,!(0<=Array.prototype.indexOf.call(rU,g,void 0))||b||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,le]of p)this.g.setRequestHeader(K,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nv(this),this.u=!0,this.g.send(u),this.u=!1}catch(K){ZB(this,K)}};function ZB(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,ev(u),du(u)}function ev(u){u.A||(u.A=!0,ke(u,"complete"),ke(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ke(this,"complete"),ke(this,"abort"),du(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),du(this,!0)),zt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tv(this):this.bb())},t.bb=function(){tv(this)};function tv(u){if(u.h&&typeof i<"u"&&(!u.v[1]||sA(u)!=4||u.Z()!=2)){if(u.u&&sA(u)==4)kt(u.Ea,0,u);else if(ke(u,"readystatechange"),sA(u)==4){u.h=!1;try{const le=u.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var p;if(!(p=g)){var b;if(b=le===0){var j=String(u.D).match(GB)[1]||null;!j&&o.self&&o.self.location&&(j=o.self.location.protocol.slice(0,-1)),b=!nU.test(j?j.toLowerCase():"")}p=b}if(p)ke(u,"complete"),ke(u,"success");else{u.m=6;try{var K=2<sA(u)?u.g.statusText:""}catch{K=""}u.l=K+" ["+u.Z()+"]",ev(u)}}finally{du(u)}}}}function du(u,g){if(u.g){nv(u);const p=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||ke(u,"ready");try{p.onreadystatechange=b}catch{}}}function nv(u){u.I&&(o.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function sA(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<sA(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),oe(g)}};function rv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function AU(u){const g={};u=(u.g&&2<=sA(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(w(u[b]))continue;var p=N(u[b]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const K=g[j]||[];g[j]=K,K.push(p)}y(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ka(u,g,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||g}function Av(u){this.Aa=0,this.i=[],this.j=new Ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ka("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ka("baseRetryDelayMs",5e3,u),this.cb=Ka("retryDelaySeedMs",1e4,u),this.Wa=Ka("forwardChannelMaxRetries",2,u),this.wa=Ka("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new MB(u&&u.concurrentRequestLimit),this.Da=new eU,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Av.prototype,t.la=8,t.G=1,t.connect=function(u,g,p,b){ae(0),this.W=u,this.H=g||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.I=hv(this,null,this.W),fu(this)};function og(u){if(sv(u),u.G==3){var g=u.U++,p=AA(u.I);if(Tt(p,"SID",u.K),Tt(p,"RID",g),Tt(p,"TYPE","terminate"),Ga(u,p),g=new MA(u,u.j,g),g.L=2,g.v=lu(AA(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(g.v.toString(),"")}catch{}!p&&o.Image&&(new Image().src=g.v,p=!0),p||(g.g=fv(g.j,null),g.g.ea(g.v)),g.F=Date.now(),iu(g)}dv(u)}function hu(u){u.g&&(lg(u),u.g.cancel(),u.g=null)}function sv(u){hu(u),u.u&&(o.clearTimeout(u.u),u.u=null),gu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&o.clearTimeout(u.s),u.s=null)}function fu(u){if(!jB(u.h)&&!u.s){u.s=!0;var g=u.Ga;Ne||O(),ee||(Ne(),ee=!0),S.add(g,u),u.B=0}}function sU(u,g){return HB(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=fe(f(u.Ga,u,g),uv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new MA(this,this.j,u);let K=this.o;if(this.S&&(K?(K=C(K),Q(K,this.S)):K=this.S),this.m!==null||this.O||(j.H=K,K=null),this.P)e:{for(var g=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=p;break e}if(g===4096||p===this.i.length-1){g=p+1;break e}}g=1e3}else g=1e3;g=ov(this,j,g),p=AA(this.I),Tt(p,"RID",u),Tt(p,"CVER",22),this.D&&Tt(p,"X-HTTP-Session-Id",this.D),Ga(this,p),K&&(this.O?g="headers="+encodeURIComponent(String(YB(K)))+"&"+g:this.m&&ig(p,this.m,K)),sg(this.h,j),this.Ua&&Tt(p,"TYPE","init"),this.P?(Tt(p,"$req",g),Tt(p,"SID","null"),j.T=!0,tg(j,p,null)):tg(j,p,g),this.G=2}}else this.G==3&&(u?iv(this,u):this.i.length==0||jB(this.h)||iv(this))};function iv(u,g){var p;g?p=g.l:p=u.U++;const b=AA(u.I);Tt(b,"SID",u.K),Tt(b,"RID",p),Tt(b,"AID",u.T),Ga(u,b),u.m&&u.o&&ig(b,u.m,u.o),p=new MA(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),g&&(u.i=g.D.concat(u.i)),g=ov(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sg(u.h,p),tg(p,b,g)}function Ga(u,g){u.H&&R(u.H,function(p,b){Tt(g,b,p)}),u.l&&KB({},function(p,b){Tt(g,b,p)})}function ov(u,g,p){p=Math.min(u.i.length,p);var b=u.l?f(u.l.Na,u.l,u):null;e:{var j=u.i;let K=-1;for(;;){const le=["count="+p];K==-1?0<p?(K=j[0].g,le.push("ofs="+K)):K=0:le.push("ofs="+K);let xt=!0;for(let Bn=0;Bn<p;Bn++){let ct=j[Bn].g;const Tn=j[Bn].map;if(ct-=K,0>ct)K=Math.max(0,j[Bn].g-100),xt=!1;else try{tU(Tn,le,"req"+ct+"_")}catch{b&&b(Tn)}}if(xt){b=le.join("&");break e}}}return u=u.i.splice(0,p),g.D=u,b}function av(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Ne||O(),ee||(Ne(),ee=!0),S.add(g,u),u.v=0}}function ag(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=fe(f(u.Fa,u),uv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,lv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=fe(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ae(10),hu(this),lv(this))};function lg(u){u.A!=null&&(o.clearTimeout(u.A),u.A=null)}function lv(u){u.g=new MA(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=AA(u.qa);Tt(g,"RID","rpc"),Tt(g,"SID",u.K),Tt(g,"AID",u.T),Tt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Tt(g,"TO",u.ja),Tt(g,"TYPE","xmlhttp"),Ga(u,g),u.m&&u.o&&ig(g,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=lu(AA(g)),p.m=null,p.P=!0,DB(p,u)}t.Za=function(){this.C!=null&&(this.C=null,hu(this),ag(this),ae(19))};function gu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function cv(u,g){var p=null;if(u.g==g){gu(u),lg(u),u.g=null;var b=2}else if(Ag(u.h,g))p=g.D,OB(u.h,g),b=1;else return;if(u.G!=0){if(g.o)if(b==1){p=g.m?g.m.length:0,g=Date.now()-g.F;var j=u.B;b=qt(),ke(b,new re(b,p)),fu(u)}else av(u);else if(j=g.s,j==3||j==0&&0<g.X||!(b==1&&sU(u,g)||b==2&&ag(u)))switch(p&&0<p.length&&(g=u.h,g.i=g.i.concat(p)),j){case 1:Ai(u,5);break;case 4:Ai(u,10);break;case 3:Ai(u,6);break;default:Ai(u,2)}}}function uv(u,g){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*g}function Ai(u,g){if(u.j.info("Error code "+g),g==2){var p=f(u.fb,u),b=u.Xa;const j=!b;b=new ri(b||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ou(b,"https"),lu(b),j?YQ(b.toString(),p):ZQ(b.toString(),p)}else ae(2);u.G=0,u.l&&u.l.sa(g),dv(u),sv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ae(2)):(this.j.info("Failed to ping google.com"),ae(1))};function dv(u){if(u.G=0,u.ka=[],u.l){const g=VB(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function hv(u,g,p){var b=p instanceof ri?AA(p):new ri(p);if(b.g!="")g&&(b.g=g+"."+b.g),au(b,b.s);else{var j=o.location;b=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var K=new ri(null);b&&ou(K,b),g&&(K.g=g),j&&au(K,j),p&&(K.l=p),b=K}return p=u.D,g=u.ya,p&&g&&Tt(b,p,g),Tt(b,"VER",u.la),Ga(u,b),b}function fv(u,g,p){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new zt(new cu({eb:p})):new zt(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gv(){}t=gv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pu(){}pu.prototype.g=function(u,g){return new ir(u,g)};function ir(u,g){$e.call(this),this.g=new Av(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Yi(this)}B(ir,$e),ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){og(this.g)},ir.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=q(u),u=p);g.i.push(new OQ(g.Ya++,u)),g.G==3&&fu(g)},ir.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,ir.aa.N.call(this)};function pv(u){he.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const p in g){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}B(pv,he);function mv(){De.call(this),this.status=1}B(mv,De);function Yi(u){this.g=u}B(Yi,gv),Yi.prototype.ua=function(){ke(this.g,"a")},Yi.prototype.ta=function(u){ke(this.g,new pv(u))},Yi.prototype.sa=function(u){ke(this.g,new mv)},Yi.prototype.ra=function(){ke(this.g,"b")},pu.prototype.createWebChannel=pu.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,mb=function(){return new pu},pb=function(){return qt()},gb=ut,xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ht.NO_ERROR=0,ht.TIMEOUT=8,ht.HTTP_ERROR=6,Ed=ht,ti.COMPLETE="complete",fb=ti,Re.EventType=se,se.OPEN="a",se.CLOSE="b",se.ERROR="c",se.MESSAGE="d",$e.prototype.listen=$e.prototype.K,gl=Re,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,hb=zt}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const Wy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new hw("@firebase/firestore");function uo(){return ks.logLevel}function TN(t){ks.setLogLevel(t)}function X(t,...e){if(ks.logLevel<=rt.DEBUG){const n=e.map(pw);ks.debug(`Firestore (${ya}): ${t}`,...n)}}function en(t,...e){if(ks.logLevel<=rt.ERROR){const n=e.map(pw);ks.error(`Firestore (${ya}): ${t}`,...n)}}function gr(t,...e){if(ks.logLevel<=rt.WARN){const n=e.map(pw);ks.warn(`Firestore (${ya}): ${t}`,...n)}}function pw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t="Unexpected state"){const e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+t;throw en(e),new Error(e)}function Fe(t,e){t||Ce()}function FN(t,e){t||Ce()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends SA{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}}class QN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UN{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let r=this.i;const A=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mn,e.enqueueRetryable(()=>A(this.currentUser))};const i=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await A(this.currentUser)})},o=a=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>o(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?o(a):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mn)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new wb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new gn(e)}}class SN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new SN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const r=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const A=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>A(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?A(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new vb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class NN{getToken(){return Promise.resolve(new vb(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const A=DN(40);for(let s=0;s<A.length;++s)r.length<20&&A[s]<n&&(r+=e.charAt(A[s]%e.length))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function Zo(t,e,n){return t.length===e.length&&t.every((r,A)=>n(r,e[A]))}function yb(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Mt(0,0))}static max(){return new Se(new Mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(),r===void 0?r=e.length-n:r>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let A=0;A<r;A++){const s=e.get(A),i=n.get(A);if(s<i)return-1;if(s>i)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class At extends gc{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(A=>A.length>0))}return new At(n)}static emptyPath(){return new At([])}}const PN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends gc{construct(e,n,r){return new Ut(e,n,r)}static isValidIdentifier(e){return PN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ut(["__name__"])}static fromServerFormat(e){const n=[];let r="",A=0;const s=()=>{if(r.length===0)throw new J(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;A<e.length;){const o=e[A];if(o==="\\"){if(A+1===e.length)throw new J(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[A+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new J(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,A+=2}else o==="`"?(i=!i,A++):o!=="."||i?(r+=o,A++):(s(),A++)}if(s(),i)throw new J(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(n)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(At.fromString(e))}static fromName(e){return new de(At.fromString(e).popFirst(5))}static empty(){return new de(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new At(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n,r,A){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=A}}function Cm(t){return t.fields.find(e=>e.kind===2)}function ui(t){return t.fields.filter(e=>e.kind!==2)}function LN(t,e){let n=Oe(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=MN(t.fields[r],e.fields[r]),n!==0)return n;return Oe(t.fields.length,e.fields.length)}ea.UNKNOWN_ID=-1;class Ii{constructor(e,n){this.fieldPath=e,this.kind=n}}function MN(t,e){const n=Ut.comparator(t.fieldPath,e.fieldPath);return n!==0?n:Oe(t.kind,e.kind)}class ta{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ta(0,pr.min())}}function xb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,A=Se.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new pr(A,de.empty(),e)}function Cb(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(Se.min(),de.empty(),-1)}static max(){return new pr(Se.max(),de.empty(),-1)}}function ww(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Eb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==Ib)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,A)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,A)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,A)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let A=0,s=0,i=!1;e.forEach(o=>{++A,o.next(()=>{++s,i&&s===A&&n()},a=>r(a))}),i=!0,s===A&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(A=>A?M.resolve(A):r());return n}static forEach(e,n){const r=[];return e.forEach((A,s)=>{r.push(n.call(this,A,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,A)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;n(e[c]).next(d=>{i[c]=d,++o,o===s&&r(i)},d=>A(d))}})}static doWhile(e,n){return new M((r,A)=>{const s=()=>{e()===!0?n().next(()=>{s()},A):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new mn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Dl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const A=Bw(r.target.error);this.V.reject(new Dl(e,A))}}static open(e,n,r,A){try{return new pf(n,e.transaction(A,r))}catch(s){throw new Dl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(X("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new HN(n)}}class Xr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Xr.S(ln())===12.2&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return X("SimpleDb","Removing database:",e),di(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ib())return!1;if(Xr.v())return!0;const e=ln(),n=Xr.S(e),r=0<n&&n<10,A=_b(e),s=0<A&&A<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(X("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const A=indexedDB.open(this.name,this.version);A.onsuccess=s=>{const i=s.target.result;n(i)},A.onblocked=()=>{r(new Dl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},A.onerror=s=>{const i=s.target.error;i.name==="VersionError"?r(new J(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new J(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new Dl(e,i))},A.onupgradeneeded=s=>{X("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const i=s.target.result;this.p.O(i,A.transaction,s.oldVersion,this.version).next(()=>{X("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,A){const s=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const o=pf.open(this.db,e,s?"readonly":"readwrite",r),a=A(o).next(c=>(o.g(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return a.catch(()=>{}),await o.m,a}catch(o){const a=o,c=a.name!=="FirebaseError"&&i<3;if(X("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _b(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class jN{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return di(this.B.delete())}}class Dl extends J{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ws(t){return t.name==="IndexedDbTransactionError"}class HN{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(X("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(X("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),di(r)}add(e){return X("SimpleDb","ADD",this.store.name,e,e),di(this.store.add(e))}get(e){return di(this.store.get(e)).next(n=>(n===void 0&&(n=null),X("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return X("SimpleDb","DELETE",this.store.name,e),di(this.store.delete(e))}count(){return X("SimpleDb","COUNT",this.store.name),di(this.store.count())}U(e,n){const r=this.options(e,n),A=r.index?this.store.index(r.index):this.store;if(typeof A.getAll=="function"){const s=A.getAll(r.range);return new M((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}{const s=this.cursor(r),i=[];return this.W(s,(o,a)=>{i.push(a)}).next(()=>i)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((A,s)=>{r.onerror=i=>{s(i.target.error)},r.onsuccess=i=>{A(i.target.result)}})}j(e,n){X("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const A=this.cursor(r);return this.W(A,(s,i,o)=>o.delete())}J(e,n){let r;n?r=e:(r={},n=e);const A=this.cursor(r);return this.W(A,n)}Y(e){const n=this.cursor({});return new M((r,A)=>{n.onerror=s=>{const i=Bw(s.target.error);A(i)},n.onsuccess=s=>{const i=s.target.result;i?e(i.primaryKey,i.value).next(o=>{o?i.continue():r()}):r()}})}W(e,n){const r=[];return new M((A,s)=>{e.onerror=i=>{s(i.target.error)},e.onsuccess=i=>{const o=i.target.result;if(!o)return void A();const a=new jN(o),c=n(o.primaryKey,o.value,a);if(c instanceof M){const d=c.catch(h=>(a.done(),M.reject(h)));r.push(d)}a.isDone?A():a.K===null?o.continue():o.continue(a.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function di(t){return new M((e,n)=>{t.onsuccess=r=>{const A=r.target.result;e(A)},t.onerror=r=>{const A=Bw(r.target.error);n(A)}})}let qy=!1;function Bw(t){const e=Xr.S(ln());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qy||(qy=!0,setTimeout(()=>{throw r},0)),r}}return t}class ON{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){X("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{X("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ws(n)?X("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await $s(n)}await this.X(6e4)})}}class VN{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let A=n,s=!0;return M.doWhile(()=>s===!0&&A>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!r.has(i))return X("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,A).next(o=>{A-=o,r.add(i)});s=!1})).next(()=>n-A)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(A=>this.localStore.localDocuments.getNextDocuments(e,n,A,r).next(s=>{const i=s.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(A,s)).next(o=>(X("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>i.size)}))}re(e,n){let r=e;return n.changes.forEach((A,s)=>{const i=Cb(s);ww(i,r)>0&&(r=i)}),new pr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}er.oe=-1;function Mc(t){return t==null}function pc(t){return t===0&&1/t==-1/0}function bb(t){return typeof t=="number"&&Number.isInteger(t)&&!pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Jy(e)),e=KN(t.get(n),e);return Jy(e)}function KN(t,e){let n=e;const r=t.length;for(let A=0;A<r;A++){const s=t.charAt(A);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Jy(t){return t+""}function $r(t){const e=t.length;if(Fe(e>=2),e===2)return Fe(t.charAt(0)===""&&t.charAt(1)===""),At.emptyPath();const n=e-2,r=[];let A="";for(let s=0;s<e;){const i=t.indexOf("",s);switch((i<0||i>n)&&Ce(),t.charAt(i+1)){case"":const o=t.substring(s,i);let a;A.length===0?a=o:(A+=o,a=A,A=""),r.push(a);break;case"":A+=t.substring(s,i),A+="\0";break;case"":A+=t.substring(s,i+1);break;default:Ce()}s=i+2}return new At(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t,e){return[t,Ln(e)]}function Tb(t,e,n){return[t,Ln(e),n]}const GN={},zN=["prefixPath","collectionGroup","readTime","documentId"],$N=["prefixPath","collectionGroup","documentId"],WN=["collectionGroup","readTime","prefixPath","documentId"],qN=["canonicalId","targetId"],JN=["targetId","path"],XN=["path","targetId"],YN=["collectionId","parent"],ZN=["indexId","uid"],e4=["uid","sequenceNumber"],t4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n4=["indexId","uid","orderedDocumentKey"],r4=["userId","collectionPath","documentId"],A4=["userId","collectionPath","largestBatchId"],s4=["userId","collectionGroup","largestBatchId"],Fb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],i4=[...Fb,"documentOverlays"],Qb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ub=Qb,vw=[...Ub,"indexConfiguration","indexState","indexEntries"],o4=vw,a4=[...vw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends Eb{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function cn(t,e){const n=ie(t);return Xr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Sb(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function kb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.comparator=e,this.root=n||Cn.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const A=this.comparator(e,r.key);if(A===0)return n+r.left.size;A<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Du(this.root,e,this.comparator,!1)}getReverseIterator(){return new Du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Du(this.root,e,this.comparator,!0)}}class Du{constructor(e,n,r,A){this.isReverse=A,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&A&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,n,r,A,s){this.key=e,this.value=n,this.color=r??Cn.RED,this.left=A??Cn.EMPTY,this.right=s??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,A,s){return new Cn(e??this.key,n??this.value,r??this.color,A??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let A=this;const s=r(e,A.key);return A=s<0?A.copy(null,null,null,A.left.insert(e,n,r),null):s===0?A.copy(null,n,null,null,null):A.copy(null,null,null,null,A.right.insert(e,n,r)),A.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,A=this;if(n(e,A.key)<0)A.left.isEmpty()||A.left.isRed()||A.left.left.isRed()||(A=A.moveRedLeft()),A=A.copy(null,null,null,A.left.remove(e,n),null);else{if(A.left.isRed()&&(A=A.rotateRight()),A.right.isEmpty()||A.right.isRed()||A.right.left.isRed()||(A=A.moveRedRight()),n(e,A.key)===0){if(A.right.isEmpty())return Cn.EMPTY;r=A.right.min(),A=A.copy(r.key,r.value,null,null,A.right.removeMin())}A=A.copy(null,null,null,null,A.right.remove(e,n))}return A.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,r,A,s){return this}insert(e,n,r){return new Cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const A=r.getNext();if(this.comparator(A.key,e[1])>=0)return;n(A.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zy(this.data.getIterator())}getIteratorFrom(e){return new Zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(this.comparator(A,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class Zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function to(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new tr([])}unionWith(e){let n=new vt(Ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(A){try{return atob(A)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Rb("Invalid base64 string: "+s):s}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(A){let s="";for(let i=0;i<A.length;++i)s+=String.fromCharCode(A[i]);return s}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let A=0;A<n.length;A++)r[A]=n.charCodeAt(A);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const c4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function EA(t){if(Fe(!!t),typeof t=="string"){let e=0;const n=c4.exec(t);if(Fe(!!n),n[1]){let A=n[1];A=(A+"000000000").substr(0,9),e=Number(A)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _A(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wf(t){const e=t.mapValue.fields.__previous_value__;return mf(e)?wf(e):e}function mc(t){const e=EA(t.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,r,A,s,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=A,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Rs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Rs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bd={nullValue:"NULL_VALUE"};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?mf(t)?4:Nb(t)?9007199254740991:Bf(t)?10:11:Ce()}function tA(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mc(t).isEqual(mc(e));case 3:return function(A,s){if(typeof A.timestampValue=="string"&&typeof s.timestampValue=="string"&&A.timestampValue.length===s.timestampValue.length)return A.timestampValue===s.timestampValue;const i=EA(A.timestampValue),o=EA(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(A,s){return _A(A.bytesValue).isEqual(_A(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(A,s){return Dt(A.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(A.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(A,s){if("integerValue"in A&&"integerValue"in s)return Dt(A.integerValue)===Dt(s.integerValue);if("doubleValue"in A&&"doubleValue"in s){const i=Dt(A.doubleValue),o=Dt(s.doubleValue);return i===o?pc(i)===pc(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Zo(t.arrayValue.values||[],e.arrayValue.values||[],tA);case 10:case 11:return function(A,s){const i=A.mapValue.fields||{},o=s.mapValue.fields||{};if(Yy(i)!==Yy(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!tA(i[a],o[a])))return!1;return!0}(t,e);default:return Ce()}}function wc(t,e){return(t.values||[]).find(n=>tA(n,e))!==void 0}function Ds(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=Dt(s.integerValue||s.doubleValue),a=Dt(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ex(t.timestampValue,e.timestampValue);case 4:return ex(mc(t),mc(e));case 5:return Oe(t.stringValue,e.stringValue);case 6:return function(s,i){const o=_A(s),a=_A(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const d=Oe(o[c],a[c]);if(d!==0)return d}return Oe(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=Oe(Dt(s.latitude),Dt(i.latitude));return o!==0?o:Oe(Dt(s.longitude),Dt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tx(t.arrayValue,e.arrayValue);case 10:return function(s,i){var o,a,c,d;const h=s.fields||{},f=i.fields||{},m=(o=h.value)===null||o===void 0?void 0:o.arrayValue,B=(a=f.value)===null||a===void 0?void 0:a.arrayValue,v=Oe(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=B==null?void 0:B.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:tx(m,B)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===cs.mapValue&&i===cs.mapValue)return 0;if(s===cs.mapValue)return 1;if(i===cs.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=Oe(a[h],d[h]);if(f!==0)return f;const m=Ds(o[a[h]],c[d[h]]);if(m!==0)return m}return Oe(a.length,d.length)}(t.mapValue,e.mapValue);default:throw Ce()}}function ex(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=EA(t),r=EA(e),A=Oe(n.seconds,r.seconds);return A!==0?A:Oe(n.nanos,r.nanos)}function tx(t,e){const n=t.values||[],r=e.values||[];for(let A=0;A<n.length&&A<r.length;++A){const s=Ds(n[A],r[A]);if(s)return s}return Oe(n.length,r.length)}function na(t){return Em(t)}function Em(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=EA(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _A(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",A=!0;for(const s of n.values||[])A?A=!1:r+=",",r+=Em(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let A="{",s=!0;for(const i of r)s?s=!1:A+=",",A+=`${i}:${Em(n.fields[i])}`;return A+"}"}(t.mapValue):Ce()}function Td(t){switch(Ns(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wf(t);return e?16+Td(e):16;case 5:return 2*t.stringValue.length;case 6:return _A(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((A,s)=>A+Td(s),0)}(t.arrayValue);case 10:case 11:return function(r){let A=0;return qs(r.fields,(s,i)=>{A+=s.length+Td(i)}),A}(t.mapValue);default:throw Ce()}}function ki(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _m(t){return!!t&&"integerValue"in t}function Bc(t){return!!t&&"arrayValue"in t}function nx(t){return!!t&&"nullValue"in t}function rx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fd(t){return!!t&&"mapValue"in t}function Bf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Nb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Db={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function d4(t){return"nullValue"in t?bd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ki(Rs.empty(),de.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Bf(t)?Db:{mapValue:{}}:Ce()}function h4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ki(Rs.empty(),de.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Db:"mapValue"in t?Bf(t)?{mapValue:{}}:cs:Ce()}function Ax(t,e){const n=Ds(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function sx(t,e){const n=Ds(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pl(n)}setAll(e){let n=Ut.emptyPath(),r={},A=[];e.forEach((i,o)=>{if(!n.isImmediateParentOf(o)){const a=this.getFieldsMap(n);this.applyChanges(a,r,A),r={},A=[],n=o.popLast()}i?r[o.lastSegment()]=Pl(i):A.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,A)}delete(e){const n=this.field(e.popLast());Fd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tA(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let A=n.mapValue.fields[e.get(r)];Fd(A)&&A.mapValue.fields||(A={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=A),n=A}return n.mapValue.fields}applyChanges(e,n,r){qs(n,(A,s)=>e[A]=s);for(const A of r)delete e[A]}clone(){return new In(Pl(this.value))}}function Pb(t){const e=[];return qs(t.fields,(n,r)=>{const A=new Ut([n]);if(Fd(r)){const s=Pb(r.mapValue).fields;if(s.length===0)e.push(A);else for(const i of s)e.push(A.child(i))}else e.push(A)}),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,r,A,s,i,o){this.key=e,this.documentType=n,this.version=r,this.readTime=A,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Qt(e,0,Se.min(),Se.min(),Se.min(),In.empty(),0)}static newFoundDocument(e,n,r,A){return new Qt(e,1,n,Se.min(),r,A,0)}static newNoDocument(e,n){return new Qt(e,2,n,Se.min(),Se.min(),In.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,Se.min(),Se.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this.position=e,this.inclusive=n}}function ix(t,e,n){let r=0;for(let A=0;A<t.position.length;A++){const s=e[A],i=t.position[A];if(s.field.isKeyField()?r=de.comparator(de.fromName(i.referenceValue),n.key):r=Ds(i,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ox(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tA(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function f4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{}class st extends Lb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new g4(e,n,r):n==="array-contains"?new w4(e,r):n==="in"?new Kb(e,r):n==="not-in"?new B4(e,r):n==="array-contains-any"?new v4(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new p4(e,r):new m4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ds(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Ds(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pt extends Lb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new pt(e,n)}matches(e){return ra(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ra(t){return t.op==="and"}function bm(t){return t.op==="or"}function yw(t){return Mb(t)&&ra(t)}function Mb(t){for(const e of t.filters)if(e instanceof pt)return!1;return!0}function Tm(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+na(t.value);if(yw(t))return t.filters.map(e=>Tm(e)).join(",");{const e=t.filters.map(n=>Tm(n)).join(",");return`${t.op}(${e})`}}function jb(t,e){return t instanceof st?function(r,A){return A instanceof st&&r.op===A.op&&r.field.isEqual(A.field)&&tA(r.value,A.value)}(t,e):t instanceof pt?function(r,A){return A instanceof pt&&r.op===A.op&&r.filters.length===A.filters.length?r.filters.reduce((s,i,o)=>s&&jb(i,A.filters[o]),!0):!1}(t,e):void Ce()}function Hb(t,e){const n=t.filters.concat(e);return pt.create(n,t.op)}function Ob(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(t):t instanceof pt?function(n){return n.op.toString()+" {"+n.getFilters().map(Ob).join(" ,")+"}"}(t):"Filter"}class g4 extends st{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class p4 extends st{constructor(e,n){super(e,"in",n),this.keys=Vb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class m4 extends st{constructor(e,n){super(e,"not-in",n),this.keys=Vb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class w4 extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bc(n)&&wc(n.arrayValue,this.value)}}class Kb extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wc(this.value.arrayValue,n)}}class B4 extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wc(this.value.arrayValue,n)}}class v4 extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n=null,r=[],A=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=A,this.limit=s,this.startAt=i,this.endAt=o,this.ue=null}}function Fm(t,e=null,n=[],r=[],A=null,s=null,i=null){return new y4(t,e,n,r,A,s,i)}function Ri(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Tm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Mc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>na(r)).join(",")),e.ue=n}return e.ue}function jc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!f4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ox(t.startAt,e.startAt)&&ox(t.endAt,e.endAt)}function wh(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Bh(t,e){return t.filters.filter(n=>n instanceof st&&n.field.isEqual(e))}function ax(t,e,n){let r=bd,A=!0;for(const s of Bh(t,e)){let i=bd,o=!0;switch(s.op){case"<":case"<=":i=d4(s.value);break;case"==":case"in":case">=":i=s.value;break;case">":i=s.value,o=!1;break;case"!=":case"not-in":i=bd}Ax({value:r,inclusive:A},{value:i,inclusive:o})<0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];Ax({value:r,inclusive:A},{value:i,inclusive:n.inclusive})<0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}function lx(t,e,n){let r=cs,A=!0;for(const s of Bh(t,e)){let i=cs,o=!0;switch(s.op){case">=":case">":i=h4(s.value),o=!1;break;case"==":case"in":case"<=":i=s.value;break;case"<":i=s.value,o=!1;break;case"!=":case"not-in":i=cs}sx({value:r,inclusive:A},{value:i,inclusive:o})>0&&(r=i,A=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const i=n.position[s];sx({value:r,inclusive:A},{value:i,inclusive:n.inclusive})>0&&(r=i,A=n.inclusive);break}}return{value:r,inclusive:A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n=null,r=[],A=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=A,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Gb(t,e,n,r,A,s,i,o){return new kA(t,e,n,r,A,s,i,o)}function xa(t){return new kA(t)}function cx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xw(t){return t.collectionGroup!==null}function Lo(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new vt(Ut.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vc(s,r))}),n.has(Ut.keyField().canonicalString())||e.ce.push(new vc(Ut.keyField(),r))}return e.ce}function Mn(t){const e=ie(t);return e.le||(e.le=$b(e,Lo(t))),e.le}function zb(t){const e=ie(t);return e.he||(e.he=$b(e,t.explicitOrderBy)),e.he}function $b(t,e){if(t.limitType==="F")return Fm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(A=>{const s=A.dir==="desc"?"asc":"desc";return new vc(A.field,s)});const n=t.endAt?new Ps(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ps(t.startAt.position,t.startAt.inclusive):null;return Fm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qm(t,e){const n=t.filters.concat([e]);return new kA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vh(t,e,n){return new kA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hc(t,e){return jc(Mn(t),Mn(e))&&t.limitType===e.limitType}function Wb(t){return`${Ri(Mn(t))}|lt:${t.limitType}`}function ho(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(A=>Ob(A)).join(", ")}]`),Mc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(A=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(A)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(A=>na(A)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(A=>na(A)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(r,A){const s=A.key.path;return r.collectionGroup!==null?A.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,A){for(const s of Lo(r))if(!s.field.isKeyField()&&A.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,A){for(const s of r.filters)if(!s.matches(A))return!1;return!0}(t,e)&&function(r,A){return!(r.startAt&&!function(i,o,a){const c=ix(i,o,a);return i.inclusive?c<=0:c<0}(r.startAt,Lo(r),A)||r.endAt&&!function(i,o,a){const c=ix(i,o,a);return i.inclusive?c>=0:c>0}(r.endAt,Lo(r),A))}(t,e)}function qb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Jb(t){return(e,n)=>{let r=!1;for(const A of Lo(t)){const s=x4(A,e,n);if(s!==0)return s;r=r||A.field.isKeyField()}return 0}}function x4(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),c=o.data.field(s);return a!==null&&c!==null?Ds(a,c):Ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[A,s]of r)if(this.equalsFn(A,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),A=this.inner[r];if(A===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<A.length;s++)if(this.equalsFn(A[s][0],e))return void(A[s]=[e,n]);A.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let A=0;A<r.length;A++)if(this.equalsFn(r[A][0],e))return r.length===1?delete this.inner[n]:r.splice(A,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(n,r)=>{for(const[A,s]of r)e(A,s)})}isEmpty(){return kb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new bt(de.comparator);function nr(){return C4}const Xb=new bt(de.comparator);function pl(...t){let e=Xb;for(const n of t)e=e.insert(n.key,n);return e}function Yb(t){let e=Xb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wr(){return Ll()}function Zb(){return Ll()}function Ll(){return new RA(t=>t.toString(),(t,e)=>t.isEqual(e))}const I4=new bt(de.comparator),E4=new vt(de.comparator);function Je(...t){let e=E4;for(const n of t)e=e.add(n);return e}const _4=new vt(Oe);function Cw(){return _4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function e1(t){return{integerValue:""+t}}function t1(t,e){return bb(e)?e1(e):Iw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this._=void 0}}function b4(t,e,n){return t instanceof Aa?function(A,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:A.seconds,nanos:A.nanoseconds}}}};return s&&mf(s)&&(s=wf(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof Ni?r1(t,e):t instanceof Di?A1(t,e):function(A,s){const i=n1(A,s),o=ux(i)+ux(A.Pe);return _m(i)&&_m(A.Pe)?e1(o):Iw(A.serializer,o)}(t,e)}function T4(t,e,n){return t instanceof Ni?r1(t,e):t instanceof Di?A1(t,e):n}function n1(t,e){return t instanceof sa?function(r){return _m(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Aa extends vf{}class Ni extends vf{constructor(e){super(),this.elements=e}}function r1(t,e){const n=s1(e);for(const r of t.elements)n.some(A=>tA(A,r))||n.push(r);return{arrayValue:{values:n}}}class Di extends vf{constructor(e){super(),this.elements=e}}function A1(t,e){let n=s1(e);for(const r of t.elements)n=n.filter(A=>!tA(A,r));return{arrayValue:{values:n}}}class sa extends vf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ux(t){return Dt(t.integerValue||t.doubleValue)}function s1(t){return Bc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.field=e,this.transform=n}}function F4(t,e){return t.field.isEqual(e.field)&&function(r,A){return r instanceof Ni&&A instanceof Ni||r instanceof Di&&A instanceof Di?Zo(r.elements,A.elements,tA):r instanceof sa&&A instanceof sa?tA(r.Pe,A.Pe):r instanceof Aa&&A instanceof Aa}(t.transform,e.transform)}class Q4{constructor(e,n){this.version=e,this.transformResults=n}}class Lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yf{}function i1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ia(t.key,Lt.none()):new Ca(t.key,t.data,Lt.none());{const n=t.data,r=In.empty();let A=new vt(Ut.comparator);for(let s of e.fields)if(!A.has(s)){let i=n.field(s);i===null&&s.length>1&&(s=s.popLast(),i=n.field(s)),i===null?r.delete(s):r.set(s,i),A=A.add(s)}return new NA(t.key,r,new tr(A.toArray()),Lt.none())}}function U4(t,e,n){t instanceof Ca?function(A,s,i){const o=A.value.clone(),a=hx(A.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof NA?function(A,s,i){if(!Qd(A.precondition,s))return void s.convertToUnknownDocument(i.version);const o=hx(A.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(o1(A)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(A,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Ml(t,e,n,r){return t instanceof Ca?function(s,i,o,a){if(!Qd(s.precondition,i))return o;const c=s.value.clone(),d=fx(s.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof NA?function(s,i,o,a){if(!Qd(s.precondition,i))return o;const c=fx(s.fieldTransforms,a,i),d=i.data;return d.setAll(o1(s)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,i,o){return Qd(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function S4(t,e){let n=null;for(const r of t.fieldTransforms){const A=e.data.field(r.field),s=n1(r.transform,A||null);s!=null&&(n===null&&(n=In.empty()),n.set(r.field,s))}return n||null}function dx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,A){return r===void 0&&A===void 0||!(!r||!A)&&Zo(r,A,(s,i)=>F4(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ca extends yf{constructor(e,n,r,A=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=A,this.type=0}getFieldMask(){return null}}class NA extends yf{constructor(e,n,r,A,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=A,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function o1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hx(t,e,n){const r=new Map;Fe(t.length===n.length);for(let A=0;A<n.length;A++){const s=t[A],i=s.transform,o=e.data.field(s.field);r.set(s.field,T4(i,o,n[A]))}return r}function fx(t,e,n){const r=new Map;for(const A of t){const s=A.transform,i=n.data.field(A.field);r.set(A.field,b4(s,i,e))}return r}class Ia extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ew extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n,r,A){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=A}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let A=0;A<this.mutations.length;A++){const s=this.mutations[A];s.key.isEqual(e.key)&&U4(s,e,r[A])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ml(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Zb();return this.mutations.forEach(A=>{const s=e.get(A.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=n.has(A.key)?null:o;const a=i1(i,o);a!==null&&r.set(A.key,a),i.isValidDocument()||i.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(n,r)=>dx(n,r))&&Zo(this.baseMutations,e.baseMutations,(n,r)=>dx(n,r))}}class bw{constructor(e,n,r,A){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=A}static from(e,n,r){Fe(e.mutations.length===r.length);let A=function(){return I4}();const s=e.mutations;for(let i=0;i<s.length;i++)A=A.insert(s[i].key,r[i].version);return new bw(e,n,r,A)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,at;function l1(t){switch(t){default:return Ce();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function c1(t){if(t===void 0)return en("GRPC error has no .code"),H.UNKNOWN;switch(t){case nn.OK:return H.OK;case nn.CANCELLED:return H.CANCELLED;case nn.UNKNOWN:return H.UNKNOWN;case nn.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case nn.INTERNAL:return H.INTERNAL;case nn.UNAVAILABLE:return H.UNAVAILABLE;case nn.UNAUTHENTICATED:return H.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case nn.NOT_FOUND:return H.NOT_FOUND;case nn.ALREADY_EXISTS:return H.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return H.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case nn.ABORTED:return H.ABORTED;case nn.OUT_OF_RANGE:return H.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return H.UNIMPLEMENTED;case nn.DATA_LOSS:return H.DATA_LOSS;default:return Ce()}}(at=nn||(nn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new Ci([4294967295,4294967295],0);function gx(t){const e=u1().encode(t),n=new db;return n.update(e),new Uint8Array(n.digest())}function px(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),A=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ci([n,r],0),new Ci([A,s],0)]}class Fw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ci.fromNumber(this.Ie)}Ee(e,n,r){let A=e.add(n.multiply(Ci.fromNumber(r)));return A.compare(R4)===1&&(A=new Ci([A.getBits(0),A.getBits(1)],0)),A.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gx(e),[r,A]=px(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);if(!this.de(i))return!1}return!0}static create(e,n,r){const A=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Fw(s,A,n);return r.forEach(o=>i.insert(o)),i}insert(e){if(this.Ie===0)return;const n=gx(e),[r,A]=px(n);for(let s=0;s<this.hashCount;s++){const i=this.Ee(r,A,s);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,A,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=A,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const A=new Map;return A.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kc(Se.min(),A,new bt(Oe),nr(),Je())}}class Gc{constructor(e,n,r,A,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=A,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Gc(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n,r,A){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=A}}class d1{constructor(e,n){this.targetId=e,this.me=n}}class h1{constructor(e,n,r=Gt.EMPTY_BYTE_STRING,A=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=A}}class mx{constructor(){this.fe=0,this.ge=Bx(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Je(),n=Je(),r=Je();return this.ge.forEach((A,s)=>{switch(s){case 0:e=e.add(A);break;case 2:n=n.add(A);break;case 1:r=r.add(A);break;default:Ce()}}),new Gc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Bx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N4{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=wx(),this.Qe=new bt(Oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,A)=>{this.ze(A)&&n(A)})}He(e){const n=e.targetId,r=e.me.count,A=this.Je(n);if(A){const s=A.target;if(wh(s))if(r===0){const i=new de(s.path);this.Ue(n,i,Qt.newNoDocument(i,Se.min()))}else Fe(r===1);else{const i=this.Ye(n);if(i!==r){const o=this.Ze(e),a=o?this.Xe(o,e,i):1;if(a!==0){this.je(n);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}yh==null||yh.et(function(d,h,f,m,B){var v,_,x,w,I,F;const U={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},R=h.unchangedNames;return R&&(U.bloomFilter={applied:B===0,hashCount:(v=R==null?void 0:R.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(w=(x=(_=R==null?void 0:R.bits)===null||_===void 0?void 0:_.bitmap)===null||x===void 0?void 0:x.length)!==null&&w!==void 0?w:0,padding:(F=(I=R==null?void 0:R.bits)===null||I===void 0?void 0:I.padding)!==null&&F!==void 0?F:0,mightContain:y=>{var C;return(C=m==null?void 0:m.mightContain(y))!==null&&C!==void 0&&C}}),U}(i,e.me,this.Le.tt(),o,a))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:A=0},hashCount:s=0}=n;let i,o;try{i=_A(r).toUint8Array()}catch(a){if(a instanceof Rb)return gr("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Fw(i,A,s)}catch(a){return gr(a instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let A=0;return r.forEach(s=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),A++)}),A}rt(e){const n=new Map;this.Be.forEach((s,i)=>{const o=this.Je(i);if(o){if(s.current&&wh(o.target)){const a=new de(o.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,Qt.newNoDocument(a,e))}s.be&&(n.set(i,s.ve()),s.Ce())}});let r=Je();this.qe.forEach((s,i)=>{let o=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const A=new Kc(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=wx(),this.Qe=new bt(Oe),A}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const A=this.Ge(e);this.it(e,n)?A.Fe(n,1):A.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new vt(Oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wx(){return new bt(de.comparator)}function Bx(){return new bt(de.comparator)}const D4={asc:"ASCENDING",desc:"DESCENDING"},P4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L4={and:"AND",or:"OR"};class M4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Um(t,e){return t.useProto3Json||Mc(e)?e:{value:e}}function ia(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j4(t,e){return ia(t,e.toTimestamp())}function tn(t){return Fe(!!t),Se.fromTimestamp(function(n){const r=EA(n);return new Mt(r.seconds,r.nanos)}(t))}function Qw(t,e){return Sm(t,e).canonicalString()}function Sm(t,e){const n=function(A){return new At(["projects",A.projectId,"databases",A.database])}(t).child("documents");return e===void 0?n:n.child(e)}function g1(t){const e=At.fromString(t);return Fe(E1(e)),e}function yc(t,e){return Qw(t.databaseId,e.path)}function Yr(t,e){const n=g1(e);if(n.get(1)!==t.databaseId.projectId)throw new J(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(w1(n))}function p1(t,e){return Qw(t.databaseId,e)}function m1(t){const e=g1(t);return e.length===4?At.emptyPath():w1(e)}function km(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w1(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vx(t,e,n){return{name:yc(t,e),fields:n.value.mapValue.fields}}function B1(t,e,n){const r=Yr(t,e.name),A=tn(e.updateTime),s=e.createTime?tn(e.createTime):Se.min(),i=new In({mapValue:{fields:e.fields}}),o=Qt.newFoundDocument(r,A,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function H4(t,e){return"found"in e?function(r,A){Fe(!!A.found),A.found.name,A.found.updateTime;const s=Yr(r,A.found.name),i=tn(A.found.updateTime),o=A.found.createTime?tn(A.found.createTime):Se.min(),a=new In({mapValue:{fields:A.found.fields}});return Qt.newFoundDocument(s,i,o,a)}(t,e):"missing"in e?function(r,A){Fe(!!A.missing),Fe(!!A.readTime);const s=Yr(r,A.missing),i=tn(A.readTime);return Qt.newNoDocument(s,i)}(t,e):Ce()}function O4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),A=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Fe(d===void 0||typeof d=="string"),Gt.fromBase64String(d||"")):(Fe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(c){const d=c.code===void 0?H.UNKNOWN:c1(c.code);return new J(d,c.message||"")}(i);n=new h1(r,A,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const A=Yr(t,r.document.name),s=tn(r.document.updateTime),i=r.document.createTime?tn(r.document.createTime):Se.min(),o=new In({mapValue:{fields:r.document.fields}}),a=Qt.newFoundDocument(A,s,i,o),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ud(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const A=Yr(t,r.document),s=r.readTime?tn(r.readTime):Se.min(),i=Qt.newNoDocument(A,s),o=r.removedTargetIds||[];n=new Ud([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const A=Yr(t,r.document),s=r.removedTargetIds||[];n=new Ud([],s,A,null)}else{if(!("filter"in e))return Ce();{e.filter;const r=e.filter;r.targetId;const{count:A=0,unchangedNames:s}=r,i=new k4(A,s),o=r.targetId;n=new d1(o,i)}}return n}function xc(t,e){let n;if(e instanceof Ca)n={update:vx(t,e.key,e.value)};else if(e instanceof Ia)n={delete:yc(t,e.key)};else if(e instanceof NA)n={update:vx(t,e.key,e.data),updateMask:W4(e.fieldMask)};else{if(!(e instanceof Ew))return Ce();n={verify:yc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof Aa)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ni)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Di)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof sa)return{fieldPath:i.field.canonicalString(),increment:o.Pe};throw Ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(A,s){return s.updateTime!==void 0?{updateTime:j4(A,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ce()}(t,e.precondition)),n}function Rm(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Lt.updateTime(tn(s.updateTime)):s.exists!==void 0?Lt.exists(s.exists):Lt.none()}(e.currentDocument):Lt.none(),r=e.updateTransforms?e.updateTransforms.map(A=>function(i,o){let a=null;if("setToServerValue"in o)Fe(o.setToServerValue==="REQUEST_TIME"),a=new Aa;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];a=new Ni(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];a=new Di(d)}else"increment"in o?a=new sa(i,o.increment):Ce();const c=Ut.fromServerFormat(o.fieldPath);return new Vc(c,a)}(t,A)):[];if(e.update){e.update.name;const A=Yr(t,e.update.name),s=new In({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new tr(c.map(d=>Ut.fromServerFormat(d)))}(e.updateMask);return new NA(A,s,i,n,r)}return new Ca(A,s,n,r)}if(e.delete){const A=Yr(t,e.delete);return new Ia(A,n)}if(e.verify){const A=Yr(t,e.verify);return new Ew(A,n)}return Ce()}function V4(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(A,s){let i=A.updateTime?tn(A.updateTime):tn(s);return i.isEqual(Se.min())&&(i=tn(s)),new Q4(i,A.transformResults||[])}(n,e))):[]}function v1(t,e){return{documents:[p1(t,e.path)]}}function xf(t,e){const n={structuredQuery:{}},r=e.path;let A;e.collectionGroup!==null?(A=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(A=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=p1(t,A);const s=function(c){if(c.length!==0)return I1(pt.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:ZA(f.field),direction:G4(f.dir)}}(d))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Um(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:A}}function y1(t,e,n,r){const{_t:A,parent:s}=xf(t,e),i={},o=[];let a=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+a++;i[d]=c.alias,c.aggregateType==="count"?o.push({alias:d,count:{}}):c.aggregateType==="avg"?o.push({alias:d,avg:{field:ZA(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:d,sum:{field:ZA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:A.structuredQuery},parent:A.parent},ut:i,parent:s}}function x1(t){let e=m1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let A=null;if(r>0){Fe(r===1);const d=n.from[0];d.allDescendants?A=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=C1(h);return f instanceof pt&&yw(f)?f.getFilters():[f]}(n.where));let i=[];n.orderBy&&(i=function(h){return h.map(f=>function(B){return new vc(fo(B.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(h){let f;return f=typeof h=="object"?h.value:h,Mc(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,m=h.values||[];return new Ps(m,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new Ps(m,f)}(n.endAt)),Gb(e,A,i,s,o,"F",a,c)}function K4(t,e){const n=function(A){switch(A){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fo(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const A=fo(n.unaryFilter.field);return st.create(A,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fo(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=fo(n.unaryFilter.field);return st.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(t):t.fieldFilter!==void 0?function(n){return st.create(fo(n.fieldFilter.field),function(A){switch(A){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pt.create(n.compositeFilter.filters.map(r=>C1(r)),function(A){switch(A){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(t):Ce()}function G4(t){return D4[t]}function z4(t){return P4[t]}function $4(t){return L4[t]}function ZA(t){return{fieldPath:t.canonicalString()}}function fo(t){return Ut.fromServerFormat(t.fieldPath)}function I1(t){return t instanceof st?function(n){if(n.op==="=="){if(rx(n.value))return{unaryFilter:{field:ZA(n.field),op:"IS_NAN"}};if(nx(n.value))return{unaryFilter:{field:ZA(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rx(n.value))return{unaryFilter:{field:ZA(n.field),op:"IS_NOT_NAN"}};if(nx(n.value))return{unaryFilter:{field:ZA(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ZA(n.field),op:z4(n.op),value:n.value}}}(t):t instanceof pt?function(n){const r=n.getFilters().map(A=>I1(A));return r.length===1?r[0]:{compositeFilter:{op:$4(n.op),filters:r}}}(t):Ce()}function W4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function E1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,r,A,s=Se.min(),i=Se.min(),o=Gt.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=A,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new hA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hA(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.ct=e}}function q4(t,e){let n;if(e.document)n=B1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=de.fromSegments(e.noDocument.path),A=Li(e.noDocument.readTime);n=Qt.newNoDocument(r,A),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce();{const r=de.fromSegments(e.unknownDocument.path),A=Li(e.unknownDocument.version);n=Qt.newUnknownDocument(r,A)}}return e.readTime&&n.setReadTime(function(A){const s=new Mt(A[0],A[1]);return Se.fromTimestamp(s)}(e.readTime)),n}function yx(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:yc(s,i.key),fields:i.data.value.mapValue.fields,updateTime:ia(s,i.version.toTimestamp()),createTime:ia(s,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Pi(e.version)};else{if(!e.isUnknownDocument())return Ce();r.unknownDocument={path:n.path.toArray(),version:Pi(e.version)}}return r}function xh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Pi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Li(t){const e=new Mt(t.seconds,t.nanoseconds);return Se.fromTimestamp(e)}function hi(t,e){const n=(e.baseMutations||[]).map(s=>Rm(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const i=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Rm(t.ct,s)),A=Mt.fromMillis(e.localWriteTimeMs);return new _w(e.batchId,A,n,r)}function wl(t){const e=Li(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Li(t.lastLimboFreeSnapshotVersion):Se.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Fe(s.documents.length===1),Mn(xa(m1(s.documents[0])))}(t.query):function(s){return Mn(x1(s))}(t.query),new hA(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Gt.fromBase64String(t.resumeToken))}function b1(t,e){const n=Pi(e.snapshotVersion),r=Pi(e.lastLimboFreeSnapshotVersion);let A;A=wh(e.target)?v1(t.ct,e.target):xf(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ri(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:A}}function Uw(t){const e=x1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vh(e,e.limit,"L"):e}function Vg(t,e){return new Tw(e.largestBatchId,Rm(t.ct,e.overlayMutation))}function xx(t,e){const n=e.path.lastSegment();return[t,Ln(e.path.popLast()),n]}function Cx(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Pi(r.readTime),documentKey:Ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{getBundleMetadata(e,n){return Ix(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Li(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return Ix(e).put(function(A){return{bundleId:A.id,createTime:Pi(tn(A.createTime)),version:A.version}}(n))}getNamedQuery(e,n){return Ex(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Uw(s.bundledQuery),readTime:Li(s.readTime)}}(r)})}saveNamedQuery(e,n){return Ex(e).put(function(A){return{name:A.name,readTime:Pi(tn(A.readTime)),bundledQuery:A.bundledQuery}}(n))}}function Ix(t){return cn(t,"bundles")}function Ex(t){return cn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Cf(e,r)}getOverlay(e,n){return el(e).get(xx(this.userId,n)).next(r=>r?Vg(this.serializer,r):null)}getOverlays(e,n){const r=Wr();return M.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){const A=[];return r.forEach((s,i)=>{const o=new Tw(n,i);A.push(this.ht(e,o))}),M.waitFor(A)}removeOverlaysForBatchId(e,n,r){const A=new Set;n.forEach(i=>A.add(Ln(i.getCollectionPath())));const s=[];return A.forEach(i=>{const o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,r+1],!1,!0);s.push(el(e).j("collectionPathOverlayIndex",o))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const A=Wr(),s=Ln(n),i=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return el(e).U("collectionPathOverlayIndex",i).next(o=>{for(const a of o){const c=Vg(this.serializer,a);A.set(c.getKey(),c)}return A})}getOverlaysForCollectionGroup(e,n,r,A){const s=Wr();let i;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return el(e).J({index:"collectionGroupOverlayIndex",range:o},(a,c,d)=>{const h=Vg(this.serializer,c);s.size()<A||h.largestBatchId===i?(s.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return el(e).put(function(A,s,i){const[o,a,c]=xx(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:xc(A.ct,i.mutation)}}(this.serializer,this.userId,n))}}function el(t){return cn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{Pt(e){return cn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Gt.fromUint8Array(r):Gt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Dt(e.integerValue));else if("doubleValue"in e){const r=Dt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),pc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=EA(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(_A(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Nb(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Bf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Ce()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const A of Object.keys(r))this.Vt(A,n),this.Tt(r[A],n)}wt(e,n){var r,A;const s=e.fields||{};this.dt(n,53);const i="value",o=((A=(r=s[i].arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.length)||0;this.dt(n,15),n.At(Dt(o)),this.Vt(i,n),this.Tt(s[i],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const A of r)this.Tt(A,n)}yt(e,n){this.dt(n,37),de.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}fi.vt=new fi;function Y4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function _x(t){const e=64-function(r){let A=0;for(let s=0;s<8;++s){const i=Y4(255&r[s]);if(A+=i,i!==8)break}return A}(t);return Math.ceil(e/8)}class Z4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const A=n.codePointAt(0);this.Ft(240|A>>>18),this.Ft(128|63&A>>>12),this.Ft(128|63&A>>>6),this.Ft(128|63&A)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const A=n.codePointAt(0);this.Ot(240|A>>>18),this.Ot(128|63&A>>>12),this.Ot(128|63&A>>>6),this.Ot(128|63&A)}}this.Nt()}kt(e){const n=this.qt(e),r=_x(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=255&n[A]}Kt(e){const n=this.qt(e),r=_x(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let A=n.length-r;A<n.length;++A)this.buffer[this.position++]=~(255&n[A])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let A=1;A<n.length;++A)n[A]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const A=new Uint8Array(r);A.set(this.buffer),this.buffer=A}}class eD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class tD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class tl{constructor(){this.jt=new Z4,this.Ht=new eD(this.jt),this.Jt=new tD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r,A){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=A}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gi(this.indexId,this.documentKey,this.arrayValue,r)}}function VA(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=bx(t.arrayValue,e.arrayValue),n!==0?n:(n=bx(t.directionalValue,e.directionalValue),n!==0?n:de.comparator(t.documentKey,e.documentKey)))}function bx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.Xt=new vt((n,r)=>Ut.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Fe(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Cm(e);if(n!==void 0&&!this.sn(n))return!1;const r=ui(e);let A=new Set,s=0,i=0;for(;s<r.length&&this.sn(r[s]);++s)A=A.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!A.has(o.field.canonicalString())){const a=r[s];if(!this.on(o,a)||!this._n(this.en[i++],a))return!1}++s}for(;s<r.length;++s){const o=r[s];if(i>=this.en.length||!this._n(this.en[i++],o))return!1}return!0}an(){if(this.nn)return null;let e=new vt(Ut.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ii(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ii(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ii(r.field,r.dir==="asc"?0:1)));return new ea(ea.UNKNOWN_ID,this.collectionId,n,ta.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t){var e,n;if(Fe(t instanceof st||t instanceof pt),t instanceof st){if(t instanceof Kb){const A=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>st.create(t.field,"==",s)))||[];return pt.create(A,"or")}return t}const r=t.filters.map(A=>T1(A));return pt.create(r,t.op)}function nD(t){if(t.getFilters().length===0)return[];const e=Pm(T1(t));return Fe(F1(e)),Nm(e)||Dm(e)?[e]:e.getFilters()}function Nm(t){return t instanceof st}function Dm(t){return t instanceof pt&&yw(t)}function F1(t){return Nm(t)||Dm(t)||function(n){if(n instanceof pt&&bm(n)){for(const r of n.getFilters())if(!Nm(r)&&!Dm(r))return!1;return!0}return!1}(t)}function Pm(t){if(Fe(t instanceof st||t instanceof pt),t instanceof st)return t;if(t.filters.length===1)return Pm(t.filters[0]);const e=t.filters.map(r=>Pm(r));let n=pt.create(e,t.op);return n=Ch(n),F1(n)?n:(Fe(n instanceof pt),Fe(ra(n)),Fe(n.filters.length>1),n.filters.reduce((r,A)=>Sw(r,A)))}function Sw(t,e){let n;return Fe(t instanceof st||t instanceof pt),Fe(e instanceof st||e instanceof pt),n=t instanceof st?e instanceof st?function(A,s){return pt.create([A,s],"and")}(t,e):Fx(t,e):e instanceof st?Fx(e,t):function(A,s){if(Fe(A.filters.length>0&&s.filters.length>0),ra(A)&&ra(s))return Hb(A,s.getFilters());const i=bm(A)?A:s,o=bm(A)?s:A,a=i.filters.map(c=>Sw(c,o));return pt.create(a,"or")}(t,e),Ch(n)}function Fx(t,e){if(ra(e))return Hb(e,t.getFilters());{const n=e.filters.map(r=>Sw(t,r));return pt.create(n,"or")}}function Ch(t){if(Fe(t instanceof st||t instanceof pt),t instanceof st)return t;const e=t.getFilters();if(e.length===1)return Ch(e[0]);if(Mb(t))return t;const n=e.map(A=>Ch(A)),r=[];return n.forEach(A=>{A instanceof st?r.push(A):A instanceof pt&&(A.op===t.op?r.push(...A.filters):r.push(A))}),r.length===1?r[0]:pt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.un=new kw}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(pr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class kw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n]||new vt(At.comparator),s=!A.has(r);return this.index[n]=A.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),A=this.index[n];return A&&A.has(r)}getEntries(e){return(this.index[e]||new vt(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Uint8Array(0);class AD{constructor(e,n){this.databaseId=n,this.cn=new kw,this.ln=new RA(r=>Ri(r),(r,A)=>jc(r,A)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),A=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Ln(A)};return Qx(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],A=IDBKeyRange.bound([n,""],[yb(n),""],!1,!0);return Qx(e).U(A).next(s=>{for(const i of s){if(i.collectionId!==n)break;r.push($r(i.parent))}return r})}addFieldIndex(e,n){const r=nl(e),A=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete A.indexId;const s=r.add(A);if(n.indexState){const i=ro(e);return s.next(o=>{i.put(Cx(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=nl(e),A=ro(e),s=no(e);return r.delete(n.indexId).next(()=>A.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=nl(e),r=no(e),A=ro(e);return n.j().next(()=>r.j()).next(()=>A.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(A=>{if(A===0||A===1){const s=new Tx(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=no(e);let A=!0;const s=new Map;return M.forEach(this.hn(n),i=>this.Pn(e,i).next(o=>{A&&(A=!!o),s.set(i,o)})).next(()=>{if(A){let i=Je();const o=[];return M.forEach(s,(a,c)=>{X("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(a)} to execute ${Ri(n)}`);const d=function(I,F){const U=Cm(F);if(U===void 0)return null;for(const R of Bh(I,U.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null}(c,a),h=function(I,F){const U=new Map;for(const R of ui(F))for(const y of Bh(I,R.fieldPath))switch(y.op){case"==":case"in":U.set(R.fieldPath.canonicalString(),y.value);break;case"not-in":case"!=":return U.set(R.fieldPath.canonicalString(),y.value),Array.from(U.values())}return null}(c,a),f=function(I,F){const U=[];let R=!0;for(const y of ui(F)){const C=y.kind===0?ax(I,y.fieldPath,I.startAt):lx(I,y.fieldPath,I.startAt);U.push(C.value),R&&(R=C.inclusive)}return new Ps(U,R)}(c,a),m=function(I,F){const U=[];let R=!0;for(const y of ui(F)){const C=y.kind===0?lx(I,y.fieldPath,I.endAt):ax(I,y.fieldPath,I.endAt);U.push(C.value),R&&(R=C.inclusive)}return new Ps(U,R)}(c,a),B=this.In(a,c,f),v=this.In(a,c,m),_=this.Tn(a,c,h),x=this.En(a.indexId,d,B,f.inclusive,v,m.inclusive,_);return M.forEach(x,w=>r.G(w,n.limit).next(I=>{I.forEach(F=>{const U=de.fromSegments(F.documentKey);i.has(U)||(i=i.add(U),o.push(U))})}))}).next(()=>o)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=nD(pt.create(e.filters,"and")).map(r=>Fm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,A,s,i,o){const a=(n!=null?n.length:1)*Math.max(r.length,s.length),c=a/(n!=null?n.length:1),d=[];for(let h=0;h<a;++h){const f=n?this.dn(n[h/c]):Pu,m=this.An(e,f,r[h%c],A),B=this.Rn(e,f,s[h%c],i),v=o.map(_=>this.An(e,f,_,!0));d.push(...this.createRange(m,B,v))}return d}An(e,n,r,A){const s=new gi(e,de.empty(),n,r);return A?s:s.Zt()}Rn(e,n,r,A){const s=new gi(e,de.empty(),n,r);return A?s.Zt():s}Pn(e,n){const r=new Tx(n),A=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,A).next(s=>{let i=null;for(const o of s)r.rn(o)&&(!i||o.fields.length>i.fields.length)&&(i=o);return i})}getIndexType(e,n){let r=2;const A=this.hn(n);return M.forEach(A,s=>this.Pn(e,s).next(i=>{i?r!==0&&i.fields.length<function(a){let c=new vt(Ut.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&A.length>1&&r===2?1:r)}Vn(e,n){const r=new tl;for(const A of ui(e)){const s=n.data.field(A.fieldPath);if(s==null)return null;const i=r.Yt(A.kind);fi.vt.It(s,i)}return r.zt()}dn(e){const n=new tl;return fi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new tl;return fi.vt.It(ki(this.databaseId,n),r.Yt(function(s){const i=ui(s);return i.length===0?0:i[i.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let A=[];A.push(new tl);let s=0;for(const i of ui(e)){const o=r[s++];for(const a of A)if(this.fn(n,i.fieldPath)&&Bc(o))A=this.gn(A,i,o);else{const c=a.Yt(i.kind);fi.vt.It(o,c)}}return this.pn(A)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const A=[...e],s=[];for(const i of r.arrayValue.values||[])for(const o of A){const a=new tl;a.seed(o.zt()),fi.vt.It(i,a.Yt(n.kind)),s.push(a)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof st&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=nl(e),A=ro(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const i=[];return M.forEach(s,o=>A.get([o.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new ta(h.sequenceNumber,new pr(Li(h.readTime),new de($r(h.documentKey)),h.largestBatchId)):ta.empty(),m=d.fields.map(([B,v])=>new Ii(Ut.fromServerFormat(B),v));return new ea(d.indexId,d.collectionGroup,m,f)}(o,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,A)=>{const s=r.indexState.sequenceNumber-A.indexState.sequenceNumber;return s!==0?s:Oe(r.collectionGroup,A.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const A=nl(e),s=ro(e);return this.yn(e).next(i=>A.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,a=>s.put(Cx(a.indexId,this.uid,i,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(A,s)=>{const i=r.get(A.collectionGroup);return(i?M.resolve(i):this.getFieldIndexes(e,A.collectionGroup)).next(o=>(r.set(A.collectionGroup,o),M.forEach(o,a=>this.wn(e,A,a).next(c=>{const d=this.Sn(s,a);return c.isEqual(d)?M.resolve():this.bn(e,s,a,c,d)}))))})}Dn(e,n,r,A){return no(e).put({indexId:A.indexId,uid:this.uid,arrayValue:A.arrayValue,directionalValue:A.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,A){return no(e).delete([A.indexId,this.uid,A.arrayValue,A.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const A=no(e);let s=new vt(VA);return A.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(i,o)=>{s=s.add(new gi(r.indexId,n,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,n){let r=new vt(VA);const A=this.Vn(n,e);if(A==null)return r;const s=Cm(n);if(s!=null){const i=e.data.field(s.fieldPath);if(Bc(i))for(const o of i.arrayValue.values||[])r=r.add(new gi(n.indexId,e.key,this.dn(o),A))}else r=r.add(new gi(n.indexId,e.key,Pu,A));return r}bn(e,n,r,A,s){X("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const i=[];return function(a,c,d,h,f){const m=a.getIterator(),B=c.getIterator();let v=to(m),_=to(B);for(;v||_;){let x=!1,w=!1;if(v&&_){const I=d(v,_);I<0?w=!0:I>0&&(x=!0)}else v!=null?w=!0:x=!0;x?(h(_),_=to(B)):w?(f(v),v=to(m)):(v=to(m),_=to(B))}}(A,s,VA,o=>{i.push(this.Dn(e,n,r,o))},o=>{i.push(this.vn(e,n,r,o))}),M.waitFor(i)}yn(e){let n=1;return ro(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,A,s)=>{s.done(),n=A.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((i,o)=>VA(i,o)).filter((i,o,a)=>!o||VA(i,a[o-1])!==0);const A=[];A.push(e);for(const i of r){const o=VA(i,e),a=VA(i,n);if(o===0)A[0]=e.Zt();else if(o>0&&a<0)A.push(i),A.push(i.Zt());else if(a>0)break}A.push(n);const s=[];for(let i=0;i<A.length;i+=2){if(this.Cn(A[i],A[i+1]))return[];const o=[A[i].indexId,this.uid,A[i].arrayValue,A[i].directionalValue,Pu,[]],a=[A[i+1].indexId,this.uid,A[i+1].arrayValue,A[i+1].directionalValue,Pu,[]];s.push(IDBKeyRange.bound(o,a))}return s}Cn(e,n){return VA(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ux)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(A=>A||Ce())).next(Ux)}}function Qx(t){return cn(t,"collectionParents")}function no(t){return cn(t,"indexEntries")}function nl(t){return cn(t,"indexConfiguration")}function ro(t){return cn(t,"indexState")}function Ux(t){Fe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const A=t[r].indexState.offset;ww(A,e)<0&&(e=A),n<A.largestBatchId&&(n=A.largestBatchId)}return new pr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Nn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e,n){const r=t.store("mutations"),A=t.store("documentMutations"),s=[],i=IDBKeyRange.only(n.batchId);let o=0;const a=r.J({range:i},(d,h,f)=>(o++,f.delete()));s.push(a.next(()=>{Fe(o===1)}));const c=[];for(const d of n.mutations){const h=Tb(e,d.key.path,n.batchId);s.push(A.delete(h)),c.push(d.key)}return M.waitFor(s).next(()=>c)}function Ih(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ce();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class If{constructor(e,n,r,A){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=A,this.Fn={}}static lt(e,n,r,A){Fe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new If(s,n,r,A)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return KA(e).J({index:"userMutationsIndex",range:r},(A,s,i)=>{n=!1,i.done()}).next(()=>n)}addMutationBatch(e,n,r,A){const s=go(e),i=KA(e);return i.add({}).next(o=>{Fe(typeof o=="number");const a=new _w(o,n,r,A),c=function(m,B,v){const _=v.baseMutations.map(w=>xc(m.ct,w)),x=v.mutations.map(w=>xc(m.ct,w));return{userId:B,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:_,mutations:x}}(this.serializer,this.userId,a),d=[];let h=new vt((f,m)=>Oe(f.canonicalString(),m.canonicalString()));for(const f of A){const m=Tb(this.userId,f.key.path,o);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(s.put(m,GN))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),M.waitFor(d).next(()=>a)})}lookupMutationBatch(e,n){return KA(e).get(n).next(r=>r?(Fe(r.userId===this.userId),hi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const A=r.keys();return this.Fn[n]=A,A}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return KA(e).J({index:"userMutationsIndex",range:A},(i,o,a)=>{o.userId===this.userId&&(Fe(o.batchId>=r),s=hi(this.serializer,o)),a.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return KA(e).J({index:"userMutationsIndex",range:n,reverse:!0},(A,s,i)=>{r=s.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return KA(e).U("userMutationsIndex",n).next(r=>r.map(A=>hi(this.serializer,A)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=_d(this.userId,n.path),A=IDBKeyRange.lowerBound(r),s=[];return go(e).J({range:A},(i,o,a)=>{const[c,d,h]=i,f=$r(d);if(c===this.userId&&n.path.isEqual(f))return KA(e).get(h).next(m=>{if(!m)throw Ce();Fe(m.userId===this.userId),s.push(hi(this.serializer,m))});a.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Oe);const A=[];return n.forEach(s=>{const i=_d(this.userId,s.path),o=IDBKeyRange.lowerBound(i),a=go(e).J({range:o},(c,d,h)=>{const[f,m,B]=c,v=$r(m);f===this.userId&&s.path.isEqual(v)?r=r.add(B):h.done()});A.push(a)}),M.waitFor(A).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1,s=_d(this.userId,r),i=IDBKeyRange.lowerBound(s);let o=new vt(Oe);return go(e).J({range:i},(a,c,d)=>{const[h,f,m]=a,B=$r(f);h===this.userId&&r.isPrefixOf(B)?B.length===A&&(o=o.add(m)):d.done()}).next(()=>this.xn(e,o))}xn(e,n){const r=[],A=[];return n.forEach(s=>{A.push(KA(e).get(s).next(i=>{if(i===null)throw Ce();Fe(i.userId===this.userId),r.push(hi(this.serializer,i))}))}),M.waitFor(A).next(()=>r)}removeMutationBatch(e,n){return Q1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,A=>this.referenceDelegate.markPotentiallyOrphaned(e,A))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),A=[];return go(e).J({range:r},(s,i,o)=>{if(s[0]===this.userId){const a=$r(s[1]);A.push(a)}else o.done()}).next(()=>{Fe(A.length===0)})})}containsKey(e,n){return U1(e,this.userId,n)}Nn(e){return S1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function U1(t,e,n){const r=_d(e,n.path),A=r[1],s=IDBKeyRange.lowerBound(r);let i=!1;return go(t).J({range:s,H:!0},(o,a,c)=>{const[d,h,f]=o;d===e&&h===A&&(i=!0),c.done()}).next(()=>i)}function KA(t){return cn(t,"mutations")}function go(t){return cn(t,"documentMutations")}function S1(t){return cn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Mi(0)}static kn(){return new Mi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Mi(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Se.fromTimestamp(new Mt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(A=>(A.highestListenSequenceNumber=n,r&&(A.lastRemoteSnapshotVersion=r.toTimestamp()),n>A.highestListenSequenceNumber&&(A.highestListenSequenceNumber=n),this.Qn(e,A)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ao(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Fe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let A=0;const s=[];return Ao(e).J((i,o)=>{const a=wl(o);a.sequenceNumber<=n&&r.get(a.targetId)===null&&(A++,s.push(this.removeTargetData(e,a)))}).next(()=>M.waitFor(s)).next(()=>A)}forEachTarget(e,n){return Ao(e).J((r,A)=>{const s=wl(A);n(s)})}qn(e){return kx(e).get("targetGlobalKey").next(n=>(Fe(n!==null),n))}Qn(e,n){return kx(e).put("targetGlobalKey",n)}Kn(e,n){return Ao(e).put(b1(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ri(n),A=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ao(e).J({range:A,index:"queryTargetsIndex"},(i,o,a)=>{const c=wl(o);jc(n,c.target)&&(s=c,a.done())}).next(()=>s)}addMatchingKeys(e,n,r){const A=[],s=es(e);return n.forEach(i=>{const o=Ln(i.path);A.push(s.put({targetId:r,path:o})),A.push(this.referenceDelegate.addReference(e,r,i))}),M.waitFor(A)}removeMatchingKeys(e,n,r){const A=es(e);return M.forEach(n,s=>{const i=Ln(s.path);return M.waitFor([A.delete([r,i]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=es(e),A=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(A)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),A=es(e);let s=Je();return A.J({range:r,H:!0},(i,o,a)=>{const c=$r(i[1]),d=new de(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Ln(n.path),A=IDBKeyRange.bound([r],[yb(r)],!1,!0);let s=0;return es(e).J({index:"documentTargetsIndex",H:!0,range:A},([i,o],a,c)=>{i!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return Ao(e).get(n).next(r=>r?wl(r):null)}}function Ao(t){return cn(t,"targets")}function kx(t){return cn(t,"targetGlobal")}function es(t){return cn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx([t,e],[n,r]){const A=Oe(t,n);return A===0?Oe(e,r):A}class iD{constructor(e){this.Un=e,this.buffer=new vt(Rx),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Rx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class k1{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){X("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ws(n)?X("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.Hn(3e5)})}}class oD{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(er.oe);const r=new iD(n);return this.Jn.forEachTarget(e,A=>r.zn(A.sequenceNumber)).next(()=>this.Jn.Zn(e,A=>r.zn(A))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Sx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sx):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,A,s,i,o,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),A=this.params.maximumSequenceNumbersToCollect):A=h,i=Date.now(),this.nthSequenceNumber(e,A))).next(h=>(r=h,o=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),uo()<=rt.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${A} in `+(o-i)+`ms
	Removed ${s} targets in `+(a-o)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:A,targetsRemoved:s,documentsRemoved:h})))}}function R1(t,e){return new oD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.db=e,this.garbageCollector=R1(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(A=>r+A))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,A)=>n(A))}addReference(e,n,r){return Lu(e,r)}removeReference(e,n,r){return Lu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Lu(e,n)}nr(e,n){return function(A,s){let i=!1;return S1(A).Y(o=>U1(A,o,s).next(a=>(a&&(i=!0),M.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),A=[];let s=0;return this.tr(e,(i,o)=>{if(o<=n){const a=this.nr(e,i).next(c=>{if(!c)return s++,r.getEntry(e,i).next(()=>(r.removeEntry(i,Se.min()),es(e).delete(function(h){return[0,Ln(h.path)]}(i))))});A.push(a)}}).next(()=>M.waitFor(A)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Lu(e,n)}tr(e,n){const r=es(e);let A,s=er.oe;return r.J({index:"documentTargetsIndex"},([i,o],{path:a,sequenceNumber:c})=>{i===0?(s!==er.oe&&n(new de($r(A)),s),s=c,A=a):s=er.oe}).next(()=>{s!==er.oe&&n(new de($r(A)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lu(t,e){return es(t).put(function(r,A){return{targetId:0,path:Ln(r.path),sequenceNumber:A}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.changes=new RA(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return si(e).put(r)}removeEntry(e,n,r){return si(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],xh(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Qt.newInvalidDocument(n);return si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rl(n))},(A,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Qt.newInvalidDocument(n)};return si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rl(n))},(A,s)=>{r={document:this.ir(n,s),size:Ih(s)}}).next(()=>r)}getEntries(e,n){let r=nr();return this._r(e,n,(A,s)=>{const i=this.ir(A,s);r=r.insert(A,i)}).next(()=>r)}ar(e,n){let r=nr(),A=new bt(de.comparator);return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o),A=A.insert(s,Ih(i))}).next(()=>({documents:r,ur:A}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let A=new vt(Px);n.forEach(a=>A=A.add(a));const s=IDBKeyRange.bound(rl(A.first()),rl(A.last())),i=A.getIterator();let o=i.getNext();return si(e).J({index:"documentKeyIndex",range:s},(a,c,d)=>{const h=de.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Px(o,h)<0;)r(o,null),o=i.getNext();o&&o.isEqual(h)&&(r(o,c),o=i.hasNext()?i.getNext():null),o?d.$(rl(o)):d.done()}).next(()=>{for(;o;)r(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,n,r,A,s){const i=n.path,o=[i.popLast().toArray(),i.lastSegment(),xh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return si(e).U(IDBKeyRange.bound(o,a,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=nr();for(const h of c){const f=this.ir(de.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Oc(n,f)||A.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,A){let s=nr();const i=Dx(n,r),o=Dx(n,pr.max());return si(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(a,c,d)=>{const h=this.ir(de.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===A&&d.done()}).next(()=>s)}newChangeBuffer(e){return new cD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Nx(e).get("remoteDocumentGlobalKey").next(n=>(Fe(!!n),n))}rr(e,n){return Nx(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=q4(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return Qt.newInvalidDocument(e)}}function D1(t){return new lD(t)}class cD extends N1{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new RA(r=>r.toString(),(r,A)=>r.isEqual(A))}applyChanges(e){const n=[];let r=0,A=new vt((s,i)=>Oe(s.canonicalString(),i.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=yx(this.cr.serializer,i);A=A.add(s.path.popLast());const c=Ih(a);r+=c-o.size,n.push(this.cr.addEntry(e,s,a))}else if(r-=o.size,this.trackRemovals){const a=yx(this.cr.serializer,i.convertToNoDocument(Se.min()));n.push(this.cr.addEntry(e,s,a))}}),A.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:A})=>(A.forEach((s,i)=>{this.lr.set(s,{size:i,readTime:r.get(s).readTime})}),r))}}function Nx(t){return cn(t,"remoteDocumentGlobal")}function si(t){return cn(t,"remoteDocumentsV14")}function rl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Dx(t,e){const n=e.documentKey.path.toArray();return[t,xh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Px(t,e){const n=t.path.toArray(),r=e.path.toArray();let A=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(A=Oe(n[s],r[s]),A)return A;return A=Oe(n.length,r.length),A||(A=Oe(n[n.length-2],r[r.length-2]),A||Oe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n,r,A){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=A}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(A=>(r=A,this.remoteDocumentCache.getEntry(e,n))).next(A=>(r!==null&&Ml(r.mutation,A,tr.empty(),Mt.now()),A))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const A=Wr();return this.populateOverlays(e,A,n).next(()=>this.computeViews(e,n,A,r).next(s=>{let i=pl();return s.forEach((o,a)=>{i=i.insert(o,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const A=[];return r.forEach(s=>{n.has(s)||A.push(s)}),this.documentOverlayCache.getOverlays(e,A).next(s=>{s.forEach((i,o)=>{n.set(i,o)})})}computeViews(e,n,r,A){let s=nr();const i=Ll(),o=function(){return Ll()}();return n.forEach((a,c)=>{const d=r.get(c.key);A.has(c.key)&&(d===void 0||d.mutation instanceof NA)?s=s.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),Ml(d.mutation,c,d.mutation.getFieldMask(),Mt.now())):i.set(c.key,tr.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,d)=>i.set(c,d)),n.forEach((c,d)=>{var h;return o.set(c,new uD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),o))}recalculateAndSaveOverlays(e,n){const r=Ll();let A=new bt((i,o)=>i-o),s=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const o of i)o.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let d=r.get(a)||tr.empty();d=o.applyToLocalView(c,d),r.set(a,d);const h=(A.get(o.batchId)||Je()).add(a);A=A.insert(o.batchId,h)})}).next(()=>{const i=[],o=A.getReverseIterator();for(;o.hasNext();){const a=o.getNext(),c=a.key,d=a.value,h=Zb();d.forEach(f=>{if(!s.has(f)){const m=i1(n.get(f),r.get(f));m!==null&&h.set(f,m),s=s.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,A){return function(i){return de.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,A):this.getDocumentsMatchingCollectionQuery(e,n,r,A)}getNextDocuments(e,n,r,A){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,A).next(s=>{const i=A-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,A-s.size):M.resolve(Wr());let o=-1,a=s;return i.next(c=>M.forEach(c,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,Je())).next(d=>({batchId:o,changes:Yb(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let A=pl();return r.isFoundDocument()&&(A=A.insert(r.key,r)),A})}getDocumentsMatchingCollectionGroupQuery(e,n,r,A){const s=n.collectionGroup;let i=pl();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,a=>{const c=function(h,f){return new kA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,A).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,A){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,A))).next(i=>{s.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Qt.newInvalidDocument(d)))});let o=pl();return i.forEach((a,c)=>{const d=s.get(a);d!==void 0&&Ml(d.mutation,c,tr.empty(),Mt.now()),Oc(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(A){return{id:A.id,version:A.version,createTime:tn(A.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(A){return{name:A.name,query:Uw(A.bundledQuery),readTime:tn(A.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.overlays=new bt(de.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wr();return M.forEach(n,A=>this.getOverlay(e,A).next(s=>{s!==null&&r.set(A,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((A,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const A=this.Ir.get(r);return A!==void 0&&(A.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const A=Wr(),s=n.length+1,i=new de(n.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const a=o.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&A.set(a.getKey(),a)}return M.resolve(A)}getOverlaysForCollectionGroup(e,n,r,A){let s=new bt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Wr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const o=Wr(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>o.set(c,d)),!(o.size()>=A)););return M.resolve(o)}ht(e,n,r){const A=this.overlays.get(r.key);if(A!==null){const i=this.Ir.get(A.largestBatchId).delete(r.key);this.Ir.set(A.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Tw(n,r));let s=this.Ir.get(n);s===void 0&&(s=Je(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.Tr=new vt(hn.Er),this.dr=new vt(hn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new hn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new hn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new de(new At([])),r=new hn(n,e),A=new hn(n,e+1),s=[];return this.dr.forEachInRange([r,A],i=>{this.Vr(i),s.push(i.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new At([])),r=new hn(n,e),A=new hn(n,e+1);let s=Je();return this.dr.forEachInRange([r,A],i=>{s=s.add(i.key)}),s}containsKey(e){const n=new hn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Oe(e.wr,n.wr)}static Ar(e,n){return Oe(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new vt(hn.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,A){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new _w(s,n,r,A);this.mutationQueue.push(i);for(const o of A)this.br=this.br.add(new hn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(i)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,A=this.vr(r),s=A<0?0:A;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hn(n,0),A=new hn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,A],i=>{const o=this.Dr(i.wr);s.push(o)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Oe);return n.forEach(A=>{const s=new hn(A,0),i=new hn(A,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,i],o=>{r=r.add(o.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,A=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const i=new hn(new de(s),0);let o=new vt(Oe);return this.br.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===A&&(o=o.add(a.wr)),!0)},i),M.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const A=this.Dr(r);A!==null&&n.push(A)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,A=>{const s=new hn(A.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,A.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new hn(n,0),A=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(A&&A.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.Mr=e,this.docs=function(){return new bt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,A=this.docs.get(r),s=A?A.size:0,i=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(A=>{const s=this.docs.get(A);r=r.insert(A,s?s.document.mutableCopy():Qt.newInvalidDocument(A))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,A){let s=nr();const i=n.path,o=new de(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||ww(Cb(d),r)<=0||(A.has(d.key)||Oc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,A){Ce()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mD(this)}getSize(e){return M.resolve(this.size)}}class mD extends N1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,A)=>{A.isValidDocument()?n.push(this.cr.addEntry(e,A)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.persistence=e,this.Nr=new RA(n=>Ri(n),jc),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rw,this.targetCount=0,this.kr=Mi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,A)=>n(A)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Mi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let A=0;const s=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),A++)}),M.waitFor(s).next(()=>A)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const A=this.persistence.referenceDelegate,s=[];return A&&n.forEach(i=>{s.push(A.markPotentiallyOrphaned(e,i))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.qr={},this.overlays={},this.Qr=new er(0),this.Kr=!1,this.Kr=!0,this.$r=new fD,this.referenceDelegate=e(this),this.Ur=new wD(this),this.indexManager=new rD,this.remoteDocumentCache=function(A){return new pD(A)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new _1(n),this.Gr=new dD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new gD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const A=new BD(this.Qr.next());return this.referenceDelegate.zr(),r(A).next(s=>this.referenceDelegate.jr(A).next(()=>s)).toPromise().then(s=>(A.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BD extends Eb{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Jr=new Rw,this.Yr=null}static Zr(e){return new Ef(e)}get Xr(){if(this.Yr)return this.Yr;throw Ce()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(A=>this.Xr.add(A.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(A=>{A.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const A=de.fromPath(r);return this.ei(e,A).next(s=>{s||n.removeEntry(A,Se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class Eh{constructor(e,n){this.persistence=e,this.ti=new RA(r=>Ln(r.path),(r,A)=>r.isEqual(A)),this.garbageCollector=R1(this,n)}static Zr(e,n){return new Eh(e,n)}zr(){}jr(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Yn(e){const n=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(A=>r+A))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}Zn(e,n){return M.forEach(this.ti,(r,A)=>this.nr(e,r,A).next(s=>s?M.resolve():n(A)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const A=this.persistence.getRemoteDocumentCache(),s=A.newChangeBuffer();return A.Or(e,i=>this.nr(e,i,n).next(o=>{o||(r++,s.removeEntry(i,Se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ti.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.ti.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.ti.set(n,e.currentSequenceNumber),M.resolve()}Wr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Td(e.data.value)),n}nr(e,n,r){return M.or([()=>this.persistence.Hr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const A=this.ti.get(n);return M.resolve(A!==void 0&&A>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.serializer=e}O(e,n,r,A){const s=new pf("createOrUpgrade",n);r<1&&A>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xy,{unique:!0}),a.createObjectStore("documentMutations")}(e),Lx(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=M.resolve();return r<3&&A>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),Lx(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&A>=4&&(r!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xy,{unique:!0});const h=c.store("mutations"),f=d.map(m=>h.put(m));return M.waitFor(f)})}(e,s))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&A>=5&&(i=i.next(()=>this.ni(s))),r<6&&A>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&A>=7&&(i=i.next(()=>this.ii(s))),r<8&&A>=8&&(i=i.next(()=>this.si(e,s))),r<9&&A>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&A>=10&&(i=i.next(()=>this.oi(s))),r<11&&A>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&A>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:r4});c.createIndex("collectionPathOverlayIndex",A4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",s4,{unique:!1})})(e)})),r<13&&A>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:zN});c.createIndex("documentKeyIndex",$N),c.createIndex("collectionGroupIndex",WN)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&A>=14&&(i=i.next(()=>this.ai(e,s))),r<15&&A>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:ZN}).createIndex("sequenceNumberIndex",e4,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:t4}).createIndex("documentKeyIndex",n4,{unique:!1})}(e))),r<16&&A>=16&&(i=i.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&A>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let n=0;return e.store("remoteDocuments").J((r,A)=>{n+=Ih(A)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(A=>M.forEach(A,s=>{const i=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",i).next(o=>M.forEach(o,a=>{Fe(a.userId===s.userId);const c=hi(this.serializer,a);return Q1(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(A=>{const s=[];return r.J((i,o)=>{const a=new At(i),c=function(h){return[0,Ln(h)]}(a);s.push(n.get(c).next(d=>d?M.resolve():(h=>n.put({targetId:0,path:Ln(h),sequenceNumber:A.highestListenSequenceNumber}))(a)))}).next(()=>M.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:YN});const r=n.store("collectionParents"),A=new kw,s=i=>{if(A.add(i)){const o=i.lastSegment(),a=i.popLast();return r.put({collectionId:o,parent:Ln(a)})}};return n.store("remoteDocuments").J({H:!0},(i,o)=>{const a=new At(i);return s(a.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([i,o,a],c)=>{const d=$r(o);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,A)=>{const s=wl(A),i=b1(this.serializer,s);return n.put(i)})}_i(e,n){const r=n.store("remoteDocuments"),A=[];return r.J((s,i)=>{const o=n.store("remoteDocumentsV14"),a=function(h){return h.document?new de(At.fromString(h.document.name).popFirst(5)):h.noDocument?de.fromSegments(h.noDocument.path):h.unknownDocument?de.fromSegments(h.unknownDocument.path):Ce()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};A.push(o.put(c))}).next(()=>M.waitFor(A))}ai(e,n){const r=n.store("mutations"),A=D1(this.serializer),s=new Nw(Ef.Zr,this.serializer.ct);return r.U().next(i=>{const o=new Map;return i.forEach(a=>{var c;let d=(c=o.get(a.userId))!==null&&c!==void 0?c:Je();hi(this.serializer,a).keys().forEach(h=>d=d.add(h)),o.set(a.userId,d)}),M.forEach(o,(a,c)=>{const d=new gn(c),h=Cf.lt(this.serializer,d),f=s.getIndexManager(d),m=If.lt(d,this.serializer,f,s.referenceDelegate);return new P1(A,m,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Im(n,er.oe),a).next()})})}}function Lx(t){t.createObjectStore("targetDocuments",{keyPath:JN}).createIndex("documentTargetsIndex",XN,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qN,{unique:!0}),t.createObjectStore("targetGlobal")}const Kg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dw{constructor(e,n,r,A,s,i,o,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=i,this.document=o,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!Dw.D())throw new J(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aD(this,A),this.Ai=n+"main",this.serializer=new _1(a),this.Ri=new Xr(this.Ai,this.hi,new vD(this.serializer)),this.$r=new X4,this.Ur=new sD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=D1(this.serializer),this.Gr=new J4,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&en("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(H.FAILED_PRECONDITION,Kg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new er(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ws(e))return X("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Al(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return Mu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=cn(n,"clientMetadata");return r.U().next(A=>{const s=this.xi(A,18e5),i=A.filter(o=>s.indexOf(o)===-1);return M.forEach(i,o=>r.delete(o.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):Al(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new J(H.FAILED_PRECONDITION,Kg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mu(e).U().next(r=>this.xi(r,5e3).find(A=>{if(this.clientId!==A.clientId){const s=!this.networkEnabled&&A.networkEnabled,i=!this.inForeground&&A.inForeground,o=this.networkEnabled===A.networkEnabled;if(s||i&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&X("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Im(e,er.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Mu(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return If.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Cf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("IndexedDbPersistence","Starting transaction:",e);const A=n==="readonly"?"readonly":"readwrite",s=function(a){return a===17?a4:a===16?o4:a===15?vw:a===14?Ub:a===13?Qb:a===12?i4:a===11?Fb:void Ce()}(this.hi);let i;return this.Ri.runTransaction(e,A,s,o=>(i=new Im(o,this.Qr?this.Qr.next():er.oe),n==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw en(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new J(H.FAILED_PRECONDITION,Ib);return r(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>r(i)))).then(o=>(i.raiseOnCommittedEvent(),o))}Ki(e){return Al(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(H.FAILED_PRECONDITION,Kg)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Al(e).put("owner",n)}static D(){return Xr.D()}bi(e){const n=Al(e);return n.get("owner").next(r=>this.vi(r)?(X("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(en(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;sb()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return X("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return en("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){en("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Al(t){return cn(t,"owner")}function Mu(t){return cn(t,"clientMetadata")}function Pw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,r,A){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=A}static Wi(e,n){let r=Je(),A=Je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:A=A.add(s.doc.key)}return new Lw(e,n.fromCache,r,A)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sb()?8:_b(ln())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,A){const s={result:null};return this.Yi(e,n).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.Zi(e,n,A,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new yD;return this.Xi(e,n,i).next(o=>{if(s.result=o,this.zi)return this.es(e,n,i,o.size)})}).next(()=>s.result)}es(e,n,r,A){return r.documentReadCount<this.ji?(uo()<=rt.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(uo()<=rt.DEBUG&&X("QueryEngine","Query:",ho(n),"scans",r.documentReadCount,"local documents and returns",A,"documents as results."),r.documentReadCount>this.Hi*A?(uo()<=rt.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):M.resolve())}Yi(e,n){if(cx(n))return M.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(A=>A===0?null:(n.limit!==null&&A===1&&(n=vh(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=Je(...s);return this.Ji.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.ts(n,o);return this.ns(n,c,i,a.readTime)?this.Yi(e,vh(n,null,"F")):this.rs(e,c,n,a)}))})))}Zi(e,n,r,A){return cx(n)||A.isEqual(Se.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const i=this.ts(n,s);return this.ns(n,i,r,A)?M.resolve(null):(uo()<=rt.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",A.toString(),ho(n)),this.rs(e,i,n,xb(A,-1)).next(o=>o))})}ts(e,n){let r=new vt(Jb(e));return n.forEach((A,s)=>{Oc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,A){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(A)>0)}Xi(e,n,r){return uo()<=rt.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",ho(n)),this.Ji.getDocumentsMatchingQuery(e,n,pr.min(),r)}rs(e,n,r,A){return this.Ji.getDocumentsMatchingQuery(e,r,A).next(s=>(n.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n,r,A){this.persistence=e,this.ss=n,this.serializer=A,this.os=new bt(Oe),this._s=new RA(s=>Ri(s),jc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new P1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function M1(t,e,n,r){return new xD(t,e,n,r)}async function j1(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let A;return n.mutationQueue.getAllMutationBatches(r).next(s=>(A=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],o=[];let a=Je();for(const c of A){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of s){o.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:o}))})})}function CD(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const A=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,a,c,d){const h=c.batch,f=h.keys();let m=M.resolve();return f.forEach(B=>{m=m.next(()=>d.getEntry(a,B)).next(v=>{const _=c.docVersions.get(B);Fe(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,A,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=Je();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,A))})}function H1(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function ID(t,e){const n=ie(t),r=e.snapshotVersion;let A=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});A=n.os;const o=[];e.targetChanges.forEach((d,h)=>{const f=A.get(h);if(!f)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Gt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),A=A.insert(h,m),function(v,_,x){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,m,d)&&o.push(n.Ur.updateTargetData(s,m))});let a=nr(),c=Je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(O1(s,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!r.isEqual(Se.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return M.waitFor(o).next(()=>i.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(n.os=A,s))}function O1(t,e,n){let r=Je(),A=Je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=nr();return n.forEach((o,a)=>{const c=s.get(o);a.isFoundDocument()!==c.isFoundDocument()&&(A=A.add(o)),a.isNoDocument()&&a.version.isEqual(Se.min())?(e.removeEntry(o,a.readTime),i=i.insert(o,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(o,a)):X("LocalStore","Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:A}})}function ED(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oa(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let A;return n.Ur.getTargetData(r,e).next(s=>s?(A=s,M.resolve(A)):n.Ur.allocateTargetId(r).next(i=>(A=new hA(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,A).next(()=>A))))}).then(r=>{const A=n.os.get(r.targetId);return(A===null||r.snapshotVersion.compareTo(A.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function aa(t,e,n){const r=ie(t),A=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,A))}catch(i){if(!Ws(i))throw i;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.os=r.os.remove(e),r._s.delete(A.target)}function _h(t,e,n){const r=ie(t);let A=Se.min(),s=Je();return r.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=ie(a),f=h._s.get(d);return f!==void 0?M.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,i,Mn(e)).next(o=>{if(o)return A=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(i,o.targetId).next(a=>{s=a})}).next(()=>r.ss.getDocumentsMatchingQuery(i,e,n?A:Se.min(),n?s:Je())).next(o=>(G1(r,qb(e),o),{documents:o,Ts:s})))}function V1(t,e){const n=ie(t),r=ie(n.Ur),A=n.os.get(e);return A?Promise.resolve(A.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(i=>i?i.target:null))}function K1(t,e){const n=ie(t),r=n.us.get(e)||Se.min();return n.persistence.runTransaction("Get new document changes","readonly",A=>n.cs.getAllFromCollectionGroup(A,e,xb(r,-1),Number.MAX_SAFE_INTEGER)).then(A=>(G1(n,e,A),A))}function G1(t,e,n){let r=t.us.get(e)||Se.min();n.forEach((A,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function _D(t,e,n,r){const A=ie(t);let s=Je(),i=nr();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const o=A.cs.newChangeBuffer({trackRemovals:!0}),a=await oa(A,function(d){return Mn(xa(At.fromString(`__bundle__/docs/${d}`)))}(r));return A.persistence.runTransaction("Apply bundle documents","readwrite",c=>O1(c,o,i).next(d=>(o.apply(c),d)).next(d=>A.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>A.Ur.addMatchingKeys(c,s,a.targetId)).next(()=>A.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function bD(t,e,n=Je()){const r=await oa(t,Mn(Uw(e.bundledQuery))),A=ie(t);return A.persistence.runTransaction("Save named query","readwrite",s=>{const i=tn(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return A.Gr.saveNamedQuery(s,e);const o=r.withResumeToken(Gt.EMPTY_BYTE_STRING,i);return A.os=A.os.insert(o.targetId,o),A.Ur.updateTargetData(s,o).next(()=>A.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>A.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>A.Gr.saveNamedQuery(s,e))})}function Mx(t,e){return`firestore_clients_${t}_${e}`}function jx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Gg(t,e){return`firestore_targets_${t}_${e}`}class bh{constructor(e,n,r,A){this.user=e,this.batchId=n,this.state=r,this.error=A}static Rs(e,n,r){const A=JSON.parse(r);let s,i=typeof A=="object"&&["pending","acknowledged","rejected"].indexOf(A.state)!==-1&&(A.error===void 0||typeof A.error=="object");return i&&A.error&&(i=typeof A.error.message=="string"&&typeof A.error.code=="string",i&&(s=new J(A.error.code,A.error.message))),i?new bh(e,n,A.state,s):(en("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let A,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(A=new J(r.error.code,r.error.message))),s?new jl(e,r.state,A):(en("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Th{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let A=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Cw();for(let i=0;A&&i<r.activeTargetIds.length;++i)A=bb(r.activeTargetIds[i]),s=s.add(r.activeTargetIds[i]);return A?new Th(e,s):(en("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Mw{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Mw(n.clientId,n.onlineState):(en("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Lm{constructor(){this.activeTargetIds=Cw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zg{constructor(e,n,r,A,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=A,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new bt(Oe),this.started=!1,this.bs=[];const i=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Mx(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Lm),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const A=this.getItem(Mx(this.persistenceKey,r));if(A){const s=Th.Rs(r,A);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,A)=>{A.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const A=this.storage.getItem(Gg(this.persistenceKey,e));if(A){const s=jl.Rs(e,A);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Gg(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(A=>{this.Qs(A)}),this.currentUser=e,r.forEach(A=>{this.addPendingMutation(A)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return X("SharedClientState","READ",e,n),n}setItem(e,n){X("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){X("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(X("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void en("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let i=er.oe;if(s!=null)try{const o=JSON.parse(s);Fe(typeof o=="number"),i=o}catch(o){en("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==er.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(A=>this.syncEngine.eo(A)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const A=new bh(this.currentUser,e,n,r),s=jx(this.persistenceKey,this.currentUser,e);this.setItem(s,A.Vs())}Qs(e){const n=jx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const A=Gg(this.persistenceKey,e),s=new jl(e,n,r);this.setItem(A,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return Th.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),A=Number(r[1]),s=r[2]!==void 0?r[2]:null;return bh.Rs(new gn(s),A,n)}Ys(e,n){const r=this.Ms.exec(e),A=Number(r[1]);return jl.Rs(A,n)}Ls(e){return Mw.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);X("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),A=this.ks(this.Ss),s=this.ks(r),i=[],o=[];return s.forEach(a=>{A.has(a)||i.push(a)}),A.forEach(a=>{s.has(a)||o.push(a)}),this.syncEngine.io(i,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Cw();return e.forEach((r,A)=>{n=n.unionWith(A.activeTargetIds)}),n}}class z1{constructor(){this.so=new Lm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=null;function $g(){return ju===null?ju=function(){return 268435456+Math.round(2147483648*Math.random())}():ju++,"0x"+ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class UD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${A}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${A}`:`project_id=${A}&database_id=${s}`}get Fo(){return!1}Mo(n,r,A,s,i){const o=$g(),a=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${o}:`,a,A);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,i),this.No(n,a,c,A).then(d=>(X("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw gr("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",a,"request:",A),d})}Lo(n,r,A,s,i,o){return this.Mo(n,r,A,s,i)}Oo(n,r,A){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>n[i]=s),A&&A.headers.forEach((s,i)=>n[i]=s)}xo(n,r){const A=FD[n];return`${this.Do}/v1/${r}:${A}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,A){const s=$g();return new Promise((i,o)=>{const a=new hb;a.setWithCredentials(!0),a.listenOnce(fb.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ed.NO_ERROR:const d=a.getResponseJson();X(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),i(d);break;case Ed.TIMEOUT:X(Sn,`RPC '${e}' ${s} timed out`),o(new J(H.DEADLINE_EXCEEDED,"Request time out"));break;case Ed.HTTP_ERROR:const h=a.getStatus();if(X(Sn,`RPC '${e}' ${s} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const B=function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(x)>=0?x:H.UNKNOWN}(m.status);o(new J(B,m.message))}else o(new J(H.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new J(H.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{X(Sn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(A);X(Sn,`RPC '${e}' ${s} sending request:`,A),a.send(n,"POST",c,r,15)})}Bo(e,n,r){const A=$g(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=mb(),o=pb(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=s.join("");X(Sn,`Creating RPC '${e}' stream ${A}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,m=!1;const B=new QD({Io:_=>{m?X(Sn,`Not sending because RPC '${e}' stream ${A} is closed:`,_):(f||(X(Sn,`Opening RPC '${e}' stream ${A} transport.`),h.open(),f=!0),X(Sn,`RPC '${e}' stream ${A} sending:`,_),h.send(_))},To:()=>h.close()}),v=(_,x,w)=>{_.listen(x,I=>{try{w(I)}catch(F){setTimeout(()=>{throw F},0)}})};return v(h,gl.EventType.OPEN,()=>{m||(X(Sn,`RPC '${e}' stream ${A} transport opened.`),B.yo())}),v(h,gl.EventType.CLOSE,()=>{m||(m=!0,X(Sn,`RPC '${e}' stream ${A} transport closed`),B.So())}),v(h,gl.EventType.ERROR,_=>{m||(m=!0,gr(Sn,`RPC '${e}' stream ${A} transport errored:`,_),B.So(new J(H.UNAVAILABLE,"The operation could not be completed")))}),v(h,gl.EventType.MESSAGE,_=>{var x;if(!m){const w=_.data[0];Fe(!!w);const I=w,F=I.error||((x=I[0])===null||x===void 0?void 0:x.error);if(F){X(Sn,`RPC '${e}' stream ${A} received error:`,F);const U=F.status;let R=function(E){const Q=nn[E];if(Q!==void 0)return c1(Q)}(U),y=F.message;R===void 0&&(R=H.INTERNAL,y="Unknown error status: "+U+" with message "+F.message),m=!0,B.So(new J(R,y)),h.close()}else X(Sn,`RPC '${e}' stream ${A} received:`,w),B.bo(w)}}),v(o,gb.STAT_EVENT,_=>{_.stat===xm.PROXY?X(Sn,`RPC '${e}' stream ${A} detected buffering proxy`):_.stat===xm.NOPROXY&&X(Sn,`RPC '${e}' stream ${A} detected no buffering proxy`)}),setTimeout(()=>{B.wo()},0),B}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return typeof window<"u"?window:null}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){return new M4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r=1e3,A=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=A,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),A=Math.max(0,n-r);A>0&&X("ExponentialBackoff",`Backing off for ${A} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,A,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r,A,s,i,o,a){this.ui=e,this.Ho=r,this.Jo=A,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new jw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(en(n.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,A])=>{this.Yo===n&&this.P_(r,A)},r=>{e(()=>{const A=new J(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(A)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(A=>{r(()=>this.I_(A))}),this.stream.onMessage(A=>{r(()=>++this.e_==1?this.E_(A):this.onNext(A))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SD extends W1{constructor(e,n,r,A,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=O4(this.serializer,e),r=function(s){if(!("targetChange"in s))return Se.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Se.min():i.readTime?tn(i.readTime):Se.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=km(this.serializer),n.addTarget=function(s,i){let o;const a=i.target;if(o=wh(a)?{documents:v1(s,a)}:{query:xf(s,a)._t},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=f1(s,i.resumeToken);const c=Um(s,i.expectedCount);c!==null&&(o.expectedCount=c)}else if(i.snapshotVersion.compareTo(Se.min())>0){o.readTime=ia(s,i.snapshotVersion.toTimestamp());const c=Um(s,i.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=K4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=km(this.serializer),n.removeTarget=e,this.a_(n)}}class kD extends W1{constructor(e,n,r,A,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,A,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=V4(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=km(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>xc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD extends class{}{constructor(e,n,r,A){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=A,this.y_=!1}w_(){if(this.y_)throw new J(H.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,Sm(n,r),A,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(H.UNKNOWN,s.toString())})}Lo(e,n,r,A,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,Sm(n,r),A,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(H.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ND{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(en(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,A,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(i=>{r.enqueueAndForget(async()=>{Js(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=ie(a);c.L_.add(4),await Ea(c),c.q_.set("Unknown"),c.L_.delete(4),await $c(c)}(this))})}),this.q_=new ND(r,A)}}async function $c(t){if(Js(t))for(const e of t.B_)await e(!0)}async function Ea(t){for(const e of t.B_)await e(!1)}function _f(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vw(n)?Ow(n):ba(n).r_()&&Hw(n,e))}function la(t,e){const n=ie(t),r=ba(n);n.N_.delete(e),r.r_()&&q1(n,e),n.N_.size===0&&(r.r_()?r.o_():Js(n)&&n.q_.set("Unknown"))}function Hw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ba(t).A_(e)}function q1(t,e){t.Q_.xe(e),ba(t).R_(e)}function Ow(t){t.Q_=new N4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ba(t).start(),t.q_.v_()}function Vw(t){return Js(t)&&!ba(t).n_()&&t.N_.size>0}function Js(t){return ie(t).L_.size===0}function J1(t){t.Q_=void 0}async function PD(t){t.q_.set("Online")}async function LD(t){t.N_.forEach((e,n)=>{Hw(t,e)})}async function MD(t,e){J1(t),Vw(t)?(t.q_.M_(e),Ow(t)):t.q_.set("Unknown")}async function jD(t,e,n){if(t.q_.set("Online"),e instanceof h1&&e.state===2&&e.cause)try{await async function(A,s){const i=s.cause;for(const o of s.targetIds)A.N_.has(o)&&(await A.remoteSyncer.rejectListen(o,i),A.N_.delete(o),A.Q_.removeTarget(o))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fh(t,r)}else if(e instanceof Ud?t.Q_.Ke(e):e instanceof d1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Se.min()))try{const r=await H1(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.Q_.rt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach((a,c)=>{const d=s.N_.get(a);if(!d)return;s.N_.set(a,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),q1(s,a);const h=new hA(d.target,a,c,d.sequenceNumber);Hw(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await Fh(t,r)}}async function Fh(t,e,n){if(!Ws(e))throw e;t.L_.add(1),await Ea(t),t.q_.set("Offline"),n||(n=()=>H1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $c(t)})}function X1(t,e){return e().catch(n=>Fh(t,n,e))}async function _a(t){const e=ie(t),n=Ls(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HD(e);)try{const A=await ED(e.localStore,r);if(A===null){e.O_.length===0&&n.o_();break}r=A.batchId,OD(e,A)}catch(A){await Fh(e,A)}Y1(e)&&Z1(e)}function HD(t){return Js(t)&&t.O_.length<10}function OD(t,e){t.O_.push(e);const n=Ls(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Y1(t){return Js(t)&&!Ls(t).n_()&&t.O_.length>0}function Z1(t){Ls(t).start()}async function VD(t){Ls(t).p_()}async function KD(t){const e=Ls(t);for(const n of t.O_)e.m_(n.mutations)}async function GD(t,e,n){const r=t.O_.shift(),A=bw.from(r,e,n);await X1(t,()=>t.remoteSyncer.applySuccessfulWrite(A)),await _a(t)}async function zD(t,e){e&&Ls(t).V_&&await async function(r,A){if(function(i){return l1(i)&&i!==H.ABORTED}(A.code)){const s=r.O_.shift();Ls(r).s_(),await X1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,A)),await _a(r)}}(t,e),Y1(t)&&Z1(t)}async function Ox(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=Js(n);n.L_.add(3),await Ea(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $c(n)}async function Mm(t,e){const n=ie(t);e?(n.L_.delete(2),await $c(n)):e||(n.L_.add(2),await Ea(n),n.q_.set("Unknown"))}function ba(t){return t.K_||(t.K_=function(n,r,A){const s=ie(n);return s.w_(),new SD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:PD.bind(null,t),Ro:LD.bind(null,t),mo:MD.bind(null,t),d_:jD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Vw(t)?Ow(t):t.q_.set("Unknown")):(await t.K_.stop(),J1(t))})),t.K_}function Ls(t){return t.U_||(t.U_=function(n,r,A){const s=ie(n);return s.w_(),new kD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,A)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VD.bind(null,t),mo:zD.bind(null,t),f_:KD.bind(null,t),g_:GD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _a(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,A,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=A,this.removalCallback=s,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,A,s){const i=Date.now()+r,o=new Kw(e,n,i,A,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ta(t,e){if(en("AsyncQueue",`${e}: ${t}`),Ws(t))return new J(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=pl(),this.sortedSet=new bt(this.comparator)}static emptySet(e){return new Mo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const A=n.getNext().key,s=r.getNext().key;if(!A.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.W_=new bt(de.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ca{constructor(e,n,r,A,s,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=A,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,A,s){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new ca(e,n,Mo.emptySet(n),i,r,A,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let A=0;A<n.length;A++)if(n[A].type!==r[A].type||!n[A].doc.isEqual(r[A].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WD{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const A=ie(n),s=A.queries;A.queries=Kx(),s.forEach((i,o)=>{for(const a of o.j_)a.onError(r)})})(this,new J(H.ABORTED,"Firestore shutting down"))}}function Kx(){return new RA(t=>Wb(t),Hc)}async function Gw(t,e){const n=ie(t);let r=3;const A=e.query;let s=n.queries.get(A);s?!s.H_()&&e.J_()&&(r=2):(s=new $D,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(A,!0);break;case 1:s.z_=await n.onListen(A,!1);break;case 2:await n.onFirstRemoteStoreListen(A)}}catch(i){const o=Ta(i,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(o)}n.queries.set(A,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&$w(n)}async function zw(t,e){const n=ie(t),r=e.query;let A=3;const s=n.queries.get(r);if(s){const i=s.j_.indexOf(e);i>=0&&(s.j_.splice(i,1),s.j_.length===0?A=e.J_()?0:1:!s.H_()&&e.J_()&&(A=2))}switch(A){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qD(t,e){const n=ie(t);let r=!1;for(const A of e){const s=A.query,i=n.queries.get(s);if(i){for(const o of i.j_)o.X_(A)&&(r=!0);i.z_=A}}r&&$w(n)}function JD(t,e,n){const r=ie(t),A=r.queries.get(e);if(A)for(const s of A.j_)s.onError(n);r.queries.delete(e)}function $w(t){t.Y_.forEach(e=>{e.next()})}var jm,Gx;(Gx=jm||(jm={})).ea="default",Gx.Cache="cache";class Ww{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const A of e.docChanges)A.type!==3&&r.push(A);e=new ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jm.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.serializer=e}Es(e){return Yr(this.serializer,e)}ds(e){return e.metadata.exists?B1(this.serializer,e.document,!1):Qt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return tn(e)}}class YD{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=At.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new zx(this.serializer);for(const A of e)if(A.metadata.queries){const s=r.Es(A.metadata.name);for(const i of A.metadata.queries){const o=(n.get(i)||Je()).add(s);n.set(i,o)}}return n}async complete(){const e=await _D(this.localStore,new zx(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await bD(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function eT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.key=e}}class nT{constructor(e){this.key=e}}class rT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Je(),this.mutatedKeys=Je(),this.Aa=Jb(e),this.Ra=new Mo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Vx,A=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,i=A,o=!1;const a=this.query.limitType==="F"&&A.size===this.query.limit?A.last():null,c=this.query.limitType==="L"&&A.size===this.query.limit?A.first():null;if(e.inorderTraversal((d,h)=>{const f=A.get(d),m=Oc(this.query,h)?h:null,B=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;f&&m?f.data.isEqual(m.data)?B!==v&&(r.track({type:3,doc:m}),_=!0):this.ga(f,m)||(r.track({type:2,doc:m}),_=!0,(a&&this.Aa(m,a)>0||c&&this.Aa(m,c)<0)&&(o=!0)):!f&&m?(r.track({type:0,doc:m}),_=!0):f&&!m&&(r.track({type:1,doc:f}),_=!0,(a||c)&&(o=!0)),_&&(m?(i=i.add(m),s=v?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:i,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,A){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(m,B){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return v(m)-v(B)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),A=A!=null&&A;const o=n&&!A?this.ya():[],a=this.da.size===0&&this.current&&!A?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new ca(this.query,e.Ra,s,i,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new nT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new tT(r))}),n}ba(e){this.Ta=e.Ts,this.da=Je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ca.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eP{constructor(e){this.key=e,this.va=!1}}class tP{constructor(e,n,r,A,s,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=A,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new RA(o=>Wb(o),Hc),this.Ma=new Map,this.xa=new Set,this.Oa=new bt(de.comparator),this.Na=new Map,this.La=new Rw,this.Ba={},this.ka=new Map,this.qa=Mi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nP(t,e,n=!0){const r=bf(t);let A;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),A=s.view.Da()):A=await AT(r,e,n,!0),A}async function rP(t,e){const n=bf(t);await AT(n,e,!0,!1)}async function AT(t,e,n,r){const A=await oa(t.localStore,Mn(e)),s=A.targetId,i=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await qw(t,e,s,i==="current",A.resumeToken)),t.isPrimaryClient&&n&&_f(t.remoteStore,A),o}async function qw(t,e,n,r,A){t.Ka=(h,f,m)=>async function(v,_,x,w){let I=_.view.ma(x);I.ns&&(I=await _h(v.localStore,_.query,!1).then(({documents:y})=>_.view.ma(y,I)));const F=w&&w.targetChanges.get(_.targetId),U=w&&w.targetMismatches.get(_.targetId)!=null,R=_.view.applyChanges(I,v.isPrimaryClient,F,U);return Hm(v,_.targetId,R.wa),R.snapshot}(t,h,f,m);const s=await _h(t.localStore,e,!0),i=new rT(e,s.Ts),o=i.ma(s.documents),a=Gc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",A),c=i.applyChanges(o,t.isPrimaryClient,a);Hm(t,n,c.wa);const d=new ZD(e,n,i);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function AP(t,e,n){const r=ie(t),A=r.Fa.get(e),s=r.Ma.get(A.targetId);if(s.length>1)return r.Ma.set(A.targetId,s.filter(i=>!Hc(i,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(A.targetId),r.sharedClientState.isActiveQueryTarget(A.targetId)||await aa(r.localStore,A.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(A.targetId),n&&la(r.remoteStore,A.targetId),ua(r,A.targetId)}).catch($s)):(ua(r,A.targetId),await aa(r.localStore,A.targetId,!0))}async function sP(t,e){const n=ie(t),r=n.Fa.get(e),A=n.Ma.get(r.targetId);n.isPrimaryClient&&A.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),la(n.remoteStore,r.targetId))}async function iP(t,e,n){const r=Zw(t);try{const A=await function(i,o){const a=ie(i),c=Mt.now(),d=o.reduce((m,B)=>m.add(B.key),Je());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let B=nr(),v=Je();return a.cs.getEntries(m,d).next(_=>{B=_,B.forEach((x,w)=>{w.isValidDocument()||(v=v.add(x))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,B)).next(_=>{h=_;const x=[];for(const w of o){const I=S4(w,h.get(w.key).overlayedDocument);I!=null&&x.push(new NA(w.key,I,Pb(I.value.mapValue),Lt.exists(!0)))}return a.mutationQueue.addMutationBatch(m,c,x,o)}).next(_=>{f=_;const x=_.applyToLocalDocumentSet(h,v);return a.documentOverlayCache.saveOverlays(m,_.batchId,x)})}).then(()=>({batchId:f.batchId,changes:Yb(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(A.batchId),function(i,o,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new bt(Oe)),c=c.insert(o,a),i.Ba[i.currentUser.toKey()]=c}(r,A.batchId,n),await DA(r,A.changes),await _a(r.remoteStore)}catch(A){const s=Ta(A,"Failed to persist write");n.reject(s)}}async function sT(t,e){const n=ie(t);try{const r=await ID(n.localStore,e);e.targetChanges.forEach((A,s)=>{const i=n.Na.get(s);i&&(Fe(A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size<=1),A.addedDocuments.size>0?i.va=!0:A.modifiedDocuments.size>0?Fe(i.va):A.removedDocuments.size>0&&(Fe(i.va),i.va=!1))}),await DA(n,r,e)}catch(r){await $s(r)}}function $x(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const A=[];r.Fa.forEach((s,i)=>{const o=i.view.Z_(e);o.snapshot&&A.push(o.snapshot)}),function(i,o){const a=ie(i);a.onlineState=o;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(o)&&(c=!0)}),c&&$w(a)}(r.eventManager,e),A.length&&r.Ca.d_(A),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oP(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const A=r.Na.get(e),s=A&&A.key;if(s){let i=new bt(de.comparator);i=i.insert(s,Qt.newNoDocument(s,Se.min()));const o=Je().add(s),a=new Kc(Se.min(),new Map,new bt(Oe),i,o);await sT(r,a),r.Oa=r.Oa.remove(s),r.Na.delete(e),Yw(r)}else await aa(r.localStore,e,!1).then(()=>ua(r,e,n)).catch($s)}async function aP(t,e){const n=ie(t),r=e.batch.batchId;try{const A=await CD(n.localStore,e);Xw(n,r,null),Jw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await DA(n,A)}catch(A){await $s(A)}}async function lP(t,e,n){const r=ie(t);try{const A=await function(i,o){const a=ie(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,o).next(h=>(Fe(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(r.localStore,e);Xw(r,e,n),Jw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await DA(r,A)}catch(A){await $s(A)}}async function cP(t,e){const n=ie(t);Js(n.remoteStore)||X("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=ie(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const A=n.ka.get(r)||[];A.push(e),n.ka.set(r,A)}catch(r){const A=Ta(r,"Initialization of waitForPendingWrites() operation failed");e.reject(A)}}function Jw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Xw(t,e,n){const r=ie(t);let A=r.Ba[r.currentUser.toKey()];if(A){const s=A.get(e);s&&(n?s.reject(n):s.resolve(),A=A.remove(e)),r.Ba[r.currentUser.toKey()]=A}}function ua(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||iT(t,r)})}function iT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(la(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Yw(t))}function Hm(t,e,n){for(const r of n)r instanceof tT?(t.La.addReference(r.key,e),uP(t,r)):r instanceof nT?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||iT(t,r.key)):Ce()}function uP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),Yw(t))}function Yw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(At.fromString(e)),r=t.qa.next();t.Na.set(r,new eP(n)),t.Oa=t.Oa.insert(n,r),_f(t.remoteStore,new hA(Mn(xa(n.path)),r,"TargetPurposeLimboResolution",er.oe))}}async function DA(t,e,n){const r=ie(t),A=[],s=[],i=[];r.Fa.isEmpty()||(r.Fa.forEach((o,a)=>{i.push(r.Ka(a,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){A.push(c);const h=Lw.Wi(a.targetId,c);s.push(h)}}))}),await Promise.all(i),r.Ca.d_(A),await async function(a,c){const d=ie(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,f=>M.forEach(f.$i,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>M.forEach(f.Ui,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Ws(h))throw h;X("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.os.get(f),B=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(B);d.os=d.os.insert(f,v)}}}(r.localStore,s))}async function dP(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await j1(n.localStore,e);n.currentUser=e,function(s,i){s.ka.forEach(o=>{o.forEach(a=>{a.reject(new J(H.CANCELLED,i))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await DA(n,r.hs)}}function hP(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return Je().add(r.key);{let A=Je();const s=n.Ma.get(e);if(!s)return A;for(const i of s){const o=n.Fa.get(i);A=A.unionWith(o.view.Va)}return A}}async function fP(t,e){const n=ie(t),r=await _h(n.localStore,e.query,!0),A=e.view.ba(r);return n.isPrimaryClient&&Hm(n,e.targetId,A.wa),A}async function gP(t,e){const n=ie(t);return K1(n.localStore,e).then(r=>DA(n,r))}async function pP(t,e,n,r){const A=ie(t),s=await function(o,a){const c=ie(o),d=ie(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):M.resolve(null)))}(A.localStore,e);s!==null?(n==="pending"?await _a(A.remoteStore):n==="acknowledged"||n==="rejected"?(Xw(A,e,r||null),Jw(A,e),function(o,a){ie(ie(o).mutationQueue).On(a)}(A.localStore,e)):Ce(),await DA(A,s)):X("SyncEngine","Cannot apply mutation batch with id: "+e)}async function mP(t,e){const n=ie(t);if(bf(n),Zw(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),A=await Wx(n,r.toArray());n.Qa=!0,await Mm(n.remoteStore,!0);for(const s of A)_f(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let A=Promise.resolve();n.Ma.forEach((s,i)=>{n.sharedClientState.isLocalQueryTarget(i)?r.push(i):A=A.then(()=>(ua(n,i),aa(n.localStore,i,!0))),la(n.remoteStore,i)}),await A,await Wx(n,r),function(i){const o=ie(i);o.Na.forEach((a,c)=>{la(o.remoteStore,c)}),o.La.pr(),o.Na=new Map,o.Oa=new bt(de.comparator)}(n),n.Qa=!1,await Mm(n.remoteStore,!1)}}async function Wx(t,e,n){const r=ie(t),A=[],s=[];for(const i of e){let o;const a=r.Ma.get(i);if(a&&a.length!==0){o=await oa(r.localStore,Mn(a[0]));for(const c of a){const d=r.Fa.get(c),h=await fP(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await V1(r.localStore,i);o=await oa(r.localStore,c),await qw(r,oT(c),i,!1,o.resumeToken)}A.push(o)}return r.Ca.d_(s),A}function oT(t){return Gb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wP(t){return function(n){return ie(ie(n).persistence).Qi()}(ie(t).localStore)}async function BP(t,e,n,r){const A=ie(t);if(A.Qa)return void X("SyncEngine","Ignoring unexpected query state notification.");const s=A.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const i=await K1(A.localStore,qb(s[0])),o=Kc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Gt.EMPTY_BYTE_STRING);await DA(A,i,o);break}case"rejected":await aa(A.localStore,e,!0),ua(A,e,r);break;default:Ce()}}async function vP(t,e,n){const r=bf(t);if(r.Qa){for(const A of e){if(r.Ma.has(A)&&r.sharedClientState.isActiveQueryTarget(A)){X("SyncEngine","Adding an already active target "+A);continue}const s=await V1(r.localStore,A),i=await oa(r.localStore,s);await qw(r,oT(s),i.targetId,!1,i.resumeToken),_f(r.remoteStore,i)}for(const A of n)r.Ma.has(A)&&await aa(r.localStore,A,!1).then(()=>{la(r.remoteStore,A),ua(r,A)}).catch($s)}}function bf(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oP.bind(null,e),e.Ca.d_=qD.bind(null,e.eventManager),e.Ca.$a=JD.bind(null,e.eventManager),e}function Zw(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lP.bind(null,e),e}function yP(t,e,n){const r=ie(t);(async function(s,i,o){try{const a=await i.getMetadata();if(await function(m,B){const v=ie(m),_=tn(B.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",x=>v.Gr.getBundleMetadata(x,B.id)).then(x=>!!x&&x.createTime.compareTo(_)>=0)}(s.localStore,a))return await i.close(),o._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(eT(a));const c=new YD(a,s.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&o._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await DA(s,h.Ia,void 0),await function(m,B){const v=ie(m);return v.persistence.runTransaction("Save bundle","readwrite",_=>v.Gr.saveBundleMetadata(_,B))}(s.localStore,a),o._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return gr("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(A=>{r.sharedClientState.notifyBundleLoaded(A)})}class Ms{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return M1(this.persistence,new L1,e.initialUser,this.serializer)}Ga(e){return new Nw(Ef.Zr,this.serializer)}Wa(e){return new z1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ms.provider={build:()=>new Ms};class xP extends Ms{constructor(e){super(),this.cacheSizeBytes=e}ja(e,n){Fe(this.persistence.referenceDelegate instanceof Eh);const r=this.persistence.referenceDelegate.garbageCollector;return new k1(r,e.asyncQueue,n)}Ga(e){const n=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Nw(r=>Eh.Zr(r,n),this.serializer)}}class eB extends Ms{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Zw(this.Ja.syncEngine),await _a(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return M1(this.persistence,new L1,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new k1(r,e.asyncQueue,n)}Ha(e,n){const r=new VN(n,this.persistence);return new ON(e.asyncQueue,r)}Ga(e){const n=Pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Dw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$1(),Sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new z1}}class aT extends eB{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof zg&&(this.sharedClientState.syncEngine={no:pP.bind(null,n),ro:BP.bind(null,n),io:vP.bind(null,n),Qi:wP.bind(null,n),eo:gP.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await mP(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=$1();if(!zg.D(n))throw new J(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class js{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$x(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dP.bind(null,this.syncEngine),await Mm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WD}()}createDatastore(e){const n=zc(e.databaseInfo.databaseId),r=function(s){return new UD(s)}(e.databaseInfo);return function(s,i,o,a){return new RD(s,i,o,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,A,s,i,o){return new DD(r,A,s,i,o)}(this.localStore,this.datastore,e.asyncQueue,n=>$x(this.syncEngine,n,0),function(){return Hx.D()?new Hx:new TD}())}createSyncEngine(e,n){return function(A,s,i,o,a,c,d){const h=new tP(A,s,i,o,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(A){const s=ie(A);X("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ea(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}js.provider={build:()=>new js};function qx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new mn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const A=await this.iu(r);return new XD(JSON.parse(A),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(A,s){const i=ie(A),o={documents:s.map(h=>yc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,At.emptyPath(),o,s.length),c=new Map;a.forEach(h=>{const f=H4(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=c.get(h.toString());Fe(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ia(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const A=de.fromPath(r);this.mutations.push(new Ew(A,this.precondition(A)))}),await async function(r,A){const s=ie(r),i={writes:A.map(o=>xc(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,At.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ce();n=Se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Se.min())?Lt.exists(!1):Lt.updateTime(n):Lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Se.min()))throw new J(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lt.updateTime(n)}return Lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,A,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=A,this.deferred=s,this._u=r.maxAttempts,this.t_=new jw(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new IP(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(A=>{this.lu(A)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Mc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!l1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n,r,A,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=A,this.user=gn.UNAUTHENTICATED,this.clientId=mw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{X("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(X("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ta(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wg(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async A=>{r.isEqual(A)||(await j1(e.localStore,A),r=A)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tB(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ox(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,A)=>Ox(e.remoteStore,A)),t._onlineComponents=e}async function tB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(A){return A.name==="FirebaseError"?A.code===H.FAILED_PRECONDITION||A.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&A instanceof DOMException)||A.code===22||A.code===20||A.code===11}(n))throw n;gr("Error using user provided cache. Falling back to memory cache: "+n),await Wg(t,new Ms)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Wg(t,new Ms);return t._offlineComponents}async function Ff(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Jx(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Jx(t,new js))),t._onlineComponents}function lT(t){return tB(t).then(e=>e.persistence)}function Fa(t){return tB(t).then(e=>e.localStore)}function cT(t){return Ff(t).then(e=>e.remoteStore)}function nB(t){return Ff(t).then(e=>e.syncEngine)}function uT(t){return Ff(t).then(e=>e.datastore)}async function da(t){const e=await Ff(t),n=e.eventManager;return n.onListen=nP.bind(null,e.syncEngine),n.onUnlisten=AP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),n}function bP(t){return t.asyncQueue.enqueue(async()=>{const e=await lT(t),n=await cT(t);return e.setNetworkEnabled(!0),function(A){const s=ie(A);return s.L_.delete(0),$c(s)}(n)})}function TP(t){return t.asyncQueue.enqueue(async()=>{const e=await lT(t),n=await cT(t);return e.setNetworkEnabled(!1),async function(A){const s=ie(A);s.L_.add(0),await Ea(s),s.q_.set("Offline")}(n)})}function FP(t,e){const n=new mn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await function(c,d){const h=ie(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(A,s);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new J(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ta(o,`Failed to get document '${s} from cache`);i.reject(a)}}(await Fa(t),e,n)),n.promise}function dT(t,e,n={}){const r=new mn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const d=new Tf({next:f=>{d.Za(),i.enqueueAndForget(()=>zw(s,h));const m=f.docs.has(o);!m&&f.fromCache?c.reject(new J(H.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&a&&a.source==="server"?c.reject(new J(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Ww(xa(o.path),d,{includeMetadataChanges:!0,_a:!0});return Gw(s,h)}(await da(t),t.asyncQueue,e,n,r)),r.promise}function QP(t,e){const n=new mn;return t.asyncQueue.enqueueAndForget(async()=>async function(A,s,i){try{const o=await _h(A,s,!0),a=new rT(s,o.Ts),c=a.ma(o.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(o){const a=Ta(o,`Failed to execute query '${s} against cache`);i.reject(a)}}(await Fa(t),e,n)),n.promise}function hT(t,e,n={}){const r=new mn;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,c){const d=new Tf({next:f=>{d.Za(),i.enqueueAndForget(()=>zw(s,h)),f.fromCache&&a.source==="server"?c.reject(new J(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Ww(o,d,{includeMetadataChanges:!0,_a:!0});return Gw(s,h)}(await da(t),t.asyncQueue,e,n,r)),r.promise}function UP(t,e,n){const r=new mn;return t.asyncQueue.enqueueAndForget(async()=>{try{const A=await uT(t);r.resolve(async function(i,o,a){var c;const d=ie(i),{request:h,ut:f,parent:m}=y1(d.serializer,zb(o),a);d.connection.Fo||delete h.parent;const B=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(_=>!!_.result);Fe(B.length===1);const v=(c=B[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(v).reduce((_,x)=>(_[f[x]]=v[x],_),{})}(A,e,n))}catch(A){r.reject(A)}}),r.promise}function SP(t,e){const n=new Tf(e);return t.asyncQueue.enqueueAndForget(async()=>function(A,s){ie(A).Y_.add(s),s.next()}(await da(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(A,s){ie(A).Y_.delete(s)}(await da(t),n))}}function kP(t,e,n,r){const A=function(i,o){let a;return a=typeof i=="string"?u1().encode(i):i,function(d,h){return new CP(d,h)}(function(d,h){if(d instanceof Uint8Array)return qx(d,h);if(d instanceof ArrayBuffer)return qx(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,zc(e));t.asyncQueue.enqueueAndForget(async()=>{yP(await nB(t),A,r)})}function RP(t,e){return t.asyncQueue.enqueue(async()=>function(r,A){const s=ie(r);return s.persistence.runTransaction("Get named query","readonly",i=>s.Gr.getNamedQuery(i,A))}(await Fa(t),e))}function NP(t,e){return t.asyncQueue.enqueue(async()=>async function(r,A){const s=ie(r),i=s.indexManager,o=[];return s.persistence.runTransaction("Configure indexes","readwrite",a=>i.getFieldIndexes(a).next(c=>function(h,f,m,B,v){h=[...h],f=[...f],h.sort(m),f.sort(m);const _=h.length,x=f.length;let w=0,I=0;for(;w<x&&I<_;){const F=m(h[I],f[w]);F<0?v(h[I++]):F>0?B(f[w++]):(w++,I++)}for(;w<x;)B(f[w++]);for(;I<_;)v(h[I++])}(c,A,LN,d=>{o.push(i.addFieldIndex(a,d))},d=>{o.push(i.deleteFieldIndex(a,d))})).next(()=>M.waitFor(o)))}(await Fa(t),e))}function DP(t,e){return t.asyncQueue.enqueue(async()=>function(r,A){ie(r).ss.zi=A}(await Fa(t),e))}function PP(t){return t.asyncQueue.enqueue(async()=>function(n){const r=ie(n),A=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>A.deleteAllFieldIndexes(s))}(await Fa(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t,e,n){if(!n)throw new J(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gT(t,e,n,r){if(e===!0&&r===!0)throw new J(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yx(t){if(!de.isDocumentKey(t))throw new J(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zx(t){if(de.isDocumentKey(t))throw new J(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce()}function Ze(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qf(t);throw new J(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pT(t,e){if(e<=0)throw new J(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,A){return r.timeoutSeconds===A.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,n,r,A){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=A,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bb;switch(r.type){case"firstParty":return new kN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xx.get(n);r&&(X("ComponentProvider","Removing Datastore"),Xx.delete(n),r.terminate())}(this),Promise.resolve()}}function mT(t,e,n,r={}){var A;const s=(t=Ze(t,Wc))._getSettings(),i=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=gn.MOCK_USER;else{o=nR(r.mockUserToken,(A=t._app)===null||A===void 0?void 0:A.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new J(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new gn(c)}t._authCredentials=new QN(new wb(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wn(this.firestore,e,this._query)}}class Wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class Pr extends wn{constructor(e,n,r){super(e,n,xa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new de(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function Om(t,e,...n){if(t=Ct(t),rB("collection","path",e),t instanceof Wc){const r=At.fromString(e,...n);return Zx(r),new Pr(t,null,r)}{if(!(t instanceof Wt||t instanceof Pr))throw new J(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return Zx(r),new Pr(t.firestore,null,r)}}function LP(t,e){if(t=Ze(t,Wc),rB("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wn(t,null,function(r){return new kA(At.emptyPath(),r)}(e))}function Kr(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=mw.newId()),rB("doc","path",e),t instanceof Wc){const r=At.fromString(e,...n);return Yx(r),new Wt(t,null,new de(r))}{if(!(t instanceof Wt||t instanceof Pr))throw new J(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return Yx(r),new Wt(t.firestore,t instanceof Pr?t.converter:null,new de(r))}}function MP(t,e){return t=Ct(t),e=Ct(e),(t instanceof Wt||t instanceof Pr)&&(e instanceof Wt||e instanceof Pr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function AB(t,e){return t=Ct(t),e=Ct(e),t instanceof wn&&e instanceof wn&&t.firestore===e.firestore&&Hc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new jw(this,"async_queue_retry"),this.Vu=()=>{const r=Sd();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new mn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ws(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const A=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw en("INTERNAL UNHANDLED ERROR: ",A),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const A=Kw.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(A),A}fu(){this.Eu&&Ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Vm(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const A=n;for(const s of r)if(s in A&&typeof A[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wT{constructor(){this._progressObserver={},this._taskCompletionResolver=new mn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=-1;class yt extends Wc{constructor(e,n,r,A){super(e,n,r,A),this.type="firestore",this._queue=new tC,this._persistenceKey=(A==null?void 0:A.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tC(e),this._firestoreClient=void 0,await e}}}function HP(t,e,n){n||(n="(default)");const r=Lc(t,"firestore");if(r.isInitialized(n)){const A=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Ss(s,e))return A;throw new J(H.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new J(H.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function BT(t,e){const n=typeof t=="object"?t:gw(),r=typeof t=="string"?t:e||"(default)",A=Lc(n,"firestore").getImmediate({identifier:r});if(!A._initialized){const s=eR("firestore");s&&mT(A,...s)}return A}function jt(t){if(t._terminated)throw new J(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||vT(t),t._firestoreClient}function vT(t){var e,n,r;const A=t._freezeSettings(),s=function(o,a,c,d){return new u4(o,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,A);t._componentsProvider||!((n=A.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=A.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:A.localCache._offlineComponentProvider,_online:A.localCache._onlineComponentProvider}),t._firestoreClient=new _P(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const a=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(a),_online:a}}(t._componentsProvider))}function OP(t,e){gr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return yT(t,js.provider,{build:r=>new eB(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function VP(t){gr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();yT(t,js.provider,{build:n=>new aT(n,e.cacheSizeBytes)})}function yT(t,e,n){if((t=Ze(t,yt))._firestoreClient||t._terminated)throw new J(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new J(H.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},vT(t)}function KP(t){if(t._initialized&&!t._terminated)throw new J(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Xr.D())return Promise.resolve();const A=r+"main";await Xr.delete(A)}(Pw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function GP(t){return function(n){const r=new mn;return n.asyncQueue.enqueueAndForget(async()=>cP(await nB(n),r)),r.promise}(jt(t=Ze(t,yt)))}function zP(t){return bP(jt(t=Ze(t,yt)))}function $P(t){return TP(jt(t=Ze(t,yt)))}function WP(t){return hN(t.app,"firestore",t._databaseId.database),t._delete()}function qP(t,e){const n=jt(t=Ze(t,yt)),r=new wT;return kP(n,t._databaseId,e,r),r}function JP(t,e){return RP(jt(t=Ze(t,yt)),e).then(n=>n?new wn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class xT{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hs(Gt.fromBase64String(e))}catch(n){throw new J(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hs(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function XP(){return new Xs("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,A){if(r.length!==A.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==A[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=/^__.*__$/;class ZP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new NA(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}class CT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new NA(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class Sf{constructor(e,n,r,A,s,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=A,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.Ou(e),A}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),A=this.Fu({path:r,xu:!1});return A.vu(),A}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(IT(this.Cu)&&YP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zc(e)}Qu(e,n,r,A=!1){return new Sf({Cu:e,methodName:n,qu:r,path:Ut.emptyPath(),xu:!1,ku:A},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $i(t){const e=t._freezeSettings(),n=zc(t._databaseId);return new eL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kf(t,e,n,r,A,s={}){const i=t.Qu(s.merge||s.mergeFields?2:0,e,n,A);uB("Data must be an object, but it was:",i,r);const o=bT(r,i);let a,c;if(s.merge)a=new tr(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Cc(e,h,n);if(!i.contains(f))throw new J(H.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);FT(d,f)||d.push(f)}a=new tr(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new ZP(new In(o),a,c)}class Jc extends Ys{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jc}}function ET(t,e,n){return new Sf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sB extends Ys{_toFieldTransform(e){return new Vc(e.path,new Aa)}isEqual(e){return e instanceof sB}}class iB extends Ys{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=ET(this,e,!0),r=this.Ku.map(s=>Wi(s,n)),A=new Ni(r);return new Vc(e.path,A)}isEqual(e){return e instanceof iB&&Ss(this.Ku,e.Ku)}}class oB extends Ys{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=ET(this,e,!0),r=this.Ku.map(s=>Wi(s,n)),A=new Di(r);return new Vc(e.path,A)}isEqual(e){return e instanceof oB&&Ss(this.Ku,e.Ku)}}class aB extends Ys{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new sa(e.serializer,t1(e.serializer,this.$u));return new Vc(e.path,n)}isEqual(e){return e instanceof aB&&this.$u===e.$u}}function lB(t,e,n,r){const A=t.Qu(1,e,n);uB("Data must be an object, but it was:",A,r);const s=[],i=In.empty();qs(r,(a,c)=>{const d=Rf(e,a,n);c=Ct(c);const h=A.Nu(d);if(c instanceof Jc)s.push(d);else{const f=Wi(c,h);f!=null&&(s.push(d),i.set(d,f))}});const o=new tr(s);return new CT(i,o,A.fieldTransforms)}function cB(t,e,n,r,A,s){const i=t.Qu(1,e,n),o=[Cc(e,r,n)],a=[A];if(s.length%2!=0)throw new J(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(Cc(e,s[f])),a.push(s[f+1]);const c=[],d=In.empty();for(let f=o.length-1;f>=0;--f)if(!FT(c,o[f])){const m=o[f];let B=a[f];B=Ct(B);const v=i.Nu(m);if(B instanceof Jc)c.push(m);else{const _=Wi(B,v);_!=null&&(c.push(m),d.set(m,_))}}const h=new tr(c);return new CT(d,h,i.fieldTransforms)}function _T(t,e,n,r=!1){return Wi(n,t.Qu(r?4:3,e))}function Wi(t,e){if(TT(t=Ct(t)))return uB("Unsupported field value:",e,t),bT(t,e);if(t instanceof Ys)return function(r,A){if(!IT(A.Cu))throw A.Bu(`${r._methodName}() can only be used with update() and set()`);if(!A.path)throw A.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(A);s&&A.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,A){const s=[];let i=0;for(const o of r){let a=Wi(o,A.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,A){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t1(A.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Mt.fromDate(r);return{timestampValue:ia(A.serializer,s)}}if(r instanceof Mt){const s=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ia(A.serializer,s)}}if(r instanceof Uf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hs)return{bytesValue:f1(A.serializer,r._byteString)};if(r instanceof Wt){const s=A.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw A.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Qw(r.firestore._databaseId||A.databaseId,r._key.path)}}if(r instanceof qc)return function(i,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw o.Bu("VectorValues must only contain numeric values.");return Iw(o.serializer,a)})}}}}}}(r,A);throw A.Bu(`Unsupported field value: ${Qf(r)}`)}(t,e)}function bT(t,e){const n={};return kb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(t,(r,A)=>{const s=Wi(A,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof Uf||t instanceof Hs||t instanceof Wt||t instanceof Ys||t instanceof qc)}function uB(t,e,n){if(!TT(n)||!function(A){return typeof A=="object"&&A!==null&&(Object.getPrototypeOf(A)===Object.prototype||Object.getPrototypeOf(A)===null)}(n)){const r=Qf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Cc(t,e,n){if((e=Ct(e))instanceof Xs)return e._internalPath;if(typeof e=="string")return Rf(t,e);throw Qh("Field path arguments must be of type string or ",t,!1,void 0,n)}const tL=new RegExp("[~\\*/\\[\\]]");function Rf(t,e,n){if(e.search(tL)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xs(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qh(t,e,n,r,A){const s=r&&!r.isEmpty(),i=A!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let a="";return(s||i)&&(a+=" (found",s&&(a+=` in field ${r}`),i&&(a+=` in document ${A}`),a+=")"),new J(H.INVALID_ARGUMENT,o+t+a)}function FT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,A,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=A,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nL extends Ic{data(){return super.data()}}function Nf(t,e){return typeof e=="string"?Rf(t,e):e instanceof Xs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dB{}class Qa extends dB{}function Km(t,e,...n){let r=[];e instanceof dB&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof qi).length,o=s.filter(a=>a instanceof Ua).length;if(i>1||i>0&&o>0)throw new J(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const A of r)t=A._apply(t);return t}class Ua extends Qa{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ua(e,n,r)}_apply(e){const n=this._parse(e);return ST(e._query,n),new wn(e.firestore,e.converter,Qm(e._query,n))}_parse(e){const n=$i(e.firestore);return function(s,i,o,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){rC(h,d);const m=[];for(const B of h)m.push(nC(a,s,B));f={arrayValue:{values:m}}}else f=nC(a,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||rC(h,d),f=_T(o,i,h,d==="in"||d==="not-in");return st.create(c,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rL(t,e,n){const r=e,A=Nf("where",t);return Ua._create(A,r,n)}class qi extends dB{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qi(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(A,s){let i=A;const o=s.getFlattenedFilters();for(const a of o)ST(i,a),i=Qm(i,a)}(e._query,n),new wn(e.firestore,e.converter,Qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function AL(...t){return t.forEach(e=>kT("or",e)),qi._create("or",t)}function sL(...t){return t.forEach(e=>kT("and",e)),qi._create("and",t)}class Df extends Qa{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Df(e,n)}_apply(e){const n=function(A,s,i){if(A.startAt!==null)throw new J(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(A.endAt!==null)throw new J(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(s,i)}(e._query,this._field,this._direction);return new wn(e.firestore,e.converter,function(A,s){const i=A.explicitOrderBy.concat([s]);return new kA(A.path,A.collectionGroup,i,A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e._query,n))}}function iL(t,e="asc"){const n=e,r=Nf("orderBy",t);return Df._create(r,n)}class Xc extends Qa{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xc(e,n,r)}_apply(e){return new wn(e.firestore,e.converter,vh(e._query,this._limit,this._limitType))}}function oL(t){return pT("limit",t),Xc._create("limit",t,"F")}function aL(t){return pT("limitToLast",t),Xc._create("limitToLast",t,"L")}class Yc extends Qa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Yc(e,n,r)}_apply(e){const n=UT(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(A,s){return new kA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,s,A.endAt)}(e._query,n))}}function lL(...t){return Yc._create("startAt",t,!0)}function cL(...t){return Yc._create("startAfter",t,!1)}class Zc extends Qa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Zc(e,n,r)}_apply(e){const n=UT(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(A,s){return new kA(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,s)}(e._query,n))}}function uL(...t){return Zc._create("endBefore",t,!1)}function dL(...t){return Zc._create("endAt",t,!0)}function UT(t,e,n,r){if(n[0]=Ct(n[0]),n[0]instanceof Ic)return function(s,i,o,a,c){if(!a)throw new J(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const h of Lo(s))if(h.field.isKeyField())d.push(ki(i,a.key));else{const f=a.data.field(h.field);if(mf(f))throw new J(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=h.field.canonicalString();throw new J(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(f)}return new Ps(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const A=$i(t.firestore);return function(i,o,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new J(H.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let B=0;B<d.length;B++){const v=d[B];if(f[B].field.isKeyField()){if(typeof v!="string")throw new J(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!xw(i)&&v.indexOf("/")!==-1)throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const _=i.path.child(At.fromString(v));if(!de.isDocumentKey(_))throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const x=new de(_);m.push(ki(o,x))}else{const _=_T(a,c,v);m.push(_)}}return new Ps(m,h)}(t._query,t.firestore._databaseId,A,e,n,r)}}function nC(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new J(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xw(e)&&n.indexOf("/")!==-1)throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(At.fromString(n));if(!de.isDocumentKey(r))throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ki(t,new de(r))}if(n instanceof Wt)return ki(t,n._key);throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(n)}.`)}function rC(t,e){if(!Array.isArray(t)||t.length===0)throw new J(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ST(t,e){const n=function(A,s){for(const i of A)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function kT(t,e){if(!(e instanceof Ua||e instanceof qi))throw new J(H.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class hB{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_A(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qs(e,(A,s)=>{r[A]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,A;const s=(A=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||A===void 0?void 0:A.map(i=>Dt(i.doubleValue));return new qc(s)}convertGeoPoint(e){return new Uf(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const n=EA(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);Fe(E1(r));const A=new Rs(r.get(1),r.get(3)),s=new de(r.popFirst(5));return A.isEqual(n)||en(`Document ${s} contains a document reference within a different database (${A.projectId}/${A.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class hL extends hB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){return new ha("sum",Cc("sum",t))}function gL(t){return new ha("avg",Cc("average",t))}function RT(){return new ha("count")}function pL(t,e){var n,r;return t instanceof ha&&e instanceof ha&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function mL(t,e){return AB(t.query,e.query)&&Ss(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ji extends Ic{constructor(e,n,r,A,s,i){super(e,n,r,A,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Hl extends ji{data(e={}){return super.data(e)}}class Hi{constructor(e,n,r,A){this._firestore=e,this._userDataWriter=n,this._snapshot=A,this.metadata=new us(A.hasPendingWrites,A.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hl(this._firestore,this._userDataWriter,r.key,r,new us(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(A,s){if(A._snapshot.oldDocs.isEmpty()){let i=0;return A._snapshot.docChanges.map(o=>{const a=new Hl(A._firestore,A._userDataWriter,o.doc.key,o.doc,new us(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=A._snapshot.oldDocs;return A._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Hl(A._firestore,A._userDataWriter,o.doc.key,o.doc,new us(A._snapshot.mutatedKeys.has(o.doc.key),A._snapshot.fromCache),A.query.converter);let c=-1,d=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:wL(o.type),doc:a,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function wL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}function BL(t,e){return t instanceof ji&&e instanceof ji?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Hi&&e instanceof Hi&&t._firestore===e._firestore&&AB(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t){t=Ze(t,Wt);const e=Ze(t.firestore,yt);return dT(jt(e),t._key).then(n=>fB(e,t,n))}class Zs extends hB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function yL(t){t=Ze(t,Wt);const e=Ze(t.firestore,yt),n=jt(e),r=new Zs(e);return FP(n,t._key).then(A=>new ji(e,r,t._key,A,new us(A!==null&&A.hasLocalMutations,!0),t.converter))}function xL(t){t=Ze(t,Wt);const e=Ze(t.firestore,yt);return dT(jt(e),t._key,{source:"server"}).then(n=>fB(e,t,n))}function NT(t){t=Ze(t,wn);const e=Ze(t.firestore,yt),n=jt(e),r=new Zs(e);return QT(t._query),hT(n,t._query).then(A=>new Hi(e,r,t,A))}function CL(t){t=Ze(t,wn);const e=Ze(t.firestore,yt),n=jt(e),r=new Zs(e);return QP(n,t._query).then(A=>new Hi(e,r,t,A))}function IL(t){t=Ze(t,wn);const e=Ze(t.firestore,yt),n=jt(e),r=new Zs(e);return hT(n,t._query,{source:"server"}).then(A=>new Hi(e,r,t,A))}function kd(t,e,n){t=Ze(t,Wt);const r=Ze(t.firestore,yt),A=Pf(t.converter,e,n);return Sa(r,[kf($i(r),"setDoc",t._key,A,t.converter!==null,n).toMutation(t._key,Lt.none())])}function EL(t,e,n,...r){t=Ze(t,Wt);const A=Ze(t.firestore,yt),s=$i(A);let i;return i=typeof(e=Ct(e))=="string"||e instanceof Xs?cB(s,"updateDoc",t._key,e,n,r):lB(s,"updateDoc",t._key,e),Sa(A,[i.toMutation(t._key,Lt.exists(!0))])}function DT(t){return Sa(Ze(t.firestore,yt),[new Ia(t._key,Lt.none())])}function _L(t,e){const n=Ze(t.firestore,yt),r=Kr(t),A=Pf(t.converter,e);return Sa(n,[kf($i(t.firestore),"addDoc",r._key,A,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function Rd(t,...e){var n,r,A;t=Ct(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Vm(e[i])||(s=e[i],i++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Vm(e[i])){const h=e[i];e[i]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[i+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[i+2]=(A=h.complete)===null||A===void 0?void 0:A.bind(h)}let a,c,d;if(t instanceof Wt)c=Ze(t.firestore,yt),d=xa(t._key.path),a={next:h=>{e[i]&&e[i](fB(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=Ze(t,wn);c=Ze(h.firestore,yt),d=h._query;const f=new Zs(c);a={next:m=>{e[i]&&e[i](new Hi(c,f,h,m))},error:e[i+1],complete:e[i+2]},QT(t._query)}return function(f,m,B,v){const _=new Tf(v),x=new Ww(m,_,B);return f.asyncQueue.enqueueAndForget(async()=>Gw(await da(f),x)),()=>{_.Za(),f.asyncQueue.enqueueAndForget(async()=>zw(await da(f),x))}}(jt(c),d,o,a)}function bL(t,e){return SP(jt(t=Ze(t,yt)),Vm(e)?e:{next:e})}function Sa(t,e){return function(r,A){const s=new mn;return r.asyncQueue.enqueueAndForget(async()=>iP(await nB(r),A,s)),s.promise}(jt(t),e)}function fB(t,e,n){const r=n.docs.get(e._key),A=new Zs(t);return new ji(t,A,e._key,r,new us(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){return PT(t,{count:RT()})}function PT(t,e){const n=Ze(t.firestore,yt),r=jt(n),A=Sb(e,(s,i)=>new a1(i,s.aggregateType,s._internalFieldPath));return UP(r,t._query,A).then(s=>function(o,a,c){const d=new Zs(o);return new xT(a,d,c)}(n,t,s))}class FL{constructor(e){this.kind="memory",this._onlineComponentProvider=js.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Ms.provider}toJSON(){return{kind:this.kind}}}class QL{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=LT(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class UL{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Ms.provider}toJSON(){return{kind:this.kind}}}class SL{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new xP(e)}}toJSON(){return{kind:this.kind}}}function kL(){return new UL}function RL(t){return new SL(t==null?void 0:t.cacheSizeBytes)}function NL(t){return new FL(t)}function DL(t){return new QL(t)}class PL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=js.provider,this._offlineComponentProvider={build:n=>new eB(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class LL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=js.provider,this._offlineComponentProvider={build:n=>new aT(n,e==null?void 0:e.cacheSizeBytes)}}}function LT(t){return new PL(t==null?void 0:t.forceOwnership)}function ML(){return new LL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$i(e)}set(e,n,r){this._verifyNotCommitted();const A=ts(e,this._firestore),s=Pf(A.converter,n,r),i=kf(this._dataReader,"WriteBatch.set",A._key,s,A.converter!==null,r);return this._mutations.push(i.toMutation(A._key,Lt.none())),this}update(e,n,r,...A){this._verifyNotCommitted();const s=ts(e,this._firestore);let i;return i=typeof(n=Ct(n))=="string"||n instanceof Xs?cB(this._dataReader,"WriteBatch.update",s._key,n,r,A):lB(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(i.toMutation(s._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ts(e,this._firestore);return this._mutations=this._mutations.concat(new Ia(n._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ts(t,e){if((t=Ct(t)).firestore!==e)throw new J(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=$i(n)}get(n){const r=ts(n,this._firestore),A=new hL(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Ce();const i=s[0];if(i.isFoundDocument())return new Ic(this._firestore,A,i.key,i,r.converter);if(i.isNoDocument())return new Ic(this._firestore,A,r._key,null,r.converter);throw Ce()})}set(n,r,A){const s=ts(n,this._firestore),i=Pf(s.converter,r,A),o=kf(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,A);return this._transaction.set(s._key,o),this}update(n,r,A,...s){const i=ts(n,this._firestore);let o;return o=typeof(r=Ct(r))=="string"||r instanceof Xs?cB(this._dataReader,"Transaction.update",i._key,r,A,s):lB(this._dataReader,"Transaction.update",i._key,r),this._transaction.update(i._key,o),this}delete(n){const r=ts(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ts(e,this._firestore),r=new Zs(this._firestore);return super.get(e).then(A=>new ji(this._firestore,r,n._key,A._document,new us(!1,!1),n.converter))}}function HL(t,e,n){t=Ze(t,yt);const r=Object.assign(Object.assign({},jL),n);return function(s){if(s.maxAttempts<1)throw new J(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,i,o){const a=new mn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await uT(s);new EP(s.asyncQueue,c,o,i,a).au()}),a.promise}(jt(t),A=>e(new jT(t,A)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(){return new Jc("deleteField")}function VL(){return new sB("serverTimestamp")}function KL(...t){return new iB("arrayUnion",t)}function GL(...t){return new oB("arrayRemove",t)}function zL(t){return new aB("increment",t)}function $L(t){return new qc(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){return jt(t=Ze(t,yt)),new MT(t,e=>Sa(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t,e){const n=jt(t=Ze(t,yt));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return gr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const i=typeof s=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new J(H.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,o=[];if(Array.isArray(i.indexes))for(const a of i.indexes){const c=AC(a,"collectionGroup"),d=[];if(Array.isArray(a.fields))for(const h of a.fields){const f=Rf("setIndexConfiguration",AC(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Ii(f,2)):h.order==="ASCENDING"?d.push(new Ii(f,0)):h.order==="DESCENDING"&&d.push(new Ii(f,1))}o.push(new ea(ea.UNKNOWN_ID,c,d,ta.empty()))}return o}(e);return NP(n,r)}function AC(t,e){if(typeof t[e]!="string")throw new J(H.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function qL(t){var e;t=Ze(t,yt);const n=sC.get(t);if(n)return n;if(((e=jt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new OT(t);return sC.set(t,r),r}function JL(t){VT(t,!0)}function XL(t){VT(t,!1)}function YL(t){PP(jt(t._firestore)).then(e=>X("deleting all persistent cache indexes succeeded")).catch(e=>gr("deleting all persistent cache indexes failed",e))}function VT(t,e){DP(jt(t._firestore),e).then(n=>X(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>gr(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const sC=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){var e;const n=(e=jt(Ze(t.firestore,yt))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:xf(n,Mn(t._query))._t}function eM(t,e){var n;const r=Sb(e,(s,i)=>new a1(i,s.aggregateType,s._internalFieldPath)),A=(n=jt(Ze(t.firestore,yt))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return A===void 0?null:y1(A,zb(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return gB.instance.onExistenceFilterMismatch(e)}}class gB{constructor(){this.Uu=new Map}static get instance(){return Hu||(Hu=new gB,function(n){if(yh)throw new Error("a TestingHooksSpi instance is already set");yh=n}(Hu)),Hu}et(e){this.Uu.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Uu;return r.set(n,e),()=>r.delete(n)}}let Hu=null;(function(e,n=!0){(function(A){ya=A})(va),Yo(new Si("firestore",(r,{instanceIdentifier:A,options:s})=>{const i=r.getProvider("app").getImmediate(),o=new yt(new UN(r.getProvider("auth-internal")),new RN(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rs(c.options.projectId,d)}(i,A),i);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),_s(Wy,"4.7.3",e),_s(Wy,"4.7.3","esm2017")})();const nM=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:hB,AggregateField:ha,AggregateQuerySnapshot:xT,Bytes:Hs,CACHE_SIZE_UNLIMITED:jP,CollectionReference:Pr,DocumentReference:Wt,DocumentSnapshot:ji,FieldPath:Xs,FieldValue:Ys,Firestore:yt,FirestoreError:J,GeoPoint:Uf,LoadBundleTask:wT,PersistentCacheIndexManager:OT,Query:wn,QueryCompositeFilterConstraint:qi,QueryConstraint:Qa,QueryDocumentSnapshot:Hl,QueryEndAtConstraint:Zc,QueryFieldFilterConstraint:Ua,QueryLimitConstraint:Xc,QueryOrderByConstraint:Df,QuerySnapshot:Hi,QueryStartAtConstraint:Yc,SnapshotMetadata:us,Timestamp:Mt,Transaction:jT,VectorValue:qc,WriteBatch:MT,_AutoId:mw,_ByteString:Gt,_DatabaseId:Rs,_DocumentKey:de,_EmptyAppCheckTokenProvider:NN,_EmptyAuthCredentialsProvider:Bb,_FieldPath:Ut,_TestingHooks:tM,_cast:Ze,_debugAssert:FN,_internalAggregationQueryToProtoRunAggregationQueryRequest:eM,_internalQueryToProtoQueryTarget:ZL,_isBase64Available:l4,_logWarn:gr,_validateIsNotUsedTogether:gT,addDoc:_L,aggregateFieldEqual:pL,aggregateQuerySnapshotEqual:mL,and:sL,arrayRemove:GL,arrayUnion:KL,average:gL,clearIndexedDbPersistence:KP,collection:Om,collectionGroup:LP,connectFirestoreEmulator:mT,count:RT,deleteAllPersistentCacheIndexes:YL,deleteDoc:DT,deleteField:OL,disableNetwork:$P,disablePersistentCacheIndexAutoCreation:XL,doc:Kr,documentId:XP,enableIndexedDbPersistence:OP,enableMultiTabIndexedDbPersistence:VP,enableNetwork:zP,enablePersistentCacheIndexAutoCreation:JL,endAt:dL,endBefore:uL,ensureFirestoreConfigured:jt,executeWrite:Sa,getAggregateFromServer:PT,getCountFromServer:TL,getDoc:vL,getDocFromCache:yL,getDocFromServer:xL,getDocs:NT,getDocsFromCache:CL,getDocsFromServer:IL,getFirestore:BT,getPersistentCacheIndexManager:qL,increment:zL,initializeFirestore:HP,limit:oL,limitToLast:aL,loadBundle:qP,memoryEagerGarbageCollector:kL,memoryLocalCache:NL,memoryLruGarbageCollector:RL,namedQuery:JP,onSnapshot:Rd,onSnapshotsInSync:bL,or:AL,orderBy:iL,persistentLocalCache:DL,persistentMultipleTabManager:ML,persistentSingleTabManager:LT,query:Km,queryEqual:AB,refEqual:MP,runTransaction:HL,serverTimestamp:VL,setDoc:kd,setIndexConfiguration:WL,setLogLevel:TN,snapshotEqual:BL,startAfter:cL,startAt:lL,sum:fL,terminate:WP,updateDoc:EL,vector:$L,waitForPendingWrites:GP,where:rL,writeBatch:HT},Symbol.toStringTag,{value:"Module"}));function pB(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,r=Object.getOwnPropertySymbols(t);A<r.length;A++)e.indexOf(r[A])<0&&Object.prototype.propertyIsEnumerable.call(t,r[A])&&(n[r[A]]=t[r[A]]);return n}function KT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rM=KT,GT=new Dc("auth","Firebase",KT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new hw("@firebase/auth");function AM(t,...e){Uh.logLevel<=rt.WARN&&Uh.warn(`Auth (${va}): ${t}`,...e)}function Nd(t,...e){Uh.logLevel<=rt.ERROR&&Uh.error(`Auth (${va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,...e){throw mB(t,...e)}function Zr(t,...e){return mB(t,...e)}function zT(t,e,n){const r=Object.assign(Object.assign({},rM()),{[e]:n});return new Dc("auth","Firebase",r).create(e,{appName:t.name})}function bs(t){return zT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mB(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GT.create(t,...e)}function He(t,e,...n){if(!t)throw mB(e,...n)}function fA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function bA(t,e){t||fA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sM(){return iC()==="http:"||iC()==="https:"}function iC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sM()||iR()||"connection"in navigator)?navigator.onLine:!0}function oM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.shortDelay=e,this.longDelay=n,bA(n>e,"Short delay should be less than long delay!"),this.isMobile=rR()||oR()}get(){return iM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t,e){bA(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new eu(3e4,6e4);function Ji(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ei(t,e,n,r,A={}){return WT(t,A,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const o=Pc(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},s);return sR()||(c.referrerPolicy="no-referrer"),$T.fetch()(qT(t,t.config.apiHost,n,o),c)})}async function WT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aM),e);try{const A=new uM(t),s=await Promise.race([n(),A.promise]);A.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Ou(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[a,c]=o.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ou(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Ou(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Ou(t,"user-disabled",i);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zT(t,d,c);Mr(t,d)}}catch(A){if(A instanceof SA)throw A;Mr(t,"network-request-failed",{message:String(A)})}}async function Lf(t,e,n,r,A={}){const s=await ei(t,e,n,r,A);return"mfaPendingCredential"in s&&Mr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function qT(t,e,n,r){const A=`${e}${n}?${r}`;return t.config.emulator?wB(t.config,A):`${t.config.apiScheme}://${A}`}function cM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),lM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ou(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const A=Zr(t,e,r);return A.customData._tokenResponse=n,A}function oC(t){return t!==void 0&&t.enterprise!==void 0}class dM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function hM(t,e){return ei(t,"GET","/v2/recaptchaConfig",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e){return ei(t,"POST","/v1/accounts:delete",e)}async function JT(t,e){return ei(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gM(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),A=BB(r);He(A&&A.exp&&A.auth_time&&A.iat,n.auth,"internal-error");const s=typeof A.firebase=="object"?A.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:A,token:r,authTime:Ol(qg(A.auth_time)),issuedAtTime:Ol(qg(A.iat)),expirationTime:Ol(qg(A.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qg(t){return Number(t)*1e3}function BB(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const A=tb(n);return A?JSON.parse(A):(Nd("Failed to decode base64 JWT payload"),null)}catch(A){return Nd("Caught error parsing JWT payload as JSON",A==null?void 0:A.toString()),null}}function aC(t){const e=BB(t);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof SA&&pM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const A=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ol(this.lastLoginAt),this.creationTime=Ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(t){var e;const n=t.auth,r=await t.getIdToken(),A=await Ec(t,JT(n,{idToken:r}));He(A==null?void 0:A.users.length,n,"internal-error");const s=A.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?XT(s.providerUserInfo):[],o=BM(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new zm(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function wM(t){const e=Ct(t);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BM(t,e){return[...t.filter(r=>!e.some(A=>A.providerId===r.providerId)),...e]}function XT(t){return t.map(e=>{var{providerId:n}=e,r=pB(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(t,e){const n=await WT(t,{},async()=>{const r=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:A,apiKey:s}=t.config,i=qT(t,A,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",$T.fetch()(i,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yM(t,e){return ei(t,"POST","/v2/accounts:revokeToken",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=aC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:A,expiresIn:s}=await vM(e,n);this.updateTokensAndExpiration(r,A,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:A,expirationTime:s}=n,i=new jo;return r&&(He(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),A&&(He(typeof A=="string","internal-error",{appName:e}),i.accessToken=A),s&&(He(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return fA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){He(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gA{constructor(e){var{uid:n,auth:r,stsTokenManager:A}=e,s=pB(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ec(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gM(this,e)}reload(){return wM(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dA(this.auth.app))return Promise.reject(bs(this.auth));const e=await this.getIdToken();return await Ec(this,fM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,A,s,i,o,a,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(A=n.email)!==null&&A!==void 0?A:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,B=(i=n.photoURL)!==null&&i!==void 0?i:void 0,v=(o=n.tenantId)!==null&&o!==void 0?o:void 0,_=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:F,isAnonymous:U,providerData:R,stsTokenManager:y}=n;He(I&&y,e,"internal-error");const C=jo.fromJSON(this.name,y);He(typeof I=="string",e,"internal-error"),GA(h,e.name),GA(f,e.name),He(typeof F=="boolean",e,"internal-error"),He(typeof U=="boolean",e,"internal-error"),GA(m,e.name),GA(B,e.name),GA(v,e.name),GA(_,e.name),GA(x,e.name),GA(w,e.name);const E=new gA({uid:I,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:U,photoURL:B,phoneNumber:m,tenantId:v,stsTokenManager:C,createdAt:x,lastLoginAt:w});return R&&Array.isArray(R)&&(E.providerData=R.map(Q=>Object.assign({},Q))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,n,r=!1){const A=new jo;A.updateFromServerResponse(n);const s=new gA({uid:n.localId,auth:e,stsTokenManager:A,isAnonymous:r});return await Sh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const A=n.users[0];He(A.localId!==void 0,"internal-error");const s=A.providerUserInfo!==void 0?XT(A.providerUserInfo):[],i=!(A.email&&A.passwordHash)&&!(s!=null&&s.length),o=new jo;o.updateFromIdToken(r);const a=new gA({uid:A.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:s,metadata:new zm(A.createdAt,A.lastLoginAt),isAnonymous:!(A.email&&A.passwordHash)&&!(s!=null&&s.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new Map;function pA(t){bA(t instanceof Function,"Expected a class definition");let e=lC.get(t);return e?(bA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YT.type="NONE";const cC=YT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t,e,n){return`firebase:${t}:${e}:${n}`}class Ho{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:A,name:s}=this.auth;this.fullUserKey=Dd(this.userKey,A.apiKey,s),this.fullPersistenceKey=Dd("persistence",A.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ho(pA(cC),e,r);const A=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=A[0]||pA(cC);const i=Dd(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const d=await c._get(i);if(d){const h=gA._fromJSON(e,d);c!==s&&(o=h),s=c;break}}catch{}const a=A.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new Ho(s,e,r):(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new Ho(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AF(e))return"Blackberry";if(sF(e))return"Webos";if(eF(e))return"Safari";if((e.includes("chrome/")||tF(e))&&!e.includes("edge/"))return"Chrome";if(rF(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZT(t=ln()){return/firefox\//i.test(t)}function eF(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tF(t=ln()){return/crios\//i.test(t)}function nF(t=ln()){return/iemobile/i.test(t)}function rF(t=ln()){return/android/i.test(t)}function AF(t=ln()){return/blackberry/i.test(t)}function sF(t=ln()){return/webos/i.test(t)}function vB(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xM(t=ln()){var e;return vB(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CM(){return aR()&&document.documentMode===10}function iF(t=ln()){return vB(t)||rF(t)||sF(t)||AF(t)||/windows phone/i.test(t)||nF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e=[]){let n;switch(t){case"Browser":n=uC(ln());break;case"Worker":n=`${uC(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${va}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((i,o)=>{try{const a=e(s);i(a)}catch(a){o(a)}});r.onAbort=n,this.queue.push(r);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const A of n)try{A()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e={}){return ei(t,"GET","/v2/passwordPolicy",Ji(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=6;class bM{constructor(e){var n,r,A,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:_M,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(A=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&A!==void 0?A:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,A,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(A=a.containsLowercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,A=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),A&&(n.meetsMaxPasswordLength=e.length<=A)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let A=0;A<e.length;A++)r=e.charAt(A),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,A,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=A)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n,r,A){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dC(this),this.idTokenSubscription=new dC(this),this.beforeStateQueue=new IM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pA(n)),this._initializationPromise=this.queue(async()=>{var r,A;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((A=this.currentUser)===null||A===void 0?void 0:A.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await JT(this,{idToken:e}),r=await gA._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dA(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let A=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=A==null?void 0:A._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&(a!=null&&a.user)&&(A=a.user,s=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(A)}catch(i){A=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dA(this.app))return Promise.reject(bs(this));const n=e?Ct(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dA(this.app)?Promise.reject(bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dA(this.app)?Promise.reject(bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EM(this),n=new bM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pA(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[pA(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,A){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,A);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const A=await this._getAppCheckToken();return A&&(n["X-Firebase-AppCheck"]=A),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&AM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ka(t){return Ct(t)}class dC{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FM(t){Mf=t}function aF(t){return Mf.loadJS(t)}function QM(){return Mf.recaptchaEnterpriseScript}function UM(){return Mf.gapiScript}function SM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kM="recaptcha-enterprise",RM="NO_RECAPTCHA";class NM{constructor(e){this.type=kM,this.auth=ka(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{hM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new dM(a);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(a=>{o(a)})})}function A(s,i,o){const a=window.grecaptcha;oC(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(RM)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,i)=>{r(this.auth).then(o=>{if(!n&&oC(window.grecaptcha))A(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=QM();a.length!==0&&(a+=o),aF(a).then(()=>{A(o,s,i)}).catch(c=>{i(c)})}}).catch(o=>{i(o)})})}}async function hC(t,e,n,r=!1){const A=new NM(t);let s;try{s=await A.verify(n)}catch{s=await A.verify(n,!0)}const i=Object.assign({},e);return r?Object.assign(i,{captchaResp:s}):Object.assign(i,{captchaResponse:s}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function fC(t,e,n,r){var A;if(!((A=t._getRecaptchaConfig())===null||A===void 0)&&A.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await hC(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await hC(t,e,n,n==="getOobCode");return r(t,i)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t,e){const n=Lc(t,"auth");if(n.isInitialized()){const A=n.getImmediate(),s=n.getOptions();if(Ss(s,e??{}))return A;Mr(A,"already-initialized")}return n.initialize({options:e})}function PM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LM(t,e,n){const r=ka(t);He(r._canInitEmulator,r,"emulator-config-failed"),He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const A=!1,s=lF(e),{host:i,port:o}=MM(e),a=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${i}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:A})}),jM()}function lF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MM(t){const e=lF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(r);if(A){const s=A[1];return{host:s,port:gC(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:gC(i)}}}function gC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fA("not implemented")}_getIdTokenResponse(e){return fA("not implemented")}_linkToIdToken(e,n){return fA("not implemented")}_getReauthenticationResolver(e){return fA("not implemented")}}async function HM(t,e){return ei(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e){return Lf(t,"POST","/v1/accounts:signInWithPassword",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,e){return Lf(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}async function KM(t,e){return Lf(t,"POST","/v1/accounts:signInWithEmailLink",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends yB{constructor(e,n,r,A=null){super("password",r),this._email=e,this._password=n,this._tenantId=A}static _fromEmailAndPassword(e,n){return new _c(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _c(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fC(e,n,"signInWithPassword",OM);case"emailLink":return VM(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fC(e,r,"signUpPassword",HM);case"emailLink":return KM(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t,e){return Lf(t,"POST","/v1/accounts:signInWithIdp",Ji(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="http://localhost";class Oi extends yB{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:A}=n,s=pB(n,["providerId","signInMethod"]);if(!r||!A)return null;const i=new Oi(r,A);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Oo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oo(e,n)}buildRequest(){const e={requestUri:GM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Pc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $M(t){const e=hl(fl(t)).link,n=e?hl(fl(e)).deep_link_id:null,r=hl(fl(t)).deep_link_id;return(r?hl(fl(r)).link:null)||r||n||e||t}class xB{constructor(e){var n,r,A,s,i,o;const a=hl(fl(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,d=(r=a.oobCode)!==null&&r!==void 0?r:null,h=zM((A=a.mode)!==null&&A!==void 0?A:null);He(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(o=a.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=$M(e);try{return new xB(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.providerId=Ra.PROVIDER_ID}static credential(e,n){return _c._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=xB.parseLink(n);return He(r,"argument-error"),_c._fromEmailAndCode(e,r.code,r.tenantId)}}Ra.PROVIDER_ID="password";Ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends cF{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends tu{constructor(){super("facebook.com")}static credential(e){return Oi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends tu{constructor(){super("github.com")}static credential(e){return Oi._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.GITHUB_SIGN_IN_METHOD="github.com";As.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends tu{constructor(){super("twitter.com")}static credential(e,n){return Oi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,A=!1){const s=await gA._fromIdTokenResponse(e,r,A),i=pC(r);return new fa({user:s,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const A=pC(r);return new fa({user:e,providerId:A,_tokenResponse:r,operationType:n})}}function pC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends SA{constructor(e,n,r,A){var s;super(n.code,n.message),this.operationType=r,this.user=A,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,A){return new kh(e,n,r,A)}}function uF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(t,s,e,r):s})}async function WM(t,e,n=!1){const r=await Ec(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e,n=!1){const{auth:r}=t;if(dA(r.app))return Promise.reject(bs(r));const A="reauthenticate";try{const s=await Ec(t,uF(r,A,e,t),n);He(s.idToken,r,"internal-error");const i=BB(s.idToken);He(i,r,"internal-error");const{sub:o}=i;return He(t.uid===o,r,"user-mismatch"),fa._forOperation(t,A,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dF(t,e,n=!1){if(dA(t.app))return Promise.reject(bs(t));const r="signIn",A=await uF(t,r,e),s=await fa._fromIdTokenResponse(t,r,A);return n||await t._updateCurrentUser(s.user),s}async function JM(t,e){return dF(ka(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t){const e=ka(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function YM(t,e,n){return dA(t.app)?Promise.reject(bs(t)):JM(Ct(t),Ra.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&XM(t),r})}function ZM(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function ej(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function tj(t,e,n,r){return Ct(t).onAuthStateChanged(e,n,r)}function mC(t){return Ct(t).signOut()}const Rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rh,"1"),this.storage.removeItem(Rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj=1e3,rj=10;class fF extends hF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),A=this.localCache[n];r!==A&&e(n,A,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,o,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const A=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);CM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(A,rj):A()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fF.type="LOCAL";const Aj=fF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF extends hF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gF.type="SESSION";const pF=gF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(A=>A.isListeningto(e));if(n)return n;const r=new jf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:A,data:s}=n.data,i=this.handlersMap[A];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:A});const o=Array.from(i).map(async c=>c(n.origin,s)),a=await sj(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:A,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=CB("",20);A.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:A,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(d),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(i),A.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[A.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return window}function oj(t){eA().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(){return typeof eA().WorkerGlobalScope<"u"&&typeof eA().importScripts=="function"}async function aj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cj(){return mF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="firebaseLocalStorageDb",uj=1,Nh="firebaseLocalStorage",BF="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hf(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function dj(){const t=indexedDB.deleteDatabase(wF);return new nu(t).toPromise()}function $m(){const t=indexedDB.open(wF,uj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nh,{keyPath:BF})}catch(A){n(A)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nh)?e(r):(r.close(),await dj(),e(await $m()))})})}async function wC(t,e,n){const r=Hf(t,!0).put({[BF]:e,value:n});return new nu(r).toPromise()}async function hj(t,e){const n=Hf(t,!1).get(e),r=await new nu(n).toPromise();return r===void 0?null:r.value}function BC(t,e){const n=Hf(t,!0).delete(e);return new nu(n).toPromise()}const fj=800,gj=3;class vF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jf._getInstance(cj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await aj(),!this.activeServiceWorker)return;this.sender=new ij(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $m();return await wC(e,Rh,"1"),await BC(e,Rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wC(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(A=>{const s=Hf(A,!1).getAll();return new nu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:A,value:s}of e)r.add(A),JSON.stringify(this.localCache[A])!==JSON.stringify(s)&&(this.notifyListeners(A,s),n.push(A));for(const A of Object.keys(this.localCache))this.localCache[A]&&!r.has(A)&&(this.notifyListeners(A,null),n.push(A));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const A of Array.from(r))A(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vF.type="LOCAL";const pj=vF;new eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t,e){return e?pA(e):(He(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB extends yB{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wj(t){return dF(t.auth,new IB(t),t.bypassAuthState)}function Bj(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),qM(n,new IB(t),t.bypassAuthState)}async function vj(t){const{auth:e,user:n}=t;return He(n,e,"internal-error"),WM(n,new IB(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,n,r,A,s=!1){this.auth=e,this.resolver=r,this.user=A,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:A,tenantId:s,error:i,type:o}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:A||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wj;case"linkViaPopup":case"linkViaRedirect":return vj;case"reauthViaPopup":case"reauthViaRedirect":return Bj;default:Mr(this.auth,"internal-error")}}resolve(e){bA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new eu(2e3,1e4);class Qo extends yF{constructor(e,n,r,A,s){super(e,n,A,s),this.provider=r,this.authWindow=null,this.pollId=null,Qo.currentPopupAction&&Qo.currentPopupAction.cancel(),Qo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){bA(this.filter.length===1,"Popup operations only handle one event");const e=CB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yj.get())};e()}}Qo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="pendingRedirect",Pd=new Map;class Cj extends yF{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pd.get(this.auth._key());if(!e){try{const r=await Ij(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pd.set(this.auth._key(),e)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ij(t,e){const n=bj(e),r=_j(t);if(!await r._isAvailable())return!1;const A=await r._get(n)==="true";return await r._remove(n),A}function Ej(t,e){Pd.set(t._key(),e)}function _j(t){return pA(t._redirectPersistence)}function bj(t){return Dd(xj,t.config.apiKey,t.name)}async function Tj(t,e,n=!1){if(dA(t.app))return Promise.reject(bs(t));const r=ka(t),A=mj(r,e),i=await new Cj(r,A,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=10*60*1e3;class Qj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Uj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xF(e)){const A=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zr(this.auth,A))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fj&&this.cachedEventUids.clear(),this.cachedEventUids.has(vC(e))}saveEventToCache(e){this.cachedEventUids.add(vC(e)),this.lastProcessedEventTime=Date.now()}}function vC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Uj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e={}){return ei(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rj=/^https?/;async function Nj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Sj(t);for(const n of e)try{if(Dj(n))return}catch{}Mr(t,"unauthorized-domain")}function Dj(t){const e=Gm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!Rj.test(n))return!1;if(kj.test(t))return r===t;const A=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=new eu(3e4,6e4);function yC(){const t=eA().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Lj(t){return new Promise((e,n)=>{var r,A,s;function i(){yC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yC(),n(Zr(t,"network-request-failed"))},timeout:Pj.get()})}if(!((A=(r=eA().gapi)===null||r===void 0?void 0:r.iframes)===null||A===void 0)&&A.Iframe)e(gapi.iframes.getContext());else if(!((s=eA().gapi)===null||s===void 0)&&s.load)i();else{const o=SM("iframefcb");return eA()[o]=()=>{gapi.load?i():n(Zr(t,"network-request-failed"))},aF(`${UM()}?onload=${o}`).catch(a=>n(a))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function Mj(t){return Ld=Ld||Lj(t),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=new eu(5e3,15e3),Hj="__/auth/iframe",Oj="emulator/auth/iframe",Vj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gj(t){const e=t.config;He(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wB(e,Oj):`https://${t.config.authDomain}/${Hj}`,r={apiKey:e.apiKey,appName:t.name,v:va},A=Kj.get(t.config.apiHost);A&&(r.eid=A);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Pc(r).slice(1)}`}async function zj(t){const e=await Mj(t),n=eA().gapi;return He(n,t,"internal-error"),e.open({where:document.body,url:Gj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vj,dontclear:!0},r=>new Promise(async(A,s)=>{await r.restyle({setHideOnLeave:!1});const i=Zr(t,"network-request-failed"),o=eA().setTimeout(()=>{s(i)},jj.get());function a(){eA().clearTimeout(o),A(r)}r.ping(a).then(a,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wj=500,qj=600,Jj="_blank",Xj="http://localhost";class xC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yj(t,e,n,r=Wj,A=qj){const s=Math.max((window.screen.availHeight-A)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const a=Object.assign(Object.assign({},$j),{width:r.toString(),height:A.toString(),top:s,left:i}),c=ln().toLowerCase();n&&(o=tF(c)?Jj:n),ZT(c)&&(e=e||Xj,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[m,B])=>`${f}${m}=${B},`,"");if(xM(c)&&o!=="_self")return Zj(e||"",o),new xC(null);const h=window.open(e||"",o,d);He(h,t,"popup-blocked");try{h.focus()}catch{}return new xC(h)}function Zj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH="__/auth/handler",tH="emulator/auth/handler",nH=encodeURIComponent("fac");async function CC(t,e,n,r,A,s){He(t.config.authDomain,t,"auth-domain-config-required"),He(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:va,eventId:A};if(e instanceof cF){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",hR(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof tu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const a=await t._getAppCheckToken(),c=a?`#${nH}=${encodeURIComponent(a)}`:"";return`${rH(t)}?${Pc(o).slice(1)}${c}`}function rH({config:t}){return t.emulator?wB(t,tH):`https://${t.authDomain}/${eH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="webStorageSupport";class AH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pF,this._completeRedirectFn=Tj,this._overrideRedirectResult=Ej}async _openPopup(e,n,r,A){var s;bA((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await CC(e,n,r,Gm(),A);return Yj(e,i,CB())}async _openRedirect(e,n,r,A){await this._originValidation(e);const s=await CC(e,n,r,Gm(),A);return oj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:A,promise:s}=this.eventManagers[n];return A?Promise.resolve(A):(bA(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zj(e),r=new Qj(e);return n.register("authEvent",A=>(He(A==null?void 0:A.authEvent,e,"invalid-auth-event"),{status:r.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jg,{type:Jg},A=>{var s;const i=(s=A==null?void 0:A[0])===null||s===void 0?void 0:s[Jg];i!==void 0&&n(!!i),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Nj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iF()||eF()||vB()}}const sH=AH;var IC="@firebase/auth",EC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aH(t){Yo(new Si("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),A=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=r.options;He(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oF(t)},c=new TM(r,A,s,a);return PM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Yo(new Si("auth-internal",e=>{const n=ka(e.getProvider("auth").getImmediate());return(r=>new iH(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(IC,EC,oH(t)),_s(IC,EC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH=5*60,cH=Ab("authIdTokenMaxAge")||lH;let _C=null;const uH=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cH)return;const A=n==null?void 0:n.token;_C!==A&&(_C=A,await fetch(t,{method:A?"POST":"DELETE",headers:A?{Authorization:`Bearer ${A}`}:{}}))};function dH(t=gw()){const e=Lc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DM(t,{popupRedirectResolver:sH,persistence:[pj,Aj,pF]}),r=Ab("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=uH(s.toString());ej(n,i,()=>i(n.currentUser)),ZM(n,o=>i(o))}}const A=nb("auth");return A&&LM(n,`http://${A}`),n}function hH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=A=>{const s=Zr("internal-error");s.customData=A,n(s)},r.type="text/javascript",r.charset="UTF-8",hH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aH("Browser");const fH="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",gH="zameny-b6c3f.firebaseapp.com",pH="zameny-b6c3f",mH="zameny-b6c3f.firebasestorage.app",wH="323355347910",BH="1:323355347910:web:c81f2813dce5ee9373c0c7",CF={apiKey:fH,authDomain:gH,projectId:pH,storageBucket:mH,messagingSenderId:wH,appId:BH};let Dh;pN().length?Dh=gw():Dh=lb(CF);const vn=BT(Dh),cr=dH(Dh);CF.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Jt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules"},vH=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},zn={syncCollection:async(t,e)=>{if(!vn)return;const n=Km(Om(vn,t)),r=await NT(n),A=new Set(r.docs.map(d=>d.id)),s=new Set(e.map(d=>d.id)),i=[...A].filter(d=>!s.has(d)),o=e,a=[...i.map(d=>({type:"delete",id:d})),...o.map(d=>({type:"set",item:d}))],c=vH(a,450);for(const d of c){const h=HT(vn);d.forEach(f=>{const m=Kr(vn,t,f.id||f.item.id);f.type==="delete"?h.delete(m):h.set(m,f.item)}),await h.commit()}},save:async t=>{if(!vn){console.error("Database not initialized");return}const e=cr==null?void 0:cr.currentUser;if(!e||e.email!=="admin@gymnasium22.com"){console.warn(" :   .");return}try{const n=[];t.teachers&&n.push(zn.syncCollection(Jt.TEACHERS,t.teachers)),t.subjects&&n.push(zn.syncCollection(Jt.SUBJECTS,t.subjects)),t.classes&&n.push(zn.syncCollection(Jt.CLASSES,t.classes)),t.rooms&&n.push(zn.syncCollection(Jt.ROOMS,t.rooms)),t.schedule&&n.push(zn.syncCollection(Jt.SCHEDULE_1,t.schedule)),t.schedule2ndHalf&&n.push(zn.syncCollection(Jt.SCHEDULE_2,t.schedule2ndHalf)),t.substitutions&&n.push(zn.syncCollection(Jt.SUBSTITUTIONS,t.substitutions)),t.settings&&n.push(kd(Kr(vn,Jt.CONFIG,"settings"),t.settings)),t.bellSchedule&&n.push(kd(Kr(vn,Jt.CONFIG,"bells"),{items:t.bellSchedule})),await Promise.all(n),console.log("Data saved successfully to collections")}catch(n){throw console.error("   Firebase:",n),(n==null?void 0:n.code)==="permission-denied"&&alert(" :     ."),n}},subscribe:(t,e)=>{if(!vn)return()=>{};let n={...Gn},r;const A=()=>{clearTimeout(r),r=setTimeout(()=>{t({...n})},50)},s=[],i=(o,a)=>{const c=Km(Om(vn,o));return Rd(c,d=>{const h=d.docs.map(f=>f.data());n[a]=h,A()},d=>{console.warn(`Error reading ${o}:`,d)})};return s.push(i(Jt.TEACHERS,"teachers")),s.push(i(Jt.SUBJECTS,"subjects")),s.push(i(Jt.CLASSES,"classes")),s.push(i(Jt.ROOMS,"rooms")),s.push(i(Jt.SCHEDULE_1,"schedule")),s.push(i(Jt.SCHEDULE_2,"schedule2ndHalf")),s.push(i(Jt.SUBSTITUTIONS,"substitutions")),s.push(Rd(Kr(vn,Jt.CONFIG,"settings"),o=>{o.exists()&&(n.settings={...Gn.settings,...o.data()},A())})),s.push(Rd(Kr(vn,Jt.CONFIG,"bells"),o=>{if(o.exists()){const a=o.data();n.bellSchedule=a.items||Gn.bellSchedule,A()}})),()=>{s.forEach(o=>o()),clearTimeout(r)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=`gymnasium_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},setPublicData:async(t,e)=>{if(!vn)throw new Error("Database not initialized");const n=cr==null?void 0:cr.currentUser;if(!n||n.email!=="admin@gymnasium22.com")throw new Error(" .");const r={subjects:e.subjects,teachers:e.teachers.map(s=>({id:s.id,name:s.name,subjectIds:s.subjectIds,shifts:s.shifts,unavailableDates:[],telegramChatId:""})),classes:e.classes,rooms:e.rooms,schedule:e.schedule,schedule2ndHalf:e.schedule2ndHalf,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId}},A=JSON.parse(JSON.stringify(r));await kd(Kr(vn,Jt.PUBLIC,t),A)},getPublicData:async t=>{if(!vn)return null;try{const e=await z2(()=>Promise.resolve().then(()=>nM),void 0).then(n=>n.getDoc(Kr(vn,Jt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{vn&&await DT(Kr(vn,Jt.PUBLIC,t))}},IF=k.createContext(void 0),yH="admin@gymnasium22.com",xH="teacher@gymnasium22.com",CH=({children:t})=>{const[e,n]=k.useState(null),[r,A]=k.useState(null),[s,i]=k.useState(!0);k.useEffect(()=>{if(!cr){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=tj(cr,d=>{n(d),d?d.email===yH?A("admin"):d.email===xH?A("teacher"):(A(null),mC(cr)):A(null),i(!1)});return()=>c()},[]);const o=async()=>{cr&&await mC(cr),A(null)},a=()=>{A("guest"),i(!1)};return l.jsx(IF.Provider,{value:{user:e,role:r,loading:s,logout:o,setGuestRole:a},children:t})},Na=()=>{const t=k.useContext(IF);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},EF=k.createContext(void 0),_F=({children:t,initialData:e})=>{const[n,r]=k.useState(Gn),[A,s]=k.useState(!0),[i,o]=k.useState([]),[a,c]=k.useState(-1),{user:d,role:h,loading:f}=Na();k.useEffect(()=>{if(e){r(e),o([e]),c(0),s(!1);return}if(f)return;if(!(d||h==="guest")){r(Gn),s(!1);return}s(!0);const I=zn.subscribe(F=>{const U={...Gn,...F};U.teachers||(U.teachers=[]),U.teachers=U.teachers.map(R=>({shifts:[ue.First,ue.Second],telegramChatId:"",...R})),U.schedule||(U.schedule=[]),U.schedule2ndHalf||(U.schedule2ndHalf=[]),U.substitutions||(U.substitutions=[]),U.bellSchedule||(U.bellSchedule=Y_),U.settings?U.settings={...Gn.settings,...U.settings}:U.settings=Gn.settings,r(U),o(R=>R.length===0?[U]:R),c(R=>R===-1?0:R),s(!1)},F=>{console.error("Failed to subscribe to data:",F),r(Gn),s(!1)});return()=>{I&&I()}},[e,d,h,f]);const m=k.useCallback(async(w,I=!0)=>{const F=!d&&h==="guest",U={...n,...w};if(r(U),!e&&d&&!F)try{await zn.save(U)}catch(R){console.error("Save failed silently in background",R)}else F&&console.warn("       .");if(I){const R=i.slice(0,a+1);R.push(U),R.length>50&&R.shift(),o(R),c(R.length-1)}},[n,i,a,d,h,e]),B=k.useCallback(async()=>{if(a>0){const w=i[a-1];c(a-1),r(w),!e&&d&&await zn.save(w)}},[i,a,d,e]),v=k.useCallback(async()=>{if(a<i.length-1){const w=i[a+1];c(a+1),r(w),!e&&d&&await zn.save(w)}},[i,a,d,e]),_=k.useCallback(async()=>{await m(Gn)},[m]),x=k.useMemo(()=>({data:n,isLoading:A,saveData:m,resetData:_,undo:B,redo:v,canUndo:a>0,canRedo:a<i.length-1}),[n,A,m,_,B,v,a]);return l.jsx(EF.Provider,{value:x,children:t})},Of=()=>{const t=k.useContext(EF);if(!t)throw new Error("useFullData must be used within DataProvider");return t},bF=k.createContext(void 0),TF=k.createContext(void 0),FF=({children:t})=>{const{data:e,saveData:n}=Of(),r=k.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings]),A=k.useCallback(async(i,o)=>{await n(i,o)},[n]),s=k.useMemo(()=>({...r,saveStaticData:A}),[r,A]);return l.jsx(bF.Provider,{value:s,children:t})},QF=({children:t})=>{const{data:e,saveData:n}=Of(),r=new Date().getMonth(),s=r>=0&&r<=4?e.schedule2ndHalf||[]:e.schedule,i=k.useCallback(async(d,h)=>{d===1?await n({schedule:h}):await n({schedule2ndHalf:h})},[n]),o=k.useCallback(async(d,h)=>{await n(d,h)},[n]),a=k.useMemo(()=>({schedule:s,schedule1:e.schedule,schedule2:e.schedule2ndHalf||[],substitutions:e.substitutions,saveSemesterSchedule:i,saveScheduleData:o}),[s,e.schedule,e.schedule2ndHalf,e.substitutions,i,o]),c=k.useMemo(()=>({...a,saveScheduleData:o}),[a,o]);return l.jsx(TF.Provider,{value:c,children:t})},PA=()=>{const t=k.useContext(bF);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=Of();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},Da=()=>{const t=k.useContext(TF);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=Of();return{...t,isLoading:e.isLoading,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},IH={Home:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),l.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"17 1 21 5 17 9"}),l.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),l.jsx("polyline",{points:"7 23 3 19 7 15"}),l.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),l.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),l.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),l.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),l.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),l.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),l.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),l.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),l.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),l.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),l.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),l.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),l.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),l.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"1 4 1 10 7 10"}),l.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),l.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),l.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"18",cy:"5",r:"3"}),l.jsx("circle",{cx:"6",cy:"12",r:"3"}),l.jsx("circle",{cx:"18",cy:"19",r:"3"}),l.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),l.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),l.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),l.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),l.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),l.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),l.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),l.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),l.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),l.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),l.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),l.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),l.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("path",{d:"M8 13h2"}),l.jsx("path",{d:"M8 17h2"}),l.jsx("path",{d:"M14 13h2"}),l.jsx("path",{d:"M14 17h2"})]}),Activity:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),l.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),l.jsx("path",{d:"M3 9h18"}),l.jsx("path",{d:"M12 21V9"})]}),Image:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),l.jsx("circle",{cx:"9",cy:"9",r:"2"}),l.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"17 8 12 3 7 8"}),l.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 3v5h5"}),l.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),l.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),l.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),l.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"9",cy:"12",r:"1"}),l.jsx("circle",{cx:"9",cy:"5",r:"1"}),l.jsx("circle",{cx:"9",cy:"19",r:"1"}),l.jsx("circle",{cx:"15",cy:"12",r:"1"}),l.jsx("circle",{cx:"15",cy:"5",r:"1"}),l.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),l.jsx("path",{d:"M2 20h3"}),l.jsx("path",{d:"M13 20h9"}),l.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M13 12h1"}),l.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),l.jsx("path",{d:"M8 12h1"}),l.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),l.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),l.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 11 12 14 22 4"}),l.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),l.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),l.jsx("path",{d:"M17 17h.01"}),l.jsx("path",{d:"M12 17h.01"}),l.jsx("path",{d:"M14 14h.01"}),l.jsx("path",{d:"M17 14h.01"}),l.jsx("path",{d:"M14 12h.01"}),l.jsx("path",{d:"M19 12h.01"}),l.jsx("path",{d:"M12 19h.01"}),l.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>l.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),l.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 12H3"}),l.jsx("path",{d:"M21 6H3"}),l.jsx("path",{d:"M21 18H3"})]}),Send:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),l.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},$=({name:t,size:e=24,className:n="",...r})=>{const A=IH[t];return A?l.jsx(A,{width:e,height:e,className:n,...r}):(console.warn(`Icon '${t}' not found.`),null)},wA=({isOpen:t,onClose:e,title:n,children:r,maxWidth:A="max-w-lg"})=>(k.useEffect(()=>{if(!t)return;const s=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",s),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",s),document.body.style.overflow=""}},[t,e]),t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:s=>s.target===s.currentTarget&&e(),children:l.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-2xl shadow-2xl w-full ${A} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:l.jsx($,{name:"X",size:24})})]}),l.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:r})]})}):null),EH=({x:t,y:e,onClose:n,actions:r})=>{const A=k.useRef(null);if(k.useEffect(()=>{if(t===null||e===null)return;const i=a=>{A.current&&!A.current.contains(a.target)&&n()},o=a=>{a.key==="Escape"&&n()};return window.addEventListener("click",i,!0),document.addEventListener("keydown",o),()=>{window.removeEventListener("click",i,!0),document.removeEventListener("keydown",o)}},[t,e,n]),t===null||e===null)return null;const s={top:e,left:t};return window.innerWidth-t<200&&(s.left=t-200),l.jsx("div",{ref:A,className:"fixed z-[100] bg-white dark:bg-slate-800 shadow-xl rounded-xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:s,children:r.map(i=>l.jsxs("button",{onClick:o=>{o.stopPropagation(),i.onClick(),n()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${i.color||"text-slate-700 dark:text-slate-200"}`,children:[i.icon&&l.jsx($,{name:i.icon,size:16}),i.label]},i.id||i.label))})},_H=()=>{const{bellSchedule:t}=PA(),[e,n]=k.useState("..."),[r,A]=k.useState(""),[s,i]=k.useState(0),[o,a]=k.useState("bg-slate-500"),[c,d]=k.useState("");return k.useEffect(()=>{const h=()=>{const m=new Date,B=m.getDay(),_=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][B];if(d(_||""),!_){n(" "),A(" "),a("bg-slate-400"),i(0);return}const x=R=>{const[y,C]=R.split(":").map(Number);return y*60+C},w=m.getHours()*60+m.getMinutes();let I=t.filter(R=>R.day===_);I.length===0&&(I=t.filter(R=>R.day==="default")),I.sort((R,y)=>x(R.start)-x(y.start));let F=null,U=null;for(let R=0;R<I.length;R++){const y=I[R],C=x(y.start),E=x(y.end);if(w>=C&&w<E){F={...y,duration:E-C,passed:w-C};break}if(R<I.length-1){const Q=I[R+1],N=x(Q.start);if(w>=E&&w<N){const L=N-E;if(L>0&&L<60){const T=w-E,Pe=N-w;U={nextLesson:Q,duration:L,passed:T,remaining:Pe};break}}}}if(F){n(`${F.period} `);const R=Math.max(0,F.duration-F.passed);A(`${F.shift===ue.First?"1 ":"2 "}  . ${R} `);const y=F.duration>0?F.passed/F.duration*100:0;i(Math.min(100,Math.max(0,y))),a("bg-indigo-600")}else if(U){n(""),A(` ${U.remaining}  ${U.nextLesson.period} `),a("bg-amber-500");const R=U.duration>0?U.passed/U.duration*100:0;i(Math.min(100,Math.max(0,R)))}else n(" "),A(" "),a("bg-slate-400"),i(0)};h();const f=setInterval(h,6e4);return()=>clearInterval(f)},[t]),l.jsxs("div",{className:"mx-4 mt-auto mb-4 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700 flex flex-col gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${o}`}),l.jsxs("div",{className:"flex justify-between items-start z-10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:c}),l.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:e}),l.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:r})]}),l.jsx("div",{className:`w-8 h-8 rounded-full ${o} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center`,children:l.jsx($,{name:"Clock",size:16,className:o==="bg-indigo-600"?"text-indigo-600":o==="bg-amber-500"?"text-amber-500":"text-slate-400"})})]}),s>0&&l.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:l.jsx("div",{className:`h-full ${o} transition-all duration-1000`,style:{width:`${s}%`}})})]})},Xg=({options:t,value:e,onChange:n,placeholder:r="...",groupBy:A})=>{var B;const[s,i]=k.useState(!1),[o,a]=k.useState(""),c=k.useRef(null);k.useEffect(()=>{const v=x=>{c.current&&!c.current.contains(x.target)&&i(!1)},_=x=>{x.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",v),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("keydown",_)}},[]);const h=((B=(A?t.flatMap(v=>v.options):t).find(v=>v.value===e))==null?void 0:B.label)||r,f=A?t.map(v=>({...v,options:v.options.filter(_=>_.label.toLowerCase().includes(o.toLowerCase()))})).filter(v=>v.options.length>0):null,m=A?null:t.filter(v=>v.label.toLowerCase().includes(o.toLowerCase()));return l.jsxs("div",{className:"relative w-full",ref:c,children:[l.jsxs("div",{onClick:()=>i(!s),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[l.jsx("span",{className:e?"":"text-slate-400",children:h}),l.jsx($,{name:"Filter",size:14,className:"text-slate-400"})]}),s&&l.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-60 overflow-auto",children:[l.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800",children:l.jsx("input",{autoFocus:!0,value:o,onChange:v=>a(v.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),A&&f?f.map(v=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50",children:v.label}),v.options.map(_=>l.jsx("div",{onClick:()=>{n(_.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===_.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:_.label},_.value))]},v.id||v.label)):m?m.map(v=>l.jsx("div",{onClick:()=>{n(v.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===v.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:v.label},v.value)):null]})]})},Vu=({children:t,className:e=""})=>{const n=is.Children.toArray(t);return l.jsx("div",{className:e,children:n.map((r,A)=>{const s=is.isValidElement(r)&&r.key?r.key:A;return l.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${A*.05}s`,opacity:0},children:r},s)})})},Yg=({items:t,max:e,barClassName:n="bg-indigo-500"})=>{const r=e>0?e:1;return l.jsx("div",{className:"space-y-3",children:t.map(A=>{const s=A.id??A.label,i=Math.min(100,Math.max(0,A.value/r*100));return l.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:A.label,children:A.label}),l.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${n} transition-all duration-500`,style:{width:`${i}%`}})}),l.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:A.value})]},s)})})},bH=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,settings:s}=PA(),{schedule:i,substitutions:o}=Da(),a=Nc(),[c,d]=k.useState(localStorage.getItem("gym_notes")||""),[h]=k.useState(new Date),[f,m]=k.useState(""),[B,v]=k.useState(null),[_,x]=k.useState(!1),[w,I]=k.useState(""),[F,U]=k.useState(!1),[R,y]=k.useState(""),[C,E]=k.useState(!1);k.useEffect(()=>{if(localStorage.setItem("gym_notes",c),c){I("");const S=setTimeout(()=>I(""),2e3);return()=>clearTimeout(S)}},[c]);const Q=S=>new Date(S.getTime()-S.getTimezoneOffset()*6e4).toISOString().split("T")[0],N=k.useMemo(()=>Q(h),[h]),L=k.useMemo(()=>{const S=h.getDay();return S===0||S===6?null:Rn[S-1]},[h]),T=k.useMemo(()=>{const S=new Date;return S.setHours(0,0,0,0),e.filter(O=>O.birthDate).map(O=>{const G=new Date(O.birthDate);let Y=new Date(S.getFullYear(),G.getMonth(),G.getDate());Y<S&&Y.setFullYear(S.getFullYear()+1);const ne=Math.ceil((Y.getTime()-S.getTime())/(1e3*60*60*24));return{...O,diff:ne,age:S.getFullYear()-G.getFullYear()}}).filter(O=>O.diff<=30).sort((O,G)=>O.diff-G.diff)},[e]),Pe=k.useMemo(()=>{const S=e.length,O=new Map;e.filter(ve=>ve.unavailableDates.includes(N)).forEach(ve=>{var W;const pe=((W=ve.absenceReasons)==null?void 0:W[N])===" "?" ":"";O.set(ve.id,{id:ve.id,name:ve.name,displayReason:pe})});const G=o.filter(ve=>ve.date===N&&ve.replacementTeacherId!=="conducted"&&ve.replacementTeacherId!==ve.originalTeacherId),Y=new Map;G.forEach(ve=>{if(O.has(ve.originalTeacherId))return;const wt=e.find(me=>me.id===ve.originalTeacherId);if(!wt)return;const pe=i.find(me=>me.id===ve.scheduleItemId);if(!pe)return;Y.has(ve.originalTeacherId)||Y.set(ve.originalTeacherId,{teacher:wt,lessons:[]}),Y.get(ve.originalTeacherId).lessons.push({period:pe.period,reason:ve.lessonAbsenceReason})});const ne=Array.from(O.values());Y.forEach((ve,wt)=>{const pe=ve.lessons.sort((te,ge)=>te.period-ge.period),W=pe.map(te=>te.period).join(", "),Ae=pe.some(te=>te.reason===" ")?" ":"";ne.push({id:wt,name:ve.teacher.name,displayReason:`${W} : ${Ae}`})}),ne.sort((ve,wt)=>ve.name.localeCompare(wt.name));const Le=ne.length,Ee=S-Le;return{presentPercent:S>0?Math.round(Ee/S*100):0,absentCount:Le,totalTeachers:S,absentTeachersList:ne}},[e,N,o,i]),Me=k.useMemo(()=>{const S=new Date(h);for(S.setDate(h.getDate()+1);S.getDay()===0||S.getDay()===6;)S.setDate(S.getDate()+1);const G=[null,"","","","","",null][S.getDay()];if(!G)return[];const Y=[];return n.forEach(ne=>{const Le=i.filter(Ee=>Ee.classId===ne.id&&Ee.day===G);Le.length===0?Y.push({class:ne.name,issue:`   ${G}`}):Le.length<4&&Y.push({class:ne.name,issue:`  (${Le.length})`}),Le.forEach(Ee=>{if(i.some(ve=>ve.id!==Ee.id&&ve.day===G&&ve.period===Ee.period&&ve.shift===Ee.shift&&ve.teacherId===Ee.teacherId)&&Y.push({class:ne.name,issue:`  (${Ee.period} )`}),Ee.roomId){const ve=r.find(wt=>wt.id===Ee.roomId);ve&&ve.capacity<ne.studentsCount&&Y.push({class:ne.name,issue:`: ${ve.name} (${Ee.period} )`})}})}),Y.filter((ne,Le,Ee)=>Ee.findIndex(Ve=>Ve.class===ne.class&&Ve.issue===ne.issue)===Le).slice(0,10)},[i,n,e,r,h]),et=k.useMemo(()=>{if(!L)return 0;let S=0;const O=i.filter(G=>G.day===L);for(const G of O){const Y=e.find(ne=>ne.id===G.teacherId);Y&&Y.unavailableDates.includes(N)&&(o.find(Le=>Le.scheduleItemId===G.id&&Le.date===N)||S++)}return S},[i,e,o,N,L]),Ne=()=>{var pe;if(!f){v(null);return}const S=new Date,G=[null,ur.Monday,ur.Tuesday,ur.Wednesday,ur.Thursday,ur.Friday,null][S.getDay()];if(!G){v({status:"",detail:"  ",color:"text-slate-500"});return}const Y=W=>{const[me,Ae]=W.split(":").map(Number);return me*60+Ae},ne=S.getHours()*60+S.getMinutes();let Le=A.filter(W=>W.day===G);Le.length===0&&(Le=A.filter(W=>W.day==="default"));const Ee=Le.find(W=>{const me=Y(W.start),Ae=Y(W.end);return ne>=me&&ne<=Ae}),Ve=f.toLowerCase(),ve=e.find(W=>W.name.toLowerCase().includes(Ve)),wt=n.find(W=>W.name.toLowerCase().includes(Ve));if(!ve&&!wt){v({status:" ",detail:" ",color:"text-red-500"});return}if(ve){if(ve.unavailableDates.includes(N)){const ge=((pe=ve.absenceReasons)==null?void 0:pe[N])===" "?" ":"";v({status:"",detail:ge,color:"text-red-500",icon:"UserX",items:[]});return}if(!Ee){v({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const W=i.filter(te=>te.teacherId===ve.id&&te.day===G&&te.period===Ee.period&&te.shift===Ee.shift),me=o.filter(te=>te.date===N&&te.replacementTeacherId===ve.id).map(te=>i.find(ge=>ge.id===te.scheduleItemId)).filter(te=>!!te&&te.day===G&&te.period===Ee.period&&te.shift===Ee.shift);let Ae=[];W.forEach(te=>{var Ie,be,Ue;const ge=o.find(Ge=>Ge.date===N&&Ge.scheduleItemId===te.id);if(!ge||ge.replacementTeacherId===ve.id){const Ge=((Ie=r.find(We=>We.id===((ge==null?void 0:ge.replacementRoomId)||te.roomId)))==null?void 0:Ie.name)||(ge==null?void 0:ge.replacementRoomId)||te.roomId||" .",Ye=(be=t.find(We=>We.id===te.subjectId))==null?void 0:be.name,qe=(Ue=n.find(We=>We.id===te.classId))==null?void 0:Ue.name;Ae.push({room:Ge,subject:Ye,entityName:qe,direction:te.direction,isSubstitution:!!(ge&&ge.replacementTeacherId===ve.id),originalTeacherName:null})}}),me.forEach(te=>{var Ye,qe,We;const ge=o.find(Qe=>Qe.date===N&&Qe.scheduleItemId===te.id&&Qe.replacementTeacherId===ve.id);if(!ge)return;const Ie=((Ye=r.find(Qe=>Qe.id===(ge.replacementRoomId||te.roomId)))==null?void 0:Ye.name)||ge.replacementRoomId||te.roomId||" .",be=(qe=t.find(Qe=>Qe.id===te.subjectId))==null?void 0:qe.name,Ue=(We=n.find(Qe=>Qe.id===te.classId))==null?void 0:We.name,Ge=e.find(Qe=>Qe.id===ge.originalTeacherId);Ae.push({room:Ie,subject:be,entityName:Ue,direction:te.direction,isSubstitution:!0,originalTeacherName:Ge==null?void 0:Ge.name})}),Ae.length>0?v({status:` ${Ee.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Ae}):v({status:"",detail:` ( ${Ee.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(wt){if(!Ee){v({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const W=i.filter(me=>me.classId===wt.id&&me.day===G&&me.period===Ee.period&&me.shift===Ee.shift);if(W.length>0){const me=W.map(ge=>{var je,Xe,ze,$e,ke;const Ie=o.find(it=>it.scheduleItemId===ge.id&&it.date===N);if(Ie&&Ie.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(je=t.find(it=>it.id===ge.subjectId))==null?void 0:je.name};const be=!!(Ie&&Ie.replacementTeacherId!=="conducted"&&Ie.replacementTeacherId!=="cancelled"),Ue=be?Ie.replacementTeacherId:ge.teacherId,Ge=(Ie==null?void 0:Ie.replacementRoomId)||ge.roomId,Ye=(Xe=e.find(it=>it.id===Ue))==null?void 0:Xe.name,qe=((ze=r.find(it=>it.id===Ge))==null?void 0:ze.name)||Ge||" .",We=($e=t.find(it=>it.id===ge.subjectId))==null?void 0:$e.name,Qe=be?(ke=e.find(it=>it.id===Ie.originalTeacherId))==null?void 0:ke.name:null;return{room:qe,subject:We,entityName:Ye,direction:ge.direction,isSubstitution:be,originalTeacherName:Qe}}),Ae=me.filter(ge=>!ge.cancelled),te=me.filter(ge=>!!ge.cancelled);Ae.length>0?v({status:` ${Ee.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Ae}):te.length>0?v({status:" ",detail:te.map(ge=>ge.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):v({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else v({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},ee=async()=>{if(!R.trim()){alert(",   .");return}if(!(s!=null&&s.telegramToken)||!(s!=null&&s.feedbackChatId)){alert("     .");return}E(!0);const S=` *   :*

${R}`;try{const G=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:s.feedbackChatId,text:S,parse_mode:"Markdown"})})).json();if(G.ok)alert("!   ."),U(!1),y("");else throw new Error(G.description)}catch(O){console.error("   Telegram:",O),alert(`   . : ${O}`)}finally{E(!1)}};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("header",{className:"mb-6 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:h.toLocaleDateString("ru-RU",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),l.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition text-sm",children:[l.jsx($,{name:"Send",size:16}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx($,{name:"Search",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" ?"})]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{placeholder:"  ...",value:f,onChange:S=>m(S.target.value),onKeyDown:S=>S.key==="Enter"&&Ne(),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm outline-none dark:text-white"}),l.jsx("button",{onClick:Ne,className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl transition-colors",children:l.jsx($,{name:"Search",size:20})})]}),B&&l.jsxs("div",{className:"mt-auto p-3 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-slate-100 dark:border-slate-700 animate-fade-in",children:[l.jsxs("div",{className:`text-xs font-bold uppercase mb-2 flex items-center gap-2 ${B.color}`,children:[l.jsx($,{name:B.icon||"Info",size:14})," ",B.status]}),B.items&&B.items.length>0?l.jsx("div",{className:"space-y-2",children:B.items.map((S,O)=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-2 rounded-lg border border-slate-100 dark:border-slate-600 text-xs shadow-sm",children:[S.direction&&l.jsx("div",{className:"text-[10px] font-bold text-indigo-500 mb-0.5",children:S.direction}),l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:S.subject}),S.isSubstitution&&l.jsx("div",{className:"text-[10px] font-bold text-orange-500",children:S.originalTeacherName?` ( ${S.originalTeacherName})`:" "}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:S.entityName}),l.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-1.5 rounded font-mono",children:S.room})]})]},`${S.room}-${S.subject}-${S.entityName}-${O}`))}):l.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm leading-snug",children:B.detail})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-2 rounded-lg",children:l.jsx($,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:et>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-5xl font-black text-red-500 mb-2",children:et}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"   "}),l.jsxs("button",{onClick:()=>a("/substitutions"),className:"px-6 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition shadow-lg shadow-red-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"ArrowRight",size:16}),"   "]})]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"CheckCircle",size:48,className:"mb-4 text-emerald-400"}),l.jsx("p",{className:"text-sm text-slate-400",children:"  ,  "})]})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 p-2 rounded-lg",children:l.jsx($,{name:"PieChart",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("button",{onClick:()=>x(!_),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg transition-colors",title:_?" ":" ",children:l.jsx($,{name:_?"PieChart":"List",size:20})})]}),_?l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in",children:Pe.absentTeachersList.length>0?l.jsx("div",{className:"space-y-2",children:Pe.absentTeachersList.map(S=>l.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 dark:border-slate-700 pb-1 mb-1 last:border-0",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:S.name}),l.jsx("span",{className:"text-xs text-red-500 font-bold whitespace-nowrap",children:S.displayReason})]},S.id))}):l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:[l.jsx($,{name:"CheckCircle",size:32,className:"text-emerald-400 mb-2"}),l.jsx("p",{className:"text-sm",children:"   "})]})}):l.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in",children:[l.jsxs("div",{className:"relative w-24 h-24",children:[l.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90",children:[l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#f1f5f9",strokeWidth:"4",className:"dark:stroke-slate-700"}),l.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#10b981",strokeWidth:"4",strokeDasharray:`${Pe.presentPercent}, 100`})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("span",{className:"text-xs text-slate-400 font-bold",children:"."}),l.jsxs("span",{className:"font-black text-slate-700 dark:text-white",children:[Pe.presentPercent,"%"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-black text-red-500",children:Pe.absentCount}),l.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",l.jsx("br",{}),""]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 p-2 rounded-lg",children:l.jsx($,{name:"Gift",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-3",children:T.length?T.map(S=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:S.name}),l.jsx("span",{className:"font-bold text-slate-400",children:S.diff===0?"!":`${S.diff} .`})]},S.id)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:" "})})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col h-full",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 p-2 rounded-lg",children:l.jsx($,{name:"AlertTriangle",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:""})]}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-40 custom-scrollbar space-y-2",children:Me.length?Me.map(S=>l.jsxs("div",{className:"flex justify-between text-sm text-slate-700 dark:text-slate-300",children:[l.jsx("span",{children:S.class}),l.jsx("span",{className:"text-amber-600 text-xs font-bold",children:S.issue})]},`${S.class}-${S.issue}`)):l.jsx("div",{className:"text-slate-400 text-sm text-center",children:"  "})})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col relative group",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-2 rounded-lg",children:l.jsx($,{name:"CheckSquare",size:20})}),l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),l.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c),alert("")},className:"text-xs bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded font-bold text-slate-500 hover:text-indigo-600",children:""}),l.jsx("button",{onClick:()=>{confirm(" ?")&&d("")},className:"text-xs bg-red-50 dark:bg-red-900/30 px-2 py-1 rounded font-bold text-red-500 hover:text-red-700",children:""})]})]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{className:"w-full h-48 p-6 rounded-xl bg-yellow-50 dark:bg-slate-700 border border-yellow-200 dark:border-slate-600 outline-none font-medium text-slate-700 dark:text-slate-200 resize-none focus:ring-4 ring-yellow-100 dark:ring-slate-600/50 transition-shadow leading-relaxed shadow-inner",placeholder:"   ...",value:c,onChange:S=>d(S.target.value),style:{backgroundImage:"linear-gradient(transparent, transparent 27px, #e5e7eb 28px)",backgroundSize:"100% 28px",lineHeight:"28px"}}),w&&l.jsxs("div",{className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-slate-400 animate-fade-in flex items-center gap-1",children:[l.jsx($,{name:"Save",size:12})," ",w]})]})]})]}),l.jsx(wA,{isOpen:F,onClose:()=>U(!1),title:"   ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !      ."}),l.jsx("textarea",{value:R,onChange:S=>y(S.target.value),rows:6,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500 resize-y",placeholder:" ..."}),l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{onClick:ee,disabled:C,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[C?l.jsx($,{name:"Loader",size:16,className:"animate-spin"}):l.jsx($,{name:"Send",size:16}),C?"...":""]})})]})})]})};var UF={},SF={},kF={},Vf={};Object.defineProperty(Vf,"__esModule",{value:!0});function TH(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}Vf.default=TH;var EB={};Object.defineProperty(EB,"__esModule",{value:!0});var FH=Vf,QH=" and ";function UH(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var n=e[0],r=e[1],A=FH.default(n),s=r;return typeof s=="boolean"?s?A:"not "+A:(typeof s=="number"&&/[height|width]$/.test(A)&&(s=s+"px"),"("+A+": "+s+")")}).join(QH)}EB.default=UH;var _B={};Object.defineProperty(_B,"__esModule",{value:!0});function SH(){}_B.default=SH;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=Vf;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var n=EB;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return n.default}});var r=_B;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return r.default}})})(kF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=k,n=kF;t.mockMediaQueryList={media:"",matches:!1,onchange:n.noop,addListener:n.noop,removeListener:n.noop,addEventListener:n.noop,removeEventListener:n.noop,dispatchEvent:function(A){return!0}};var r=function(A){return function(s,i){i===void 0&&(i=!1);var o=e.useState(i),a=o[0],c=o[1],d=n.queryObjectToString(s);return A(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),m=function(){h&&c(!!f.matches)};return f.addListener(m),c(f.matches),function(){h=!1,f.removeListener(m)}},[d]),a}};t.useMedia=r(e.useEffect),t.useMediaLayout=r(e.useLayoutEffect),t.default=t.useMedia})(SF);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=SF;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(UF);const kH=FI(UF),RF=({readOnly:t=!1,semester:e=1})=>{const{subjects:n,teachers:r,classes:A,rooms:s}=PA(),{schedule1:i,schedule2:o,saveSemesterSchedule:a,canUndo:c,canRedo:d,undo:h,redo:f}=Da(),m=e===2?o:i,B=async P=>{await a(e,P)},[v,_]=k.useState(ue.First),[x,w]=k.useState(ur.Monday),[I,F]=k.useState(!1),[U,R]=k.useState({}),[y,C]=k.useState("class"),[E,Q]=k.useState(""),[N,L]=k.useState(""),[T,Pe]=k.useState(""),[Me,et]=k.useState(!1),[Ne,ee]=k.useState({visible:!1,x:0,y:0,item:null,cell:null}),[S,O]=k.useState(null),[G,Y]=k.useState([]),[ne,Le]=k.useState(null),[Ee,Ve]=k.useState(null),ve=kH({maxWidth:767}),[wt,pe]=k.useState(!0),[W,me]=k.useState(!1),[Ae,te]=k.useState({isOpen:!1,type:"",day:"",classId:""}),[ge,Ie]=k.useState(ur.Monday),[be,Ue]=k.useState(""),Ge=zr[v],Ye=()=>y==="week"?zr[v].map(P=>({id:P.toString(),name:`${P} `})):y==="class"?E?A.filter(P=>P.id===E&&P.shift===v):A.filter(P=>P.shift===v):y==="teacher"?E?r.filter(P=>P.id===E):r:y==="subject"?E?n.filter(P=>P.id===E):n:[],qe=(P,z)=>{let ye=[];if(y==="week"){const ae=parseInt(P),re=z;ye=m.filter(fe=>fe.shift===v&&fe.period===ae&&fe.day===re),E&&(ye=ye.filter(fe=>fe.classId===E))}else{const ae=z;y==="class"&&(ye=m.filter(re=>re.classId===P&&re.period===ae&&re.day===x&&re.shift===v)),y==="teacher"&&(ye=m.filter(re=>re.teacherId===P&&re.period===ae&&re.day===x&&re.shift===v)),y==="subject"&&(ye=m.filter(re=>re.subjectId===P&&re.period===ae&&re.day===x&&re.shift===v))}return N&&(ye=ye.filter(ae=>{if(!ae.roomId)return!1;const re=s.find(Ke=>Ke.id===ae.roomId);return(re?re.name:ae.roomId).toLowerCase().includes(N.toLowerCase())})),T&&(ye=ye.filter(ae=>{var re;return(re=ae.direction)==null?void 0:re.toLowerCase().includes(T.toLowerCase())})),ye},We=P=>{const z=[],ye=m.filter(fe=>fe.id!==P.id&&fe.day===P.day&&fe.period===P.period&&fe.shift===P.shift);return ye.find(fe=>fe.teacherId===P.teacherId)&&z.push("teacher"),ye.find(fe=>!(fe.classId!==P.classId||fe.direction&&P.direction&&fe.direction!==P.direction))&&z.push("class"),P.roomId&&ye.find(Ke=>Ke.roomId===P.roomId)&&z.push("room"),z},Qe=(P,z,ye)=>{const ae=[],re=A.find(dt=>dt.id===P),fe=n.find(dt=>dt.id===z),Ke=s.find(dt=>dt.id===ye);return Ke&&(re&&Ke.capacity<re.studentsCount&&ae.push(`  !   ${re.studentsCount} .,     ${Ke.capacity}.`),fe&&fe.requiredRoomType&&fe.requiredRoomType!==""&&Ke.type!==fe.requiredRoomType&&ae.push(`   !   "${fe.requiredRoomType}",   "${Ke.type}".`)),ae},je=P=>{if(!P.classId||!P.subjectId||!P.roomId){Y([]);return}const z=Qe(P.classId,P.subjectId,P.roomId);Y(z)},Xe=P=>{t||(R(P),je(P),F(!0))},ze=(P,z,ye=x)=>{if(t)return;const ae={period:z,day:ye,shift:v,id:Math.random().toString(36).substr(2,9)};y==="class"&&(ae.classId=P),y==="teacher"&&(ae.teacherId=P),y==="subject"&&(ae.subjectId=P),y==="week"&&(ae.period=parseInt(P),ae.day=ye,E&&A.find(re=>re.id===E)&&(ae.classId=E)),R(ae),Y([]),F(!0)},$e=async()=>{if(!U.subjectId||!U.teacherId||!U.classId)return;let P=[...m];const z=P.findIndex(ye=>ye.id===U.id);z>=0?P[z]=U:P.push(U),await B(P),F(!1)},ke=async P=>{const z=m.filter(ye=>ye.id!==(P||U.id));await B(z),F(!1)},it=(P,z,ye)=>{t||(P.preventDefault(),P.stopPropagation(),ee({visible:!0,x:P.clientX,y:P.clientY,item:z,cell:ye}))},kt=(P,z)=>{if(t)return;Le(z),P.dataTransfer.effectAllowed="move";const ye=P.currentTarget;setTimeout(()=>ye.classList.add("dragging"),0)},Hn=P=>{P.currentTarget.classList.remove("dragging"),Le(null),Ve(null)},On=(P,z)=>{P.preventDefault(),!t&&Ve(`${z.rowId}-${z.colKey}`)},Jn=async(P,z)=>{if(P.preventDefault(),!ne||t)return;const ye={...ne};y==="week"?(ye.period=parseInt(z.rowId),ye.day=z.colKey):(ye.period=z.colKey,ye.day=x,y==="class"&&(ye.classId=z.rowId),y==="teacher"&&(ye.teacherId=z.rowId),y==="subject"&&(ye.subjectId=z.rowId));let ae=m.map(re=>re.id===ye.id?ye:re);await B(ae),Le(null),Ve(null)},D=[];Ne.item?D.push({label:"",icon:"Copy",onClick:()=>O(Ne.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>ke(Ne.item.id)}):Ne.cell&&(S&&D.push({label:"",icon:"Clipboard",onClick:async()=>{const P={...S,id:Math.random().toString(36).substr(2,9),day:x,shift:v,period:Ne.cell.colKey};y==="week"&&(P.day=Ne.cell.colKey,P.period=parseInt(Ne.cell.rowId)),y==="class"?P.classId=Ne.cell.rowId:y==="teacher"?P.teacherId=Ne.cell.rowId:y==="subject"&&(P.subjectId=Ne.cell.rowId);let z=[...m,P];await B(z),O(null)}}),D.push({label:" ",icon:"Plus",onClick:()=>ze(Ne.cell.rowId,typeof Ne.cell.colKey=="number"?Ne.cell.colKey:parseInt(Ne.cell.rowId),y==="week"?Ne.cell.colKey:x)}));const V=U.subjectId?r.filter(P=>P.subjectIds.includes(U.subjectId)):[],q=U.subjectId?r.filter(P=>!P.subjectIds.includes(U.subjectId)):r,oe=k.useMemo(()=>{var z,ye,ae,re;const P=e===2?" (2- )":"";if(E){if(y==="teacher")return((z=r.find(fe=>fe.id===E))==null?void 0:z.name)+P;if(y==="class")return((ye=A.find(fe=>fe.id===E))==null?void 0:ye.name)+P;if(y==="subject")return((ae=n.find(fe=>fe.id===E))==null?void 0:ae.name)+P;if(y==="week")return((re=A.find(fe=>fe.id===E))==null?void 0:re.name)+P}return`  ${x}`+P},[E,y,r,A,n,x,e]),Te=!!E,we=k.useMemo(()=>Te?Rn:Ge,[Te,Ge]),ce=k.useMemo(()=>Te?zr[v].map(P=>({id:P.toString(),name:`${P} `})):Ye(),[Te,v,Ye]),Re=(P,z)=>{if(Te){const ye=parseInt(P),ae=z;let re=m.filter(fe=>fe.shift===v&&fe.period===ye&&fe.day===ae);return y==="class"||y==="week"?re=re.filter(fe=>fe.classId===E):y==="teacher"?re=re.filter(fe=>fe.teacherId===E):y==="subject"&&(re=re.filter(fe=>fe.subjectId===E)),re}else return qe(P,z)},se=Ye(),he=y==="week"?Rn:Ge,De=(P,z,ye)=>{te({isOpen:!0,type:P,day:z||"",classId:ye||""})},ut=async()=>{let P=[...m];Ae.type==="clearAll"?P=[]:Ae.type==="clearDay"&&Ae.day?P=P.filter(z=>z.day!==Ae.day):Ae.type==="clearClass"&&Ae.classId&&(P=P.filter(z=>z.classId!==Ae.classId)),await B(P),te({isOpen:!1,type:"",day:"",classId:""}),me(!1)},ot=(P,z,ye)=>t&&P.length===0?null:l.jsxs("div",{className:"h-full flex flex-col gap-1",children:[P.map(ae=>{const re=n.find(It=>It.id===ae.subjectId),fe=r.find(It=>It.id===ae.teacherId),Ke=A.find(It=>It.id===ae.classId),dt=We(ae),Rt=s.find(It=>It.id===ae.roomId),un=Rt?Rt.name:ae.roomId;return l.jsxs("div",{draggable:!t,onDragStart:t?void 0:It=>kt(It,ae),onDragEnd:t?void 0:Hn,onClick:t?void 0:()=>Xe(ae),onContextMenu:t?void 0:It=>it(It,ae,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${dt.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:dt.length===0&&(re!=null&&re.color)?{backgroundColor:`${re.color}40`}:{},children:[l.jsxs("div",{className:"flex justify-between items-center gap-1",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:y==="subject"||y==="week"?Ke==null?void 0:Ke.name:re==null?void 0:re.name}),ae.direction&&l.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:ae.direction})]}),y==="week"&&l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:re==null?void 0:re.name}),l.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[l.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:fe==null?void 0:fe.name,children:[l.jsx($,{name:y==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),l.jsx("span",{className:"truncate",children:y==="teacher"?Ke==null?void 0:Ke.name:fe==null?void 0:fe.name})]}),un&&l.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:Rt?`: ${Rt.capacity}, : ${Rt.type}`:"",children:un})]}),dt.length>0&&l.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${dt.join(", ")}`,children:"!"})]},ae.id)}),!t&&P.length<3&&l.jsx("button",{onClick:()=>ze(ye,typeof z=="number"?z:parseInt(ye),y==="week"?z:x),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:l.jsx($,{name:"Plus",size:16})})]}),qt=()=>{if(!E)return l.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const P=m.filter(z=>z.day===x&&z.shift===v&&(y==="class"&&z.classId===E||y==="teacher"&&z.teacherId===E||y==="subject"&&z.subjectId===E)).sort((z,ye)=>z.period-ye.period);return P.length===0?l.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",x,"  ",v,"."]}):l.jsx("div",{className:"p-4 space-y-4",children:P.map(z=>{const ye=n.find(Rt=>Rt.id===z.subjectId),ae=r.find(Rt=>Rt.id===z.teacherId),re=A.find(Rt=>Rt.id===z.classId),fe=s.find(Rt=>Rt.id===z.roomId),Ke=fe?fe.name:z.roomId,dt=We(z);return l.jsxs("div",{onClick:t?void 0:()=>Xe(z),className:`rounded-xl p-4 shadow-sm border ${dt.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[z.period," "]}),dt.length>0&&l.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${dt.join(", ")}`,children:"!"})]}),l.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ye==null?void 0:ye.name," ",z.direction&&`(${z.direction})`]}),l.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[re==null?void 0:re.name,"  ",ae==null?void 0:ae.name]}),Ke&&l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",Ke]})]},z.id)})})};return l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Ne.visible&&l.jsx(EH,{x:Ne.x,y:Ne.y,onClose:()=>ee({...Ne,visible:!1}),actions:D}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[l.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>_(ue.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${v===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>_(ue.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${v===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),y!=="week"&&l.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:Rn.map(P=>l.jsx("button",{onClick:()=>w(P),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${x===P?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:P},P))}),!t&&l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx($,{name:"RotateCcw",size:18})}),l.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:l.jsx($,{name:"RotateCw",size:18})})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>{C("class"),Q("")},className:`p-2 rounded-md ${y==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"GraduationCap",size:18})}),l.jsx("button",{onClick:()=>{C("teacher"),Q("")},className:`p-2 rounded-md ${y==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"Users",size:18})}),l.jsx("button",{onClick:()=>{C("subject"),Q("")},className:`p-2 rounded-md ${y==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:l.jsx($,{name:"BookOpen",size:18})}),l.jsx("button",{onClick:()=>{var P;C("week"),Q(((P=A[0])==null?void 0:P.id)||"")},className:`p-2 rounded-md ${y==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:l.jsx($,{name:"Calendar",size:18})})]}),l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[l.jsx($,{name:"Filter",size:16,className:"text-slate-400"}),l.jsxs("select",{value:E,onChange:P=>Q(P.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[l.jsxs("option",{value:"",children:[" ",y==="class"?"":y==="teacher"?"":y==="week"?" ()":""]}),(y==="class"||y==="week")&&A.filter(P=>P.shift===v).map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),y==="teacher"&&r.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id)),y==="subject"&&n.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})]}),l.jsx("input",{placeholder:"...",value:N,onChange:P=>L(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),l.jsx("input",{placeholder:"...",value:T,onChange:P=>Pe(P.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&l.jsxs("button",{onClick:()=>me(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[l.jsx($,{name:"List",size:16})," . ."]}),(E||y==="week")&&l.jsx("button",{onClick:()=>et(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:l.jsx($,{name:"Printer",size:16})})]})]}),ve&&!t&&E&&l.jsx("div",{className:"flex justify-center mb-4 no-print",children:l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>pe(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${wt?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:l.jsx($,{name:"Columns",size:16})}),l.jsx("button",{onClick:()=>pe(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${wt?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:l.jsx($,{name:"Rows",size:16})})]})}),l.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:l.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:ve&&wt&&!t&&E?qt():l.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:y==="week"?"":y==="class"?"":y==="teacher"?"":""}),he.map(P=>l.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:y==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:se.length>0?se.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:P.name}),he.map(z=>{const ye=qe(P.id,z),ae=`${P.id}-${z}`,re={rowId:P.id,colKey:z};return l.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${Ee===ae?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:fe=>it(fe,null,re),onDragOver:t?void 0:fe=>On(fe,re),onDrop:t?void 0:fe=>Jn(fe,re),children:ot(ye,z,P.id)},z)})]},P.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),l.jsx(wA,{isOpen:I,onClose:()=>F(!1),title:U.id?" ":" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[": ",U.day]}),l.jsxs("span",{children:[": ",U.period]}),l.jsxs("span",{children:[": ",U.shift===ue.First?"1 ":"2 "]})]}),G.length>0&&l.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:G.map(P=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($,{name:"AlertTriangle",size:14}),P]},P))}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Xg,{options:A.filter(P=>P.shift===v).map(P=>({value:P.id,label:P.name})),value:U.classId||null,onChange:P=>{R({...U,classId:P}),je({...U,classId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Xg,{options:n.map(P=>({value:P.id,label:P.name})),value:U.subjectId||null,onChange:P=>{R({...U,subjectId:P}),je({...U,subjectId:P})},placeholder:" "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsx(Xg,{options:[{label:"",options:V.map(P=>({value:P.id,label:P.name}))},{label:"",options:q.map(P=>({value:P.id,label:P.name}))}],value:U.teacherId||null,onChange:P=>R({...U,teacherId:P}),placeholder:" ",groupBy:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:U.direction||"",onChange:P=>R({...U,direction:P.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),l.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:U.roomId||"",onChange:P=>{R({...U,roomId:P.target.value}),je({...U,roomId:P.target.value})},children:[l.jsx("option",{value:"",children:" "}),s.map(P=>l.jsxs("option",{value:P.id,children:[P.name," (",P.capacity," )"]},P.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[U.id&&l.jsx("button",{onClick:()=>ke(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),l.jsx("button",{onClick:$e,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})}),l.jsx(wA,{isOpen:W,onClose:()=>me(!1),title:"   ",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),l.jsx("button",{onClick:()=>De("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),l.jsx("div",{className:"flex gap-2",children:l.jsx("select",{value:ge,onChange:P=>Ie(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:Rn.map(P=>l.jsx("option",{value:P,children:P},P))})}),l.jsxs("button",{onClick:()=>De("clearDay",ge),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",ge]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),l.jsx("div",{className:"flex gap-2",children:l.jsxs("select",{value:be,onChange:P=>Ue(P.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[l.jsx("option",{value:"",disabled:!0,children:" "}),A.map(P=>l.jsx("option",{value:P.id,children:P.name},P.id))]})}),l.jsx("button",{onClick:()=>{be&&De("clearClass",void 0,be)},disabled:!be,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),l.jsxs(wA,{isOpen:Ae.isOpen,onClose:()=>te({...Ae,isOpen:!1}),title:"",children:[l.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>te({...Ae,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("button",{onClick:ut,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),Me&&l.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[l.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[l.jsx($,{name:"Printer",size:16})," "]}),l.jsx("button",{onClick:()=>et(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:l.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:oe}),l.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),l.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:Te||y==="week"?"":y==="class"?"":y==="teacher"?"":""}),we.map(P=>l.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:Te||y==="week"?P:`${P} `},P))]})}),l.jsx("tbody",{children:ce.map(P=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:P.name}),we.map(z=>{const ye=Re(P.id,z);return l.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ye.map(ae=>{const re=n.find(ft=>ft.id===ae.subjectId),fe=r.find(ft=>ft.id===ae.teacherId),Ke=A.find(ft=>ft.id===ae.classId),dt=s.find(ft=>ft.id===ae.roomId),Rt=dt?dt.name:ae.roomId,un=y==="teacher",ht=y==="subject"||y==="week"||Te&&un?Ke==null?void 0:Ke.name:re==null?void 0:re.name,ti=un?Ke==null?void 0:Ke.name:fe==null?void 0:fe.name;return l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[ht,ae.direction&&` (${ae.direction})`]}),l.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[l.jsx("span",{children:ti}),Rt&&l.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:Rt})]})]},ae.id)})},z)})]},P.id))})]})]})})]})]})},RH=()=>{var Ne,ee;const{subjects:t,teachers:e,classes:n,rooms:r,bellSchedule:A,saveStaticData:s}=PA(),[i,o]=k.useState("teachers"),[a,c]=k.useState(!1),[d,h]=k.useState(null),[f,m]=k.useState({}),[B,v]=k.useState({}),[_,x]=k.useState({}),[w,I]=k.useState({}),[F,U]=k.useState("default"),[R,y]=k.useState(null),C=S=>{h(S||null),i==="teachers"?m(S?e.find(O=>O.id===S)??{}:{subjectIds:[],unavailableDates:[],shifts:[ue.First,ue.Second],telegramChatId:""}):i==="subjects"?v(S?t.find(O=>O.id===S)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?x(S?n.find(O=>O.id===S)??{}:{shift:ue.First,studentsCount:25}):i==="rooms"&&I(S?r.find(O=>O.id===S)??{}:{capacity:30,type:""}),c(!0)},E=async()=>{const S=()=>Math.random().toString(36).substr(2,9),O={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:B,key:"subjects"},classes:{list:n,form:_,key:"classes"},rooms:{list:r,form:w,key:"rooms"}};if(i==="bells"||!(i in O))return;const G=O[i],{list:Y,form:ne,key:Le}=G;if(!ne.name)return;let Ee=[...Y];d?Ee=Ee.map(Ve=>Ve.id===d?{...Ve,...ne}:Ve):Ee.push({...ne,id:S()}),await s({[Le]:Ee}),c(!1)},Q=async S=>{if(window.confirm(" ?"))switch(i){case"teachers":await s({teachers:e.filter(O=>O.id!==S)});break;case"subjects":await s({subjects:t.filter(O=>O.id!==S)});break;case"classes":await s({classes:n.filter(O=>O.id!==S)});break;case"rooms":await s({rooms:r.filter(O=>O.id!==S)});break}},N=(S,O)=>{y(O),S.dataTransfer.effectAllowed="move"},L=S=>{S.preventDefault()},T=async(S,O)=>{if(!(R===null||R===O)){switch(i){case"teachers":{const G=[...e],[Y]=G.splice(R,1);G.splice(O,0,Y),await s({teachers:G});break}case"subjects":{const G=[...t],[Y]=G.splice(R,1);G.splice(O,0,Y),await s({subjects:G});break}case"classes":{const G=[...n],[Y]=G.splice(R,1);G.splice(O,0,Y),await s({classes:G});break}case"rooms":{const G=[...r],[Y]=G.splice(R,1);G.splice(O,0,Y),await s({rooms:G});break}}y(null)}},Pe=(S,O)=>{const G=F;let Y=A.find(ne=>ne.shift===S&&ne.period===O&&ne.day===G);if(!Y&&G!=="default"){const ne=A.find(Le=>Le.shift===S&&Le.period===O&&Le.day==="default");return ne?{...ne,start:"",end:"",isInherited:!0}:{start:"",end:"",isInherited:!1}}return Y?{...Y,isInherited:!1}:{start:"",end:"",isInherited:!1}},Me=async(S,O,G,Y)=>{let ne=[...A];const Le=F,Ee=ne.findIndex(Ve=>Ve.shift===S&&Ve.period===O&&Ve.day===Le);Ee>=0?ne[Ee]={...ne[Ee],[G]:Y}:ne.push({shift:S,period:O,[G]:Y,start:"00:00",end:"00:00",day:Le}),await s({bellSchedule:ne})},et=S=>{const O=f.shifts||[];O.includes(S)?m({...f,shifts:O.filter(G=>G!==S)}):m({...f,shifts:[...O,S]})};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[l.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(S=>l.jsxs("button",{onClick:()=>o(S.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===S.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx($,{name:S.icon,size:18})," ",S.label]},S.id))}),i!=="bells"&&l.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[l.jsx($,{name:"Plus",size:20})," "]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&l.jsx(Vu,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((S,O)=>l.jsxs("div",{draggable:!0,onDragStart:G=>N(G,O),onDragOver:L,onDrop:G=>T(G,O),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:S.name})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(S.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:l.jsx($,{name:"Trash2",size:16})})]})]}),l.jsx("div",{className:"text-xs text-slate-500 mb-2",children:S.birthDate?`: ${new Date(S.birthDate).toLocaleDateString("ru-RU")}`:""}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[S.shifts.includes(ue.First)&&l.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),S.shifts.includes(ue.Second)&&l.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:S.subjectIds.map(G=>{const Y=t.find(ne=>ne.id===G);return Y?l.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:Y.color,color:"#334155"},children:Y.name},G):null})})]},S.id))}),i==="subjects"&&l.jsx(Vu,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((S,O)=>l.jsxs("div",{draggable:!0,onDragStart:G=>N(G,O),onDragOver:L,onDrop:G=>T(G,O),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:S.color},children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:S.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[" ",S.difficulty,"  ",S.requiredRoomType]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:16})})]})]},S.id))}),i==="classes"&&l.jsx(Vu,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.map((S,O)=>l.jsxs("div",{draggable:!0,onDragStart:G=>N(G,O),onDragOver:L,onDrop:G=>T(G,O),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[l.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:l.jsx($,{name:"GripVertical",size:14})}),l.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:S.name}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[S.studentsCount||0," "]}),l.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${S.shift===ue.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[S.shift===ue.First?"I":"II"," "]}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:14})}),l.jsx("button",{onClick:()=>Q(S.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:14})})]})]},S.id))}),i==="rooms"&&l.jsx(Vu,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:r.map((S,O)=>l.jsxs("div",{draggable:!0,onDragStart:G=>N(G,O),onDragOver:L,onDrop:G=>T(G,O),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),l.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:l.jsx($,{name:"DoorOpen",size:20})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:S.name}),l.jsxs("div",{className:"text-xs text-slate-400",children:[": ",S.capacity,"  ",S.type]})]})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:()=>C(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:l.jsx($,{name:"Edit2",size:16})}),l.jsx("button",{onClick:()=>Q(S.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:l.jsx($,{name:"Trash2",size:16})})]})]},S.id))}),i==="bells"&&l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-1 rounded-xl flex gap-1",children:["default","",""].map(S=>l.jsx("button",{onClick:()=>U(S),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${F===S?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:S==="default"?"":S===""?"":""},S))})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ue.First,ue.Second].map(S=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`p-4 font-bold text-lg text-white ${S===ue.First?"bg-indigo-600":"bg-purple-600"}`,children:S}),l.jsx("div",{className:"p-6 space-y-3",children:zr[S].map(O=>{const G=Pe(S,O);return l.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-xl transition-colors ${G.isInherited?"bg-slate-50/50 dark:bg-slate-800/50 opacity-60":"bg-slate-50 dark:bg-slate-700/50"}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-lg bg-white dark:bg-slate-600 flex items-center justify-center font-black text-slate-500 dark:text-slate-300 shadow-sm",children:O}),l.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:G.start,onChange:Y=>Me(S,O,"start",Y.target.value)}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsx("input",{type:"time",className:"flex-1 border-none bg-transparent font-bold text-slate-800 dark:text-white text-center focus:ring-0",value:G.end,onChange:Y=>Me(S,O,"end",Y.target.value)})]})]},O)})})]},S))})]})]}),l.jsx(wA,{isOpen:a,onClose:()=>c(!1),title:d?"":"",children:l.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:S=>m({...f,name:S.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:S=>m({...f,birthDate:S.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),l.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:S=>m({...f,telegramChatId:S.target.value}),placeholder:"12345678"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Ne=f.shifts)==null?void 0:Ne.includes(ue.First),onChange:()=>et(ue.First)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(ee=f.shifts)==null?void 0:ee.includes(ue.Second),onChange:()=>et(ue.Second)})," ",l.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),l.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(S=>{var O;return l.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(O=f.subjectIds)==null?void 0:O.includes(S.id),onChange:G=>{const Y=f.subjectIds||[];m({...f,subjectIds:G.target.checked?[...Y,S.id]:Y.filter(ne=>ne!==S.id)})}})," ",l.jsx("span",{className:"text-sm dark:text-slate-300",children:S.name})]},S.id)})})]}),i==="subjects"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:B.name||"",onChange:S=>v({...B,name:S.target.value})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),l.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:B.color||"#ffffff",onChange:S=>v({...B,color:S.target.value})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),l.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.difficulty||5,onChange:S=>v({...B,difficulty:parseInt(S.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:B.requiredRoomType,onChange:S=>v({...B,requiredRoomType:S.target.value}),children:Ny.map(S=>l.jsx("option",{value:S,children:S},S))})]})]}),i==="classes"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:_.name||"",onChange:S=>x({..._,name:S.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:_.studentsCount||25,onChange:S=>x({..._,studentsCount:parseInt(S.target.value)})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{onClick:()=>x({..._,shift:ue.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ue.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>x({..._,shift:ue.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ue.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&l.jsxs(l.Fragment,{children:[l.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:w.name||"",onChange:S=>I({...w,name:S.target.value})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),l.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.capacity||30,onChange:S=>I({...w,capacity:parseInt(S.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),l.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.type,onChange:S=>I({...w,type:S.target.value}),children:Ny.map(S=>l.jsx("option",{value:S,children:S},S))})]})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{onClick:E,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})})]})},NH=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:A,saveStaticData:s}=PA(),{schedule1:i,schedule2:o,substitutions:a,saveScheduleData:c}=Da(),d=zs(),[h,f]=k.useState(new Date().toISOString().split("T")[0]),[m,B]=k.useState(!1),[v,_]=k.useState(null),[x,w]=k.useState(!1),[I,F]=k.useState(!1),[U,R]=k.useState(null),[y,C]=k.useState(""),[E,Q]=k.useState(!1),[N,L]=k.useState(""),[T,Pe]=k.useState(""),[Me,et]=k.useState("all"),[Ne,ee]=k.useState(""),[S,O]=k.useState(""),[G,Y]=k.useState(""),[ne,Le]=k.useState(""),[Ee,Ve]=k.useState([]),[ve,wt]=k.useState(!1),[pe,W]=k.useState(!1),me=k.useMemo(()=>{const D=new Date(h).getMonth();return D>=0&&D<=4?o:i},[h,i,o]);k.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(_(d.state.subParams),Y(""),Le(""),Ve([]),wt(!1),W(!1),B(!0),window.history.replaceState({},document.title))},[d.state]),k.useEffect(()=>{if(m&&v){const D=a.find(V=>V.scheduleItemId===v.scheduleItemId&&V.date===h);Ve(D?D.refusals||[]:[]),wt(!1),W(!1)}},[m,v,a,h]);const Ae=k.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:Rn[D-1]},[h]),te=k.useMemo(()=>e.filter(D=>{const V=D.name.toLowerCase().includes(T.toLowerCase()),q=Me==="all"?!0:D.shifts.includes(Me);return V&&q}),[e,T,Me]),ge=k.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),Ie=k.useMemo(()=>{if(!Ae)return[];const D=ge.map(ce=>ce.id),V=me.filter(ce=>ce.day===Ae&&D.includes(ce.teacherId)),oe=a.filter(ce=>ce.date===h).map(ce=>ce.scheduleItemId),Te=me.filter(ce=>oe.includes(ce.id)),we=[...V];return Te.forEach(ce=>{we.find(Re=>Re.id===ce.id)||we.push(ce)}),we.sort((ce,Re)=>ce.period-Re.period)},[me,Ae,ge,a,h]),be=D=>{var q;const V=e.find(oe=>oe.id===D);R(D),C(((q=V==null?void 0:V.absenceReasons)==null?void 0:q[h])||""),w(!0)},Ue=k.useCallback(async()=>{let D=[...e];const V=D.findIndex(oe=>oe.id===U);if(V===-1)return;const q={...D[V]};q.unavailableDates.includes(h)||(q.unavailableDates=[...q.unavailableDates,h]),q.absenceReasons||(q.absenceReasons={}),q.absenceReasons[h]=y,D[V]=q,await s({teachers:D}),w(!1)},[e,U,h,y,s]),Ge=k.useCallback(async D=>{let V=[...e];const q=V.findIndex(Te=>Te.id===D);if(q===-1)return;const oe={...V[q]};oe.unavailableDates=oe.unavailableDates.filter(Te=>Te!==h),oe.absenceReasons&&delete oe.absenceReasons[h],V[q]=oe,await s({teachers:V})},[e,h,s]),Ye=k.useCallback(async(D,V=!1)=>{if(!v){alert(":   .    . ,   .");return}const q=[...a],oe=me.find(ce=>ce.id===v.scheduleItemId);if(!oe){alert(":     . ,       .");return}const Te=q.findIndex(ce=>ce.scheduleItemId===v.scheduleItemId&&ce.date===h),we={id:Te>=0?q[Te].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:v.scheduleItemId,originalTeacherId:oe.teacherId,replacementTeacherId:D,replacementRoomId:G||void 0,isMerger:V,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&ne?ne:void 0,refusals:Ee};Te>=0?q[Te]=we:q.push(we),await c({substitutions:q}),B(!1),ee(""),Y(""),Le(""),Ve([]),_(null)},[v,h,G,me,a,e,ne,Ee,c]),qe=k.useCallback(async D=>{if(!v)return;const V=me.find(De=>De.id===v.scheduleItemId),q=me.find(De=>De.id===D);if(!V||!q){alert(":     .");return}const oe=[...a];let Te;G?Te=G:Te=pe?V.roomId:q.roomId;const we=pe?q.roomId:V.roomId,ce=oe.findIndex(De=>De.scheduleItemId===V.id&&De.date===h),Re={id:ce>=0?oe[ce].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:V.id,originalTeacherId:V.teacherId,replacementTeacherId:V.teacherId,replacementClassId:q.classId,replacementSubjectId:q.subjectId,replacementRoomId:Te!==V.roomId?Te:void 0};ce>=0?oe[ce]=Re:oe.push(Re);const se=oe.findIndex(De=>De.scheduleItemId===q.id&&De.date===h),he={id:se>=0?oe[se].id:Math.random().toString(36).substr(2,9),date:h,scheduleItemId:q.id,originalTeacherId:q.teacherId,replacementTeacherId:q.teacherId,replacementClassId:V.classId,replacementSubjectId:V.subjectId,replacementRoomId:we!==q.roomId?we:void 0};se>=0?oe[se]=he:oe.push(he),await c({substitutions:oe}),B(!1),_(null),Y(""),wt(!1),W(!1)},[v,me,a,h,c,G,pe]),We=k.useCallback(async D=>{const V=a.filter(q=>!(q.scheduleItemId===D&&q.date===h));await c({substitutions:V})},[a,h,c]),Qe=k.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const V=a.some(oe=>oe.date===h&&oe.replacementTeacherId!=="conducted"),q=(oe,Te)=>{const ce=Ie.filter(Re=>Re.shift===Te).filter(Re=>{const se=a.find(he=>he.scheduleItemId===Re.id&&he.date===h);return se&&se.replacementTeacherId!=="conducted"});ce.length>0&&(D+=`
 *${oe.toUpperCase()}*
`,ce.forEach(Re=>{var un,It,LA;const se=a.find(ht=>ht.scheduleItemId===Re.id&&ht.date===h),he=n.find(ht=>ht.id===Re.classId),De=t.find(ht=>ht.id===Re.subjectId),ut=se?e.find(ht=>ht.id===se.replacementTeacherId):null,ot=e.find(ht=>ht.id===Re.teacherId),qt=((un=r.find(ht=>ht.id===Re.roomId))==null?void 0:un.name)||Re.roomId||"?",P=(It=ot==null?void 0:ot.absenceReasons)==null?void 0:It[h],z=se==null?void 0:se.lessonAbsenceReason,re=(z===" "?z:null)||(P===" "?P:null),fe=(ot==null?void 0:ot.name)+(re?` (${re})`:""),Ke=se!=null&&se.replacementRoomId?((LA=r.find(ht=>ht.id===se.replacementRoomId))==null?void 0:LA.name)||se.replacementRoomId:null,dt=se!=null&&se.replacementClassId?n.find(ht=>ht.id===se.replacementClassId):null,Rt=se!=null&&se.replacementSubjectId?t.find(ht=>ht.id===se.replacementSubjectId):null;if(se)if(se.replacementTeacherId==="cancelled")D+=` ${he==null?void 0:he.name} (${Re.period} ): ${De==null?void 0:De.name} (${fe}) ->  
`;else if(se.replacementTeacherId===se.originalTeacherId&&Ke&&!dt)D+=` ${he==null?void 0:he.name} (${Re.period} ): ${De==null?void 0:De.name} (${ot==null?void 0:ot.name}) ->  ${qt}  ${Ke}
`;else if(dt&&Rt)D+=` ${he==null?void 0:he.name} (${Re.period} ): ${De==null?void 0:De.name} ->  ${dt.name} ${Rt.name} ( )${Ke?`  . ${Ke}`:""}
`;else{let ht=` ${he==null?void 0:he.name} (${Re.period} ): ${De==null?void 0:De.name} -> ${ut==null?void 0:ut.name} ${se.isMerger?"() ":""}( ${fe})`;Ke&&(ht+=`  . ${Ke}`),D+=ht+`
`}}))};V?(q(ue.First,ue.First),q(ue.Second,ue.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,a,Ie,n,t,e,r]),je=k.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;a.filter(we=>we.date===h).forEach(we=>{var ae;const ce=me.find(re=>re.id===we.scheduleItemId);if(!ce)return;let Re="Unknown";if(we.replacementTeacherId==="cancelled")Re=" ";else if(we.replacementTeacherId==="conducted")Re=" ";else{const re=e.find(fe=>fe.id===we.replacementTeacherId);re&&(Re=re.name)}const se=t.find(re=>re.id===ce.subjectId),he=n.find(re=>re.id===ce.classId),De=we.date.replace(/-/g,""),ut=e.find(re=>re.id===we.originalTeacherId),ot=(ae=ut==null?void 0:ut.absenceReasons)==null?void 0:ae[h],qt=we.lessonAbsenceReason,ye=(qt===" "?qt:null)||(ot===" "?ot:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${De}
SUMMARY:: ${he==null?void 0:he.name} - ${se==null?void 0:se.name}
DESCRIPTION:: ${Re}${we.isMerger?" ()":""}${ye?` (: ${ye})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const q=new Blob([D],{type:"text/calendar"}),oe=URL.createObjectURL(q),Te=document.createElement("a");Te.href=oe,Te.download="substitutions.ics",document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)},[h,a,me,e,t,n]),Xe=k.useCallback(async()=>{if(!(A!=null&&A.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,V=!1;const q=new Set,oe=[ue.First,ue.Second];for(const we of oe){const Re=Ie.filter(se=>se.shift===we).filter(se=>a.some(he=>he.scheduleItemId===se.id&&he.date===h&&he.replacementTeacherId!=="conducted"));Re.length>0&&(V=!0,D+=` *${we.toUpperCase()}*
`,Re.forEach(se=>{var LA,ht,ti;const he=a.find(ft=>ft.scheduleItemId===se.id&&ft.date===h);if(!he)return;const De=n.find(ft=>ft.id===se.classId),ut=t.find(ft=>ft.id===se.subjectId),ot=e.find(ft=>ft.id===he.originalTeacherId),qt=e.find(ft=>ft.id===he.replacementTeacherId),P=(LA=ot==null?void 0:ot.absenceReasons)==null?void 0:LA[h],z=he.lessonAbsenceReason,re=(z===" "?z:null)||(P===" "?P:null),fe=(ot==null?void 0:ot.name)+(re?` (${re})`:""),Ke=((ht=r.find(ft=>ft.id===se.roomId))==null?void 0:ht.name)||se.roomId||"",dt=he.replacementRoomId?((ti=r.find(ft=>ft.id===he.replacementRoomId))==null?void 0:ti.name)||he.replacementRoomId:Ke,Rt=he.replacementClassId?n.find(ft=>ft.id===he.replacementClassId):null,un=he.replacementSubjectId?t.find(ft=>ft.id===he.replacementSubjectId):null;let It=`${se.period}  (${De==null?void 0:De.name} ${ut==null?void 0:ut.name}${se.direction?` ${se.direction}`:""}): `;he.replacementTeacherId==="cancelled"?It+=`* * ( ${fe})`:Rt&&un?(It+=`  : ${Rt.name} ${un.name} ( ${De==null?void 0:De.name} ${ut==null?void 0:ut.name})`,dt!==Ke&&(It+=`  . ${dt}`)):he.replacementTeacherId===he.originalTeacherId?It+=`: ${fe}.  : ${Ke}  ${dt}`:(It+=`*${qt==null?void 0:qt.name}* ${he.isMerger?"() ":""}( *${fe}*)`,Ke!==dt?It+=`. : ${Ke}  ${dt}`:dt!==""&&(It+=`. : ${dt}`)),D+=`${It}
`,ot!=null&&ot.telegramChatId&&q.add(ot.telegramChatId),qt!=null&&qt.telegramChatId&&q.add(qt.telegramChatId)}),D+=`
`)}if(V||(D+=` .
`),ge.forEach(we=>{var he;const ce=a.some(De=>De.date===h&&De.originalTeacherId===we.id&&De.replacementTeacherId!=="cancelled"&&De.replacementTeacherId!=="conducted"),Re=(he=we.absenceReasons)==null?void 0:he[h],se=Re===" "?Re:"";we.telegramChatId&&!ce&&we.unavailableDates.includes(h)&&(q.add(we.telegramChatId),V?D+=`_:  ${we.name} ${se},        /._
`:D+=`_:  ${we.name} ${se},      ._
`)}),q.size===0){alert("    Telegram Chat ID   .");return}const Te=`https://api.telegram.org/bot${A.telegramToken}/sendMessage`;try{const we=Array.from(q).map(ce=>fetch(Te,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:ce,text:D,parse_mode:"Markdown"})}));await Promise.all(we),alert(`   ${q.size} !`)}catch(we){console.error("    Telegram:",we),alert("     Telegram.     .")}},[h,Ie,a,n,t,e,r,ge,A==null?void 0:A.telegramToken]),ze=k.useMemo(()=>v?new Set(a.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const V=me.find(q=>q.id===D.scheduleItemId);return V&&V.period===v.period&&V.shift===v.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[a,me,h,v]),$e=k.useMemo(()=>{if(!v||!Ae)return[];const D=h.substring(0,7);return e.filter(V=>V.name.toLowerCase().includes(Ne.toLowerCase())).map(V=>{const q=V.unavailableDates.includes(h),oe=me.some(he=>he.teacherId===V.id&&he.day===Ae&&he.period===v.period&&he.shift===v.shift),Te=ze.has(V.id),we=oe||Te,ce=V.subjectIds.includes(v.subjectId),Re=a.filter(he=>he.replacementTeacherId===V.id&&he.date.startsWith(D)).length;let se=0;return q&&(se-=1e3),we&&(se-=100),ce&&(se+=50),{teacher:V,isAbsent:q,isBusy:we,isSpecialist:ce,score:se,subsCount:Re}}).sort((V,q)=>q.score-V.score)},[e,v,h,Ne,Ae,me,a,ze]),ke=k.useMemo(()=>{var we;if(!v)return null;const D=me.find(ce=>ce.id===v.scheduleItemId);if(!D)return null;const V=n.find(ce=>ce.id===D.classId),q=t.find(ce=>ce.id===D.subjectId),oe=e.find(ce=>ce.id===D.teacherId),Te=((we=oe==null?void 0:oe.unavailableDates)==null?void 0:we.includes(h))||!1;return{className:V==null?void 0:V.name,subjectName:q==null?void 0:q.name,teacherName:oe==null?void 0:oe.name,teacherId:oe==null?void 0:oe.id,period:D.period,roomId:D.roomId,isTeacherAbsent:Te}},[v,me,n,t,e,h]),it=k.useMemo(()=>!(ke!=null&&ke.teacherId)||!Ae?[]:me.filter(D=>D.teacherId===ke.teacherId&&D.day===Ae&&D.id!==(v==null?void 0:v.scheduleItemId)).sort((D,V)=>D.period-V.period),[me,ke,Ae,v]),kt=k.useMemo(()=>{if(!Ae||S.length<2)return[];const D=S.toLowerCase(),V=e.filter(Te=>Te.name.toLowerCase().includes(D)),q=n.filter(Te=>Te.name.toLowerCase().includes(D)),oe=[];return V.forEach(Te=>{me.filter(ce=>ce.teacherId===Te.id&&ce.day===Ae).forEach(ce=>{const Re=n.find(he=>he.id===ce.classId),se=t.find(he=>he.id===ce.subjectId);oe.push({...ce,entityName:Te.name,subInfo:Re==null?void 0:Re.name,subjectName:se==null?void 0:se.name})})}),q.forEach(Te=>{me.filter(ce=>ce.classId===Te.id&&ce.day===Ae).forEach(ce=>{if(oe.find(he=>he.id===ce.id))return;const Re=e.find(he=>he.id===ce.teacherId),se=t.find(he=>he.id===ce.subjectId);oe.push({...ce,entityName:Te.name,subInfo:Re==null?void 0:Re.name,subjectName:se==null?void 0:se.name})})}),oe.sort((Te,we)=>Te.period-we.period)},[S,Ae,e,n,me,t]),Hn=k.useCallback(async(D,V,q,oe,Te,we)=>{const Re=new Date(we).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),se=V.shift===ue.First?"1 ":"2 ",he=` *  *
${D.name}

 : ${Re}
 : ${se}
 : ${q==null?void 0:q.name}
1 : ${V.period}
 : ${oe==null?void 0:oe.name}
 : ${Te||" "}`;if(A!=null&&A.telegramToken&&D.telegramChatId)try{const ut=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:he,parse_mode:"Markdown"})})).json();ut.ok?alert(`   Telegram  ${D.name}!`):ut.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${ut.description}`)}catch(De){alert("   Telegram (/)."),console.error(De)}else navigator.share?navigator.share({title:"",text:he}).catch(()=>{}):(navigator.clipboard.writeText(he),alert(" ! (Telegram     Chat ID)"))},[A==null?void 0:A.telegramToken]),On=(D,V)=>{let q=!1;if(V){if(!window.confirm("     .     ?"))return;q=!0}Ye(D,q)},Jn=(D,V)=>{V.stopPropagation(),Ee.includes(D)?Ve(Ee.filter(q=>q!==D)):Ve([...Ee,D])};return l.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"w-full md:w-80 flex flex-col gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),l.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]}),l.jsxs("button",{onClick:()=>Q(!E),className:`mt-3 w-full py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 border transition-all ${E?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white border-indigo-200 dark:border-slate-500"}`,children:[l.jsx($,{name:"History",size:16})," ",E?" ":" "]})]}),E?l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),l.jsx("input",{placeholder:"  /...",value:N,onChange:D=>L(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:a.filter(D=>{var V;return D.date.includes(N)||((V=e.find(q=>q.id===D.replacementTeacherId))==null?void 0:V.name.toLowerCase().includes(N.toLowerCase()))}).map(D=>{const V=e.find(oe=>oe.id===D.replacementTeacherId),q=r.find(oe=>oe.id===D.replacementRoomId);return l.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[l.jsx("div",{className:"font-bold",children:D.date}),l.jsxs("div",{children:[(V==null?void 0:V.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&l.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),q&&l.jsxs("div",{className:"text-indigo-500",children:[". ",q.name]})]},D.id)})})]}):l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col",children:[l.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"UserX",size:18,className:"text-red-500"})," "]}),l.jsxs("div",{className:"mb-3 space-y-2",children:[l.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>et("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${Me==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),l.jsx("button",{onClick:()=>et(ue.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${Me===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>et(ue.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${Me===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{placeholder:" ...",value:T,onChange:D=>Pe(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[te.map(D=>{const V=D.unavailableDates.includes(h),q=D.absenceReasons?D.absenceReasons[h]:"";return l.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${V?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:`text-sm font-medium ${V?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),l.jsx("button",{onClick:()=>V?Ge(D.id):be(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${V?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:V?"":""})]}),l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsx("div",{className:"flex gap-1",children:D.shifts.map(oe=>l.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:oe===ue.First?"1":"2"},oe))}),V&&l.jsxs("div",{className:"flex items-center gap-1",children:[q&&l.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:q}),l.jsx("button",{onClick:()=>be(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:l.jsx($,{name:"Edit2",size:14})})]})]})]},D.id)}),te.length===0&&l.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["  (",Ie.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:je,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-sm font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[l.jsx($,{name:"Calendar",size:16})," iCal"]}),Ie.length>0&&l.jsxs("button",{onClick:Qe,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-sm font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[l.jsx($,{name:"Copy",size:16})," "]}),l.jsxs("button",{onClick:Xe,className:"px-4 py-2 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Send",size:16})," Telegram"]}),l.jsxs("button",{onClick:()=>{O(""),F(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[l.jsx($,{name:"Search",size:16}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:Ie.length===0?l.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[l.jsx($,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),l.jsx("p",{children:" ,     "})]}):Ie.map(D=>{var P;const V=a.find(z=>z.scheduleItemId===D.id&&z.date===h),q=V&&V.replacementTeacherId!=="cancelled"&&V.replacementTeacherId!=="conducted"?e.find(z=>z.id===V.replacementTeacherId):null,oe=e.find(z=>z.id===D.teacherId),Te=t.find(z=>z.id===D.subjectId),we=n.find(z=>z.id===D.classId),ce=r.find(z=>z.id===D.roomId),Re=ce?ce.name:D.roomId,se=V==null?void 0:V.replacementRoomId,he=se?((P=r.find(z=>z.id===se))==null?void 0:P.name)||se:null,De=V!=null&&V.replacementClassId?n.find(z=>z.id===V.replacementClassId):null,ut=V!=null&&V.replacementSubjectId?t.find(z=>z.id===V.replacementSubjectId):null;let ot=null;if((V==null?void 0:V.replacementTeacherId)==="conducted")ot=l.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>We(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx($,{name:"X",size:16})})]});else if((V==null?void 0:V.replacementTeacherId)==="cancelled")ot=l.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),l.jsx("button",{onClick:()=>We(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:l.jsx($,{name:"X",size:16})})]});else if(q||se){const z=(V==null?void 0:V.replacementTeacherId)===(V==null?void 0:V.originalTeacherId)&&se&&!De,ye=De&&ut;ot=l.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:z?" ":ye?" ":" "}),l.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm",children:z?"  ":ye?` ${De==null?void 0:De.name}`:q==null?void 0:q.name}),V.isMerger&&l.jsx("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:""}),V.lessonAbsenceReason&&l.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",V.lessonAbsenceReason]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>Hn(q||oe,D,we,Te,he||Re,h),className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:l.jsx($,{name:"Send",size:18})}),l.jsx("button",{onClick:()=>We(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:l.jsx($,{name:"UserX",size:18})})]})]})}else ot=l.jsxs("button",{onClick:()=>{_({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),B(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",l.jsx($,{name:"ArrowRight",size:16})]});const qt=!ge.find(z=>z.id===D.teacherId);return l.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),l.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:we==null?void 0:we.name}),l.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===ue.First?"1":"2"}),l.jsx("span",{className:"text-slate-400",children:"|"}),l.jsx("span",{children:Te==null?void 0:Te.name})]})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx("span",{className:qt?"font-semibold":"line-through decoration-red-400 decoration-2",children:oe==null?void 0:oe.name}),Re&&l.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Re," ",he&&l.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",he]})]}),(V==null?void 0:V.lessonAbsenceReason)&&l.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",V.lessonAbsenceReason,")"]}),De&&ut&&l.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",De.name]})]})]})]}),ot]},D.id)})})]}),l.jsxs(wA,{isOpen:m,onClose:()=>B(!1),title:" ",children:[ke&&l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[l.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[ke.className,"  ",ke.period," "]}),l.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:ke.subjectName}),l.jsx("span",{className:ke.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:ke.teacherName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),l.jsxs("select",{value:G,onChange:D=>Y(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:"  "}),r.map(D=>l.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),ke&&!ke.isTeacherAbsent&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),l.jsxs("select",{value:ne,onChange:D=>Le(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[l.jsx("button",{onClick:()=>Ye("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),l.jsx("button",{onClick:()=>Ye("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),(ke==null?void 0:ke.teacherId)&&!ke.isTeacherAbsent&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Ye(ke.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),it.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{onClick:()=>wt(!ve),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[l.jsx($,{name:"RotateCw",size:16}),"     "]}),ve&&l.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:pe,onChange:D=>W(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),l.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",l.jsx("br",{})," :     ,   ."]})]}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),it.map(D=>{const V=n.find(oe=>oe.id===D.classId),q=t.find(oe=>oe.id===D.subjectId);return l.jsxs("button",{onClick:()=>qe(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[l.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",V==null?void 0:V.name," - ",q==null?void 0:q.name]},D.id)})]})]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Ne,onChange:D=>ee(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[$e.map(({teacher:D,isAbsent:V,isBusy:q,isSpecialist:oe,subsCount:Te})=>{const we=Ee.includes(D.id);return l.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${V?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":we?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":q?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${oe?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:oe?l.jsx($,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[oe&&l.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),q&&l.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),V&&l.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),we&&l.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),l.jsxs("span",{className:`px-1.5 rounded font-medium ${Te>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",Te]})]})]})]}),!V&&l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:ce=>Jn(D.id,ce),className:`px-3 py-1 text-xs font-bold rounded border ${we?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:we?"":""}),!we&&!q&&l.jsx("button",{onClick:()=>On(D.id,q),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!we&&q&&l.jsx("button",{onClick:()=>On(D.id,q),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),$e.length===0&&l.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),l.jsxs(wA,{isOpen:I,onClose:()=>F(!1),title:"  ",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),l.jsxs("div",{className:"relative",children:[l.jsx($,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),l.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:S,onChange:D=>O(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),l.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[kt.map(D=>{var V;return l.jsxs("button",{onClick:()=>{F(!1),_({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),B(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",l.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),l.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),l.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[l.jsx("span",{children:D.subjectName}),D.roomId&&l.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((V=r.find(q=>q.id===D.roomId))==null?void 0:V.name)||D.roomId]})]})]},D.id)}),S.length>1&&kt.length===0&&l.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),l.jsx(wA,{isOpen:x,onClose:()=>w(!1),title:" ",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("select",{value:y,onChange:D=>C(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""}),l.jsx("option",{children:" "}),l.jsx("option",{children:""})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:Ue,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},DH=()=>{const{subjects:t,teachers:e,rooms:n,settings:r,saveStaticData:A}=PA(),{schedule1:s,schedule2:i}=Da(),[o,a]=k.useState("teachers"),[c,d]=k.useState(new Date().toISOString().split("T")[0]),[h,f]=k.useState(ue.First),[m,B]=k.useState(1),[v,_]=k.useState(ue.First),[x,w]=k.useState(1),[I,F]=k.useState(""),[U,R]=k.useState(""),y=k.useMemo(()=>{const T=new Date(c).getMonth();return T>=0&&T<=4?i:s},[c,s,i]);k.useEffect(()=>{r&&(F(r.telegramToken||""),R(r.feedbackChatId||""))},[r]),k.useEffect(()=>{B(h===ue.First?1:0)},[h]),k.useEffect(()=>{w(v===ue.First?1:0)},[v]);const C=k.useMemo(()=>{const T=new Date(c).getDay();return T===0||T===6?null:Rn[T-1]},[c]),E=zr[h],Q=k.useMemo(()=>C?e.filter(T=>T.shifts&&!T.shifts.includes(h)||T.unavailableDates.includes(c)?!1:!y.some(Me=>Me.teacherId===T.id&&Me.day===C&&Me.period>m&&Me.shift===h)).sort((T,Pe)=>T.name.localeCompare(Pe.name)):[],[e,c,C,m,h,y]),N=k.useMemo(()=>{if(!C)return[];const T=new Set;return y.forEach(Me=>{Me.day===C&&Me.period===x&&Me.shift===v&&Me.roomId&&T.add(Me.roomId)}),n.filter(Me=>!T.has(Me.id)).map(Me=>Me.name)},[y,n,C,x,v]),L=async()=>{await A({settings:{...r,telegramToken:I,feedbackChatId:U}}),alert(" !")};return l.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx($,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>a("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>a("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>a("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${o==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),o!=="settings"&&l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsx("input",{type:"date",value:c,onChange:T=>d(T.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),o==="teachers"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>f(ue.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>f(ue.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:E.map(T=>l.jsx("button",{onClick:()=>B(T),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${m===T?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:T},T))})]})]}),o==="rooms"&&l.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),l.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[l.jsx("button",{onClick:()=>_(ue.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${v===ue.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),l.jsx("button",{onClick:()=>_(ue.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${v===ue.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),l.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:zr[v].map(T=>l.jsx("button",{onClick:()=>w(T),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${x===T?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:T},T))})]})]}),o==="settings"&&l.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),l.jsx("input",{type:"password",value:I,onChange:T=>F(T.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),l.jsx("input",{type:"text",value:U,onChange:T=>R(T.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),l.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),l.jsxs("button",{onClick:L,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Save",size:20}),"  "]})]})]}),o==="teachers"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[Q.map(T=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:l.jsx($,{name:"CheckCircle",size:22})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:T.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:T.subjectIds.slice(0,2).map(Pe=>{const Me=t.find(et=>et.id===Pe);return Me?l.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:Me.name},Pe):null})})]})]},T.id)),Q.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",m,"   ",h]})]}),o==="rooms"&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[N.map(T=>l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:l.jsx($,{name:"DoorOpen",size:20})}),l.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:T}),l.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},T)),N.length===0&&l.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[l.jsx($,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),l.jsx("p",{children:"      (   )."})]})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wm=function(t,e){return Wm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(n[A]=r[A])},Wm(t,e)};function jr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Wm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qm=function(){return qm=Object.assign||function(e){for(var n,r=1,A=arguments.length;r<A;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qm.apply(this,arguments)};function Vn(t,e,n,r){function A(s){return s instanceof n?s:new n(function(i){i(s)})}return new(n||(n=Promise))(function(s,i){function o(d){try{c(r.next(d))}catch(h){i(h)}}function a(d){try{c(r.throw(d))}catch(h){i(h)}}function c(d){d.done?s(d.value):A(d.value).then(o,a)}c((r=r.apply(t,[])).next())})}function kn(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,A,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return a([c,d])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,A&&(s=c[0]&2?A.return:c[0]?A.throw||((s=A.return)&&s.call(A),0):A.next)&&!(s=s.call(A,c[1])).done)return s;switch(A=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,A=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],A=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ku(t,e,n){if(arguments.length===2)for(var r=0,A=e.length,s;r<A;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||e)}var TA=function(){function t(e,n,r,A){this.left=e,this.top=n,this.width=r,this.height=A}return t.prototype.add=function(e,n,r,A){return new t(this.left+e,this.top+n,this.width+r,this.height+A)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var r=Array.from(n).find(function(A){return A.width!==0});return r?new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Kf=function(t,e){return TA.fromClientRect(t,e.getBoundingClientRect())},PH=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),A=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new TA(0,0,r,A)},Gf=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},Yt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},bC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gu=0;Gu<bC.length;Gu++)LH[bC.charCodeAt(Gu)]=Gu;var TC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zu=0;zu<TC.length;zu++)Bl[TC.charCodeAt(zu)]=zu;var MH=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)s=Bl[t.charCodeAt(r)],i=Bl[t.charCodeAt(r+1)],o=Bl[t.charCodeAt(r+2)],a=Bl[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return c},jH=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},HH=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},Ei=5,bB=11,Zg=2,OH=bB-Ei,NF=65536>>Ei,VH=1<<Ei,ep=VH-1,KH=1024>>Ei,GH=NF+KH,zH=GH,$H=32,WH=zH+$H,qH=65536>>bB,JH=1<<OH,XH=JH-1,FC=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},YH=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},ZH=function(t,e){var n=MH(t),r=Array.isArray(n)?HH(n):new Uint32Array(n),A=Array.isArray(n)?jH(n):new Uint16Array(n),s=24,i=FC(A,s/2,r[4]/2),o=r[5]===2?FC(A,(s+r[4])/2):YH(r,Math.ceil((s+r[4])/4));return new eO(r[0],r[1],r[2],r[3],i,o)},eO=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>Ei],n=(n<<Zg)+(e&ep),this.data[n];if(e<=65535)return n=this.index[NF+(e-55296>>Ei)],n=(n<<Zg)+(e&ep),this.data[n];if(e<this.highStart)return n=WH-qH+(e>>bB),n=this.index[n],n+=e>>Ei&XH,n=this.index[n],n=(n<<Zg)+(e&ep),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),QC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var $u=0;$u<QC.length;$u++)tO[QC.charCodeAt($u)]=$u;var nO="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",UC=50,rO=1,DF=2,PF=3,AO=4,sO=5,SC=7,LF=8,kC=9,ds=10,Jm=11,RC=12,Xm=13,iO=14,vl=15,Ym=16,Wu=17,sl=18,oO=19,NC=20,Zm=21,il=22,tp=23,so=24,ar=25,yl=26,xl=27,io=28,aO=29,pi=30,lO=31,qu=32,Ju=33,e0=34,t0=35,n0=36,bc=37,r0=38,Md=39,jd=40,np=41,MF=42,cO=43,uO=[9001,65288],jF="!",nt="",Xu="",A0=ZH(nO),iA=[pi,n0],s0=[rO,DF,PF,sO],HF=[ds,LF],DC=[xl,yl],dO=s0.concat(HF),PC=[r0,Md,jd,e0,t0],hO=[vl,Xm],fO=function(t,e){e===void 0&&(e="strict");var n=[],r=[],A=[];return t.forEach(function(s,i){var o=A0.get(s);if(o>UC?(A.push(!0),o-=UC):A.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(i),n.push(Ym);if(o===AO||o===Jm){if(i===0)return r.push(i),n.push(pi);var a=n[i-1];return dO.indexOf(a)===-1?(r.push(r[i-1]),n.push(a)):(r.push(i),n.push(pi))}if(r.push(i),o===lO)return n.push(e==="strict"?Zm:bc);if(o===MF||o===aO)return n.push(pi);if(o===cO)return s>=131072&&s<=196605||s>=196608&&s<=262141?n.push(bc):n.push(pi);n.push(o)}),[r,n,A]},rp=function(t,e,n,r){var A=r[n];if(Array.isArray(t)?t.indexOf(A)!==-1:t===A)for(var s=n;s<=r.length;){s++;var i=r[s];if(i===e)return!0;if(i!==ds)break}if(A===ds)for(var s=n;s>0;){s--;var o=r[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var a=n;a<=r.length;){a++;var i=r[a];if(i===e)return!0;if(i!==ds)break}if(o!==ds)break}return!1},LC=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r===ds)n--;else return r}return 0},gO=function(t,e,n,r,A){if(n[r]===0)return nt;var s=r-1;if(Array.isArray(A)&&A[s]===!0)return nt;var i=s-1,o=s+1,a=e[s],c=i>=0?e[i]:0,d=e[o];if(a===DF&&d===PF)return nt;if(s0.indexOf(a)!==-1)return jF;if(s0.indexOf(d)!==-1||HF.indexOf(d)!==-1)return nt;if(LC(s,e)===LF)return Xu;if(A0.get(t[s])===Jm||(a===qu||a===Ju)&&A0.get(t[o])===Jm||a===SC||d===SC||a===kC||[ds,Xm,vl].indexOf(a)===-1&&d===kC||[Wu,sl,oO,so,io].indexOf(d)!==-1||LC(s,e)===il||rp(tp,il,s,e)||rp([Wu,sl],Zm,s,e)||rp(RC,RC,s,e))return nt;if(a===ds)return Xu;if(a===tp||d===tp)return nt;if(d===Ym||a===Ym)return Xu;if([Xm,vl,Zm].indexOf(d)!==-1||a===iO||c===n0&&hO.indexOf(a)!==-1||a===io&&d===n0||d===NC||iA.indexOf(d)!==-1&&a===ar||iA.indexOf(a)!==-1&&d===ar||a===xl&&[bc,qu,Ju].indexOf(d)!==-1||[bc,qu,Ju].indexOf(a)!==-1&&d===yl||iA.indexOf(a)!==-1&&DC.indexOf(d)!==-1||DC.indexOf(a)!==-1&&iA.indexOf(d)!==-1||[xl,yl].indexOf(a)!==-1&&(d===ar||[il,vl].indexOf(d)!==-1&&e[o+1]===ar)||[il,vl].indexOf(a)!==-1&&d===ar||a===ar&&[ar,io,so].indexOf(d)!==-1)return nt;if([ar,io,so,Wu,sl].indexOf(d)!==-1)for(var h=s;h>=0;){var f=e[h];if(f===ar)return nt;if([io,so].indexOf(f)!==-1)h--;else break}if([xl,yl].indexOf(d)!==-1)for(var h=[Wu,sl].indexOf(a)!==-1?i:s;h>=0;){var f=e[h];if(f===ar)return nt;if([io,so].indexOf(f)!==-1)h--;else break}if(r0===a&&[r0,Md,e0,t0].indexOf(d)!==-1||[Md,e0].indexOf(a)!==-1&&[Md,jd].indexOf(d)!==-1||[jd,t0].indexOf(a)!==-1&&d===jd||PC.indexOf(a)!==-1&&[NC,yl].indexOf(d)!==-1||PC.indexOf(d)!==-1&&a===xl||iA.indexOf(a)!==-1&&iA.indexOf(d)!==-1||a===so&&iA.indexOf(d)!==-1||iA.concat(ar).indexOf(a)!==-1&&d===il&&uO.indexOf(t[o])===-1||iA.concat(ar).indexOf(d)!==-1&&a===sl)return nt;if(a===np&&d===np){for(var m=n[s],B=1;m>0&&(m--,e[m]===np);)B++;if(B%2!==0)return nt}return a===qu&&d===Ju?nt:Xu},pO=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=fO(t,e.lineBreak),r=n[0],A=n[1],s=n[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(A=A.map(function(o){return[ar,pi,MF].indexOf(o)!==-1?bc:o}));var i=e.wordBreak==="keep-all"?s.map(function(o,a){return o&&t[a]>=19968&&t[a]<=40959}):void 0;return[r,A,i]},mO=function(){function t(e,n,r,A){this.codePoints=e,this.required=n===jF,this.start=r,this.end=A}return t.prototype.slice=function(){return Yt.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),wO=function(t,e){var n=Gf(t),r=pO(n,e),A=r[0],s=r[1],i=r[2],o=n.length,a=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var d=nt;c<o&&(d=gO(n,s,A,++c,i))===nt;);if(d!==nt||c===o){var h=new mO(n,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},BO=1,vO=2,ru=4,MC=8,Ph=10,jC=47,Vl=92,yO=9,xO=32,Yu=34,ol=61,CO=35,IO=36,EO=37,Zu=39,ed=40,al=41,_O=95,Xn=45,bO=33,TO=60,FO=62,QO=64,UO=91,SO=93,kO=61,RO=123,td=63,NO=125,HC=124,DO=126,PO=128,OC=65533,Ap=42,vi=43,LO=44,MO=58,jO=59,Tc=46,HO=0,OO=8,VO=11,KO=14,GO=31,zO=127,Or=-1,OF=48,VF=97,KF=101,$O=102,WO=117,qO=122,GF=65,zF=69,$F=70,JO=85,XO=90,Dn=function(t){return t>=OF&&t<=57},YO=function(t){return t>=55296&&t<=57343},oo=function(t){return Dn(t)||t>=GF&&t<=$F||t>=VF&&t<=$O},ZO=function(t){return t>=VF&&t<=qO},eV=function(t){return t>=GF&&t<=XO},tV=function(t){return ZO(t)||eV(t)},nV=function(t){return t>=PO},nd=function(t){return t===Ph||t===yO||t===xO},Lh=function(t){return tV(t)||nV(t)||t===_O},VC=function(t){return Lh(t)||Dn(t)||t===Xn},rV=function(t){return t>=HO&&t<=OO||t===VO||t>=KO&&t<=GO||t===zO},JA=function(t,e){return t!==Vl?!1:e!==Ph},rd=function(t,e,n){return t===Xn?Lh(e)||JA(e,n):Lh(t)?!0:!!(t===Vl&&JA(t,e))},sp=function(t,e,n){return t===vi||t===Xn?Dn(e)?!0:e===Tc&&Dn(n):Dn(t===Tc?e:t)},AV=function(t){var e=0,n=1;(t[e]===vi||t[e]===Xn)&&(t[e]===Xn&&(n=-1),e++);for(var r=[];Dn(t[e]);)r.push(t[e++]);var A=r.length?parseInt(Yt.apply(void 0,r),10):0;t[e]===Tc&&e++;for(var s=[];Dn(t[e]);)s.push(t[e++]);var i=s.length,o=i?parseInt(Yt.apply(void 0,s),10):0;(t[e]===zF||t[e]===KF)&&e++;var a=1;(t[e]===vi||t[e]===Xn)&&(t[e]===Xn&&(a=-1),e++);for(var c=[];Dn(t[e]);)c.push(t[e++]);var d=c.length?parseInt(Yt.apply(void 0,c),10):0;return n*(A+o*Math.pow(10,-i))*Math.pow(10,a*d)},sV={type:2},iV={type:3},oV={type:4},aV={type:13},lV={type:8},cV={type:21},uV={type:9},dV={type:10},hV={type:11},fV={type:12},gV={type:14},Ad={type:23},pV={type:1},mV={type:25},wV={type:24},BV={type:26},vV={type:27},yV={type:28},xV={type:29},CV={type:31},i0={type:32},WF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(Gf(e))},t.prototype.read=function(){for(var e=[],n=this.consumeToken();n!==i0;)e.push(n),n=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Yu:return this.consumeStringToken(Yu);case CO:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),A=this.peekCodePoint(2);if(VC(n)||JA(r,A)){var s=rd(n,r,A)?vO:BO,i=this.consumeName();return{type:5,value:i,flags:s}}break;case IO:if(this.peekCodePoint(0)===ol)return this.consumeCodePoint(),aV;break;case Zu:return this.consumeStringToken(Zu);case ed:return sV;case al:return iV;case Ap:if(this.peekCodePoint(0)===ol)return this.consumeCodePoint(),gV;break;case vi:if(sp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case LO:return oV;case Xn:var o=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(sp(o,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(rd(o,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===Xn&&c===FO)return this.consumeCodePoint(),this.consumeCodePoint(),wV;break;case Tc:if(sp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case jC:if(this.peekCodePoint(0)===Ap)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Ap&&(d=this.consumeCodePoint(),d===jC))return this.consumeToken();if(d===Or)return this.consumeToken()}break;case MO:return BV;case jO:return vV;case TO:if(this.peekCodePoint(0)===bO&&this.peekCodePoint(1)===Xn&&this.peekCodePoint(2)===Xn)return this.consumeCodePoint(),this.consumeCodePoint(),mV;break;case QO:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),m=this.peekCodePoint(2);if(rd(h,f,m)){var i=this.consumeName();return{type:7,value:i}}break;case UO:return yV;case Vl:if(JA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case SO:return xV;case kO:if(this.peekCodePoint(0)===ol)return this.consumeCodePoint(),lV;break;case RO:return hV;case NO:return fV;case WO:case JO:var B=this.peekCodePoint(0),v=this.peekCodePoint(1);return B===vi&&(oo(v)||v===td)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case HC:if(this.peekCodePoint(0)===ol)return this.consumeCodePoint(),uV;if(this.peekCodePoint(0)===HC)return this.consumeCodePoint(),cV;break;case DO:if(this.peekCodePoint(0)===ol)return this.consumeCodePoint(),dV;break;case Or:return i0}return nd(e)?(this.consumeWhiteSpace(),CV):Dn(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Lh(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Yt(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],n=this.consumeCodePoint();oo(n)&&e.length<6;)e.push(n),n=this.consumeCodePoint();for(var r=!1;n===td&&e.length<6;)e.push(n),n=this.consumeCodePoint(),r=!0;if(r){var A=parseInt(Yt.apply(void 0,e.map(function(a){return a===td?OF:a})),16),s=parseInt(Yt.apply(void 0,e.map(function(a){return a===td?$F:a})),16);return{type:30,start:A,end:s}}var i=parseInt(Yt.apply(void 0,e),16);if(this.peekCodePoint(0)===Xn&&oo(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var o=[];oo(n)&&o.length<6;)o.push(n),n=this.consumeCodePoint();var s=parseInt(Yt.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ed?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ed?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Or)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===Zu||n===Yu){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Or||this.peekCodePoint(0)===al)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Ad)}for(;;){var A=this.consumeCodePoint();if(A===Or||A===al)return{type:22,value:Yt.apply(void 0,e)};if(nd(A))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Or||this.peekCodePoint(0)===al?(this.consumeCodePoint(),{type:22,value:Yt.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ad);if(A===Yu||A===Zu||A===ed||rV(A))return this.consumeBadUrlRemnants(),Ad;if(A===Vl)if(JA(A,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ad;else e.push(A)}},t.prototype.consumeWhiteSpace=function(){for(;nd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===al||e===Or)return;JA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var n=5e4,r="";e>0;){var A=Math.min(n,e);r+=Yt.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),r},t.prototype.consumeStringToken=function(e){var n="",r=0;do{var A=this._value[r];if(A===Or||A===void 0||A===e)return n+=this.consumeStringSlice(r),{type:0,value:n};if(A===Ph)return this._value.splice(0,r),pV;if(A===Vl){var s=this._value[r+1];s!==Or&&s!==void 0&&(s===Ph?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):JA(A,s)&&(n+=this.consumeStringSlice(r),n+=Yt(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var e=[],n=ru,r=this.peekCodePoint(0);for((r===vi||r===Xn)&&e.push(this.consumeCodePoint());Dn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var A=this.peekCodePoint(1);if(r===Tc&&Dn(A))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=MC;Dn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),A=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===zF||r===KF)&&((A===vi||A===Xn)&&Dn(s)||Dn(A)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),n=MC;Dn(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[AV(e),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),n=e[0],r=e[1],A=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(rd(A,s,i)){var o=this.consumeName();return{type:15,number:n,flags:r,unit:o}}return A===EO?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(oo(e)){for(var n=Yt(e);oo(this.peekCodePoint(0))&&n.length<6;)n+=Yt(this.consumeCodePoint());nd(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||YO(r)||r>1114111?OC:r}return e===Or?OC:e},t.prototype.consumeName=function(){for(var e="";;){var n=this.consumeCodePoint();if(VC(n))e+=Yt(n);else if(JA(n,this.peekCodePoint(0)))e+=Yt(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),e}},t}(),qF=function(){function t(e){this._tokens=e}return t.create=function(e){var n=new WF;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var n=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var n=this.consumeComponentValue();if(n.type===32)return e;e.push(n),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var n={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||EV(r,e))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var n={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?i0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Au=function(t){return t.type===15},Pa=function(t){return t.type===17},Bt=function(t){return t.type===20},IV=function(t){return t.type===0},o0=function(t,e){return Bt(t)&&t.value===e},JF=function(t){return t.type!==31},ga=function(t){return t.type!==31&&t.type!==4},nA=function(t){var e=[],n=[];return t.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&e.push(n),e},EV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Os=function(t){return t.type===17||t.type===15},rn=function(t){return t.type===16||Os(t)},XF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},En={type:17,number:0,flags:ru},TB={type:16,number:50,flags:ru},hs={type:16,number:100,flags:ru},Cl=function(t,e,n){var r=t[0],A=t[1];return[Et(r,e),Et(typeof A<"u"?A:r,n)]},Et=function(t,e){if(t.type===16)return t.number/100*e;if(Au(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},YF="deg",ZF="grad",eQ="rad",tQ="turn",zf={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case YF:return Math.PI*e.number/180;case ZF:return Math.PI/200*e.number;case eQ:return e.number;case tQ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},nQ=function(t){return t.type===15&&(t.unit===YF||t.unit===ZF||t.unit===eQ||t.unit===tQ)},rQ=function(t){var e=t.filter(Bt).map(function(n){return n.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[En,En];case"to top":case"bottom":return Ir(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[En,hs];case"to right":case"left":return Ir(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[hs,hs];case"to bottom":case"top":return Ir(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[hs,En];case"to left":case"right":return Ir(270)}return 0},Ir=function(t){return Math.PI*t/180},Ts={name:"color",parse:function(t,e){if(e.type===18){var n=_V[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3);return fs(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),A=e.value.substring(1,2),s=e.value.substring(2,3),i=e.value.substring(3,4);return fs(parseInt(r+r,16),parseInt(A+A,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6);return fs(parseInt(r,16),parseInt(A,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),A=e.value.substring(2,4),s=e.value.substring(4,6),i=e.value.substring(6,8);return fs(parseInt(r,16),parseInt(A,16),parseInt(s,16),parseInt(i,16)/255)}}if(e.type===20){var o=BA[e.value.toUpperCase()];if(typeof o<"u")return o}return BA.TRANSPARENT}},Fs=function(t){return(255&t)===0},dn=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,A=255&t>>24;return e<255?"rgba("+A+","+r+","+n+","+e/255+")":"rgb("+A+","+r+","+n+")"},fs=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(r*255)<<0)>>>0},KC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var n=e===3?1:255;return e===3?t.number/100*n:Math.round(t.number/100*n)}return 0},GC=function(t,e){var n=e.filter(ga);if(n.length===3){var r=n.map(KC),A=r[0],s=r[1],i=r[2];return fs(A,s,i,1)}if(n.length===4){var o=n.map(KC),A=o[0],s=o[1],i=o[2],a=o[3];return fs(A,s,i,a)}return 0};function ip(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<1/2?e:n<2/3?(e-t)*6*(2/3-n)+t:t}var zC=function(t,e){var n=e.filter(ga),r=n[0],A=n[1],s=n[2],i=n[3],o=(r.type===17?Ir(r.number):zf.parse(t,r))/(Math.PI*2),a=rn(A)?A.number/100:0,c=rn(s)?s.number/100:0,d=typeof i<"u"&&rn(i)?Et(i,1):1;if(a===0)return fs(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,m=ip(f,h,o+1/3),B=ip(f,h,o),v=ip(f,h,o-1/3);return fs(m*255,B*255,v*255,d)},_V={hsl:zC,hsla:zC,rgb:GC,rgba:GC},Kl=function(t,e){return Ts.parse(t,qF.create(e).parseComponentValue())},BA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},bV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Bt(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},TV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$f=function(t,e){var n=Ts.parse(t,e[0]),r=e[1];return r&&rn(r)?{color:n,stop:r}:{color:n,stop:null}},$C=function(t,e){var n=t[0],r=t[t.length-1];n.stop===null&&(n.stop=En),r.stop===null&&(r.stop=hs);for(var A=[],s=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var a=Et(o,e);a>s?A.push(a):A.push(s),s=a}else A.push(null)}for(var c=null,i=0;i<A.length;i++){var d=A[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=A[c-1],m=(d-f)/(h+1),B=1;B<=h;B++)A[c+B-1]=m*B;c=null}}return t.map(function(v,_){var x=v.color;return{color:x,stop:Math.max(Math.min(1,A[_]/e),0)}})},FV=function(t,e,n){var r=e/2,A=n/2,s=Et(t[0],e)-r,i=A-Et(t[1],n);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},QV=function(t,e,n){var r=typeof t=="number"?t:FV(t,e,n),A=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),s=e/2,i=n/2,o=A/2,a=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[A,s-c,s+c,i-a,i+a]},Ur=function(t,e){return Math.sqrt(t*t+e*e)},WC=function(t,e,n,r,A){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(i,o){var a=o[0],c=o[1],d=Ur(n-a,r-c);return(A?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:A?1/0:-1/0,optimumCorner:null}).optimumCorner},UV=function(t,e,n,r,A){var s=0,i=0;switch(t.size){case 0:t.shape===0?s=i=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),i=Math.min(Math.abs(n),Math.abs(n-A)));break;case 2:if(t.shape===0)s=i=Math.min(Ur(e,n),Ur(e,n-A),Ur(e-r,n),Ur(e-r,n-A));else if(t.shape===1){var o=Math.min(Math.abs(n),Math.abs(n-A))/Math.min(Math.abs(e),Math.abs(e-r)),a=WC(r,A,e,n,!0),c=a[0],d=a[1];s=Ur(c-e,(d-n)/o),i=o*s}break;case 1:t.shape===0?s=i=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-A)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),i=Math.max(Math.abs(n),Math.abs(n-A)));break;case 3:if(t.shape===0)s=i=Math.max(Ur(e,n),Ur(e,n-A),Ur(e-r,n),Ur(e-r,n-A));else if(t.shape===1){var o=Math.max(Math.abs(n),Math.abs(n-A))/Math.max(Math.abs(e),Math.abs(e-r)),h=WC(r,A,e,n,!1),c=h[0],d=h[1];s=Ur(c-e,(d-n)/o),i=o*s}break}return Array.isArray(t.size)&&(s=Et(t.size[0],r),i=t.size.length===2?Et(t.size[1],A):s),[s,i]},SV=function(t,e){var n=Ir(180),r=[];return nA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&i.value==="to"){n=rQ(A);return}else if(nQ(i)){n=zf.parse(t,i);return}}var o=$f(t,A);r.push(o)}),{angle:n,stops:r,type:1}},sd=function(t,e){var n=Ir(180),r=[];return nA(e).forEach(function(A,s){if(s===0){var i=A[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){n=rQ(A);return}else if(nQ(i)){n=(zf.parse(t,i)+Ir(270))%Ir(360);return}}var o=$f(t,A);r.push(o)}),{angle:n,stops:r,type:1}},kV=function(t,e){var n=Ir(180),r=[],A=1,s=0,i=3,o=[];return nA(e).forEach(function(a,c){var d=a[0];if(c===0){if(Bt(d)&&d.value==="linear"){A=1;return}else if(Bt(d)&&d.value==="radial"){A=2;return}}if(d.type===18){if(d.name==="from"){var h=Ts.parse(t,d.values[0]);r.push({stop:En,color:h})}else if(d.name==="to"){var h=Ts.parse(t,d.values[0]);r.push({stop:hs,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(ga);if(f.length===2){var h=Ts.parse(t,f[1]),m=f[0];Pa(m)&&r.push({stop:{type:16,number:m.number*100,flags:m.flags},color:h})}}}}),A===1?{angle:(n+Ir(180))%Ir(360),stops:r,type:A}:{size:i,shape:s,stops:r,position:o,type:A}},AQ="closest-side",sQ="farthest-side",iQ="closest-corner",oQ="farthest-corner",aQ="circle",lQ="ellipse",cQ="cover",uQ="contain",RV=function(t,e){var n=0,r=3,A=[],s=[];return nA(e).forEach(function(i,o){var a=!0;if(o===0){var c=!1;a=i.reduce(function(h,f){if(c)if(Bt(f))switch(f.value){case"center":return s.push(TB),h;case"top":case"left":return s.push(En),h;case"right":case"bottom":return s.push(hs),h}else(rn(f)||Os(f))&&s.push(f);else if(Bt(f))switch(f.value){case aQ:return n=0,!1;case lQ:return n=1,!1;case"at":return c=!0,!1;case AQ:return r=0,!1;case cQ:case sQ:return r=1,!1;case uQ:case iQ:return r=2,!1;case oQ:return r=3,!1}else if(Os(f)||rn(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return h},a)}if(a){var d=$f(t,i);A.push(d)}}),{size:r,shape:n,stops:A,position:s,type:2}},id=function(t,e){var n=0,r=3,A=[],s=[];return nA(e).forEach(function(i,o){var a=!0;if(o===0?a=i.reduce(function(d,h){if(Bt(h))switch(h.value){case"center":return s.push(TB),!1;case"top":case"left":return s.push(En),!1;case"right":case"bottom":return s.push(hs),!1}else if(rn(h)||Os(h))return s.push(h),!1;return d},a):o===1&&(a=i.reduce(function(d,h){if(Bt(h))switch(h.value){case aQ:return n=0,!1;case lQ:return n=1,!1;case uQ:case AQ:return r=0,!1;case sQ:return r=1,!1;case iQ:return r=2,!1;case cQ:case oQ:return r=3,!1}else if(Os(h)||rn(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return d},a)),a){var c=$f(t,i);A.push(c)}}),{size:r,shape:n,stops:A,position:s,type:2}},NV=function(t){return t.type===1},DV=function(t){return t.type===2},FB={name:"image",parse:function(t,e){if(e.type===22){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(e.type===18){var r=dQ[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function PV(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!dQ[t.name])}var dQ={"linear-gradient":SV,"-moz-linear-gradient":sd,"-ms-linear-gradient":sd,"-o-linear-gradient":sd,"-webkit-linear-gradient":sd,"radial-gradient":RV,"-moz-radial-gradient":id,"-ms-radial-gradient":id,"-o-radial-gradient":id,"-webkit-radial-gradient":id,"-webkit-gradient":kV},LV={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e.filter(function(r){return ga(r)&&PV(r)}).map(function(r){return FB.parse(t,r)})}},MV={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(n){if(Bt(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},jV={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return nA(e).map(function(n){return n.filter(rn)}).map(XF)}},HV={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return nA(e).map(function(n){return n.filter(Bt).map(function(r){return r.value}).join(" ")}).map(OV)}},OV=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Vo;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Vo||(Vo={}));var VV={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return nA(e).map(function(n){return n.filter(KV)})}},KV=function(t){return Bt(t)||rn(t)},Wf=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},GV=Wf("top"),zV=Wf("right"),$V=Wf("bottom"),WV=Wf("left"),qf=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,n){return XF(n.filter(rn))}}},qV=qf("top-left"),JV=qf("top-right"),XV=qf("bottom-right"),YV=qf("bottom-left"),Jf=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ZV=Jf("top"),eK=Jf("right"),tK=Jf("bottom"),nK=Jf("left"),Xf=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Au(n)?n.number:0}}},rK=Xf("top"),AK=Xf("right"),sK=Xf("bottom"),iK=Xf("left"),oK={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},aK={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},lK={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).reduce(function(n,r){return n|cK(r.value)},0)}},cK=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},uK={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},dK={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Mh;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Mh||(Mh={}));var hK={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Mh.STRICT;case"normal":default:return Mh.NORMAL}}},fK={name:"line-height",initialValue:"normal",prefix:!1,type:4},qC=function(t,e){return Bt(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:rn(t)?Et(t,e):e},gK={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:FB.parse(t,e)}},pK={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},a0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Yf=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},mK=Yf("top"),wK=Yf("right"),BK=Yf("bottom"),vK=Yf("left"),yK={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},xK={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Zf=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},CK=Zf("top"),IK=Zf("right"),EK=Zf("bottom"),_K=Zf("left"),bK={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},TK={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},FK={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&o0(e[0],"none")?[]:nA(e).map(function(n){for(var r={color:BA.TRANSPARENT,offsetX:En,offsetY:En,blur:En},A=0,s=0;s<n.length;s++){var i=n[s];Os(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:r.blur=i,A++):r.color=Ts.parse(t,i)}return r})}},QK={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},UK={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var n=RK[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},SK=function(t){var e=t.filter(function(n){return n.type===17}).map(function(n){return n.number});return e.length===6?e:null},kK=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),n=e[0],r=e[1];e[2],e[3];var A=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[n,r,A,s,i,o]:null},RK={matrix:SK,matrix3d:kK},JC={type:16,number:50,flags:ru},NK=[JC,JC],DK={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(rn);return n.length!==2?NK:[n[0],n[1]]}},PK={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Gl;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(Gl||(Gl={}));var LK={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return Gl.BREAK_ALL;case"keep-all":return Gl.KEEP_ALL;case"normal":default:return Gl.NORMAL}}},MK={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Pa(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},hQ={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},jK={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Pa(e)?e.number:1}},HK={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},OK={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Bt).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},VK={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],r=[];return e.forEach(function(A){switch(A.type){case 20:case 0:n.push(A.value);break;case 17:n.push(A.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(A){return A.indexOf(" ")===-1?A:"'"+A+"'"})}},KK={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},GK={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Pa(e))return e.number;if(Bt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},zK={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Bt).map(function(n){return n.value})}},$K={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},on=function(t,e){return(t&e)!==0},WK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var n=e[0];return n.type===20&&n.value==="none"?[]:e}},qK={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;for(var r=[],A=e.filter(JF),s=0;s<A.length;s++){var i=A[s],o=A[s+1];if(i.type===20){var a=o&&Pa(o)?o.number:1;r.push({counter:i.value,increment:a})}}return r}},JK={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var n=[],r=e.filter(JF),A=0;A<r.length;A++){var s=r[A],i=r[A+1];if(Bt(s)&&s.value!=="none"){var o=i&&Pa(i)?i.number:0;n.push({counter:s.value,reset:o})}}return n}},XK={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Au).map(function(n){return hQ.parse(t,n)})}},YK={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var n=e[0];if(n.type===20&&n.value==="none")return null;var r=[],A=e.filter(IV);if(A.length%2!==0)return null;for(var s=0;s<A.length;s+=2){var i=A[s].value,o=A[s+1].value;r.push({open:i,close:o})}return r}},XC=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},ZK={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&o0(e[0],"none")?[]:nA(e).map(function(n){for(var r={color:255,offsetX:En,offsetY:En,blur:En,spread:En,inset:!1},A=0,s=0;s<n.length;s++){var i=n[s];o0(i,"inset")?r.inset=!0:Os(i)?(A===0?r.offsetX=i:A===1?r.offsetY=i:A===2?r.blur=i:r.spread=i,A++):r.color=Ts.parse(t,i)}return r})}},e3={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],r=[];return e.filter(Bt).forEach(function(A){switch(A.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(A){r.indexOf(A)===-1&&r.push(A)}),r}},t3={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},n3={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Au(e)?e.number:0}},r3=function(){function t(e,n){var r,A;this.animationDuration=xe(e,XK,n.animationDuration),this.backgroundClip=xe(e,bV,n.backgroundClip),this.backgroundColor=xe(e,TV,n.backgroundColor),this.backgroundImage=xe(e,LV,n.backgroundImage),this.backgroundOrigin=xe(e,MV,n.backgroundOrigin),this.backgroundPosition=xe(e,jV,n.backgroundPosition),this.backgroundRepeat=xe(e,HV,n.backgroundRepeat),this.backgroundSize=xe(e,VV,n.backgroundSize),this.borderTopColor=xe(e,GV,n.borderTopColor),this.borderRightColor=xe(e,zV,n.borderRightColor),this.borderBottomColor=xe(e,$V,n.borderBottomColor),this.borderLeftColor=xe(e,WV,n.borderLeftColor),this.borderTopLeftRadius=xe(e,qV,n.borderTopLeftRadius),this.borderTopRightRadius=xe(e,JV,n.borderTopRightRadius),this.borderBottomRightRadius=xe(e,XV,n.borderBottomRightRadius),this.borderBottomLeftRadius=xe(e,YV,n.borderBottomLeftRadius),this.borderTopStyle=xe(e,ZV,n.borderTopStyle),this.borderRightStyle=xe(e,eK,n.borderRightStyle),this.borderBottomStyle=xe(e,tK,n.borderBottomStyle),this.borderLeftStyle=xe(e,nK,n.borderLeftStyle),this.borderTopWidth=xe(e,rK,n.borderTopWidth),this.borderRightWidth=xe(e,AK,n.borderRightWidth),this.borderBottomWidth=xe(e,sK,n.borderBottomWidth),this.borderLeftWidth=xe(e,iK,n.borderLeftWidth),this.boxShadow=xe(e,ZK,n.boxShadow),this.color=xe(e,oK,n.color),this.direction=xe(e,aK,n.direction),this.display=xe(e,lK,n.display),this.float=xe(e,uK,n.cssFloat),this.fontFamily=xe(e,VK,n.fontFamily),this.fontSize=xe(e,KK,n.fontSize),this.fontStyle=xe(e,$K,n.fontStyle),this.fontVariant=xe(e,zK,n.fontVariant),this.fontWeight=xe(e,GK,n.fontWeight),this.letterSpacing=xe(e,dK,n.letterSpacing),this.lineBreak=xe(e,hK,n.lineBreak),this.lineHeight=xe(e,fK,n.lineHeight),this.listStyleImage=xe(e,gK,n.listStyleImage),this.listStylePosition=xe(e,pK,n.listStylePosition),this.listStyleType=xe(e,a0,n.listStyleType),this.marginTop=xe(e,mK,n.marginTop),this.marginRight=xe(e,wK,n.marginRight),this.marginBottom=xe(e,BK,n.marginBottom),this.marginLeft=xe(e,vK,n.marginLeft),this.opacity=xe(e,jK,n.opacity);var s=xe(e,yK,n.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=xe(e,xK,n.overflowWrap),this.paddingTop=xe(e,CK,n.paddingTop),this.paddingRight=xe(e,IK,n.paddingRight),this.paddingBottom=xe(e,EK,n.paddingBottom),this.paddingLeft=xe(e,_K,n.paddingLeft),this.paintOrder=xe(e,e3,n.paintOrder),this.position=xe(e,TK,n.position),this.textAlign=xe(e,bK,n.textAlign),this.textDecorationColor=xe(e,HK,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=xe(e,OK,(A=n.textDecorationLine)!==null&&A!==void 0?A:n.textDecoration),this.textShadow=xe(e,FK,n.textShadow),this.textTransform=xe(e,QK,n.textTransform),this.transform=xe(e,UK,n.transform),this.transformOrigin=xe(e,DK,n.transformOrigin),this.visibility=xe(e,PK,n.visibility),this.webkitTextStrokeColor=xe(e,t3,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=xe(e,n3,n.webkitTextStrokeWidth),this.wordBreak=xe(e,LK,n.wordBreak),this.zIndex=xe(e,MK,n.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Fs(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return on(this.display,4)||on(this.display,33554432)||on(this.display,268435456)||on(this.display,536870912)||on(this.display,67108864)||on(this.display,134217728)},t}(),A3=function(){function t(e,n){this.content=xe(e,WK,n.content),this.quotes=xe(e,YK,n.quotes)}return t}(),YC=function(){function t(e,n){this.counterIncrement=xe(e,qK,n.counterIncrement),this.counterReset=xe(e,JK,n.counterReset)}return t}(),xe=function(t,e,n){var r=new WF,A=n!==null&&typeof n<"u"?n.toString():e.initialValue;r.write(A);var s=new qF(r.read());switch(e.type){case 2:var i=s.parseComponentValue();return e.parse(t,Bt(i)?i.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return zf.parse(t,s.parseComponentValue());case"color":return Ts.parse(t,s.parseComponentValue());case"image":return FB.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Os(o)?o:En;case"length-percentage":var a=s.parseComponentValue();return rn(a)?a:En;case"time":return hQ.parse(t,s.parseComponentValue())}break}},s3="data-html2canvas-debug",i3=function(t){var e=t.getAttribute(s3);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},l0=function(t,e){var n=i3(t);return n===1||e===n},rA=function(){function t(e,n){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,l0(n,3))debugger;this.styles=new r3(e,window.getComputedStyle(n,null)),d0(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=Kf(this.context,n),l0(n,4)&&(this.flags|=16)}return t}(),o3="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ZC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Il=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var od=0;od<ZC.length;od++)Il[ZC.charCodeAt(od)]=od;var a3=function(t){var e=t.length*.75,n=t.length,r,A=0,s,i,o,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(r=0;r<n;r+=4)s=Il[t.charCodeAt(r)],i=Il[t.charCodeAt(r+1)],o=Il[t.charCodeAt(r+2)],a=Il[t.charCodeAt(r+3)],d[A++]=s<<2|i>>4,d[A++]=(i&15)<<4|o>>2,d[A++]=(o&3)<<6|a&63;return c},l3=function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n},c3=function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n},_i=5,QB=11,op=2,u3=QB-_i,fQ=65536>>_i,d3=1<<_i,ap=d3-1,h3=1024>>_i,f3=fQ+h3,g3=f3,p3=32,m3=g3+p3,w3=65536>>QB,B3=1<<u3,v3=B3-1,eI=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},y3=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},x3=function(t,e){var n=a3(t),r=Array.isArray(n)?c3(n):new Uint32Array(n),A=Array.isArray(n)?l3(n):new Uint16Array(n),s=24,i=eI(A,s/2,r[4]/2),o=r[5]===2?eI(A,(s+r[4])/2):y3(r,Math.ceil((s+r[4])/4));return new C3(r[0],r[1],r[2],r[3],i,o)},C3=function(){function t(e,n,r,A,s,i){this.initialValue=e,this.errorValue=n,this.highStart=r,this.highValueIndex=A,this.index=s,this.data=i}return t.prototype.get=function(e){var n;if(e>=0){if(e<55296||e>56319&&e<=65535)return n=this.index[e>>_i],n=(n<<op)+(e&ap),this.data[n];if(e<=65535)return n=this.index[fQ+(e-55296>>_i)],n=(n<<op)+(e&ap),this.data[n];if(e<this.highStart)return n=m3-w3+(e>>QB),n=this.index[n],n+=e>>_i&v3,n=this.index[n],n=(n<<op)+(e&ap),this.data[n];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),tI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ad=0;ad<tI.length;ad++)I3[tI.charCodeAt(ad)]=ad;var E3=1,lp=2,cp=3,nI=4,rI=5,_3=7,AI=8,up=9,dp=10,sI=11,iI=12,oI=13,aI=14,hp=15,b3=function(t){for(var e=[],n=0,r=t.length;n<r;){var A=t.charCodeAt(n++);if(A>=55296&&A<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)===56320?e.push(((A&1023)<<10)+(s&1023)+65536):(e.push(A),n--)}else e.push(A)}return e},T3=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],A=-1,s="";++A<n;){var i=t[A];i<=65535?r.push(i):(i-=65536,r.push((i>>10)+55296,i%1024+56320)),(A+1===n||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},F3=x3(o3),Br="",fp="",Q3=function(t){return F3.get(t)},U3=function(t,e,n){var r=n-2,A=e[r],s=e[n-1],i=e[n];if(s===lp&&i===cp)return Br;if(s===lp||s===cp||s===nI||i===lp||i===cp||i===nI)return fp;if(s===AI&&[AI,up,sI,iI].indexOf(i)!==-1||(s===sI||s===up)&&(i===up||i===dp)||(s===iI||s===dp)&&i===dp||i===oI||i===rI||i===_3||s===E3)return Br;if(s===oI&&i===aI){for(;A===rI;)A=e[--r];if(A===aI)return Br}if(s===hp&&i===hp){for(var o=0;A===hp;)o++,A=e[--r];if(o%2===0)return Br}return fp},S3=function(t){var e=b3(t),n=e.length,r=0,A=0,s=e.map(Q3);return{next:function(){if(r>=n)return{done:!0,value:null};for(var i=Br;r<n&&(i=U3(e,s,++r))===Br;);if(i!==Br||r===n){var o=T3.apply(null,e.slice(A,r));return A=r,{value:o,done:!1}}return{done:!0,value:null}}}},k3=function(t){for(var e=S3(t),n=[],r;!(r=e.next()).done;)r.value&&n.push(r.value.slice());return n},R3=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=e+"px",r.style.display="block",t.body.appendChild(r),n.selectNode(r);var A=n.getBoundingClientRect(),s=Math.round(A.height);if(t.body.removeChild(r),s===e)return!0}}return!1},N3=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,A=Gf(r.data).map(function(a){return Yt(a)}),s=0,i={},o=A.every(function(a,c){n.setStart(r,s),n.setEnd(r,s+a.length);var d=n.getBoundingClientRect();s+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),o},D3=function(){return typeof new Image().crossOrigin<"u"},P3=function(){return typeof new XMLHttpRequest().responseType=="string"},L3=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch{return!1}return!0},lI=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},M3=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var A=new Image,s=e.toDataURL();A.src=s;var i=c0(n,n,0,0,A);return r.fillStyle="red",r.fillRect(0,0,n,n),cI(i).then(function(o){r.drawImage(o,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var c=t.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=n+"px",lI(a)?cI(c0(n,n,0,0,c)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),lI(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},c0=function(t,e,n,r,A){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(A),i},cI=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},xn={get SUPPORT_RANGE_BOUNDS(){var t=R3(document);return Object.defineProperty(xn,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=xn.SUPPORT_RANGE_BOUNDS&&N3(document);return Object.defineProperty(xn,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=L3(document);return Object.defineProperty(xn,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?M3(document):Promise.resolve(!1);return Object.defineProperty(xn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=D3();return Object.defineProperty(xn,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=P3();return Object.defineProperty(xn,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xn,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},zl=function(){function t(e,n){this.text=e,this.bounds=n}return t}(),j3=function(t,e,n,r){var A=V3(e,n),s=[],i=0;return A.forEach(function(o){if(n.textDecorationLine.length||o.trim().length>0)if(xn.SUPPORT_RANGE_BOUNDS){var a=uI(r,i,o.length).getClientRects();if(a.length>1){var c=UB(o),d=0;c.forEach(function(f){s.push(new zl(f,TA.fromDOMRectList(t,uI(r,d+i,f.length).getClientRects()))),d+=f.length})}else s.push(new zl(o,TA.fromDOMRectList(t,a)))}else{var h=r.splitText(o.length);s.push(new zl(o,H3(t,r))),r=h}else xn.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));i+=o.length}),s},H3=function(t,e){var n=e.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var A=e.parentNode;if(A){A.replaceChild(r,e);var s=Kf(t,r);return r.firstChild&&A.replaceChild(r.firstChild,r),s}}return TA.EMPTY},uI=function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var A=r.createRange();return A.setStart(t,e),A.setEnd(t,e+n),A},UB=function(t){if(xn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(n){return n.segment})}return k3(t)},O3=function(t,e){if(xn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map(function(r){return r.segment})}return G3(t,e)},V3=function(t,e){return e.letterSpacing!==0?UB(t):O3(t,e)},K3=[32,160,4961,65792,65793,4153,4241],G3=function(t,e){for(var n=wO(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],A,s=function(){if(A.value){var i=A.value.slice(),o=Gf(i),a="";o.forEach(function(c){K3.indexOf(c)===-1?a+=Yt(c):(a.length&&r.push(a),r.push(Yt(c)),a="")}),a.length&&r.push(a)}};!(A=n.next()).done;)s();return r},z3=function(){function t(e,n,r){this.text=$3(n.data,r.textTransform),this.textBounds=j3(e,this.text,r,n)}return t}(),$3=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(W3,q3);case 2:return t.toUpperCase();default:return t}},W3=/(^|\s|:|-|\(|\))([a-z])/g,q3=function(t,e,n){return t.length>0?e+n.toUpperCase():t},gQ=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.src=r.currentSrc||r.src,A.intrinsicWidth=r.naturalWidth,A.intrinsicHeight=r.naturalHeight,A.context.cache.addImage(A.src),A}return e}(rA),pQ=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r,A.intrinsicWidth=r.width,A.intrinsicHeight=r.height,A}return e}(rA),mQ=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=new XMLSerializer,i=Kf(n,r);return r.setAttribute("width",i.width+"px"),r.setAttribute("height",i.height+"px"),A.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),A.intrinsicWidth=r.width.baseVal.value,A.intrinsicHeight=r.height.baseVal.value,A.context.cache.addImage(A.svg),A}return e}(rA),wQ=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(rA),u0=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.start=r.start,A.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,A}return e}(rA),J3=[{type:15,flags:0,unit:"px",number:3}],X3=[{type:16,flags:0,number:50}],Y3=function(t){return t.width>t.height?new TA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new TA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Z3=function(t){var e=t.type===e5?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},jh="checkbox",Hh="radio",e5="password",dI=707406591,SB=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;switch(A.type=r.type.toLowerCase(),A.checked=r.checked,A.value=Z3(r),(A.type===jh||A.type===Hh)&&(A.styles.backgroundColor=3739148031,A.styles.borderTopColor=A.styles.borderRightColor=A.styles.borderBottomColor=A.styles.borderLeftColor=2779096575,A.styles.borderTopWidth=A.styles.borderRightWidth=A.styles.borderBottomWidth=A.styles.borderLeftWidth=1,A.styles.borderTopStyle=A.styles.borderRightStyle=A.styles.borderBottomStyle=A.styles.borderLeftStyle=1,A.styles.backgroundClip=[0],A.styles.backgroundOrigin=[0],A.bounds=Y3(A.bounds)),A.type){case jh:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=J3;break;case Hh:A.styles.borderTopRightRadius=A.styles.borderTopLeftRadius=A.styles.borderBottomRightRadius=A.styles.borderBottomLeftRadius=X3;break}return A}return e}(rA),BQ=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this,s=r.options[r.selectedIndex||0];return A.value=s&&s.text||"",A}return e}(rA),vQ=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.value=r.value,A}return e}(rA),yQ=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;A.src=r.src,A.width=parseInt(r.width,10)||0,A.height=parseInt(r.height,10)||0,A.backgroundColor=A.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){A.tree=CQ(n,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?Kl(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):BA.TRANSPARENT,i=r.contentWindow.document.body?Kl(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):BA.TRANSPARENT;A.backgroundColor=Fs(s)?Fs(i)?A.styles.backgroundColor:i:s}}catch{}return A}return e}(rA),t5=["OL","UL","MENU"],Hd=function(t,e,n,r){for(var A=e.firstChild,s=void 0;A;A=s)if(s=A.nextSibling,IQ(A)&&A.data.trim().length>0)n.textNodes.push(new z3(t,A,n.styles));else if(Uo(A))if(TQ(A)&&A.assignedNodes)A.assignedNodes().forEach(function(o){return Hd(t,o,n,r)});else{var i=xQ(t,A);i.styles.isVisible()&&(n5(A,i,r)?i.flags|=4:r5(i.styles)&&(i.flags|=2),t5.indexOf(A.tagName)!==-1&&(i.flags|=8),n.elements.push(i),A.slot,A.shadowRoot?Hd(t,A.shadowRoot,i,r):!Oh(A)&&!EQ(A)&&!Vh(A)&&Hd(t,A,i,r))}},xQ=function(t,e){return h0(e)?new gQ(t,e):_Q(e)?new pQ(t,e):EQ(e)?new mQ(t,e):A5(e)?new wQ(t,e):s5(e)?new u0(t,e):i5(e)?new SB(t,e):Vh(e)?new BQ(t,e):Oh(e)?new vQ(t,e):bQ(e)?new yQ(t,e):new rA(t,e)},CQ=function(t,e){var n=xQ(t,e);return n.flags|=4,Hd(t,e,n,n),n},n5=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||kB(t)&&n.styles.isTransparent()},r5=function(t){return t.isPositioned()||t.isFloating()},IQ=function(t){return t.nodeType===Node.TEXT_NODE},Uo=function(t){return t.nodeType===Node.ELEMENT_NODE},d0=function(t){return Uo(t)&&typeof t.style<"u"&&!Od(t)},Od=function(t){return typeof t.className=="object"},A5=function(t){return t.tagName==="LI"},s5=function(t){return t.tagName==="OL"},i5=function(t){return t.tagName==="INPUT"},o5=function(t){return t.tagName==="HTML"},EQ=function(t){return t.tagName==="svg"},kB=function(t){return t.tagName==="BODY"},_Q=function(t){return t.tagName==="CANVAS"},hI=function(t){return t.tagName==="VIDEO"},h0=function(t){return t.tagName==="IMG"},bQ=function(t){return t.tagName==="IFRAME"},fI=function(t){return t.tagName==="STYLE"},a5=function(t){return t.tagName==="SCRIPT"},Oh=function(t){return t.tagName==="TEXTAREA"},Vh=function(t){return t.tagName==="SELECT"},TQ=function(t){return t.tagName==="SLOT"},gI=function(t){return t.tagName.indexOf("-")>0},l5=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var n=this.counters[e];return n&&n.length?n[n.length-1]:1},t.prototype.getCounterValues=function(e){var n=this.counters[e];return n||[]},t.prototype.pop=function(e){var n=this;e.forEach(function(r){return n.counters[r].pop()})},t.prototype.parse=function(e){var n=this,r=e.counterIncrement,A=e.counterReset,s=!0;r!==null&&r.forEach(function(o){var a=n.counters[o.counter];a&&o.increment!==0&&(s=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var i=[];return s&&A.forEach(function(o){var a=n.counters[o.counter];i.push(o.counter),a||(a=n.counters[o.counter]=[]),a.push(o.reset)}),i},t}(),pI={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},mI={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},c5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},u5={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ao=function(t,e,n,r,A,s){return t<e||t>n?Fc(t,A,s.length>0):r.integers.reduce(function(i,o,a){for(;t>=o;)t-=o,i+=r.values[a];return i},"")+s},FQ=function(t,e,n,r){var A="";do n||t--,A=r(t)+A,t/=e;while(t*e>=e);return A},Xt=function(t,e,n,r,A){var s=n-e+1;return(t<0?"-":"")+(FQ(Math.abs(t),s,r,function(i){return Yt(Math.floor(i%s)+e)})+A)},ii=function(t,e,n){n===void 0&&(n=". ");var r=e.length;return FQ(Math.abs(t),r,!1,function(A){return e[Math.floor(A%r)]})+n},po=1,zA=2,$A=4,El=8,oA=function(t,e,n,r,A,s){if(t<-9999||t>9999)return Fc(t,4,A.length>0);var i=Math.abs(t),o=A;if(i===0)return e[0]+o;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&on(s,po)&&o!==""?o=e[c]+o:c>1||c===1&&a===0||c===1&&a===1&&on(s,zA)||c===1&&a===1&&on(s,$A)&&t>100||c===1&&a>1&&on(s,El)?o=e[c]+(a>0?n[a-1]:"")+o:c===1&&a>0&&(o=n[a-1]+o),i=Math.floor(i/10)}return(t<0?r:"")+o},wI="",BI="",vI="",gp="",Fc=function(t,e,n){var r=n?". ":"",A=n?"":"",s=n?", ":"",i=n?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Xt(t,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return ii(t,"",A);case 6:return ao(t,1,3999,pI,3,r).toLowerCase();case 7:return ao(t,1,3999,pI,3,r);case 8:return Xt(t,945,969,!1,r);case 9:return Xt(t,97,122,!1,r);case 10:return Xt(t,65,90,!1,r);case 11:return Xt(t,1632,1641,!0,r);case 12:case 49:return ao(t,1,9999,mI,3,r);case 35:return ao(t,1,9999,mI,3,r).toLowerCase();case 13:return Xt(t,2534,2543,!0,r);case 14:case 30:return Xt(t,6112,6121,!0,r);case 15:return ii(t,"",A);case 16:return ii(t,"",A);case 17:case 48:return oA(t,"",wI,"",A,zA|$A|El);case 47:return oA(t,"",BI,"",A,po|zA|$A|El);case 42:return oA(t,"",wI,"",A,zA|$A|El);case 41:return oA(t,"",BI,"",A,po|zA|$A|El);case 26:return oA(t,"","",vI,A,0);case 25:return oA(t,"","",vI,A,po|zA|$A);case 31:return oA(t,"","",gp,s,po|zA|$A);case 33:return oA(t,"","",gp,s,0);case 32:return oA(t,"","",gp,s,po|zA|$A);case 18:return Xt(t,2406,2415,!0,r);case 20:return ao(t,1,19999,u5,3,r);case 21:return Xt(t,2790,2799,!0,r);case 22:return Xt(t,2662,2671,!0,r);case 22:return ao(t,1,10999,c5,3,r);case 23:return ii(t,"");case 24:return ii(t,"");case 27:return Xt(t,3302,3311,!0,r);case 28:return ii(t,"",A);case 29:return ii(t,"",A);case 34:return Xt(t,3792,3801,!0,r);case 37:return Xt(t,6160,6169,!0,r);case 38:return Xt(t,4160,4169,!0,r);case 39:return Xt(t,2918,2927,!0,r);case 40:return Xt(t,1776,1785,!0,r);case 43:return Xt(t,3046,3055,!0,r);case 44:return Xt(t,3174,3183,!0,r);case 45:return Xt(t,3664,3673,!0,r);case 46:return Xt(t,3872,3881,!0,r);case 3:default:return Xt(t,48,57,!0,r)}},QQ="data-html2canvas-ignore",yI=function(){function t(e,n,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new l5,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,n){var r=this,A=d5(e,n);if(!A.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=A.contentWindow,a=o.document,c=g5(A).then(function(){return Vn(r,void 0,void 0,function(){var d,h;return kn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(B5),o&&(o.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==n.top||o.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-n.left,o.scrollY-n.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,f5(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return A})]:[2,A]}})})});return a.open(),a.write(m5(document.doctype)+"<html></html>"),w5(this.referenceElement.ownerDocument,s,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(l0(e,2))debugger;if(_Q(e))return this.createCanvasClone(e);if(hI(e))return this.createVideoClone(e);if(fI(e))return this.createStyleClone(e);var n=e.cloneNode(!1);return h0(n)&&(h0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(n.src=e.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),gI(n)?this.createCustomElementClone(n):n},t.prototype.createCustomElementClone=function(e){var n=document.createElement("html2canvascustomelement");return pp(e.style,n),n},t.prototype.createStyleClone=function(e){try{var n=e.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),A=e.cloneNode(!1);return A.textContent=r,A}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var n;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var A=e.cloneNode(!1);try{A.width=e.width,A.height=e.height;var s=e.getContext("2d"),i=A.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(n=e.getContext("webgl2"))!==null&&n!==void 0?n:e.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return A}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return A},t.prototype.createVideoClone=function(e){var n=e.ownerDocument.createElement("canvas");n.width=e.offsetWidth,n.height=e.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(e,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},t.prototype.appendChildNode=function(e,n,r){(!Uo(n)||!a5(n)&&!n.hasAttribute(QQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!Uo(n)||!fI(n))&&e.appendChild(this.cloneNode(n,r))},t.prototype.cloneChildNodes=function(e,n,r){for(var A=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(Uo(s)&&TQ(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return A.appendChildNode(n,o,r)})}else this.appendChildNode(n,s,r)},t.prototype.cloneNode=function(e,n){if(IQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&Uo(e)&&(d0(e)||Od(e))){var A=this.createElementClone(e);A.style.transitionProperty="none";var s=r.getComputedStyle(e),i=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&d0(A)&&(this.clonedReferenceElement=A),kB(A)&&x5(A);var a=this.counters.parse(new YC(this.context,s)),c=this.resolvePseudoContent(e,A,i,$l.BEFORE);gI(e)&&(n=!0),hI(e)||this.cloneChildNodes(e,A,n),c&&A.insertBefore(c,A.firstChild);var d=this.resolvePseudoContent(e,A,o,$l.AFTER);return d&&A.appendChild(d),this.counters.pop(a),(s&&(this.options.copyStyles||Od(e))&&!bQ(e)||n)&&pp(s,A),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([A,e.scrollLeft,e.scrollTop]),(Oh(e)||Vh(e))&&(Oh(A)||Vh(A))&&(A.value=e.value),A}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,n,r,A){var s=this;if(r){var i=r.content,o=n.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||r.display==="none")){this.counters.parse(new YC(this.context,r));var a=new A3(this.context,r),c=o.createElement("html2canvaspseudoelement");pp(r,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(o.createTextNode(h.value));else if(h.type===22){var f=o.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var m=h.values.filter(Bt);m.length&&c.appendChild(o.createTextNode(e.getAttribute(m[0].value)||""))}else if(h.name==="counter"){var B=h.values.filter(ga),v=B[0],_=B[1];if(v&&Bt(v)){var x=s.counters.getCounterValue(v.value),w=_&&Bt(_)?a0.parse(s.context,_.value):3;c.appendChild(o.createTextNode(Fc(x,w,!1)))}}else if(h.name==="counters"){var I=h.values.filter(ga),v=I[0],F=I[1],_=I[2];if(v&&Bt(v)){var U=s.counters.getCounterValues(v.value),R=_&&Bt(_)?a0.parse(s.context,_.value):3,y=F&&F.type===0?F.value:"",C=U.map(function(N){return Fc(N,R,!1)}).join(y);c.appendChild(o.createTextNode(C))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(o.createTextNode(XC(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(XC(a.quotes,--s.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(h.value))}}),c.className=f0+" "+g0;var d=A===$l.BEFORE?" "+f0:" "+g0;return Od(n)?n.className.baseValue+=d:n.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),$l;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})($l||($l={}));var d5=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(QQ,"true"),t.body.appendChild(n),n},h5=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},f5=function(t){return Promise.all([].slice.call(t.images,0).map(h5))},g5=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var A=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var s=setInterval(function(){A.body.childNodes.length>0&&A.readyState==="complete"&&(clearInterval(s),e(t))},50)}})},p5=["all","d","content"],pp=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);p5.indexOf(r)===-1&&e.style.setProperty(r,t.getPropertyValue(r))}return e},m5=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},w5=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},B5=function(t){var e=t[0],n=t[1],r=t[2];e.scrollLeft=n,e.scrollTop=r},v5=":before",y5=":after",f0="___html2canvas___pseudoelement_before",g0="___html2canvas___pseudoelement_after",xI=`{
    content: "" !important;
    display: none !important;
}`,x5=function(t){C5(t,"."+f0+v5+xI+`
         .`+g0+y5+xI)},C5=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}},UQ=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),I5=function(){function t(e,n){this.context=e,this._options=n,this._cache={}}return t.prototype.addImage=function(e){var n=Promise.resolve();return this.has(e)||(wp(e)||T5(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),n},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Vn(this,void 0,void 0,function(){var n,r,A,s,i=this;return kn(this,function(o){switch(o.label){case 0:return n=UQ.isSameOrigin(e),r=!mp(e)&&this._options.useCORS===!0&&xn.SUPPORT_CORS_IMAGES&&!n,A=!mp(e)&&!n&&!wp(e)&&typeof this._options.proxy=="string"&&xn.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!mp(e)&&!wp(e)&&!A&&!r?[2]:(s=e,A?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(F5(s)||r)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var A=e.substring(0,256);return new Promise(function(s,i){var o=xn.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")s(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return s(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+A+" with status code "+a.status)},a.onerror=i;var c=r.indexOf("?")>-1?"&":"?";if(a.open("GET",""+r+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),n._options.imageTimeout){var d=n._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+A)}}a.send()})},t}(),E5=/^data:image\/svg\+xml/i,_5=/^data:image\/.*;base64,/i,b5=/^data:image\/.*/i,T5=function(t){return xn.SUPPORT_SVG_DRAWING||!Q5(t)},mp=function(t){return b5.test(t)},F5=function(t){return _5.test(t)},wp=function(t){return t.substr(0,4)==="blob"},Q5=function(t){return t.substr(-3).toLowerCase()==="svg"||E5.test(t)},Be=function(){function t(e,n){this.type=0,this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),lo=function(t,e,n){return new Be(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},ld=function(){function t(e,n,r,A){this.type=1,this.start=e,this.startControl=n,this.endControl=r,this.end=A}return t.prototype.subdivide=function(e,n){var r=lo(this.start,this.startControl,e),A=lo(this.startControl,this.endControl,e),s=lo(this.endControl,this.end,e),i=lo(r,A,e),o=lo(A,s,e),a=lo(i,o,e);return n?new t(this.start,r,i,a):new t(a,o,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),xr=function(t){return t.type===1},U5=function(){function t(e){var n=e.styles,r=e.bounds,A=Cl(n.borderTopLeftRadius,r.width,r.height),s=A[0],i=A[1],o=Cl(n.borderTopRightRadius,r.width,r.height),a=o[0],c=o[1],d=Cl(n.borderBottomRightRadius,r.width,r.height),h=d[0],f=d[1],m=Cl(n.borderBottomLeftRadius,r.width,r.height),B=m[0],v=m[1],_=[];_.push((s+a)/r.width),_.push((B+h)/r.width),_.push((i+v)/r.height),_.push((c+f)/r.height);var x=Math.max.apply(Math,_);x>1&&(s/=x,i/=x,a/=x,c/=x,h/=x,f/=x,B/=x,v/=x);var w=r.width-a,I=r.height-f,F=r.width-h,U=r.height-v,R=n.borderTopWidth,y=n.borderRightWidth,C=n.borderBottomWidth,E=n.borderLeftWidth,Q=Et(n.paddingTop,e.bounds.width),N=Et(n.paddingRight,e.bounds.width),L=Et(n.paddingBottom,e.bounds.width),T=Et(n.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Nt(r.left+E/3,r.top+R/3,s-E/3,i-R/3,gt.TOP_LEFT):new Be(r.left+E/3,r.top+R/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Nt(r.left+w,r.top+R/3,a-y/3,c-R/3,gt.TOP_RIGHT):new Be(r.left+r.width-y/3,r.top+R/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Nt(r.left+F,r.top+I,h-y/3,f-C/3,gt.BOTTOM_RIGHT):new Be(r.left+r.width-y/3,r.top+r.height-C/3),this.bottomLeftBorderDoubleOuterBox=B>0||v>0?Nt(r.left+E/3,r.top+U,B-E/3,v-C/3,gt.BOTTOM_LEFT):new Be(r.left+E/3,r.top+r.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Nt(r.left+E*2/3,r.top+R*2/3,s-E*2/3,i-R*2/3,gt.TOP_LEFT):new Be(r.left+E*2/3,r.top+R*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Nt(r.left+w,r.top+R*2/3,a-y*2/3,c-R*2/3,gt.TOP_RIGHT):new Be(r.left+r.width-y*2/3,r.top+R*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Nt(r.left+F,r.top+I,h-y*2/3,f-C*2/3,gt.BOTTOM_RIGHT):new Be(r.left+r.width-y*2/3,r.top+r.height-C*2/3),this.bottomLeftBorderDoubleInnerBox=B>0||v>0?Nt(r.left+E*2/3,r.top+U,B-E*2/3,v-C*2/3,gt.BOTTOM_LEFT):new Be(r.left+E*2/3,r.top+r.height-C*2/3),this.topLeftBorderStroke=s>0||i>0?Nt(r.left+E/2,r.top+R/2,s-E/2,i-R/2,gt.TOP_LEFT):new Be(r.left+E/2,r.top+R/2),this.topRightBorderStroke=s>0||i>0?Nt(r.left+w,r.top+R/2,a-y/2,c-R/2,gt.TOP_RIGHT):new Be(r.left+r.width-y/2,r.top+R/2),this.bottomRightBorderStroke=h>0||f>0?Nt(r.left+F,r.top+I,h-y/2,f-C/2,gt.BOTTOM_RIGHT):new Be(r.left+r.width-y/2,r.top+r.height-C/2),this.bottomLeftBorderStroke=B>0||v>0?Nt(r.left+E/2,r.top+U,B-E/2,v-C/2,gt.BOTTOM_LEFT):new Be(r.left+E/2,r.top+r.height-C/2),this.topLeftBorderBox=s>0||i>0?Nt(r.left,r.top,s,i,gt.TOP_LEFT):new Be(r.left,r.top),this.topRightBorderBox=a>0||c>0?Nt(r.left+w,r.top,a,c,gt.TOP_RIGHT):new Be(r.left+r.width,r.top),this.bottomRightBorderBox=h>0||f>0?Nt(r.left+F,r.top+I,h,f,gt.BOTTOM_RIGHT):new Be(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=B>0||v>0?Nt(r.left,r.top+U,B,v,gt.BOTTOM_LEFT):new Be(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||i>0?Nt(r.left+E,r.top+R,Math.max(0,s-E),Math.max(0,i-R),gt.TOP_LEFT):new Be(r.left+E,r.top+R),this.topRightPaddingBox=a>0||c>0?Nt(r.left+Math.min(w,r.width-y),r.top+R,w>r.width+y?0:Math.max(0,a-y),Math.max(0,c-R),gt.TOP_RIGHT):new Be(r.left+r.width-y,r.top+R),this.bottomRightPaddingBox=h>0||f>0?Nt(r.left+Math.min(F,r.width-E),r.top+Math.min(I,r.height-C),Math.max(0,h-y),Math.max(0,f-C),gt.BOTTOM_RIGHT):new Be(r.left+r.width-y,r.top+r.height-C),this.bottomLeftPaddingBox=B>0||v>0?Nt(r.left+E,r.top+Math.min(U,r.height-C),Math.max(0,B-E),Math.max(0,v-C),gt.BOTTOM_LEFT):new Be(r.left+E,r.top+r.height-C),this.topLeftContentBox=s>0||i>0?Nt(r.left+E+T,r.top+R+Q,Math.max(0,s-(E+T)),Math.max(0,i-(R+Q)),gt.TOP_LEFT):new Be(r.left+E+T,r.top+R+Q),this.topRightContentBox=a>0||c>0?Nt(r.left+Math.min(w,r.width+E+T),r.top+R+Q,w>r.width+E+T?0:a-E+T,c-(R+Q),gt.TOP_RIGHT):new Be(r.left+r.width-(y+N),r.top+R+Q),this.bottomRightContentBox=h>0||f>0?Nt(r.left+Math.min(F,r.width-(E+T)),r.top+Math.min(I,r.height+R+Q),Math.max(0,h-(y+N)),f-(C+L),gt.BOTTOM_RIGHT):new Be(r.left+r.width-(y+N),r.top+r.height-(C+L)),this.bottomLeftContentBox=B>0||v>0?Nt(r.left+E+T,r.top+U,Math.max(0,B-(E+T)),v-(C+L),gt.BOTTOM_LEFT):new Be(r.left+E+T,r.top+r.height-(C+L))}return t}(),gt;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(gt||(gt={}));var Nt=function(t,e,n,r,A){var s=4*((Math.sqrt(2)-1)/3),i=n*s,o=r*s,a=t+n,c=e+r;switch(A){case gt.TOP_LEFT:return new ld(new Be(t,c),new Be(t,c-o),new Be(a-i,e),new Be(a,e));case gt.TOP_RIGHT:return new ld(new Be(t,e),new Be(t+i,e),new Be(a,c-o),new Be(a,c));case gt.BOTTOM_RIGHT:return new ld(new Be(a,e),new Be(a,e+o),new Be(t+i,c),new Be(t,c));case gt.BOTTOM_LEFT:default:return new ld(new Be(a,c),new Be(a-i,c),new Be(t,e+o),new Be(t,e))}},Kh=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},S5=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Gh=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},k5=function(){function t(e,n,r){this.offsetX=e,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return t}(),cd=function(){function t(e,n){this.path=e,this.target=n,this.type=1}return t}(),R5=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),N5=function(t){return t.type===0},SQ=function(t){return t.type===1},D5=function(t){return t.type===2},CI=function(t,e){return t.length===e.length?t.some(function(n,r){return n===e[r]}):!1},P5=function(t,e,n,r,A){return t.map(function(s,i){switch(i){case 0:return s.add(e,n);case 1:return s.add(e+r,n);case 2:return s.add(e+r,n+A);case 3:return s.add(e,n+A)}return s})},kQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),RQ=function(){function t(e,n){if(this.container=e,this.parent=n,this.effects=[],this.curves=new U5(this.container),this.container.styles.opacity<1&&this.effects.push(new R5(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,A=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new k5(r,A,s))}if(this.container.styles.overflowX!==0){var i=Kh(this.curves),o=Gh(this.curves);CI(i,o)?this.effects.push(new cd(i,6)):(this.effects.push(new cd(i,2)),this.effects.push(new cd(o,4)))}}return t.prototype.getEffects=function(e){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,A=this.effects.slice(0);r;){var s=r.effects.filter(function(a){return!SQ(a)});if(n||r.container.styles.position!==0||!r.parent){if(A.unshift.apply(A,s),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var i=Kh(r.curves),o=Gh(r.curves);CI(i,o)||A.unshift(new cd(o,6))}}else A.unshift.apply(A,s);r=r.parent}return A.filter(function(a){return on(a.target,e)})},t}(),p0=function(t,e,n,r){t.container.elements.forEach(function(A){var s=on(A.flags,4),i=on(A.flags,2),o=new RQ(A,t);on(A.styles.display,2048)&&r.push(o);var a=on(A.flags,8)?[]:r;if(s||i){var c=s||A.styles.isPositioned()?n:e,d=new kQ(o);if(A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()){var h=A.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(B,v){return h>B.element.container.styles.zIndex.order?(f=v,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var m=0;c.positiveZIndex.some(function(B,v){return h>=B.element.container.styles.zIndex.order?(m=v+1,!1):m>0}),c.positiveZIndex.splice(m,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else A.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);p0(o,d,s?d:n,a)}else A.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),p0(o,e,n,a);on(A.flags,8)&&NQ(A,a)})},NQ=function(t,e){for(var n=t instanceof u0?t.start:1,r=t instanceof u0?t.reversed:!1,A=0;A<e.length;A++){var s=e[A];s.container instanceof wQ&&typeof s.container.value=="number"&&s.container.value!==0&&(n=s.container.value),s.listValue=Fc(n,s.container.styles.listStyleType,!0),n+=r?-1:1}},L5=function(t){var e=new RQ(t,null),n=new kQ(e),r=[];return p0(e,n,n,r),NQ(e.container,r),n},II=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},M5=function(t,e){switch(e){case 0:return Er(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Er(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Er(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Er(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},j5=function(t,e){switch(e){case 0:return Er(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Er(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Er(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Er(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},H5=function(t,e){switch(e){case 0:return ud(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return ud(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return ud(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return ud(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},ud=function(t,e){var n=[];return xr(t)?n.push(t.subdivide(.5,!1)):n.push(t),xr(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},Er=function(t,e,n,r){var A=[];return xr(t)?A.push(t.subdivide(.5,!1)):A.push(t),xr(n)?A.push(n.subdivide(.5,!0)):A.push(n),xr(r)?A.push(r.subdivide(.5,!0).reverse()):A.push(r),xr(e)?A.push(e.subdivide(.5,!1).reverse()):A.push(e),A},DQ=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},zh=function(t){var e=t.styles,n=t.bounds,r=Et(e.paddingLeft,n.width),A=Et(e.paddingRight,n.width),s=Et(e.paddingTop,n.width),i=Et(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+A),-(e.borderTopWidth+e.borderBottomWidth+s+i))},O5=function(t,e){return t===0?e.bounds:t===2?zh(e):DQ(e)},V5=function(t,e){return t===0?e.bounds:t===2?zh(e):DQ(e)},Bp=function(t,e,n){var r=O5(mo(t.styles.backgroundOrigin,e),t),A=V5(mo(t.styles.backgroundClip,e),t),s=K5(mo(t.styles.backgroundSize,e),n,r),i=s[0],o=s[1],a=Cl(mo(t.styles.backgroundPosition,e),r.width-i,r.height-o),c=G5(mo(t.styles.backgroundRepeat,e),a,s,r,A),d=Math.round(r.left+a[0]),h=Math.round(r.top+a[1]);return[c,d,h,i,o]},co=function(t){return Bt(t)&&t.value===Vo.AUTO},dd=function(t){return typeof t=="number"},K5=function(t,e,n){var r=e[0],A=e[1],s=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(rn(i)&&o&&rn(o))return[Et(i,n.width),Et(o,n.height)];var a=dd(s);if(Bt(i)&&(i.value===Vo.CONTAIN||i.value===Vo.COVER)){if(dd(s)){var c=n.width/n.height;return c<s!=(i.value===Vo.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var d=dd(r),h=dd(A),f=d||h;if(co(i)&&(!o||co(o))){if(d&&h)return[r,A];if(!a&&!f)return[n.width,n.height];if(f&&a){var m=d?r:A*s,B=h?A:r/s;return[m,B]}var v=d?r:n.width,_=h?A:n.height;return[v,_]}if(a){var x=0,w=0;return rn(i)?x=Et(i,n.width):rn(o)&&(w=Et(o,n.height)),co(i)?x=w*s:(!o||co(o))&&(w=x/s),[x,w]}var I=null,F=null;if(rn(i)?I=Et(i,n.width):o&&rn(o)&&(F=Et(o,n.height)),I!==null&&(!o||co(o))&&(F=d&&h?I/r*A:n.height),F!==null&&co(i)&&(I=d&&h?F/A*r:n.width),I!==null&&F!==null)return[I,F];throw new Error("Unable to calculate background-size for element")},mo=function(t,e){var n=t[e];return typeof n>"u"?t[0]:n},G5=function(t,e,n,r,A){var s=e[0],i=e[1],o=n[0],a=n[1];switch(t){case 2:return[new Be(Math.round(r.left),Math.round(r.top+i)),new Be(Math.round(r.left+r.width),Math.round(r.top+i)),new Be(Math.round(r.left+r.width),Math.round(a+r.top+i)),new Be(Math.round(r.left),Math.round(a+r.top+i))];case 3:return[new Be(Math.round(r.left+s),Math.round(r.top)),new Be(Math.round(r.left+s+o),Math.round(r.top)),new Be(Math.round(r.left+s+o),Math.round(r.height+r.top)),new Be(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new Be(Math.round(r.left+s),Math.round(r.top+i)),new Be(Math.round(r.left+s+o),Math.round(r.top+i)),new Be(Math.round(r.left+s+o),Math.round(r.top+i+a)),new Be(Math.round(r.left+s),Math.round(r.top+i+a))];default:return[new Be(Math.round(A.left),Math.round(A.top)),new Be(Math.round(A.left+A.width),Math.round(A.top)),new Be(Math.round(A.left+A.width),Math.round(A.height+A.top)),new Be(Math.round(A.left),Math.round(A.height+A.top))]}},z5="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",EI="Hidden Text",$5=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,n){var r=this._document.createElement("div"),A=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",i.appendChild(r),A.src=z5,A.width=1,A.height=1,A.style.margin="0",A.style.padding="0",A.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=n,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(EI)),r.appendChild(s),r.appendChild(A);var o=A.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(EI)),r.style.lineHeight="normal",A.style.verticalAlign="super";var a=A.offsetTop-r.offsetTop+2;return i.removeChild(r),{baseline:o,middle:a}},t.prototype.getMetrics=function(e,n){var r=e+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,n)),this._data[r]},t}(),PQ=function(){function t(e,n){this.context=e,this.options=n}return t}(),W5=1e4,q5=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A._activeEffects=[],A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),r.canvas||(A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px"),A.fontMetrics=new $5(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),A}return e.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(A){return r.applyEffect(A)})},e.prototype.applyEffect=function(n){this.ctx.save(),D5(n)&&(this.ctx.globalAlpha=n.opacity),N5(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),SQ(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(n){return Vn(this,void 0,void 0,function(){var r;return kn(this,function(A){switch(A.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(n){return Vn(this,void 0,void 0,function(){return kn(this,function(r){switch(r.label){case 0:if(on(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(n,r,A){var s=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+A);else{var i=UB(n.text);i.reduce(function(o,a){return s.ctx.fillText(a,o,n.bounds.top+A),o+s.ctx.measureText(a).width},n.bounds.left)}},e.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),A=e6(n.fontFamily).join(", "),s=Au(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,s,A].join(" "),A,s]},e.prototype.renderTextNode=function(n,r){return Vn(this,void 0,void 0,function(){var A,s,i,o,a,c,d,h,f=this;return kn(this,function(m){return A=this.createFontStyle(r),s=A[0],i=A[1],o=A[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,o),c=a.baseline,d=a.middle,h=r.paintOrder,n.textBounds.forEach(function(B){h.forEach(function(v){switch(v){case 0:f.ctx.fillStyle=dn(r.color),f.renderTextWithLetterSpacing(B,r.letterSpacing,c);var _=r.textShadow;_.length&&B.text.trim().length&&(_.slice(0).reverse().forEach(function(x){f.ctx.shadowColor=dn(x.color),f.ctx.shadowOffsetX=x.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=x.offsetY.number*f.options.scale,f.ctx.shadowBlur=x.blur.number,f.renderTextWithLetterSpacing(B,r.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=dn(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(x){switch(x){case 1:f.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top+c),B.bounds.width,1);break;case 2:f.ctx.fillRect(B.bounds.left,Math.round(B.bounds.top),B.bounds.width,1);break;case 3:f.ctx.fillRect(B.bounds.left,Math.ceil(B.bounds.top+d),B.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&B.text.trim().length&&(f.ctx.strokeStyle=dn(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(B.text,B.bounds.left,B.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(n,r,A){if(A&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var s=zh(n),i=Gh(r);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,n.intrinsicWidth,n.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(n){return Vn(this,void 0,void 0,function(){var r,A,s,i,o,a,w,w,c,d,h,f,F,m,B,U,v,_,x,w,I,F,U;return kn(this,function(R){switch(R.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,A=n.curves,s=r.styles,i=0,o=r.textNodes,R.label=1;case 1:return i<o.length?(a=o[i],[4,this.renderTextNode(a,s)]):[3,4];case 2:R.sent(),R.label=3;case 3:return i++,[3,1];case 4:if(!(r instanceof gQ))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return w=R.sent(),this.renderReplacedElement(r,A,w),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof pQ&&this.renderReplacedElement(r,A,r.canvas),!(r instanceof mQ))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return w=R.sent(),this.renderReplacedElement(r,A,w),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof yQ&&r.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,c.render(r.tree)]):[3,14];case 13:d=R.sent(),r.width&&r.height&&this.ctx.drawImage(d,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),R.label=14;case 14:if(r instanceof SB&&(h=Math.min(r.bounds.width,r.bounds.height),r.type===jh?r.checked&&(this.ctx.save(),this.path([new Be(r.bounds.left+h*.39363,r.bounds.top+h*.79),new Be(r.bounds.left+h*.16,r.bounds.top+h*.5549),new Be(r.bounds.left+h*.27347,r.bounds.top+h*.44071),new Be(r.bounds.left+h*.39694,r.bounds.top+h*.5649),new Be(r.bounds.left+h*.72983,r.bounds.top+h*.23),new Be(r.bounds.left+h*.84,r.bounds.top+h*.34085),new Be(r.bounds.left+h*.39363,r.bounds.top+h*.79)]),this.ctx.fillStyle=dn(dI),this.ctx.fill(),this.ctx.restore()):r.type===Hh&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+h/2,r.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=dn(dI),this.ctx.fill(),this.ctx.restore())),J5(r)&&r.value.length){switch(f=this.createFontStyle(s),F=f[0],m=f[1],B=this.fontMetrics.getMetrics(F,m).baseline,this.ctx.font=F,this.ctx.fillStyle=dn(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Y5(r.styles.textAlign),U=zh(r),v=0,r.styles.textAlign){case 1:v+=U.width/2;break;case 2:v+=U.width;break}_=U.add(v,0,0,-U.height/2+1),this.ctx.save(),this.path([new Be(U.left,U.top),new Be(U.left+U.width,U.top),new Be(U.left+U.width,U.top+U.height),new Be(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new zl(r.value,_),s.letterSpacing,B),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!on(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(x=r.styles.listStyleImage,x.type!==0)return[3,18];w=void 0,I=x.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return w=R.sent(),this.ctx.drawImage(w,r.bounds.left-(w.width+10),r.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(F=this.createFontStyle(s)[0],this.ctx.font=F,this.ctx.fillStyle=dn(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new TA(r.bounds.left,r.bounds.top+Et(r.styles.paddingTop,r.bounds.width),r.bounds.width,qC(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new zl(n.listValue,U),s.letterSpacing,qC(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(n){return Vn(this,void 0,void 0,function(){var r,A,x,s,i,x,o,a,x,c,d,x,h,f,x,m,B,x,v,_,x;return kn(this,function(w){switch(w.label){case 0:if(on(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:w.sent(),r=0,A=n.negativeZIndex,w.label=2;case 2:return r<A.length?(x=A[r],[4,this.renderStack(x)]):[3,5];case 3:w.sent(),w.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:w.sent(),s=0,i=n.nonInlineLevel,w.label=7;case 7:return s<i.length?(x=i[s],[4,this.renderNode(x)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:o=0,a=n.nonPositionedFloats,w.label=11;case 11:return o<a.length?(x=a[o],[4,this.renderStack(x)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:c=0,d=n.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(x=d[c],[4,this.renderStack(x)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,f=n.inlineLevel,w.label=19;case 19:return h<f.length?(x=f[h],[4,this.renderNode(x)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:m=0,B=n.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return m<B.length?(x=B[m],[4,this.renderStack(x)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:v=0,_=n.positiveZIndex,w.label=27;case 27:return v<_.length?(x=_[v],[4,this.renderStack(x)]):[3,30];case 28:w.sent(),w.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},e.prototype.formatPath=function(n){var r=this;n.forEach(function(A,s){var i=xr(A)?A.start:A;s===0?r.ctx.moveTo(i.x,i.y):r.ctx.lineTo(i.x,i.y),xr(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},e.prototype.renderRepeat=function(n,r,A,s){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(A,s),this.ctx.fill(),this.ctx.translate(-A,-s)},e.prototype.resizeImage=function(n,r,A){var s;if(n.width===r&&n.height===A)return n;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,A);var a=o.getContext("2d");return a.drawImage(n,0,0,n.width,n.height,0,0,r,A),o},e.prototype.renderBackgroundImage=function(n){return Vn(this,void 0,void 0,function(){var r,A,s,i,o,a;return kn(this,function(c){switch(c.label){case 0:r=n.styles.backgroundImage.length-1,A=function(d){var h,f,m,Q,et,Ne,T,Pe,C,B,Q,et,Ne,T,Pe,v,_,x,w,I,F,U,R,y,C,E,Q,N,L,T,Pe,Me,et,Ne,ee,S,O,G,Y,ne,Le,Ee;return kn(this,function(Ve){switch(Ve.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,Ve.label=1;case 1:return Ve.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return h=Ve.sent(),[3,4];case 3:return Ve.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(m=Bp(n,r,[h.width,h.height,h.width/h.height]),Q=m[0],et=m[1],Ne=m[2],T=m[3],Pe=m[4],C=s.ctx.createPattern(s.resizeImage(h,T,Pe),"repeat"),s.renderRepeat(Q,C,et,Ne)),[3,6];case 5:NV(d)?(B=Bp(n,r,[null,null,null]),Q=B[0],et=B[1],Ne=B[2],T=B[3],Pe=B[4],v=QV(d.angle,T,Pe),_=v[0],x=v[1],w=v[2],I=v[3],F=v[4],U=document.createElement("canvas"),U.width=T,U.height=Pe,R=U.getContext("2d"),y=R.createLinearGradient(x,I,w,F),$C(d.stops,_).forEach(function(ve){return y.addColorStop(ve.stop,dn(ve.color))}),R.fillStyle=y,R.fillRect(0,0,T,Pe),T>0&&Pe>0&&(C=s.ctx.createPattern(U,"repeat"),s.renderRepeat(Q,C,et,Ne))):DV(d)&&(E=Bp(n,r,[null,null,null]),Q=E[0],N=E[1],L=E[2],T=E[3],Pe=E[4],Me=d.position.length===0?[TB]:d.position,et=Et(Me[0],T),Ne=Et(Me[Me.length-1],Pe),ee=UV(d,et,Ne,T,Pe),S=ee[0],O=ee[1],S>0&&O>0&&(G=s.ctx.createRadialGradient(N+et,L+Ne,0,N+et,L+Ne,S),$C(d.stops,S*2).forEach(function(ve){return G.addColorStop(ve.stop,dn(ve.color))}),s.path(Q),s.ctx.fillStyle=G,S!==O?(Y=n.bounds.left+.5*n.bounds.width,ne=n.bounds.top+.5*n.bounds.height,Le=O/S,Ee=1/Le,s.ctx.save(),s.ctx.translate(Y,ne),s.ctx.transform(1,0,0,Le,0,0),s.ctx.translate(-Y,-ne),s.ctx.fillRect(N,Ee*(L-ne)+ne,T,Pe*Ee),s.ctx.restore()):s.ctx.fill())),Ve.label=6;case 6:return r--,[2]}})},s=this,i=0,o=n.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(a=o[i],[5,A(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(n,r,A){return Vn(this,void 0,void 0,function(){return kn(this,function(s){return this.path(II(A,r)),this.ctx.fillStyle=dn(n),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(n,r,A,s){return Vn(this,void 0,void 0,function(){var i,o;return kn(this,function(a){switch(a.label){case 0:return r<3?[4,this.renderSolidBorder(n,A,s)]:[3,2];case 1:return a.sent(),[2];case 2:return i=M5(s,A),this.path(i),this.ctx.fillStyle=dn(n),this.ctx.fill(),o=j5(s,A),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(n){return Vn(this,void 0,void 0,function(){var r,A,s,i,o,a,c,d,h=this;return kn(this,function(f){switch(f.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,A=!Fs(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],i=X5(mo(r.backgroundClip,0),n.curves),A||r.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),Fs(r.backgroundColor)||(this.ctx.fillStyle=dn(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(m){h.ctx.save();var B=Kh(n.curves),v=m.inset?0:W5,_=P5(B,-v+(m.inset?1:-1)*m.spread.number,(m.inset?1:-1)*m.spread.number,m.spread.number*(m.inset?-2:2),m.spread.number*(m.inset?-2:2));m.inset?(h.path(B),h.ctx.clip(),h.mask(_)):(h.mask(B),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=m.offsetX.number+v,h.ctx.shadowOffsetY=m.offsetY.number,h.ctx.shadowColor=dn(m.color),h.ctx.shadowBlur=m.blur.number,h.ctx.fillStyle=m.inset?dn(m.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:o=0,a=0,c=s,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!Fs(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,n.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,n.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,n.curves)];case 10:f.sent(),f.label=11;case 11:o++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(n,r,A,s,i){return Vn(this,void 0,void 0,function(){var o,a,c,d,h,f,m,B,v,_,x,w,I,F,U,R,U,R;return kn(this,function(y){return this.ctx.save(),o=H5(s,A),a=II(s,A),i===2&&(this.path(a),this.ctx.clip()),xr(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),xr(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),A===0||A===2?m=Math.abs(c-h):m=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(a.slice(0,2)),B=r<3?r*3:r*2,v=r<3?r*2:r,i===3&&(B=r,v=r),_=!0,m<=B*2?_=!1:m<=B*2+v?(x=m/(2*B+v),B*=x,v*=x):(w=Math.floor((m+v)/(B+v)),I=(m-w*B)/(w-1),F=(m-(w+1)*B)/w,v=F<=0||Math.abs(v-I)<Math.abs(v-F)?I:F),_&&(i===3?this.ctx.setLineDash([0,B+v]):this.ctx.setLineDash([B,v])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=dn(n),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(xr(a[0])&&(U=a[3],R=a[0],this.ctx.beginPath(),this.formatPath([new Be(U.end.x,U.end.y),new Be(R.start.x,R.start.y)]),this.ctx.stroke()),xr(a[1])&&(U=a[1],R=a[2],this.ctx.beginPath(),this.formatPath([new Be(U.end.x,U.end.y),new Be(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(n){return Vn(this,void 0,void 0,function(){var r;return kn(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=dn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=L5(n),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(PQ),J5=function(t){return t instanceof vQ||t instanceof BQ?!0:t instanceof SB&&t.type!==Hh&&t.type!==jh},X5=function(t,e){switch(t){case 0:return Kh(e);case 2:return S5(e);case 1:default:return Gh(e)}},Y5=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Z5=["-apple-system","system-ui"],e6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return Z5.indexOf(e)===-1}):t},t6=function(t){jr(e,t);function e(n,r){var A=t.call(this,n,r)||this;return A.canvas=r.canvas?r.canvas:document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=r,A.canvas.width=Math.floor(r.width*r.scale),A.canvas.height=Math.floor(r.height*r.scale),A.canvas.style.width=r.width+"px",A.canvas.style.height=r.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-r.x,-r.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),A}return e.prototype.render=function(n){return Vn(this,void 0,void 0,function(){var r,A;return kn(this,function(s){switch(s.label){case 0:return r=c0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,n6(r)];case 1:return A=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=dn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(PQ),n6=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},r6=function(){function t(e){var n=e.id,r=e.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ku([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ku([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ku([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ku([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),A6=function(){function t(e,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new r6({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new I5(this,e)}return t.instanceCount=1,t}(),_I=function(t,e){return e===void 0&&(e={}),s6(t,e)};typeof window<"u"&&UQ.setContext(window);var s6=function(t,e){return Vn(void 0,void 0,void 0,function(){var n,r,A,s,i,o,a,c,d,h,f,m,B,v,_,x,w,I,F,U,y,R,y,C,E,Q,N,L,T,Pe,Me,et,Ne,ee,S,O,G,Y,ne,Le;return kn(this,function(Ee){switch(Ee.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return A={allowTaint:(C=e.allowTaint)!==null&&C!==void 0?C:!1,imageTimeout:(E=e.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:e.proxy,useCORS:(Q=e.useCORS)!==null&&Q!==void 0?Q:!1},s=qm({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},A),i={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(T=e.windowHeight)!==null&&T!==void 0?T:r.innerHeight,scrollX:(Pe=e.scrollX)!==null&&Pe!==void 0?Pe:r.pageXOffset,scrollY:(Me=e.scrollY)!==null&&Me!==void 0?Me:r.pageYOffset},o=new TA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new A6(s,o),c=(et=e.foreignObjectRendering)!==null&&et!==void 0?et:!1,d={allowTaint:(Ne=e.allowTaint)!==null&&Ne!==void 0?Ne:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new yI(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(n,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return m=Ee.sent(),B=kB(f)||o5(f)?PH(f.ownerDocument):Kf(a,f),v=B.width,_=B.height,x=B.left,w=B.top,I=i6(a,f,e.backgroundColor),F={canvas:e.canvas,backgroundColor:I,scale:(S=(ee=e.scale)!==null&&ee!==void 0?ee:r.devicePixelRatio)!==null&&S!==void 0?S:1,x:((O=e.x)!==null&&O!==void 0?O:0)+x,y:((G=e.y)!==null&&G!==void 0?G:0)+w,width:(Y=e.width)!==null&&Y!==void 0?Y:Math.ceil(v),height:(ne=e.height)!==null&&ne!==void 0?ne:Math.ceil(_)},c?(a.logger.debug("Document cloned, using foreign object rendering"),y=new t6(a,F),[4,y.render(f)]):[3,3];case 2:return U=Ee.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+x+","+w+" with size "+v+"x"+_+" using computed rendering"),a.logger.debug("Starting DOM parsing"),R=CQ(a,f),I===R.styles.backgroundColor&&(R.styles.backgroundColor=BA.TRANSPARENT),a.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),y=new q5(a,F),[4,y.render(R)];case 4:U=Ee.sent(),Ee.label=5;case 5:return(!((Le=e.removeContainer)!==null&&Le!==void 0)||Le)&&(yI.destroy(m)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,U]}})})},i6=function(t,e,n){var r=e.ownerDocument,A=r.documentElement?Kl(t,getComputedStyle(r.documentElement).backgroundColor):BA.TRANSPARENT,s=r.body?Kl(t,getComputedStyle(r.body).backgroundColor):BA.TRANSPARENT,i=typeof n=="string"?Kl(t,n):n===null?BA.TRANSPARENT:4294967295;return e===r.documentElement?Fs(A)?Fs(s)?i:s:A:i},o6=Object.defineProperty,$h=Object.getOwnPropertySymbols,LQ=Object.prototype.hasOwnProperty,MQ=Object.prototype.propertyIsEnumerable,bI=(t,e,n)=>e in t?o6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,a6=(t,e)=>{for(var n in e||(e={}))LQ.call(e,n)&&bI(t,n,e[n]);if($h)for(var n of $h(e))MQ.call(e,n)&&bI(t,n,e[n]);return t},l6=(t,e)=>{var n={};for(var r in t)LQ.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&$h)for(var r of $h(t))e.indexOf(r)<0&&MQ.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Vi;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let B=0;B<this.size;B++)f.push(!1);for(let B=0;B<this.size;B++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),h==-1){let B=1e9;for(let v=0;v<8;v++){this.applyMask(v),this.drawFormatBits(v);const _=this.getPenaltyScore();_<B&&(h=v,B=_),this.applyMask(v)}}s(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,m=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let B,v;for(B=d;;B++){const I=e.getNumDataCodewords(B,c)*8,F=o.getTotalBits(a,B);if(F<=I){v=F;break}if(B>=h)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])m&&v<=e.getNumDataCodewords(B,I)*8&&(c=I);let _=[];for(const I of a){r(I.mode.modeBits,4,_),r(I.numChars,I.mode.numCharCountBits(B),_);for(const F of I.getData())_.push(F)}s(_.length==v);const x=e.getNumDataCodewords(B,c)*8;s(_.length<=x),r(0,Math.min(4,x-_.length),_),r(0,(8-_.length%8)%8,_),s(_.length%8==0);for(let I=236;_.length<x;I^=253)r(I,8,_);let w=[];for(;w.length*8<_.length;)w.push(0);return _.forEach((I,F)=>w[F>>>3]|=I<<7-(F&7)),new e(B,c,w,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;s(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,A(h,f));this.setFunctionModule(8,7,A(h,6)),this.setFunctionModule(8,8,A(h,7)),this.setFunctionModule(7,8,A(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,A(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,A(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,A(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;s(c>>>18==0);for(let d=0;d<18;d++){const h=A(c,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,h),this.setFunctionModule(m,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),m=a+h,B=c+d;0<=m&&m<this.size&&0<=B&&B<this.size&&this.setFunctionModule(m,B,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],m=Math.floor(e.getNumRawDataModules(c)/8),B=h-m%h,v=Math.floor(m/h);let _=[];const x=e.reedSolomonComputeDivisor(f);for(let I=0,F=0;I<h;I++){let U=a.slice(F,F+v-f+(I<B?0:1));F+=U.length;const R=e.reedSolomonComputeRemainder(U,x);I<B&&U.push(0),_.push(U.concat(R))}let w=[];for(let I=0;I<_[0].length;I++)_.forEach((F,U)=>{(I!=v-f||U>=B)&&w.push(F[I])});return s(w.length==m),w}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const m=d-f,v=(d+1&2)==0?this.size-1-h:h;!this.isFunction[v][m]&&c<a.length*8&&(this.modules[v][m]=A(a[c>>>3],7-(c&7)),c++)}}s(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let m=!1,B=0,v=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==m?(B++,B==5?a+=e.PENALTY_N1:B>5&&a++):(this.finderPenaltyAddHistory(B,v),m||(a+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),m=this.modules[f][_],B=1);a+=this.finderPenaltyTerminateAndCount(m,B,v)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,B=0,v=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==m?(B++,B==5?a+=e.PENALTY_N1:B>5&&a++):(this.finderPenaltyAddHistory(B,v),m||(a+=this.finderPenaltyCountPatterns(v)*e.PENALTY_N3),m=this.modules[_][f],B=1);a+=this.finderPenaltyTerminateAndCount(m,B,v)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const B=this.modules[f][m];B==this.modules[f][m+1]&&B==this.modules[f+1][m]&&B==this.modules[f+1][m+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((m,B)=>m+(B?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return s(0<=h&&h<=9),a+=h*e.PENALTY_N4,s(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((m,B)=>d[B]^=e.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return s(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];s(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function r(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function A(a,c){return(a>>>c&1)!=0}function s(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)r(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);r(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),r(h,11,c)}return d<a.length&&r(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)r(a,8,c);else if(a<16384)r(2,2,c),r(a,14,c);else if(a<1e6)r(6,3,c),r(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let o=i;o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=o})(Vi||(Vi={}));(t=>{(e=>{const n=class{constructor(A,s){this.ordinal=A,this.formatBits=s}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(Vi||(Vi={}));(t=>{(e=>{const n=class{constructor(A,s){this.modeBits=A,this.numBitsCharCount=s}numCharCountBits(A){return this.numBitsCharCount[Math.floor((A+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Vi||(Vi={}));var _l=Vi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var c6={L:_l.QrCode.Ecc.LOW,M:_l.QrCode.Ecc.MEDIUM,Q:_l.QrCode.Ecc.QUARTILE,H:_l.QrCode.Ecc.HIGH},u6=128,d6="L",h6="#FFFFFF",f6="#000000",g6=!1,jQ=4,p6=.1;function m6(t,e=0){const n=[];return t.forEach(function(r,A){let s=null;r.forEach(function(i,o){if(!i&&s!==null){n.push(`M${s+e} ${A+e}h${o-s}v1H${s+e}z`),s=null;return}if(o===r.length-1){if(!i)return;s===null?n.push(`M${o+e},${A+e} h1v1H${o+e}z`):n.push(`M${s+e},${A+e} h${o+1-s}v1H${s+e}z`);return}i&&s===null&&(s=o)})}),n.join("")}function w6(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((A,s)=>s<e.x||s>=e.x+e.w?A:!1))}function B6(t,e,n,r){if(r==null)return null;const A=n?jQ:0,s=t.length+A*2,i=Math.floor(e*p6),o=s/e,a=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o;let f=null;if(r.excavate){let m=Math.floor(d),B=Math.floor(h),v=Math.ceil(a+d-m),_=Math.ceil(c+h-B);f={x:m,y:B,w:v,h:_}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function v6(t){const e=t,{value:n,size:r=u6,level:A=d6,bgColor:s=h6,fgColor:i=f6,includeMargin:o=g6,imageSettings:a}=e,c=l6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=_l.QrCode.encodeText(n,c6[A]).getModules();const h=o?jQ:0,f=d.length+h*2,m=B6(d,r,o,a);let B=null;a!=null&&m!=null&&(m.excavation!=null&&(d=w6(d,m.excavation)),B=is.createElement("image",{xlinkHref:a.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));const v=m6(d,h);return is.createElement("svg",a6({height:r,width:r,viewBox:`0 0 ${f} ${f}`},c),is.createElement("path",{fill:s,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),is.createElement("path",{fill:i,d:v,shapeRendering:"crispEdges"}),B)}const y6=()=>{const{subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,saveStaticData:i}=PA(),{schedule1:o,schedule2:a,substitutions:c,saveScheduleData:d}=Da(),h=k.useRef(null),f=k.useRef(null),m=k.useRef(null),[B,v]=k.useState(new Date().toISOString().split("T")[0]),[_,x]=k.useState(()=>{const pe=new Date().getMonth();return pe>=0&&pe<=4?2:1}),[w,I]=k.useState(!1),[F,U]=k.useState(!1),[R,y]=k.useState(""),[C,E]=k.useState(""),Q=k.useMemo(()=>({subjects:t,teachers:e,classes:n,rooms:r,settings:A,bellSchedule:s,schedule:o,schedule2ndHalf:a,substitutions:c}),[t,e,n,r,A,s,o,a,c]),N=()=>_===2?a:o,L=pe=>{const W=new Date(pe).getMonth();return W>=0&&W<=4?a:o},T=pe=>{var Ae;const W=(Ae=pe.target.files)==null?void 0:Ae[0];if(!W)return;const me=new FileReader;me.onload=async te=>{var ge;try{const Ie=JSON.parse((ge=te.target)==null?void 0:ge.result);if(Ie.teachers&&(Ie.schedule||Ie.schedule2ndHalf)){if(window.confirm("    . ?")){const be={...Gn,...Ie,rooms:Ie.rooms||Gn.rooms,classes:Ie.classes||[],schedule:Ie.schedule||[],schedule2ndHalf:Ie.schedule2ndHalf||[],teachers:Ie.teachers||[],subjects:Ie.subjects||[],substitutions:Ie.substitutions||[],settings:{...Gn.settings,...Ie.settings}};await i(be),await d(be),alert("  !")}}else alert("  .")}catch{alert("  .")}},me.readAsText(W)},Pe=()=>{const pe=N();let W=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;Rn.forEach(ge=>{W+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${ge}</td></tr>`,[ue.First,ue.Second].forEach(Ie=>{const be=n.filter(Ue=>Ue.shift===Ie);be.length!==0&&(W+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${Ie}</td></tr>`,W+='<tr><th class="header"></th>',zr[Ie].forEach(Ue=>W+=`<th class="header">${Ue} </th>`),W+="</tr>",be.forEach(Ue=>{W+=`<tr><td class="class-cell">${Ue.name}</td>`,zr[Ie].forEach(Ge=>{const Ye=pe.filter(qe=>qe.classId===Ue.id&&qe.day===ge&&qe.shift===Ie&&qe.period===Ge);W+='<td style="height: 60px;">',Ye.forEach(qe=>{const We=t.find(ze=>ze.id===qe.subjectId),Qe=e.find(ze=>ze.id===qe.teacherId),je=r.find(ze=>ze.id===qe.roomId),Xe=je?je.name:qe.roomId;W+=`<div style="background-color: ${(We==null?void 0:We.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(We==null?void 0:We.name)||""} ${qe.direction||""}</div>
                                <div class="meta">${(Qe==null?void 0:Qe.name)||""} ${Xe?`(. ${Xe})`:""}</div>
                            </div>`}),W+="</td>"}),W+="</tr>"}))})}),W+="</table></body></html>";const me=new Blob([W],{type:"application/vnd.ms-excel"}),Ae=URL.createObjectURL(me),te=document.createElement("a");te.href=Ae,te.download=`_22_${_}.xls`,document.body.appendChild(te),te.click(),document.body.removeChild(te)},Me=()=>{const pe=N();let W=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 12pt; margin-bottom: 20px; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; background-color: #f3f4f6; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
            </style></head><body>
        `;[ue.First,ue.Second].forEach(ge=>{const Ie=zr[ge];W+="<table>",W+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px;"></th>
                <th colspan="${Rn.length*Ie.length}" class="header" style="border: 2px solid #000; font-size: 14px;"> </th>
            </tr>`,W+="<tr>",Rn.forEach(be=>{W+=`<th colspan="${Ie.length}" class="header" style="border: 2px solid #000;">${be}</th>`}),W+="</tr>",W+="<tr>",Rn.forEach(()=>{Ie.forEach(be=>W+='<th class="header" style="border-bottom: 2px solid #000;"></th>')}),W+="</tr>",W+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: #e0e7ff;">${ge}</th>
                <th class="header" style="border: 2px solid #000;"></th>
            `,Rn.forEach(()=>{Ie.forEach(be=>W+=`<th class="header" style="width: 40px;">${be}</th>`)}),W+="</tr>",t.forEach(be=>{const Ue=e.filter(Ye=>Ye.subjectIds.includes(be.id));if(Ue.length===0)return;const Ge=be.color||"#ffffff";Ue.forEach((Ye,qe)=>{W+="<tr>",qe===0&&(W+=`<td rowspan="${Ue.length}" class="subject-cell" style="border: 2px solid #000; background-color: ${Ge};">${be.name}</td>`),W+=`<td class="teacher-cell" style="border-right: 2px solid #000;">${Ye.name}</td>`,Rn.forEach(We=>{Ie.forEach(Qe=>{const je=pe.find(Xe=>Xe.teacherId===Ye.id&&Xe.subjectId===be.id&&Xe.day===We&&Xe.period===Qe&&Xe.shift===ge);if(je){const Xe=n.find(Hn=>Hn.id===je.classId),ze=r.find(Hn=>Hn.id===je.roomId),$e=ze?ze.name:je.roomId,ke=$e?`<sub>${$e}</sub>`:"",it=je.direction?` <span style="font-size:10px">(${je.direction})</span>`:"",kt=be.color||"#ffffff";W+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${kt};">${Xe?Xe.name:""}${it}${ke}</td>`}else W+='<td style="border: 1px solid #000;"></td>'})}),W+="</tr>"}),W+=`<tr><td colspan="${2+Rn.length*Ie.length}" style="height: 2px; background-color: #000;"></td></tr>`}),W+="</table><br/><br/>"}),W+="</body></html>";const me=new Blob([W],{type:"application/vnd.ms-excel"}),Ae=URL.createObjectURL(me),te=document.createElement("a");te.href=Ae,te.download=`__${_}.xls`,document.body.appendChild(te),te.click(),document.body.removeChild(te)},et=()=>{const pe=new Date(B),W=pe.getMonth(),me=pe.getFullYear(),Ae=c.filter(Qe=>{const je=new Date(Qe.date);return je.getMonth()===W&&je.getFullYear()===me}).sort((Qe,je)=>new Date(Qe.date).getTime()-new Date(je.date).getTime());if(Ae.length===0){alert("      .");return}const te=[],ge=[],Ie=Qe=>{var it;const je=o.find(kt=>kt.id===Qe.scheduleItemId)||a.find(kt=>kt.id===Qe.scheduleItemId);if(!je)return null;const Xe=n.find(kt=>kt.id===je.classId),ze=t.find(kt=>kt.id===je.subjectId),$e=e.find(kt=>kt.id===Qe.originalTeacherId);let ke=Qe.lessonAbsenceReason||((it=$e==null?void 0:$e.absenceReasons)==null?void 0:it[Qe.date])||"";return Qe.replacementTeacherId===Qe.originalTeacherId&&Qe.replacementRoomId&&!Qe.replacementClassId&&(ke=" "),Qe.replacementClassId&&Qe.replacementSubjectId&&(ke=" "),{sub:Qe,scheduleItem:je,cls:Xe,subj:ze,origTeacher:$e,reason:ke}};Ae.forEach(Qe=>{const je=Ie(Qe);je&&(je.reason===" "?ge.push(je):te.push(je))});let be=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${pe.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const Ue=Qe=>Qe.map(je=>{const{sub:Xe,scheduleItem:ze,cls:$e,subj:ke,origTeacher:it,reason:kt}=je,Hn=new Date(Xe.date).toLocaleDateString("ru-RU");let On="";if(Xe.replacementTeacherId==="conducted")On=" ";else if(Xe.replacementTeacherId==="cancelled")On=" ";else{const we=e.find(ce=>ce.id===Xe.replacementTeacherId);if(On=we?we.name:"",Xe.isMerger&&(On+=" ()"),Xe.replacementClassId&&Xe.replacementSubjectId){const ce=n.find(se=>se.id===Xe.replacementClassId),Re=t.find(se=>se.id===Xe.replacementSubjectId);On+=` ( ${(ce==null?void 0:ce.name)||"?"} ${(Re==null?void 0:Re.name)||"?"})`}}const Jn=ze.roomId,D=Xe.replacementRoomId,V=D||Jn,q=r.find(we=>we.id===V),oe=q?q.name:V||"-",Te=D?`${oe} ( .)`:oe;return`
                    <tr>
                        <td>${Hn}</td>
                        <td>${ze.period}</td>
                        <td>${ze.shift}</td>
                        <td>${($e==null?void 0:$e.name)||"?"}</td>
                        <td>${(ke==null?void 0:ke.name)||"?"}</td>
                        <td>${(it==null?void 0:it.name)||"?"}</td>
                        <td>${On}</td>
                        <td>${Te}</td>
                        <td>${kt}</td>
                    </tr>
                `}).join(""),Ge=(Qe,je=!1)=>`
            <table>
            <thead>
                <tr class="${je?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${Ue(Qe)}
            </tbody>
            </table>
        `;te.length>0?be+=Ge(te):be+="<p>     .</p>",ge.length>0&&(be+="<br/><br/>",be+='<h3 style="color: #b91c1c;">   (  )</h3>',be+=Ge(ge,!0)),be+="</body></html>";const Ye=new Blob([be],{type:"application/vnd.ms-excel"}),qe=URL.createObjectURL(Ye),We=document.createElement("a");We.href=qe,We.download=`__${pe.getMonth()+1}_${pe.getFullYear()}.xls`,document.body.appendChild(We),We.click(),document.body.removeChild(We)},Ne=()=>{const pe=new Date(B),W=pe.getMonth(),me=pe.getFullYear(),Ae=c.filter(Ue=>{const Ge=new Date(Ue.date),Ye=Ge.getMonth()===W&&Ge.getFullYear()===me,qe=Ue.refusals&&Ue.refusals.length>0;return Ye&&qe}).sort((Ue,Ge)=>new Date(Ue.date).getTime()-new Date(Ge.date).getTime());if(Ae.length===0){alert("      .");return}let te=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${pe.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;Ae.forEach(Ue=>{const Ge=o.find(ze=>ze.id===Ue.scheduleItemId)||a.find(ze=>ze.id===Ue.scheduleItemId);if(!Ge)return;const Ye=new Date(Ue.date).toLocaleDateString("ru-RU"),qe=n.find(ze=>ze.id===Ge.classId),We=t.find(ze=>ze.id===Ge.subjectId),Qe=e.find(ze=>ze.id===Ue.originalTeacherId);let je="";if(Ue.replacementTeacherId==="conducted")je=" ";else if(Ue.replacementTeacherId==="cancelled")je=" ";else{const ze=e.find($e=>$e.id===Ue.replacementTeacherId);je=ze?ze.name:""}const Xe=(Ue.refusals||[]).map(ze=>{const $e=e.find(ke=>ke.id===ze);return $e?$e.name:""}).join(", ");te+=`
                <tr>
                    <td>${Ye}</td>
                    <td>${Ge.period}</td>
                    <td>${Ge.shift}</td>
                    <td>${(qe==null?void 0:qe.name)||"?"}</td>
                    <td>${(We==null?void 0:We.name)||"?"}</td>
                    <td>${(Qe==null?void 0:Qe.name)||"?"}</td>
                    <td>${je}</td>
                    <td>${Xe}</td>
                </tr>
            `}),te+="</tbody></table></body></html>";const ge=new Blob([te],{type:"application/vnd.ms-excel"}),Ie=URL.createObjectURL(ge),be=document.createElement("a");be.href=Ie,be.download=`__${pe.getMonth()+1}_${pe.getFullYear()}.xls`,document.body.appendChild(be),be.click(),document.body.removeChild(be)},ee=()=>{const pe=N();let W=`							
`;Rn.forEach(me=>{[ue.First,ue.Second].forEach(Ae=>{n.filter(ge=>ge.shift===Ae).forEach(ge=>{zr[Ae].forEach(Ie=>{pe.filter(Ue=>Ue.classId===ge.id&&Ue.day===me&&Ue.shift===Ae&&Ue.period===Ie).forEach(Ue=>{const Ge=t.find(Qe=>Qe.id===Ue.subjectId),Ye=e.find(Qe=>Qe.id===Ue.teacherId),qe=r.find(Qe=>Qe.id===Ue.roomId),We=qe?qe.name:Ue.roomId||"";W+=`${me}	${Ae}	${ge.name}	${Ie}	${(Ge==null?void 0:Ge.name)||""}	${(Ye==null?void 0:Ye.name)||""}	${We}	${Ue.direction||""}
`})})})})}),navigator.clipboard.writeText(W).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},S=async()=>{I(!0);try{if(!f.current){alert("   1- .");return}const pe=await _I(f.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),W=document.createElement("a");W.href=pe.toDataURL("image/png"),W.download=`_${B}_1.png`,document.body.appendChild(W),W.click(),document.body.removeChild(W)}catch(pe){console.error(pe),alert("   ")}finally{I(!1)}},O=async()=>{I(!0);try{if(!m.current){alert("   2- .");return}const pe=await _I(m.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),W=document.createElement("a");W.href=pe.toDataURL("image/png"),W.download=`_${B}_2.png`,document.body.appendChild(W),W.click(),document.body.removeChild(W)}catch(pe){console.error(pe),alert("   ")}finally{I(!1)}},G=k.useMemo(()=>c.filter(pe=>pe.date===B),[c,B]),Y=k.useMemo(()=>{const pe=L(B);return G.filter(W=>{const me=pe.find(Ae=>Ae.id===W.scheduleItemId);return me&&me.shift===ue.First}).filter(W=>W.replacementTeacherId!=="conducted").length>0},[G,L,B]),ne=k.useMemo(()=>{const pe=L(B);return G.filter(W=>{const me=pe.find(Ae=>Ae.id===W.scheduleItemId);return me&&me.shift===ue.Second}).filter(W=>W.replacementTeacherId!=="conducted").length>0},[G,L,B]),Le=pe=>{const W=L(B),me=G.filter(Ae=>{const te=W.find(ge=>ge.id===Ae.scheduleItemId);return te&&te.shift===pe}).filter(Ae=>Ae.replacementTeacherId!=="conducted");return me.length===0?null:l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:pe}),l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-slate-200",children:[l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),l.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:me.map(Ae=>{var Jn;const te=W.find(D=>D.id===Ae.scheduleItemId);if(!te)return null;const ge=n.find(D=>D.id===te.classId),Ie=t.find(D=>D.id===te.subjectId),be=e.find(D=>D.id===Ae.originalTeacherId),Ue=Ae.replacementRoomId,Ge=te.roomId?r.find(D=>D.id===te.roomId):null,Ye=Ge?Ge.name:te.roomId||"",qe=Ue?r.find(D=>D.id===Ue):null,We=qe?qe.name:Ue||"",Qe=Ae.replacementTeacherId==="cancelled",je=Qe?{name:" "}:e.find(D=>D.id===Ae.replacementTeacherId),Xe=(Jn=be==null?void 0:be.absenceReasons)==null?void 0:Jn[B],ze=Ae.lessonAbsenceReason,$e=ze===" "?ze:Xe===" "?Xe:"",ke=Ae.replacementClassId?n.find(D=>D.id===Ae.replacementClassId):null,it=Ae.replacementSubjectId?t.find(D=>D.id===Ae.replacementSubjectId):null,kt=Ae.replacementTeacherId===Ae.originalTeacherId&&Ue&&!ke,Hn=ke&&it,On=Ae.replacementTeacherId===Ae.originalTeacherId;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:te.period}),l.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:ge==null?void 0:ge.name}),l.jsxs("td",{className:"py-3 px-2",children:[l.jsx("div",{className:"font-semibold text-slate-800",children:Ie==null?void 0:Ie.name}),te.direction&&l.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:te.direction})]}),l.jsx("td",{className:"py-3 px-2",children:!On&&!kt&&!Hn&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[be==null?void 0:be.name,l.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),$e&&l.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:$e})]})}),l.jsx("td",{className:`py-3 px-2 font-bold text-sm ${Qe?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:kt?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:be==null?void 0:be.name}),l.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):Hn?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-slate-800",children:be==null?void 0:be.name}),l.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",ke==null?void 0:ke.name]})]}):l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{children:je==null?void 0:je.name}),Ae.isMerger&&l.jsx("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:""})]})}),l.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${Ue?"text-indigo-600":"text-slate-700"}`,children:Ue&&Ue!==te.roomId?l.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[l.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:Ye}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),l.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:We})]}):l.jsx("span",{className:"text-xl",children:Ye})})]},Ae.id)})})]})]})},Ee=async()=>{const pe=Math.random().toString(36).substr(2,9);await zn.setPublicData(pe,Q),await i({settings:{...A,publicScheduleId:pe}});const W=`${window.location.origin}${window.location.pathname}#/public?id=${pe}`;y(W),E(pe),U(!0)},Ve=async()=>{!A.publicScheduleId||!window.confirm(" ,     ?      .")||(await zn.deletePublicData(A.publicScheduleId),await i({settings:{...A,publicScheduleId:null}}),alert("  ."),y(""),E(""))},ve=()=>l.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),l.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),l.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(B).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),wt=()=>l.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[l.jsx("div",{children:" "}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx("div",{className:"h-px w-32 bg-slate-300"}),l.jsx("div",{children:" "})]})]});return l.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs("button",{onClick:()=>zn.exportJson(Q),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Download",size:20}),"  JSON"]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"file",ref:h,onChange:T,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var pe;return(pe=h.current)==null?void 0:pe.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[l.jsx($,{name:"Upload",size:20}),"  JSON"]})]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[l.jsx($,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsx("input",{type:"date",value:B,onChange:pe=>v(pe.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),l.jsx("button",{onClick:S,disabled:w||!Y,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:w?l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Download",size:20})," 1- "]})}),l.jsx("button",{onClick:O,disabled:w||!ne,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:w?l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Download",size:20})," 2- "]})})]})]}),l.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:G.length===0?l.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(ve,{}),l.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:l.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),l.jsx(wt,{})]}):l.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[Y&&l.jsxs("div",{ref:f,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(ve,{}),Le(ue.First),l.jsx(wt,{})]}),ne&&l.jsxs("div",{ref:m,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[l.jsx(ve,{}),Le(ue.Second),l.jsx(wt,{})]})]})})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:_,onChange:pe=>x(Number(pe.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:Pe,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),l.jsxs("button",{onClick:Me,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Table",size:20}),"   (XLS)"]}),l.jsxs("button",{onClick:ee,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[l.jsx($,{name:"Clipboard",size:20}),"   Google Sheets"]}),l.jsxs("button",{onClick:et,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"List",size:20}),"    (XLS)"]}),l.jsxs("button",{onClick:Ne,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"UserX",size:20}),"    (XLS)"]})]})]}),l.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[l.jsx($,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),A.publicScheduleId?l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",l.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:A.publicScheduleId})]}),l.jsxs("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[l.jsx($,{name:"Share2",size:16}),"  QR-  "]}),l.jsxs("button",{onClick:Ve,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Trash2",size:16}),"  "]})]})}):l.jsxs("button",{onClick:Ee,disabled:w,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[l.jsx($,{name:"Share2",size:20}),"  "]})]}),l.jsx(wA,{isOpen:F,onClose:()=>U(!1),title:" ",children:l.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),R&&l.jsxs(l.Fragment,{children:[l.jsx(v6,{value:R,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),l.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:R}),l.jsxs("button",{onClick:()=>navigator.clipboard.writeText(R),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[l.jsx($,{name:"Copy",size:16}),"  "]})]})]})})]})},x6=()=>{var x;const{subjects:t,teachers:e,classes:n}=PA(),{schedule1:r,schedule2:A,substitutions:s}=Da(),[i,o]=k.useState("load"),[a,c]=k.useState(((x=n[0])==null?void 0:x.id)||""),[d,h]=k.useState(()=>{const w=new Date().getMonth();return w>=0&&w<=4?2:1}),f=k.useMemo(()=>d===2?A:r,[d,r,A]),m=k.useMemo(()=>e.map(I=>{const F=f.filter(N=>N.teacherId===I.id),U=F.length,R=U*4,y=s.filter(N=>N.replacementTeacherId===I.id).length,C=s.filter(N=>N.originalTeacherId===I.id).length,E=R+y-C,Q={};return F.forEach(N=>{const L=t.find(T=>T.id===N.subjectId);L&&(Q[L.name]=(Q[L.name]||0)+1)}),{id:I.id,name:I.name,weeklyHours:U,subsTaken:y,subsMissed:C,actualHours:E,subjectBreakdown:Q}}).sort((I,F)=>F.actualHours-I.actualHours),[e,f,s,t]),B=k.useMemo(()=>a?Rn.map(w=>{const F=f.filter(U=>U.classId===a&&U.day===w).reduce((U,R)=>{const y=t.find(C=>C.id===R.subjectId);return U+((y==null?void 0:y.difficulty)||5)},0);return{label:w,value:F}}):[],[f,t,a]),v=k.useMemo(()=>{const w=e.map(F=>({name:F.name,count:s.filter(U=>U.replacementTeacherId===F.id).length})).sort((F,U)=>U.count-F.count).slice(0,5),I=e.map(F=>({name:F.name,count:F.unavailableDates.length})).sort((F,U)=>U.count-F.count).slice(0,5);return{heroes:w,absentees:I}},[e,s]),_=()=>{let w="";i==="load"?w=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+m.map(U=>`"${U.name}",${U.weeklyHours},${U.subsTaken},${U.subsMissed},${U.actualHours},"${Object.entries(U.subjectBreakdown).map(([R,y])=>R+": "+y).join(", ")}"`).join(`
`):i==="sanpin"&&(w=`Day,Score
`+B.map(U=>`${U.label},${U.value}`).join(`
`));const I=new Blob([`\uFEFF${w}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(I),F.download=`report_${i}_${d}sem.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F)};return l.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[l.jsx($,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[l.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),l.jsxs("select",{value:d,onChange:w=>h(Number(w.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[l.jsx("option",{value:1,children:"1- (-)"}),l.jsx("option",{value:2,children:"2- (-)"})]})]}),l.jsxs("button",{onClick:_,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[l.jsx($,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[l.jsx("button",{onClick:()=>o("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>o("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),l.jsx("button",{onClick:()=>o("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&l.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),l.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:m.map(w=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:w.name}),l.jsx("td",{className:"p-4 text-right font-mono",children:w.weeklyHours}),l.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",w.subsTaken]}),l.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",w.subsMissed]}),l.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:w.actualHours}),l.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:l.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.subjectBreakdown).map(([I,F])=>l.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[I,": ",F]},I))})})]},w.id))})]})}),i==="sanpin"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),l.jsx("select",{value:a,onChange:w=>c(w.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:n.map(w=>l.jsx("option",{value:w.id,children:w.name},w.id))})]}),l.jsx(Yg,{items:B,max:60,barClassName:"bg-indigo-500"}),l.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),l.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[l.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),l.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),l.jsxs("li",{className:"flex gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"TrendingUp",size:20}),"   ( 5)"]}),l.jsx(Yg,{items:v.heroes.map(w=>({label:w.name,value:w.count})),max:Math.max(...v.heroes.map(w=>w.count),1),barClassName:"bg-emerald-500"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[l.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[l.jsx($,{name:"Activity",size:20}),"  ( 5)"]}),l.jsx(Yg,{items:v.absentees.map(w=>({label:w.name,value:w.count})),max:Math.max(...v.absentees.map(w=>w.count),1),barClassName:"bg-red-500"})]})]})]})},C6=()=>{const{setGuestRole:t,role:e,loading:n}=Na(),r=Nc(),[A,s]=k.useState("select"),[i,o]=k.useState(""),[a,c]=k.useState(""),[d,h]=k.useState(""),[f,m]=k.useState(!1);k.useEffect(()=>{!n&&e&&(e==="admin"||e==="teacher")&&r("/dashboard")},[e,n,r]);const B=async _=>{if(_.preventDefault(),h(""),m(!0),!cr){h("Firebase .  ."),m(!1);return}try{let x=i;A==="teacher"&&(x="teacher@gymnasium22.com"),await YM(cr,x,a)}catch(x){console.error("Firebase Auth Error:",x);const w=x==null?void 0:x.code;let I="   .";switch(w){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":I="   .";break;case"auth/invalid-email":I="  email.";break;case"auth/too-many-requests":I="  . .";break;default:I=" .  ."}h(I)}finally{m(!1)}},v=()=>{t(),r("/schedule")};return l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl shadow-xl max-w-md w-full p-8 transition-all",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex p-4 bg-indigo-100 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-4",children:l.jsx($,{name:"GraduationCap",size:48})}),l.jsx("h1",{className:"text-2xl font-black text-slate-800 dark:text-white",children:" Pro22"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"  "})]}),A==="select"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:v,className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-emerald-500 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"Users",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-emerald-700 dark:group-hover:text-emerald-400",children:" / "}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "})]})]}),l.jsxs("button",{onClick:()=>s("teacher"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-indigo-500 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-lg text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"BookOpen",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-700 dark:group-hover:text-indigo-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),l.jsxs("button",{onClick:()=>s("admin"),className:"w-full p-4 rounded-xl border-2 border-slate-100 dark:border-slate-700 hover:border-purple-500 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 group transition-all text-left flex items-center gap-4",children:[l.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-lg text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:l.jsx($,{name:"Settings",size:24})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800 dark:text-white group-hover:text-purple-700 dark:group-hover:text-purple-400",children:""}),l.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:" "})]})]})]}),A!=="select"&&l.jsxs("form",{onSubmit:B,className:"space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>{s("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx($,{name:"ArrowRight",className:"rotate-180",size:20})}),l.jsx("h2",{className:"font-bold text-lg dark:text-white",children:A==="teacher"?"  ":"  "})]}),A==="admin"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:_=>o(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",autoFocus:!0,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-1",children:""}),l.jsx("input",{type:"password",value:a,onChange:_=>c(_.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500",required:!0})]}),d&&l.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-2 rounded-lg",children:d}),l.jsxs("button",{type:"submit",disabled:f||n,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center justify-center gap-2 disabled:opacity-50",children:[(f||n)&&l.jsx($,{name:"Loader",className:"animate-spin",size:20}),""]})]})]})})},oi=({children:t,allowedRoles:e})=>{const{user:n,role:r,loading:A}=Na();return A?l.jsx("div",{className:"h-screen flex items-center justify-center",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):r?e&&!e.includes(r)?l.jsx(fh,{to:r==="guest"?"/schedule":"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:t}):l.jsx(fh,{to:"/login",replace:!0})},I6=()=>{const{role:t,loading:e}=Na();return e?null:t==="guest"?l.jsx(fh,{to:"/schedule",replace:!0}):l.jsx(fh,{to:"/dashboard",replace:!0})},E6=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(localStorage.getItem("theme")||"light"),{isLoading:A}=PA(),{logout:s,role:i,user:o}=Na();if(k.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),A)return l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const c=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher"]},{to:"/schedule",label:" 1 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 ",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(d=>d.roles.includes(i||""));return l.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300",children:[t&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-dark-800 border-r border-slate-200 dark:border-slate-700 transform transition-all duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700",children:[l.jsx("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white",children:l.jsx($,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" 22"}),l.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V1.0"})]})]}),l.jsx("div",{className:"px-6 pt-4",children:l.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""})}),l.jsx("nav",{className:"flex-1 p-4 space-y-1 pt-0",children:c.map(d=>l.jsxs(M2,{to:d.to,onClick:()=>e(!1),className:({isActive:h})=>`flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold transition-all ${h?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[l.jsx($,{name:d.icon,size:20}),d.label]},d.to))}),l.jsx(_H,{}),l.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate max-w-[120px]",children:o&&o.email||""}),l.jsx("button",{onClick:s,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:l.jsx($,{name:"LogOut",size:16})})]}),l.jsx("button",{onClick:()=>r(n==="light"?"dark":"light"),className:"flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 w-full hover:text-indigo-600 transition-colors",children:n==="light"?l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Moon",size:16}),"  "]}):l.jsxs(l.Fragment,{children:[l.jsx($,{name:"Sun",size:16}),"  "]})})]})]})}),l.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/50 dark:bg-dark-950",children:[l.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 no-print",children:[l.jsx("button",{onClick:()=>e(!0),children:l.jsx($,{name:"Menu",size:24})}),l.jsx("span",{className:"font-bold",children:""})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:l.jsx(I2,{})})]})]})},_6=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!0),[A]=O2(),s=A.get("id");return k.useEffect(()=>{s?(r(!0),zn.getPublicData(s).then(i=>{const o={...Gn,...i,settings:{...Gn.settings,...i==null?void 0:i.settings}};e(o),r(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),r(!1)})):(r(!1),e(null))},[s]),n?l.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:l.jsx($,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?l.jsx(_F,{initialData:t,children:l.jsx(FF,{children:l.jsx(QF,{children:l.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[l.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:l.jsx($,{name:"GraduationCap",size:24})}),l.jsxs("div",{children:[l.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),l.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),l.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:l.jsx(RF,{readOnly:!0})})]})})})}):l.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[l.jsx($,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"      ."})]})};function b6(){return l.jsx(CH,{children:l.jsx(_F,{children:l.jsx(FF,{children:l.jsx(QF,{children:l.jsx(N2,{children:l.jsxs(_2,{children:[l.jsx(or,{path:"/login",element:l.jsx(C6,{})}),l.jsxs(or,{path:"/",element:l.jsx(oi,{children:l.jsx(E6,{})}),children:[l.jsx(or,{index:!0,element:l.jsx(I6,{})}),l.jsx(or,{path:"dashboard",element:l.jsx(oi,{allowedRoles:["admin","teacher"],children:l.jsx(bH,{})})}),l.jsx(or,{path:"schedule",element:l.jsx(TI,{semester:1})}),l.jsx(or,{path:"schedule2",element:l.jsx(TI,{semester:2})}),l.jsx(or,{path:"substitutions",element:l.jsx(oi,{allowedRoles:["admin"],children:l.jsx(NH,{})})}),l.jsx(or,{path:"directory",element:l.jsx(oi,{allowedRoles:["admin"],children:l.jsx(RH,{})})}),l.jsx(or,{path:"admin",element:l.jsx(oi,{allowedRoles:["admin"],children:l.jsx(DH,{})})}),l.jsx(or,{path:"reports",element:l.jsx(oi,{allowedRoles:["admin"],children:l.jsx(x6,{})})}),l.jsx(or,{path:"export",element:l.jsx(oi,{allowedRoles:["admin"],children:l.jsx(y6,{})})})]}),l.jsx(or,{path:"/public",element:l.jsx(_6,{})})]})})})})})})}const TI=({semester:t=1})=>{const{role:e}=Na();return l.jsx(RF,{readOnly:e!=="admin",semester:t})};vp.createRoot(document.getElementById("root")).render(l.jsx(is.StrictMode,{children:l.jsx(b6,{})}));
