function C2(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const A=Object.getOwnPropertyDescriptor(n,s);A&&Object.defineProperty(t,s,A.get?A:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const A of s)if(A.type==="childList")for(const i of A.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const A={};return s.integrity&&(A.integrity=s.integrity),s.referrerPolicy&&(A.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?A.credentials="include":s.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function n(s){if(s.ep)return;s.ep=!0;const A=r(s);fetch(s.href,A)}})();function VC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KC={exports:{}},pf={},GC={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jc=Symbol.for("react.element"),I2=Symbol.for("react.portal"),_2=Symbol.for("react.fragment"),E2=Symbol.for("react.strict_mode"),T2=Symbol.for("react.profiler"),k2=Symbol.for("react.provider"),F2=Symbol.for("react.context"),S2=Symbol.for("react.forward_ref"),U2=Symbol.for("react.suspense"),Q2=Symbol.for("react.memo"),N2=Symbol.for("react.lazy"),Uy=Symbol.iterator;function R2(t){return t===null||typeof t!="object"?null:(t=Uy&&t[Uy]||t["@@iterator"],typeof t=="function"?t:null)}var zC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$C=Object.assign,WC={};function Ua(t,e,r){this.props=t,this.context=e,this.refs=WC,this.updater=r||zC}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qC(){}qC.prototype=Ua.prototype;function R0(t,e,r){this.props=t,this.context=e,this.refs=WC,this.updater=r||zC}var D0=R0.prototype=new qC;D0.constructor=R0;$C(D0,Ua.prototype);D0.isPureReactComponent=!0;var Qy=Array.isArray,XC=Object.prototype.hasOwnProperty,P0={current:null},JC={key:!0,ref:!0,__self:!0,__source:!0};function YC(t,e,r){var n,s={},A=null,i=null;if(e!=null)for(n in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(A=""+e.key),e)XC.call(e,n)&&!JC.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Jc,type:t,key:A,ref:i,props:s,_owner:P0.current}}function D2(t,e){return{$$typeof:Jc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function j0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jc}function P2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ny=/\/+/g;function Fg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P2(""+t.key):e.toString(36)}function Ud(t,e,r,n,s){var A=typeof t;(A==="undefined"||A==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(A){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Jc:case I2:i=!0}}if(i)return i=t,s=s(i),t=n===""?"."+Fg(i,0):n,Qy(s)?(r="",t!=null&&(r=t.replace(Ny,"$&/")+"/"),Ud(s,e,r,"",function(c){return c})):s!=null&&(j0(s)&&(s=D2(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ny,"$&/")+"/")+t)),e.push(s)),1;if(i=0,n=n===""?".":n+":",Qy(t))for(var l=0;l<t.length;l++){A=t[l];var a=n+Fg(A,l);i+=Ud(A,e,r,a,s)}else if(a=R2(t),typeof a=="function")for(t=a.call(t),l=0;!(A=t.next()).done;)A=A.value,a=n+Fg(A,l++),i+=Ud(A,e,r,a,s);else if(A==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Du(t,e,r){if(t==null)return t;var n=[],s=0;return Ud(t,n,"","",function(A){return e.call(r,A,s++)}),n}function j2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},Qd={transition:null},L2={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Qd,ReactCurrentOwner:P0};function ZC(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:Du,forEach:function(t,e,r){Du(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Du(t,function(){e++}),e},toArray:function(t){return Du(t,function(e){return e})||[]},only:function(t){if(!j0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=Ua;ft.Fragment=_2;ft.Profiler=T2;ft.PureComponent=R0;ft.StrictMode=E2;ft.Suspense=U2;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L2;ft.act=ZC;ft.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=$C({},t.props),s=t.key,A=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(A=e.ref,i=P0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)XC.call(e,a)&&!JC.hasOwnProperty(a)&&(n[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Jc,type:t.type,key:s,ref:A,props:n,_owner:i}};ft.createContext=function(t){return t={$$typeof:F2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:k2,_context:t},t.Consumer=t};ft.createElement=YC;ft.createFactory=function(t){var e=YC.bind(null,t);return e.type=t,e};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:S2,render:t}};ft.isValidElement=j0;ft.lazy=function(t){return{$$typeof:N2,_payload:{_status:-1,_result:t},_init:j2}};ft.memo=function(t,e){return{$$typeof:Q2,type:t,compare:e===void 0?null:e}};ft.startTransition=function(t){var e=Qd.transition;Qd.transition={};try{t()}finally{Qd.transition=e}};ft.unstable_act=ZC;ft.useCallback=function(t,e){return nn.current.useCallback(t,e)};ft.useContext=function(t){return nn.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};ft.useEffect=function(t,e){return nn.current.useEffect(t,e)};ft.useId=function(){return nn.current.useId()};ft.useImperativeHandle=function(t,e,r){return nn.current.useImperativeHandle(t,e,r)};ft.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};ft.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};ft.useMemo=function(t,e){return nn.current.useMemo(t,e)};ft.useReducer=function(t,e,r){return nn.current.useReducer(t,e,r)};ft.useRef=function(t){return nn.current.useRef(t)};ft.useState=function(t){return nn.current.useState(t)};ft.useSyncExternalStore=function(t,e,r){return nn.current.useSyncExternalStore(t,e,r)};ft.useTransition=function(){return nn.current.useTransition()};ft.version="18.3.1";GC.exports=ft;var T=GC.exports;const Cs=VC(T),M2=C2({__proto__:null,default:Cs},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O2=T,H2=Symbol.for("react.element"),V2=Symbol.for("react.fragment"),K2=Object.prototype.hasOwnProperty,G2=O2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z2={key:!0,ref:!0,__self:!0,__source:!0};function eI(t,e,r){var n,s={},A=null,i=null;r!==void 0&&(A=""+r),e.key!==void 0&&(A=""+e.key),e.ref!==void 0&&(i=e.ref);for(n in e)K2.call(e,n)&&!z2.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:H2,type:t,key:A,ref:i,props:s,_owner:G2.current}}pf.Fragment=V2;pf.jsx=eI;pf.jsxs=eI;KC.exports=pf;var o=KC.exports,jp={},tI={exports:{}},En={},rI={exports:{}},nI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ce,Te){var Pe=ce.length;ce.push(Te);e:for(;0<Pe;){var Ze=Pe-1>>>1,Ge=ce[Ze];if(0<s(Ge,Te))ce[Ze]=Te,ce[Pe]=Ge,Pe=Ze;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var Te=ce[0],Pe=ce.pop();if(Pe!==Te){ce[0]=Pe;e:for(var Ze=0,Ge=ce.length,$=Ge>>>1;Ze<$;){var he=2*(Ze+1)-1,W=ce[he],pe=he+1,Ie=ce[pe];if(0>s(W,Pe))pe<Ge&&0>s(Ie,W)?(ce[Ze]=Ie,ce[pe]=Pe,Ze=pe):(ce[Ze]=W,ce[he]=Pe,Ze=he);else if(pe<Ge&&0>s(Ie,Pe))ce[Ze]=Ie,ce[pe]=Pe,Ze=pe;else break e}}return Te}function s(ce,Te){var Pe=ce.sortIndex-Te.sortIndex;return Pe!==0?Pe:ce.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var A=performance;t.unstable_now=function(){return A.now()}}else{var i=Date,l=i.now();t.unstable_now=function(){return i.now()-l}}var a=[],c=[],d=1,h=null,f=3,p=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ce){for(var Te=r(c);Te!==null;){if(Te.callback===null)n(c);else if(Te.startTime<=ce)n(c),Te.sortIndex=Te.expirationTime,e(a,Te);else break;Te=r(c)}}function F(ce){if(x=!1,I(ce),!v)if(r(a)!==null)v=!0,st(U);else{var Te=r(c);Te!==null&&Le(F,Te.startTime-ce)}}function U(ce,Te){v=!1,x&&(x=!1,b(B),B=-1),p=!0;var Pe=f;try{for(I(Te),h=r(a);h!==null&&(!(h.expirationTime>Te)||ce&&!N());){var Ze=h.callback;if(typeof Ze=="function"){h.callback=null,f=h.priorityLevel;var Ge=Ze(h.expirationTime<=Te);Te=t.unstable_now(),typeof Ge=="function"?h.callback=Ge:h===r(a)&&n(a),I(Te)}else n(a);h=r(a)}if(h!==null)var $=!0;else{var he=r(c);he!==null&&Le(F,he.startTime-Te),$=!1}return $}finally{h=null,f=Pe,p=!1}}var R=!1,y=null,B=-1,C=5,S=-1;function N(){return!(t.unstable_now()-S<C)}function P(){if(y!==null){var ce=t.unstable_now();S=ce;var Te=!0;try{Te=y(!0,ce)}finally{Te?E():(R=!1,y=null)}}else R=!1}var E;if(typeof w=="function")E=function(){w(P)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,We=Ke.port2;Ke.port1.onmessage=P,E=function(){We.postMessage(null)}}else E=function(){_(P,0)};function st(ce){y=ce,R||(R=!0,E())}function Le(ce,Te){B=_(function(){ce(t.unstable_now())},Te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,st(U))},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(a)},t.unstable_next=function(ce){switch(f){case 1:case 2:case 3:var Te=3;break;default:Te=f}var Pe=f;f=Te;try{return ce()}finally{f=Pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ce,Te){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Pe=f;f=ce;try{return Te()}finally{f=Pe}},t.unstable_scheduleCallback=function(ce,Te,Pe){var Ze=t.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?Ze+Pe:Ze):Pe=Ze,ce){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Pe+Ge,ce={id:d++,callback:Te,priorityLevel:ce,startTime:Pe,expirationTime:Ge,sortIndex:-1},Pe>Ze?(ce.sortIndex=Pe,e(c,ce),r(a)===null&&ce===r(c)&&(x?(b(B),B=-1):x=!0,Le(F,Pe-Ze))):(ce.sortIndex=Ge,e(a,ce),v||p||(v=!0,st(U))),ce},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(ce){var Te=f;return function(){var Pe=f;f=Te;try{return ce.apply(this,arguments)}finally{f=Pe}}}})(nI);rI.exports=nI;var $2=rI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2=T,Cn=$2;function we(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sI=new Set,fc={};function Ao(t,e){ia(t,e),ia(t+"Capture",e)}function ia(t,e){for(fc[t]=e,t=0;t<e.length;t++)sI.add(e[t])}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lp=Object.prototype.hasOwnProperty,q2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ry={},Dy={};function X2(t){return Lp.call(Dy,t)?!0:Lp.call(Ry,t)?!1:q2.test(t)?Dy[t]=!0:(Ry[t]=!0,!1)}function J2(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y2(t,e,r,n){if(e===null||typeof e>"u"||J2(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,r,n,s,A,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=A,this.removeEmptyString=i}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jr[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jr[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jr[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jr[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jr[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jr[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jr[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jr[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jr[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var L0=/[\-:]([a-z])/g;function M0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(L0,M0);jr[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(L0,M0);jr[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(L0,M0);jr[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jr[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});jr.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jr[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function O0(t,e,r,n){var s=jr.hasOwnProperty(e)?jr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y2(e,r,s,n)&&(r=null),n||s===null?X2(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Vs=W2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pu=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),H0=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),AI=Symbol.for("react.provider"),iI=Symbol.for("react.context"),V0=Symbol.for("react.forward_ref"),Op=Symbol.for("react.suspense"),Hp=Symbol.for("react.suspense_list"),K0=Symbol.for("react.memo"),aA=Symbol.for("react.lazy"),oI=Symbol.for("react.offscreen"),Py=Symbol.iterator;function ol(t){return t===null||typeof t!="object"?null:(t=Py&&t[Py]||t["@@iterator"],typeof t=="function"?t:null)}var rr=Object.assign,Sg;function Tl(t){if(Sg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Sg=e&&e[1]||""}return`
`+Sg+t}var Ug=!1;function Qg(t,e){if(!t||Ug)return"";Ug=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),A=n.stack.split(`
`),i=s.length-1,l=A.length-1;1<=i&&0<=l&&s[i]!==A[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==A[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==A[l]){var a=`
`+s[i].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=i&&0<=l);break}}}finally{Ug=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Tl(t):""}function Z2(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=Qg(t.type,!1),t;case 11:return t=Qg(t.type.render,!1),t;case 1:return t=Qg(t.type,!0),t;default:return""}}function Vp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Qo:return"Portal";case Mp:return"Profiler";case H0:return"StrictMode";case Op:return"Suspense";case Hp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iI:return(t.displayName||"Context")+".Consumer";case AI:return(t._context.displayName||"Context")+".Provider";case V0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case K0:return e=t.displayName||null,e!==null?e:Vp(t.type)||"Memo";case aA:e=t._payload,t=t._init;try{return Vp(t(e))}catch{}}return null}function eS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vp(e);case 8:return e===H0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function KA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tS(t){var e=aI(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,A=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,A.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ju(t){t._valueTracker||(t._valueTracker=tS(t))}function lI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=aI(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ah(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kp(t,e){var r=e.checked;return rr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function jy(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=KA(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cI(t,e){e=e.checked,e!=null&&O0(t,"checked",e,!1)}function Gp(t,e){cI(t,e);var r=KA(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zp(t,e.type,r):e.hasOwnProperty("defaultValue")&&zp(t,e.type,KA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ly(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zp(t,e,r){(e!=="number"||ah(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var kl=Array.isArray;function Wo(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+KA(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $p(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(we(91));return rr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function My(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(we(92));if(kl(r)){if(1<r.length)throw Error(we(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:KA(r)}}function uI(t,e){var r=KA(e.value),n=KA(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Oy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lu,hI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lu=Lu||document.createElement("div"),Lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var zl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rS=["Webkit","ms","Moz","O"];Object.keys(zl).forEach(function(t){rS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zl[e]=zl[t]})});function fI(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||zl.hasOwnProperty(t)&&zl[t]?(""+e).trim():e+"px"}function gI(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=fI(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var nS=rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qp(t,e){if(e){if(nS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(we(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(we(61))}if(e.style!=null&&typeof e.style!="object")throw Error(we(62))}}function Xp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jp=null;function G0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yp=null,qo=null,Xo=null;function Hy(t){if(t=eu(t)){if(typeof Yp!="function")throw Error(we(280));var e=t.stateNode;e&&(e=vf(e),Yp(t.stateNode,t.type,e))}}function pI(t){qo?Xo?Xo.push(t):Xo=[t]:qo=t}function mI(){if(qo){var t=qo,e=Xo;if(Xo=qo=null,Hy(t),e)for(t=0;t<e.length;t++)Hy(e[t])}}function wI(t,e){return t(e)}function xI(){}var Ng=!1;function yI(t,e,r){if(Ng)return t(e,r);Ng=!0;try{return wI(t,e,r)}finally{Ng=!1,(qo!==null||Xo!==null)&&(xI(),mI())}}function pc(t,e){var r=t.stateNode;if(r===null)return null;var n=vf(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(we(231,e,typeof r));return r}var Zp=!1;if(Ns)try{var al={};Object.defineProperty(al,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Zp=!1}function sS(t,e,r,n,s,A,i,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var $l=!1,lh=null,ch=!1,em=null,AS={onError:function(t){$l=!0,lh=t}};function iS(t,e,r,n,s,A,i,l,a){$l=!1,lh=null,sS.apply(AS,arguments)}function oS(t,e,r,n,s,A,i,l,a){if(iS.apply(this,arguments),$l){if($l){var c=lh;$l=!1,lh=null}else throw Error(we(198));ch||(ch=!0,em=c)}}function io(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function vI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vy(t){if(io(t)!==t)throw Error(we(188))}function aS(t){var e=t.alternate;if(!e){if(e=io(t),e===null)throw Error(we(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var A=s.alternate;if(A===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===A.child){for(A=s.child;A;){if(A===r)return Vy(s),t;if(A===n)return Vy(s),e;A=A.sibling}throw Error(we(188))}if(r.return!==n.return)r=s,n=A;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=A;break}if(l===n){i=!0,n=s,r=A;break}l=l.sibling}if(!i){for(l=A.child;l;){if(l===r){i=!0,r=A,n=s;break}if(l===n){i=!0,n=A,r=s;break}l=l.sibling}if(!i)throw Error(we(189))}}if(r.alternate!==n)throw Error(we(190))}if(r.tag!==3)throw Error(we(188));return r.stateNode.current===r?t:e}function BI(t){return t=aS(t),t!==null?bI(t):null}function bI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bI(t);if(e!==null)return e;t=t.sibling}return null}var CI=Cn.unstable_scheduleCallback,Ky=Cn.unstable_cancelCallback,lS=Cn.unstable_shouldYield,cS=Cn.unstable_requestPaint,lr=Cn.unstable_now,uS=Cn.unstable_getCurrentPriorityLevel,z0=Cn.unstable_ImmediatePriority,II=Cn.unstable_UserBlockingPriority,uh=Cn.unstable_NormalPriority,dS=Cn.unstable_LowPriority,_I=Cn.unstable_IdlePriority,mf=null,as=null;function hS(t){if(as&&typeof as.onCommitFiberRoot=="function")try{as.onCommitFiberRoot(mf,t,void 0,(t.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:pS,fS=Math.log,gS=Math.LN2;function pS(t){return t>>>=0,t===0?32:31-(fS(t)/gS|0)|0}var Mu=64,Ou=4194304;function Fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,A=t.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=Fl(l):(A&=i,A!==0&&(n=Fl(A)))}else i=r&~s,i!==0?n=Fl(i):A!==0&&(n=Fl(A));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,A=e&-e,s>=A||s===16&&(A&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-$n(e),s=1<<r,n|=t[r],e&=~s;return n}function mS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,A=t.pendingLanes;0<A;){var i=31-$n(A),l=1<<i,a=s[i];a===-1?(!(l&r)||l&n)&&(s[i]=mS(l,e)):a<=e&&(t.expiredLanes|=l),A&=~l}}function tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function EI(){var t=Mu;return Mu<<=1,!(Mu&4194240)&&(Mu=64),t}function Rg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Yc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$n(e),t[e]=r}function xS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-$n(r),A=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~A}}function $0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-$n(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var kt=0;function TI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kI,W0,FI,SI,UI,rm=!1,Hu=[],kA=null,FA=null,SA=null,mc=new Map,wc=new Map,uA=[],yS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gy(t,e){switch(t){case"focusin":case"focusout":kA=null;break;case"dragenter":case"dragleave":FA=null;break;case"mouseover":case"mouseout":SA=null;break;case"pointerover":case"pointerout":mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wc.delete(e.pointerId)}}function ll(t,e,r,n,s,A){return t===null||t.nativeEvent!==A?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:A,targetContainers:[s]},e!==null&&(e=eu(e),e!==null&&W0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vS(t,e,r,n,s){switch(e){case"focusin":return kA=ll(kA,t,e,r,n,s),!0;case"dragenter":return FA=ll(FA,t,e,r,n,s),!0;case"mouseover":return SA=ll(SA,t,e,r,n,s),!0;case"pointerover":var A=s.pointerId;return mc.set(A,ll(mc.get(A)||null,t,e,r,n,s)),!0;case"gotpointercapture":return A=s.pointerId,wc.set(A,ll(wc.get(A)||null,t,e,r,n,s)),!0}return!1}function QI(t){var e=Ui(t.target);if(e!==null){var r=io(e);if(r!==null){if(e=r.tag,e===13){if(e=vI(r),e!==null){t.blockedOn=e,UI(t.priority,function(){FI(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=nm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Jp=n,r.target.dispatchEvent(n),Jp=null}else return e=eu(r),e!==null&&W0(e),t.blockedOn=r,!1;e.shift()}return!0}function zy(t,e,r){Nd(t)&&r.delete(e)}function BS(){rm=!1,kA!==null&&Nd(kA)&&(kA=null),FA!==null&&Nd(FA)&&(FA=null),SA!==null&&Nd(SA)&&(SA=null),mc.forEach(zy),wc.forEach(zy)}function cl(t,e){t.blockedOn===e&&(t.blockedOn=null,rm||(rm=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,BS)))}function xc(t){function e(s){return cl(s,t)}if(0<Hu.length){cl(Hu[0],t);for(var r=1;r<Hu.length;r++){var n=Hu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(kA!==null&&cl(kA,t),FA!==null&&cl(FA,t),SA!==null&&cl(SA,t),mc.forEach(e),wc.forEach(e),r=0;r<uA.length;r++)n=uA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<uA.length&&(r=uA[0],r.blockedOn===null);)QI(r),r.blockedOn===null&&uA.shift()}var Jo=Vs.ReactCurrentBatchConfig,hh=!0;function bS(t,e,r,n){var s=kt,A=Jo.transition;Jo.transition=null;try{kt=1,q0(t,e,r,n)}finally{kt=s,Jo.transition=A}}function CS(t,e,r,n){var s=kt,A=Jo.transition;Jo.transition=null;try{kt=4,q0(t,e,r,n)}finally{kt=s,Jo.transition=A}}function q0(t,e,r,n){if(hh){var s=nm(t,e,r,n);if(s===null)Gg(t,e,n,fh,r),Gy(t,n);else if(vS(s,t,e,r,n))n.stopPropagation();else if(Gy(t,n),e&4&&-1<yS.indexOf(t)){for(;s!==null;){var A=eu(s);if(A!==null&&kI(A),A=nm(t,e,r,n),A===null&&Gg(t,e,n,fh,r),A===s)break;s=A}s!==null&&n.stopPropagation()}else Gg(t,e,n,null,r)}}var fh=null;function nm(t,e,r,n){if(fh=null,t=G0(n),t=Ui(t),t!==null)if(e=io(t),e===null)t=null;else if(r=e.tag,r===13){if(t=vI(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fh=t,null}function NI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uS()){case z0:return 1;case II:return 4;case uh:case dS:return 16;case _I:return 536870912;default:return 16}default:return 16}}var yA=null,X0=null,Rd=null;function RI(){if(Rd)return Rd;var t,e=X0,r=e.length,n,s="value"in yA?yA.value:yA.textContent,A=s.length;for(t=0;t<r&&e[t]===s[t];t++);var i=r-t;for(n=1;n<=i&&e[r-n]===s[A-n];n++);return Rd=s.slice(t,1<n?1-n:void 0)}function Dd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vu(){return!0}function $y(){return!1}function Tn(t){function e(r,n,s,A,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=A,this.target=i,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(A):A[l]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Vu:$y,this.isPropagationStopped=$y,this}return rr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vu)},persist:function(){},isPersistent:Vu}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},J0=Tn(Qa),Zc=rr({},Qa,{view:0,detail:0}),IS=Tn(Zc),Dg,Pg,ul,wf=rr({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ul&&(ul&&t.type==="mousemove"?(Dg=t.screenX-ul.screenX,Pg=t.screenY-ul.screenY):Pg=Dg=0,ul=t),Dg)},movementY:function(t){return"movementY"in t?t.movementY:Pg}}),Wy=Tn(wf),_S=rr({},wf,{dataTransfer:0}),ES=Tn(_S),TS=rr({},Zc,{relatedTarget:0}),jg=Tn(TS),kS=rr({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=Tn(kS),SS=rr({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),US=Tn(SS),QS=rr({},Qa,{data:0}),qy=Tn(QS),NS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DS[t])?!!e[t]:!1}function Y0(){return PS}var jS=rr({},Zc,{key:function(t){if(t.key){var e=NS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y0,charCode:function(t){return t.type==="keypress"?Dd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LS=Tn(jS),MS=rr({},wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xy=Tn(MS),OS=rr({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y0}),HS=Tn(OS),VS=rr({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),KS=Tn(VS),GS=rr({},wf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zS=Tn(GS),$S=[9,13,27,32],Z0=Ns&&"CompositionEvent"in window,Wl=null;Ns&&"documentMode"in document&&(Wl=document.documentMode);var WS=Ns&&"TextEvent"in window&&!Wl,DI=Ns&&(!Z0||Wl&&8<Wl&&11>=Wl),Jy=" ",Yy=!1;function PI(t,e){switch(t){case"keyup":return $S.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ro=!1;function qS(t,e){switch(t){case"compositionend":return jI(e);case"keypress":return e.which!==32?null:(Yy=!0,Jy);case"textInput":return t=e.data,t===Jy&&Yy?null:t;default:return null}}function XS(t,e){if(Ro)return t==="compositionend"||!Z0&&PI(t,e)?(t=RI(),Rd=X0=yA=null,Ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DI&&e.locale!=="ko"?null:e.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JS[t.type]:e==="textarea"}function LI(t,e,r,n){pI(n),e=gh(e,"onChange"),0<e.length&&(r=new J0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ql=null,yc=null;function YS(t){XI(t,0)}function xf(t){var e=jo(t);if(lI(e))return t}function ZS(t,e){if(t==="change")return e}var MI=!1;if(Ns){var Lg;if(Ns){var Mg="oninput"in document;if(!Mg){var ev=document.createElement("div");ev.setAttribute("oninput","return;"),Mg=typeof ev.oninput=="function"}Lg=Mg}else Lg=!1;MI=Lg&&(!document.documentMode||9<document.documentMode)}function tv(){ql&&(ql.detachEvent("onpropertychange",OI),yc=ql=null)}function OI(t){if(t.propertyName==="value"&&xf(yc)){var e=[];LI(e,yc,t,G0(t)),yI(YS,e)}}function eU(t,e,r){t==="focusin"?(tv(),ql=e,yc=r,ql.attachEvent("onpropertychange",OI)):t==="focusout"&&tv()}function tU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xf(yc)}function rU(t,e){if(t==="click")return xf(e)}function nU(t,e){if(t==="input"||t==="change")return xf(e)}function sU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:sU;function vc(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Lp.call(e,s)||!Xn(t[s],e[s]))return!1}return!0}function rv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nv(t,e){var r=rv(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rv(r)}}function HI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VI(){for(var t=window,e=ah();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ah(t.document)}return e}function ew(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AU(t){var e=VI(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&HI(r.ownerDocument.documentElement,r)){if(n!==null&&ew(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,A=Math.min(n.start,s);n=n.end===void 0?A:Math.min(n.end,s),!t.extend&&A>n&&(s=n,n=A,A=s),s=nv(r,A);var i=nv(r,n);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),A>n?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iU=Ns&&"documentMode"in document&&11>=document.documentMode,Do=null,sm=null,Xl=null,Am=!1;function sv(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Am||Do==null||Do!==ah(n)||(n=Do,"selectionStart"in n&&ew(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xl&&vc(Xl,n)||(Xl=n,n=gh(sm,"onSelect"),0<n.length&&(e=new J0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Do)))}function Ku(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Po={animationend:Ku("Animation","AnimationEnd"),animationiteration:Ku("Animation","AnimationIteration"),animationstart:Ku("Animation","AnimationStart"),transitionend:Ku("Transition","TransitionEnd")},Og={},KI={};Ns&&(KI=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function yf(t){if(Og[t])return Og[t];if(!Po[t])return t;var e=Po[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in KI)return Og[t]=e[r];return t}var GI=yf("animationend"),zI=yf("animationiteration"),$I=yf("animationstart"),WI=yf("transitionend"),qI=new Map,Av="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){qI.set(t,e),Ao(e,[t])}for(var Hg=0;Hg<Av.length;Hg++){var Vg=Av[Hg],oU=Vg.toLowerCase(),aU=Vg[0].toUpperCase()+Vg.slice(1);ni(oU,"on"+aU)}ni(GI,"onAnimationEnd");ni(zI,"onAnimationIteration");ni($I,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(WI,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);Ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function iv(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,oS(n,e,void 0,t),t.currentTarget=null}function XI(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var A=void 0;if(e)for(var i=n.length-1;0<=i;i--){var l=n[i],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==A&&s.isPropagationStopped())break e;iv(s,l,c),A=a}else for(i=0;i<n.length;i++){if(l=n[i],a=l.instance,c=l.currentTarget,l=l.listener,a!==A&&s.isPropagationStopped())break e;iv(s,l,c),A=a}}}if(ch)throw t=em,ch=!1,em=null,t}function Ot(t,e){var r=e[cm];r===void 0&&(r=e[cm]=new Set);var n=t+"__bubble";r.has(n)||(JI(e,t,2,!1),r.add(n))}function Kg(t,e,r){var n=0;e&&(n|=4),JI(r,t,n,e)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Bc(t){if(!t[Gu]){t[Gu]=!0,sI.forEach(function(r){r!=="selectionchange"&&(lU.has(r)||Kg(r,!1,t),Kg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gu]||(e[Gu]=!0,Kg("selectionchange",!1,e))}}function JI(t,e,r,n){switch(NI(e)){case 1:var s=bS;break;case 4:s=CS;break;default:s=q0}r=s.bind(null,e,r,t),s=void 0,!Zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Gg(t,e,r,n,s){var A=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var a=i.tag;if((a===3||a===4)&&(a=i.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Ui(l),i===null)return;if(a=i.tag,a===5||a===6){n=A=i;continue e}l=l.parentNode}}n=n.return}yI(function(){var c=A,d=G0(r),h=[];e:{var f=qI.get(t);if(f!==void 0){var p=J0,v=t;switch(t){case"keypress":if(Dd(r)===0)break e;case"keydown":case"keyup":p=LS;break;case"focusin":v="focus",p=jg;break;case"focusout":v="blur",p=jg;break;case"beforeblur":case"afterblur":p=jg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=ES;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=HS;break;case GI:case zI:case $I:p=FS;break;case WI:p=KS;break;case"scroll":p=IS;break;case"wheel":p=zS;break;case"copy":case"cut":case"paste":p=US;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Xy}var x=(e&4)!==0,_=!x&&t==="scroll",b=x?f!==null?f+"Capture":null:f;x=[];for(var w=c,I;w!==null;){I=w;var F=I.stateNode;if(I.tag===5&&F!==null&&(I=F,b!==null&&(F=pc(w,b),F!=null&&x.push(bc(w,F,I)))),_)break;w=w.return}0<x.length&&(f=new p(f,v,null,r,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Jp&&(v=r.relatedTarget||r.fromElement)&&(Ui(v)||v[Rs]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=r.relatedTarget||r.toElement,p=c,v=v?Ui(v):null,v!==null&&(_=io(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=c),p!==v)){if(x=Wy,F="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=Xy,F="onPointerLeave",b="onPointerEnter",w="pointer"),_=p==null?f:jo(p),I=v==null?f:jo(v),f=new x(F,w+"leave",p,r,d),f.target=_,f.relatedTarget=I,F=null,Ui(d)===c&&(x=new x(b,w+"enter",v,r,d),x.target=I,x.relatedTarget=_,F=x),_=F,p&&v)t:{for(x=p,b=v,w=0,I=x;I;I=po(I))w++;for(I=0,F=b;F;F=po(F))I++;for(;0<w-I;)x=po(x),w--;for(;0<I-w;)b=po(b),I--;for(;w--;){if(x===b||b!==null&&x===b.alternate)break t;x=po(x),b=po(b)}x=null}else x=null;p!==null&&ov(h,f,p,x,!1),v!==null&&_!==null&&ov(h,_,v,x,!0)}}e:{if(f=c?jo(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var U=ZS;else if(Zy(f))if(MI)U=nU;else{U=tU;var R=eU}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(U=rU);if(U&&(U=U(t,c))){LI(h,U,r,d);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&zp(f,"number",f.value)}switch(R=c?jo(c):window,t){case"focusin":(Zy(R)||R.contentEditable==="true")&&(Do=R,sm=c,Xl=null);break;case"focusout":Xl=sm=Do=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,sv(h,r,d);break;case"selectionchange":if(iU)break;case"keydown":case"keyup":sv(h,r,d)}var y;if(Z0)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Ro?PI(t,r)&&(B="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(B="onCompositionStart");B&&(DI&&r.locale!=="ko"&&(Ro||B!=="onCompositionStart"?B==="onCompositionEnd"&&Ro&&(y=RI()):(yA=d,X0="value"in yA?yA.value:yA.textContent,Ro=!0)),R=gh(c,B),0<R.length&&(B=new qy(B,t,null,r,d),h.push({event:B,listeners:R}),y?B.data=y:(y=jI(r),y!==null&&(B.data=y)))),(y=WS?qS(t,r):XS(t,r))&&(c=gh(c,"onBeforeInput"),0<c.length&&(d=new qy("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=y))}XI(h,e)})}function bc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function gh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,A=s.stateNode;s.tag===5&&A!==null&&(s=A,A=pc(t,r),A!=null&&n.unshift(bc(t,A,s)),A=pc(t,e),A!=null&&n.push(bc(t,A,s))),t=t.return}return n}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ov(t,e,r,n,s){for(var A=e._reactName,i=[];r!==null&&r!==n;){var l=r,a=l.alternate,c=l.stateNode;if(a!==null&&a===n)break;l.tag===5&&c!==null&&(l=c,s?(a=pc(r,A),a!=null&&i.unshift(bc(r,a,l))):s||(a=pc(r,A),a!=null&&i.push(bc(r,a,l)))),r=r.return}i.length!==0&&t.push({event:e,listeners:i})}var cU=/\r\n?/g,uU=/\u0000|\uFFFD/g;function av(t){return(typeof t=="string"?t:""+t).replace(cU,`
`).replace(uU,"")}function zu(t,e,r){if(e=av(e),av(t)!==e&&r)throw Error(we(425))}function ph(){}var im=null,om=null;function am(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,dU=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,hU=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(t){return lv.resolve(null).then(t).catch(fU)}:lm;function fU(t){setTimeout(function(){throw t})}function zg(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),xc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);xc(e)}function UA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Na=Math.random().toString(36).slice(2),As="__reactFiber$"+Na,Cc="__reactProps$"+Na,Rs="__reactContainer$"+Na,cm="__reactEvents$"+Na,gU="__reactListeners$"+Na,pU="__reactHandles$"+Na;function Ui(t){var e=t[As];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Rs]||r[As]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=cv(t);t!==null;){if(r=t[As])return r;t=cv(t)}return e}t=r,r=t.parentNode}return null}function eu(t){return t=t[As]||t[Rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function vf(t){return t[Cc]||null}var um=[],Lo=-1;function si(t){return{current:t}}function Kt(t){0>Lo||(t.current=um[Lo],um[Lo]=null,Lo--)}function jt(t,e){Lo++,um[Lo]=t.current,t.current=e}var GA={},Yr=si(GA),gn=si(!1),Hi=GA;function oa(t,e){var r=t.type.contextTypes;if(!r)return GA;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},A;for(A in r)s[A]=e[A];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function mh(){Kt(gn),Kt(Yr)}function uv(t,e,r){if(Yr.current!==GA)throw Error(we(168));jt(Yr,e),jt(gn,r)}function YI(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(we(108,eS(t)||"Unknown",s));return rr({},r,n)}function wh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||GA,Hi=Yr.current,jt(Yr,t),jt(gn,gn.current),!0}function dv(t,e,r){var n=t.stateNode;if(!n)throw Error(we(169));r?(t=YI(t,e,Hi),n.__reactInternalMemoizedMergedChildContext=t,Kt(gn),Kt(Yr),jt(Yr,t)):Kt(gn),jt(gn,r)}var bs=null,Bf=!1,$g=!1;function ZI(t){bs===null?bs=[t]:bs.push(t)}function mU(t){Bf=!0,ZI(t)}function Ai(){if(!$g&&bs!==null){$g=!0;var t=0,e=kt;try{var r=bs;for(kt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}bs=null,Bf=!1}catch(s){throw bs!==null&&(bs=bs.slice(t+1)),CI(z0,Ai),s}finally{kt=e,$g=!1}}return null}var Mo=[],Oo=0,xh=null,yh=0,Sn=[],Un=0,Vi=null,Is=1,_s="";function bi(t,e){Mo[Oo++]=yh,Mo[Oo++]=xh,xh=t,yh=e}function e_(t,e,r){Sn[Un++]=Is,Sn[Un++]=_s,Sn[Un++]=Vi,Vi=t;var n=Is;t=_s;var s=32-$n(n)-1;n&=~(1<<s),r+=1;var A=32-$n(e)+s;if(30<A){var i=s-s%5;A=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Is=1<<32-$n(e)+s|r<<s|n,_s=A+t}else Is=1<<A|r<<s|n,_s=t}function tw(t){t.return!==null&&(bi(t,1),e_(t,1,0))}function rw(t){for(;t===xh;)xh=Mo[--Oo],Mo[Oo]=null,yh=Mo[--Oo],Mo[Oo]=null;for(;t===Vi;)Vi=Sn[--Un],Sn[Un]=null,_s=Sn[--Un],Sn[Un]=null,Is=Sn[--Un],Sn[Un]=null}var Bn=null,vn=null,$t=!1,zn=null;function t_(t,e){var r=Rn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hv(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,vn=UA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Vi!==null?{id:Is,overflow:_s}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Rn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Bn=t,vn=null,!0):!1;default:return!1}}function dm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hm(t){if($t){var e=vn;if(e){var r=e;if(!hv(t,e)){if(dm(t))throw Error(we(418));e=UA(r.nextSibling);var n=Bn;e&&hv(t,e)?t_(n,r):(t.flags=t.flags&-4097|2,$t=!1,Bn=t)}}else{if(dm(t))throw Error(we(418));t.flags=t.flags&-4097|2,$t=!1,Bn=t}}}function fv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function $u(t){if(t!==Bn)return!1;if(!$t)return fv(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!am(t.type,t.memoizedProps)),e&&(e=vn)){if(dm(t))throw r_(),Error(we(418));for(;e;)t_(t,e),e=UA(e.nextSibling)}if(fv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){vn=UA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=Bn?UA(t.stateNode.nextSibling):null;return!0}function r_(){for(var t=vn;t;)t=UA(t.nextSibling)}function aa(){vn=Bn=null,$t=!1}function nw(t){zn===null?zn=[t]:zn.push(t)}var wU=Vs.ReactCurrentBatchConfig;function dl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(we(309));var n=r.stateNode}if(!n)throw Error(we(147,t));var s=n,A=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===A?e.ref:(e=function(i){var l=s.refs;i===null?delete l[A]:l[A]=i},e._stringRef=A,e)}if(typeof t!="string")throw Error(we(284));if(!r._owner)throw Error(we(290,t))}return t}function Wu(t,e){throw t=Object.prototype.toString.call(e),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gv(t){var e=t._init;return e(t._payload)}function n_(t){function e(b,w){if(t){var I=b.deletions;I===null?(b.deletions=[w],b.flags|=16):I.push(w)}}function r(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function n(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=DA(b,w),b.index=0,b.sibling=null,b}function A(b,w,I){return b.index=I,t?(I=b.alternate,I!==null?(I=I.index,I<w?(b.flags|=2,w):I):(b.flags|=2,w)):(b.flags|=1048576,w)}function i(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,w,I,F){return w===null||w.tag!==6?(w=ep(I,b.mode,F),w.return=b,w):(w=s(w,I),w.return=b,w)}function a(b,w,I,F){var U=I.type;return U===No?d(b,w,I.props.children,F,I.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===aA&&gv(U)===w.type)?(F=s(w,I.props),F.ref=dl(b,w,I),F.return=b,F):(F=Vd(I.type,I.key,I.props,null,b.mode,F),F.ref=dl(b,w,I),F.return=b,F)}function c(b,w,I,F){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=tp(I,b.mode,F),w.return=b,w):(w=s(w,I.children||[]),w.return=b,w)}function d(b,w,I,F,U){return w===null||w.tag!==7?(w=Pi(I,b.mode,F,U),w.return=b,w):(w=s(w,I),w.return=b,w)}function h(b,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ep(""+w,b.mode,I),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pu:return I=Vd(w.type,w.key,w.props,null,b.mode,I),I.ref=dl(b,null,w),I.return=b,I;case Qo:return w=tp(w,b.mode,I),w.return=b,w;case aA:var F=w._init;return h(b,F(w._payload),I)}if(kl(w)||ol(w))return w=Pi(w,b.mode,I,null),w.return=b,w;Wu(b,w)}return null}function f(b,w,I,F){var U=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return U!==null?null:l(b,w,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Pu:return I.key===U?a(b,w,I,F):null;case Qo:return I.key===U?c(b,w,I,F):null;case aA:return U=I._init,f(b,w,U(I._payload),F)}if(kl(I)||ol(I))return U!==null?null:d(b,w,I,F,null);Wu(b,I)}return null}function p(b,w,I,F,U){if(typeof F=="string"&&F!==""||typeof F=="number")return b=b.get(I)||null,l(w,b,""+F,U);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Pu:return b=b.get(F.key===null?I:F.key)||null,a(w,b,F,U);case Qo:return b=b.get(F.key===null?I:F.key)||null,c(w,b,F,U);case aA:var R=F._init;return p(b,w,I,R(F._payload),U)}if(kl(F)||ol(F))return b=b.get(I)||null,d(w,b,F,U,null);Wu(w,F)}return null}function v(b,w,I,F){for(var U=null,R=null,y=w,B=w=0,C=null;y!==null&&B<I.length;B++){y.index>B?(C=y,y=null):C=y.sibling;var S=f(b,y,I[B],F);if(S===null){y===null&&(y=C);break}t&&y&&S.alternate===null&&e(b,y),w=A(S,w,B),R===null?U=S:R.sibling=S,R=S,y=C}if(B===I.length)return r(b,y),$t&&bi(b,B),U;if(y===null){for(;B<I.length;B++)y=h(b,I[B],F),y!==null&&(w=A(y,w,B),R===null?U=y:R.sibling=y,R=y);return $t&&bi(b,B),U}for(y=n(b,y);B<I.length;B++)C=p(y,b,B,I[B],F),C!==null&&(t&&C.alternate!==null&&y.delete(C.key===null?B:C.key),w=A(C,w,B),R===null?U=C:R.sibling=C,R=C);return t&&y.forEach(function(N){return e(b,N)}),$t&&bi(b,B),U}function x(b,w,I,F){var U=ol(I);if(typeof U!="function")throw Error(we(150));if(I=U.call(I),I==null)throw Error(we(151));for(var R=U=null,y=w,B=w=0,C=null,S=I.next();y!==null&&!S.done;B++,S=I.next()){y.index>B?(C=y,y=null):C=y.sibling;var N=f(b,y,S.value,F);if(N===null){y===null&&(y=C);break}t&&y&&N.alternate===null&&e(b,y),w=A(N,w,B),R===null?U=N:R.sibling=N,R=N,y=C}if(S.done)return r(b,y),$t&&bi(b,B),U;if(y===null){for(;!S.done;B++,S=I.next())S=h(b,S.value,F),S!==null&&(w=A(S,w,B),R===null?U=S:R.sibling=S,R=S);return $t&&bi(b,B),U}for(y=n(b,y);!S.done;B++,S=I.next())S=p(y,b,B,S.value,F),S!==null&&(t&&S.alternate!==null&&y.delete(S.key===null?B:S.key),w=A(S,w,B),R===null?U=S:R.sibling=S,R=S);return t&&y.forEach(function(P){return e(b,P)}),$t&&bi(b,B),U}function _(b,w,I,F){if(typeof I=="object"&&I!==null&&I.type===No&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Pu:e:{for(var U=I.key,R=w;R!==null;){if(R.key===U){if(U=I.type,U===No){if(R.tag===7){r(b,R.sibling),w=s(R,I.props.children),w.return=b,b=w;break e}}else if(R.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===aA&&gv(U)===R.type){r(b,R.sibling),w=s(R,I.props),w.ref=dl(b,R,I),w.return=b,b=w;break e}r(b,R);break}else e(b,R);R=R.sibling}I.type===No?(w=Pi(I.props.children,b.mode,F,I.key),w.return=b,b=w):(F=Vd(I.type,I.key,I.props,null,b.mode,F),F.ref=dl(b,w,I),F.return=b,b=F)}return i(b);case Qo:e:{for(R=I.key;w!==null;){if(w.key===R)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){r(b,w.sibling),w=s(w,I.children||[]),w.return=b,b=w;break e}else{r(b,w);break}else e(b,w);w=w.sibling}w=tp(I,b.mode,F),w.return=b,b=w}return i(b);case aA:return R=I._init,_(b,w,R(I._payload),F)}if(kl(I))return v(b,w,I,F);if(ol(I))return x(b,w,I,F);Wu(b,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(r(b,w.sibling),w=s(w,I),w.return=b,b=w):(r(b,w),w=ep(I,b.mode,F),w.return=b,b=w),i(b)):r(b,w)}return _}var la=n_(!0),s_=n_(!1),vh=si(null),Bh=null,Ho=null,sw=null;function Aw(){sw=Ho=Bh=null}function iw(t){var e=vh.current;Kt(vh),t._currentValue=e}function fm(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yo(t,e){Bh=t,sw=Ho=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(sw!==t)if(t={context:t,memoizedValue:e,next:null},Ho===null){if(Bh===null)throw Error(we(308));Ho=t,Bh.dependencies={lanes:0,firstContext:t}}else Ho=Ho.next=t;return e}var Qi=null;function ow(t){Qi===null?Qi=[t]:Qi.push(t)}function A_(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,ow(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ds(t,n)}function Ds(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var lA=!1;function aw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function QA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Bt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ds(t,r)}return s=n.interleaved,s===null?(e.next=e,ow(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ds(t,r)}function Pd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$0(t,r)}}function pv(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,A=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};A===null?s=A=i:A=A.next=i,r=r.next}while(r!==null);A===null?s=A=e:A=A.next=e}else s=A=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:A,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bh(t,e,r,n){var s=t.updateQueue;lA=!1;var A=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,c=a.next;a.next=null,i===null?A=c:i.next=c,i=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=a))}if(A!==null){var h=s.baseState;i=0,d=c=a=null,l=A;do{var f=l.lane,p=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,x=l;switch(f=e,p=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=rr({},h,f);break e;case 2:lA=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=p,a=h):d=d.next=p,i|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else A===null&&(s.shared.lanes=0);Gi|=i,t.lanes=i,t.memoizedState=h}}function mv(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(we(191,s));s.call(n)}}}var tu={},ls=si(tu),Ic=si(tu),_c=si(tu);function Ni(t){if(t===tu)throw Error(we(174));return t}function lw(t,e){switch(jt(_c,e),jt(Ic,t),jt(ls,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wp(e,t)}Kt(ls),jt(ls,e)}function ca(){Kt(ls),Kt(Ic),Kt(_c)}function o_(t){Ni(_c.current);var e=Ni(ls.current),r=Wp(e,t.type);e!==r&&(jt(Ic,t),jt(ls,r))}function cw(t){Ic.current===t&&(Kt(ls),Kt(Ic))}var Zt=si(0);function Ch(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wg=[];function uw(){for(var t=0;t<Wg.length;t++)Wg[t]._workInProgressVersionPrimary=null;Wg.length=0}var jd=Vs.ReactCurrentDispatcher,qg=Vs.ReactCurrentBatchConfig,Ki=0,er=null,gr=null,Ir=null,Ih=!1,Jl=!1,Ec=0,xU=0;function Hr(){throw Error(we(321))}function dw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Xn(t[r],e[r]))return!1;return!0}function hw(t,e,r,n,s,A){if(Ki=A,er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jd.current=t===null||t.memoizedState===null?bU:CU,t=r(n,s),Jl){A=0;do{if(Jl=!1,Ec=0,25<=A)throw Error(we(301));A+=1,Ir=gr=null,e.updateQueue=null,jd.current=IU,t=r(n,s)}while(Jl)}if(jd.current=_h,e=gr!==null&&gr.next!==null,Ki=0,Ir=gr=er=null,Ih=!1,e)throw Error(we(300));return t}function fw(){var t=Ec!==0;return Ec=0,t}function ns(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ir===null?er.memoizedState=Ir=t:Ir=Ir.next=t,Ir}function Mn(){if(gr===null){var t=er.alternate;t=t!==null?t.memoizedState:null}else t=gr.next;var e=Ir===null?er.memoizedState:Ir.next;if(e!==null)Ir=e,gr=t;else{if(t===null)throw Error(we(310));gr=t,t={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Ir===null?er.memoizedState=Ir=t:Ir=Ir.next=t}return Ir}function Tc(t,e){return typeof e=="function"?e(t):e}function Xg(t){var e=Mn(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=t;var n=gr,s=n.baseQueue,A=r.pending;if(A!==null){if(s!==null){var i=s.next;s.next=A.next,A.next=i}n.baseQueue=s=A,r.pending=null}if(s!==null){A=s.next,n=n.baseState;var l=i=null,a=null,c=A;do{var d=c.lane;if((Ki&d)===d)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,i=n):a=a.next=h,er.lanes|=d,Gi|=d}c=c.next}while(c!==null&&c!==A);a===null?i=n:a.next=l,Xn(n,e.memoizedState)||(cn=!0),e.memoizedState=n,e.baseState=i,e.baseQueue=a,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do A=s.lane,er.lanes|=A,Gi|=A,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Jg(t){var e=Mn(),r=e.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,A=e.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do A=t(A,i.action),i=i.next;while(i!==s);Xn(A,e.memoizedState)||(cn=!0),e.memoizedState=A,e.baseQueue===null&&(e.baseState=A),r.lastRenderedState=A}return[A,n]}function a_(){}function l_(t,e){var r=er,n=Mn(),s=e(),A=!Xn(n.memoizedState,s);if(A&&(n.memoizedState=s,cn=!0),n=n.queue,gw(d_.bind(null,r,n,t),[t]),n.getSnapshot!==e||A||Ir!==null&&Ir.memoizedState.tag&1){if(r.flags|=2048,kc(9,u_.bind(null,r,n,s,e),void 0,null),Er===null)throw Error(we(349));Ki&30||c_(r,e,s)}return s}function c_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function u_(t,e,r,n){e.value=r,e.getSnapshot=n,h_(e)&&f_(t)}function d_(t,e,r){return r(function(){h_(e)&&f_(t)})}function h_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Xn(t,r)}catch{return!0}}function f_(t){var e=Ds(t,1);e!==null&&Wn(e,t,1,-1)}function wv(t){var e=ns();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tc,lastRenderedState:t},e.queue=t,t=t.dispatch=BU.bind(null,er,t),[e.memoizedState,t]}function kc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=er.updateQueue,e===null?(e={lastEffect:null,stores:null},er.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function g_(){return Mn().memoizedState}function Ld(t,e,r,n){var s=ns();er.flags|=t,s.memoizedState=kc(1|e,r,void 0,n===void 0?null:n)}function bf(t,e,r,n){var s=Mn();n=n===void 0?null:n;var A=void 0;if(gr!==null){var i=gr.memoizedState;if(A=i.destroy,n!==null&&dw(n,i.deps)){s.memoizedState=kc(e,r,A,n);return}}er.flags|=t,s.memoizedState=kc(1|e,r,A,n)}function xv(t,e){return Ld(8390656,8,t,e)}function gw(t,e){return bf(2048,8,t,e)}function p_(t,e){return bf(4,2,t,e)}function m_(t,e){return bf(4,4,t,e)}function w_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x_(t,e,r){return r=r!=null?r.concat([t]):null,bf(4,4,w_.bind(null,e,t),r)}function pw(){}function y_(t,e){var r=Mn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&dw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function v_(t,e){var r=Mn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&dw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function B_(t,e,r){return Ki&21?(Xn(r,e)||(r=EI(),er.lanes|=r,Gi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=r)}function yU(t,e){var r=kt;kt=r!==0&&4>r?r:4,t(!0);var n=qg.transition;qg.transition={};try{t(!1),e()}finally{kt=r,qg.transition=n}}function b_(){return Mn().memoizedState}function vU(t,e,r){var n=RA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},C_(t))I_(e,r);else if(r=A_(t,e,r,n),r!==null){var s=rn();Wn(r,t,n,s),__(r,e,n)}}function BU(t,e,r){var n=RA(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(C_(t))I_(e,s);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=e.lastRenderedReducer,A!==null))try{var i=e.lastRenderedState,l=A(i,r);if(s.hasEagerState=!0,s.eagerState=l,Xn(l,i)){var a=e.interleaved;a===null?(s.next=s,ow(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}r=A_(t,e,s,n),r!==null&&(s=rn(),Wn(r,t,n,s),__(r,e,n))}}function C_(t){var e=t.alternate;return t===er||e!==null&&e===er}function I_(t,e){Jl=Ih=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function __(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$0(t,r)}}var _h={readContext:Ln,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useInsertionEffect:Hr,useLayoutEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useMutableSource:Hr,useSyncExternalStore:Hr,useId:Hr,unstable_isNewReconciler:!1},bU={readContext:Ln,useCallback:function(t,e){return ns().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:xv,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ld(4194308,4,w_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ld(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ld(4,2,t,e)},useMemo:function(t,e){var r=ns();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ns();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=vU.bind(null,er,t),[n.memoizedState,t]},useRef:function(t){var e=ns();return t={current:t},e.memoizedState=t},useState:wv,useDebugValue:pw,useDeferredValue:function(t){return ns().memoizedState=t},useTransition:function(){var t=wv(!1),e=t[0];return t=yU.bind(null,t[1]),ns().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=er,s=ns();if($t){if(r===void 0)throw Error(we(407));r=r()}else{if(r=e(),Er===null)throw Error(we(349));Ki&30||c_(n,e,r)}s.memoizedState=r;var A={value:r,getSnapshot:e};return s.queue=A,xv(d_.bind(null,n,A,t),[t]),n.flags|=2048,kc(9,u_.bind(null,n,A,r,e),void 0,null),r},useId:function(){var t=ns(),e=Er.identifierPrefix;if($t){var r=_s,n=Is;r=(n&~(1<<32-$n(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ec++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=xU++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CU={readContext:Ln,useCallback:y_,useContext:Ln,useEffect:gw,useImperativeHandle:x_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:v_,useReducer:Xg,useRef:g_,useState:function(){return Xg(Tc)},useDebugValue:pw,useDeferredValue:function(t){var e=Mn();return B_(e,gr.memoizedState,t)},useTransition:function(){var t=Xg(Tc)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:l_,useId:b_,unstable_isNewReconciler:!1},IU={readContext:Ln,useCallback:y_,useContext:Ln,useEffect:gw,useImperativeHandle:x_,useInsertionEffect:p_,useLayoutEffect:m_,useMemo:v_,useReducer:Jg,useRef:g_,useState:function(){return Jg(Tc)},useDebugValue:pw,useDeferredValue:function(t){var e=Mn();return gr===null?e.memoizedState=t:B_(e,gr.memoizedState,t)},useTransition:function(){var t=Jg(Tc)[0],e=Mn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:l_,useId:b_,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=rr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function gm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:rr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Cf={isMounted:function(t){return(t=t._reactInternals)?io(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=rn(),s=RA(t),A=Us(n,s);A.payload=e,r!=null&&(A.callback=r),e=QA(t,A,s),e!==null&&(Wn(e,t,s,n),Pd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=rn(),s=RA(t),A=Us(n,s);A.tag=1,A.payload=e,r!=null&&(A.callback=r),e=QA(t,A,s),e!==null&&(Wn(e,t,s,n),Pd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=rn(),n=RA(t),s=Us(r,n);s.tag=2,e!=null&&(s.callback=e),e=QA(t,s,n),e!==null&&(Wn(e,t,n,r),Pd(e,t,n))}};function yv(t,e,r,n,s,A,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,A,i):e.prototype&&e.prototype.isPureReactComponent?!vc(r,n)||!vc(s,A):!0}function E_(t,e,r){var n=!1,s=GA,A=e.contextType;return typeof A=="object"&&A!==null?A=Ln(A):(s=pn(e)?Hi:Yr.current,n=e.contextTypes,A=(n=n!=null)?oa(t,s):GA),e=new e(r,A),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cf,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=A),e}function vv(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Cf.enqueueReplaceState(e,e.state,null)}function pm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},aw(t);var A=e.contextType;typeof A=="object"&&A!==null?s.context=Ln(A):(A=pn(e)?Hi:Yr.current,s.context=oa(t,A)),s.state=t.memoizedState,A=e.getDerivedStateFromProps,typeof A=="function"&&(gm(t,e,A,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cf.enqueueReplaceState(s,s.state,null),bh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ua(t,e){try{var r="",n=e;do r+=Z2(n),n=n.return;while(n);var s=r}catch(A){s=`
Error generating stack: `+A.message+`
`+A.stack}return{value:t,source:e,stack:s,digest:null}}function Yg(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function mm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var _U=typeof WeakMap=="function"?WeakMap:Map;function T_(t,e,r){r=Us(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Th||(Th=!0,Em=n),mm(t,e)},r}function k_(t,e,r){r=Us(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){mm(t,e)}}var A=t.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){mm(t,e),typeof n!="function"&&(NA===null?NA=new Set([this]):NA.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),r}function Bv(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new _U;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=MU.bind(null,t,e,r),e.then(t,t))}function bv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cv(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Us(-1,1),e.tag=2,QA(r,e,1))),r.lanes|=1),t)}var EU=Vs.ReactCurrentOwner,cn=!1;function tn(t,e,r,n){e.child=t===null?s_(e,null,r,n):la(e,t.child,r,n)}function Iv(t,e,r,n,s){r=r.render;var A=e.ref;return Yo(e,s),n=hw(t,e,r,n,A,s),r=fw(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ps(t,e,s)):($t&&r&&tw(e),e.flags|=1,tn(t,e,n,s),e.child)}function _v(t,e,r,n,s){if(t===null){var A=r.type;return typeof A=="function"&&!Cw(A)&&A.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=A,F_(t,e,A,n,s)):(t=Vd(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(A=t.child,!(t.lanes&s)){var i=A.memoizedProps;if(r=r.compare,r=r!==null?r:vc,r(i,n)&&t.ref===e.ref)return Ps(t,e,s)}return e.flags|=1,t=DA(A,n),t.ref=e.ref,t.return=e,e.child=t}function F_(t,e,r,n,s){if(t!==null){var A=t.memoizedProps;if(vc(A,n)&&t.ref===e.ref)if(cn=!1,e.pendingProps=n=A,(t.lanes&s)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,Ps(t,e,s)}return wm(t,e,r,n,s)}function S_(t,e,r){var n=e.pendingProps,s=n.children,A=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jt(Ko,yn),yn|=r;else{if(!(r&1073741824))return t=A!==null?A.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jt(Ko,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=A!==null?A.baseLanes:r,jt(Ko,yn),yn|=n}else A!==null?(n=A.baseLanes|r,e.memoizedState=null):n=r,jt(Ko,yn),yn|=n;return tn(t,e,s,r),e.child}function U_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function wm(t,e,r,n,s){var A=pn(r)?Hi:Yr.current;return A=oa(e,A),Yo(e,s),r=hw(t,e,r,n,A,s),n=fw(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ps(t,e,s)):($t&&n&&tw(e),e.flags|=1,tn(t,e,r,s),e.child)}function Ev(t,e,r,n,s){if(pn(r)){var A=!0;wh(e)}else A=!1;if(Yo(e,s),e.stateNode===null)Md(t,e),E_(e,r,n),pm(e,r,n,s),n=!0;else if(t===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var a=i.context,c=r.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=pn(r)?Hi:Yr.current,c=oa(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||a!==c)&&vv(e,i,n,c),lA=!1;var f=e.memoizedState;i.state=f,bh(e,n,i,s),a=e.memoizedState,l!==n||f!==a||gn.current||lA?(typeof d=="function"&&(gm(e,r,d,n),a=e.memoizedState),(l=lA||yv(e,r,l,n,f,a,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=a),i.props=n,i.state=a,i.context=c,n=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{i=e.stateNode,i_(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Kn(e.type,l),i.props=c,h=e.pendingProps,f=i.context,a=r.contextType,typeof a=="object"&&a!==null?a=Ln(a):(a=pn(r)?Hi:Yr.current,a=oa(e,a));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==a)&&vv(e,i,n,a),lA=!1,f=e.memoizedState,i.state=f,bh(e,n,i,s);var v=e.memoizedState;l!==h||f!==v||gn.current||lA?(typeof p=="function"&&(gm(e,r,p,n),v=e.memoizedState),(c=lA||yv(e,r,c,n,f,v,a)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,v,a),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,v,a)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),i.props=n,i.state=v,i.context=a,n=c):(typeof i.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return xm(t,e,r,n,A,s)}function xm(t,e,r,n,s,A){U_(t,e);var i=(e.flags&128)!==0;if(!n&&!i)return s&&dv(e,r,!1),Ps(t,e,A);n=e.stateNode,EU.current=e;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&i?(e.child=la(e,t.child,null,A),e.child=la(e,null,l,A)):tn(t,e,l,A),e.memoizedState=n.state,s&&dv(e,r,!0),e.child}function Q_(t){var e=t.stateNode;e.pendingContext?uv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uv(t,e.context,!1),lw(t,e.containerInfo)}function Tv(t,e,r,n,s){return aa(),nw(s),e.flags|=256,tn(t,e,r,n),e.child}var ym={dehydrated:null,treeContext:null,retryLane:0};function vm(t){return{baseLanes:t,cachePool:null,transitions:null}}function N_(t,e,r){var n=e.pendingProps,s=Zt.current,A=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(A=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),jt(Zt,s&1),t===null)return hm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=n.children,t=n.fallback,A?(n=e.mode,A=e.child,i={mode:"hidden",children:i},!(n&1)&&A!==null?(A.childLanes=0,A.pendingProps=i):A=Ef(i,n,0,null),t=Pi(t,n,r,null),A.return=e,t.return=e,A.sibling=t,e.child=A,e.child.memoizedState=vm(r),e.memoizedState=ym,t):mw(e,i));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return TU(t,e,i,n,l,s,r);if(A){A=n.fallback,i=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:n.children};return!(i&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=a,e.deletions=null):(n=DA(s,a),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?A=DA(l,A):(A=Pi(A,i,r,null),A.flags|=2),A.return=e,n.return=e,n.sibling=A,e.child=n,n=A,A=e.child,i=t.child.memoizedState,i=i===null?vm(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},A.memoizedState=i,A.childLanes=t.childLanes&~r,e.memoizedState=ym,n}return A=t.child,t=A.sibling,n=DA(A,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function mw(t,e){return e=Ef({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qu(t,e,r,n){return n!==null&&nw(n),la(e,t.child,null,r),t=mw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TU(t,e,r,n,s,A,i){if(r)return e.flags&256?(e.flags&=-257,n=Yg(Error(we(422))),qu(t,e,i,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(A=n.fallback,s=e.mode,n=Ef({mode:"visible",children:n.children},s,0,null),A=Pi(A,s,i,null),A.flags|=2,n.return=e,A.return=e,n.sibling=A,e.child=n,e.mode&1&&la(e,t.child,null,i),e.child.memoizedState=vm(i),e.memoizedState=ym,A);if(!(e.mode&1))return qu(t,e,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,A=Error(we(419)),n=Yg(A,n,void 0),qu(t,e,i,n)}if(l=(i&t.childLanes)!==0,cn||l){if(n=Er,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==A.retryLane&&(A.retryLane=s,Ds(t,s),Wn(n,t,s,-1))}return bw(),n=Yg(Error(we(421))),qu(t,e,i,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=OU.bind(null,t),s._reactRetry=e,null):(t=A.treeContext,vn=UA(s.nextSibling),Bn=e,$t=!0,zn=null,t!==null&&(Sn[Un++]=Is,Sn[Un++]=_s,Sn[Un++]=Vi,Is=t.id,_s=t.overflow,Vi=e),e=mw(e,n.children),e.flags|=4096,e)}function kv(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),fm(t.return,e,r)}function Zg(t,e,r,n,s){var A=t.memoizedState;A===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(A.isBackwards=e,A.rendering=null,A.renderingStartTime=0,A.last=n,A.tail=r,A.tailMode=s)}function R_(t,e,r){var n=e.pendingProps,s=n.revealOrder,A=n.tail;if(tn(t,e,n.children,r),n=Zt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kv(t,r,e);else if(t.tag===19)kv(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(jt(Zt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Ch(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Zg(e,!1,s,r,A);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ch(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Zg(e,!0,r,null,A);break;case"together":Zg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Md(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ps(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Gi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(we(153));if(e.child!==null){for(t=e.child,r=DA(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=DA(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function kU(t,e,r){switch(e.tag){case 3:Q_(e),aa();break;case 5:o_(e);break;case 1:pn(e.type)&&wh(e);break;case 4:lw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;jt(vh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(jt(Zt,Zt.current&1),e.flags|=128,null):r&e.child.childLanes?N_(t,e,r):(jt(Zt,Zt.current&1),t=Ps(t,e,r),t!==null?t.sibling:null);jt(Zt,Zt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return R_(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jt(Zt,Zt.current),n)break;return null;case 22:case 23:return e.lanes=0,S_(t,e,r)}return Ps(t,e,r)}var D_,Bm,P_,j_;D_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bm=function(){};P_=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Ni(ls.current);var A=null;switch(r){case"input":s=Kp(t,s),n=Kp(t,n),A=[];break;case"select":s=rr({},s,{value:void 0}),n=rr({},n,{value:void 0}),A=[];break;case"textarea":s=$p(t,s),n=$p(t,n),A=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ph)}qp(r,n);var i;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fc.hasOwnProperty(c)?A||(A=[]):(A=A||[]).push(c,null));for(c in n){var a=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(i in l)!l.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in a)a.hasOwnProperty(i)&&l[i]!==a[i]&&(r||(r={}),r[i]=a[i])}else r||(A||(A=[]),A.push(c,r)),r=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(A=A||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(A=A||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fc.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ot("scroll",t),A||l===a||(A=[])):(A=A||[]).push(c,a))}r&&(A=A||[]).push("style",r);var c=A;(e.updateQueue=c)&&(e.flags|=4)}};j_=function(t,e,r,n){r!==n&&(e.flags|=4)};function hl(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Vr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function FU(t,e,r){var n=e.pendingProps;switch(rw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(e),null;case 1:return pn(e.type)&&mh(),Vr(e),null;case 3:return n=e.stateNode,ca(),Kt(gn),Kt(Yr),uw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&($u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(Fm(zn),zn=null))),Bm(t,e),Vr(e),null;case 5:cw(e);var s=Ni(_c.current);if(r=e.type,t!==null&&e.stateNode!=null)P_(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(we(166));return Vr(e),null}if(t=Ni(ls.current),$u(e)){n=e.stateNode,r=e.type;var A=e.memoizedProps;switch(n[As]=e,n[Cc]=A,t=(e.mode&1)!==0,r){case"dialog":Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":case"embed":Ot("load",n);break;case"video":case"audio":for(s=0;s<Sl.length;s++)Ot(Sl[s],n);break;case"source":Ot("error",n);break;case"img":case"image":case"link":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"input":jy(n,A),Ot("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!A.multiple},Ot("invalid",n);break;case"textarea":My(n,A),Ot("invalid",n)}qp(r,A),s=null;for(var i in A)if(A.hasOwnProperty(i)){var l=A[i];i==="children"?typeof l=="string"?n.textContent!==l&&(A.suppressHydrationWarning!==!0&&zu(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(A.suppressHydrationWarning!==!0&&zu(n.textContent,l,t),s=["children",""+l]):fc.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Ot("scroll",n)}switch(r){case"input":ju(n),Ly(n,A,!0);break;case"textarea":ju(n),Oy(n);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(n.onclick=ph)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dI(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[As]=e,t[Cc]=n,D_(t,e,!1,!1),e.stateNode=t;e:{switch(i=Xp(r,n),r){case"dialog":Ot("cancel",t),Ot("close",t),s=n;break;case"iframe":case"object":case"embed":Ot("load",t),s=n;break;case"video":case"audio":for(s=0;s<Sl.length;s++)Ot(Sl[s],t);s=n;break;case"source":Ot("error",t),s=n;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),s=n;break;case"details":Ot("toggle",t),s=n;break;case"input":jy(t,n),s=Kp(t,n),Ot("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=rr({},n,{value:void 0}),Ot("invalid",t);break;case"textarea":My(t,n),s=$p(t,n),Ot("invalid",t);break;default:s=n}qp(r,s),l=s;for(A in l)if(l.hasOwnProperty(A)){var a=l[A];A==="style"?gI(t,a):A==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&hI(t,a)):A==="children"?typeof a=="string"?(r!=="textarea"||a!=="")&&gc(t,a):typeof a=="number"&&gc(t,""+a):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(fc.hasOwnProperty(A)?a!=null&&A==="onScroll"&&Ot("scroll",t):a!=null&&O0(t,A,a,i))}switch(r){case"input":ju(t),Ly(t,n,!1);break;case"textarea":ju(t),Oy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+KA(n.value));break;case"select":t.multiple=!!n.multiple,A=n.value,A!=null?Wo(t,!!n.multiple,A,!1):n.defaultValue!=null&&Wo(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ph)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vr(e),null;case 6:if(t&&e.stateNode!=null)j_(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(we(166));if(r=Ni(_c.current),Ni(ls.current),$u(e)){if(n=e.stateNode,r=e.memoizedProps,n[As]=e,(A=n.nodeValue!==r)&&(t=Bn,t!==null))switch(t.tag){case 3:zu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zu(n.nodeValue,r,(t.mode&1)!==0)}A&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[As]=e,e.stateNode=n}return Vr(e),null;case 13:if(Kt(Zt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&vn!==null&&e.mode&1&&!(e.flags&128))r_(),aa(),e.flags|=98560,A=!1;else if(A=$u(e),n!==null&&n.dehydrated!==null){if(t===null){if(!A)throw Error(we(318));if(A=e.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(we(317));A[As]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vr(e),A=!1}else zn!==null&&(Fm(zn),zn=null),A=!0;if(!A)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?mr===0&&(mr=3):bw())),e.updateQueue!==null&&(e.flags|=4),Vr(e),null);case 4:return ca(),Bm(t,e),t===null&&Bc(e.stateNode.containerInfo),Vr(e),null;case 10:return iw(e.type._context),Vr(e),null;case 17:return pn(e.type)&&mh(),Vr(e),null;case 19:if(Kt(Zt),A=e.memoizedState,A===null)return Vr(e),null;if(n=(e.flags&128)!==0,i=A.rendering,i===null)if(n)hl(A,!1);else{if(mr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Ch(t),i!==null){for(e.flags|=128,hl(A,!1),n=i.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)A=r,t=n,A.flags&=14680066,i=A.alternate,i===null?(A.childLanes=0,A.lanes=t,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=i.childLanes,A.lanes=i.lanes,A.child=i.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=i.memoizedProps,A.memoizedState=i.memoizedState,A.updateQueue=i.updateQueue,A.type=i.type,t=i.dependencies,A.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return jt(Zt,Zt.current&1|2),e.child}t=t.sibling}A.tail!==null&&lr()>da&&(e.flags|=128,n=!0,hl(A,!1),e.lanes=4194304)}else{if(!n)if(t=Ch(i),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),hl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!i.alternate&&!$t)return Vr(e),null}else 2*lr()-A.renderingStartTime>da&&r!==1073741824&&(e.flags|=128,n=!0,hl(A,!1),e.lanes=4194304);A.isBackwards?(i.sibling=e.child,e.child=i):(r=A.last,r!==null?r.sibling=i:e.child=i,A.last=i)}return A.tail!==null?(e=A.tail,A.rendering=e,A.tail=e.sibling,A.renderingStartTime=lr(),e.sibling=null,r=Zt.current,jt(Zt,n?r&1|2:r&1),e):(Vr(e),null);case 22:case 23:return Bw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?yn&1073741824&&(Vr(e),e.subtreeFlags&6&&(e.flags|=8192)):Vr(e),null;case 24:return null;case 25:return null}throw Error(we(156,e.tag))}function SU(t,e){switch(rw(e),e.tag){case 1:return pn(e.type)&&mh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ca(),Kt(gn),Kt(Yr),uw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cw(e),null;case 13:if(Kt(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(we(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(Zt),null;case 4:return ca(),null;case 10:return iw(e.type._context),null;case 22:case 23:return Bw(),null;case 24:return null;default:return null}}var Xu=!1,qr=!1,UU=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Vo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ar(t,e,n)}else r.current=null}function bm(t,e,r){try{r()}catch(n){Ar(t,e,n)}}var Fv=!1;function QU(t,e){if(im=hh,t=VI(),ew(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,A=n.focusNode;n=n.focusOffset;try{r.nodeType,A.nodeType}catch{r=null;break e}var i=0,l=-1,a=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=i+s),h!==A||n!==0&&h.nodeType!==3||(a=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===s&&(l=i),f===A&&++d===n&&(a=i),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=l===-1||a===-1?null:{start:l,end:a}}else r=null}r=r||{start:0,end:0}}else r=null;for(om={focusedElem:t,selectionRange:r},hh=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:Kn(e.type,x),_);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(F){Ar(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return v=Fv,Fv=!1,v}function Yl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var A=s.destroy;s.destroy=void 0,A!==void 0&&bm(e,r,A)}s=s.next}while(s!==n)}}function If(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Cm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function L_(t){var e=t.alternate;e!==null&&(t.alternate=null,L_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[As],delete e[Cc],delete e[cm],delete e[gU],delete e[pU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M_(t){return t.tag===5||t.tag===3||t.tag===4}function Sv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Im(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ph));else if(n!==4&&(t=t.child,t!==null))for(Im(t,e,r),t=t.sibling;t!==null;)Im(t,e,r),t=t.sibling}function _m(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_m(t,e,r),t=t.sibling;t!==null;)_m(t,e,r),t=t.sibling}var Ur=null,Gn=!1;function tA(t,e,r){for(r=r.child;r!==null;)O_(t,e,r),r=r.sibling}function O_(t,e,r){if(as&&typeof as.onCommitFiberUnmount=="function")try{as.onCommitFiberUnmount(mf,r)}catch{}switch(r.tag){case 5:qr||Vo(r,e);case 6:var n=Ur,s=Gn;Ur=null,tA(t,e,r),Ur=n,Gn=s,Ur!==null&&(Gn?(t=Ur,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ur.removeChild(r.stateNode));break;case 18:Ur!==null&&(Gn?(t=Ur,r=r.stateNode,t.nodeType===8?zg(t.parentNode,r):t.nodeType===1&&zg(t,r),xc(t)):zg(Ur,r.stateNode));break;case 4:n=Ur,s=Gn,Ur=r.stateNode.containerInfo,Gn=!0,tA(t,e,r),Ur=n,Gn=s;break;case 0:case 11:case 14:case 15:if(!qr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var A=s,i=A.destroy;A=A.tag,i!==void 0&&(A&2||A&4)&&bm(r,e,i),s=s.next}while(s!==n)}tA(t,e,r);break;case 1:if(!qr&&(Vo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ar(r,e,l)}tA(t,e,r);break;case 21:tA(t,e,r);break;case 22:r.mode&1?(qr=(n=qr)||r.memoizedState!==null,tA(t,e,r),qr=n):tA(t,e,r);break;default:tA(t,e,r)}}function Uv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new UU),e.forEach(function(n){var s=HU.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Hn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var A=t,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:Ur=l.stateNode,Gn=!1;break e;case 3:Ur=l.stateNode.containerInfo,Gn=!0;break e;case 4:Ur=l.stateNode.containerInfo,Gn=!0;break e}l=l.return}if(Ur===null)throw Error(we(160));O_(A,i,s),Ur=null,Gn=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(c){Ar(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H_(e,t),e=e.sibling}function H_(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),ts(t),n&4){try{Yl(3,t,t.return),If(3,t)}catch(x){Ar(t,t.return,x)}try{Yl(5,t,t.return)}catch(x){Ar(t,t.return,x)}}break;case 1:Hn(e,t),ts(t),n&512&&r!==null&&Vo(r,r.return);break;case 5:if(Hn(e,t),ts(t),n&512&&r!==null&&Vo(r,r.return),t.flags&32){var s=t.stateNode;try{gc(s,"")}catch(x){Ar(t,t.return,x)}}if(n&4&&(s=t.stateNode,s!=null)){var A=t.memoizedProps,i=r!==null?r.memoizedProps:A,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&A.type==="radio"&&A.name!=null&&cI(s,A),Xp(l,i);var c=Xp(l,A);for(i=0;i<a.length;i+=2){var d=a[i],h=a[i+1];d==="style"?gI(s,h):d==="dangerouslySetInnerHTML"?hI(s,h):d==="children"?gc(s,h):O0(s,d,h,c)}switch(l){case"input":Gp(s,A);break;case"textarea":uI(s,A);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!A.multiple;var p=A.value;p!=null?Wo(s,!!A.multiple,p,!1):f!==!!A.multiple&&(A.defaultValue!=null?Wo(s,!!A.multiple,A.defaultValue,!0):Wo(s,!!A.multiple,A.multiple?[]:"",!1))}s[Cc]=A}catch(x){Ar(t,t.return,x)}}break;case 6:if(Hn(e,t),ts(t),n&4){if(t.stateNode===null)throw Error(we(162));s=t.stateNode,A=t.memoizedProps;try{s.nodeValue=A}catch(x){Ar(t,t.return,x)}}break;case 3:if(Hn(e,t),ts(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xc(e.containerInfo)}catch(x){Ar(t,t.return,x)}break;case 4:Hn(e,t),ts(t);break;case 13:Hn(e,t),ts(t),s=t.child,s.flags&8192&&(A=s.memoizedState!==null,s.stateNode.isHidden=A,!A||s.alternate!==null&&s.alternate.memoizedState!==null||(yw=lr())),n&4&&Uv(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(qr=(c=qr)||d,Hn(e,t),qr=c):Hn(e,t),ts(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ve=t,d=t.child;d!==null;){for(h=Ve=d;Ve!==null;){switch(f=Ve,p=f.child,f.tag){case 0:case 11:case 14:case 15:Yl(4,f,f.return);break;case 1:Vo(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Ar(n,r,x)}}break;case 5:Vo(f,f.return);break;case 22:if(f.memoizedState!==null){Nv(h);continue}}p!==null?(p.return=f,Ve=p):Nv(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(A=s.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(l=h.stateNode,a=h.memoizedProps.style,i=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=fI("display",i))}catch(x){Ar(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){Ar(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hn(e,t),ts(t),n&4&&Uv(t);break;case 21:break;default:Hn(e,t),ts(t)}}function ts(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(M_(r)){var n=r;break e}r=r.return}throw Error(we(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(gc(s,""),n.flags&=-33);var A=Sv(t);_m(t,A,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Sv(t);Im(t,l,i);break;default:throw Error(we(161))}}catch(a){Ar(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NU(t,e,r){Ve=t,V_(t)}function V_(t,e,r){for(var n=(t.mode&1)!==0;Ve!==null;){var s=Ve,A=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Xu;if(!i){var l=s.alternate,a=l!==null&&l.memoizedState!==null||qr;l=Xu;var c=qr;if(Xu=i,(qr=a)&&!c)for(Ve=s;Ve!==null;)i=Ve,a=i.child,i.tag===22&&i.memoizedState!==null?Rv(s):a!==null?(a.return=i,Ve=a):Rv(s);for(;A!==null;)Ve=A,V_(A),A=A.sibling;Ve=s,Xu=l,qr=c}Qv(t)}else s.subtreeFlags&8772&&A!==null?(A.return=s,Ve=A):Qv(t)}}function Qv(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qr||If(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!qr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Kn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var A=e.updateQueue;A!==null&&mv(e,A,n);break;case 3:var i=e.updateQueue;if(i!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}mv(e,i,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break;case"img":a.src&&(r.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}qr||e.flags&512&&Cm(e)}catch(f){Ar(e,e.return,f)}}if(e===t){Ve=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ve=r;break}Ve=e.return}}function Nv(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ve=r;break}Ve=e.return}}function Rv(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{If(4,e)}catch(a){Ar(e,r,a)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(a){Ar(e,s,a)}}var A=e.return;try{Cm(e)}catch(a){Ar(e,A,a)}break;case 5:var i=e.return;try{Cm(e)}catch(a){Ar(e,i,a)}}}catch(a){Ar(e,e.return,a)}if(e===t){Ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ve=l;break}Ve=e.return}}var RU=Math.ceil,Eh=Vs.ReactCurrentDispatcher,ww=Vs.ReactCurrentOwner,jn=Vs.ReactCurrentBatchConfig,Bt=0,Er=null,fr=null,Pr=0,yn=0,Ko=si(0),mr=0,Fc=null,Gi=0,_f=0,xw=0,Zl=null,ln=null,yw=0,da=1/0,Bs=null,Th=!1,Em=null,NA=null,Ju=!1,vA=null,kh=0,ec=0,Tm=null,Od=-1,Hd=0;function rn(){return Bt&6?lr():Od!==-1?Od:Od=lr()}function RA(t){return t.mode&1?Bt&2&&Pr!==0?Pr&-Pr:wU.transition!==null?(Hd===0&&(Hd=EI()),Hd):(t=kt,t!==0||(t=window.event,t=t===void 0?16:NI(t.type)),t):1}function Wn(t,e,r,n){if(50<ec)throw ec=0,Tm=null,Error(we(185));Yc(t,r,n),(!(Bt&2)||t!==Er)&&(t===Er&&(!(Bt&2)&&(_f|=r),mr===4&&dA(t,Pr)),mn(t,n),r===1&&Bt===0&&!(e.mode&1)&&(da=lr()+500,Bf&&Ai()))}function mn(t,e){var r=t.callbackNode;wS(t,e);var n=dh(t,t===Er?Pr:0);if(n===0)r!==null&&Ky(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Ky(r),e===1)t.tag===0?mU(Dv.bind(null,t)):ZI(Dv.bind(null,t)),hU(function(){!(Bt&6)&&Ai()}),r=null;else{switch(TI(n)){case 1:r=z0;break;case 4:r=II;break;case 16:r=uh;break;case 536870912:r=_I;break;default:r=uh}r=J_(r,K_.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function K_(t,e){if(Od=-1,Hd=0,Bt&6)throw Error(we(327));var r=t.callbackNode;if(Zo()&&t.callbackNode!==r)return null;var n=dh(t,t===Er?Pr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Fh(t,n);else{e=n;var s=Bt;Bt|=2;var A=z_();(Er!==t||Pr!==e)&&(Bs=null,da=lr()+500,Di(t,e));do try{jU();break}catch(l){G_(t,l)}while(!0);Aw(),Eh.current=A,Bt=s,fr!==null?e=0:(Er=null,Pr=0,e=mr)}if(e!==0){if(e===2&&(s=tm(t),s!==0&&(n=s,e=km(t,s))),e===1)throw r=Fc,Di(t,0),dA(t,n),mn(t,lr()),r;if(e===6)dA(t,n);else{if(s=t.current.alternate,!(n&30)&&!DU(s)&&(e=Fh(t,n),e===2&&(A=tm(t),A!==0&&(n=A,e=km(t,A))),e===1))throw r=Fc,Di(t,0),dA(t,n),mn(t,lr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(we(345));case 2:Ci(t,ln,Bs);break;case 3:if(dA(t,n),(n&130023424)===n&&(e=yw+500-lr(),10<e)){if(dh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){rn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lm(Ci.bind(null,t,ln,Bs),e);break}Ci(t,ln,Bs);break;case 4:if(dA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var i=31-$n(n);A=1<<i,i=e[i],i>s&&(s=i),n&=~A}if(n=s,n=lr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*RU(n/1960))-n,10<n){t.timeoutHandle=lm(Ci.bind(null,t,ln,Bs),n);break}Ci(t,ln,Bs);break;case 5:Ci(t,ln,Bs);break;default:throw Error(we(329))}}}return mn(t,lr()),t.callbackNode===r?K_.bind(null,t):null}function km(t,e){var r=Zl;return t.current.memoizedState.isDehydrated&&(Di(t,e).flags|=256),t=Fh(t,e),t!==2&&(e=ln,ln=r,e!==null&&Fm(e)),t}function Fm(t){ln===null?ln=t:ln.push.apply(ln,t)}function DU(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],A=s.getSnapshot;s=s.value;try{if(!Xn(A(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dA(t,e){for(e&=~xw,e&=~_f,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-$n(e),n=1<<r;t[r]=-1,e&=~n}}function Dv(t){if(Bt&6)throw Error(we(327));Zo();var e=dh(t,0);if(!(e&1))return mn(t,lr()),null;var r=Fh(t,e);if(t.tag!==0&&r===2){var n=tm(t);n!==0&&(e=n,r=km(t,n))}if(r===1)throw r=Fc,Di(t,0),dA(t,e),mn(t,lr()),r;if(r===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,ln,Bs),mn(t,lr()),null}function vw(t,e){var r=Bt;Bt|=1;try{return t(e)}finally{Bt=r,Bt===0&&(da=lr()+500,Bf&&Ai())}}function zi(t){vA!==null&&vA.tag===0&&!(Bt&6)&&Zo();var e=Bt;Bt|=1;var r=jn.transition,n=kt;try{if(jn.transition=null,kt=1,t)return t()}finally{kt=n,jn.transition=r,Bt=e,!(Bt&6)&&Ai()}}function Bw(){yn=Ko.current,Kt(Ko)}function Di(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,dU(r)),fr!==null)for(r=fr.return;r!==null;){var n=r;switch(rw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&mh();break;case 3:ca(),Kt(gn),Kt(Yr),uw();break;case 5:cw(n);break;case 4:ca();break;case 13:Kt(Zt);break;case 19:Kt(Zt);break;case 10:iw(n.type._context);break;case 22:case 23:Bw()}r=r.return}if(Er=t,fr=t=DA(t.current,null),Pr=yn=e,mr=0,Fc=null,xw=_f=Gi=0,ln=Zl=null,Qi!==null){for(e=0;e<Qi.length;e++)if(r=Qi[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,A=r.pending;if(A!==null){var i=A.next;A.next=s,n.next=i}r.pending=n}Qi=null}return t}function G_(t,e){do{var r=fr;try{if(Aw(),jd.current=_h,Ih){for(var n=er.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ih=!1}if(Ki=0,Ir=gr=er=null,Jl=!1,Ec=0,ww.current=null,r===null||r.return===null){mr=1,Fc=e,fr=null;break}e:{var A=t,i=r.return,l=r,a=e;if(e=Pr,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=bv(i);if(p!==null){p.flags&=-257,Cv(p,i,l,A,e),p.mode&1&&Bv(A,c,e),e=p,a=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(a),e.updateQueue=x}else v.add(a);break e}else{if(!(e&1)){Bv(A,c,e),bw();break e}a=Error(we(426))}}else if($t&&l.mode&1){var _=bv(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Cv(_,i,l,A,e),nw(ua(a,l));break e}}A=a=ua(a,l),mr!==4&&(mr=2),Zl===null?Zl=[A]:Zl.push(A),A=i;do{switch(A.tag){case 3:A.flags|=65536,e&=-e,A.lanes|=e;var b=T_(A,a,e);pv(A,b);break e;case 1:l=a;var w=A.type,I=A.stateNode;if(!(A.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(NA===null||!NA.has(I)))){A.flags|=65536,e&=-e,A.lanes|=e;var F=k_(A,l,e);pv(A,F);break e}}A=A.return}while(A!==null)}W_(r)}catch(U){e=U,fr===r&&r!==null&&(fr=r=r.return);continue}break}while(!0)}function z_(){var t=Eh.current;return Eh.current=_h,t===null?_h:t}function bw(){(mr===0||mr===3||mr===2)&&(mr=4),Er===null||!(Gi&268435455)&&!(_f&268435455)||dA(Er,Pr)}function Fh(t,e){var r=Bt;Bt|=2;var n=z_();(Er!==t||Pr!==e)&&(Bs=null,Di(t,e));do try{PU();break}catch(s){G_(t,s)}while(!0);if(Aw(),Bt=r,Eh.current=n,fr!==null)throw Error(we(261));return Er=null,Pr=0,mr}function PU(){for(;fr!==null;)$_(fr)}function jU(){for(;fr!==null&&!lS();)$_(fr)}function $_(t){var e=X_(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?W_(t):fr=e,ww.current=null}function W_(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=SU(r,e),r!==null){r.flags&=32767,fr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mr=6,fr=null;return}}else if(r=FU(r,e,yn),r!==null){fr=r;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);mr===0&&(mr=5)}function Ci(t,e,r){var n=kt,s=jn.transition;try{jn.transition=null,kt=1,LU(t,e,r,n)}finally{jn.transition=s,kt=n}return null}function LU(t,e,r,n){do Zo();while(vA!==null);if(Bt&6)throw Error(we(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var A=r.lanes|r.childLanes;if(xS(t,A),t===Er&&(fr=Er=null,Pr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ju||(Ju=!0,J_(uh,function(){return Zo(),null})),A=(r.flags&15990)!==0,r.subtreeFlags&15990||A){A=jn.transition,jn.transition=null;var i=kt;kt=1;var l=Bt;Bt|=4,ww.current=null,QU(t,r),H_(r,t),AU(om),hh=!!im,om=im=null,t.current=r,NU(r),cS(),Bt=l,kt=i,jn.transition=A}else t.current=r;if(Ju&&(Ju=!1,vA=t,kh=s),A=t.pendingLanes,A===0&&(NA=null),hS(r.stateNode),mn(t,lr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Th)throw Th=!1,t=Em,Em=null,t;return kh&1&&t.tag!==0&&Zo(),A=t.pendingLanes,A&1?t===Tm?ec++:(ec=0,Tm=t):ec=0,Ai(),null}function Zo(){if(vA!==null){var t=TI(kh),e=jn.transition,r=kt;try{if(jn.transition=null,kt=16>t?16:t,vA===null)var n=!1;else{if(t=vA,vA=null,kh=0,Bt&6)throw Error(we(331));var s=Bt;for(Bt|=4,Ve=t.current;Ve!==null;){var A=Ve,i=A.child;if(Ve.flags&16){var l=A.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(Ve=c;Ve!==null;){var d=Ve;switch(d.tag){case 0:case 11:case 15:Yl(8,d,A)}var h=d.child;if(h!==null)h.return=d,Ve=h;else for(;Ve!==null;){d=Ve;var f=d.sibling,p=d.return;if(L_(d),d===c){Ve=null;break}if(f!==null){f.return=p,Ve=f;break}Ve=p}}}var v=A.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}Ve=A}}if(A.subtreeFlags&2064&&i!==null)i.return=A,Ve=i;else e:for(;Ve!==null;){if(A=Ve,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Yl(9,A,A.return)}var b=A.sibling;if(b!==null){b.return=A.return,Ve=b;break e}Ve=A.return}}var w=t.current;for(Ve=w;Ve!==null;){i=Ve;var I=i.child;if(i.subtreeFlags&2064&&I!==null)I.return=i,Ve=I;else e:for(i=w;Ve!==null;){if(l=Ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:If(9,l)}}catch(U){Ar(l,l.return,U)}if(l===i){Ve=null;break e}var F=l.sibling;if(F!==null){F.return=l.return,Ve=F;break e}Ve=l.return}}if(Bt=s,Ai(),as&&typeof as.onPostCommitFiberRoot=="function")try{as.onPostCommitFiberRoot(mf,t)}catch{}n=!0}return n}finally{kt=r,jn.transition=e}}return!1}function Pv(t,e,r){e=ua(r,e),e=T_(t,e,1),t=QA(t,e,1),e=rn(),t!==null&&(Yc(t,1,e),mn(t,e))}function Ar(t,e,r){if(t.tag===3)Pv(t,t,r);else for(;e!==null;){if(e.tag===3){Pv(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(NA===null||!NA.has(n))){t=ua(r,t),t=k_(e,t,1),e=QA(e,t,1),t=rn(),e!==null&&(Yc(e,1,t),mn(e,t));break}}e=e.return}}function MU(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=rn(),t.pingedLanes|=t.suspendedLanes&r,Er===t&&(Pr&r)===r&&(mr===4||mr===3&&(Pr&130023424)===Pr&&500>lr()-yw?Di(t,0):xw|=r),mn(t,e)}function q_(t,e){e===0&&(t.mode&1?(e=Ou,Ou<<=1,!(Ou&130023424)&&(Ou=4194304)):e=1);var r=rn();t=Ds(t,e),t!==null&&(Yc(t,e,r),mn(t,r))}function OU(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),q_(t,r)}function HU(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(we(314))}n!==null&&n.delete(e),q_(t,r)}var X_;X_=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)cn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return cn=!1,kU(t,e,r);cn=!!(t.flags&131072)}else cn=!1,$t&&e.flags&1048576&&e_(e,yh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Md(t,e),t=e.pendingProps;var s=oa(e,Yr.current);Yo(e,r),s=hw(null,e,n,t,s,r);var A=fw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(n)?(A=!0,wh(e)):A=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,aw(e),s.updater=Cf,e.stateNode=s,s._reactInternals=e,pm(e,n,t,r),e=xm(null,e,n,!0,A,r)):(e.tag=0,$t&&A&&tw(e),tn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Md(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=KU(n),t=Kn(n,t),s){case 0:e=wm(null,e,n,t,r);break e;case 1:e=Ev(null,e,n,t,r);break e;case 11:e=Iv(null,e,n,t,r);break e;case 14:e=_v(null,e,n,Kn(n.type,t),r);break e}throw Error(we(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),wm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),Ev(t,e,n,s,r);case 3:e:{if(Q_(e),t===null)throw Error(we(387));n=e.pendingProps,A=e.memoizedState,s=A.element,i_(t,e),bh(e,n,null,r);var i=e.memoizedState;if(n=i.element,A.isDehydrated)if(A={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=A,e.memoizedState=A,e.flags&256){s=ua(Error(we(423)),e),e=Tv(t,e,n,r,s);break e}else if(n!==s){s=ua(Error(we(424)),e),e=Tv(t,e,n,r,s);break e}else for(vn=UA(e.stateNode.containerInfo.firstChild),Bn=e,$t=!0,zn=null,r=s_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(aa(),n===s){e=Ps(t,e,r);break e}tn(t,e,n,r)}e=e.child}return e;case 5:return o_(e),t===null&&hm(e),n=e.type,s=e.pendingProps,A=t!==null?t.memoizedProps:null,i=s.children,am(n,s)?i=null:A!==null&&am(n,A)&&(e.flags|=32),U_(t,e),tn(t,e,i,r),e.child;case 6:return t===null&&hm(e),null;case 13:return N_(t,e,r);case 4:return lw(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=la(e,null,n,r):tn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),Iv(t,e,n,s,r);case 7:return tn(t,e,e.pendingProps,r),e.child;case 8:return tn(t,e,e.pendingProps.children,r),e.child;case 12:return tn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,A=e.memoizedProps,i=s.value,jt(vh,n._currentValue),n._currentValue=i,A!==null)if(Xn(A.value,i)){if(A.children===s.children&&!gn.current){e=Ps(t,e,r);break e}}else for(A=e.child,A!==null&&(A.return=e);A!==null;){var l=A.dependencies;if(l!==null){i=A.child;for(var a=l.firstContext;a!==null;){if(a.context===n){if(A.tag===1){a=Us(-1,r&-r),a.tag=2;var c=A.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?a.next=a:(a.next=d.next,d.next=a),c.pending=a}}A.lanes|=r,a=A.alternate,a!==null&&(a.lanes|=r),fm(A.return,r,e),l.lanes|=r;break}a=a.next}}else if(A.tag===10)i=A.type===e.type?null:A.child;else if(A.tag===18){if(i=A.return,i===null)throw Error(we(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),fm(i,r,e),i=A.sibling}else i=A.child;if(i!==null)i.return=A;else for(i=A;i!==null;){if(i===e){i=null;break}if(A=i.sibling,A!==null){A.return=i.return,i=A;break}i=i.return}A=i}tn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Yo(e,r),s=Ln(s),n=n(s),e.flags|=1,tn(t,e,n,r),e.child;case 14:return n=e.type,s=Kn(n,e.pendingProps),s=Kn(n.type,s),_v(t,e,n,s,r);case 15:return F_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Kn(n,s),Md(t,e),e.tag=1,pn(n)?(t=!0,wh(e)):t=!1,Yo(e,r),E_(e,n,s),pm(e,n,s,r),xm(null,e,n,!0,t,r);case 19:return R_(t,e,r);case 22:return S_(t,e,r)}throw Error(we(156,e.tag))};function J_(t,e){return CI(t,e)}function VU(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,r,n){return new VU(t,e,r,n)}function Cw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KU(t){if(typeof t=="function")return Cw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V0)return 11;if(t===K0)return 14}return 2}function DA(t,e){var r=t.alternate;return r===null?(r=Rn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Vd(t,e,r,n,s,A){var i=2;if(n=t,typeof t=="function")Cw(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case No:return Pi(r.children,s,A,e);case H0:i=8,s|=8;break;case Mp:return t=Rn(12,r,e,s|2),t.elementType=Mp,t.lanes=A,t;case Op:return t=Rn(13,r,e,s),t.elementType=Op,t.lanes=A,t;case Hp:return t=Rn(19,r,e,s),t.elementType=Hp,t.lanes=A,t;case oI:return Ef(r,s,A,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case AI:i=10;break e;case iI:i=9;break e;case V0:i=11;break e;case K0:i=14;break e;case aA:i=16,n=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return e=Rn(i,r,e,s),e.elementType=t,e.type=n,e.lanes=A,e}function Pi(t,e,r,n){return t=Rn(7,t,n,e),t.lanes=r,t}function Ef(t,e,r,n){return t=Rn(22,t,n,e),t.elementType=oI,t.lanes=r,t.stateNode={isHidden:!1},t}function ep(t,e,r){return t=Rn(6,t,null,e),t.lanes=r,t}function tp(t,e,r){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GU(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rg(0),this.expirationTimes=Rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Iw(t,e,r,n,s,A,i,l,a){return t=new GU(t,e,r,l,a),e===1?(e=1,A===!0&&(e|=8)):e=0,A=Rn(3,null,null,e),t.current=A,A.stateNode=t,A.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},aw(A),t}function zU(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Y_(t){if(!t)return GA;t=t._reactInternals;e:{if(io(t)!==t||t.tag!==1)throw Error(we(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(we(171))}if(t.tag===1){var r=t.type;if(pn(r))return YI(t,r,e)}return e}function Z_(t,e,r,n,s,A,i,l,a){return t=Iw(r,n,!0,t,s,A,i,l,a),t.context=Y_(null),r=t.current,n=rn(),s=RA(r),A=Us(n,s),A.callback=e??null,QA(r,A,s),t.current.lanes=s,Yc(t,s,n),mn(t,n),t}function Tf(t,e,r,n){var s=e.current,A=rn(),i=RA(s);return r=Y_(r),e.context===null?e.context=r:e.pendingContext=r,e=Us(A,i),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=QA(s,e,i),t!==null&&(Wn(t,s,i,A),Pd(t,s,i)),i}function Sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function _w(t,e){jv(t,e),(t=t.alternate)&&jv(t,e)}function $U(){return null}var eE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ew(t){this._internalRoot=t}kf.prototype.render=Ew.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(we(409));Tf(t,e,null,null)};kf.prototype.unmount=Ew.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zi(function(){Tf(null,t,null,null)}),e[Rs]=null}};function kf(t){this._internalRoot=t}kf.prototype.unstable_scheduleHydration=function(t){if(t){var e=SI();t={blockedOn:null,target:t,priority:e};for(var r=0;r<uA.length&&e!==0&&e<uA[r].priority;r++);uA.splice(r,0,t),r===0&&QI(t)}};function Tw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lv(){}function WU(t,e,r,n,s){if(s){if(typeof n=="function"){var A=n;n=function(){var c=Sh(i);A.call(c)}}var i=Z_(e,n,t,0,null,!1,!1,"",Lv);return t._reactRootContainer=i,t[Rs]=i.current,Bc(t.nodeType===8?t.parentNode:t),zi(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=Sh(a);l.call(c)}}var a=Iw(t,0,!1,null,null,!1,!1,"",Lv);return t._reactRootContainer=a,t[Rs]=a.current,Bc(t.nodeType===8?t.parentNode:t),zi(function(){Tf(e,a,r,n)}),a}function Sf(t,e,r,n,s){var A=r._reactRootContainer;if(A){var i=A;if(typeof s=="function"){var l=s;s=function(){var a=Sh(i);l.call(a)}}Tf(e,i,t,s)}else i=WU(r,e,t,s,n);return Sh(i)}kI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Fl(e.pendingLanes);r!==0&&($0(e,r|1),mn(e,lr()),!(Bt&6)&&(da=lr()+500,Ai()))}break;case 13:zi(function(){var n=Ds(t,1);if(n!==null){var s=rn();Wn(n,t,1,s)}}),_w(t,1)}};W0=function(t){if(t.tag===13){var e=Ds(t,134217728);if(e!==null){var r=rn();Wn(e,t,134217728,r)}_w(t,134217728)}};FI=function(t){if(t.tag===13){var e=RA(t),r=Ds(t,e);if(r!==null){var n=rn();Wn(r,t,e,n)}_w(t,e)}};SI=function(){return kt};UI=function(t,e){var r=kt;try{return kt=t,e()}finally{kt=r}};Yp=function(t,e,r){switch(e){case"input":if(Gp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=vf(n);if(!s)throw Error(we(90));lI(n),Gp(n,s)}}}break;case"textarea":uI(t,r);break;case"select":e=r.value,e!=null&&Wo(t,!!r.multiple,e,!1)}};wI=vw;xI=zi;var qU={usingClientEntryPoint:!1,Events:[eu,jo,vf,pI,mI,vw]},fl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XU={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BI(t),t===null?null:t.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||$U,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yu.isDisabled&&Yu.supportsFiber)try{mf=Yu.inject(XU),as=Yu}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qU;En.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tw(e))throw Error(we(200));return zU(t,e,null,r)};En.createRoot=function(t,e){if(!Tw(t))throw Error(we(299));var r=!1,n="",s=eE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Iw(t,1,!1,null,null,r,!1,n,s),t[Rs]=e.current,Bc(t.nodeType===8?t.parentNode:t),new Ew(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=BI(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return zi(t)};En.hydrate=function(t,e,r){if(!Ff(e))throw Error(we(200));return Sf(null,t,e,!0,r)};En.hydrateRoot=function(t,e,r){if(!Tw(t))throw Error(we(405));var n=r!=null&&r.hydratedSources||null,s=!1,A="",i=eE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(A=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),e=Z_(e,null,t,1,r??null,s,!1,A,i),t[Rs]=e.current,Bc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new kf(e)};En.render=function(t,e,r){if(!Ff(e))throw Error(we(200));return Sf(null,t,e,!1,r)};En.unmountComponentAtNode=function(t){if(!Ff(t))throw Error(we(40));return t._reactRootContainer?(zi(function(){Sf(null,null,t,!1,function(){t._reactRootContainer=null,t[Rs]=null})}),!0):!1};En.unstable_batchedUpdates=vw;En.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ff(r))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return Sf(t,e,r,!1,n)};En.version="18.3.1-next-f1338f8080-20240426";function tE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tE)}catch(t){console.error(t)}}tE(),tI.exports=En;var JU=tI.exports,Mv=JU;jp.createRoot=Mv.createRoot,jp.hydrateRoot=Mv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sc(){return Sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sc.apply(this,arguments)}var BA;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(BA||(BA={}));const Ov="popstate";function YU(t){t===void 0&&(t={});function e(s,A){let{pathname:i="/",search:l="",hash:a=""}=oo(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Sm("",{pathname:i,search:l,hash:a},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function r(s,A){let i=s.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let a=s.location.href,c=a.indexOf("#");l=c===-1?a:a.slice(0,c)}return l+"#"+(typeof A=="string"?A:Uh(A))}function n(s,A){Uf(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(A)+")")}return eQ(e,r,n,t)}function tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZU(){return Math.random().toString(36).substr(2,8)}function Hv(t,e){return{usr:t.state,key:t.key,idx:e}}function Sm(t,e,r,n){return r===void 0&&(r=null),Sc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?oo(e):e,{state:r,key:e&&e.key||n||ZU()})}function Uh(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function oo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function eQ(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:A=!1}=n,i=s.history,l=BA.Pop,a=null,c=d();c==null&&(c=0,i.replaceState(Sc({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=BA.Pop;let _=d(),b=_==null?null:_-c;c=_,a&&a({action:l,location:x.location,delta:b})}function f(_,b){l=BA.Push;let w=Sm(x.location,_,b);r&&r(w,_),c=d()+1;let I=Hv(w,c),F=x.createHref(w);try{i.pushState(I,"",F)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(F)}A&&a&&a({action:l,location:x.location,delta:1})}function p(_,b){l=BA.Replace;let w=Sm(x.location,_,b);r&&r(w,_),c=d();let I=Hv(w,c),F=x.createHref(w);i.replaceState(I,"",F),A&&a&&a({action:l,location:x.location,delta:0})}function v(_){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof _=="string"?_:Uh(_);return w=w.replace(/ $/,"%20"),tr(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let x={get action(){return l},get location(){return t(s,i)},listen(_){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Ov,h),a=_,()=>{s.removeEventListener(Ov,h),a=null}},createHref(_){return e(s,_)},createURL:v,encodeLocation(_){let b=v(_);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(_){return i.go(_)}};return x}var Vv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vv||(Vv={}));function tQ(t,e,r){return r===void 0&&(r="/"),rQ(t,e,r)}function rQ(t,e,r,n){let s=typeof e=="string"?oo(e):e,A=ha(s.pathname||"/",r);if(A==null)return null;let i=rE(t);nQ(i);let l=null;for(let a=0;l==null&&a<i.length;++a){let c=fQ(A);l=dQ(i[a],c)}return l}function rE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(A,i,l)=>{let a={relativePath:l===void 0?A.path||"":l,caseSensitive:A.caseSensitive===!0,childrenIndex:i,route:A};a.relativePath.startsWith("/")&&(tr(a.relativePath.startsWith(n),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(n.length));let c=PA([n,a.relativePath]),d=r.concat(a);A.children&&A.children.length>0&&(tr(A.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rE(A.children,e,d,c)),!(A.path==null&&!A.index)&&e.push({path:c,score:cQ(c,A.index),routesMeta:d})};return t.forEach((A,i)=>{var l;if(A.path===""||!((l=A.path)!=null&&l.includes("?")))s(A,i);else for(let a of nE(A.path))s(A,i,a)}),e}function nE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),A=r.replace(/\?$/,"");if(n.length===0)return s?[A,""]:[A];let i=nE(n.join("/")),l=[];return l.push(...i.map(a=>a===""?A:[A,a].join("/"))),s&&l.push(...i),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function nQ(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:uQ(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const sQ=/^:[\w-]+$/,AQ=3,iQ=2,oQ=1,aQ=10,lQ=-2,Kv=t=>t==="*";function cQ(t,e){let r=t.split("/"),n=r.length;return r.some(Kv)&&(n+=lQ),e&&(n+=iQ),r.filter(s=>!Kv(s)).reduce((s,A)=>s+(sQ.test(A)?AQ:A===""?oQ:aQ),n)}function uQ(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function dQ(t,e,r){let{routesMeta:n}=t,s={},A="/",i=[];for(let l=0;l<n.length;++l){let a=n[l],c=l===n.length-1,d=A==="/"?e:e.slice(A.length)||"/",h=Um({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},d),f=a.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:PA([A,h.pathname]),pathnameBase:xQ(PA([A,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(A=PA([A,h.pathnameBase]))}return i}function Um(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=hQ(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let A=s[0],i=A.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let x=l[h]||"";i=A.slice(0,A.length-x.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?c[f]=void 0:c[f]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:A,pathnameBase:i,pattern:t}}function hQ(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Uf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,a)=>(n.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function fQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ha(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const gQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pQ=t=>gQ.test(t);function mQ(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?oo(t):t,A;if(r)if(pQ(r))A=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Uf(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?A=Gv(r.substring(1),"/"):A=Gv(r,e)}else A=e;return{pathname:A,search:yQ(n),hash:vQ(s)}}function Gv(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function rp(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wQ(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function kw(t,e){let r=wQ(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Fw(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=oo(t):(s=Sc({},t),tr(!s.pathname||!s.pathname.includes("?"),rp("?","pathname","search",s)),tr(!s.pathname||!s.pathname.includes("#"),rp("#","pathname","hash",s)),tr(!s.search||!s.search.includes("#"),rp("#","search","hash",s)));let A=t===""||s.pathname==="",i=A?"/":s.pathname,l;if(i==null)l=r;else{let h=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let a=mQ(s,l),c=i&&i!=="/"&&i.endsWith("/"),d=(A||i===".")&&r.endsWith("/");return!a.pathname.endsWith("/")&&(c||d)&&(a.pathname+="/"),a}const PA=t=>t.join("/").replace(/\/\/+/g,"/"),xQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yQ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vQ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sE=["post","put","patch","delete"];new Set(sE);const bQ=["get",...sE];new Set(bQ);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uc.apply(this,arguments)}const Qf=T.createContext(null),AE=T.createContext(null),Ks=T.createContext(null),Nf=T.createContext(null),Gs=T.createContext({outlet:null,matches:[],isDataRoute:!1}),iE=T.createContext(null);function CQ(t,e){let{relative:r}=e===void 0?{}:e;Ra()||tr(!1);let{basename:n,navigator:s}=T.useContext(Ks),{hash:A,pathname:i,search:l}=Rf(t,{relative:r}),a=i;return n!=="/"&&(a=i==="/"?n:PA([n,i])),s.createHref({pathname:a,search:l,hash:A})}function Ra(){return T.useContext(Nf)!=null}function ii(){return Ra()||tr(!1),T.useContext(Nf).location}function oE(t){T.useContext(Ks).static||T.useLayoutEffect(t)}function Da(){let{isDataRoute:t}=T.useContext(Gs);return t?LQ():IQ()}function IQ(){Ra()||tr(!1);let t=T.useContext(Qf),{basename:e,future:r,navigator:n}=T.useContext(Ks),{matches:s}=T.useContext(Gs),{pathname:A}=ii(),i=JSON.stringify(kw(s,r.v7_relativeSplatPath)),l=T.useRef(!1);return oE(()=>{l.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let h=Fw(c,JSON.parse(i),A,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:PA([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,A,t])}const _Q=T.createContext(null);function EQ(t){let e=T.useContext(Gs).outlet;return e&&T.createElement(_Q.Provider,{value:t},e)}function Rf(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=T.useContext(Ks),{matches:s}=T.useContext(Gs),{pathname:A}=ii(),i=JSON.stringify(kw(s,n.v7_relativeSplatPath));return T.useMemo(()=>Fw(t,JSON.parse(i),A,r==="path"),[t,i,A,r])}function TQ(t,e){return kQ(t,e)}function kQ(t,e,r,n){Ra()||tr(!1);let{navigator:s}=T.useContext(Ks),{matches:A}=T.useContext(Gs),i=A[A.length-1],l=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let c=ii(),d;if(e){var h;let _=typeof e=="string"?oo(e):e;a==="/"||(h=_.pathname)!=null&&h.startsWith(a)||tr(!1),d=_}else d=c;let f=d.pathname||"/",p=f;if(a!=="/"){let _=a.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let v=tQ(t,{pathname:p}),x=NQ(v&&v.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:PA([a,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:PA([a,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),A,r,n);return e&&x?T.createElement(Nf.Provider,{value:{location:Uc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:BA.Pop}},x):x}function FQ(){let t=jQ(),e=BQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:s},r):null,null)}const SQ=T.createElement(FQ,null);class UQ extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Gs.Provider,{value:this.props.routeContext},T.createElement(iE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QQ(t){let{routeContext:e,match:r,children:n}=t,s=T.useContext(Qf);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Gs.Provider,{value:e},n)}function NQ(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var A;if(!r)return null;if(r.errors)t=r.matches;else if((A=n)!=null&&A.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||tr(!1),i=i.slice(0,Math.min(i.length,d+1))}let a=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,v=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let p,v=!1,x=null,_=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||SQ,a&&(c<0&&f===0?(MQ("route-fallback"),v=!0,_=null):c===f&&(v=!0,_=h.route.hydrateFallbackElement||null)));let b=e.concat(i.slice(0,f+1)),w=()=>{let I;return p?I=x:v?I=_:h.route.Component?I=T.createElement(h.route.Component,null):h.route.element?I=h.route.element:I=d,T.createElement(QQ,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:r!=null},children:I})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?T.createElement(UQ,{location:r.location,revalidation:r.revalidation,component:x,error:p,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var aE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(aE||{}),lE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lE||{});function RQ(t){let e=T.useContext(Qf);return e||tr(!1),e}function DQ(t){let e=T.useContext(AE);return e||tr(!1),e}function PQ(t){let e=T.useContext(Gs);return e||tr(!1),e}function cE(t){let e=PQ(),r=e.matches[e.matches.length-1];return r.route.id||tr(!1),r.route.id}function jQ(){var t;let e=T.useContext(iE),r=DQ(),n=cE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function LQ(){let{router:t}=RQ(aE.UseNavigateStable),e=cE(lE.UseNavigateStable),r=T.useRef(!1);return oE(()=>{r.current=!0}),T.useCallback(function(s,A){A===void 0&&(A={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Uc({fromRouteId:e},A)))},[t,e])}const zv={};function MQ(t,e,r){zv[t]||(zv[t]=!0)}function OQ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Qh(t){let{to:e,replace:r,state:n,relative:s}=t;Ra()||tr(!1);let{future:A,static:i}=T.useContext(Ks),{matches:l}=T.useContext(Gs),{pathname:a}=ii(),c=Da(),d=Fw(e,kw(l,A.v7_relativeSplatPath),a,s==="path"),h=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function HQ(t){return EQ(t.context)}function Zr(t){tr(!1)}function VQ(t){let{basename:e="/",children:r=null,location:n,navigationType:s=BA.Pop,navigator:A,static:i=!1,future:l}=t;Ra()&&tr(!1);let a=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:a,navigator:A,static:i,future:Uc({v7_relativeSplatPath:!1},l)}),[a,l,A,i]);typeof n=="string"&&(n=oo(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:v="default"}=n,x=T.useMemo(()=>{let _=ha(d,a);return _==null?null:{location:{pathname:_,search:h,hash:f,state:p,key:v},navigationType:s}},[a,d,h,f,p,v,s]);return x==null?null:T.createElement(Ks.Provider,{value:c},T.createElement(Nf.Provider,{children:r,value:x}))}function KQ(t){let{children:e,location:r}=t;return TQ(Qm(e),r)}new Promise(()=>{});function Qm(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,s)=>{if(!T.isValidElement(n))return;let A=[...e,s];if(n.type===T.Fragment){r.push.apply(r,Qm(n.props.children,A));return}n.type!==Zr&&tr(!1),!n.props.index||!n.props.children||tr(!1);let i={id:n.props.id||A.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Qm(n.props.children,A)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nh(){return Nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nh.apply(this,arguments)}function uE(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,A;for(A=0;A<n.length;A++)s=n[A],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function GQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zQ(t,e){return t.button===0&&(!e||e==="_self")&&!GQ(t)}function Nm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function $Q(t,e){let r=Nm(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(A=>{r.append(s,A)})}),r}const WQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qQ=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XQ="6";try{window.__reactRouterVersion=XQ}catch{}const JQ=T.createContext({isTransitioning:!1}),YQ="startTransition",$v=M2[YQ];function ZQ(t){let{basename:e,children:r,future:n,window:s}=t,A=T.useRef();A.current==null&&(A.current=YU({window:s,v5Compat:!0}));let i=A.current,[l,a]=T.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=T.useCallback(h=>{c&&$v?$v(()=>a(h)):a(h)},[a,c]);return T.useLayoutEffect(()=>i.listen(d),[i,d]),T.useEffect(()=>OQ(n),[n]),T.createElement(VQ,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const eN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rN=T.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:A,replace:i,state:l,target:a,to:c,preventScrollReset:d,viewTransition:h}=e,f=uE(e,WQ),{basename:p}=T.useContext(Ks),v,x=!1;if(typeof c=="string"&&tN.test(c)&&(v=c,eN))try{let I=new URL(window.location.href),F=c.startsWith("//")?new URL(I.protocol+c):new URL(c),U=ha(F.pathname,p);F.origin===I.origin&&U!=null?c=U+F.search+F.hash:x=!0}catch{}let _=CQ(c,{relative:s}),b=sN(c,{replace:i,state:l,target:a,preventScrollReset:d,relative:s,viewTransition:h});function w(I){n&&n(I),I.defaultPrevented||b(I)}return T.createElement("a",Nh({},f,{href:v||_,onClick:x||A?n:w,ref:r,target:a}))}),bA=T.forwardRef(function(e,r){let{"aria-current":n="page",caseSensitive:s=!1,className:A="",end:i=!1,style:l,to:a,viewTransition:c,children:d}=e,h=uE(e,qQ),f=Rf(a,{relative:h.relative}),p=ii(),v=T.useContext(AE),{navigator:x,basename:_}=T.useContext(Ks),b=v!=null&&iN(f)&&c===!0,w=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,I=p.pathname,F=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(I=I.toLowerCase(),F=F?F.toLowerCase():null,w=w.toLowerCase()),F&&_&&(F=ha(F,_)||F);const U=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let R=I===w||!i&&I.startsWith(w)&&I.charAt(U)==="/",y=F!=null&&(F===w||!i&&F.startsWith(w)&&F.charAt(w.length)==="/"),B={isActive:R,isPending:y,isTransitioning:b},C=R?n:void 0,S;typeof A=="function"?S=A(B):S=[A,R?"active":null,y?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(B):l;return T.createElement(rN,Nh({},h,{"aria-current":C,className:S,ref:r,style:N,to:a,viewTransition:c}),typeof d=="function"?d(B):d)});var Rm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rm||(Rm={}));var Wv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Wv||(Wv={}));function nN(t){let e=T.useContext(Qf);return e||tr(!1),e}function sN(t,e){let{target:r,replace:n,state:s,preventScrollReset:A,relative:i,viewTransition:l}=e===void 0?{}:e,a=Da(),c=ii(),d=Rf(t,{relative:i});return T.useCallback(h=>{if(zQ(h,r)){h.preventDefault();let f=n!==void 0?n:Uh(c)===Uh(d);a(t,{replace:f,state:s,preventScrollReset:A,relative:i,viewTransition:l})}},[c,a,d,n,s,r,t,A,i,l])}function AN(t){let e=T.useRef(Nm(t)),r=T.useRef(!1),n=ii(),s=T.useMemo(()=>$Q(n.search,r.current?null:e.current),[n.search]),A=Da(),i=T.useCallback((l,a)=>{const c=Nm(typeof l=="function"?l(s):l);r.current=!0,A("?"+c,a)},[A,s]);return[s,i]}function iN(t,e){e===void 0&&(e={});let r=T.useContext(JQ);r==null&&tr(!1);let{basename:n}=nN(Rm.useViewTransitionState),s=Rf(t,{relative:e.relative});if(!r.isTransitioning)return!1;let A=ha(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=ha(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Um(s.pathname,i)!=null||Um(s.pathname,A)!=null}var ie=(t=>(t.First="1 ",t.Second="2 ",t))(ie||{}),dt=(t=>(t.Monday="",t.Tuesday="",t.Wednesday="",t.Thursday="",t.Friday="",t))(dt||{});const _t=["","","","",""],on={"1 ":[1,2,3,4,5,6,7],"2 ":[0,1,2,3,4,5,6]},qv=["","","/","","","",""," "],Rh=[{shift:ie.First,period:1,start:"08:00",end:"08:45",day:"default"},{shift:ie.First,period:2,start:"08:55",end:"09:40",day:"default"},{shift:ie.First,period:3,start:"09:50",end:"10:35",day:"default"},{shift:ie.First,period:4,start:"10:55",end:"11:40",day:"default"},{shift:ie.First,period:5,start:"11:50",end:"12:35",day:"default"},{shift:ie.First,period:6,start:"12:40",end:"13:25",day:"default"},{shift:ie.First,period:7,start:"13:30",end:"14:15",day:"default"},{shift:ie.Second,period:0,start:"13:30",end:"14:15",day:"default"},{shift:ie.Second,period:1,start:"14:20",end:"15:05",day:"default"},{shift:ie.Second,period:2,start:"15:15",end:"16:00",day:"default"},{shift:ie.Second,period:3,start:"16:10",end:"16:55",day:"default"},{shift:ie.Second,period:4,start:"17:05",end:"17:50",day:"default"},{shift:ie.Second,period:5,start:"18:00",end:"18:45",day:"default"},{shift:ie.Second,period:6,start:"18:50",end:"19:35",day:"default"}],oN=[{shift:ie.First,period:1,start:"08:00",end:"08:35",day:"default"},{shift:ie.First,period:2,start:"08:45",end:"09:20",day:"default"},{shift:ie.First,period:3,start:"09:30",end:"10:05",day:"default"},{shift:ie.First,period:4,start:"10:15",end:"10:50",day:"default"},{shift:ie.First,period:5,start:"11:00",end:"11:35",day:"default"},{shift:ie.First,period:6,start:"11:45",end:"12:20",day:"default"},{shift:ie.First,period:7,start:"12:30",end:"13:05",day:"default"},{shift:ie.Second,period:0,start:"12:30",end:"13:05",day:"default"},{shift:ie.Second,period:1,start:"13:15",end:"13:50",day:"default"},{shift:ie.Second,period:2,start:"14:00",end:"14:35",day:"default"},{shift:ie.Second,period:3,start:"14:45",end:"15:20",day:"default"},{shift:ie.Second,period:4,start:"15:30",end:"16:05",day:"default"},{shift:ie.Second,period:5,start:"16:15",end:"16:50",day:"default"},{shift:ie.Second,period:6,start:"17:00",end:"17:35",day:"default"}],gl=(t,e)=>Array.from({length:e-t+1},(r,n)=>String(t+n)),dE=[{id:"zone_2floor_1",name:"  (28-38)",floor:"2 ",includedRooms:gl(28,38),order:1},{id:"zone_2floor_2",name:"  (42-44)",floor:"2 ",includedRooms:gl(42,44),order:2},{id:"zone_3floor_1",name:" (65-70)",floor:"3 ",includedRooms:gl(65,70),order:3},{id:"zone_3floor_2",name:" (72-75)",floor:"3 ",includedRooms:gl(72,75),order:4},{id:"zone_3floor_3",name:"  (78-86)",floor:"3 ",includedRooms:gl(78,86),order:5}],$r={subjects:[{id:"s1",name:"",color:"#e0e7ff",difficulty:11,requiredRoomType:""},{id:"s2",name:" ",color:"#dcfce7",difficulty:10,requiredRoomType:""}],teachers:[],classes:[{id:"c1",name:"5",shift:ie.First,studentsCount:25},{id:"c2",name:"6",shift:ie.Second,studentsCount:28}],rooms:[{id:"r1",name:"101",capacity:30,type:""}],schedule:[],schedule2:[],substitutions:[],bellSchedule:Rh,dutyZones:dE,dutySchedule:[],nutritionRecords:[],settings:{telegramToken:"",publicScheduleId:null,feedbackChatId:"",bellPresets:[{id:"preset_normal",name:" (45 )",bells:Rh},{id:"preset_short",name:" (35 )",bells:oN}],semesterConfig:{firstSemesterMonths:[8,9,10,11],secondSemesterMonths:[0,1,2,3,4]}}},aN="modulepreload",lN=function(t){return"/zamenygymn/"+t},Xv={},cN=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(a=>{if(a=lN(a),a in Xv)return;Xv[a]=!0;const c=a.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":aN,c||(h.as="script"),h.crossOrigin="",h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}function A(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&A(l.reason);return e().catch(A)})};var Jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},uN=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const A=t[r++];e[n++]=String.fromCharCode((s&31)<<6|A&63)}else if(s>239&&s<365){const A=t[r++],i=t[r++],l=t[r++],a=((s&7)<<18|(A&63)<<12|(i&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(a>>10)),e[n++]=String.fromCharCode(56320+(a&1023))}else{const A=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(A&63)<<6|i&63)}}return e.join("")},fE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const A=t[s],i=s+1<t.length,l=i?t[s+1]:0,a=s+2<t.length,c=a?t[s+2]:0,d=A>>2,h=(A&3)<<4|l>>4;let f=(l&15)<<2|c>>6,p=c&63;a||(p=64,i||(f=64)),n.push(r[d],r[h],r[f],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const A=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,A==null||l==null||c==null||h==null)throw new dN;const f=A<<2|l>>4;if(n.push(f),c!==64){const p=l<<4&240|c>>2;if(n.push(p),h!==64){const v=c<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hN=function(t){const e=hE(t);return fE.encodeByteArray(e,!0)},Dh=function(t){return hN(t).replace(/\./g,"")},gE=function(t){try{return fE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=()=>fN().__FIREBASE_DEFAULTS__,pN=()=>{if(typeof process>"u"||typeof Jv>"u")return;const t=Jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gE(t[1]);return e&&JSON.parse(e)},Df=()=>{try{return gN()||pN()||mN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pE=t=>{var e,r;return(r=(e=Df())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},wN=t=>{const e=pE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},mE=()=>{var t;return(t=Df())===null||t===void 0?void 0:t.config},wE=t=>{var e;return(e=Df())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,A=t.sub||t.user_id;if(!A)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:A,user_id:A,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Dh(JSON.stringify(r)),Dh(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function BN(){var t;const e=(t=Df())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _N(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xE(){return!BN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yE(){try{return typeof indexedDB=="object"}catch{return!1}}function EN(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var A;e(((A=s.error)===null||A===void 0?void 0:A.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="FirebaseError";class zs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=TN,Object.setPrototypeOf(this,zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ru.prototype.create)}}class ru{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,A=this.errors[e],i=A?kN(A,n):"Error",l=`${this.serviceName}: ${i} (${s}).`;return new zs(s,l,n)}}function kN(t,e){return t.replace(FN,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const FN=/\{\$([^}]+)}/g;function SN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zA(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const A=t[s],i=e[s];if(Yv(A)&&Yv(i)){if(!zA(A,i))return!1}else if(A!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Yv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,A]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(A)}}),e}function Ql(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function UN(t,e){const r=new QN(t,e);return r.subscribe.bind(r)}class QN{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");NN(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=np),s.error===void 0&&(s.error=np),s.complete===void 0&&(s.complete=np);const A=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),A}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NN(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class $i{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new xN;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(A){if(s)return null;throw A}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PN(e))try{this.getOrInitializeService({instanceIdentifier:Ii})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const A=this.getOrInitializeService({instanceIdentifier:s});n.resolve(A)}catch{}}}}clearInstance(e=Ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ii){return this.instances.has(e)}getOptions(e=Ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[A,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(A);n===l&&i.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),A=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;A.add(e),this.onInitCallbacks.set(s,A);const i=this.instances.get(s);return i&&e(i,s),()=>{A.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:DN(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ii){return this.component?this.component.multipleInstances?e:Ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DN(t){return t===Ii?void 0:t}function PN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new RN(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pt||(pt={}));const LN={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},MN=pt.INFO,ON={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},HN=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=ON[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Sw=class{constructor(e){this.name=e,this._logLevel=MN,this._logHandler=HN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...e),this._logHandler(this,pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...e),this._logHandler(this,pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...e),this._logHandler(this,pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...e),this._logHandler(this,pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...e),this._logHandler(this,pt.ERROR,...e)}};const VN=(t,e)=>e.some(r=>t instanceof r);let Zv,eB;function KN(){return Zv||(Zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GN(){return eB||(eB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vE=new WeakMap,Dm=new WeakMap,BE=new WeakMap,sp=new WeakMap,Uw=new WeakMap;function zN(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",A),t.removeEventListener("error",i)},A=()=>{r(jA(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",A),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&vE.set(r,t)}).catch(()=>{}),Uw.set(e,t),e}function $N(t){if(Dm.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",A),t.removeEventListener("error",i),t.removeEventListener("abort",i)},A=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",A),t.addEventListener("error",i),t.addEventListener("abort",i)});Dm.set(t,e)}let Pm={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Dm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return jA(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WN(t){Pm=t(Pm)}function qN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Ap(this),e,...r);return BE.set(n,e.sort?e.sort():[e]),jA(n)}:GN().includes(t)?function(...e){return t.apply(Ap(this),e),jA(vE.get(this))}:function(...e){return jA(t.apply(Ap(this),e))}}function XN(t){return typeof t=="function"?qN(t):(t instanceof IDBTransaction&&$N(t),VN(t,KN())?new Proxy(t,Pm):t)}function jA(t){if(t instanceof IDBRequest)return zN(t);if(sp.has(t))return sp.get(t);const e=XN(t);return e!==t&&(sp.set(t,e),Uw.set(e,t)),e}const Ap=t=>Uw.get(t);function JN(t,e,{blocked:r,upgrade:n,blocking:s,terminated:A}={}){const i=indexedDB.open(t,e),l=jA(i);return n&&i.addEventListener("upgradeneeded",a=>{n(jA(i.result),a.oldVersion,a.newVersion,jA(i.transaction),a)}),r&&i.addEventListener("blocked",a=>r(a.oldVersion,a.newVersion,a)),l.then(a=>{A&&a.addEventListener("close",()=>A()),s&&a.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const YN=["get","getKey","getAll","getAllKeys","count"],ZN=["put","add","delete","clear"],ip=new Map;function tB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=ZN.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||YN.includes(r)))return;const A=async function(i,...l){const a=this.transaction(i,s?"readwrite":"readonly");let c=a.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&a.done]))[0]};return ip.set(e,A),A}WN(t=>({...t,get:(e,r,n)=>tB(e,r)||t.get(e,r,n),has:(e,r)=>!!tB(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(tR(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function tR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jm="@firebase/app",rB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Sw("@firebase/app"),rR="@firebase/app-compat",nR="@firebase/analytics-compat",sR="@firebase/analytics",AR="@firebase/app-check-compat",iR="@firebase/app-check",oR="@firebase/auth",aR="@firebase/auth-compat",lR="@firebase/database",cR="@firebase/data-connect",uR="@firebase/database-compat",dR="@firebase/functions",hR="@firebase/functions-compat",fR="@firebase/installations",gR="@firebase/installations-compat",pR="@firebase/messaging",mR="@firebase/messaging-compat",wR="@firebase/performance",xR="@firebase/performance-compat",yR="@firebase/remote-config",vR="@firebase/remote-config-compat",BR="@firebase/storage",bR="@firebase/storage-compat",CR="@firebase/firestore",IR="@firebase/vertexai-preview",_R="@firebase/firestore-compat",ER="firebase",TR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="[DEFAULT]",kR={[jm]:"fire-core",[rR]:"fire-core-compat",[sR]:"fire-analytics",[nR]:"fire-analytics-compat",[iR]:"fire-app-check",[AR]:"fire-app-check-compat",[oR]:"fire-auth",[aR]:"fire-auth-compat",[lR]:"fire-rtdb",[cR]:"fire-data-connect",[uR]:"fire-rtdb-compat",[dR]:"fire-fn",[hR]:"fire-fn-compat",[fR]:"fire-iid",[gR]:"fire-iid-compat",[pR]:"fire-fcm",[mR]:"fire-fcm-compat",[wR]:"fire-perf",[xR]:"fire-perf-compat",[yR]:"fire-rc",[vR]:"fire-rc-compat",[BR]:"fire-gcs",[bR]:"fire-gcs-compat",[CR]:"fire-fst",[_R]:"fire-fst-compat",[IR]:"fire-vertex","fire-js":"fire-js",[ER]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=new Map,FR=new Map,Lm=new Map;function nB(t,e){try{t.container.addComponent(e)}catch(r){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function fa(t){const e=t.name;if(Lm.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,t);for(const r of Qc.values())nB(r,t);for(const r of FR.values())nB(r,t);return!0}function su(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function SR(t,e,r=Ph){su(t,e).clearInstance(r)}function Es(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},LA=new ru("app","Firebase",UR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw LA.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=TR;function bE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ph,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw LA.create("bad-app-name",{appName:String(s)});if(r||(r=mE()),!r)throw LA.create("no-options");const A=Qc.get(s);if(A){if(zA(r,A.options)&&zA(n,A.config))return A;throw LA.create("duplicate-app",{appName:s})}const i=new jN(s);for(const a of Lm.values())i.addComponent(a);const l=new QR(r,n,i);return Qc.set(s,l),l}function Qw(t=Ph){const e=Qc.get(t);if(!e&&t===Ph&&mE())return bE();if(!e)throw LA.create("no-app",{appName:t});return e}function NR(){return Array.from(Qc.values())}function MA(t,e,r){var n;let s=(n=kR[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const A=s.match(/\s|\//),i=e.match(/\s|\//);if(A||i){const l=[`Unable to register library "${s}" with version "${e}":`];A&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),A&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(l.join(" "));return}fa(new $i(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firebase-heartbeat-database",DR=1,Nc="firebase-heartbeat-store";let op=null;function CE(){return op||(op=JN(RR,DR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Nc)}catch(r){console.warn(r)}}}}).catch(t=>{throw LA.create("idb-open",{originalErrorMessage:t.message})})),op}async function PR(t){try{const r=(await CE()).transaction(Nc),n=await r.objectStore(Nc).get(IE(t));return await r.done,n}catch(e){if(e instanceof zs)js.warn(e.message);else{const r=LA.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(r.message)}}}async function sB(t,e){try{const n=(await CE()).transaction(Nc,"readwrite");await n.objectStore(Nc).put(e,IE(t)),await n.done}catch(r){if(r instanceof zs)js.warn(r.message);else{const n=LA.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});js.warn(n.message)}}}function IE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=1024,LR=30*24*60*60*1e3;class MR{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new HR(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=AB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(i=>i.date===A)?void 0:(this._heartbeatsCache.heartbeats.push({date:A,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const l=new Date(i.date).valueOf();return Date.now()-l<=LR}),this._storage.overwrite(this._heartbeatsCache))}catch(n){js.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=AB(),{heartbeatsToSend:n,unsentEntries:s}=OR(this._heartbeatsCache.heartbeats),A=Dh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),A}catch(r){return js.warn(r),""}}}function AB(){return new Date().toISOString().substring(0,10)}function OR(t,e=jR){const r=[];let n=t.slice();for(const s of t){const A=r.find(i=>i.agent===s.agent);if(A){if(A.dates.push(s.date),iB(r)>e){A.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),iB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class HR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yE()?EN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await PR(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return sB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return sB(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function iB(t){return Dh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){fa(new $i("platform-logger",e=>new eR(e),"PRIVATE")),fa(new $i("heartbeat",e=>new MR(e),"PRIVATE")),MA(jm,rB,t),MA(jm,rB,"esm2017"),MA("fire-js","")}VR("");var KR="firebase",GR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */MA(KR,GR,"app");var oB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,_E;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,B){function C(){}C.prototype=B.prototype,y.D=B.prototype,y.prototype=new C,y.prototype.constructor=y,y.C=function(S,N,P){for(var E=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)E[Ke-2]=arguments[Ke];return B.prototype[N].apply(S,E)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(y,B,C){C||(C=0);var S=Array(16);if(typeof B=="string")for(var N=0;16>N;++N)S[N]=B.charCodeAt(C++)|B.charCodeAt(C++)<<8|B.charCodeAt(C++)<<16|B.charCodeAt(C++)<<24;else for(N=0;16>N;++N)S[N]=B[C++]|B[C++]<<8|B[C++]<<16|B[C++]<<24;B=y.g[0],C=y.g[1],N=y.g[2];var P=y.g[3],E=B+(P^C&(N^P))+S[0]+3614090360&4294967295;B=C+(E<<7&4294967295|E>>>25),E=P+(N^B&(C^N))+S[1]+3905402710&4294967295,P=B+(E<<12&4294967295|E>>>20),E=N+(C^P&(B^C))+S[2]+606105819&4294967295,N=P+(E<<17&4294967295|E>>>15),E=C+(B^N&(P^B))+S[3]+3250441966&4294967295,C=N+(E<<22&4294967295|E>>>10),E=B+(P^C&(N^P))+S[4]+4118548399&4294967295,B=C+(E<<7&4294967295|E>>>25),E=P+(N^B&(C^N))+S[5]+1200080426&4294967295,P=B+(E<<12&4294967295|E>>>20),E=N+(C^P&(B^C))+S[6]+2821735955&4294967295,N=P+(E<<17&4294967295|E>>>15),E=C+(B^N&(P^B))+S[7]+4249261313&4294967295,C=N+(E<<22&4294967295|E>>>10),E=B+(P^C&(N^P))+S[8]+1770035416&4294967295,B=C+(E<<7&4294967295|E>>>25),E=P+(N^B&(C^N))+S[9]+2336552879&4294967295,P=B+(E<<12&4294967295|E>>>20),E=N+(C^P&(B^C))+S[10]+4294925233&4294967295,N=P+(E<<17&4294967295|E>>>15),E=C+(B^N&(P^B))+S[11]+2304563134&4294967295,C=N+(E<<22&4294967295|E>>>10),E=B+(P^C&(N^P))+S[12]+1804603682&4294967295,B=C+(E<<7&4294967295|E>>>25),E=P+(N^B&(C^N))+S[13]+4254626195&4294967295,P=B+(E<<12&4294967295|E>>>20),E=N+(C^P&(B^C))+S[14]+2792965006&4294967295,N=P+(E<<17&4294967295|E>>>15),E=C+(B^N&(P^B))+S[15]+1236535329&4294967295,C=N+(E<<22&4294967295|E>>>10),E=B+(N^P&(C^N))+S[1]+4129170786&4294967295,B=C+(E<<5&4294967295|E>>>27),E=P+(C^N&(B^C))+S[6]+3225465664&4294967295,P=B+(E<<9&4294967295|E>>>23),E=N+(B^C&(P^B))+S[11]+643717713&4294967295,N=P+(E<<14&4294967295|E>>>18),E=C+(P^B&(N^P))+S[0]+3921069994&4294967295,C=N+(E<<20&4294967295|E>>>12),E=B+(N^P&(C^N))+S[5]+3593408605&4294967295,B=C+(E<<5&4294967295|E>>>27),E=P+(C^N&(B^C))+S[10]+38016083&4294967295,P=B+(E<<9&4294967295|E>>>23),E=N+(B^C&(P^B))+S[15]+3634488961&4294967295,N=P+(E<<14&4294967295|E>>>18),E=C+(P^B&(N^P))+S[4]+3889429448&4294967295,C=N+(E<<20&4294967295|E>>>12),E=B+(N^P&(C^N))+S[9]+568446438&4294967295,B=C+(E<<5&4294967295|E>>>27),E=P+(C^N&(B^C))+S[14]+3275163606&4294967295,P=B+(E<<9&4294967295|E>>>23),E=N+(B^C&(P^B))+S[3]+4107603335&4294967295,N=P+(E<<14&4294967295|E>>>18),E=C+(P^B&(N^P))+S[8]+1163531501&4294967295,C=N+(E<<20&4294967295|E>>>12),E=B+(N^P&(C^N))+S[13]+2850285829&4294967295,B=C+(E<<5&4294967295|E>>>27),E=P+(C^N&(B^C))+S[2]+4243563512&4294967295,P=B+(E<<9&4294967295|E>>>23),E=N+(B^C&(P^B))+S[7]+1735328473&4294967295,N=P+(E<<14&4294967295|E>>>18),E=C+(P^B&(N^P))+S[12]+2368359562&4294967295,C=N+(E<<20&4294967295|E>>>12),E=B+(C^N^P)+S[5]+4294588738&4294967295,B=C+(E<<4&4294967295|E>>>28),E=P+(B^C^N)+S[8]+2272392833&4294967295,P=B+(E<<11&4294967295|E>>>21),E=N+(P^B^C)+S[11]+1839030562&4294967295,N=P+(E<<16&4294967295|E>>>16),E=C+(N^P^B)+S[14]+4259657740&4294967295,C=N+(E<<23&4294967295|E>>>9),E=B+(C^N^P)+S[1]+2763975236&4294967295,B=C+(E<<4&4294967295|E>>>28),E=P+(B^C^N)+S[4]+1272893353&4294967295,P=B+(E<<11&4294967295|E>>>21),E=N+(P^B^C)+S[7]+4139469664&4294967295,N=P+(E<<16&4294967295|E>>>16),E=C+(N^P^B)+S[10]+3200236656&4294967295,C=N+(E<<23&4294967295|E>>>9),E=B+(C^N^P)+S[13]+681279174&4294967295,B=C+(E<<4&4294967295|E>>>28),E=P+(B^C^N)+S[0]+3936430074&4294967295,P=B+(E<<11&4294967295|E>>>21),E=N+(P^B^C)+S[3]+3572445317&4294967295,N=P+(E<<16&4294967295|E>>>16),E=C+(N^P^B)+S[6]+76029189&4294967295,C=N+(E<<23&4294967295|E>>>9),E=B+(C^N^P)+S[9]+3654602809&4294967295,B=C+(E<<4&4294967295|E>>>28),E=P+(B^C^N)+S[12]+3873151461&4294967295,P=B+(E<<11&4294967295|E>>>21),E=N+(P^B^C)+S[15]+530742520&4294967295,N=P+(E<<16&4294967295|E>>>16),E=C+(N^P^B)+S[2]+3299628645&4294967295,C=N+(E<<23&4294967295|E>>>9),E=B+(N^(C|~P))+S[0]+4096336452&4294967295,B=C+(E<<6&4294967295|E>>>26),E=P+(C^(B|~N))+S[7]+1126891415&4294967295,P=B+(E<<10&4294967295|E>>>22),E=N+(B^(P|~C))+S[14]+2878612391&4294967295,N=P+(E<<15&4294967295|E>>>17),E=C+(P^(N|~B))+S[5]+4237533241&4294967295,C=N+(E<<21&4294967295|E>>>11),E=B+(N^(C|~P))+S[12]+1700485571&4294967295,B=C+(E<<6&4294967295|E>>>26),E=P+(C^(B|~N))+S[3]+2399980690&4294967295,P=B+(E<<10&4294967295|E>>>22),E=N+(B^(P|~C))+S[10]+4293915773&4294967295,N=P+(E<<15&4294967295|E>>>17),E=C+(P^(N|~B))+S[1]+2240044497&4294967295,C=N+(E<<21&4294967295|E>>>11),E=B+(N^(C|~P))+S[8]+1873313359&4294967295,B=C+(E<<6&4294967295|E>>>26),E=P+(C^(B|~N))+S[15]+4264355552&4294967295,P=B+(E<<10&4294967295|E>>>22),E=N+(B^(P|~C))+S[6]+2734768916&4294967295,N=P+(E<<15&4294967295|E>>>17),E=C+(P^(N|~B))+S[13]+1309151649&4294967295,C=N+(E<<21&4294967295|E>>>11),E=B+(N^(C|~P))+S[4]+4149444226&4294967295,B=C+(E<<6&4294967295|E>>>26),E=P+(C^(B|~N))+S[11]+3174756917&4294967295,P=B+(E<<10&4294967295|E>>>22),E=N+(B^(P|~C))+S[2]+718787259&4294967295,N=P+(E<<15&4294967295|E>>>17),E=C+(P^(N|~B))+S[9]+3951481745&4294967295,y.g[0]=y.g[0]+B&4294967295,y.g[1]=y.g[1]+(N+(E<<21&4294967295|E>>>11))&4294967295,y.g[2]=y.g[2]+N&4294967295,y.g[3]=y.g[3]+P&4294967295}n.prototype.u=function(y,B){B===void 0&&(B=y.length);for(var C=B-this.blockSize,S=this.B,N=this.h,P=0;P<B;){if(N==0)for(;P<=C;)s(this,y,P),P+=this.blockSize;if(typeof y=="string"){for(;P<B;)if(S[N++]=y.charCodeAt(P++),N==this.blockSize){s(this,S),N=0;break}}else for(;P<B;)if(S[N++]=y[P++],N==this.blockSize){s(this,S),N=0;break}}this.h=N,this.o+=B},n.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var B=1;B<y.length-8;++B)y[B]=0;var C=8*this.o;for(B=y.length-8;B<y.length;++B)y[B]=C&255,C/=256;for(this.u(y),y=Array(16),B=C=0;4>B;++B)for(var S=0;32>S;S+=8)y[C++]=this.g[B]>>>S&255;return y};function A(y,B){var C=l;return Object.prototype.hasOwnProperty.call(C,y)?C[y]:C[y]=B(y)}function i(y,B){this.h=B;for(var C=[],S=!0,N=y.length-1;0<=N;N--){var P=y[N]|0;S&&P==B||(C[N]=P,S=!1)}this.g=C}var l={};function a(y){return-128<=y&&128>y?A(y,function(B){return new i([B|0],0>B?-1:0)}):new i([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return h;if(0>y)return _(c(-y));for(var B=[],C=1,S=0;y>=C;S++)B[S]=y/C|0,C*=4294967296;return new i(B,0)}function d(y,B){if(y.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(y.charAt(0)=="-")return _(d(y.substring(1),B));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(B,8)),S=h,N=0;N<y.length;N+=8){var P=Math.min(8,y.length-N),E=parseInt(y.substring(N,N+P),B);8>P?(P=c(Math.pow(B,P)),S=S.j(P).add(c(E))):(S=S.j(C),S=S.add(c(E)))}return S}var h=a(0),f=a(1),p=a(16777216);t=i.prototype,t.m=function(){if(x(this))return-_(this).m();for(var y=0,B=1,C=0;C<this.g.length;C++){var S=this.i(C);y+=(0<=S?S:4294967296+S)*B,B*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(v(this))return"0";if(x(this))return"-"+_(this).toString(y);for(var B=c(Math.pow(y,6)),C=this,S="";;){var N=F(C,B).g;C=b(C,N.j(B));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(y);if(C=N,v(C))return P+S;for(;6>P.length;)P="0"+P;S=P+S}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function v(y){if(y.h!=0)return!1;for(var B=0;B<y.g.length;B++)if(y.g[B]!=0)return!1;return!0}function x(y){return y.h==-1}t.l=function(y){return y=b(this,y),x(y)?-1:v(y)?0:1};function _(y){for(var B=y.g.length,C=[],S=0;S<B;S++)C[S]=~y.g[S];return new i(C,~y.h).add(f)}t.abs=function(){return x(this)?_(this):this},t.add=function(y){for(var B=Math.max(this.g.length,y.g.length),C=[],S=0,N=0;N<=B;N++){var P=S+(this.i(N)&65535)+(y.i(N)&65535),E=(P>>>16)+(this.i(N)>>>16)+(y.i(N)>>>16);S=E>>>16,P&=65535,E&=65535,C[N]=E<<16|P}return new i(C,C[C.length-1]&-2147483648?-1:0)};function b(y,B){return y.add(_(B))}t.j=function(y){if(v(this)||v(y))return h;if(x(this))return x(y)?_(this).j(_(y)):_(_(this).j(y));if(x(y))return _(this.j(_(y)));if(0>this.l(p)&&0>y.l(p))return c(this.m()*y.m());for(var B=this.g.length+y.g.length,C=[],S=0;S<2*B;S++)C[S]=0;for(S=0;S<this.g.length;S++)for(var N=0;N<y.g.length;N++){var P=this.i(S)>>>16,E=this.i(S)&65535,Ke=y.i(N)>>>16,We=y.i(N)&65535;C[2*S+2*N]+=E*We,w(C,2*S+2*N),C[2*S+2*N+1]+=P*We,w(C,2*S+2*N+1),C[2*S+2*N+1]+=E*Ke,w(C,2*S+2*N+1),C[2*S+2*N+2]+=P*Ke,w(C,2*S+2*N+2)}for(S=0;S<B;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=B;S<2*B;S++)C[S]=0;return new i(C,0)};function w(y,B){for(;(y[B]&65535)!=y[B];)y[B+1]+=y[B]>>>16,y[B]&=65535,B++}function I(y,B){this.g=y,this.h=B}function F(y,B){if(v(B))throw Error("division by zero");if(v(y))return new I(h,h);if(x(y))return B=F(_(y),B),new I(_(B.g),_(B.h));if(x(B))return B=F(y,_(B)),new I(_(B.g),B.h);if(30<y.g.length){if(x(y)||x(B))throw Error("slowDivide_ only works with positive integers.");for(var C=f,S=B;0>=S.l(y);)C=U(C),S=U(S);var N=R(C,1),P=R(S,1);for(S=R(S,2),C=R(C,2);!v(S);){var E=P.add(S);0>=E.l(y)&&(N=N.add(C),P=E),S=R(S,1),C=R(C,1)}return B=b(y,N.j(B)),new I(N,B)}for(N=h;0<=y.l(B);){for(C=Math.max(1,Math.floor(y.m()/B.m())),S=Math.ceil(Math.log(C)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),P=c(C),E=P.j(B);x(E)||0<E.l(y);)C-=S,P=c(C),E=P.j(B);v(P)&&(P=f),N=N.add(P),y=b(y,E)}return new I(N,y)}t.A=function(y){return F(this,y).h},t.and=function(y){for(var B=Math.max(this.g.length,y.g.length),C=[],S=0;S<B;S++)C[S]=this.i(S)&y.i(S);return new i(C,this.h&y.h)},t.or=function(y){for(var B=Math.max(this.g.length,y.g.length),C=[],S=0;S<B;S++)C[S]=this.i(S)|y.i(S);return new i(C,this.h|y.h)},t.xor=function(y){for(var B=Math.max(this.g.length,y.g.length),C=[],S=0;S<B;S++)C[S]=this.i(S)^y.i(S);return new i(C,this.h^y.h)};function U(y){for(var B=y.g.length+1,C=[],S=0;S<B;S++)C[S]=y.i(S)<<1|y.i(S-1)>>>31;return new i(C,y.h)}function R(y,B){var C=B>>5;B%=32;for(var S=y.g.length-C,N=[],P=0;P<S;P++)N[P]=0<B?y.i(P+C)>>>B|y.i(P+C+1)<<32-B:y.i(P+C);return new i(N,y.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,_E=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=d,ji=i}).apply(typeof oB<"u"?oB:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,Nl,TE,Kd,Mm,kE,FE,SE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,m){return u==Array.prototype||u==Object.prototype||(u[g]=m.value),u};function r(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var g=0;g<u.length;++g){var m=u[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var n=r(this);function s(u,g){if(g)e:{var m=n;u=u.split(".");for(var k=0;k<u.length-1;k++){var M=u[k];if(!(M in m))break e;m=m[M]}u=u[u.length-1],k=m[u],g=g(k),g!=k&&g!=null&&e(m,u,{configurable:!0,writable:!0,value:g})}}function A(u,g){u instanceof String&&(u+="");var m=0,k=!1,M={next:function(){if(!k&&m<u.length){var J=m++;return{value:g(J,u[J]),done:!1}}return k=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return A(this,function(g,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},l=this||self;function a(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,m){return u.call.apply(u.bind,arguments)}function h(u,g,m){if(!u)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,k),u.apply(g,M)}}return function(){return u.apply(g,arguments)}}function f(u,g,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(u,g){var m=Array.prototype.slice.call(arguments,1);return function(){var k=m.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function v(u,g){function m(){}m.prototype=g.prototype,u.aa=g.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(k,M,J){for(var Se=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)Se[Nt-2]=arguments[Nt];return g.prototype[M].apply(k,Se)}}function x(u){const g=u.length;if(0<g){const m=Array(g);for(let k=0;k<g;k++)m[k]=u[k];return m}return[]}function _(u,g){for(let m=1;m<arguments.length;m++){const k=arguments[m];if(a(k)){const M=u.length||0,J=k.length||0;u.length=M+J;for(let Se=0;Se<J;Se++)u[M+Se]=k[Se]}else u.push(k)}}class b{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function R(u,g,m){for(const k in u)g.call(m,u[k],k,u)}function y(u,g){for(const m in u)g.call(void 0,u[m],m,u)}function B(u){const g={};for(const m in u)g[m]=u[m];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,g){let m,k;for(let M=1;M<arguments.length;M++){k=arguments[M];for(m in k)u[m]=k[m];for(let J=0;J<C.length;J++)m=C[J],Object.prototype.hasOwnProperty.call(k,m)&&(u[m]=k[m])}}function N(u){var g=1;u=u.split(":");const m=[];for(;0<g&&u.length;)m.push(u.shift()),g--;return u.length&&m.push(u.join(":")),m}function P(u){l.setTimeout(()=>{throw u},0)}function E(){var u=Te;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ke{constructor(){this.h=this.g=null}add(g,m){const k=We.get();k.set(g,m),this.h?this.h.next=k:this.g=k,this.h=k}}var We=new b(()=>new st,u=>u.reset());class st{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Le,ce=!1,Te=new Ke,Pe=()=>{const u=l.Promise.resolve(void 0);Le=()=>{u.then(Ze)}};var Ze=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(m){P(m)}var g=We;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}ce=!1};function Ge(){this.s=this.s,this.C=this.C}Ge.prototype.s=!1,Ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};l.addEventListener("test",m,g),l.removeEventListener("test",m,g)}catch{}return u}();function W(u,g){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(U){e:{try{F(g.nodeName);var M=!0;break e}catch{}M=!1}M||(g=null)}}else m=="mouseover"?g=u.fromElement:m=="mouseout"&&(g=u.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&W.aa.h.call(this)}}v(W,$);var pe={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),At=0;function ut(u,g,m,k,M){this.listener=u,this.proxy=null,this.src=g,this.type=m,this.capture=!!k,this.ha=M,this.key=++At,this.da=this.fa=!1}function te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u){this.src=u,this.g={},this.h=0}ue.prototype.add=function(u,g,m,k,M){var J=u.toString();u=this.g[J],u||(u=this.g[J]=[],this.h++);var Se=de(u,g,k,M);return-1<Se?(g=u[Se],m||(g.fa=!1)):(g=new ut(g,this.src,J,!!k,M),g.fa=m,u.push(g)),g};function fe(u,g){var m=g.type;if(m in u.g){var k=u.g[m],M=Array.prototype.indexOf.call(k,g,void 0),J;(J=0<=M)&&Array.prototype.splice.call(k,M,1),J&&(te(g),u.g[m].length==0&&(delete u.g[m],u.h--))}}function de(u,g,m,k){for(var M=0;M<u.length;++M){var J=u[M];if(!J.da&&J.listener==g&&J.capture==!!m&&J.ha==k)return M}return-1}var j="closure_lm_"+(1e6*Math.random()|0),Y={};function ee(u,g,m,k,M){if(Array.isArray(g)){for(var J=0;J<g.length;J++)ee(u,g[J],m,k,M);return null}return m=Ce(m),u&&u[Ie]?u.K(g,m,c(k)?!!k.capture:!1,M):xe(u,g,m,!1,k,M)}function xe(u,g,m,k,M,J){if(!g)throw Error("Invalid event type");var Se=c(M)?!!M.capture:!!M,Nt=ge(u);if(Nt||(u[j]=Nt=new ue(u)),m=Nt.add(g,m,k,Se,J),m.proxy)return m;if(k=Je(),m.proxy=k,k.src=u,k.listener=m,u.addEventListener)he||(M=Se),M===void 0&&(M=!1),u.addEventListener(g.toString(),k,M);else if(u.attachEvent)u.attachEvent(re(g.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Je(){function u(m){return g.call(u.src,u.listener,m)}const g=tt;return u}function K(u,g,m,k,M){if(Array.isArray(g))for(var J=0;J<g.length;J++)K(u,g[J],m,k,M);else k=c(k)?!!k.capture:!!k,m=Ce(m),u&&u[Ie]?(u=u.i,g=String(g).toString(),g in u.g&&(J=u.g[g],m=de(J,m,k,M),-1<m&&(te(J[m]),Array.prototype.splice.call(J,m,1),J.length==0&&(delete u.g[g],u.h--)))):u&&(u=ge(u))&&(g=u.g[g.toString()],u=-1,g&&(u=de(g,m,k,M)),(m=-1<u?g[u]:null)&&G(m))}function G(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ie])fe(g.i,u);else{var m=u.type,k=u.proxy;g.removeEventListener?g.removeEventListener(m,k,u.capture):g.detachEvent?g.detachEvent(re(m),k):g.addListener&&g.removeListener&&g.removeListener(k),(m=ge(g))?(fe(m,u),m.h==0&&(m.src=null,g[j]=null)):te(u)}}}function re(u){return u in Y?Y[u]:Y[u]="on"+u}function tt(u,g){if(u.da)u=!0;else{g=new W(g,this);var m=u.listener,k=u.ha||u.src;u.fa&&G(u),u=m.call(k,g)}return u}function ge(u){return u=u[j],u instanceof ue?u:null}var Re="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(u){return typeof u=="function"?u:(u[Re]||(u[Re]=function(g){return u.handleEvent(g)}),u[Re])}function ae(){Ge.call(this),this.i=new ue(this),this.M=this,this.F=null}v(ae,Ge),ae.prototype[Ie]=!0,ae.prototype.removeEventListener=function(u,g,m,k){K(this,u,g,m,k)};function me(u,g){var m,k=u.F;if(k)for(m=[];k;k=k.F)m.push(k);if(u=u.M,k=g.type||g,typeof g=="string")g=new $(g,u);else if(g instanceof $)g.target=g.target||u;else{var M=g;g=new $(k,u),S(g,M)}if(M=!0,m)for(var J=m.length-1;0<=J;J--){var Se=g.g=m[J];M=Ue(Se,k,!0,g)&&M}if(Se=g.g=u,M=Ue(Se,k,!0,g)&&M,M=Ue(Se,k,!1,g)&&M,m)for(J=0;J<m.length;J++)Se=g.g=m[J],M=Ue(Se,k,!1,g)&&M}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var m=u.g[g],k=0;k<m.length;k++)te(m[k]);delete u.g[g],u.h--}}this.F=null},ae.prototype.K=function(u,g,m,k){return this.i.add(String(u),g,!1,m,k)},ae.prototype.L=function(u,g,m,k){return this.i.add(String(u),g,!0,m,k)};function Ue(u,g,m,k){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var M=!0,J=0;J<g.length;++J){var Se=g[J];if(Se&&!Se.da&&Se.capture==m){var Nt=Se.listener,Sr=Se.ha||Se.src;Se.fa&&fe(u.i,Se),M=Nt.call(Sr,k)!==!1&&M}}return M&&!k.defaultPrevented}function qe(u,g,m){if(typeof u=="function")m&&(u=f(u,m));else if(u&&typeof u.handleEvent=="function")u=f(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(u,g||0)}function ke(u){u.g=qe(()=>{u.g=null,u.i&&(u.i=!1,ke(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class at extends Ge{constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ke(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function et(u){Ge.call(this),this.h=u,this.g={}}v(et,Ge);var ct=[];function Ne(u){R(u.g,function(g,m){this.g.hasOwnProperty(m)&&G(g)},u),u.g={}}et.prototype.N=function(){et.aa.N.call(this),Ne(this)},et.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=l.JSON.stringify,Xe=l.JSON.parse,lt=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function Ct(){}Ct.prototype.h=null;function vt(u){return u.h||(u.h=u.i())}function D(){}var X={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function q(){$.call(this,"d")}v(q,$);function H(){$.call(this,"c")}v(H,$);var De={},Ee=null;function ve(){return Ee=Ee||new ae}De.La="serverreachability";function _e(u){$.call(this,De.La,u)}v(_e,$);function He(u){const g=ve();me(g,new _e(g))}De.STAT_EVENT="statevent";function Q(u,g){$.call(this,De.STAT_EVENT,u),this.stat=g}v(Q,$);function V(u){const g=ve();me(g,new Q(g,u))}De.Ma="timingevent";function ne(u,g){$.call(this,De.Ma,u),this.size=g}v(ne,$);function Z(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},g)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function se(u,g,m,k,M,J){u.info(function(){if(u.g)if(J)for(var Se="",Nt=J.split("&"),Sr=0;Sr<Nt.length;Sr++){var bt=Nt[Sr].split("=");if(1<bt.length){var Mr=bt[0];bt=bt[1];var Or=Mr.split("_");Se=2<=Or.length&&Or[1]=="type"?Se+(Mr+"="+bt+"&"):Se+(Mr+"=redacted&")}}else Se=null;else Se=J;return"XMLHTTP REQ ("+k+") [attempt "+M+"]: "+g+`
`+m+`
`+Se})}function be(u,g,m,k,M,J,Se){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+M+"]: "+g+`
`+m+`
`+J+" "+Se})}function Be(u,g,m,k){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+xt(u,m)+(k?" "+k:"")})}function ze(u,g){u.info(function(){return"TIMEOUT: "+g})}Ae.prototype.info=function(){};function xt(u,g){if(!u.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var k=m[u];if(!(2>k.length)){var M=k[1];if(Array.isArray(M)&&!(1>M.length)){var J=M[0];if(J!="noop"&&J!="stop"&&J!="close")for(var Se=1;Se<M.length;Se++)M[Se]=""}}}}return ye(m)}catch{return g}}var it={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jt;function Fr(){}v(Fr,Ct),Fr.prototype.g=function(){return new XMLHttpRequest},Fr.prototype.i=function(){return{}},Jt=new Fr;function Et(u,g,m,k){this.j=u,this.i=g,this.l=m,this.R=k||1,this.U=new et(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lr}function Lr(){this.i=null,this.g="",this.h=!1}var kn={},es={};function Js(u,g,m){u.L=1,u.v=Eu(ms(g)),u.m=m,u.P=!0,An(u,null)}function An(u,g){u.F=Date.now(),mi(u),u.A=ms(u.v);var m=u.A,k=u.R;Array.isArray(k)||(k=[String(k)]),cy(m.i,"t",k),u.C=0,m=u.j.J,u.h=new Lr,u.g=Ty(u.j,m?g:null,!u.m),0<u.O&&(u.M=new at(f(u.Y,u,u.g),u.O)),g=u.U,m=u.g,k=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(ct[0]=M.toString()),M=ct);for(var J=0;J<M.length;J++){var Se=ee(m,M[J],k||g.handleEvent,!1,g.h||g);if(!Se)break;g.g[Se.key]=Se}g=u.H?B(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),He(),se(u.i,u.u,u.A,u.l,u.R,u.m)}Et.prototype.ca=function(u){u=u.target;const g=this.M;g&&ws(u)==3?g.j():this.Y(u)},Et.prototype.Y=function(u){try{if(u==this.g)e:{const Or=ws(this.g);var g=this.g.Ba();const go=this.g.Z();if(!(3>Or)&&(Or!=3||this.g&&(this.h.h||this.g.oa()||my(this.g)))){this.J||Or!=4||g==7||(g==8||0>=go?He(3):He(2)),vg(this);var m=this.g.Z();this.X=m;t:if(Ys(this)){var k=my(this.g);u="";var M=k.length,J=ws(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),Za(this);var Se="";break t}this.h.i=new l.TextDecoder}for(g=0;g<M;g++)this.h.h=!0,u+=this.h.i.decode(k[g],{stream:!(J&&g==M-1)});k.length=0,this.h.g+=u,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=m==200,be(this.i,this.u,this.A,this.l,this.R,Or,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,Sr=this.g;if((Nt=Sr.g?Sr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Nt)){var bt=Nt;break t}}bt=null}if(m=bt)Be(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bg(this,m);else{this.o=!1,this.s=3,V(12),wi(this),Za(this);break e}}if(this.P){m=!0;let On;for(;!this.J&&this.C<Se.length;)if(On=Yt(this,Se),On==es){Or==4&&(this.s=4,V(14),m=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}else if(On==kn){this.s=4,V(15),Be(this.i,this.l,Se,"[Invalid Chunk]"),m=!1;break}else Be(this.i,this.l,On,null),Bg(this,On);if(Ys(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Or!=4||Se.length!=0||this.h.h||(this.s=1,V(16),m=!1),this.o=this.o&&m,!m)Be(this.i,this.l,Se,"[Invalid Chunked Response]"),wi(this),Za(this);else if(0<Se.length&&!this.W){this.W=!0;var Mr=this.j;Mr.g==this&&Mr.ba&&!Mr.M&&(Mr.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),Tg(Mr),Mr.M=!0,V(11))}}else Be(this.i,this.l,Se,null),Bg(this,Se);Or==4&&wi(this),this.o&&!this.J&&(Or==4?Cy(this.j,this):(this.o=!1,mi(this)))}else B2(this.g),m==400&&0<Se.indexOf("Unknown SID")?(this.s=3,V(12)):(this.s=0,V(13)),wi(this),Za(this)}}}catch{}finally{}};function Ys(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Yt(u,g){var m=u.C,k=g.indexOf(`
`,m);return k==-1?es:(m=Number(g.substring(m,k)),isNaN(m)?kn:(k+=1,k+m>g.length?es:(g=g.slice(k,k+m),u.C=k+m,g)))}Et.prototype.cancel=function(){this.J=!0,wi(this)};function mi(u){u.S=Date.now()+u.I,yr(u,u.I)}function yr(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Z(f(u.ba,u),g)}function vg(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Et.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ze(this.i,this.A),this.L!=2&&(He(),V(17)),wi(this),this.s=2,Za(this)):yr(this,this.S-u)};function Za(u){u.j.G==0||u.J||Cy(u.j,u)}function wi(u){vg(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,Ne(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Bg(u,g){try{var m=u.j;if(m.G!=0&&(m.g==u||bg(m.h,u))){if(!u.K&&bg(m.h,u)&&m.G==3){try{var k=m.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var M=k;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Qu(m),Su(m);else break e;Eg(m),V(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=Z(f(m.Za,m),6e3));if(1>=ty(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else yi(m,11)}else if((u.K||m.g==u)&&Qu(m),!w(g))for(M=m.Da.g.parse(g),g=0;g<M.length;g++){let bt=M[g];if(m.T=bt[0],bt=bt[1],m.G==2)if(bt[0]=="c"){m.K=bt[1],m.ia=bt[2];const Mr=bt[3];Mr!=null&&(m.la=Mr,m.j.info("VER="+m.la));const Or=bt[4];Or!=null&&(m.Aa=Or,m.j.info("SVER="+m.Aa));const go=bt[5];go!=null&&typeof go=="number"&&0<go&&(k=1.5*go,m.L=k,m.j.info("backChannelRequestTimeoutMs_="+k)),k=m;const On=u.g;if(On){const Ru=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ru){var J=k.h;J.g||Ru.indexOf("spdy")==-1&&Ru.indexOf("quic")==-1&&Ru.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Cg(J,J.h),J.h=null))}if(k.D){const kg=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;kg&&(k.ya=kg,Mt(k.I,k.D,kg))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),k=m;var Se=u;if(k.qa=Ey(k,k.J?k.ia:null,k.W),Se.K){ry(k.h,Se);var Nt=Se,Sr=k.L;Sr&&(Nt.I=Sr),Nt.B&&(vg(Nt),mi(Nt)),k.g=Se}else By(k);0<m.i.length&&Uu(m)}else bt[0]!="stop"&&bt[0]!="close"||yi(m,7);else m.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?yi(m,7):_g(m):bt[0]!="noop"&&m.l&&m.l.ta(bt),m.v=0)}}He(4)}catch{}}var i2=class{constructor(u,g){this.g=u,this.map=g}};function Zx(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ey(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ty(u){return u.h?1:u.g?u.g.size:0}function bg(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Cg(u,g){u.g?u.g.add(g):u.h=g}function ry(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Zx.prototype.cancel=function(){if(this.i=ny(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ny(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const m of u.g.values())g=g.concat(m.D);return g}return x(u.i)}function o2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(a(u)){for(var g=[],m=u.length,k=0;k<m;k++)g.push(u[k]);return g}g=[],m=0;for(k in u)g[m++]=u[k];return g}function a2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(a(u)||typeof u=="string"){var g=[];u=u.length;for(var m=0;m<u;m++)g.push(m);return g}g=[],m=0;for(const k in u)g[m++]=k;return g}}}function sy(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(a(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var m=a2(u),k=o2(u),M=k.length,J=0;J<M;J++)g.call(void 0,k[J],m&&m[J],u)}var Ay=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l2(u,g){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var k=u[m].indexOf("="),M=null;if(0<=k){var J=u[m].substring(0,k);M=u[m].substring(k+1)}else J=u[m];g(J,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function xi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof xi){this.h=u.h,Iu(this,u.j),this.o=u.o,this.g=u.g,_u(this,u.s),this.l=u.l;var g=u.i,m=new rl;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),iy(this,m),this.m=u.m}else u&&(g=String(u).match(Ay))?(this.h=!1,Iu(this,g[1]||"",!0),this.o=el(g[2]||""),this.g=el(g[3]||"",!0),_u(this,g[4]),this.l=el(g[5]||"",!0),iy(this,g[6]||"",!0),this.m=el(g[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}xi.prototype.toString=function(){var u=[],g=this.j;g&&u.push(tl(g,oy,!0),":");var m=this.g;return(m||g=="file")&&(u.push("//"),(g=this.o)&&u.push(tl(g,oy,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(tl(m,m.charAt(0)=="/"?d2:u2,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",tl(m,f2)),u.join("")};function ms(u){return new xi(u)}function Iu(u,g,m){u.j=m?el(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function _u(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function iy(u,g,m){g instanceof rl?(u.i=g,g2(u.i,u.h)):(m||(g=tl(g,h2)),u.i=new rl(g,u.h))}function Mt(u,g,m){u.i.set(g,m)}function Eu(u){return Mt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function el(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function tl(u,g,m){return typeof u=="string"?(u=encodeURI(u).replace(g,c2),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function c2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var oy=/[#\/\?@]/g,u2=/[#\?:]/g,d2=/[#\?]/g,h2=/[#\?@]/g,f2=/#/g;function rl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Zs(u){u.g||(u.g=new Map,u.h=0,u.i&&l2(u.i,function(g,m){u.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}t=rl.prototype,t.add=function(u,g){Zs(this),this.i=null,u=ho(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(g),this.h+=1,this};function ay(u,g){Zs(u),g=ho(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function ly(u,g){return Zs(u),g=ho(u,g),u.g.has(g)}t.forEach=function(u,g){Zs(this),this.g.forEach(function(m,k){m.forEach(function(M){u.call(g,M,k,this)},this)},this)},t.na=function(){Zs(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let k=0;k<g.length;k++){const M=u[k];for(let J=0;J<M.length;J++)m.push(g[k])}return m},t.V=function(u){Zs(this);let g=[];if(typeof u=="string")ly(this,u)&&(g=g.concat(this.g.get(ho(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)g=g.concat(u[m])}return g},t.set=function(u,g){return Zs(this),this.i=null,u=ho(this,u),ly(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function cy(u,g,m){ay(u,g),0<m.length&&(u.i=null,u.g.set(ho(u,g),x(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var k=g[m];const J=encodeURIComponent(String(k)),Se=this.V(k);for(k=0;k<Se.length;k++){var M=J;Se[k]!==""&&(M+="="+encodeURIComponent(String(Se[k]))),u.push(M)}}return this.i=u.join("&")};function ho(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function g2(u,g){g&&!u.j&&(Zs(u),u.i=null,u.g.forEach(function(m,k){var M=k.toLowerCase();k!=M&&(ay(this,k),cy(this,M,m))},u)),u.j=g}function p2(u,g){const m=new Ae;if(l.Image){const k=new Image;k.onload=p(eA,m,"TestLoadImage: loaded",!0,g,k),k.onerror=p(eA,m,"TestLoadImage: error",!1,g,k),k.onabort=p(eA,m,"TestLoadImage: abort",!1,g,k),k.ontimeout=p(eA,m,"TestLoadImage: timeout",!1,g,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else g(!1)}function m2(u,g){const m=new Ae,k=new AbortController,M=setTimeout(()=>{k.abort(),eA(m,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:k.signal}).then(J=>{clearTimeout(M),J.ok?eA(m,"TestPingServer: ok",!0,g):eA(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(M),eA(m,"TestPingServer: error",!1,g)})}function eA(u,g,m,k,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),k(m)}catch{}}function w2(){this.g=new lt}function x2(u,g,m){const k=m||"";try{sy(u,function(M,J){let Se=M;c(M)&&(Se=ye(M)),g.push(k+J+"="+encodeURIComponent(Se))})}catch(M){throw g.push(k+"type="+encodeURIComponent("_badmap")),M}}function Tu(u){this.l=u.Ub||null,this.j=u.eb||!1}v(Tu,Ct),Tu.prototype.g=function(){return new ku(this.l,this.j)},Tu.prototype.i=function(u){return function(){return u}}({});function ku(u,g){ae.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(ku,ae),t=ku.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,sl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nl(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function uy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?nl(this):sl(this),this.readyState==3&&uy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,nl(this))},t.Qa=function(u){this.g&&(this.response=u,nl(this))},t.ga=function(){this.g&&nl(this)};function nl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=g.next();return u.join(`\r
`)};function sl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ku.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function dy(u){let g="";return R(u,function(m,k){g+=k,g+=":",g+=m,g+=`\r
`}),g}function Ig(u,g,m){e:{for(k in m){var k=!1;break e}k=!0}k||(m=dy(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Mt(u,g,m))}function sr(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(sr,ae);var y2=/^https?$/i,v2=["POST","PUT"];t=sr.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,m,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jt.g(),this.v=this.o?vt(this.o):vt(Jt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(J){hy(this,J);return}if(u=m||"",m=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var M in k)m.set(M,k[M]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const J of k.keys())m.set(J,k.get(J));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(m.keys()).find(J=>J.toLowerCase()=="content-type"),M=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(v2,g,void 0))||k||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,Se]of m)this.g.setRequestHeader(J,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{py(this),this.u=!0,this.g.send(u),this.u=!1}catch(J){hy(this,J)}};function hy(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,fy(u),Fu(u)}function fy(u){u.A||(u.A=!0,me(u,"complete"),me(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,me(this,"complete"),me(this,"abort"),Fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fu(this,!0)),sr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gy(this):this.bb())},t.bb=function(){gy(this)};function gy(u){if(u.h&&typeof i<"u"&&(!u.v[1]||ws(u)!=4||u.Z()!=2)){if(u.u&&ws(u)==4)qe(u.Ea,0,u);else if(me(u,"readystatechange"),ws(u)==4){u.h=!1;try{const Se=u.Z();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var k;if(k=Se===0){var M=String(u.D).match(Ay)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),k=!y2.test(M?M.toLowerCase():"")}m=k}if(m)me(u,"complete"),me(u,"success");else{u.m=6;try{var J=2<ws(u)?u.g.statusText:""}catch{J=""}u.l=J+" ["+u.Z()+"]",fy(u)}}finally{Fu(u)}}}}function Fu(u,g){if(u.g){py(u);const m=u.g,k=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||me(u,"ready");try{m.onreadystatechange=k}catch{}}}function py(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ws(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ws(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Xe(g)}};function my(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function B2(u){const g={};u=(u.g&&2<=ws(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(w(u[k]))continue;var m=N(u[k]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const J=g[M]||[];g[M]=J,J.push(m)}y(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Al(u,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||g}function wy(u){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Al("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Al("baseRetryDelayMs",5e3,u),this.cb=Al("retryDelaySeedMs",1e4,u),this.Wa=Al("forwardChannelMaxRetries",2,u),this.wa=Al("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Zx(u&&u.concurrentRequestLimit),this.Da=new w2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wy.prototype,t.la=8,t.G=1,t.connect=function(u,g,m,k){V(0),this.W=u,this.H=g||{},m&&k!==void 0&&(this.H.OSID=m,this.H.OAID=k),this.F=this.X,this.I=Ey(this,null,this.W),Uu(this)};function _g(u){if(xy(u),u.G==3){var g=u.U++,m=ms(u.I);if(Mt(m,"SID",u.K),Mt(m,"RID",g),Mt(m,"TYPE","terminate"),il(u,m),g=new Et(u,u.j,g),g.L=2,g.v=Eu(ms(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=g.v,m=!0),m||(g.g=Ty(g.j,null),g.g.ea(g.v)),g.F=Date.now(),mi(g)}_y(u)}function Su(u){u.g&&(Tg(u),u.g.cancel(),u.g=null)}function xy(u){Su(u),u.u&&(l.clearTimeout(u.u),u.u=null),Qu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Uu(u){if(!ey(u.h)&&!u.s){u.s=!0;var g=u.Ga;Le||Pe(),ce||(Le(),ce=!0),Te.add(g,u),u.B=0}}function b2(u,g){return ty(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Z(f(u.Ga,u,g),Iy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Et(this,this.j,u);let J=this.o;if(this.S&&(J?(J=B(J),S(J,this.S)):J=this.S),this.m!==null||this.O||(M.H=J,J=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var k=this.i[m];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=vy(this,M,g),m=ms(this.I),Mt(m,"RID",u),Mt(m,"CVER",22),this.D&&Mt(m,"X-HTTP-Session-Id",this.D),il(this,m),J&&(this.O?g="headers="+encodeURIComponent(String(dy(J)))+"&"+g:this.m&&Ig(m,this.m,J)),Cg(this.h,M),this.Ua&&Mt(m,"TYPE","init"),this.P?(Mt(m,"$req",g),Mt(m,"SID","null"),M.T=!0,Js(M,m,null)):Js(M,m,g),this.G=2}}else this.G==3&&(u?yy(this,u):this.i.length==0||ey(this.h)||yy(this))};function yy(u,g){var m;g?m=g.l:m=u.U++;const k=ms(u.I);Mt(k,"SID",u.K),Mt(k,"RID",m),Mt(k,"AID",u.T),il(u,k),u.m&&u.o&&Ig(k,u.m,u.o),m=new Et(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),g&&(u.i=g.D.concat(u.i)),g=vy(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Cg(u.h,m),Js(m,k,g)}function il(u,g){u.H&&R(u.H,function(m,k){Mt(g,k,m)}),u.l&&sy({},function(m,k){Mt(g,k,m)})}function vy(u,g,m){m=Math.min(u.i.length,m);var k=u.l?f(u.l.Na,u.l,u):null;e:{var M=u.i;let J=-1;for(;;){const Se=["count="+m];J==-1?0<m?(J=M[0].g,Se.push("ofs="+J)):J=0:Se.push("ofs="+J);let Nt=!0;for(let Sr=0;Sr<m;Sr++){let bt=M[Sr].g;const Mr=M[Sr].map;if(bt-=J,0>bt)J=Math.max(0,M[Sr].g-100),Nt=!1;else try{x2(Mr,Se,"req"+bt+"_")}catch{k&&k(Mr)}}if(Nt){k=Se.join("&");break e}}}return u=u.i.splice(0,m),g.D=u,k}function By(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Le||Pe(),ce||(Le(),ce=!0),Te.add(g,u),u.v=0}}function Eg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Z(f(u.Fa,u),Iy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,by(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Z(f(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,V(10),Su(this),by(this))};function Tg(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function by(u){u.g=new Et(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ms(u.qa);Mt(g,"RID","rpc"),Mt(g,"SID",u.K),Mt(g,"AID",u.T),Mt(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Mt(g,"TO",u.ja),Mt(g,"TYPE","xmlhttp"),il(u,g),u.m&&u.o&&Ig(g,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Eu(ms(g)),m.m=null,m.P=!0,An(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Su(this),Eg(this),V(19))};function Qu(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function Cy(u,g){var m=null;if(u.g==g){Qu(u),Tg(u),u.g=null;var k=2}else if(bg(u.h,g))m=g.D,ry(u.h,g),k=1;else return;if(u.G!=0){if(g.o)if(k==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var M=u.B;k=ve(),me(k,new ne(k,m)),Uu(u)}else By(u);else if(M=g.s,M==3||M==0&&0<g.X||!(k==1&&b2(u,g)||k==2&&Eg(u)))switch(m&&0<m.length&&(g=u.h,g.i=g.i.concat(m)),M){case 1:yi(u,5);break;case 4:yi(u,10);break;case 3:yi(u,6);break;default:yi(u,2)}}}function Iy(u,g){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*g}function yi(u,g){if(u.j.info("Error code "+g),g==2){var m=f(u.fb,u),k=u.Xa;const M=!k;k=new xi(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Iu(k,"https"),Eu(k),M?p2(k.toString(),m):m2(k.toString(),m)}else V(2);u.G=0,u.l&&u.l.sa(g),_y(u),xy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),V(2)):(this.j.info("Failed to ping google.com"),V(1))};function _y(u){if(u.G=0,u.ka=[],u.l){const g=ny(u.h);(g.length!=0||u.i.length!=0)&&(_(u.ka,g),_(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function Ey(u,g,m){var k=m instanceof xi?ms(m):new xi(m);if(k.g!="")g&&(k.g=g+"."+k.g),_u(k,k.s);else{var M=l.location;k=M.protocol,g=g?g+"."+M.hostname:M.hostname,M=+M.port;var J=new xi(null);k&&Iu(J,k),g&&(J.g=g),M&&_u(J,M),m&&(J.l=m),k=J}return m=u.D,g=u.ya,m&&g&&Mt(k,m,g),Mt(k,"VER",u.la),il(u,k),k}function Ty(u,g,m){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new sr(new Tu({eb:m})):new sr(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ky(){}t=ky.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nu(){}Nu.prototype.g=function(u,g){return new wn(u,g)};function wn(u,g){ae.call(this),this.g=new wy(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new fo(this)}v(wn,ae),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){_g(this.g)},wn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=ye(u),u=m);g.i.push(new i2(g.Ya++,u)),g.G==3&&Uu(g)},wn.prototype.N=function(){this.g.l=null,delete this.j,_g(this.g),delete this.g,wn.aa.N.call(this)};function Fy(u){q.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const m in g){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}v(Fy,q);function Sy(){H.call(this),this.status=1}v(Sy,H);function fo(u){this.g=u}v(fo,ky),fo.prototype.ua=function(){me(this.g,"a")},fo.prototype.ta=function(u){me(this.g,new Fy(u))},fo.prototype.sa=function(u){me(this.g,new Sy)},fo.prototype.ra=function(){me(this.g,"b")},Nu.prototype.createWebChannel=Nu.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,SE=function(){return new Nu},FE=function(){return ve()},kE=De,Mm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,Kd=it,Qt.COMPLETE="complete",TE=Qt,D.EventType=X,X.OPEN="a",X.CLOSE="b",X.ERROR="c",X.MESSAGE="d",ae.prototype.listen=ae.prototype.K,Nl=D,sr.prototype.listenOnce=sr.prototype.L,sr.prototype.getLastError=sr.prototype.Ka,sr.prototype.getLastErrorCode=sr.prototype.Ba,sr.prototype.getStatus=sr.prototype.Z,sr.prototype.getResponseJson=sr.prototype.Oa,sr.prototype.getResponseText=sr.prototype.oa,sr.prototype.send=sr.prototype.ea,sr.prototype.setWithCredentials=sr.prototype.Ha,EE=sr}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});const aB="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new Sw("@firebase/firestore");function Eo(){return $A.logLevel}function zR(t){$A.setLogLevel(t)}function le(t,...e){if($A.logLevel<=pt.DEBUG){const r=e.map(Nw);$A.debug(`Firestore (${ja}): ${t}`,...r)}}function cr(t,...e){if($A.logLevel<=pt.ERROR){const r=e.map(Nw);$A.error(`Firestore (${ja}): ${t}`,...r)}}function In(t,...e){if($A.logLevel<=pt.WARN){const r=e.map(Nw);$A.warn(`Firestore (${ja}): ${t}`,...r)}}function Nw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t="Unexpected state"){const e=`FIRESTORE (${ja}) INTERNAL ASSERTION FAILED: `+t;throw cr(e),new Error(e)}function $e(t,e){t||Oe()}function $R(t,e){t||Oe()}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends zs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(_r.UNAUTHENTICATED))}shutdown(){}}class WR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class qR{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){$e(this.o===void 0);let n=this.i;const s=a=>this.i!==n?(n=this.i,r(a)):Promise.resolve();let A=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),A.resolve(),A=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const a=A;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},l=a=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),A.resolve(),A=new Tr)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?($e(typeof n.accessToken=="string"),new UE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new _r(e)}}class XR{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=_r.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class JR{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new XR(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(_r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){$e(this.o===void 0);const n=A=>{A.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${A.error.message}`);const i=A.token!==this.R;return this.R=A.token,le("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(A.token):Promise.resolve()};this.o=A=>{e.enqueueRetryable(()=>n(A))};const s=A=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=A,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(A=>s(A)),setTimeout(()=>{if(!this.appCheck){const A=this.A.getImmediate({optional:!0});A?s(A):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?($e(typeof r.token=="string"),this.R=r.token,new NE(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class ZR{getToken(){return Promise.resolve(new NE(""))}invalidateToken(){}start(e,r){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=e4(40);for(let A=0;A<s.length;++A)n.length<20&&s[A]<r&&(n+=e.charAt(s[A]%e.length))}return n}}function nt(t,e){return t<e?-1:t>e?1:0}function ga(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}function RE(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new oe(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qt.fromMillis(Date.now())}static fromDate(e){return qt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new qt(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new qt(0,0))}static max(){return new Ye(new qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,r,n){r===void 0?r=0:r>e.length&&Oe(),n===void 0?n=e.length-r:n>e.length-r&&Oe(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Rc.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Rc?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const A=e.get(s),i=r.get(s);if(A<i)return-1;if(A>i)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class mt extends Rc{construct(e,r,n){return new mt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new mt(r)}static emptyPath(){return new mt([])}}const t4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Rc{construct(e,r,n){return new Vt(e,r,n)}static isValidIdentifier(e){return t4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const A=()=>{if(n.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new oe(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new oe(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=a,s+=2}else l==="`"?(i=!i,s++):l!=="."||i?(n+=l,s++):(A(),s++)}if(A(),i)throw new oe(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(r)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(mt.fromString(e))}static fromName(e){return new Qe(mt.fromString(e).popFirst(5))}static empty(){return new Qe(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return mt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new mt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,r,n,s){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=s}}function Om(t){return t.fields.find(e=>e.kind===2)}function _i(t){return t.fields.filter(e=>e.kind!==2)}function r4(t,e){let r=nt(t.collectionGroup,e.collectionGroup);if(r!==0)return r;for(let n=0;n<Math.min(t.fields.length,e.fields.length);++n)if(r=n4(t.fields[n],e.fields[n]),r!==0)return r;return nt(t.fields.length,e.fields.length)}pa.UNKNOWN_ID=-1;class Li{constructor(e,r){this.fieldPath=e,this.kind=r}}function n4(t,e){const r=Vt.comparator(t.fieldPath,e.fieldPath);return r!==0?r:nt(t.kind,e.kind)}class ma{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new ma(0,_n.min())}}function DE(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Ye.fromTimestamp(n===1e9?new qt(r+1,0):new qt(r,n));return new _n(s,Qe.empty(),e)}function PE(t){return new _n(t.readTime,t.key,-1)}class _n{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new _n(Ye.min(),Qe.empty(),-1)}static max(){return new _n(Ye.max(),Qe.empty(),-1)}}function Dw(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Qe.comparator(t.documentKey,e.documentKey),r!==0?r:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==jE)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new L((n,s)=>{this.nextCallback=A=>{this.wrapSuccess(e,A).next(n,s)},this.catchCallback=A=>{this.wrapFailure(r,A).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof L?r:L.resolve(r)}catch(r){return L.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):L.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):L.reject(r)}static resolve(e){return new L((r,n)=>{r(e)})}static reject(e){return new L((r,n)=>{n(e)})}static waitFor(e){return new L((r,n)=>{let s=0,A=0,i=!1;e.forEach(l=>{++s,l.next(()=>{++A,i&&A===s&&r()},a=>n(a))}),i=!0,A===s&&r()})}static or(e){let r=L.resolve(!1);for(const n of e)r=r.next(s=>s?L.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,A)=>{n.push(r.call(this,s,A))}),this.waitFor(n)}static mapArray(e,r){return new L((n,s)=>{const A=e.length,i=new Array(A);let l=0;for(let a=0;a<A;a++){const c=a;r(e[c]).next(d=>{i[c]=d,++l,l===A&&n(i)},d=>s(d))}})}static doWhile(e,r){return new L((n,s)=>{const A=()=>{e()===!0?r().next(()=>{A()},s):n()};A()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Tr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new tc(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const s=Pw(n.target.error);this.V.reject(new tc(e,s))}}static open(e,r,n,s){try{return new Pf(r,e.transaction(s,n))}catch(A){throw new tc(r,A)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new A4(r)}}class cs{constructor(e,r,n){this.name=e,this.version=r,this.p=n,cs.S(wr())===12.2&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return le("SimpleDb","Removing database:",e),Ei(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!yE())return!1;if(cs.v())return!0;const e=wr(),r=cs.S(e),n=0<r&&r<10,s=ME(e),A=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||A)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(le("SimpleDb","Opening database:",this.name),this.db=await new Promise((r,n)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=A=>{const i=A.target.result;r(i)},s.onblocked=()=>{n(new tc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=A=>{const i=A.target.error;i.name==="VersionError"?n(new oe(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?n(new oe(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new tc(e,i))},s.onupgradeneeded=A=>{le("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',A.oldVersion);const i=A.target.result;this.p.O(i,s.transaction,A.oldVersion,this.version).next(()=>{le("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,s){const A=r==="readonly";let i=0;for(;;){++i;try{this.db=await this.M(e);const l=Pf.open(this.db,e,A?"readonly":"readwrite",n),a=s(l).next(c=>(l.g(),c)).catch(c=>(l.abort(c),L.reject(c))).toPromise();return a.catch(()=>{}),await l.m,a}catch(l){const a=l,c=a.name!=="FirebaseError"&&i<3;if(le("SimpleDb","Transaction failed with error:",a.message,"Retrying:",c),this.close(),!c)return Promise.reject(a)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ME(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class s4{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ei(this.B.delete())}}class tc extends oe{constructor(e,r){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ai(t){return t.name==="IndexedDbTransactionError"}class A4{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(le("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(le("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ei(n)}add(e){return le("SimpleDb","ADD",this.store.name,e,e),Ei(this.store.add(e))}get(e){return Ei(this.store.get(e)).next(r=>(r===void 0&&(r=null),le("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return le("SimpleDb","DELETE",this.store.name,e),Ei(this.store.delete(e))}count(){return le("SimpleDb","COUNT",this.store.name),Ei(this.store.count())}U(e,r){const n=this.options(e,r),s=n.index?this.store.index(n.index):this.store;if(typeof s.getAll=="function"){const A=s.getAll(n.range);return new L((i,l)=>{A.onerror=a=>{l(a.target.error)},A.onsuccess=a=>{i(a.target.result)}})}{const A=this.cursor(n),i=[];return this.W(A,(l,a)=>{i.push(a)}).next(()=>i)}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new L((s,A)=>{n.onerror=i=>{A(i.target.error)},n.onsuccess=i=>{s(i.target.result)}})}j(e,r){le("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const s=this.cursor(n);return this.W(s,(A,i,l)=>l.delete())}J(e,r){let n;r?n=e:(n={},r=e);const s=this.cursor(n);return this.W(s,r)}Y(e){const r=this.cursor({});return new L((n,s)=>{r.onerror=A=>{const i=Pw(A.target.error);s(i)},r.onsuccess=A=>{const i=A.target.result;i?e(i.primaryKey,i.value).next(l=>{l?i.continue():n()}):n()}})}W(e,r){const n=[];return new L((s,A)=>{e.onerror=i=>{A(i.target.error)},e.onsuccess=i=>{const l=i.target.result;if(!l)return void s();const a=new s4(l),c=r(l.primaryKey,l.value,a);if(c instanceof L){const d=c.catch(h=>(a.done(),L.reject(h)));n.push(d)}a.isDone?s():a.K===null?l.continue():l.continue(a.K)}}).next(()=>L.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Ei(t){return new L((e,r)=>{t.onsuccess=n=>{const s=n.target.result;e(s)},t.onerror=n=>{const s=Pw(n.target.error);r(s)}})}let lB=!1;function Pw(t){const e=cs.S(wr());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return lB||(lB=!0,setTimeout(()=>{throw n},0)),n}}return t}class i4{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){le("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{le("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){ai(r)?le("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await oi(r)}await this.X(6e4)})}}class o4{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.te(r,e))}te(e,r){const n=new Set;let s=r,A=!0;return L.doWhile(()=>A===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(i=>{if(i!==null&&!n.has(i))return le("IndexBackfiller",`Processing collection: ${i}`),this.ne(e,i,s).next(l=>{s-=l,n.add(i)});A=!1})).next(()=>r-s)}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(s=>this.localStore.localDocuments.getNextDocuments(e,r,s,n).next(A=>{const i=A.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(s,A)).next(l=>(le("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>i.size)}))}re(e,r){let n=e;return r.changes.forEach((s,A)=>{const i=PE(A);Dw(i,n)>0&&(n=i)}),new _n(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}un.oe=-1;function Au(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function OE(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=cB(e)),e=a4(t.get(r),e);return cB(e)}function a4(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const A=t.charAt(s);switch(A){case"\0":r+="";break;case"":r+="";break;default:r+=A}}return r}function cB(t){return t+""}function is(t){const e=t.length;if($e(e>=2),e===2)return $e(t.charAt(0)===""&&t.charAt(1)===""),mt.emptyPath();const r=e-2,n=[];let s="";for(let A=0;A<e;){const i=t.indexOf("",A);switch((i<0||i>r)&&Oe(),t.charAt(i+1)){case"":const l=t.substring(A,i);let a;s.length===0?a=l:(s+=l,a=s,s=""),n.push(a);break;case"":s+=t.substring(A,i),s+="\0";break;case"":s+=t.substring(A,i+1);break;default:Oe()}A=i+2}return new mt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t,e){return[t,Xr(e)]}function HE(t,e,r){return[t,Xr(e),r]}const l4={},c4=["prefixPath","collectionGroup","readTime","documentId"],u4=["prefixPath","collectionGroup","documentId"],d4=["collectionGroup","readTime","prefixPath","documentId"],h4=["canonicalId","targetId"],f4=["targetId","path"],g4=["path","targetId"],p4=["collectionId","parent"],m4=["indexId","uid"],w4=["uid","sequenceNumber"],x4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y4=["indexId","uid","orderedDocumentKey"],v4=["userId","collectionPath","documentId"],B4=["userId","collectionPath","largestBatchId"],b4=["userId","collectionGroup","largestBatchId"],VE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],C4=[...VE,"documentOverlays"],KE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GE=KE,jw=[...GE,"indexConfiguration","indexState","indexEntries"],I4=jw,_4=[...jw,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends LE{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function xr(t,e){const r=Fe(t);return cs.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function li(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function zE(t,e){const r=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.push(e(t[n],n,t));return r}function $E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,r){this.comparator=e,this.root=r||Nr.EMPTY}insert(e,r){return new Lt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let A=1;for(;!e.isEmpty();)if(A=r?n(e.key,r):1,r&&s&&(A*=-1),A<0)e=this.isReverse?e.left:e.right;else{if(A===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,r,n,s,A){this.key=e,this.value=r,this.color=n??Nr.RED,this.left=s??Nr.EMPTY,this.right=A??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,A){return new Nr(e??this.key,r??this.value,n??this.color,s??this.left,A??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const A=n(e,s.key);return s=A<0?s.copy(null,null,null,s.left.insert(e,r,n),null):A===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Nr.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,r,n,s,A){return this}insert(e,r,n){return new Nr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new hB(this.data.getIterator())}getIteratorFrom(e){return new hB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(this.comparator(s,A)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new St(this.comparator);return r.data=e,r}}class hB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new dn([])}unionWith(e){let r=new St(Vt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new dn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ga(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(A){throw typeof DOMException<"u"&&A instanceof DOMException?new WE("Invalid base64 string: "+A):A}}(e);return new nr(r)}static fromUint8Array(e){const r=function(s){let A="";for(let i=0;i<s.length;++i)A+=String.fromCharCode(s[i]);return A}(e);return new nr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const T4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(t){if($e(!!t),typeof t=="string"){let e=0;const r=T4.exec(t);if($e(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ms(t){return typeof t=="string"?nr.fromBase64String(t):nr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Lf(t){const e=t.mapValue.fields.__previous_value__;return jf(e)?Lf(e):e}function Pc(t){const e=Ls(t.mapValue.fields.__local_write_time__.timestampValue);return new qt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,r,n,s,A,i,l,a,c){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=A,this.forceLongPolling=i,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=c}}class WA{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new WA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof WA&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zd={nullValue:"NULL_VALUE"};function qA(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jf(t)?4:qE(t)?9007199254740991:Mf(t)?10:11:Oe()}function fs(t,e){if(t===e)return!0;const r=qA(t);if(r!==qA(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pc(t).isEqual(Pc(e));case 3:return function(s,A){if(typeof s.timestampValue=="string"&&typeof A.timestampValue=="string"&&s.timestampValue.length===A.timestampValue.length)return s.timestampValue===A.timestampValue;const i=Ls(s.timestampValue),l=Ls(A.timestampValue);return i.seconds===l.seconds&&i.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,A){return Ms(s.bytesValue).isEqual(Ms(A.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,A){return zt(s.geoPointValue.latitude)===zt(A.geoPointValue.latitude)&&zt(s.geoPointValue.longitude)===zt(A.geoPointValue.longitude)}(t,e);case 2:return function(s,A){if("integerValue"in s&&"integerValue"in A)return zt(s.integerValue)===zt(A.integerValue);if("doubleValue"in s&&"doubleValue"in A){const i=zt(s.doubleValue),l=zt(A.doubleValue);return i===l?Dc(i)===Dc(l):isNaN(i)&&isNaN(l)}return!1}(t,e);case 9:return ga(t.arrayValue.values||[],e.arrayValue.values||[],fs);case 10:case 11:return function(s,A){const i=s.mapValue.fields||{},l=A.mapValue.fields||{};if(dB(i)!==dB(l))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(l[a]===void 0||!fs(i[a],l[a])))return!1;return!0}(t,e);default:return Oe()}}function jc(t,e){return(t.values||[]).find(r=>fs(r,e))!==void 0}function XA(t,e){if(t===e)return 0;const r=qA(t),n=qA(e);if(r!==n)return nt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return function(A,i){const l=zt(A.integerValue||A.doubleValue),a=zt(i.integerValue||i.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return fB(t.timestampValue,e.timestampValue);case 4:return fB(Pc(t),Pc(e));case 5:return nt(t.stringValue,e.stringValue);case 6:return function(A,i){const l=Ms(A),a=Ms(i);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(A,i){const l=A.split("/"),a=i.split("/");for(let c=0;c<l.length&&c<a.length;c++){const d=nt(l[c],a[c]);if(d!==0)return d}return nt(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(A,i){const l=nt(zt(A.latitude),zt(i.latitude));return l!==0?l:nt(zt(A.longitude),zt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gB(t.arrayValue,e.arrayValue);case 10:return function(A,i){var l,a,c,d;const h=A.fields||{},f=i.fields||{},p=(l=h.value)===null||l===void 0?void 0:l.arrayValue,v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=nt(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:gB(p,v)}(t.mapValue,e.mapValue);case 11:return function(A,i){if(A===CA.mapValue&&i===CA.mapValue)return 0;if(A===CA.mapValue)return 1;if(i===CA.mapValue)return-1;const l=A.fields||{},a=Object.keys(l),c=i.fields||{},d=Object.keys(c);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=nt(a[h],d[h]);if(f!==0)return f;const p=XA(l[a[h]],c[d[h]]);if(p!==0)return p}return nt(a.length,d.length)}(t.mapValue,e.mapValue);default:throw Oe()}}function fB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const r=Ls(t),n=Ls(e),s=nt(r.seconds,n.seconds);return s!==0?s:nt(r.nanos,n.nanos)}function gB(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const A=XA(r[s],n[s]);if(A)return A}return nt(r.length,n.length)}function wa(t){return Vm(t)}function Vm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=Ls(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ms(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Qe.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const A of r.values||[])s?s=!1:n+=",",n+=Vm(A);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",A=!0;for(const i of n)A?A=!1:s+=",",s+=`${i}:${Vm(r.fields[i])}`;return s+"}"}(t.mapValue):Oe()}function $d(t){switch(qA(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(t);return e?16+$d(e):16;case 5:return 2*t.stringValue.length;case 6:return Ms(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,A)=>s+$d(A),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return li(n.fields,(A,i)=>{s+=A.length+$d(i)}),s}(t.mapValue);default:throw Oe()}}function Wi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Km(t){return!!t&&"integerValue"in t}function Lc(t){return!!t&&"arrayValue"in t}function pB(t){return!!t&&"nullValue"in t}function mB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wd(t){return!!t&&"mapValue"in t}function Mf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function rc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return li(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=rc(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=rc(t.arrayValue.values[r]);return e}return Object.assign({},t)}function qE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const XE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function F4(t){return"nullValue"in t?zd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Wi(WA.empty(),Qe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Mf(t)?XE:{mapValue:{}}:Oe()}function S4(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Wi(WA.empty(),Qe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?XE:"mapValue"in t?Mf(t)?{mapValue:{}}:CA:Oe()}function wB(t,e){const r=XA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xB(t,e){const r=XA(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Wd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(r)}setAll(e){let r=Vt.emptyPath(),n={},s=[];e.forEach((i,l)=>{if(!r.isImmediateParentOf(l)){const a=this.getFieldsMap(r);this.applyChanges(a,n,s),n={},s=[],r=l.popLast()}i?n[l.lastSegment()]=rc(i):s.push(l.lastSegment())});const A=this.getFieldsMap(r);this.applyChanges(A,n,s)}delete(e){const r=this.field(e.popLast());Wd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return fs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Wd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){li(r,(s,A)=>e[s]=A);for(const s of n)delete e[s]}clone(){return new Rr(rc(this.value))}}function JE(t){const e=[];return li(t.fields,(r,n)=>{const s=new Vt([r]);if(Wd(n)){const A=JE(n.mapValue).fields;if(A.length===0)e.push(s);else for(const i of A)e.push(s.child(i))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,r,n,s,A,i,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=A,this.data=i,this.documentState=l}static newInvalidDocument(e){return new Ht(e,0,Ye.min(),Ye.min(),Ye.min(),Rr.empty(),0)}static newFoundDocument(e,r,n,s){return new Ht(e,1,r,Ye.min(),n,s,0)}static newNoDocument(e,r){return new Ht(e,2,r,Ye.min(),Ye.min(),Rr.empty(),0)}static newUnknownDocument(e,r){return new Ht(e,3,r,Ye.min(),Ye.min(),Rr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,r){this.position=e,this.inclusive=r}}function yB(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const A=e[s],i=t.position[s];if(A.field.isKeyField()?n=Qe.comparator(Qe.fromName(i.referenceValue),r.key):n=XA(i,r.data.field(A.field)),A.dir==="desc"&&(n*=-1),n!==0)break}return n}function vB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!fs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,r="asc"){this.field=e,this.dir=r}}function U4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{}class wt extends YE{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Q4(e,r,n):r==="array-contains"?new D4(e,n):r==="in"?new s1(e,n):r==="not-in"?new P4(e,n):r==="array-contains-any"?new j4(e,n):new wt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new N4(e,n):new R4(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(XA(r,this.value)):r!==null&&qA(this.value)===qA(r)&&this.matchesComparison(XA(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends YE{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Tt(e,r)}matches(e){return xa(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xa(t){return t.op==="and"}function Gm(t){return t.op==="or"}function Lw(t){return ZE(t)&&xa(t)}function ZE(t){for(const e of t.filters)if(e instanceof Tt)return!1;return!0}function zm(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+wa(t.value);if(Lw(t))return t.filters.map(e=>zm(e)).join(",");{const e=t.filters.map(r=>zm(r)).join(",");return`${t.op}(${e})`}}function e1(t,e){return t instanceof wt?function(n,s){return s instanceof wt&&n.op===s.op&&n.field.isEqual(s.field)&&fs(n.value,s.value)}(t,e):t instanceof Tt?function(n,s){return s instanceof Tt&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((A,i,l)=>A&&e1(i,s.filters[l]),!0):!1}(t,e):void Oe()}function t1(t,e){const r=t.filters.concat(e);return Tt.create(r,t.op)}function r1(t){return t instanceof wt?function(r){return`${r.field.canonicalString()} ${r.op} ${wa(r.value)}`}(t):t instanceof Tt?function(r){return r.op.toString()+" {"+r.getFilters().map(r1).join(" ,")+"}"}(t):"Filter"}class Q4 extends wt{constructor(e,r,n){super(e,r,n),this.key=Qe.fromName(n.referenceValue)}matches(e){const r=Qe.comparator(e.key,this.key);return this.matchesComparison(r)}}class N4 extends wt{constructor(e,r){super(e,"in",r),this.keys=n1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class R4 extends wt{constructor(e,r){super(e,"not-in",r),this.keys=n1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function n1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Qe.fromName(n.referenceValue))}class D4 extends wt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Lc(r)&&jc(r.arrayValue,this.value)}}class s1 extends wt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&jc(this.value.arrayValue,r)}}class P4 extends wt{constructor(e,r){super(e,"not-in",r)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!jc(this.value.arrayValue,r)}}class j4 extends wt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Lc(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>jc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,r=null,n=[],s=[],A=null,i=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=A,this.startAt=i,this.endAt=l,this.ue=null}}function $m(t,e=null,r=[],n=[],s=null,A=null,i=null){return new L4(t,e,r,n,s,A,i)}function qi(t){const e=Fe(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>zm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(A){return A.field.canonicalString()+A.dir}(n)).join(","),Au(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>wa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>wa(n)).join(",")),e.ue=r}return e.ue}function iu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!U4(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!e1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vB(t.startAt,e.startAt)&&vB(t.endAt,e.endAt)}function jh(t){return Qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Lh(t,e){return t.filters.filter(r=>r instanceof wt&&r.field.isEqual(e))}function BB(t,e,r){let n=zd,s=!0;for(const A of Lh(t,e)){let i=zd,l=!0;switch(A.op){case"<":case"<=":i=F4(A.value);break;case"==":case"in":case">=":i=A.value;break;case">":i=A.value,l=!1;break;case"!=":case"not-in":i=zd}wB({value:n,inclusive:s},{value:i,inclusive:l})<0&&(n=i,s=l)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];wB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})<0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}function bB(t,e,r){let n=CA,s=!0;for(const A of Lh(t,e)){let i=CA,l=!0;switch(A.op){case">=":case">":i=S4(A.value),l=!1;break;case"==":case"in":case"<=":i=A.value;break;case"<":i=A.value,l=!1;break;case"!=":case"not-in":i=CA}xB({value:n,inclusive:s},{value:i,inclusive:l})>0&&(n=i,s=l)}if(r!==null){for(let A=0;A<t.orderBy.length;++A)if(t.orderBy[A].field.isEqual(e)){const i=r.position[A];xB({value:n,inclusive:s},{value:i,inclusive:r.inclusive})>0&&(n=i,s=r.inclusive);break}}return{value:n,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,r=null,n=[],s=[],A=null,i="F",l=null,a=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=A,this.limitType=i,this.startAt=l,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function A1(t,e,r,n,s,A,i,l){return new $s(t,e,r,n,s,A,i,l)}function La(t){return new $s(t)}function CB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mw(t){return t.collectionGroup!==null}function ea(t){const e=Fe(t);if(e.ce===null){e.ce=[];const r=new Set;for(const A of e.explicitOrderBy)e.ce.push(A),r.add(A.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let l=new St(Vt.comparator);return i.filters.forEach(a=>{a.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(A=>{r.has(A.canonicalString())||A.isKeyField()||e.ce.push(new Mc(A,n))}),r.has(Vt.keyField().canonicalString())||e.ce.push(new Mc(Vt.keyField(),n))}return e.ce}function Jr(t){const e=Fe(t);return e.le||(e.le=o1(e,ea(t))),e.le}function i1(t){const e=Fe(t);return e.he||(e.he=o1(e,t.explicitOrderBy)),e.he}function o1(t,e){if(t.limitType==="F")return $m(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const A=s.dir==="desc"?"asc":"desc";return new Mc(s.field,A)});const r=t.endAt?new JA(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new JA(t.startAt.position,t.startAt.inclusive):null;return $m(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Wm(t,e){const r=t.filters.concat([e]);return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Mh(t,e,r){return new $s(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function ou(t,e){return iu(Jr(t),Jr(e))&&t.limitType===e.limitType}function a1(t){return`${qi(Jr(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>r1(s)).join(", ")}]`),Au(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>wa(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>wa(s)).join(",")),`Target(${n})`}(Jr(t))}; limitType=${t.limitType})`}function au(t,e){return e.isFoundDocument()&&function(n,s){const A=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(A):Qe.isDocumentKey(n.path)?n.path.isEqual(A):n.path.isImmediateParentOf(A)}(t,e)&&function(n,s){for(const A of ea(n))if(!A.field.isKeyField()&&s.data.field(A.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const A of n.filters)if(!A.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,l,a){const c=yB(i,l,a);return i.inclusive?c<=0:c<0}(n.startAt,ea(n),s)||n.endAt&&!function(i,l,a){const c=yB(i,l,a);return i.inclusive?c>=0:c>0}(n.endAt,ea(n),s))}(t,e)}function l1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function c1(t){return(e,r)=>{let n=!1;for(const s of ea(t)){const A=M4(s,e,r);if(A!==0)return A;n=n||s.field.isKeyField()}return 0}}function M4(t,e,r){const n=t.field.isKeyField()?Qe.comparator(e.key,r.key):function(A,i,l){const a=i.data.field(A),c=l.data.field(A);return a!==null&&c!==null?XA(a,c):Oe()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,A]of n)if(this.equalsFn(s,e))return A}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let A=0;A<s.length;A++)if(this.equalsFn(s[A][0],e))return void(s[A]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){li(this.inner,(r,n)=>{for(const[s,A]of n)e(s,A)})}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=new Lt(Qe.comparator);function hn(){return O4}const u1=new Lt(Qe.comparator);function Rl(...t){let e=u1;for(const r of t)e=e.insert(r.key,r);return e}function d1(t){let e=u1;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function os(){return nc()}function h1(){return nc()}function nc(){return new Ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const H4=new Lt(Qe.comparator),V4=new St(Qe.comparator);function ot(...t){let e=V4;for(const r of t)e=e.add(r);return e}const K4=new St(nt);function Ow(){return K4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function f1(t){return{integerValue:""+t}}function g1(t,e){return OE(e)?f1(e):Hw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function G4(t,e,r){return t instanceof ya?function(s,A){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return A&&jf(A)&&(A=Lf(A)),A&&(i.fields.__previous_value__=A),{mapValue:i}}(r,e):t instanceof Xi?m1(t,e):t instanceof Ji?w1(t,e):function(s,A){const i=p1(s,A),l=IB(i)+IB(s.Pe);return Km(i)&&Km(s.Pe)?f1(l):Hw(s.serializer,l)}(t,e)}function z4(t,e,r){return t instanceof Xi?m1(t,e):t instanceof Ji?w1(t,e):r}function p1(t,e){return t instanceof va?function(n){return Km(n)||function(A){return!!A&&"doubleValue"in A}(n)}(e)?e:{integerValue:0}:null}class ya extends Of{}class Xi extends Of{constructor(e){super(),this.elements=e}}function m1(t,e){const r=x1(e);for(const n of t.elements)r.some(s=>fs(s,n))||r.push(n);return{arrayValue:{values:r}}}class Ji extends Of{constructor(e){super(),this.elements=e}}function w1(t,e){let r=x1(e);for(const n of t.elements)r=r.filter(s=>!fs(s,n));return{arrayValue:{values:r}}}class va extends Of{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function IB(t){return zt(t.integerValue||t.doubleValue)}function x1(t){return Lc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,r){this.field=e,this.transform=r}}function $4(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Xi&&s instanceof Xi||n instanceof Ji&&s instanceof Ji?ga(n.elements,s.elements,fs):n instanceof va&&s instanceof va?fs(n.Pe,s.Pe):n instanceof ya&&s instanceof ya}(t.transform,e.transform)}class W4{constructor(e,r){this.version=e,this.transformResults=r}}class Wt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hf{}function y1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oa(t.key,Wt.none()):new Ma(t.key,t.data,Wt.none());{const r=t.data,n=Rr.empty();let s=new St(Vt.comparator);for(let A of e.fields)if(!s.has(A)){let i=r.field(A);i===null&&A.length>1&&(A=A.popLast(),i=r.field(A)),i===null?n.delete(A):n.set(A,i),s=s.add(A)}return new qs(t.key,n,new dn(s.toArray()),Wt.none())}}function q4(t,e,r){t instanceof Ma?function(s,A,i){const l=s.value.clone(),a=EB(s.fieldTransforms,A,i.transformResults);l.setAll(a),A.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):t instanceof qs?function(s,A,i){if(!qd(s.precondition,A))return void A.convertToUnknownDocument(i.version);const l=EB(s.fieldTransforms,A,i.transformResults),a=A.data;a.setAll(v1(s)),a.setAll(l),A.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,r):function(s,A,i){A.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function sc(t,e,r,n){return t instanceof Ma?function(A,i,l,a){if(!qd(A.precondition,i))return l;const c=A.value.clone(),d=TB(A.fieldTransforms,a,i);return c.setAll(d),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,r,n):t instanceof qs?function(A,i,l,a){if(!qd(A.precondition,i))return l;const c=TB(A.fieldTransforms,a,i),d=i.data;return d.setAll(v1(A)),d.setAll(c),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),l===null?null:l.unionWith(A.fieldMask.fields).unionWith(A.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(A,i,l){return qd(A.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):l}(t,e,r)}function X4(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),A=p1(n.transform,s||null);A!=null&&(r===null&&(r=Rr.empty()),r.set(n.field,A))}return r||null}function _B(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ga(n,s,(A,i)=>$4(A,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ma extends Hf{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qs extends Hf{constructor(e,r,n,s,A=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=A,this.type=1}getFieldMask(){return this.fieldMask}}function v1(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function EB(t,e,r){const n=new Map;$e(t.length===r.length);for(let s=0;s<r.length;s++){const A=t[s],i=A.transform,l=e.data.field(A.field);n.set(A.field,z4(i,l,r[s]))}return n}function TB(t,e,r){const n=new Map;for(const s of t){const A=s.transform,i=r.data.field(s.field);n.set(s.field,G4(A,i,e))}return n}class Oa extends Hf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vw extends Hf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const A=this.mutations[s];A.key.isEqual(e.key)&&q4(A,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=sc(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=sc(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=h1();return this.mutations.forEach(s=>{const A=e.get(s.key),i=A.overlayedDocument;let l=this.applyToLocalView(i,A.mutatedFields);l=r.has(s.key)?null:l;const a=y1(i,l);a!==null&&n.set(s.key,a),i.isValidDocument()||i.convertToNoDocument(Ye.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),ot())}isEqual(e){return this.batchId===e.batchId&&ga(this.mutations,e.mutations,(r,n)=>_B(r,n))&&ga(this.baseMutations,e.baseMutations,(r,n)=>_B(r,n))}}class Gw{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){$e(e.mutations.length===n.length);let s=function(){return H4}();const A=e.mutations;for(let i=0;i<A.length;i++)s=s.insert(A[i].key,n[i].version);return new Gw(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,r,n){this.alias=e,this.aggregateType=r,this.fieldPath=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr,yt;function b1(t){switch(t){default:return Oe();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function C1(t){if(t===void 0)return cr("GRPC error has no .code"),z.UNKNOWN;switch(t){case dr.OK:return z.OK;case dr.CANCELLED:return z.CANCELLED;case dr.UNKNOWN:return z.UNKNOWN;case dr.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case dr.INTERNAL:return z.INTERNAL;case dr.UNAVAILABLE:return z.UNAVAILABLE;case dr.UNAUTHENTICATED:return z.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case dr.NOT_FOUND:return z.NOT_FOUND;case dr.ALREADY_EXISTS:return z.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return z.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case dr.ABORTED:return z.ABORTED;case dr.OUT_OF_RANGE:return z.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return z.UNIMPLEMENTED;case dr.DATA_LOSS:return z.DATA_LOSS;default:return Oe()}}(yt=dr||(dr={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=new ji([4294967295,4294967295],0);function kB(t){const e=I1().encode(t),r=new _E;return r.update(e),new Uint8Array(r.digest())}function FB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),A=e.getUint32(12,!0);return[new ji([r,n],0),new ji([s,A],0)]}class $w{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Dl(`Invalid padding: ${r}`);if(n<0)throw new Dl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Dl(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Dl(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=ji.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(ji.fromNumber(n)));return s.compare(Y4)===1&&(s=new ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=kB(e),[n,s]=FB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);if(!this.de(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,A=new Uint8Array(Math.ceil(e/8)),i=new $w(A,s,r);return n.forEach(l=>i.insert(l)),i}insert(e){if(this.Ie===0)return;const r=kB(e),[n,s]=FB(r);for(let A=0;A<this.hashCount;A++){const i=this.Ee(n,s,A);this.Ae(i)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,r,n,s,A){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=A}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new cu(Ye.min(),s,new Lt(nt),hn(),ot())}}class uu{constructor(e,r,n,s,A){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=A}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new uu(n,r,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class _1{constructor(e,r){this.targetId=e,this.me=r}}class E1{constructor(e,r,n=nr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class SB{constructor(){this.fe=0,this.ge=QB(),this.pe=nr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ot(),r=ot(),n=ot();return this.ge.forEach((s,A)=>{switch(A){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Oe()}}),new uu(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=QB()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Z4{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=UB(),this.Qe=new Lt(nt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const A=s.target;if(jh(A))if(n===0){const i=new Qe(A.path);this.Ue(r,i,Ht.newNoDocument(i,Ye.min()))}else $e(n===1);else{const i=this.Ye(r);if(i!==n){const l=this.Ze(e),a=l?this.Xe(l,e,i):1;if(a!==0){this.je(r);const c=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,c)}Oh==null||Oh.et(function(d,h,f,p,v){var x,_,b,w,I,F;const U={localCacheCount:d,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},R=h.unchangedNames;return R&&(U.bloomFilter={applied:v===0,hashCount:(x=R==null?void 0:R.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(w=(b=(_=R==null?void 0:R.bits)===null||_===void 0?void 0:_.bitmap)===null||b===void 0?void 0:b.length)!==null&&w!==void 0?w:0,padding:(F=(I=R==null?void 0:R.bits)===null||I===void 0?void 0:I.padding)!==null&&F!==void 0?F:0,mightContain:y=>{var B;return(B=p==null?void 0:p.mightContain(y))!==null&&B!==void 0&&B}}),U}(i,e.me,this.Le.tt(),l,a))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:A=0}=r;let i,l;try{i=Ms(n).toUint8Array()}catch(a){if(a instanceof WE)return In("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new $w(i,s,A)}catch(a){return In(a instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(A=>{const i=this.Le.tt(),l=`projects/${i.projectId}/databases/${i.database}/documents/${A.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,A,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((A,i)=>{const l=this.Je(i);if(l){if(A.current&&jh(l.target)){const a=new Qe(l.target.path);this.ke.get(a)!==null||this.it(i,a)||this.Ue(i,a,Ht.newNoDocument(a,e))}A.be&&(r.set(i,A.ve()),A.Ce())}});let n=ot();this.qe.forEach((A,i)=>{let l=!0;i.forEachWhile(a=>{const c=this.Je(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(A))}),this.ke.forEach((A,i)=>i.setReadTime(e));const s=new cu(e,r,this.Qe,this.ke,n);return this.ke=hn(),this.qe=UB(),this.Qe=new Lt(nt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new SB,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new St(nt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||le("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new SB),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function UB(){return new Lt(Qe.comparator)}function QB(){return new Lt(Qe.comparator)}const eD={asc:"ASCENDING",desc:"DESCENDING"},tD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rD={and:"AND",or:"OR"};class nD{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function qm(t,e){return t.useProto3Json||Au(e)?e:{value:e}}function Ba(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sD(t,e){return Ba(t,e.toTimestamp())}function ur(t){return $e(!!t),Ye.fromTimestamp(function(r){const n=Ls(r);return new qt(n.seconds,n.nanos)}(t))}function Ww(t,e){return Xm(t,e).canonicalString()}function Xm(t,e){const r=function(s){return new mt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function k1(t){const e=mt.fromString(t);return $e(L1(e)),e}function Oc(t,e){return Ww(t.databaseId,e.path)}function us(t,e){const r=k1(e);if(r.get(1)!==t.databaseId.projectId)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new oe(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Qe(U1(r))}function F1(t,e){return Ww(t.databaseId,e)}function S1(t){const e=k1(t);return e.length===4?mt.emptyPath():U1(e)}function Jm(t){return new mt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function U1(t){return $e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function NB(t,e,r){return{name:Oc(t,e),fields:r.value.mapValue.fields}}function Q1(t,e,r){const n=us(t,e.name),s=ur(e.updateTime),A=e.createTime?ur(e.createTime):Ye.min(),i=new Rr({mapValue:{fields:e.fields}}),l=Ht.newFoundDocument(n,s,A,i);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function AD(t,e){return"found"in e?function(n,s){$e(!!s.found),s.found.name,s.found.updateTime;const A=us(n,s.found.name),i=ur(s.found.updateTime),l=s.found.createTime?ur(s.found.createTime):Ye.min(),a=new Rr({mapValue:{fields:s.found.fields}});return Ht.newFoundDocument(A,i,l,a)}(t,e):"missing"in e?function(n,s){$e(!!s.missing),$e(!!s.readTime);const A=us(n,s.missing),i=ur(s.readTime);return Ht.newNoDocument(A,i)}(t,e):Oe()}function iD(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],A=function(c,d){return c.useProto3Json?($e(d===void 0||typeof d=="string"),nr.fromBase64String(d||"")):($e(d===void 0||d instanceof Buffer||d instanceof Uint8Array),nr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,l=i&&function(c){const d=c.code===void 0?z.UNKNOWN:C1(c.code);return new oe(d,c.message||"")}(i);r=new E1(n,s,A,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=us(t,n.document.name),A=ur(n.document.updateTime),i=n.document.createTime?ur(n.document.createTime):Ye.min(),l=new Rr({mapValue:{fields:n.document.fields}}),a=Ht.newFoundDocument(s,A,i,l),c=n.targetIds||[],d=n.removedTargetIds||[];r=new Xd(c,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=us(t,n.document),A=n.readTime?ur(n.readTime):Ye.min(),i=Ht.newNoDocument(s,A),l=n.removedTargetIds||[];r=new Xd([],l,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=us(t,n.document),A=n.removedTargetIds||[];r=new Xd([],A,s,null)}else{if(!("filter"in e))return Oe();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:A}=n,i=new J4(s,A),l=n.targetId;r=new _1(l,i)}}return r}function Hc(t,e){let r;if(e instanceof Ma)r={update:NB(t,e.key,e.value)};else if(e instanceof Oa)r={delete:Oc(t,e.key)};else if(e instanceof qs)r={update:NB(t,e.key,e.data),updateMask:dD(e.fieldMask)};else{if(!(e instanceof Vw))return Oe();r={verify:Oc(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(A,i){const l=i.transform;if(l instanceof ya)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ji)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof va)return{fieldPath:i.field.canonicalString(),increment:l.Pe};throw Oe()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,A){return A.updateTime!==void 0?{updateTime:sD(s,A.updateTime)}:A.exists!==void 0?{exists:A.exists}:Oe()}(t,e.precondition)),r}function Ym(t,e){const r=e.currentDocument?function(A){return A.updateTime!==void 0?Wt.updateTime(ur(A.updateTime)):A.exists!==void 0?Wt.exists(A.exists):Wt.none()}(e.currentDocument):Wt.none(),n=e.updateTransforms?e.updateTransforms.map(s=>function(i,l){let a=null;if("setToServerValue"in l)$e(l.setToServerValue==="REQUEST_TIME"),a=new ya;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];a=new Xi(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];a=new Ji(d)}else"increment"in l?a=new va(i,l.increment):Oe();const c=Vt.fromServerFormat(l.fieldPath);return new lu(c,a)}(t,s)):[];if(e.update){e.update.name;const s=us(t,e.update.name),A=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const i=function(a){const c=a.fieldPaths||[];return new dn(c.map(d=>Vt.fromServerFormat(d)))}(e.updateMask);return new qs(s,A,i,r,n)}return new Ma(s,A,r,n)}if(e.delete){const s=us(t,e.delete);return new Oa(s,r)}if(e.verify){const s=us(t,e.verify);return new Vw(s,r)}return Oe()}function oD(t,e){return t&&t.length>0?($e(e!==void 0),t.map(r=>function(s,A){let i=s.updateTime?ur(s.updateTime):ur(A);return i.isEqual(Ye.min())&&(i=ur(A)),new W4(i,s.transformResults||[])}(r,e))):[]}function N1(t,e){return{documents:[F1(t,e.path)]}}function Vf(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=F1(t,s);const A=function(c){if(c.length!==0)return j1(Tt.create(c,"and"))}(e.filters);A&&(r.structuredQuery.where=A);const i=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:hA(f.field),direction:lD(f.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const l=qm(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:r,parent:s}}function R1(t,e,r,n){const{_t:s,parent:A}=Vf(t,e),i={},l=[];let a=0;return r.forEach(c=>{const d=n?c.alias:"aggregate_"+a++;i[d]=c.alias,c.aggregateType==="count"?l.push({alias:d,count:{}}):c.aggregateType==="avg"?l.push({alias:d,avg:{field:hA(c.fieldPath)}}):c.aggregateType==="sum"&&l.push({alias:d,sum:{field:hA(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},ut:i,parent:A}}function D1(t){let e=S1(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){$e(n===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let A=[];r.where&&(A=function(h){const f=P1(h);return f instanceof Tt&&Lw(f)?f.getFilters():[f]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(f=>function(v){return new Mc(ko(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,Au(f)?null:f}(r.limit));let a=null;r.startAt&&(a=function(h){const f=!!h.before,p=h.values||[];return new JA(p,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new JA(p,f)}(r.endAt)),A1(e,s,i,A,l,"F",a,c)}function aD(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function P1(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ko(r.unaryFilter.field);return wt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ko(r.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const A=ko(r.unaryFilter.field);return wt.create(A,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ko(r.unaryFilter.field);return wt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(t):t.fieldFilter!==void 0?function(r){return wt.create(ko(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Tt.create(r.compositeFilter.filters.map(n=>P1(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Oe()}}(r.compositeFilter.op))}(t):Oe()}function lD(t){return eD[t]}function cD(t){return tD[t]}function uD(t){return rD[t]}function hA(t){return{fieldPath:t.canonicalString()}}function ko(t){return Vt.fromServerFormat(t.fieldPath)}function j1(t){return t instanceof wt?function(r){if(r.op==="=="){if(mB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NAN"}};if(pB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(mB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NOT_NAN"}};if(pB(r.value))return{unaryFilter:{field:hA(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hA(r.field),op:cD(r.op),value:r.value}}}(t):t instanceof Tt?function(r){const n=r.getFilters().map(s=>j1(s));return n.length===1?n[0]:{compositeFilter:{op:uD(r.op),filters:n}}}(t):Oe()}function dD(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function L1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,r,n,s,A=Ye.min(),i=Ye.min(),l=nr.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=A,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.ct=e}}function hD(t,e){let r;if(e.document)r=Q1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=Qe.fromSegments(e.noDocument.path),s=Zi(e.noDocument.readTime);r=Ht.newNoDocument(n,s),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe();{const n=Qe.fromSegments(e.unknownDocument.path),s=Zi(e.unknownDocument.version);r=Ht.newUnknownDocument(n,s)}}return e.readTime&&r.setReadTime(function(s){const A=new qt(s[0],s[1]);return Ye.fromTimestamp(A)}(e.readTime)),r}function RB(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Hh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(A,i){return{name:Oc(A,i.key),fields:i.data.value.mapValue.fields,updateTime:Ba(A,i.version.toTimestamp()),createTime:Ba(A,i.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Yi(e.version)};else{if(!e.isUnknownDocument())return Oe();n.unknownDocument={path:r.path.toArray(),version:Yi(e.version)}}return n}function Hh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zi(t){const e=new qt(t.seconds,t.nanoseconds);return Ye.fromTimestamp(e)}function Ti(t,e){const r=(e.baseMutations||[]).map(A=>Ym(t.ct,A));for(let A=0;A<e.mutations.length-1;++A){const i=e.mutations[A];if(A+1<e.mutations.length&&e.mutations[A+1].transform!==void 0){const l=e.mutations[A+1];i.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(A+1,1),++A}}const n=e.mutations.map(A=>Ym(t.ct,A)),s=qt.fromMillis(e.localWriteTimeMs);return new Kw(e.batchId,s,r,n)}function Pl(t){const e=Zi(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Zi(t.lastLimboFreeSnapshotVersion):Ye.min();let n;return n=function(A){return A.documents!==void 0}(t.query)?function(A){return $e(A.documents.length===1),Jr(La(S1(A.documents[0])))}(t.query):function(A){return Jr(D1(A))}(t.query),new Ts(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,nr.fromBase64String(t.resumeToken))}function O1(t,e){const r=Yi(e.snapshotVersion),n=Yi(e.lastLimboFreeSnapshotVersion);let s;s=jh(e.target)?N1(t.ct,e.target):Vf(t.ct,e.target)._t;const A=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qi(e.target),readTime:r,resumeToken:A,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:s}}function qw(t){const e=D1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mh(e,e.limit,"L"):e}function ap(t,e){return new zw(e.largestBatchId,Ym(t.ct,e.overlayMutation))}function DB(t,e){const r=e.path.lastSegment();return[t,Xr(e.path.popLast()),r]}function PB(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Yi(n.readTime),documentKey:Xr(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{getBundleMetadata(e,r){return jB(e).get(r).next(n=>{if(n)return function(A){return{id:A.bundleId,createTime:Zi(A.createTime),version:A.version}}(n)})}saveBundleMetadata(e,r){return jB(e).put(function(s){return{bundleId:s.id,createTime:Yi(ur(s.createTime)),version:s.version}}(r))}getNamedQuery(e,r){return LB(e).get(r).next(n=>{if(n)return function(A){return{name:A.name,query:qw(A.bundledQuery),readTime:Zi(A.readTime)}}(n)})}saveNamedQuery(e,r){return LB(e).put(function(s){return{name:s.name,readTime:Yi(ur(s.readTime)),bundledQuery:s.bundledQuery}}(r))}}function jB(t){return xr(t,"bundles")}function LB(t){return xr(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Kf(e,n)}getOverlay(e,r){return pl(e).get(DB(this.userId,r)).next(n=>n?ap(this.serializer,n):null)}getOverlays(e,r){const n=os();return L.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){const s=[];return n.forEach((A,i)=>{const l=new zw(r,i);s.push(this.ht(e,l))}),L.waitFor(s)}removeOverlaysForBatchId(e,r,n){const s=new Set;r.forEach(i=>s.add(Xr(i.getCollectionPath())));const A=[];return s.forEach(i=>{const l=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,n+1],!1,!0);A.push(pl(e).j("collectionPathOverlayIndex",l))}),L.waitFor(A)}getOverlaysForCollection(e,r,n){const s=os(),A=Xr(r),i=IDBKeyRange.bound([this.userId,A,n],[this.userId,A,Number.POSITIVE_INFINITY],!0);return pl(e).U("collectionPathOverlayIndex",i).next(l=>{for(const a of l){const c=ap(this.serializer,a);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,r,n,s){const A=os();let i;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return pl(e).J({index:"collectionGroupOverlayIndex",range:l},(a,c,d)=>{const h=ap(this.serializer,c);A.size()<s||h.largestBatchId===i?(A.set(h.getKey(),h),i=h.largestBatchId):d.done()}).next(()=>A)}ht(e,r){return pl(e).put(function(s,A,i){const[l,a,c]=DB(A,i.mutation.key);return{userId:A,collectionPath:a,documentId:c,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:Hc(s.ct,i.mutation)}}(this.serializer,this.userId,r))}}function pl(t){return xr(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{Pt(e){return xr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?nr.fromUint8Array(n):nr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(zt(e.integerValue));else if("doubleValue"in e){const n=zt(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Dc(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ls(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Ms(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?qE(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Mf(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):Oe()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const s of Object.keys(n))this.Vt(s,r),this.Tt(n[s],r)}wt(e,r){var n,s;const A=e.fields||{};this.dt(r,53);const i="value",l=((s=(n=A[i].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.length)||0;this.dt(r,15),r.At(zt(l)),this.Vt(i,r),this.Tt(A[i],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const s of n)this.Tt(s,r)}yt(e,r){this.dt(r,37),Qe.fromName(e).path.forEach(n=>{this.dt(r,60),this.Dt(n,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}ki.vt=new ki;function pD(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function MB(t){const e=64-function(n){let s=0;for(let A=0;A<8;++A){const i=pD(255&n[A]);if(s+=i,i!==8)break}return s}(t);return Math.ceil(e/8)}class mD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const s=r.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const s=r.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const r=this.qt(e),n=MB(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=255&r[s]}Kt(e){const r=this.qt(e),n=MB(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let s=r.length-n;s<r.length;++s)this.buffer[this.position++]=~(255&r[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(A){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,A,!1),new Uint8Array(i.buffer)}(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let s=1;s<r.length;++s)r[s]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const s=new Uint8Array(n);s.set(this.buffer),this.buffer=s}}class wD{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class xD{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ml{constructor(){this.jt=new mD,this.Ht=new wD(this.jt),this.Jt=new xD(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,r,n,s){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=s}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Fi(this.indexId,this.documentKey,this.arrayValue,n)}}function rA(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=OB(t.arrayValue,e.arrayValue),r!==0?r:(r=OB(t.directionalValue,e.directionalValue),r!==0?r:Qe.comparator(t.documentKey,e.documentKey)))}function OB(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.Xt=new St((r,n)=>Vt.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if($e(e.collectionGroup===this.collectionId),this.nn)return!1;const r=Om(e);if(r!==void 0&&!this.sn(r))return!1;const n=_i(e);let s=new Set,A=0,i=0;for(;A<n.length&&this.sn(n[A]);++A)s=s.add(n[A].fieldPath.canonicalString());if(A===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!s.has(l.field.canonicalString())){const a=n[A];if(!this.on(l,a)||!this._n(this.en[i++],a))return!1}++A}for(;A<n.length;++A){const l=n[A];if(i>=this.en.length||!this._n(this.en[i++],l))return!1}return!0}an(){if(this.nn)return null;let e=new St(Vt.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Li(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Li(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Li(n.field,n.dir==="asc"?0:1)));return new pa(pa.UNKNOWN_ID,this.collectionId,r,ma.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){var e,r;if($e(t instanceof wt||t instanceof Tt),t instanceof wt){if(t instanceof s1){const s=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map(A=>wt.create(t.field,"==",A)))||[];return Tt.create(s,"or")}return t}const n=t.filters.map(s=>H1(s));return Tt.create(n,t.op)}function yD(t){if(t.getFilters().length===0)return[];const e=t0(H1(t));return $e(V1(e)),Zm(e)||e0(e)?[e]:e.getFilters()}function Zm(t){return t instanceof wt}function e0(t){return t instanceof Tt&&Lw(t)}function V1(t){return Zm(t)||e0(t)||function(r){if(r instanceof Tt&&Gm(r)){for(const n of r.getFilters())if(!Zm(n)&&!e0(n))return!1;return!0}return!1}(t)}function t0(t){if($e(t instanceof wt||t instanceof Tt),t instanceof wt)return t;if(t.filters.length===1)return t0(t.filters[0]);const e=t.filters.map(n=>t0(n));let r=Tt.create(e,t.op);return r=Vh(r),V1(r)?r:($e(r instanceof Tt),$e(xa(r)),$e(r.filters.length>1),r.filters.reduce((n,s)=>Xw(n,s)))}function Xw(t,e){let r;return $e(t instanceof wt||t instanceof Tt),$e(e instanceof wt||e instanceof Tt),r=t instanceof wt?e instanceof wt?function(s,A){return Tt.create([s,A],"and")}(t,e):VB(t,e):e instanceof wt?VB(e,t):function(s,A){if($e(s.filters.length>0&&A.filters.length>0),xa(s)&&xa(A))return t1(s,A.getFilters());const i=Gm(s)?s:A,l=Gm(s)?A:s,a=i.filters.map(c=>Xw(c,l));return Tt.create(a,"or")}(t,e),Vh(r)}function VB(t,e){if(xa(e))return t1(e,t.getFilters());{const r=e.filters.map(n=>Xw(t,n));return Tt.create(r,"or")}}function Vh(t){if($e(t instanceof wt||t instanceof Tt),t instanceof wt)return t;const e=t.getFilters();if(e.length===1)return Vh(e[0]);if(ZE(t))return t;const r=e.map(s=>Vh(s)),n=[];return r.forEach(s=>{s instanceof wt?n.push(s):s instanceof Tt&&(s.op===t.op?n.push(...s.filters):n.push(s))}),n.length===1?n[0]:Tt.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.un=new Jw}addToCollectionParentIndex(e,r){return this.un.add(r),L.resolve()}getCollectionParents(e,r){return L.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return L.resolve()}deleteFieldIndex(e,r){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,r){return L.resolve()}getDocumentsMatchingTarget(e,r){return L.resolve(null)}getIndexType(e,r){return L.resolve(0)}getFieldIndexes(e,r){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,r){return L.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,r){return L.resolve(_n.min())}updateCollectionGroup(e,r,n){return L.resolve()}updateIndexEntries(e,r){return L.resolve()}}class Jw{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new St(mt.comparator),A=!s.has(n);return this.index[r]=s.add(n),A}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new St(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Uint8Array(0);class BD{constructor(e,r){this.databaseId=r,this.cn=new Jw,this.ln=new Ws(n=>qi(n),(n,s)=>iu(n,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),s=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const A={collectionId:n,parent:Xr(s)};return KB(e).put(A)}return L.resolve()}getCollectionParents(e,r){const n=[],s=IDBKeyRange.bound([r,""],[RE(r),""],!1,!0);return KB(e).U(s).next(A=>{for(const i of A){if(i.collectionId!==r)break;n.push(is(i.parent))}return n})}addFieldIndex(e,r){const n=wl(e),s=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(r);delete s.indexId;const A=n.add(s);if(r.indexState){const i=xo(e);return A.next(l=>{i.put(PB(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return A.next()}deleteFieldIndex(e,r){const n=wl(e),s=xo(e),A=wo(e);return n.delete(r.indexId).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>A.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=wl(e),n=wo(e),s=xo(e);return r.j().next(()=>n.j()).next(()=>s.j())}createTargetIndexes(e,r){return L.forEach(this.hn(r),n=>this.getIndexType(e,n).next(s=>{if(s===0||s===1){const A=new HB(n).an();if(A!=null)return this.addFieldIndex(e,A)}}))}getDocumentsMatchingTarget(e,r){const n=wo(e);let s=!0;const A=new Map;return L.forEach(this.hn(r),i=>this.Pn(e,i).next(l=>{s&&(s=!!l),A.set(i,l)})).next(()=>{if(s){let i=ot();const l=[];return L.forEach(A,(a,c)=>{le("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(a)} to execute ${qi(r)}`);const d=function(I,F){const U=Om(F);if(U===void 0)return null;for(const R of Lh(I,U.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null}(c,a),h=function(I,F){const U=new Map;for(const R of _i(F))for(const y of Lh(I,R.fieldPath))switch(y.op){case"==":case"in":U.set(R.fieldPath.canonicalString(),y.value);break;case"not-in":case"!=":return U.set(R.fieldPath.canonicalString(),y.value),Array.from(U.values())}return null}(c,a),f=function(I,F){const U=[];let R=!0;for(const y of _i(F)){const B=y.kind===0?BB(I,y.fieldPath,I.startAt):bB(I,y.fieldPath,I.startAt);U.push(B.value),R&&(R=B.inclusive)}return new JA(U,R)}(c,a),p=function(I,F){const U=[];let R=!0;for(const y of _i(F)){const B=y.kind===0?bB(I,y.fieldPath,I.endAt):BB(I,y.fieldPath,I.endAt);U.push(B.value),R&&(R=B.inclusive)}return new JA(U,R)}(c,a),v=this.In(a,c,f),x=this.In(a,c,p),_=this.Tn(a,c,h),b=this.En(a.indexId,d,v,f.inclusive,x,p.inclusive,_);return L.forEach(b,w=>n.G(w,r.limit).next(I=>{I.forEach(F=>{const U=Qe.fromSegments(F.documentKey);i.has(U)||(i=i.add(U),l.push(U))})}))}).next(()=>l)}return L.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=yD(Tt.create(e.filters,"and")).map(n=>$m(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,n,s,A,i,l){const a=(r!=null?r.length:1)*Math.max(n.length,A.length),c=a/(r!=null?r.length:1),d=[];for(let h=0;h<a;++h){const f=r?this.dn(r[h/c]):td,p=this.An(e,f,n[h%c],s),v=this.Rn(e,f,A[h%c],i),x=l.map(_=>this.An(e,f,_,!0));d.push(...this.createRange(p,v,x))}return d}An(e,r,n,s){const A=new Fi(e,Qe.empty(),r,n);return s?A:A.Zt()}Rn(e,r,n,s){const A=new Fi(e,Qe.empty(),r,n);return s?A.Zt():A}Pn(e,r){const n=new HB(r),s=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,s).next(A=>{let i=null;for(const l of A)n.rn(l)&&(!i||l.fields.length>i.fields.length)&&(i=l);return i})}getIndexType(e,r){let n=2;const s=this.hn(r);return L.forEach(s,A=>this.Pn(e,A).next(i=>{i?n!==0&&i.fields.length<function(a){let c=new St(Vt.comparator),d=!1;for(const h of a.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:c=c.add(f.field));for(const h of a.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(A)&&(n=1):n=0})).next(()=>function(i){return i.limit!==null}(r)&&s.length>1&&n===2?1:n)}Vn(e,r){const n=new ml;for(const s of _i(e)){const A=r.data.field(s.fieldPath);if(A==null)return null;const i=n.Yt(s.kind);ki.vt.It(A,i)}return n.zt()}dn(e){const r=new ml;return ki.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new ml;return ki.vt.It(Wi(this.databaseId,r),n.Yt(function(A){const i=_i(A);return i.length===0?0:i[i.length-1].kind}(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let s=[];s.push(new ml);let A=0;for(const i of _i(e)){const l=n[A++];for(const a of s)if(this.fn(r,i.fieldPath)&&Lc(l))s=this.gn(s,i,l);else{const c=a.Yt(i.kind);ki.vt.It(l,c)}}return this.pn(s)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const s=[...e],A=[];for(const i of n.arrayValue.values||[])for(const l of s){const a=new ml;a.seed(l.zt()),ki.vt.It(i,a.Yt(r.kind)),A.push(a)}return A}fn(e,r){return!!e.filters.find(n=>n instanceof wt&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=wl(e),s=xo(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next(A=>{const i=[];return L.forEach(A,l=>s.get([l.indexId,this.uid]).next(a=>{i.push(function(d,h){const f=h?new ma(h.sequenceNumber,new _n(Zi(h.readTime),new Qe(is(h.documentKey)),h.largestBatchId)):ma.empty(),p=d.fields.map(([v,x])=>new Li(Vt.fromServerFormat(v),x));return new pa(d.indexId,d.collectionGroup,p,f)}(l,a))})).next(()=>i)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,s)=>{const A=n.indexState.sequenceNumber-s.indexState.sequenceNumber;return A!==0?A:nt(n.collectionGroup,s.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const s=wl(e),A=xo(e);return this.yn(e).next(i=>s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(l=>L.forEach(l,a=>A.put(PB(a.indexId,this.uid,i,n)))))}updateIndexEntries(e,r){const n=new Map;return L.forEach(r,(s,A)=>{const i=n.get(s.collectionGroup);return(i?L.resolve(i):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(n.set(s.collectionGroup,l),L.forEach(l,a=>this.wn(e,s,a).next(c=>{const d=this.Sn(A,a);return c.isEqual(d)?L.resolve():this.bn(e,A,a,c,d)}))))})}Dn(e,r,n,s){return wo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,s){return wo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const s=wo(e);let A=new St(rA);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},(i,l)=>{A=A.add(new Fi(n.indexId,r,l.arrayValue,l.directionalValue))}).next(()=>A)}Sn(e,r){let n=new St(rA);const s=this.Vn(r,e);if(s==null)return n;const A=Om(r);if(A!=null){const i=e.data.field(A.fieldPath);if(Lc(i))for(const l of i.arrayValue.values||[])n=n.add(new Fi(r.indexId,e.key,this.dn(l),s))}else n=n.add(new Fi(r.indexId,e.key,td,s));return n}bn(e,r,n,s,A){le("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const i=[];return function(a,c,d,h,f){const p=a.getIterator(),v=c.getIterator();let x=mo(p),_=mo(v);for(;x||_;){let b=!1,w=!1;if(x&&_){const I=d(x,_);I<0?w=!0:I>0&&(b=!0)}else x!=null?w=!0:b=!0;b?(h(_),_=mo(v)):w?(f(x),x=mo(p)):(x=mo(p),_=mo(v))}}(s,A,rA,l=>{i.push(this.Dn(e,r,n,l))},l=>{i.push(this.vn(e,r,n,l))}),L.waitFor(i)}yn(e){let r=1;return xo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,s,A)=>{A.done(),r=s.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((i,l)=>rA(i,l)).filter((i,l,a)=>!l||rA(i,a[l-1])!==0);const s=[];s.push(e);for(const i of n){const l=rA(i,e),a=rA(i,r);if(l===0)s[0]=e.Zt();else if(l>0&&a<0)s.push(i),s.push(i.Zt());else if(a>0)break}s.push(r);const A=[];for(let i=0;i<s.length;i+=2){if(this.Cn(s[i],s[i+1]))return[];const l=[s[i].indexId,this.uid,s[i].arrayValue,s[i].directionalValue,td,[]],a=[s[i+1].indexId,this.uid,s[i+1].arrayValue,s[i+1].directionalValue,td,[]];A.push(IDBKeyRange.bound(l,a))}return A}Cn(e,r){return rA(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(GB)}getMinOffset(e,r){return L.mapArray(this.hn(r),n=>this.Pn(e,n).next(s=>s||Oe())).next(GB)}}function KB(t){return xr(t,"collectionParents")}function wo(t){return xr(t,"indexEntries")}function wl(t){return xr(t,"indexConfiguration")}function xo(t){return xr(t,"indexState")}function GB(t){$e(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const s=t[n].indexState.offset;Dw(s,e)<0&&(e=s),r<s.largestBatchId&&(r=s.largestBatchId)}return new _n(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(t,e,r){const n=t.store("mutations"),s=t.store("documentMutations"),A=[],i=IDBKeyRange.only(r.batchId);let l=0;const a=n.J({range:i},(d,h,f)=>(l++,f.delete()));A.push(a.next(()=>{$e(l===1)}));const c=[];for(const d of r.mutations){const h=HE(e,d.key.path,r.batchId);A.push(s.delete(h)),c.push(d.key)}return L.waitFor(A).next(()=>c)}function Kh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oe();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);class Gf{constructor(e,r,n,s){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=s,this.Fn={}}static lt(e,r,n,s){$e(e.uid!=="");const A=e.isAuthenticated()?e.uid:"";return new Gf(A,r,n,s)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nA(e).J({index:"userMutationsIndex",range:n},(s,A,i)=>{r=!1,i.done()}).next(()=>r)}addMutationBatch(e,r,n,s){const A=Fo(e),i=nA(e);return i.add({}).next(l=>{$e(typeof l=="number");const a=new Kw(l,r,n,s),c=function(p,v,x){const _=x.baseMutations.map(w=>Hc(p.ct,w)),b=x.mutations.map(w=>Hc(p.ct,w));return{userId:v,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:_,mutations:b}}(this.serializer,this.userId,a),d=[];let h=new St((f,p)=>nt(f.canonicalString(),p.canonicalString()));for(const f of s){const p=HE(this.userId,f.key.path,l);h=h.add(f.key.path.popLast()),d.push(i.put(c)),d.push(A.put(p,l4))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Fn[l]=a.keys()}),L.waitFor(d).next(()=>a)})}lookupMutationBatch(e,r){return nA(e).get(r).next(n=>n?($e(n.userId===this.userId),Ti(this.serializer,n)):null)}Mn(e,r){return this.Fn[r]?L.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const s=n.keys();return this.Fn[r]=s,s}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=IDBKeyRange.lowerBound([this.userId,n]);let A=null;return nA(e).J({index:"userMutationsIndex",range:s},(i,l,a)=>{l.userId===this.userId&&($e(l.batchId>=n),A=Ti(this.serializer,l)),a.done()}).next(()=>A)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return nA(e).J({index:"userMutationsIndex",range:r,reverse:!0},(s,A,i)=>{n=A.batchId,i.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nA(e).U("userMutationsIndex",r).next(n=>n.map(s=>Ti(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Gd(this.userId,r.path),s=IDBKeyRange.lowerBound(n),A=[];return Fo(e).J({range:s},(i,l,a)=>{const[c,d,h]=i,f=is(d);if(c===this.userId&&r.path.isEqual(f))return nA(e).get(h).next(p=>{if(!p)throw Oe();$e(p.userId===this.userId),A.push(Ti(this.serializer,p))});a.done()}).next(()=>A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new St(nt);const s=[];return r.forEach(A=>{const i=Gd(this.userId,A.path),l=IDBKeyRange.lowerBound(i),a=Fo(e).J({range:l},(c,d,h)=>{const[f,p,v]=c,x=is(p);f===this.userId&&A.path.isEqual(x)?n=n.add(v):h.done()});s.push(a)}),L.waitFor(s).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1,A=Gd(this.userId,n),i=IDBKeyRange.lowerBound(A);let l=new St(nt);return Fo(e).J({range:i},(a,c,d)=>{const[h,f,p]=a,v=is(f);h===this.userId&&n.isPrefixOf(v)?v.length===s&&(l=l.add(p)):d.done()}).next(()=>this.xn(e,l))}xn(e,r){const n=[],s=[];return r.forEach(A=>{s.push(nA(e).get(A).next(i=>{if(i===null)throw Oe();$e(i.userId===this.userId),n.push(Ti(this.serializer,i))}))}),L.waitFor(s).next(()=>n)}removeMutationBatch(e,r){return K1(e._e,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),L.forEach(n,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return L.resolve();const n=IDBKeyRange.lowerBound(function(i){return[i]}(this.userId)),s=[];return Fo(e).J({range:n},(A,i,l)=>{if(A[0]===this.userId){const a=is(A[1]);s.push(a)}else l.done()}).next(()=>{$e(s.length===0)})})}containsKey(e,r){return G1(e,this.userId,r)}Nn(e){return z1(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function G1(t,e,r){const n=Gd(e,r.path),s=n[1],A=IDBKeyRange.lowerBound(n);let i=!1;return Fo(t).J({range:A,H:!0},(l,a,c)=>{const[d,h,f]=l;d===e&&h===s&&(i=!0),c.done()}).next(()=>i)}function nA(t){return xr(t,"mutations")}function Fo(t){return xr(t,"documentMutations")}function z1(t){return xr(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new eo(0)}static kn(){return new eo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const n=new eo(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>Ye.fromTimestamp(new qt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.qn(e).next(s=>(s.highestListenSequenceNumber=r,n&&(s.lastRemoteSnapshotVersion=n.toTimestamp()),r>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r),this.Qn(e,s)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>yo(e).delete(r.targetId)).next(()=>this.qn(e)).next(n=>($e(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,r,n){let s=0;const A=[];return yo(e).J((i,l)=>{const a=Pl(l);a.sequenceNumber<=r&&n.get(a.targetId)===null&&(s++,A.push(this.removeTargetData(e,a)))}).next(()=>L.waitFor(A)).next(()=>s)}forEachTarget(e,r){return yo(e).J((n,s)=>{const A=Pl(s);r(A)})}qn(e){return $B(e).get("targetGlobalKey").next(r=>($e(r!==null),r))}Qn(e,r){return $B(e).put("targetGlobalKey",r)}Kn(e,r){return yo(e).put(O1(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const n=qi(r),s=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let A=null;return yo(e).J({range:s,index:"queryTargetsIndex"},(i,l,a)=>{const c=Pl(l);iu(r,c.target)&&(A=c,a.done())}).next(()=>A)}addMatchingKeys(e,r,n){const s=[],A=fA(e);return r.forEach(i=>{const l=Xr(i.path);s.push(A.put({targetId:n,path:l})),s.push(this.referenceDelegate.addReference(e,n,i))}),L.waitFor(s)}removeMatchingKeys(e,r,n){const s=fA(e);return L.forEach(r,A=>{const i=Xr(A.path);return L.waitFor([s.delete([n,i]),this.referenceDelegate.removeReference(e,n,A)])})}removeMatchingKeysForTargetId(e,r){const n=fA(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(s)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),s=fA(e);let A=ot();return s.J({range:n,H:!0},(i,l,a)=>{const c=is(i[1]),d=new Qe(c);A=A.add(d)}).next(()=>A)}containsKey(e,r){const n=Xr(r.path),s=IDBKeyRange.bound([n],[RE(n)],!1,!0);let A=0;return fA(e).J({index:"documentTargetsIndex",H:!0,range:s},([i,l],a,c)=>{i!==0&&(A++,c.done())}).next(()=>A>0)}ot(e,r){return yo(e).get(r).next(n=>n?Pl(n):null)}}function yo(t){return xr(t,"targets")}function $B(t){return xr(t,"targetGlobal")}function fA(t){return xr(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB([t,e],[r,n]){const s=nt(t,r);return s===0?nt(e,n):s}class CD{constructor(e){this.Un=e,this.buffer=new St(WB),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();WB(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class $1{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){le("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ai(r)?le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await oi(r)}await this.Hn(3e5)})}}class ID{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return L.resolve(un.oe);const n=new CD(r);return this.Jn.forEachTarget(e,s=>n.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>n.zn(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(zB)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zB):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,s,A,i,l,a,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,l=Date.now(),this.removeTargets(e,n,r))).next(h=>(A=h,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(c=Date.now(),Eo()<=pt.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(l-i)+`ms
	Removed ${A} targets in `+(a-l)+`ms
	Removed ${h} documents in `+(c-a)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:A,documentsRemoved:h})))}}function W1(t,e){return new ID(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,r){this.db=e,this.garbageCollector=W1(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(n,s)=>r(s))}addReference(e,r,n){return rd(e,n)}removeReference(e,r,n){return rd(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return rd(e,r)}nr(e,r){return function(s,A){let i=!1;return z1(s).Y(l=>G1(s,l,A).next(a=>(a&&(i=!0),L.resolve(!a)))).next(()=>i)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let A=0;return this.tr(e,(i,l)=>{if(l<=r){const a=this.nr(e,i).next(c=>{if(!c)return A++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Ye.min()),fA(e).delete(function(h){return[0,Xr(h.path)]}(i))))});s.push(a)}}).next(()=>L.waitFor(s)).next(()=>n.apply(e)).next(()=>A)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return rd(e,r)}tr(e,r){const n=fA(e);let s,A=un.oe;return n.J({index:"documentTargetsIndex"},([i,l],{path:a,sequenceNumber:c})=>{i===0?(A!==un.oe&&r(new Qe(is(s)),A),A=c,s=a):A=un.oe}).next(()=>{A!==un.oe&&r(new Qe(is(s)),A)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rd(t,e){return fA(t).put(function(n,s){return{targetId:0,path:Xr(n.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.changes=new Ws(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?L.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return vi(e).put(n)}removeEntry(e,r,n){return vi(e).delete(function(A,i){const l=A.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Hh(i),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.rr(e,n)))}getEntry(e,r){let n=Ht.newInvalidDocument(r);return vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xl(r))},(s,A)=>{n=this.ir(r,A)}).next(()=>n)}sr(e,r){let n={size:0,document:Ht.newInvalidDocument(r)};return vi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xl(r))},(s,A)=>{n={document:this.ir(r,A),size:Kh(A)}}).next(()=>n)}getEntries(e,r){let n=hn();return this._r(e,r,(s,A)=>{const i=this.ir(s,A);n=n.insert(s,i)}).next(()=>n)}ar(e,r){let n=hn(),s=new Lt(Qe.comparator);return this._r(e,r,(A,i)=>{const l=this.ir(A,i);n=n.insert(A,l),s=s.insert(A,Kh(i))}).next(()=>({documents:n,ur:s}))}_r(e,r,n){if(r.isEmpty())return L.resolve();let s=new St(JB);r.forEach(a=>s=s.add(a));const A=IDBKeyRange.bound(xl(s.first()),xl(s.last())),i=s.getIterator();let l=i.getNext();return vi(e).J({index:"documentKeyIndex",range:A},(a,c,d)=>{const h=Qe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;l&&JB(l,h)<0;)n(l,null),l=i.getNext();l&&l.isEqual(h)&&(n(l,c),l=i.hasNext()?i.getNext():null),l?d.$(xl(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,r,n,s,A){const i=r.path,l=[i.popLast().toArray(),i.lastSegment(),Hh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vi(e).U(IDBKeyRange.bound(l,a,!0)).next(c=>{A==null||A.incrementDocumentReadCount(c.length);let d=hn();for(const h of c){const f=this.ir(Qe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(au(r,f)||s.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,r,n,s){let A=hn();const i=XB(r,n),l=XB(r,_n.max());return vi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,l,!0)},(a,c,d)=>{const h=this.ir(Qe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);A=A.insert(h.key,h),A.size===s&&d.done()}).next(()=>A)}newChangeBuffer(e){return new TD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return qB(e).get("remoteDocumentGlobalKey").next(r=>($e(!!r),r))}rr(e,r){return qB(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=hD(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Ye.min())))return n}return Ht.newInvalidDocument(e)}}function X1(t){return new ED(t)}class TD extends q1{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Ws(n=>n.toString(),(n,s)=>n.isEqual(s))}applyChanges(e){const r=[];let n=0,s=new St((A,i)=>nt(A.canonicalString(),i.canonicalString()));return this.changes.forEach((A,i)=>{const l=this.lr.get(A);if(r.push(this.cr.removeEntry(e,A,l.readTime)),i.isValidDocument()){const a=RB(this.cr.serializer,i);s=s.add(A.path.popLast());const c=Kh(a);n+=c-l.size,r.push(this.cr.addEntry(e,A,a))}else if(n-=l.size,this.trackRemovals){const a=RB(this.cr.serializer,i.convertToNoDocument(Ye.min()));r.push(this.cr.addEntry(e,A,a))}}),s.forEach(A=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,A))}),r.push(this.cr.updateMetadata(e,n)),L.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:n,ur:s})=>(s.forEach((A,i)=>{this.lr.set(A,{size:i,readTime:n.get(A).readTime})}),n))}}function qB(t){return xr(t,"remoteDocumentGlobal")}function vi(t){return xr(t,"remoteDocumentsV14")}function xl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XB(t,e){const r=e.documentKey.path.toArray();return[t,Hh(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function JB(t,e){const r=t.path.toArray(),n=e.path.toArray();let s=0;for(let A=0;A<r.length-2&&A<n.length-2;++A)if(s=nt(r[A],n[A]),s)return s;return s=nt(r.length,n.length),s||(s=nt(r[r.length-2],n[n.length-2]),s||nt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&sc(n.mutation,s,dn.empty(),qt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,ot()).next(()=>n))}getLocalViewOfDocuments(e,r,n=ot()){const s=os();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(A=>{let i=Rl();return A.forEach((l,a)=>{i=i.insert(l,a.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=os();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,ot()))}populateOverlays(e,r,n){const s=[];return n.forEach(A=>{r.has(A)||s.push(A)}),this.documentOverlayCache.getOverlays(e,s).next(A=>{A.forEach((i,l)=>{r.set(i,l)})})}computeViews(e,r,n,s){let A=hn();const i=nc(),l=function(){return nc()}();return r.forEach((a,c)=>{const d=n.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof qs)?A=A.insert(c.key,c):d!==void 0?(i.set(c.key,d.mutation.getFieldMask()),sc(d.mutation,c,d.mutation.getFieldMask(),qt.now())):i.set(c.key,dn.empty())}),this.recalculateAndSaveOverlays(e,A).next(a=>(a.forEach((c,d)=>i.set(c,d)),r.forEach((c,d)=>{var h;return l.set(c,new kD(d,(h=i.get(c))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const n=nc();let s=new Lt((i,l)=>i-l),A=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const l of i)l.keys().forEach(a=>{const c=r.get(a);if(c===null)return;let d=n.get(a)||dn.empty();d=l.applyToLocalView(c,d),n.set(a,d);const h=(s.get(l.batchId)||ot()).add(a);s=s.insert(l.batchId,h)})}).next(()=>{const i=[],l=s.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,d=a.value,h=h1();d.forEach(f=>{if(!A.has(f)){const p=y1(r.get(f),n.get(f));p!==null&&h.set(f,p),A=A.add(f)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return Qe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Mw(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(A=>{const i=s-A.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-A.size):L.resolve(os());let l=-1,a=A;return i.next(c=>L.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),A.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,c,A)).next(()=>this.computeViews(e,a,c,ot())).next(d=>({batchId:l,changes:d1(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Qe(r)).next(n=>{let s=Rl();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const A=r.collectionGroup;let i=Rl();return this.indexManager.getCollectionParents(e,A).next(l=>L.forEach(l,a=>{const c=function(h,f){return new $s(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,a.child(A));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(d=>{d.forEach((h,f)=>{i=i.insert(h,f)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let A;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(A=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,A,s))).next(i=>{A.forEach((a,c)=>{const d=c.getKey();i.get(d)===null&&(i=i.insert(d,Ht.newInvalidDocument(d)))});let l=Rl();return i.forEach((a,c)=>{const d=A.get(a);d!==void 0&&sc(d.mutation,c,dn.empty(),qt.now()),au(r,c)&&(l=l.insert(a,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return L.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ur(s.createTime)}}(r)),L.resolve()}getNamedQuery(e,r){return L.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:qw(s.bundledQuery),readTime:ur(s.readTime)}}(r)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.overlays=new Lt(Qe.comparator),this.Ir=new Map}getOverlay(e,r){return L.resolve(this.overlays.get(r))}getOverlays(e,r){const n=os();return L.forEach(r,s=>this.getOverlay(e,s).next(A=>{A!==null&&n.set(s,A)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,A)=>{this.ht(e,r,A)}),L.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(A=>this.overlays=this.overlays.remove(A)),this.Ir.delete(n)),L.resolve()}getOverlaysForCollection(e,r,n){const s=os(),A=r.length+1,i=new Qe(r.child("")),l=this.overlays.getIteratorFrom(i);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===A&&a.largestBatchId>n&&s.set(a.getKey(),a)}return L.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let A=new Lt((c,d)=>c-d);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>n){let d=A.get(c.largestBatchId);d===null&&(d=os(),A=A.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=os(),a=A.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return L.resolve(l)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new zw(r,n));let A=this.Ir.get(r);A===void 0&&(A=ot(),this.Ir.set(r,A)),this.Ir.set(r,A.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.sessionToken=nr.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.Tr=new St(Cr.Er),this.dr=new St(Cr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Cr(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Cr(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new Qe(new mt([])),n=new Cr(r,e),s=new Cr(r,e+1),A=[];return this.dr.forEachInRange([n,s],i=>{this.Vr(i),A.push(i.key)}),A}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new Qe(new mt([])),n=new Cr(r,e),s=new Cr(r,e+1);let A=ot();return this.dr.forEachInRange([n,s],i=>{A=A.add(i.key)}),A}containsKey(e){const r=new Cr(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Cr{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return Qe.comparator(e.key,r.key)||nt(e.wr,r.wr)}static Ar(e,r){return nt(e.wr,r.wr)||Qe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new St(Cr.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const A=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Kw(A,r,n,s);this.mutationQueue.push(i);for(const l of s)this.br=this.br.add(new Cr(l.key,A)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(i)}lookupMutationBatch(e,r){return L.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),A=s<0?0:s;return L.resolve(this.mutationQueue.length>A?this.mutationQueue[A]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Cr(r,0),s=new Cr(r,Number.POSITIVE_INFINITY),A=[];return this.br.forEachInRange([n,s],i=>{const l=this.Dr(i.wr);A.push(l)}),L.resolve(A)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new St(nt);return r.forEach(s=>{const A=new Cr(s,0),i=new Cr(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([A,i],l=>{n=n.add(l.wr)})}),L.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let A=n;Qe.isDocumentKey(A)||(A=A.child(""));const i=new Cr(new Qe(A),0);let l=new St(nt);return this.br.forEachWhile(a=>{const c=a.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(l=l.add(a.wr)),!0)},i),L.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){$e(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return L.forEach(r.mutations,s=>{const A=new Cr(s.key,r.batchId);return n=n.delete(A),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Cr(r,0),s=this.br.firstAfterOrEqual(n);return L.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.Mr=e,this.docs=function(){return new Lt(Qe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),A=s?s.size:0,i=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-A,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return L.resolve(n?n.document.mutableCopy():Ht.newInvalidDocument(r))}getEntries(e,r){let n=hn();return r.forEach(s=>{const A=this.docs.get(s);n=n.insert(s,A?A.document.mutableCopy():Ht.newInvalidDocument(s))}),L.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let A=hn();const i=r.path,l=new Qe(i.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:d}}=a.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Dw(PE(d),n)<=0||(s.has(d.key)||au(r,d))&&(A=A.insert(d.key,d.mutableCopy()))}return L.resolve(A)}getAllFromCollectionGroup(e,r,n,s){Oe()}Or(e,r){return L.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new RD(this)}getSize(e){return L.resolve(this.size)}}class RD extends q1{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),L.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.persistence=e,this.Nr=new Ws(r=>qi(r),iu),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Yw,this.targetCount=0,this.kr=eo.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),L.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new eo(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,L.resolve()}updateTargetData(e,r){return this.Kn(r),L.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,r,n){let s=0;const A=[];return this.Nr.forEach((i,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(i),A.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(A).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return L.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),L.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,A=[];return s&&r.forEach(i=>{A.push(s.markPotentiallyOrphaned(e,i))}),L.waitFor(A)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),L.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return L.resolve(n)}containsKey(e,r){return L.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,r){this.qr={},this.overlays={},this.Qr=new un(0),this.Kr=!1,this.Kr=!0,this.$r=new UD,this.referenceDelegate=e(this),this.Ur=new DD(this),this.indexManager=new vD,this.remoteDocumentCache=function(s){return new ND(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new M1(r),this.Gr=new FD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new SD,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new QD(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){le("MemoryPersistence","Starting transaction:",e);const s=new PD(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(A=>this.referenceDelegate.jr(s).next(()=>A)).toPromise().then(A=>(s.raiseOnCommittedEvent(),A))}Hr(e,r){return L.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class PD extends LE{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Jr=new Yw,this.Yr=null}static Zr(e){return new zf(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),L.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),L.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),L.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(A=>this.Xr.add(A.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,n=>{const s=Qe.fromPath(n);return this.ei(e,s).next(A=>{A||r.removeEntry(s,Ye.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return L.or([()=>L.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Gh{constructor(e,r){this.persistence=e,this.ti=new Ws(n=>Xr(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=W1(this,r)}static Zr(e,r){return new Gh(e,r)}zr(){}jr(e){return L.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}Yn(e){const r=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}er(e){let r=0;return this.Zn(e,n=>{r++}).next(()=>r)}Zn(e,r){return L.forEach(this.ti,(n,s)=>this.nr(e,n,s).next(A=>A?L.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),A=s.newChangeBuffer();return s.Or(e,i=>this.nr(e,i,r).next(l=>{l||(n++,A.removeEntry(i,Ye.min()))})).next(()=>A.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.ti.set(r,e.currentSequenceNumber),L.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),L.resolve()}removeReference(e,r,n){return this.ti.set(n,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,r){return this.ti.set(r,e.currentSequenceNumber),L.resolve()}Wr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=$d(e.data.value)),r}nr(e,r,n){return L.or([()=>this.persistence.Hr(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.ti.get(r);return L.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.serializer=e}O(e,r,n,s){const A=new Pf("createOrUpgrade",r);n<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uB,{unique:!0}),a.createObjectStore("documentMutations")}(e),YB(e),function(a){a.createObjectStore("remoteDocuments")}(e));let i=L.resolve();return n<3&&s>=3&&(n!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),YB(e)),i=i.next(()=>function(a){const c=a.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ye.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(A))),n<4&&s>=4&&(n!==0&&(i=i.next(()=>function(a,c){return c.store("mutations").U().next(d=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uB,{unique:!0});const h=c.store("mutations"),f=d.map(p=>h.put(p));return L.waitFor(f)})}(e,A))),i=i.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&s>=5&&(i=i.next(()=>this.ni(A))),n<6&&s>=6&&(i=i.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.ri(A)))),n<7&&s>=7&&(i=i.next(()=>this.ii(A))),n<8&&s>=8&&(i=i.next(()=>this.si(e,A))),n<9&&s>=9&&(i=i.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&s>=10&&(i=i.next(()=>this.oi(A))),n<11&&s>=11&&(i=i.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&s>=12&&(i=i.next(()=>{(function(a){const c=a.createObjectStore("documentOverlays",{keyPath:v4});c.createIndex("collectionPathOverlayIndex",B4,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",b4,{unique:!1})})(e)})),n<13&&s>=13&&(i=i.next(()=>function(a){const c=a.createObjectStore("remoteDocumentsV14",{keyPath:c4});c.createIndex("documentKeyIndex",u4),c.createIndex("collectionGroupIndex",d4)}(e)).next(()=>this._i(e,A)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&s>=14&&(i=i.next(()=>this.ai(e,A))),n<15&&s>=15&&(i=i.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:m4}).createIndex("sequenceNumberIndex",w4,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:x4}).createIndex("documentKeyIndex",y4,{unique:!1})}(e))),n<16&&s>=16&&(i=i.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),n<17&&s>=17&&(i=i.next(()=>{(function(a){a.createObjectStore("globals",{keyPath:"name"})})(e)})),i}ri(e){let r=0;return e.store("remoteDocuments").J((n,s)=>{r+=Kh(s)}).next(()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next(s=>L.forEach(s,A=>{const i=IDBKeyRange.bound([A.userId,-1],[A.userId,A.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",i).next(l=>L.forEach(l,a=>{$e(a.userId===A.userId);const c=Ti(this.serializer,a);return K1(e,A.userId,c).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const A=[];return n.J((i,l)=>{const a=new mt(i),c=function(h){return[0,Xr(h)]}(a);A.push(r.get(c).next(d=>d?L.resolve():(h=>r.put({targetId:0,path:Xr(h),sequenceNumber:s.highestListenSequenceNumber}))(a)))}).next(()=>L.waitFor(A))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:p4});const n=r.store("collectionParents"),s=new Jw,A=i=>{if(s.add(i)){const l=i.lastSegment(),a=i.popLast();return n.put({collectionId:l,parent:Xr(a)})}};return r.store("remoteDocuments").J({H:!0},(i,l)=>{const a=new mt(i);return A(a.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([i,l,a],c)=>{const d=is(l);return A(d.popLast())}))}oi(e){const r=e.store("targets");return r.J((n,s)=>{const A=Pl(s),i=O1(this.serializer,A);return r.put(i)})}_i(e,r){const n=r.store("remoteDocuments"),s=[];return n.J((A,i)=>{const l=r.store("remoteDocumentsV14"),a=function(h){return h.document?new Qe(mt.fromString(h.document.name).popFirst(5)):h.noDocument?Qe.fromSegments(h.noDocument.path):h.unknownDocument?Qe.fromSegments(h.unknownDocument.path):Oe()}(i).path.toArray(),c={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};s.push(l.put(c))}).next(()=>L.waitFor(s))}ai(e,r){const n=r.store("mutations"),s=X1(this.serializer),A=new Zw(zf.Zr,this.serializer.ct);return n.U().next(i=>{const l=new Map;return i.forEach(a=>{var c;let d=(c=l.get(a.userId))!==null&&c!==void 0?c:ot();Ti(this.serializer,a).keys().forEach(h=>d=d.add(h)),l.set(a.userId,d)}),L.forEach(l,(a,c)=>{const d=new _r(c),h=Kf.lt(this.serializer,d),f=A.getIndexManager(d),p=Gf.lt(d,this.serializer,f,A.referenceDelegate);return new J1(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Hm(r,un.oe),a).next()})})}}function YB(t){t.createObjectStore("targetDocuments",{keyPath:f4}).createIndex("documentTargetsIndex",g4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",h4,{unique:!0}),t.createObjectStore("targetGlobal")}const lp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ex{constructor(e,r,n,s,A,i,l,a,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=A,this.window=i,this.document=l,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=f=>Promise.resolve(),!ex.D())throw new oe(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _D(this,s),this.Ai=r+"main",this.serializer=new M1(a),this.Ri=new cs(this.Ai,this.hi,new jD(this.serializer)),this.$r=new gD,this.Ur=new bD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=X1(this.serializer),this.Gr=new fD,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(z.FAILED_PRECONDITION,lp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new un(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(ai(e))return le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return yl(e).get("owner").next(r=>L.resolve(this.vi(r)))}Ci(e){return nd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=xr(r,"clientMetadata");return n.U().next(s=>{const A=this.xi(s,18e5),i=s.filter(l=>A.indexOf(l)===-1);return L.forEach(i,l=>n.delete(l.clientId)).next(()=>i)})}).catch(()=>[]);if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?L.resolve(!0):yl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new oe(z.FAILED_PRECONDITION,lp);return!1}}return!(!this.networkEnabled||!this.inForeground)||nd(e).U().next(n=>this.xi(n,5e3).find(s=>{if(this.clientId!==s.clientId){const A=!this.networkEnabled&&s.networkEnabled,i=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(A||i&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&le("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new Hm(e,un.oe);return this.bi(r).next(()=>this.Ci(r))}),this.Ri.close(),this.qi()}xi(e,r){return e.filter(n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>nd(e).U().next(r=>this.xi(r,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Gf.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Kf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){le("IndexedDbPersistence","Starting transaction:",e);const s=r==="readonly"?"readonly":"readwrite",A=function(a){return a===17?_4:a===16?I4:a===15?jw:a===14?GE:a===13?KE:a===12?C4:a===11?VE:void Oe()}(this.hi);let i;return this.Ri.runTransaction(e,s,A,l=>(i=new Hm(l,this.Qr?this.Qr.next():un.oe),r==="readwrite-primary"?this.wi(i).next(a=>!!a||this.Si(i)).next(a=>{if(!a)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new oe(z.FAILED_PRECONDITION,jE);return n(i)}).next(a=>this.Di(i).next(()=>a)):this.Ki(i).next(()=>n(i)))).then(l=>(i.raiseOnCommittedEvent(),l))}Ki(e){return yl(e).get("owner").next(r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new oe(z.FAILED_PRECONDITION,lp)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yl(e).put("owner",r)}static D(){return cs.D()}bi(e){const r=yl(e);return r.get("owner").next(n=>this.vi(n)?(le("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):L.resolve())}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(cr(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;xE()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return le("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return cr("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yl(t){return xr(t,"owner")}function nd(t){return xr(t,"clientMetadata")}function tx(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=ot(),s=ot();for(const A of r.docChanges)switch(A.type){case 0:n=n.add(A.doc.key);break;case 1:s=s.add(A.doc.key)}return new rx(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xE()?8:ME(wr())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const A={result:null};return this.Yi(e,r).next(i=>{A.result=i}).next(()=>{if(!A.result)return this.Zi(e,r,s,n).next(i=>{A.result=i})}).next(()=>{if(A.result)return;const i=new LD;return this.Xi(e,r,i).next(l=>{if(A.result=l,this.zi)return this.es(e,r,i,l.size)})}).next(()=>A.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(Eo()<=pt.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",To(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Eo()<=pt.DEBUG&&le("QueryEngine","Query:",To(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Eo()<=pt.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",To(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(r))):L.resolve())}Yi(e,r){if(CB(r))return L.resolve(null);let n=Jr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Mh(r,null,"F"),n=Jr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(A=>{const i=ot(...A);return this.Ji.getDocuments(e,i).next(l=>this.indexManager.getMinOffset(e,n).next(a=>{const c=this.ts(r,l);return this.ns(r,c,i,a.readTime)?this.Yi(e,Mh(r,null,"F")):this.rs(e,c,r,a)}))})))}Zi(e,r,n,s){return CB(r)||s.isEqual(Ye.min())?L.resolve(null):this.Ji.getDocuments(e,n).next(A=>{const i=this.ts(r,A);return this.ns(r,i,n,s)?L.resolve(null):(Eo()<=pt.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),To(r)),this.rs(e,i,r,DE(s,-1)).next(l=>l))})}ts(e,r){let n=new St(c1(e));return r.forEach((s,A)=>{au(e,A)&&(n=n.add(A))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const A=e.limitType==="F"?r.last():r.first();return!!A&&(A.hasPendingWrites||A.version.compareTo(s)>0)}Xi(e,r,n){return Eo()<=pt.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",To(r)),this.Ji.getDocumentsMatchingQuery(e,r,_n.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(A=>(r.forEach(i=>{A=A.insert(i.key,i)}),A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Lt(nt),this._s=new Ws(A=>qi(A),iu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Z1(t,e,r,n){return new MD(t,e,r,n)}async function eT(t,e){const r=Fe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(A=>(s=A,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(A=>{const i=[],l=[];let a=ot();for(const c of s){i.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}for(const c of A){l.push(c.batchId);for(const d of c.mutations)a=a.add(d.key)}return r.localDocuments.getDocuments(n,a).next(c=>({hs:c,removedBatchIds:i,addedBatchIds:l}))})})}function OD(t,e){const r=Fe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),A=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,a,c,d){const h=c.batch,f=h.keys();let p=L.resolve();return f.forEach(v=>{p=p.next(()=>d.getEntry(a,v)).next(x=>{const _=c.docVersions.get(v);$e(_!==null),x.version.compareTo(_)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(a,h))}(r,n,e,A).next(()=>A.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let a=ot();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(a=a.add(l.batch.mutations[c].key));return a}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function tT(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function HD(t,e){const r=Fe(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",A=>{const i=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(r.Ur.removeMatchingKeys(A,d.removedDocuments,h).next(()=>r.Ur.addMatchingKeys(A,d.addedDocuments,h)));let p=f.withSequenceNumber(A.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(nr.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),s=s.insert(h,p),function(x,_,b){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,p,d)&&l.push(r.Ur.updateTargetData(A,p))});let a=hn(),c=ot();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(A,d))}),l.push(rT(A,i,e.documentUpdates).next(d=>{a=d.Ps,c=d.Is})),!n.isEqual(Ye.min())){const d=r.Ur.getLastRemoteSnapshotVersion(A).next(h=>r.Ur.setTargetsMetadata(A,A.currentSequenceNumber,n));l.push(d)}return L.waitFor(l).next(()=>i.apply(A)).next(()=>r.localDocuments.getLocalViewOfDocuments(A,a,c)).next(()=>a)}).then(A=>(r.os=s,A))}function rT(t,e,r){let n=ot(),s=ot();return r.forEach(A=>n=n.add(A)),e.getEntries(t,n).next(A=>{let i=hn();return r.forEach((l,a)=>{const c=A.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),a.isNoDocument()&&a.version.isEqual(Ye.min())?(e.removeEntry(l,a.readTime),i=i.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),i=i.insert(l,a)):le("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{Ps:i,Is:s}})}function VD(t,e){const r=Fe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ba(t,e){const r=Fe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(A=>A?(s=A,L.resolve(s)):r.Ur.allocateTargetId(n).next(i=>(s=new Ts(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ca(t,e,r){const n=Fe(t),s=n.os.get(e),A=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",A,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!ai(i))throw i;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function zh(t,e,r){const n=Fe(t);let s=Ye.min(),A=ot();return n.persistence.runTransaction("Execute query","readwrite",i=>function(a,c,d){const h=Fe(a),f=h._s.get(d);return f!==void 0?L.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(n,i,Jr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(i,l.targetId).next(a=>{A=a})}).next(()=>n.ss.getDocumentsMatchingQuery(i,e,r?s:Ye.min(),r?A:ot())).next(l=>(AT(n,l1(e),l),{documents:l,Ts:A})))}function nT(t,e){const r=Fe(t),n=Fe(r.Ur),s=r.os.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",A=>n.ot(A,e).next(i=>i?i.target:null))}function sT(t,e){const r=Fe(t),n=r.us.get(e)||Ye.min();return r.persistence.runTransaction("Get new document changes","readonly",s=>r.cs.getAllFromCollectionGroup(s,e,DE(n,-1),Number.MAX_SAFE_INTEGER)).then(s=>(AT(r,e,s),s))}function AT(t,e,r){let n=t.us.get(e)||Ye.min();r.forEach((s,A)=>{A.readTime.compareTo(n)>0&&(n=A.readTime)}),t.us.set(e,n)}async function KD(t,e,r,n){const s=Fe(t);let A=ot(),i=hn();for(const c of r){const d=e.Es(c.metadata.name);c.document&&(A=A.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),i=i.insert(d,h)}const l=s.cs.newChangeBuffer({trackRemovals:!0}),a=await ba(s,function(d){return Jr(La(mt.fromString(`__bundle__/docs/${d}`)))}(n));return s.persistence.runTransaction("Apply bundle documents","readwrite",c=>rT(c,l,i).next(d=>(l.apply(c),d)).next(d=>s.Ur.removeMatchingKeysForTargetId(c,a.targetId).next(()=>s.Ur.addMatchingKeys(c,A,a.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function GD(t,e,r=ot()){const n=await ba(t,Jr(qw(e.bundledQuery))),s=Fe(t);return s.persistence.runTransaction("Save named query","readwrite",A=>{const i=ur(e.readTime);if(n.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(A,e);const l=n.withResumeToken(nr.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(A,l).next(()=>s.Ur.removeMatchingKeysForTargetId(A,n.targetId)).next(()=>s.Ur.addMatchingKeys(A,r,n.targetId)).next(()=>s.Gr.saveNamedQuery(A,e))})}function ZB(t,e){return`firestore_clients_${t}_${e}`}function eb(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function cp(t,e){return`firestore_targets_${t}_${e}`}class $h{constructor(e,r,n,s){this.user=e,this.batchId=r,this.state=n,this.error=s}static Rs(e,r,n){const s=JSON.parse(n);let A,i=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(A=new oe(s.error.code,s.error.message))),i?new $h(e,r,s.state,A):(cr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ac{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let s,A=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return A&&n.error&&(A=typeof n.error.message=="string"&&typeof n.error.code=="string",A&&(s=new oe(n.error.code,n.error.message))),A?new Ac(e,n.state,s):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let s=typeof n=="object"&&n.activeTargetIds instanceof Array,A=Ow();for(let i=0;s&&i<n.activeTargetIds.length;++i)s=OE(n.activeTargetIds[i]),A=A.add(n.activeTargetIds[i]);return s?new Wh(e,A):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class nx{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new nx(r.clientId,r.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class r0{constructor(){this.activeTargetIds=Ow()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class up{constructor(e,r,n,s,A){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Lt(nt),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=A,this.Ds=ZB(this.persistenceKey,this.ps),this.vs=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new r0),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.Os=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const s=this.getItem(ZB(this.persistenceKey,n));if(s){const A=Wh.Rs(n,s);A&&(this.Ss=this.Ss.insert(A.clientId,A))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((n,s)=>{s.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(cp(this.persistenceKey,e));if(s){const A=Ac.Rs(e,s);A&&(n=A.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cp(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach(s=>{this.Qs(s)}),this.currentUser=e,n.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return le("SharedClientState","READ",e,r),r}setItem(e,r){le("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=function(A){let i=un.oe;if(A!=null)try{const l=JSON.parse(A);$e(typeof l=="number"),i=l}catch(l){cr("SharedClientState","Failed to read sequence number from WebStorage",l)}return i}(r.newValue);n!==un.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map(s=>this.syncEngine.eo(s)))}}}else this.bs.push(r)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const s=new $h(this.currentUser,e,r,n),A=eb(this.persistenceKey,this.currentUser,e);this.setItem(A,s.Vs())}Qs(e){const r=eb(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const s=cp(this.persistenceKey,e),A=new Ac(e,r,n);this.setItem(s,A.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Wh.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),s=Number(n[1]),A=n[2]!==void 0?n[2]:null;return $h.Rs(new _r(A),s,r)}Ys(e,r){const n=this.Ms.exec(e),s=Number(n[1]);return Ac.Rs(s,r)}Ls(e){return nx.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),s=this.ks(this.Ss),A=this.ks(n),i=[],l=[];return A.forEach(a=>{s.has(a)||i.push(a)}),s.forEach(a=>{A.has(a)||l.push(a)}),this.syncEngine.io(i,l).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=Ow();return e.forEach((n,s)=>{r=r.unionWith(s.activeTargetIds)}),r}}class iT{constructor(){this.so=new r0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new r0,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function dp(){return sd===null?sd=function(){return 268435456+Math.round(2147483648*Math.random())}():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="WebChannelConnection";class qD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),A=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${A}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${A}`}get Fo(){return!1}Mo(r,n,s,A,i){const l=dp(),a=this.xo(r,n.toUriEncodedString());le("RestConnection",`Sending RPC '${r}' ${l}:`,a,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,A,i),this.No(r,a,c,s).then(d=>(le("RestConnection",`Received RPC '${r}' ${l}: `,d),d),d=>{throw In("RestConnection",`RPC '${r}' ${l} failed with error: `,d,"url: ",a,"request:",s),d})}Lo(r,n,s,A,i,l){return this.Mo(r,n,s,A,i)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ja}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((A,i)=>r[i]=A),s&&s.headers.forEach((A,i)=>r[i]=A)}xo(r,n){const s=$D[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const A=dp();return new Promise((i,l)=>{const a=new EE;a.setWithCredentials(!0),a.listenOnce(TE.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Kd.NO_ERROR:const d=a.getResponseJson();le(Kr,`XHR for RPC '${e}' ${A} received:`,JSON.stringify(d)),i(d);break;case Kd.TIMEOUT:le(Kr,`RPC '${e}' ${A} timed out`),l(new oe(z.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const h=a.getStatus();if(le(Kr,`RPC '${e}' ${A} failed with status:`,h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const v=function(_){const b=_.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(b)>=0?b:z.UNKNOWN}(p.status);l(new oe(v,p.message))}else l(new oe(z.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new oe(z.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{le(Kr,`RPC '${e}' ${A} completed.`)}});const c=JSON.stringify(s);le(Kr,`RPC '${e}' ${A} sending request:`,s),a.send(r,"POST",c,n,15)})}Bo(e,r,n){const s=dp(),A=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=SE(),l=FE(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,r,n),a.encodeInitMessageHeaders=!0;const d=A.join("");le(Kr,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=i.createWebChannel(d,a);let f=!1,p=!1;const v=new WD({Io:_=>{p?le(Kr,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(f||(le(Kr,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),le(Kr,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},To:()=>h.close()}),x=(_,b,w)=>{_.listen(b,I=>{try{w(I)}catch(F){setTimeout(()=>{throw F},0)}})};return x(h,Nl.EventType.OPEN,()=>{p||(le(Kr,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),x(h,Nl.EventType.CLOSE,()=>{p||(p=!0,le(Kr,`RPC '${e}' stream ${s} transport closed`),v.So())}),x(h,Nl.EventType.ERROR,_=>{p||(p=!0,In(Kr,`RPC '${e}' stream ${s} transport errored:`,_),v.So(new oe(z.UNAVAILABLE,"The operation could not be completed")))}),x(h,Nl.EventType.MESSAGE,_=>{var b;if(!p){const w=_.data[0];$e(!!w);const I=w,F=I.error||((b=I[0])===null||b===void 0?void 0:b.error);if(F){le(Kr,`RPC '${e}' stream ${s} received error:`,F);const U=F.status;let R=function(C){const S=dr[C];if(S!==void 0)return C1(S)}(U),y=F.message;R===void 0&&(R=z.INTERNAL,y="Unknown error status: "+U+" with message "+F.message),p=!0,v.So(new oe(R,y)),h.close()}else le(Kr,`RPC '${e}' stream ${s} received:`,w),v.bo(w)}}),x(l,kE.STAT_EVENT,_=>{_.stat===Mm.PROXY?le(Kr,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===Mm.NOPROXY&&le(Kr,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(){return typeof window<"u"?window:null}function Jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){return new nD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,r,n=1e3,s=1.5,A=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=A,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,r,n,s,A,i,l,a){this.ui=e,this.Ho=n,this.Jo=s,this.connection=A,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sx(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===z.RESOURCE_EXHAUSTED?(cr(r.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new oe(z.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XD extends aT{constructor(e,r,n,s,A,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=iD(this.serializer,e),n=function(A){if(!("targetChange"in A))return Ye.min();const i=A.targetChange;return i.targetIds&&i.targetIds.length?Ye.min():i.readTime?ur(i.readTime):Ye.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=Jm(this.serializer),r.addTarget=function(A,i){let l;const a=i.target;if(l=jh(a)?{documents:N1(A,a)}:{query:Vf(A,a)._t},l.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){l.resumeToken=T1(A,i.resumeToken);const c=qm(A,i.expectedCount);c!==null&&(l.expectedCount=c)}else if(i.snapshotVersion.compareTo(Ye.min())>0){l.readTime=Ba(A,i.snapshotVersion.toTimestamp());const c=qm(A,i.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const n=aD(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=Jm(this.serializer),r.removeTarget=e,this.a_(r)}}class JD extends aT{constructor(e,r,n,s,A,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=A}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=oD(e.writeResults,e.commitTime),n=ur(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=Jm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>Hc(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,i])=>this.connection.Mo(e,Xm(r,n),s,A,i)).catch(A=>{throw A.name==="FirebaseError"?(A.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new oe(z.UNKNOWN,A.toString())})}Lo(e,r,n,s,A){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Lo(e,Xm(r,n),s,i,l,A)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(z.UNKNOWN,i.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ZD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cr(r),this.D_=!1):le("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,r,n,s,A){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=A,this.k_._o(i=>{n.enqueueAndForget(async()=>{ci(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=Fe(a);c.L_.add(4),await Ha(c),c.q_.set("Unknown"),c.L_.delete(4),await hu(c)}(this))})}),this.q_=new ZD(n,s)}}async function hu(t){if(ci(t))for(const e of t.B_)await e(!0)}async function Ha(t){for(const e of t.B_)await e(!1)}function $f(t,e){const r=Fe(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),ox(r)?ix(r):Ka(r).r_()&&Ax(r,e))}function Ia(t,e){const r=Fe(t),n=Ka(r);r.N_.delete(e),n.r_()&&lT(r,e),r.N_.size===0&&(n.r_()?n.o_():ci(r)&&r.q_.set("Unknown"))}function Ax(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ka(t).A_(e)}function lT(t,e){t.Q_.xe(e),Ka(t).R_(e)}function ix(t){t.Q_=new Z4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ka(t).start(),t.q_.v_()}function ox(t){return ci(t)&&!Ka(t).n_()&&t.N_.size>0}function ci(t){return Fe(t).L_.size===0}function cT(t){t.Q_=void 0}async function tP(t){t.q_.set("Online")}async function rP(t){t.N_.forEach((e,r)=>{Ax(t,e)})}async function nP(t,e){cT(t),ox(t)?(t.q_.M_(e),ix(t)):t.q_.set("Unknown")}async function sP(t,e,r){if(t.q_.set("Online"),e instanceof E1&&e.state===2&&e.cause)try{await async function(s,A){const i=A.cause;for(const l of A.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,i),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(n){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await qh(t,n)}else if(e instanceof Xd?t.Q_.Ke(e):e instanceof _1?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Ye.min()))try{const n=await tT(t.localStore);r.compareTo(n)>=0&&await function(A,i){const l=A.Q_.rt(i);return l.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const d=A.N_.get(c);d&&A.N_.set(c,d.withResumeToken(a.resumeToken,i))}}),l.targetMismatches.forEach((a,c)=>{const d=A.N_.get(a);if(!d)return;A.N_.set(a,d.withResumeToken(nr.EMPTY_BYTE_STRING,d.snapshotVersion)),lT(A,a);const h=new Ts(d.target,a,c,d.sequenceNumber);Ax(A,h)}),A.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){le("RemoteStore","Failed to raise snapshot:",n),await qh(t,n)}}async function qh(t,e,r){if(!ai(e))throw e;t.L_.add(1),await Ha(t),t.q_.set("Offline"),r||(r=()=>tT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await hu(t)})}function uT(t,e){return e().catch(r=>qh(t,r,e))}async function Va(t){const e=Fe(t),r=YA(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;AP(e);)try{const s=await VD(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,iP(e,s)}catch(s){await qh(e,s)}dT(e)&&hT(e)}function AP(t){return ci(t)&&t.O_.length<10}function iP(t,e){t.O_.push(e);const r=YA(t);r.r_()&&r.V_&&r.m_(e.mutations)}function dT(t){return ci(t)&&!YA(t).n_()&&t.O_.length>0}function hT(t){YA(t).start()}async function oP(t){YA(t).p_()}async function aP(t){const e=YA(t);for(const r of t.O_)e.m_(r.mutations)}async function lP(t,e,r){const n=t.O_.shift(),s=Gw.from(n,e,r);await uT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Va(t)}async function cP(t,e){e&&YA(t).V_&&await async function(n,s){if(function(i){return b1(i)&&i!==z.ABORTED}(s.code)){const A=n.O_.shift();YA(n).s_(),await uT(n,()=>n.remoteSyncer.rejectFailedWrite(A.batchId,s)),await Va(n)}}(t,e),dT(t)&&hT(t)}async function rb(t,e){const r=Fe(t);r.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const n=ci(r);r.L_.add(3),await Ha(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await hu(r)}async function n0(t,e){const r=Fe(t);e?(r.L_.delete(2),await hu(r)):e||(r.L_.add(2),await Ha(r),r.q_.set("Unknown"))}function Ka(t){return t.K_||(t.K_=function(r,n,s){const A=Fe(r);return A.w_(),new XD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:tP.bind(null,t),Ro:rP.bind(null,t),mo:nP.bind(null,t),d_:sP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ox(t)?ix(t):t.q_.set("Unknown")):(await t.K_.stop(),cT(t))})),t.K_}function YA(t){return t.U_||(t.U_=function(r,n,s){const A=Fe(r);return A.w_(),new JD(n,A.connection,A.authCredentials,A.appCheckCredentials,A.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oP.bind(null,t),mo:cP.bind(null,t),f_:aP.bind(null,t),g_:lP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Va(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,r,n,s,A){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=A,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,A){const i=Date.now()+n,l=new ax(e,r,i,s,A);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ga(t,e){if(cr("AsyncQueue",`${e}: ${t}`),ai(t))return new oe(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e){this.comparator=e?(r,n)=>e(r,n)||Qe.comparator(r.key,n.key):(r,n)=>Qe.comparator(r.key,n.key),this.keyedMap=Rl(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new ta(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ta)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,A=n.getNext().key;if(!s.isEqual(A))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ta;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.W_=new Lt(Qe.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class _a{constructor(e,r,n,s,A,i,l,a,c){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=A,this.fromCache=i,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,r,n,s,A){const i=[];return r.forEach(l=>{i.push({type:0,doc:l})}),new _a(e,r,ta.emptySet(r),i,n,s,!0,!1,A)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class dP{constructor(){this.queries=sb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Fe(r),A=s.queries;s.queries=sb(),A.forEach((i,l)=>{for(const a of l.j_)a.onError(n)})})(this,new oe(z.ABORTED,"Firestore shutting down"))}}function sb(){return new Ws(t=>a1(t),ou)}async function lx(t,e){const r=Fe(t);let n=3;const s=e.query;let A=r.queries.get(s);A?!A.H_()&&e.J_()&&(n=2):(A=new uP,n=e.J_()?0:1);try{switch(n){case 0:A.z_=await r.onListen(s,!0);break;case 1:A.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const l=Ga(i,`Initialization of query '${To(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,A),A.j_.push(e),e.Z_(r.onlineState),A.z_&&e.X_(A.z_)&&ux(r)}async function cx(t,e){const r=Fe(t),n=e.query;let s=3;const A=r.queries.get(n);if(A){const i=A.j_.indexOf(e);i>=0&&(A.j_.splice(i,1),A.j_.length===0?s=e.J_()?0:1:!A.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function hP(t,e){const r=Fe(t);let n=!1;for(const s of e){const A=s.query,i=r.queries.get(A);if(i){for(const l of i.j_)l.X_(s)&&(n=!0);i.z_=s}}n&&ux(r)}function fP(t,e,r){const n=Fe(t),s=n.queries.get(e);if(s)for(const A of s.j_)A.onError(r);n.queries.delete(e)}function ux(t){t.Y_.forEach(e=>{e.next()})}var s0,Ab;(Ab=s0||(s0={})).ea="default",Ab.Cache="cache";class dx{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new _a(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==s0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.serializer=e}Es(e){return us(this.serializer,e)}ds(e){return e.metadata.exists?Q1(this.serializer,e.document,!1):Ht.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ur(e)}}class pP{constructor(e,r,n){this.ca=e,this.localStore=r,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const n=mt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,n=new ib(this.serializer);for(const s of e)if(s.metadata.queries){const A=n.Es(s.metadata.name);for(const i of s.metadata.queries){const l=(r.get(i)||ot()).add(A);r.set(i,l)}}return r}async complete(){const e=await KD(this.localStore,new ib(this.serializer),this.documents,this.ca.id),r=this.ha(this.documents);for(const n of this.queries)await GD(this.localStore,n,r.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function fT(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class mT{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ot(),this.mutatedKeys=ot(),this.Aa=c1(e),this.Ra=new ta(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new nb,s=r?r.Ra:this.Ra;let A=r?r.mutatedKeys:this.mutatedKeys,i=s,l=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),p=au(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;f&&p?f.data.isEqual(p.data)?v!==x&&(n.track({type:3,doc:p}),_=!0):this.ga(f,p)||(n.track({type:2,doc:p}),_=!0,(a&&this.Aa(p,a)>0||c&&this.Aa(p,c)<0)&&(l=!0)):!f&&p?(n.track({type:0,doc:p}),_=!0):f&&!p&&(n.track({type:1,doc:f}),_=!0,(a||c)&&(l=!0)),_&&(p?(i=i.add(p),A=x?A.add(d):A.delete(d)):(i=i.delete(d),A=A.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),A=A.delete(d.key),n.track({type:1,doc:d})}return{Ra:i,fa:n,ns:l,mutatedKeys:A}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const A=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((d,h)=>function(p,v){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return x(p)-x(v)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(n),s=s!=null&&s;const l=r&&!s?this.ya():[],a=this.da.size===0&&this.current&&!s?1:0,c=a!==this.Ea;return this.Ea=a,i.length!==0||c?{snapshot:new _a(this.query,e.Ra,A,i,e.mutatedKeys,a===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ot(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new pT(n))}),this.da.forEach(n=>{e.has(n)||r.push(new gT(n))}),r}ba(e){this.Ta=e.Ts,this.da=ot();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return _a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class mP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class wP{constructor(e){this.key=e,this.va=!1}}class xP{constructor(e,r,n,s,A,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=A,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new Ws(l=>a1(l),ou),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(Qe.comparator),this.Na=new Map,this.La=new Yw,this.Ba={},this.ka=new Map,this.qa=eo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yP(t,e,r=!0){const n=Wf(t);let s;const A=n.Fa.get(e);return A?(n.sharedClientState.addLocalQueryTarget(A.targetId),s=A.view.Da()):s=await wT(n,e,r,!0),s}async function vP(t,e){const r=Wf(t);await wT(r,e,!0,!1)}async function wT(t,e,r,n){const s=await ba(t.localStore,Jr(e)),A=s.targetId,i=t.sharedClientState.addLocalQueryTarget(A,r);let l;return n&&(l=await hx(t,e,A,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&$f(t.remoteStore,s),l}async function hx(t,e,r,n,s){t.Ka=(h,f,p)=>async function(x,_,b,w){let I=_.view.ma(b);I.ns&&(I=await zh(x.localStore,_.query,!1).then(({documents:y})=>_.view.ma(y,I)));const F=w&&w.targetChanges.get(_.targetId),U=w&&w.targetMismatches.get(_.targetId)!=null,R=_.view.applyChanges(I,x.isPrimaryClient,F,U);return A0(x,_.targetId,R.wa),R.snapshot}(t,h,f,p);const A=await zh(t.localStore,e,!0),i=new mT(e,A.Ts),l=i.ma(A.documents),a=uu.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),c=i.applyChanges(l,t.isPrimaryClient,a);A0(t,r,c.wa);const d=new mP(e,r,i);return t.Fa.set(e,d),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),c.snapshot}async function BP(t,e,r){const n=Fe(t),s=n.Fa.get(e),A=n.Ma.get(s.targetId);if(A.length>1)return n.Ma.set(s.targetId,A.filter(i=>!ou(i,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Ca(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&Ia(n.remoteStore,s.targetId),Ea(n,s.targetId)}).catch(oi)):(Ea(n,s.targetId),await Ca(n.localStore,s.targetId,!0))}async function bP(t,e){const r=Fe(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ia(r.remoteStore,n.targetId))}async function CP(t,e,r){const n=mx(t);try{const s=await function(i,l){const a=Fe(i),c=qt.now(),d=l.reduce((p,v)=>p.add(v.key),ot());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=hn(),x=ot();return a.cs.getEntries(p,d).next(_=>{v=_,v.forEach((b,w)=>{w.isValidDocument()||(x=x.add(b))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,v)).next(_=>{h=_;const b=[];for(const w of l){const I=X4(w,h.get(w.key).overlayedDocument);I!=null&&b.push(new qs(w.key,I,JE(I.value.mapValue),Wt.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,b,l)}).next(_=>{f=_;const b=_.applyToLocalDocumentSet(h,x);return a.documentOverlayCache.saveOverlays(p,_.batchId,b)})}).then(()=>({batchId:f.batchId,changes:d1(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,l,a){let c=i.Ba[i.currentUser.toKey()];c||(c=new Lt(nt)),c=c.insert(l,a),i.Ba[i.currentUser.toKey()]=c}(n,s.batchId,r),await Xs(n,s.changes),await Va(n.remoteStore)}catch(s){const A=Ga(s,"Failed to persist write");r.reject(A)}}async function xT(t,e){const r=Fe(t);try{const n=await HD(r.localStore,e);e.targetChanges.forEach((s,A)=>{const i=r.Na.get(A);i&&($e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?i.va=!0:s.modifiedDocuments.size>0?$e(i.va):s.removedDocuments.size>0&&($e(i.va),i.va=!1))}),await Xs(r,n,e)}catch(n){await oi(n)}}function ob(t,e,r){const n=Fe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((A,i)=>{const l=i.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(i,l){const a=Fe(i);a.onlineState=l;let c=!1;a.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(l)&&(c=!0)}),c&&ux(a)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function IP(t,e,r){const n=Fe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),A=s&&s.key;if(A){let i=new Lt(Qe.comparator);i=i.insert(A,Ht.newNoDocument(A,Ye.min()));const l=ot().add(A),a=new cu(Ye.min(),new Map,new Lt(nt),i,l);await xT(n,a),n.Oa=n.Oa.remove(A),n.Na.delete(e),px(n)}else await Ca(n.localStore,e,!1).then(()=>Ea(n,e,r)).catch(oi)}async function _P(t,e){const r=Fe(t),n=e.batch.batchId;try{const s=await OD(r.localStore,e);gx(r,n,null),fx(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Xs(r,s)}catch(s){await oi(s)}}async function EP(t,e,r){const n=Fe(t);try{const s=await function(i,l){const a=Fe(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return a.mutationQueue.lookupMutationBatch(c,l).next(h=>($e(h!==null),d=h.keys(),a.mutationQueue.removeMutationBatch(c,h))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>a.localDocuments.getDocuments(c,d))})}(n.localStore,e);gx(n,e,r),fx(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Xs(n,s)}catch(s){await oi(s)}}async function TP(t,e){const r=Fe(t);ci(r.remoteStore)||le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(i){const l=Fe(i);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>l.mutationQueue.getHighestUnacknowledgedBatchId(a))}(r.localStore);if(n===-1)return void e.resolve();const s=r.ka.get(n)||[];s.push(e),r.ka.set(n,s)}catch(n){const s=Ga(n,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function fx(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function gx(t,e,r){const n=Fe(t);let s=n.Ba[n.currentUser.toKey()];if(s){const A=s.get(e);A&&(r?A.reject(r):A.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Ea(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||yT(t,n)})}function yT(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Ia(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),px(t))}function A0(t,e,r){for(const n of r)n instanceof gT?(t.La.addReference(n.key,e),kP(t,n)):n instanceof pT?(le("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||yT(t,n.key)):Oe()}function kP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(le("SyncEngine","New document in limbo: "+r),t.xa.add(n),px(t))}function px(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new Qe(mt.fromString(e)),n=t.qa.next();t.Na.set(n,new wP(r)),t.Oa=t.Oa.insert(r,n),$f(t.remoteStore,new Ts(Jr(La(r.path)),n,"TargetPurposeLimboResolution",un.oe))}}async function Xs(t,e,r){const n=Fe(t),s=[],A=[],i=[];n.Fa.isEmpty()||(n.Fa.forEach((l,a)=>{i.push(n.Ka(a,e,r).then(c=>{var d;if((c||r)&&n.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(a.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(c){s.push(c);const h=rx.Wi(a.targetId,c);A.push(h)}}))}),await Promise.all(i),n.Ca.d_(s),await async function(a,c){const d=Fe(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,f=>L.forEach(f.$i,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>L.forEach(f.Ui,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!ai(h))throw h;le("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.os.get(f),v=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(v);d.os=d.os.insert(f,x)}}}(n.localStore,A))}async function FP(t,e){const r=Fe(t);if(!r.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const n=await eT(r.localStore,e);r.currentUser=e,function(A,i){A.ka.forEach(l=>{l.forEach(a=>{a.reject(new oe(z.CANCELLED,i))})}),A.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Xs(r,n.hs)}}function SP(t,e){const r=Fe(t),n=r.Na.get(e);if(n&&n.va)return ot().add(n.key);{let s=ot();const A=r.Ma.get(e);if(!A)return s;for(const i of A){const l=r.Fa.get(i);s=s.unionWith(l.view.Va)}return s}}async function UP(t,e){const r=Fe(t),n=await zh(r.localStore,e.query,!0),s=e.view.ba(n);return r.isPrimaryClient&&A0(r,e.targetId,s.wa),s}async function QP(t,e){const r=Fe(t);return sT(r.localStore,e).then(n=>Xs(r,n))}async function NP(t,e,r,n){const s=Fe(t),A=await function(l,a){const c=Fe(l),d=Fe(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,a).next(f=>f?c.localDocuments.getDocuments(h,f):L.resolve(null)))}(s.localStore,e);A!==null?(r==="pending"?await Va(s.remoteStore):r==="acknowledged"||r==="rejected"?(gx(s,e,n||null),fx(s,e),function(l,a){Fe(Fe(l).mutationQueue).On(a)}(s.localStore,e)):Oe(),await Xs(s,A)):le("SyncEngine","Cannot apply mutation batch with id: "+e)}async function RP(t,e){const r=Fe(t);if(Wf(r),mx(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),s=await ab(r,n.toArray());r.Qa=!0,await n0(r.remoteStore,!0);for(const A of s)$f(r.remoteStore,A)}else if(e===!1&&r.Qa!==!1){const n=[];let s=Promise.resolve();r.Ma.forEach((A,i)=>{r.sharedClientState.isLocalQueryTarget(i)?n.push(i):s=s.then(()=>(Ea(r,i),Ca(r.localStore,i,!0))),Ia(r.remoteStore,i)}),await s,await ab(r,n),function(i){const l=Fe(i);l.Na.forEach((a,c)=>{Ia(l.remoteStore,c)}),l.La.pr(),l.Na=new Map,l.Oa=new Lt(Qe.comparator)}(r),r.Qa=!1,await n0(r.remoteStore,!1)}}async function ab(t,e,r){const n=Fe(t),s=[],A=[];for(const i of e){let l;const a=n.Ma.get(i);if(a&&a.length!==0){l=await ba(n.localStore,Jr(a[0]));for(const c of a){const d=n.Fa.get(c),h=await UP(n,d);h.snapshot&&A.push(h.snapshot)}}else{const c=await nT(n.localStore,i);l=await ba(n.localStore,c),await hx(n,vT(c),i,!1,l.resumeToken)}s.push(l)}return n.Ca.d_(A),s}function vT(t){return A1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function DP(t){return function(r){return Fe(Fe(r).persistence).Qi()}(Fe(t).localStore)}async function PP(t,e,r,n){const s=Fe(t);if(s.Qa)return void le("SyncEngine","Ignoring unexpected query state notification.");const A=s.Ma.get(e);if(A&&A.length>0)switch(r){case"current":case"not-current":{const i=await sT(s.localStore,l1(A[0])),l=cu.createSynthesizedRemoteEventForCurrentChange(e,r==="current",nr.EMPTY_BYTE_STRING);await Xs(s,i,l);break}case"rejected":await Ca(s.localStore,e,!0),Ea(s,e,n);break;default:Oe()}}async function jP(t,e,r){const n=Wf(t);if(n.Qa){for(const s of e){if(n.Ma.has(s)&&n.sharedClientState.isActiveQueryTarget(s)){le("SyncEngine","Adding an already active target "+s);continue}const A=await nT(n.localStore,s),i=await ba(n.localStore,A);await hx(n,vT(A),i.targetId,!1,i.resumeToken),$f(n.remoteStore,i)}for(const s of r)n.Ma.has(s)&&await Ca(n.localStore,s,!1).then(()=>{Ia(n.remoteStore,s),Ea(n,s)}).catch(oi)}}function Wf(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IP.bind(null,e),e.Ca.d_=hP.bind(null,e.eventManager),e.Ca.$a=fP.bind(null,e.eventManager),e}function mx(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_P.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EP.bind(null,e),e}function LP(t,e,r){const n=Fe(t);(async function(A,i,l){try{const a=await i.getMetadata();if(await function(p,v){const x=Fe(p),_=ur(v.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",b=>x.Gr.getBundleMetadata(b,v.id)).then(b=>!!b&&b.createTime.compareTo(_)>=0)}(A.localStore,a))return await i.close(),l._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(a)),Promise.resolve(new Set);l._updateProgress(fT(a));const c=new pP(a,A.localStore,i.serializer);let d=await i.Ua();for(;d;){const f=await c.la(d);f&&l._updateProgress(f),d=await i.Ua()}const h=await c.complete();return await Xs(A,h.Ia,void 0),await function(p,v){const x=Fe(p);return x.persistence.runTransaction("Save bundle","readwrite",_=>x.Gr.saveBundleMetadata(_,v))}(A.localStore,a),l._completeWith(h.progress),Promise.resolve(h.Pa)}catch(a){return In("SyncEngine",`Loading bundle failed with ${a}`),l._failWith(a),Promise.resolve(new Set)}})(n,e,r).then(s=>{n.sharedClientState.notifyBundleLoaded(s)})}class ZA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=du(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return Z1(this.persistence,new Y1,e.initialUser,this.serializer)}Ga(e){return new Zw(zf.Zr,this.serializer)}Wa(e){return new iT}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ZA.provider={build:()=>new ZA};class MP extends ZA{constructor(e){super(),this.cacheSizeBytes=e}ja(e,r){$e(this.persistence.referenceDelegate instanceof Gh);const n=this.persistence.referenceDelegate.garbageCollector;return new $1(n,e.asyncQueue,r)}Ga(e){const r=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new Zw(n=>Gh.Zr(n,r),this.serializer)}}class wx extends ZA{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await mx(this.Ja.syncEngine),await Va(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return Z1(this.persistence,new Y1,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new $1(n,e.asyncQueue,r)}Ha(e,r){const n=new o4(r,this.persistence);return new i4(e.asyncQueue,n)}Ga(e){const r=tx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new ex(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,oT(),Jd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new iT}}class BT extends wx{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof up&&(this.sharedClientState.syncEngine={no:NP.bind(null,r),ro:PP.bind(null,r),io:jP.bind(null,r),Qi:DP.bind(null,r),eo:QP.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await RP(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const r=oT();if(!up.D(r))throw new oe(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=tx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class ei{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ob(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=FP.bind(null,this.syncEngine),await n0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dP}()}createDatastore(e){const r=du(e.databaseInfo.databaseId),n=function(A){return new qD(A)}(e.databaseInfo);return function(A,i,l,a){return new YD(A,i,l,a)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,A,i,l){return new eP(n,s,A,i,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ob(this.syncEngine,r,0),function(){return tb.D()?new tb:new zD}())}createSyncEngine(e,r){return function(s,A,i,l,a,c,d){const h=new xP(s,A,i,l,a,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const A=Fe(s);le("RemoteStore","RemoteStore shutting down."),A.L_.add(5),await Ha(A),A.k_.shutdown(),A.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}ei.provider={build:()=>new ei};function lb(t,e=10240){let r=0;return{async read(){if(r<t.byteLength){const n={value:t.slice(r,r+e),done:!1};return r+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Tr,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const r=this.eu.decode(e),n=Number(r);isNaN(n)&&this.ru(`length string (${r}) is not valid number`);const s=await this.iu(n);return new gP(JSON.parse(s),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const r=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),r}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const r=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),r}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const r=new Uint8Array(this.buffer.length+e.value.length);r.set(this.buffer),r.set(e.value,this.buffer.length),this.buffer=r}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await async function(s,A){const i=Fe(s),l={documents:A.map(h=>Oc(i.serializer,h))},a=await i.Lo("BatchGetDocuments",i.serializer.databaseId,mt.emptyPath(),l,A.length),c=new Map;a.forEach(h=>{const f=AD(i.serializer,h);c.set(f.key.toString(),f)});const d=[];return A.forEach(h=>{const f=c.get(h.toString());$e(!!f),d.push(f)}),d}(this.datastore,e);return r.forEach(n=>this.recordVersion(n)),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,n)=>{const s=Qe.fromPath(n);this.mutations.push(new Vw(s,this.precondition(s)))}),await async function(n,s){const A=Fe(n),i={writes:s.map(l=>Hc(A.serializer,l))};await A.Mo("Commit",A.serializer.databaseId,mt.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Oe();r=Ye.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new oe(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Ye.min())?Wt.exists(!1):Wt.updateTime(r):Wt.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Ye.min()))throw new oe(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wt.updateTime(r)}return Wt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,r,n,s,A){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=s,this.deferred=A,this._u=n.maxAttempts,this.t_=new sx(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new HP(this.datastore),r=this.cu(e);r&&r.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(s=>{this.lu(s)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const r=this.updateFunction(e);return!Au(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!b1(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,r,n,s,A){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=_r.UNAUTHENTICATED,this.clientId=Rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=A,this.authCredentials.start(n,async i=>{le("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(le("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=Ga(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hp(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await eT(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cb(t,e){t.asyncQueue.verifyOperationInProgress();const r=await xx(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>rb(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>rb(e.remoteStore,s)),t._onlineComponents=e}async function xx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;In("Error using user provided cache. Falling back to memory cache: "+r),await hp(t,new ZA)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await hp(t,new ZA);return t._offlineComponents}async function Xf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await cb(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await cb(t,new ei))),t._onlineComponents}function bT(t){return xx(t).then(e=>e.persistence)}function za(t){return xx(t).then(e=>e.localStore)}function CT(t){return Xf(t).then(e=>e.remoteStore)}function yx(t){return Xf(t).then(e=>e.syncEngine)}function IT(t){return Xf(t).then(e=>e.datastore)}async function Ta(t){const e=await Xf(t),r=e.eventManager;return r.onListen=yP.bind(null,e.syncEngine),r.onUnlisten=BP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=vP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=bP.bind(null,e.syncEngine),r}function GP(t){return t.asyncQueue.enqueue(async()=>{const e=await bT(t),r=await CT(t);return e.setNetworkEnabled(!0),function(s){const A=Fe(s);return A.L_.delete(0),hu(A)}(r)})}function zP(t){return t.asyncQueue.enqueue(async()=>{const e=await bT(t),r=await CT(t);return e.setNetworkEnabled(!1),async function(s){const A=Fe(s);A.L_.add(0),await Ha(A),A.q_.set("Offline")}(r)})}function $P(t,e){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const l=await function(c,d){const h=Fe(c);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(s,A);l.isFoundDocument()?i.resolve(l):l.isNoDocument()?i.resolve(null):i.reject(new oe(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const a=Ga(l,`Failed to get document '${A} from cache`);i.reject(a)}}(await za(t),e,r)),r.promise}function _T(t,e,r={}){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,l,a,c){const d=new qf({next:f=>{d.Za(),i.enqueueAndForget(()=>cx(A,h));const p=f.docs.has(l);!p&&f.fromCache?c.reject(new oe(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&a&&a.source==="server"?c.reject(new oe(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new dx(La(l.path),d,{includeMetadataChanges:!0,_a:!0});return lx(A,h)}(await Ta(t),t.asyncQueue,e,r,n)),n.promise}function WP(t,e){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>async function(s,A,i){try{const l=await zh(s,A,!0),a=new mT(A,l.Ts),c=a.ma(l.documents),d=a.applyChanges(c,!1);i.resolve(d.snapshot)}catch(l){const a=Ga(l,`Failed to execute query '${A} against cache`);i.reject(a)}}(await za(t),e,r)),r.promise}function ET(t,e,r={}){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(A,i,l,a,c){const d=new qf({next:f=>{d.Za(),i.enqueueAndForget(()=>cx(A,h)),f.fromCache&&a.source==="server"?c.reject(new oe(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new dx(l,d,{includeMetadataChanges:!0,_a:!0});return lx(A,h)}(await Ta(t),t.asyncQueue,e,r,n)),n.promise}function qP(t,e,r){const n=new Tr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await IT(t);n.resolve(async function(i,l,a){var c;const d=Fe(i),{request:h,ut:f,parent:p}=R1(d.serializer,i1(l),a);d.connection.Fo||delete h.parent;const v=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,p,h,1)).filter(_=>!!_.result);$e(v.length===1);const x=(c=v[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((_,b)=>(_[f[b]]=x[b],_),{})}(s,e,r))}catch(s){n.reject(s)}}),n.promise}function XP(t,e){const r=new qf(e);return t.asyncQueue.enqueueAndForget(async()=>function(s,A){Fe(s).Y_.add(A),A.next()}(await Ta(t),r)),()=>{r.Za(),t.asyncQueue.enqueueAndForget(async()=>function(s,A){Fe(s).Y_.delete(A)}(await Ta(t),r))}}function JP(t,e,r,n){const s=function(i,l){let a;return a=typeof i=="string"?I1().encode(i):i,function(d,h){return new OP(d,h)}(function(d,h){if(d instanceof Uint8Array)return lb(d,h);if(d instanceof ArrayBuffer)return lb(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),l)}(r,du(e));t.asyncQueue.enqueueAndForget(async()=>{LP(await yx(t),s,n)})}function YP(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){const A=Fe(n);return A.persistence.runTransaction("Get named query","readonly",i=>A.Gr.getNamedQuery(i,s))}(await za(t),e))}function ZP(t,e){return t.asyncQueue.enqueue(async()=>async function(n,s){const A=Fe(n),i=A.indexManager,l=[];return A.persistence.runTransaction("Configure indexes","readwrite",a=>i.getFieldIndexes(a).next(c=>function(h,f,p,v,x){h=[...h],f=[...f],h.sort(p),f.sort(p);const _=h.length,b=f.length;let w=0,I=0;for(;w<b&&I<_;){const F=p(h[I],f[w]);F<0?x(h[I++]):F>0?v(f[w++]):(w++,I++)}for(;w<b;)v(f[w++]);for(;I<_;)x(h[I++])}(c,s,r4,d=>{l.push(i.addFieldIndex(a,d))},d=>{l.push(i.deleteFieldIndex(a,d))})).next(()=>L.waitFor(l)))}(await za(t),e))}function ej(t,e){return t.asyncQueue.enqueue(async()=>function(n,s){Fe(n).ss.zi=s}(await za(t),e))}function tj(t){return t.asyncQueue.enqueue(async()=>function(r){const n=Fe(r),s=n.indexManager;return n.persistence.runTransaction("Delete All Indexes","readwrite",A=>s.deleteAllFieldIndexes(A))}(await za(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e,r){if(!r)throw new oe(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kT(t,e,r,n){if(e===!0&&n===!0)throw new oe(z.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function db(t){if(!Qe.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hb(t){if(Qe.isDocumentKey(t))throw new oe(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe()}function ht(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Jf(t);throw new oe(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function FT(t,e){if(e<=0)throw new oe(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new oe(z.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fu{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new QE;switch(n.type){case"firstParty":return new JR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new oe(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=ub.get(r);n&&(le("ComponentProvider","Removing Datastore"),ub.delete(r),n.terminate())}(this),Promise.resolve()}}function ST(t,e,r,n={}){var s;const A=(t=ht(t,fu))._getSettings(),i=`${e}:${r}`;if(A.host!=="firestore.googleapis.com"&&A.host!==i&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},A),{host:i,ssl:!1})),n.mockUserToken){let l,a;if(typeof n.mockUserToken=="string")l=n.mockUserToken,a=_r.MOCK_USER;else{l=yN(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new oe(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new _r(c)}t._authCredentials=new WR(new UE(l,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class ir{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class qn extends kr{constructor(e,r,n){super(e,r,La(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new Qe(e))}withConverter(e){return new qn(this.firestore,e,this._path)}}function i0(t,e,...r){if(t=Dt(t),vx("collection","path",e),t instanceof fu){const n=mt.fromString(e,...r);return hb(n),new qn(t,null,n)}{if(!(t instanceof ir||t instanceof qn))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return hb(n),new qn(t.firestore,null,n)}}function rj(t,e){if(t=ht(t,fu),vx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oe(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kr(t,null,function(n){return new $s(mt.emptyPath(),n)}(e))}function ss(t,e,...r){if(t=Dt(t),arguments.length===1&&(e=Rw.newId()),vx("doc","path",e),t instanceof fu){const n=mt.fromString(e,...r);return db(n),new ir(t,null,new Qe(n))}{if(!(t instanceof ir||t instanceof qn))throw new oe(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(mt.fromString(e,...r));return db(n),new ir(t.firestore,t instanceof qn?t.converter:null,new Qe(n))}}function nj(t,e){return t=Dt(t),e=Dt(e),(t instanceof ir||t instanceof qn)&&(e instanceof ir||e instanceof qn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Bx(t,e){return t=Dt(t),e=Dt(e),t instanceof kr&&e instanceof kr&&t.firestore===e.firestore&&ou(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sx(this,"async_queue_retry"),this.Vu=()=>{const n=Jd();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Jd();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Jd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ai(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(i){let l=i.message||"";return i.stack&&(l=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),l}(n);throw cr("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=ax.createAndSchedule(this,e,r,n,A=>this.yu(A));return this.Tu.push(s),s}fu(){this.Eu&&Oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function o0(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const A of n)if(A in s&&typeof s[A]=="function")return!0;return!1}(t,["next","error","complete"])}class UT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,n){this._progressObserver={next:e,error:r,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=-1;class Ut extends fu{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new gb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gb(e),this._firestoreClient=void 0,await e}}}function Aj(t,e,r){r||(r="(default)");const n=su(t,"firestore");if(n.isInitialized(r)){const s=n.getImmediate({identifier:r}),A=n.getOptions(r);if(zA(A,e))return s;throw new oe(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new oe(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function QT(t,e){const r=typeof t=="object"?t:Qw(),n=typeof t=="string"?t:e||"(default)",s=su(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const A=wN("firestore");A&&ST(s,...A)}return s}function Xt(t){if(t._terminated)throw new oe(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NT(t),t._firestoreClient}function NT(t){var e,r,n;const s=t._freezeSettings(),A=function(l,a,c,d){return new k4(l,a,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,TT(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new KP(t._authCredentials,t._appCheckCredentials,t._queue,A,t._componentsProvider&&function(l){const a=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(a),_online:a}}(t._componentsProvider))}function ij(t,e){In("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings();return RT(t,ei.provider,{build:n=>new wx(n,r.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function oj(t){In("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();RT(t,ei.provider,{build:r=>new BT(r,e.cacheSizeBytes)})}function RT(t,e,r){if((t=ht(t,Ut))._firestoreClient||t._terminated)throw new oe(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new oe(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:r},NT(t)}function aj(t){if(t._initialized&&!t._terminated)throw new oe(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tr;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!cs.D())return Promise.resolve();const s=n+"main";await cs.delete(s)}(tx(t._databaseId,t._persistenceKey)),e.resolve()}catch(r){e.reject(r)}}),e.promise}function lj(t){return function(r){const n=new Tr;return r.asyncQueue.enqueueAndForget(async()=>TP(await yx(r),n)),n.promise}(Xt(t=ht(t,Ut)))}function cj(t){return GP(Xt(t=ht(t,Ut)))}function uj(t){return zP(Xt(t=ht(t,Ut)))}function dj(t){return SR(t.app,"firestore",t._databaseId.database),t._delete()}function hj(t,e){const r=Xt(t=ht(t,Ut)),n=new UT;return JP(r,t._databaseId,e,n),n}function fj(t,e){return YP(Xt(t=ht(t,Ut)),e).then(r=>r?new kr(t,null,r.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e="count",r){this._internalFieldPath=r,this.type="AggregateField",this.aggregateType=e}}class DT{constructor(e,r,n){this._userDataWriter=r,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ti(nr.fromBase64String(e))}catch(r){throw new oe(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new ti(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new oe(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function gj(){return new ui("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new oe(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new oe(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let A=0;A<n.length;++A)if(n[A]!==s[A])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj=/^__.*__$/;class mj{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ma(e,this.data,r,this.fieldTransforms)}}class PT{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new qs(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function jT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class Zf{constructor(e,r,n,s,A,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,A===void 0&&this.vu(),this.fieldTransforms=A||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jT(this.Cu)&&pj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wj{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||du(e)}Qu(e,r,n,s=!1){return new Zf({Cu:e,methodName:r,qu:n,path:Vt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ao(t){const e=t._freezeSettings(),r=du(t._databaseId);return new wj(t._databaseId,!!e.ignoreUndefinedProperties,r)}function eg(t,e,r,n,s,A={}){const i=t.Qu(A.merge||A.mergeFields?2:0,e,r,s);kx("Data must be an object, but it was:",i,n);const l=OT(n,i);let a,c;if(A.merge)a=new dn(i.fieldMask),c=i.fieldTransforms;else if(A.mergeFields){const d=[];for(const h of A.mergeFields){const f=Vc(e,h,r);if(!i.contains(f))throw new oe(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);VT(d,f)||d.push(f)}a=new dn(d),c=i.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,c=i.fieldTransforms;return new mj(new Rr(l),a,c)}class pu extends di{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pu}}function LT(t,e,r){return new Zf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bx extends di{_toFieldTransform(e){return new lu(e.path,new ya)}isEqual(e){return e instanceof bx}}class Cx extends di{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=LT(this,e,!0),n=this.Ku.map(A=>lo(A,r)),s=new Xi(n);return new lu(e.path,s)}isEqual(e){return e instanceof Cx&&zA(this.Ku,e.Ku)}}class Ix extends di{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=LT(this,e,!0),n=this.Ku.map(A=>lo(A,r)),s=new Ji(n);return new lu(e.path,s)}isEqual(e){return e instanceof Ix&&zA(this.Ku,e.Ku)}}class _x extends di{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new va(e.serializer,g1(e.serializer,this.$u));return new lu(e.path,r)}isEqual(e){return e instanceof _x&&this.$u===e.$u}}function Ex(t,e,r,n){const s=t.Qu(1,e,r);kx("Data must be an object, but it was:",s,n);const A=[],i=Rr.empty();li(n,(a,c)=>{const d=tg(e,a,r);c=Dt(c);const h=s.Nu(d);if(c instanceof pu)A.push(d);else{const f=lo(c,h);f!=null&&(A.push(d),i.set(d,f))}});const l=new dn(A);return new PT(i,l,s.fieldTransforms)}function Tx(t,e,r,n,s,A){const i=t.Qu(1,e,r),l=[Vc(e,n,r)],a=[s];if(A.length%2!=0)throw new oe(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<A.length;f+=2)l.push(Vc(e,A[f])),a.push(A[f+1]);const c=[],d=Rr.empty();for(let f=l.length-1;f>=0;--f)if(!VT(c,l[f])){const p=l[f];let v=a[f];v=Dt(v);const x=i.Nu(p);if(v instanceof pu)c.push(p);else{const _=lo(v,x);_!=null&&(c.push(p),d.set(p,_))}}const h=new dn(c);return new PT(d,h,i.fieldTransforms)}function MT(t,e,r,n=!1){return lo(r,t.Qu(n?4:3,e))}function lo(t,e){if(HT(t=Dt(t)))return kx("Unsupported field value:",e,t),OT(t,e);if(t instanceof di)return function(n,s){if(!jT(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const A=n._toFieldTransform(s);A&&s.fieldTransforms.push(A)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const A=[];let i=0;for(const l of n){let a=lo(l,s.Lu(i));a==null&&(a={nullValue:"NULL_VALUE"}),A.push(a),i++}return{arrayValue:{values:A}}}(t,e)}return function(n,s){if((n=Dt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return g1(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const A=qt.fromDate(n);return{timestampValue:Ba(s.serializer,A)}}if(n instanceof qt){const A=new qt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ba(s.serializer,A)}}if(n instanceof Yf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ti)return{bytesValue:T1(s.serializer,n._byteString)};if(n instanceof ir){const A=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(A))throw s.Bu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${A.projectId}/${A.database}`);return{referenceValue:Ww(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof gu)return function(i,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(a=>{if(typeof a!="number")throw l.Bu("VectorValues must only contain numeric values.");return Hw(l.serializer,a)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${Jf(n)}`)}(t,e)}function OT(t,e){const r={};return $E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):li(t,(n,s)=>{const A=lo(s,e.Mu(n));A!=null&&(r[n]=A)}),{mapValue:{fields:r}}}function HT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof Yf||t instanceof ti||t instanceof ir||t instanceof di||t instanceof gu)}function kx(t,e,r){if(!HT(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=Jf(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Vc(t,e,r){if((e=Dt(e))instanceof ui)return e._internalPath;if(typeof e=="string")return tg(t,e);throw Xh("Field path arguments must be of type string or ",t,!1,void 0,r)}const xj=new RegExp("[~\\*/\\[\\]]");function tg(t,e,r){if(e.search(xj)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new ui(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Xh(t,e,r,n,s){const A=n&&!n.isEmpty(),i=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(A||i)&&(a+=" (found",A&&(a+=` in field ${n}`),i&&(a+=` in document ${s}`),a+=")"),new oe(z.INVALID_ARGUMENT,l+t+a)}function VT(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,r,n,s,A){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=A}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(rg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class yj extends Kc{data(){return super.data()}}function rg(t,e){return typeof e=="string"?tg(t,e):e instanceof ui?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fx{}class $a extends Fx{}function a0(t,e,...r){let n=[];e instanceof Fx&&n.push(e),n=n.concat(r),function(A){const i=A.filter(a=>a instanceof co).length,l=A.filter(a=>a instanceof Wa).length;if(i>1||i>0&&l>0)throw new oe(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Wa extends $a{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Wa(e,r,n)}_apply(e){const r=this._parse(e);return zT(e._query,r),new kr(e.firestore,e.converter,Wm(e._query,r))}_parse(e){const r=ao(e.firestore);return function(A,i,l,a,c,d,h){let f;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){mb(h,d);const p=[];for(const v of h)p.push(pb(a,A,v));f={arrayValue:{values:p}}}else f=pb(a,A,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||mb(h,d),f=MT(l,i,h,d==="in"||d==="not-in");return wt.create(c,d,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function vj(t,e,r){const n=e,s=rg("where",t);return Wa._create(s,n,r)}class co extends Fx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new co(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Tt.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,A){let i=s;const l=A.getFlattenedFilters();for(const a of l)zT(i,a),i=Wm(i,a)}(e._query,r),new kr(e.firestore,e.converter,Wm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Bj(...t){return t.forEach(e=>$T("or",e)),co._create("or",t)}function bj(...t){return t.forEach(e=>$T("and",e)),co._create("and",t)}class ng extends $a{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new ng(e,r)}_apply(e){const r=function(s,A,i){if(s.startAt!==null)throw new oe(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new oe(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mc(A,i)}(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,function(s,A){const i=s.explicitOrderBy.concat([A]);return new $s(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Cj(t,e="asc"){const r=e,n=rg("orderBy",t);return ng._create(n,r)}class mu extends $a{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new mu(e,r,n)}_apply(e){return new kr(e.firestore,e.converter,Mh(e._query,this._limit,this._limitType))}}function Ij(t){return FT("limit",t),mu._create("limit",t,"F")}function _j(t){return FT("limitToLast",t),mu._create("limitToLast",t,"L")}class wu extends $a{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new wu(e,r,n)}_apply(e){const r=GT(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,function(s,A){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,A,s.endAt)}(e._query,r))}}function Ej(...t){return wu._create("startAt",t,!0)}function Tj(...t){return wu._create("startAfter",t,!1)}class xu extends $a{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new xu(e,r,n)}_apply(e){const r=GT(e,this.type,this._docOrFields,this._inclusive);return new kr(e.firestore,e.converter,function(s,A){return new $s(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,A)}(e._query,r))}}function kj(...t){return xu._create("endBefore",t,!1)}function Fj(...t){return xu._create("endAt",t,!0)}function GT(t,e,r,n){if(r[0]=Dt(r[0]),r[0]instanceof Kc)return function(A,i,l,a,c){if(!a)throw new oe(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const h of ea(A))if(h.field.isKeyField())d.push(Wi(i,a.key));else{const f=a.data.field(h.field);if(jf(f))throw new oe(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=h.field.canonicalString();throw new oe(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(f)}return new JA(d,c)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=ao(t.firestore);return function(i,l,a,c,d,h){const f=i.explicitOrderBy;if(d.length>f.length)throw new oe(z.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let v=0;v<d.length;v++){const x=d[v];if(f[v].field.isKeyField()){if(typeof x!="string")throw new oe(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!Mw(i)&&x.indexOf("/")!==-1)throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const _=i.path.child(mt.fromString(x));if(!Qe.isDocumentKey(_))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const b=new Qe(_);p.push(Wi(l,b))}else{const _=MT(a,c,x);p.push(_)}}return new JA(p,h)}(t._query,t.firestore._databaseId,s,e,r,n)}}function pb(t,e,r){if(typeof(r=Dt(r))=="string"){if(r==="")throw new oe(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(e)&&r.indexOf("/")!==-1)throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(mt.fromString(r));if(!Qe.isDocumentKey(n))throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Wi(t,new Qe(n))}if(r instanceof ir)return Wi(t,r._key);throw new oe(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jf(r)}.`)}function mb(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zT(t,e){const r=function(s,A){for(const i of s)for(const l of i.getFlattenedFilters())if(A.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function $T(t,e){if(!(e instanceof Wa||e instanceof co))throw new oe(z.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Sx{convertValue(e,r="none"){switch(qA(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return li(e,(s,A)=>{n[s]=this.convertValue(A,r)}),n}convertVectorValue(e){var r,n,s;const A=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(i=>zt(i.doubleValue));return new gu(A)}convertGeoPoint(e){return new Yf(zt(e.latitude),zt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Lf(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const r=Ls(e);return new qt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=mt.fromString(e);$e(L1(n));const s=new WA(n.get(1),n.get(3)),A=new Qe(n.popFirst(5));return s.isEqual(r)||cr(`Document ${A} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Sj extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){return new ka("sum",Vc("sum",t))}function Qj(t){return new ka("avg",Vc("average",t))}function WT(){return new ka("count")}function Nj(t,e){var r,n;return t instanceof ka&&e instanceof ka&&t.aggregateType===e.aggregateType&&((r=t._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())===((n=e._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())}function Rj(t,e){return Bx(t.query,e.query)&&zA(t.data(),e.data())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class to extends Kc{constructor(e,r,n,s,A,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=A}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(rg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class ic extends to{data(e={}){return super.data(e)}}class ro{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new IA(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new ic(this._firestore,this._userDataWriter,n.key,n,new IA(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new oe(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,A){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(l=>{const a=new ic(s._firestore,s._userDataWriter,l.doc.key,l.doc,new IA(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>A||l.type!==3).map(l=>{const a=new ic(s._firestore,s._userDataWriter,l.doc.key,l.doc,new IA(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=i.indexOf(l.doc.key),i=i.delete(l.doc.key)),l.type!==1&&(i=i.add(l.doc),d=i.indexOf(l.doc.key)),{type:Dj(l.type),doc:a,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Dj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}function Pj(t,e){return t instanceof to&&e instanceof to?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ro&&e instanceof ro&&t._firestore===e._firestore&&Bx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){t=ht(t,ir);const e=ht(t.firestore,Ut);return _T(Xt(e),t._key).then(r=>Ux(e,t,r))}class hi extends Sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,r)}}function Lj(t){t=ht(t,ir);const e=ht(t.firestore,Ut),r=Xt(e),n=new hi(e);return $P(r,t._key).then(s=>new to(e,n,t._key,s,new IA(s!==null&&s.hasLocalMutations,!0),t.converter))}function Mj(t){t=ht(t,ir);const e=ht(t.firestore,Ut);return _T(Xt(e),t._key,{source:"server"}).then(r=>Ux(e,t,r))}function qT(t){t=ht(t,kr);const e=ht(t.firestore,Ut),r=Xt(e),n=new hi(e);return KT(t._query),ET(r,t._query).then(s=>new ro(e,n,t,s))}function Oj(t){t=ht(t,kr);const e=ht(t.firestore,Ut),r=Xt(e),n=new hi(e);return WP(r,t._query).then(s=>new ro(e,n,t,s))}function Hj(t){t=ht(t,kr);const e=ht(t.firestore,Ut),r=Xt(e),n=new hi(e);return ET(r,t._query,{source:"server"}).then(s=>new ro(e,n,t,s))}function Yd(t,e,r){t=ht(t,ir);const n=ht(t.firestore,Ut),s=sg(t.converter,e,r);return qa(n,[eg(ao(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Wt.none())])}function Vj(t,e,r,...n){t=ht(t,ir);const s=ht(t.firestore,Ut),A=ao(s);let i;return i=typeof(e=Dt(e))=="string"||e instanceof ui?Tx(A,"updateDoc",t._key,e,r,n):Ex(A,"updateDoc",t._key,e),qa(s,[i.toMutation(t._key,Wt.exists(!0))])}function XT(t){return qa(ht(t.firestore,Ut),[new Oa(t._key,Wt.none())])}function Kj(t,e){const r=ht(t.firestore,Ut),n=ss(t),s=sg(t.converter,e);return qa(r,[eg(ao(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Wt.exists(!1))]).then(()=>n)}function Zd(t,...e){var r,n,s;t=Dt(t);let A={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||o0(e[i])||(A=e[i],i++);const l={includeMetadataChanges:A.includeMetadataChanges,source:A.source};if(o0(e[i])){const h=e[i];e[i]=(r=h.next)===null||r===void 0?void 0:r.bind(h),e[i+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),e[i+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let a,c,d;if(t instanceof ir)c=ht(t.firestore,Ut),d=La(t._key.path),a={next:h=>{e[i]&&e[i](Ux(c,t,h))},error:e[i+1],complete:e[i+2]};else{const h=ht(t,kr);c=ht(h.firestore,Ut),d=h._query;const f=new hi(c);a={next:p=>{e[i]&&e[i](new ro(c,f,h,p))},error:e[i+1],complete:e[i+2]},KT(t._query)}return function(f,p,v,x){const _=new qf(x),b=new dx(p,_,v);return f.asyncQueue.enqueueAndForget(async()=>lx(await Ta(f),b)),()=>{_.Za(),f.asyncQueue.enqueueAndForget(async()=>cx(await Ta(f),b))}}(Xt(c),d,l,a)}function Gj(t,e){return XP(Xt(t=ht(t,Ut)),o0(e)?e:{next:e})}function qa(t,e){return function(n,s){const A=new Tr;return n.asyncQueue.enqueueAndForget(async()=>CP(await yx(n),s,A)),A.promise}(Xt(t),e)}function Ux(t,e,r){const n=r.docs.get(e._key),s=new hi(t);return new to(t,s,e._key,n,new IA(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t){return JT(t,{count:WT()})}function JT(t,e){const r=ht(t.firestore,Ut),n=Xt(r),s=zE(e,(A,i)=>new B1(i,A.aggregateType,A._internalFieldPath));return qP(n,t._query,s).then(A=>function(l,a,c){const d=new hi(l);return new DT(a,d,c)}(r,t,A))}class $j{constructor(e){this.kind="memory",this._onlineComponentProvider=ei.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=ZA.provider}toJSON(){return{kind:this.kind}}}class Wj{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=YT(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class qj{constructor(){this.kind="memoryEager",this._offlineComponentProvider=ZA.provider}toJSON(){return{kind:this.kind}}}class Xj{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new MP(e)}}toJSON(){return{kind:this.kind}}}function Jj(){return new qj}function Yj(t){return new Xj(t==null?void 0:t.cacheSizeBytes)}function Zj(t){return new $j(t)}function eL(t){return new Wj(t)}class tL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ei.provider,this._offlineComponentProvider={build:r=>new wx(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class rL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ei.provider,this._offlineComponentProvider={build:r=>new BT(r,e==null?void 0:e.cacheSizeBytes)}}}function YT(t){return new tL(t==null?void 0:t.forceOwnership)}function nL(){return new rL}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=ao(e)}set(e,r,n){this._verifyNotCommitted();const s=gA(e,this._firestore),A=sg(s.converter,r,n),i=eg(this._dataReader,"WriteBatch.set",s._key,A,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,Wt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const A=gA(e,this._firestore);let i;return i=typeof(r=Dt(r))=="string"||r instanceof ui?Tx(this._dataReader,"WriteBatch.update",A._key,r,n,s):Ex(this._dataReader,"WriteBatch.update",A._key,r),this._mutations.push(i.toMutation(A._key,Wt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=gA(e,this._firestore);return this._mutations=this._mutations.concat(new Oa(r._key,Wt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gA(t,e){if((t=Dt(t)).firestore!==e)throw new oe(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=ao(r)}get(r){const n=gA(r,this._firestore),s=new Sj(this._firestore);return this._transaction.lookup([n._key]).then(A=>{if(!A||A.length!==1)return Oe();const i=A[0];if(i.isFoundDocument())return new Kc(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new Kc(this._firestore,s,n._key,null,n.converter);throw Oe()})}set(r,n,s){const A=gA(r,this._firestore),i=sg(A.converter,n,s),l=eg(this._dataReader,"Transaction.set",A._key,i,A.converter!==null,s);return this._transaction.set(A._key,l),this}update(r,n,s,...A){const i=gA(r,this._firestore);let l;return l=typeof(n=Dt(n))=="string"||n instanceof ui?Tx(this._dataReader,"Transaction.update",i._key,n,s,A):Ex(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,l),this}delete(r){const n=gA(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=gA(e,this._firestore),n=new hi(this._firestore);return super.get(e).then(s=>new to(this._firestore,n,r._key,s._document,new IA(!1,!1),r.converter))}}function AL(t,e,r){t=ht(t,Ut);const n=Object.assign(Object.assign({},sL),r);return function(A){if(A.maxAttempts<1)throw new oe(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(A,i,l){const a=new Tr;return A.asyncQueue.enqueueAndForget(async()=>{const c=await IT(A);new VP(A.asyncQueue,c,l,i,a).au()}),a.promise}(Xt(t),s=>e(new ek(t,s)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(){return new pu("deleteField")}function oL(){return new bx("serverTimestamp")}function aL(...t){return new Cx("arrayUnion",t)}function lL(...t){return new Ix("arrayRemove",t)}function cL(t){return new _x("increment",t)}function uL(t){return new gu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){return Xt(t=ht(t,Ut)),new ZT(t,e=>qa(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t,e){const r=Xt(t=ht(t,Ut));if(!r._uninitializedComponentsProvider||r._uninitializedComponentsProvider._offline.kind==="memory")return In("Cannot enable indexes when persistence is disabled"),Promise.resolve();const n=function(A){const i=typeof A=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new oe(z.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(A):A,l=[];if(Array.isArray(i.indexes))for(const a of i.indexes){const c=wb(a,"collectionGroup"),d=[];if(Array.isArray(a.fields))for(const h of a.fields){const f=tg("setIndexConfiguration",wb(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Li(f,2)):h.order==="ASCENDING"?d.push(new Li(f,0)):h.order==="DESCENDING"&&d.push(new Li(f,1))}l.push(new pa(pa.UNKNOWN_ID,c,d,ma.empty()))}return l}(e);return ZP(r,n)}function wb(t,e){if(typeof t[e]!="string")throw new oe(z.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function hL(t){var e;t=ht(t,Ut);const r=xb.get(t);if(r)return r;if(((e=Xt(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const n=new rk(t);return xb.set(t,n),n}function fL(t){nk(t,!0)}function gL(t){nk(t,!1)}function pL(t){tj(Xt(t._firestore)).then(e=>le("deleting all persistent cache indexes succeeded")).catch(e=>In("deleting all persistent cache indexes failed",e))}function nk(t,e){ej(Xt(t._firestore),e).then(r=>le(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(r=>In(`setting persistent cache index auto creation isEnabled=${e} failed`,r))}const xb=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){var e;const r=(e=Xt(ht(t.firestore,Ut))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return r===void 0?null:Vf(r,Jr(t._query))._t}function wL(t,e){var r;const n=zE(e,(A,i)=>new B1(i,A.aggregateType,A._internalFieldPath)),s=(r=Xt(ht(t.firestore,Ut))._onlineComponents)===null||r===void 0?void 0:r.datastore.serializer;return s===void 0?null:R1(s,i1(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Qx.instance.onExistenceFilterMismatch(e)}}class Qx{constructor(){this.Uu=new Map}static get instance(){return Ad||(Ad=new Qx,function(r){if(Oh)throw new Error("a TestingHooksSpi instance is already set");Oh=r}(Ad)),Ad}et(e){this.Uu.forEach(r=>r(e))}onExistenceFilterMismatch(e){const r=Symbol(),n=this.Uu;return n.set(r,e),()=>n.delete(r)}}let Ad=null;(function(e,r=!0){(function(s){ja=s})(Pa),fa(new $i("firestore",(n,{instanceIdentifier:s,options:A})=>{const i=n.getProvider("app").getImmediate(),l=new Ut(new qR(n.getProvider("auth-internal")),new YR(n.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new oe(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new WA(c.options.projectId,d)}(i,s),i);return A=Object.assign({useFetchStreams:r},A),l._setSettings(A),l},"PUBLIC").setMultipleInstances(!0)),MA(aB,"4.7.3",e),MA(aB,"4.7.3","esm2017")})();const yL=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Sx,AggregateField:ka,AggregateQuerySnapshot:DT,Bytes:ti,CACHE_SIZE_UNLIMITED:sj,CollectionReference:qn,DocumentReference:ir,DocumentSnapshot:to,FieldPath:ui,FieldValue:di,Firestore:Ut,FirestoreError:oe,GeoPoint:Yf,LoadBundleTask:UT,PersistentCacheIndexManager:rk,Query:kr,QueryCompositeFilterConstraint:co,QueryConstraint:$a,QueryDocumentSnapshot:ic,QueryEndAtConstraint:xu,QueryFieldFilterConstraint:Wa,QueryLimitConstraint:mu,QueryOrderByConstraint:ng,QuerySnapshot:ro,QueryStartAtConstraint:wu,SnapshotMetadata:IA,Timestamp:qt,Transaction:ek,VectorValue:gu,WriteBatch:ZT,_AutoId:Rw,_ByteString:nr,_DatabaseId:WA,_DocumentKey:Qe,_EmptyAppCheckTokenProvider:ZR,_EmptyAuthCredentialsProvider:QE,_FieldPath:Vt,_TestingHooks:xL,_cast:ht,_debugAssert:$R,_internalAggregationQueryToProtoRunAggregationQueryRequest:wL,_internalQueryToProtoQueryTarget:mL,_isBase64Available:E4,_logWarn:In,_validateIsNotUsedTogether:kT,addDoc:Kj,aggregateFieldEqual:Nj,aggregateQuerySnapshotEqual:Rj,and:bj,arrayRemove:lL,arrayUnion:aL,average:Qj,clearIndexedDbPersistence:aj,collection:i0,collectionGroup:rj,connectFirestoreEmulator:ST,count:WT,deleteAllPersistentCacheIndexes:pL,deleteDoc:XT,deleteField:iL,disableNetwork:uj,disablePersistentCacheIndexAutoCreation:gL,doc:ss,documentId:gj,enableIndexedDbPersistence:ij,enableMultiTabIndexedDbPersistence:oj,enableNetwork:cj,enablePersistentCacheIndexAutoCreation:fL,endAt:Fj,endBefore:kj,ensureFirestoreConfigured:Xt,executeWrite:qa,getAggregateFromServer:JT,getCountFromServer:zj,getDoc:jj,getDocFromCache:Lj,getDocFromServer:Mj,getDocs:qT,getDocsFromCache:Oj,getDocsFromServer:Hj,getFirestore:QT,getPersistentCacheIndexManager:hL,increment:cL,initializeFirestore:Aj,limit:Ij,limitToLast:_j,loadBundle:hj,memoryEagerGarbageCollector:Jj,memoryLocalCache:Zj,memoryLruGarbageCollector:Yj,namedQuery:fj,onSnapshot:Zd,onSnapshotsInSync:Gj,or:Bj,orderBy:Cj,persistentLocalCache:eL,persistentMultipleTabManager:nL,persistentSingleTabManager:YT,query:a0,queryEqual:Bx,refEqual:nj,runTransaction:AL,serverTimestamp:oL,setDoc:Yd,setIndexConfiguration:dL,setLogLevel:zR,snapshotEqual:Pj,startAfter:Tj,startAt:Ej,sum:Uj,terminate:dj,updateDoc:Vj,vector:uL,waitForPendingWrites:lj,where:vj,writeBatch:tk},Symbol.toStringTag,{value:"Module"}));function Nx(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function sk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vL=sk,Ak=new ru("auth","Firebase",sk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Sw("@firebase/auth");function BL(t,...e){Jh.logLevel<=pt.WARN&&Jh.warn(`Auth (${Pa}): ${t}`,...e)}function eh(t,...e){Jh.logLevel<=pt.ERROR&&Jh.error(`Auth (${Pa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,...e){throw Rx(t,...e)}function ds(t,...e){return Rx(t,...e)}function ik(t,e,r){const n=Object.assign(Object.assign({},vL()),{[e]:r});return new ru("auth","Firebase",n).create(e,{appName:t.name})}function OA(t){return ik(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rx(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Ak.create(t,...e)}function rt(t,e,...r){if(!t)throw Rx(e,...r)}function ks(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eh(e),new Error(e)}function Os(t,e){t||ks(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bL(){return yb()==="http:"||yb()==="https:"}function yb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bL()||CN()||"connection"in navigator)?navigator.onLine:!0}function IL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Os(r>e,"Short delay should be less than long delay!"),this.isMobile=vN()||IN()}get(){return CL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e){Os(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new yu(3e4,6e4);function uo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fi(t,e,r,n,s={}){return ak(t,s,async()=>{let A={},i={};n&&(e==="GET"?i=n:A={body:JSON.stringify(n)});const l=nu(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:a},A);return bN()||(c.referrerPolicy="no-referrer"),ok.fetch()(lk(t,t.config.apiHost,r,l),c)})}async function ak(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},_L),e);try{const s=new kL(t),A=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await A.json();if("needConfirmation"in i)throw id(t,"account-exists-with-different-credential",i);if(A.ok&&!("errorMessage"in i))return i;{const l=A.ok?i.errorMessage:i.error.message,[a,c]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw id(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw id(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw id(t,"user-disabled",i);const d=n[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ik(t,d,c);Jn(t,d)}}catch(s){if(s instanceof zs)throw s;Jn(t,"network-request-failed",{message:String(s)})}}async function Ag(t,e,r,n,s={}){const A=await fi(t,e,r,n,s);return"mfaPendingCredential"in A&&Jn(t,"multi-factor-auth-required",{_serverResponse:A}),A}function lk(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Dx(t.config,s):`${t.config.apiScheme}://${s}`}function TL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ds(this.auth,"network-request-failed")),EL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function id(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=ds(t,e,n);return s.customData._tokenResponse=r,s}function vb(t){return t!==void 0&&t.enterprise!==void 0}class FL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return TL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function SL(t,e){return fi(t,"GET","/v2/recaptchaConfig",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UL(t,e){return fi(t,"POST","/v1/accounts:delete",e)}async function ck(t,e){return fi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QL(t,e=!1){const r=Dt(t),n=await r.getIdToken(e),s=Px(n);rt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const A=typeof s.firebase=="object"?s.firebase:void 0,i=A==null?void 0:A.sign_in_provider;return{claims:s,token:n,authTime:oc(fp(s.auth_time)),issuedAtTime:oc(fp(s.iat)),expirationTime:oc(fp(s.exp)),signInProvider:i||null,signInSecondFactor:(A==null?void 0:A.sign_in_second_factor)||null}}function fp(t){return Number(t)*1e3}function Px(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const s=gE(r);return s?JSON.parse(s):(eh("Failed to decode base64 JWT payload"),null)}catch(s){return eh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Bb(t){const e=Px(t);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof zs&&NL(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function NL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(t){var e;const r=t.auth,n=await t.getIdToken(),s=await Gc(t,ck(r,{idToken:n}));rt(s==null?void 0:s.users.length,r,"internal-error");const A=s.users[0];t._notifyReloadListener(A);const i=!((e=A.providerUserInfo)===null||e===void 0)&&e.length?uk(A.providerUserInfo):[],l=PL(t.providerData,i),a=t.isAnonymous,c=!(t.email&&A.passwordHash)&&!(l!=null&&l.length),d=a?c:!1,h={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:l,metadata:new c0(A.createdAt,A.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function DL(t){const e=Dt(t);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PL(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function uk(t){return t.map(e=>{var{providerId:r}=e,n=Nx(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jL(t,e){const r=await ak(t,{},async()=>{const n=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:A}=t.config,i=lk(t,s,"/v1/token",`key=${A}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ok.fetch()(i,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function LL(t,e){return fi(t,"POST","/v2/accounts:revokeToken",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const r=Bb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:A}=await jL(e,r);this.updateTokensAndExpiration(n,s,Number(A))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:A}=r,i=new ra;return n&&(rt(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(rt(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),A&&(rt(typeof A=="number","internal-error",{appName:e}),i.expirationTime=A),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ra,this.toJSON())}_performRefresh(){return ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){rt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fs{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,A=Nx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new c0(A.createdAt||void 0,A.lastLoginAt||void 0)}async getIdToken(e){const r=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return rt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return QL(this,e)}reload(){return DL(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Yh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Es(this.auth.app))return Promise.reject(OA(this.auth));const e=await this.getIdToken();return await Gc(this,UL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,A,i,l,a,c,d;const h=(n=r.displayName)!==null&&n!==void 0?n:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,p=(A=r.phoneNumber)!==null&&A!==void 0?A:void 0,v=(i=r.photoURL)!==null&&i!==void 0?i:void 0,x=(l=r.tenantId)!==null&&l!==void 0?l:void 0,_=(a=r._redirectEventId)!==null&&a!==void 0?a:void 0,b=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:F,isAnonymous:U,providerData:R,stsTokenManager:y}=r;rt(I&&y,e,"internal-error");const B=ra.fromJSON(this.name,y);rt(typeof I=="string",e,"internal-error"),sA(h,e.name),sA(f,e.name),rt(typeof F=="boolean",e,"internal-error"),rt(typeof U=="boolean",e,"internal-error"),sA(p,e.name),sA(v,e.name),sA(x,e.name),sA(_,e.name),sA(b,e.name),sA(w,e.name);const C=new Fs({uid:I,auth:e,email:f,emailVerified:F,displayName:h,isAnonymous:U,photoURL:v,phoneNumber:p,tenantId:x,stsTokenManager:B,createdAt:b,lastLoginAt:w});return R&&Array.isArray(R)&&(C.providerData=R.map(S=>Object.assign({},S))),_&&(C._redirectEventId=_),C}static async _fromIdTokenResponse(e,r,n=!1){const s=new ra;s.updateFromServerResponse(r);const A=new Fs({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Yh(A),A}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];rt(s.localId!==void 0,"internal-error");const A=s.providerUserInfo!==void 0?uk(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(A!=null&&A.length),l=new ra;l.updateFromIdToken(n);const a=new Fs({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:A,metadata:new c0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(A!=null&&A.length)};return Object.assign(a,c),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;function Ss(t){Os(t instanceof Function,"Expected a class definition");let e=bb.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}dk.type="NONE";const Cb=dk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e,r){return`firebase:${t}:${e}:${r}`}class na{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:A}=this.auth;this.fullUserKey=th(this.userKey,s.apiKey,A),this.fullPersistenceKey=th("persistence",s.apiKey,A),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new na(Ss(Cb),e,n);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let A=s[0]||Ss(Cb);const i=th(n,e.config.apiKey,e.name);let l=null;for(const c of r)try{const d=await c._get(i);if(d){const h=Fs._fromJSON(e,d);c!==A&&(l=h),A=c;break}}catch{}const a=s.filter(c=>c._shouldAllowMigration);return!A._shouldAllowMigration||!a.length?new na(A,e,n):(A=a[0],l&&await A._set(i,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==A)try{await c._remove(i)}catch{}})),new na(A,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wk(e))return"Blackberry";if(xk(e))return"Webos";if(fk(e))return"Safari";if((e.includes("chrome/")||gk(e))&&!e.includes("edge/"))return"Chrome";if(mk(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function hk(t=wr()){return/firefox\//i.test(t)}function fk(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gk(t=wr()){return/crios\//i.test(t)}function pk(t=wr()){return/iemobile/i.test(t)}function mk(t=wr()){return/android/i.test(t)}function wk(t=wr()){return/blackberry/i.test(t)}function xk(t=wr()){return/webos/i.test(t)}function jx(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ML(t=wr()){var e;return jx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OL(){return _N()&&document.documentMode===10}function yk(t=wr()){return jx(t)||mk(t)||xk(t)||wk(t)||/windows phone/i.test(t)||pk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t,e=[]){let r;switch(t){case"Browser":r=Ib(wr());break;case"Worker":r=`${Ib(wr())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Pa}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=A=>new Promise((i,l)=>{try{const a=e(A);i(a)}catch(a){l(a)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e={}){return fi(t,"GET","/v2/passwordPolicy",uo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=6;class GL{constructor(e){var r,n,s,A;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=i.minPasswordLength)!==null&&r!==void 0?r:KL,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(A=e.forceUpgradeOnSignin)!==null&&A!==void 0?A:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,A,i,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(r=a.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(n=a.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(s=a.containsLowercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(A=a.containsUppercaseLetter)!==null&&A!==void 0?A:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,A){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _b(this),this.idTokenSubscription=new _b(this),this.beforeStateQueue=new HL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ak,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ss(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await na.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await ck(this,{idToken:e}),n=await Fs._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Es(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,A=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===l)&&(a!=null&&a.user)&&(s=a.user,A=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(A)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Es(this.app))return Promise.reject(OA(this));const r=e?Dt(e):null;return r&&rt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Es(this.app)?Promise.reject(OA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Es(this.app)?Promise.reject(OA(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VL(this),r=new GL(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ru("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await LL(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ss(e)||this._popupRedirectResolver;rt(r,this,"argument-error"),this.redirectPersistenceManager=await na.create(this,[Ss(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const A=typeof r=="function"?r:r.next.bind(r);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(l,this,"internal-error"),l.then(()=>{i||A(this.currentUser)}),typeof r=="function"){const a=e.addObserver(r,n,s);return()=>{i=!0,a()}}else{const a=e.addObserver(r);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&BL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Xa(t){return Dt(t)}class _b{constructor(e){this.auth=e,this.observer=null,this.addObserver=UN(r=>this.observer=r)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $L(t){ig=t}function Bk(t){return ig.loadJS(t)}function WL(){return ig.recaptchaEnterpriseScript}function qL(){return ig.gapiScript}function XL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const JL="recaptcha-enterprise",YL="NO_RECAPTCHA";class ZL{constructor(e){this.type=JL,this.auth=Xa(e)}async verify(e="verify",r=!1){async function n(A){if(!r){if(A.tenantId==null&&A._agentRecaptchaConfig!=null)return A._agentRecaptchaConfig.siteKey;if(A.tenantId!=null&&A._tenantRecaptchaConfigs[A.tenantId]!==void 0)return A._tenantRecaptchaConfigs[A.tenantId].siteKey}return new Promise(async(i,l)=>{SL(A,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new FL(a);return A.tenantId==null?A._agentRecaptchaConfig=c:A._tenantRecaptchaConfigs[A.tenantId]=c,i(c.siteKey)}}).catch(a=>{l(a)})})}function s(A,i,l){const a=window.grecaptcha;vb(a)?a.enterprise.ready(()=>{a.enterprise.execute(A,{action:e}).then(c=>{i(c)}).catch(()=>{i(YL)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((A,i)=>{n(this.auth).then(l=>{if(!r&&vb(window.grecaptcha))s(l,A,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let a=WL();a.length!==0&&(a+=l),Bk(a).then(()=>{s(l,A,i)}).catch(c=>{i(c)})}}).catch(l=>{i(l)})})}}async function Eb(t,e,r,n=!1){const s=new ZL(t);let A;try{A=await s.verify(r)}catch{A=await s.verify(r,!0)}const i=Object.assign({},e);return n?Object.assign(i,{captchaResp:A}):Object.assign(i,{captchaResponse:A}),Object.assign(i,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(i,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),i}async function Tb(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=await Eb(t,e,r,r==="getOobCode");return n(t,A)}else return n(t,e).catch(async A=>{if(A.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Eb(t,e,r,r==="getOobCode");return n(t,i)}else return Promise.reject(A)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e){const r=su(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),A=r.getOptions();if(zA(A,e??{}))return s;Jn(s,"already-initialized")}return r.initialize({options:e})}function tM(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ss);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function rM(t,e,r){const n=Xa(t);rt(n._canInitEmulator,n,"emulator-config-failed"),rt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,A=bk(e),{host:i,port:l}=nM(e),a=l===null?"":`:${l}`;n.config.emulator={url:`${A}//${i}${a}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:l,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:s})}),sM()}function bk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nM(t){const e=bk(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const A=s[1];return{host:A,port:kb(n.substr(A.length+1))}}else{const[A,i]=n.split(":");return{host:A,port:kb(i)}}}function kb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sM(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ks("not implemented")}_getIdTokenResponse(e){return ks("not implemented")}_linkToIdToken(e,r){return ks("not implemented")}_getReauthenticationResolver(e){return ks("not implemented")}}async function AM(t,e){return fi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t,e){return Ag(t,"POST","/v1/accounts:signInWithPassword",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return Ag(t,"POST","/v1/accounts:signInWithEmailLink",uo(t,e))}async function aM(t,e){return Ag(t,"POST","/v1/accounts:signInWithEmailLink",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Lx{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new zc(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new zc(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tb(e,r,"signInWithPassword",iM);case"emailLink":return oM(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tb(e,n,"signUpPassword",AM);case"emailLink":return aM(e,{idToken:r,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(t,e){return Ag(t,"POST","/v1/accounts:signInWithIdp",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM="http://localhost";class no extends Lx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Jn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,A=Nx(r,["providerId","signInMethod"]);if(!n||!s)return null;const i=new no(n,s);return i.idToken=A.idToken||void 0,i.accessToken=A.accessToken||void 0,i.secret=A.secret,i.nonce=A.nonce,i.pendingToken=A.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return sa(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,sa(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,sa(e,r)}buildRequest(){const e={requestUri:lM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=nu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uM(t){const e=Ul(Ql(t)).link,r=e?Ul(Ql(e)).deep_link_id:null,n=Ul(Ql(t)).deep_link_id;return(n?Ul(Ql(n)).link:null)||n||r||e||t}class Mx{constructor(e){var r,n,s,A,i,l;const a=Ul(Ql(e)),c=(r=a.apiKey)!==null&&r!==void 0?r:null,d=(n=a.oobCode)!==null&&n!==void 0?n:null,h=cM((s=a.mode)!==null&&s!==void 0?s:null);rt(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(A=a.continueUrl)!==null&&A!==void 0?A:null,this.languageCode=(i=a.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=uM(e);try{return new Mx(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){this.providerId=Ja.PROVIDER_ID}static credential(e,r){return zc._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Mx.parseLink(r);return rt(n,"argument-error"),zc._fromEmailAndCode(e,n.code,n.tenantId)}}Ja.PROVIDER_ID="password";Ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends Ck{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends vu{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:pA.PROVIDER_ID,signInMethod:pA.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pA.credentialFromTaggedObject(e)}static credentialFromError(e){return pA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pA.credential(e.oauthAccessToken)}catch{return null}}}pA.FACEBOOK_SIGN_IN_METHOD="facebook.com";pA.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return no._fromParams({providerId:mA.PROVIDER_ID,signInMethod:mA.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return mA.credentialFromTaggedObject(e)}static credentialFromError(e){return mA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return mA.credential(r,n)}catch{return null}}}mA.GOOGLE_SIGN_IN_METHOD="google.com";mA.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends vu{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:wA.PROVIDER_ID,signInMethod:wA.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wA.credentialFromTaggedObject(e)}static credentialFromError(e){return wA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wA.credential(e.oauthAccessToken)}catch{return null}}}wA.GITHUB_SIGN_IN_METHOD="github.com";wA.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA extends vu{constructor(){super("twitter.com")}static credential(e,r){return no._fromParams({providerId:xA.PROVIDER_ID,signInMethod:xA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return xA.credentialFromTaggedObject(e)}static credentialFromError(e){return xA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return xA.credential(r,n)}catch{return null}}}xA.TWITTER_SIGN_IN_METHOD="twitter.com";xA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const A=await Fs._fromIdTokenResponse(e,n,s),i=Fb(n);return new Fa({user:A,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Fb(n);return new Fa({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Fb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends zs{constructor(e,r,n,s){var A;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:e.name,tenantId:(A=e.tenantId)!==null&&A!==void 0?A:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Zh(e,r,n,s)}}function Ik(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(A=>{throw A.code==="auth/multi-factor-auth-required"?Zh._fromErrorAndOperation(t,A,e,n):A})}async function dM(t,e,r=!1){const n=await Gc(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Fa._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e,r=!1){const{auth:n}=t;if(Es(n.app))return Promise.reject(OA(n));const s="reauthenticate";try{const A=await Gc(t,Ik(n,s,e,t),r);rt(A.idToken,n,"internal-error");const i=Px(A.idToken);rt(i,n,"internal-error");const{sub:l}=i;return rt(t.uid===l,n,"user-mismatch"),Fa._forOperation(t,s,A)}catch(A){throw(A==null?void 0:A.code)==="auth/user-not-found"&&Jn(n,"user-mismatch"),A}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e,r=!1){if(Es(t.app))return Promise.reject(OA(t));const n="signIn",s=await Ik(t,n,e),A=await Fa._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(A.user),A}async function fM(t,e){return _k(Xa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t){const e=Xa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function pM(t,e,r){return Es(t.app)?Promise.reject(OA(t)):fM(Dt(t),Ja.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&gM(t),n})}function mM(t,e,r,n){return Dt(t).onIdTokenChanged(e,r,n)}function wM(t,e,r){return Dt(t).beforeAuthStateChanged(e,r)}function xM(t,e,r,n){return Dt(t).onAuthStateChanged(e,r,n)}function yM(t){return Dt(t).signOut()}const ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=1e3,BM=10;class Tk extends Ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,l,a)=>{this.notifyListeners(i,a)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},A=this.storage.getItem(n);OL()&&A!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,BM):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},vM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tk.type="LOCAL";const bM=Tk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk extends Ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}kk.type="SESSION";const Fk=kk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new og(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:A}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(i).map(async c=>c(r.origin,A)),a=await CM(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:a})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}og.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let A,i;return new Promise((l,a)=>{const c=Ox("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),A=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(A),l(f.data.response);break;default:clearTimeout(d),clearTimeout(A),a(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(){return window}function _M(t){hs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return typeof hs().WorkerGlobalScope<"u"&&typeof hs().importScripts=="function"}async function EM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kM(){return Sk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="firebaseLocalStorageDb",FM=1,tf="firebaseLocalStorage",Qk="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function ag(t,e){return t.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function SM(){const t=indexedDB.deleteDatabase(Uk);return new Bu(t).toPromise()}function u0(){const t=indexedDB.open(Uk,FM);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(tf,{keyPath:Qk})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(tf)?e(n):(n.close(),await SM(),e(await u0()))})})}async function Sb(t,e,r){const n=ag(t,!0).put({[Qk]:e,value:r});return new Bu(n).toPromise()}async function UM(t,e){const r=ag(t,!1).get(e),n=await new Bu(r).toPromise();return n===void 0?null:n.value}function Ub(t,e){const r=ag(t,!0).delete(e);return new Bu(r).toPromise()}const QM=800,NM=3;class Nk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>NM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=og._getInstance(kM()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await EM(),!this.activeServiceWorker)return;this.sender=new IM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u0();return await Sb(e,ef,"1"),await Ub(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sb(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>UM(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ub(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const A=ag(s,!1).getAll();return new Bu(A).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:A}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(A)&&(this.notifyListeners(s,A),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nk.type="LOCAL";const RM=Nk;new yu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t,e){return e?Ss(e):(rt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx extends Lx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,r){return sa(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function PM(t){return _k(t.auth,new Hx(t),t.bypassAuthState)}function jM(t){const{auth:e,user:r}=t;return rt(r,e,"internal-error"),hM(r,new Hx(t),t.bypassAuthState)}async function LM(t){const{auth:e,user:r}=t;return rt(r,e,"internal-error"),dM(r,new Hx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,r,n,s,A=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:A,error:i,type:l}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:r,sessionId:n,tenantId:A||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PM;case"linkViaPopup":case"linkViaRedirect":return LM;case"reauthViaPopup":case"reauthViaRedirect":return jM;default:Jn(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new yu(2e3,1e4);class Go extends Rk{constructor(e,r,n,s,A){super(e,r,s,A),this.provider=n,this.authWindow=null,this.pollId=null,Go.currentPopupAction&&Go.currentPopupAction.cancel(),Go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=Ox();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MM.get())};e()}}Go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="pendingRedirect",rh=new Map;class HM extends Rk{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const n=await VM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VM(t,e){const r=zM(e),n=GM(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function KM(t,e){rh.set(t._key(),e)}function GM(t){return Ss(t._redirectPersistence)}function zM(t){return th(OM,t.config.apiKey,t.name)}async function $M(t,e,r=!1){if(Es(t.app))return Promise.reject(OA(t));const n=Xa(t),s=DM(n,e),i=await new HM(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=10*60*1e3;class qM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XM(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Dk(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ds(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qb(e))}saveEventToCache(e){this.cachedEventUids.add(Qb(e)),this.lastProcessedEventTime=Date.now()}}function Qb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e={}){return fi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZM=/^https?/;async function eO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JM(t);for(const r of e)try{if(tO(r))return}catch{}Jn(t,"unauthorized-domain")}function tO(t){const e=l0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!ZM.test(r))return!1;if(YM.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new yu(3e4,6e4);function Nb(){const t=hs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function nO(t){return new Promise((e,r)=>{var n,s,A;function i(){Nb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Nb(),r(ds(t,"network-request-failed"))},timeout:rO.get()})}if(!((s=(n=hs().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((A=hs().gapi)===null||A===void 0)&&A.load)i();else{const l=XL("iframefcb");return hs()[l]=()=>{gapi.load?i():r(ds(t,"network-request-failed"))},Bk(`${qL()}?onload=${l}`).catch(a=>r(a))}}).catch(e=>{throw nh=null,e})}let nh=null;function sO(t){return nh=nh||nO(t),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=new yu(5e3,15e3),iO="__/auth/iframe",oO="emulator/auth/iframe",aO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cO(t){const e=t.config;rt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Dx(e,oO):`https://${t.config.authDomain}/${iO}`,n={apiKey:e.apiKey,appName:t.name,v:Pa},s=lO.get(t.config.apiHost);s&&(n.eid=s);const A=t._getFrameworks();return A.length&&(n.fw=A.join(",")),`${r}?${nu(n).slice(1)}`}async function uO(t){const e=await sO(t),r=hs().gapi;return rt(r,t,"internal-error"),e.open({where:document.body,url:cO(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aO,dontclear:!0},n=>new Promise(async(s,A)=>{await n.restyle({setHideOnLeave:!1});const i=ds(t,"network-request-failed"),l=hs().setTimeout(()=>{A(i)},AO.get());function a(){hs().clearTimeout(l),s(n)}n.ping(a).then(a,()=>{A(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hO=500,fO=600,gO="_blank",pO="http://localhost";class Rb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mO(t,e,r,n=hO,s=fO){const A=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const a=Object.assign(Object.assign({},dO),{width:n.toString(),height:s.toString(),top:A,left:i}),c=wr().toLowerCase();r&&(l=gk(c)?gO:r),hk(c)&&(e=e||pO,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[p,v])=>`${f}${p}=${v},`,"");if(ML(c)&&l!=="_self")return wO(e||"",l),new Rb(null);const h=window.open(e||"",l,d);rt(h,t,"popup-blocked");try{h.focus()}catch{}return new Rb(h)}function wO(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="__/auth/handler",yO="emulator/auth/handler",vO=encodeURIComponent("fac");async function Db(t,e,r,n,s,A){rt(t.config.authDomain,t,"auth-domain-config-required"),rt(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Pa,eventId:s};if(e instanceof Ck){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",SN(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof vu){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const a=await t._getAppCheckToken(),c=a?`#${vO}=${encodeURIComponent(a)}`:"";return`${BO(t)}?${nu(l).slice(1)}${c}`}function BO({config:t}){return t.emulator?Dx(t,yO):`https://${t.authDomain}/${xO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="webStorageSupport";class bO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fk,this._completeRedirectFn=$M,this._overrideRedirectResult=KM}async _openPopup(e,r,n,s){var A;Os((A=this.eventManagers[e._key()])===null||A===void 0?void 0:A.manager,"_initialize() not called before _openPopup()");const i=await Db(e,r,n,l0(),s);return mO(e,i,Ox())}async _openRedirect(e,r,n,s){await this._originValidation(e);const A=await Db(e,r,n,l0(),s);return _M(A),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:A}=this.eventManagers[r];return s?Promise.resolve(s):(Os(A,"If manager is not set, promise should be"),A)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await uO(e),n=new qM(e);return r.register("authEvent",s=>(rt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(gp,{type:gp},s=>{var A;const i=(A=s==null?void 0:s[0])===null||A===void 0?void 0:A[gp];i!==void 0&&r(!!i),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=eO(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return yk()||fk()||jx()}}const CO=bO;var Pb="@firebase/auth",jb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EO(t){fa(new $i("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),A=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=n.options;rt(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vk(t)},c=new zL(n,s,A,a);return tM(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),fa(new $i("auth-internal",e=>{const r=Xa(e.getProvider("auth").getImmediate());return(n=>new IO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),MA(Pb,jb,_O(t)),MA(Pb,jb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=5*60,kO=wE("authIdTokenMaxAge")||TO;let Lb=null;const FO=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>kO)return;const s=r==null?void 0:r.token;Lb!==s&&(Lb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function SO(t=Qw()){const e=su(t,"auth");if(e.isInitialized())return e.getImmediate();const r=eM(t,{popupRedirectResolver:CO,persistence:[RM,bM,Fk]}),n=wE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const A=new URL(n,location.origin);if(location.origin===A.origin){const i=FO(A.toString());wM(r,i,()=>i(r.currentUser)),mM(r,l=>i(l))}}const s=pE("auth");return s&&rM(r,`http://${s}`),r}function UO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$L({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const A=ds("internal-error");A.customData=s,r(A)},n.type="text/javascript",n.charset="UTF-8",UO().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EO("Browser");const QO="AIzaSyA-lCfZRMFfLjdG4vg3JnPWMAXq_6zgl5I",NO="zameny-b6c3f.firebaseapp.com",RO="zameny-b6c3f",DO="zameny-b6c3f.firebasestorage.app",PO="323355347910",jO="1:323355347910:web:c81f2813dce5ee9373c0c7",Pk={apiKey:QO,authDomain:NO,projectId:RO,storageBucket:DO,messagingSenderId:PO,appId:jO};let rf;NR().length?rf=Qw():rf=bE(Pk);const vr=QT(rf),Qn=SO(rf);Pk.apiKey?console.log("Firebase initialized successfully (Modular SDK)"):console.error("CRITICAL ERROR: Firebase API Key is missing. Ensure your .env file exists and VITE_ variables are set.");const Rt={TEACHERS:"teachers",SUBJECTS:"subjects",CLASSES:"classes",ROOMS:"rooms",SCHEDULE_1:"schedule_sem1",SCHEDULE_2:"schedule_sem2",SUBSTITUTIONS:"substitutions",CONFIG:"config",PUBLIC:"publicSchedules",DUTY_ZONES:"duty_zones",DUTY_SCHEDULE:"duty_schedule",NUTRITION:"nutrition_records"},vl=new Map,LO=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},zo=t=>{if(t==null)return null;if(typeof t=="object"){if(Array.isArray(t))return t.map(r=>zo(r)).filter(r=>r!==void 0);const e={};for(const[r,n]of Object.entries(t)){const s=zo(n);s!==void 0&&(e[r]=s)}return e}return t},jk=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return t===e;if(typeof t!=typeof e)return!1;if(typeof t=="object"){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r)if(!n.includes(s)||!jk(t[s],e[s]))return!1;return!0}return!1};async function MO(t,e={}){try{return await t()}catch(r){if(console.error("Firestore read error (likely quota):",r),e.throwOnError)throw r;return{docs:[]}}}const br={syncCollection:async(t,e)=>{if(!vr)return;let r=vl.get(t);r||(r=new Map,vl.set(t,r));const n=new Map;e.forEach(A=>{A&&A.id&&n.set(A.id,zo(A))});const s=[];if(r.forEach((A,i)=>{n.has(i)||s.push({type:"delete",id:i})}),n.forEach((A,i)=>{const l=r.get(i);(!l||!jk(l,A))&&s.push({type:l?"update":"create",item:A,id:i})}),s.length!==0)try{const A=LO(s,450);for(const i of A){const l=tk(vr);i.forEach(a=>{const c=ss(vr,t,a.id);a.type==="delete"?(l.delete(c),r.delete(a.id)):(l.set(c,a.item,{merge:!0}),r.set(a.id,a.item))}),await l.commit()}}catch(A){throw console.error(`Failed to sync ${t}:`,A),A}},syncCacheWithDatabase:async t=>{if(vr){if(vl.has(t)&&vl.get(t).size>0){console.log(`Cache already exists for ${t}, skipping sync`);return}try{const e=a0(i0(vr,t)),r=await MO(async()=>await qT(e),{throwOnError:!0}),n=new Map;r.docs.forEach(s=>{n.set(s.id,s.data())}),vl.set(t,n),console.log(`Cache synced for ${t} (${n.size} items)`)}catch(e){console.error(`Failed to sync cache for ${t}:`,e)}}},save:async(t,e)=>{if(!vr||!(e||(Qn==null?void 0:Qn.currentUser)))return;const n=[];t.teachers&&n.push(br.syncCollection(Rt.TEACHERS,t.teachers)),t.subjects&&n.push(br.syncCollection(Rt.SUBJECTS,t.subjects)),t.classes&&n.push(br.syncCollection(Rt.CLASSES,t.classes)),t.rooms&&n.push(br.syncCollection(Rt.ROOMS,t.rooms)),t.schedule&&n.push(br.syncCollection(Rt.SCHEDULE_1,t.schedule)),t.schedule2&&n.push(br.syncCollection(Rt.SCHEDULE_2,t.schedule2)),t.substitutions&&n.push(br.syncCollection(Rt.SUBSTITUTIONS,t.substitutions)),t.dutyZones&&n.push(br.syncCollection(Rt.DUTY_ZONES,t.dutyZones)),t.dutySchedule&&n.push(br.syncCollection(Rt.DUTY_SCHEDULE,t.dutySchedule)),t.nutritionRecords&&n.push(br.syncCollection(Rt.NUTRITION,t.nutritionRecords)),t.settings&&n.push(Yd(ss(vr,Rt.CONFIG,"settings"),zo(t.settings),{merge:!0})),t.bellSchedule&&n.push(Yd(ss(vr,Rt.CONFIG,"bells"),zo({items:t.bellSchedule}))),await Promise.all(n)},subscribe:(t,e)=>{if(!vr)return()=>{};let r={...$r},n=!0,s;const A=()=>{clearTimeout(s),s=setTimeout(async()=>{const a={...r};n&&(n=!1,console.log("Skipping initial cache synchronization to save Firestore quota")),t(a)},50)},i=[],l=(a,c)=>{const d=a0(i0(vr,a));return Zd(d,h=>{const f=h.docs.map(p=>p.data());f.sort((p,v)=>{const x=typeof p.order=="number"?p.order:999999,_=typeof v.order=="number"?v.order:999999;return x-_}),r[c]=f,A()},h=>{console.warn(`Error reading ${a}:`,h)})};return i.push(l(Rt.TEACHERS,"teachers")),i.push(l(Rt.SUBJECTS,"subjects")),i.push(l(Rt.CLASSES,"classes")),i.push(l(Rt.ROOMS,"rooms")),i.push(l(Rt.SCHEDULE_1,"schedule")),i.push(l(Rt.SCHEDULE_2,"schedule2")),i.push(l(Rt.SUBSTITUTIONS,"substitutions")),i.push(l(Rt.DUTY_ZONES,"dutyZones")),i.push(l(Rt.DUTY_SCHEDULE,"dutySchedule")),i.push(l(Rt.NUTRITION,"nutritionRecords")),i.push(Zd(ss(vr,Rt.CONFIG,"settings"),a=>{a.exists()&&(r.settings={...$r.settings,...a.data()},A())})),i.push(Zd(ss(vr,Rt.CONFIG,"bells"),a=>{if(a.exists()){const c=a.data();r.bellSchedule=c.items||$r.bellSchedule,A()}})),()=>{i.forEach(a=>a()),clearTimeout(s)}},exportJson:t=>{const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),n=document.createElement("a");n.href=r;const s=(A=new Date)=>{const i=A.getFullYear(),l=String(A.getMonth()+1).padStart(2,"0"),a=String(A.getDate()).padStart(2,"0");return`${i}-${l}-${a}`};n.download=`gymnasium_backup_${s()}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n)},setPublicData:async(t,e)=>{if(!vr)throw new Error("Database not initialized");const r=Qn==null?void 0:Qn.currentUser;if(!r||r.email!=="admin@gymnasium22.com")throw new Error(" .");const n={subjects:e.subjects.map(A=>({id:A.id,name:A.name,color:A.color,difficulty:A.difficulty,requiredRoomType:A.requiredRoomType,order:A.order})),teachers:e.teachers.map(A=>({id:A.id,name:A.name,subjectIds:A.subjectIds,shifts:A.shifts,unavailableDates:[],telegramChatId:"",absenceReasons:void 0,birthDate:void 0,order:A.order})),classes:e.classes.map(A=>({id:A.id,name:A.name,shift:A.shift,studentsCount:A.studentsCount,order:A.order})),rooms:e.rooms,schedule:e.schedule,schedule2:e.schedule2,substitutions:e.substitutions,bellSchedule:e.bellSchedule,settings:{telegramToken:"",publicScheduleId:e.settings.publicScheduleId,bellPresets:e.settings.bellPresets,semesterConfig:e.settings.semesterConfig},dutyZones:e.dutyZones,dutySchedule:e.dutySchedule},s=zo(n);await Yd(ss(vr,Rt.PUBLIC,t),s)},getPublicData:async t=>{if(!vr)return null;try{const e=await cN(()=>Promise.resolve().then(()=>yL),void 0).then(r=>r.getDoc(ss(vr,Rt.PUBLIC,t)));return e.exists()?e.data():null}catch(e){return console.error(e),null}},deletePublicData:async t=>{vr&&await XT(ss(vr,Rt.PUBLIC,t))}},Lk=T.createContext(void 0),OO="admin@gymnasium22.com",HO=({children:t})=>{const[e,r]=T.useState(null),[n,s]=T.useState(null),[A,i]=T.useState(!0);T.useEffect(()=>{if(!Qn){console.warn("Firebase Auth is not initialized."),i(!1);return}const c=xM(Qn,d=>{r(d),d?d.email===OO?s("admin"):d.email==="canteen@gymnasium22.com"?s("canteen"):d.email&&d.email.includes("@")?s("teacher"):s("guest"):s(null),i(!1)});return()=>c()},[]);const l=async()=>{Qn&&await yM(Qn),s(null)},a=()=>{s("guest"),i(!1)};return o.jsx(Lk.Provider,{value:{user:e,role:n,loading:A,logout:l,setGuestRole:a},children:t})},gi=()=>{const t=T.useContext(Lk);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},fn=()=>crypto.randomUUID(),Vx=(t,e)=>{const r=t.getMonth(),n=e==null?void 0:e.semesterConfig;if(n){if(n.secondSemesterMonths.includes(r))return 2;if(n.firstSemesterMonths.includes(r))return 1}return r>=0&&r<=4?2:1},Mk=(t,e)=>Vx(t,e.settings)===2?e.schedule2||[]:e.schedule||[],$c=(t=new Date)=>{const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${n}`},Ok=T.createContext(void 0),Bl="gym_data_local_backup_v2",bl=()=>{try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},od=(t,e)=>{try{const r=new Blob([e]).size,n=4*1024*1024;return r>n?(console.warn("Data too large for localStorage, skipping backup"),!1):(localStorage.setItem(t,e),!0)}catch(r){return console.warn("Failed to save to localStorage:",r),!1}},VO=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},AA={log:(t,e)=>{console.error(t,e)},warn:(t,e)=>{console.warn(t,e)},alert:(t,e)=>{console.error(t,e),alert(` ${t}`)},firebase:(t,e)=>{const r=t==null?void 0:t.code;let n="  .";switch(r){case"resource-exhausted":n="     .";break;case"permission-denied":n="  .";break;case"unavailable":n="  .  .";break;case"deadline-exceeded":n="   .";break;default:n=` ${e}: ${(t==null?void 0:t.message)||" "}`}console.error(`Firebase ${e}:`,t),alert(n)}},Hk=({children:t,initialData:e})=>{const[r,n]=T.useState($r),[s,A]=T.useState(!0),[i,l]=T.useState(!1),[a,c]=T.useState([]),[d,h]=T.useState(-1),{user:f,role:p,loading:v}=gi();T.useEffect(()=>{if(e){n(e),c([e]),h(0),A(!1);return}if(v)return;let F=null;if(bl()&&(F=VO(Bl),F))try{const B=JSON.parse(F);B&&B.teachers&&(n(C=>({...C,...B})),console.log("Loaded from local storage backup"))}catch(B){AA.log("Error parsing local backup",B)}const U=f&&p!=="guest";if(!(f||p==="guest")){n($r),A(!1);return}if(!U){F||n($r),A(!1);return}A(!0);let y;try{y=br.subscribe(B=>{const C={...$r,...B};C.teachers||(C.teachers=[]),C.teachers=C.teachers.map(S=>({telegramChatId:"",...S,shifts:S.shifts||[ie.First,ie.Second]})),C.schedule||(C.schedule=[]),C.schedule2||(C.schedule2=[]),C.substitutions||(C.substitutions=[]),C.bellSchedule||(C.bellSchedule=Rh),(!C.dutyZones||C.dutyZones.length===0)&&(C.dutyZones=dE),C.dutySchedule||(C.dutySchedule=[]),C.nutritionRecords||(C.nutritionRecords=[]),C.settings?C.settings={...$r.settings,...C.settings}:C.settings=$r.settings,n(C),bl()&&od(Bl,JSON.stringify(C)),c(S=>S.length===0?[C]:S),h(S=>S===-1?0:S),A(!1)},B=>{AA.log("Failed to subscribe to data:",B),A(!1)})}catch(B){AA.log("Failed to initialize subscription:",B),A(!1),y=void 0}return()=>{y&&y()}},[e,f,p,v]);const x=T.useCallback(async(F,U=!0)=>{const R=p==="guest";l(!0);try{const y={...r,...F};if(n(y),bl()&&od(Bl,JSON.stringify(y)),!e&&f&&!R)try{await br.save(F,f)}catch(B){throw n(r),B}else R&&console.warn("       .");if(U){const B=a.slice(0,d+1);B.push(y);const C=50;if(B.length>C){const S=B.length-C;B.splice(0,S),h(C-1)}else h(B.length-1);c(B)}}catch(y){AA.firebase(y," ")}finally{l(!1)}},[r,a,d,f,p,e]),_=T.useCallback(async()=>{h(F=>{if(F>0){const U=a[F-1];if(n(U),bl()&&od(Bl,JSON.stringify(U)),!e&&f)try{br.save(U,f).catch(R=>AA.firebase(R," "))}catch(R){AA.firebase(R," ")}return F-1}return F})},[a,e,f]),b=T.useCallback(async()=>{h(F=>{if(F<a.length-1){const U=a[F+1];if(n(U),bl()&&od(Bl,JSON.stringify(U)),!e&&f)try{br.save(U,f).catch(R=>AA.firebase(R," "))}catch(R){AA.firebase(R," ")}return F+1}return F})},[a,e,f]),w=T.useCallback(async()=>{await x($r)},[x]),I=T.useMemo(()=>({data:r,isLoading:s,isSaving:i,saveData:x,resetData:w,undo:_,redo:b,canUndo:d>0,canRedo:d<a.length-1}),[r,s,i,x,w,_,b,d]);return o.jsx(Ok.Provider,{value:I,children:t})},lg=()=>{const t=T.useContext(Ok);if(!t)throw new Error("useFullData must be used within DataProvider");return t},Vk=T.createContext(void 0),Kk=T.createContext(void 0),Gk=({children:t})=>{const{data:e,saveData:r}=lg(),n=T.useMemo(()=>({subjects:e.subjects,teachers:e.teachers,classes:e.classes,rooms:e.rooms,bellSchedule:e.bellSchedule,settings:e.settings,dutyZones:e.dutyZones}),[e.subjects,e.teachers,e.classes,e.rooms,e.bellSchedule,e.settings,e.dutyZones]),s=T.useCallback(async(i,l)=>{await r(i,l)},[r]),A=T.useMemo(()=>({...n,saveStaticData:s}),[n,s]);return o.jsx(Vk.Provider,{value:A,children:t})},zk=({children:t})=>{const{data:e,saveData:r}=lg(),A=Vx(new Date,e.settings)===2?e.schedule2||[]:e.schedule||[],i=T.useCallback(async(d,h)=>{d===1?await r({schedule:h}):await r({schedule2:h})},[r]),l=T.useCallback(async(d,h)=>{await r(d,h)},[r]),a=T.useMemo(()=>({schedule:A,schedule1:e.schedule,schedule2:e.schedule2||[],substitutions:e.substitutions,dutySchedule:e.dutySchedule,nutritionRecords:e.nutritionRecords||[],saveSemesterSchedule:i,saveScheduleData:l}),[A,e.schedule,e.schedule2,e.substitutions,e.dutySchedule,e.nutritionRecords,i,l]),c=T.useMemo(()=>({...a,saveScheduleData:l}),[a,l]);return o.jsx(Kk.Provider,{value:c,children:t})},Yn=()=>{const t=T.useContext(Vk);if(!t)throw new Error("useStaticData must be used within StaticDataProvider");const e=lg();return{...{...t,subjects:t.subjects||[],teachers:t.teachers||[],classes:t.classes||[],rooms:t.rooms||[],bellSchedule:t.bellSchedule||[],settings:t.settings||$r.settings,dutyZones:t.dutyZones||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},pi=()=>{const t=T.useContext(Kk);if(!t)throw new Error("useScheduleData must be used within ScheduleDataProvider");const e=lg();return{...{...t,schedule:t.schedule||[],schedule1:t.schedule1||[],schedule2:t.schedule2||[],substitutions:t.substitutions||[],dutySchedule:t.dutySchedule||[],nutritionRecords:t.nutritionRecords||[]},isLoading:e.isLoading,isSaving:e.isSaving,undo:e.undo,redo:e.redo,canUndo:e.canUndo,canRedo:e.canRedo,resetData:e.resetData}},KO={Home:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Calendar:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),o.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),o.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Repeat:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"17 1 21 5 17 9"}),o.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),o.jsx("polyline",{points:"7 23 3 19 7 15"}),o.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),BookOpen:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),o.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),Settings:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),BarChart2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),o.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),o.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Download:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Menu:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),X:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Plus:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Trash2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),o.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),o.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Edit2:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Users:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),GraduationCap:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),o.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),Clock:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),CheckCircle:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Sun:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),o.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),o.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),o.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),o.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),o.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),o.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),o.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Moon:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Search:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),RotateCcw:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"1 4 1 10 7 10"}),o.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),RotateCw:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"23 4 23 10 17 10"}),o.jsx("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10"})]}),Printer:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),o.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),o.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Loader:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),Share2:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"18",cy:"5",r:"3"}),o.jsx("circle",{cx:"6",cy:"12",r:"3"}),o.jsx("circle",{cx:"18",cy:"19",r:"3"}),o.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),o.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),AlertTriangle:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),o.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),o.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Copy:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),o.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),Clipboard:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),o.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),PieChart:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),o.jsx("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]}),List:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),o.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),o.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),o.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Gift:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),o.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),o.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),o.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),o.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),Save:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),o.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),o.jsx("polyline",{points:"7 3 7 8 15 8"})]}),FileSpreadsheet:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("path",{d:"M8 13h2"}),o.jsx("path",{d:"M8 17h2"}),o.jsx("path",{d:"M14 13h2"}),o.jsx("path",{d:"M14 17h2"})]}),Activity:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),TrendingUp:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),o.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Table:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-7z"}),o.jsx("path",{d:"M3 9h18"}),o.jsx("path",{d:"M12 21V9"})]}),Image:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),o.jsx("circle",{cx:"9",cy:"9",r:"2"}),o.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Upload:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"17 8 12 3 7 8"}),o.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),History:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M3 3v5h5"}),o.jsx("path",{d:"M3.05 13A9 9 0 1 0 6 5.3L3 8"}),o.jsx("path",{d:"M12 7v5l4 2"})]}),UserX:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("line",{x1:"18",y1:"8",x2:"23",y2:"13"}),o.jsx("line",{x1:"23",y1:"8",x2:"18",y2:"13"})]}),ArrowRight:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),o.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Star:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),GripVertical:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"9",cy:"12",r:"1"}),o.jsx("circle",{cx:"9",cy:"5",r:"1"}),o.jsx("circle",{cx:"9",cy:"19",r:"1"}),o.jsx("circle",{cx:"15",cy:"12",r:"1"}),o.jsx("circle",{cx:"15",cy:"5",r:"1"}),o.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),DoorOpen:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M13 4h3a2 2 0 0 1 2 2v14"}),o.jsx("path",{d:"M2 20h3"}),o.jsx("path",{d:"M13 20h9"}),o.jsx("path",{d:"M10 20v-6a2 2 0 0 1 2-2h1v1"}),o.jsx("path",{d:"M13 12h1"}),o.jsx("path",{d:"M5 20v-6a2 2 0 0 1 2-2h1v1"}),o.jsx("path",{d:"M8 12h1"}),o.jsx("path",{d:"M4 20v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8"})]}),Bell:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),o.jsx("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]}),Briefcase:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),o.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),User:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),CheckSquare:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"9 11 12 14 22 4"}),o.jsx("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),QrCode:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),o.jsx("path",{d:"M17 17h.01"}),o.jsx("path",{d:"M12 17h.01"}),o.jsx("path",{d:"M14 14h.01"}),o.jsx("path",{d:"M17 14h.01"}),o.jsx("path",{d:"M14 12h.01"}),o.jsx("path",{d:"M19 12h.01"}),o.jsx("path",{d:"M12 19h.01"}),o.jsx("path",{d:"M19 19h.01"})]}),Eraser:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M22 21h-4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2zm-4-4L6 4m0 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8"})}),Columns:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}),o.jsx("path",{d:"M2 3h8a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"})]}),Rows:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M21 12H3"}),o.jsx("path",{d:"M21 6H3"}),o.jsx("path",{d:"M21 18H3"})]}),Send:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),LogOut:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),o.jsx("polyline",{points:"16 17 21 12 16 7"}),o.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Snowflake:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),o.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),o.jsx("path",{d:"m20 16-4-4 4-4"}),o.jsx("path",{d:"m4 8 4 4-4 4"}),o.jsx("path",{d:"m16 4-4 4-4-4"}),o.jsx("path",{d:"m8 20 4-4 4 4"})]}),Shield:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),Zap:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),Coffee:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),Edit:t=>o.jsx("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Info:t=>o.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})},O=({name:t,size:e=24,className:r="",...n})=>{const s=KO[t];return s?o.jsx(s,{width:e,height:e,className:r,...n}):(console.warn(`Icon '${t}' not found.`),null)},$k=T.createContext(void 0),GO=({children:t})=>{const[e,r]=T.useState([]),n=A=>{const i=fn();r(l=>[...l,{...A,id:i}])},s=A=>{r(i=>i.filter(l=>l.id!==A))};return o.jsxs($k.Provider,{value:{toasts:e,addToast:n,removeToast:s},children:[t,o.jsx(zO,{toasts:e,onRemoveToast:s})]})},Wk=()=>{const t=T.useContext($k);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},zO=({toasts:t,onRemoveToast:e})=>{const r=()=>{t.forEach(n=>e(n.id))};return t.length===0?null:o.jsxs("div",{className:"fixed top-4 right-4 z-[60] space-y-2",children:[t.length>1&&o.jsx("div",{className:"flex justify-end mb-2",children:o.jsxs("button",{onClick:r,className:"text-xs text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 underline transition-colors",children:["  (",t.length,")"]})}),t.map(n=>o.jsx($O,{id:n.id,type:n.type,title:n.title,message:n.message,duration:n.duration,onClose:e},n.id))]})},bn=({isOpen:t,onClose:e,title:r,children:n,maxWidth:s="max-w-lg"})=>(T.useEffect(()=>{if(!t)return;const A=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[t,e]),t?o.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in no-print",onClick:A=>A.target===A.currentTarget&&e(),children:o.jsxs("div",{className:`bg-white/90 dark:bg-dark-800/90 rounded-3xl shadow-2xl w-full ${s} flex flex-col max-h-[90vh] transition-colors duration-300`,children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-slate-200/50 dark:border-slate-700/50",children:[o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:r}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"",children:o.jsx(O,{name:"X",size:20})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),$O=({id:t,type:e,title:r,message:n,duration:s=5e3,onClose:A})=>{const[i,l]=T.useState(!0),[a,c]=T.useState(!1),d=T.useRef(null);T.useEffect(()=>(d.current=setTimeout(()=>{h()},s),()=>{d.current&&clearTimeout(d.current)}),[]);const h=()=>{d.current&&(clearTimeout(d.current),d.current=null),c(!0),setTimeout(()=>{l(!1),A(t)},300)};if(!i)return null;const p=(()=>{switch(e){case"success":return{bg:"bg-success-50 dark:bg-success-900/20 border-success-200 dark:border-success-800",icon:"text-success-600 dark:text-success-400",title:"text-success-800 dark:text-success-200",message:"text-success-700 dark:text-success-300"};case"warning":return{bg:"bg-warning-50 dark:bg-warning-900/20 border-warning-200 dark:border-warning-800",icon:"text-warning-600 dark:text-warning-400",title:"text-warning-800 dark:text-warning-200",message:"text-warning-700 dark:text-warning-300"};case"danger":return{bg:"bg-danger-50 dark:bg-danger-900/20 border-danger-200 dark:border-danger-800",icon:"text-danger-600 dark:text-danger-400",title:"text-danger-800 dark:text-danger-200",message:"text-danger-700 dark:text-danger-300"};case"info":default:return{bg:"bg-primary-50 dark:bg-primary-900/20 border-primary-200 dark:border-primary-800",icon:"text-primary-600 dark:text-primary-400",title:"text-primary-800 dark:text-primary-200",message:"text-primary-700 dark:text-primary-300"}}})(),v=e==="success"?"CheckCircle":e==="warning"?"AlertTriangle":e==="danger"?"XCircle":"Info";return o.jsx("div",{className:`max-w-sm w-full animate-slide-in ${a?"animate-fade-out":""}`,children:o.jsx("div",{className:`modern-card border p-4 ${p.bg}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`flex-shrink-0 ${p.icon}`,children:o.jsx(O,{name:v,size:20})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:`text-sm font-semibold ${p.title}`,children:r}),n&&o.jsx("p",{className:`text-sm mt-1 ${p.message}`,children:n})]}),o.jsx("button",{onClick:h,className:"flex-shrink-0 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 transition-colors","aria-label":" ",children:o.jsx(O,{name:"X",size:16})})]})})})},WO=({x:t,y:e,onClose:r,actions:n})=>{const s=T.useRef(null);if(T.useEffect(()=>{if(t===null||e===null)return;const l=c=>{s.current&&!s.current.contains(c.target)&&r()},a=c=>{c.key==="Escape"&&r()};return window.addEventListener("click",l,!0),document.addEventListener("keydown",a),()=>{window.removeEventListener("click",l,!0),document.removeEventListener("keydown",a)}},[t,e,r]),t===null||e===null)return null;const A=window.innerWidth-t<200?t-200:t,i={top:e,left:A};return o.jsx("div",{ref:s,className:"fixed z-[100] bg-white/90 dark:bg-slate-800/90 backdrop-blur-md shadow-xl rounded-2xl border border-slate-100 dark:border-slate-700 py-2 w-56 context-menu no-print",style:i,children:n.map(l=>o.jsxs("button",{onClick:a=>{a.stopPropagation(),l.onClick(),r()},className:`w-full text-left px-4 py-2.5 text-sm font-bold flex items-center gap-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${l.color||"text-slate-700 dark:text-slate-200"}`,children:[l.icon&&o.jsx(O,{name:l.icon,size:16}),l.label]},l.id||l.label))})},qO=()=>{const{bellSchedule:t,isSaving:e}=Yn(),[r,n]=T.useState("..."),[s,A]=T.useState(""),[i,l]=T.useState(0),[a,c]=T.useState("bg-slate-500"),[d,h]=T.useState("");return T.useEffect(()=>{const f=()=>{const v=new Date,x=v.getDay(),b=[null,dt.Monday,dt.Tuesday,dt.Wednesday,dt.Thursday,dt.Friday,null][x];if(h(b||""),!b){n(" "),A(" "),c("bg-slate-400"),l(0);return}const w=y=>{const[B,C]=y.split(":").map(Number);return B*60+C},I=v.getHours()*60+v.getMinutes();let F=t.filter(y=>y.day===b);F.length===0&&(F=t.filter(y=>y.day==="default")),F.sort((y,B)=>w(y.start)-w(B.start));let U=null,R=null;for(let y=0;y<F.length;y++){const B=F[y],C=w(B.start),S=w(B.end);if(I>=C&&I<S){U={...B,duration:S-C,passed:I-C};break}if(y<F.length-1){const N=F[y+1],P=w(N.start);if(I>=S&&I<P){const E=P-S;if(E>0&&E<60){const Ke=I-S,We=P-I;R={nextLesson:N,duration:E,passed:Ke,remaining:We};break}}}}if(U){n(`${U.period} `);const y=Math.max(0,U.duration-U.passed);A(`${U.shift===ie.First?"1 ":"2 "}  . ${y} `);const B=U.duration>0?U.passed/U.duration*100:0;l(Math.min(100,Math.max(0,B))),c("bg-indigo-600")}else if(R){n(""),A(` ${R.remaining}  ${R.nextLesson.period} `),c("bg-amber-500");const y=R.duration>0?R.passed/R.duration*100:0;l(Math.min(100,Math.max(0,y)))}else n(" "),A(" "),c("bg-slate-400"),l(0)};f();const p=setInterval(f,6e4);return()=>clearInterval(p)},[t]),o.jsxs("div",{className:"mx-4 mt-auto mb-20 md:mb-4 p-4 rounded-2xl flex flex-col gap-3 relative overflow-hidden group",children:[o.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${a}`}),o.jsxs("div",{className:"flex justify-between items-start z-10",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:d}),o.jsx("div",{className:"text-lg font-black text-slate-800 dark:text-white leading-none mb-1",children:r}),o.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:s})]}),o.jsxs("div",{className:`w-8 h-8 rounded-full ${a} bg-opacity-10 dark:bg-opacity-20 flex items-center justify-center relative`,children:[e&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(O,{name:"Loader",size:16,className:"animate-spin text-indigo-600"})}),o.jsx(O,{name:e?"Loader":"Clock",size:16,className:e?"text-indigo-600 animate-spin":a==="bg-indigo-600"?"text-indigo-600":a==="bg-amber-500"?"text-amber-500":"text-slate-400"})]})]}),i>0&&o.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden mt-1",children:o.jsx("div",{className:`h-full ${a} transition-all duration-1000`,style:{width:`${i}%`}})})]})},ac=({options:t,value:e,onChange:r,placeholder:n="...",groupBy:s})=>{var v;const[A,i]=T.useState(!1),[l,a]=T.useState(""),c=T.useRef(null);T.useEffect(()=>{const x=b=>{c.current&&!c.current.contains(b.target)&&i(!1)},_=b=>{b.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",x),document.addEventListener("keydown",_),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("keydown",_)}},[]);const h=((v=(s?t.flatMap(x=>x.options):t).find(x=>x.value===e))==null?void 0:v.label)||n,f=s?t.map(x=>({...x,options:x.options.filter(_=>_.label.toLowerCase().includes(l.toLowerCase()))})).filter(x=>x.options.length>0):null,p=s?null:t.filter(x=>x.label.toLowerCase().includes(l.toLowerCase()));return o.jsxs("div",{className:"relative w-full",ref:c,children:[o.jsxs("div",{onClick:()=>i(!A),className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white cursor-pointer flex justify-between items-center",children:[o.jsx("span",{className:e?"":"text-slate-400",children:h}),o.jsx(O,{name:"Filter",size:14,className:"text-slate-400"})]}),A&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-600 rounded-xl shadow-xl max-h-96 overflow-auto custom-scrollbar",children:[o.jsx("div",{className:"p-2 sticky top-0 bg-white dark:bg-slate-800 z-10",children:o.jsx("input",{autoFocus:!0,value:l,onChange:x=>a(x.target.value),placeholder:"...",className:"w-full bg-slate-100 dark:bg-slate-700 rounded-lg p-2 text-sm outline-none dark:text-white"})}),s&&f?f.map(x=>o.jsxs("div",{children:[o.jsx("div",{className:"px-3 py-1 text-xs font-bold text-slate-400 bg-slate-50 dark:bg-slate-700/50 sticky top-10 z-0",children:x.label}),x.options.map(_=>o.jsx("div",{onClick:()=>{r(_.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===_.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:_.label},_.value))]},x.id||x.label)):p?p.map(x=>o.jsx("div",{onClick:()=>{r(x.value),i(!1),a("")},className:`px-3 py-2 text-sm cursor-pointer hover:bg-indigo-50 dark:hover:bg-indigo-900/30 dark:text-slate-200 ${e===x.value?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`,children:x.label},x.value)):null]})]})},ad=({children:t,className:e=""})=>{const r=Cs.Children.toArray(t);return o.jsx("div",{className:e,children:r.map((n,s)=>{const A=Cs.isValidElement(n)&&n.key?n.key:s;return o.jsx("div",{style:{animation:`fadeIn 0.3s ease-out forwards ${s*.05}s`,opacity:0},children:n},A)})})},pp=({items:t,max:e,barClassName:r="bg-indigo-500"})=>{const n=e>0?e:1;return o.jsx("div",{className:"space-y-3",children:t.map(s=>{const A=s.id??s.label,i=Math.min(100,Math.max(0,s.value/n*100));return o.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[o.jsx("div",{className:"w-32 truncate font-medium text-slate-700 dark:text-slate-300",title:s.label,children:s.label}),o.jsx("div",{className:"flex-1 h-4 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full ${r} transition-all duration-500`,style:{width:`${i}%`}})}),o.jsx("div",{className:"w-12 text-right font-bold text-slate-800 dark:text-slate-200",children:s.value})]},A)})})},XO=({onMenuClick:t,role:e})=>{const r=e==="admin",n=e==="teacher",s=e==="guest",A=r||n,i=r||n||s;return o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 z-40 pb-safe md:hidden transition-all duration-300 no-select",children:o.jsxs("div",{className:"flex justify-around items-center h-20",children:[A&&o.jsxs(bA,{to:"/dashboard",className:({isActive:l})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${l?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(O,{name:"Home",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]}),i&&o.jsxs(bA,{to:"/schedule",className:({isActive:l})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${l?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(O,{name:"Calendar",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]}),r&&o.jsxs(bA,{to:"/substitutions",className:({isActive:l})=>`flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl transition-all duration-300 flex-1 h-full ${l?"text-indigo-600 dark:text-indigo-400 bg-indigo-50/50 dark:bg-indigo-900/20":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100/50 dark:hover:bg-slate-700/30"}`,children:[o.jsx(O,{name:"Repeat",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]}),o.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center gap-1.5 p-2.5 rounded-2xl text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 active:text-indigo-600 active:bg-indigo-50/50 dark:active:bg-indigo-900/20 transition-all duration-300 flex-1 h-full hover:bg-slate-100/50 dark:hover:bg-slate-700/30",children:[o.jsx(O,{name:"Menu",size:26,strokeWidth:2.5}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:""})]})]})})},JO=(t={})=>{const{enabled:e=!0,threshold:r=50}=t,n=Da(),s=T.useRef(null),A=T.useRef(null);T.useEffect(()=>{if(!e)return;const i=a=>{s.current=a.touches[0].clientX,A.current=a.touches[0].clientY},l=a=>{if(!s.current||!A.current)return;const c=a.changedTouches[0].clientX,d=a.changedTouches[0].clientY,h=c-s.current,f=d-A.current;Math.abs(h)>Math.abs(f)&&Math.abs(h)>r&&h>0&&n(-1),s.current=null,A.current=null};return document.addEventListener("touchstart",i,!1),document.addEventListener("touchend",l,!1),()=>{document.removeEventListener("touchstart",i),document.removeEventListener("touchend",l)}},[e,n,r])},YO=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,bellSchedule:s,settings:A}=Yn(),{schedule:i,substitutions:l}=pi(),{role:a}=gi(),c=Da(),{addToast:d}=Wk(),[h,f]=T.useState(localStorage.getItem("gym_notes")||""),[p]=T.useState(new Date),[v,x]=T.useState(""),[_,b]=T.useState(null),[w,I]=T.useState(!1),[F,U]=T.useState(!1),R=(W=new Date)=>{const pe=W.getFullYear(),Ie=String(W.getMonth()+1).padStart(2,"0"),At=String(W.getDate()).padStart(2,"0");return`${pe}-${Ie}-${At}`},[y,B]=T.useState(!1),[C,S]=T.useState(""),[N,P]=T.useState(!1),E=W=>W.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").slice(0,1e4),Ke=W=>{const pe=E(W);f(pe),U(!0)},We=()=>{localStorage.setItem("gym_notes",h),U(!1),d({type:"success",title:" ",message:"     ",duration:3e3})};T.useEffect(()=>{if(!F)return;const W=setTimeout(()=>{localStorage.setItem("gym_notes",h),U(!1)},3e3);return()=>clearTimeout(W)},[h,F]);const st=T.useMemo(()=>{const W=p.getHours();return W<5?" ":W<12?" ":W<18?" ":" "},[p]),Le=T.useMemo(()=>R(p),[p]),ce=T.useMemo(()=>{const W=p.getDay();return W===0||W===6?null:_t[W-1]},[p]),Te=T.useMemo(()=>{const W=new Date;return W.setHours(0,0,0,0),e.filter(pe=>pe.birthDate).map(pe=>{const Ie=new Date(pe.birthDate);let At=new Date(W.getFullYear(),Ie.getMonth(),Ie.getDate());At<W&&At.setFullYear(W.getFullYear()+1);const ut=Math.ceil((At.getTime()-W.getTime())/(1e3*60*60*24));return{...pe,diff:ut,age:W.getFullYear()-Ie.getFullYear()}}).filter(pe=>pe.diff<=30).sort((pe,Ie)=>pe.diff-Ie.diff)},[e]),Pe=T.useMemo(()=>{const W=e.length,pe=new Map;e.filter(de=>de.unavailableDates.includes(Le)).forEach(de=>{var ee;const Y=((ee=de.absenceReasons)==null?void 0:ee[Le])===" "?" ":"";pe.set(de.id,{id:de.id,name:de.name,displayReason:Y})});const Ie=l.filter(de=>de.date===Le&&de.replacementTeacherId!=="conducted"&&de.replacementTeacherId!==de.originalTeacherId),At=new Map;Ie.forEach(de=>{if(pe.has(de.originalTeacherId))return;const j=e.find(xe=>xe.id===de.originalTeacherId);if(!j)return;const Y=i.find(xe=>xe.id===de.scheduleItemId);if(!Y)return;At.has(de.originalTeacherId)||At.set(de.originalTeacherId,{teacher:j,lessons:[]}),At.get(de.originalTeacherId).lessons.push({period:Y.period,reason:de.lessonAbsenceReason})});const ut=Array.from(pe.values());At.forEach((de,j)=>{const Y=de.lessons.sort((K,G)=>K.period-G.period),ee=Y.map(K=>K.period).join(", "),Je=Y.some(K=>K.reason===" ")?" ":"";ut.push({id:j,name:de.teacher.name,displayReason:`${ee} : ${Je}`})}),ut.sort((de,j)=>de.name.localeCompare(j.name));const te=ut.length,ue=W-te;return{presentPercent:W>0?Math.round(ue/W*100):0,absentCount:te,totalTeachers:W,absentTeachersList:ut}},[e,Le,l,i]),Ze=T.useMemo(()=>{const W=new Date(p);for(W.setDate(p.getDate()+1);W.getDay()===0||W.getDay()===6;)W.setDate(W.getDate()+1);const Ie=[null,"","","","","",null][W.getDay()];if(!Ie)return[];const At=[];return r.forEach(ut=>{const te=i.filter(ue=>ue.classId===ut.id&&ue.day===Ie);te.length===0?At.push({class:ut.name,issue:`   ${Ie}`}):te.length<4&&At.push({class:ut.name,issue:`  (${te.length})`}),te.forEach(ue=>{if(i.some(de=>de.id!==ue.id&&de.day===Ie&&de.period===ue.period&&de.shift===ue.shift&&de.teacherId===ue.teacherId)&&At.push({class:ut.name,issue:`  (${ue.period} )`}),ue.roomId){const de=n.find(j=>j.id===ue.roomId);de&&de.capacity<ut.studentsCount&&At.push({class:ut.name,issue:`: ${de.name} (${ue.period} )`})}})}),At.filter((ut,te,ue)=>ue.findIndex(fe=>fe.class===ut.class&&fe.issue===ut.issue)===te).slice(0,10)},[i,r,e,n,p]),Ge=T.useMemo(()=>{if(!ce)return 0;let W=0;const pe=i.filter(Ie=>Ie.day===ce);for(const Ie of pe){const At=e.find(ut=>ut.id===Ie.teacherId);At&&At.unavailableDates.includes(Le)&&(l.find(te=>te.scheduleItemId===Ie.id&&te.date===Le)||W++)}return W},[i,e,l,Le,ce]),$=()=>{var Y;if(!v){b(null);return}const W=new Date,Ie=[null,dt.Monday,dt.Tuesday,dt.Wednesday,dt.Thursday,dt.Friday,null][W.getDay()];if(!Ie){b({status:"",detail:"  ",color:"text-slate-500"});return}const At=ee=>{const[xe,Je]=ee.split(":").map(Number);return xe*60+Je},ut=W.getHours()*60+W.getMinutes();let te=s.filter(ee=>ee.day===Ie);te.length===0&&(te=s.filter(ee=>ee.day==="default"));const ue=te.find(ee=>{const xe=At(ee.start),Je=At(ee.end);return ut>=xe&&ut<=Je}),fe=v.toLowerCase(),de=e.find(ee=>ee.name.toLowerCase().includes(fe)),j=r.find(ee=>ee.name.toLowerCase().includes(fe));if(!de&&!j){b({status:" ",detail:" ",color:"text-red-500"});return}if(de){if(de.unavailableDates.includes(Le)){const G=((Y=de.absenceReasons)==null?void 0:Y[Le])===" "?" ":"";b({status:"",detail:G,color:"text-red-500",icon:"UserX",items:[]});return}if(!ue){b({status:" /  ",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const ee=i.filter(K=>K.teacherId===de.id&&K.day===Ie&&K.period===ue.period&&K.shift===ue.shift),xe=l.filter(K=>K.date===Le&&K.replacementTeacherId===de.id).map(K=>i.find(G=>G.id===K.scheduleItemId)).filter(K=>!!K&&K.day===Ie&&K.period===ue.period&&K.shift===ue.shift);let Je=[];ee.forEach(K=>{var re,tt,ge;const G=l.find(Re=>Re.date===Le&&Re.scheduleItemId===K.id);if(!G||G.replacementTeacherId===de.id){const Re=((re=n.find(me=>me.id===((G==null?void 0:G.replacementRoomId)||K.roomId)))==null?void 0:re.name)||(G==null?void 0:G.replacementRoomId)||K.roomId||" .",Ce=(tt=t.find(me=>me.id===K.subjectId))==null?void 0:tt.name,ae=(ge=r.find(me=>me.id===K.classId))==null?void 0:ge.name;Je.push({room:Re,subject:Ce,entityName:ae,direction:K.direction,isSubstitution:!!(G&&G.replacementTeacherId===de.id),originalTeacherName:null})}}),xe.forEach(K=>{var Ce,ae,me;const G=l.find(Ue=>Ue.date===Le&&Ue.scheduleItemId===K.id&&Ue.replacementTeacherId===de.id);if(!G)return;const re=((Ce=n.find(Ue=>Ue.id===(G.replacementRoomId||K.roomId)))==null?void 0:Ce.name)||G.replacementRoomId||K.roomId||" .",tt=(ae=t.find(Ue=>Ue.id===K.subjectId))==null?void 0:ae.name,ge=(me=r.find(Ue=>Ue.id===K.classId))==null?void 0:me.name,Re=e.find(Ue=>Ue.id===G.originalTeacherId);Je.push({room:re,subject:tt,entityName:ge,direction:K.direction,isSubstitution:!0,originalTeacherName:Re==null?void 0:Re.name})}),Je.length>0?b({status:` ${ue.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Je}):b({status:"",detail:` ( ${ue.period}) `,color:"text-blue-500",icon:"User",items:[]})}else if(j){if(!ue){b({status:"",detail:" ",color:"text-amber-500",icon:"Clock",items:[]});return}const ee=i.filter(xe=>xe.classId===j.id&&xe.day===Ie&&xe.period===ue.period&&xe.shift===ue.shift);if(ee.length>0){const xe=ee.map(G=>{var qe,ke,at,et,ct;const re=l.find(Ne=>Ne.scheduleItemId===G.id&&Ne.date===Le);if(re&&re.replacementTeacherId==="cancelled")return{cancelled:!0,subject:(qe=t.find(Ne=>Ne.id===G.subjectId))==null?void 0:qe.name};const tt=!!(re&&re.replacementTeacherId!=="conducted"&&re.replacementTeacherId!=="cancelled"),ge=tt?re.replacementTeacherId:G.teacherId,Re=(re==null?void 0:re.replacementRoomId)||G.roomId,Ce=(ke=e.find(Ne=>Ne.id===ge))==null?void 0:ke.name,ae=((at=n.find(Ne=>Ne.id===Re))==null?void 0:at.name)||Re||" .",me=(et=t.find(Ne=>Ne.id===G.subjectId))==null?void 0:et.name,Ue=tt?(ct=e.find(Ne=>Ne.id===re.originalTeacherId))==null?void 0:ct.name:null;return{room:ae,subject:me,entityName:Ce,direction:G.direction,isSubstitution:tt,originalTeacherName:Ue}}),Je=xe.filter(G=>!G.cancelled),K=xe.filter(G=>!!G.cancelled);Je.length>0?b({status:` ${ue.period}`,detail:"",color:"text-emerald-600",icon:"MapPin",items:Je}):K.length>0?b({status:" ",detail:K.map(G=>G.subject).join(", "),color:"text-red-500",icon:"X",items:[]}):b({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}else b({status:" ",detail:" ",color:"text-blue-500",icon:"BookOpen",items:[]})}},he=async()=>{if(!C.trim()){alert(",   .");return}if(!(A!=null&&A.telegramToken)||!(A!=null&&A.feedbackChatId)){alert("     .");return}P(!0);const W=` *   :*

${C}`;try{const Ie=await(await fetch(`https://api.telegram.org/bot${A.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:A.feedbackChatId,text:W,parse_mode:"Markdown"})})).json();if(Ie.ok)alert("!   ."),B(!1),S("");else throw new Error(Ie.description)}catch(pe){console.error("   Telegram:",pe),alert(`   . : ${pe}`)}finally{P(!1)}};return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-20",children:[o.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 animate-fade-in",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-4xl font-black text-slate-800 dark:text-white tracking-tight mb-1 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 dark:from-indigo-400 dark:to-purple-400",children:[st,", ",a==="admin"?"":a==="canteen"?"":"","!"]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:[" ",p.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long"})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:shadow-lg transition-all text-sm border border-slate-200 dark:border-slate-700",children:[o.jsx(O,{name:"Send",size:18}),"  "]})})]}),o.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3 animate-fade-in",children:[o.jsxs(bA,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 border border-blue-200 dark:border-blue-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-xl",children:o.jsx(O,{name:"Calendar",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),a==="admin"&&o.jsxs(bA,{to:"/substitutions",className:"p-4 rounded-2xl bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 border border-orange-200 dark:border-orange-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-orange-500 text-white p-3 rounded-xl",children:o.jsx(O,{name:"Repeat",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),a==="admin"&&o.jsxs(bA,{to:"/duty",className:"p-4 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 border border-purple-200 dark:border-purple-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-xl",children:o.jsx(O,{name:"Shield",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]}),a==="guest"&&o.jsxs(bA,{to:"/schedule",className:"p-4 rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30 border border-emerald-200 dark:border-emerald-700 hover:shadow-lg transition-all flex flex-col items-center gap-2 active:scale-95",children:[o.jsx("div",{className:"bg-emerald-500 text-white p-3 rounded-xl",children:o.jsx(O,{name:"Users",size:20})}),o.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 text-center",children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full relative overflow-hidden card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-3 rounded-2xl shadow-lg shadow-indigo-500/20",children:o.jsx(O,{name:"Search",size:22})}),o.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:""})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",inputMode:"search",placeholder:"  ...",value:v,onChange:W=>x(W.target.value),onKeyDown:W=>W.key==="Enter"&&$(),className:"w-full bg-slate-50/80 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-600 rounded-xl p-3.5 text-sm outline-none focus:ring-2 ring-indigo-500/50 dark:text-white transition-all placeholder:text-slate-400"}),o.jsx("button",{onClick:$,className:"btn-primary btn-ripple btn-touch p-3.5 mobile-optimized",children:o.jsx(O,{name:"Search",size:20})})]}),_&&o.jsxs("div",{className:"mt-auto p-4 bg-slate-50/80 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 animate-fade-in backdrop-blur-sm",children:[o.jsxs("div",{className:`text-xs font-bold uppercase mb-3 flex items-center gap-2 ${_.color}`,children:[o.jsx(O,{name:_.icon||"Info",size:16})," ",_.status]}),_.items&&_.items.length>0?o.jsx("div",{className:"space-y-2.5",children:_.items.map((W,pe)=>o.jsxs("div",{className:"bg-white dark:bg-dark-900/80 p-3 rounded-xl border border-slate-100 dark:border-slate-600 text-sm shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:W.subject}),W.direction&&o.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded-md",children:W.direction})]}),W.isSubstitution&&o.jsx("div",{className:"text-[10px] font-bold text-orange-500 mt-1",children:W.originalTeacherName?` (${W.originalTeacherName})`:" "}),o.jsxs("div",{className:"flex justify-between items-center mt-2 text-slate-500 dark:text-slate-400 text-xs",children:[o.jsx("span",{children:W.entityName}),o.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded-lg font-mono font-bold text-slate-600 dark:text-slate-300",children:W.room})]})]},`${W.room}-${W.subject}-${W.entityName}-${pe}`))}):o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-base leading-snug",children:_.detail})]})]}),o.jsxs("div",{className:`p-6 rounded-3xl flex flex-col h-full card-hover relative overflow-hidden bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 ${Ge>0?"ring-2 ring-red-500/20 dark:ring-red-500/30":""}`,children:[Ge>0&&o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-red-500/10 blur-2xl -mr-10 -mt-10 rounded-full"}),o.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[o.jsx("div",{className:`p-3 rounded-2xl shadow-lg ${Ge>0?"bg-gradient-to-br from-red-500 to-orange-600 text-white shadow-red-500/30":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white shadow-emerald-500/30"}`,children:o.jsx(O,{name:Ge>0?"AlertTriangle":"CheckCircle",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsx("div",{className:"flex-1 flex flex-col items-center justify-center text-center relative z-10",children:Ge>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-6xl font-black text-slate-800 dark:text-white mb-2 tracking-tighter",children:Ge}),o.jsx("div",{className:"text-sm font-bold text-red-500 uppercase tracking-wider mb-6",children:" "}),o.jsxs("button",{onClick:()=>c("/substitutions"),className:"w-full py-3 bg-slate-800 dark:bg-white text-white dark:text-slate-900 rounded-xl font-bold hover:opacity-90 transition-all shadow-xl flex items-center justify-center gap-2 group",children:[" ",o.jsx(O,{name:"ArrowRight",size:18,className:"group-hover:translate-x-1 transition-transform"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-slate-200 dark:text-slate-700 mb-4 transform scale-125 opacity-50",children:o.jsx(O,{name:"CheckCircle",size:64})}),o.jsx("p",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:"  "})]})})]}),o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full card-hover bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-500 text-white p-3 rounded-2xl shadow-lg shadow-blue-500/20",children:o.jsx(O,{name:"PieChart",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsx("button",{onClick:()=>I(!w),className:"p-2.5 text-slate-400 hover:text-indigo-600 bg-white dark:bg-slate-700/50 rounded-xl transition-all hover:shadow-md",title:w?" ":" ",children:o.jsx(O,{name:w?"PieChart":"List",size:20})})]}),w?o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar animate-fade-in -mr-2 pr-2",children:Pe.absentTeachersList.length>0?o.jsx("div",{className:"space-y-3",children:Pe.absentTeachersList.map(W=>o.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300 truncate pr-2",children:W.name}),o.jsx("span",{className:"text-[10px] uppercase font-bold text-red-500 bg-red-50 dark:bg-red-900/20 px-2 py-1 rounded",children:W.displayReason})]},W.id))}):o.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center text-slate-400",children:o.jsx("p",{className:"text-sm font-medium",children:"   "})})}):o.jsxs("div",{className:"flex items-center justify-between flex-1 animate-fade-in px-2",children:[o.jsxs("div",{className:"relative w-28 h-28",children:[o.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full transform -rotate-90 drop-shadow-md",children:[o.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e2e8f0",strokeWidth:"3",className:"dark:stroke-slate-700",strokeLinecap:"round"}),o.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"url(#gradient)",strokeWidth:"3",strokeDasharray:`${Pe.presentPercent}, 100`,strokeLinecap:"round"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),o.jsx("stop",{offset:"100%",stopColor:"#06b6d4"})]})})]}),o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:" "}),o.jsxs("span",{className:"text-2xl font-black text-slate-800 dark:text-white",children:[Pe.presentPercent,"%"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-4xl font-black text-slate-800 dark:text-white mb-1",children:Pe.absentCount}),o.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase leading-tight",children:["",o.jsx("br",{}),""]})]})]})]}),o.jsxs("div",{className:"p-6 rounded-3xl flex flex-col h-full group card-hover relative bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-yellow-400 to-orange-500 text-white p-3 rounded-2xl shadow-lg shadow-orange-500/20",children:o.jsx(O,{name:"Edit2",size:22})}),o.jsx("h3",{className:"font-bold text-xl dark:text-white",children:""})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:We,disabled:!F,className:`p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${F?"text-amber-500 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700 animate-pulse":"text-slate-400 hover:text-emerald-600 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:F?" ":" ",children:o.jsx(O,{name:"Save",size:16})}),o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(h),d({type:"success",title:"",message:"    ",duration:2e3})},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:o.jsx(O,{name:"Copy",size:16})}),o.jsx("button",{onClick:()=>{confirm(" ?")&&(f(""),localStorage.setItem("gym_notes",""),U(!1),d({type:"success",title:" ",duration:2e3}))},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:o.jsx(O,{name:"Trash2",size:16})})]})]}),o.jsxs("div",{className:"relative flex-1 bg-yellow-50/50 dark:bg-slate-800/50 rounded-2xl p-1",children:[o.jsx("textarea",{inputMode:"text",className:"w-full h-full p-4 bg-transparent border-none outline-none font-medium text-slate-700 dark:text-slate-200 resize-none text-sm leading-relaxed",placeholder:" -...",value:h,onChange:W=>Ke(W.target.value),maxLength:1e4}),F&&o.jsxs("div",{className:"absolute bottom-3 right-3 text-[10px] font-bold uppercase tracking-widest text-amber-600 animate-pulse flex items-center gap-1 bg-white dark:bg-slate-800 px-2 py-1 rounded-full shadow-sm",children:[o.jsx(O,{name:"Clock",size:10}),"  "]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 p-2 rounded-xl",children:o.jsx(O,{name:"AlertTriangle",size:20})}),o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:Ze.length?Ze.map(W=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:W.class}),o.jsx("span",{className:"text-xs font-bold text-amber-600 bg-amber-50 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:W.issue})]},`${W.class}-${W.issue}`)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]}),o.jsxs("div",{className:"p-6 rounded-3xl bg-white dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 text-rose-600 p-2 rounded-xl",children:o.jsx(O,{name:"Gift",size:20})}),o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "})]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar pr-2",children:Te.length?Te.map(W=>o.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-dark-900/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:W.name}),o.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${W.diff===0?"bg-rose-500 text-white shadow-md shadow-rose-500/30":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:W.diff===0?"!":` ${W.diff} .`})]},W.id)):o.jsx("div",{className:"p-4 text-center text-slate-400 text-sm italic",children:"     "})})]})]}),o.jsx(bn,{isOpen:y,onClose:()=>B(!1),title:" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"       ?  !"}),o.jsx("textarea",{inputMode:"text",value:C,onChange:W=>S(W.target.value),rows:5,className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 resize-y",placeholder:" ..."}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{onClick:he,disabled:N,className:"btn-primary text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:[N?o.jsx(O,{name:"Loader",size:16,className:"animate-spin"}):o.jsx(O,{name:"Send",size:16}),N?"...":""]})})]})})]})};var qk={},Xk={},Jk={},cg={};Object.defineProperty(cg,"__esModule",{value:!0});function ZO(t){return t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).toLowerCase()}cg.default=ZO;var Kx={};Object.defineProperty(Kx,"__esModule",{value:!0});var eH=cg,tH=" and ";function rH(t){return typeof t=="string"?t:Object.entries(t).map(function(e){var r=e[0],n=e[1],s=eH.default(r),A=n;return typeof A=="boolean"?A?s:"not "+s:(typeof A=="number"&&/[height|width]$/.test(s)&&(A=A+"px"),"("+s+": "+A+")")}).join(tH)}Kx.default=rH;var Gx={};Object.defineProperty(Gx,"__esModule",{value:!0});function nH(){}Gx.default=nH;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.queryObjectToString=t.camelToHyphen=void 0;var e=cg;Object.defineProperty(t,"camelToHyphen",{enumerable:!0,get:function(){return e.default}});var r=Kx;Object.defineProperty(t,"queryObjectToString",{enumerable:!0,get:function(){return r.default}});var n=Gx;Object.defineProperty(t,"noop",{enumerable:!0,get:function(){return n.default}})})(Jk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.mockMediaQueryList=void 0;var e=T,r=Jk;t.mockMediaQueryList={media:"",matches:!1,onchange:r.noop,addListener:r.noop,removeListener:r.noop,addEventListener:r.noop,removeEventListener:r.noop,dispatchEvent:function(s){return!0}};var n=function(s){return function(A,i){i===void 0&&(i=!1);var l=e.useState(i),a=l[0],c=l[1],d=r.queryObjectToString(A);return s(function(){var h=!0,f=typeof window>"u"?t.mockMediaQueryList:window.matchMedia(d),p=function(){h&&c(!!f.matches)};return f.addListener(p),c(f.matches),function(){h=!1,f.removeListener(p)}},[d]),a}};t.useMedia=n(e.useEffect),t.useMediaLayout=n(e.useLayoutEffect),t.default=t.useMedia})(Xk);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.useMediaLayout=t.useMedia=t.default=void 0;var e=Xk;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return e.useMedia}}),Object.defineProperty(t,"useMediaLayout",{enumerable:!0,get:function(){return e.useMediaLayout}})})(qk);const Yk=VC(qk),Zk=({readOnly:t=!1,semester:e=1})=>{const{subjects:r,teachers:n,classes:s,rooms:A}=Yn(),{schedule1:i,schedule2:l,saveSemesterSchedule:a,canUndo:c,canRedo:d,undo:h,redo:f}=pi(),p=e===2?l:i,v=async Q=>{await a(e,Q)},[x,_]=T.useState(ie.First),[b,w]=T.useState(dt.Monday),[I,F]=T.useState(!1),[U,R]=T.useState({}),[y,B]=T.useState("class"),[C,S]=T.useState(""),[N,P]=T.useState(""),[E,Ke]=T.useState(""),[We,st]=T.useState(!1),[Le,ce]=T.useState({visible:!1,x:0,y:0,item:null,cell:null}),[Te,Pe]=T.useState(null),[Ze,Ge]=T.useState([]),[$,he]=T.useState(null),[W,pe]=T.useState(null),Ie=Yk({maxWidth:767}),[At,ut]=T.useState(!0),[te,ue]=T.useState(!1),[fe,de]=T.useState({isOpen:!1,type:"",day:"",classId:""}),[j,Y]=T.useState(dt.Monday),[ee,xe]=T.useState(""),Je=on[x],K=T.useMemo(()=>y==="week"?on[x].map(Q=>({id:Q.toString(),name:`${Q} `})):y==="class"?C?s.filter(Q=>Q.id===C&&Q.shift===x):s.filter(Q=>Q.shift===x):y==="teacher"?C?n.filter(Q=>Q.id===C):n:y==="subject"?C?r.filter(Q=>Q.id===C):r:[],[y,C,s,n,r,x]),G=()=>K,[re]=T.useState(()=>new Map);T.useEffect(()=>{re.clear()},[p,re]),T.useEffect(()=>{re.size>500&&(re.clear(),console.warn("Schedule cache cleared to prevent memory leak"))},[re]);const tt=T.useCallback((Q,V)=>{const ne=`${y}-${Q}-${V}-${x}-${b}-${C}-${N}-${E}`;if(re.has(ne))return re.get(ne);let Z=[];if(y==="week"){const Ae=parseInt(Q);if(isNaN(Ae))return[];const se=String(V);Z=p.filter(be=>be.shift===x&&be.period===Ae&&be.day===se),C&&(Z=Z.filter(be=>be.classId===C))}else{const Ae=typeof V=="string"?parseInt(V):V;if(isNaN(Ae))return[];y==="class"&&(Z=p.filter(se=>se.classId===Q&&se.period===Ae&&se.day===b&&se.shift===x)),y==="teacher"&&(Z=p.filter(se=>se.teacherId===Q&&se.period===Ae&&se.day===b&&se.shift===x)),y==="subject"&&(Z=p.filter(se=>se.subjectId===Q&&se.period===Ae&&se.day===b&&se.shift===x))}return N&&(Z=Z.filter(Ae=>{if(!Ae.roomId)return!1;const se=A.find(Be=>Be.id===Ae.roomId);return((se?se.name:Ae.roomId)||"").toLowerCase().includes(N.toLowerCase())})),E&&(Z=Z.filter(Ae=>{var se;return(se=Ae.direction)==null?void 0:se.toLowerCase().includes(E.toLowerCase())})),re.set(ne,Z),Z},[y,p,x,b,C,N,E,A]),ge=Q=>{const V=[],ne=p.filter(se=>se.id!==Q.id&&se.day===Q.day&&se.period===Q.period&&se.shift===Q.shift);return ne.find(se=>se.teacherId===Q.teacherId)&&V.push("teacher"),ne.find(se=>!(se.classId!==Q.classId||se.direction&&Q.direction&&se.direction!==Q.direction))&&V.push("class"),Q.roomId&&ne.find(be=>be.roomId===Q.roomId)&&V.push("room"),V},Re=(Q,V,ne)=>{const Z=[],Ae=s.find(Be=>Be.id===Q),se=r.find(Be=>Be.id===V),be=A.find(Be=>Be.id===ne);return be&&(Ae&&be.capacity<Ae.studentsCount&&Z.push(`  !   ${Ae.studentsCount} .,     ${be.capacity}.`),se&&se.requiredRoomType&&se.requiredRoomType!==""&&be.type!==se.requiredRoomType&&Z.push(`   !   "${se.requiredRoomType}",   "${be.type}".`)),Z},Ce=Q=>{if(!Q.classId||!Q.subjectId||!Q.roomId){Ge([]);return}const V=Re(Q.classId,Q.subjectId,Q.roomId);Ge(V)},ae=Q=>{t||(R(Q),Ce(Q),F(!0))},me=(Q,V,ne=b)=>{if(t)return;const Z={period:V,day:ne,shift:x,id:fn()};y==="class"&&(Z.classId=Q),y==="teacher"&&(Z.teacherId=Q),y==="subject"&&(Z.subjectId=Q),y==="week"&&(Z.period=parseInt(Q),Z.day=ne,C&&s.find(Ae=>Ae.id===C)&&(Z.classId=C)),R(Z),Ge([]),F(!0)},Ue=async()=>{if(!U.subjectId||!U.teacherId||!U.classId)return;const Q=[];if(U.period!==void 0){const Be=U.shift||x;(on[Be]||[]).includes(U.period)||Q.push(` ${U.period}    "${Be}"`)}if(n.find(Be=>Be.id===U.teacherId)||Q.push("   "),r.find(Be=>Be.id===U.subjectId)||Q.push("   "),s.find(Be=>Be.id===U.classId)||Q.push("   "),U.roomId&&(A.find(ze=>ze.id===U.roomId)||Q.push("   ")),Q.length>0){alert(`  :

${Q.join(`
`)}`);return}const Ae=ge(U);if(Ae.length>0){const Be={teacher:"",class:"",room:""},ze=Ae.map(xt=>Be[xt]).join(", ");if(!confirm(`  : ${ze}     .

   ?`))return}let se=[...p];const be=se.findIndex(Be=>Be.id===U.id);be>=0?se[be]=U:se.push(U),await v(se),F(!1)},qe=async Q=>{const V=p.filter(ne=>ne.id!==(Q||U.id));await v(V),F(!1)},ke=(Q,V,ne)=>{t||(Q.preventDefault(),Q.stopPropagation(),ce({visible:!0,x:Q.clientX,y:Q.clientY,item:V,cell:ne}))},at=(Q,V)=>{if(t)return;he(V),Q.dataTransfer.effectAllowed="move";const ne=Q.currentTarget;setTimeout(()=>ne.classList.add("dragging"),0)},et=Q=>{Q.currentTarget.classList.remove("dragging"),he(null),pe(null)},ct=(Q,V)=>{Q.preventDefault(),!t&&pe(`${V.rowId}-${V.colKey}`)},Ne=async(Q,V)=>{if(Q.preventDefault(),!$||t)return;const ne={...$};y==="week"?(ne.period=parseInt(V.rowId),ne.day=V.colKey):(ne.period=V.colKey,ne.day=b,y==="class"&&(ne.classId=V.rowId),y==="teacher"&&(ne.teacherId=V.rowId),y==="subject"&&(ne.subjectId=V.rowId));const Z=p.map(be=>be.id===ne.id?ne:be),Ae=ye(Z,ne);if(Ae.length>0){const be=Ae.map(Be=>{switch(Be.type){case"teacher":return` ${Be.entityName}     `;case"room":return` ${Be.entityName}     `;case"class":return` ${Be.entityName}      `;default:return"  "}});alert(`  :
${be.join(`
`)}`),he(null),pe(null);return}await v(Z),he(null),pe(null)},ye=(Q,V)=>{const ne=[],Z=Q.filter(be=>be.id!==V.id&&be.day===V.day&&be.period===V.period&&be.shift===V.shift);if(Z.find(be=>be.teacherId===V.teacherId)){const be=n.find(Be=>Be.id===V.teacherId);ne.push({type:"teacher",entityName:(be==null?void 0:be.name)||V.teacherId})}if(V.roomId&&Z.find(Be=>Be.roomId===V.roomId)){const Be=A.find(ze=>ze.id===V.roomId);ne.push({type:"room",entityName:(Be==null?void 0:Be.name)||V.roomId})}if(Z.find(be=>be.classId===V.classId)){const be=s.find(Be=>Be.id===V.classId);ne.push({type:"class",entityName:(be==null?void 0:be.name)||V.classId})}return ne},Xe=[];if(Le.item)Xe.push({label:"",icon:"Copy",onClick:()=>Pe(Le.item)},{label:"",icon:"Trash2",color:"text-red-600",onClick:()=>qe(Le.item.id)});else if(Le.cell){const Q=Le.cell;Te&&Xe.push({label:"",icon:"Clipboard",onClick:async()=>{const V={...Te,id:fn(),day:b,shift:x,period:Q.colKey};y==="week"&&(V.day=Q.colKey,V.period=parseInt(Q.rowId)),y==="class"?V.classId=Q.rowId:y==="teacher"?V.teacherId=Q.rowId:y==="subject"&&(V.subjectId=Q.rowId);let ne=[...p,V];await v(ne),Pe(null)}}),Xe.push({label:" ",icon:"Plus",onClick:()=>me(Q.rowId||"",typeof Q.colKey=="number"?Q.colKey:parseInt(Q.rowId||"0"),y==="week"?Q.colKey:b)})}const lt=U.subjectId?n.filter(Q=>Q.subjectIds&&Q.subjectIds.includes(U.subjectId)):[],Ct=U.subjectId?n.filter(Q=>!Q.subjectIds||!Q.subjectIds.includes(U.subjectId)):n,vt=T.useMemo(()=>{const Q=e===2?" (2- )":"";if(C){if(y==="teacher"){const V=n.find(ne=>ne.id===C);return V?V.name+Q:""+Q}if(y==="class"){const V=s.find(ne=>ne.id===C);return V?V.name+Q:""+Q}if(y==="subject"){const V=r.find(ne=>ne.id===C);return V?V.name+Q:""+Q}if(y==="week"){const V=s.find(ne=>ne.id===C);return V?V.name+Q:""+Q}}return`  ${b}`+Q},[C,y,n,s,r,b,e]),D=!!C,X=T.useMemo(()=>D?_t:Je,[D,Je]),q=T.useMemo(()=>D?on[x].map(Q=>({id:Q.toString(),name:`${Q} `})):G(),[D,x,G]),H=(Q,V)=>{if(D){const ne=parseInt(Q),Z=V;let Ae=p.filter(se=>se.shift===x&&se.period===ne&&se.day===Z);return y==="class"||y==="week"?Ae=Ae.filter(se=>se.classId===C):y==="teacher"?Ae=Ae.filter(se=>se.teacherId===C):y==="subject"&&(Ae=Ae.filter(se=>se.subjectId===C)),Ae}else return tt(Q,V)},De=y==="week"?_t:Je,Ee=(Q,V,ne)=>{de({isOpen:!0,type:Q,day:V||"",classId:ne||""})},ve=async()=>{let Q=[...p];fe.type==="clearAll"?Q=[]:fe.type==="clearDay"&&fe.day?Q=Q.filter(V=>V.day!==fe.day):fe.type==="clearClass"&&fe.classId&&(Q=Q.filter(V=>V.classId!==fe.classId)),await v(Q),de({isOpen:!1,type:"",day:"",classId:""}),ue(!1)},_e=(Q,V,ne)=>t&&Q.length===0?null:o.jsxs("div",{className:"h-full flex flex-col gap-1",children:[Q.map(Z=>{const Ae=r.find(it=>it.id===Z.subjectId),se=n.find(it=>it.id===Z.teacherId),be=s.find(it=>it.id===Z.classId),Be=ge(Z),ze=A.find(it=>it.id===Z.roomId),xt=ze?ze.name:Z.roomId;return o.jsxs("div",{draggable:!t,onDragStart:t?void 0:it=>at(it,Z),onDragEnd:t?void 0:et,onClick:t?void 0:()=>ae(Z),onContextMenu:t?void 0:it=>ke(it,Z,null),className:`rounded-lg p-2 text-xs shadow-sm ${t?"":"hover:shadow-md cursor-grab active:cursor-grabbing"} border flex flex-col gap-0.5 flex-1 relative group transition-transform ${Be.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600"}`,style:Be.length===0&&(Ae!=null&&Ae.color)?{backgroundColor:`${Ae.color}40`}:{},children:[o.jsxs("div",{className:"flex justify-between items-center gap-1",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:y==="subject"||y==="week"?be==null?void 0:be.name:Ae==null?void 0:Ae.name}),Z.direction&&o.jsx("span",{className:"text-[9px] px-1 rounded bg-white/80 dark:bg-black/30 font-bold text-slate-600 dark:text-slate-300",children:Z.direction})]}),y==="week"&&o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 line-clamp-1",children:Ae==null?void 0:Ae.name}),o.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[o.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-[10px] flex items-center gap-1 leading-tight overflow-hidden",title:se==null?void 0:se.name,children:[o.jsx(O,{name:y==="teacher"?"GraduationCap":"User",size:10,className:"shrink-0"}),o.jsx("span",{className:"truncate",children:y==="teacher"?be==null?void 0:be.name:se==null?void 0:se.name})]}),xt&&o.jsx("div",{className:"text-[9px] font-mono text-slate-400 bg-white/50 dark:bg-black/20 rounded px-1 flex items-center gap-0.5 shrink-0",title:ze?`: ${ze.capacity}, : ${ze.type}`:"",children:xt})]}),Be.length>0&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-[10px] font-bold",title:`: ${Be.join(", ")}`,children:"!"})]},Z.id)}),!t&&Q.length<3&&o.jsx("button",{onClick:()=>me(ne,typeof V=="number"?V:parseInt(ne),y==="week"?V:b),className:"w-full rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-300 dark:text-slate-600 hover:border-indigo-300 hover:text-indigo-400 transition-colors mt-auto h-6",children:o.jsx(O,{name:"Plus",size:16})})]}),He=()=>{if(!C)return o.jsx("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:" ,       ."});const Q=p.filter(V=>V.day===b&&V.shift===x&&(y==="class"&&V.classId===C||y==="teacher"&&V.teacherId===C||y==="subject"&&V.subjectId===C)).sort((V,ne)=>V.period-ne.period);return Q.length===0?o.jsxs("div",{className:"p-8 text-center text-slate-400 dark:text-slate-500",children:["   ",b,"  ",x,"."]}):o.jsx("div",{className:"p-4 space-y-4",children:Q.map(V=>{const ne=r.find(ze=>ze.id===V.subjectId),Z=n.find(ze=>ze.id===V.teacherId),Ae=s.find(ze=>ze.id===V.classId),se=A.find(ze=>ze.id===V.roomId),be=se?se.name:V.roomId,Be=ge(V);return o.jsxs("div",{onClick:t?void 0:()=>ae(V),className:`rounded-xl p-4 shadow-sm border ${Be.length>0?"border-red-300 bg-red-50 dark:bg-red-900/20 ring-1 ring-red-200":"border-slate-100 dark:border-slate-600 bg-white dark:bg-dark-800"} transition-colors ${t?"":"cursor-pointer"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:[V.period," "]}),Be.length>0&&o.jsx("span",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",title:`: ${Be.join(", ")}`,children:"!"})]}),o.jsxs("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 mb-1",children:[ne==null?void 0:ne.name," ",V.direction&&`(${V.direction})`]}),o.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[Ae==null?void 0:Ae.name,"  ",Z==null?void 0:Z.name]}),be&&o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[": ",be]})]},V.id)})})};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4 px-4 pt-2",children:o.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:e===1?" (1- )":" (2- )"})}),Le.visible&&o.jsx(WO,{x:Le.x,y:Le.y,onClose:()=>ce({...Le,visible:!1}),actions:Xe}),o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 flex flex-col xl:flex-row gap-4 items-start xl:items-center justify-between no-print",children:[o.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>_(ie.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${x===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>_(ie.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${x===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),y!=="week"&&o.jsx("div",{className:"flex overflow-x-auto pb-1 gap-1 max-w-[40vw] hide-scrollbar",children:_t.map(Q=>o.jsx("button",{onClick:()=>w(Q),className:`whitespace-nowrap px-4 py-2 rounded-xl text-sm font-bold transition-all ${b===Q?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Q},Q))}),!t&&o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:h,disabled:!c,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:o.jsx(O,{name:"RotateCcw",size:18})}),o.jsx("button",{onClick:f,disabled:!d,className:"p-2 text-slate-500 disabled:opacity-30 hover:bg-white dark:hover:bg-slate-600 rounded-lg transition",children:o.jsx(O,{name:"RotateCw",size:18})})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3 w-full xl:w-auto",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>{B("class"),S("")},className:`p-2 rounded-md ${y==="class"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(O,{name:"GraduationCap",size:18})}),o.jsx("button",{onClick:()=>{B("teacher"),S("")},className:`p-2 rounded-md ${y==="teacher"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(O,{name:"Users",size:18})}),o.jsx("button",{onClick:()=>{B("subject"),S("")},className:`p-2 rounded-md ${y==="subject"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:" ",children:o.jsx(O,{name:"BookOpen",size:18})}),o.jsx("button",{onClick:()=>{var Q;B("week"),S(((Q=s[0])==null?void 0:Q.id)||"")},className:`p-2 rounded-md ${y==="week"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-400"}`,title:"",children:o.jsx(O,{name:"Calendar",size:18})})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-1.5 pl-3 flex-1",children:[o.jsx(O,{name:"Filter",size:16,className:"text-slate-400"}),o.jsxs("select",{value:C,onChange:Q=>S(Q.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none w-full xl:w-32",children:[o.jsxs("option",{value:"",children:[" ",y==="class"?"":y==="teacher"?"":y==="week"?" ()":""]}),(y==="class"||y==="week")&&s.filter(Q=>Q.shift===x).map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id)),y==="teacher"&&n.map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id)),y==="subject"&&r.map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),o.jsx("input",{placeholder:"...",value:N,onChange:Q=>P(Q.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),o.jsx("input",{placeholder:"...",value:E,onChange:Q=>Ke(Q.target.value),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg p-2 text-xs font-bold"}),!t&&o.jsxs("button",{onClick:()=>ue(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-bold shadow-lg shadow-red-200 dark:shadow-none transition-all",children:[o.jsx(O,{name:"List",size:16})," . ."]}),(C||y==="week")&&o.jsx("button",{onClick:()=>st(!0),className:"btn-primary btn-ripple text-sm flex items-center gap-2",children:o.jsx(O,{name:"Printer",size:16})})]})]}),Ie&&!t&&C&&o.jsx("div",{className:"flex justify-center mb-4 no-print",children:o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>ut(!1),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${At?"text-slate-500 dark:text-slate-400":"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white"}`,title:" ",children:o.jsx(O,{name:"Columns",size:16})}),o.jsx("button",{onClick:()=>ut(!0),className:`flex-1 py-1 px-3 text-xs font-bold rounded-md ${At?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,title:" ",children:o.jsx(O,{name:"Rows",size:16})})]})}),o.jsx("div",{className:"flex-1 bg-white dark:bg-dark-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col transition-colors duration-300 no-print",children:o.jsx("div",{className:"overflow-auto flex-1 custom-scrollbar",children:Ie&&At&&!t&&C?He():o.jsxs("table",{className:"w-full border-collapse min-w-[1000px]",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0 z-20",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 border-b border-r border-slate-100 dark:border-slate-600 text-left text-xs font-extrabold text-slate-400 uppercase w-40 sticky left-0 bg-slate-50 dark:bg-slate-700 z-30",children:y==="week"?"":y==="class"?"":y==="teacher"?"":""}),De.map(Q=>o.jsx("th",{className:"p-4 border-b border-slate-100 dark:border-slate-600 text-center text-xs font-extrabold text-slate-400 uppercase min-w-[160px]",children:y==="week"?Q:`${Q} `},Q))]})}),o.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:K.length>0?K.map(Q=>o.jsxs("tr",{children:[o.jsx("td",{className:"p-4 border-r border-slate-100 dark:border-slate-600 font-black text-lg text-slate-700 dark:text-slate-200 sticky left-0 bg-white dark:bg-dark-800 z-10 text-left",children:Q.name}),De.map(V=>{const ne=tt(Q.id,V),Z=`${Q.id}-${V}`,Ae={rowId:Q.id,colKey:V};return o.jsx("td",{className:`p-2 border-r border-slate-50 dark:border-slate-700 h-28 align-top transition-colors ${W===Z?"drag-over":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,onContextMenu:t?void 0:se=>ke(se,null,Ae),onDragOver:t?void 0:se=>ct(se,Ae),onDrop:t?void 0:se=>Ne(se,Ae),children:_e(ne,V,Q.id)},V)})]},Q.id)):o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"   "})})})]})})}),o.jsx(bn,{isOpen:I,onClose:()=>F(!1),title:U.id?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl flex items-center gap-4 text-sm font-bold text-slate-600 dark:text-slate-300",children:[o.jsxs("span",{children:[": ",U.day]}),o.jsxs("span",{children:[": ",U.period]}),o.jsxs("span",{children:[": ",U.shift===ie.First?"1 ":"2 "]})]}),Ze.length>0&&o.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 p-3 rounded-lg text-sm border border-orange-100 dark:border-orange-900",children:Ze.map(Q=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(O,{name:"AlertTriangle",size:14}),Q]},Q))}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(ac,{options:s.filter(Q=>Q.shift===x).map(Q=>({value:Q.id,label:Q.name})),value:U.classId||null,onChange:Q=>{R({...U,classId:Q}),Ce({...U,classId:Q})},placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(ac,{options:r.map(Q=>({value:Q.id,label:Q.name})),value:U.subjectId||null,onChange:Q=>{R({...U,subjectId:Q}),Ce({...U,subjectId:Q})},placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsx(ac,{options:[{label:"",options:lt.map(Q=>({value:Q.id,label:Q.name}))},{label:"",options:Ct.map(Q=>({value:Q.id,label:Q.name}))}],value:U.teacherId||null,onChange:Q=>R({...U,teacherId:Q}),placeholder:" ",groupBy:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:" / "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",placeholder:": 1 .  ",value:U.direction||"",onChange:Q=>R({...U,direction:Q.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:""}),o.jsxs("select",{className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none bg-white dark:bg-slate-700 dark:text-white focus:border-indigo-500",value:U.roomId||"",onChange:Q=>{R({...U,roomId:Q.target.value}),Ce({...U,roomId:Q.target.value})},children:[o.jsx("option",{value:"",children:" "}),A.map(Q=>o.jsxs("option",{value:Q.id,children:[Q.name," (",Q.capacity," )"]},Q.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[U.id&&o.jsx("button",{onClick:()=>qe(),className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),o.jsx("button",{onClick:Ue,className:"btn-primary btn-ripple",children:""})]})]})}),o.jsx(bn,{isOpen:te,onClose:()=>ue(!1),title:"   ",children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:':       ""   .'}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"  "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ( ,  ,  )."}),o.jsx("button",{onClick:()=>Ee("clearAll"),className:"px-4 py-2 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 transition text-sm",children:" "})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"      ."}),o.jsx("div",{className:"flex gap-2",children:o.jsx("select",{value:j,onChange:Q=>Y(Q.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:_t.map(Q=>o.jsx("option",{value:Q,children:Q},Q))})}),o.jsxs("button",{onClick:()=>Ee("clearDay",j),className:"mt-2 px-4 py-2 bg-amber-600 text-white rounded-xl font-bold hover:bg-amber-700 transition text-sm w-full sm:w-auto",children:[" ",j]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1",children:"   "}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     ."}),o.jsx("div",{className:"flex gap-2",children:o.jsxs("select",{value:ee,onChange:Q=>xe(Q.target.value),className:"border border-slate-200 dark:border-slate-600 rounded-xl p-2 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none w-full",children:[o.jsx("option",{value:"",disabled:!0,children:" "}),s.map(Q=>o.jsx("option",{value:Q.id,children:Q.name},Q.id))]})}),o.jsx("button",{onClick:()=>{ee&&Ee("clearClass",void 0,ee)},disabled:!ee,className:"mt-2 px-4 py-2 bg-teal-600 text-white rounded-xl font-bold hover:bg-teal-700 transition text-sm w-full sm:w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"  "})]})]})}),o.jsxs(bn,{isOpen:fe.isOpen,onClose:()=>de({...fe,isOpen:!1}),title:"",children:[o.jsx("p",{className:"mb-6 text-slate-600 dark:text-slate-300",children:" ?        ."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>de({...fe,isOpen:!1}),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg font-bold text-slate-600 dark:text-slate-300",children:""}),o.jsx("button",{onClick:ve,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold",children:""})]})]}),We&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[o.jsx("h2",{className:"font-bold text-lg text-slate-800",children:" "}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2 hover:bg-indigo-700",children:[o.jsx(O,{name:"Printer",size:16})," "]}),o.jsx("button",{onClick:()=>st(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar",children:o.jsxs("div",{className:"max-w-[1100px] mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-black text-slate-800 uppercase",children:vt}),o.jsx("p",{className:"text-slate-500 font-bold",children:new Date().toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),o.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 w-24 font-bold text-slate-700",children:D||y==="week"?"":y==="class"?"":y==="teacher"?"":""}),X.map(Q=>o.jsx("th",{className:"border border-slate-300 p-2 bg-slate-100 text-center font-bold text-slate-700",children:D||y==="week"?Q:`${Q} `},Q))]})}),o.jsx("tbody",{children:q.map(Q=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 p-2 font-bold bg-slate-50 text-slate-800",children:Q.name}),X.map(V=>{const ne=H(Q.id,V);return o.jsx("td",{className:"border border-slate-300 p-1 align-top h-20 bg-white",children:ne.map(Z=>{const Ae=r.find(Et=>Et.id===Z.subjectId),se=n.find(Et=>Et.id===Z.teacherId),be=s.find(Et=>Et.id===Z.classId),Be=A.find(Et=>Et.id===Z.roomId),ze=Be?Be.name:Z.roomId,xt=y==="teacher",Jt=y==="subject"||y==="week"||D&&xt?be==null?void 0:be.name:Ae==null?void 0:Ae.name,Fr=xt?be==null?void 0:be.name:se==null?void 0:se.name;return o.jsxs("div",{className:"mb-1",children:[o.jsxs("div",{className:"font-bold text-slate-900 text-[11px] leading-tight",children:[Jt,Z.direction&&` (${Z.direction})`]}),o.jsxs("div",{className:"text-[9px] text-slate-600 flex justify-between items-center mt-0.5",children:[o.jsx("span",{children:Fr}),ze&&o.jsx("span",{className:"border px-1 rounded bg-slate-50 border-slate-200",children:ze})]})]},Z.id)})},V)})]},Q.id))})]})]})})]})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d0=function(t,e){return d0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},d0(t,e)};function Zn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");d0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var h0=function(){return h0=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var A in r)Object.prototype.hasOwnProperty.call(r,A)&&(e[A]=r[A])}return e},h0.apply(this,arguments)};function en(t,e,r,n){function s(A){return A instanceof r?A:new r(function(i){i(A)})}return new(r||(r=Promise))(function(A,i){function l(d){try{c(n.next(d))}catch(h){i(h)}}function a(d){try{c(n.throw(d))}catch(h){i(h)}}function c(d){d.done?A(d.value):s(d.value).then(l,a)}c((n=n.apply(t,[])).next())})}function Gr(t,e){var r={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},n,s,A,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return a([c,d])}}function a(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(A=c[0]&2?s.return:c[0]?s.throw||((A=s.return)&&A.call(s),0):s.next)&&!(A=A.call(s,c[1])).done)return A;switch(s=0,A&&(c=[c[0]&2,A.value]),c[0]){case 0:case 1:A=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(A=r.trys,!(A=A.length>0&&A[A.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!A||c[1]>A[0]&&c[1]<A[3])){r.label=c[1];break}if(c[0]===6&&r.label<A[1]){r.label=A[1],A=c;break}if(A&&r.label<A[2]){r.label=A[2],r.ops.push(c);break}A[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=A=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ld(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,A;n<s;n++)(A||!(n in e))&&(A||(A=Array.prototype.slice.call(e,0,n)),A[n]=e[n]);return t.concat(A||e)}var Hs=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),ug=function(t,e){return Hs.fromClientRect(t,e.getBoundingClientRect())},sH=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new Hs(0,0,n,s)},dg=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},ar=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},Mb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cd=0;cd<Mb.length;cd++)AH[Mb.charCodeAt(cd)]=cd;var Ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ud=0;ud<Ob.length;ud++)jl[Ob.charCodeAt(ud)]=ud;var iH=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=jl[t.charCodeAt(n)],i=jl[t.charCodeAt(n+1)],l=jl[t.charCodeAt(n+2)],a=jl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|l>>2,d[s++]=(l&3)<<6|a&63;return c},oH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},aH=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Mi=5,zx=11,mp=2,lH=zx-Mi,eF=65536>>Mi,cH=1<<Mi,wp=cH-1,uH=1024>>Mi,dH=eF+uH,hH=dH,fH=32,gH=hH+fH,pH=65536>>zx,mH=1<<lH,wH=mH-1,Hb=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},xH=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},yH=function(t,e){var r=iH(t),n=Array.isArray(r)?aH(r):new Uint32Array(r),s=Array.isArray(r)?oH(r):new Uint16Array(r),A=24,i=Hb(s,A/2,n[4]/2),l=n[5]===2?Hb(s,(A+n[4])/2):xH(n,Math.ceil((A+n[4])/4));return new vH(n[0],n[1],n[2],n[3],i,l)},vH=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Mi],r=(r<<mp)+(e&wp),this.data[r];if(e<=65535)return r=this.index[eF+(e-55296>>Mi)],r=(r<<mp)+(e&wp),this.data[r];if(e<this.highStart)return r=gH-pH+(e>>zx),r=this.index[r],r+=e>>Mi&wH,r=this.index[r],r=(r<<mp)+(e&wp),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Vb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BH=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var dd=0;dd<Vb.length;dd++)BH[Vb.charCodeAt(dd)]=dd;var bH="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Kb=50,CH=1,tF=2,rF=3,IH=4,_H=5,Gb=7,nF=8,zb=9,_A=10,f0=11,$b=12,g0=13,EH=14,Ll=15,p0=16,hd=17,Cl=18,TH=19,Wb=20,m0=21,Il=22,xp=23,vo=24,xn=25,Ml=26,Ol=27,Bo=28,kH=29,Si=30,FH=31,fd=32,gd=33,w0=34,x0=35,y0=36,Wc=37,v0=38,sh=39,Ah=40,yp=41,sF=42,SH=43,UH=[9001,65288],AF="!",gt="",pd="",B0=yH(bH),xs=[Si,y0],b0=[CH,tF,rF,_H],iF=[_A,nF],qb=[Ol,Ml],QH=b0.concat(iF),Xb=[v0,sh,Ah,w0,x0],NH=[Ll,g0],RH=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(A,i){var l=B0.get(A);if(l>Kb?(s.push(!0),l-=Kb):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(A)!==-1)return n.push(i),r.push(p0);if(l===IH||l===f0){if(i===0)return n.push(i),r.push(Si);var a=r[i-1];return QH.indexOf(a)===-1?(n.push(n[i-1]),r.push(a)):(n.push(i),r.push(Si))}if(n.push(i),l===FH)return r.push(e==="strict"?m0:Wc);if(l===sF||l===kH)return r.push(Si);if(l===SH)return A>=131072&&A<=196605||A>=196608&&A<=262141?r.push(Wc):r.push(Si);r.push(l)}),[n,r,s]},vp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var A=r;A<=n.length;){A++;var i=n[A];if(i===e)return!0;if(i!==_A)break}if(s===_A)for(var A=r;A>0;){A--;var l=n[A];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var a=r;a<=n.length;){a++;var i=n[a];if(i===e)return!0;if(i!==_A)break}if(l!==_A)break}return!1},Jb=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===_A)r--;else return n}return 0},DH=function(t,e,r,n,s){if(r[n]===0)return gt;var A=n-1;if(Array.isArray(s)&&s[A]===!0)return gt;var i=A-1,l=A+1,a=e[A],c=i>=0?e[i]:0,d=e[l];if(a===tF&&d===rF)return gt;if(b0.indexOf(a)!==-1)return AF;if(b0.indexOf(d)!==-1||iF.indexOf(d)!==-1)return gt;if(Jb(A,e)===nF)return pd;if(B0.get(t[A])===f0||(a===fd||a===gd)&&B0.get(t[l])===f0||a===Gb||d===Gb||a===zb||[_A,g0,Ll].indexOf(a)===-1&&d===zb||[hd,Cl,TH,vo,Bo].indexOf(d)!==-1||Jb(A,e)===Il||vp(xp,Il,A,e)||vp([hd,Cl],m0,A,e)||vp($b,$b,A,e))return gt;if(a===_A)return pd;if(a===xp||d===xp)return gt;if(d===p0||a===p0)return pd;if([g0,Ll,m0].indexOf(d)!==-1||a===EH||c===y0&&NH.indexOf(a)!==-1||a===Bo&&d===y0||d===Wb||xs.indexOf(d)!==-1&&a===xn||xs.indexOf(a)!==-1&&d===xn||a===Ol&&[Wc,fd,gd].indexOf(d)!==-1||[Wc,fd,gd].indexOf(a)!==-1&&d===Ml||xs.indexOf(a)!==-1&&qb.indexOf(d)!==-1||qb.indexOf(a)!==-1&&xs.indexOf(d)!==-1||[Ol,Ml].indexOf(a)!==-1&&(d===xn||[Il,Ll].indexOf(d)!==-1&&e[l+1]===xn)||[Il,Ll].indexOf(a)!==-1&&d===xn||a===xn&&[xn,Bo,vo].indexOf(d)!==-1)return gt;if([xn,Bo,vo,hd,Cl].indexOf(d)!==-1)for(var h=A;h>=0;){var f=e[h];if(f===xn)return gt;if([Bo,vo].indexOf(f)!==-1)h--;else break}if([Ol,Ml].indexOf(d)!==-1)for(var h=[hd,Cl].indexOf(a)!==-1?i:A;h>=0;){var f=e[h];if(f===xn)return gt;if([Bo,vo].indexOf(f)!==-1)h--;else break}if(v0===a&&[v0,sh,w0,x0].indexOf(d)!==-1||[sh,w0].indexOf(a)!==-1&&[sh,Ah].indexOf(d)!==-1||[Ah,x0].indexOf(a)!==-1&&d===Ah||Xb.indexOf(a)!==-1&&[Wb,Ml].indexOf(d)!==-1||Xb.indexOf(d)!==-1&&a===Ol||xs.indexOf(a)!==-1&&xs.indexOf(d)!==-1||a===vo&&xs.indexOf(d)!==-1||xs.concat(xn).indexOf(a)!==-1&&d===Il&&UH.indexOf(t[l])===-1||xs.concat(xn).indexOf(d)!==-1&&a===Cl)return gt;if(a===yp&&d===yp){for(var p=r[A],v=1;p>0&&(p--,e[p]===yp);)v++;if(v%2!==0)return gt}return a===fd&&d===gd?gt:pd},PH=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=RH(t,e.lineBreak),n=r[0],s=r[1],A=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(l){return[xn,Si,sF].indexOf(l)!==-1?Wc:l}));var i=e.wordBreak==="keep-all"?A.map(function(l,a){return l&&t[a]>=19968&&t[a]<=40959}):void 0;return[n,s,i]},jH=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===AF,this.start=n,this.end=s}return t.prototype.slice=function(){return ar.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),LH=function(t,e){var r=dg(t),n=PH(r,e),s=n[0],A=n[1],i=n[2],l=r.length,a=0,c=0;return{next:function(){if(c>=l)return{done:!0,value:null};for(var d=gt;c<l&&(d=DH(r,A,s,++c,i))===gt;);if(d!==gt||c===l){var h=new jH(r,d,a,c);return a=c,{value:h,done:!1}}return{done:!0,value:null}}}},MH=1,OH=2,bu=4,Yb=8,nf=10,Zb=47,lc=92,HH=9,VH=32,md=34,_l=61,KH=35,GH=36,zH=37,wd=39,xd=40,El=41,$H=95,an=45,WH=33,qH=60,XH=62,JH=64,YH=91,ZH=93,eV=61,tV=123,yd=63,rV=125,eC=124,nV=126,sV=128,tC=65533,Bp=42,Ri=43,AV=44,iV=58,oV=59,qc=46,aV=0,lV=8,cV=11,uV=14,dV=31,hV=127,rs=-1,oF=48,aF=97,lF=101,fV=102,gV=117,pV=122,cF=65,uF=69,dF=70,mV=85,wV=90,Wr=function(t){return t>=oF&&t<=57},xV=function(t){return t>=55296&&t<=57343},bo=function(t){return Wr(t)||t>=cF&&t<=dF||t>=aF&&t<=fV},yV=function(t){return t>=aF&&t<=pV},vV=function(t){return t>=cF&&t<=wV},BV=function(t){return yV(t)||vV(t)},bV=function(t){return t>=sV},vd=function(t){return t===nf||t===HH||t===VH},sf=function(t){return BV(t)||bV(t)||t===$H},rC=function(t){return sf(t)||Wr(t)||t===an},CV=function(t){return t>=aV&&t<=lV||t===cV||t>=uV&&t<=dV||t===hV},cA=function(t,e){return t!==lc?!1:e!==nf},Bd=function(t,e,r){return t===an?sf(e)||cA(e,r):sf(t)?!0:!!(t===lc&&cA(t,e))},bp=function(t,e,r){return t===Ri||t===an?Wr(e)?!0:e===qc&&Wr(r):Wr(t===qc?e:t)},IV=function(t){var e=0,r=1;(t[e]===Ri||t[e]===an)&&(t[e]===an&&(r=-1),e++);for(var n=[];Wr(t[e]);)n.push(t[e++]);var s=n.length?parseInt(ar.apply(void 0,n),10):0;t[e]===qc&&e++;for(var A=[];Wr(t[e]);)A.push(t[e++]);var i=A.length,l=i?parseInt(ar.apply(void 0,A),10):0;(t[e]===uF||t[e]===lF)&&e++;var a=1;(t[e]===Ri||t[e]===an)&&(t[e]===an&&(a=-1),e++);for(var c=[];Wr(t[e]);)c.push(t[e++]);var d=c.length?parseInt(ar.apply(void 0,c),10):0;return r*(s+l*Math.pow(10,-i))*Math.pow(10,a*d)},_V={type:2},EV={type:3},TV={type:4},kV={type:13},FV={type:8},SV={type:21},UV={type:9},QV={type:10},NV={type:11},RV={type:12},DV={type:14},bd={type:23},PV={type:1},jV={type:25},LV={type:24},MV={type:26},OV={type:27},HV={type:28},VV={type:29},KV={type:31},C0={type:32},hF=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(dg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==C0;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case md:return this.consumeStringToken(md);case KH:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(rC(r)||cA(n,s)){var A=Bd(r,n,s)?OH:MH,i=this.consumeName();return{type:5,value:i,flags:A}}break;case GH:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),kV;break;case wd:return this.consumeStringToken(wd);case xd:return _V;case El:return EV;case Bp:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),DV;break;case Ri:if(bp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case AV:return TV;case an:var l=e,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(bp(l,a,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Bd(l,a,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===an&&c===XH)return this.consumeCodePoint(),this.consumeCodePoint(),LV;break;case qc:if(bp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Zb:if(this.peekCodePoint(0)===Bp)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===Bp&&(d=this.consumeCodePoint(),d===Zb))return this.consumeToken();if(d===rs)return this.consumeToken()}break;case iV:return MV;case oV:return OV;case qH:if(this.peekCodePoint(0)===WH&&this.peekCodePoint(1)===an&&this.peekCodePoint(2)===an)return this.consumeCodePoint(),this.consumeCodePoint(),jV;break;case JH:var h=this.peekCodePoint(0),f=this.peekCodePoint(1),p=this.peekCodePoint(2);if(Bd(h,f,p)){var i=this.consumeName();return{type:7,value:i}}break;case YH:return HV;case lc:if(cA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ZH:return VV;case eV:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),FV;break;case tV:return NV;case rV:return RV;case gV:case mV:var v=this.peekCodePoint(0),x=this.peekCodePoint(1);return v===Ri&&(bo(x)||x===yd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case eC:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),UV;if(this.peekCodePoint(0)===eC)return this.consumeCodePoint(),SV;break;case nV:if(this.peekCodePoint(0)===_l)return this.consumeCodePoint(),QV;break;case rs:return C0}return vd(e)?(this.consumeWhiteSpace(),KV):Wr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):sf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ar(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();bo(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===yd&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(ar.apply(void 0,e.map(function(a){return a===yd?oF:a})),16),A=parseInt(ar.apply(void 0,e.map(function(a){return a===yd?dF:a})),16);return{type:30,start:s,end:A}}var i=parseInt(ar.apply(void 0,e),16);if(this.peekCodePoint(0)===an&&bo(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];bo(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var A=parseInt(ar.apply(void 0,l),16);return{type:30,start:i,end:A}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===xd?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===xd?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===rs)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===wd||r===md){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===rs||this.peekCodePoint(0)===El)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),bd)}for(;;){var s=this.consumeCodePoint();if(s===rs||s===El)return{type:22,value:ar.apply(void 0,e)};if(vd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===rs||this.peekCodePoint(0)===El?(this.consumeCodePoint(),{type:22,value:ar.apply(void 0,e)}):(this.consumeBadUrlRemnants(),bd);if(s===md||s===wd||s===xd||CV(s))return this.consumeBadUrlRemnants(),bd;if(s===lc)if(cA(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),bd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;vd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===El||e===rs)return;cA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=ar.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===rs||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===nf)return this._value.splice(0,n),PV;if(s===lc){var A=this._value[n+1];A!==rs&&A!==void 0&&(A===nf?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):cA(s,A)&&(r+=this.consumeStringSlice(n),r+=ar(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=bu,n=this.peekCodePoint(0);for((n===Ri||n===an)&&e.push(this.consumeCodePoint());Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===qc&&Wr(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Yb;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var A=this.peekCodePoint(2);if((n===uF||n===lF)&&((s===Ri||s===an)&&Wr(A)||Wr(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Yb;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[IV(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),A=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Bd(s,A,i)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return s===zH?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(bo(e)){for(var r=ar(e);bo(this.peekCodePoint(0))&&r.length<6;)r+=ar(this.consumeCodePoint());vd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||xV(n)||n>1114111?tC:n}return e===rs?tC:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(rC(r))e+=ar(r);else if(cA(r,this.peekCodePoint(0)))e+=ar(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),fF=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new hF;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||zV(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?C0:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),Cu=function(t){return t.type===15},Ya=function(t){return t.type===17},Ft=function(t){return t.type===20},GV=function(t){return t.type===0},I0=function(t,e){return Ft(t)&&t.value===e},gF=function(t){return t.type!==31},Sa=function(t){return t.type!==31&&t.type!==4},gs=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},zV=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ri=function(t){return t.type===17||t.type===15},hr=function(t){return t.type===16||ri(t)},pF=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Dr={type:17,number:0,flags:bu},$x={type:16,number:50,flags:bu},EA={type:16,number:100,flags:bu},Hl=function(t,e,r){var n=t[0],s=t[1];return[Pt(n,e),Pt(typeof s<"u"?s:n,r)]},Pt=function(t,e){if(t.type===16)return t.number/100*e;if(Cu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},mF="deg",wF="grad",xF="rad",yF="turn",hg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case mF:return Math.PI*e.number/180;case wF:return Math.PI/200*e.number;case xF:return e.number;case yF:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},vF=function(t){return t.type===15&&(t.unit===mF||t.unit===wF||t.unit===xF||t.unit===yF)},BF=function(t){var e=t.filter(Ft).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Dr,Dr];case"to top":case"bottom":return Dn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Dr,EA];case"to right":case"left":return Dn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[EA,EA];case"to bottom":case"top":return Dn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[EA,Dr];case"to left":case"right":return Dn(270)}return 0},Dn=function(t){return Math.PI*t/180},HA={name:"color",parse:function(t,e){if(e.type===18){var r=$V[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3);return TA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),A=e.value.substring(2,3),i=e.value.substring(3,4);return TA(parseInt(n+n,16),parseInt(s+s,16),parseInt(A+A,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6);return TA(parseInt(n,16),parseInt(s,16),parseInt(A,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),A=e.value.substring(4,6),i=e.value.substring(6,8);return TA(parseInt(n,16),parseInt(s,16),parseInt(A,16),parseInt(i,16)/255)}}if(e.type===20){var l=Qs[e.value.toUpperCase()];if(typeof l<"u")return l}return Qs.TRANSPARENT}},VA=function(t){return(255&t)===0},Br=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},TA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},nC=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},sC=function(t,e){var r=e.filter(Sa);if(r.length===3){var n=r.map(nC),s=n[0],A=n[1],i=n[2];return TA(s,A,i,1)}if(r.length===4){var l=r.map(nC),s=l[0],A=l[1],i=l[2],a=l[3];return TA(s,A,i,a)}return 0};function Cp(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var AC=function(t,e){var r=e.filter(Sa),n=r[0],s=r[1],A=r[2],i=r[3],l=(n.type===17?Dn(n.number):hg.parse(t,n))/(Math.PI*2),a=hr(s)?s.number/100:0,c=hr(A)?A.number/100:0,d=typeof i<"u"&&hr(i)?Pt(i,1):1;if(a===0)return TA(c*255,c*255,c*255,1);var h=c<=.5?c*(a+1):c+a-c*a,f=c*2-h,p=Cp(f,h,l+1/3),v=Cp(f,h,l),x=Cp(f,h,l-1/3);return TA(p*255,v*255,x*255,d)},$V={hsl:AC,hsla:AC,rgb:sC,rgba:sC},cc=function(t,e){return HA.parse(t,fF.create(e).parseComponentValue())},Qs={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},WV={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ft(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},qV={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fg=function(t,e){var r=HA.parse(t,e[0]),n=e[1];return n&&hr(n)?{color:r,stop:n}:{color:r,stop:null}},iC=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=Dr),n.stop===null&&(n.stop=EA);for(var s=[],A=0,i=0;i<t.length;i++){var l=t[i].stop;if(l!==null){var a=Pt(l,e);a>A?s.push(a):s.push(A),A=a}else s.push(null)}for(var c=null,i=0;i<s.length;i++){var d=s[i];if(d===null)c===null&&(c=i);else if(c!==null){for(var h=i-c,f=s[c-1],p=(d-f)/(h+1),v=1;v<=h;v++)s[c+v-1]=p*v;c=null}}return t.map(function(x,_){var b=x.color;return{color:b,stop:Math.max(Math.min(1,s[_]/e),0)}})},XV=function(t,e,r){var n=e/2,s=r/2,A=Pt(t[0],e)-n,i=s-Pt(t[1],r);return(Math.atan2(i,A)+Math.PI*2)%(Math.PI*2)},JV=function(t,e,r){var n=typeof t=="number"?t:XV(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),A=e/2,i=r/2,l=s/2,a=Math.sin(n-Math.PI/2)*l,c=Math.cos(n-Math.PI/2)*l;return[s,A-c,A+c,i-a,i+a]},Vn=function(t,e){return Math.sqrt(t*t+e*e)},oC=function(t,e,r,n,s){var A=[[0,0],[0,e],[t,0],[t,e]];return A.reduce(function(i,l){var a=l[0],c=l[1],d=Vn(r-a,n-c);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:l,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},YV=function(t,e,r,n,s){var A=0,i=0;switch(t.size){case 0:t.shape===0?A=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)A=i=Math.min(Vn(e,r),Vn(e,r-s),Vn(e-n,r),Vn(e-n,r-s));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),a=oC(n,s,e,r,!0),c=a[0],d=a[1];A=Vn(c-e,(d-r)/l),i=l*A}break;case 1:t.shape===0?A=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(A=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)A=i=Math.max(Vn(e,r),Vn(e,r-s),Vn(e-n,r),Vn(e-n,r-s));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=oC(n,s,e,r,!1),c=h[0],d=h[1];A=Vn(c-e,(d-r)/l),i=l*A}break}return Array.isArray(t.size)&&(A=Pt(t.size[0],n),i=t.size.length===2?Pt(t.size[1],s):A),[A,i]},ZV=function(t,e){var r=Dn(180),n=[];return gs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&i.value==="to"){r=BF(s);return}else if(vF(i)){r=hg.parse(t,i);return}}var l=fg(t,s);n.push(l)}),{angle:r,stops:n,type:1}},Cd=function(t,e){var r=Dn(180),n=[];return gs(e).forEach(function(s,A){if(A===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=BF(s);return}else if(vF(i)){r=(hg.parse(t,i)+Dn(270))%Dn(360);return}}var l=fg(t,s);n.push(l)}),{angle:r,stops:n,type:1}},e3=function(t,e){var r=Dn(180),n=[],s=1,A=0,i=3,l=[];return gs(e).forEach(function(a,c){var d=a[0];if(c===0){if(Ft(d)&&d.value==="linear"){s=1;return}else if(Ft(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=HA.parse(t,d.values[0]);n.push({stop:Dr,color:h})}else if(d.name==="to"){var h=HA.parse(t,d.values[0]);n.push({stop:EA,color:h})}else if(d.name==="color-stop"){var f=d.values.filter(Sa);if(f.length===2){var h=HA.parse(t,f[1]),p=f[0];Ya(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:h})}}}}),s===1?{angle:(r+Dn(180))%Dn(360),stops:n,type:s}:{size:i,shape:A,stops:n,position:l,type:s}},bF="closest-side",CF="farthest-side",IF="closest-corner",_F="farthest-corner",EF="circle",TF="ellipse",kF="cover",FF="contain",t3=function(t,e){var r=0,n=3,s=[],A=[];return gs(e).forEach(function(i,l){var a=!0;if(l===0){var c=!1;a=i.reduce(function(h,f){if(c)if(Ft(f))switch(f.value){case"center":return A.push($x),h;case"top":case"left":return A.push(Dr),h;case"right":case"bottom":return A.push(EA),h}else(hr(f)||ri(f))&&A.push(f);else if(Ft(f))switch(f.value){case EF:return r=0,!1;case TF:return r=1,!1;case"at":return c=!0,!1;case bF:return n=0,!1;case kF:case CF:return n=1,!1;case FF:case IF:return n=2,!1;case _F:return n=3,!1}else if(ri(f)||hr(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return h},a)}if(a){var d=fg(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:A,type:2}},Id=function(t,e){var r=0,n=3,s=[],A=[];return gs(e).forEach(function(i,l){var a=!0;if(l===0?a=i.reduce(function(d,h){if(Ft(h))switch(h.value){case"center":return A.push($x),!1;case"top":case"left":return A.push(Dr),!1;case"right":case"bottom":return A.push(EA),!1}else if(hr(h)||ri(h))return A.push(h),!1;return d},a):l===1&&(a=i.reduce(function(d,h){if(Ft(h))switch(h.value){case EF:return r=0,!1;case TF:return r=1,!1;case FF:case bF:return n=0,!1;case CF:return n=1,!1;case IF:return n=2,!1;case kF:case _F:return n=3,!1}else if(ri(h)||hr(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},a)),a){var c=fg(t,i);s.push(c)}}),{size:n,shape:r,stops:s,position:A,type:2}},r3=function(t){return t.type===1},n3=function(t){return t.type===2},Wx={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=SF[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function s3(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!SF[t.name])}var SF={"linear-gradient":ZV,"-moz-linear-gradient":Cd,"-ms-linear-gradient":Cd,"-o-linear-gradient":Cd,"-webkit-linear-gradient":Cd,"radial-gradient":t3,"-moz-radial-gradient":Id,"-ms-radial-gradient":Id,"-o-radial-gradient":Id,"-webkit-radial-gradient":Id,"-webkit-gradient":e3},A3={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Sa(n)&&s3(n)}).map(function(n){return Wx.parse(t,n)})}},i3={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(Ft(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},o3={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return gs(e).map(function(r){return r.filter(hr)}).map(pF)}},a3={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return gs(e).map(function(r){return r.filter(Ft).map(function(n){return n.value}).join(" ")}).map(l3)}},l3=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Aa;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Aa||(Aa={}));var c3={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return gs(e).map(function(r){return r.filter(u3)})}},u3=function(t){return Ft(t)||hr(t)},gg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},d3=gg("top"),h3=gg("right"),f3=gg("bottom"),g3=gg("left"),pg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return pF(r.filter(hr))}}},p3=pg("top-left"),m3=pg("top-right"),w3=pg("bottom-right"),x3=pg("bottom-left"),mg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},y3=mg("top"),v3=mg("right"),B3=mg("bottom"),b3=mg("left"),wg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return Cu(r)?r.number:0}}},C3=wg("top"),I3=wg("right"),_3=wg("bottom"),E3=wg("left"),T3={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},k3={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},F3={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ft).reduce(function(r,n){return r|S3(n.value)},0)}},S3=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},U3={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Q3={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Af;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Af||(Af={}));var N3={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Af.STRICT;case"normal":default:return Af.NORMAL}}},R3={name:"line-height",initialValue:"normal",prefix:!1,type:4},aC=function(t,e){return Ft(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:hr(t)?Pt(t,e):e},D3={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Wx.parse(t,e)}},P3={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},_0={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},xg=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},j3=xg("top"),L3=xg("right"),M3=xg("bottom"),O3=xg("left"),H3={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ft).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},V3={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},yg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},K3=yg("top"),G3=yg("right"),z3=yg("bottom"),$3=yg("left"),W3={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},q3={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},X3={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&I0(e[0],"none")?[]:gs(e).map(function(r){for(var n={color:Qs.TRANSPARENT,offsetX:Dr,offsetY:Dr,blur:Dr},s=0,A=0;A<r.length;A++){var i=r[A];ri(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=HA.parse(t,i)}return n})}},J3={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Y3={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=t5[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Z3=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},e5=function(t){var e=t.filter(function(a){return a.type===17}).map(function(a){return a.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],A=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,s,A,i,l]:null},t5={matrix:Z3,matrix3d:e5},lC={type:16,number:50,flags:bu},r5=[lC,lC],n5={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(hr);return r.length!==2?r5:[r[0],r[1]]}},s5={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},uc;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(uc||(uc={}));var A5={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return uc.BREAK_ALL;case"keep-all":return uc.KEEP_ALL;case"normal":default:return uc.NORMAL}}},i5={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(Ya(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},UF={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},o5={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Ya(e)?e.number:1}},a5={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},l5={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ft).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},c5={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},u5={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},d5={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(Ya(e))return e.number;if(Ft(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},h5={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ft).map(function(r){return r.value})}},f5={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pr=function(t,e){return(t&e)!==0},g5={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},p5={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(gF),A=0;A<s.length;A++){var i=s[A],l=s[A+1];if(i.type===20){var a=l&&Ya(l)?l.number:1;n.push({counter:i.value,increment:a})}}return n}},m5={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(gF),s=0;s<n.length;s++){var A=n[s],i=n[s+1];if(Ft(A)&&A.value!=="none"){var l=i&&Ya(i)?i.number:0;r.push({counter:A.value,reset:l})}}return r}},w5={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Cu).map(function(r){return UF.parse(t,r)})}},x5={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(GV);if(s.length%2!==0)return null;for(var A=0;A<s.length;A+=2){var i=s[A].value,l=s[A+1].value;n.push({open:i,close:l})}return n}},cC=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},y5={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&I0(e[0],"none")?[]:gs(e).map(function(r){for(var n={color:255,offsetX:Dr,offsetY:Dr,blur:Dr,spread:Dr,inset:!1},s=0,A=0;A<r.length;A++){var i=r[A];I0(i,"inset")?n.inset=!0:ri(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=HA.parse(t,i)}return n})}},v5={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(Ft).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},B5={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},b5={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Cu(e)?e.number:0}},C5=function(){function t(e,r){var n,s;this.animationDuration=Me(e,w5,r.animationDuration),this.backgroundClip=Me(e,WV,r.backgroundClip),this.backgroundColor=Me(e,qV,r.backgroundColor),this.backgroundImage=Me(e,A3,r.backgroundImage),this.backgroundOrigin=Me(e,i3,r.backgroundOrigin),this.backgroundPosition=Me(e,o3,r.backgroundPosition),this.backgroundRepeat=Me(e,a3,r.backgroundRepeat),this.backgroundSize=Me(e,c3,r.backgroundSize),this.borderTopColor=Me(e,d3,r.borderTopColor),this.borderRightColor=Me(e,h3,r.borderRightColor),this.borderBottomColor=Me(e,f3,r.borderBottomColor),this.borderLeftColor=Me(e,g3,r.borderLeftColor),this.borderTopLeftRadius=Me(e,p3,r.borderTopLeftRadius),this.borderTopRightRadius=Me(e,m3,r.borderTopRightRadius),this.borderBottomRightRadius=Me(e,w3,r.borderBottomRightRadius),this.borderBottomLeftRadius=Me(e,x3,r.borderBottomLeftRadius),this.borderTopStyle=Me(e,y3,r.borderTopStyle),this.borderRightStyle=Me(e,v3,r.borderRightStyle),this.borderBottomStyle=Me(e,B3,r.borderBottomStyle),this.borderLeftStyle=Me(e,b3,r.borderLeftStyle),this.borderTopWidth=Me(e,C3,r.borderTopWidth),this.borderRightWidth=Me(e,I3,r.borderRightWidth),this.borderBottomWidth=Me(e,_3,r.borderBottomWidth),this.borderLeftWidth=Me(e,E3,r.borderLeftWidth),this.boxShadow=Me(e,y5,r.boxShadow),this.color=Me(e,T3,r.color),this.direction=Me(e,k3,r.direction),this.display=Me(e,F3,r.display),this.float=Me(e,U3,r.cssFloat),this.fontFamily=Me(e,c5,r.fontFamily),this.fontSize=Me(e,u5,r.fontSize),this.fontStyle=Me(e,f5,r.fontStyle),this.fontVariant=Me(e,h5,r.fontVariant),this.fontWeight=Me(e,d5,r.fontWeight),this.letterSpacing=Me(e,Q3,r.letterSpacing),this.lineBreak=Me(e,N3,r.lineBreak),this.lineHeight=Me(e,R3,r.lineHeight),this.listStyleImage=Me(e,D3,r.listStyleImage),this.listStylePosition=Me(e,P3,r.listStylePosition),this.listStyleType=Me(e,_0,r.listStyleType),this.marginTop=Me(e,j3,r.marginTop),this.marginRight=Me(e,L3,r.marginRight),this.marginBottom=Me(e,M3,r.marginBottom),this.marginLeft=Me(e,O3,r.marginLeft),this.opacity=Me(e,o5,r.opacity);var A=Me(e,H3,r.overflow);this.overflowX=A[0],this.overflowY=A[A.length>1?1:0],this.overflowWrap=Me(e,V3,r.overflowWrap),this.paddingTop=Me(e,K3,r.paddingTop),this.paddingRight=Me(e,G3,r.paddingRight),this.paddingBottom=Me(e,z3,r.paddingBottom),this.paddingLeft=Me(e,$3,r.paddingLeft),this.paintOrder=Me(e,v5,r.paintOrder),this.position=Me(e,q3,r.position),this.textAlign=Me(e,W3,r.textAlign),this.textDecorationColor=Me(e,a5,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Me(e,l5,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Me(e,X3,r.textShadow),this.textTransform=Me(e,J3,r.textTransform),this.transform=Me(e,Y3,r.transform),this.transformOrigin=Me(e,n5,r.transformOrigin),this.visibility=Me(e,s5,r.visibility),this.webkitTextStrokeColor=Me(e,B5,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Me(e,b5,r.webkitTextStrokeWidth),this.wordBreak=Me(e,A5,r.wordBreak),this.zIndex=Me(e,i5,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return VA(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return pr(this.display,4)||pr(this.display,33554432)||pr(this.display,268435456)||pr(this.display,536870912)||pr(this.display,67108864)||pr(this.display,134217728)},t}(),I5=function(){function t(e,r){this.content=Me(e,g5,r.content),this.quotes=Me(e,x5,r.quotes)}return t}(),uC=function(){function t(e,r){this.counterIncrement=Me(e,p5,r.counterIncrement),this.counterReset=Me(e,m5,r.counterReset)}return t}(),Me=function(t,e,r){var n=new hF,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var A=new fF(n.read());switch(e.type){case 2:var i=A.parseComponentValue();return e.parse(t,Ft(i)?i.value:e.initialValue);case 0:return e.parse(t,A.parseComponentValue());case 1:return e.parse(t,A.parseComponentValues());case 4:return A.parseComponentValue();case 3:switch(e.format){case"angle":return hg.parse(t,A.parseComponentValue());case"color":return HA.parse(t,A.parseComponentValue());case"image":return Wx.parse(t,A.parseComponentValue());case"length":var l=A.parseComponentValue();return ri(l)?l:Dr;case"length-percentage":var a=A.parseComponentValue();return hr(a)?a:Dr;case"time":return UF.parse(t,A.parseComponentValue())}break}},_5="data-html2canvas-debug",E5=function(t){var e=t.getAttribute(_5);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},E0=function(t,e){var r=E5(t);return r===1||e===r},ps=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,E0(r,3))debugger;this.styles=new C5(e,window.getComputedStyle(r,null)),F0(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=ug(this.context,r),E0(r,4)&&(this.flags|=16)}return t}(),T5="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",dC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _d=0;_d<dC.length;_d++)Vl[dC.charCodeAt(_d)]=_d;var k5=function(t){var e=t.length*.75,r=t.length,n,s=0,A,i,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<r;n+=4)A=Vl[t.charCodeAt(n)],i=Vl[t.charCodeAt(n+1)],l=Vl[t.charCodeAt(n+2)],a=Vl[t.charCodeAt(n+3)],d[s++]=A<<2|i>>4,d[s++]=(i&15)<<4|l>>2,d[s++]=(l&3)<<6|a&63;return c},F5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},S5=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Oi=5,qx=11,Ip=2,U5=qx-Oi,QF=65536>>Oi,Q5=1<<Oi,_p=Q5-1,N5=1024>>Oi,R5=QF+N5,D5=R5,P5=32,j5=D5+P5,L5=65536>>qx,M5=1<<U5,O5=M5-1,hC=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},H5=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},V5=function(t,e){var r=k5(t),n=Array.isArray(r)?S5(r):new Uint32Array(r),s=Array.isArray(r)?F5(r):new Uint16Array(r),A=24,i=hC(s,A/2,n[4]/2),l=n[5]===2?hC(s,(A+n[4])/2):H5(n,Math.ceil((A+n[4])/4));return new K5(n[0],n[1],n[2],n[3],i,l)},K5=function(){function t(e,r,n,s,A,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=A,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Oi],r=(r<<Ip)+(e&_p),this.data[r];if(e<=65535)return r=this.index[QF+(e-55296>>Oi)],r=(r<<Ip)+(e&_p),this.data[r];if(e<this.highStart)return r=j5-L5+(e>>qx),r=this.index[r],r+=e>>Oi&O5,r=this.index[r],r=(r<<Ip)+(e&_p),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),fC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G5=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ed=0;Ed<fC.length;Ed++)G5[fC.charCodeAt(Ed)]=Ed;var z5=1,Ep=2,Tp=3,gC=4,pC=5,$5=7,mC=8,kp=9,Fp=10,wC=11,xC=12,yC=13,vC=14,Sp=15,W5=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var A=t.charCodeAt(r++);(A&64512)===56320?e.push(((s&1023)<<10)+(A&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},q5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,A="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(A+=String.fromCharCode.apply(String,n),n.length=0)}return A},X5=V5(T5),Fn="",Up="",J5=function(t){return X5.get(t)},Y5=function(t,e,r){var n=r-2,s=e[n],A=e[r-1],i=e[r];if(A===Ep&&i===Tp)return Fn;if(A===Ep||A===Tp||A===gC||i===Ep||i===Tp||i===gC)return Up;if(A===mC&&[mC,kp,wC,xC].indexOf(i)!==-1||(A===wC||A===kp)&&(i===kp||i===Fp)||(A===xC||A===Fp)&&i===Fp||i===yC||i===pC||i===$5||A===z5)return Fn;if(A===yC&&i===vC){for(;s===pC;)s=e[--n];if(s===vC)return Fn}if(A===Sp&&i===Sp){for(var l=0;s===Sp;)l++,s=e[--n];if(l%2===0)return Fn}return Up},Z5=function(t){var e=W5(t),r=e.length,n=0,s=0,A=e.map(J5);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Fn;n<r&&(i=Y5(e,A,++n))===Fn;);if(i!==Fn||n===r){var l=q5.apply(null,e.slice(s,n));return s=n,{value:l,done:!1}}return{done:!0,value:null}}}},eK=function(t){for(var e=Z5(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},tK=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),A=Math.round(s.height);if(t.body.removeChild(n),A===e)return!0}}return!1},rK=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=dg(n.data).map(function(a){return ar(a)}),A=0,i={},l=s.every(function(a,c){r.setStart(n,A),r.setEnd(n,A+a.length);var d=r.getBoundingClientRect();A+=a.length;var h=d.x>i.x||d.y>i.y;return i=d,c===0?!0:h});return t.body.removeChild(e),l},nK=function(){return typeof new Image().crossOrigin<"u"},sK=function(){return typeof new XMLHttpRequest().responseType=="string"},AK=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},BC=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},iK=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,A=e.toDataURL();s.src=A;var i=T0(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),bC(i).then(function(l){n.drawImage(l,0,0);var a=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var c=t.createElement("div");return c.style.backgroundImage="url("+A+")",c.style.height=r+"px",BC(a)?bC(T0(r,r,0,0,c)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),BC(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},T0=function(t,e,r,n,s){var A="http://www.w3.org/2000/svg",i=document.createElementNS(A,"svg"),l=document.createElementNS(A,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(l),l.appendChild(s),i},bC=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},Qr={get SUPPORT_RANGE_BOUNDS(){var t=tK(document);return Object.defineProperty(Qr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Qr.SUPPORT_RANGE_BOUNDS&&rK(document);return Object.defineProperty(Qr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=AK(document);return Object.defineProperty(Qr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?iK(document):Promise.resolve(!1);return Object.defineProperty(Qr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=nK();return Object.defineProperty(Qr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=sK();return Object.defineProperty(Qr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Qr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Qr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},dc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),oK=function(t,e,r,n){var s=cK(e,r),A=[],i=0;return s.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Qr.SUPPORT_RANGE_BOUNDS){var a=CC(n,i,l.length).getClientRects();if(a.length>1){var c=Xx(l),d=0;c.forEach(function(f){A.push(new dc(f,Hs.fromDOMRectList(t,CC(n,d+i,f.length).getClientRects()))),d+=f.length})}else A.push(new dc(l,Hs.fromDOMRectList(t,a)))}else{var h=n.splitText(l.length);A.push(new dc(l,aK(t,n))),n=h}else Qr.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));i+=l.length}),A},aK=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var A=ug(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),A}}return Hs.EMPTY},CC=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},Xx=function(t){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return eK(t)},lK=function(t,e){if(Qr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return dK(t,e)},cK=function(t,e){return e.letterSpacing!==0?Xx(t):lK(t,e)},uK=[32,160,4961,65792,65793,4153,4241],dK=function(t,e){for(var r=LH(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,A=function(){if(s.value){var i=s.value.slice(),l=dg(i),a="";l.forEach(function(c){uK.indexOf(c)===-1?a+=ar(c):(a.length&&n.push(a),n.push(ar(c)),a="")}),a.length&&n.push(a)}};!(s=r.next()).done;)A();return n},hK=function(){function t(e,r,n){this.text=fK(r.data,n.textTransform),this.textBounds=oK(e,this.text,n,r)}return t}(),fK=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(gK,pK);case 2:return t.toUpperCase();default:return t}},gK=/(^|\s|:|-|\(|\))([a-z])/g,pK=function(t,e,r){return t.length>0?e+r.toUpperCase():t},NF=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(ps),RF=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(ps),DF=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=new XMLSerializer,i=ug(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(A.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(ps),PF=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ps),k0=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(ps),mK=[{type:15,flags:0,unit:"px",number:3}],wK=[{type:16,flags:0,number:50}],xK=function(t){return t.width>t.height?new Hs(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Hs(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},yK=function(t){var e=t.type===vK?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},of="checkbox",af="radio",vK="password",IC=707406591,Jx=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=yK(n),(s.type===of||s.type===af)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=xK(s.bounds)),s.type){case of:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=mK;break;case af:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=wK;break}return s}return e}(ps),jF=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this,A=n.options[n.selectedIndex||0];return s.value=A&&A.text||"",s}return e}(ps),LF=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(ps),MF=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=HF(r,n.contentWindow.document.documentElement);var A=n.contentWindow.document.documentElement?cc(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Qs.TRANSPARENT,i=n.contentWindow.document.body?cc(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Qs.TRANSPARENT;s.backgroundColor=VA(A)?VA(i)?s.styles.backgroundColor:i:A}}catch{}return s}return e}(ps),BK=["OL","UL","MENU"],ih=function(t,e,r,n){for(var s=e.firstChild,A=void 0;s;s=A)if(A=s.nextSibling,VF(s)&&s.data.trim().length>0)r.textNodes.push(new hK(t,s,r.styles));else if($o(s))if($F(s)&&s.assignedNodes)s.assignedNodes().forEach(function(l){return ih(t,l,r,n)});else{var i=OF(t,s);i.styles.isVisible()&&(bK(s,i,n)?i.flags|=4:CK(i.styles)&&(i.flags|=2),BK.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?ih(t,s.shadowRoot,i,n):!lf(s)&&!KF(s)&&!cf(s)&&ih(t,s,i,n))}},OF=function(t,e){return S0(e)?new NF(t,e):GF(e)?new RF(t,e):KF(e)?new DF(t,e):IK(e)?new PF(t,e):_K(e)?new k0(t,e):EK(e)?new Jx(t,e):cf(e)?new jF(t,e):lf(e)?new LF(t,e):zF(e)?new MF(t,e):new ps(t,e)},HF=function(t,e){var r=OF(t,e);return r.flags|=4,ih(t,e,r,r),r},bK=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Yx(t)&&r.styles.isTransparent()},CK=function(t){return t.isPositioned()||t.isFloating()},VF=function(t){return t.nodeType===Node.TEXT_NODE},$o=function(t){return t.nodeType===Node.ELEMENT_NODE},F0=function(t){return $o(t)&&typeof t.style<"u"&&!oh(t)},oh=function(t){return typeof t.className=="object"},IK=function(t){return t.tagName==="LI"},_K=function(t){return t.tagName==="OL"},EK=function(t){return t.tagName==="INPUT"},TK=function(t){return t.tagName==="HTML"},KF=function(t){return t.tagName==="svg"},Yx=function(t){return t.tagName==="BODY"},GF=function(t){return t.tagName==="CANVAS"},_C=function(t){return t.tagName==="VIDEO"},S0=function(t){return t.tagName==="IMG"},zF=function(t){return t.tagName==="IFRAME"},EC=function(t){return t.tagName==="STYLE"},kK=function(t){return t.tagName==="SCRIPT"},lf=function(t){return t.tagName==="TEXTAREA"},cf=function(t){return t.tagName==="SELECT"},$F=function(t){return t.tagName==="SLOT"},TC=function(t){return t.tagName.indexOf("-")>0},FK=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,A=!0;n!==null&&n.forEach(function(l){var a=r.counters[l.counter];a&&l.increment!==0&&(A=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=l.increment)});var i=[];return A&&s.forEach(function(l){var a=r.counters[l.counter];i.push(l.counter),a||(a=r.counters[l.counter]=[]),a.push(l.reset)}),i},t}(),kC={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},FC={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},SK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},UK={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Co=function(t,e,r,n,s,A){return t<e||t>r?Xc(t,s,A.length>0):n.integers.reduce(function(i,l,a){for(;t>=l;)t-=l,i+=n.values[a];return i},"")+A},WF=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},or=function(t,e,r,n,s){var A=r-e+1;return(t<0?"-":"")+(WF(Math.abs(t),A,n,function(i){return ar(Math.floor(i%A)+e)})+s)},Bi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return WF(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},So=1,iA=2,oA=4,Kl=8,ys=function(t,e,r,n,s,A){if(t<-9999||t>9999)return Xc(t,4,s.length>0);var i=Math.abs(t),l=s;if(i===0)return e[0]+l;for(var a=0;i>0&&a<=4;a++){var c=i%10;c===0&&pr(A,So)&&l!==""?l=e[c]+l:c>1||c===1&&a===0||c===1&&a===1&&pr(A,iA)||c===1&&a===1&&pr(A,oA)&&t>100||c===1&&a>1&&pr(A,Kl)?l=e[c]+(a>0?r[a-1]:"")+l:c===1&&a>0&&(l=r[a-1]+l),i=Math.floor(i/10)}return(t<0?n:"")+l},SC="",UC="",QC="",Qp="",Xc=function(t,e,r){var n=r?". ":"",s=r?"":"",A=r?", ":"",i=r?" ":"";switch(e){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var l=or(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return Bi(t,"",s);case 6:return Co(t,1,3999,kC,3,n).toLowerCase();case 7:return Co(t,1,3999,kC,3,n);case 8:return or(t,945,969,!1,n);case 9:return or(t,97,122,!1,n);case 10:return or(t,65,90,!1,n);case 11:return or(t,1632,1641,!0,n);case 12:case 49:return Co(t,1,9999,FC,3,n);case 35:return Co(t,1,9999,FC,3,n).toLowerCase();case 13:return or(t,2534,2543,!0,n);case 14:case 30:return or(t,6112,6121,!0,n);case 15:return Bi(t,"",s);case 16:return Bi(t,"",s);case 17:case 48:return ys(t,"",SC,"",s,iA|oA|Kl);case 47:return ys(t,"",UC,"",s,So|iA|oA|Kl);case 42:return ys(t,"",SC,"",s,iA|oA|Kl);case 41:return ys(t,"",UC,"",s,So|iA|oA|Kl);case 26:return ys(t,"","",QC,s,0);case 25:return ys(t,"","",QC,s,So|iA|oA);case 31:return ys(t,"","",Qp,A,So|iA|oA);case 33:return ys(t,"","",Qp,A,0);case 32:return ys(t,"","",Qp,A,So|iA|oA);case 18:return or(t,2406,2415,!0,n);case 20:return Co(t,1,19999,UK,3,n);case 21:return or(t,2790,2799,!0,n);case 22:return or(t,2662,2671,!0,n);case 22:return Co(t,1,10999,SK,3,n);case 23:return Bi(t,"");case 24:return Bi(t,"");case 27:return or(t,3302,3311,!0,n);case 28:return Bi(t,"",s);case 29:return Bi(t,"",s);case 34:return or(t,3792,3801,!0,n);case 37:return or(t,6160,6169,!0,n);case 38:return or(t,4160,4169,!0,n);case 39:return or(t,2918,2927,!0,n);case 40:return or(t,1776,1785,!0,n);case 43:return or(t,3046,3055,!0,n);case 44:return or(t,3174,3183,!0,n);case 45:return or(t,3664,3673,!0,n);case 46:return or(t,3872,3881,!0,n);case 3:default:return or(t,48,57,!0,n)}},qF="data-html2canvas-ignore",NC=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new FK,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=QK(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var A=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,l=s.contentWindow,a=l.document,c=DK(s).then(function(){return en(n,void 0,void 0,function(){var d,h;return Gr(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(MK),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,RK(a)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(a,h)}).then(function(){return s})]:[2,s]}})})});return a.open(),a.write(jK(document.doctype)+"<html></html>"),LK(this.referenceElement.ownerDocument,A,i),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),c},t.prototype.createElementClone=function(e){if(E0(e,2))debugger;if(GF(e))return this.createCanvasClone(e);if(_C(e))return this.createVideoClone(e);if(EC(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return S0(r)&&(S0(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),TC(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return Np(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(A,i){return i&&typeof i.cssText=="string"?A+i.cssText:A},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),A.name!=="SecurityError")throw A}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var A=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&A)i.putImageData(A.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var a=l.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!$o(r)||!kK(r)&&!r.hasAttribute(qF)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!$o(r)||!EC(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,A=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;A;A=A.nextSibling)if($o(A)&&$F(A)&&typeof A.assignedNodes=="function"){var i=A.assignedNodes();i.length&&i.forEach(function(l){return s.appendChildNode(r,l,n)})}else this.appendChildNode(r,A,n)},t.prototype.cloneNode=function(e,r){if(VF(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&$o(e)&&(F0(e)||oh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var A=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&F0(s)&&(this.clonedReferenceElement=s),Yx(s)&&VK(s);var a=this.counters.parse(new uC(this.context,A)),c=this.resolvePseudoContent(e,s,i,hc.BEFORE);TC(e)&&(r=!0),_C(e)||this.cloneChildNodes(e,s,r),c&&s.insertBefore(c,s.firstChild);var d=this.resolvePseudoContent(e,s,l,hc.AFTER);return d&&s.appendChild(d),this.counters.pop(a),(A&&(this.options.copyStyles||oh(e))&&!zF(e)||r)&&Np(A,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(lf(e)||cf(e))&&(lf(s)||cf(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var A=this;if(n){var i=n.content,l=r.ownerDocument;if(!(!l||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new uC(this.context,n));var a=new I5(this.context,n),c=l.createElement("html2canvaspseudoelement");Np(n,c),a.content.forEach(function(h){if(h.type===0)c.appendChild(l.createTextNode(h.value));else if(h.type===22){var f=l.createElement("img");f.src=h.value,f.style.opacity="1",c.appendChild(f)}else if(h.type===18){if(h.name==="attr"){var p=h.values.filter(Ft);p.length&&c.appendChild(l.createTextNode(e.getAttribute(p[0].value)||""))}else if(h.name==="counter"){var v=h.values.filter(Sa),x=v[0],_=v[1];if(x&&Ft(x)){var b=A.counters.getCounterValue(x.value),w=_&&Ft(_)?_0.parse(A.context,_.value):3;c.appendChild(l.createTextNode(Xc(b,w,!1)))}}else if(h.name==="counters"){var I=h.values.filter(Sa),x=I[0],F=I[1],_=I[2];if(x&&Ft(x)){var U=A.counters.getCounterValues(x.value),R=_&&Ft(_)?_0.parse(A.context,_.value):3,y=F&&F.type===0?F.value:"",B=U.map(function(N){return Xc(N,R,!1)}).join(y);c.appendChild(l.createTextNode(B))}}}else if(h.type===20)switch(h.value){case"open-quote":c.appendChild(l.createTextNode(cC(a.quotes,A.quoteDepth++,!0)));break;case"close-quote":c.appendChild(l.createTextNode(cC(a.quotes,--A.quoteDepth,!1)));break;default:c.appendChild(l.createTextNode(h.value))}}),c.className=U0+" "+Q0;var d=s===hc.BEFORE?" "+U0:" "+Q0;return oh(r)?r.className.baseValue+=d:r.className+=d,c}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),hc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(hc||(hc={}));var QK=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(qF,"true"),t.body.appendChild(r),r},NK=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},RK=function(t){return Promise.all([].slice.call(t.images,0).map(NK))},DK=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var A=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(A),e(t))},50)}})},PK=["all","d","content"],Np=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);PK.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},jK=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},LK=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},MK=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},OK=":before",HK=":after",U0="___html2canvas___pseudoelement_before",Q0="___html2canvas___pseudoelement_after",RC=`{
    content: "" !important;
    display: none !important;
}`,VK=function(t){KK(t,"."+U0+OK+RC+`
         .`+Q0+HK+RC)},KK=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},XF=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),GK=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(Dp(e)||qK(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return en(this,void 0,void 0,function(){var r,n,s,A,i=this;return Gr(this,function(l){switch(l.label){case 0:return r=XF.isSameOrigin(e),n=!Rp(e)&&this._options.useCORS===!0&&Qr.SUPPORT_CORS_IMAGES&&!r,s=!Rp(e)&&!r&&!Dp(e)&&typeof this._options.proxy=="string"&&Qr.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!Rp(e)&&!Dp(e)&&!s&&!n?[2]:(A=e,s?[4,this.proxy(A)]:[3,2]);case 1:A=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(a,c){var d=new Image;d.onload=function(){return a(d)},d.onerror=c,(XK(A)||n)&&(d.crossOrigin="anonymous"),d.src=A,d.complete===!0&&setTimeout(function(){return a(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(A,i){var l=Qr.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(l==="text")A(a.response);else{var h=new FileReader;h.addEventListener("load",function(){return A(h.result)},!1),h.addEventListener("error",function(f){return i(f)},!1),h.readAsDataURL(a.response)}else i("Failed to proxy resource "+s+" with status code "+a.status)},a.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=l),r._options.imageTimeout){var d=r._options.imageTimeout;a.timeout=d,a.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}a.send()})},t}(),zK=/^data:image\/svg\+xml/i,$K=/^data:image\/.*;base64,/i,WK=/^data:image\/.*/i,qK=function(t){return Qr.SUPPORT_SVG_DRAWING||!JK(t)},Rp=function(t){return WK.test(t)},XK=function(t){return $K.test(t)},Dp=function(t){return t.substr(0,4)==="blob"},JK=function(t){return t.substr(-3).toLowerCase()==="svg"||zK.test(t)},je=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Io=function(t,e,r){return new je(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Td=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Io(this.start,this.startControl,e),s=Io(this.startControl,this.endControl,e),A=Io(this.endControl,this.end,e),i=Io(n,s,e),l=Io(s,A,e),a=Io(i,l,e);return r?new t(this.start,n,i,a):new t(a,l,A,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Nn=function(t){return t.type===1},YK=function(){function t(e){var r=e.styles,n=e.bounds,s=Hl(r.borderTopLeftRadius,n.width,n.height),A=s[0],i=s[1],l=Hl(r.borderTopRightRadius,n.width,n.height),a=l[0],c=l[1],d=Hl(r.borderBottomRightRadius,n.width,n.height),h=d[0],f=d[1],p=Hl(r.borderBottomLeftRadius,n.width,n.height),v=p[0],x=p[1],_=[];_.push((A+a)/n.width),_.push((v+h)/n.width),_.push((i+x)/n.height),_.push((c+f)/n.height);var b=Math.max.apply(Math,_);b>1&&(A/=b,i/=b,a/=b,c/=b,h/=b,f/=b,v/=b,x/=b);var w=n.width-a,I=n.height-f,F=n.width-h,U=n.height-x,R=r.borderTopWidth,y=r.borderRightWidth,B=r.borderBottomWidth,C=r.borderLeftWidth,S=Pt(r.paddingTop,e.bounds.width),N=Pt(r.paddingRight,e.bounds.width),P=Pt(r.paddingBottom,e.bounds.width),E=Pt(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=A>0||i>0?Gt(n.left+C/3,n.top+R/3,A-C/3,i-R/3,It.TOP_LEFT):new je(n.left+C/3,n.top+R/3),this.topRightBorderDoubleOuterBox=A>0||i>0?Gt(n.left+w,n.top+R/3,a-y/3,c-R/3,It.TOP_RIGHT):new je(n.left+n.width-y/3,n.top+R/3),this.bottomRightBorderDoubleOuterBox=h>0||f>0?Gt(n.left+F,n.top+I,h-y/3,f-B/3,It.BOTTOM_RIGHT):new je(n.left+n.width-y/3,n.top+n.height-B/3),this.bottomLeftBorderDoubleOuterBox=v>0||x>0?Gt(n.left+C/3,n.top+U,v-C/3,x-B/3,It.BOTTOM_LEFT):new je(n.left+C/3,n.top+n.height-B/3),this.topLeftBorderDoubleInnerBox=A>0||i>0?Gt(n.left+C*2/3,n.top+R*2/3,A-C*2/3,i-R*2/3,It.TOP_LEFT):new je(n.left+C*2/3,n.top+R*2/3),this.topRightBorderDoubleInnerBox=A>0||i>0?Gt(n.left+w,n.top+R*2/3,a-y*2/3,c-R*2/3,It.TOP_RIGHT):new je(n.left+n.width-y*2/3,n.top+R*2/3),this.bottomRightBorderDoubleInnerBox=h>0||f>0?Gt(n.left+F,n.top+I,h-y*2/3,f-B*2/3,It.BOTTOM_RIGHT):new je(n.left+n.width-y*2/3,n.top+n.height-B*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||x>0?Gt(n.left+C*2/3,n.top+U,v-C*2/3,x-B*2/3,It.BOTTOM_LEFT):new je(n.left+C*2/3,n.top+n.height-B*2/3),this.topLeftBorderStroke=A>0||i>0?Gt(n.left+C/2,n.top+R/2,A-C/2,i-R/2,It.TOP_LEFT):new je(n.left+C/2,n.top+R/2),this.topRightBorderStroke=A>0||i>0?Gt(n.left+w,n.top+R/2,a-y/2,c-R/2,It.TOP_RIGHT):new je(n.left+n.width-y/2,n.top+R/2),this.bottomRightBorderStroke=h>0||f>0?Gt(n.left+F,n.top+I,h-y/2,f-B/2,It.BOTTOM_RIGHT):new je(n.left+n.width-y/2,n.top+n.height-B/2),this.bottomLeftBorderStroke=v>0||x>0?Gt(n.left+C/2,n.top+U,v-C/2,x-B/2,It.BOTTOM_LEFT):new je(n.left+C/2,n.top+n.height-B/2),this.topLeftBorderBox=A>0||i>0?Gt(n.left,n.top,A,i,It.TOP_LEFT):new je(n.left,n.top),this.topRightBorderBox=a>0||c>0?Gt(n.left+w,n.top,a,c,It.TOP_RIGHT):new je(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||f>0?Gt(n.left+F,n.top+I,h,f,It.BOTTOM_RIGHT):new je(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||x>0?Gt(n.left,n.top+U,v,x,It.BOTTOM_LEFT):new je(n.left,n.top+n.height),this.topLeftPaddingBox=A>0||i>0?Gt(n.left+C,n.top+R,Math.max(0,A-C),Math.max(0,i-R),It.TOP_LEFT):new je(n.left+C,n.top+R),this.topRightPaddingBox=a>0||c>0?Gt(n.left+Math.min(w,n.width-y),n.top+R,w>n.width+y?0:Math.max(0,a-y),Math.max(0,c-R),It.TOP_RIGHT):new je(n.left+n.width-y,n.top+R),this.bottomRightPaddingBox=h>0||f>0?Gt(n.left+Math.min(F,n.width-C),n.top+Math.min(I,n.height-B),Math.max(0,h-y),Math.max(0,f-B),It.BOTTOM_RIGHT):new je(n.left+n.width-y,n.top+n.height-B),this.bottomLeftPaddingBox=v>0||x>0?Gt(n.left+C,n.top+Math.min(U,n.height-B),Math.max(0,v-C),Math.max(0,x-B),It.BOTTOM_LEFT):new je(n.left+C,n.top+n.height-B),this.topLeftContentBox=A>0||i>0?Gt(n.left+C+E,n.top+R+S,Math.max(0,A-(C+E)),Math.max(0,i-(R+S)),It.TOP_LEFT):new je(n.left+C+E,n.top+R+S),this.topRightContentBox=a>0||c>0?Gt(n.left+Math.min(w,n.width+C+E),n.top+R+S,w>n.width+C+E?0:a-C+E,c-(R+S),It.TOP_RIGHT):new je(n.left+n.width-(y+N),n.top+R+S),this.bottomRightContentBox=h>0||f>0?Gt(n.left+Math.min(F,n.width-(C+E)),n.top+Math.min(I,n.height+R+S),Math.max(0,h-(y+N)),f-(B+P),It.BOTTOM_RIGHT):new je(n.left+n.width-(y+N),n.top+n.height-(B+P)),this.bottomLeftContentBox=v>0||x>0?Gt(n.left+C+E,n.top+U,Math.max(0,v-(C+E)),x-(B+P),It.BOTTOM_LEFT):new je(n.left+C+E,n.top+n.height-(B+P))}return t}(),It;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(It||(It={}));var Gt=function(t,e,r,n,s){var A=4*((Math.sqrt(2)-1)/3),i=r*A,l=n*A,a=t+r,c=e+n;switch(s){case It.TOP_LEFT:return new Td(new je(t,c),new je(t,c-l),new je(a-i,e),new je(a,e));case It.TOP_RIGHT:return new Td(new je(t,e),new je(t+i,e),new je(a,c-l),new je(a,c));case It.BOTTOM_RIGHT:return new Td(new je(a,e),new je(a,e+l),new je(t+i,c),new je(t,c));case It.BOTTOM_LEFT:default:return new Td(new je(a,c),new je(a-i,c),new je(t,e+l),new je(t,e))}},uf=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},ZK=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},df=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},e6=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),kd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),t6=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),r6=function(t){return t.type===0},JF=function(t){return t.type===1},n6=function(t){return t.type===2},DC=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},s6=function(t,e,r,n,s){return t.map(function(A,i){switch(i){case 0:return A.add(e,r);case 1:return A.add(e+n,r);case 2:return A.add(e+n,r+s);case 3:return A.add(e,r+s)}return A})},YF=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),ZF=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new YK(this.container),this.container.styles.opacity<1&&this.effects.push(new t6(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,A=this.container.styles.transform;this.effects.push(new e6(n,s,A))}if(this.container.styles.overflowX!==0){var i=uf(this.curves),l=df(this.curves);DC(i,l)?this.effects.push(new kd(i,6)):(this.effects.push(new kd(i,2)),this.effects.push(new kd(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var A=n.effects.filter(function(a){return!JF(a)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,A),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=uf(n.curves),l=df(n.curves);DC(i,l)||s.unshift(new kd(l,6))}}else s.unshift.apply(s,A);n=n.parent}return s.filter(function(a){return pr(a.target,e)})},t}(),N0=function(t,e,r,n){t.container.elements.forEach(function(s){var A=pr(s.flags,4),i=pr(s.flags,2),l=new ZF(s,t);pr(s.styles.display,2048)&&n.push(l);var a=pr(s.flags,8)?[]:n;if(A||i){var c=A||s.styles.isPositioned()?r:e,d=new YF(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var f=0;c.negativeZIndex.some(function(v,x){return h>v.element.container.styles.zIndex.order?(f=x,!1):f>0}),c.negativeZIndex.splice(f,0,d)}else if(h>0){var p=0;c.positiveZIndex.some(function(v,x){return h>=v.element.container.styles.zIndex.order?(p=x+1,!1):p>0}),c.positiveZIndex.splice(p,0,d)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?c.nonPositionedFloats.push(d):c.nonPositionedInlineLevel.push(d);N0(l,d,A?d:r,a)}else s.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),N0(l,e,r,a);pr(s.flags,8)&&e2(s,a)})},e2=function(t,e){for(var r=t instanceof k0?t.start:1,n=t instanceof k0?t.reversed:!1,s=0;s<e.length;s++){var A=e[s];A.container instanceof PF&&typeof A.container.value=="number"&&A.container.value!==0&&(r=A.container.value),A.listValue=Xc(r,A.container.styles.listStyleType,!0),r+=n?-1:1}},A6=function(t){var e=new ZF(t,null),r=new YF(e),n=[];return N0(e,r,r,n),e2(e.container,n),r},PC=function(t,e){switch(e){case 0:return Pn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Pn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Pn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Pn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},i6=function(t,e){switch(e){case 0:return Pn(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Pn(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Pn(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Pn(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},o6=function(t,e){switch(e){case 0:return Pn(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Pn(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Pn(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Pn(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},a6=function(t,e){switch(e){case 0:return Fd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Fd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Fd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Fd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Fd=function(t,e){var r=[];return Nn(t)?r.push(t.subdivide(.5,!1)):r.push(t),Nn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Pn=function(t,e,r,n){var s=[];return Nn(t)?s.push(t.subdivide(.5,!1)):s.push(t),Nn(r)?s.push(r.subdivide(.5,!0)):s.push(r),Nn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Nn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},t2=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},hf=function(t){var e=t.styles,r=t.bounds,n=Pt(e.paddingLeft,r.width),s=Pt(e.paddingRight,r.width),A=Pt(e.paddingTop,r.width),i=Pt(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,A+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+A+i))},l6=function(t,e){return t===0?e.bounds:t===2?hf(e):t2(e)},c6=function(t,e){return t===0?e.bounds:t===2?hf(e):t2(e)},Pp=function(t,e,r){var n=l6(Uo(t.styles.backgroundOrigin,e),t),s=c6(Uo(t.styles.backgroundClip,e),t),A=u6(Uo(t.styles.backgroundSize,e),r,n),i=A[0],l=A[1],a=Hl(Uo(t.styles.backgroundPosition,e),n.width-i,n.height-l),c=d6(Uo(t.styles.backgroundRepeat,e),a,A,n,s),d=Math.round(n.left+a[0]),h=Math.round(n.top+a[1]);return[c,d,h,i,l]},_o=function(t){return Ft(t)&&t.value===Aa.AUTO},Sd=function(t){return typeof t=="number"},u6=function(t,e,r){var n=e[0],s=e[1],A=e[2],i=t[0],l=t[1];if(!i)return[0,0];if(hr(i)&&l&&hr(l))return[Pt(i,r.width),Pt(l,r.height)];var a=Sd(A);if(Ft(i)&&(i.value===Aa.CONTAIN||i.value===Aa.COVER)){if(Sd(A)){var c=r.width/r.height;return c<A!=(i.value===Aa.COVER)?[r.width,r.width/A]:[r.height*A,r.height]}return[r.width,r.height]}var d=Sd(n),h=Sd(s),f=d||h;if(_o(i)&&(!l||_o(l))){if(d&&h)return[n,s];if(!a&&!f)return[r.width,r.height];if(f&&a){var p=d?n:s*A,v=h?s:n/A;return[p,v]}var x=d?n:r.width,_=h?s:r.height;return[x,_]}if(a){var b=0,w=0;return hr(i)?b=Pt(i,r.width):hr(l)&&(w=Pt(l,r.height)),_o(i)?b=w*A:(!l||_o(l))&&(w=b/A),[b,w]}var I=null,F=null;if(hr(i)?I=Pt(i,r.width):l&&hr(l)&&(F=Pt(l,r.height)),I!==null&&(!l||_o(l))&&(F=d&&h?I/n*s:r.height),F!==null&&_o(i)&&(I=d&&h?F/s*n:r.width),I!==null&&F!==null)return[I,F];throw new Error("Unable to calculate background-size for element")},Uo=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},d6=function(t,e,r,n,s){var A=e[0],i=e[1],l=r[0],a=r[1];switch(t){case 2:return[new je(Math.round(n.left),Math.round(n.top+i)),new je(Math.round(n.left+n.width),Math.round(n.top+i)),new je(Math.round(n.left+n.width),Math.round(a+n.top+i)),new je(Math.round(n.left),Math.round(a+n.top+i))];case 3:return[new je(Math.round(n.left+A),Math.round(n.top)),new je(Math.round(n.left+A+l),Math.round(n.top)),new je(Math.round(n.left+A+l),Math.round(n.height+n.top)),new je(Math.round(n.left+A),Math.round(n.height+n.top))];case 1:return[new je(Math.round(n.left+A),Math.round(n.top+i)),new je(Math.round(n.left+A+l),Math.round(n.top+i)),new je(Math.round(n.left+A+l),Math.round(n.top+i+a)),new je(Math.round(n.left+A),Math.round(n.top+i+a))];default:return[new je(Math.round(s.left),Math.round(s.top)),new je(Math.round(s.left+s.width),Math.round(s.top)),new je(Math.round(s.left+s.width),Math.round(s.height+s.top)),new je(Math.round(s.left),Math.round(s.height+s.top))]}},h6="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",jC="Hidden Text",f6=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),A=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=h6,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",A.style.fontFamily=e,A.style.fontSize=r,A.style.margin="0",A.style.padding="0",A.appendChild(this._document.createTextNode(jC)),n.appendChild(A),n.appendChild(s);var l=s.offsetTop-A.offsetTop+2;n.removeChild(A),n.appendChild(this._document.createTextNode(jC)),n.style.lineHeight="normal",s.style.verticalAlign="super";var a=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:l,middle:a}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),r2=function(){function t(e,r){this.context=e,this.options=r}return t}(),g6=1e4,p6=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new f6(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),n6(r)&&(this.ctx.globalAlpha=r.opacity),r6(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),JF(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return en(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return en(this,void 0,void 0,function(){return Gr(this,function(n){switch(n.label){case 0:if(pr(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var A=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=Xx(r.text);i.reduce(function(l,a){return A.ctx.fillText(a,l,r.bounds.top+s),l+A.ctx.measureText(a).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=v6(r.fontFamily).join(", "),A=Cu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,A,s].join(" "),s,A]},e.prototype.renderTextNode=function(r,n){return en(this,void 0,void 0,function(){var s,A,i,l,a,c,d,h,f=this;return Gr(this,function(p){return s=this.createFontStyle(n),A=s[0],i=s[1],l=s[2],this.ctx.font=A,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(i,l),c=a.baseline,d=a.middle,h=n.paintOrder,r.textBounds.forEach(function(v){h.forEach(function(x){switch(x){case 0:f.ctx.fillStyle=Br(n.color),f.renderTextWithLetterSpacing(v,n.letterSpacing,c);var _=n.textShadow;_.length&&v.text.trim().length&&(_.slice(0).reverse().forEach(function(b){f.ctx.shadowColor=Br(b.color),f.ctx.shadowOffsetX=b.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=b.offsetY.number*f.options.scale,f.ctx.shadowBlur=b.blur.number,f.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),n.textDecorationLine.length&&(f.ctx.fillStyle=Br(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(b){switch(b){case 1:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:f.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:f.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+d),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(f.ctx.strokeStyle=Br(n.webkitTextStrokeColor),f.ctx.lineWidth=n.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var A=hf(r),i=df(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,A.left,A.top,A.width,A.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return en(this,void 0,void 0,function(){var n,s,A,i,l,a,w,w,c,d,h,f,F,p,v,U,x,_,b,w,I,F,U;return Gr(this,function(R){switch(R.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,A=n.styles,i=0,l=n.textNodes,R.label=1;case 1:return i<l.length?(a=l[i],[4,this.renderTextNode(a,A)]):[3,4];case 2:R.sent(),R.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof NF))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=R.sent(),this.renderReplacedElement(n,s,w),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof RF&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof DF))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=R.sent(),this.renderReplacedElement(n,s,w),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof MF&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:d=R.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),R.label=14;case 14:if(n instanceof Jx&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===of?n.checked&&(this.ctx.save(),this.path([new je(n.bounds.left+h*.39363,n.bounds.top+h*.79),new je(n.bounds.left+h*.16,n.bounds.top+h*.5549),new je(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new je(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new je(n.bounds.left+h*.72983,n.bounds.top+h*.23),new je(n.bounds.left+h*.84,n.bounds.top+h*.34085),new je(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=Br(IC),this.ctx.fill(),this.ctx.restore()):n.type===af&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Br(IC),this.ctx.fill(),this.ctx.restore())),m6(n)&&n.value.length){switch(f=this.createFontStyle(A),F=f[0],p=f[1],v=this.fontMetrics.getMetrics(F,p).baseline,this.ctx.font=F,this.ctx.fillStyle=Br(A.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=x6(n.styles.textAlign),U=hf(n),x=0,n.styles.textAlign){case 1:x+=U.width/2;break;case 2:x+=U.width;break}_=U.add(x,0,0,-U.height/2+1),this.ctx.save(),this.path([new je(U.left,U.top),new je(U.left+U.width,U.top),new je(U.left+U.width,U.top+U.height),new je(U.left,U.top+U.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new dc(n.value,_),A.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pr(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(b=n.styles.listStyleImage,b.type!==0)return[3,18];w=void 0,I=b.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(I)];case 16:return w=R.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+I),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(F=this.createFontStyle(A)[0],this.ctx.font=F,this.ctx.fillStyle=Br(A.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",U=new Hs(n.bounds.left,n.bounds.top+Pt(n.styles.paddingTop,n.bounds.width),n.bounds.width,aC(A.lineHeight,A.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new dc(r.listValue,U),A.letterSpacing,aC(A.lineHeight,A.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return en(this,void 0,void 0,function(){var n,s,b,A,i,b,l,a,b,c,d,b,h,f,b,p,v,b,x,_,b;return Gr(this,function(w){switch(w.label){case 0:if(pr(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,s=r.negativeZIndex,w.label=2;case 2:return n<s.length?(b=s[n],[4,this.renderStack(b)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),A=0,i=r.nonInlineLevel,w.label=7;case 7:return A<i.length?(b=i[A],[4,this.renderNode(b)]):[3,10];case 8:w.sent(),w.label=9;case 9:return A++,[3,7];case 10:l=0,a=r.nonPositionedFloats,w.label=11;case 11:return l<a.length?(b=a[l],[4,this.renderStack(b)]):[3,14];case 12:w.sent(),w.label=13;case 13:return l++,[3,11];case 14:c=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return c<d.length?(b=d[c],[4,this.renderStack(b)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:h=0,f=r.inlineLevel,w.label=19;case 19:return h<f.length?(b=f[h],[4,this.renderNode(b)]):[3,22];case 20:w.sent(),w.label=21;case 21:return h++,[3,19];case 22:p=0,v=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return p<v.length?(b=v[p],[4,this.renderStack(b)]):[3,26];case 24:w.sent(),w.label=25;case 25:return p++,[3,23];case 26:x=0,_=r.positiveZIndex,w.label=27;case 27:return x<_.length?(b=_[x],[4,this.renderStack(b)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,A){var i=Nn(s)?s.start:s;A===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Nn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,A){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,A),this.ctx.fill(),this.ctx.translate(-s,-A)},e.prototype.resizeImage=function(r,n,s){var A;if(r.width===n&&r.height===s)return r;var i=(A=this.canvas.ownerDocument)!==null&&A!==void 0?A:document,l=i.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,s);var a=l.getContext("2d");return a.drawImage(r,0,0,r.width,r.height,0,0,n,s),l},e.prototype.renderBackgroundImage=function(r){return en(this,void 0,void 0,function(){var n,s,A,i,l,a;return Gr(this,function(c){switch(c.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,f,p,S,st,Le,E,Ke,B,v,S,st,Le,E,Ke,x,_,b,w,I,F,U,R,y,B,C,S,N,P,E,Ke,We,st,Le,ce,Te,Pe,Ze,Ge,$,he,W;return Gr(this,function(pe){switch(pe.label){case 0:if(d.type!==0)return[3,5];h=void 0,f=d.url,pe.label=1;case 1:return pe.trys.push([1,3,,4]),[4,A.context.cache.match(f)];case 2:return h=pe.sent(),[3,4];case 3:return pe.sent(),A.context.logger.error("Error loading background-image "+f),[3,4];case 4:return h&&(p=Pp(r,n,[h.width,h.height,h.width/h.height]),S=p[0],st=p[1],Le=p[2],E=p[3],Ke=p[4],B=A.ctx.createPattern(A.resizeImage(h,E,Ke),"repeat"),A.renderRepeat(S,B,st,Le)),[3,6];case 5:r3(d)?(v=Pp(r,n,[null,null,null]),S=v[0],st=v[1],Le=v[2],E=v[3],Ke=v[4],x=JV(d.angle,E,Ke),_=x[0],b=x[1],w=x[2],I=x[3],F=x[4],U=document.createElement("canvas"),U.width=E,U.height=Ke,R=U.getContext("2d"),y=R.createLinearGradient(b,I,w,F),iC(d.stops,_).forEach(function(Ie){return y.addColorStop(Ie.stop,Br(Ie.color))}),R.fillStyle=y,R.fillRect(0,0,E,Ke),E>0&&Ke>0&&(B=A.ctx.createPattern(U,"repeat"),A.renderRepeat(S,B,st,Le))):n3(d)&&(C=Pp(r,n,[null,null,null]),S=C[0],N=C[1],P=C[2],E=C[3],Ke=C[4],We=d.position.length===0?[$x]:d.position,st=Pt(We[0],E),Le=Pt(We[We.length-1],Ke),ce=YV(d,st,Le,E,Ke),Te=ce[0],Pe=ce[1],Te>0&&Pe>0&&(Ze=A.ctx.createRadialGradient(N+st,P+Le,0,N+st,P+Le,Te),iC(d.stops,Te*2).forEach(function(Ie){return Ze.addColorStop(Ie.stop,Br(Ie.color))}),A.path(S),A.ctx.fillStyle=Ze,Te!==Pe?(Ge=r.bounds.left+.5*r.bounds.width,$=r.bounds.top+.5*r.bounds.height,he=Pe/Te,W=1/he,A.ctx.save(),A.ctx.translate(Ge,$),A.ctx.transform(1,0,0,he,0,0),A.ctx.translate(-Ge,-$),A.ctx.fillRect(N,W*(P-$)+$,E,Ke*W),A.ctx.restore()):A.ctx.fill())),pe.label=6;case 6:return n--,[2]}})},A=this,i=0,l=r.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<l.length?(a=l[i],[5,s(a)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return en(this,void 0,void 0,function(){return Gr(this,function(A){return this.path(PC(s,n)),this.ctx.fillStyle=Br(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,A){return en(this,void 0,void 0,function(){var i,l;return Gr(this,function(a){switch(a.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,A)]:[3,2];case 1:return a.sent(),[2];case 2:return i=i6(A,s),this.path(i),this.ctx.fillStyle=Br(r),this.ctx.fill(),l=o6(A,s),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return en(this,void 0,void 0,function(){var n,s,A,i,l,a,c,d,h=this;return Gr(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!VA(n.backgroundColor)||n.backgroundImage.length,A=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=w6(Uo(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),VA(n.backgroundColor)||(this.ctx.fillStyle=Br(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){h.ctx.save();var v=uf(r.curves),x=p.inset?0:g6,_=s6(v,-x+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(h.path(v),h.ctx.clip(),h.mask(_)):(h.mask(v),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=p.offsetX.number+x,h.ctx.shadowOffsetY=p.offsetY.number,h.ctx.shadowColor=Br(p.color),h.ctx.shadowBlur=p.blur.number,h.ctx.fillStyle=p.inset?Br(p.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),f.label=2;case 2:l=0,a=0,c=A,f.label=3;case 3:return a<c.length?(d=c[a],d.style!==0&&!VA(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,l,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,l,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,l,r.curves)];case 10:f.sent(),f.label=11;case 11:l++,f.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,A,i){return en(this,void 0,void 0,function(){var l,a,c,d,h,f,p,v,x,_,b,w,I,F,U,R,U,R;return Gr(this,function(y){return this.ctx.save(),l=a6(A,s),a=PC(A,s),i===2&&(this.path(a),this.ctx.clip()),Nn(a[0])?(c=a[0].start.x,d=a[0].start.y):(c=a[0].x,d=a[0].y),Nn(a[1])?(h=a[1].end.x,f=a[1].end.y):(h=a[1].x,f=a[1].y),s===0||s===2?p=Math.abs(c-h):p=Math.abs(d-f),this.ctx.beginPath(),i===3?this.formatPath(l):this.formatPath(a.slice(0,2)),v=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(v=n,x=n),_=!0,p<=v*2?_=!1:p<=v*2+x?(b=p/(2*v+x),v*=b,x*=b):(w=Math.floor((p+x)/(v+x)),I=(p-w*v)/(w-1),F=(p-(w+1)*v)/w,x=F<=0||Math.abs(x-I)<Math.abs(x-F)?I:F),_&&(i===3?this.ctx.setLineDash([0,v+x]):this.ctx.setLineDash([v,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Br(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Nn(a[0])&&(U=a[3],R=a[0],this.ctx.beginPath(),this.formatPath([new je(U.end.x,U.end.y),new je(R.start.x,R.start.y)]),this.ctx.stroke()),Nn(a[1])&&(U=a[1],R=a[2],this.ctx.beginPath(),this.formatPath([new je(U.end.x,U.end.y),new je(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return en(this,void 0,void 0,function(){var n;return Gr(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Br(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=A6(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(r2),m6=function(t){return t instanceof LF||t instanceof jF?!0:t instanceof Jx&&t.type!==af&&t.type!==of},w6=function(t,e){switch(t){case 0:return uf(e);case 2:return ZK(e);case 1:default:return df(e)}},x6=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},y6=["-apple-system","system-ui"],v6=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return y6.indexOf(e)===-1}):t},B6=function(t){Zn(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return en(this,void 0,void 0,function(){var n,s;return Gr(this,function(A){switch(A.label){case 0:return n=T0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,b6(n)];case 1:return s=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Br(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(r2),b6=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},C6=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ld([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ld([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ld([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ld([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),I6=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new C6({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new GK(this,e)}return t.instanceCount=1,t}(),ff=function(t,e){return e===void 0&&(e={}),_6(t,e)};typeof window<"u"&&XF.setContext(window);var _6=function(t,e){return en(void 0,void 0,void 0,function(){var r,n,s,A,i,l,a,c,d,h,f,p,v,x,_,b,w,I,F,U,y,R,y,B,C,S,N,P,E,Ke,We,st,Le,ce,Te,Pe,Ze,Ge,$,he;return Gr(this,function(W){switch(W.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(B=e.allowTaint)!==null&&B!==void 0?B:!1,imageTimeout:(C=e.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:e.proxy,useCORS:(S=e.useCORS)!==null&&S!==void 0?S:!1},A=h0({logging:(N=e.logging)!==null&&N!==void 0?N:!0,cache:e.cache},s),i={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(E=e.windowHeight)!==null&&E!==void 0?E:n.innerHeight,scrollX:(Ke=e.scrollX)!==null&&Ke!==void 0?Ke:n.pageXOffset,scrollY:(We=e.scrollY)!==null&&We!==void 0?We:n.pageYOffset},l=new Hs(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),a=new I6(A,l),c=(st=e.foreignObjectRendering)!==null&&st!==void 0?st:!1,d={allowTaint:(Le=e.allowTaint)!==null&&Le!==void 0?Le:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},a.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),h=new NC(a,t,d),f=h.clonedReferenceElement,f?[4,h.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=W.sent(),v=Yx(f)||TK(f)?sH(f.ownerDocument):ug(a,f),x=v.width,_=v.height,b=v.left,w=v.top,I=E6(a,f,e.backgroundColor),F={canvas:e.canvas,backgroundColor:I,scale:(Te=(ce=e.scale)!==null&&ce!==void 0?ce:n.devicePixelRatio)!==null&&Te!==void 0?Te:1,x:((Pe=e.x)!==null&&Pe!==void 0?Pe:0)+b,y:((Ze=e.y)!==null&&Ze!==void 0?Ze:0)+w,width:(Ge=e.width)!==null&&Ge!==void 0?Ge:Math.ceil(x),height:($=e.height)!==null&&$!==void 0?$:Math.ceil(_)},c?(a.logger.debug("Document cloned, using foreign object rendering"),y=new B6(a,F),[4,y.render(f)]):[3,3];case 2:return U=W.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+b+","+w+" with size "+x+"x"+_+" using computed rendering"),a.logger.debug("Starting DOM parsing"),R=HF(a,f),I===R.styles.backgroundColor&&(R.styles.backgroundColor=Qs.TRANSPARENT),a.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),y=new p6(a,F),[4,y.render(R)];case 4:U=W.sent(),W.label=5;case 5:return(!((he=e.removeContainer)!==null&&he!==void 0)||he)&&(NC.destroy(p)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,U]}})})},E6=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?cc(t,getComputedStyle(n.documentElement).backgroundColor):Qs.TRANSPARENT,A=n.body?cc(t,getComputedStyle(n.body).backgroundColor):Qs.TRANSPARENT,i=typeof r=="string"?cc(t,r):r===null?Qs.TRANSPARENT:4294967295;return e===n.documentElement?VA(s)?VA(A)?i:A:s:i};const T6=()=>{var te,ue,fe,de;const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Yn(),[i,l]=T.useState("teachers"),[a,c]=T.useState(!1),[d,h]=T.useState(null),[f,p]=T.useState({}),[v,x]=T.useState({}),[_,b]=T.useState({}),[w,I]=T.useState({}),[F,U]=T.useState("preset_normal"),[R,y]=T.useState([]),[B,C]=T.useState(!1),[S,N]=T.useState(""),P=T.useRef(null),[E,Ke]=T.useState(null);T.useEffect(()=>{if(s.bellPresets&&s.bellPresets.length>0){const j=s.bellPresets.find(Y=>Y.id===F);if(j){y(j.bells);return}}y(Rh)},[F,s.bellPresets]);const We=j=>{h(j||null),i==="teachers"?p(j?e.find(Y=>Y.id===j)??{}:{subjectIds:[],unavailableDates:[],shifts:[ie.First,ie.Second],telegramChatId:""}):i==="subjects"?x(j?t.find(Y=>Y.id===j)??{}:{color:"#e0e7ff",difficulty:5,requiredRoomType:""}):i==="classes"?b(j?r.find(Y=>Y.id===j)??{}:{shift:ie.First,studentsCount:25}):i==="rooms"&&I(j?n.find(Y=>Y.id===j)??{}:{capacity:30,type:""}),c(!0)},st=async()=>{const j={teachers:{list:e,form:f,key:"teachers"},subjects:{list:t,form:v,key:"subjects"},classes:{list:r,form:_,key:"classes"},rooms:{list:n,form:w,key:"rooms"}};if(i==="bells"||!(i in j))return;const Y=j[i],{list:ee,form:xe,key:Je}=Y;if(!xe.name)return;let K=[...ee];if(d)K=K.map(G=>G.id===d?{...G,...xe}:G);else{const G=ee.reduce((tt,ge)=>Math.max(tt,ge.order||0),0),re={...xe,id:fn(),order:G+1};K.push(re)}await A({[Je]:K}),c(!1)},Le=async j=>{if(window.confirm(" ?"))switch(i){case"teachers":await A({teachers:e.filter(Y=>Y.id!==j)});break;case"subjects":await A({subjects:t.filter(Y=>Y.id!==j)});break;case"classes":await A({classes:r.filter(Y=>Y.id!==j)});break;case"rooms":await A({rooms:n.filter(Y=>Y.id!==j)});break}},ce=(j,Y)=>{Ke(Y),j.dataTransfer.effectAllowed="move"},Te=j=>{j.preventDefault()},Pe=async(j,Y)=>{if(E===null||E===Y)return;const ee=xe=>{const Je=[...xe],[K]=Je.splice(E,1);return Je.splice(Y,0,K),Je.map((G,re)=>({...G,order:re}))};switch(i){case"teachers":{await A({teachers:ee(e)});break}case"subjects":{await A({subjects:ee(t)});break}case"classes":{await A({classes:ee(r)});break}case"rooms":{await A({rooms:ee(n)});break}}Ke(null)},Ze=(j,Y,ee,xe)=>{const Je=[...R],K=Je.findIndex(G=>G.shift===j&&G.period===Y&&G.day==="default");K>=0?Je[K]={...Je[K],[ee]:xe}:Je.push({shift:j,period:Y,[ee]:xe,start:"00:00",end:"00:00",day:"default"}),y(Je)},Ge=(j,Y)=>{const ee=[...R],xe=ee.findIndex(Je=>Je.shift===j&&Je.period===Y&&Je.day==="default");xe>=0?ee[xe]={...ee[xe],cancelled:!ee[xe].cancelled}:ee.push({shift:j,period:Y,start:"00:00",end:"00:00",day:"default",cancelled:!0}),y(ee)},$=async()=>{let j=[...s.bellPresets||[]];const Y=j.findIndex(ee=>ee.id===F);Y>=0?j[Y]={...j[Y],bells:R}:j.push({id:F,name:S||" ",bells:R}),await A({settings:{...s,bellPresets:j}}),alert(" !")},he=()=>{N(""),C(!0)},W=async()=>{if(!S)return;const j=`preset_${fn()}`,Y=[...s.bellPresets||[]];Y.push({id:j,name:S,bells:JSON.parse(JSON.stringify(R))}),await A({settings:{...s,bellPresets:Y}}),U(j),C(!1)},pe=async()=>{if(F==="preset_normal"){alert("   .");return}if(!window.confirm("   ?"))return;const j=(s.bellPresets||[]).filter(Y=>Y.id!==F);await A({settings:{...s,bellPresets:j}}),U("preset_normal")},Ie=async()=>{var j,Y;window.confirm(`   "${(Y=(j=s.bellPresets)==null?void 0:j.find(ee=>ee.id===F))==null?void 0:Y.name}"   ?`)&&(await A({bellSchedule:R}),alert("  !"))},At=async()=>{var ee,xe;if(!P.current)return;const j=await ff(P.current,{scale:2,backgroundColor:"#ffffff"}),Y=document.createElement("a");Y.href=j.toDataURL("image/png"),Y.download=`_${(xe=(ee=s.bellPresets)==null?void 0:ee.find(Je=>Je.id===F))==null?void 0:xe.name}.png`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},ut=j=>{const Y=f.shifts||[];Y.includes(j)?p({...f,shifts:Y.filter(ee=>ee!==j)}):p({...f,shifts:[...Y,j]})};return o.jsxs("div",{className:"max-w-7xl mx-auto w-full h-full flex flex-col",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8 shrink-0",children:[o.jsx("div",{className:"flex p-1 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-x-auto",children:[{id:"teachers",icon:"Users",label:""},{id:"subjects",icon:"BookOpen",label:""},{id:"classes",icon:"GraduationCap",label:""},{id:"rooms",icon:"DoorOpen",label:""},{id:"bells",icon:"Bell",label:""}].map(j=>o.jsxs("button",{onClick:()=>l(j.id),className:`px-5 py-2.5 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${i===j.id?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[o.jsx(O,{name:j.icon,size:18})," ",j.label]},j.id))}),i!=="bells"&&o.jsxs("button",{onClick:()=>We(),className:"flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none font-semibold",children:[o.jsx(O,{name:"Plus",size:20})," "]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto pb-20 custom-scrollbar pr-2",children:[i==="teachers"&&o.jsx(ad,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((j,Y)=>o.jsxs("div",{draggable:!0,onDragStart:ee=>ce(ee,Y),onDragOver:Te,onDrop:ee=>Pe(ee,Y),className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-md transition-all group flex flex-col cursor-grab active:cursor-grabbing",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(O,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 text-lg",children:j.name})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(j.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-indigo-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:o.jsx(O,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>Le(j.id),className:"p-2 text-slate-600 dark:text-slate-300 hover:text-red-600 bg-slate-50 dark:bg-slate-700 rounded-full",children:o.jsx(O,{name:"Trash2",size:16})})]})]}),o.jsx("div",{className:"text-xs text-slate-500 mb-2",children:j.birthDate?`: ${new Date(j.birthDate).toLocaleDateString("ru-RU")}`:""}),o.jsxs("div",{className:"flex gap-2 mb-3",children:[j.shifts.includes(ie.First)&&o.jsx("span",{className:"text-[10px] bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded font-bold",children:"1 "}),j.shifts.includes(ie.Second)&&o.jsx("span",{className:"text-[10px] bg-purple-50 text-purple-700 px-2 py-0.5 rounded font-bold",children:"2 "})]}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-auto pl-7",children:j.subjectIds.map(ee=>{const xe=t.find(Je=>Je.id===ee);return xe?o.jsx("span",{className:"text-xs px-2 py-1 rounded-md font-medium",style:{backgroundColor:xe.color,color:"#334155"},children:xe.name},ee):null})})]},j.id))}),i==="subjects"&&o.jsx(ad,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((j,Y)=>o.jsxs("div",{draggable:!0,onDragStart:ee=>ce(ee,Y),onDragOver:Te,onDrop:ee=>Pe(ee,Y),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing border-l-4",style:{borderLeftColor:j.color},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(O,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:j.name}),o.jsxs("div",{className:"text-xs text-slate-400",children:[" ",j.difficulty,"  ",j.requiredRoomType]})]})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(j.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(O,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>Le(j.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(O,{name:"Trash2",size:16})})]})]},j.id))}),i==="classes"&&o.jsx(ad,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map((j,Y)=>o.jsxs("div",{draggable:!0,onDragStart:ee=>ce(ee,Y),onDragOver:Te,onDrop:ee=>Pe(ee,Y),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center group hover:shadow-md transition-all relative cursor-grab active:cursor-grabbing",children:[o.jsx("div",{className:"absolute left-2 top-2 text-slate-300 dark:text-slate-600",children:o.jsx(O,{name:"GripVertical",size:14})}),o.jsx("div",{className:"text-2xl font-black text-slate-800 dark:text-slate-100 mb-1",children:j.name}),o.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[j.studentsCount||0," "]}),o.jsxs("div",{className:`text-xs font-bold px-2 py-0.5 rounded-full inline-block ${j.shift===ie.First?"bg-blue-50 text-blue-600":"bg-orange-50 text-orange-600"}`,children:[j.shift===ie.First?"I":"II"," "]}),o.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(j.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(O,{name:"Edit2",size:14})}),o.jsx("button",{onClick:()=>Le(j.id),className:"p-1 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(O,{name:"Trash2",size:14})})]})]},j.id))}),i==="rooms"&&o.jsx(ad,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((j,Y)=>o.jsxs("div",{draggable:!0,onDragStart:ee=>ce(ee,Y),onDragOver:Te,onDrop:ee=>Pe(ee,Y),className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center justify-between group cursor-grab active:cursor-grabbing",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(O,{name:"GripVertical",className:"text-slate-300 dark:text-slate-600",size:16}),o.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600",children:o.jsx(O,{name:"DoorOpen",size:20})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:j.name}),o.jsxs("div",{className:"text-xs text-slate-400",children:[": ",j.capacity,"  ",j.type]})]})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>We(j.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-indigo-600",children:o.jsx(O,{name:"Edit2",size:16})}),o.jsx("button",{onClick:()=>Le(j.id),className:"p-1.5 text-slate-600 dark:text-slate-300 hover:text-red-600",children:o.jsx(O,{name:"Trash2",size:16})})]})]},j.id))}),i==="bells"&&o.jsxs("div",{className:"flex flex-col gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-wrap items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:F,onChange:j=>U(j.target.value),className:"appearance-none bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500 cursor-pointer",children:(s.bellPresets||[]).map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:o.jsx(O,{name:"Filter",size:14})})]}),o.jsx("button",{onClick:he,className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition",title:"  ",children:o.jsx(O,{name:"Plus",size:18})}),o.jsx("button",{onClick:pe,className:"p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/50 transition",title:" ",children:o.jsx(O,{name:"Trash2",size:18})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:$,className:"px-4 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(O,{name:"Save",size:18}),"  "]}),o.jsxs("button",{onClick:Ie,className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none text-sm flex items-center gap-2",children:[o.jsx(O,{name:"CheckCircle",size:18}),"  "]}),o.jsxs("button",{onClick:At,className:"px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition text-sm flex items-center gap-2",children:[o.jsx(O,{name:"Image",size:18})," PNG"]})]})]}),o.jsxs("div",{ref:P,className:"bg-white p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 text-slate-900",children:[o.jsxs("h3",{className:"text-2xl font-black text-center mb-6 uppercase text-slate-800",children:[" : ",(ue=(te=s.bellPresets)==null?void 0:te.find(j=>j.id===F))==null?void 0:ue.name]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[ie.First,ie.Second].map(j=>o.jsxs("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:[o.jsx("div",{className:`p-4 font-bold text-lg text-white text-center ${j===ie.First?"bg-indigo-600":"bg-purple-600"}`,children:j}),o.jsx("div",{className:"p-4 space-y-2 bg-white",children:on[j].map(Y=>{const ee=R.find(xe=>xe.shift===j&&xe.period===Y&&xe.day==="default")||{start:"00:00",end:"00:00",cancelled:!1};return o.jsxs("div",{className:`flex items-center gap-4 p-2 rounded-lg border ${ee.cancelled?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[o.jsx("div",{className:"w-10 h-10 rounded bg-white flex items-center justify-center font-black text-slate-500 shadow-sm border border-slate-200",children:Y}),ee.cancelled?o.jsx("div",{className:"flex-1 flex justify-center items-center",children:o.jsx("span",{className:"text-red-500 font-bold uppercase tracking-wider text-sm",children:" "})}):o.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2",children:[o.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:ee.start,onChange:xe=>Ze(j,Y,"start",xe.target.value)}),o.jsx("span",{className:"text-slate-400 font-bold",children:""}),o.jsx("input",{type:"time",className:"border border-slate-200 rounded px-2 py-1 bg-white font-bold text-slate-800 text-center flex-1 min-w-[5rem] text-lg focus:ring-2 ring-indigo-200 outline-none",value:ee.end,onChange:xe=>Ze(j,Y,"end",xe.target.value)})]}),o.jsx("button",{onClick:()=>Ge(j,Y),className:`w-8 h-8 rounded flex items-center justify-center transition-colors ${ee.cancelled?"bg-white text-emerald-500 hover:text-emerald-700":"text-slate-400 hover:text-red-500 hover:bg-red-50"}`,title:ee.cancelled?" ":" ","data-html2canvas-ignore":"true",children:o.jsx(O,{name:ee.cancelled?"RotateCcw":"X",size:16})})]},Y)})})]},j))}),o.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-200 flex justify-between items-end text-sm font-bold text-slate-500",children:[o.jsxs("div",{children:["",o.jsx("br",{})," "]}),o.jsx("div",{children:"____________"})]})]})]})]}),o.jsx(bn,{isOpen:a,onClose:()=>c(!1),title:d?"":"",children:o.jsxs("div",{className:"space-y-4",children:[i==="teachers"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:f.name||"",onChange:j=>p({...f,name:j.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{type:"date",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.birthDate||"",onChange:j=>p({...f,birthDate:j.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Telegram Chat ID"}),o.jsx("input",{type:"text",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:f.telegramChatId||"",onChange:j=>p({...f,telegramChatId:j.target.value}),placeholder:"12345678"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:""}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(fe=f.shifts)==null?void 0:fe.includes(ie.First),onChange:()=>ut(ie.First)})," ",o.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"1 "})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-purple-600 focus:ring-purple-500",checked:(de=f.shifts)==null?void 0:de.includes(ie.Second),onChange:()=>ut(ie.Second)})," ",o.jsx("span",{className:"text-sm font-medium dark:text-slate-300",children:"2 "})]})]})]}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mt-2",children:""}),o.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto custom-scrollbar border border-slate-100 dark:border-slate-700 p-2 rounded-xl",children:t.map(j=>{var Y;return o.jsxs("label",{className:"flex items-center gap-2 p-1 rounded hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"rounded text-indigo-600 focus:ring-indigo-500",checked:(Y=f.subjectIds)==null?void 0:Y.includes(j.id),onChange:ee=>{const xe=f.subjectIds||[];p({...f,subjectIds:ee.target.checked?[...xe,j.id]:xe.filter(Je=>Je!==j.id)})}})," ",o.jsx("span",{className:"text-sm dark:text-slate-300",children:j.name})]},j.id)})})]}),i==="subjects"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" ",value:v.name||"",onChange:j=>x({...v,name:j.target.value})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:""}),o.jsx("input",{type:"color",className:"w-20 h-10 cursor-pointer bg-transparent",value:v.color||"#ffffff",onChange:j=>x({...v,color:j.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( 1-12)"}),o.jsx("input",{type:"number",min:"1",max:"12",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.difficulty||5,onChange:j=>x({...v,difficulty:parseInt(j.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"  "}),o.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:v.requiredRoomType,onChange:j=>x({...v,requiredRoomType:j.target.value}),children:qv.map(j=>o.jsx("option",{value:j,children:j},j))})]})]}),i==="classes"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"  (5)",value:_.name||"",onChange:j=>b({..._,name:j.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:_.studentsCount||25,onChange:j=>b({..._,studentsCount:parseInt(j.target.value)})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx("button",{onClick:()=>b({..._,shift:ie.First}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ie.First?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>b({..._,shift:ie.Second}),className:`p-3 rounded-xl border text-sm font-bold transition-all ${_.shift===ie.Second?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400":"border-slate-200 dark:border-slate-600 text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),i==="rooms"&&o.jsxs(o.Fragment,{children:[o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"/ (. 101)",value:w.name||"",onChange:j=>I({...w,name:j.target.value})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ()"}),o.jsx("input",{type:"number",className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.capacity||30,onChange:j=>I({...w,capacity:parseInt(j.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("select",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",value:w.type,onChange:j=>I({...w,type:j.target.value}),children:qv.map(j=>o.jsx("option",{value:j,children:j},j))})]})]}),o.jsx("div",{className:"flex justify-end pt-4",children:o.jsx("button",{onClick:st,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none",children:""})})]})}),o.jsx(bn,{isOpen:B,onClose:()=>C(!1),title:"  ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:":  (30 )",value:S,onChange:j=>N(j.target.value),autoFocus:!0})]}),o.jsx("div",{className:"flex justify-end pt-2",children:o.jsx("button",{onClick:W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 text-sm font-bold",children:""})})]})})]})},k6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,saveStaticData:A}=Yn(),{schedule1:i,schedule2:l,substitutions:a,saveScheduleData:c}=pi(),d=ii(),[h,f]=T.useState($c()),[p,v]=T.useState(!1),[x,_]=T.useState(null),[b,w]=T.useState(!1),[I,F]=T.useState(!1),[U,R]=T.useState(null),[y,B]=T.useState(""),[C,S]=T.useState(!1),[N,P]=T.useState(""),[E,Ke]=T.useState(""),[We,st]=T.useState("all"),[Le,ce]=T.useState(""),[Te,Pe]=T.useState(""),[Ze,Ge]=T.useState(""),[$,he]=T.useState(""),[W,pe]=T.useState([]),[Ie,At]=T.useState(!1),[ut,te]=T.useState(!1),[ue,fe]=T.useState(!1),de=Yk({maxWidth:767}),[j,Y]=T.useState("lessons"),ee=T.useMemo(()=>{const D={schedule:i,schedule2:l,settings:s};return Mk(new Date(h),D)},[h,i,l,s]);T.useEffect(()=>{var D;(D=d.state)!=null&&D.subParams&&(_(d.state.subParams),Ge(""),he(""),pe([]),At(!1),te(!1),fe(!1),v(!0),window.history.replaceState({},document.title))},[d.state]),T.useEffect(()=>{if(p&&x){const D=a.find(X=>X.scheduleItemId===x.scheduleItemId&&X.date===h);pe(D?D.refusals||[]:[]),At(!1),te(!1),fe(!1)}},[p,x,a,h]);const xe=T.useMemo(()=>{const D=new Date(h).getDay();return D===0||D===6?null:_t[D-1]},[h]),Je=T.useMemo(()=>e.filter(D=>{const X=D.name.toLowerCase().includes(E.toLowerCase()),q=We==="all"?!0:D.shifts&&D.shifts.includes(We);return X&&q}),[e,E,We]),K=T.useMemo(()=>e.filter(D=>D.unavailableDates.includes(h)),[e,h]),G=T.useMemo(()=>{if(!xe)return[];const D=K.map(ve=>ve.id),X=ee.filter(ve=>ve.day===xe&&D.includes(ve.teacherId)),H=a.filter(ve=>ve.date===h).map(ve=>ve.scheduleItemId),De=ee.filter(ve=>H.includes(ve.id)),Ee=[...X];return De.forEach(ve=>{Ee.find(_e=>_e.id===ve.id)||Ee.push(ve)}),Ee.sort((ve,_e)=>ve.period-_e.period)},[ee,xe,K,a,h]),re=D=>{var q;const X=e.find(H=>H.id===D);R(D),B(((q=X==null?void 0:X.absenceReasons)==null?void 0:q[h])||""),w(!0)},tt=T.useCallback(async()=>{let D=[...e];const X=D.findIndex(H=>H.id===U);if(X===-1)return;const q={...D[X]};q.unavailableDates.includes(h)||(q.unavailableDates=[...q.unavailableDates,h]),q.absenceReasons||(q.absenceReasons={}),q.absenceReasons[h]=y,D[X]=q,await A({teachers:D}),w(!1)},[e,U,h,y,A]),ge=T.useCallback(async D=>{let X=[...e];const q=X.findIndex(De=>De.id===D);if(q===-1)return;const H={...X[q]};H.unavailableDates=H.unavailableDates.filter(De=>De!==h),H.absenceReasons&&delete H.absenceReasons[h],X[q]=H,await A({teachers:X})},[e,h,A]),Re=T.useCallback(async(D,X=!1)=>{if(!x){alert(":   .    .");return}const q=ee.find(Ee=>Ee.id===x.scheduleItemId);if(!q){alert(":     .");return}const H=a.filter(Ee=>!(Ee.scheduleItemId===x.scheduleItemId&&Ee.date===h)),De={id:fn(),date:h,scheduleItemId:x.scheduleItemId,originalTeacherId:q.teacherId,replacementTeacherId:D,replacementRoomId:Ze||void 0,isMerger:X,lessonAbsenceReason:D!=="conducted"&&D!=="cancelled"&&$?$:void 0,refusals:W};H.push(De);try{await c({substitutions:H}),v(!1),ce(""),Ge(""),he(""),pe([]),_(null)}catch(Ee){console.error("Failed to save substitution:",Ee),alert("   .   .")}},[x,h,Ze,ee,a,e,$,W,c]),Ce=T.useCallback(async D=>{if(!x||!xe||!x.period||!x.shift||!x.teacherId){alert(":   .");return}const X=ee.filter(H=>H.classId===D&&H.day===xe&&H.period===x.period&&H.shift===x.shift);if(X.length===0){alert("    .");return}const q=a.filter(H=>!(H.scheduleItemId===x.scheduleItemId&&H.date===h));X.forEach(H=>{const De={id:fn(),date:h,scheduleItemId:x.scheduleItemId,originalTeacherId:x.teacherId,replacementTeacherId:H.teacherId,replacementClassId:H.classId,replacementSubjectId:H.subjectId,isMerger:!0,replacementRoomId:H.roomId,lessonAbsenceReason:$||void 0};q.push(De)}),await c({substitutions:q}),v(!1),ce(""),Ge(""),he(""),_(null),te(!1)},[x,h,xe,ee,a,$,c]),ae=T.useCallback(async D=>{if(!x)return;const X=ee.find(V=>V.id===x.scheduleItemId),q=ee.find(V=>V.id===D);if(!X||!q){alert(":     .");return}const H=[...a];let De,Ee;Ze?(De=Ze,Ee=ue?q.roomId:X.roomId):ue?(De=X.roomId,Ee=q.roomId):(De=q.roomId,Ee=X.roomId);const ve=H.findIndex(V=>V.scheduleItemId===X.id&&V.date===h),_e={id:ve>=0?H[ve].id:fn(),date:h,scheduleItemId:X.id,originalTeacherId:X.teacherId,replacementTeacherId:X.teacherId,replacementClassId:q.classId,replacementSubjectId:q.subjectId,replacementRoomId:De!==X.roomId?De:void 0};ve>=0?H[ve]=_e:H.push(_e);const He=H.findIndex(V=>V.scheduleItemId===q.id&&V.date===h),Q={id:He>=0?H[He].id:fn(),date:h,scheduleItemId:q.id,originalTeacherId:q.teacherId,replacementTeacherId:q.teacherId,replacementClassId:X.classId,replacementSubjectId:X.subjectId,replacementRoomId:Ee!==q.roomId?Ee:void 0};He>=0?H[He]=Q:H.push(Q),await c({substitutions:H}),v(!1),_(null),Ge(""),At(!1),fe(!1)},[x,ee,a,h,c,Ze,ue]),me=T.useCallback(async D=>{const X=a.filter(q=>!(q.scheduleItemId===D&&q.date===h));await c({substitutions:X})},[a,h,c]),Ue=T.useCallback(()=>{let D=`*  ${new Date(h).toLocaleDateString("ru-RU")}*
`;const X=a.some(H=>H.date===h&&H.replacementTeacherId!=="conducted"),q=(H,De)=>{const ve=G.filter(_e=>_e.shift===De).filter(_e=>{const He=a.filter(Q=>Q.scheduleItemId===_e.id&&Q.date===h);return He.length>0&&He.some(Q=>Q.replacementTeacherId!=="conducted")});ve.length>0&&(D+=`
 *${H.toUpperCase()}*
`,ve.forEach(_e=>{var V;const He=a.filter(ne=>ne.scheduleItemId===_e.id&&ne.date===h);if(He.some(ne=>ne.isMerger)){const ne=r.find(Qt=>Qt.id===_e.classId),Z=t.find(Qt=>Qt.id===_e.subjectId),Ae=e.find(Qt=>Qt.id===_e.teacherId),se=(Ae==null?void 0:Ae.name)||"?",be=He.map(Qt=>{var Jt;return(Jt=e.find(Fr=>Fr.id===Qt.replacementTeacherId))==null?void 0:Jt.name}).filter(Boolean).join(", "),Be=He[0],ze=Be!=null&&Be.replacementClassId?r.find(Qt=>Qt.id===Be.replacementClassId):null;let xt=` ${ne==null?void 0:ne.name} (${_e.period} ): ${Z==null?void 0:Z.name} -> ${be} (${ze?`  ${ze.name}`:""}) ( ${se})`;const it=Be==null?void 0:Be.replacementRoomId;if(it){const Qt=((V=n.find(Jt=>Jt.id===it))==null?void 0:V.name)||it;xt+=`  . ${Qt}`}D+=xt+`
`}else He.forEach(ne=>{var Js,An,Ys;if(ne.replacementTeacherId==="conducted")return;const Z=r.find(Yt=>Yt.id===_e.classId),Ae=t.find(Yt=>Yt.id===_e.subjectId),se=e.find(Yt=>Yt.id===ne.replacementTeacherId),be=e.find(Yt=>Yt.id===_e.teacherId),Be=((Js=n.find(Yt=>Yt.id===_e.roomId))==null?void 0:Js.name)||_e.roomId||"?",ze=(An=be==null?void 0:be.absenceReasons)==null?void 0:An[h],xt=ne==null?void 0:ne.lessonAbsenceReason,Jt=(xt===" "?xt:null)||(ze===" "?ze:null),Fr=(be==null?void 0:be.name)+(Jt?` (${Jt})`:""),Et=ne!=null&&ne.replacementRoomId?((Ys=n.find(Yt=>Yt.id===ne.replacementRoomId))==null?void 0:Ys.name)||ne.replacementRoomId:null,Lr=ne!=null&&ne.replacementClassId?r.find(Yt=>Yt.id===ne.replacementClassId):null,kn=ne!=null&&ne.replacementSubjectId?t.find(Yt=>Yt.id===ne.replacementSubjectId):null,es=Lr&&kn&&!ne.isMerger;if(ne.replacementTeacherId==="cancelled")D+=` ${Z==null?void 0:Z.name} (${_e.period} ): ${Ae==null?void 0:Ae.name} (${Fr}) ->  
`;else if(ne.replacementTeacherId===ne.originalTeacherId&&Et&&!Lr)D+=` ${Z==null?void 0:Z.name} (${_e.period} ): ${Ae==null?void 0:Ae.name} (${be==null?void 0:be.name}) ->  ${Be}  ${Et}
`;else if(es)D+=` ${Z==null?void 0:Z.name} (${_e.period} ): ${Ae==null?void 0:Ae.name} ->  ${Lr==null?void 0:Lr.name} ${kn==null?void 0:kn.name} ( )${Et?`  . ${Et}`:""}
`;else{let Yt=` ${Z==null?void 0:Z.name} (${_e.period} ): ${Ae==null?void 0:Ae.name} -> ${se==null?void 0:se.name} ( ${Fr})`;Et&&(Yt+=`  . ${Et}`),D+=Yt+`
`}})}),D+=`
`)};X?(q(ie.First,ie.First),q(ie.Second,ie.Second)):D+=`
 .`,navigator.clipboard.writeText(D),alert("     !")},[h,a,G,r,t,e,n]),qe=T.useCallback(()=>{let D=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Gymnasium//Manager//RU
`;a.filter(Ee=>Ee.date===h).forEach(Ee=>{var ze;const ve=ee.find(xt=>xt.id===Ee.scheduleItemId);if(!ve)return;let _e="Unknown";if(Ee.replacementTeacherId==="cancelled")_e=" ";else if(Ee.replacementTeacherId==="conducted")_e=" ";else{const xt=e.find(it=>it.id===Ee.replacementTeacherId);xt&&(_e=xt.name)}const He=t.find(xt=>xt.id===ve.subjectId),Q=r.find(xt=>xt.id===ve.classId),V=Ee.date.replace(/-/g,""),ne=e.find(xt=>xt.id===Ee.originalTeacherId),Z=(ze=ne==null?void 0:ne.absenceReasons)==null?void 0:ze[h],Ae=Ee.lessonAbsenceReason,Be=(Ae===" "?Ae:null)||(Z===" "?Z:null);D+=`BEGIN:VEVENT
DTSTART;VALUE=DATE:${V}
SUMMARY:: ${Q==null?void 0:Q.name} - ${He==null?void 0:He.name}
DESCRIPTION:: ${_e}${Ee.isMerger?" ()":""}${Be?` (: ${Be})`:""}
END:VEVENT
`}),D+="END:VCALENDAR";const q=new Blob([D],{type:"text/calendar"}),H=URL.createObjectURL(q),De=document.createElement("a");De.href=H,De.download="substitutions.ics",document.body.appendChild(De),De.click(),document.body.removeChild(De)},[h,a,ee,e,t,r]),ke=T.useCallback(async()=>{if(!(s!=null&&s.telegramToken)){alert(" Telegram      ''.");return}let D=`*  ${new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})}*

`,X=!1;const q=new Set,H=[ie.First,ie.Second];for(const Ee of H){const _e=G.filter(He=>He.shift===Ee).filter(He=>a.some(Q=>Q.scheduleItemId===He.id&&Q.date===h&&Q.replacementTeacherId!=="conducted"));_e.length>0&&(X=!0,D+=` *${Ee.toUpperCase()}*
`,_e.forEach(He=>{var ne;const Q=a.filter(Z=>Z.scheduleItemId===He.id&&Z.date===h);if(Q.some(Z=>Z.isMerger)){const Z=r.find(it=>it.id===He.classId),Ae=t.find(it=>it.id===He.subjectId),se=e.find(it=>it.id===He.teacherId),be=Q.map(it=>{var Qt;return(Qt=e.find(Jt=>Jt.id===it.replacementTeacherId))==null?void 0:Qt.name}).filter(Boolean).join(", "),Be=Q[0],ze=Be!=null&&Be.replacementClassId?r.find(it=>it.id===Be.replacementClassId):null;se!=null&&se.telegramChatId&&q.add(se.telegramChatId),Q.forEach(it=>{const Qt=e.find(Jt=>Jt.id===it.replacementTeacherId);Qt!=null&&Qt.telegramChatId&&q.add(Qt.telegramChatId)});const xt=Be!=null&&Be.replacementRoomId?((ne=n.find(it=>it.id===Be.replacementRoomId))==null?void 0:ne.name)||Be.replacementRoomId:"";D+=`${He.period}  (${Z==null?void 0:Z.name} ${Ae==null?void 0:Ae.name}): *${be}* (${ze?`  ${ze.name}`:""}). : ${xt}
`}else Q.forEach(Z=>{var Ys,Yt,mi;if(!Z)return;const Ae=r.find(yr=>yr.id===He.classId),se=t.find(yr=>yr.id===He.subjectId),be=e.find(yr=>yr.id===Z.originalTeacherId),Be=e.find(yr=>yr.id===Z.replacementTeacherId),ze=(Ys=be==null?void 0:be.absenceReasons)==null?void 0:Ys[h],xt=Z.lessonAbsenceReason,Jt=(xt===" "?xt:null)||(ze===" "?ze:null),Fr=(be==null?void 0:be.name)+(Jt?` (${Jt})`:""),Et=((Yt=n.find(yr=>yr.id===He.roomId))==null?void 0:Yt.name)||He.roomId||"",Lr=Z.replacementRoomId?((mi=n.find(yr=>yr.id===Z.replacementRoomId))==null?void 0:mi.name)||Z.replacementRoomId:Et,kn=Z.replacementClassId?r.find(yr=>yr.id===Z.replacementClassId):null,es=Z.replacementSubjectId?t.find(yr=>yr.id===Z.replacementSubjectId):null,Js=kn&&es&&!Z.isMerger;let An=`${He.period}  (${Ae==null?void 0:Ae.name} ${se==null?void 0:se.name}${He.direction?` ${He.direction}`:""}): `;Z.replacementTeacherId==="cancelled"?An+=`* * ( ${Fr})`:Js?(An+=`  : ${kn==null?void 0:kn.name} ${es==null?void 0:es.name} ( ${Ae==null?void 0:Ae.name} ${se==null?void 0:se.name})`,Lr!==Et&&(An+=`  . ${Lr}`)):Z.replacementTeacherId===Z.originalTeacherId?An+=`: ${Fr}.  : ${Et}  ${Lr}`:(An+=`*${Be==null?void 0:Be.name}* ( *${Fr}*)`,Et!==Lr?An+=`. : ${Et}  ${Lr}`:Lr!==""&&(An+=`. : ${Lr}`)),D+=`${An}
`,be!=null&&be.telegramChatId&&q.add(be.telegramChatId),Be!=null&&Be.telegramChatId&&q.add(Be.telegramChatId)})}),D+=`
`)}if(X||(D+=` .
`),K.forEach(Ee=>{var Q;const ve=a.some(V=>V.date===h&&V.originalTeacherId===Ee.id&&V.replacementTeacherId!=="cancelled"&&V.replacementTeacherId!=="conducted"),_e=(Q=Ee.absenceReasons)==null?void 0:Q[h],He=_e===" "?_e:"";Ee.telegramChatId&&!ve&&Ee.unavailableDates.includes(h)&&(q.add(Ee.telegramChatId),X?D+=`_:  ${Ee.name} ${He},        /._
`:D+=`_:  ${Ee.name} ${He},      ._
`)}),q.size===0){alert("    Telegram Chat ID   .");return}const De=`https://api.telegram.org/bot${s.telegramToken}/sendMessage`;try{const Ee=Array.from(q).map(ve=>fetch(De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:ve,text:D,parse_mode:"Markdown"})}));await Promise.all(Ee),alert(`   ${q.size} !`)}catch(Ee){console.error("    Telegram:",Ee),alert("     Telegram.     .")}},[h,G,a,r,t,e,n,K,s==null?void 0:s.telegramToken]),at=T.useCallback(async(D,X,q,H,De,Ee)=>{const _e=new Date(Ee).toLocaleDateString("ru-RU",{day:"numeric",month:"long"}),He=X.shift===ie.First?"1 ":"2 ",Q=` *  *
${D.name}

 : ${_e}
 : ${He}
 : ${q==null?void 0:q.name}
1 : ${X.period}
 : ${H==null?void 0:H.name}
 : ${De||" "}`;if(s!=null&&s.telegramToken&&D.telegramChatId)try{const ne=await(await fetch(`https://api.telegram.org/bot${s.telegramToken}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:D.telegramChatId,text:Q,parse_mode:"Markdown"})})).json();ne.ok?alert(`   Telegram  ${D.name}!`):ne.description.includes("chat not found")?alert(` Telegram:   .

  ${D.name}       "" (/start).`):alert(` Telegram: ${ne.description}`)}catch(V){alert("   Telegram (/)."),console.error(V)}else navigator.share?navigator.share({title:"",text:Q}).catch(()=>{}):(navigator.clipboard.writeText(Q),alert(" ! (Telegram     Chat ID)"))},[s==null?void 0:s.telegramToken]),et=T.useMemo(()=>x?new Set(a.filter(D=>D.date===h&&D.replacementTeacherId!=="conducted"&&D.replacementTeacherId!=="cancelled").map(D=>{const X=ee.find(q=>q.id===D.scheduleItemId);return X&&X.period===x.period&&X.shift===x.shift?D.replacementTeacherId:null}).filter(D=>!!D)):new Set,[a,ee,h,x]),ct=T.useMemo(()=>{if(!x||!xe)return[];const D=h.substring(0,7);return e.filter(X=>X.name.toLowerCase().includes(Le.toLowerCase())).map(X=>{const q=X.unavailableDates.includes(h),H=ee.some(Q=>Q.teacherId===X.id&&Q.day===xe&&Q.period===x.period&&Q.shift===x.shift),De=et.has(X.id),Ee=H||De,ve=X.subjectIds.includes(x.subjectId),_e=a.filter(Q=>Q.replacementTeacherId===X.id&&Q.date.startsWith(D)).length;let He=0;return q&&(He-=1e3),Ee&&(He-=100),ve&&(He+=50),{teacher:X,isAbsent:q,isBusy:Ee,isSpecialist:ve,score:He,subsCount:_e}}).sort((X,q)=>q.score-X.score)},[e,x,h,Le,xe,ee,a,et]),Ne=T.useMemo(()=>{if(!x||!xe)return[];const D=ee.filter(q=>q.day===xe&&q.period===x.period&&q.shift===x.shift&&q.classId!==x.classId),X=new Map;return D.forEach(q=>{const H=r.find(ve=>ve.id===q.classId),De=e.find(ve=>ve.id===q.teacherId),Ee=t.find(ve=>ve.id===q.subjectId);if(H&&De){X.has(H.id)||X.set(H.id,{classEntity:H,teachers:[],subjects:[]});const ve=X.get(H.id);ve.teachers.includes(De.name)||ve.teachers.push(De.name),Ee&&!ve.subjects.includes(Ee.name)&&ve.subjects.push(Ee.name)}}),Array.from(X.values())},[ee,x,xe,r,e,t]),ye=T.useMemo(()=>{var Ee;if(!x)return null;const D=ee.find(ve=>ve.id===x.scheduleItemId);if(!D)return null;const X=r.find(ve=>ve.id===D.classId),q=t.find(ve=>ve.id===D.subjectId),H=e.find(ve=>ve.id===D.teacherId),De=((Ee=H==null?void 0:H.unavailableDates)==null?void 0:Ee.includes(h))||!1;return{className:X==null?void 0:X.name,subjectName:q==null?void 0:q.name,teacherName:H==null?void 0:H.name,teacherId:H==null?void 0:H.id,period:D.period,roomId:D.roomId,isTeacherAbsent:De}},[x,ee,r,t,e,h]),Xe=T.useMemo(()=>!(ye!=null&&ye.teacherId)||!xe?[]:ee.filter(D=>D.teacherId===ye.teacherId&&D.day===xe&&D.id!==(x==null?void 0:x.scheduleItemId)).sort((D,X)=>D.period-X.period),[ee,ye,xe,x]),lt=T.useMemo(()=>{if(!xe||Te.length<2)return[];const D=Te.toLowerCase(),X=e.filter(De=>De.name.toLowerCase().includes(D)),q=r.filter(De=>De.name.toLowerCase().includes(D)),H=[];return X.forEach(De=>{ee.filter(ve=>ve.teacherId===De.id&&ve.day===xe).forEach(ve=>{const _e=r.find(Q=>Q.id===ve.classId),He=t.find(Q=>Q.id===ve.subjectId);H.push({...ve,entityName:De.name,subInfo:_e==null?void 0:_e.name,subjectName:He==null?void 0:He.name})})}),q.forEach(De=>{ee.filter(ve=>ve.classId===De.id&&ve.day===xe).forEach(ve=>{if(H.find(Q=>Q.id===ve.id))return;const _e=e.find(Q=>Q.id===ve.teacherId),He=t.find(Q=>Q.id===ve.subjectId);H.push({...ve,entityName:De.name,subInfo:_e==null?void 0:_e.name,subjectName:He==null?void 0:He.name})})}),H.sort((De,Ee)=>De.period-Ee.period)},[Te,xe,e,r,ee,t]),Ct=(D,X)=>{let q=!1;if(X){if(!window.confirm("     .     ?"))return;q=!0}Re(D,q)},vt=(D,X)=>{X.stopPropagation(),W.includes(D)?pe(W.filter(q=>q!==D)):pe([...W,D])};return o.jsxs("div",{className:"h-full flex flex-col gap-6",children:[o.jsx("div",{className:"flex flex-col gap-4",children:o.jsx("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch md:items-center",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:" "}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{name:"Calendar",className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),o.jsx("input",{type:"date",value:h,onChange:D=>f(D.target.value),className:"w-full pl-10 border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"})]})]}),o.jsxs("div",{className:"flex md:hidden bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-full",children:[o.jsxs("button",{onClick:()=>Y("lessons"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${j==="lessons"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:["  ",G.length>0&&`(${G.length})`]}),o.jsx("button",{onClick:()=>Y("teachers"),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${j==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""})]}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("button",{onClick:()=>S(!C),className:`h-[50px] px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all mt-6 ${C?"bg-indigo-600 text-white border-indigo-600":"bg-slate-50 dark:bg-slate-700 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-600"}`,children:[o.jsx(O,{name:"History",size:18})," ",C?" ":""]})})]})})}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-6 min-h-0",children:[o.jsxs("div",{className:`w-full md:w-80 flex-col gap-4 ${de&&j!=="teachers"?"hidden":"flex"}`,children:[o.jsx("div",{className:"md:hidden",children:o.jsxs("button",{onClick:()=>S(!C),className:`w-full py-3 rounded-xl text-sm font-bold flex items-center justify-center gap-2 border transition-all ${C?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-dark-800 text-indigo-600 dark:text-white border-slate-200 dark:border-slate-700"}`,children:[o.jsx(O,{name:"History",size:18})," ",C?" ":"  "]})}),C?o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[o.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-2",children:""}),o.jsx("input",{placeholder:"  /...",value:N,onChange:D=>P(D.target.value),className:"mb-4 w-full bg-slate-100 dark:bg-slate-700 border-none rounded-lg p-2 text-xs"}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2",children:a.filter(D=>{var X;return D.date.includes(N)||((X=e.find(q=>q.id===D.replacementTeacherId))==null?void 0:X.name.toLowerCase().includes(N.toLowerCase()))}).map(D=>{const X=e.find(H=>H.id===D.replacementTeacherId),q=n.find(H=>H.id===D.replacementRoomId);return o.jsxs("div",{className:"p-2 border border-slate-100 dark:border-slate-700 rounded-lg text-xs",children:[o.jsx("div",{className:"font-bold",children:D.date}),o.jsxs("div",{children:[(X==null?void 0:X.name)||(D.replacementTeacherId==="cancelled"?"":""),D.isMerger&&o.jsx("span",{className:"text-purple-600 font-bold ml-1",children:"(.)"})]}),q&&o.jsxs("div",{className:"text-indigo-500",children:[". ",q.name]})]},D.id)})})]}):o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex-1 overflow-hidden flex flex-col h-[600px] md:h-auto",children:[o.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"UserX",size:18,className:"text-red-500"})," "]}),o.jsxs("div",{className:"mb-3 space-y-2",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[o.jsx("button",{onClick:()=>st("all"),className:`flex-1 py-1 text-xs font-bold rounded-md ${We==="all"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:""}),o.jsx("button",{onClick:()=>st(ie.First),className:`flex-1 py-1 text-xs font-bold rounded-md ${We===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>st(ie.Second),className:`flex-1 py-1 text-xs font-bold rounded-md ${We===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),o.jsx("input",{placeholder:" ...",value:E,onChange:D=>Ke(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-100 dark:border-slate-600 rounded-xl text-xs outline-none focus:ring-1 ring-indigo-500 dark:text-white"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2",children:[Je.map(D=>{const X=D.unavailableDates.includes(h),q=D.absenceReasons?D.absenceReasons[h]:"";return o.jsxs("div",{className:`flex flex-col p-3 rounded-xl border transition-all ${X?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900":"bg-slate-50 dark:bg-slate-700/50 border-slate-100 dark:border-slate-600"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:`text-sm font-medium ${X?"text-red-700 dark:text-red-400":"text-slate-600 dark:text-slate-300"}`,children:D.name}),o.jsx("button",{onClick:()=>X?ge(D.id):re(D.id),className:`text-xs px-2 py-1 rounded-lg font-bold transition-colors ${X?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:X?"":""})]}),o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("div",{className:"flex gap-1",children:D.shifts.map(H=>o.jsx("span",{className:"text-[9px] bg-white dark:bg-slate-600 px-1 rounded border border-slate-100 dark:border-slate-500 text-slate-400",children:H===ie.First?"1":"2"},H))}),X&&o.jsxs("div",{className:"flex items-center gap-1",children:[q&&o.jsx("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic",children:q}),o.jsx("button",{onClick:()=>re(D.id),className:"w-6 h-6 flex items-center justify-center bg-white dark:bg-dark-800 text-red-600 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full shadow-sm border border-slate-200 dark:border-slate-600",title:" ",children:o.jsx(O,{name:"Edit2",size:14})})]})]})]},D.id)}),Je.length===0&&o.jsx("div",{className:"text-center text-xs text-slate-400 py-4",children:" "})]})]})]}),o.jsxs("div",{className:`flex-1 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col overflow-hidden ${de&&j!=="lessons"?"hidden":"flex"}`,children:[o.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["   (",G.length,")"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 w-full xl:w-auto",children:[o.jsxs("button",{onClick:qe,className:"flex items-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-xl text-xs font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors",children:[o.jsx(O,{name:"Calendar",size:16})," iCal"]}),G.length>0&&o.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl text-xs font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition-colors",children:[o.jsx(O,{name:"Copy",size:16})," "]}),o.jsxs("button",{onClick:ke,className:"px-3 py-2 bg-blue-500 text-white rounded-xl text-xs font-bold hover:bg-blue-600 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(O,{name:"Send",size:16})," Telegram"]}),o.jsxs("button",{onClick:()=>{Pe(""),F(!0)},className:"flex items-center gap-2 px-3 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-xs font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition-colors",children:[o.jsx(O,{name:"Search",size:16})," "]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-4",children:G.length===0?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[o.jsx(O,{name:"CheckCircle",size:48,className:"mb-4 text-slate-200 dark:text-slate-700"}),o.jsx("p",{children:" ,     "})]}):G.map(D=>{var Be;const X=a.filter(ze=>ze.scheduleItemId===D.id&&ze.date===h),q=X.length>0,H=q?X[0]:null,De=H&&H.replacementTeacherId!=="cancelled"&&H.replacementTeacherId!=="conducted"?e.find(ze=>ze.id===H.replacementTeacherId):null,Ee=e.find(ze=>ze.id===D.teacherId),ve=t.find(ze=>ze.id===D.subjectId),_e=r.find(ze=>ze.id===D.classId),He=n.find(ze=>ze.id===D.roomId),Q=He?He.name:D.roomId,V=H==null?void 0:H.replacementRoomId,ne=V?((Be=n.find(ze=>ze.id===V))==null?void 0:Be.name)||V:void 0,Z=H!=null&&H.replacementClassId?r.find(ze=>ze.id===H.replacementClassId):null,Ae=H!=null&&H.replacementSubjectId?t.find(ze=>ze.id===H.replacementSubjectId):null;let se=null;if((H==null?void 0:H.replacementTeacherId)==="conducted")se=o.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-900 pl-4 pr-2 py-2 rounded-xl",children:[o.jsx("div",{className:"text-blue-700 dark:text-blue-400 font-bold text-sm",children:" "}),o.jsx("button",{onClick:()=>me(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-blue-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:o.jsx(O,{name:"X",size:16})})]});else if((H==null?void 0:H.replacementTeacherId)==="cancelled")se=o.jsxs("div",{className:"flex items-center gap-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900 pl-4 pr-2 py-2 rounded-xl",children:[o.jsx("div",{className:"text-red-700 dark:text-red-400 font-bold text-sm",children:" "}),o.jsx("button",{onClick:()=>me(D.id),className:"p-2 bg-white dark:bg-dark-800 rounded-lg text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors shadow-sm",children:o.jsx(O,{name:"X",size:16})})]});else if(q){const ze=(H==null?void 0:H.replacementTeacherId)===(H==null?void 0:H.originalTeacherId)&&V&&!Z,xt=Z&&Ae&&!(H!=null&&H.isMerger),it=X.map(Qt=>{var Jt;return(Jt=e.find(Fr=>Fr.id===Qt.replacementTeacherId))==null?void 0:Jt.name}).filter(Boolean).join(", ");se=o.jsxs("div",{className:"flex items-center gap-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900 pl-4 pr-2 py-2 rounded-xl flex-1 justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-[10px] uppercase font-bold text-emerald-600 dark:text-emerald-400 tracking-wider",children:ze?" ":xt?" ":" "}),o.jsx("div",{className:"font-bold text-emerald-900 dark:text-emerald-200 text-sm truncate",title:it,children:ze?"  ":xt?` ${Z==null?void 0:Z.name}`:it}),(H==null?void 0:H.isMerger)&&o.jsxs("div",{className:"text-[10px] font-black text-purple-600 dark:text-purple-400 uppercase tracking-widest mt-0.5",children:[" ",Z?`(  ${Z.name})`:""]}),(H==null?void 0:H.lessonAbsenceReason)&&o.jsxs("div",{className:"text-[10px] text-red-500 dark:text-red-400 italic mt-0.5",children:[": ",H.lessonAbsenceReason]})]}),o.jsxs("div",{className:"flex gap-1 shrink-0",children:[o.jsx("button",{onClick:()=>{(De||Ee)&&at(De||Ee,D,_e,ve,ne||Q||void 0,h)},className:"p-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-sm transition-all",title:" ",children:o.jsx(O,{name:"Send",size:18})}),o.jsx("button",{onClick:()=>me(D.id),className:"p-2 rounded-lg bg-white dark:bg-slate-800 text-red-500 border border-red-100 dark:border-red-900/30 hover:bg-red-50 dark:hover:bg-red-900/20 shadow-sm transition-all",title:" ",children:o.jsx(O,{name:"UserX",size:18})})]})]})}else se=o.jsxs("button",{onClick:()=>{_({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 dark:shadow-none transition-all flex items-center justify-center gap-2 xl:w-auto w-full",children:["  ",o.jsx(O,{name:"ArrowRight",size:16})]});const be=!K.find(ze=>ze.id===D.teacherId);return o.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-700/30 flex flex-col xl:flex-row xl:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"w-12 h-12 bg-white dark:bg-dark-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-600 flex flex-col items-center justify-center text-indigo-600 dark:text-indigo-400",children:[o.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 leading-none",children:""}),o.jsx("span",{className:"text-xl font-black leading-none mt-1 dark:text-slate-200",children:D.period})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:_e==null?void 0:_e.name}),o.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 px-1 rounded",children:D.shift===ie.First?"1":"2"}),o.jsx("span",{className:"text-slate-400",children:"|"}),o.jsx("span",{children:ve==null?void 0:ve.name})]})]}),o.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:be?"font-semibold":"line-through decoration-red-400 decoration-2",children:Ee==null?void 0:Ee.name}),Q&&o.jsxs("span",{className:"text-xs bg-white dark:bg-slate-700 px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-600 flex items-center gap-1",children:[Q," ",ne&&o.jsxs("span",{className:"text-indigo-600 font-bold",children:[" ",ne]})]}),(H==null?void 0:H.lessonAbsenceReason)&&o.jsxs("span",{className:"text-xs bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded border border-red-100 dark:border-red-900 text-red-500 dark:text-red-400 font-medium",children:["(",H.lessonAbsenceReason,")"]}),Z&&Ae&&!(H!=null&&H.isMerger)&&o.jsxs("span",{className:"text-xs bg-purple-50 dark:bg-purple-900/20 px-1.5 py-0.5 rounded border border-purple-100 dark:border-purple-900 text-purple-600 dark:text-purple-400 font-bold",children:[" : ",Z.name]})]})]})]}),o.jsx("div",{className:"w-full xl:w-auto mt-2 xl:mt-0",children:se})]},D.id)})})]})]}),o.jsxs(bn,{isOpen:p,onClose:()=>v(!1),title:" ",children:[ye&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl mb-4 text-sm border border-slate-100 dark:border-slate-600",children:[o.jsxs("div",{className:"font-bold text-slate-700 dark:text-slate-200 mb-1",children:[ye.className,"  ",ye.period," "]}),o.jsxs("div",{className:"flex justify-between text-slate-500 dark:text-slate-400",children:[o.jsx("span",{children:ye.subjectName}),o.jsx("span",{className:ye.isTeacherAbsent?"line-through decoration-red-400":"font-semibold",children:ye.teacherName})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"  ()"}),o.jsxs("select",{value:Ze,onChange:D=>Ge(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[o.jsx("option",{value:"",children:"  "}),n.map(D=>o.jsxs("option",{value:D.id,children:[D.name," (",D.capacity," )"]},D.id))]})]}),ye&&!ye.isTeacherAbsent&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2",children:"    ()"}),o.jsxs("select",{value:$,onChange:D=>he(D.target.value),className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm outline-none focus:border-indigo-500 dark:bg-slate-700 dark:text-white",children:[o.jsx("option",{value:"",children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:" "})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsx("button",{onClick:()=>Re("conducted"),className:"p-3 rounded-xl bg-blue-50 text-blue-700 font-bold text-sm hover:bg-blue-100 transition",children:" "}),o.jsx("button",{onClick:()=>Re("cancelled"),className:"p-3 rounded-xl bg-red-50 text-red-700 font-bold text-sm hover:bg-red-100 transition",children:" "})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("button",{onClick:()=>te(!ut),className:"w-full p-3 mb-2 rounded-xl bg-amber-50 text-amber-700 font-bold text-sm hover:bg-amber-100 transition border border-amber-200 flex items-center justify-center gap-2",children:[o.jsx(O,{name:"Users",size:16})," :    (  )"]}),ut&&o.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:" ,    :"}),Ne.length===0?o.jsx("p",{className:"text-xs text-slate-400 text-center italic",children:"     "}):Ne.map(D=>o.jsxs("button",{onClick:()=>Ce(D.classEntity.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-amber-500 transition-colors text-sm",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200",children:D.classEntity.name}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D.subjects.join(", ")," ",o.jsx("span",{className:"text-slate-400",children:"|"})," ",D.teachers.join(", ")]})]},D.classEntity.id))]})]}),(ye==null?void 0:ye.teacherId)&&!ye.isTeacherAbsent&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ye.teacherId&&Re(ye.teacherId),className:"w-full p-3 mb-2 rounded-xl bg-emerald-50 text-emerald-700 font-bold text-sm hover:bg-emerald-100 transition border border-emerald-200",children:"   (  )"}),Xe.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>At(!Ie),className:"w-full p-3 rounded-xl bg-purple-50 text-purple-700 font-bold text-sm hover:bg-purple-100 transition border border-purple-200 flex items-center justify-center gap-2",children:[o.jsx(O,{name:"RotateCw",size:16}),"     "]}),Ie&&o.jsxs("div",{className:"mt-2 space-y-2 bg-slate-50 dark:bg-slate-800 p-3 rounded-xl border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"mb-3",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600",children:[o.jsx("input",{type:"checkbox",checked:ue,onChange:D=>fe(D.target.checked),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),o.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:"    "})]}),o.jsxs("p",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-1 pl-1",children:[" :   ,    .",o.jsx("br",{})," :     ,   ."]})]}),o.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center mb-1 font-bold",children:"   :"}),Xe.map(D=>{const X=r.find(H=>H.id===D.classId),q=t.find(H=>H.id===D.subjectId);return o.jsxs("button",{onClick:()=>ae(D.id),className:"w-full p-2 text-left bg-white dark:bg-slate-700 rounded-lg border border-slate-200 dark:border-slate-600 hover:border-purple-500 transition-colors text-sm",children:[o.jsxs("span",{className:"font-bold",children:[D.period," "]}),": ",X==null?void 0:X.name," - ",q==null?void 0:q.name]},D.id)})]})]})]}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx(O,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),o.jsx("input",{autoFocus:!0,placeholder:"  ...",value:Le,onChange:D=>ce(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]}),o.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar",children:[ct.map(({teacher:D,isAbsent:X,isBusy:q,isSpecialist:H,subsCount:De})=>{const Ee=W.includes(D.id);return o.jsxs("div",{className:`w-full p-3 rounded-xl border flex items-center justify-between transition-all text-left ${X?"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-900 opacity-60":Ee?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-600 opacity-70":q?"bg-orange-50 dark:bg-orange-900/20 border-orange-100 dark:border-orange-900 hover:shadow-md":"bg-white dark:bg-dark-800 border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:shadow-md"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ${H?"bg-emerald-100 text-emerald-700":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300"}`,children:H?o.jsx(O,{name:"Star",size:14,fill:"currentColor"}):D.name[0]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-sm text-slate-800 dark:text-slate-200",children:D.name}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 flex flex-wrap gap-2",children:[H&&o.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 px-1.5 rounded",children:""}),q&&o.jsx("span",{className:"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-900/20 px-1.5 rounded font-bold",children:""}),X&&o.jsx("span",{className:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 px-1.5 rounded",children:""}),Ee&&o.jsx("span",{className:"text-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-700 px-1.5 rounded font-bold",children:""}),o.jsxs("span",{className:`px-1.5 rounded font-medium ${De>5?"text-amber-600 bg-amber-50 dark:bg-amber-900/20":"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:["  : ",De]})]})]})]}),!X&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:ve=>vt(D.id,ve),className:`px-3 py-1 text-xs font-bold rounded border ${Ee?"bg-slate-300 text-slate-600 border-slate-300":"bg-white dark:bg-slate-700 text-slate-500 border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-600"}`,title:" ",children:Ee?"":""}),!Ee&&!q&&o.jsx("button",{onClick:()=>Ct(D.id,q),className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded text-xs font-bold",children:""}),!Ee&&q&&o.jsx("button",{onClick:()=>Ct(D.id,q),className:"px-3 py-1 bg-orange-100 dark:bg-orange-800/30 text-orange-700 dark:text-orange-300 rounded text-xs font-bold",children:"?"})]})]},D.id)}),ct.length===0&&o.jsx("div",{className:"text-center text-slate-400 text-xs py-4",children:"  "})]})]}),o.jsxs(bn,{isOpen:I,onClose:()=>F(!1),title:"  ",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"     ,       (  )."}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{name:"Search",className:"absolute left-3 top-2.5 text-slate-400",size:14}),o.jsx("input",{autoFocus:!0,placeholder:": 6  ...",value:Te,onChange:D=>Pe(D.target.value),className:"w-full pl-8 pr-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm outline-none focus:border-indigo-500 dark:text-white"})]})]}),o.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto custom-scrollbar",children:[lt.map(D=>{var X;return o.jsxs("button",{onClick:()=>{F(!1),_({scheduleItemId:D.id,subjectId:D.subjectId,period:D.period,shift:D.shift,classId:D.classId,teacherId:D.teacherId,roomId:D.roomId,day:D.day}),v(!0)},className:"w-full p-3 rounded-xl border border-slate-100 dark:border-slate-700 hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 transition-colors text-left group",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsxs("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:[D.entityName," ",o.jsxs("span",{className:"font-normal text-slate-500",children:["(",D.subInfo,")"]})]}),o.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-600 px-2 py-0.5 rounded",children:[D.period," "]})]}),o.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex gap-2",children:[o.jsx("span",{children:D.subjectName}),D.roomId&&o.jsxs("span",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 px-1 rounded",children:[". ",((X=n.find(q=>q.id===D.roomId))==null?void 0:X.name)||D.roomId]})]})]},D.id)}),Te.length>1&&lt.length===0&&o.jsxs("div",{className:"text-center text-slate-400 text-xs py-4",children:["      (",h,")"]})]})]}),o.jsx(bn,{isOpen:b,onClose:()=>w(!1),title:" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("select",{value:y,onChange:D=>B(D.target.value),className:"w-full border p-3 rounded-xl outline-none font-bold text-slate-700 dark:text-white dark:bg-slate-700 dark:border-slate-600",children:[o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""}),o.jsx("option",{children:" "}),o.jsx("option",{children:""})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:tt,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:""})})]})})]})},F6=()=>{const{subjects:t,teachers:e,rooms:r,settings:n,saveStaticData:s}=Yn(),{schedule1:A,schedule2:i}=pi(),[l,a]=T.useState("teachers"),[c,d]=T.useState($c()),[h,f]=T.useState(ie.First),[p,v]=T.useState(1),[x,_]=T.useState(ie.First),[b,w]=T.useState(1),[I,F]=T.useState(""),[U,R]=T.useState(""),y=T.useMemo(()=>{const E={schedule:A,schedule2:i,settings:n};return Mk(new Date(c),E)},[c,A,i,n]);T.useEffect(()=>{n&&(F(n.telegramToken||""),R(n.feedbackChatId||""))},[n]),T.useEffect(()=>{v(h===ie.First?1:0)},[h]),T.useEffect(()=>{w(x===ie.First?1:0)},[x]);const B=T.useMemo(()=>{const E=new Date(c).getDay();return E===0||E===6?null:_t[E-1]},[c]),C=on[h],S=T.useMemo(()=>B?e.filter(E=>E.shifts&&!E.shifts.includes(h)||E.unavailableDates.includes(c)?!1:!y.some(We=>We.teacherId===E.id&&We.day===B&&We.period>p&&We.shift===h)).sort((E,Ke)=>E.name.localeCompare(Ke.name)):[],[e,c,B,p,h,y]),N=T.useMemo(()=>{if(!B)return[];const E=new Set;return y.forEach(We=>{We.day===B&&We.period===b&&We.shift===x&&We.roomId&&E.add(We.roomId)}),r.filter(We=>!E.has(We.id)).map(We=>We.name)},[y,r,B,b,x]),P=async()=>{await s({settings:{...n,telegramToken:I,feedbackChatId:U}}),alert(" !")};return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(O,{name:"Settings",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>a("teachers"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="teachers"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),o.jsx("button",{onClick:()=>a("rooms"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="rooms"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""}),o.jsx("button",{onClick:()=>a("settings"),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${l==="settings"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:""})]})]}),l!=="settings"&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsx("input",{type:"date",value:c,onChange:E=>d(E.target.value),className:"border border-slate-200 dark:border-slate-600 p-3 rounded-xl font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white w-full md:w-auto min-w-[200px]"})]}),l==="teachers"&&o.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>f(ie.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>f(ie.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:"   "}),o.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:C.map(E=>o.jsx("button",{onClick:()=>v(E),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${p===E?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:E},E))})]})]}),l==="rooms"&&o.jsxs("div",{className:"flex flex-wrap gap-8 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsxs("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>_(ie.First),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${x===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>_(ie.Second),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${x===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:" "}),o.jsx("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:on[x].map(E=>o.jsx("button",{onClick:()=>w(E),className:`w-10 h-10 flex items-center justify-center rounded-lg font-bold text-sm transition-all ${b===E?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,children:E},E))})]})]}),l==="settings"&&o.jsxs("div",{className:"space-y-6 max-w-xl mt-6",children:[o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[o.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"  Telegram"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Bot Token"}),o.jsx("input",{type:"password",value:I,onChange:E=>F(E.target.value),placeholder:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"  @BotFather"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:"Chat ID   "}),o.jsx("input",{type:"text",value:U,onChange:E=>R(E.target.value),placeholder:"-100123456789",className:"w-full border border-slate-200 dark:border-slate-600 p-3 rounded-xl text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500"}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"ID   ,        "})]})]})]}),o.jsxs("button",{onClick:P,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(O,{name:"Save",size:20}),"  "]})]})]}),l==="teachers"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[S.map(E=>o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm flex items-center gap-4 hover:shadow-md transition-all",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 flex items-center justify-center shrink-0",children:o.jsx(O,{name:"CheckCircle",size:22})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-200 text-lg leading-tight truncate",children:E.name}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:E.subjectIds.slice(0,2).map(Ke=>{const We=t.find(st=>st.id===Ke);return We?o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-medium",children:We.name},Ke):null})})]})]},E.id)),S.length===0&&o.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:["  ,   ",p,"   ",h]})]}),l==="rooms"&&o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[N.map(E=>o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm text-center flex flex-col items-center justify-center hover:border-indigo-500 transition-all hover:shadow-md group",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 flex items-center justify-center mb-2 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:o.jsx(O,{name:"DoorOpen",size:20})}),o.jsx("div",{className:"text-xl font-black text-slate-800 dark:text-white",children:E}),o.jsx("div",{className:"text-[10px] text-slate-400 dark:text-slate-500 font-bold uppercase tracking-wider mt-1",children:""})]},E)),N.length===0&&o.jsxs("div",{className:"col-span-full py-12 text-center text-slate-400",children:[o.jsx(O,{name:"AlertTriangle",size:48,className:"mx-auto mb-4 text-slate-300 dark:text-slate-600"}),o.jsx("p",{children:"      (   )."})]})]})]})};var S6=Object.defineProperty,gf=Object.getOwnPropertySymbols,n2=Object.prototype.hasOwnProperty,s2=Object.prototype.propertyIsEnumerable,LC=(t,e,r)=>e in t?S6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U6=(t,e)=>{for(var r in e||(e={}))n2.call(e,r)&&LC(t,r,e[r]);if(gf)for(var r of gf(e))s2.call(e,r)&&LC(t,r,e[r]);return t},Q6=(t,e)=>{var r={};for(var n in t)n2.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&gf)for(var n of gf(t))e.indexOf(n)<0&&s2.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var so;(t=>{const e=class{constructor(a,c,d,h){if(this.version=a,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=a*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(d);if(this.drawCodewords(p),h==-1){let v=1e9;for(let x=0;x<8;x++){this.applyMask(x),this.drawFormatBits(x);const _=this.getPenaltyScore();_<v&&(h=x,v=_),this.applyMask(x)}}A(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(a,c){const d=t.QrSegment.makeSegments(a);return e.encodeSegments(d,c)}static encodeBinary(a,c){const d=t.QrSegment.makeBytes(a);return e.encodeSegments([d],c)}static encodeSegments(a,c,d=1,h=40,f=-1,p=!0){if(!(e.MIN_VERSION<=d&&d<=h&&h<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,x;for(v=d;;v++){const I=e.getNumDataCodewords(v,c)*8,F=l.getTotalBits(a,v);if(F<=I){x=F;break}if(v>=h)throw new RangeError("Data too long")}for(const I of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])p&&x<=e.getNumDataCodewords(v,I)*8&&(c=I);let _=[];for(const I of a){n(I.mode.modeBits,4,_),n(I.numChars,I.mode.numCharCountBits(v),_);for(const F of I.getData())_.push(F)}A(_.length==x);const b=e.getNumDataCodewords(v,c)*8;A(_.length<=b),n(0,Math.min(4,b-_.length),_),n(0,(8-_.length%8)%8,_),A(_.length%8==0);for(let I=236;_.length<b;I^=253)n(I,8,_);let w=[];for(;w.length*8<_.length;)w.push(0);return _.forEach((I,F)=>w[F>>>3]|=I<<7-(F&7)),new e(v,c,w,f)}getModule(a,c){return 0<=a&&a<this.size&&0<=c&&c<this.size&&this.modules[c][a]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const a=this.getAlignmentPatternPositions(),c=a.length;for(let d=0;d<c;d++)for(let h=0;h<c;h++)d==0&&h==0||d==0&&h==c-1||d==c-1&&h==0||this.drawAlignmentPattern(a[d],a[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(a){const c=this.errorCorrectionLevel.formatBits<<3|a;let d=c;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const h=(c<<10|d)^21522;A(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,s(h,f));this.setFunctionModule(8,7,s(h,6)),this.setFunctionModule(8,8,s(h,7)),this.setFunctionModule(7,8,s(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,s(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,s(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,s(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let a=this.version;for(let d=0;d<12;d++)a=a<<1^(a>>>11)*7973;const c=this.version<<12|a;A(c>>>18==0);for(let d=0;d<18;d++){const h=s(c,d),f=this.size-11+d%3,p=Math.floor(d/3);this.setFunctionModule(f,p,h),this.setFunctionModule(p,f,h)}}drawFinderPattern(a,c){for(let d=-4;d<=4;d++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(d)),p=a+h,v=c+d;0<=p&&p<this.size&&0<=v&&v<this.size&&this.setFunctionModule(p,v,f!=2&&f!=4)}}drawAlignmentPattern(a,c){for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)this.setFunctionModule(a+h,c+d,Math.max(Math.abs(h),Math.abs(d))!=1)}setFunctionModule(a,c,d){this.modules[c][a]=d,this.isFunction[c][a]=!0}addEccAndInterleave(a){const c=this.version,d=this.errorCorrectionLevel;if(a.length!=e.getNumDataCodewords(c,d))throw new RangeError("Invalid argument");const h=e.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c],f=e.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c],p=Math.floor(e.getNumRawDataModules(c)/8),v=h-p%h,x=Math.floor(p/h);let _=[];const b=e.reedSolomonComputeDivisor(f);for(let I=0,F=0;I<h;I++){let U=a.slice(F,F+x-f+(I<v?0:1));F+=U.length;const R=e.reedSolomonComputeRemainder(U,b);I<v&&U.push(0),_.push(U.concat(R))}let w=[];for(let I=0;I<_[0].length;I++)_.forEach((F,U)=>{(I!=x-f||U>=v)&&w.push(F[I])});return A(w.length==p),w}drawCodewords(a){if(a.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const p=d-f,x=(d+1&2)==0?this.size-1-h:h;!this.isFunction[x][p]&&c<a.length*8&&(this.modules[x][p]=s(a[c>>>3],7-(c&7)),c++)}}A(c==a.length*8)}applyMask(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let d=0;d<this.size;d++){let h;switch(a){case 0:h=(d+c)%2==0;break;case 1:h=c%2==0;break;case 2:h=d%3==0;break;case 3:h=(d+c)%3==0;break;case 4:h=(Math.floor(d/3)+Math.floor(c/2))%2==0;break;case 5:h=d*c%2+d*c%3==0;break;case 6:h=(d*c%2+d*c%3)%2==0;break;case 7:h=((d+c)%2+d*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][d]&&h&&(this.modules[c][d]=!this.modules[c][d])}}getPenaltyScore(){let a=0;for(let f=0;f<this.size;f++){let p=!1,v=0,x=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[f][_]==p?(v++,v==5?a+=e.PENALTY_N1:v>5&&a++):(this.finderPenaltyAddHistory(v,x),p||(a+=this.finderPenaltyCountPatterns(x)*e.PENALTY_N3),p=this.modules[f][_],v=1);a+=this.finderPenaltyTerminateAndCount(p,v,x)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let p=!1,v=0,x=[0,0,0,0,0,0,0];for(let _=0;_<this.size;_++)this.modules[_][f]==p?(v++,v==5?a+=e.PENALTY_N1:v>5&&a++):(this.finderPenaltyAddHistory(v,x),p||(a+=this.finderPenaltyCountPatterns(x)*e.PENALTY_N3),p=this.modules[_][f],v=1);a+=this.finderPenaltyTerminateAndCount(p,v,x)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let p=0;p<this.size-1;p++){const v=this.modules[f][p];v==this.modules[f][p+1]&&v==this.modules[f+1][p]&&v==this.modules[f+1][p+1]&&(a+=e.PENALTY_N2)}let c=0;for(const f of this.modules)c=f.reduce((p,v)=>p+(v?1:0),c);const d=this.size*this.size,h=Math.ceil(Math.abs(c*20-d*10)/d)-1;return A(0<=h&&h<=9),a+=h*e.PENALTY_N4,A(0<=a&&a<=2568888),a}getAlignmentPatternPositions(){if(this.version==1)return[];{const a=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(a*2-2))*2;let d=[6];for(let h=this.size-7;d.length<a;h-=c)d.splice(1,0,h);return d}}static getNumRawDataModules(a){if(a<e.MIN_VERSION||a>e.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*a+128)*a+64;if(a>=2){const d=Math.floor(a/7)+2;c-=(25*d-10)*d-55,a>=7&&(c-=36)}return A(208<=c&&c<=29648),c}static getNumDataCodewords(a,c){return Math.floor(e.getNumRawDataModules(a)/8)-e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][a]*e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][a]}static reedSolomonComputeDivisor(a){if(a<1||a>255)throw new RangeError("Degree out of range");let c=[];for(let h=0;h<a-1;h++)c.push(0);c.push(1);let d=1;for(let h=0;h<a;h++){for(let f=0;f<c.length;f++)c[f]=e.reedSolomonMultiply(c[f],d),f+1<c.length&&(c[f]^=c[f+1]);d=e.reedSolomonMultiply(d,2)}return c}static reedSolomonComputeRemainder(a,c){let d=c.map(h=>0);for(const h of a){const f=h^d.shift();d.push(0),c.forEach((p,v)=>d[v]^=e.reedSolomonMultiply(p,f))}return d}static reedSolomonMultiply(a,c){if(a>>>8||c>>>8)throw new RangeError("Byte out of range");let d=0;for(let h=7;h>=0;h--)d=d<<1^(d>>>7)*285,d^=(c>>>h&1)*a;return A(d>>>8==0),d}finderPenaltyCountPatterns(a){const c=a[1];A(c<=this.size*3);const d=c>0&&a[2]==c&&a[3]==c*3&&a[4]==c&&a[5]==c;return(d&&a[0]>=c*4&&a[6]>=c?1:0)+(d&&a[6]>=c*4&&a[0]>=c?1:0)}finderPenaltyTerminateAndCount(a,c,d){return a&&(this.finderPenaltyAddHistory(c,d),c=0),c+=this.size,this.finderPenaltyAddHistory(c,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(a,c){c[0]==0&&(a+=this.size),c.pop(),c.unshift(a)}};let r=e;r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=r;function n(a,c,d){if(c<0||c>31||a>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(a>>>h&1)}function s(a,c){return(a>>>c&1)!=0}function A(a){if(!a)throw new Error("Assertion error")}const i=class{constructor(a,c,d){if(this.mode=a,this.numChars=c,this.bitData=d,c<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(a){let c=[];for(const d of a)n(d,8,c);return new i(i.Mode.BYTE,a.length,c)}static makeNumeric(a){if(!i.isNumeric(a))throw new RangeError("String contains non-numeric characters");let c=[];for(let d=0;d<a.length;){const h=Math.min(a.length-d,3);n(parseInt(a.substr(d,h),10),h*3+1,c),d+=h}return new i(i.Mode.NUMERIC,a.length,c)}static makeAlphanumeric(a){if(!i.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],d;for(d=0;d+2<=a.length;d+=2){let h=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d))*45;h+=i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d+1)),n(h,11,c)}return d<a.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(a.charAt(d)),6,c),new i(i.Mode.ALPHANUMERIC,a.length,c)}static makeSegments(a){return a==""?[]:i.isNumeric(a)?[i.makeNumeric(a)]:i.isAlphanumeric(a)?[i.makeAlphanumeric(a)]:[i.makeBytes(i.toUtf8ByteArray(a))]}static makeEci(a){let c=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)n(a,8,c);else if(a<16384)n(2,2,c),n(a,14,c);else if(a<1e6)n(6,3,c),n(a,21,c);else throw new RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,c)}static isNumeric(a){return i.NUMERIC_REGEX.test(a)}static isAlphanumeric(a){return i.ALPHANUMERIC_REGEX.test(a)}getData(){return this.bitData.slice()}static getTotalBits(a,c){let d=0;for(const h of a){const f=h.mode.numCharCountBits(c);if(h.numChars>=1<<f)return 1/0;d+=4+f+h.bitData.length}return d}static toUtf8ByteArray(a){a=encodeURI(a);let c=[];for(let d=0;d<a.length;d++)a.charAt(d)!="%"?c.push(a.charCodeAt(d)):(c.push(parseInt(a.substr(d+1,2),16)),d+=2);return c}};let l=i;l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=l})(so||(so={}));(t=>{(e=>{const r=class{constructor(s,A){this.ordinal=s,this.formatBits=A}};let n=r;n.LOW=new r(0,1),n.MEDIUM=new r(1,0),n.QUARTILE=new r(2,3),n.HIGH=new r(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(so||(so={}));(t=>{(e=>{const r=class{constructor(s,A){this.modeBits=s,this.numBitsCharCount=A}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};let n=r;n.NUMERIC=new r(1,[10,12,14]),n.ALPHANUMERIC=new r(2,[9,11,13]),n.BYTE=new r(4,[8,16,16]),n.KANJI=new r(8,[8,10,12]),n.ECI=new r(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(so||(so={}));var Gl=so;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var N6={L:Gl.QrCode.Ecc.LOW,M:Gl.QrCode.Ecc.MEDIUM,Q:Gl.QrCode.Ecc.QUARTILE,H:Gl.QrCode.Ecc.HIGH},R6=128,D6="L",P6="#FFFFFF",j6="#000000",L6=!1,A2=4,M6=.1;function O6(t,e=0){const r=[];return t.forEach(function(n,s){let A=null;n.forEach(function(i,l){if(!i&&A!==null){r.push(`M${A+e} ${s+e}h${l-A}v1H${A+e}z`),A=null;return}if(l===n.length-1){if(!i)return;A===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${A+e},${s+e} h${l+1-A}v1H${A+e}z`);return}i&&A===null&&(A=l)})}),r.join("")}function H6(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,A)=>A<e.x||A>=e.x+e.w?s:!1))}function V6(t,e,r,n){if(n==null)return null;const s=r?A2:0,A=t.length+s*2,i=Math.floor(e*M6),l=A/e,a=(n.width||i)*l,c=(n.height||i)*l,d=n.x==null?t.length/2-a/2:n.x*l,h=n.y==null?t.length/2-c/2:n.y*l;let f=null;if(n.excavate){let p=Math.floor(d),v=Math.floor(h),x=Math.ceil(a+d-p),_=Math.ceil(c+h-v);f={x:p,y:v,w:x,h:_}}return{x:d,y:h,h:c,w:a,excavation:f}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function K6(t){const e=t,{value:r,size:n=R6,level:s=D6,bgColor:A=P6,fgColor:i=j6,includeMargin:l=L6,imageSettings:a}=e,c=Q6(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let d=Gl.QrCode.encodeText(r,N6[s]).getModules();const h=l?A2:0,f=d.length+h*2,p=V6(d,n,l,a);let v=null;a!=null&&p!=null&&(p.excavation!=null&&(d=H6(d,p.excavation)),v=Cs.createElement("image",{xlinkHref:a.src,height:p.h,width:p.w,x:p.x+h,y:p.y+h,preserveAspectRatio:"none"}));const x=O6(d,h);return Cs.createElement("svg",U6({height:n,width:n,viewBox:`0 0 ${f} ${f}`},c),Cs.createElement("path",{fill:A,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),Cs.createElement("path",{fill:i,d:x,shapeRendering:"crispEdges"}),v)}const G6=()=>{const{subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,saveStaticData:i,dutyZones:l}=Yn(),{schedule1:a,schedule2:c,substitutions:d,saveScheduleData:h,dutySchedule:f}=pi(),p=T.useRef(null),v=T.useRef(null),x=T.useRef(null),[_,b]=T.useState($c()),[w,I]=T.useState(()=>Vx(new Date,s)),[F,U]=T.useState(!1),[R,y]=T.useState(!1),[B,C]=T.useState(""),[S,N]=T.useState(""),[P,E]=T.useState(!1),[Ke,We]=T.useState(""),st=T.useMemo(()=>({subjects:t,teachers:e,classes:r,rooms:n,settings:s,bellSchedule:A,schedule:a,schedule2:c,substitutions:d,dutyZones:l,dutySchedule:f}),[t,e,r,n,s,A,a,c,d,l,f]),Le=()=>w===2?c:a,ce=K=>{const G=new Date(K).getMonth();return G>=0&&G<=4?c:a},Te=T.useMemo(()=>{const K=new Set;return r.forEach(G=>{const re=G.name.match(/^(\d+)/);re&&K.add(re[1])}),Array.from(K).sort((G,re)=>parseInt(G)-parseInt(re))},[r]);T.useEffect(()=>{Te.length>0&&!Ke&&We(Te[0])},[Te]);const Pe=K=>{var tt;const G=(tt=K.target.files)==null?void 0:tt[0];if(!G)return;const re=new FileReader;re.onload=async ge=>{var Re;try{const Ce=JSON.parse((Re=ge.target)==null?void 0:Re.result);if(Ce.teachers&&(Ce.schedule||Ce.schedule2)){if(window.confirm("    . ?")){const ae={...$r,...Ce,rooms:Ce.rooms||$r.rooms,classes:Ce.classes||[],schedule:Ce.schedule||[],schedule2:Ce.schedule2||[],teachers:Ce.teachers||[],subjects:Ce.subjects||[],substitutions:Ce.substitutions||[],settings:{...$r.settings,...Ce.settings}};await i(ae),await h(ae),alert("  !")}}else alert("  .")}catch{alert("  .")}},re.readAsText(G)},Ze=()=>{const K=Le();let G=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }
                td, th { border: 1px solid #999; padding: 5px; vertical-align: top; }
                .header { background-color: #f3f4f6; font-weight: bold; text-align: center; }
                .class-cell { font-size: 14px; font-weight: bold; text-align: center; vertical-align: middle; }
                .subject { font-weight: bold; font-size: 11px; }
                .meta { font-size: 10px; color: #555; }
            </style></head><body><table>
        `;_t.forEach(Re=>{G+=`<tr><td colspan="8" style="background-color:#4f46e5; color:white; font-size:16px; font-weight:bold; text-align:center;">${Re}</td></tr>`,[ie.First,ie.Second].forEach(Ce=>{const ae=r.filter(me=>me.shift===Ce);ae.length!==0&&(G+=`<tr><td colspan="8" style="background-color:#e0e7ff; font-weight:bold;">${Ce}</td></tr>`,G+='<tr><th class="header"></th>',on[Ce].forEach(me=>G+=`<th class="header">${me} </th>`),G+="</tr>",ae.forEach(me=>{G+=`<tr><td class="class-cell">${me.name}</td>`,on[Ce].forEach(Ue=>{const qe=K.filter(ke=>ke.classId===me.id&&ke.day===Re&&ke.shift===Ce&&ke.period===Ue);G+='<td style="height: 60px;">',qe.forEach(ke=>{const at=t.find(ye=>ye.id===ke.subjectId),et=e.find(ye=>ye.id===ke.teacherId),ct=n.find(ye=>ye.id===ke.roomId),Ne=ct?ct.name:ke.roomId;G+=`<div style="background-color: ${(at==null?void 0:at.color)||"#fff"}; padding: 2px; margin-bottom: 2px; border: 1px solid #eee;">
                                <div class="subject">${(at==null?void 0:at.name)||""} ${ke.direction||""}</div>
                                <div class="meta">${(et==null?void 0:et.name)||""} ${Ne?`(. ${Ne})`:""}</div>
                            </div>`}),G+="</td>"}),G+="</tr>"}))})}),G+="</table></body></html>";const re=new Blob([G],{type:"application/vnd.ms-excel"}),tt=URL.createObjectURL(re),ge=document.createElement("a");ge.href=tt,ge.download=`_22_${w}.xls`,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)},Ge=()=>{const K=Le(),G={[dt.Monday]:{header:"#fecaca",cell:"#fee2e2"},[dt.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[dt.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[dt.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[dt.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let re=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 10pt; margin-bottom: 20px; width: 100%; }
                td, th { border: 1px solid #000; padding: 2px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; }
                .teacher-cell { text-align: left; padding-left: 5px; }
                sub { font-size: 10px; vertical-align: sub; }
                
                /* Doc Header/Footer Styles */
                .doc-table td { border: none !important; padding: 5px; vertical-align: top; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;re+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[ie.First,ie.Second].forEach(Ce=>{const ae=on[Ce];re+="<table>",re+=`<tr>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 150px; background-color: #e9d5ff;"> </th>
                <th rowspan="3" class="header" style="border: 2px solid #000; width: 200px; background-color: #e9d5ff;"></th>
                <th colspan="${_t.length*ae.length}" class="header" style="border: 2px solid #000; font-size: 14px; background-color: #f3f4f6;"> </th>
            </tr>`,re+="<tr>",_t.forEach(Ue=>{var ke;const qe=((ke=G[Ue])==null?void 0:ke.header)||"#f3f4f6";re+=`<th colspan="${ae.length}" class="header" style="border: 2px solid #000; background-color: ${qe};">${Ue}</th>`}),re+="</tr>",re+="<tr>",_t.forEach(Ue=>{var ke;const qe=((ke=G[Ue])==null?void 0:ke.header)||"#f3f4f6";ae.forEach(at=>re+=`<th class="header" style="border-bottom: 2px solid #000; background-color: ${qe};"></th>`)}),re+="</tr>";const me="#e5e7eb";re+=`<tr>
                <th class="header" style="border: 2px solid #000; background-color: ${me};">${Ce}</th>
                <th class="header" style="border: 2px solid #000; background-color: ${me};"></th>
            `,_t.forEach(Ue=>{var ke;const qe=((ke=G[Ue])==null?void 0:ke.header)||"#f3f4f6";ae.forEach(at=>re+=`<th class="header" style="width: 40px; background-color: ${qe};">${at}</th>`)}),re+="</tr>",t.forEach(Ue=>{const qe=e.filter(ke=>ke.subjectIds.includes(Ue.id)&&ke.shifts.includes(Ce));qe.length!==0&&(qe.forEach((ke,at)=>{re+="<tr>",at===0&&(re+=`<td rowspan="${qe.length}" class="subject-cell" style="border: 2px solid #000; background-color: #e9d5ff;">${Ue.name}</td>`),re+=`<td class="teacher-cell" style="border-right: 2px solid #000; background-color: #e9d5ff;">${ke.name}</td>`,_t.forEach(et=>{var Ne;const ct=((Ne=G[et])==null?void 0:Ne.cell)||"#fff";ae.forEach(ye=>{const Xe=K.find(lt=>lt.teacherId===ke.id&&lt.subjectId===Ue.id&&lt.day===et&&lt.period===ye&&lt.shift===Ce);if(Xe){const lt=r.find(H=>H.id===Xe.classId),Ct=n.find(H=>H.id===Xe.roomId),vt=Ct?Ct.name:Xe.roomId,D=vt?`<sub>${vt}</sub>`:"",X=Xe.direction?` <span style="font-size:10px">(${Xe.direction})</span>`:"";re+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ct};">${lt?lt.name:""}${X}${D}</td>`}else re+=`<td style="border: 1px solid #000; background-color: ${ct};"></td>`})}),re+="</tr>"}),re+=`<tr><td colspan="${2+_t.length*ae.length}" style="height: 2px; background-color: #000;"></td></tr>`)}),re+="</table><br/><br/>"}),re+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,re+="</body></html>";const tt=new Blob([re],{type:"application/vnd.ms-excel"}),ge=URL.createObjectURL(tt),Re=document.createElement("a");Re.href=ge,Re.download=`__${w}.xls`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)},$=()=>{const K=Le(),G={[dt.Monday]:{header:"#fecaca",cell:"#fee2e2"},[dt.Tuesday]:{header:"#fed7aa",cell:"#ffedd5"},[dt.Wednesday]:{header:"#fef08a",cell:"#fef9c3"},[dt.Thursday]:{header:"#bbf7d0",cell:"#dcfce7"},[dt.Friday]:{header:"#bfdbfe",cell:"#dbeafe"}};let re=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                /* Poster scaling */
                table { border-collapse: collapse; font-family: Arial, sans-serif; font-size: 16pt; margin-bottom: 40px; width: 100%; }
                td, th { border: 2px solid #000; padding: 4px; vertical-align: middle; text-align: center; }
                .header { font-weight: bold; }
                .subject-cell { font-weight: bold; vertical-align: middle; background-color: #fff; font-size: 20pt; }
                .teacher-cell { text-align: left; padding-left: 10px; font-size: 20pt; }
                sub { font-size: 12pt; vertical-align: sub; }
                
                /* Doc Header/Footer Styles - Scaled */
                .doc-table td { border: none !important; padding: 10px; vertical-align: top; font-size: 16pt; }
                .doc-left { text-align: left; }
                .doc-right { text-align: right; }
            </style></head><body>
        `;re+=`
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left"></td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right"></td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">   " 22 ."</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">  " 22 ."</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">____________________ ..</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">____________________ ..</td>
                </tr>
                <tr>
                    <td colspan="10" class="doc-left">"__"_ __________ 2025.</td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">"__" __________ 2025.</td>
                </tr>
            </table>
            <br/>
        `,[ie.First,ie.Second].forEach(Ce=>{const ae=on[Ce];re+="<table>",re+=`<tr>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 350px; background-color: #e9d5ff; font-size: 24pt;"> </th>
                <th rowspan="3" class="header" style="border: 3px solid #000; width: 450px; background-color: #e9d5ff; font-size: 24pt;"></th>
                <th colspan="${_t.length*ae.length}" class="header" style="border: 3px solid #000; font-size: 24pt; background-color: #f3f4f6;"> </th>
            </tr>`,re+="<tr>",_t.forEach(Ue=>{var ke;const qe=((ke=G[Ue])==null?void 0:ke.header)||"#f3f4f6";re+=`<th colspan="${ae.length}" class="header" style="border: 3px solid #000; background-color: ${qe}; font-size: 20pt;">${Ue}</th>`}),re+="</tr>",re+="<tr>",_t.forEach(Ue=>{var ke;const qe=((ke=G[Ue])==null?void 0:ke.header)||"#f3f4f6";re+=`<th colspan="${ae.length}" class="header" style="border-bottom: 3px solid #000; background-color: ${qe}; font-size: 16pt;"></th>`}),re+="</tr>";const me="#e5e7eb";re+=`<tr>
                <th class="header" style="border: 3px solid #000; background-color: ${me}; font-size: 24pt;">${Ce}</th>
                <th class="header" style="border: 3px solid #000; background-color: ${me};"></th>
            `,_t.forEach(Ue=>{var ke;const qe=((ke=G[Ue])==null?void 0:ke.header)||"#f3f4f6";ae.forEach(at=>re+=`<th class="header" style="width: 20px; background-color: ${qe}; font-size: 16pt;">${at}</th>`)}),re+="</tr>",t.forEach(Ue=>{const qe=e.filter(ke=>ke.subjectIds.includes(Ue.id)&&ke.shifts.includes(Ce));qe.length!==0&&(qe.forEach((ke,at)=>{re+="<tr>",at===0&&(re+=`<td rowspan="${qe.length}" class="subject-cell" style="border: 3px solid #000; background-color: #e9d5ff;">${Ue.name}</td>`),re+=`<td class="teacher-cell" style="border-right: 3px solid #000; background-color: #e9d5ff;">${ke.name}</td>`,_t.forEach(et=>{var Ne;const ct=((Ne=G[et])==null?void 0:Ne.cell)||"#fff";ae.forEach(ye=>{const Xe=K.find(lt=>lt.teacherId===ke.id&&lt.subjectId===Ue.id&&lt.day===et&&lt.period===ye&&lt.shift===Ce);if(Xe){const lt=r.find(q=>q.id===Xe.classId),Ct=n.find(q=>q.id===Xe.roomId),vt=Ct?Ct.name:Xe.roomId,D=vt?`<sub>${vt}</sub>`:"",X=Xe.direction?` <span style="font-size:14px">(${Xe.direction})</span>`:"";re+=`<td style="border: 1px solid #000; font-weight: bold; background-color: ${ct}; height: 60px;">${lt?lt.name:""}${X}${D}</td>`}else re+=`<td style="border: 1px solid #000; background-color: ${ct};"></td>`})}),re+="</tr>"}),re+=`<tr><td colspan="${2+_t.length*ae.length}" style="height: 4px; background-color: #000;"></td></tr>`)}),re+="</table><br/><br/>"}),re+=`
            <br/>
            <table class="doc-table" style="width: 100%; border: none;">
                <tr>
                    <td colspan="10" class="doc-left">  </td>
                    <td colspan="17"></td>
                    <td colspan="10" class="doc-right">..</td>
                </tr>
            </table>
        `,re+="</body></html>";const tt=new Blob([re],{type:"application/vnd.ms-excel"}),ge=URL.createObjectURL(tt),Re=document.createElement("a");Re.href=ge,Re.download=`__${w}.xls`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re)},he=()=>{const K=Le(),G=r.filter(me=>me.name.startsWith(Ke)).sort((me,Ue)=>me.name.localeCompare(Ue.name)),re=Array.from(new Set(G.map(me=>me.shift))).sort(),tt={[dt.Monday]:{label:"#fecaca",cell:"#fee2e2"},[dt.Tuesday]:{label:"#fed7aa",cell:"#ffedd5"},[dt.Wednesday]:{label:"#fef08a",cell:"#fef9c3"},[dt.Thursday]:{label:"#bbf7d0",cell:"#dcfce7"},[dt.Friday]:{label:"#bfdbfe",cell:"#dbeafe"}};let ge=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <style>
                    table { border-collapse: collapse; font-family: Arial, sans-serif; width: 100%; }
                    td, th { border: 1px solid #000000; text-align: center; vertical-align: middle; padding: 4px; }
                    .shift-header { font-size: 16pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .class-header { font-size: 12pt; font-weight: bold; background-color: #ffffff; text-align: center; border: 2px solid #000; }
                    .day-cell { 
                        font-weight: bold; 
                        text-transform: uppercase; 
                        writing-mode: vertical-lr; 
                        transform: rotate(180deg);
                        text-align: center;
                        vertical-align: middle;
                        border: 2px solid #000;
                        mso-rotate: 90; 
                    }
                    .period-cell { font-weight: bold; border: 2px solid #000; }
                    .content-cell { font-weight: bold; border: 1px solid #000; height: 50px; }
                    .subject { font-weight: bold; }
                    .room { font-size: 8pt; font-weight: bold; }
                </style>
            </head>
            <body>
        `;re.forEach(me=>{const Ue=G.filter(ke=>ke.shift===me),qe=on[me];Ue.length!==0&&(ge+="<table>",ge+="<tr>",ge+='<td style="border:none"></td>',ge+='<td style="border:none"></td>',ge+=`<td colspan="${Ue.length}" class="shift-header">${me}</td>`,ge+="</tr>",ge+="<tr>",ge+='<td style="border:none"></td>',ge+='<td style="border:none"></td>',Ue.forEach(ke=>{ge+=`<td class="class-header">${ke.name}</td>`}),ge+="</tr>",_t.forEach(ke=>{const at=tt[ke]||{label:"#e5e7eb",cell:"#f3f4f6"};qe.forEach((et,ct)=>{ge+="<tr>",ct===0&&(ge+=`<td rowspan="${qe.length}" class="day-cell" style="background-color: ${at.label};">${ke.toUpperCase()}</td>`),ge+=`<td class="period-cell" style="background-color: ${at.label};">${et}</td>`,Ue.forEach(Ne=>{const ye=K.filter(Xe=>Xe.classId===Ne.id&&Xe.day===ke&&Xe.shift===me&&Xe.period===et);ge+=`<td class="content-cell" style="background-color: ${at.cell};">`,ye.forEach((Xe,lt)=>{lt>0&&(ge+='<br style="mso-data-placement:same-cell;">');const Ct=t.find(X=>X.id===Xe.subjectId),vt=n.find(X=>X.id===Xe.roomId),D=vt?vt.name:Xe.roomId||"";ge+=`<span class="subject">${(Ct==null?void 0:Ct.name)||""}</span>`,D&&(ge+=` <span class="room">${D}</span>`)}),ge+="</td>"}),ge+="</tr>"}),ge+=`<tr><td colspan="${2+Ue.length}" style="height: 3px; background-color: #000000; border: none;"></td></tr>`}),ge+="</table><br><br>")}),ge+="</body></html>";const Re=new Blob([ge],{type:"application/vnd.ms-excel"}),Ce=URL.createObjectURL(Re),ae=document.createElement("a");ae.href=Ce,ae.download=`__${Ke}_.xls`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},W=()=>{const K=new Date(_),G=K.getUTCMonth(),re=K.getUTCFullYear(),tt=d.filter(Ne=>{const ye=new Date(Ne.date);return ye.getUTCMonth()===G&&ye.getUTCFullYear()===re}).sort((Ne,ye)=>new Date(Ne.date).getTime()-new Date(ye.date).getTime());if(tt.length===0){alert("      .");return}const ge=new Map;tt.forEach(Ne=>{const ye=`${Ne.scheduleItemId}_${Ne.date}`,Xe=ge.get(ye)||[];Xe.push(Ne),ge.set(ye,Xe)});const Re=[],Ce=[];ge.forEach(Ne=>{var q;const ye=Ne[0],Xe=a.find(H=>H.id===ye.scheduleItemId)||c.find(H=>H.id===ye.scheduleItemId);if(!Xe)return;const lt=r.find(H=>H.id===Xe.classId),Ct=t.find(H=>H.id===Xe.subjectId),vt=e.find(H=>H.id===ye.originalTeacherId);let D=ye.lessonAbsenceReason||((q=vt==null?void 0:vt.absenceReasons)==null?void 0:q[ye.date])||"";ye.replacementTeacherId===ye.originalTeacherId&&ye.replacementRoomId&&!ye.replacementClassId&&(D=" "),ye.replacementClassId&&ye.replacementSubjectId&&!ye.isMerger&&(D=" ");const X={subs:Ne,scheduleItem:Xe,cls:lt,subj:Ct,origTeacher:vt,reason:D};D===" "?Ce.push(X):Re.push(X)});let ae=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                body { font-family: Arial, sans-serif; font-size: 12px; }
                table { border-collapse: collapse; width: 100%; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #e0e7ff; font-weight: bold; text-align: center; }
                .header-warning { background-color: #fee2e2; font-weight: bold; text-align: center; }
                .date-row { background-color: #f3f4f6; font-weight: bold; }
            </style></head><body>
            <h3>    ${K.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
        `;const me=Ne=>Ne.map(ye=>{const{subs:Xe,scheduleItem:lt,cls:Ct,subj:vt,origTeacher:D,reason:X}=ye,q=Xe[0],H=new Date(q.date).toLocaleDateString("ru-RU");let De="";if(q.replacementTeacherId==="conducted")De=" ";else if(q.replacementTeacherId==="cancelled")De=" ";else if(De=Xe.map(Z=>{const Ae=e.find(se=>se.id===Z.replacementTeacherId);return Ae?Ae.name:""}).join(", "),q.isMerger){let Z=" ()";if(q.replacementClassId){const Ae=r.find(se=>se.id===q.replacementClassId);Ae&&(Z=` (  ${Ae.name})`)}De+=Z}else if(q.replacementClassId&&q.replacementSubjectId){const Z=r.find(se=>se.id===q.replacementClassId),Ae=t.find(se=>se.id===q.replacementSubjectId);De+=` ( ${(Z==null?void 0:Z.name)||"?"} ${(Ae==null?void 0:Ae.name)||"?"})`}const Ee=lt.roomId,ve=q.replacementRoomId,_e=ve||Ee,He=n.find(ne=>ne.id===_e),Q=He?He.name:_e||"-",V=ve?`${Q} ( .)`:Q;return`
                    <tr>
                        <td>${H}</td>
                        <td>${lt.period}</td>
                        <td>${lt.shift}</td>
                        <td>${(Ct==null?void 0:Ct.name)||"?"}</td>
                        <td>${(vt==null?void 0:vt.name)||"?"}</td>
                        <td>${(D==null?void 0:D.name)||"?"}</td>
                        <td>${De}</td>
                        <td>${V}</td>
                        <td>${X}</td>
                    </tr>
                `}).join(""),Ue=(Ne,ye=!1)=>`
            <table>
            <thead>
                <tr class="${ye?"header-warning":"header"}">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th> </th>
                    <th></th>
                    <th> / </th>
                </tr>
            </thead>
            <tbody>
                ${me(Ne)}
            </tbody>
            </table>
        `;Re.length>0?ae+=Ue(Re):ae+="<p>     .</p>",Ce.length>0&&(ae+="<br/><br/>",ae+='<h3 style="color: #b91c1c;">   (  )</h3>',ae+=Ue(Ce,!0));const qe=new Map;tt.forEach(Ne=>{var vt;if(Ne.replacementTeacherId==="conducted"||Ne.replacementTeacherId==="cancelled"||Ne.replacementTeacherId===Ne.originalTeacherId)return;const ye=e.find(D=>D.id===Ne.replacementTeacherId);if(!ye)return;const Xe=qe.get(ye.id)||{name:ye.name,total:0,withoutRecord:0,merger:0,other:0,illness:0},lt=e.find(D=>D.id===Ne.originalTeacherId);let Ct=Ne.lessonAbsenceReason||((vt=lt==null?void 0:lt.absenceReasons)==null?void 0:vt[Ne.date])||"";Ne.replacementClassId&&Ne.replacementSubjectId&&!Ne.isMerger&&(Ct=" "),Xe.total++,Ne.isMerger?Xe.merger++:Ct===""?Xe.illness++:Ct===" "?Xe.withoutRecord++:Xe.other++,qe.set(ye.id,Xe)});const ke=Array.from(qe.values()).sort((Ne,ye)=>Ne.name.localeCompare(ye.name));ke.length>0&&(ae+="<br/><br/>",ae+="<h3>   </h3>",ae+=`
             <table style="border-collapse: collapse; width: 60%;">
             <thead>
                 <tr class="header">
                     <th style="border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"></th>
                     <th style="text-align: center; border: 1px solid #999; padding: 4px;"> </th>
                 </tr>
             </thead>
             <tbody>
             `,ke.forEach(Ne=>{ae+=`
                     <tr>
                         <td style="border: 1px solid #999; padding: 4px;">${Ne.name}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ne.total}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ne.illness}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ne.withoutRecord}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ne.merger}</td>
                         <td style="text-align: center; border: 1px solid #999; padding: 4px;">${Ne.other}</td>
                     </tr>
                 `}),ae+="</tbody></table>"),ae+="</body></html>";const at=new Blob([ae],{type:"application/vnd.ms-excel"}),et=URL.createObjectURL(at),ct=document.createElement("a");ct.href=et,ct.download=`__${K.getMonth()+1}_${K.getFullYear()}.xls`,document.body.appendChild(ct),ct.click(),document.body.removeChild(ct)},pe=()=>{const K=new Date(_),G=K.getUTCMonth(),re=K.getUTCFullYear(),tt=d.filter(me=>{const Ue=new Date(me.date),qe=Ue.getUTCMonth()===G&&Ue.getUTCFullYear()===re,ke=me.refusals&&me.refusals.length>0;return qe&&ke}).sort((me,Ue)=>new Date(me.date).getTime()-new Date(Ue.date).getTime());if(tt.length===0){alert("      .");return}let ge=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8"><style>
                table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }
                td, th { border: 1px solid #999; padding: 4px; vertical-align: middle; text-align: left; }
                .header { background-color: #fca5a5; font-weight: bold; text-align: center; } 
            </style></head><body>
            <h3>    ${K.toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}</h3>
            <table>
            <thead>
                <tr class="header">
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                    <th>   </th>
                    <th>,  </th>
                </tr>
            </thead>
            <tbody>
        `;tt.forEach(me=>{const Ue=a.find(ye=>ye.id===me.scheduleItemId)||c.find(ye=>ye.id===me.scheduleItemId);if(!Ue)return;const qe=new Date(me.date).toLocaleDateString("ru-RU"),ke=r.find(ye=>ye.id===Ue.classId),at=t.find(ye=>ye.id===Ue.subjectId),et=e.find(ye=>ye.id===me.originalTeacherId);let ct="";if(me.replacementTeacherId==="conducted")ct=" ";else if(me.replacementTeacherId==="cancelled")ct=" ";else{const ye=e.find(Xe=>Xe.id===me.replacementTeacherId);ct=ye?ye.name:""}const Ne=(me.refusals||[]).map(ye=>{const Xe=e.find(lt=>lt.id===ye);return Xe?Xe.name:""}).join(", ");ge+=`
                <tr>
                    <td>${qe}</td>
                    <td>${Ue.period}</td>
                    <td>${Ue.shift}</td>
                    <td>${(ke==null?void 0:ke.name)||"?"}</td>
                    <td>${(at==null?void 0:at.name)||"?"}</td>
                    <td>${(et==null?void 0:et.name)||"?"}</td>
                    <td>${ct}</td>
                    <td>${Ne}</td>
                </tr>
            `}),ge+="</tbody></table></body></html>";const Re=new Blob([ge],{type:"application/vnd.ms-excel"}),Ce=URL.createObjectURL(Re),ae=document.createElement("a");ae.href=Ce,ae.download=`__${K.getMonth()+1}_${K.getFullYear()}.xls`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},Ie=()=>{const K=Le();let G=`							
`;_t.forEach(re=>{[ie.First,ie.Second].forEach(tt=>{r.filter(Re=>Re.shift===tt).forEach(Re=>{on[tt].forEach(Ce=>{K.filter(me=>me.classId===Re.id&&me.day===re&&me.shift===tt&&me.period===Ce).forEach(me=>{const Ue=t.find(et=>et.id===me.subjectId),qe=e.find(et=>et.id===me.teacherId),ke=n.find(et=>et.id===me.roomId),at=ke?ke.name:me.roomId||"";G+=`${re}	${tt}	${Re.name}	${Ce}	${(Ue==null?void 0:Ue.name)||""}	${(qe==null?void 0:qe.name)||""}	${at}	${me.direction||""}
`})})})})}),navigator.clipboard.writeText(G).then(()=>{alert(" !  Google Sheets   Ctrl+V (Cmd+V).")})},At=async()=>{U(!0);try{if(!v.current){alert("   1- .");return}const K=await ff(v.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),G=document.createElement("a");G.href=K.toDataURL("image/png"),G.download=`_${_}_1.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}catch(K){console.error(K),alert("   ")}finally{U(!1)}},ut=async()=>{U(!0);try{if(!x.current){alert("   2- .");return}const K=await ff(x.current,{scale:2,backgroundColor:"#ffffff",logging:!1}),G=document.createElement("a");G.href=K.toDataURL("image/png"),G.download=`_${_}_2.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}catch(K){console.error(K),alert("   ")}finally{U(!1)}},te=T.useMemo(()=>d.filter(K=>K.date===_),[d,_]),ue=T.useMemo(()=>{const K=ce(_);return te.filter(G=>{const re=K.find(tt=>tt.id===G.scheduleItemId);return re&&re.shift===ie.First}).filter(G=>G.replacementTeacherId!=="conducted").length>0},[te,ce,_]),fe=T.useMemo(()=>{const K=ce(_);return te.filter(G=>{const re=K.find(tt=>tt.id===G.scheduleItemId);return re&&re.shift===ie.Second}).filter(G=>G.replacementTeacherId!=="conducted").length>0},[te,ce,_]),de=K=>{const G=ce(_),re=te.filter(ge=>{const Re=G.find(Ce=>Ce.id===ge.scheduleItemId);return Re&&Re.shift===K}).filter(ge=>ge.replacementTeacherId!=="conducted");if(re.length===0)return null;const tt=Array.from(new Set(re.map(ge=>ge.scheduleItemId))).sort((ge,Re)=>{const Ce=G.find(me=>me.id===ge),ae=G.find(me=>me.id===Re);return((Ce==null?void 0:Ce.period)??0)-((ae==null?void 0:ae.period)??0)});return o.jsxs("div",{children:[o.jsx("div",{className:"text-xl font-bold bg-slate-100 text-slate-700 p-2 mb-2 uppercase tracking-wide border-l-4 border-indigo-500",children:K}),o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-slate-200",children:[o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-16 text-center",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-24",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-1/4",children:""}),o.jsx("th",{className:"py-3 px-2 font-black text-slate-400 text-xs uppercase tracking-wider w-20 text-right",children:"."})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:tt.map(ge=>{var De,Ee,ve;const Re=re.filter(_e=>_e.scheduleItemId===ge),Ce=Re[0],ae=G.find(_e=>_e.id===ge);if(!ae)return null;const me=r.find(_e=>_e.id===ae.classId),Ue=t.find(_e=>_e.id===ae.subjectId),qe=e.find(_e=>_e.id===Ce.originalTeacherId),ke=Ce.replacementRoomId,at=ae.roomId?n.find(_e=>_e.id===ae.roomId):null,et=at?at.name:ae.roomId||"",ct=ke?n.find(_e=>_e.id===ke):null,Ne=ct?ct.name:ke||"",ye=Ce.replacementTeacherId==="cancelled",Xe=(De=qe==null?void 0:qe.absenceReasons)==null?void 0:De[_],lt=Ce.lessonAbsenceReason,Ct=lt===" "?lt:Xe===" "?Xe:"",vt=Ce.replacementClassId?r.find(_e=>_e.id===Ce.replacementClassId):null,D=Ce.replacementSubjectId?t.find(_e=>_e.id===Ce.replacementSubjectId):null,X=Ce.replacementTeacherId===Ce.originalTeacherId&&ke&&!vt,q=vt&&D&&!Ce.isMerger,H=Ce.replacementTeacherId===Ce.originalTeacherId;return o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 px-2 text-center font-bold text-slate-800 text-lg",children:ae.period}),o.jsx("td",{className:"py-3 px-2 font-bold text-slate-700",children:me==null?void 0:me.name}),o.jsxs("td",{className:"py-3 px-2",children:[o.jsx("div",{className:"font-semibold text-slate-800",children:Ue==null?void 0:Ue.name}),ae.direction&&o.jsx("div",{className:"text-[10px] text-slate-500 bg-slate-100 inline-block px-1 rounded mt-0.5",children:ae.direction})]}),o.jsx("td",{className:"py-3 px-2",children:!H&&!X&&!q&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative inline-block text-red-400 text-sm font-medium",children:[qe==null?void 0:qe.name,o.jsx("div",{className:"absolute left-0 top-[85%] w-full h-px bg-red-300"})]}),Ct&&o.jsx("span",{className:"text-[10px] text-slate-500 block font-bold uppercase mt-0.5",children:Ct})]})}),o.jsx("td",{className:`py-3 px-2 font-bold text-sm ${ye?"text-red-600 uppercase font-black":"text-emerald-700"}`,children:X?o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-800",children:qe==null?void 0:qe.name}),o.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase tracking-wide mt-0.5",children:" "})]}):q?o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-800",children:qe==null?void 0:qe.name}),o.jsxs("span",{className:"text-[10px] text-purple-600 font-bold uppercase tracking-wide mt-0.5",children:[" : ",vt==null?void 0:vt.name]})]}):ye?o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{children:" "})}):o.jsx("div",{className:"flex flex-col",children:Re.length>1||Ce.isMerger?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"text-slate-800 text-xs",children:Re.map(_e=>{const He=e.find(Q=>Q.id===_e.replacementTeacherId);return He?He.name:""}).join(", ")}),o.jsxs("span",{className:"text-[9px] font-black text-purple-600 uppercase tracking-widest mt-0.5",children:[" ",Ce.replacementClassId?`(${(Ee=r.find(_e=>_e.id===Ce.replacementClassId))==null?void 0:Ee.name})`:""]})]}):o.jsx("span",{children:(ve=e.find(_e=>_e.id===Ce.replacementTeacherId))==null?void 0:ve.name})})}),o.jsx("td",{className:`py-3 px-2 text-right font-mono font-black ${ke?"text-indigo-600":"text-slate-700"}`,children:ke&&ke!==ae.roomId?o.jsxs("div",{className:"flex items-center justify-end gap-2 text-xl whitespace-nowrap",children:[o.jsx("span",{className:"text-slate-400 decoration-4 text-xl",children:et}),o.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:""}),o.jsx("span",{className:"text-indigo-600 font-black text-2xl",children:Ne})]}):o.jsx("span",{className:"text-xl",children:et})})]},String(ge))})})]})]})},j=async()=>{const K=fn();await br.setPublicData(K,st),await i({settings:{...s,publicScheduleId:K}});const G=`${window.location.origin}${window.location.pathname}#/public?id=${K}`;C(G),N(K),y(!0)},Y=async()=>{!s.publicScheduleId||!window.confirm(" ,     ?      .")||(await br.deletePublicData(s.publicScheduleId),await i({settings:{...s,publicScheduleId:null}}),alert("  ."),C(""),N(""))},ee=()=>o.jsxs("div",{className:"flex justify-between items-end border-b-2 border-slate-800 pb-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight mb-1 text-slate-800",children:" "}),o.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:" 22   "})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider mb-1",children:""}),o.jsx("div",{className:"text-xl font-bold text-slate-800",children:new Date(_).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),xe=()=>o.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 flex justify-between items-end text-[10px] text-slate-400",children:[o.jsx("div",{children:" "}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsx("div",{className:"h-px w-32 bg-slate-300"}),o.jsx("div",{children:" "})]})]}),Je=()=>{const K=Le(),G=r.filter(ge=>ge.name.startsWith(Ke)).sort((ge,Re)=>ge.name.localeCompare(Re.name)),re=Array.from(new Set(G.map(ge=>ge.shift))).sort(),tt={[dt.Monday]:{label:"bg-red-200",cell:"bg-red-100"},[dt.Tuesday]:{label:"bg-orange-200",cell:"bg-orange-100"},[dt.Wednesday]:{label:"bg-yellow-200",cell:"bg-yellow-100"},[dt.Thursday]:{label:"bg-green-200",cell:"bg-green-100"},[dt.Friday]:{label:"bg-blue-200",cell:"bg-blue-100"}};return G.length===0?o.jsx("div",{className:"text-center p-10",children:"    "}):o.jsx("div",{className:"font-sans text-black",children:re.map(ge=>{const Re=G.filter(ae=>ae.shift===ge),Ce=on[ge];return Re.length===0?null:o.jsx("div",{className:"mb-10 page-break-inside-avoid",children:o.jsxs("table",{className:"w-full border-collapse border-2 border-black text-center text-sm",children:[o.jsxs("thead",{children:[o.jsxs("tr",{children:[o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{colSpan:Re.length,className:"border-2 border-black py-2 text-xl uppercase font-black tracking-widest bg-white",children:ge})]}),o.jsxs("tr",{children:[o.jsx("th",{className:"border-2 border-black w-8"}),o.jsx("th",{className:"border-2 border-black w-8"}),Re.map(ae=>o.jsx("th",{className:"border-2 border-black py-2 font-bold text-lg bg-white w-32",children:ae.name},String(ae.id)))]})]}),o.jsx("tbody",{children:_t.map(ae=>{const me=tt[ae]||{label:"bg-gray-200",cell:"bg-gray-100"};return o.jsxs(Cs.Fragment,{children:[Ce.map((Ue,qe)=>o.jsxs("tr",{children:[qe===0&&o.jsx("td",{rowSpan:Ce.length,className:`border-2 border-black font-bold uppercase text-xs writing-vertical-lr rotate-180 p-1 ${me.label}`,style:{writingMode:"vertical-lr",transform:"rotate(180deg)"},children:ae===dt.Monday?"":ae===dt.Tuesday?"":ae===dt.Wednesday?"":ae===dt.Thursday?"":ae===dt.Friday?"":ae}),o.jsx("td",{className:`border-2 border-black font-bold text-base ${me.label}`,children:Ue}),Re.map(ke=>{const at=K.filter(et=>et.classId===ke.id&&et.day===ae&&et.shift===ge&&et.period===Ue);return o.jsx("td",{className:`border-2 border-black p-1 h-12 ${me.cell}`,children:at.map(et=>{const ct=t.find(Xe=>Xe.id===et.subjectId),Ne=n.find(Xe=>Xe.id===et.roomId),ye=Ne?Ne.name:et.roomId||"";return o.jsxs("div",{className:"flex justify-center items-center gap-1 leading-tight text-sm font-bold",children:[o.jsx("span",{children:ct==null?void 0:ct.name}),ye&&o.jsx("span",{className:"font-black",children:ye})]},String(et.id))})},String(ke.id))})]},`${String(ae)}-${Ue}`)),o.jsx("tr",{className:"h-1 bg-black border-2 border-black",children:o.jsx("td",{colSpan:2+Re.length})})]},String(ae))})})]})},String(ge))})})};return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 pb-20",children:[o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"Download",className:"text-indigo-600 dark:text-indigo-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("button",{onClick:()=>br.exportJson(st),className:"btn-primary btn-ripple flex items-center gap-2",children:[o.jsx(O,{name:"Download",size:20}),"  JSON"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"file",ref:p,onChange:Pe,accept:".json",className:"hidden"}),o.jsxs("button",{onClick:()=>{var K;return(K=p.current)==null?void 0:K.click()},className:"px-6 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-200 rounded-xl font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition flex items-center gap-2",children:[o.jsx(O,{name:"Upload",size:20}),"  JSON"]})]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[o.jsx(O,{name:"Image",className:"text-indigo-600 dark:text-indigo-400"}),"   (PNG)"]}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center",children:'      ""  ""    .'})]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsx("input",{type:"date",value:_,onChange:K=>b(K.target.value),className:"border border-slate-200 dark:border-slate-600 p-2 rounded-lg font-bold outline-none focus:border-indigo-500 bg-transparent dark:text-white"}),o.jsx("button",{onClick:At,disabled:F||!ue,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:F?o.jsxs(o.Fragment,{children:[o.jsx(O,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{name:"Download",size:20})," 1- "]})}),o.jsx("button",{onClick:ut,disabled:F||!fe,className:"btn-primary btn-ripple flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none",children:F?o.jsxs(o.Fragment,{children:[o.jsx(O,{name:"Loader",size:20,className:"animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(O,{name:"Download",size:20})," 2- "]})})]})]}),o.jsx("div",{className:"overflow-auto bg-slate-100 dark:bg-slate-900 p-8 rounded-xl border border-slate-200 dark:border-slate-700 flex justify-start",children:te.length===0?o.jsxs("div",{className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(ee,{}),o.jsx("div",{className:"py-12 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:o.jsx("p",{className:"text-slate-400 font-medium italic",children:"    "})}),o.jsx(xe,{})]}):o.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[ue&&o.jsxs("div",{ref:v,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(ee,{}),de(ie.First),o.jsx(xe,{})]}),fe&&o.jsxs("div",{ref:x,className:"bg-white p-8 min-w-[800px] max-w-[1000px] shadow-xl text-slate-900",children:[o.jsx(ee,{}),de(ie.Second),o.jsx(xe,{})]})]})})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"Printer",className:"text-blue-600 dark:text-blue-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsx("select",{value:Ke,onChange:K=>We(K.target.value),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:Te.map(K=>o.jsxs("option",{value:K,children:[K,"- "]},K))})]}),o.jsxs("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(O,{name:"Printer",size:20}),"    "]}),o.jsxs("button",{onClick:he,className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(O,{name:"FileSpreadsheet",size:20}),"  Excel"]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"FileSpreadsheet",className:"text-emerald-600 dark:text-emerald-400"}),"  "]}),o.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:w,onChange:K=>I(Number(K.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1- (-)"}),o.jsx("option",{value:2,children:"2- (-)"})]})]}),o.jsxs("button",{onClick:Ze,className:"px-6 py-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition flex items-center gap-2",children:[o.jsx(O,{name:"FileSpreadsheet",size:20}),"  Excel (XLS)"]}),o.jsxs("button",{onClick:Ge,className:"px-6 py-3 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-100 dark:border-blue-900 rounded-xl font-bold hover:bg-blue-100 dark:hover:bg-blue-900/50 transition flex items-center gap-2",children:[o.jsx(O,{name:"Table",size:20}),"   (XLS)"]}),o.jsxs("button",{onClick:$,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[o.jsx(O,{name:"Table",size:20}),"   (XLS)"]}),o.jsxs("button",{onClick:Ie,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700 transition shadow-lg shadow-green-200 dark:shadow-none flex items-center gap-2",children:[o.jsx(O,{name:"Clipboard",size:20}),"   Google Sheets"]}),o.jsxs("button",{onClick:W,className:"px-6 py-3 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 border border-purple-100 dark:border-purple-900 rounded-xl font-bold hover:bg-purple-100 dark:hover:bg-purple-900/50 transition flex items-center gap-2",children:[o.jsx(O,{name:"List",size:20}),"    (XLS)"]}),o.jsxs("button",{onClick:pe,className:"px-6 py-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[o.jsx(O,{name:"UserX",size:20}),"    (XLS)"]})]})]}),o.jsxs("section",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"QrCode",className:"text-purple-600 dark:text-purple-400"}),"  "]}),o.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"      .      QR-."}),s.publicScheduleId?o.jsx("div",{className:"flex flex-col md:flex-row items-center gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mb-2",children:[" ! ID: ",o.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:s.publicScheduleId})]}),o.jsxs("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[o.jsx(O,{name:"Share2",size:16}),"  QR-  "]}),o.jsxs("button",{onClick:Y,className:"ml-3 px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition flex items-center gap-2",children:[o.jsx(O,{name:"Trash2",size:16}),"  "]})]})}):o.jsxs("button",{onClick:j,disabled:F,className:"px-6 py-3 bg-purple-600 text-white rounded-xl font-bold hover:bg-purple-700 transition shadow-lg shadow-purple-200 dark:shadow-none flex items-center gap-2 disabled:opacity-50",children:[o.jsx(O,{name:"Share2",size:20}),"  "]})]}),o.jsx(bn,{isOpen:R,onClose:()=>y(!1),title:" ",children:o.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:" QR-    ,    ."}),B&&o.jsxs(o.Fragment,{children:[o.jsx(K6,{value:B,size:256,level:"H",includeMargin:!0,className:"p-2 bg-white border border-slate-200 rounded-lg shadow-md"}),o.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm font-medium break-all",children:B}),o.jsxs("button",{onClick:()=>navigator.clipboard.writeText(B),className:"px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 rounded-xl text-sm font-bold hover:bg-indigo-100 dark:hover:bg-indigo-900/50 transition flex items-center gap-2",children:[o.jsx(O,{name:"Copy",size:16}),"  "]})]})]})}),P&&o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 no-print",children:[o.jsxs("h2",{className:"font-bold text-lg text-slate-800",children:["  (",Ke,"- )"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>window.print(),className:"btn-primary btn-ripple flex items-center gap-2",children:[o.jsx(O,{name:"Printer",size:16})," "]}),o.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300",children:""})]})]}),o.jsx("div",{className:"flex-1 overflow-auto p-8 custom-scrollbar bg-white",children:o.jsx(Je,{})})]})]})},z6=()=>{var b;const{subjects:t,teachers:e,classes:r}=Yn(),{schedule1:n,schedule2:s,substitutions:A}=pi(),[i,l]=T.useState("load"),[a,c]=T.useState(((b=r[0])==null?void 0:b.id)||""),[d,h]=T.useState(()=>{const w=new Date().getMonth();return w>=0&&w<=4?2:1}),f=T.useMemo(()=>d===2?s:n,[d,n,s]),p=T.useMemo(()=>e.map(I=>{const F=f.filter(N=>N.teacherId===I.id),U=F.length,R=U*4,y=A.filter(N=>N.replacementTeacherId===I.id).length,B=A.filter(N=>N.originalTeacherId===I.id).length,C=R+y-B,S={};return F.forEach(N=>{const P=t.find(E=>E.id===N.subjectId);P&&(S[P.name]=(S[P.name]||0)+1)}),{id:I.id,name:I.name,weeklyHours:U,subsTaken:y,subsMissed:B,actualHours:C,subjectBreakdown:S}}).sort((I,F)=>F.actualHours-I.actualHours),[e,f,A,t]),v=T.useMemo(()=>a?_t.map(w=>{const F=f.filter(U=>U.classId===a&&U.day===w).reduce((U,R)=>{const y=t.find(B=>B.id===R.subjectId);return U+((y==null?void 0:y.difficulty)||5)},0);return{label:w,value:F}}):[],[f,t,a]),x=T.useMemo(()=>{const w=e.map(F=>({name:F.name,count:A.filter(U=>U.replacementTeacherId===F.id).length})).sort((F,U)=>U.count-F.count).slice(0,5),I=e.map(F=>({name:F.name,count:F.unavailableDates.length})).sort((F,U)=>U.count-F.count).slice(0,5);return{heroes:w,absentees:I}},[e,A]),_=()=>{let w="";i==="load"?w=`Teacher,Planned Weekly,Subs Taken,Absences (Lessons),Est. Monthly Actual,Details
`+p.map(U=>`"${U.name}",${U.weeklyHours},${U.subsTaken},${U.subsMissed},${U.actualHours},"${Object.entries(U.subjectBreakdown).map(([R,y])=>R+": "+y).join(", ")}"`).join(`
`):i==="sanpin"&&(w=`Day,Score
`+v.map(U=>`${U.label},${U.value}`).join(`
`));const I=new Blob([`\uFEFF${w}`],{type:"text/csv;charset=utf-8;"}),F=document.createElement("a");F.href=URL.createObjectURL(I),F.download=`report_${i}_${d}sem.csv`,document.body.appendChild(F),F.click(),document.body.removeChild(F)};return o.jsxs("div",{className:"max-w-6xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(O,{name:"BarChart2",className:"text-indigo-600 dark:text-indigo-400"})," "]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:d,onChange:w=>h(Number(w.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1- (-)"}),o.jsx("option",{value:2,children:"2- (-)"})]})]}),o.jsxs("button",{onClick:_,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[o.jsx(O,{name:"FileSpreadsheet",size:16}),"  CSV"]})]})]}),o.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-fit overflow-x-auto max-w-full",children:[o.jsx("button",{onClick:()=>l("load"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="load"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),o.jsx("button",{onClick:()=>l("sanpin"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="sanpin"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" ()"}),o.jsx("button",{onClick:()=>l("rating"),className:`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all ${i==="rating"?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:" "})]})]}),i==="load"&&o.jsx("div",{className:"bg-white dark:bg-dark-800 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:o.jsxs("table",{className:"w-full text-left border-collapse",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase",children:""}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-emerald-600",children:"+ "}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right text-red-500",children:"- "}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase text-right",children:" ()"}),o.jsx("th",{className:"p-4 font-bold text-slate-500 dark:text-slate-400 text-xs uppercase w-1/3",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:p.map(w=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"p-4 font-bold text-slate-800 dark:text-slate-200",children:w.name}),o.jsx("td",{className:"p-4 text-right font-mono",children:w.weeklyHours}),o.jsxs("td",{className:"p-4 text-right font-mono text-emerald-600 font-bold",children:["+",w.subsTaken]}),o.jsxs("td",{className:"p-4 text-right font-mono text-red-500 font-bold",children:["-",w.subsMissed]}),o.jsx("td",{className:"p-4 text-right font-mono font-black text-lg",children:w.actualHours}),o.jsx("td",{className:"p-4 text-xs text-slate-500 dark:text-slate-400",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.subjectBreakdown).map(([I,F])=>o.jsxs("span",{className:"bg-slate-100 dark:bg-slate-600 px-1.5 py-0.5 rounded",children:[I,": ",F]},I))})})]},w.id))})]})}),i==="sanpin"&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"font-bold text-lg dark:text-white",children:" "}),o.jsx("select",{value:a,onChange:w=>c(w.target.value),className:"border dark:border-slate-600 p-2 rounded-lg bg-transparent dark:text-white outline-none",children:r.map(w=>o.jsx("option",{value:w.id,children:w.name},w.id))})]}),o.jsx(pp,{items:v,max:60,barClassName:"bg-indigo-500"}),o.jsx("div",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"*        (=11,  ..).   : /."})]}),o.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-2xl border border-indigo-100 dark:border-indigo-900",children:[o.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-4",children:" "}),o.jsxs("ul",{className:"space-y-3 text-sm text-indigo-800 dark:text-indigo-400",children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"  "]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"    "]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 mt-1.5 bg-indigo-500 rounded-full"}),"   /"]})]})]})]}),i==="rating"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-emerald-600 mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"TrendingUp",size:20}),"   ( 5)"]}),o.jsx(pp,{items:x.heroes.map(w=>({label:w.name,value:w.count})),max:Math.max(...x.heroes.map(w=>w.count),1),barClassName:"bg-emerald-500"})]}),o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-lg text-red-500 mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"Activity",size:20}),"  ( 5)"]}),o.jsx(pp,{items:x.absentees.map(w=>({label:w.name,value:w.count})),max:Math.max(...x.absentees.map(w=>w.count),1),barClassName:"bg-red-500"})]})]})]})},$6=()=>{var ut;const{teachers:t,dutyZones:e,rooms:r,saveStaticData:n}=Yn(),{dutySchedule:s,saveScheduleData:A,schedule1:i,schedule2:l}=pi(),a={approvalBlock:0,mainTitle:0,tableHeaders:-40,footerBlock:0,signatureLine:-4},[c,d]=T.useState(()=>{const te=new Date().getMonth();return te>=0&&te<=4?2:1}),[h,f]=T.useState(ie.First),p=c===1?i:l,v=T.useRef(null),[x,_]=T.useState(!1),[b,w]=T.useState(!1),[I,F]=T.useState(null),[U,R]=T.useState({}),[y,B]=T.useState(""),[C,S]=T.useState(null),N=(te,ue,fe)=>{const de=s.find(j=>j.zoneId===te&&j.day===ue&&j.shift===fe);return de?t.find(j=>j.id===de.teacherId):null},P=(te,ue,fe,de)=>de?!!s.find(Y=>Y.teacherId===de&&Y.day===ue&&Y.shift===fe&&Y.zoneId!==te):!1,E=(te,ue)=>{F({zoneId:te,day:ue});const fe=N(te,ue,h);S((fe==null?void 0:fe.id)||null),_(!0)},Ke=async()=>{if(!I)return;let te=[...s];te=te.filter(ue=>!(ue.zoneId===I.zoneId&&ue.day===I.day&&ue.shift===h)),C&&te.push({id:fn(),zoneId:I.zoneId,day:I.day,shift:h,teacherId:C}),await A({dutySchedule:te}),_(!1),S(null)},We=async()=>{if(!I)return;let te=[...s];te=te.filter(ue=>!(ue.zoneId===I.zoneId&&ue.day===I.day&&ue.shift===h)),await A({dutySchedule:te}),_(!1),S(null)},st=(te,ue)=>{if(!te||!ue.includedRooms)return!1;const fe=te.replace(/\D/g,"");return fe&&ue.includedRooms.includes(fe)?!0:ue.includedRooms.includes(te)},Le=async()=>{if(!window.confirm("    . ?"))return;let te=[];const ue=[ie.First,ie.Second],fe={};_t.forEach(de=>fe[de]=new Set);for(const de of _t)for(const j of ue){const Y=t.filter(ee=>p.filter(Je=>Je.teacherId===ee.id&&Je.day===de&&Je.shift===j).length>=1);for(const ee of e){const xe=Y.map(K=>{let G=0;fe[de].has(K.id)&&(G-=2e3);const re=p.filter(ge=>{var Re;return ge.teacherId===K.id&&ge.day===de&&ge.shift===j&&ge.roomId&&st(((Re=r.find(Ce=>Ce.id===ge.roomId))==null?void 0:Re.name)||ge.roomId,ee)}).length;return re===0?{teacher:K,score:-9999}:(G+=re*10,p.filter(ge=>ge.teacherId===K.id&&ge.day===de&&ge.shift===j).length>=4&&(G+=5),{teacher:K,score:G})});xe.sort((K,G)=>G.score-K.score);const Je=xe[0];Je&&Je.score>-500&&(te.push({id:fn(),zoneId:ee.id,day:de,shift:j,teacherId:Je.teacher.id}),fe[de].add(Je.teacher.id))}}await A({dutySchedule:te})},ce=async()=>{window.confirm("   (  )?")&&await A({dutySchedule:[]})},Te=async()=>{if(!v.current)return;const te=await ff(v.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),ue=document.createElement("a");ue.href=te.toDataURL("image/png"),ue.download=`Duty_Schedule_${c}_sem.png`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},Pe=()=>{const ue=At.length+1;let fe=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head><meta charset="UTF-8">
            <style>
                table { border-collapse: collapse; width: 100%; font-family: 'Times New Roman', serif; }
                td, th { border: 1px solid #000; padding: 6px; vertical-align: middle; text-align: center; font-size: 11pt; }
                .title-row td { border: none !important; font-weight: bold; text-align: center; }
                .title-main { font-size: 14pt; text-transform: uppercase; }
                .title-sub { font-size: 12pt; }
                .approval-cell { text-align: left; border: none !important; font-size: 11pt; line-height: 1.2; }
                .header-cell { background-color: #F3F4F6; font-weight: bold; border: 2px solid #000; }
                .floor-cell { background-color: #E5E7EB; font-weight: bold; text-transform: uppercase; font-size: 10pt; border: 2px solid #000; }
                .shift-header { font-size: 13pt; font-weight: bold; text-decoration: underline; border: none !important; text-align: center; padding: 20px 0 10px 0; }
                .day-label { font-weight: bold; background-color: #FAFAFA; text-align: left; border: 2px solid #000; }
                .footer-cell { border: none !important; font-weight: bold; text-align: left; padding-top: 30px; font-size: 11pt; }
                .empty-spacer { border: none !important; height: 15px; }
            </style>
            </head>
            <body>
        `;fe+=`
            <table>
                <tr>
                    <td colspan="${Math.max(1,ue-3)}" style="border:none"></td>
                    <td colspan="3" class="approval-cell">
                        <b></b><br>
                         <br>
                         <br>
                          22 . <br><br>
                        ____________________ ..<br>
                        "____" __________ 2025.
                    </td>
                </tr>
                <tr class="empty-spacer"><td colspan="${ue}" style="border:none"></td></tr>
                <tr class="title-row"><td colspan="${ue}" class="title-main"> </td></tr>
                <tr class="title-row"><td colspan="${ue}" class="title-sub">       22 . </td></tr>
                <tr class="title-row"><td colspan="${ue}" class="title-sub"> ${c}-  ${new Date().getFullYear()}/${new Date().getFullYear()+1}  </td></tr>
                <tr class="empty-spacer"><td colspan="${ue}" style="border:none"></td></tr>
            </table>
        `,[ie.First,ie.Second].forEach(ee=>{fe+="<table>",fe+=`<tr><td colspan="${ue}" class="shift-header">${ee.toUpperCase()}</td></tr>`,fe+="<tr>",fe+='<th rowspan="2" class="header-cell" style="width: 120px;"> </th>',Ie.forEach(xe=>{fe+=`<th colspan="${xe.zones.length}" class="floor-cell">${xe.floor}</th>`}),fe+="</tr>",fe+="<tr>",At.forEach(xe=>{fe+=`<th class="header-cell" style="width: 150px;">${xe.name}</th>`}),fe+="</tr>",_t.forEach(xe=>{fe+="<tr>",fe+=`<td class="day-label">${xe}</td>`,At.forEach(Je=>{const K=N(Je.id,xe,ee);fe+=`<td>${K?K.name:"-"}</td>`}),fe+="</tr>"}),fe+="</table><br>"}),fe+=`
            <table>
                <tr class="empty-spacer"><td colspan="${ue}" style="border:none"></td></tr>
                <tr>
                    <td colspan="${Math.floor(ue/2)}" class="footer-cell">    22 .</td>
                    <td colspan="${Math.ceil(ue/4)}" style="border-bottom: 1px solid #000; border-top:none; border-left:none; border-right:none;"></td>
                    <td colspan="${Math.ceil(ue/4)}" class="footer-cell" style="text-align: right;">..</td>
                </tr>
            </table>
        `,fe+="</body></html>";const de=new Blob([fe],{type:"application/vnd.ms-excel"}),j=URL.createObjectURL(de),Y=document.createElement("a");Y.href=j,Y.download=`__${c}_.xls`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},Ze=async()=>{if(!U.name)return;const te=y.split(",").map(de=>de.trim()).filter(Boolean),ue={...U,includedRooms:te};let fe=[...e];U.id?fe=fe.map(de=>de.id===U.id?{...de,...ue}:de):fe.push({...ue,id:fn()}),await n({dutyZones:fe}),w(!1)},Ge=async te=>{if(!window.confirm(" ?"))return;const ue=e.filter(fe=>fe.id!==te);await n({dutyZones:ue})},$=te=>{var ue;te?(R(te),B(((ue=te.includedRooms)==null?void 0:ue.join(", "))||"")):(R({}),B("")),w(!0)},he=()=>{if(!I)return{recommended:[],others:[]};const te=I.day,ue=e.find(Y=>Y.id===I.zoneId),fe=t.map(Y=>{const ee=p.filter(K=>K.teacherId===Y.id&&K.day===te&&K.shift===h).length,xe=s.some(K=>K.day===te&&K.teacherId===Y.id&&K.zoneId!==I.zoneId&&K.shift===h),Je=ue&&ue.includedRooms?p.filter(K=>{var G;return K.teacherId===Y.id&&K.day===te&&K.shift===h&&K.roomId&&st(((G=r.find(re=>re.id===K.roomId))==null?void 0:G.name)||K.roomId,ue)}).length:0;return{t:Y,lessonsCount:ee,isBusy:xe,lessonsInZone:Je}}),de=fe.filter(Y=>Y.lessonsInZone>0&&!Y.isBusy).sort((Y,ee)=>ee.lessonsInZone-Y.lessonsInZone).map(Y=>({value:Y.t.id,label:`${Y.t.name} (${Y.lessonsInZone} .  )`})),j=fe.filter(Y=>(Y.lessonsInZone===0||Y.isBusy)&&Y.lessonsCount>0).map(Y=>({value:Y.t.id,label:Y.t.name+(Y.isBusy?" ()":"")+(Y.lessonsInZone===0?" (   )":"")}));return{recommended:de,others:j}},{recommended:W,others:pe}=he(),Ie=T.useMemo(()=>{const te={};return e.forEach(fe=>{const de=fe.floor||" ";te[de]||(te[de]=[]),te[de].push(fe)}),Object.keys(te).sort().map(fe=>({floor:fe,zones:te[fe].sort((de,j)=>(de.order||0)-(j.order||0))}))},[e]),At=T.useMemo(()=>Ie.flatMap(te=>te.zones),[Ie]);return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"bg-white dark:bg-dark-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 mb-6 no-print",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[o.jsx(O,{name:"Shield",className:"text-indigo-600 dark:text-indigo-400"})," "]}),o.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[c,"- "]})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl",children:[o.jsx("button",{onClick:()=>f(ie.First),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.First?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"1 "}),o.jsx("button",{onClick:()=>f(ie.Second),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${h===ie.Second?"bg-white dark:bg-slate-600 shadow text-indigo-600 dark:text-white":"text-slate-500 dark:text-slate-400"}`,children:"2 "})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl p-1.5 pl-3",children:[o.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:":"}),o.jsxs("select",{value:c,onChange:te=>d(Number(te.target.value)),className:"bg-transparent text-sm font-bold text-slate-700 dark:text-slate-200 outline-none cursor-pointer",children:[o.jsx("option",{value:1,children:"1-"}),o.jsx("option",{value:2,children:"2-"})]})]}),o.jsxs("button",{onClick:Le,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none text-sm flex items-center gap-2",children:[o.jsx(O,{name:"Zap",size:16})," "]}),o.jsx("button",{onClick:ce,className:"px-4 py-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900 rounded-xl font-bold hover:bg-red-100 dark:hover:bg-red-900/50 transition text-sm",children:o.jsx(O,{name:"Trash2",size:16})}),o.jsxs("button",{onClick:Te,className:"px-4 py-2 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-900 rounded-xl font-bold hover:bg-emerald-100 dark:hover:bg-emerald-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(O,{name:"Image",size:16})," PNG"]}),o.jsxs("button",{onClick:Pe,className:"px-4 py-2 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 border border-green-100 dark:border-green-900 rounded-xl font-bold hover:bg-green-100 dark:hover:bg-green-900/50 transition text-sm flex items-center gap-2",children:[o.jsx(O,{name:"FileSpreadsheet",size:16})," Excel"]})]})]}),o.jsxs("div",{className:"mb-4 flex gap-2 overflow-x-auto custom-scrollbar pb-2",children:[e.map(te=>o.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-700 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-600 shrink-0",children:[o.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:[te.name," ",o.jsxs("span",{className:"text-slate-400 text-xs",children:["(",te.floor||"?",")"]})]}),o.jsx("button",{onClick:()=>$(te),className:"text-slate-400 hover:text-indigo-600",children:o.jsx(O,{name:"Edit2",size:12})})]},te.id)),o.jsxs("button",{onClick:()=>$(),className:"px-3 py-1.5 rounded-lg border border-dashed border-slate-300 dark:border-slate-500 text-slate-400 hover:text-indigo-600 hover:border-indigo-600 text-sm font-bold flex items-center gap-1 transition-colors",children:[o.jsx(O,{name:"Plus",size:14})," "]})]}),o.jsx("div",{className:"overflow-x-auto custom-scrollbar border border-slate-200 dark:border-slate-700 rounded-xl",children:o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[o.jsx("th",{className:"p-3 text-left text-sm font-bold text-slate-500 dark:text-slate-400 w-64 border-b border-r border-slate-200 dark:border-slate-700",children:" / "}),_t.map(te=>o.jsx("th",{className:"p-3 text-center text-sm font-bold text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700 min-w-[120px]",children:te},te))]})}),o.jsx("tbody",{children:e.map(te=>{var ue;return o.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors",children:[o.jsxs("td",{className:"p-3 border-r border-slate-200 dark:border-slate-700 font-bold text-slate-800 dark:text-slate-200",children:[o.jsx("div",{children:te.name}),o.jsx("div",{className:"text-[10px] text-indigo-500 font-medium",children:te.floor}),o.jsx("div",{className:"text-xs font-normal text-slate-400 mt-1",children:(ue=te.includedRooms)==null?void 0:ue.join(", ")})]}),_t.map(fe=>{const de=N(te.id,fe,h),j=de?P(te.id,fe,h,de.id):!1;return o.jsx("td",{onClick:()=>E(te.id,fe),className:`p-2 text-center border-l border-slate-100 dark:border-slate-700 cursor-pointer ${de?j?"bg-red-100 dark:bg-red-900/30":"bg-indigo-50/50 dark:bg-indigo-900/10":""} hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors relative group`,children:de?o.jsxs("div",{className:`font-bold text-sm ${j?"text-red-600 dark:text-red-400":"text-indigo-700 dark:text-indigo-400"}`,children:[de.name,j&&o.jsx("div",{className:"text-[9px] uppercase",children:""})]}):o.jsx("div",{className:"text-slate-300 dark:text-slate-600 text-lg opacity-0 group-hover:opacity-100",children:"+"})},`${te.id}-${fe}`)})]},te.id)})})]})})]}),o.jsxs("div",{className:"mt-8 bg-slate-100 dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[o.jsxs("h3",{className:"font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest text-xs mb-4 flex items-center gap-2",children:[o.jsx(O,{name:"Image",size:16}),"  "]}),o.jsx("div",{className:"overflow-auto custom-scrollbar",children:o.jsxs("div",{ref:v,id:"print-content-root",className:"bg-white p-12 min-w-[1200px] text-black font-serif shadow-lg",children:[o.jsx("div",{className:"flex justify-end items-start mb-8 text-sm leading-snug",style:{marginTop:a.approvalBlock},children:o.jsxs("div",{className:"w-[350px]",contentEditable:!0,suppressContentEditableWarning:!0,children:[o.jsx("div",{className:"font-bold mb-1",children:""}),o.jsx("div",{children:" "}),o.jsx("div",{children:" "}),o.jsx("div",{children:"  22 . "}),o.jsxs("div",{className:"mt-8 flex items-end",children:[o.jsx("div",{className:"border-b border-black flex-grow h-4",style:{marginBottom:a.signatureLine}}),o.jsx("div",{className:"ml-2 whitespace-nowrap",children:".."})]})]})}),o.jsxs("div",{className:"text-center mb-6",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:a.mainTitle},children:[o.jsx("h1",{className:"text-xl font-bold uppercase",children:" "}),o.jsx("h2",{className:"text-lg",children:"       22 . "}),o.jsxs("h3",{className:"text-lg font-bold mt-1",children:[" ",c,"-  ",new Date().getFullYear(),"/",new Date().getFullYear()+1,"  "]})]}),[ie.First,ie.Second].map((te,ue)=>o.jsxs("div",{className:"mb-8",children:[o.jsx("div",{className:"text-center font-bold text-lg mb-2 underline",contentEditable:!0,suppressContentEditableWarning:!0,children:te}),o.jsxs("table",{className:"w-full border-collapse border border-black text-sm text-center",children:[o.jsxs("thead",{children:[o.jsxs("tr",{children:[o.jsx("th",{rowSpan:2,className:"border border-black p-1 bg-gray-100 w-32 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:a.tableHeaders},children:" "}),Ie.map(fe=>o.jsx("th",{colSpan:fe.zones.length,className:"border border-black p-1 bg-gray-200 font-bold uppercase text-xs align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:a.tableHeaders},children:fe.floor},fe.floor))]}),o.jsx("tr",{children:At.map(fe=>o.jsx("th",{className:"border border-black p-1 bg-gray-100 font-bold align-middle",contentEditable:!0,suppressContentEditableWarning:!0,style:{paddingTop:a.tableHeaders},children:fe.name},fe.id))})]}),o.jsx("tbody",{children:_t.map(fe=>o.jsxs("tr",{children:[o.jsx("th",{className:"border border-black p-2 font-bold bg-gray-50 text-left align-middle",contentEditable:!0,suppressContentEditableWarning:!0,children:fe}),At.map(de=>{const j=N(de.id,fe,te);return o.jsx("td",{className:"border border-black p-1 h-12 align-middle text-center",contentEditable:!0,suppressContentEditableWarning:!0,children:j?j.name:"-"},de.id)})]},fe))})]})]},te)),o.jsxs("div",{className:"mt-8 flex items-end justify-between text-sm font-bold",contentEditable:!0,suppressContentEditableWarning:!0,style:{marginTop:a.footerBlock},children:[o.jsx("div",{children:"    22 ."}),o.jsx("div",{className:"border-b border-black flex-grow mx-4 mb-1",style:{marginBottom:a.signatureLine}}),o.jsx("div",{children:".."})]})]})})]}),o.jsx(bn,{isOpen:x,onClose:()=>_(!1),title:" ",maxWidth:"max-w-2xl",children:o.jsxs("div",{className:"space-y-6 min-h-[550px] flex flex-col",children:[I&&o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl mb-2 text-base border border-slate-100 dark:border-slate-600 shadow-sm",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:(ut=e.find(te=>te.id===I.zoneId))==null?void 0:ut.name}),o.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm",children:[o.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-0.5 rounded",children:I.day}),o.jsx("span",{className:"text-slate-400",children:"|"}),o.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium",children:h})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider",children:""}),o.jsx(ac,{options:[{label:" (   )",options:W},{label:"",options:pe}],value:C,onChange:te=>S(String(te)),placeholder:"   ",groupBy:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-auto",children:[o.jsx("button",{onClick:We,className:"px-5 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-bold text-sm transition-colors",children:" "}),o.jsx("button",{onClick:Ke,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition shadow-lg shadow-indigo-200 dark:shadow-none",children:""})]})]})}),o.jsx(bn,{isOpen:b,onClose:()=>w(!1),title:U.id?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" "}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:" (.  )",value:U.name||"",onChange:te=>R({...U,name:te.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:""}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:". 2 ",value:U.floor||"",onChange:te=>R({...U,floor:te.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1",children:" ( )"}),o.jsx("input",{className:"w-full border border-slate-200 dark:border-slate-600 rounded-xl p-3 text-sm bg-white dark:bg-slate-700 dark:text-white outline-none focus:border-indigo-500",placeholder:"28, 29, 30...",value:y,onChange:te=>B(te.target.value)}),o.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"    "})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[U.id&&o.jsx("button",{onClick:()=>{Ge(U.id),w(!1)},className:"px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg font-bold text-sm",children:""}),o.jsx("button",{onClick:Ze,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition",children:""})]})]})})]})},W6=()=>{const{classes:t}=Yn(),{nutritionRecords:e,saveScheduleData:r}=pi(),{role:n,user:s}=gi(),{addToast:A}=Wk(),i=n==="admin",l=n==="teacher",a=n==="canteen",[c,d]=T.useState($c()),[h,f]=T.useState("day"),[p,v]=T.useState(()=>{const $=new Date;return`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}`}),[x,_]=T.useState(!1),[b,w]=T.useState(null),[I,F]=T.useState(""),[U,R]=T.useState(0),[y,B]=T.useState(0),C=T.useRef(null),S=T.useMemo(()=>e.filter($=>$.date===c),[e,c]),N=T.useMemo(()=>{const[$,he]=p.split("-").map(Number);return e.filter(W=>{const pe=new Date(W.date);return pe.getFullYear()===$&&pe.getMonth()+1===he})},[e,p]),P=T.useMemo(()=>{const $={totalStudents:0,totalBenefit:0,totalRegular:0,classCount:S.length,records:S};return S.forEach(he=>{$.totalStudents+=he.totalCount,$.totalBenefit+=he.benefitCount,$.totalRegular+=he.regularCount}),$},[S]),E=T.useMemo(()=>{const $=new Map;N.forEach(pe=>{const Ie=$.get(pe.date)||{total:0,benefit:0,regular:0,classCount:0};Ie.total+=pe.totalCount,Ie.benefit+=pe.benefitCount,Ie.regular+=pe.regularCount,Ie.classCount+=1,$.set(pe.date,Ie)});const he=Array.from($.values()).reduce((pe,Ie)=>({total:pe.total+Ie.total,benefit:pe.benefit+Ie.benefit,regular:pe.regular+Ie.regular,classCount:Math.max(pe.classCount,Ie.classCount)}),{total:0,benefit:0,regular:0,classCount:0}),W=$.size>0?{total:Math.round(he.total/$.size),benefit:Math.round(he.benefit/$.size),regular:Math.round(he.regular/$.size)}:{total:0,benefit:0,regular:0};return{total:he,avgPerDay:W,daysCount:$.size,statsByDate:Array.from($.entries()).sort((pe,Ie)=>pe[0].localeCompare(Ie[0]))}},[N]),Ke=$=>{var he;return((he=t.find(W=>W.id===$))==null?void 0:he.name)||$},We=$=>{const he=t.find(W=>W.id===$);return he&&typeof he.order=="number"?he.order:Number.MAX_SAFE_INTEGER},st=($,he)=>{he?(w(he),F(he.classId),R(he.totalCount),B(he.benefitCount)):(w(null),F($||""),R(0),B(0)),_(!0)},Le=()=>{_(!1),w(null),F(""),R(0),B(0)},ce=T.useCallback(async()=>{if(!I){A({type:"warning",title:" "});return}if(U<0||y<0){A({type:"warning",title:"    "});return}if(y>U){A({type:"warning",title:"      "});return}const $=U-y,he=new Date().toISOString();let W;if(b)W=e.map(pe=>pe.id===b.id?{...pe,classId:I,totalCount:U,benefitCount:y,regularCount:$,enteredBy:(s==null?void 0:s.uid)||pe.enteredBy,enteredAt:he}:pe);else{const pe=e.find(Ie=>Ie.date===c&&Ie.classId===I);if(pe)W=e.map(Ie=>Ie.id===pe.id?{...Ie,totalCount:U,benefitCount:y,regularCount:$,enteredBy:(s==null?void 0:s.uid)||Ie.enteredBy,enteredAt:he}:Ie);else{const Ie={id:fn(),date:c,classId:I,totalCount:U,benefitCount:y,regularCount:$,enteredBy:s==null?void 0:s.uid,enteredAt:he};W=[...e,Ie]}}await r({nutritionRecords:W}),A({type:"success",title:" "}),Le()},[I,U,y,b,c,e,r,s,A]),Te=T.useCallback(async $=>{const he=e.find(pe=>pe.id===$);if(!he)return;if(!i&&he.enteredBy!==(s==null?void 0:s.uid)){A({type:"warning",title:"     "});return}if(!window.confirm(" ?"))return;const W=e.filter(pe=>pe.id!==$);await r({nutritionRecords:W}),A({type:"success",title:" "})},[e,r,i,s,A]),Pe=()=>{if(!C.current)return;const $=window.open("","_blank");if(!$){A({type:"warning",title:"    "});return}const he=C.current.innerHTML;$.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>  </title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #000; padding: 8px; text-align: left; }
                    th { background-color: #f0f0f0; font-weight: bold; }
                    .text-center { text-align: center; }
                    h1 { text-align: center; margin-bottom: 20px; }
                    @media print {
                        @page { margin: 1cm; }
                    }
                </style>
            </head>
            <body>
                ${he}
            </body>
            </html>
        `),$.document.close(),$.focus(),setTimeout(()=>{$.print(),$.close()},250)},Ze=T.useMemo(()=>i||s?t:[],[t,i,s]),Ge=T.useMemo(()=>{if(h!=="day")return[];const $=S.map(he=>he.classId);return t.filter(he=>!$.includes(he.id)).sort((he,W)=>{const pe=typeof he.order=="number"?he.order:Number.MAX_SAFE_INTEGER,Ie=typeof W.order=="number"?W.order:Number.MAX_SAFE_INTEGER;return pe!==Ie?pe-Ie:he.name.localeCompare(W.name)})},[t,S,h]);return o.jsxs("div",{className:"max-w-7xl mx-auto w-full pb-20",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white mb-2",children:""}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:i?"   ":a?"   ":"   "})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>f(h==="day"?"month":"day"),className:"px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-semibold",children:h==="day"?" ":" "}),(i||a)&&o.jsxs("button",{onClick:Pe,className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[o.jsx(O,{name:"Download",size:18})," PDF"]})]})]}),o.jsx("div",{className:"mb-6 flex flex-wrap items-center gap-4",children:h==="day"?o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),o.jsx("input",{type:"date",value:c,onChange:$=>d($.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}):o.jsxs(o.Fragment,{children:[o.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:":"}),o.jsx("input",{type:"month",value:p,onChange:$=>v($.target.value),className:"px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]})}),h==="day"&&Ge.length>0&&o.jsxs("div",{className:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"bg-amber-500 text-white p-2.5 rounded-xl",children:o.jsx(O,{name:"AlertTriangle",size:20})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"    "}),o.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[Ge.length," ",Ge.length===1?"":Ge.length<5?"":"","   "]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Ge.map($=>o.jsx("button",{onClick:()=>{d($c()),st($.id)},className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-xl text-sm font-semibold text-slate-700 dark:text-slate-300 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-colors",children:$.name},$.id))})]}),h==="day"?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:P.totalStudents})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-indigo-600",children:P.totalBenefit})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-green-600",children:P.totalRegular})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:P.classCount})]})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:E.total.total}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",E.avgPerDay.total,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-indigo-600",children:E.total.benefit}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",E.avgPerDay.benefit,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:""}),o.jsx("div",{className:"text-3xl font-black text-green-600",children:E.total.regular}),o.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[": ",E.avgPerDay.regular,"/"]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-sm border border-slate-200 dark:border-slate-700",children:[o.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"  "}),o.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:E.daysCount})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:h==="day"?`  ${new Date(c).toLocaleDateString("ru-RU")}`:`  ${new Date(p+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})}`}),(l||i)&&h==="day"&&o.jsxs("button",{onClick:()=>st(),className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold flex items-center gap-2",children:[o.jsx(O,{name:"Plus",size:18}),""]})]}),h==="day"?o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),i&&o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),l&&o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:S.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:i?5:4,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):S.slice().sort(($,he)=>{const W=We($.classId),pe=We(he.classId);return W!==pe?W-pe:Ke($.classId).localeCompare(Ke(he.classId))}).map($=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:Ke($.classId)}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:$.totalCount}),o.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:$.benefitCount}),o.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:$.regularCount}),!a&&o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[(l||i)&&o.jsx("button",{onClick:()=>st(void 0,$),className:"p-2 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 rounded-lg transition-colors",title:"",children:o.jsx(O,{name:"Edit",size:18})}),o.jsx("button",{onClick:()=>Te($.id),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 rounded-lg transition-colors",title:"",children:o.jsx(O,{name:"Trash2",size:18})})]})})]},$.id))})]})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""}),o.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:""})]})}),o.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:E.statsByDate.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"    "})}):E.statsByDate.map(([$,he])=>o.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[o.jsx("td",{className:"px-4 py-3 font-semibold text-slate-800 dark:text-white",children:new Date($).toLocaleDateString("ru-RU",{weekday:"short",day:"numeric",month:"short"})}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-700 dark:text-slate-300",children:he.total}),o.jsx("td",{className:"px-4 py-3 text-center text-indigo-600 font-semibold",children:he.benefit}),o.jsx("td",{className:"px-4 py-3 text-center text-green-600 font-semibold",children:he.regular}),o.jsx("td",{className:"px-4 py-3 text-center text-slate-500 dark:text-slate-400",children:he.classCount})]},$))})]})})]}),o.jsx("div",{ref:C,className:"hidden print:block",children:o.jsxs("div",{className:"p-8",children:[o.jsx("h1",{className:"text-2xl font-black mb-4 text-center",children:"  "}),h==="day"?o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),o.jsx("tbody",{children:S.slice().sort(($,he)=>{const W=We($.classId),pe=We(he.classId);return W!==pe?W-pe:Ke($.classId).localeCompare(Ke(he.classId))}).map($=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:Ke($.classId)}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.totalCount}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.benefitCount}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:$.regularCount})]},$.id))}),o.jsx("tfoot",{className:"bg-slate-100 font-bold",children:o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:P.totalStudents}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:P.totalBenefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:P.totalRegular})]})})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-center mb-6 text-slate-600",children:[": ",new Date(p+"-01").toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]}),o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-100",children:[o.jsx("th",{className:"border border-slate-300 px-4 py-2 text-left",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("th",{className:"border border-slate-300 px-4 py-2",children:""})]})}),o.jsx("tbody",{children:E.statsByDate.map(([$,he])=>o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:new Date($).toLocaleDateString("ru-RU")}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:he.classCount})]},$))}),o.jsxs("tfoot",{className:"bg-slate-100 font-bold",children:[o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:""}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:E.total.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:E.total.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:E.total.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]}),o.jsxs("tr",{children:[o.jsx("td",{className:"border border-slate-300 px-4 py-2",children:"  "}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:E.avgPerDay.total}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:E.avgPerDay.benefit}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:E.avgPerDay.regular}),o.jsx("td",{className:"border border-slate-300 px-4 py-2 text-center",children:"-"})]})]})]})]})]})}),o.jsx(bn,{isOpen:x,onClose:Le,title:b?" ":" ",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:""}),o.jsx(ac,{options:Ze.sort(($,he)=>$.name.localeCompare(he.name)).map($=>({value:$.id,label:$.name})),value:I||null,onChange:$=>F(String($)),placeholder:" "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),o.jsx("input",{type:"number",min:"0",value:U,onChange:$=>{const he=parseInt($.target.value)||0;R(he),he<y&&B(he)},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"  "}),o.jsx("input",{type:"number",min:"0",max:U,value:y,onChange:$=>{const he=parseInt($.target.value)||0;B(Math.min(he,U))},className:"w-full px-4 py-2 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white"})]}),o.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-4",children:[o.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:" ()"}),o.jsx("div",{className:"text-2xl font-bold text-green-600",children:U-y})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{onClick:ce,className:"flex-1 px-4 py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors font-semibold",children:""}),o.jsx("button",{onClick:Le,className:"px-4 py-3 rounded-xl bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors font-semibold",children:""})]})]})})]})},q6=()=>{const{setGuestRole:t,role:e,loading:r}=gi(),n=Da(),[s,A]=T.useState("select"),[i,l]=T.useState(""),[a,c]=T.useState(""),[d,h]=T.useState(""),[f,p]=T.useState(!1);T.useEffect(()=>{!r&&e&&(e==="admin"||e==="teacher"||e==="canteen")&&n("/dashboard")},[e,r,n]);const v=async _=>{if(_.preventDefault(),h(""),p(!0),!Qn){h("Firebase .  ."),p(!1);return}try{let b=i;s==="teacher"?b="teacher@gymnasium22.com":s==="canteen"&&(b="canteen@gymnasium22.com"),await pM(Qn,b,a)}catch(b){console.error("Firebase Auth Error:",b);const w=b==null?void 0:b.code;let I="   .";switch(w){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":I="   .";break;case"auth/invalid-email":I="  email.";break;case"auth/too-many-requests":I="  . .";break;default:I=" .  ."}h(I)}finally{p(!1)}},x=()=>{t(),n("/schedule")};return o.jsxs("div",{className:"min-h-screen mesh-gradient-bg flex items-center justify-center p-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-purple-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob"}),o.jsx("div",{className:"absolute top-20 right-20 w-72 h-72 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000"}),o.jsx("div",{className:"absolute -bottom-20 left-1/2 w-96 h-96 bg-pink-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000"}),o.jsxs("div",{className:"rounded-3xl shadow-2xl max-w-md w-full p-8 transition-all relative z-10 bg-white/60 dark:bg-slate-800/60 border border-white/20 dark:border-slate-700 backdrop-blur-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex p-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl text-white shadow-lg shadow-indigo-500/30 mb-4 transform hover:scale-105 transition-transform duration-300",children:o.jsx(O,{name:"GraduationCap",size:48})}),o.jsx("h1",{className:"text-3xl font-black text-slate-800 dark:text-white tracking-tight mb-2",children:" Pro22"}),o.jsx("p",{className:"text-slate-500 dark:text-slate-300 font-medium",children:"  "})]}),s==="select"&&o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("button",{onClick:x,className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 p-3 rounded-xl text-emerald-600 dark:text-emerald-400 group-hover:scale-110 transition-transform",children:o.jsx(O,{name:"Users",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" / "}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:" "})]}),o.jsx(O,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-emerald-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("teacher"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-3 rounded-xl text-indigo-600 dark:text-indigo-400 group-hover:scale-110 transition-transform",children:o.jsx(O,{name:"BookOpen",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),o.jsx(O,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-indigo-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("canteen"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 p-3 rounded-xl text-green-600 dark:text-green-400 group-hover:scale-110 transition-transform",children:o.jsx(O,{name:"Coffee",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"   "})]}),o.jsx(O,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-green-500 transition-colors",size:20})]}),o.jsxs("button",{onClick:()=>A("admin"),className:"w-full p-4 rounded-2xl bg-white/60 dark:bg-slate-800/60 border border-white/50 dark:border-slate-700 shadow-sm hover:shadow-md hover:bg-white dark:hover:bg-slate-800 group transition-all text-left flex items-center gap-4 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 p-3 rounded-xl text-purple-600 dark:text-purple-400 group-hover:scale-110 transition-transform",children:o.jsx(O,{name:"Settings",size:24})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-lg",children:""}),o.jsx("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"    "})]}),o.jsx(O,{name:"ArrowRight",className:"ml-auto text-slate-300 group-hover:text-purple-500 transition-colors",size:20})]})]}),s!=="select"&&o.jsxs("form",{onSubmit:v,className:"space-y-5 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[o.jsx("button",{type:"button",onClick:()=>{A("select"),h("")},className:"p-2 -ml-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:o.jsx(O,{name:"ArrowRight",className:"rotate-180",size:24})}),o.jsx("h2",{className:"font-bold text-xl dark:text-white",children:s==="teacher"?"  ":s==="canteen"?"  ":"  "})]}),s==="admin"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{name:"User",className:"absolute left-4 top-3.5 text-slate-400",size:18}),o.jsx("input",{type:"email",inputMode:"email",autoComplete:"email",value:i,onChange:_=>l(_.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:s==="canteen"?"canteen@gymnasium22.com":"admin@school.com",autoFocus:!0,required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-slate-400 mb-2 ml-1",children:""}),o.jsxs("div",{className:"relative",children:[o.jsx(O,{name:"Briefcase",className:"absolute left-4 top-3.5 text-slate-400",size:18}),o.jsx("input",{type:"password",inputMode:"text",autoComplete:"current-password",value:a,onChange:_=>c(_.target.value),className:"w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50/50 dark:bg-slate-700/50 dark:text-white outline-none focus:ring-2 ring-indigo-500/50 transition-all font-medium",placeholder:"",required:!0})]})]}),d&&o.jsx("div",{className:"text-red-500 text-sm font-bold text-center bg-red-50 dark:bg-red-900/20 p-3 rounded-xl border border-red-100 dark:border-red-900/50 animate-shake",children:d}),o.jsxs("button",{type:"submit",disabled:f||r,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:shadow-lg hover:shadow-indigo-500/30 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[f||r?o.jsx(O,{name:"Loader",className:"animate-spin",size:20}):o.jsx(O,{name:"LogOut",className:"rotate-180",size:20}),f?"...":"  "]})]})]}),o.jsxs("div",{className:"absolute bottom-6 text-center w-full text-slate-400 dark:text-slate-500 text-xs font-medium",children:[" ",new Date().getFullYear(),"  Pro22.   ."]})]})},MC=t=>{try{return localStorage.getItem(t)}catch(e){return console.warn("Failed to read from localStorage:",e),null}},OC=(t,e)=>{try{localStorage.setItem(t,e)}catch(r){console.warn("Failed to save to localStorage:",r)}},vs=({children:t,allowedRoles:e})=>{const{user:r,role:n,loading:s}=gi();return s?o.jsx("div",{className:"h-screen flex items-center justify-center",children:o.jsx(O,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):n?e&&!e.includes(n)?o.jsx(Qh,{to:n==="guest"?"/schedule":"/dashboard",replace:!0}):o.jsx(o.Fragment,{children:t}):o.jsx(Qh,{to:"/login",replace:!0})},X6=()=>{const{role:t,loading:e}=gi();return e?null:t==="guest"?o.jsx(Qh,{to:"/schedule",replace:!0}):o.jsx(Qh,{to:"/dashboard",replace:!0})},J6=()=>{const[t,e]=T.useState(!1),[r,n]=T.useState(MC("theme")||"light"),[s,A]=T.useState(MC("new_year_mode")==="true"),{isLoading:i}=Yn(),{logout:l,role:a,user:c}=gi();if(JO({enabled:!0,threshold:50}),T.useEffect(()=>{const f=()=>{window.innerWidth>=1024&&e(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),T.useEffect(()=>{r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),OC("theme",r)},[r]),T.useEffect(()=>{s?document.documentElement.classList.add("new-year-mode"):document.documentElement.classList.remove("new-year-mode"),OC("new_year_mode",String(s))},[s]),i)return o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:o.jsx(O,{name:"Loader",className:"animate-spin text-indigo-600",size:48})});const h=[{to:"/dashboard",label:" ",icon:"Home",roles:["admin","teacher","canteen"]},{to:"/schedule",label:" 1 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/schedule2",label:" 2 .",icon:"Calendar",roles:["admin","teacher","guest"]},{to:"/substitutions",label:"",icon:"Repeat",roles:["admin"]},{to:"/duty",label:"",icon:"Shield",roles:["admin"]},{to:"/nutrition",label:"",icon:"Coffee",roles:["admin","teacher","canteen"]},{to:"/directory",label:"",icon:"BookOpen",roles:["admin"]},{to:"/reports",label:"",icon:"BarChart2",roles:["admin"]},{to:"/export",label:"",icon:"Download",roles:["admin"]},{to:"/admin",label:"",icon:"Settings",roles:["admin"]}].filter(f=>f.roles.includes(a||""));return o.jsxs("div",{className:`flex h-screen bg-slate-50 dark:bg-dark-950 overflow-hidden transition-colors duration-300 ${s?"festive-bg":"mesh-gradient-bg"}`,children:[s&&o.jsx("div",{className:"snow-overlay no-print"}),t&&o.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-50 lg:hidden",onClick:()=>e(!1)}),o.jsx("aside",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 lg:w-64 bg-white/80 dark:bg-dark-800/90 backdrop-blur-xl border-r border-slate-200/50 dark:border-slate-700/50 transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"} no-print shadow-2xl lg:shadow-none overflow-hidden`,children:o.jsxs("div",{className:"h-full flex flex-col relative",children:[s&&o.jsx("div",{className:"bg-garland"}),o.jsxs("div",{className:"p-6 flex items-center gap-3 border-b border-slate-100 dark:border-slate-700 pt-8",children:[o.jsxs("div",{className:"bg-indigo-600 p-2.5 rounded-xl text-white relative shadow-lg shadow-indigo-200 dark:shadow-none transition-colors duration-500",children:[o.jsx(O,{name:"GraduationCap",size:24}),s&&o.jsx("div",{className:"absolute -top-3 -right-3 text-2xl animate-bounce",children:""})]}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-black text-slate-800 dark:text-white",children:" Pro22"}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:" V2.0"})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto custom-scrollbar",children:h.map(f=>o.jsxs(bA,{to:f.to,onClick:()=>e(!1),className:({isActive:p})=>`
                                    group flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-semibold transition-all relative
                                    ${p?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:text-slate-700 dark:hover:text-slate-300"}
                                `,children:[o.jsx(O,{name:f.icon,size:18,className:"flex-shrink-0"}),o.jsx("span",{className:"flex-1 truncate",children:f.label})]},f.to))}),o.jsx("div",{className:"hidden lg:block mb-2",children:o.jsx(qO,{})}),o.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-2",children:[o.jsx("div",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase truncate max-w-[120px]",children:c&&c.email||""}),o.jsx("button",{onClick:l,className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"",children:o.jsx(O,{name:"LogOut",size:16})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("button",{onClick:()=>n(r==="light"?"dark":"light"),className:"flex items-center justify-center gap-2 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:text-indigo-600 transition-all border border-slate-100 dark:border-slate-600 active:scale-95 shadow-sm",children:r==="light"?o.jsx(O,{name:"Moon",size:18}):o.jsx(O,{name:"Sun",size:18})}),o.jsx("button",{onClick:()=>A(!s),className:`flex items-center justify-center gap-2 p-2.5 rounded-xl transition-all border active:scale-95 shadow-sm ${s?"bg-red-600 text-white border-red-700":"bg-slate-50 dark:bg-slate-700 text-slate-500 border-slate-100 dark:border-slate-600 hover:text-red-500"}`,title:" ",children:o.jsx(O,{name:"Snowflake",size:18,className:s?"animate-spin-slow":""})})]})]})]})}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-transparent relative",children:[o.jsxs("header",{className:"lg:hidden p-4 flex items-center gap-3 bg-white/80 dark:bg-dark-800/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 no-print sticky top-0 z-30",children:[o.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-lg",children:" Pro22"}),s&&o.jsx("div",{className:"ml-auto text-xl",children:""})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4 lg:p-8 pb-24 lg:pb-8 custom-scrollbar relative",children:o.jsx(HQ,{})}),o.jsx(XO,{onMenuClick:()=>e(!0),role:a})]})]})},Y6=()=>{const[t,e]=T.useState(null),[r,n]=T.useState(!0),[s]=AN(),A=s.get("id");return T.useEffect(()=>{A?(n(!0),br.getPublicData(A).then(i=>{const l={...$r,...i,settings:{...$r.settings,...i==null?void 0:i.settings}};e(l),n(!1)}).catch(i=>{console.error("Failed to load public data:",i),e(null),n(!1)})):(n(!1),e(null))},[A]),r?o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-50 dark:bg-dark-950",children:o.jsx(O,{name:"Loader",className:"animate-spin text-indigo-600",size:48})}):t?o.jsx(Hk,{initialData:t,children:o.jsx(Gk,{children:o.jsx(zk,{children:o.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-dark-950 flex flex-col",children:[o.jsx("header",{className:"bg-white dark:bg-dark-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between sticky top-0 z-50 no-print shadow-sm",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:o.jsx(O,{name:"GraduationCap",size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-black text-slate-800 dark:text-white text-lg leading-none",children:" 22"}),o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:" "})]})]})}),o.jsx("main",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:o.jsx(Zk,{readOnly:!0})})]})})})}):o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center p-8",children:[o.jsx(O,{name:"AlertTriangle",size:64,className:"text-red-500 mb-4"}),o.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"  "}),o.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"     ."})]})};function Z6(){return o.jsx(GO,{children:o.jsx(HO,{children:o.jsx(Hk,{children:o.jsx(Gk,{children:o.jsx(zk,{children:o.jsx(ZQ,{children:o.jsxs(KQ,{children:[o.jsx(Zr,{path:"/login",element:o.jsx(q6,{})}),o.jsxs(Zr,{path:"/",element:o.jsx(vs,{children:o.jsx(J6,{})}),children:[o.jsx(Zr,{index:!0,element:o.jsx(X6,{})}),o.jsx(Zr,{path:"dashboard",element:o.jsx(vs,{allowedRoles:["admin","teacher","canteen"],children:o.jsx(YO,{})})}),o.jsx(Zr,{path:"schedule",element:o.jsx(HC,{semester:1})}),o.jsx(Zr,{path:"schedule2",element:o.jsx(HC,{semester:2})}),o.jsx(Zr,{path:"substitutions",element:o.jsx(vs,{allowedRoles:["admin"],children:o.jsx(k6,{})})}),o.jsx(Zr,{path:"duty",element:o.jsx(vs,{allowedRoles:["admin"],children:o.jsx($6,{})})}),o.jsx(Zr,{path:"nutrition",element:o.jsx(vs,{allowedRoles:["admin","teacher","canteen"],children:o.jsx(W6,{})})}),o.jsx(Zr,{path:"directory",element:o.jsx(vs,{allowedRoles:["admin"],children:o.jsx(T6,{})})}),o.jsx(Zr,{path:"admin",element:o.jsx(vs,{allowedRoles:["admin"],children:o.jsx(F6,{})})}),o.jsx(Zr,{path:"reports",element:o.jsx(vs,{allowedRoles:["admin"],children:o.jsx(z6,{})})}),o.jsx(Zr,{path:"export",element:o.jsx(vs,{allowedRoles:["admin"],children:o.jsx(G6,{})})})]}),o.jsx(Zr,{path:"/public",element:o.jsx(Y6,{})})]})})})})})})})}const HC=({semester:t=1})=>{const{role:e}=gi();return o.jsx(Zk,{readOnly:e!=="admin",semester:t})};jp.createRoot(document.getElementById("root")).render(o.jsx(Cs.StrictMode,{children:o.jsx(Z6,{})}));
